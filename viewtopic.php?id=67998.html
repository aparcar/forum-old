<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> patching mac80211</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p340737">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kasati</div>
					<div class="post-datetime">
						10 Oct 2016, 01:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody,</p><p>so I&#039;ve been tinkering around with mac80211for the past several days. I created a patch using quilt that removes the channel tx limit check in mlme.c. <br />The reason for this are high losses due to&nbsp; my antenna cable running all the way to the roof. The rooftop antenna is connected to an AWUS036H which I used to plug into my windows box where I could just manually set the txpower in the driver. Now, it&#039;s connected to a TP-Link TP1043ND v. 2, everything works just fine, but the transfer rate is way worse because of OpenWRT insisting on the channel limit. I do not control the AP so I can&#039;t change its configuration either. </p><p>So... I drop the patch in buildroot/target/linux/ar71xx/patches-3.18/<br />If I run make target/linux/{clean,prepare} the source looks good. <br />Then, I build the system image using make world, flash the device, and... Still the same thing, still getting &quot;Limiting TX power to 17 dbm as advertised by AP-BSSID&quot;. <br />So obviously I&#039;m doing something wrong.&nbsp; It&#039;s my first patch so maybe it&#039;s a rookie thing. <br />Can anybody help me out here? Appreciate your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340798">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						10 Oct 2016, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>Please read *and* understand</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=3474&amp;login=1">https://forum.openwrt.org/viewtopic.php â€¦ mp;login=1</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340808">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kasati</div>
					<div class="post-datetime">
						10 Oct 2016, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>thanks, but I&#039;ve been through a lot of wifi theory already. </p><p>Regarding the issue I was actually asking about: <br />So I managed to solve this myself, apparently patching the kernel itself is wrong, since there is also a separate package called &quot;mac80211&quot;. Patched that, removed the function, et voila, now I can manually set whatever dbm level is legal in my region. Maybe that&#039;s of help to someone else.</p>											<p class="post-edited">(Last edited by <strong>kasati</strong> on 10 Oct 2016, 22:06)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>