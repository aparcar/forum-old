<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 22 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=24.html">24</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p94964">
				<div class="post-metadata">
					<div class="post-num">Post #526</div>
					<div class="post-author">DaBigMac</div>
					<div class="post-datetime">
						26 Sep 2009, 13:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rviktor wrote:</cite><blockquote><p>hi!<br />I&#039;m new here, so please don&#039;t flame me if what I&#039;m asking is bullshit^^.</p><p>Is there any chance that the DIR-615 A1 will be supported? If I saw it correctly it should have the same type of cpu too, with the same amount of ram/flash.<br />(edit: grammar)</p></blockquote></div><p>Nothing bullshit about the question. Very valid and timely. Since we&#039;re having some success with the WRT350n v2.x models and since the wireless card is one of the few headaches left, it&#039;s about time some people stepped up to the plate, taken the hard work done by kaloz and others with the kernel and done something about some routers with slightly different hardware configurations..</p><p>That being said.. different chipset for the switch (Marvell 88E661-LAJ1) and a different wireless card chipset (Marvel 88W8361 Mini-PCI). SO the absolute short answer is &#039;YES, it (probably) will be, but not at this time.&quot;</p><p>The CPU side of things will probably be ok, BUT if the switch doesn&#039;t work and the wireless doesn&#039;t work.. then you have an.. expensive LED FLashlight? (and not even a very bright one..)</p><p>On the plus side, the Switch Chipsets are both Marvell, so at a guess, they MAY be compatible. </p><p>With the wireless card, it would appear that it is removable and interchangeable, but even that may be unnecessary as a quick google search reveals that this chipset is more commonly known as a &#039;Marvell TopDog&#039; chipset and that there are numerous linux drivers for it.</p><p>Bundling all the bits together will be a matter of finding someone with the right hardware, the right knowledge and the willingness to take some risks. I don&#039;t think it&#039;s VERY risky, if you have some linux knowledge, then you should be ok..</p><p>Some points to confirm before you go too much further however, get a serial output going.. Find out if your router also uses uBoot as it&#039;s CFE, which I am relatively sure it will. If it does, try and see if you can find out if the mtd (memory allocation sizes) allocation address for uboot is the same as with the linksys router, just so you can be sure that you do not overwrite the uboot partition or the ercomm part.</p><p>Checking those things is quite safe and *very* useful for the developers in this forum, should you be able to get it done.</p><p>Enjoy!</p><p>DBM</p>											<p class="post-edited">(Last edited by <strong>DaBigMac</strong> on 26 Sep 2009, 15:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94973">
				<div class="post-metadata">
					<div class="post-num">Post #527</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						26 Sep 2009, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>@rviktor:<br />Read the first pages of this thread and see how Kaloz, DirkNL, StrikerNL got the WRT350Nv2 into the Linux kernel source with help from Marvell itself.<br />Also get the GPL source for your router, if it is not on the manufacturer&#039;s homepage then mail them.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 26 Sep 2009, 23:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94976">
				<div class="post-metadata">
					<div class="post-num">Post #528</div>
					<div class="post-author">rviktor</div>
					<div class="post-datetime">
						27 Sep 2009, 00:04					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>% tip ucom0
U-Boot 1.1.1 (Jan 19 2007 - 11:08:07)
CAMEO uBoot Linux Loader version: 1.3.0.0

DRAM CS[0] base 0x00000000   size  32MB
DRAM Total size  32MB
before entry mvFlashInit
Flash: flashStructGet manu 0x89 id 0x17
INTEL 28F640J3A (64 Mbit)
Size:  8 MB,Bus Width: 1, device Width: 1.
Flash base: 0xff800000,Number of Sectors: 64 Type: REGULAR.
[8192kB@ff800000] Flash:  8 MB
Addresses 20M - 0M are saved for the U-Boot usage.
Mem malloc Initialization (20M - 16M): Done
*** Warning - bad CRC, using default environment


Soc: 88F5181 B1
CPU: ARM926 (Rev 0) running @ 500Mhz
SysClock = 166Mhz , TClock = 166Mhz


USB 0: host mode
PCI 0: PCI Express Root Complex Interface
PCI 1: Conventional PCI, speed = 33000000
Net:   egiga0 [PRIME]
Hit any key to stop autoboot:  0
Marvell&gt;&gt;</code></pre></div><p>It wasn&#039;t me who did it, found it at: <a href="http://bsdimp.blogspot.com/2008/06/adding-serial-port-to-d-link-dir-615.html">http://bsdimp.blogspot.com/2008/06/addi … r-615.html</a><br />GPL source available at: <a href="ftp://ftp.dlink.com/GPL/DIR-615_revA/DIR615A1-GPL.tar.gz">ftp://ftp.dlink.com/GPL/DIR-615_revA/DI … GPL.tar.gz</a></p><div class="codebox"><pre><code>&lt;0&gt;

U-Boot 1.1.1 (Jan 19 2007 - 11:08:07)
CAMEO uBoot Linux Loader version: 1.3.0.0

DRAM CS[0] base 0x00000000   size  32MB 
DRAM Total size  32MB 
before entry mvFlashInit 
Flash: flashStructGet manu 0x89 id 0x17 
INTEL 28F640J3A (64 Mbit)
Size:  8 MB,Bus Width: 1, device Width: 1.
Flash base: 0xff800000,Number of Sectors: 64 Type: REGULAR.
  Sector Start Addresses:
    00000000      00020000      00040000      00060000      00080000     
    000a0000      000c0000      000e0000      00100000      00120000     
    00140000      00160000      00180000      001a0000      001c0000     
    001e0000      00200000      00220000      00240000      00260000     
    00280000      002a0000      002c0000      002e0000      00300000     
    00320000      00340000      00360000      00380000      003a0000     
    003c0000      003e0000      00400000      00420000      00440000     
    00460000      00480000      004a0000      004c0000      004e0000     
    00500000      00520000      00540000      00560000      00580000     
    005a0000      005c0000      005e0000      00600000      00620000     
    00640000      00660000      00680000      006a0000      006c0000     
    006e0000      00700000      00720000      00740000      00760000 (RO)
    00780000 (RO) 007a0000 (RO) 007c0000 (RO) 007e0000 (RO)
[8192kB@ff800000] Flash:  8 MB
Addresses 20M - 0M are saved for the U-Boot usage.
Mem malloc Initialization (20M - 16M): Done
*** Warning - bad CRC, using default environment


Soc: 88F5181 B1
CPU: ARM926 (Rev 0) running @ 500Mhz 
SysClock = 166Mhz , TClock = 166Mhz 


USB 0: host mode
PCI 0: PCI Express Root Complex Interface
PCI 1: Conventional PCI, speed = 33000000
Net:   egiga0 [PRIME]
Hit any key to stop autoboot:  0 
### JFFS2 loading &#039;uImage&#039; to 0x400000
Scanning JFFS2 FS: ..... done.

### JFFS2 load complete: 1099492 bytes loaded to 0x400000
## Booting image at 00400000 ...
   Image Name:   Linux-2.4.27-vrs1
   Created:      2007-07-26   6:29:23 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1099428 Bytes =  1 MB
   Load Address: 00008000
   Entry Point:  00008000
   Verifying Checksum ... OK
OK

Starting kernel ...

Uncompressing Linux.......................................................................... done, booting the kernel.
ZLinux version 2.4.27-vrs1 (root@localhost.localdomain) (gcc version 3.4.4 (release) (CodeSourcery ARM 2005q3-1)) #2 Thu Jul 26 14:28:55 CST 2007
CPU: ARM926EJ-Sid(wb) revision 0
Machine: MV-88fxx81
Using UBoot passing parameters structure
Sys Clk = 166000000, Tclk = 166000000


- Warning - This LSP release was tested only with U-Boot release 1.7.0 

On node 0 totalpages: 8192
zone(0): 8192 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: console=ttyS0,115200 mtdparts=phys_mapped_flash:6m(root),1m@6m(nvram),1m@7m(uboot)ro root=/dev/mtdblock1 rw ip=192.168.0.1:192.168.0.100:::DB88FXX81:eth0:none
Calibrating delay loop... 331.77 BogoMIPS
Memory: 32MB 0MB 0MB 0MB = 32MB total
Memory: 29884KB available (2034K code, 366K data, 88K init)
Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)
Inode cache hash table entries: 2048 (order: 2, 16384 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 8192 (order: 3, 32768 bytes)
CPU: Testing write buffer: pass
POSIX conformance testing by UNIFIX
init hw started.

CPU Interface
-------------
SDRAM_CS0 ....base 00000000, size  32MB 
SDRAM_CS1 ....disable
SDRAM_CS2 ....disable
SDRAM_CS3 ....disable
PEX0_MEM ....base e0000000, size 128MB 
PEX0_IO ....base f2000000, size   1MB 
PCI0_MEM ....base e8000000, size 128MB 
PCI0_IO ....base f2100000, size   1MB 
INTER_REGS ....base f1000000, size   1MB 
DEVICE_CS0 ....no such
DEVICE_CS1 ....no such
DEVICE_CS2 ....no such
DEV_BOOCS ....base f4000000, size  16MB 
PCI: bus0: Fast back to back transfers enabled
HW already initialized.
PCI: bus1: Fast back to back transfers enabled
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
 bankwidth 1, base f4000000, size 1000000

  Marvell Development Board (LSP Version 0.0.102)-- RD-88F5181L-VOIP-FE 

 Detected Tclk 166000000 and SysClk 166000000 
Starting kswapd
Journalled Block Device driver loaded
NTFS driver v1.1.22 [Flags: R/O]
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xf1012000 (irq = 3) is a 16550A
HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
N_HDLC line discipline registered.
Marvell Gigabit Ethernet Driver &#039;egiga&#039;:
  o Ethernet descriptors in DRAM
  o DRAM SW cache-coherency
  o Loading network interface 
  o Using switch header mode
qdInit 
qdStart: CPU port 0x5 
Switch driver initialized
Can&#039;t get netConfig: Use default
UNM is not initialized yet
2 VLANs created: CpuPortMask = 0x1f
vid=0:  DISABLED(0), portMask=0x7c0, portNum=5
vid=1:       VLAN_1, portMask=0x10, portNum=1
vid=2:       VLAN_2, portMask=0x0f, portNum=4
vid=12: ISOLATED(12), portMask=0x00, portNum=0
Port - Vlan
 0  - VLAN_2
 1  - VLAN_2
 2  - VLAN_2
 3  - VLAN_2
 4  - VLAN_1
 5  - VLAN_ALL
load virtual interface vid = 1
 register if with name  
Init the hal
: Ilegal MTU value 1500,  rounding MTU to: 1506 
 if eth0 registered
load virtual interface vid = 2
 register if with name  
 if eth1 registered
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
SCSI subsystem driver Revision: 1.00
physmap flash device: 1000000 at f4000000
cfi_cmdset_0001: Erase suspend on write enabled
Using buffer write method
Using covid = 1 mvBindings[priv-&gt;vid]-&gt;header[0] = 24 
IP-Config: Guessing netmask 255.255.255.0
IP-Config: Complete:
      device=eth0, addr=192.168.0.1, mask=255.255.255.0, gw=255.255.255.255,
     host=DB88FXX81, domain=, nis-domain=(none),
     bootserver=192.168.0.100, rootserver=192.168.0.100, rootpath=
ip_conntrack version 2.1 (256 buckets, 2048 max) - 308 bytes per conntrack
ip_conntrack_rtsp v0.01 loading
ip_nat_rtsp v0.01 loading
ip_conntrack_pptp version 1.9 loaded
ip_nat_pptp version 1.5 loaded
ip_tables: (C) 2000-2002 Netfilter core team
ipt_time loading
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
Fast Floating Point Emulator V0.94M by Peter Teichmann.
cramfs: wrong magic
FAT: bogus logical sector size 34276
UMSDOS: msdos_read_super failed, mount aborted.
FAT: bogus logical sector size 34276
FAT: bogus logical sector size 34276
CLEANMARKER node found at 0x00010000, not first node in block (0x00000000)
CLEANMARKER node found at 0x00030000, not first node in block (0x00020000)
CLEANMARKER node found at 0x00050000, not first node in block (0x00040000)
CLEANMARKER node found at 0x00070000, not first node in block (0x00060000)
CLEANMARKER node found at 0x00090000, not first node in block (0x00080000)
CLEANMARKER node found at 0x000b0000, not first node in block (0x000a0000)
CLEANMARKER node found at 0x000d0000, not first node in block (0x000c0000)
CLEANMARKER node found at 0x000f0000, not first node in block (0x000e0000)
CLEANMARKER node found at 0x00110000, not first node in block (0x00100000)
CLEANMARKER node found at 0x00130000, not first node in block (0x00120000)
CLEANMARKER node found at 0x00150000, not first node in block (0x00140000)
CLEANMARKER node found at 0x00170000, not first node in block (0x00160000)
CLEANMARKER node found at 0x00190000, not first node in block (0x00180000)
CLEANMARKER node found at 0x001b0000, not first node in block (0x001a0000)
CLEANMARKER node found at 0x001d0000, not first node in block (0x001c0000)
CLEANMARKER node found at 0x001f0000, not first node in block (0x001e0000)
CLEANMARKER node found at 0x00210000, not first node in block (0x00200000)
CLEANMARKER node found at 0x00230000, not first node in block (0x00220000)
CLEANMARKER node found at 0x00250000, not first node in block (0x00240000)
CLEANMARKER node found at 0x00270000, not first node in block (0x00260000)
CLEANMARKER node found at 0x00290000, not first node in block (0x00280000)
CLEANMARKER node found at 0x002b0000, not first node in block (0x002a0000)
CLEANMARKER node found at 0x002d0000, not first node in block (0x002c0000)
CLEANMARKER node found at 0x002f0000, not first node in block (0x002e0000)
CLEANMARKER node found at 0x00310000, not first node in block (0x00300000)
CLEANMARKER node found at 0x00330000, not first node in block (0x00320000)
CLEANMARKER node found at 0x00350000, not first node in block (0x00340000)
CLEANMARKER node found at 0x00370000, not first node in block (0x00360000)
CLEANMARKER node found at 0x00390000, not first node in block (0x00380000)
CLEANMARKER node found at 0x003b0000, not first node in block (0x003a0000)
CLEANMARKER node found at 0x003d0000, not first node in block (0x003c0000)
CLEANMARKER node found at 0x003f0000, not first node in block (0x003e0000)
CLEANMARKER node found at 0x00410000, not first node in block (0x00400000)
CLEANMARKER node found at 0x00430000, not first node in block (0x00420000)
CLEANMARKER node found at 0x00450000, not first node in block (0x00440000)
VFS: Mounted root (jffs2 filesystem).
Freeing init memory: 88K
8ZZZZ

BusyBox v1.1.0 (2007.07.26-06:29+0000) Built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

/ # pc : [&lt;40146968&gt;]    lr : [&lt;400ca0b8&gt;]    Not tainted
sp : befaf8a0  ip : 00000001  fp : 40079bf8
r10: 00000003  r9 : 40079bb8  r8 : 00050500
r7 : befb57d0  r6 : 00026740  r5 : befb57cf  r4 : 00026747
r3 : 00000075  r2 : 00000007  r1 : 00026741  r0 : 400ca0b7
Flags: nzCv  IRQs on  FIQs on  Mode USER_32  Segment user
Control: A005317F  Table: 01DF0000  DAC: 00000015

/ # help

Built-in commands:
-------------------
    .     :     alias     bg     break     cd     chdir     continue 
    eval     exec     exit     export     false     fg     hash     help 
    jobs     kill     let     local     pwd     read     readonly 
    return     set    shift     times     trap     true     type 
    ulimit     umask     unalias     unset     wait

/ # ls
bin             lib             sbin            var
dev             linuxrc         tmp             wsc_config.txt
etc             mnt             uImage          www
flash           proc            usr

/ # ps
  PID  Uid     VmSize Stat Command
    1 0           548 S   init
    2 0               SW  [keventd]
    3 0               SWN [ksoftirqd_CPU0]
    4 0               SW  [kswapd]
    5 0               SW  [bdflush]
    6 0               SW  [kupdated]
    7 0               SW  [mtdblockd]
    8 0               SW  [khubd]
    9 0               SWN [jffs2_gcd_mtd1]
   16 0           704 S   /bin/sh
   21 0               SWN [jffs2_gcd_mtd2]
   27 0           640 R   ps

/ # ls bin
addgroup    date        ln          mv          rm          umount
adduser     dmesg       login       netstat     sh          uname
ash         dumpleases  ls          nvram       sleep       usleep
busybox     echo        mkdir       pidof       sync
cat         hostapd     mknod       ping        touch
chmod       hostname    mktemp      ps          true
cp          kill        mount       pwd         udhcpc

/ # ls /usr/bin
[          cmp        head       killall    readlink   test       uniq
[[         deallocvt  hexdump    logger     reset      time       uptime
basename   env        id         openvt     tail       tr         wc
chvt       free       install    passwd     tee        tty        which

/ # free
              total         used         free       shared      buffers
  Mem:        29972         4156        25816            0            0
 Swap:            0            0            0
Total:        29972         4156        25816

/ # ls sbin
bpalogin          iptables          ntpclient         route
brctl             iptables-restore  ntptime           swapoff
dcc               iptables-save     pivot_root        swapon
dnsmasq           klogd             pppd              syslogd
gpio              l2tp-control      pppoe             tftpd
httpd             l2tpd             pppoe-discovery   udhcpd
ifconfig          lanmon            pptp              upnpd
igmpproxy         lld2d             rc                wcnd
init              lsmod             reboot
insmod            noip2             rmmod

/ # ls proc
1              8              filesystems    meminfo        scsi
16             9              fs             misc           self
2              bus            interrupts     modules        slabinfo
21             cmdline        iomem          mounts         stat
3              cpu            ioports        mtd            swaps
37             cpuinfo        kcore          net            sys
4              crypto         kmsg           partitions     sysvipc
5              devices        ksyms          pci            tty
6              driver         loadavg        resource_dump  uptime
7              execdomains    locks          rgcfgio        version

/ # ls tmp
dev       log       net-snmp  sbin      var
etc       misc      run       tmp       wsc

/ #

/ # ls tmp
 dev       log       net-snmp  sbin      var
 etc       misc      run       tmp       wsc
/ # echo &quot;test&quot; &gt; /tmp/test
/ # cat /tmp/test
 test
/ # echo &quot;more...&quot; &gt;&gt; /tmp/test
/ # cat /tmp/test
 test
 more...
/ # ls tmp
 dev       log       net-snmp  sbin      tmp       wsc
 etc       misc      run       test      var

/ #

/ # tftpd
TFTP main
standard_tftp_server launched on port 69.
Ctrl-C

/ #

/ # gpio
usage: gpio [get name] [set name value] [name = STATUS_LED | WLAN_LED | USB_LED
| SYSTEM] [value = on | off | status | blink]

/ # gpio get USB_LED

/ # gpio set STATUS_LED on

/ #</code></pre></div><p>edit: found another UART Serial Boot Loader Output: <a href="http://jlc.iwarp.com/DIR615.html">http://jlc.iwarp.com/DIR615.html</a></p>											<p class="post-edited">(Last edited by <strong>rviktor</strong> on 27 Sep 2009, 00:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94978">
				<div class="post-metadata">
					<div class="post-num">Post #529</div>
					<div class="post-author">stevellion</div>
					<div class="post-datetime">
						27 Sep 2009, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>OK, I&#039;ve bricked it..&nbsp; is there any quicker fix than opening it, soldering in a serial connector, buying the special cable and connecting to it that way?</p><p>What did I do:<br />1) Web uploaded the latest of maddes&#039;s images - loaded fine.<br />2) Telnet on, edit the /etc/system/config/network file to match my existing setup and hey presto, basically working.<br />I&#039;m getting out to the net and things are looking positive.<br />3) telnet back on after a reboot to try and install luci-admin-all.&nbsp; it can&#039;t find the package.<br />4) did opkg update<br />5) did opkg upgrade&nbsp; (just thinking it&#039;s like ubuntu....) - it seemed to hang after downloading, then a couple of mins later...<br />So I power cycled it.. (yes, I know, I either shouldn&#039;t have done it, or been more patient)</p><p>Brick..&nbsp; well. network lights appear when I plug in a port, but not giving any dhcp addresses out.<br />(or picking any up via the WAN port)</p><p>Any suggestions as to what I could try in the interim? - or shall I just get my soldering iron out?</p><p>Cheers!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94979">
				<div class="post-metadata">
					<div class="post-num">Post #530</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						27 Sep 2009, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>@stevellion:<br />Please read the complete thread (yes, this takes some time) and you will find out why &quot;opkg upgrade&quot; is in the OpenWrt wiki on the &quot;stupid things&quot; list.<br />And you will find information about recovery via download mode from drizzt81 in post <a href="http://forum.openwrt.org/viewtopic.php?pid=93665#p93665">#436</a> and from DaBigMac in post <a href="https://forum.openwrt.org/viewtopic.php?pid=94830#p94830">#524</a>.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 29 Nov 2009, 13:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94995">
				<div class="post-metadata">
					<div class="post-num">Post #531</div>
					<div class="post-author">stevellion</div>
					<div class="post-datetime">
						27 Sep 2009, 12:25					</div>
				</div>
				<div class="post-content content">
					<p>Yep.. I kind of figured that.<br />I&#039;ll do some more reading.</p><p>At least I realised I was stupid, once I&#039;d done it. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thankfully, I&#039;m typing this, so I do have a backup router here..</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95005">
				<div class="post-metadata">
					<div class="post-num">Post #532</div>
					<div class="post-author">bigjezza</div>
					<div class="post-datetime">
						27 Sep 2009, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>thanks DaBigMac for your instructions... lol...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95014">
				<div class="post-metadata">
					<div class="post-num">Post #533</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						27 Sep 2009, 18:29					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately sysupgrade support for WRT350Nv2 is not in the trunk yet.<br />If you already used sysupgrade on your WRT350Nv2, then please add a comment about your experience (works, fails) to its ticket over the next few days.<br />Keep your comment short and simple and please use your real name.<br />No &quot;bombing&quot;, no &quot;me too&quot;, that would be counter-productive.<br />Hopefully this will make the decision to add it to the trunk easier for the OpenWrt maintainers.<br /><a href="https://dev.openwrt.org/ticket/5719">https://dev.openwrt.org/ticket/5719</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95061">
				<div class="post-metadata">
					<div class="post-num">Post #534</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						29 Sep 2009, 07:26					</div>
				</div>
				<div class="post-content content">
					<p>¿Does anyone have CIFS working?<br />I ask here because I assume everybody else has it working and is a platform specific bug.<br />I try this:<br /></p><div class="quotebox"><blockquote><p>opkg update<br />opkg install kmod-fs-cifs<br />lsmod | grep cif<br />insmod cifs<br />mkdir /tmp/samba<br />mount -t cifs //192.168.1.132/routerc /tmp/samba -o ip=192.168.1.132,user=john</p></blockquote></div><p>Router reboot by itself.<br />Then, after reboot, try this:</p><div class="quotebox"><blockquote><p>opkg update<br />opkg install cifsmount<br />mkdir /tmp/samba<br />mount.cifs //192.168.1.132/routerc /tmp/samba -o user=Router,password=</p></blockquote></div><p>Router reboot by itself. (password prompt spected)<br />Last try:<br /></p><div class="quotebox"><blockquote><p>opkg update<br />opkg install mount-utils</p></blockquote></div><p>Spit a warning about files already exist: mount &amp; umount created by busybox.<br />Anyway:</p><div class="quotebox"><blockquote><p>mount -t cifs //192.168.1.132/routerc /tmp/samba -o ip=192.168.1.132,user=john</p></blockquote></div><p>Router reboot by itself.<br /></p><div class="quotebox"><blockquote><p>OpenWrt Kamikaze bleeding edge, r17427<br /># cat /proc/version<br />Linux version 2.6.30.5 (buildbot@localhost.localdomain) (gcc version 4.1.2) #5 Fri Aug 28 11:26:22 CDT 2009</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95063">
				<div class="post-metadata">
					<div class="post-num">Post #535</div>
					<div class="post-author">Watha</div>
					<div class="post-datetime">
						29 Sep 2009, 11:07					</div>
				</div>
				<div class="post-content content">
					<p>Which repository did you download kmod-fs-cifs from? If you&#039;re using maddes.b&#039;s images, you need to use his repository for kernel modules, not the main openwrt one, otherwise you&#039;ll get kernel panics.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95070">
				<div class="post-metadata">
					<div class="post-num">Post #536</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						29 Sep 2009, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>I use a local mirror of r17427 packages, downloaded at that time. A kmod-something other than r17427 may effectively kernel panics.<br />Do you have CIFS working? After 20 day uptime maybe is time to upgrade, I have 18 hours uptime now anyway...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95071">
				<div class="post-metadata">
					<div class="post-num">Post #537</div>
					<div class="post-author">Watha</div>
					<div class="post-datetime">
						29 Sep 2009, 14:56					</div>
				</div>
				<div class="post-content content">
					<p>No, I haven&#039;t tried to get CIFS working at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95113">
				<div class="post-metadata">
					<div class="post-num">Post #538</div>
					<div class="post-author">drizzt81</div>
					<div class="post-datetime">
						30 Sep 2009, 13:14					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone figured out a way to make the WLAN work with older HW? That is the &quot;final&quot; barrier preventing me from using this router as a main device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95172">
				<div class="post-metadata">
					<div class="post-num">Post #539</div>
					<div class="post-author">roubaozi</div>
					<div class="post-datetime">
						1 Oct 2009, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>DaBigMac: Does this(SerialComm) work on a WNR854t? I am ready to brick my WNR854t once I get the replacement mini-PCI wireless card.</p><p>Thanks.</p><br /><div class="quotebox"><cite>DaBigMac wrote:</cite><blockquote><p>Bricked WRT350n V2.x Recovery HOWTo</p><p>DO YOU THINK YOU HAVE BRICKED YOUR LINKSYS WRT350n v2.x ROUTER??</p><p>OK! Well I think I have some good news! </p><p>I&#039;ve seemingly found a very very simple way to recover one&#039;s router to the original firmware (and perhaps later, even OpenWRT) without needing to open the case at all and without needing to use a serial interface! It&#039;s all done via a very simple point and click graphical program and a simple sequence with the reset button..</p><p>The inspiration came from a post by drizzt81 explaining how his router had entered into what is described as &#039;download mode&#039;. However users who have seemingly &#039;bricked&#039; their routers and do not have a serial connection would have no way of knowing if their router is in &#039;download mode&#039; or not.</p><p>The solution was explained in a step by step guide by drizzt81 who used information gathered from previous posts from people who I would LIKE to credit as sources, but I do not have their posts handy at this point, I mean no disrespect to the hard working folk who have given their time and knowledge in this forum. The process is VERY VERY SIMPLE and requires no special hardware and in fact doesn&#039;t require any advanced computer knowledge either! A total beginner can expect to successfully recover their router using this method.</p><p>Step 1:</p><p>Software requirements</p><p>Required Knowledge:</p><p>* Usage of a .ZIP utility to extract some of the installation files.<br />* Basic software installation knowledge.</p><p>Download a .zip file containing the &#039;Upgrade Utility&#039; program from <a href="http://www.everbesthk.com/8-download/sercomm/firmware/NU54/Upgrade_207_XP.zip">this link</a> and extract the file Upgrade_207_XP.exe then run that file to install the &#039;Upgrade Utility&#039; application. (Scanning for nasty stuff 1st is recommended, just in case as this is not hosted in Linksys&#039;s website..) Please note that if you are using Windows Vista, you must select to run the application with &#039;Windows XP, Service pack 2 Compatibility Mode&#039; enabled.</p><p>Download the <a href="http://sites.google.com/site/relghuar/Home/full-image.bin">full-image.bin file(provided by relghuar)</a> and put it somewhere you can remember, (Desktop maybe?). (Thanks to relghuar for extracting and hosting this file, please let me know if you object to me direct linking to it.) The original post for the process by which relghuar extracted the image and file location can be found <a href="http://forum.openwrt.org/viewtopic.php?pid=74729#p74729">here</a> (WARNING: DEADLY BORING TECHY STUFF!)</p><p>Step 2:</p><p>Cabling</p><p>Required Knowledge:</p><p>* Be able to locate the LAN ports on your router and be able to tell them apart from the WAN port. (LAN ports are (damn it, I am color blind! is it.. yellow? edit(maddes.b informs me that the ports are in fact orange, DOH!)) anyway, the WAN port is definitely blue.. Reasonably speaking here, if you managed to have the technical savvy to brick your router by installing OpenWRT, I think it&#039;s reasonable to assume you can tell the difference between a LAN and WAN port.. <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>Directly connect your computer to one of the LAN ports on your router, I chose port 1, but I assume any LAN port will work. (I am also assuming that the WAN port won&#039;t work, but this is untested.. If you have some free time to just waste for stupidity&#039;s sake, perhaps you can test the theory and let me know.. I personally couldn&#039;t be bothered, just plug into LAN port 1 for pity&#039;s sake!!)</p><p>Step 3:</p><p>Entering &#039;Download mode&#039; (This information was originally found at the NSLU2 Linux users group and through experimentation, adapted to work for the WRT350n V2.x)</p><p>Required knowledge:</p><p>*Be able to locate the &#039;reset&#039; button. It is beside the power jack on the back of the router, beside LAN port 4. You will need a paperclip, or as I used, a thin screw driver.</p><p>Disconnect the power from the router, or as I did, turn off the powerboard&#039;s power. The reason I did this is because I have fat fingers and inserting the power cable whilst holding in the reset button proved difficult. (MAKE SURE THE POWER BOARD IS NOT THE ONE YOUR COMPUTER IS CONNECTED TO!!) *blush* Enough said on that matter... ehhem..</p><p>Method - with the power to the router OFF, hold in the reset button. Turn on/plug in the power and as soon as the LAN light comes up (1 - 2 secs) release the reset button. It&#039;s a pretty quick thing... If you have done it successfully, the power light on your router should be flashing between red... err.. ora.. umm yellow? (damn it I knew it was a bad idea for ME to write a HowTo..) Anyway! It&#039;ll be flashing!! If not, turn off/unplug the router&#039;s power and try again.. </p><p>Once you are in download mode, you can move to Step 4.</p><p>Step 4:</p><p>Using the &#039;Upgrade Utility&#039; software</p><p>Required knowledge:</p><p>*Location of the &#039;full-image.bin&#039; file we downloaded earlier, I suggested locating it on your desktop, unless you decided to put it elsewhere..</p><p>Open the &#039;Upgrade Utility&#039; application.</p><p>Once inside the utility, click the &#039;Browse Targets&#039; button. Shortly, a dialogue box showing the MAC address (a long and confusing looking number) will be listed in the &#039;Devices List&#039;.</p><p>Click the &#039;Files&#039; button and browse to the &#039;full-image.bin&#039; file. Once you select &#039;OK&#039; you should get a &#039;BIN file Information&#039; box, which will allow you to select &#039;OK&#039; at the bottom.</p><p>Once you click &#039;OK&#039;, you will be returned to the &#039;Devices List&#039; dialogue. Here you should click &#039;Upgrade&#039;. You will get an information dialogue box that informs you that the version is older than the one currently installed in the router. Dismiss it, the dialogue is in fact correct, the &#039;full-image.bin&#039; file was created a long time ago and is extracted from a router which was running version .17 (the current version is .19) No big deal. If you want version .19, download it from the Linksys website after you recover your router.</p><p>The next process is time consuming. IT IS ALSO FATAL TO THE ROUTER IF INTERRUPTED. In the spirit of Zen, I suggest removing yourself from the room while the router does it&#039;s thing. &#039;The watched pot, never boils&#039;.</p><p>Step 5:</p><p>Power cycle the router and you should have a working router again, using Linksys firmware. If you want to try OpenWRT again, you can use the &#039;Webupgrade&#039; package.</p><p>Voila!</p><p>DBM</p><p>P.S. Here is a quote of the posting I referenced from drizzt81. Many thanks to you!! Please let me know your sources, so that I may reference them also!</p><div class="quotebox"><cite>drizzt81 wrote:</cite><blockquote><div class="codebox"><pre><code>*******************************************
dbSign is:65:52:63:4f:6d:4d
mac address in flash is:00:1a:70:9c:52:16
have eRcOmM
Firmware is damaged,enter download mode
mvEgigaLoad: egiga0 load ok
egiga0 [PRIME]

mvEgigaInit: egiga0 init - mvBoardPhyAddrGet()=0x0 , priv-&gt;port =0x0
ring full
mvEgigaInit: egiga0 complete ok
In download function
 mac address:00:1a:70:9c:52:16
Pin:33.34.35.38.30.31.31.30</code></pre></div><p>I recovered from this using the <a href="http://www.nslu2-linux.org/wiki/Main/SercommFirmwareUpdater">SerialComm updater</a> with a WinXP machine.<br />Step-by-step instructions:<br />1. Download and install the SerialComm utility<br />2. Download the full_image from <a href="https://forum.openwrt.org/viewtopic.php?pid=74729#p74729">this post</a><br />3. (optional)Connect serial console to router and boot up router<br />4. Connect a LAN cable directly between router and Laptop (no intermediate HW)<br />5. Start the SerialComm utility and point it to your wired LAN connection used in step 4<br />6. Point SerialComm to the full_image.bin you downloaded in step 2<br />7. Ignore the warning about &quot;older version&quot;. If your router was running a new firmware before bricking, flashing the full_image from that posts will &quot;downgrade&quot; it to revision .17<br />8. Hit the &quot;flash&quot; button in SerialComm and get some coffee<br />9. AFTER a successfull flash, you may need to power cycle the router</p><p>Cheers and thanks for all the help!</p></blockquote></div></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95176">
				<div class="post-metadata">
					<div class="post-num">Post #540</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						1 Oct 2009, 17:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>roubaozi wrote:</cite><blockquote><p>DaBigMac: Does this(SerialComm) work on a WNR854t? I am ready to brick my WNR854t once I get the replacement mini-PCI wireless card.</p></blockquote></div><p>No it doesn&#039;t work (tested). It&#039;s a Linksys proprietary feature.<br />BTW WNR854T owners don&#039;t need ath9k default driver included in kernel MakeFile.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95192">
				<div class="post-metadata">
					<div class="post-num">Post #541</div>
					<div class="post-author">roubaozi</div>
					<div class="post-datetime">
						1 Oct 2009, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, I am getting a mini-PCI AR5008 card for my WNR854T, which should be able to use the default ath9k driver.</p><div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><div class="quotebox"><cite>roubaozi wrote:</cite><blockquote><p>DaBigMac: Does this(SerialComm) work on a WNR854t? I am ready to brick my WNR854t once I get the replacement mini-PCI wireless card.</p></blockquote></div><p>No it doesn&#039;t work (tested). It&#039;s a Linksys proprietary feature.<br />BTW WNR854T owners don&#039;t need ath9k default driver included in kernel MakeFile.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95360">
				<div class="post-metadata">
					<div class="post-num">Post #542</div>
					<div class="post-author">DaBigMac</div>
					<div class="post-datetime">
						5 Oct 2009, 04:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><div class="quotebox"><cite>roubaozi wrote:</cite><blockquote><p>DaBigMac: Does this(SerialComm) work on a WNR854t? I am ready to brick my WNR854t once I get the replacement mini-PCI wireless card.</p></blockquote></div><p>No it doesn&#039;t work (tested). It&#039;s a Linksys proprietary feature.<br />BTW WNR854T owners don&#039;t need ath9k default driver included in kernel MakeFile.</p></blockquote></div><p>Hello Nilfred,</p><p>I wonder if you would mind testing different times for the pressing and releasing of the reset button. Can you perhaps try pressing the reset button, then powering on the router and holding the reset button for 10 seconds? See if that makes a difference..</p><p>It would be a function of uBoot, not Linksys firmware that governed the &#039;download mode&#039; function. If you could perhaps try this and see if it made any difference. It would undoubtedly be a useful addition to the recovery guide!</p><p>Cheers,</p><p>DBM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95380">
				<div class="post-metadata">
					<div class="post-num">Post #543</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						5 Oct 2009, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>DaBigMac, are you sure that &quot;download mode&quot; is an original <a href="http://www.denx.de/wiki/DULG/Manual">U-Boot</a> feature? I couldn&#039;t find it in the U-Boot manual.<br />I assume that it is a special feature for U-Boot by Sercomm, that Linksys chosed to implement.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95417">
				<div class="post-metadata">
					<div class="post-num">Post #544</div>
					<div class="post-author">DaBigMac</div>
					<div class="post-datetime">
						6 Oct 2009, 07:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>DaBigMac, are you sure that &quot;download mode&quot; is an original <a href="http://www.denx.de/wiki/DULG/Manual">U-Boot</a> feature? I couldn&#039;t find it in the U-Boot manual.<br />I assume that it is a special feature for U-Boot by Sercomm, that Linksys chosed to implement.</p></blockquote></div><p>I&#039;m not at all sure.. I am just guessing.. but what can it hurt to try? Harmless.. and if successful, very useful!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95547">
				<div class="post-metadata">
					<div class="post-num">Post #545</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						7 Oct 2009, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>Although sysupgrade support is still not inside the trunk, I added an <a href="https://dev.openwrt.org/ticket/5970">enhancement ticket for WRT350N v2.x webupgrade image support</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95566">
				<div class="post-metadata">
					<div class="post-num">Post #546</div>
					<div class="post-author">fatbob</div>
					<div class="post-datetime">
						8 Oct 2009, 11:18					</div>
				</div>
				<div class="post-content content">
					<p>I just bought a pretty cheap WNR854T on Ebay with the sole purpose of installing OpenWRT on it. I post here some of my experiences which might help out other doing the same thing.</p><p>1) Do _not_ change the MAC address from the default 00:00:00:00:51:81 from WebIf if you don&#039;t have serial access. It will make the router inaccessible from the network (brick it) and requires a serial console to restore. </p><p>Analysis: Setting MAC address on the LAN interface in /etc/config/network will only set the adress on eth0 interface. The lan1, lan2, lan3 and lan4 interfaces will still have 00:00:00:00:51:81. I tried to decode /lib/network/config.sh which is responsible for setting the MAC address but failed to find out a way to modify it to do the right thing. I ended up setting the MAC address on the lanN interfaces one by one in /etc/init.d/network </p><p>2) Flashing firmware from serial console<br />You don&#039;t have to pad the image as described in <a href="https://forum.openwrt.org/viewtopic.php?pid=89744#p89744">#341</a>. I assume padding is WRT350Nv2 specific(?) Just use &#039;openwrt-wnr854t-squashfs.img&#039;.<br /></p><div class="codebox"><pre><code># temporary change network settings to fit your network
setenv ipaddr 192.168.33.254
setenv serverip 192.168.33.1

# erase and unprotect flash for writing
erase 0xFF800000 0xFFDFFFFF

# flash image
tftpboot 0x400000 openwrt-wnr854t-squashfs.img
# recognize the download size in its output, it will be used in the next command
cp.b 0x400000 0xff800000 &lt;transferred bytes in hex/0x&gt;

reset</code></pre></div><p>Using tftpboot with target address 0x0 as described in some other post failed for me. 0x400000 seems fine though.</p><p>3) Serial attached may prevent booting<br />Maybe depending on my less-than-perfect soldering skills, the router wouldn&#039;t boot if I detached the serial port (unplugged the Nokia CA-42 USB cable from my computer). This I solved by connecting Rx to Vcc, and the router now boots fine.</p><p>4) Wireless network<br />There is no driver support for the Marvell mini-pci card. The <a href="http://linuxwireless.org/en/users/Drivers/mwl8k">mwl8k driver</a> will probably support it in the future but I have not seen any ETA on that. <br />Instead I bought a cheap Edup PCI card off Ebay with a mini-pci on it. My research indicated it would be a bcm4306 chipset which should work fine but when I opened it up it was a bcm4318 <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; Sadly, the card seem to work fine but fails totally when running it as AP with hostapd. I have read reports that 4318 is unstable in AP-mode but should be better after some DMA-poisoning patches was added. This is worse and the AP doesn&#039;t even show up when doing &#039;iwlist wlan0&#039; scan from a nearby computer. The log output says a lot of <br /></p><div class="codebox"><pre><code>MGMT (TX callback) fail</code></pre></div><p>Does anyone have a clue why it fails? I have tried both stable, experimental and open firmware for the card but they all exhibit the same error. This is with svn trunk rev 17853.</p><p>Happy hacking!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95584">
				<div class="post-metadata">
					<div class="post-num">Post #547</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						8 Oct 2009, 16:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fatbob wrote:</cite><blockquote><p>My research indicated it would be a bcm4306 chipset which should work fine but when I opened it up it was a bcm4318</p></blockquote></div><p>b43 driver works with kernel 2.4<br />Broadcom isn&#039;t any friendly with the Open Source Community.<br />What did you research for?</p><p>I&#039;m still unsure to get a p54 driver, Senao NL-3054MP+ 200mW for 10 USD, wait, wait, or get an Atheros N capable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95585">
				<div class="post-metadata">
					<div class="post-num">Post #548</div>
					<div class="post-author">fatbob</div>
					<div class="post-datetime">
						8 Oct 2009, 17:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><div class="quotebox"><cite>fatbob wrote:</cite><blockquote><p>My research indicated it would be a bcm4306 chipset which should work fine but when I opened it up it was a bcm4318</p></blockquote></div><p>b43 driver works with kernel 2.4<br />Broadcom isn&#039;t any friendly with the Open Source Community.<br />What did you research for?</p></blockquote></div><p>I found a cheap one of <a href="http://www.amazon.co.uk/EDUP-IEEE802-11g-108Mbps-Super-wireless/dp/B000N2UT56">these</a> which has a mini-pci under the blue cover. Information on the net indicated that it should have a bcm4306 which would be a working 11g AP solution. 4318 has known issues in AP mode with the b43 driver according to their page at linuxwireless (see below).</p><p>The b43 driver is not 2.4 only. Check <a href="http://linuxwireless.org/en/users/Drivers/b43">http://linuxwireless.org/en/users/Drivers/b43</a>. Broadcom has a binary 2.4-only driver but the b43 driver is something else.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95612">
				<div class="post-metadata">
					<div class="post-num">Post #549</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						9 Oct 2009, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, I tried to keep it simple but explained backwards: b43 isn&#039;t working any well.<br />Nice discovery: A MiniPCI inside a Standard PCI... mmm will search mine too this way. I was thinking of buying another router to salvage the MimiPCI card inside.<br />Last directive was: &quot;Stop buying from unfriendly manufacturers&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95620">
				<div class="post-metadata">
					<div class="post-num">Post #550</div>
					<div class="post-author">fatbob</div>
					<div class="post-datetime">
						9 Oct 2009, 12:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>Yeah, I tried to keep it simple but explained backwards: b43 isn&#039;t working any well.<br />Nice discovery: A MiniPCI inside a Standard PCI... mmm will search mine too this way. I was thinking of buying another router to salvage the MimiPCI card inside.<br />Last directive was: &quot;Stop buying from unfriendly manufacturers&quot;</p></blockquote></div><p>Yeah. I&#039;m looking for an Atheros-based card now which seems to be friendlier and better supported, although more expensive... <br />Currently I&#039;m looking at a D-Link DWA-547 PCI card (Atheros AR5416 chipset 802.11b/g/n) which suspiciously looks like it has an oversized mini-pci card under the cover. I haven&#039;t yet found a way to confirm this though... What do you think?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 22 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=24.html">24</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>