<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 27 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=25.html">25</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=26.html">26</a></li><li class="pagination-current"><span>27</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=28.html">28</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=29.html">29</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p208361">
				<div class="post-metadata">
					<div class="post-num">Post #651</div>
					<div class="post-author">chromatid</div>
					<div class="post-datetime">
						28 Jul 2013, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi hnyman,</p><p>I found a question after the release 36612. In r36612 or before, if I create a &quot;Port Forwards&quot; rule using LuCI, OpenWrt tries to distinguish whether the mapping is destined to the router itself or another host in the zone. Respectively, OpenWrt will create filter rule in the INPUT chain (linked to zone_wan&nbsp; chain as showed below), and in the FORWARD chain, besides NAT rules.<br /></p><div class="codebox"><pre><code>-A zone_wan -d 192.168.1.1/32 -p tcp -m tcp --dport 22 -m conntrack --ctstate DNAT -j ACCEPT
-A zone_wan -d 192.168.1.1/32 -p tcp -m tcp --dport 443 -m conntrack --ctstate DNAT -j ACCEPT</code></pre></div><p>But this isn&#039;t the case in r36936 or r37529. In these newer releases, OpenWrt always create filter rules in FORWARD chain (besides NAT rules) without caring whether the destination is bound to the router itself.<br /></p><div class="codebox"><pre><code>-A zone_lan_forward -s 192.168.1.0/24 -d 192.168.1.1/32 -p tcp -m tcp --dport 22 -m comment --comment &quot;1022T (reflection)&quot; -j zone_lan_dest_ACCEPT
-A zone_lan_forward -s 192.168.1.0/24 -d 192.168.1.1/32 -p tcp -m tcp --dport 443 -m comment --comment &quot;1443T (reflection)&quot; -j zone_lan_dest_ACCEPT</code></pre></div><div class="codebox"><pre><code>-A zone_wan_forward -d 192.168.1.1/32 -p tcp -m tcp --dport 22 -m comment --comment &quot;1022T&quot; -j ACCEPT
-A zone_wan_forward -d 192.168.1.1/32 -p tcp -m tcp --dport 443 -m comment --comment &quot;1443T&quot; -j ACCEPT</code></pre></div><p>I assume this isn&#039;t the intended purpose, because these rules make no sense and I also have to create additional &quot;Traffic Rules&quot; to access the router remotely.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208365">
				<div class="post-metadata">
					<div class="post-num">Post #652</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						28 Jul 2013, 19:25					</div>
				</div>
				<div class="post-content content">
					<p>Post the exact rules in /etc/config/firewall.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208388">
				<div class="post-metadata">
					<div class="post-num">Post #653</div>
					<div class="post-author">chromatid</div>
					<div class="post-datetime">
						29 Jul 2013, 05:12					</div>
				</div>
				<div class="post-content content">
					<p>r37529:<br /></p><div class="codebox"><pre><code>root@wndr3700:/etc/config# cat firewall

config defaults
        option syn_flood &#039;1&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;lan&#039;
        list network &#039;lan&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;wan&#039;
        list network &#039;wan&#039;
        list network &#039;wan6&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;

config forwarding
        option src &#039;lan&#039;
        option dest &#039;wan&#039;

config rule
        option name &#039;Allow-DHCP-Renew&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;68&#039;
        option target &#039;ACCEPT&#039;
        option family &#039;ipv4&#039;

config rule
        option name &#039;Allow-Ping&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option icmp_type &#039;echo-request&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-DHCPv6&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option src_ip &#039;fe80::/10&#039;
        option src_port &#039;547&#039;
        option dest_ip &#039;fe80::/10&#039;
        option dest_port &#039;546&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Input&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        list icmp_type &#039;router-solicitation&#039;
        list icmp_type &#039;neighbour-solicitation&#039;
        list icmp_type &#039;router-advertisement&#039;
        list icmp_type &#039;neighbour-advertisement&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Forward&#039;
        option src &#039;wan&#039;
        option dest &#039;*&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config include
        option path &#039;/etc/firewall.user&#039;

config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;443&#039;
        option dest_ip &#039;192.168.1.10&#039;
        option dest_port &#039;443&#039;
        option name &#039;443T&#039;

config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;1022&#039;
        option dest_ip &#039;192.168.1.1&#039;
        option dest_port &#039;22&#039;
        option name &#039;1022T&#039;

config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;1443&#039;
        option dest_ip &#039;192.168.1.1&#039;
        option dest_port &#039;443&#039;
        option name &#039;1443T&#039;

config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;10022&#039;
        option dest_ip &#039;192.168.1.10&#039;
        option dest_port &#039;22&#039;
        option name &#039;10022T&#039;

config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;10443&#039;
        option dest_ip &#039;192.168.1.10&#039;
        option dest_port &#039;443&#039;
        option name &#039;10443T&#039;

config rule
        option target &#039;ACCEPT&#039;
        option src &#039;wan&#039;
        option proto &#039;tcp&#039;
        option name &#039;Manage-This-Router&#039;
        option family &#039;ipv4&#039;
        option dest_ip &#039;192.168.1.1&#039;
        option dest_port &#039;22 443&#039;

config include &#039;miniupnpd&#039;
        option type &#039;script&#039;
        option path &#039;/usr/share/miniupnpd/firewall.include&#039;
        option family &#039;IPv4&#039;
        option reload &#039;1&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>chromatid</strong> on 29 Jul 2013, 05:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208411">
				<div class="post-metadata">
					<div class="post-num">Post #654</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						29 Jul 2013, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>Well, remove the &quot;option dest&quot; from the redirects pointing at the router itself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208443">
				<div class="post-metadata">
					<div class="post-num">Post #655</div>
					<div class="post-author">chromatid</div>
					<div class="post-datetime">
						29 Jul 2013, 19:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Well, remove the &quot;option dest&quot; from the redirects pointing at the router itself.</p></blockquote></div><p>Not working. After removing it from one &quot;redirect&quot;, it complains</p><div class="quotebox"><blockquote><p>root@wndr3700:/etc/config# ../init.d/firewall restart<br />Warning: Unable to locate ipset utility, disabling ipset support<br /><strong>Warning: Section @redirect[1] (1022T) does not specify a destination, assuming &#039;lan&#039;</strong><br /> * Flushing IPv4 filter table<br />... ...</p></blockquote></div><p>And I would hope the unnecessary (steps) could be kept unnecessary. I appreciate your great job.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208455">
				<div class="post-metadata">
					<div class="post-num">Post #656</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						29 Jul 2013, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>Is 192.168.1.1 configured anywhere in uci?<br />For me your rules work just fine (10.11.12.13 is my router lan ip)</p><div class="codebox"><pre><code>config redirect
    option target &#039;DNAT&#039;
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option proto &#039;tcp&#039;
    option src_dport &#039;1443&#039;
    option dest_port &#039;443&#039;
    option name &#039;1443T&#039;
    option dest_ip &#039;10.11.12.13&#039;</code></pre></div><div class="codebox"><pre><code>root@uplink:~# fw3 print | grep 1443T
Warning: Section @redirect[5] (1443T) refers to a destination address on this router, assuming port redirection
iptables -t filter -A zone_wan_input -p tcp -d 10.11.12.13/32 -m tcp --dport 443 -m conntrack --ctstate DNAT -m comment --comment 1443T -j ACCEPT
iptables -t filter -A zone_lan_forward -p tcp -s 10.11.12.0/24 -d 10.11.12.13/32 -m tcp --dport 443 -m comment --comment &quot;1443T (reflection)&quot; -j zone_lan_dest_ACCEPT
iptables -t nat -A zone_wan_prerouting -p tcp -m tcp --dport 1443 -m comment --comment 1443T -j DNAT --to-destination 10.11.12.13:443
iptables -t nat -A zone_lan_prerouting -p tcp -s 10.11.12.0/24 -d 146.52.137.175/32 -m tcp --dport 1443 -m comment --comment &quot;1443T (reflection)&quot; -j DNAT --to-destination 10.11.12.13:443
iptables -t nat -A zone_lan_postrouting -p tcp -s 10.11.12.0/24 -d 10.11.12.13/32 -m tcp --dport 443 -m comment --comment &quot;1443T (reflection)&quot; -j SNAT --to-source 10.11.12.13</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208456">
				<div class="post-metadata">
					<div class="post-num">Post #657</div>
					<div class="post-author">mmhorda</div>
					<div class="post-datetime">
						29 Jul 2013, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>what release are we talking about? trunk or attitude?<br />I am afraid nobody will guaranty working trunk. cause similar rules are working for me in attitude.</p>											<p class="post-edited">(Last edited by <strong>mmhorda</strong> on 29 Jul 2013, 22:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208482">
				<div class="post-metadata">
					<div class="post-num">Post #658</div>
					<div class="post-author">chromatid</div>
					<div class="post-datetime">
						30 Jul 2013, 05:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Is 192.168.1.1 configured anywhere in uci?</p></blockquote></div><p>192.168.1.1 is the default router IP. It&#039;s fine for me, so I never changed it in any way. </p><p>@mmhorda, all the versions are AA.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209322">
				<div class="post-metadata">
					<div class="post-num">Post #659</div>
					<div class="post-author">dannukjgs</div>
					<div class="post-datetime">
						9 Aug 2013, 06:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ferob wrote:</cite><blockquote><p>@hnyman</p><p>I have got a problem with these July builds.<br />I tried to connect on 2.4GHz and 5Ghz with my <a href="http://www.dbuying.com/cheap/android-phones-496/"><span style="color: #000000">android phone</span></a>, but after a few seconds I can&#039;t reach the network (and unable to ping the phone) while the signal is great and it shows connected, then after some time it is working again for a few seconds and again fails.</p><p>My other devices are working, so I tried a fresh install and just set the wifi only, but the same happens and there is nothing in the log.<br />If I flash back the last June build, then everything is working fine with the same config.</p></blockquote></div><p> the same with me</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209331">
				<div class="post-metadata">
					<div class="post-num">Post #660</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						9 Aug 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dannukjgs wrote:</cite><blockquote><div class="quotebox"><cite>ferob wrote:</cite><blockquote><p>@hnyman</p><p>I have got a problem with these July builds.<br />I tried to connect on 2.4GHz and 5Ghz with my <a href="http://www.dbuying.com/cheap/android-phones-496/"><span style="color: #000000">android phone</span></a>, but after a few seconds I can&#039;t reach the network (and unable to ping the phone) while the signal is great and it shows connected, then after some time it is working again for a few seconds and again fails.</p><p>My other devices are working, so I tried a fresh install and just set the wifi only, but the same happens and there is nothing in the log.<br />If I flash back the last June build, then everything is working fine with the same config.</p></blockquote></div><p> the same with me</p></blockquote></div><p>My build has the standard wifi drivers, so there is nothing build-specific.</p><p>There have been quite a lot of wifi driver changes in July and some patches has been applied in the last few days. Hopefully those will correct your problems.</p><p>Trunk: <a href="http://nbd.name/gitweb.cgi?p=openwrt.git;a=history;f=package/kernel/mac80211;hb=HEAD">http://nbd.name/gitweb.cgi?p=openwrt.gi … 11;hb=HEAD</a><br />AA12.09: <a href="http://nbd.name/gitweb.cgi?p=attitude_adjustment.git;a=history;f=package/mac80211;hb=HEAD">http://nbd.name/gitweb.cgi?p=attitude_a … 11;hb=HEAD</a></p><p>My current trunk build already has all the patches, and I will probably update the AA12.09 build today.</p><p>If the problems continue, you might check the bug tracker for similar problems or write on an own thread about it, as I highly doubt if the devs modifying the wifi driver ever read this build-specific thread.</p><p>EDIT:<br />AA r37743 build is now available.<br />Trunk r37745 is now available.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 10 Aug 2013, 10:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209800">
				<div class="post-metadata">
					<div class="post-num">Post #661</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						14 Aug 2013, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>I am not sure if you already added these in but I have 1 suggestion for sysctl.conf<br />This line<br />net.ipv4.tcp_slow_start_after_idle=0<br />I noticed that during jperf testing the graph always show a slow start tcp.<br />When I added that line the slow start behaviour dissappear.<br />Not sure this is by design but that line fixed it.<br />The default value of this sysctl is 1</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 14 Aug 2013, 18:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209833">
				<div class="post-metadata">
					<div class="post-num">Post #662</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						15 Aug 2013, 04:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>I am not sure if you already added these in but I have 1 suggestion for sysctl.conf<br />This line<br />net.ipv4.tcp_slow_start_after_idle=0</p></blockquote></div><p>Does that actually affect routed traffic? TCP window sizes are negotiated between sender and recipient (PC and web server). As far as I know, routers, even in NAT mode does not change TCP window sizes unless it was a &quot;man in the middle&quot; attack.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209894">
				<div class="post-metadata">
					<div class="post-num">Post #663</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Aug 2013, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>- r37792: fix for button hotplug actions taking 100% CPU<br /></p><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>Known problems:<br />- BTN_2 wifi button script causes hostapd to consume 100% CPU. This was seen already in June and materialised with the new button hotplug functionality. So far I have been unable to figure out a correct way to run &quot;wifi up&quot; from the button script. It always causes the CPU 100%.</p></blockquote></div><p>Button hotplug scripts taking 100% CPU was fixed today by r37792, or actually changes made to procd (<a href="http://nbd.name/gitweb.cgi?p=luci2/procd.git;a=commitdiff;h=993b8f2f8a0e3683e6ade93f81e294a9b0899517">http://nbd.name/gitweb.cgi?p=luci2/proc … a9b0899517</a> ).</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Aug 2013, 17:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210328">
				<div class="post-metadata">
					<div class="post-num">Post #664</div>
					<div class="post-author">Wriggerz</div>
					<div class="post-datetime">
						21 Aug 2013, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>Can anyone tell me what linux kernel is being used with r37815?</p><p>Apparently 2.6.34 kernel and above have IGMP snooping built in.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210331">
				<div class="post-metadata">
					<div class="post-num">Post #665</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						21 Aug 2013, 17:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wriggerz wrote:</cite><blockquote><p>Can anyone tell me what linux kernel is being used with r37815?</p><p>Apparently 2.6.34 kernel and above have IGMP snooping built in.</p></blockquote></div><p>Both of my builds have the default kernels:<br />Trunk has 3.10.4<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:~# uname -a<br />Linux OpenWrt 3.10.4 #1 Tue Aug 20 21:22:55 EEST 2013 mips GNU/Linux</p></blockquote></div><p>And the AA 12.09 build has kernel 3.3.8.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210339">
				<div class="post-metadata">
					<div class="post-num">Post #666</div>
					<div class="post-author">Wriggerz</div>
					<div class="post-datetime">
						21 Aug 2013, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>Sorry hnyman, trying to get my head around this....</p><p>So when people refer to the kernel, 2.6.34, 3.10.4 is a higher version of the same thing?</p><p>I know your build is running 3.10.4 so hopefully IGMP snooping is supported - something to play with when i get home. </p><p>Just wanted to make sure i had the right kernel version and wasn&#039;t sure whether there was an internal linux kernel version as well as an OpenWRT version.</p><p>Thanks for clearing that up buddy.</p><p>Edit: I can&#039;t believe my stupidity sometimes...... Just realised i was comparing the OpenWRT version, such as 10.03, the kernel version, 3.10.4.</p><p>What an idiot!!!</p>											<p class="post-edited">(Last edited by <strong>Wriggerz</strong> on 21 Aug 2013, 19:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211294">
				<div class="post-metadata">
					<div class="post-num">Post #667</div>
					<div class="post-author">denk</div>
					<div class="post-datetime">
						31 Aug 2013, 14:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ferob wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>dannukjgs wrote:</cite><blockquote><p> the same with me</p></blockquote></div><p>My build has the standard wifi drivers, so there is nothing build-specific.</p><p>There have been quite a lot of wifi driver changes in July and some patches has been applied in the last few days. Hopefully those will correct your problems.</p><p>Trunk: <a href="http://nbd.name/gitweb.cgi?p=openwrt.git;a=history;f=package/kernel/mac80211;hb=HEAD">http://nbd.name/gitweb.cgi?p=openwrt.gi … 11;hb=HEAD</a><br />AA12.09: <a href="http://nbd.name/gitweb.cgi?p=attitude_adjustment.git;a=history;f=package/mac80211;hb=HEAD">http://nbd.name/gitweb.cgi?p=attitude_a … 11;hb=HEAD</a></p><p>My current trunk build already has all the patches, and I will probably update the AA12.09 build today.</p><p>If the problems continue, you might check the bug tracker for similar problems or write on an own thread about it, as I highly doubt if the devs modifying the wifi driver ever read this build-specific thread.</p><p>EDIT:<br />AA r37743 build is now available.<br />Trunk r37745 is now available.</p></blockquote></div><p>I tracked it down to the tx queueing rework patches.<br />The problem is started with these patches and these are a part of the Attitude Adjustment and Trunk builds for weeks now.<br />With the refreshed patches the problem is still there for a long time, so I opened a <a href="https://dev.openwrt.org/ticket/14092">ticket</a>.</p><p><strong>@dannukjgs</strong><br />What phone do you have?<br />Because I have this problem only with my HTC One X which is an international Tegra 3 version.</p></blockquote></div><p>I can confirm that problem with a Nokia N9. There are now some reverting patches in the ticket <a href="https://dev.openwrt.org/ticket/14092">ticket</a> now. As I don&#039;t have the possibility at the moment to set up my own build environment I would like to ask politely if either dannukjgs or ferob can maybe test it as described in the ticket&#039;s comment? Or maybe hnyman can do the test builds? FYI I&#039;m using the Attitude Adjustment builds on a WNDR3800.<br />Thanks and sorry for not testing it myself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211349">
				<div class="post-metadata">
					<div class="post-num">Post #668</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						1 Sep 2013, 11:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ferob wrote:</cite><blockquote><p>Could you please help us with creating the test build with <a href="https://dev.openwrt.org/ticket/14092#comment:6">these</a> patches?</p></blockquote></div><p>I have created test versions for Attitude Adjustment.<br />You have to replace the file /lib/modules/3.3.8/ath9k.ko in the live system with the test versions and test after rebooting.<br /><a href="http://koti.welho.com/hnyman1/Openwrt/attitude_ath9k_test/">http://koti.welho.com/hnyman1/Openwrt/a … th9k_test/</a><br />The directory contains four versions of ath9k.ko: the original and three test versions, whose names show which patches are included.</p><p>There have been no significant check-ins in Attitude, so the August 18th build itself is still valid.</p><p>In addition to #14092, see also discussion at #14097:<br /><a href="https://dev.openwrt.org/ticket/14097#comment:8">https://dev.openwrt.org/ticket/14097#comment:8</a><br />Most probably both tickets are about the same issue and it is related to &quot;n&quot; mode...</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 1 Sep 2013, 13:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211350">
				<div class="post-metadata">
					<div class="post-num">Post #669</div>
					<div class="post-author">denk</div>
					<div class="post-datetime">
						1 Sep 2013, 12:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>ferob wrote:</cite><blockquote><p>Could you please help us with creating the test build with <a href="https://dev.openwrt.org/ticket/14092#comment:6">these</a> patches?</p></blockquote></div><p>I have created test versions for Attitude Adjustment.<br />You have to replace the file /lib/modules/3.3.8/ath9k.ko in the live system with the test versions and test after rebooting.<br /><a href="http://koti.welho.com/hnyman1/Openwrt/attitude_ath9k_test/">http://koti.welho.com/hnyman1/Openwrt/a … th9k_test/</a><br />The directory contains four versions of ath9k.ko: the original and three test versions, whose names show which patches are included.</p><p>There have been no significant check-ins in Attitude, so the August 18th build itself is still valid.</p><p>In addition to #14092, see also discussion at #14097:<br /><a href="https://dev.openwrt.org/ticket/14097#comment:8">https://dev.openwrt.org/ticket/14097#comment:8</a><br />Most probably both tickets are about the same issue and it be related to &quot;n&quot; mode...</p></blockquote></div><p>Thank you very much for the test builds!<br />I&#039;ve thoroughly tested all three combinations and the only working one is 900_901_902.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211953">
				<div class="post-metadata">
					<div class="post-num">Post #670</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						9 Sep 2013, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>denk wrote:</cite><blockquote><p>Thank you very much for the test builds!<br />I&#039;ve thoroughly tested all three combinations and the only working one is 900_901_902.</p></blockquote></div><p>The problematic wifi tx queue changes have been removed from AA by r37920. So my current r37920 AA build should probably work better, hopefully.<br /><a href="https://dev.openwrt.org/changeset/37920">https://dev.openwrt.org/changeset/37920</a> or <br /><a href="http://nbd.name/gitweb.cgi?p=attitude_adjustment.git;a=commitdiff;h=343307002eec0e703c0e58681e0385fff6c6f355;hp=ece6ddddf4dd966845fb7fec1a3bcdc2a240227b">http://nbd.name/gitweb.cgi?p=attitude_a … c2a240227b</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212400">
				<div class="post-metadata">
					<div class="post-num">Post #671</div>
					<div class="post-author">Deroute</div>
					<div class="post-datetime">
						15 Sep 2013, 13:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>denk wrote:</cite><blockquote><p>Thank you very much for the test builds!<br />I&#039;ve thoroughly tested all three combinations and the only working one is 900_901_902.</p></blockquote></div><p>The problematic wifi tx queue changes have been removed from AA by r37920. So my current r37920 AA build should probably work better, hopefully.<br /><a href="https://dev.openwrt.org/changeset/37920">https://dev.openwrt.org/changeset/37920</a> or <br /><a href="http://nbd.name/gitweb.cgi?p=attitude_adjustment.git;a=commitdiff;h=343307002eec0e703c0e58681e0385fff6c6f355;hp=ece6ddddf4dd966845fb7fec1a3bcdc2a240227b">http://nbd.name/gitweb.cgi?p=attitude_a … c2a240227b</a></p></blockquote></div><p>Thanks. Would you be able to make a build with channels 12 and 13 activable?<br />I live in Europe and here they are available for wifi.</p><p>There was a fix that used to work with AA rc1, but doesn&#039;t work with final, for some reason.<br /><a href="https://dev.openwrt.org/ticket/9678#comment:19">https://dev.openwrt.org/ticket/9678#comment:19</a></p><p>Send me a PM if you can.</p>											<p class="post-edited">(Last edited by <strong>Deroute</strong> on 15 Sep 2013, 13:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212408">
				<div class="post-metadata">
					<div class="post-num">Post #672</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						15 Sep 2013, 16:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Deroute wrote:</cite><blockquote><p>Thanks. Would you be able to make a build with channels 12 and 13 activable?<br />I live in Europe and here they are available for wifi.</p></blockquote></div><p>Channel availability is based on the wi-fi radio&#039;s country code selection. 12 and 13 will available for countries like Italy or France for example. Review this file and pick the country code with frequency that ends &quot;2482&quot;.</p><p><a href="https://dev.openwrt.org/browser/branches/attitude_adjustment/package/mac80211/files/regdb.txt">https://dev.openwrt.org/browser/branche … /regdb.txt</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212533">
				<div class="post-metadata">
					<div class="post-num">Post #673</div>
					<div class="post-author">Deroute</div>
					<div class="post-datetime">
						16 Sep 2013, 20:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phuque99 wrote:</cite><blockquote><div class="quotebox"><cite>Deroute wrote:</cite><blockquote><p>Thanks. Would you be able to make a build with channels 12 and 13 activable?<br />I live in Europe and here they are available for wifi.</p></blockquote></div><p>Channel availability is based on the wi-fi radio&#039;s country code selection. 12 and 13 will available for countries like Italy or France for example. Review this file and pick the country code with frequency that ends &quot;2482&quot;.</p><p><a href="https://dev.openwrt.org/browser/branches/attitude_adjustment/package/mac80211/files/regdb.txt">https://dev.openwrt.org/browser/branche … /regdb.txt</a></p></blockquote></div><p>Ok, because in standard AA final they were blocked even changing the country.<br />Also, the max wifi power admissible in Europe is double the US one.<br />And also that was blocked in standard release.</p><p>They say it&#039;s because the bootloader ignores their settings, adn they can&#039;t legally override it (even if it&#039;s a bug), or something like that.<br />The producers override it anyway because they have a a special agreement with the chipmaker and so on.</p><p>If it works straight out of the box in your distro, then I&#039;m more than happy.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212561">
				<div class="post-metadata">
					<div class="post-num">Post #674</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						17 Sep 2013, 04:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Deroute wrote:</cite><blockquote><p>Ok, because in standard AA final they were blocked even changing the country.</p></blockquote></div><p>You are asking a question in a thread for hnyman&#039;s custom build, not the &quot;standard&quot; build. So default assumption is that you&#039;re using one of his builds on the Netgear router. If you look at his build, he has enabled country code swtiching feature &quot;CONFIG_ATH_USER_REGD=y&quot; in the config file for his builds:</p><p><a href="http://koti.welho.com/hnyman1/Openwrt/attitude-r37920-2013-09-09/WNDR3700-attitude-r37920-2013-09-09-1708.config">http://koti.welho.com/hnyman1/Openwrt/a … 708.config</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212645">
				<div class="post-metadata">
					<div class="post-num">Post #675</div>
					<div class="post-author">Deroute</div>
					<div class="post-datetime">
						17 Sep 2013, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>Oh my God. It works!<br />Everything WORKS!!!</p><p>The wifi works and I have my extra EU channels.</p><p>The WAN works and it&#039;s bridged to ethernet.<br />I can talk to my router on 192.168.1.1 without any conflicts with the main network! [Right?]<br />Before I had to use the first eth hole as WAN and the second as my first ethernet hole.</p><p>Oh, and the wifi button is working better than ever (no extra long presses needed).</p><p>Good work, fantastic distro!</p>											<p class="post-edited">(Last edited by <strong>Deroute</strong> on 17 Sep 2013, 22:21)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 676 to 675 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 27 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=25.html">25</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=26.html">26</a></li><li class="pagination-current"><span>27</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=28.html">28</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=29.html">29</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>