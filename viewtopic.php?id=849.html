<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54G: Switch working as Repeater Hub?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p4014">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">manugarg</div>
					<div class="post-datetime">
						19 Jan 2005, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>I have 2 machines 192.168.1.100 and 192.168.1.200 wired to wrt54g. When I capture the traffic in promiscuous mode at 192.168.1.100 by running ethereal, I see all the traffic between 192.168.1.200 and internet. That is to say that I observe packets of the following kind at 192.168.1.100:</p><p>192.168.1.200 -&gt; <a href="http://www.google.com">www.google.com</a></p><p>I am not able to understand this behavior. IIRC, in a switched network packet should go to intended recepient only. So if 192.168.1.200 is sending a packet to <a href="http://www.google.com">www.google.com</a> i.e. to 192.168.1.1, I shouldn&#039;t get that packet at 192.168.1.100.</p><p>Am I missing something?</p><p>Thanks,<br />Manu<br />----------<br />Manu Garg<br /><a href="http://manugarg.freezope.org">http://manugarg.freezope.org</a><br />&quot;Wake Up! Free yourself.&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4016">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						19 Jan 2005, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm... That&#039;s odd, it shouldn&#039;t happen indeed. Is there LED activity at the .100 port as you sniff?</p><p>I will try it myself later...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4036">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">manugarg</div>
					<div class="post-datetime">
						21 Jan 2005, 08:48					</div>
				</div>
				<div class="post-content content">
					<p>I checked it once again. Same results. And yes there is LED activity at .100 port. Did you find anything?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4236">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tylernt</div>
					<div class="post-datetime">
						29 Jan 2005, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>You might disable STP. Maybe the bridge ports are stuck in &#039;learning&#039; mode instead of switching to &#039;forwarding&#039; as they should after several seconds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4960">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						27 Feb 2005, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>Assuming you have 255.255.255.0 as netmask, these computers are bound to see one another as they are on one and the same subnet. You&#039;ll even see all this traffic on the wireless link in the standard bridged lan/wireless configuration and therefor it is advisable not to use bridging but to have routing between lan, wan, and wifi. Moreover I have observed packet loss due to bridging and synchronisation issues which does not occur in routing mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4996">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">IronMan</div>
					<div class="post-datetime">
						1 Mar 2005, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Same subnet or not, in a switched environment, packets should only be sent out the port to which the destination computer exists unless the switch has yet to see any traffic to/from that host.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15757">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kikix</div>
					<div class="post-datetime">
						19 Nov 2005, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>same problem here. openwrt does not work as a swicht environment. If I start an sniffing session with ethereal I can see all packets. And this is hub behavior.</p><p>kiki</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15759">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						19 Nov 2005, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>Which model/version is your WRT and which version of OpenWrt? There are several people here that are trying to get that behavior and can&#039;t. Maybe this means there is a possibility of controlling it, unless it&#039;s a specific switch model that it happens on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15779">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kikix</div>
					<div class="post-datetime">
						20 Nov 2005, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>hi,</p><p>I&#039;m using openwrt rc2 on a wrt54gs v1.1. If further Information is needed tell me and I will post it here.</p><p>thanks,<br />kiki</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p33511">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">bobski</div>
					<div class="post-datetime">
						9 Sep 2006, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>I am getting the same issue here with white russian RC5 on a WRT54GS v1.0 (uses adm6996 switch). All local machines on wired lan are seeing each others internet traffic as well as any traffic from other lan clients to the wrt itself. the traffic between hosts on the lan _is_ being switched correctly however, and is not seen by other hosts. seems the switching works when traffic is fully within the lan vlan (vlan0).</p><p>some of my nvram vlan settings:<br /></p><div class="codebox"><pre><code>lan_ifnames=eth2 eth3 vlan0 eth1
port0vlans=0 18 19
port1vlans=0
port2vlans=0
port3vlans=0
port4vlans=0
port5vlans=0 16
ppp_ifname=vlan1
vlan0hwname=et0
vlan0ports=1 2 3 4 5*
vlan1hwname=et0
vlan1ports=0 5
vlans=1
wan_device=vlan1
wan_iface=vlan1
wan_ifnames=vlan1</code></pre></div><p>Maybe i have badly set nvram vars - im not sure what they all do <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br />don&#039;t know if this happened with original linksys fw as i didn&#039;t sniff it before openwrt got flashed.</p><p>Maybe this is a bug with the switch itself? Anyone have a working admcfg ipkg available? - cant find it anywhere <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>bobski</strong> on 9 Sep 2006, 03:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50703">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">moonlighting_coder</div>
					<div class="post-datetime">
						18 Jun 2007, 03:50					</div>
				</div>
				<div class="post-content content">
					<p>Nothing like bring back old threads.&nbsp; Would it be possible to break up all the ports into vlans as well as destroying the bridge and use iptables to rectify the behavior?</p><p>Thanks for your time.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>