<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Imap Server on Wrt54g</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p17419">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Maduser</div>
					<div class="post-datetime">
						18 Dec 2005, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>I have a WRT54g and a Network Storage with a smb share. I&nbsp; think it were very cool to have a imap server on my Router.<br />This Server shuld recive Mail from more then one pop3 server. A webfrontend were a nice feature, too.<br />I want to know: Is thies possible that to wirte such a programm or is exits there allrady a programm for that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17428">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						18 Dec 2005, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>Why don&#039;t you just set up a Linux box in a DMZ and forward the appropriate ports to it? It would be a 1000 times easier, more efficient and just makes sense. Everything you need will be already installed or can be in seconds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17429">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						18 Dec 2005, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Exactly what Void Man wrote. A Wrt is a router and a single user system, not a server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17434">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Maduser</div>
					<div class="post-datetime">
						19 Dec 2005, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>Thank for reply.</p><p>But I to run a server 24 Hour a day and thies needs electricity and place, which are rare. And it was just a thougt.<br />So I will bury my Idea.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17436">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">savoy</div>
					<div class="post-datetime">
						19 Dec 2005, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Your thought is valid.&nbsp; I&#039;m replacing an aged Alpha that pulled nearly $100/month in electricity, with a WRT54, with a remote samba share.&nbsp; It&#039;s hosting 2 websites.&nbsp; I&#039;m also working to replace email services as well.&nbsp; &nbsp; </p><p>Don&#039;t let those nay-sayer&#039;s slow down your pursuits.&nbsp; &nbsp;I&#039;d much rathar have one samba server PC, and several little embedded application servers that pull 23W than what I had.</p><p>The little guy I&#039;ve deployed for web has proved it self reliable and stable now, and I have no reason to think it can&#039;t provide the low-volume services at home that you and I are wanting.&nbsp; &nbsp;That plus cutting my light bill 40% is not bad.</p><br /><br /><p>Bill</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17440">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						19 Dec 2005, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>You need a multiuser system capable of receiving mail. Why bury it? You don&#039;t need an electron sucker like a DEC Alpha for a mail server. Any small footprint low power PC or laptop will due. I&#039;m just saying it would be a huge effort to get something like this to run on a WRT, and for what? You can probably get an old desktop for nothing and it will make a *fine* mail/imap server, and it doesn&#039;t have to use a lot of power. You don&#039;t even have to have a monitor, keyboar or mouse hooked up to it. It just needs a hard drive, motherboard and NIC. I mean I love seeing people make remote control trucks out of their WRT just as much as the next guy but this is something that would be done for practicality and not the &quot;cool factor&quot;. I&#039;m just being practical here. It&#039;s amazing what you can do with the WRT but I think what you are asking for here is a little much. Just my personal opinion of course. I would love to see you build a working package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17445">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						19 Dec 2005, 11:26					</div>
				</div>
				<div class="post-content content">
					<p>Given that you already have a machine which is running as a Samba server, why not run your IMAP server on that too?</p><p>I could understand if you had a USB-attached hard drive on your OpenWRT box. But in any case, OpenWRT is way underpowered (in terms of ROM and RAM) for an IMAP server. If you&#039;re not able to touch the machine running Samba, then I think your best bet is to get an end-of-life laptop and run it on that.</p><p>Regards,</p><p>Brian.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17453">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">SaTaN</div>
					<div class="post-datetime">
						19 Dec 2005, 12:59					</div>
				</div>
				<div class="post-content content">
					<p>What about the linksys NSLU2 ?</p><p>it is a NAS device with intel PXA270 processor and 32 MB Ram, and usb2.0 port.<br />this device does run linux, and there are distros for this as well:<br /><a href="http://www.nslu2-linux.org">http://www.nslu2-linux.org</a>/</p><p>but it has still the problem with the lack of CPU horsepower, ie only 133MHz<br />(can be brought to 266 MHz w/ hardware mod)</p><p>i think this might be a better candidate for running such a thingie.</p><p>BTW: there is &quot;Maxtor shared storage&quot; on your <a href="http://wiki.openwrt.org/TableOfHardware">http://wiki.openwrt.org/TableOfHardware</a>.</p><p>this has quite some more cpu-horsepower (300MHz, and also 32MB of RAM).<br />but is also somewhat more expensive ie €219,- compared to €111,- + € 89,- = € 200,-</p><p>but it&#039;s support state is unsupported, so thats why i&#039;d stick to the linksys.</p><p>Anyway, if i had a router, i&#039;d _NOT_ bload it with things like an imap server, as this might <br />slow down the real things (routing).</p><p>PS: an note to old pentiums: they DO suck some power from the mains. the cpu+surroundings will easily<br />drain 15Watts, as the Hdd will - this sums to 30W. and as the efficiency of (especially cheap) PC Powersupplys<br />is damn worse at this output, it will easily drain 60W or more from the mains.</p><p>(efficiency usually gets better when you approch the rated power, eg, if it is a 200W power supply,<br />and you drain 150W, the efficience will climb to 75%)</p><p>this integrated devices OTOH require ~10W DC power, and as it&#039;s powersupply is rated for this output,<br />it&#039;s efficiency is far better. so it will drain a maximum of 15W from mains. but you need to take into account <br />the power for the usb hdd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17482">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">savoy</div>
					<div class="post-datetime">
						19 Dec 2005, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Follow me on this for a bit..&nbsp; &nbsp;I&#039;ve had both PC&#039;s, Mac&#039;s and small mini&#039;s (DecStation 5000, Alpha 4100) type systems in my home office for years.&nbsp; One machine would be my fileserver, e-mail, and web, the PC&#039;s and Mac&#039;s where workstations. </p><p>As usually goes, I put the most important &quot;services&quot; on my most reliable, equipment, usually the RISC based systems.</p><p>More recently, I&#039;ve been moving to smaller platforms, as you suggested, running FreeBSD.&nbsp; In fact the Samba server I mentioned is running on a mini-itx FreeBSD box that is also my home Asterisk Switch.</p><p>One of the things that has gotten me so interested in the WRT&#039;s as embedded processors, is that if you take it out of the Blue and black case, conceptually, it&#039;s nothing more than a 200 Mhz ARM processor, useful for any number of things.&nbsp; </p><p>Does that fact that it&#039;s current implemenation as a router, also limit it&#039;s use as such, or apply some inherent boundaries or limitations, because of the current application?</p><p>Now, stay with me, if most of the possible applications, ie; web, imap, smtp, etc, are not FP intensive, then putting them onto remote processor&#039;s that are basically,&nbsp; simply moving&nbsp; data back and forth across the network.&nbsp; Is that not what a router does, in reality.&nbsp; &nbsp;</p><p>Many dedicated systems use processor&#039;s much like what&#039;s in the WRT, ie; Cisco using PowerPC and ARM chips in<br />their routers, and phones.&nbsp; </p><p>Now, for small low-volume applications like my home website, email server, and such, using 1 PC as an actual file server, with nfs or samba for serving up the shares, to a small farm of WRT&#039;s for services.&nbsp; </p><p>So, what do I wind up with?&nbsp; &nbsp;1 PC, the only one to actually have to worry about backing up, which pulls nearly 5 times the power of 1 WRT.</p><p>I&#039;m currently testing a WRT in a much larger environment, as a web server using Light httpd.&nbsp; It&#039;s performance is actually quite good in a moderate volume web environment.&nbsp; &nbsp; ..&nbsp; BTW, replacing another Alpha 4100...<br />Obviosuly, having to be careful about cgi&#039;s and other spawned processes, but so far things look good, and performance with no load is identical.&nbsp; LightHTTPD is interesting, as it can handle signficant requests, without additional memory load on the server.</p><p>The 32M unit&#039;s are really the unit&#039;s to use for this, as the 16 meg unit&#039;s end up burning their cache for apps.</p><p>Thought&#039;s?</p><p>Bill</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17484">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">savoy</div>
					<div class="post-datetime">
						19 Dec 2005, 19:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SaTaN wrote:</cite><blockquote><p>What about the linksys NSLU2 ?</p><p>it is a NAS device with intel PXA270 processor and 32 MB Ram, and usb2.0 port.<br />this device does run linux, and there are distros for this as well:<br /><a href="http://www.nslu2-linux.org">http://www.nslu2-linux.org</a>/</p><p>but it has still the problem with the lack of CPU horsepower, ie only 133MHz<br />(can be brought to 266 MHz w/ hardware mod)</p></blockquote></div><p>I&#039;m shopping for one of the slugs.&nbsp; &nbsp;I&#039;m planning to make one a file server for<br />the WRT&#039;s.&nbsp; &nbsp;It&#039;s got plenty of horsepower, but the hardware mod looks pretty<br />easy.</p><p>Bill</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17564">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						20 Dec 2005, 18:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>savoy wrote:</cite><blockquote><p>Now, stay with me, if most of the possible applications, ie; web, imap, smtp, etc, are not FP intensive, then putting them onto remote processor&#039;s that are basically,&nbsp; simply moving&nbsp; data back and forth across the network.&nbsp; Is that not what a router does, in reality.</p></blockquote></div><p>A router does indeed just shove IP packets back and forth. It doesn&#039;t keep any state, remembering packets it has already seen. For each packet it does table lookups to decide how to process that packet, based on the content of that packet only.</p><p>A POP3 server is a lot more sophisticated than that. It has to maintain TCP sessions for each attached client. It has to parse headers. It has to reformat message bodies (e.g. converting \n to \r\n). An IMAP server adds a whole load more complexity, including indexing and searching of headers.</p><p>Squeezing an IMAP server into ~2MB of flash will be tricky, and having it run in 16MB of RAM harder still (i.e. IMAP servers are generally not optimised to run in the absolute minimum possible amount of RAM), even with only one or two clients connecting at a time. The only way to get around this would be to start swapping over NFS, which is unbelievably painful.</p><p>Since you already have a mini-ITX PC with a CPU &quot;5 times more powerful&quot; by your admission, but more importantly lots more RAM, in my opinion that&#039;s the sensible place to run an IMAP server.</p><p>The same applies to lots of client-server applications. For example, it makes sense to run a mysql client under OpenWRT; IMO it doesn&#039;t make sense to run a mysql server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17580">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">savoy</div>
					<div class="post-datetime">
						21 Dec 2005, 01:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>candlerb wrote:</cite><blockquote><div class="quotebox"><cite>savoy wrote:</cite><blockquote><p>Now, stay with me, if most of the possible applications, ie; web, imap, smtp, etc, are not FP intensive, then putting them onto remote processor&#039;s that are basically,&nbsp; simply moving&nbsp; data back and forth across the network.&nbsp; Is that not what a router does, in reality.</p></blockquote></div><p>A router does indeed just shove IP packets back and forth. It doesn&#039;t keep any state, remembering packets it has already seen. For each packet it does table lookups to decide how to process that packet, based on the content of that packet only.</p><p>A POP3 server is a lot more sophisticated than that. It has to maintain TCP sessions for each attached client. It has to parse headers. It has to reformat message bodies (e.g. converting \n to \r\n). An IMAP server adds a whole load more complexity, including indexing and searching of headers.</p><p>Squeezing an IMAP server into ~2MB of flash will be tricky, and having it run in 16MB of RAM harder still (i.e. IMAP servers are generally not optimised to run in the absolute minimum possible amount of RAM), even with only one or two clients connecting at a time. The only way to get around this would be to start swapping over NFS, which is unbelievably painful.</p><p>Since you already have a mini-ITX PC with a CPU &quot;5 times more powerful&quot; by your admission, but more importantly lots more RAM, in my opinion that&#039;s the sensible place to run an IMAP server.</p><p>The same applies to lots of client-server applications. For example, it makes sense to run a mysql client under OpenWRT; IMO it doesn&#039;t make sense to run a mysql server.</p></blockquote></div><p>Actually, the router does keep state on Tcp transactions, if you enable Iptables, and are using it in a full state-ful firewall mode.&nbsp; Yes your absolutely right, if I was running an ISP, which I&#039;ve done two, that&#039;s when I&#039;d have my big iron ready with the backplane and memory for thousands of maintained connections.&nbsp; It maintains session data, state and hanldles a fair amount of overhead.</p><p>But, that&#039;s not the application, in the case of this gentleman and myself, running a couple of imap sessions for my own mailboxes, with plenty of disk space mounted is nothing at all.&nbsp; Yes, I&#039;m already installing packages onto my mounted space...</p><p>Courier IMAP is not very ram intensive and is just one that should be easy to port.&nbsp; </p><p>The mini-itx uses 5 times the electricity...&nbsp; :-)&nbsp; &nbsp;It&#039;s actually pulling 1.8 amps versus the wrt 23 watts.</p><p>And I agree completely, using the WRT&#039;s as mysql clients, talking to PC server with disks for the server is <br />reasonable.&nbsp; </p><p>But, think about other applications where for example&nbsp; you need a DNS server, for small home domain, and forwarding.&nbsp; For reliabilitiy sake, would the WRT make a good platform for that?&nbsp; &nbsp;A few small zone files would<br />be perfect&nbsp; example of using a WRT as an &quot;applicance&quot;.</p><p>Bill</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17590">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						21 Dec 2005, 06:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>savoy wrote:</cite><blockquote><p>Courier IMAP is not very ram intensive and is just one that should be easy to port.</p></blockquote></div><p>Did I just hear someone just volunteer? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17668">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">candlerb</div>
					<div class="post-datetime">
						22 Dec 2005, 14:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>savoy wrote:</cite><blockquote><p>The mini-itx uses 5 times the electricity...&nbsp; :-)&nbsp; &nbsp;It&#039;s actually pulling 1.8 amps versus the wrt 23 watts.</p></blockquote></div><p>Sure but I thought you said the mini-itx is powered up and providing network-attached storage for the WRT? In that case you&#039;re already paying the electricity bill for it. Or are you using a USB-attached hard drive on the WRT?</p><div class="quotebox"><cite>savoy wrote:</cite><blockquote><p>But, think about other applications where for example&nbsp; you need a DNS server, for small home domain, and forwarding.&nbsp; For reliabilitiy sake, would the WRT make a good platform for that?&nbsp; &nbsp;A few small zone files would<br />be perfect&nbsp; example of using a WRT as an &quot;applicance&quot;.</p></blockquote></div><p>Yes - doesn&#039;t dnsmasq do that already though? Anyway, a DNS server is not the same as an IMAP server <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17672">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Maduser</div>
					<div class="post-datetime">
						22 Dec 2005, 15:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>candlerb wrote:</cite><blockquote><p>Given that you already have a machine which is running as a Samba server, why not run your IMAP server on that too?</p></blockquote></div><p>Not a Maschine with a smb share, it´s only a Network Stroage.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17673">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">TcT</div>
					<div class="post-datetime">
						22 Dec 2005, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>What kind of NAS are you using? As sombody previously mentiond the NSLU but also nice machines are the linkstations the might have a little more CPU power with 400MHZ MIPS cpus and can run full debian distros.</p><p><a href="http://linkstationwiki.org">http://linkstationwiki.org</a> has lots of infos on these.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18394">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Maduser</div>
					<div class="post-datetime">
						6 Jan 2006, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for not anssering, but I was over Chrismas and Newyear not at PC.</p><p>I have Maxtor shared storage, but I don#t realy want to put OpenWrt on it because its unsupported.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p35756">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">VeNoM</div>
					<div class="post-datetime">
						20 Oct 2006, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Today there are plenty of routers capable of running a pop3/imap server like dovecot for example.<br />So, can somebody with a complile enviroment make a dovecot package ?</p>											<p class="post-edited">(Last edited by <strong>VeNoM</strong> on 20 Oct 2006, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36084">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">NDL</div>
					<div class="post-datetime">
						26 Oct 2006, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>VeNoM wrote:</cite><blockquote><p>Today there are plenty of routers capable of running a pop3/imap server like dovecot for example.<br />So, can somebody with a complile enviroment make a dovecot package ?</p></blockquote></div><p>I have dovecot 1.0.7 running on Kamikaze on WL-500g Deluxe, but I just do not have time to do the port reliably and prepare the package :-(<br />(besides that, I still have the old build environment)</p><p>So, it&#039;s just for the information that it is indeed possible and the resulting package works fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p44829">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">extremoburo</div>
					<div class="post-datetime">
						20 Mar 2007, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>Ho did you compile dovecot? dod you cross compile or not? </p><p>I&#039;m having troubles cross compiling dovecot V1 release 27 for my wrtg4gs but it looks like it does not work properly.</p><p>Fabrizio.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160183">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Dirksen</div>
					<div class="post-datetime">
						9 Mar 2012, 04:54					</div>
				</div>
				<div class="post-content content">
					<p>I would very much appreciate any help on this. Once I am successful, I will post the full set of commands that work to this thread for all to benefit... </p><p>Please note that if you don&#039;t add the &quot;modules&quot; option to <a href="http://www.ledstrips8.com/flexible-led-strip-lights-c-32.html">flexible led strip</a> <a href="http://www.ledstrips8.com/outdoor-led-lighting-c-11.html">led strip lighting outdoor</a> <a href="http://www.ledstrips8.com/led-light-bars-c-38.html">LED Light Bars</a> the openswan ipkg/rules, the ipkg is made, but, not the modules package. Obviously, I am missing something here... </p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163346">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">codeopengr</div>
					<div class="post-datetime">
						5 Apr 2012, 04:40					</div>
				</div>
				<div class="post-content content">
					<p>well,past</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>