<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Buffalo WZR-600DHP2 Support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p277196">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">markeagles4</div>
					<div class="post-datetime">
						22 May 2015, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>To begin with i flashed this unit with DD-WRT but couldn&#039;t get IPTV to work smoothly like i can with OpenWrt on my WDR3600, pleased that this unit is now supported by OpenWrt so i flashed the&nbsp; CHAOS CALMER (15.05 RC1), now i flashed this by terminal , erased NVRAM and FIRMWARE and wrote the file to linux , its booted fantastic , am i to belive this RC1 is a very very ALFA/BETA as no LED lights are configured this is an easy task but i am finding the WIFI is very weak , 54mb connection on both 2.4 and 5GHz . </p><p>Any advise would be greatfull</p><p>Mark</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277212">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						22 May 2015, 17:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>markeagles4 wrote:</cite><blockquote><p>no LED lights are configured this is an easy task</p></blockquote></div><p>Be specific.</p><div class="quotebox"><cite>markeagles4 wrote:</cite><blockquote><p>WIFI is very weak , 54mb connection on both 2.4 and 5GHz . </p><p>Any advise would be greatfull</p></blockquote></div><p>Read the *** wiki <a href="http://wiki.openwrt.org/doc/hardware/soc/soc.broadcom.bcm53xx">http://wiki.openwrt.org/doc/hardware/so â€¦ om.bcm53xx</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282536">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Francis</div>
					<div class="post-datetime">
						6 Jul 2015, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I know that this topic is a bit old but I wondered how markeagles4 flashed the Buffalo WZR-600DHP2 with the OpenWRT image (which can be found <a href="https://downloads.openwrt.org/chaos_calmer/15.05-rc2/bcm53xx/generic/">here</a>).</p><p>DD-WRT provides a *.bin firmware which works using the web flash process but OpenWRT provides a *.trx image which is refused by the web flash process.</p><p>So how did you flash this router with the *.trx file?</p><p>Thank you in advance for your help.</p><p>Francis.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282939">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Francis</div>
					<div class="post-datetime">
						9 Jul 2015, 16:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>just a message to say that I managed to install OpenWRT on the Buffalo.<br />For those who are interested, you need to start a TFTP server on a PC and set the following configuration:<br />IP: 192.168.1.2<br />Netmask: 255.255.255.0<br />Gateway: 192.168.1.1</p><p>Then download the OpenWRT firmware which fits with the Buffalo and rename the file to &#039;linux.trx-recovery&#039; (without quotes). Put this file where the TFTP server will read it and start the Buffalo (be sure that the buffalo is plugged to your PC <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" />)</p><p>Then wait let&#039;s say 3 minutes and it should be ok.<br />Here is the serial log for curious people: <a href="http://pastebin.com/qKi9W5uP">http://pastebin.com/qKi9W5uP</a> (tftp recovery starts at line #47)</p><p>EDIT: to enter recovery mode, you need to press the red button at start.</p><p>Francis.</p>											<p class="post-edited">(Last edited by <strong>Francis</strong> on 9 Jul 2015, 17:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291327">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						11 Sep 2015, 23:20					</div>
				</div>
				<div class="post-content content">
					<p>There are (at least) 2 methods of flashing. You can use recovery mechanism as explained above. Or you can use serial console access to tell CFE to get firmware over TFTP protocol and flash it, e.g.:</p><div class="codebox"><pre><code>flash -noheader 192.168.1.2:openwrt-bcm53xx-buffalo-wzr-600dhp2-squashfs.trx nflash1.trx</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342004">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tobixen</div>
					<div class="post-datetime">
						24 Oct 2016, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>I downloaded openwrt-15.05.1-bcm53xx-buffalo-wzr-600dhp2-squashfs.trx and put it out on tftp as linux.trx-recovery, set up eth0 with the address 192.168.1.2/24, and then I booted the router while pressing the red button.</p><p>I could see from tcpdump that the router actually comes up as 192.168.1.1 and fetches the linux.trx-recovery from 192.168.1.2 - but no luck, after a while the router comes up as 192.168.11.1 with the buffalo software. :-(</p><p>According to the info page in the buffalo software, the model is &quot;WZR-600DHP2&nbsp; Version 2.16 (R0.01/B0.02-1.00)&quot;.</p><p>If I understand it correctly, to access the serial console I need to modify the hardware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342007">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						24 Oct 2016, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>You may need to solder pin outs (header) to the PCB, if they aren&#039;t already there.</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 24 Oct 2016, 21:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342009">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tobixen</div>
					<div class="post-datetime">
						24 Oct 2016, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried with openwrt-15.05-bcm53xx-buffalo-wzr-600dhp2-squashfs.trx as well (downgrade from 15.05.1 to 15.05), same result.&nbsp; (I&#039;m not allowed to post the links to the forum)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342018">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">tobixen</div>
					<div class="post-datetime">
						24 Oct 2016, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>according to the wiki, just connecting an ordinary rs232 cable to the computer may fry the mother board because the standard is 12v, while the router uses 3.3v ... do I need to build voltage dividers using resistors?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342021">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						24 Oct 2016, 22:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tobixen wrote:</cite><blockquote><p>according to the wiki, just connecting an ordinary rs232 cable to the computer may fry the mother board because the standard is 12v, while the router uses 3.3v ... do I need to build voltage dividers using resistors?</p></blockquote></div><p>Absolutely don&#039;t use 12 V. You may build serial adapter on your own, or buy one for $1-2 from ebay. Just look for &quot;USB TTL&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342028">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">tobixen</div>
					<div class="post-datetime">
						24 Oct 2016, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>I ordered a USB adaptor from dx ... I&#039;m still not allowed to post links, but SKU #81872, found it by browsing more through the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344262">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">guineapig</div>
					<div class="post-datetime">
						20 Nov 2016, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I just bought this router, main reason for my choice was the large flash and RAM size and its compatibility with open firmware.</p><p>It comes with buffalo firmware version 2.16. I opened the case and connected by serial converter (3,3V).</p><p>CFE&gt; show devices<br />Device Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Description<br />-------------------&nbsp; ---------------------------------------------------------<br />uart0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NS16550 UART at 0x18000300<br />uart1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; NS16550 UART at 0x18000400<br />nflash0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash size 131072KB<br />nflash0.boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 00000000 size 512KB<br />nflash0.bootp&nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 00080000 size 128KB<br />nflash0.nvram&nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 000A0000 size 1408KB<br />nflash0.trx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 00200000 size 1KB<br />nflash0.os&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 0020001C size 31744KB<br />nflash0.trx2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 02100000 size 1KB<br />nflash0.os2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 0210001C size 31744KB<br />nflash1.boot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 00000000 size 512KB<br />nflash1.bootp&nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 00080000 size 128KB<br />nflash1.nvram&nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 000A0000 size 1408KB<br />nflash1.trx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 00200000 size 31744KB<br />nflash1.trx2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 02100000 size 31744KB<br />nflash1.brcmnand&nbsp; &nbsp; &nbsp;Unknown type 146 NAND flash offset 04000000 size 64512KB<br />nflash1.bbt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Unknown type 146 NAND flash offset 07F00000 size 1024KB<br />eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Broadcom BCM47XX 10/100/1000 Mbps Ethernet Controller<br />*** command status = 0</p><p>I&#039;ve read a lot about firmware update, I have tftp already installed and I&#039;d like to save CFE and maybe original firmware before trying anything but I&#039;m not sure which command shoud I issue from serial, I know I should use the save command, but which memory area to save?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344264">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						20 Nov 2016, 23:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>guineapig wrote:</cite><blockquote><p>Hello, I just bought this router, main reason for my choice was the large flash and RAM size and its compatibility with open firmware.</p></blockquote></div><p>This router has BCM43217 and BCM43228:<br /><a href="https://wikidevi.com/wiki/Buffalo_WZR-600DHP2">https://wikidevi.com/wiki/Buffalo_WZR-600DHP2</a></p><p>The only open driver supporting these chipsets is b43 and that support is highly limited:<br /><a href="https://wiki.openwrt.org/doc/hardware/soc/soc.broadcom.bcm53xx">https://wiki.openwrt.org/doc/hardware/s â€¦ om.bcm53xx</a></p><p>I&#039;m afraid your research was wrong.</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 20 Nov 2016, 23:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344266">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">guineapig</div>
					<div class="post-datetime">
						20 Nov 2016, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>Yes I know about the radio modules but I will mainly use it wired.</p><p>What about saving the flash areas please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344267">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						20 Nov 2016, 23:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>guineapig wrote:</cite><blockquote><p>What about saving the flash areas please?</p></blockquote></div><p>Well, you see partition names and their offsets. So if for whatever reason you want to dump boot partition, then both: nflash0.boot and nflash1.boot start at 0x0 and are 512KB (or KiB more likely) big (both entries point to the same partition).</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 20 Nov 2016, 23:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352530">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">guineapig</div>
					<div class="post-datetime">
						20 Feb 2017, 23:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello again, after some time on CC I decided to switch to trunk because I wanted to try adblock which is available as an opkg package there.</p><p>After upgrade and hard reset I found out I can&#039;t reach the router web page (failed to connect)</p><p>Dhcp is working, I can ping the router and ssh to it with no password. (DD 50104)</p><p>Anyone else? Am I missing something?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352532">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						20 Feb 2017, 23:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>guineapig wrote:</cite><blockquote><p>Am I missing something?</p></blockquote></div><p>luci</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352534">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">guineapig</div>
					<div class="post-datetime">
						20 Feb 2017, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:/etc/config# opkg install uci<br />Package uci (2016-07-04.1-1) installed in root is up to date.</p><p>EDIT: Ooops, You meant luci..&nbsp; sorry, checking about that</p>											<p class="post-edited">(Last edited by <strong>guineapig</strong> on 20 Feb 2017, 23:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352543">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">guineapig</div>
					<div class="post-datetime">
						21 Feb 2017, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Zajec, that did the trick.</p><p>I didn&#039;t know trunk doesn&#039;t include web interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367787">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">taters</div>
					<div class="post-datetime">
						3 Nov 2017, 06:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. I have this router also, and want to switch from dd-wrt to openwrt/lede.</p><p>Could someone that&#039;s done it give me a hint as to how to open the case of this thing without breaking the plastic. I want to connect a TTL cable for the serial console.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367849">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						4 Nov 2017, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Looks like the latest LEDE 17.01.4 supports this router</p><p><a href="https://lede-project.org/toh/hwdata/buffalo/buffalo_wzr-600dhp2">https://lede-project.org/toh/hwdata/buf â€¦ zr-600dhp2</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>