<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Roaming performs very bad</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p224308">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						2 Feb 2014, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I am using three routers with openWRT latest trunk (ar71xx):</p><p>- main-router with dhcp and all the stuff is a Buffalo Airstation WZR-HP-AG300H<br />- two routers only as AP (without firewall or dhcp), connected to the Airstation via LAN, D-Link DIR-825.</p><p>On all routers same ssid (not hidden), same PW, different channels.</p><p>My clients work fine if they are connected to the airstation. But when they are connected to on of the two others, there are only problems. Slow connections, no answers. The only thing that helps is reconnecting and praying that the client connects to the airstation.</p><p><strong>Problem raises with 39424. Any hint that helps?</strong></p><p>At the moment my only solution was deactivating the two secondary devices.</p><p>Clients are: one PCcard, some Android-devices, two laptops running with win and/or Debian Linux.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224322">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						2 Feb 2014, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>trunk means unstable version,updating almost everyday,bugs everyday.<br />Before you post, you try stable version AA 12.09, if the problem still exsits, then back for help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224336">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						2 Feb 2014, 13:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eeff11 wrote:</cite><blockquote><p>trunk means unstable version,updating almost everyday,bugs everyday.<br />Before you post, you try stable version AA 12.09, if the problem still exsits, then back for help.</p></blockquote></div><p>I started using trunk <span class="bbu">because</span> the problem occurs with stable. And you don&#039;t have to tell me what I have to do or not to. Or are you the posting-police?<br />Trunk is to try out, forum is to talk about. So I post when <strong>I</strong> think it&#039;s time to post, not when <em>you</em> allow it.</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 2 Feb 2014, 13:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224370">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						2 Feb 2014, 22:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p><strong>Problem raises with 39424. Any hint that helps?</strong></p></blockquote></div><p>Oh, you&#039;re asking for help, but not to be told what to do.I was just trying to help,well,no more &quot;what to do&quot;, let it be trunk as you will.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224376">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						2 Feb 2014, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>There was no help in your annoying posting. So you know that I come from stable -&gt; where&#039;s your help now?</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 2 Feb 2014, 22:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224388">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						3 Feb 2014, 00:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>And you don&#039;t have to tell me what I have to do or not to. Or are you the posting-police?<br />.</p></blockquote></div><p>I know several steps to do to find out where to check,but you don&#039;t want be told what to do or not to do,then I&#039;m scared for I&#039;m not the posting police.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224390">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						3 Feb 2014, 01:38					</div>
				</div>
				<div class="post-content content">
					<p>You know nothing. That&#039;s not <em>my</em> problem. It&#039;s a forum, maybe answers may help others. So I guess only blank words from you, not willing to help.</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 3 Feb 2014, 01:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224445">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						3 Feb 2014, 17:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>And you don&#039;t have to tell me what I have to do or not to.</p></blockquote></div><p>With that behavior don&#039;t expect answers soon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224486">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						3 Feb 2014, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t expect answers from guys who are only talking strange things. There was absolutely no help for AA, only empty words. Why do you think I am using AA instead of stable? Of course, really because I am masochistic...</p><div class="quotebox"><cite>eeff11 wrote:</cite><blockquote><p>I know several steps...</p></blockquote></div><p>And - where are these &quot;several steps&quot;? Sorry but I am really angry about guys who <em>affect</em> to know more than others, but after asking there comes...</p>											<p class="post-edited">(Last edited by <strong>naturelle</strong> on 3 Feb 2014, 22:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224505">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">golialive</div>
					<div class="post-datetime">
						4 Feb 2014, 03:04					</div>
				</div>
				<div class="post-content content">
					<p>Hey there.</p><p>Well, offending doesn&#039;t help in any way. And nearly every post here is at least a little offending. Which includes mine as well, which offends all of you that didn&#039;t help but complain about atitude. So sorry for that, but I can&#039;t just answer without commenting this.</p><ul><li><p>&quot;If you had gone the official way, you would know how to find bugs the official way&quot;. Wasn&#039;t postet exactly this way, but it quite sure was meant this way. Clearly offending. Ok, the &quot;how to find bugs the officla way&quot; is made up by my mind. But that&#039;s how I read that.</p></li><li><p>&quot;If you don&#039;t wanna help, shut up&quot;. Even more offending. Wording was different, but not much.</p></li><li><p>&quot;If you wouldn&#039;t want to be offended, you should have stood away&quot; ... oh lord.</p></li><li><p>&quot;I know how to solve the problem, but since you&#039;re offending/ignorant/whatever, I don&#039;t tell you&quot; ... it gets childish, doesn&#039;t it?</p></li></ul><br /><p>Now to the point.</p><p>Your APs all have dedicated IPs. You could ping them all through a wifi device, which is connected to one of your satellite routers. This will help you check if it&#039;s the wifi connection or the link between your APs. If it&#039;s the link between your APs, the ping to the very AP the wifi device is connected too should be pretty nice, ping to all other APs should have package drops.</p><p>In your initial post you said &quot;Problem raises with 39424.&quot;. In your first reply you said &quot;I started using trunk because the problem occurs&quot;. Well ... the 39424 isn&#039;t the stable one, is it? The current 12.09 stable should be r36088. So did you try 12.09? Did it work or did you encounter the same problem?</p><p>My setup just works without any issues. I run:<br /></p><ul><li><p>A r39442 (tp-link 4900) as main router hostng the outbound connection and DHCP. It usually has 5 connected wifi devices.</p></li><li><p>A r39294 (tp-link 1043) mainly as switch, but also as AP when I&#039;m in my bathroom. So usually there is no connected wifi device, but every now and then my smart phone is connected and just works.</p></li><li><p>A r39210 (netgear 3500) which usually has at least two connected wifi devices.</p></li></ul><p>The routers are hard wired in this particular order (4900 wired to 1043, 1043 wired to 3500). The 4900 has WAN port as WAN port and provides the outbound connection. The 1043 as well as the 3500 both have the WAN port assigned as 5th switch port. The external interface is completely killed (I just deleted the interface Luci).</p><p>If you ask why I run different builds: Well, I&#039;m lazy. I do update if something goes wrong, and I do update if I want to add kernel modules. Kernel modules depend on a specific build number. But if things are running, I don&#039;t touch the setup. And that&#039;s why I run different build numbers: Because I installed or updated the routers on different days. </p><p>I don&#039;t have any bandwith or package loss issues.</p><p>Did you unintentionally plug a loop? A loop would either create high CPU on your router devices or make them soft-disconnect when detecting the loop. You could have tried out WDS, created bridging stuff and added a wire connection because WDS doesn&#039;t provide enough bandwith. Or maybe two different powerlan plugs connected to different routers where both routers are connected through wire? That would create a loop, too. Both situations are quite common.</p><p>I just recently read about some energy saving mechanisms, like IEEE 802.3az. I don&#039;t know the current state if this, but you could give it a try and disable it if your switch supports it.</p><p>Another thing: You could use a wifi detector software (I like inSSIDer on windows, but there are several on every platform) and check if you channelled properly. You should make your channels the least overlap you can get, which includes conflicts with your neighbors, too. Maybe it&#039;s the 40/20 power adjustment thingy which tries to use at the very same time the most power for the best signal and the least power for the least conflict?</p><p>You didn&#039;t plug routed connections by some routed/NATed wan ports but used the LAN ports, did you?</p><p>Regards,<br />Stephan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224614">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						5 Feb 2014, 15:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>golialive wrote:</cite><blockquote><p>Your APs all have dedicated IPs.</p></blockquote></div><p>Of course.</p><div class="quotebox"><blockquote><p>You could ping them all through a wifi device,</p></blockquote></div><p>Of course.</p><div class="quotebox"><blockquote><p>So did you try 12.09? Did it work or did you encounter the same problem?</p></blockquote></div><p>There were other issues which didn&#039;t allow to try stable again. Don&#039;t know exactly what they were, but there were several reason for start using trunk.</p><div class="quotebox"><blockquote><p>I don&#039;t have any bandwith or package loss issues.</p></blockquote></div><p>I don&#039;t have, too. The units only are not roaming properly. For example, the loss connection to second router and then do not connect to main router. Or ping over second router is 350ms, while ping over main router is about 35ms.</p><div class="quotebox"><blockquote><p>Did you unintentionally plug a loop?</p></blockquote></div><p>What kind of loop do you mean?</p><div class="quotebox"><blockquote><p>You could have tried out WDS,</p></blockquote></div><p>I do not use WDS.</p><div class="quotebox"><blockquote><p>Or maybe two different powerlan plugs</p></blockquote></div><p>There is no powerlan. Only normal LAN and my Wifi.</p><div class="quotebox"><blockquote><p>Another thing: You could use a wifi detector software (I like inSSIDer on windows, but there are several on every platform) and check if you channelled properly. You should make your channels the least overlap you can get, which includes conflicts with your neighbors, too. Maybe it&#039;s the 40/20 power adjustment thingy which tries to use at the very same time the most power for the best signal and the least power for the least conflict?</p></blockquote></div><p>Optimized channels, but up to 50(!) neighbour networks. No more optimization possible.</p><div class="quotebox"><blockquote><p>You didn&#039;t plug routed connections by some routed/NATed wan ports but used the LAN ports, did you?</p></blockquote></div><p>Nope.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>