<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDR4000 Generic MAC80211</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p248890">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						2 Oct 2014, 23:00					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>Just installed OpenWrt Chaos Calmer r42711 on a WNDR4000 that was running stock firmware.<br />Was configuring all the stuff when I noticed that radios are both showing up as Generic MAC80211 802.11bg.</p><p>dmesg says:</p><p>[&nbsp; &nbsp;12.630000] b43-phy0: Broadcom 4331 WLAN found (core revision 29)<br />[&nbsp; &nbsp;12.640000] bcma: bus1: Switched to core: 0x812<br />[&nbsp; &nbsp;12.640000] b43-phy0: Found PHY: Analog 9, Type 7 (HT), Revision 1<br />[&nbsp; &nbsp;12.650000] b43-phy0: Found Radio: Manuf 0x17F, ID 0x2059, Revision 0, Version 1<br />[&nbsp; &nbsp;12.650000] b43-phy0 warning: 5 GHz band is unsupported on this PHY<br />[&nbsp; &nbsp;12.660000] b43-phy1: Broadcom 4716 WLAN found (core revision 17)<br />[&nbsp; &nbsp;12.760000] b43-phy1: Found PHY: Analog 8, Type 4 (N), Revision 5<br />[&nbsp; &nbsp;12.770000] b43-phy1: Found Radio: Manuf 0x17F, ID 0x2056, Revision 7, Version 0<br />[&nbsp; &nbsp;12.780000] Broadcom 43xx driver loaded [ Features: NL ]<br />[&nbsp; &nbsp;12.800000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;12.880000] ieee80211 phy1: Selected rate control algorithm &#039;minstrel_ht&#039;</p><p>Should I open a bug report ? Or anyone has a clue ?</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>dynek</strong> on 2 Oct 2014, 23:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248904">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						2 Oct 2014, 23:49					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s just a name. I think you need proprietary broadcom wireless drivers if you want 5 GHz (802.11a/802.11an) . support. See the wiki</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248938">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 07:23					</div>
				</div>
				<div class="post-content content">
					<p>WNDR4000 wiki did not change for month (well small updates) and there&#039;s a only links to trail builds, dmesg, etc.<br /><a href="http://wiki.openwrt.org/toh/netgear/wndr4000">http://wiki.openwrt.org/toh/netgear/wndr4000</a></p><p>Now, if memory servers me right, WNDR3400 shares specs with 4000, so this might help:<br /><a href="http://wiki.openwrt.org/toh/netgear/wndr3400">http://wiki.openwrt.org/toh/netgear/wndr3400</a></p><p>I&#039;ll check and report back for other users if I succeed ... or not. But I will :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248942">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						3 Oct 2014, 08:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dynek wrote:</cite><blockquote><p>Should I open a bug report ? Or anyone has a clue ?</p></blockquote></div><p>Report/clue about what?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248966">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 12:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Zajec wrote:</cite><blockquote><div class="quotebox"><cite>dynek wrote:</cite><blockquote><p>Should I open a bug report ? Or anyone has a clue ?</p></blockquote></div><p>Report/clue about what?</p></blockquote></div><p>Make an educated guess.</p><p>OK well I should have said: Should I raise a ticket to ask if I can be of any help having WNDR4000 WiFi work ? Or anyone has such a device and already knows what to do ?</p>											<p class="post-edited">(Last edited by <strong>dynek</strong> on 3 Oct 2014, 12:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248967">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						3 Oct 2014, 12:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dynek wrote:</cite><blockquote><p>OK well I should have said: Should I raise a ticket to ask if I can be of any help having WNDR4000 WiFi work ?</p></blockquote></div><p>So the WiFi doesn&#039;t work for you? What exactly happens? Can you see the SSID broadcasted? Can you connect? Is the performance poor? Do you have problems with both WiFi devices, or just one?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248968">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Well instead of seeing one 2.4Ghz radio and one 5Ghz radio I see two Generic MAC80211 802.11bg.<br />Haven&#039;t really gone any further as it looks something&#039;s wrong there, right ?<br />Now, if I hit &quot;scan&quot; on both radio, I see some 2.4Ghz networks around, no 5Ghz network showing up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248984">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Scanning from radio0 shows 3 networks - rock solid. The list never changes, it always shows the same networks<br />Scanning from radio1 shows 9 networks - rock solid. The list contains 3 networks mentioned above + 6 other networks</p><p>Tried running the scan multiple times, reboot, etc. It always shows the exact same networks (3 on radio0 and 9 on radio1 which includes 3 same networks as radio0).</p><p>If this can help:</p><p># wifi detect &gt; /etc/config/wireless<br /><em>edited the file to enable both radio + /etc/init.d/network reload</em></p><br /><p># ifconfig -a<br />wlan0<br />Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX&nbsp; <br />UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />TX packets:3 errors:0 dropped:0 overruns:0 carrier:0<br />collisions:0 txqueuelen:1000 <br />RX bytes:0 (0.0 B)&nbsp; TX bytes:192 (192.0 B)</p><p>wlan1<br />Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX&nbsp; <br />UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />TX packets:3 errors:0 dropped:0 overruns:0 carrier:0<br />collisions:0 txqueuelen:1000 <br />RX bytes:0 (0.0 B)&nbsp; TX bytes:192 (192.0 B)</p><p># iwinfo radio0 info<br />ESSID: unknown<br />Access Point: 00:00:00:00:00:00<br />Mode: Master&nbsp; Channel: 11 (2.462 GHz)<br />Tx-Power: unknown&nbsp; Link Quality: unknown/70<br />Signal: unknown&nbsp; Noise: unknown<br />Bit Rate: unknown<br />Encryption: none<br />Type: nl80211&nbsp; HW Mode(s): 802.11bg<br />Hardware: unknown [Generic MAC80211]<br />TX power offset: unknown<br />Frequency offset: unknown<br />Supports VAPs: no&nbsp; PHY name: phy0</p><p># iwinfo radio1 info<br />ESSID: unknown<br />Access Point: 00:00:00:00:00:00<br />Mode: Master&nbsp; Channel: 11 (2.462 GHz)<br />Tx-Power: unknown&nbsp; Link Quality: unknown/70<br />Signal: unknown&nbsp; Noise: unknown<br />Bit Rate: unknown<br />Encryption: none<br />Type: nl80211&nbsp; HW Mode(s): 802.11bg<br />Hardware: unknown [Generic MAC80211]<br />TX power offset: unknown<br />Frequency offset: unknown<br />Supports VAPs: no&nbsp; PHY name: phy1</p><p># dmesg | grep -i &quot;b43\|wlan&quot;<br />[&nbsp; &nbsp;12.630000] b43-phy0: Broadcom 4331 WLAN found (core revision 29)<br />[&nbsp; &nbsp;12.640000] b43-phy0: Found PHY: Analog 9, Type 7 (HT), Revision 1<br />[&nbsp; &nbsp;12.650000] b43-phy0: Found Radio: Manuf 0x17F, ID 0x2059, Revision 0, Version 1<br />[&nbsp; &nbsp;12.650000] b43-phy0 warning: 5 GHz band is unsupported on this PHY<br />[&nbsp; &nbsp;12.660000] b43-phy1: Broadcom 4716 WLAN found (core revision 17)<br />[&nbsp; &nbsp;12.760000] b43-phy1: Found PHY: Analog 8, Type 4 (N), Revision 5<br />[&nbsp; &nbsp;12.770000] b43-phy1: Found Radio: Manuf 0x17F, ID 0x2056, Revision 7, Version 0<br />[&nbsp; 104.690000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)<br />[&nbsp; 106.830000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)<br />[&nbsp; 108.980000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)<br />[&nbsp; 115.300000] b43-phy1: Loading firmware version 666.2 (2011-02-23 01:15:07)<br />[&nbsp; 117.910000] b43-phy1: Loading firmware version 666.2 (2011-02-23 01:15:07)<br />[&nbsp; 120.520000] b43-phy1: Loading firmware version 666.2 (2011-02-23 01:15:07)</p>											<p class="post-edited">(Last edited by <strong>dynek</strong> on 3 Oct 2014, 14:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248991">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						3 Oct 2014, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>Can you provide output of</p><div class="codebox"><pre><code>nvram show | egrep &#039;devpath|devid&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248996">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 15:54					</div>
				</div>
				<div class="post-content content">
					<p># nvram show | egrep &#039;devpath|devid&#039;<br />sb/1/devid=0x4329<br />pci/1/1/devid=0x4331</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249011">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						3 Oct 2014, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>Oh, this is funny. It seems your BCM4331 is dual band, not 5 GHz only!</p><div class="codebox"><pre><code>#define BCM4331_D11N_ID        0x4331        /* 4331 802.11n dualband id */
#define BCM4331_D11N2G_ID    0x4332        /* 4331 802.11n 2.4Ghz band id */
#define BCM4331_D11N5G_ID    0x4333        /* 4331 802.11n 5Ghz band id */</code></pre></div><p>Anyway, BCM4331 isn&#039;t supported well yet, it still misses 5 GHz band support. I started working on that, but it&#039;s not ready yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249013">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						3 Oct 2014, 17:33					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m available for any test you would want to make :-)</p><p>Thanks for your time, really appreciated!</p>											<p class="post-edited">(Last edited by <strong>dynek</strong> on 3 Oct 2014, 17:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249110">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">amenra</div>
					<div class="post-datetime">
						4 Oct 2014, 12:52					</div>
				</div>
				<div class="post-content content">
					<p>I am having the same issue with WNDR4000 - no Wireless N support.</p><p><strong>Firmware Version</strong> OpenWrt Barrier Breaker 14.07 / LuCI Trunk (0.12+svn-r10530)</p><p><strong>nvram show | egrep &#039;devpath|devid&#039;</strong><br /></p><div class="codebox"><pre><code>sb/1/devid=0x4329
pci/1/1/devid=0x4331</code></pre></div><p><strong>dmesg | grep -i &quot;b43\|wlan&quot;</strong><br /></p><div class="codebox"><pre><code>[   11.310000] b43-phy0: Broadcom 4331 WLAN found (core revision 29)
[   11.310000] b43-phy0: Found PHY: Analog 9, Type 7 (HT), Revision 1
[   11.320000] b43-phy0: Found Radio: Manuf 0x17F, ID 0x2059, Revision 0, Version 1
[   11.330000] b43-phy0 warning: 5 GHz band is unsupported on this PHY
[   11.330000] b43-phy1: Broadcom 4716 WLAN found (core revision 17)
[   11.410000] b43-phy1: Found PHY: Analog 8, Type 4 (N), Revision 5
[   11.410000] b43-phy1: Found Radio: Manuf 0x17F, ID 0x2056, Revision 7, Version 0
[  110.160000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)
[  295.470000] b43-phy1: Loading firmware version 666.2 (2011-02-23 01:15:07)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249130">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						4 Oct 2014, 16:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>amenra wrote:</cite><blockquote><p>I am having the same issue with WNDR4000 - no Wireless N support.</p></blockquote></div><p>Yeah, b43 doesn&#039;t support 802.11n features:<br /><a href="http://wireless.kernel.org/en/users/Drivers/b43">http://wireless.kernel.org/en/users/Drivers/b43</a><br />Patches welcome!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249149">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">amenra</div>
					<div class="post-datetime">
						4 Oct 2014, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to install the Broadcom proprietary Linux drivers into openWRT ?<br /><a href="http://www.broadcom.com/support/802.11/linux_sta.php">http://www.broadcom.com/support/802.11/linux_sta.php</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249251">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">fbusa2012</div>
					<div class="post-datetime">
						5 Oct 2014, 14:59					</div>
				</div>
				<div class="post-content content">
					<p>I have the same issue with WNDR4000, no 5Ghz in phy0<br />I also found there are difference between phy0(wlan0) and pyh1 (wlan1).&nbsp; SSID for both wlan was set to openwrt initially and I modified wlan0 to openwrt0 and wlan1 to openwrt1.&nbsp; I am able to connect both SSID.&nbsp; Connect to wlan1 is able to access internet, but not with wlan0.&nbsp; They have identical setup.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249258">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						5 Oct 2014, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>b43 support 5 GHz for &quot;N-PHY&quot; devices only. As you can see<br />1) BCM4331 is HT-PHY hardware, dual band, but we support 2 GHz only<br />2) BCM4716 is N-PHY, so we could support 5 GHz, but the hardware is 2 GHz only</p><p>I&#039;ll try to add 5 GHz support for HT-PHY in next months.</p><br /><p>amenra: did you notice WNDR4000 is MIPS arch? Now check the Broadcom&#039;s driver again closely.</p>											<p class="post-edited">(Last edited by <strong>Zajec</strong> on 5 Oct 2014, 16:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249270">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">amenra</div>
					<div class="post-datetime">
						5 Oct 2014, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Zajec wrote:</cite><blockquote><p>amenra: did you notice WNDR4000 is MIPS arch? Now check the Broadcom&#039;s driver again closely.</p></blockquote></div><p>Ah, yes, missed that. Thank you. Looking forward to a solution soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255220">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">dynek</div>
					<div class="post-datetime">
						22 Nov 2014, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>Jumping in again, looks like DD-WRT is not mentioning any caveat in regard to WiFi. That means they have it (partially) working I guess.</p><p>I&#039;d be interested in knowing which driver they are using and if there&#039;s any drawback.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255228">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						22 Nov 2014, 20:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dynek wrote:</cite><blockquote><p>Jumping in again, looks like DD-WRT is not mentioning any caveat in regard to WiFi. That means they have it (partially) working I guess.</p><p>I&#039;d be interested in knowing which driver they are using and if there&#039;s any drawback.</p></blockquote></div><p>they somehow have access to the closed-source broadcom drivers. The pros - it works. The cons - no source and you have to use DD-WRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279853">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">normblop</div>
					<div class="post-datetime">
						13 Jun 2015, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>Any update on the status of this router? I don&#039;t want to run DD-WRT <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Edit: oops, I meant the WNDR3400. I used the search function but didn&#039;t notice this thread was about the WNDR4000.</p>											<p class="post-edited">(Last edited by <strong>normblop</strong> on 13 Jun 2015, 13:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300723">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Rahly</div>
					<div class="post-datetime">
						21 Nov 2015, 22:37					</div>
				</div>
				<div class="post-content content">
					<p>Although I&#039;ve never been able to get 5G to work with this router, I had the 2G working, but I could ONLY get Barrier Breaker to work, anything newer and the wireless would not work.&nbsp; I tried installing from scratch AND upgrading, nothing would work.</p><p>Anyway, I dug into this a little more.&nbsp; It seems that the auto wireless configuration was always applying the wrong device in /etc/config/wireless.&nbsp; Under radio1, the device was always &quot;bcma0:0&quot;, which was correct in Barrier Breaker, but there must have been a driver change in how its being ordered in later kernels.&nbsp; I edited this to &quot;bcma0:1&quot; and /etc/init.d/network restart, and viola, I could access the 2G network again.&nbsp; So anyone who wants to get this at least somewhat working, should be able to make those changes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p344265">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">wastesubscribe</div>
					<div class="post-datetime">
						20 Nov 2016, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>I tried the latest build earlier this year but still had two 2G network and no 5G.<br />Is 5G support for WNDR4000 planned in any future release/build? I want to move out of DDWRT.</p><p>thanks for looking.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>