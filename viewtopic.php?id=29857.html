<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> JTAG for AR7241/MR3420</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p134553">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rafaelpm</div>
					<div class="post-datetime">
						3 May 2011, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello Guys!</p><p>I&#039;m trying do a firmware to MR3420 so I download OpenWrt-ImageBuilder-ar71xx-for-Linux-i6862.tar.bz2, compiled and combined the files (kernel and rootfs). However after I updated firmware with mtd command the router can&#039;t load kernel. The message is:</p><p>Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... Error: Bad gzipped data<br />GUNZIP ERROR - must RESET board to recover</p><p>Anybody here know how recovery firmware ?</p><p>I think about JTAG to recovery, but I don&#039;t know where is pins. Anybody here have the AR7241 datasheet?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134556">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						3 May 2011, 15:30					</div>
				</div>
				<div class="post-content content">
					<p>Recover via serial port, not jtag. Just __fast__ type &quot;tpl&quot; when &quot;Autobooting in 1 seconds&quot; display...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134567">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rafaelpm</div>
					<div class="post-datetime">
						3 May 2011, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>Very so much Thanks!</p><p>It&#039;s work!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135149">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rafaelpm</div>
					<div class="post-datetime">
						12 May 2011, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>Hello Guys!!</p><p>I have another problem!<br />I recorded firmware wrong in MR3420 and cannot back more! What&#039;s happen? I&#039;m did using this commands:</p><p>ar7100&gt; erase 0x9f020000 +0x3c0000<br />ar7100&gt; tftpboot 0x81000000 code.bin<br />ar7100&gt; cp.b 0x9f020000 0x81000000 0x3c0000<br />ar7100&gt; bootm 0x9f020000</p><p>I tried record code.bin: openwrt-ar71xx-generic-tl-mr3420-v1-squashfs-factory.bin, openwrt-ar71xx-generic-tl-mr3420-v1-squashfs-sysupgrade.bin and mr3420v1_en_3_12_8_up(110418).bin (original), but don&#039;t back work... <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>What I can do to back? Any suggestion?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135155">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rafaelpm</div>
					<div class="post-datetime">
						12 May 2011, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>I used the md command to see memory and after command cp.b, I see it don&#039;t work, because memory were show only 0xFF.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135202">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rafaelpm</div>
					<div class="post-datetime">
						13 May 2011, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>I resolved it, see the answer:</p><p>ar7100&gt; erase 0x9f020000 +0x3c0000<br />ar7100&gt; tftpboot 0x81000000 code.bin<br />ar7100&gt; cp.b 0x81000000 0x9f020000 0x3c0000 ************************** PROBLEM ********************************<br />ar7100&gt; bootm 0x9f020000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158601">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Dioptimizer</div>
					<div class="post-datetime">
						24 Feb 2012, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>Jtag<br /><a href="https://forum.openwrt.org/viewtopic.php?id=34993">Debrick Routers with AR724x processors Using JTAG</a><br />and<br /><a href="http://wiki.openwrt.org/ru/toh/tp-link/tl-mr3420">Wiki Page</a><br />(use google translate)</p><p><a href="http://freetzlinux.svn.sourceforge.net/viewvc/freetzlinux/trunk/wrtjp/wrtjp.5.2/?view=tar">EJTAG Debrick Utility v5.2</a></p><p>But I&#039;m not sure is this program worked fine (I think wrtjp.5.2.exe not the best choice, because it has a lot of bugs). For example if you choose any option for chip &quot;/fc:XX&quot; with a capacity of 4MB, the program will be fine with them to work (read). Because of this, I think the problem with writing it in the Flash Chip in this &quot;/fc:XX&quot; command option.</p><p>I have MR3220v1.2 with cFeon F32-100HIP (EN25<strong>F</strong>32) SPI Flash-chip</p><p>TJTAG 3.0.2 RC3 readme:<br /></p><div class="codebox"><pre><code>==============================================
EJTAG Debrick Utility v3.0.2 RC3 Tornado-MOD 
==============================================

...

 /fc:XX = Optional (Manual) Flash Chip Selection
-----------------------------------------------
...
fc:112 ............. Ceon EN25P64 U............(8MB) Serial 
...
/fc:119 ............. Ceon EN25P32 U............(4MB) Serial 
/fc:120 ............. Ceon EN25P64 U............(8MB) Serial
...

...</code></pre></div><p>As i understand the programs based on TJTAG not supporting the cFeon F32-100HIP (EN25<strong>F</strong>32) chip.</p><p>I tried to work with the program TJTAG V3.0.0 (it not supporting the cFeon F32-100HIP (EN25<strong>F</strong>32) chip) - but the program has not been able to determine the flash-chip (even for read). I was looking for a program version 3.0.1 or 3.0.2, but I could not find it (for windows).<br />I would be glad of any help or any links.</p><p>P.S.<br />Please forgive me for my awful English.<br />Most of the translated via google-translate.</p>											<p class="post-edited">(Last edited by <strong>Dioptimizer</strong> on 26 Feb 2012, 00:03)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>