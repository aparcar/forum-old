<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> undefined reference to ... (linking problem)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p201116">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">keyanm</div>
					<div class="post-datetime">
						8 May 2013, 05:43					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have installed the SDK binary for Attitude Adjustment (12.09-beta), which is the same version I see when I login to the router.<br />I do export PATH=/openwrt-beta/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/bin<br />and export STAGING_DIR=openwrt-beta/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2</p><p>I compile a simple hello.c program, <br />mips-openwrt-linux-gcc hello.c<br />and I check the executable on the router, and tirumphantly, it works!<br />Now, something with a library. I install libjpeg through the web interface, copy the libjpeg.so to my desktop, and do this:</p><p>mips-openwrt-linux-gcc jpeg_sample.c -ljpeg -I . -L .<br />(the .so and all the required .h files are on the same folder)<br />The result is <br />/tmp/ccAbRe4N.o: In function `read_jpeg_file&#039;:<br />jpeg_sample.c:(.text+0x78): undefined reference to `jpeg_std_error&#039;<br />jpeg_sample.c:(.text+0x94): undefined reference to `jpeg_CreateDecompress&#039;<br />.......<br />I can&#039;t understand why? The so is found obviously, otherwise it would tell me it can&#039;t find it... and the&nbsp; mips-openwrt-linux-strings tells me the .so in fact contains those functions.<br />It is not a matter of incompatibility, because I have seen that it would produce a different error.</p><p>Many thanks,</p><p>keyanm</p>											<p class="post-edited">(Last edited by <strong>keyanm</strong> on 8 May 2013, 05:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201239">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">keyanm</div>
					<div class="post-datetime">
						9 May 2013, 05:13					</div>
				</div>
				<div class="post-content content">
					<p>After building OpenWrt from sources, I realized there are two types of libraries created, one is under the staging directory, and a slightly smaller one, under the build directory. The smaller one is the one used on the router itself. For linking, I needed to link with the larger one.<br />It seems this was done as a space saving strategy, although I don&#039;t know much about what&#039;s inside these library files. I&#039;ve got my problem solved.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>