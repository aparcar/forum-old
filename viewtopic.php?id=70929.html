<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> flash mod to w25q128 - lost wi-fi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p358479">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mitusov</div>
					<div class="post-datetime">
						16 May 2017, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. I need your help.<br />Try to mod my TL-WR940N v.2<br />Change Spansion s25sl032 to w25q128. Router worked but no wi-fi</p><p>w25q128<br />Kernel log<br />[&nbsp; &nbsp; 0.710000] m25p80 spi0.0: found w25q128, expected m25p80<br />[&nbsp; &nbsp; 0.710000] m25p80 spi0.0: w25q128 (16384 Kbytes)<br />........<br />[&nbsp; &nbsp;12.420000] ath: phy0: Unable to initialize hardware; initialization status: -5<br />[&nbsp; &nbsp;12.430000] ath9k ar934x_wmac: failed to initialize device<br />[&nbsp; &nbsp;12.430000] ath9k: probe of ar934x_wmac failed with error -5</p><p>With S25FL032 - OK<br />Kernel log<br />[&nbsp; &nbsp; 0.710000] m25p80 spi0.0: found s25sl032p, expected m25p80<br />[&nbsp; &nbsp; 0.710000] m25p80 spi0.0: s25sl032p (4096 Kbytes)<br />..........<br />[&nbsp; &nbsp;12.260000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;12.260000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;12.260000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;12.260000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;12.260000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;12.260000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;12.270000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;12.280000] ieee80211 phy0: Atheros AR9340 Rev:1 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;12.320000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;12.320000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;12.330000] cfg80211:&nbsp; DFS Master region: FCC<br />[&nbsp; &nbsp;12.330000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;12.340000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;12.350000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2300 mBm), (N/A)<br />[&nbsp; &nbsp;12.360000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2300 mBm), (0 s)<br />[&nbsp; &nbsp;12.370000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2300 mBm), (0 s)<br />[&nbsp; &nbsp;12.380000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;12.390000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358486">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						16 May 2017, 20:42					</div>
				</div>
				<div class="post-content content">
					<p>You need to copy your ART to the last 64k of the new flash chip. No matter what chip size, ART is always at the end.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 16 May 2017, 20:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358526">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mitusov</div>
					<div class="post-datetime">
						17 May 2017, 18:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>ART is always at the end.</p></blockquote></div><p>Thank you, ART, its working.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>