<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> P-2812HNU-FX: getting OpenWrt installed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Jun 2015 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 21 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=20.html">20</a></li><li class="pagination-current"><span>21</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=22.html">22</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p329876">
				<div class="post-metadata">
					<div class="post-num">Post #501</div>
					<div class="post-author">System Error Message</div>
					<div class="post-datetime">
						26 Jun 2016, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>i got my initramfs file from github. I mean 60 B/s.</p><p>My TFTP server is my router as it works much better than windows tftpd you mentioned and it transfers at gigabit speeds like 80+MB/s rather than the 8MB/s you got.</p><p>Essentially what i want to do is bridge DSL to WAN and connect WAN to my router, and connect LAN to my router also for management and openwrt stuff and perhaps even use the phone ports too. 100% CPU usage is fine as long as it means modem is getting priority but as i have read it seems to be a DHCP issue.</p><p>I dont want to use the ISP&#039;s included hardware because of security issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329890">
				<div class="post-metadata">
					<div class="post-num">Post #502</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						27 Jun 2016, 00:28					</div>
				</div>
				<div class="post-content content">
					<p><strong>System Error Message</strong>,</p><p>&#039;initramfs file from github&#039; doesn&#039;t ring a bell for me, could be a version for i86, ARM, linux, anything ...<br />How sure are you it&#039;s build for a ZyXEL P-2812-HNU(L)-F1? Why not try my build first, as it&#039;s specially build for an F1 and works! You can always up/downgrade to other F1 versions.</p><p>All my TFTP uploads went between 0 and 1 second, even the uImage file 4.6MB<br />TFTP is your router? Where are the files to be uploaded, i guess NOT locally, as i wrote earlier they SHOULD be. I can understand your long(er) uploads now. I even don&#039;t use USB devices to hold my files to be uploaded by TFTP as they are too slow.</p><p>&#039;Bridge DSL to WAN and connect WAN to my router&#039; and you don&#039;t want to use ISP hardware?<br />Which &#039;router&#039; do you mean? Can&#039;t make much out of your message regarding router, management, and also connect LAN to the router? (LAN -connect to- LAN won&#039;t work with any router!)<br />A clear picture would tell the story much easier i guess...</p><p>Why not ONLY use one F1?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DSL - <strong>F1</strong> - WAN &amp; LAN&nbsp; &amp; WLAN as LAN ports ?</p><p>100% CPU means device looks dead on web interface or DHCP requests, and very slow response on SSH sessions, i think you don&#039;t want that.</p><p><strong>BTW</strong>, the continue of flashing my 4th F1 with all loggings can be found <a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=64&amp;p=204#p204">here</a>.<br />Without the last update -to r48507- it has functionality of DSL (i thought even PTM &amp; ATM, depends on files used).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329894">
				<div class="post-metadata">
					<div class="post-num">Post #503</div>
					<div class="post-author">System Error Message</div>
					<div class="post-datetime">
						27 Jun 2016, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>My router is the mikrotik CCR1036 so ofcourse i would want to use that for routing. It also has a tftp server and less limitations than my PC has for configuring networks. This means i can just attach a router i want to configure to it and i wont even need to change any ip addresses or worry about lack of NICs. I also run a tftp server on it as well and it has a micro SD card to store the files on it.</p><p>I first download the files to PC than upload it to my router. The modem i dont want to use is the bt homehub 5 which cant install openwrt at the momeny and has some security vulnerabilities not even addressed. I also have my own wireless AC access points.</p><p>From github i specifically used the ones for the p2812fnu fx1.</p><p>What i plan to do is plug VDSL into the zyxel modem, bridge it with the WAN port, plug WAN port into my CCR, and plug a LAN port back into zyxel so that i can use it as both a modem and a device to run openwrt things on.</p><p>I compared both the bits on the file from PC and on the router and both match so file corruption did not happen on my end and my router has handled much larger images without any issues.</p><p>I read your logs and your tutorial about install openwrt. I couldnt find where you got your files unless if they are in the openwrt archive somewhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329975">
				<div class="post-metadata">
					<div class="post-num">Post #504</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						27 Jun 2016, 18:56					</div>
				</div>
				<div class="post-content content">
					<p><strong>System Error Message</strong>,</p><p>Explaination about your CCR1036 makes more clear <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Although i doubt the internal TFTP reaches 80MB upload from micro SD card. But it&#039;s no showstopper.</p><p>The files i used are from <strong>scapi</strong> and my own builds on my own server, downloadable from within this post:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=329499#p329499">https://forum.openwrt.org/viewtopic.php … 99#p329499</a><br />You could try the initramfs file from my build, it does work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330028">
				<div class="post-metadata">
					<div class="post-num">Post #505</div>
					<div class="post-author">System Error Message</div>
					<div class="post-datetime">
						28 Jun 2016, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, i&#039;ll give it a try soon and let you know how it goes. I will also measure power consumption. If this is lower than 10W it would beat bt homehub 5. Although there are 2 variants of the bt homehub, the lantiq CPU (same one used in this but dual core) uses 10W, the broadcom MIPS uses 15W. Every watt i save counts as it means less heat and less bills for things that stay on all the time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330655">
				<div class="post-metadata">
					<div class="post-num">Post #506</div>
					<div class="post-author">System Error Message</div>
					<div class="post-datetime">
						6 Jul 2016, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>i tried both the files from scapi and from openwrt download and both gave the same error</p><div class="codebox"><pre><code>Verifying Checksum ... OK
   Uncompressing Kernel Image ... LZMA: uncompress or overwrite error 7 - must RESET b</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330901">
				<div class="post-metadata">
					<div class="post-num">Post #507</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						9 Jul 2016, 00:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p><strong>BAJansen</strong>,<br /><strong>courfazor</strong>,</p><p>You wrote: &#039;ZyXEL P-2812HNU-F3 is extremely old&#039;,<br />but still it&#039;s a good &amp; nice 1GB switch running OpenWrt! Even with the nice webGUI, -although indeed without DSL functionality- one of my F1&#039;s&nbsp; does it&#039;s job now 63d 19h 59m 37s without any issues, with Linux 4.4 already&nbsp; ... <br />(and i&#039;m also some inactive here -lately- <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> )<br />So building a &#039;simple&#039; OpenWrt is not needed, you could just build default with some things extra (i also run Privoxy within my router)</p></blockquote></div><p>You say that, but I kinda relied on @scapi which got his router fried over power issues to make the images. Something he won&#039;t bother with, well I&#039;m happy he even made those 10 months ago thanks <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />. The router is fine, no questioning that, but the WAN/LAN makes it hard. I tried compiling my own P-2812HNU-F3 before, and ended up with having the DHCP (dnsmasq) down (more or less not giving me lease) or some errors on the web interface. Not only that, but scapi fixed the WAN by having it put up with what we discussed earlier in a mode where he seperate wan/lan and it could drop the firewall or something and need manual restart, unless a script can do that. Hence why I thought it could be good as a switch.</p><p>So, what I can think of is if I use the router and make it on the LAN interface, but that will make the TX ring errors and then lead to horrible Wi-Fi, which is not good enough for this router. I did it before, and the errors were so man untill in the end the whole Wi-Fi went compeltely down. That makes it hard to have any use of it except ethernet-wise, it doesn&#039;t help that I am not that good in making images. But that&#039;s just my words for it, maybe seperating WAN/LAN solution can work, but since I do not know how to put this in effect when I make an image for my router I have no way of trying it out. I can&#039;t be using it with bad Wi-Fi either. DSL port I don&#039;t need, DSL is dead here, all fiber now.</p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 9 Jul 2016, 00:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331820">
				<div class="post-metadata">
					<div class="post-num">Post #508</div>
					<div class="post-author">ad.ven</div>
					<div class="post-datetime">
						16 Jul 2016, 12:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p><strong>System Error Message</strong>,</p><br /><p>The files i used are from <strong>scapi</strong> and my own builds on my own server, downloadable from within this post:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=329499#p329499">https://forum.openwrt.org/viewtopic.php … 99#p329499</a><br />You could try the initramfs file from my build, it does work.</p></blockquote></div><p># Nice, to have all the necessery files in one folder.<br /> DGDodo thanks.<br /> a little remark: wrong filename by chapter 8.<br />step&nbsp; &nbsp; used program&nbsp; &nbsp; file<br />8&nbsp; &nbsp; WINSCP&nbsp; &nbsp; &nbsp; &nbsp; openwrt-lantiq-xrx200-P2812HNUF1-ubifs-ubinized.bin</p><p>But no problem at all.<br />greatings Ad.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332340">
				<div class="post-metadata">
					<div class="post-num">Post #509</div>
					<div class="post-author">Kurjam</div>
					<div class="post-datetime">
						21 Jul 2016, 11:12					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;am doing exaclty as DGDodo described with his r45269 files and getting exactly the same outputs, but after running kernel i run into problems.<br /></p><div class="codebox"><pre><code>P-2812HNU-Fx # bootm 0x80800000
## Booting kernel from Legacy Image at 80800000 ...
   Image Name:   MIPS OpenWrt Linux-3.18.10
   Created:      2015-04-04  23:46:13 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    4718520 Bytes = 4.5 MiB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 3.18.10 (sylwek@WRT) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r44945) ) #2 Sun Apr 5 01:45:49 CEST 2015
[    0.000000] SoC: VR9 rev 1.1
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019555 (MIPS 34Kc)
[    0.000000] MIPS: machine is P2812HNUF1 - ZyXEL P-2812HNU-F1
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x07ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x07ffffff]
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyLTQ0,115200 init=/etc/preinit
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Writing ErrCtl register=00014b20
[    0.000000] Readback ErrCtl register=00014b20
[    0.000000] Memory: 121772K/131072K available (3506K kernel code, 149K rwdata, 1036K rodata, 3160K init, 206K bss, 9300K reserved)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 500MHz
[    0.000000] Calibrating delay loop... 332.54 BogoMIPS (lpj=665088)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.040000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.044000] pinctrl core: initialized pinctrl subsystem
[    0.052000] NET: Registered protocol family 16
[    0.060000] pinctrl-xway 1e100b10.pinmux: Init done
[    0.064000] dma-xway 1e104100.dma: Init done - hw rev: 7, ports: 7, channels: 28
[    0.168000] dcdc-xrx200 1f106a00.dcdc: Core Voltage : 1016 mV
[    0.172000] PCI host bridge /fpi@10000000/pci@E105400 ranges:
[    0.176000]  MEM 0x0000000018000000..0x0000000019ffffff
[    0.180000]   IO 0x000000001ae00000..0x000000001affffff
[    0.192000] gpio-stp-xway 1e100bb0.stp: Init done
[    0.196000] usbcore: registered new interface driver usbfs
[    0.200000] usbcore: registered new interface driver hub
[    0.204000] usbcore: registered new device driver usb
[    0.208000] PCI host bridge to bus 0000:00
[    0.212000] pci_bus 0000:00: root bus resource [mem 0x18000000-0x19ffffff]
[    0.216000] pci_bus 0000:00: root bus resource [io  0xffffffff]
[    0.220000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.224000] pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
[    0.228000] Switched to clocksource MIPS
[    0.232000] NET: Registered protocol family 2
[    0.236000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.244000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.252000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.256000] TCP: reno registered
[    0.260000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.268000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.272000] NET: Registered protocol family 1
[    5.136000] gptu: totally 6 16-bit timers/counters
[    5.140000] gptu: misc_register on minor 63
[    5.144000] gptu: succeeded to request irq 126
[    5.152000] gptu: succeeded to request irq 127
[    5.156000] gptu: succeeded to request irq 128
[    5.160000] gptu: succeeded to request irq 129
[    5.164000] gptu: succeeded to request irq 130
[    5.168000] gptu: succeeded to request irq 131
[    5.172000] ralink,eeprom ralink_eep: using RT3062.eeprom as eeprom
[    5.180000] phy-xrx200 gphy-xrx200: requesting lantiq/vr9_phy11g_a1x.bin
[    5.188000] phy-xrx200 gphy-xrx200: booting GPHY0 firmware at 6A60000
[    5.192000] phy-xrx200 gphy-xrx200: booting GPHY1 firmware at 6A60000
[    5.300000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    5.308000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    5.312000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    5.324000] msgmni has been set to 237
[    5.328000] io scheduler noop registered
[    5.332000] io scheduler deadline registered (default)
[    5.340000] 1e100c00.serial: ttyLTQ0 at MMIO 0x1e100c00 (irq = 112, base_baud = 0) is a lantiq,asc
[    5.348000] console [ttyLTQ0] enabled
[    5.348000] console [ttyLTQ0] enabled
[    5.356000] bootconsole [early0] disabled
[    5.356000] bootconsole [early0] disabled
[    5.364000] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[    5.364000] nand: Samsung NAND 128MiB 3,3V 8-bit
[    5.364000] nand: 128MiB, SLC, page size: 2048, OOB size: 64
[    5.380000] Scanning device for bad blocks
[    5.424000] Bad eraseblock 755 at 0x000005e60000
[    5.444000] 4 ofpart partitions found on MTD device 10000000.nand-parts
[    5.448000] Creating 4 MTD partitions on &quot;10000000.nand-parts&quot;:
[    5.452000] 0x000000000000-0x000000040000 : &quot;uboot&quot;
[    5.460000] 0x000000040000-0x000000060000 : &quot;uboot-env&quot;
[    5.464000] 0x000000060000-0x000000260000 : &quot;kernel&quot;
[    5.468000] 0x000000260000-0x000008000000 : &quot;ubi&quot;
[    5.576000] libphy: lantiq,xrx200-mdio: probed
[    5.600000] net-xrx200: invalid MAC, using random
[    5.668000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:00, irq=-1)
[    5.736000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:01, irq=-1)
[    5.804000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)
[    5.872000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)
[    5.940000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:05, irq=-1)
[    5.948000] wdt 1f8803f0.watchdog: Init done
[    5.952000] TCP: cubic registered
[    5.956000] NET: Registered protocol family 17
[    5.960000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    5.972000] Bridge firewalling registered
[    5.976000] 8021q: 802.1Q VLAN Support v1.8
[    5.984000] UBI error: ubi_auto_attach: no valid UBI magic found i[    5.996000] Freeing unused kernel memory: 3160K (8049a000 - 807b0000)
[    6.020000] init: failed to symlink /tmp -&gt; /var
[    6.020000] init: Console is alive
[    6.028000] init: - watchdog -
[    6.056000] dwc2 1e101000.ifxhcd: requested GPIO 489
[    6.916000] dwc2 1e101000.ifxhcd: DWC OTG Controller
[    6.916000] dwc2 1e101000.ifxhcd: new USB bus registered, assigned bus number 1
[    6.924000] dwc2 1e101000.ifxhcd: irq 62, io mem 0x00000000
[    6.932000] dwc2 1e101000.ifxhcd: Hardware does not support descriptor DMA mode -
[    6.932000] dwc2 1e101000.ifxhcd: falling back to buffer DMA mode.
[    6.944000] hub 1-0:1.0: USB hub found
[    6.948000] hub 1-0:1.0: 1 port detected
[    7.812000] dwc2 1e106000.ifxhcd: DWC OTG Controller
[    7.812000] dwc2 1e106000.ifxhcd: new USB bus registered, assigned bus number 2
[    7.820000] dwc2 1e106000.ifxhcd: irq 91, io mem 0x00000000
[    7.828000] dwc2 1e106000.ifxhcd: Hardware does not support descriptor DMA mode -
[    7.828000] dwc2 1e106000.ifxhcd: falling back to buffer DMA mode.
[    7.840000] hub 2-0:1.0: USB hub found
[    7.844000] hub 2-0:1.0: 1 port detected
[    8.028000] init: - preinit -
[    8.140000] random: procd urandom read with 31 bits of entropy available
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[   11.248000] procd: - early -
[   11.252000] procd: - watchdog -
[   11.816000] procd: - ubus -
[   12.828000] procd: - init -
Please press Enter to activate this console.
[   13.856000] IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH

[   13.884000] NET: Registered protocol family 10
[   13.892000] NET: Registered protocol family 8
[   13.892000] NET: Registered protocol family 20
[   13.904000] PPP generic driver version 2.4.2
[   13.916000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   13.936000] MEI CPE Driver, Version 1.2.0

[   13.936000] (c) Copyright 2009, Infineon Technologies AG
### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###


Lantiq CPE API Driver version: DSL CPE API V4.11.4
[   13.960000]
[   13.960000] Predefined debug level: 2
[   13.972000] Loading modules backported from Linux version master-2015-03-09-0-g141f155
[   13.976000] Backport generated by backports.git backports-20150129-0-gdd4a670
[   13.988000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   14.000000] Infineon Technologies DEU driver version 2.0.0
[   14.004000] IFX DEU DES initialized (multiblock).
[   14.008000] IFX DEU AES initialized (multiblock).
[   14.012000] IFX DEU ARC4 initialized (multiblock).
[   14.020000] IFX DEU SHA1 initialized.
[   14.020000] IFX DEU MD5 initialized.
[   14.024000] IFX DEU SHA1_HMAC initialized.
[   14.028000] IFX DEU MD5_HMAC initialized.
[   14.040000] nf_conntrack version 0.5.0 (1952 buckets, 7808 max)
[   14.068000] NET: Registered protocol family 24
[   14.092000] xt_time: kernel timezone is -0000
[   14.112000] cfg80211: Calling CRDA to update world regulatory domain
[   14.136000] cfg80211: World regulatory domain updated:
[   14.136000] cfg80211:  DFS Master region: unset
[   14.144000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   14.152000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   14.160000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   14.168000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   14.176000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   14.184000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   14.192000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   14.200000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   14.208000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   14.304000] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[   14.308000] rt2800pci 0000:00:0e.0: failed to load eeprom property
[   14.312000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;RT3062.eeprom&#039;.</code></pre></div><p>After that it just reboots. Any solution to that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332357">
				<div class="post-metadata">
					<div class="post-num">Post #510</div>
					<div class="post-author">ad.ven</div>
					<div class="post-datetime">
						21 Jul 2016, 14:48					</div>
				</div>
				<div class="post-content content">
					<p>kurjam:</p><p>The first rows are already different then mine log.<br />&nbsp; &nbsp; strange too: 5.984000] UBI error: ubi_auto_attach: no valid UBI magic found i[<br />so my advice is: repeat the hole procedure again, (from When CFG 02 UART Popups in terminal), and watch after each step for strange errors.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332404">
				<div class="post-metadata">
					<div class="post-num">Post #511</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						21 Jul 2016, 23:41					</div>
				</div>
				<div class="post-content content">
					<p><strong>ad.ven</strong>,<br />Thanks 4 comments, and is adjusted (step8).</p><p><strong>Kurjam</strong>,<br />As ad.ven wrote, do the complete flash again, watch all loggings closely and with no error it will mostly fix any issues.</p><p><strong>System Error Message</strong>,<br />You wrote: &quot;i tried both the files from scapi and from openwrt download and both gave the same error&quot;<br />Did you try <a href="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2016/06/r48507.zip">my files</a> (yet)? As other ppl say it works like it should be. when you try my files, only use all files within my package, mixing up files with other builds could/will result in any error. It could also be that your device is bricked already, did the router ever worked before as it should be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332453">
				<div class="post-metadata">
					<div class="post-num">Post #512</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						22 Jul 2016, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>So yeah, if you didn&#039;t get it already: F3 had some issues with the Wi-Fi driver and the ports being as it is normally. I have no idea what @scapi did to his build to seperate WAN with LAN, which introduced some kind of security concern. But it sure fixed the Wi-Fi. But I guess you could disable Wi-Fi completely to have all the other functionality in tact as it should be. So that kind of solves my problem either way. It can function perfectly as an advanced switch nonetheless <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 22 Jul 2016, 15:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332812">
				<div class="post-metadata">
					<div class="post-num">Post #513</div>
					<div class="post-author">zerg</div>
					<div class="post-datetime">
						27 Jul 2016, 17:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jsface wrote:</cite><blockquote><p>Things get worse I think, we I power on the only I get is:</p><p>ROM VER: 1.0.5<br />CFG 06<br />NAND<br />NAND Read OK</p><p>Any help?</p></blockquote></div><p>ralink 3062 wifi chip dead</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340343">
				<div class="post-metadata">
					<div class="post-num">Post #514</div>
					<div class="post-author">some1</div>
					<div class="post-datetime">
						6 Oct 2016, 00:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p><strong>devill_08</strong>,</p><p>You should go to UART mode: CFG 04, short R15 and R24 located near NAND<br />And NOT short R15 with R24 <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Only in CFG 04 mode you&#039;re able to rewrite your device, following the steps written in above link.<br />It&#039;s sometimes difficult to even short 1 of those small spots (needed for a F1 device).<br />If you don&#039;t get @ CFG 04, in my opinion, the device is bricked.</p></blockquote></div><p>I&#039;m having the same issue as devill_08<br />On F3 no matter what I do I can&#039;t get into CFG 04. I can get into CFG 02 if I short R17.<br />And I can confirm that my router works otherwise, I&#039;ve just booted it up as it was before.</p><p>What can I do? R24 and R15 look different than R17, is there some special way on how to short them?<br />I&#039;ve even tried using graphene from pen and what not. I&#039;m trying to short R24 separately and R15 separately.</p><p>Here is a picture of my router, it looks a little bit different that what I&#039;ve seen here, I repeat this is F3.<br /> I&#039;ve marked what I expected to be shorted, I&#039;ve also tried to short pin R23 I guess (above first red line) in desperation but to no avail</p><p>(just add protocol in front of url, I&#039;m not allowed to post links/images)<br />s18.postimg.org/hfp5mlo7t/IMG_2874.jpg</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340349">
				<div class="post-metadata">
					<div class="post-num">Post #515</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						6 Oct 2016, 00:25					</div>
				</div>
				<div class="post-content content">
					<p><strong>some1</strong>,</p><p>The picture you show, contains a SAMSUNG 234 K9F1G08U0D chip, which ONLY fit&#039;s on a F1 device as this is a NAND chip, not a NOR chip which is on a F3 device. </p><p>Also the picture <a href="https://wiki.openwrt.org/_detail/media/zyxel/p2812/p-2812_uart.jpg?id=toh%3Azyxel%3Ap2812hnu-f3">https://wiki.openwrt.org/_detail/media/ … 2812hnu-f3</a> <br />@ the UART specs: <a href="https://wiki.openwrt.org/toh/zyxel/p2812hnu-f3">https://wiki.openwrt.org/toh/zyxel/p2812hnu-f3</a><br />Shows a &#039;B&#039; version chip, which is on a F3 device.</p><p>The picture @ the F1 UART (<a href="https://wiki.openwrt.org/_detail/media/zyxel/p2812/p-2812hnu-f1_nand.jpg?id=toh%3Azyxel%3Ap2812hnu-f1">https://wiki.openwrt.org/_detail/media/ … 2812hnu-f1</a>) shows also a &#039;D&#039; chip, as on your photo?</p><p>Are you really, 100%, really, sure you are using a F3 device ??</p><p>In my opinion the board is from a F1 device ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340399">
				<div class="post-metadata">
					<div class="post-num">Post #516</div>
					<div class="post-author">some1</div>
					<div class="post-datetime">
						6 Oct 2016, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>The model on the case definitely states that it is a F3 device and router looked to me like it wasn&#039;t tampered. On the other hand, I got it from openwrt developer so I guess that&#039;s definitely an option. I&#039;ll try to boot F1 u-boot from ram in CFG 02 and see if that get&#039;s me up and running. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340440">
				<div class="post-metadata">
					<div class="post-num">Post #517</div>
					<div class="post-author">some1</div>
					<div class="post-datetime">
						6 Oct 2016, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>Yes DGDodo, that was it. I flashed and upgraded to latest version from gcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=64#p186<br />Works as expected, thanks again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340758">
				<div class="post-metadata">
					<div class="post-num">Post #518</div>
					<div class="post-author">peanutbutter101</div>
					<div class="post-datetime">
						10 Oct 2016, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>I know it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p341783">
				<div class="post-metadata">
					<div class="post-num">Post #519</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						22 Oct 2016, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>F3 has NOR chip on other side of PCB (NAND is where CPU and other stuff is placed), F3 can boot F1 U-boot but will skip NOR init (it is used for U-Boot only).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346517">
				<div class="post-metadata">
					<div class="post-num">Post #520</div>
					<div class="post-author">zeekoe</div>
					<div class="post-datetime">
						12 Dec 2016, 23:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>Not entirely the correct forum perhaps, but because this is the default modem for my provider... Can someone perhaps help me (re)configuring my modem for my provider?<br />I managed to get OpenWrt running using the wiki and the modifications from this forum, and after some fiddling also VDSL and wifi seem to work.</p><p>OpenWrt says:<br /></p><div class="codebox"><pre><code>Status: UP
Line State: showtime_tc_sync [0x801]
Line Speed: 31.804 Mb/s / 3.632 Mb/s
Line Attenuation: 25.3 dB / 0 dB
Noise Margin: 6.2 dB / 5.8 dB</code></pre></div><p>However, there is (of course) no direct mapping from the old firmware names to the new ones. Especially, the VLAN cannot be set.<br />Old config was: VDSL &nbsp; &nbsp; Routing &nbsp; &nbsp; IPoE &nbsp; &nbsp; VLAN priority 1, VLAN ID 34<br />I could find no single place where to fill in the VLAN. Some searching on the net led me to know that it&#039;s something with 802.1q, however my ADSL knowledge is still a bit in the ADSL-age. I don&#039;t know if the VLAN is neccesary, since I don&#039;t have IPTV or telephony.<br />My provider says the settings should be:<br />&nbsp; &nbsp; Telfort<br />&nbsp; &nbsp; PPPoE<br />&nbsp; &nbsp; VLAN: 34 <br />I tried: DHCP (=IPoE??), &quot;Hostname to send when requesting DHCP&quot; =&gt; Telfort. This does not seem to work.<br />I also tried: PPPoE with access concentrator 34, service name Telfort. No username and password, since I&#039;m quite sure they&#039;re not needed.<br />Both do not work... DSL sync is there, but no internet connection.</p><p>/etc/config/network is currently:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd9d:ac81:6a94::/48&#039;

config interface &#039;lan&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option ifname &#039;eth0.1&#039;
        option macaddr &#039;00:01:02:03:04:05&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 4 5 6t&#039;
                                               
config atm-bridge &#039;atm&#039;                        
        option vpi &#039;0&#039;                         
        option vci &#039;34&#039;                        
        option encaps &#039;llc&#039;                    
        option payload &#039;bridged&#039;          
                                          
config interface &#039;wan&#039;                    
        option ifname &#039;nas0&#039;              
        option _orig_ifname &#039;nas0&#039;        
        option _orig_bridge &#039;false&#039;       
        option proto &#039;dhcp&#039;               
        option hostname &#039;Telfort&#039;         
                                          
config interface &#039;wan6&#039;                   
        option ifname &#039;@wan&#039;       
        option proto &#039;dhcpv6&#039;      
        option reqaddress &#039;try&#039;    
        option reqprefix &#039;auto&#039;    
        option macaddr &#039;CC:5D:4E:&lt;secret ;-)&gt;&#039;
                                          
config vdsl &#039;dsl&#039;                         
        option annex &#039;a&#039;                  
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;av&#039;                        
        option xfer_mode &#039;ptm&#039;            </code></pre></div><p>I tried stuff with overriding MAC addresses (writing down the one on the bottom), but that didn&#039;t seem to help. Does anyone know where to continue?</p><p>Luckily I bought a used modem as a backup, so I have all the time to go back and forth between the old and new configs...</p><p>BTW, am I correct in that I cannot update the Wiki? I&#039;d like to update it with &#039;more correct&#039; information. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>zeekoe</strong> on 12 Dec 2016, 23:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346630">
				<div class="post-metadata">
					<div class="post-num">Post #521</div>
					<div class="post-author">zeekoe</div>
					<div class="post-datetime">
						13 Dec 2016, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>Finally, after a lot of trial and error and searching...<br />For future reference for others:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;        
        option ifname &#039;lo&#039;         
        option proto &#039;static&#039;      
        option ipaddr &#039;127.0.0.1&#039;  
        option netmask &#039;255.0.0.0&#039; 
                                   
config globals &#039;globals&#039;           
        option ula_prefix &#039;fdc9:fb7a:d338::/48&#039;
                                
config interface &#039;lan&#039;          
        option force_link &#039;1&#039;   
        option type &#039;bridge&#039;    
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;             
        option netmask &#039;255.255.255.0&#039;          
        option ip6assign &#039;60&#039;                   
        option ifname &#039;eth0.1&#039;                  
        option macaddr &#039;00:01:08:03:04:05&#039;      
                                                
config switch                                   
        option name &#039;switch0&#039;                   
        option reset &#039;1&#039;                        
        option enable_vlan &#039;1&#039;                  
                                                
config switch_vlan            
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 4 5 6t&#039;

config atm-bridge &#039;atm&#039;                   
        option encaps &#039;llc&#039;                     
        option payload &#039;bridged&#039;                
        option vci &#039;34&#039;                         
        option vpi &#039;0&#039;                          
                                                
config interface &#039;wan&#039;                          
    option proto &#039;dhcp&#039;                         
    option ifname &#039;ptm0.34&#039;                     
    option service &#039;Telfort&#039;                    
    option mtu &#039;1480&#039;                           
                                                
config vdsl &#039;dsl&#039;                  
        option annex &#039;a&#039;           
        option firmware &#039;/lib/firmware/vdsl.bin&#039;
        option tone &#039;av&#039;                        
        option xfer_mode &#039;ptm&#039;</code></pre></div><p>Not sure if the mtu option is needed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347175">
				<div class="post-metadata">
					<div class="post-num">Post #522</div>
					<div class="post-author">wvdakker</div>
					<div class="post-datetime">
						20 Dec 2016, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>I have installed CC 15.5.01 on my 2812 F1 router.<br />After installing I cannot reboot from the CLI. I have to turn the<br />router off and on with the power switch.</p><p>The serial interface gives after the [reboot] command:</p><div class="codebox"><pre><code>ROM VER: 1.0.5
CFG 06
NAND
NAND Read OK

U-Boot SPL 2013.10-openwrt5 (Nov 18 2014 - 19:54:01)
SPL: initializing NAND flash
SPL: checking U-Boot image
SPL: loading U-Boot to RAM
SPL: decompressing U-Boot with LZO
SPL: cannot start U-Boot</code></pre></div><p>I could softboot when I had installed BB.</p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347790">
				<div class="post-metadata">
					<div class="post-num">Post #523</div>
					<div class="post-author">zeekoe</div>
					<div class="post-datetime">
						27 Dec 2016, 13:29					</div>
				</div>
				<div class="post-content content">
					<p><strong>Question</strong><br />Does somewone have wifi working on 2812 F1? When connected using wifi, at the moment I connect LAN, I get these symptoms:<br /></p><ul><li><p>in log the infamous &quot;ieee80211 phy0: rt2x00queue_write_tx_frame: Error - Dropping frame due to full tx queue 2&quot;</p></li><li><p>On the laptop the ping dropping to &gt;100 ms for a few pings until it finally dies.</p></li><li><p>On my phone downlink consitently at ~100 kbps, uplink 0 kbps or tens of seconds.</p></li></ul><p>The last several pages of this thread suggest that people are using the router happily. I tried the following:<br /></p><ul><li><p>Mode N, mode Legacy</p></li><li><p>Channels 3 and 6</p></li><li><p>The wifireboot script</p></li><li><p>Loading the module with nohwcrypt option</p></li><li><p>Different LAN ports, even disabling other ports in switch</p></li><li><p>Different firmware files</p></li><li><p>With or without some firmware files</p></li></ul><p>Rebooting many times in between.</p><p>I&#039;m using:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/banner
  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 CHAOS CALMER (15.05.1, r48532)
 -----------------------------------------------------
  * 1 1/2 oz Gin            Shake with a glassful
  * 1/4 oz Triple Sec       of broken ice and pour
  * 3/4 oz Lime Juice       unstrained into a goblet.
  * 1 1/2 oz Orange Juice
  * 1 tsp. Grenadine Syrup
 -----------------------------------------------------</code></pre></div><p>with before-posted /etc/config/network and<br /></p><div class="codebox"><pre><code>root@OpenWrt:/lib/firmware# md5sum /lib/firmware/*
20e4d2a890984f149b97120489244fd8  /lib/firmware/RT3062.eeprom
68c703977277e9ac16597d1ca519f7ec  /lib/firmware/rt2860.bin
965315f69fab212fa8d1493401ec4daa  /lib/firmware/rt3062.bin.DISABLED
6feba8f8f939fed82d049ae13bc2cf96  /lib/firmware/vdsl.bin</code></pre></div><p>and also tried<br /></p><div class="codebox"><pre><code>75a1da3caa0b1c95e81dfba207f834c6  rt2860.bin</code></pre></div><p><strong>Problem</strong><br />All the time, wifi works perfectly, even with multiple devices... until I connect LAN.</p><p><strong>Workaround</strong><br />Finally, I tried separating lan from wlan - which seemed to be suggested earlier in this thread. Since I couldn&#039;t find instructions anywhere, here my config:</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fdc9:fb7a:d338::/48&#039;

config interface &#039;lan&#039;
        option force_link &#039;1&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;
        option macaddr &#039;00:01:08:03:04:05&#039;
        option _orig_ifname &#039;eth0.1 radio0.network1&#039;
        option _orig_bridge &#039;true&#039;
        option ifname &#039;eth0.1&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 4 5 6t&#039;
                          
config atm-bridge &#039;atm&#039;         
        option encaps &#039;llc&#039;      
        option payload &#039;bridged&#039;  
        option vci &#039;34&#039;
        option vpi &#039;0&#039;  
                                               
config interface &#039;wan&#039;         
        option proto &#039;dhcp&#039;     
        option ifname &#039;ptm0.34&#039; 
        option service &#039;Telfort&#039;
        option mtu &#039;1480&#039;          
                                      
config vdsl &#039;dsl&#039;                               
        option annex &#039;a&#039;                        
        option firmware &#039;/lib/firmware/vdsl.bin&#039;    
        option tone &#039;av&#039;          
        option xfer_mode &#039;ptm&#039;
                             
config interface &#039;wlan&#039;            
        option proto &#039;static&#039;         
        option ipaddr &#039;192.168.2.1&#039;   
        option netmask &#039;255.255.255.0&#039;</code></pre></div><p>Afterwards, in Interfaces &gt; WLAN &gt; Firewall Settings, be sure to select the &#039;LAN&#039; to enable forwarding to wan and you&#039;re done!</p><p><strong>This works</strong> - however you would have your WLAN network separated from your LAN network.<br />Check DGDodo&#039;s answer for a possibly better solution.</p>											<p class="post-edited">(Last edited by <strong>zeekoe</strong> on 8 Jan 2017, 15:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347828">
				<div class="post-metadata">
					<div class="post-num">Post #524</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						27 Dec 2016, 20:57					</div>
				</div>
				<div class="post-content content">
					<p><strong>zeekoe</strong>,</p><p>Assuming you have DSL working as WAN, you can indeed use all other eth ports as LAN within 1 vlan, according your vlan setting. You could try by removing the WAN port (5) from your configuration to try, as hardware technical there is some difference between LAN &amp; WAN ports.<br /></p><div class="codebox"><pre><code>config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 4 6t&#039;</code></pre></div><p>I doubt it will remove your strange behavior when connecting a LAN device.</p><p>Normally i use always 2 vlan&#039;s although they have same function.<br />You can always &#039;bridge&#039; them later together (again).<br />To add the (physically) WAN port on other vlan:<br /></p><div class="codebox"><pre><code>config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option vid &#039;2&#039;
        option ports &#039;5 6t&#039;</code></pre></div><p>Now you also see 2 vlan&#039;s in the Luci web-GUI.</p><p>Below an example on newer OpenWrt-Lede version, with only vlan2 (LAN) en vlan3 (WAN):<br /><span class="postimg"><img src="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2016/11/img_582cee59d4c82.png" alt="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2016/11/img_582cee59d4c82.png" /></span><br />(CPU always tagged, untag the ports for WAN / LAN)</p><p>You also <strong>can</strong> override MAC address by using &#039;lan_dev&#039; (and &#039;wan_dev&#039;) in <em>/etc/config/network</em> instead of option &#039;macaddr&#039; :<br /></p><div class="codebox"><pre><code>config device &#039;lan_dev&#039;
        option name &#039;eth0.1&#039;
        option macaddr &#039;aa:bb:cc:dd:ee:ff&#039;

# if using WAN port as WAN input:  
# zeekoe, in your case wan = dsl , i presume :) it can be skipped
config device &#039;wan_dev&#039;
        option name &#039;eth0.2&#039;
        option macaddr &#039;11:22:33:44:55:66&#039;</code></pre></div><p>This works fine in OpenWrt-Lede, and i guess this also will work for CC and other versions.</p><p>{edit}<br />I use the following file for wifi (mostly MAC adjusted, as i use more then 1 device):<br /></p><div class="codebox"><pre><code>20e4d2a890984f149b97120489244fd8  /lib/firmware/RT3062.eeprom</code></pre></div><p>But never had the same issue you referring too.</p><p>DG.</p>											<p class="post-edited">(Last edited by <strong>DGDodo</strong> on 27 Dec 2016, 21:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347830">
				<div class="post-metadata">
					<div class="post-num">Post #525</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						27 Dec 2016, 21:18					</div>
				</div>
				<div class="post-content content">
					<p><strong>wvdakker</strong>,</p><p>Sounds weird, maybe a reflash would fix this, if the u-boot is also reflashed during this process, which i doubt.<br />From CLI a reboot should always work.</p><p>Your default u-boot seems corrupt, maybe reflash the device (TTL-serially)?<br />First (6) steps of: <a href="https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1">https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1</a><br />And then i guess you should also change the u-boot settings (step 11), and most probably also the rest of the code.</p><p>DG.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 21 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=20.html">20</a></li><li class="pagination-current"><span>21</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=22.html">22</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>