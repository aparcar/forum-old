<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hotplug : how does it work ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p167086">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						11 May 2012, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>I am looking for a proper documentation of the hotplug mechanism &amp; syntax/semantic of the hotplug-scripting &quot;language&quot;.</p><p>Any hints / infos would be very welcome.</p><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167088">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 May 2012, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Rules sytnax: <a href="http://code.google.com/p/hotplug2/source/browse/trunk/docs/rules.txt">http://code.google.com/p/hotplug2/sourc … /rules.txt</a><br />Rules examples: <a href="http://code.google.com/p/hotplug2/source/browse/trunk/docs/#docs%2Frules">http://code.google.com/p/hotplug2/sourc … cs%2Frules</a><br />Man page source: <a href="http://code.google.com/p/hotplug2/source/browse/trunk/docs/man/hotplug2.8">http://code.google.com/p/hotplug2/sourc … hotplug2.8</a></p><p>The hotplug2 deamon itself is basically a listener for kernel uevents (comparable to e.g. udev) which processes rules and executes their encoded actions upon the receipt of a uevent message from the kernel. Many &quot;hotplug&quot; events are manually triggered though, various places in the scripts call &quot;hotplug-call subsystem&quot; manually which will trigger all handlers in /etc/hotplug.d/subsystem/ as if they where triggered by the kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167108">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						11 May 2012, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>tnx jow -</p><p>the links are exactly what i was looking for.</p><p>i have been stuck with &quot;hotplug&quot; on code.google, so could not find the code.</p><p>additional question is what best to use to scan Openwrt for hotplug related calls (except grep) ?</p><p>scope is to generate a list ( semi automatic) the hotplug related scripts/variables for documentation</p><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167112">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 May 2012, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>A good approach is to uncomment/add a debug rule in /etc/hotplug2-common.rules to record all kernel emitted events during boot:</p><div class="codebox"><pre><code>SUBSYSTEM is set {
   exec logger -t hotplug-debug &quot;subsystem=%SUBSYSTEM%, name=%DEVICENAME%, path=%DEVPATH%, action=%ACTION%&quot;
}</code></pre></div><p>(Instead of &quot;logger&quot; it might make sense to call a helper script which records more info, like the complete env).</p><p>The above rule will log each received event into syslog so you can read it with logread after boot.<br />You can find the rest by rgrep&#039;ing /lib/ and /etc/ for &quot;hotplug-call&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167125">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						11 May 2012, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>tnx jow </p><p>i will take the approach</p><p>is there any interest to put the analysis into the wiki ?</p><p>regards<br />3zl<br />L2 mesh batman-adv &amp; Openwrt <br />@ <a href="http://joker.eu5.org">http://joker.eu5.org</a></p>											<p class="post-edited">(Last edited by <strong>3zl</strong> on 11 May 2012, 20:07)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>