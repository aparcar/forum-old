<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to assign a constant symlink for an USB device on cold boot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p369484">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">katsuhiro.mihara</div>
					<div class="post-datetime">
						12 Dec 2017, 04:06					</div>
				</div>
				<div class="post-content content">
					<p>I want to use an USB device with OpenWrt router.</p><p>To assign constant symlink for an USB device, I put an script to /etc/hotplug.d/usb/ .</p><p>But, procd doesn&#039;t invoke the script if an USB device is plugged on cold boot. When I boot router with an plugged USB storage, Linux kernel detects the USB storage but procd doesn&#039;t invoke scripts in /etc/hotplug.d/usb/ . And procd invoke scripts when I removed the USB device, procd invoke scripts with remove event only.</p><p>The USB device I want to use may be unplugged on booting. I want to assign a constant symlink for the USB device for cold boot and hotplug. How to?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369507">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tunk</div>
					<div class="post-datetime">
						12 Dec 2017, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>You could try /etc/rc.local and see if that works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369522">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">katsuhiro.mihara</div>
					<div class="post-datetime">
						13 Dec 2017, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>I looked up the way to find port of an USB. The way I found used udevadm command.<br />unix.stackexchange.com/questions/144029/command-to-determine-ports-of-a-device-like-dev-ttyusb0</p><p>How can I do similar operation on OpenWrt without udevadm?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369526">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						13 Dec 2017, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>You didn&#039;t say what you were running, but I am hoping you are running the latest available openwrt or LEDE for your router as the usb.id that defines devices needs to be current.</p><p>there are some examples here that may help you in any case:</p><p><a href="https://lede-project.org/docs/user-guide/hotplug_lede">https://lede-project.org/docs/user-guide/hotplug_lede</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369531">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">katsuhiro.mihara</div>
					<div class="post-datetime">
						13 Dec 2017, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>Sorry about I have not describe the environment. I use older version packaged by a board vendor.</p><p>&gt; You could try /etc/rc.local and see if that works.</p><p>I put script as described by below.</p><p>by TLS) unix.stackexchange.com/questions/81754/how-can-i-match-a-ttyusbx-device-to-a-usb-serial-device</p><p>&gt; $ lsusb<br />&gt; Bus 003 Device 016: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port<br />&gt; $ ls -l /sys/bus/usb-serial/devices<br />&gt; lrwxrwxrwx 1 root root 0 Jul&nbsp; 4 17:37 ttyUSB0 -&gt; ../../../devices/pci0000:00/0000:00:1c.0/0000:02:00.0/usb3/3-1/3-1:1.0/ttyUSB0<br />&gt; $ $ grep PRODUCT= /sys/bus/usb-serial/devices/ttyUSB0/../uevent<br />&gt; PRODUCT=67b/2303/300</p><p>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>