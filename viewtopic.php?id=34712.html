<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DIR-330: dmesg floods with &quot;unable to enumerate USB device on port&quot;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p157258">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Barvinok</div>
					<div class="post-datetime">
						13 Feb 2012, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi all.<br />I&#039;m running OpenWRT trunk (svn rev 30485) on D-Link DIR-330 rev A1.<br />So far it&#039;s working as expected, except dmesg is constantly being flooded with this:<br /></p><div class="codebox"><pre><code>[ 2972.400000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2972.648000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2972.896000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2973.144000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2973.392000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2973.640000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2973.888000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2974.136000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2974.384000] hub 1-0:1.0: unable to enumerate USB device on port 2
[ 2974.632000] hub 1-0:1.0: unable to enumerate USB device on port 2</code></pre></div><p>At the same time the kernel thread <strong>khubd</strong> alone constantly eats ~7% CPU time. Not sure if this is relevant though.<br />USB related options were:<br /></p><div class="codebox"><pre><code>Proto openwrt # grep -i usb .config
CONFIG_USB_SUPPORT=y
CONFIG_BUSYBOX_CONFIG_LSUSB=y
# CONFIG_PACKAGE_kmod-ledtrig-usbdev is not set
# CONFIG_PACKAGE_kmod-zaptel14-wcusb is not set
# USB Support
# CONFIG_PACKAGE_kmod-usb-acm is not set
# CONFIG_PACKAGE_kmod-usb-atm is not set
CONFIG_PACKAGE_kmod-usb-brcm47xx=y
# CONFIG_PACKAGE_kmod-usb-cm109 is not set
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-hid=y
# CONFIG_PACKAGE_kmod-usb-net is not set
CONFIG_PACKAGE_kmod-usb-ohci=y
# CONFIG_PACKAGE_kmod-usb-phidget is not set
# CONFIG_PACKAGE_kmod-usb-printer is not set
# CONFIG_PACKAGE_kmod-usb-serial is not set
# CONFIG_PACKAGE_kmod-usb-sierrawireless-directip is not set
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y
# CONFIG_PACKAGE_kmod-usb-test is not set
CONFIG_PACKAGE_kmod-usb-uhci=y
# CONFIG_PACKAGE_kmod-usb-video is not set
# CONFIG_PACKAGE_kmod-usb-yealink is not set
CONFIG_PACKAGE_kmod-usb2=y
# CONFIG_PACKAGE_kmod-usbip is not set
# CONFIG_PACKAGE_kmod-libertas-usb is not set
# CONFIG_PACKAGE_kmod-p54-usb is not set
# CONFIG_PACKAGE_kmod-rt2500-usb is not set
# CONFIG_PACKAGE_kmod-rt2800-usb is not set
# CONFIG_PACKAGE_kmod-rt2x00-usb is not set
# CONFIG_PACKAGE_kmod-rt73-usb is not set
# CONFIG_PACKAGE_speedtouch-usb-firmware is not set
# CONFIG_PACKAGE_usbip is not set
# CONFIG_PCAP_HAS_USB is not set
# CONFIG_PACKAGE_libusb is not set
# CONFIG_PACKAGE_libusb-1.0 is not set
# CONFIG_PACKAGE_libusbmuxd is not set
# CONFIG_PACKAGE_avrusbboot is not set
# CONFIG_PACKAGE_digitemp-usb is not set
# CONFIG_PACKAGE_qc-usb-utils is not set
# CONFIG_PACKAGE_testusb is not set
# CONFIG_PACKAGE_usb-modeswitch is not set
# CONFIG_PACKAGE_usbmuxd is not set
# CONFIG_PACKAGE_usbreset is not set
# CONFIG_PACKAGE_usbutils is not set
# CONFIG_PACKAGE_pyusb is not set</code></pre></div><p>What can I try to fix this issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157507">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Barvinok</div>
					<div class="post-datetime">
						15 Feb 2012, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>The cause was the kmod-usb-ohci. Once I disabled it, the dmesg flooding stopped.<br />Thank you.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>