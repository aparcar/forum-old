<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> bridging wan and lan by default</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78812">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dninja</div>
					<div class="post-datetime">
						31 Dec 2008, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d like to set my Fon+ up so that the wan and lan interfaces are on the same bridge when it boots. I tried with the following /etc/config/network file but I ended up with two bridges, br-lan and br-wan the first with eth0.0 in it and the second with eth0.1</p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;lan&#039;            
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.0&#039;
                                
config &#039;interface&#039; &#039;wan&#039;        
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;ifname&#039; &#039;eth0.1&#039;</code></pre></div><p>How should I set it up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79308">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">phorn</div>
					<div class="post-datetime">
						8 Jan 2009, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>Since you are already using VLANs on a single ethernet device--the simplest way is to disable the switch entirely and just use &#039;eth0&#039; as the single ethernet device.&nbsp; This might depend on which switch chip you is on the fon+ (is there a &quot;config switch&quot; section?</p><p>Failing that, the correct way is actually to set &quot;config &#039;ifnames&#039; &#039;eth0.0 eth0.1&#039;&quot; but then the bridging is done in software (as opposed to the switch chip which is hardware) which can come at a severe performance penalty,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79327">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dninja</div>
					<div class="post-datetime">
						9 Jan 2009, 01:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phorn wrote:</cite><blockquote><p>Since you are already using VLANs on a single ethernet device--the simplest way is to disable the switch entirely and just use &#039;eth0&#039; as the single ethernet device.&nbsp; This might depend on which switch chip you is on the fon+ (is there a &quot;config switch&quot; section?</p></blockquote></div><p>How do I do that? Just remove both the config lines? If so, how do I set an ip address by default?</p><div class="quotebox"><blockquote><p>Failing that, the correct way is actually to set &quot;config &#039;ifnames&#039; &#039;eth0.0 eth0.1&#039;&quot; but then the bridging is done in software (as opposed to the switch chip which is hardware) which can come at a severe performance penalty,</p></blockquote></div><p>I assume that using br-ctl to setup a bridge is setting it in software?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>