<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IPSec Passthrough -- Generic recipes?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p29840">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fd0man</div>
					<div class="post-datetime">
						2 Jul 2006, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>I just installed OpenWRT on my Linksys WRT54G router, and have to say firstly that I am quite happy with it -- the performance is well above what the stock firmware gives.&nbsp; However, I am running into one _major_ (read: showstopper) problem with it: I cannot get my girlfriend&#039;s VPN client to work with it.&nbsp; It is the Cisco Systems VPN Client, Version 4.6.03.0021.&nbsp; It is configured to connect using &quot;IPSec over UDP (NAT/PAT)&quot; -- which I would think would make life easy.&nbsp; However, every iptables rule that I have attempted to use thus far has been in vein.</p><p>The only real problem is that if I cannot get this to work by this evening, I am going to have to have either (A) her computer directly connected to the cable modem, which I really don&#039;t want to do since that would get in the way of me being able to use the network, as well, or (B) revert the router back to Linksys&#039; stock firmware image, which I really don&#039;t want to do, either.</p><p>Is there some sort of generic, catch-all recipe for permitting IPSec passthrough that I am missing?&nbsp; I have searched Google extensively, as well as attempted to use the recipe that is in the Wiki ( at <a href="http://wiki.openwrt.org/MiniHowtos?highlight=%28ipsec%29#head-194b1f1e2a0984087a55794a1c647040561b9035">http://wiki.openwrt.org/MiniHowtos?high â€¦ 40561b9035</a> ) and attempted to just DMZ the machine hoping that would work, but to no avail.</p><p>Any ideas on what I could be doing wrong?&nbsp; This is really important because she telecommutes, and I simply cannot have a nonfunctional network.&nbsp; :-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29863">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">johnnytaco</div>
					<div class="post-datetime">
						3 Jul 2006, 06:55					</div>
				</div>
				<div class="post-content content">
					<p>I too use Cisco&#039;s VPN client. The base iptables config shouldn&#039;t stop ipsec (it didn&#039;t here, at least). I&#039;ve read that some qos scripts prevent ipsec from getting through. I use rudy&#039;s qos and everything is fine over here... I&#039;ve never not had the vpn client work though using OpenWrt (or Sveasoft for that matter).</p><p>hth.<br />-jt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p29894">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">fd0man</div>
					<div class="post-datetime">
						3 Jul 2006, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>Heh.&nbsp; In the end, I wound up getting a second IP address from the ISP, and put the OpenWRT router and her work computer on a switch connected to the cable modem, so that she would be isolated from the network and get her own IP and none of this would be an issue.</p><p>Then when I went to test the connection, it _still_ didn&#039;t work.&nbsp; You know what the problem was?</p><p><strong>The username that she has saved in the Cisco VPN client is not the username that she is to connect to the VPN with</strong>.&nbsp; I would have saved hours and hours if I would have known that!&nbsp; (Instead, she just told me, &quot;the password is xxyyysss&quot; and left it at that...)</p><p>Grr.... So here, I was troubleshooting absolutely everything that wasn&#039;t the case.&nbsp; In fact, it is more then likely that the OpenWRT router will work with it, however, since I rewired everything in an attempt to give it a fail-safe means of operation, I am not fussing with the network again to put it back.&nbsp; At least, not until I have another use for that second globally routed IP address.&nbsp; :-P</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>