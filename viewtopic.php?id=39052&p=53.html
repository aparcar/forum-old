<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mwan3; multi-wan policy routing (general topic)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 May 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 53 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=51.html">51</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=52.html">52</a></li><li class="pagination-current"><span>53</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=54.html">54</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=55.html">55</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p279369">
				<div class="post-metadata">
					<div class="post-num">Post #1301</div>
					<div class="post-author">suriefkasev</div>
					<div class="post-datetime">
						9 Jun 2015, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi Adze,...<br />thank you very much for your incredible work on mwan3<br />I have failover connection on 2 wan by pppoe and 1 by usb gsm and also have 1 tunnel for openvpn<br />in any case I want to failover for the openvpn because 1 of my pppoe only reach for semi-private ip and not use for internet, but it have backup to for public connection wan and by usb gsm too.<br />I put &#039;option keepalive&#039; on my openvpn.cnf and it&#039;s take 2-6 minutes for restarting openvpn service, and for my company that&#039;s take too much time.<br />I want trigger script which ifup/ifdown my pppoe then it will restart openvpn service, and I think it will more efficient,...but I don&#039;t know how? because I just know that mwan3 also have related to hotplug.d</p><p>this is my output from diagnostic mwan3<br /></p><div class="codebox"><pre><code>Software versions : 

OpenWrt - OpenWrt Barrier Breaker 14.07
LuCI - 0.12+svn-r10530

mwan3 - 1.5-10
mwan3-luci - 1.3-5

Output of &quot;cat /etc/config/mwan3&quot; : 

config interface &#039;cis&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;210.23.66.130&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;5&#039;

config interface &#039;speedy&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;210.23.66.130&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;5&#039;

config interface &#039;gsm&#039;
    option enabled &#039;1&#039;
    list track_ip &#039;8.8.8.8&#039;
    list track_ip &#039;210.23.66.130&#039;
    option count &#039;1&#039;
    option timeout &#039;2&#039;
    option interval &#039;5&#039;
    option down &#039;3&#039;
    option up &#039;5&#039;

config member &#039;speedy_m1_w3&#039;
    option interface &#039;speedy&#039;
    option metric &#039;1&#039;
    option weight &#039;3&#039;

config member &#039;speedy_m2_w3&#039;
    option interface &#039;speedy&#039;
    option metric &#039;2&#039;
    option weight &#039;3&#039;

config member &#039;speedy_m3_w3&#039;
    option interface &#039;speedy&#039;
    option metric &#039;3&#039;
    option weight &#039;3&#039;

config member &#039;speedy_m4_w3&#039;
    option interface &#039;speedy&#039;
    option metric &#039;4&#039;
    option weight &#039;3&#039;

config member &#039;gsm_m1_w3&#039;
    option interface &#039;gsm&#039;
    option metric &#039;1&#039;
    option weight &#039;3&#039;

config member &#039;gsm_m2_w3&#039;
    option interface &#039;gsm&#039;
    option metric &#039;2&#039;
    option weight &#039;3&#039;

config member &#039;gsm_m3_w3&#039;
    option interface &#039;gsm&#039;
    option metric &#039;3&#039;
    option weight &#039;3&#039;

config member &#039;gsm_m4_w3&#039;
    option interface &#039;wan2&#039;
    option metric &#039;4&#039;
    option weight &#039;3&#039;

config member &#039;cis_m1_w3&#039;
    option interface &#039;cis&#039;
    option metric &#039;1&#039;
    option weight &#039;3&#039;

config member &#039;cis_m2_w3&#039;
    option interface &#039;cis&#039;
    option metric &#039;2&#039;
    option weight &#039;3&#039;

config policy &#039;speedy_only&#039;
    list use_member &#039;speedy_m1_w3&#039;

config policy &#039;gsm_only&#039;
    list use_member &#039;gsm_m1_w3&#039;

config policy &#039;speedy_gsm&#039;
    list use_member &#039;speedy_m1_w3&#039;
    list use_member &#039;gsm_m2_w3&#039;

config policy &#039;gsm_speedy&#039;
    list use_member &#039;speedy_m2_w3&#039;
    list use_member &#039;gsm_m1_w3&#039;

config policy &#039;cis_speedy_gsm&#039;
    list use_member &#039;cis_m1_w3&#039;
    list use_member &#039;speedy_m2_w3&#039;
    list use_member &#039;gsm_m3_w3&#039;

config policy &#039;cis_gsm_speedy&#039;
    list use_member &#039;cis_m1_w3&#039;
    list use_member &#039;gsm_m2_w3&#039;
    list use_member &#039;speedy_m3_w3&#039;

config rule &#039;vpn_cis_first&#039;
    option proto &#039;udp&#039;
    option use_policy &#039;cis_speedy_gsm&#039;
    option dest_port &#039;7068&#039;
    option dest_ip &#039;210.23.66.130&#039;

config rule &#039;speedy_gsm_fail&#039;
    option proto &#039;all&#039;
    option use_policy &#039;speedy_gsm&#039;

Output of &quot;cat /etc/config/network&quot; : 

config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fdd8:0249:99c8::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth0.1&#039;
    option force_link &#039;1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;
    option ipaddr &#039;192.176.99.254&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option ports &#039;1 2 3 4 5t&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;2&#039;
    option ports &#039;0 5t&#039;

config interface &#039;gsm&#039;
    option proto &#039;3g&#039;
    option device &#039;/dev/ttyUSB2&#039;
    option service &#039;umts&#039;
    option apn &#039;internet&#039;
    option metric &#039;20&#039;

config interface &#039;cis&#039;
    option proto &#039;pppoe&#039;
    option ifname &#039;eth0.2&#039;
    USERNAME HIDDEN
    PASSWORD HIDDEN
    option metric &#039;5&#039;

config interface &#039;speedy&#039;
    option proto &#039;pppoe&#039;
    option ifname &#039;eth0.2&#039;
    option metric &#039;10&#039;
    USERNAME HIDDEN
    PASSWORD HIDDEN

config interface &#039;ussivpn&#039;
    option proto &#039;none&#039;
    option ifname &#039;tun0&#039;

Output of &quot;ifconfig&quot; : 

br-lan    Link encap:Ethernet  HWaddr 64:70:02:8E:E2:DE  
          inet addr:192.176.99.254  Bcast:192.176.99.255  Mask:255.255.255.0
          inet6 addr: fdd8:249:99c8::1/60 Scope:Global
          inet6 addr: fe80::6670:2ff:fe8e:e2de/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:468 errors:0 dropped:0 overruns:0 frame:0
          TX packets:529 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:56517 (55.1 KiB)  TX bytes:218065 (212.9 KiB)

eth0      Link encap:Ethernet  HWaddr 64:70:02:8E:E2:DE  
          inet6 addr: fe80::6670:2ff:fe8e:e2de/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:4696 errors:0 dropped:0 overruns:2383 frame:0
          TX packets:4796 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:378835 (369.9 KiB)  TX bytes:266414 (260.1 KiB)
          Interrupt:4 

eth0.1    Link encap:Ethernet  HWaddr 64:70:02:8E:E2:DE  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:117 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:11408 (11.1 KiB)

eth0.2    Link encap:Ethernet  HWaddr 64:70:02:8E:E2:DE  
          inet6 addr: fe80::6670:2ff:fe8e:e2de/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:4695 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4674 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:294261 (287.3 KiB)  TX bytes:234351 (228.8 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:2 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:96 (96.0 B)  TX bytes:96 (96.0 B)

pppoe-cis Link encap:Point-to-Point Protocol  
          inet addr:210.23.69.151  P-t-P:210.23.69.1  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1492  Metric:1
          RX packets:449 errors:0 dropped:0 overruns:0 frame:0
          TX packets:493 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3 
          RX bytes:26058 (25.4 KiB)  TX bytes:28991 (28.3 KiB)

pppoe-speedy Link encap:Point-to-Point Protocol  
          inet addr:36.80.33.138  P-t-P:36.80.32.1  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1492  Metric:1
          RX packets:1052 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1075 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3 
          RX bytes:103903 (101.4 KiB)  TX bytes:77200 (75.3 KiB)

tun0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  
          inet addr:129.70.77.193  P-t-P:129.70.77.194  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 64:70:02:8E:E2:DE  
          inet6 addr: fe80::6670:2ff:fe8e:e2de/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:468 errors:0 dropped:0 overruns:0 frame:0
          TX packets:545 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:63095 (61.6 KiB)  TX bytes:229629 (224.2 KiB)

Output of &quot;route -n&quot; : 

Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         210.23.69.1     0.0.0.0         UG    5      0        0 pppoe-cis
0.0.0.0         36.80.32.1      0.0.0.0         UG    10     0        0 pppoe-speedy
36.80.32.1      0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-speedy
129.70.77.0     129.70.77.194   255.255.255.0   UG    0      0        0 tun0
129.70.77.194   0.0.0.0         255.255.255.255 UH    0      0        0 tun0
192.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
192.176.99.0    0.0.0.0         255.255.255.0   U     0      0        0 br-lan
193.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
194.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
195.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
196.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
197.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
198.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
199.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
200.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
201.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
202.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
203.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
204.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
205.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
206.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
207.176.77.0    129.70.77.194   255.255.255.0   UG    0      0        0 tun0
210.23.69.1     0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-cis</code></pre></div><p>basically I want ifup or ifdown pppoe-cis then /etc/init.d/openvpn restart<br />but I don&#039;t know how and where put that script</p><p>pardon for my bad english, I&#039;m from Indonesia by the way <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />Thanks Adze <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279461">
				<div class="post-metadata">
					<div class="post-num">Post #1302</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						9 Jun 2015, 20:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>suriefkasev wrote:</cite><blockquote><p>basically I want ifup or ifdown pppoe-cis then /etc/init.d/openvpn restart<br />but I don&#039;t know how and where put that script</p></blockquote></div><p>/etc/hotplug.d/iface/40-restartopenvpn</p><div class="codebox"><pre><code>#!/bin/sh

if [ &quot;$INTERFACE&quot; == &quot;cis&quot; ]; then
    if [ &quot;$ACTION&quot; == &quot;ifup&quot; ] || [ &quot;$ACTION&quot; == &quot;ifdown&quot; ]; then
        # not sure if this is the right command. replace with your desired restart command
        /etc/init.d/openvpn restart
    fi
fi

exit 0</code></pre></div>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 9 Jun 2015, 21:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279513">
				<div class="post-metadata">
					<div class="post-num">Post #1303</div>
					<div class="post-author">suriefkasev</div>
					<div class="post-datetime">
						10 Jun 2015, 04:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>suriefkasev wrote:</cite><blockquote><p>basically I want ifup or ifdown pppoe-cis then /etc/init.d/openvpn restart<br />but I don&#039;t know how and where put that script</p></blockquote></div><p>/etc/hotplug.d/iface/40-restartopenvpn</p><div class="codebox"><pre><code>#!/bin/sh

if [ &quot;$INTERFACE&quot; == &quot;cis&quot; ]; then
    if [ &quot;$ACTION&quot; == &quot;ifup&quot; ] || [ &quot;$ACTION&quot; == &quot;ifdown&quot; ]; then
        # not sure if this is the right command. replace with your desired restart command
        /etc/init.d/openvpn restart
    fi
fi

exit 0</code></pre></div></blockquote></div><p>thanks arfett<br />your script works like charm on my router <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />but I&#039;m courious when I look at folder /etc/hotplug.d/iface/ I found script 16-mwancustom<br />here is the script<br /></p><div class="codebox"><pre><code>#!/bin/sh

# to enable this script uncomment the case loop at the bottom
# to report mwan status on interface hotplug ifup/ifdown events modify the lines in the send_alert function

send_alert()
{
    # variable &quot;$1&quot; stores the MWAN status information
    # insert your code here to send the contents of &quot;$1&quot;
    echo &quot;$1&quot;
}

gather_event_info()
{
    # create event information message
    local EVENT_INFO=&quot;Interface [ &quot;$INTERFACE&quot; ($DEVICE) ] on router [ &quot;$(uci get -p /var/state system.@system[0].hostname)&quot; ] has triggered a hotplug [ &quot;$ACTION&quot; ] event on &quot;$(date +&quot;%a %b %d %Y %T %Z&quot;)&quot;&quot;

    # get current interface, policy and rule status
    local CURRENT_STATUS=&quot;$(/usr/sbin/mwan3 status)&quot;

    # get last 50 MWAN systemlog messages
    local MWAN_LOG=&quot;$(echo -e &quot;Last 50 MWAN systemlog entries. Newest entries sorted at the top:\n$(logread | grep mwan3 | tail -n 50 | sed &#039;x;1!H;$!d;x&#039;)&quot;)&quot;

    # pass event info to send_alert function
    send_alert &quot;$(echo -e &quot;$EVENT_INFO\n\n$CURRENT_STATUS\n\n$MWAN_LOG&quot;)&quot;
}

#case &quot;$ACTION&quot; in
#    ifup)
#        gather_event_info
#    ;;
#
#    ifdown)
#        gather_event_info
#    ;;
#esac

exit 0</code></pre></div><p>is possible to combine your script 40-restartopenvpn to that script? and if it&#039;s possible which part that I should modify?<br />thanks dude <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279517">
				<div class="post-metadata">
					<div class="post-num">Post #1304</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						10 Jun 2015, 05:14					</div>
				</div>
				<div class="post-content content">
					<p>I wrote that script. If you&#039;re not familiar with shell scripting don&#039;t worry about combining them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279518">
				<div class="post-metadata">
					<div class="post-num">Post #1305</div>
					<div class="post-author">suriefkasev</div>
					<div class="post-datetime">
						10 Jun 2015, 05:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>I wrote that script. If you&#039;re not familiar with shell scripting don&#039;t worry about combining them.</p></blockquote></div><p>whooaaaa that&#039;s awesome, yes I&#039;m not familiar on scripting shell....I should learn a lot off course <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />and again...great thanks arfett</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279701">
				<div class="post-metadata">
					<div class="post-num">Post #1306</div>
					<div class="post-author">Thomymaster</div>
					<div class="post-datetime">
						11 Jun 2015, 15:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello</p><p>A quick question:</p><br /><p>I have ddns-scripts installed on my router and i want that each time mwan3 fails over to my UMTS connection (and fails back if the ADSL connection is available again) the ddns update is triggered.</p><p>What do i have to place in the 16-mwancustom script?</p><p>From&nbsp; <a href="http://wiki.openwrt.org/doc/howto/ddns.client">http://wiki.openwrt.org/doc/howto/ddns.client</a> i know that if i want to test ddns i can do so via the command line:</p><br /><p>/usr/lib/ddns/dynamic_dns_updater.sh MyDDNSProvider</p><p>Best,<br />Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279720">
				<div class="post-metadata">
					<div class="post-num">Post #1307</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						11 Jun 2015, 19:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Thomymaster wrote:</cite><blockquote><p>I have ddns-scripts installed on my router and i want that each time mwan3 fails over to my UMTS connection (and fails back if the ADSL connection is available again) the ddns update is triggered.</p><p>What do i have to place in the 16-mwancustom script?</p></blockquote></div><p>Probably the same thing suriefkasev is using but change the interface and command that runs?</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 11 Jun 2015, 19:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279934">
				<div class="post-metadata">
					<div class="post-num">Post #1308</div>
					<div class="post-author">jirm</div>
					<div class="post-datetime">
						14 Jun 2015, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>First all so many thaks to all mwan3 designers and contributers. It has a great openwrt package.</p><p>Im envolved on try mwan3 with a new aproach. I have two &#039;wan&#039; wifi links (both wds clients) to other routers and mwan3 are installed and working fine based on standard balanced configuration, but i need know if is and how possible to create a bridge from mwan3 balanceed end point (point when the packets going to lan) with mwan3 balancer wan connection.</p><p>I mean if i create a interface with bridge from wlan (wds client mode) to some eth0 vlan i have full ethernet bridged and frame transparent from that wlan to the ethernet vlanx connector. </p><p>Can i do the same but with mwan3 controlling both wan links i have and make a full bridge (frame bridged) from them to some vlan ?</p><p>I make some graphic to try to make the idea most understable<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OPENWRT ROUTER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.0.0.10/24<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.1.1/24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-----------wan (wlan0 wds client) ----------- wan 1 link1 <br />device---vlan0.1---(lan bridge interface - mwan3 end point ??? )---mwan3 engine balancer<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-----------wan2 (wlan1 wds client)---------- wan 2 link2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10.0.2.10/24<br />Sorry about my poor english :-(</p>											<p class="post-edited">(Last edited by <strong>jirm</strong> on 14 Jun 2015, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280235">
				<div class="post-metadata">
					<div class="post-num">Post #1309</div>
					<div class="post-author">amwalters</div>
					<div class="post-datetime">
						16 Jun 2015, 06:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m trying to get mwan3 setup with my sstp connection. I had it working for OpenVPN, but cannot get it to recognize the sstp interface. In the status I am getting:</p><p>interface PureVPN is unknown</p><p>PureVPN is the interface attached to adapter sstp-PureVPN which is basically a customised pppd interface. I have it setup with a metric of 40 and am able to ping through the interface successfully. Is there any reason mwan would not be able to detect this? I notice on the config page it states PureVPN(X) as opposed to PureVPN(sstp-PureVPN) as would be expected if it was finding the adapter.</p><p>Network config of PureVPN is<br /></p><div class="codebox"><pre><code>config interface &#039;PureVPN&#039;
    option proto &#039;sstp&#039;
    option server &#039;********.pointtoserver.com&#039;
    option username &#039;purevpn*******&#039;
    option password &#039;*****&#039;
    option auto &#039;0&#039;
    option sstp_options &#039;--cert-warn&#039;
    option pppd_options &#039;refuse-eap refuse-pap refuse-chap&#039;
    option defaultroute &#039;0&#039;
    option log_level &#039;4&#039;</code></pre></div><p>When I try to go into diagnostics it says:<br /></p><div class="codebox"><pre><code>Unable to perform diagnostic tests on PureVPN. There is no physical or virtual device associated with this interface</code></pre></div><p>UPDATE****<br />Looks like nothing gets set in /var/status network, improves when I force my interface in.&nbsp; I&#039;ll have to play around more, looks like a ppp problem.</p>											<p class="post-edited">(Last edited by <strong>amwalters</strong> on 16 Jun 2015, 07:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280558">
				<div class="post-metadata">
					<div class="post-num">Post #1310</div>
					<div class="post-author">wawryl</div>
					<div class="post-datetime">
						18 Jun 2015, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi I have 3 WANs and I have problem with them. Sometimes on of them is down (red in luci)<br />have a look on my conig:</p><div class="quotebox"><blockquote><p>Software versions : </p><p>OpenWrt - OpenWrt Barrier Breaker 14.07<br />LuCI - 0.12+git-15.037.36195-f1e2a26</p><p>mwan3 - 1.5-10<br />mwan3-luci - 1.3-5</p><p>Output of &quot;cat /etc/config/mwan3&quot; : </p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;</p><p>config interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;aero&#039;<br />option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan3_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;aero&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan3_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;aero&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan2_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan3_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan3_m1_w2&#039;</p><p>config policy &#039;balanced&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;<br />list use_member &#039;wan3_m1_w2&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan3_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan3_m1_w2&#039;</p><br /><p>config rule &#039;sticky_even&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.0/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan_wan2&#039;</p><p>config rule &#039;sticky_odd&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.1/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan2_wan&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>Output of &quot;cat /etc/config/network&quot; : </p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fdbb:11dc:d262::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;60&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.3&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.1.3&#039;<br />&nbsp; &nbsp; option broadcast &#039;192.168.1.3&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.2&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.2.5&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.2.1&#039;<br />&nbsp; &nbsp; option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;<br />&nbsp; &nbsp; option defaultroute &#039;1&#039;<br />&nbsp; &nbsp; option conntrack &#039;1&#039;<br />&nbsp; &nbsp; option metric &#039;10&#039;</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; option proto &#039;dhcpv6&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 2 3 4 5&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;2&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1&#039;</p><p>config interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;eth2&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option ifname &#039;eth1&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.8.101&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.8.1&#039;<br />&nbsp; &nbsp; option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;<br />&nbsp; &nbsp; option defaultroute &#039;1&#039;<br />&nbsp; &nbsp; option metric &#039;30&#039;</p><p>config interface &#039;aero&#039;<br />option proto &#039;dhcp&#039;<br />option defaultroute &#039;1&#039;<br />option metric &#039;40&#039;<br />option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;</p></blockquote></div><br /><div class="quotebox"><blockquote><p>Software versions : </p><p>OpenWrt - OpenWrt Barrier Breaker 14.07<br />LuCI - 0.12+git-15.037.36195-f1e2a26</p><p>mwan3 - 1.5-10<br />mwan3-luci - 1.3-5</p><p>Output of &quot;cat /etc/config/mwan3&quot; : </p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;</p><p>config interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;aero&#039;<br />option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan3_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;aero&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan3_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;aero&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan2_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan3_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan3_m1_w2&#039;</p><p>config policy &#039;balanced&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;<br />list use_member &#039;wan3_m1_w2&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan3_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan3_m1_w2&#039;</p><br /><p>config rule &#039;sticky_even&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.0/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan_wan2&#039;</p><p>config rule &#039;sticky_odd&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.1/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan2_wan&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>Output of &quot;cat /etc/config/network&quot; : </p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fdbb:11dc:d262::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;60&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.3&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.1.3&#039;<br />&nbsp; &nbsp; option broadcast &#039;192.168.1.3&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.2&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.2.5&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.2.1&#039;<br />&nbsp; &nbsp; option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;<br />&nbsp; &nbsp; option defaultroute &#039;1&#039;<br />&nbsp; &nbsp; option conntrack &#039;1&#039;<br />&nbsp; &nbsp; option metric &#039;10&#039;</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; option proto &#039;dhcpv6&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 2 3 4 5&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;2&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1&#039;</p><p>config interface &#039;WAN2&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;eth2&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option ifname &#039;eth1&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.8.101&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.8.1&#039;<br />&nbsp; &nbsp; option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;<br />&nbsp; &nbsp; option defaultroute &#039;1&#039;<br />&nbsp; &nbsp; option metric &#039;30&#039;</p><p>config interface &#039;aero&#039;<br />option proto &#039;dhcp&#039;<br />option defaultroute &#039;1&#039;<br />option metric &#039;40&#039;<br />option dns &#039;8.8.8.8 8.8.4.4 208.67.220.220 208.67.222.222&#039;</p><p>Output of &quot;ifconfig&quot; : </p><p>br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 78:94:F6:3F:55:1C&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.3&nbsp; Bcast:192.168.1.3&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::ea94:f6ff:fe3f:551c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fdbb:11dc:d262::1/60 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:706382 errors:0 dropped:10 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:721730 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:85742512 (81.7 MiB)&nbsp; TX bytes:719412745 (686.0 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 78:94:F6:3F:55:1C&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::ea94:f6ff:fe3f:551c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:1039579 errors:0 dropped:1 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:918616 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:429174308 (409.2 MiB)&nbsp; TX bytes:750161666 (715.4 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 </p><p>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 78:94:F6:3F:55:1C&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:744057 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:721816 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:95465487 (91.0 MiB)&nbsp; TX bytes:719420101 (686.0 MiB)</p><p>eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr E8:94:F6:3F:55:1C&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.2.5&nbsp; Bcast:192.168.2.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::ea94:f6ff:fe3f:551c/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:295494 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:196793 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:314994697 (300.4 MiB)&nbsp; TX bytes:27066471 (25.8 MiB)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 0C:5B:8F:27:9A:64&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.8.101&nbsp; Bcast:192.168.8.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::e5b:8fff:fe27:9a64/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:317655 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:212518 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:354954096 (338.5 MiB)&nbsp; TX bytes:32255514 (30.7 MiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:332 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:332 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:27412 (26.7 KiB)&nbsp; TX bytes:27412 (26.7 KiB)</p><p>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr E8:94:F6:3F:55:1D&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.7.100&nbsp; Bcast:192.168.7.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::ea94:f6ff:fe3f:551d/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:80703 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:77949 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:36159566 (34.4 MiB)&nbsp; TX bytes:16937203 (16.1 MiB)</p><p>Output of &quot;route -n&quot; : </p><p>Kernel IP routing table<br />Destination&nbsp; &nbsp; &nbsp;Gateway&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genmask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Flags Metric Ref&nbsp; &nbsp; Use Iface<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.1.3&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.2.1&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth0.2<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.8.1&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 30&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.7.1&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 40&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 wlan0<br />192.168.1.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />192.168.2.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth0.2<br />192.168.7.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;40&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 wlan0<br />192.168.8.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;30&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1</p><p>Output of &quot;ip rule show&quot; : </p><p>0:&nbsp; &nbsp; from all lookup local <br />1001:&nbsp; &nbsp; from all iif eth0.2 lookup main <br />1002:&nbsp; &nbsp; from all iif eth1 lookup main <br />1003:&nbsp; &nbsp; from all iif wlan0 lookup main <br />2001:&nbsp; &nbsp; from all fwmark 0x100/0xff00 lookup 1 <br />2002:&nbsp; &nbsp; from all fwmark 0x200/0xff00 lookup 2 <br />2003:&nbsp; &nbsp; from all fwmark 0x300/0xff00 lookup 3 <br />2253:&nbsp; &nbsp; from all fwmark 0xfd00/0xff00 blackhole<br />2254:&nbsp; &nbsp; from all fwmark 0xfe00/0xff00 unreachable<br />32766:&nbsp; &nbsp; from all lookup main <br />32767:&nbsp; &nbsp; from all lookup default</p><p>Output of &quot;ip route list table 1-250&quot; : </p><p>1<br />default via 192.168.2.1 dev eth0.2 <br />2<br />default via 192.168.8.1 dev eth1 <br />3<br />default via 192.168.7.1 dev wlan0</p></blockquote></div><br /><p>Firewall</p><div class="quotebox"><blockquote><p>config defaults<br />&nbsp; &nbsp; option syn_flood &#039;1&#039;<br />&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;REJECT&#039;</p><p>config zone<br />&nbsp; &nbsp; option name &#039;lan&#039;<br />&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;</p><p>config zone<br />&nbsp; &nbsp; option name &#039;wan&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option masq &#039;1&#039;<br />&nbsp; &nbsp; option mtu_fix &#039;1&#039;<br />&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option network &#039;wan wan6 WAN2 aero&#039;</p><p>config forwarding<br />&nbsp; &nbsp; option src &#039;lan&#039;<br />&nbsp; &nbsp; option dest &#039;wan&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-DHCP-Renew&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;udp&#039;<br />&nbsp; &nbsp; option dest_port &#039;68&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option family &#039;ipv4&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-Ping&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; option icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; option family &#039;ipv4&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-DHCPv6&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;udp&#039;<br />&nbsp; &nbsp; option src_ip &#039;fe80::/10&#039;<br />&nbsp; &nbsp; option src_port &#039;547&#039;<br />&nbsp; &nbsp; option dest_ip &#039;fe80::/10&#039;<br />&nbsp; &nbsp; option dest_port &#039;546&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Input&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br />&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br />&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br />&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br />&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br />&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br />&nbsp; &nbsp; list icmp_type &#039;router-solicitation&#039;<br />&nbsp; &nbsp; list icmp_type &#039;neighbour-solicitation&#039;<br />&nbsp; &nbsp; list icmp_type &#039;router-advertisement&#039;<br />&nbsp; &nbsp; list icmp_type &#039;neighbour-advertisement&#039;<br />&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Forward&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option dest &#039;*&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br />&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br />&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br />&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br />&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br />&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br />&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config include<br />&nbsp; &nbsp; option path &#039;/etc/firewall.user&#039;</p><p>config include &#039;miniupnpd&#039;<br />&nbsp; &nbsp; option type &#039;script&#039;<br />&nbsp; &nbsp; option path &#039;/usr/share/miniupnpd/firewall.include&#039;<br />&nbsp; &nbsp; option family &#039;any&#039;<br />&nbsp; &nbsp; option reload &#039;1&#039;</p><p>config redirect<br />&nbsp; &nbsp; option target &#039;DNAT&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option dest &#039;lan&#039;<br />&nbsp; &nbsp; option proto &#039;tcp udp&#039;<br />&nbsp; &nbsp; option src_dport &#039;8080&#039;<br />&nbsp; &nbsp; option dest_ip &#039;192.168.1.104&#039;<br />&nbsp; &nbsp; option dest_port &#039;8080&#039;<br />&nbsp; &nbsp; option name &#039;opensprlinkler&#039;</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280595">
				<div class="post-metadata">
					<div class="post-num">Post #1311</div>
					<div class="post-author">netbus</div>
					<div class="post-datetime">
						18 Jun 2015, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />since I am using mwan3 my latency on both interfaces is doubled high.<br />Without mwan3 my latency on interface wan1 is 15ms, wan2 30ms and now with mwan3 activated it is 35ms on wan1 and 70ms on wan2.<br />Does anybody know why?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280626">
				<div class="post-metadata">
					<div class="post-num">Post #1312</div>
					<div class="post-author">Sorbe</div>
					<div class="post-datetime">
						19 Jun 2015, 03:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m looking to upgrade my OpenWRT MWAN3 router (running on NETGEAR WNDR3700 v4) to faster hardware.&nbsp; I intend to use OpenVPN to provide encrypted VPN connections through 2-3 gateways.&nbsp; Given we&#039;re talking about 30-40Mbps, I need a more modern router such as a Netgear R6250/R6300 to handle the OpenVPN encryption/decryption.</p><p><a href="http://www.myopenrouter.com/download/43860/DD-WRT-for-R6300/">http://www.myopenrouter.com/download/43 … for-R6300/</a><br /><a href="http://www.myopenrouter.com/download/dd-wrt-r6300">http://www.myopenrouter.com/download/dd-wrt-r6300</a></p><p>These faster routers are only well supported on DD-WRT.&nbsp; Has anyone attempted to use MWAN3 on DD-WRT instead?&nbsp; Did you get LUCI support working on DD-WRT or just manual vi table editting?</p>											<p class="post-edited">(Last edited by <strong>Sorbe</strong> on 19 Jun 2015, 04:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281254">
				<div class="post-metadata">
					<div class="post-num">Post #1313</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						24 Jun 2015, 22:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Sorbe wrote:</cite><blockquote><p>I&#039;m looking to upgrade my OpenWRT MWAN3 router (running on NETGEAR WNDR3700 v4) to faster hardware.&nbsp; I intend to use OpenVPN to provide encrypted VPN connections through 2-3 gateways.&nbsp; Given we&#039;re talking about 30-40Mbps, I need a more modern router such as a Netgear R6250/R6300 to handle the OpenVPN encryption/decryption.</p><p><a href="http://www.myopenrouter.com/download/43860/DD-WRT-for-R6300/">http://www.myopenrouter.com/download/43 … for-R6300/</a><br /><a href="http://www.myopenrouter.com/download/dd-wrt-r6300">http://www.myopenrouter.com/download/dd-wrt-r6300</a></p><p>These faster routers are only well supported on DD-WRT.&nbsp; Has anyone attempted to use MWAN3 on DD-WRT instead?&nbsp; Did you get LUCI support working on DD-WRT or just manual vi table editting?</p></blockquote></div><p>Have you considered using a PC Engines APU? These things are rather powerful and have a dual core x86 CPU. Works fine with OpenWrt. I was using a Kingston 60GB SSD with mine.</p><p><a href="http://pcengines.ch/apu.htm">http://pcengines.ch/apu.htm</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281537">
				<div class="post-metadata">
					<div class="post-num">Post #1314</div>
					<div class="post-author">phineasmax</div>
					<div class="post-datetime">
						27 Jun 2015, 05:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I have 2 WANs<br />How to set percentage for each WAN?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281539">
				<div class="post-metadata">
					<div class="post-num">Post #1315</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						27 Jun 2015, 06:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phineasmax wrote:</cite><blockquote><p>Hello. I have 2 WANs<br />How to set percentage for each WAN?</p></blockquote></div><p>Weight.<br /><a href="http://wiki.openwrt.org/doc/howto/mwan3">http://wiki.openwrt.org/doc/howto/mwan3</a></p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 27 Jun 2015, 06:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281933">
				<div class="post-metadata">
					<div class="post-num">Post #1316</div>
					<div class="post-author">johndoe</div>
					<div class="post-datetime">
						30 Jun 2015, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>hi, im using mwan3 since more than a year now, and it works very well and reliable. thank you for that! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>but i have one thing which really annoys me.<br />i want to make rules, where i can put a dns as destination. for example a rule that all traffic for youtube.com goes over WAN_2.<br />as i know, it works, but it doesn&#039;t resolve all ip-addresses only the first one.</p><p>is it planed to implement this feature in future? is it even possible?<br />(and is there anywhere a changelog avaiable?)</p><p>thank you.</p>											<p class="post-edited">(Last edited by <strong>johndoe</strong> on 30 Jun 2015, 23:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281939">
				<div class="post-metadata">
					<div class="post-num">Post #1317</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						1 Jul 2015, 00:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johndoe wrote:</cite><blockquote><p>as i know, it works, but it doesn&#039;t resolve all ip-addresses only the first one.</p></blockquote></div><p>Mwan3 1.6 supports ipset that would allow you to do this. Use trunk or Chaos Calmer and install mwan3 and the luci app then check the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281978">
				<div class="post-metadata">
					<div class="post-num">Post #1318</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						1 Jul 2015, 08:07					</div>
				</div>
				<div class="post-content content">
					<p>I have problems with too many ping to address that will refuse to answer eventually.<br />Found that provider gateway and DNS may be useful, but auto-discovery (traceroute) unimplemented.<br />Reading Wiki, found I&#039;m not alone. Got some ideas:</p><p><strong>Reliable public ip addresses to ping:</strong> Your other WAN!<br />If You have 2 or more balanced WANs, is better to ping yourself, and if a ping fails, ping a public IP to know which WAN fails.<br />Why is not implemented?</p><p>BGP establish a TCP connection between routers, TCP drops if connection drops. A BGP-like connection between your 2 WANs may signal a failure.</p><p>Cable Modem has a status page, may read link status from there if user/pass is provided.</p><p>Do I need to setup a ping for a pppoe ADSL? If it drops, hotplug fires, so I thing should be &quot;Never drops&quot;</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 1 Jul 2015, 08:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282028">
				<div class="post-metadata">
					<div class="post-num">Post #1319</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						1 Jul 2015, 16:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>I have problems with too many ping to address that will refuse to answer eventually.<br />Found that provider gateway and DNS may be useful, but auto-discovery (traceroute) unimplemented.<br />Reading Wiki, found I&#039;m not alone. Got some ideas:</p><p><strong>Reliable public ip addresses to ping:</strong> Your other WAN!<br />If You have 2 or more balanced WANs, is better to ping yourself, and if a ping fails, ping a public IP to know which WAN fails.<br />Why is not implemented?</p><p>BGP establish a TCP connection between routers, TCP drops if connection drops. A BGP-like connection between your 2 WANs may signal a failure.</p><p>Cable Modem has a status page, may read link status from there if user/pass is provided.</p><p>Do I need to setup a ping for a pppoe ADSL? If it drops, hotplug fires, so I thing should be &quot;Never drops&quot;</p></blockquote></div><p>Use different IP addresses if you have problems with your chosen ones.</p><p>Pinging the other WAN will not always be possible if the WANs are behind NAT.</p><p>Logging into the modem page is not something that will be added to mwan3 I&#039;m sure of it.</p><p>I am unclear as to what you were asking about &quot; never drops&quot;... If you don&#039;t configure any tracking IP addresses mwan3 considers the link up. It may work as expected if hotplug events are generated outside of the mwan3track process.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 1 Jul 2015, 16:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282117">
				<div class="post-metadata">
					<div class="post-num">Post #1320</div>
					<div class="post-author">DarkStarXxX</div>
					<div class="post-datetime">
						2 Jul 2015, 09:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Mwan3 is not working at the Moment in latest Trunk.<br />I try also a Standard Setting with a Fresh Install.</p><p>MWan says thinks like:</p><br /><p>MWAN Detailed Status</p><p>Interface status:<br /> interface wan is unknown<br /> interface wan2 is unknown</p><br /><p>Diagnostic Results</p><p>Unable to perform diagnostic tests on wan. There is no physical or virtual device associated with this interface</p><p>Config is basic config (but my own config is also not working anymore)</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;2&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;wan2&#039;<br />&nbsp; &nbsp; option enabled &#039;0&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan2_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;balanced&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config rule &#039;youtube&#039;<br />&nbsp; &nbsp; option sticky &#039;1&#039;<br />&nbsp; &nbsp; option ipset &#039;youtube&#039;<br />&nbsp; &nbsp; option dest_port &#039;80,443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>config rule &#039;https&#039;<br />&nbsp; &nbsp; option sticky &#039;1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>Network</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fd0f:1b32:5751::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;60&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.2&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wan2&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.3&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282134">
				<div class="post-metadata">
					<div class="post-num">Post #1321</div>
					<div class="post-author">ase</div>
					<div class="post-datetime">
						2 Jul 2015, 11:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DarkStarXxX wrote:</cite><blockquote><p>Hi!</p><p>Mwan3 is not working at the Moment in latest Trunk.<br />I try also a Standard Setting with a Fresh Install.</p><p>MWan says thinks like:</p><br /><p>MWAN Detailed Status</p><p>Interface status:<br /> interface wan is unknown<br /> interface wan2 is unknown</p><br /><p>Diagnostic Results</p><p>Unable to perform diagnostic tests on wan. There is no physical or virtual device associated with this interface</p><p>Config is basic config (but my own config is also not working anymore)</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;2&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;wan2&#039;<br />&nbsp; &nbsp; option enabled &#039;0&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan2_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;balanced&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config rule &#039;youtube&#039;<br />&nbsp; &nbsp; option sticky &#039;1&#039;<br />&nbsp; &nbsp; option ipset &#039;youtube&#039;<br />&nbsp; &nbsp; option dest_port &#039;80,443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>config rule &#039;https&#039;<br />&nbsp; &nbsp; option sticky &#039;1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>Network</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fd0f:1b32:5751::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;60&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.2&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wan2&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.3&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p></blockquote></div><p>There is a bug in mwan3 script and luci-app-mwan3 where when compiled with musl c-library (as trunk does) it calls uci with parameters in wrong order. Here is a bug report and patch for mwan3 to make it working: <a href="https://github.com/openwrt/packages/issues/1502">https://github.com/openwrt/packages/issues/1502</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282140">
				<div class="post-metadata">
					<div class="post-num">Post #1322</div>
					<div class="post-author">DarkStarXxX</div>
					<div class="post-datetime">
						2 Jul 2015, 13:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi yes that brings the Status in Log back to Active.<br />But there must be more wrong.<br />Luci Web if shows everything as offline (disabled) </p><p>I also changed uci get -p to uci -p in lua file but this is not working</p><p>Edit: My fault. I take a deeper look into the code an it&#039;s working now.</p>											<p class="post-edited">(Last edited by <strong>DarkStarXxX</strong> on 2 Jul 2015, 13:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282177">
				<div class="post-metadata">
					<div class="post-num">Post #1323</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						2 Jul 2015, 20:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ase wrote:</cite><blockquote><p>There is a bug in mwan3 script and luci-app-mwan3 where when compiled with musl c-library (as trunk does) it calls uci with parameters in wrong order. Here is a bug report and patch for mwan3 to make it working: <a href="https://github.com/openwrt/packages/issues/1502">https://github.com/openwrt/packages/issues/1502</a></p></blockquote></div><p>With the UCI arguments reordered would this work on trunk AND pre-trunk OpenWrt?</p><p>I&#039;ll look into making a fixed luci-app-mwan3 release tonight or tomorrow.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 2 Jul 2015, 20:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282180">
				<div class="post-metadata">
					<div class="post-num">Post #1324</div>
					<div class="post-author">ase</div>
					<div class="post-datetime">
						2 Jul 2015, 21:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>ase wrote:</cite><blockquote><p>There is a bug in mwan3 script and luci-app-mwan3 where when compiled with musl c-library (as trunk does) it calls uci with parameters in wrong order. Here is a bug report and patch for mwan3 to make it working: <a href="https://github.com/openwrt/packages/issues/1502">https://github.com/openwrt/packages/issues/1502</a></p></blockquote></div><p>With the UCI arguments reordered would this work on trunk AND pre-trunk OpenWrt?</p><p>I&#039;ll look into making a fixed luci-app-mwan3 release tonight or tomorrow.</p></blockquote></div><p>Yes, reordering the arguments will work for both pre-trunk (uClibc) and current trunk (musl) implementations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282248">
				<div class="post-metadata">
					<div class="post-num">Post #1325</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						3 Jul 2015, 07:26					</div>
				</div>
				<div class="post-content content">
					<p>Adze is very busy but will fix his mwan3 scripts sometime soon.</p><p>I&#039;ll upload a fixed luci-app-mwan3 tomorrow.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 53 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=51.html">51</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=52.html">52</a></li><li class="pagination-current"><span>53</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=54.html">54</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=55.html">55</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>