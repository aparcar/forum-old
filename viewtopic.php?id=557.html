<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54GS: OpenWRT login in failsafe?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p2650">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">freesol</div>
					<div class="post-datetime">
						21 Oct 2004, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>After flashing our WRT54G v2.0 (from original linksys firmware v.2.02.7) to OpenWRT snapshot 20041021 we tried for the first time after flashing to telnet into the device. We flashed the device via the webbased firmware-upgrade page from the original linksys firmware.</p><p>It asks for username and password. We tried every combination of root and admin and even with no password. No login is possible.</p><p>Every OpenWRT page states that there is no username and password necessary.</p><p>Any hints for us to login and continue installing packages?</p><p>Thank you very much...</p><p>freesol</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2654">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lunarg</div>
					<div class="post-datetime">
						21 Oct 2004, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi all</p><p>I was fiddling around with OpenWRT on my WRT54GS and was able to succesfully install it.<br />After playing around with it (and comparing some things between the openwrt and the original interface), I decided to install the latest official firmware (2.09). That all went well.</p><p>I got quickly bored by it, so decided to install the latest precompiled snapshot from OpenWRT (snapshot-20041021). After that, the thing doesn&#039;t quite work that well anymore. Upon powering up, the thing boots but then simply hangs with the Power LED and DMZ LED on. It doesn&#039;t do anything anymore and does not respond to telnet or pings.<br />Desperately, I booted with failsafe mode (but did not know this would also turn off boot_wait). This works and I can telnet in, but then I get this nasty prompt<br /></p><div class="codebox"><pre><code>OpenWRT login: </code></pre></div><p>I don&#039;t have a password, and logging in with nothing, &#039;root&#039; and the router password doesn&#039;t seem to help.<br />Anyone got a clue about what that login might be, before I turn to more drastic measures (opening it up).</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2655">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">trevorj</div>
					<div class="post-datetime">
						21 Oct 2004, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>username: root<br />password: your wrt54g&#039;s admin password ( if you changed it from &quot;admin&quot; )</p><p>it saves the old password through a re-flash...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2656">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">trevorj</div>
					<div class="post-datetime">
						21 Oct 2004, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>try<br />root<br />admin<br />otherwise I&#039;m lost <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>booting into failsafe turns boot_wait off? I don&#039;t see what good that could possibly do if it does.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2657">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lunarg</div>
					<div class="post-datetime">
						21 Oct 2004, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>I tried that one already, but it keeps saying it&#039;s incorrect.</p><p>But when the nvram parameters are all reset, shouldn&#039;t the password reset to default as well? (Even if it doesn&#039;t, I never changed the admin password.)</p><p>EDIT: one other thing: it is said that creating the jffs2 partition takes a long time. During that time, should I be able to telnet/ping the router? And how long should I wait, because maybe there&#039;s nothing wrong... (But then again, why can&#039;t I login..?)</p><p>I&#039;m going to try some things out tomorrow; hopefully nothing drastic (like shorting out things ;-)).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2659">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">freesol</div>
					<div class="post-datetime">
						21 Oct 2004, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>u/p: &quot;root&quot; / &quot;admin&quot; doesn`t work.&nbsp; I resetet the device before I flashed OpenWRT. </p><p>The Linksys login was u/p: &quot;&quot; / &quot;admin&quot;.</p><p>To make it more clear. The WRT54G has 192.168.1.1, my host 192.168.1.2.&nbsp; &nbsp;Tried telnet with both: PuTTY and telnet from windows.</p><p>Is there a way to flash it again? Or any other hints how to login? </p><br /><p>Thanks<br />freesol</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2664">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">freesol</div>
					<div class="post-datetime">
						22 Oct 2004, 11:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />it seems we have the same problem with snapshot 20041021 for the wrt-54g. We canÂ´t login per telnet because we donÂ´t know the right combination of username and password.<br />Our thread:<br />[<a href="https://openwrt.org/forum/viewtopic.php?t=556">https://openwrt.org/forum/viewtopic.php?t=556</a>]</p><p>Perhaps it is possible somebody compiled this snapshot with username and password???</p><p>bye<br />freesol[/url]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2665">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">lunarg</div>
					<div class="post-datetime">
						22 Oct 2004, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>Wouldn&#039;t surprise me.<br />My first OpenWRT flash was one I compiled myself. It also started with the login prompt. I quickly deactivated it in the source.<br />But the most problematic issue is that boot_wait has been turned off while trying to boot into failsafe, and now I can&#039;t reflash it.<br />That being said I think the only way is to short out pins and hopefully getting it to enter tftp wait state.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2667">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lunarg</div>
					<div class="post-datetime">
						22 Oct 2004, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>After shorting out:<br /><a href="http://openwrt.org/forum/viewtopic.php?t=525">http://openwrt.org/forum/viewtopic.php?t=525</a></p><p>Not a good result...&nbsp; :cry:</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2671">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">schorsch01</div>
					<div class="post-datetime">
						22 Oct 2004, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>I have exactly the same problem. I flashed OpenWRT on my (second) WRT54G v1 through the Web-Interface of Sveasoft Satori. Before I rechecked that the nvram variable boot_wait is &quot;on&quot;.<br />The Upgrade worked without any problems. I can ping my WRT54G v1 (IP-Address: 192.168.1.2) but when I want to telnet it asked me for username/password.</p><p>I tried some combinations as suggested, checked root/admin combination and double checked it. <br />I used the file openwrt-g-code.bin from snapshot-20041022.tar.bz2</p><p>Do you have any tips?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2676">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mike</div>
					<div class="post-datetime">
						23 Oct 2004, 05:54					</div>
				</div>
				<div class="post-content content">
					<p>Had same problem with &#039;snapshot-20041021.tar.bz2&#039; could not login under telnet and also reset button would not work. Thought i had bricked the wrt54g.</p><p>Got &#039;snapshot-20041010.tar.bz2&#039; and loaded it with tftp and with my amazement it load. Log in with telnet, not a problem, does not even ask for login or password. </p><p>Now to setup client mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2677">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">infil00p</div>
					<div class="post-datetime">
						23 Oct 2004, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>It sounds to me like you may have accidentally comiled in the BusyBox username and password options.&nbsp; I don&#039;t know exactly where it grabs this info from (either /etc/passwd or /etc/shadow), but if you don&#039;t have a passwd file, you&#039;re out of luck.</p><p>I am in the same boat with my router, and I was dumb and couldn&#039;t set the boot_wait to on before flashing.&nbsp; Now, I have to debrick it.</p><p>I hope that your router is not in the same condition.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2681">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						23 Oct 2004, 08:07					</div>
				</div>
				<div class="post-content content">
					<p>If you build your own, check under buildroot/build-mipsel/root/bin to see what it is. It should be a shell script wrapper for ash. Otherwise, it would check against /etc/passwd which most likely than not won&#039;t have anything and it means there is no way you can get access to the box. Just flash another firmware.</p><p>I believe it would be safer in future release to tell the telnetd daemon to run ash rather than the wrapper, just in case the login feature of busybox is turned on accidental, as the telnetd is only used for emergency use only.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2690">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">infil00p</div>
					<div class="post-datetime">
						23 Oct 2004, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>That makes sense.&nbsp; However, it still would be nice to have a passwd file there in the following builds just to resolve this issue.</p><p>However, /etc/passwd files are not hard to create. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2697">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						24 Oct 2004, 04:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>That makes sense.&nbsp; However, it still would be nice to have a passwd file there in the following builds just to resolve this issue.</p><p>However, /etc/passwd files are not hard to create. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>It would be easier to change the init.d/ script as to have a valid /etc/passwd, one need to create the password hash properly. Though I agree that proper(with entries)&nbsp; /etc/passwd and /etc/group should be there as many apps expect such a thing, including dropbear. Beside, some daemons need non-root entry too(for downgrade privaledge).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2755">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">schorsch01</div>
					<div class="post-datetime">
						26 Oct 2004, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>Good news to tell: I can login to my little WRT again. I tried the tipps with pin 15-16, but had some problems because the new firmware didn&#039;t flash correctly. <br />Short story: after flashing the new OpenWRT snapshot snapshot-20041022.tar.bz2 to my WRT54G(v2) I couldn&#039;t login via telnet. The standard username/password combination was not accepted (&quot;root/admin&quot;). I didn&#039;t changed the password. Anyway... I tried to start the failsafe_mode but this didn&#039;t helped me out and as I read in this forum it turns boot_wait to off. So I had to open the little box searched for the Intel Flash with 48 pins (there&#039;s a small sticker saying, it&#039;s version 2.02.2). After that I turned the power off, start pinging &quot;ping -t 192.168.1.1&quot; on Windows, short cutted pin 15-16 with a screwdriver and turned the power on of the WRT. The power led started to blink and I started to upload an official firmware -&gt; nothing happens. <br />OK -&gt; I started Linux, turned on tcpdump and realized that there is a transmit error during the firmware upload of the official Firmware Version 3.01.3! <a href="ftp://ftp.linksys.com/pub/network/WRT54GV2_3.01.3_US_code.zip">ftp://ftp.linksys.com/pub/network/WRT54 … S_code.zip</a><br />I used the Linux tftp command and set rexmt 1.</p><p>I have no idea why this happens. I uploaded Sveasoft Satori, everything works ok, the power led was blinking for about 1 minute after the upload was completed, the router rebooted and ping 192.168.1.1 worked.</p><p>Finished? Not yet, now upload OpenWRT&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> </p><p>I used this post <a href="http://openwrt.org/forum/viewtopic.php?t=17">http://openwrt.org/forum/viewtopic.php?t=17</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2756">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">schorsch01</div>
					<div class="post-datetime">
						26 Oct 2004, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>More good news&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <br />After flashing this Satori thing on my innocent wrt box, I downloaded the new snapshot snapshot-20041026 from <a href="http://openwrt.org/downloads/snapshots/snapshot-20041026.tar.bz2">http://openwrt.org/downloads/snapshots/ … 26.tar.bz2</a> as described at <a href="http://openwrt.org/userguide.html">http://openwrt.org/userguide.html</a></p><p>This time, I didn&#039;t use the web-interface of Sveasofts Satori - just turned telnet on, to make &quot;nvram set boot_wait=on; nvram commit; reboot;&quot;.<br />Deafult username/password for Sveasoft telnet login is root/admin. After that I turned the power off, and uploaded the firmware as described in the userguide. &quot;rtfm&quot;&nbsp; <img src="https://forum.openwrt.org/img/smilies/lol.png" width="15" height="15" alt="lol" /> </p><p>tftp 192.168.1.1<br />tftp&gt; binary<br />tftp&gt; rexmt 1<br />tftp&gt; trace<br />Packet tracing on.<br />tftp&gt; put openwrt-g-code.bin</p><p>-&gt; know turn the power on and pray...</p><p>For those of you who don&#039;t have a PC with Linux installed, you can try a Live Linux CD like Knoppix.<br /><a href="http://www.knoppix.org">http://www.knoppix.org</a>/<br />-&gt; starts Linux from cd without touching your Windows Installation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2767">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">hansliss</div>
					<div class="post-datetime">
						27 Oct 2004, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>Have just helped a college de-brick his WRT54GS after running into the username/passwd issue. Adding passwd and group files to the buildroot/build_mipsel/root/etc directory didn&#039;t help since by this time, firstboot had already been run and there were no links from /etc/passwd to /rom/etc/passwd and from /etc/group to /rom/etc/group.</p><p>I finally added a conditional call to firstboot to S10boot when /etc/passwd is missing and reflashed the router, and that helped.</p><p>Two suggestions:</p><p>1) Add an option to firstboot to *only* make it link any new files in the rom file system, and run that on every boot. That would make it easier to manage customized additions to the rom file system.</p><p>2) Add commands to set boot_wait to &quot;on&quot; on every boot. I can hardly imagine anyone not wanting to wait a few extra seconds on boot in exchange for avoiding having to short out pins on the flash chip when something goes wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2769">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">frink</div>
					<div class="post-datetime">
						27 Oct 2004, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>To fix it quick and dirty you can edit </p><br /><p>build_mipsel/root/etc/init.d/S50telnet</p><p>to be the following</p><p>/usr/sbin/telnetd -l /bin/sh</p><br /><p>That will just start a shell as soon as you telnet to the box. Not nice, but it made me happy for now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2845">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">lolo</div>
					<div class="post-datetime">
						1 Nov 2004, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ve tried to modify buildroot/sources/openwrt/root/etc/init.d/S50telnet accroding to frink&#039;s instructions and not buildroot/build_mipsel/root/etc/init.d/S50telnet as frink mentionned</p><p>I wrongly thought that on the next make the first would replace the second ... </p><p>So my question is : what is the &quot;role&quot; of the sources tree if it is not included in the make building process ? historical ?</p><p>hint/link/faq ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2847">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						1 Nov 2004, 22:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>i&#039;ve tried to modify buildroot/sources/openwrt/root/etc/init.d/S50telnet accroding to frink&#039;s instructions and not buildroot/build_mipsel/root/etc/init.d/S50telnet as frink mentionned</p><p>I wrongly thought that on the next make the first would replace the second ... </p><p>So my question is : what is the &quot;role&quot; of the sources tree if it is not included in the make building process ? historical ?</p><p>hint/link/faq ?</p></blockquote></div><p>The whole buildroot is designed for building from SCRATCH to FINISH. What you have done is not the desired usage(rebuilding in the middle). try &quot;rm -rf buildroot/build_mipsel/root&quot;, that would build the rootfs based on the new changes in the sources/openwrt/root.</p><p>In fact, you can do the same for a number of other things like busybox or uClibc or kernel, just go into&nbsp; it(under build_mipsel) and &quot;make clean&quot;, remove the build_mipsel/root, then make at the top level. This way, you can even change settings for the kernel, uClibc, busybox etc. too as the Makefile rules won&#039;t untar from the source again.</p><p>Don&#039;t blame me if&nbsp; something is screwed up as I said the only &quot;right&quot; way of building the firmware is from SCRATCH to FINISHnot even stopped in between), what I mentioned are easy hacks to customize the firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2915">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">TheSurf</div>
					<div class="post-datetime">
						9 Nov 2004, 01:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I ran in the same Problem.</p><p>I just done the trick with pin 15 and 16.<br />I got tftp and somefirmwares.</p><p>(Original and other)</p><p>I plug in the cable got a ping have entered the tftp commands and I didn&#039;t got the firmware to upload.<br />The red light is flashing. </p><p>With tcp dump I always geht an udp crc error.</p><p>What have I done wrong? Can someone help me? Do I need a spezial tftp client? </p><p>Alex</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>