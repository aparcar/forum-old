<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> sh: =~: unknown operand</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p357071">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						25 Apr 2017, 17:02					</div>
				</div>
				<div class="post-content content">
					<p>Hello i want to use the regex operator in a bash script but when i use it i get error.<br />Can you help me ?</p><div class="quotebox"><blockquote><p>error : sh: =~: unknown operand</p></blockquote></div><p>#!/bin/bash</p><p>IFS=$&#039;\n&#039;</p><p>ok=$(logread | grep -E &quot;$reg&quot;)</p><br /><p>reg2=&quot;^[A-Za-z]+ [a-zA-Z]+ [0-9]+ [0-9]+:[0-9]+:[0-9]+ [0-9]+ daemon\.info dnsmasq-dhcp\[[0-9]+\]: DHCPACK\(br-wifi\) [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+ [a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2} (aladin)_[0-9]*$</p><br /><br /><p>for f in $ok<br />do<br />#echo &quot;$f&quot;<br />#echo &quot;ok&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; if [[ &quot;$f&quot; =~ &quot;$reg2&quot; ]]<br />&nbsp; &nbsp; &nbsp; &nbsp; then<br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;$f&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;respect the template&quot;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;$f&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; echo &quot;doesnt&quot;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; fi</p><br /><p>done</p>											<p class="post-edited">(Last edited by <strong>SimonR</strong> on 25 Apr 2017, 17:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357072">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						25 Apr 2017, 17:25					</div>
				</div>
				<div class="post-content content">
					<p>Default OpenWRT installation uses BusyBox as a replacement for BASH, which does not incorporate all functionality, to save some space. Try installing the full BASH shell with &quot;opkg install bash&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357073">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						25 Apr 2017, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm i can&#039;t install bash i dont have enough place <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br />Thanks for the answers dude !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357074">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						25 Apr 2017, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>Do you have another solution for use regex ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357076">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 Apr 2017, 18:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SimonR wrote:</cite><blockquote><p>Do you have another solution for use regex ?</p></blockquote></div><p>AFAICT, the <em>error : sh: =~: unknown operand</em> means <strong>=~</strong> (<em>not equals to</em>) is the issue. I certainly would try to replace <strong>=~</strong> with something like <strong>~=</strong>,or <strong>!=</strong>, or <strong>&lt;&gt;</strong> to see if that will work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357086">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						25 Apr 2017, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>You can try to use &quot;expr&quot; instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357112">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						26 Apr 2017, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>&quot;expr&quot; it&#039;s working !!!</p><p>Thanks a lot guys !!!!</p><div class="codebox"><pre><code>ok=$(logread | grep -E &quot;$reg&quot;)


reg2=&quot;^[A-Za-z]+ [a-zA-Z]+ [0-9]+ [0-9]+:[0-9]+:[0-9]+ [0-9]+ daemon\.info dnsmasq-dhcp\[[0-9]+\]: DHCPACK\(br-wifi\) [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+ [a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2}:[a-z0-9]{2} (aladin)_[0-9]*$



for f in $ok
do
        verif=$(expr match &quot;$f&quot; &#039;.*\(aladin\)&#039;)

        if [[ $verif ]]
        then
        echo &quot;$f&quot;
        echo &quot;respect the template&quot;

        else
        echo &quot;$f&quot;
        echo &quot;doesnt&quot;

        fi


done</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357123">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						26 Apr 2017, 13:58					</div>
				</div>
				<div class="post-content content">
					<p>I am a bit confused here. In your OP, you unsuccessfully tried to match variable $f with variable $reg2. Here, you successfully tried to variable $f with variable &#039;.*\(aladin\)&#039;. The question I have is are they the same?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357126">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						26 Apr 2017, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p><strong>=~</strong> is using for use regex ? No ?<br />I&#039;m a beginner in bash, maybe i am wrong.</p><p>When is use <strong>expr match</strong> i want to compare my variable &quot;<strong>$f</strong>&quot; with my regex &quot;<strong>.*\(aladin\)</strong>&quot;<br />Like that :</p><div class="codebox"><pre><code>expr match &quot;$f&quot; &#039;.*\(aladin\)&#039;</code></pre></div><p>It&#039;s giving :</p><div class="codebox"><pre><code>expr match &quot;Wed Apr 26 11:20:53 2017 daemon.info dnsmasq-dhcp[1282]: DHCPACK(br-wifi) 192.168.0.232 5c:cf:7f:27:2f:f4 aladin_272ff4&quot; &#039;.*\(aladin\)&#039; </code></pre></div><p>my result :<br /><strong> -&gt; OK</strong> ( aladin = aladin )</p><p><strong>-&gt; &quot;respect the template&quot;</strong></p><p>I think the problem come from the bash, so i think that i can&#039;t use &quot;=~&quot; but &quot;expr match&quot;<br /></p><div class="quotebox"><blockquote><p>Default OpenWRT installation uses BusyBox as a replacement for BASH, which does not incorporate all functionality, to save some space. Try installing the full BASH shell with &quot;opkg install bash&quot;.</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>SimonR</strong> on 26 Apr 2017, 15:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357143">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						26 Apr 2017, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>I understood what you said above. However, what I tried to point out is you unsuccessfully tried to match variable $f with variable $reg2 in your OP while successfully tried to variable $f with variable &#039;.*\(aladin\)&#039;. These are two different things. Perhaps, comparing $f with variable &#039;.*\(aladin\)&#039; will work too in <em>if [[ &quot;$f&quot; =~ &#039;.*\(aladin\)&#039; ]]</em></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357144">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">SimonR</div>
					<div class="post-datetime">
						26 Apr 2017, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks mazilo, i will try the next time ! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>SimonR</strong> on 26 Apr 2017, 18:04)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>