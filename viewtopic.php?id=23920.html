<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help understanding how mini_fo sets up union</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p104749">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hutchman</div>
					<div class="post-datetime">
						16 Mar 2010, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m having trouble following the new style scripts to figure out just exactly the steps/order of how the union is setup.</p><p>On first boot, the squashfs is mounted as rootfs and /jffs and /rom are empty (original squashfs).</p><p>I know how /jffs is mounted.</p><p>I don&#039;t know how/when the /rom mount point gets populated with the contents of the original squashfs?</p><p>I don&#039;t fully understand how the union is established but found mount -t mini_fo -o base=/,sto=/jffs &quot;mini_fo:/jffs&quot; /mnt<br />I don&#039;t know why /mnt is included above.</p><p>Do I have to move /proc etc.?</p><p>When is pivot_root called?</p><p>I&#039;ve searched the forum and I&#039;ve found information that hits all around what I&#039;m looking (<a href="http://wiki.openwrt.org/doc/techref/preinit_mount">http://wiki.openwrt.org/doc/techref/preinit_mount</a>) for but no step-by-step explanation of how the union gets set up.</p><p>I&#039;ve been trying to unwind the scripts but I&#039;m missing something and haven&#039;t fully figured out the order things happen.</p>											<p class="post-edited">(Last edited by <strong>hutchman</strong> on 16 Mar 2010, 22:32)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>