<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Optimized and feature rich trunk build for select routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Aug 2014 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 155</div><nav><ul><li><a href="viewtopic.php%3Fid=50914&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=155.html">155</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p237140">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						18 Jun 2014, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>yes i am trying from my local LAN since I have no other connection to test it with, I am using the build that is in your current build no changes as for the DDNS you could pull it from<br />/etc/config and in the ddns file is this line<br />option domain &#039;<a href="http://www.domainname.org">www.domainname.org</a>&#039;</p><br /><p>I have the Build from the 16th also<br />Is there another VPN option that works native with Windows built in VPN Client? I would like to be able to use a system without having to install openvpn on each system.</p><p>as far as open vpn here is the file I am trying to set this up so I can connect to home while I am away.</p><p>remote domain<br />dev tun<br />persist-key<br />persist-tun<br />port 1143<br />ifconfig-nowarn<br />ifconfig 192.168.2.51 192.168.2.50<br />comp-lzo<br />dhcp-option DNS 192.168.2.1<br />dhcp-option DOMAIN lan<br />redirect-gateway<br />&lt;secret&gt;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237144">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						18 Jun 2014, 03:40					</div>
				</div>
				<div class="post-content content">
					<p>I think Windows supports PPTP and IPSec natively, but you&#039;ll quickly find that almost no hotspots have passthrough support. What&#039;s the use of a native VPN client when you can&#039;t use it on public wifi? What I like about OpenVPN is that it&#039;s compatible and runs well on every platform.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237148">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						18 Jun 2014, 03:54					</div>
				</div>
				<div class="post-content content">
					<p>I like openvpn also but so far there is no windows phone client for openvpn, I used the PPTP just fine everywhere I have gone in the US so far and now that the windows phone has built in VPN options that is a plus, IKEV2 would be another option but not sure how that works around other areas</p><p>I will try and test this outside my house to see if it works,</p><p>One issue I see is when I try and connect at home I am getting an error saying<br />ifconfig endpoints [local=192.168.2.51, remote=192.168.2.50]. The local and remote VPN endpoints cannot use the first or last address within a given 255.255.255.252 subnet.This is a limitation of --dev tun when used with the TAP-WIN32 driver. Try &#039;openvpn --show-valid-subnets&#039; option for more info.</p><br /><p>This seems to be a subnet issue since it seems to be limited to 255.255.255.252</p><p>if I change the file to show local at 50 and remote at 49 then it says it fails to connect which could be since this does not work from the house so I can test tomorrow</p>											<p class="post-edited">(Last edited by <strong>wesleyhey</strong> on 18 Jun 2014, 04:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237174">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						18 Jun 2014, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>Hm post your /etc/config/openvpn and .ovpn please.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237279">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						19 Jun 2014, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>ok here is what I get away from home<br />Wed Jun 18 15:17:26 2014 OpenVPN 2.3.4 x86_64-w64-mingw32 [SSL (OpenSSL)] [LZO] [PKCS11] [IPv6] built on Jun&nbsp; 5 2014<br />Wed Jun 18 15:17:26 2014 library versions: OpenSSL 1.0.1h 5 Jun 2014, LZO 2.05<br />Wed Jun 18 15:17:30 2014 do_ifconfig, tt-&gt;ipv6=0, tt-&gt;did_ifconfig_ipv6_setup=0<br />Wed Jun 18 15:17:30 2014 open_tun, tt-&gt;ipv6=0<br />Wed Jun 18 15:17:30 2014 TAP-WIN32 device [Local Area Connection] opened: \\.\Global\{0782EF41-9CD3-4054-B796-C37569C06D4F}.tap<br />Wed Jun 18 15:17:30 2014 Notified TAP-Windows driver to set a DHCP IP/netmask of 192.168.2.50/255.255.255.252 on interface {0782EF41-9CD3-4054-B796-C37569C06D4F} [DHCP-serv: 192.168.2.49, lease-time: 31536000]<br />Wed Jun 18 15:17:30 2014 Successful ARP Flush on interface [21] {0782EF41-9CD3-4054-B796-C37569C06D4F}<br />Wed Jun 18 15:17:30 2014 UDPv4 link local (bound): [undef]<br />Wed Jun 18 15:17:30 2014 UDPv4 link remote: [AF_INET]IP</p><p>the problem now is that I cannot see anything on my home network 192.168.2.1 network, I am missing something<br />here is the openvpn client</p><p>This could be a default gateway issue and DNS since the home network is on 192.168.2.1 and subnet of 255.255.255.0</p><p>one thing is that the /etc/config/openvpn file seems blank there is nothing in that file there is an openvpn-opkg file.&nbsp; not sure why it is blank do you have an example of what the file should look like?</p><br /><p>Here is what is in the config except the remote name changed and secret key removed<br />remote homeip<br />dev tun<br />persist-key<br />persist-tun<br />port 1194<br />ifconfig-nowarn<br />ifconfig 192.168.2.50 192.168.2.49 comp-lzo<br />dhcp-option DNS 192.168.2.1<br />dhcp-option DOMAIN lan<br />redirect-gateway<br />&lt;secret&gt;<br />&lt;/secret&gt;</p><p>Is there a way to use the IP&#039;s from my current DHCP server so it looks like I am home when using the VPN software.</p>											<p class="post-edited">(Last edited by <strong>wesleyhey</strong> on 19 Jun 2014, 06:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237307">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Jun 2014, 08:45					</div>
				</div>
				<div class="post-content content">
					<p>If your config file is blank then that is the problem... openvpn-opkg means you tried installing openvpn and it left that file there because you had a config file already. Look at /rom/etc/config/openvpn that is the build default.</p><p>Again, I can&#039;t do OpenVPN support for every possible config. This build should work with the defaults, if you make changes you are on your own.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237361">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						19 Jun 2014, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>ok I replaced that file, it allowed me to connect but when connecting it still does not allow me to route all my traffic through the VPN,</p><p>I cannot see any of my home systems and it routes my internet traffic through the network I am attached to.<br />I must be missing something simple.</p><p>I Notice you have a new build that I will test tonight that says it has a 192.168.2.X address range.</p><p>I cannot tell since there is TUN and TAP which is the best to use? for a laptop that I take with me on travel I want everything to go through the VPN. there is no real good info on why I would choose one over the other for this type of setup.<br />Thank you arokh for your help and the builds you do.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237367">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Jun 2014, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>There&#039;s lots of info on that, google is your friend <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Difference is tap lets you do bridging, but that adds overhead and isn&#039;t supported on every platform. Most people won&#039;t need that, you can do everything you need with a layer 3 tunnel which has better performance. Anyways, my build is set up using TUN and you should use the .ovpn that is generated for you. Should be plug n play, let me know if it&#039;s not.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237392">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						19 Jun 2014, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>ok one question with the new build I see that you have the IP as 192.169.2.1 and .2 I have my main router as 192.168.2.1 and my wireless bridge as .2 this will cause a conflict, what do you recommend I set it to?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237394">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Jun 2014, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Just change it to what you like. On second thought maybe 192.168.2.x is quite a commonly used network range, I&#039;ll change the OpenVPN addresses to 192.168.10.x or something in the next build.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 19 Jun 2014, 21:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237395">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						19 Jun 2014, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>I did this and still having issues I copied the file changed the IP&#039;s and when I connect the Windows Client using the openvpn file like posted before it connects and pings the router IP but it still will not route, is there an IPTABLE rule missing allowing the TUN adapter to Bridge or talk to the 192.168.2.1 ip range?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237396">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						19 Jun 2014, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Yes there is a &quot;vpn&quot; zone that has forward rules to and from the lan/wan.<br />Does the output of</p><div class="codebox"><pre><code>uci show firewall.@zone[1]</code></pre></div><p>equal</p><div class="codebox"><pre><code>firewall.cfg06dc81=zone
firewall.cfg06dc81.name=vpn
firewall.cfg06dc81.device=tun+
firewall.cfg06dc81.input=ACCEPT
firewall.cfg06dc81.output=ACCEPT
firewall.cfg06dc81.forward=ACCEPT</code></pre></div><p>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237400">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						19 Jun 2014, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>Even using the default VPN configuration, I still can&#039;t connect (via LAN, at least...). &quot;uci show firewall.@zone[1]&quot; does show the same results as you quoted.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237406">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						20 Jun 2014, 00:08					</div>
				</div>
				<div class="post-content content">
					<p>yep it looks just like that still no routing from the VPN to the home systems and does not redirect my internet traffic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237407">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 Jun 2014, 00:10					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll do a clean install tomorrow and check.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237431">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">kjt005</div>
					<div class="post-datetime">
						20 Jun 2014, 08:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi arokh<br />i have downloaded what i think is the correct img file for my 3700v2, <br /><a href="http://enduser.subsignal.org/~trondah/r41266/openwrt-ar71xx-generic-wndr3700v2-squashfs-sysupgrade.bin">http://enduser.subsignal.org/~trondah/r … pgrade.bin</a></p><br /><p>i have had problems flashing the firmware before the loader says the file is not valid.<br />what is the best way to load it up.<br />i am currently running v1.1.0.15 i think in the device from the factory.</p><p>are you able to assist please</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237432">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						20 Jun 2014, 08:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kjt005 wrote:</cite><blockquote><p>Hi arokh<br />i have downloaded what i think is the correct img file for my 3700v2, <br /><a href="http://enduser.subsignal.org/~trondah/r41266/openwrt-ar71xx-generic-wndr3700v2-squashfs-sysupgrade.bin">http://enduser.subsignal.org/~trondah/r … pgrade.bin</a></p><br /><p>i have had problems flashing the firmware before the loader says the file is not valid.<br />what is the best way to load it up.<br />i am currently running v1.1.0.15 i think in the device from the factory.</p><p>are you able to assist please</p></blockquote></div><p>That&#039;s the file for upgrading, not for doing clean installs. Whenever you flash for the first time, remember to use the &#039;...factory.img&#039; files, not the &#039;...sysupgrade.bin&#039; files. Those are only used if you already have this build installed and want to update without losing your settings.</p><p>Anyway, <a href="http://enduser.subsignal.org/~trondah/r41266/openwrt-ar71xx-generic-wndr3700v2-squashfs-factory.img">here&#039;s</a> an image that should work <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> .</p>											<p class="post-edited">(Last edited by <strong>bmccoy11</strong> on 20 Jun 2014, 08:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237433">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">kjt005</div>
					<div class="post-datetime">
						20 Jun 2014, 08:27					</div>
				</div>
				<div class="post-content content">
					<p>thanks i will give it a try tonight.<br />will this upgrade form the GUI or do I need to do it via TFTP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237435">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						20 Jun 2014, 08:35					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d say that you should install it via TFTP, just to be sure that it&#039;s completely installed from scratch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237437">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 Jun 2014, 09:39					</div>
				</div>
				<div class="post-content content">
					<p>r41226 had a nasty boot loop if you flashed the factory, sorry if anybody got that.&nbsp; I flashed r41181 factory image, loaded up the generated .ovpn in &quot;OpenVPN for Android&quot; and connected without problems. Redirected traffic and forwarding works fine. So I don&#039;t know what kind of problems you guys are having, it works out of the box. Tested from internet.</p><p>Do not flash factory r41226 if you already downloaded it! New build coming soon.</p><p>I want to change the default 192.168.1.1, any good suggestions? Thinking maybe 10.1.1.1 or can anyone come up with an even simpler address to punch in?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237438">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						20 Jun 2014, 09:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>I want to change the default 192.168.1.1, any good suggestions? Thinking maybe 10.1.1.1 or can anyone come up with an even simpler address to punch in?</p></blockquote></div><p>How about 172.20.1.1? That&#039;s a very uncommon local address, however it isn&#039;t as easy to remember... Although I do have great memory when it comes to IP addresses, some others don&#039;t...</p><p>Or, how about 10.10.10.10?</p>											<p class="post-edited">(Last edited by <strong>bmccoy11</strong> on 20 Jun 2014, 09:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237445">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 Jun 2014, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>Sounds good but 10.10.10.10 is more difficult to punch in than 10.1.1.1. Didn&#039;t like the 172 address <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237446">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						20 Jun 2014, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>10.1.1.1 should work good anyway (as it&#039;s still a very uncommon local address). <br />Anyway, I&#039;ll be back in a few days to start working on a new download website! Peace! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237494">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						20 Jun 2014, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>do you have a Windows box to test with? I do not have android devices and maybe it is the way routing works with Windows and openvpn, I did a flash from an old netgear version to yours and cannot get it working with a windows box. does this client.ovpn file work correctly on a Windows box, Windows 7 and Windows 8 X64 bit.</p><p>one interesting bit.</p><p>if I tracert my home IP it is going out over the local connection not going trough the VPN connection, there is no routing, this could be something with Windows 7 and Windows 8.1 that the client.ovpn does not work correctly.</p>											<p class="post-edited">(Last edited by <strong>wesleyhey</strong> on 20 Jun 2014, 17:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237506">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 Jun 2014, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Sorry I do not use Windows. Same .ovpn works with Tunnelblick for OSX as well, don&#039;t see why Windows should not work it&#039;s a very simple TUN setup with static key.</p><p>Execute this command after trying to connect:</p><div class="codebox"><pre><code>sed -n &#039;1,/secret/p&#039; /etc/openvpn/OpenWRT.ovpn &amp;&amp; uci export openvpn &amp;&amp; uci export firewall &amp;&amp; logread | grep openvpn </code></pre></div><p>Then put it on pastebin and give me the link.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 20 Jun 2014, 19:18)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 101 to 100 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 155</div><nav><ul><li><a href="viewtopic.php%3Fid=50914&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=6.html">6</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=155.html">155</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>