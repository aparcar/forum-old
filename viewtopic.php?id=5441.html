<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wap54G problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p26005">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						25 Apr 2006, 13:13					</div>
				</div>
				<div class="post-content content">
					<p>Hallo<br />I upgraded to RC5 wap54G v1.<br />The AP seems to work, but I have no access to it.<br />It was on default before update so IP should be 192.168.1.245.<br />There is no ping, telent, ssh, but the mac address is received (arp).<br />So I think the problem is in iptables, vlans or something else...</p><p>Idea how to resolve this problem?<br />I have boot-wait on so I can hopefully to get another firmware...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26160">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						27 Apr 2006, 11:37					</div>
				</div>
				<div class="post-content content">
					<p>I tried 2 methods with no result.<br />I downgraded to RC4. Established a wireless connection. Upgraded to RC5 and tried to connect trough wireless, but with no success.<br />I tried the failsafe procedure. Run the resvudp program, get the press reset message, but nothing I do, gets me in the failsafe mode <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Some ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26162">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">samot</div>
					<div class="post-datetime">
						27 Apr 2006, 12:13					</div>
				</div>
				<div class="post-content content">
					<p>Start with <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WAP54Gv10">http://wiki.openwrt.org/OpenWrtDocs/Har â€¦ /WAP54Gv10</a><br />and dont miss the link <a href="http://forum.openwrt.org/viewtopic.php?id=3591">http://forum.openwrt.org/viewtopic.php?id=3591</a></p><p>Good luck (you&#039;ll need it)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26164">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						27 Apr 2006, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>10x, samot, but didn&#039;t found solution <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />On my device boot_wait works ok. Lan is sending packets- at least arp replies, because I get the mac address.</p><p>If anybody (maybe developers) would like to send me modified firmwares, I will gladely test them on my devices, because my boot_wait is working. Unfortunately I don&#039;t have a serial connection, so I can only say working or not working...</p><p>I tried to build a custom image without switch, iptables,dnsmasq packages and patched. Immediately after patching I could connect to a device connected wireless. After restart it stopped working?? Strange. I am not sure I can reproduce...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26290">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">samot</div>
					<div class="post-datetime">
						29 Apr 2006, 13:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>avalon wrote:</cite><blockquote><p>On my device boot_wait works ok. Lan is sending packets- at least arp replies, because I get the mac address.</p></blockquote></div><p>Strange. I&#039;ve already suspected there are two revisions of v1.0. Maybe your dev have better pmon but the same hw problem.<br />Can you report S/N and send binary image of PMON?</p><p>If you can downgrade to any working fw, try setting</p><div class="codebox"><pre><code>nvram set boardtype=bcm94710dev
nvram set boardnum=2
nvram commit</code></pre></div><p>Actual values should be same as before. You need set them againg to get rid of invisible CR appended.<br />After that official RC5 micro image should work.</p><div class="quotebox"><cite>avalon wrote:</cite><blockquote><p>If anybody (maybe developers) would like to send me modified firmwares, I will gladely test them on my devices, because my boot_wait is working. Unfortunately I don&#039;t have a serial connection, so I can only say working or not working...</p></blockquote></div><p>Be happy that boot_wait is working. If an image for some reason corrupts nvram, you loose way back - well except of building an uart.<br />I use customised kamikaze on my two wap54g v1.0 devs. Presumably such image is not what you want.</p><div class="quotebox"><cite>avalon wrote:</cite><blockquote><p>I tried to build a custom image without switch, iptables,dnsmasq packages and patched. Immediately after patching I could connect to a device connected wireless. After restart it stopped working?? Strange. I am not sure I can reproduce...</p></blockquote></div><p>What patches you mean?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26425">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						2 May 2006, 10:14					</div>
				</div>
				<div class="post-content content">
					<p>samot, thank you very much!<br />After setting these variables averithing works OK.<br />I already have only one device updated to RC5, but I have 2 RC4 which are now installed on a client and I have no access to them. <br />One of them was with non working bootwait, but the problem was not in the device I think. Here is the serial number of my RC5 device: MDG003358996. Now I will explain what the boot-wait problem maybe is:</p><p>I update the devices by installing hyperwap to enable boot_wait first. Hyperwap says that it needs the original firmware 1.09.01. So I in first place install this firmware, after that hyperwap and after that openwrt with tftp.<br />On the one device with RC4 which was with non working boot_wait I forgot to install 1.9.1 first. After that I had working openwrt but after every reboot boot_wait was resetted to off!? Maybe 1.09.1 firmware solves some problems...</p><p>I could send you whatever image you wish, but please send me email to avalon at friendofpooh dot com with instructions how to create it and I will have your email to know where to send it.</p><p>10x again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26431">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						2 May 2006, 11:50					</div>
				</div>
				<div class="post-content content">
					<p>Ok. I maybe must take my words back <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />My second device was broken by a lightning so the ethernet port was dead. It was repaired in unknown way. I don&#039;t know if this is the reason, but it has in nvram boot_wait=on, but boot_wait doesn&#039;t work. <br />I installed RC4, connected through wireless (lan not working), set variables, installed RC5 with mtd and it is working now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> S/N: MDG003705553</p><p>The device is possibly broken because on some reboots (with the original firmware, I will test with RC5 now) lan works and on some not... So it is not a sure indication of device from the revision with broken boot_wait.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26830">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">samot</div>
					<div class="post-datetime">
						9 May 2006, 13:29					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve checked PMON images you&#039;ve sent. Both are exactly same as mine.</p><p>Check dmesg output for &quot;diag boartype&quot;.<br />If it reads 0000041a router hardware is detected corectly and vanilla RC5 can workaround PHY isolate hw bug. If so your problems are not related to it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26835">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">samot</div>
					<div class="post-datetime">
						9 May 2006, 15:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>avalon wrote:</cite><blockquote><p>On the one device with RC4 which was with non working boot_wait I forgot to install 1.9.1 first. After that I had working openwrt but after every reboot boot_wait was resetted to off!? Maybe 1.09.1 firmware solves some problems...</p></blockquote></div><p>I noticed on serial console that PMON insists on some nvram variables with \r character appended. If they are commited in &quot;normal&quot; form (without \r),<br />PMON on next boot resets all PMON related variables (including boot_wait and et1macaddr). Maybe there is a varible which can prevent this? Try diff outputs<br />of nvram show on those to devs. I have not found such difference between nvram.bin and nvram_bad.bin you&#039;ve sent.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26883">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						10 May 2006, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>For the device that resets boot_wait I made a script that restores nvram variables from file and copied all from the working to the not-working device, so all variables are without \r.<br />Anyway I cannot test them any more.</p><p>Yes the board type is 41a and the problem is maybe imaginary because I had other network problems. Ater resolving them I have no more troubles.</p><p>BTW both devices are with 4MB flash:<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;pmon&quot;<br />0x00040000-0x003f0000 : &quot;linux&quot;<br />0x000bc400-0x00168000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x003f0000-0x00400000 : &quot;nvram&quot;<br />0x00170000-0x003f0000 : &quot;OpenWrt&quot;</p><p>and one just don&#039;t works without workarounding PHY isolate hw bug. The other is ok in all manners...</p><p>I will try to include this information in the wiki.<br /> Would be good to review what I&#039;ve written.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27189">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						14 May 2006, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>Hallo<br />I upgraded to RC5 my WAP54G v2. The previous firmawe was wap54g v3-3.04.02-hyperwap. Access Point works. Both lan and wlan are alive but... no access is to it. 192.168.1.245 does not answer, no ping... What is going on? HELP and sorry I am a Windows user (shame on me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Please help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27243">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						15 May 2006, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>How do U know interfaces are alive?<br />What was the address of the AP before update?</p><p>RC5 comes with a web interface. Can you access it?<br />Did you tried telnet &lt;IP&gt;.<br />Did you tried ssh &lt;IP&gt; (you can use putty fot ssh access)<br />How did you updated (tftp or web)?<br />Does your boot_wait works?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27248">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						15 May 2006, 11:15					</div>
				</div>
				<div class="post-content content">
					<p>wifi and lan are alive as everything is all right. I use the old WEP and wifi connects the net. I only can not use web interface. Before upgrade (by wifi in web) I could setup AP writing 192.168.1.245 in tte web. Now &quot;ping 192.168.1.245&quot; does not answer in telnet. Sorry I do not know what the ssh access means. Thank for answer and I wait for any sugesstions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27251">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						15 May 2006, 11:39					</div>
				</div>
				<div class="post-content content">
					<p>It seems like a firewall problem...<br />Try from the lan side.</p><p>ssh is as telnet but uses encryption. Putty is a program easy to use, so download it. <br />After setting password, you will be unable to use telnet any more.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27255">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						15 May 2006, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>hmmm still the same. Putty in ssh mode does not help. Still no connection - time out -. What to do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27256">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						15 May 2006, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>Try if your boot_wait is working.<br />Use the imagebuilderhowto in the wiki to build an image without iptables and dhcp, to see if this was the problem.<br />After flashing, you could install these by the ipkg utility.</p><p>So tftp is it. See tftp installing in the docs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27257">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						15 May 2006, 13:31					</div>
				</div>
				<div class="post-content content">
					<p>After all read the unbricking howtos, but I think that your problem is something that you don&#039;t do as expected, because the device continues to work...<br />You can try to go through the recovery howto with the reset button...<br />And I cannot understand these versions that you gave in your first post.</p><p>Just sleep a night, reboot the device. Try to connect to it without firewalls from wifi and from lan. And try the things I mentioned above.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27275">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						15 May 2006, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>The previous ver. of firmware was hyperwap_V3.trx. I have no idea. I tried the unbricking method with 15-16 pins - no results.</p><p>What is it boot_wait?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27293">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						16 May 2006, 10:49					</div>
				</div>
				<div class="post-content content">
					<p>WAP54G v2 with previous firmware hyperwap_V3.trx worked great.<br />After upload RC5 I lost web setup 192.168.1.245. Still works great with the old configuration.<br />No answer for ping by wifi and lan. It can not be rebooted - no actions. Probably boot_wait is off. Unbricking method and no changes. Still works but can not be configured or changed firmaware.</p><p>what to do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27326">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ffox</div>
					<div class="post-datetime">
						16 May 2006, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>I have found IP 192.168.1.255 of my wap54g by LAN Scanner program. But there is no open port, so I can not connect to it any telnet or ssh to flash new firmware. Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27369">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">avalon</div>
					<div class="post-datetime">
						17 May 2006, 10:04					</div>
				</div>
				<div class="post-content content">
					<p>You must use a separate connection with the device, because it is possible to have 2 or motre devices with the same IP address in your network, so the bridge will work, but the device is inaccessible.</p><p>First try the failsafe method with the reset button.<br />Try do downgrade or install custom image of RC4 with tftp (boot_wait=on). boot_wait and tftp upgrade are explained in the documentation. (as almost everithing else)</p><p>If you cannot understand the documentation, you should pay somebody experienced in networking and openwrt to help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90766">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Danielgamero</div>
					<div class="post-datetime">
						2 Jul 2009, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>please I have a wap54g V1.0 with 4702 chip bricked, so I need the cfe.bin but I cant findd the correct one, please help me please</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>