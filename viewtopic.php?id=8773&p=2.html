<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile Error</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 21 Apr 2018 and 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=8773&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p39769">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 03:19					</div>
				</div>
				<div class="post-content content">
					<p>OK, on to configuring the network!<br />On this page <a href="http://wiki.openwrt.org/OpenWrtDocs/Configuration">http://wiki.openwrt.org/OpenWrtDocs/Configuration</a> it says I must modify the NVRAM <br />lan_ifname=br0<br />lan_ifnames=&quot;vlan0 eth1&quot;<br />lan_proto=static<br />lan_ipaddr=192.168.1.25<br />lan_netmask=255.255.255.0<br />lan_gateway=192.168.1.1<br />lan_dns=192.168.1.1<br />wan_proto=none</p><p>Now, if I modify lan_dns, does that mean the dns the router uses is changed, or only what it gives out with DHCP?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39770">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 03:19					</div>
				</div>
				<div class="post-content content">
					<p>So, the SD card in a card reader gets automatically mounted?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39771">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 03:27					</div>
				</div>
				<div class="post-content content">
					<p>yes, the problem is the usb stick somehow, I got usb storage working.</p><p>Nevermind the NVRAM question I erased, forgot nvram commit</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 03:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39773">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 04:30					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Florian for adding US Robotics 5461 support to WhiteRussian. Support added in <a href="https://dev.openwrt.org/changeset/5928">[5928]</a> and <a href="https://dev.openwrt.org/changeset/5929">[5929]</a>.</p><br /><p>Check out WR from subversion. Then build it normally with &#039;make menuconfig&#039; and &#039;make&#039;. Don&#039;t forget to select the ImageBuilder under Packages in menuconfig (at the end of the list).</p><p>This creates the required images:<br />&nbsp; &nbsp; openwrt-brcm-2.4-squashfs.trx -&gt; for TFTP<br />&nbsp; &nbsp; openwrt-usr5461-squashfs.bin&nbsp; -&gt; to flash directly from the original US Robotics 5461 web interface</p><p>You have to reduce the size of the image with the ImageBuilder by removing not required packages. See the previous posts in this thread to get an idea which packages you can remove.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 18:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39790">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Timo Beil</div>
					<div class="post-datetime">
						29 Dec 2006, 12:03					</div>
				</div>
				<div class="post-content content">
					<p>The USR5461 seems to be very similar to the Belkin F5D7230-4 and the Siemens SE505V2. Most things written for those models should apply to your router, too.</p><p>Some of the memory sticks have a broken SCSI cmd layer (especially cheap USB MP3 players), and won&#039;t be detected properly. Whenever this happens, you&#039;ll get mount points like disc0_*. In cases one might even get disc*_* ( see <a href="https://dev.openwrt.org/ticket/1104">https://dev.openwrt.org/ticket/1104</a> for a fixing this annoying behavior ).</p><p>A hint on the file system: I suggest you use EXT2 (it is faster and it takes less memory than VFAT - EXT3 is reported to write more often to the disc, but I haven&#039;t tested this). If you have to use FAT, better format your disc with FAT16, it will be a lot faster, and it will take less RAM to mount it).</p><p>Follow the instructions in section &quot;How do I boot from the USB device&quot; in <a href="http://wiki.openwrt.org/UsbStorageHowto">http://wiki.openwrt.org/UsbStorageHowto</a>, and the flash size limitation will be a thing of the past. If you have no USB strorage plugged in, the box will boot as usual.</p><p>Note that for BCM4712 based routers the init script should look like this:<br /></p><div class="codebox"><pre><code>#!/bin/sh

# change this to your boot partition
boot_dev=&quot;/dev/discs/disc0/part1&quot;

# install needed modules for usb and the ext3 filesystem
# **NOTE** for usb2.0 replace &quot;uhci&quot; with &quot;ehci-hcd&quot;
# **NOTE** for ohci chipsets replace &quot;uhci&quot; with &quot;usb-ohci&quot;

for module in usbcore usb-ohci scsi_mod sd_mod usb-storage ext2 wlcompat wl switch-adm switch-core; do {
insmod $module
}; done

# this may need to be higher if your disk is slow to initialize
sleep 4s

# mount the usb stick
mount &quot;$boot_dev&quot; /mnt

# if everything looks ok, do the pivot root
[ -x /mnt/sbin/init ] &amp;&amp; {
mount -o move /proc /mnt/proc &amp;&amp; \
pivot_root /mnt /mnt/mnt &amp;&amp; {
mount -o move /mnt/dev /dev
mount -o move /mnt/tmp /tmp
mount -o move /mnt/jffs2 /jffs2 2&gt;&amp;-
mount -o move /mnt/sys /sys 2&gt;&amp;-
}
}

# finally, run the real init (from USB hopefully).
exec /bin/busybox init</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=8773&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>