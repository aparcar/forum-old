<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze WGT634U Configuration?!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Jan 2018 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p20865">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						14 Feb 2006, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,<br />I just installed the WGT634U Kamikaze Image with 2.6 kernel and squashfs support ( <a href="http://flyashi.dyndns.org:81/bin/">http://flyashi.dyndns.org:81/bin/</a> ).<br />It worked very well, but now I don&#039;t now how to configure Network.<br />(Tired /etc/config/network, but didn&#039;t worked)</p><p>Any Ideas?!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20876">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						15 Feb 2006, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>Yea.. the default config didn&#039;t work for me either.</p><p>Some steps I took to enable wifi and networking:</p><p>In /etc/firewall.user, add:</p><p>iptables -I br0 -o $WAN -j ACCEPT (i forget the exact line.. i&#039;ve since borked my router so i dont have this setting anymore)</p><p>Rember to run firewall.user after editing it</p><p>I also added wifi support following Geoff&#039;s post here in the forums.</p><p>I also added &quot;autocreate=ap&quot; to /etc/modules.d/20_madwifi after &quot;ath_pci&quot;.</p><p>Other users have said that the default config is OK in recent builds. I&#039;ve updated the server to make hourly builds (have to fix version number reporting) so what&#039;s there is (now) the latest. Try it... if it doesn&#039;t work ... then the default config for the WGT634U is broken and ... bad stuff.</p><p> - me</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20878">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lanex</div>
					<div class="post-datetime">
						15 Feb 2006, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>Can this image be uploaded from the WGT634U&#039;s web interface, like described here:</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/WGT634U#head-67b4d8a8c1c057b3b9bd53e8fe84048232cc3a85">http://wiki.openwrt.org/OpenWrtDocs/Har … 8232cc3a85</a></p><p>I haven&#039;t found clear answer for this yet...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20879">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						15 Feb 2006, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Yes, you can.</p><p>Just follow the instructions at the link you posted, then just upload openwrt-wgt634u-(squashfs or jffs2).bin .</p><p>Easy as 3.14 :-)</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20883">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						15 Feb 2006, 03:56					</div>
				</div>
				<div class="post-content content">
					<p>Some more config tips:</p><p>If you&#039;re a WhiteRussian convert, you should know that all the network configs are stored in /etc/config/network. There you can edit all your settings.</p><p>All the other Howto&#039;s apply ( <a href="http://wiki.openwrt.org/OpenWrtHowTo">http://wiki.openwrt.org/OpenWrtHowTo</a> ) for setting up client mode, USB Storage, Samba, etc.</p><p>The wiki and forums have pretty much everything you need to set up your router however you want. If you need some help, check out <a href="http://openwrt.org/support">http://openwrt.org/support</a> .</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20977">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						17 Feb 2006, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s unfortuante that networking doesn&#039;t work out of the box for the wgt634u.</p><p>In fact, the 05networking seems to miss the board entirely.&nbsp; After fixing this, I am able to get the network up on eth0, but no scripts<br />exist for proper vlan or bridge configuration.&nbsp; </p><p>The problem with the wiki howto&#039;s is that they&#039;re based on the wrt54g/gs which are very nvram dependent.</p><p>Is there a page I&#039;m missing for setup on non-nvram based routers like this one?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20978">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						17 Feb 2006, 01:00					</div>
				</div>
				<div class="post-content content">
					<p>All the same settings exist; except instead of being stored in nvram, they&#039;re stored in /etc/config/network .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20981">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						17 Feb 2006, 02:52					</div>
				</div>
				<div class="post-content content">
					<p>The why isn&#039;t the router taking the /etc/config/network variables at startup?</p><p>At the first shell upon startup:</p><p>$ ifconfig</p><br /><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:0F:B5:3F:54:38&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING PROMISC MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2348 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:167596 (163.6 KiB)&nbsp; TX bytes:0 (0.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>root@C4:/# cat /etc/config/network <br />#### VLAN configuration <br />vlan0hwname=et0<br />vlan0ports=&quot;0 1 2 3 5*&quot;<br />vlan1hwname=et0<br />vlan1ports=&quot;4 5&quot;</p><br /><p>#### LAN configuration<br />lan_proto=&quot;static&quot;<br />lan_ifname=&quot;vlan0&quot;<br />lan_ifnames=&quot;vlan0 eth1&quot;<br />lan_ipaddr=&quot;192.168.11.254&quot;<br />lan_dns=&quot;192.168.11.254&quot;<br />lan_gateway=&quot;192.168.11.254&quot;</p><br /><p>#### WAN configuration<br />wan_proto=dhcp<br />wan_ifname=&quot;vlan1&quot;<br />wan_device=&quot;vlan1&quot;<br />wan_dns=&quot;4.2.2.1 4.2.2.2 4.2.2.3&quot;</p><p>My bootlog:</p><p>cat /tmp/wgtbootlog<br />CFE version 1.0.34 for BCM95365R (32bit,SP,LE)<br />Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)<br />Copyright (C) 2000,2001,2002 Broadcom Corporation.</p><p>Add MAC client version(DNI).<br />Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x81BB1280 - 0x82000000 (4517248)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB1280 - 0x81BB3E90 (11280)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB3E90 - 0x81BB45D0 (1856)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB45D0 - 0x81FB45D0 (4194304)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81FB45D0 - 0x81FB65D0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x81FB65E0 - 0x81FFFFB0 (301520)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x01B70000 - 0x01BB0000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:E23B65E0 - D:01BB0280</p><p>configure vlans<br />*****************************************************************<br />*********************** VLAN Driver initial&nbsp; ********************<br />*****************************************************************<br />Process LAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add LAN port</p><p>Process WAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add WAN port<br />SUCCESS: enable ports&nbsp; success<br />configure vlans...done<br />Device eth0:&nbsp; hwaddr 00-0F-B5-3F-54-38, ipaddr 71.197.131.39, mask 255.255.254.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway 71.197.130.1, nameserver 68.87.69.146, domain hsd1.wa.comcast.net.<br />Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)<br />***************************<br />****&nbsp; MAC Client V1.0&nbsp; ****<br />***************************<br />et0macaddr value :flag =0 value=00-0f-b5-3f-54-38<br />et1macaddr value :flag =0 value=00-0f-b5-3f-54-39<br />MAC exist at least one<br />system ethernet mac exist and not default....<br />Skip mac client process.....<br />Loading: 0x80001000/3732 Entry at 0x80001000<br />Closing network.<br />et0: link down<br />Starting program at 0x80001000<br />Linux version 2.6.15.3 (root@HOME) (gcc version 3.4.4) #1 Tue Feb 7 23:48:24 EST 2006<br />CPU revision is: 00029007&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />early_nvram_init: WGT634U NVRAM found.<br />Determined physical RAM map:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Primary data cache 4kB, 2-way, linesize 16 bytes.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Synthesized TLB refill handler (19 instructions).<br />Synthesized TLB load handler fastpath (31 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 256 (order: 8, 4096 bytes)&nbsp; &nbsp; &nbsp; &nbsp; <br />Using 100.000 MHz high precision timer.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes) <br />Memory: 29904k/32768k available (1992k kernel code, 2848k reserved, 247k data, 120k init, 0k highmem)<br />Mount-cache hash table entries: 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />NET: Registered protocol family 16&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />PCI: fixing up bridge&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PCI: Fixing up device 0000:01:00.0<br />Squashfs 2.2 (released 2005/07/03) (C) 2002-2005 Phillip Lougher<br />devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />devfs: boot_options: 0x1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.<br />Initializing Cryptographic API&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />io scheduler noop registered&nbsp; <br />io scheduler anticipatory registered<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v0.97 (Nov 30, 2005)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:0f:b5:3f:54:38<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Using buffer write method&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />cfi_cmdset_0001: Erase suspend on write enabled<br />Flash device: 0x800000 at 0x1c000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />bootloader size flag: 3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00060000 : &quot;cfe&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />0x000a0000-0x007e0000 : &quot;linux&quot;<br />0x00160000-0x007e0000 : &quot;rootfs&quot;<br />0x00060000-0x00080000 : &quot;nvram&quot; <br />NET: Registered protocol family 2<br />IP route cache hash table entries: 512 (order: -1, 2048 bytes)<br />TCP established hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)&nbsp; &nbsp; &nbsp; &nbsp;<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 244 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />TCP vegas registered&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />VFS: Mounted root (jffs2 filesystem) readonly.&nbsp; &nbsp; &nbsp; <br />Mounted devfs on /dev&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Freeing unused kernel memory: 120k freed<br />Algorithmics/MIPS FPU Emulator v1.5&nbsp; &nbsp; &nbsp;<br />insmod: /lib/modules/2.6.15.3: No such file or directory<br />insmod: /lib/modules: No such file or directory<br />insmod: diag.ko: no module by that name found<br />Unlocking rootfs ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20984">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						17 Feb 2006, 04:29					</div>
				</div>
				<div class="post-content content">
					<p>.. this doesn&#039;t say anything about the network config... the bootlog is all pre-OpenWrt. Only OpenWrt reads /etc/config/network. Is that the end of your bootlog?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20985">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						17 Feb 2006, 05:42					</div>
				</div>
				<div class="post-content content">
					<p>It may have something to do with the lack of packages in Yasha&#039;s images.</p><p>I created an image (build 3116) a couple weeks back with the default packages in menuconfig.</p><p>Defaults where:<br />base-files - 6 - <br />base-files-brcm-2.6 - 2 - <br />bridge - 1.0.6-1 - <br />busybox - 1.1.0-1 - <br />dnsmasq - 2.26-1 - <br />dropbear - 0.47-1 - <br />iptables - 1.3.4-1 - <br />kernel - 2.6.15.1-brcm-1 - <br />kmod-madwifi - 2.6.15.1+r1416-20060126-brcm-1 - <br />kmod-ppp - 2.6.15.1-brcm-1 - <br />kmod-pppoe - 2.6.15.1-brcm-1 - <br />kmod-switch - 2.6.15.1-brcm-1 - <br />mtd - 3 - <br />ppp - 2.4.3-7 - <br />ppp-mod-pppoe - 2.4.3-7 - <br />uclibc - 0.9.28-6 - <br />wireless-tools - 28.pre13-1 - </p><p>The switch worked great and I was able to change the br0 IP to 192.168.1.4 successfully after editing /etc/config/network.&nbsp; I also disabled dnsmasq (chmod -x /etc/init.d/S50dnsmasq) and was able to get dhcp forwarding from my main router.</p><p>I&#039;m having troubles getting ath0 into Master mode (hostapd failing to set Master as well) so I tried one of Yasha&#039;s images from this morning (build 3181).</p><p>Here are the packages that where included in that image:<br />base-files - 6 - <br />base-files-brcm-2.6 - 2 - <br />bridge - 1.0.6-1 - <br />busybox - 1.1.0-1 - <br />dnsmasq - 2.26-1 - <br />dropbear - 0.47-1 - <br />iptables - 1.3.4-1 - <br />ppp - 2.4.3-7 - <br />ppp-mod-pppoe - 2.4.3-7 - <br />uclibc - 0.9.28-6 - <br />wireless-tools - 28.pre13-1 - <br />zlib - 1.2.3-3 - </p><p>I suspect the lack of kmod-switch is the reason why your br0 is not coming up.&nbsp; I tried an &quot;ifconfig br0 up&quot; command, but only ran into errors.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p20998">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						17 Feb 2006, 12:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flyashi wrote:</cite><blockquote><p>.. this doesn&#039;t say anything about the network config... the bootlog is all pre-OpenWrt. Only OpenWrt reads /etc/config/network. Is that the end of your bootlog?</p></blockquote></div><p>Yes, that&#039;s the end of my bootlog.</p><p>Yes, I suspect that it&#039;s a lack of packages as well.</p><p>No directory /lib/modules exists, as it tried to load modules and fails in the bootlog.</p><p>An ls of /lib</p><p>$ls</p><p>root@C4:/etc# ls /lib<br />ld-uClibc-0.9.28.so&nbsp; libcrypt-0.9.28.so&nbsp; &nbsp;libdl.so.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;libnsl-0.9.28.so&nbsp; &nbsp; &nbsp;libresolv.so.0&nbsp; &nbsp; &nbsp; &nbsp;libuClibc-0.9.28.so<br />ld-uClibc.so.0&nbsp; &nbsp; &nbsp; &nbsp;libcrypt.so.0&nbsp; &nbsp; &nbsp; &nbsp; libm-0.9.28.so&nbsp; &nbsp; &nbsp; &nbsp;libnsl.so.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; librt-0.9.28.so&nbsp; &nbsp; &nbsp; libutil-0.9.28.so<br />libc.so.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; libdl-0.9.28.so&nbsp; &nbsp; &nbsp; libm.so.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; libresolv-0.9.28.so&nbsp; librt.so.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;libutil.so.0</p><p>As a result, no route package exists, so I&#039;m unable to use the ip link command.</p><br /><p>Perhaps this goes back to the S05netconfig script not properly recognizing the wgt634u.&nbsp; Here is that default script from the latest svn:</p><p>#!/bin/sh<br />[ -e /etc/config/network ] &amp;&amp; exit 0</p><p>mkdir -p /etc/config</p><p>(<br />&nbsp; &nbsp; if grep &#039;mtd0: 00060000&#039; /proc/mtd 2&gt;&amp;- &gt;&amp;-; then<br />&nbsp; &nbsp; &nbsp; &nbsp; # WGT634u<br />&nbsp; &nbsp; &nbsp; &nbsp; echo boardtype=wgt634u<br />&nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; strings /dev/mtdblock/3<br />&nbsp; &nbsp; fi<br />) | awk &#039;<br />function p(name) {<br />&nbsp; &nbsp; if (c[name] != &quot;&quot;) print name &quot;=\&quot;&quot; c[name] &quot;\&quot;&quot;<br />}</p><p>BEGIN {<br />&nbsp; &nbsp; FS=&quot;=&quot;<br />&nbsp; &nbsp; c[&quot;lan_ifname&quot;]=&quot;br0&quot;<br />&nbsp; &nbsp; c[&quot;lan_ifnames&quot;]=&quot;vlan0 eth1&quot;<br />&nbsp; &nbsp; c[&quot;wan_proto&quot;]=&quot;none&quot;<br />&nbsp; &nbsp; c[&quot;wan_ifname&quot;]=&quot;vlan1&quot;<br />&nbsp; &nbsp; c[&quot;vlan0ports&quot;]=&quot;1 2 3 4 5*&quot;<br />&nbsp; &nbsp; c[&quot;vlan1ports&quot;]=&quot;0 5&quot;<br />}</p><p>($1 == &quot;boardnum&quot;) || ($1 == &quot;boardtype&quot;) || ($1 == &quot;boardflags&quot;) {<br />&nbsp; &nbsp; nvram[$1] = $2<br />}</p><p>END {<br />&nbsp; &nbsp; # v1 hardware<br />&nbsp; &nbsp; if (nvram[&quot;boardtype&quot;] == &quot;bcm94710dev&quot;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; # Linksys WRT54G v1.x<br />&nbsp; &nbsp; &nbsp; &nbsp; if (nvram[&quot;boardnum&quot;] == &quot;42&quot;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan0ports&quot;]=&quot;&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan1ports&quot;]=&quot;&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c[&quot;lan_ifnames&quot;]=&quot;vlan2 eth2&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; }</p><p>&nbsp; &nbsp; &nbsp; &nbsp; # Asus WL-500g<br />&nbsp; &nbsp; &nbsp; &nbsp; if (nvram[&quot;boardnum&quot;] == &quot;asusX&quot;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c[&quot;lan_ifnames&quot;]=&quot;eth0 eth1 eth2&quot; # FIXME<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # wan_ifname=eth1<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (nvram[&quot;boardtype&quot;] == &quot;wgt634u&quot;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan0ports&quot;] = &quot;0 1 2 3 5*&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan1ports&quot;] = &quot;4 5&quot;<br />&nbsp; &nbsp; }<br />&nbsp; &nbsp; if (nvram[&quot;boardtype&quot;] == &quot;0x0467&quot;) {<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan0ports&quot;] = &quot;0 1 2 3 5*&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;vlan1ports&quot;] = &quot;4 5&quot;<br />&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; # WAP54G<br />&nbsp; &nbsp; if ((nvram[&quot;boardnum&quot;] == &quot;2&quot;) || \<br />&nbsp; &nbsp; &nbsp; &nbsp; (nvram[&quot;boardnum&quot;] == &quot;1024&quot;)) {<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;lan_ifnames&quot;]=&quot;eth0 eth1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; c[&quot;wan_ifname&quot;]=&quot;&quot;<br />&nbsp; &nbsp; }</p><p>&nbsp; &nbsp; print &quot;#### VLAN configuration &quot;<br />&nbsp; &nbsp; print &quot;vlan0hwname=et0&quot;<br />&nbsp; &nbsp; print &quot;vlan1hwname=et0&quot;<br />&nbsp; &nbsp; p(&quot;vlan0ports&quot;)<br />&nbsp; &nbsp; p(&quot;vlan1ports&quot;)<br />&nbsp; &nbsp; print &quot;&quot;<br />&nbsp; &nbsp; print &quot;&quot;<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; print &quot;#### LAN configuration&quot;<br />&nbsp; &nbsp; print &quot;lan_proto=\&quot;static\&quot;&quot;<br />&nbsp; &nbsp; p(&quot;lan_ifname&quot;)<br />&nbsp; &nbsp; p(&quot;lan_ifnames&quot;)<br />&nbsp; &nbsp; print &quot;lan_ipaddr=\&quot;192.168.1.1\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# lan_dns=\&quot;192.168.1.1\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# lan_gateway=\&quot;192.168.1.1\&quot;&quot;</p><p>&nbsp; &nbsp; print &quot;&quot;<br />&nbsp; &nbsp; print &quot;&quot;</p><p>&nbsp; &nbsp; print &quot;#### WAN configuration&quot;<br />&nbsp; &nbsp; print &quot;# wan_proto: WAN protocol, available protocols:&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp;none: disable&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp;dhcp: DHCP&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp;static: Static IP&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp;pppoe: PPP over Ethernet&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp;pptp: Point-to-Point tunneling Protocol&quot;<br />&nbsp; &nbsp; print &quot;#&nbsp; &nbsp; &nbsp;for pppoe and pptp you need to use wan_ifname=\&quot;ppp0\&quot;&quot;<br />&nbsp; &nbsp; print &quot;&quot;<br />&nbsp; &nbsp; print &quot;wan_proto=dhcp&quot;<br />&nbsp; &nbsp; p(&quot;wan_ifname&quot;)<br />&nbsp; &nbsp; print &quot;wan_device=\&quot;&quot; c[&quot;wan_ifname&quot;] &quot;\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# wan_ipaddr=\&quot;192.168.0.2\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# wan_netmask=\&quot;255.255.255.0\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# wan_gateway=\&quot;192.168.0.1\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# wan_dns=\&quot;192.168.0.1\&quot;&quot;<br />&nbsp; &nbsp; print &quot;&quot;<br />&nbsp; &nbsp; print &quot;## PPP over Ethernet and PPTP&quot;<br />&nbsp; &nbsp; print &quot;# wan_ifname=\&quot;ppp0\&quot;&quot;<br />&nbsp; &nbsp; print &quot;# pptp_server_ip=\&quot;192.168.0.1\&quot;&quot;<br />}<br />&#039; &gt; /etc/config/network</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 17 Feb 2006, 12:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21046">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						18 Feb 2006, 04:07					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the feedback! I&#039;ll add those images to the default package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21047">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						18 Feb 2006, 04:41					</div>
				</div>
				<div class="post-content content">
					<p>Hmm... kmod-switch and all the other packages are selected in make menuconfig... selected with *, so they&#039;re included in the default build.... Anyway, turns out my cron script wasn&#039;t really working. So it&#039;s now running in an infinite loop with a 1-hour sleep; not great, but it works. Latest kamikaze is 3250. If you could try it and let me know if the packages show up, that&#039;d be great. My wgt no longer works so I can&#039;t test it myself.</p><p>Thanks again for the feedback,</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21055">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						18 Feb 2006, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the update, looks like the wireless modules are included in default image now.</p><p>However, there are still no scripts to bring up networking in /etc/init.d , which makes<br />the setting of any networking variables in /etc/config/network relatively useless.</p><p>Even though you can&#039;t debug because your router is hosed, can&#039;t you at least mount the jffs2 image to loop and take a look at the bootstrap scripts?</p><p>Thanks for your support in providing these images btw.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21059">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						18 Feb 2006, 13:36					</div>
				</div>
				<div class="post-content content">
					<p>Ok Ydef,<br />cause you&#039;re doing such a great job,<br />I am also willing to help as much as I can.<br />Got my router after some, um well, fecked up reinstalls running now &#039;smoothly&#039; with the netgear wgt634u_1_4_1_10.<br />So, now first thing I&#039;m going to do is to try the &quot;wgt634u-upgrade.cfg&quot; with your latest image.<br />I&#039;m going report the outcome of that.<br />Just a moment.</p><p>DeusExMachina</p><p>PS: If you got something to try, just tell me, I not got so much time at the moment, but I&#039;ll do it asap.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21060">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						18 Feb 2006, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Ok,<br />got some results:<br />1. The &#039;Netgear Webfront Flash&#039;<br />Yep, it worked very good,<br />you just get .cfg in as &quot;Save Config&quot;, the system does reboot, and you got the menu point &quot;Upgrade To OpenWRT&quot;.<br />Important! Yes, it looks like the point &quot;Router Upgrade&quot;, which is directly above and is for upgrading normal Netgear flash files,<br />but it is ANOTHER thing, so don&#039;t mess these two things up. On the Url, you can see wheter you&#039;re on the right thing!<br />-&gt; Flashed it with the new &quot;OpenWrt Kamikaze 3250 compiled Sat Feb 18 07:25:55 EST 2006.&quot;, squashfs.<br />System does reboot,<br />try to connect - nothing.<br />Ok,</p><p>2. Kamikaze Build:<br />Hook up to serial Console, got these things printed out:</p><br /><br /><p>CFE version 1.0.34 for BCM95365R (32bit,SP,LE)<br />Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)<br />Copyright (C) 2000,2001,2002 Broadcom Corporation.</p><p>Add MAC client version(DNI).<br />Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x81BB1280 - 0x82000000 (4517248)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB1280 - 0x81BB3E90 (11280)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB3E90 - 0x81BB45D0 (1856)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB45D0 - 0x81FB45D0 (4194304)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81FB45D0 - 0x81FB65D0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x81FB65E0 - 0x81FFFFB0 (301520)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x01B70000 - 0x01BB0000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:E23B65E0 - D:01BB0280</p><p>configure vlans<br />*****************************************************************<br />*********************** VLAN Driver initial&nbsp; ********************<br />*****************************************************************<br />Process LAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add LAN port</p><p>Process WAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add WAN port<br />SUCCESS: enable ports&nbsp; success<br />configure vlans...done<br />Device eth0:&nbsp; hwaddr 00-0F-B5-0D-B4-85, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)<br />***************************<br />****&nbsp; MAC Client V1.0&nbsp; ****<br />***************************<br />et0macaddr value :flag =0 value=00-0f-b5-0d-b4-85<br />et1macaddr value :flag =0 value=00-0f-b5-0d-b4-86<br />MAC exist at least one<br />system ethernet mac exist and not default....<br />Skip mac client process.....<br />Loading: 0x80001000/3732 Entry at 0x80001000<br />Closing network.<br />et0: link down<br />Starting program at 0x80001000<br />Linux version 2.6.15.3 (root@HOME) (gcc version 3.4.4) #1 Tue Feb 7 23:48:24 ES6<br />CPU revision is: 00029007<br />early_nvram_init: WGT634U NVRAM found.<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/pr0<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 4kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (19 instructions).<br />Synthesized TLB load handler fastpath (31 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 256 (order: 8, 4096 bytes)<br />Using 100.000 MHz high precision timer.<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 29904k/32768k available (1992k kernel code, 2848k reserved, 247k data, )<br />Mount-cache hash table entries: 512<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />NET: Registered protocol family 16<br />PCI: fixing up bridge<br />PCI: Fixing up device 0000:01:00.0<br />Squashfs 2.2 (released 2005/07/03) (C) 2002-2005 Phillip Lougher<br />devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.<br />Initializing Cryptographic API<br />io scheduler noop registered<br />io scheduler anticipatory registered<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v0.97 (Nov 30, 2005)<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:0f:b5:0d:b4:85<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Flash device: 0x800000 at 0x1c000000<br />bootloader size flag: 3<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00060000 : &quot;cfe&quot;<br />0x000a0000-0x007e0000 : &quot;linux&quot;<br />0x00148000-0x00241000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-y<br />0x00060000-0x00080000 : &quot;nvram&quot;<br />0x00260000-0x007e0000 : &quot;OpenWrt&quot;<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 512 (order: -1, 2048 bytes)<br />TCP established hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 244 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 120k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />insmod: diag.ko: no module by that name found</p><p>-&gt;&gt;&gt;&gt; HANGING HERE ONE TIME! (why?!)</p><p>/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002eeed8: 0x3032 id<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002eeedc: 0x3032 id<br />umount: Couldn&#039;t umount /rom/dev: No such file or directory<br />init started:&nbsp; BusyBox v1.1.0 (2006.02.01-03:48+0000) multi-call binary</p><p>Please press Enter to activate this console. b44: eth0: Link is up at 100 Mbps,.<br />b44: eth0: Flow control is off for TX and off for RX.<br />wlan: 0.8.4.2 (svn 1451)<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.16.16 (AR5210, AR5211, AR5212, RF5111, RF5112, RF2413, RF5413)<br />ath_rate_sample: 1.2 (svn 1451)<br />ath_pci: 0.9.4.5 (svn 1451)<br />PCI: Enabling device 0000:01:01.0 (0000 -&gt; 0002)<br />PCI: Fixing up device 0000:01:01.0<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 3s<br />wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />wifi0: mac 5.9 phy 4.3 radio 4.6<br />wifi0: Use hw queue 1 for WME_AC_BE traffic<br />wifi0: Use hw queue 0 for WME_AC_BK traffic<br />wifi0: Use hw queue 2 for WME_AC_VI traffic<br />wifi0: Use hw queue 3 for WME_AC_VO traffic<br />wifi0: Use hw queue 8 for CAB traffic<br />wifi0: Use hw queue 9 for beacons<br />couldn&#039;t load module &#039;wlan_scan_ap&#039; (-89)<br />unable to load wlan_scan_ap<br />wifi0: Atheros 5212: mem=0x40000000, irq=2<br />wlan: mac acl policy registered<br />device eth0 entered promiscuous mode</p><p>As you can see on the mark, on one point, it did &quot;Freeze&quot; one time I rebootet the system.<br />Dunno why!<br />Access from outside does NOT work, wheter on eth0 or on the vlan0, on 192.168.1.1, 192.168.2.1 or 192.168.2.21 (use this address since long, cause the wgt isn&#039;t my mainrouter, but only my &quot;experimental station&quot;, using a nice zyxel hw 667 here....)<br />Access from inside the serial console does NOT work, you can press enter or what ya want, NOTHING works! Even if you press fast on the moment it says &quot;press enter&quot;...<br />Access from wlan hasn&#039;t been tested yet, but I think it won&#039;t work.<br />If it is necessary to check this, just say it and I try!</p><p>DeusExMachina</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21061">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						18 Feb 2006, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>DeusExMachina:&nbsp; I don&#039;t have any problem getting the serial console to work after reflashing with image.&nbsp; I don&#039;t use the web interface, i do it by booting into the CFE and grabbing the image off an independent tftp server i have setup.&nbsp; </p><p>CFE commandline arguments can be found in the openwrt wgt634u documentation:</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/WGT634U">http://wiki.openwrt.org/OpenWrtDocs/Har … ar/WGT634U</a></p><p>In order to get into CFE, just reboot from serial console and hold down control-c until it throws you into CFE prompt.</p><p>To bypass setting up your own tftp server you might be able to tftp image into the router like you can with wrt54g/gs with flash.sh&nbsp; since boot_wait variable is set on nvram although I&nbsp; haven&#039;t confirmed that this method works.</p><p>Although it&#039;s strange that your serial console works before and not after flashing image.&nbsp; Either the upgrade method you&#039;re using through web interface is faulty somewhere, or your serial connection somehow hosed itself.&nbsp; The latter is easy to fix, so if you&#039;re serial connection thoroughput isn&#039;t the problem, then try the CFE tftp method of upgrading image as I just described.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21062">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">DeusExMachina</div>
					<div class="post-datetime">
						18 Feb 2006, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, I normally do upgrade via tftpd, cause thats the most secure method,<br />I just only want to try the .cfg Frontend Method,<br />and, as you see, it seems to not work the way it should.<br />I&#039;m going to do an &quot;correct and clean&quot; reflash of the image now,<br />and pass the results on.</p><p>Serial Console things aren&#039;t a problem for me, I know how to use it, but I think the direct serial console access might have been busted because of this flashing method.</p><p>*doin reinstall*</p><p>PS: Yeah, on Wlan, there was none Access Point or whatever, so the WGT didn&#039;t had this thingy on there as well, so really NO connection. ^^</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21063">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Maverick</div>
					<div class="post-datetime">
						18 Feb 2006, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I flashed my WGT634U this moring with kamikaze 3250. I used the CFE to do that. However, I got the same results as DeusExMachina. Trying the new image now. I will let you know about the results afterwards.</p><p>Yasha: Great job and thanks for providing the images!</p><p>If there is any testing to do, please let me know!</p><p>Maverick</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21067">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Maverick</div>
					<div class="post-datetime">
						18 Feb 2006, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>As promised, my boot log. &quot;ifconfig&quot; shows that there is a device &quot;br0&quot; with an address &quot;192.168.1.1&quot;. However, I am not able to access the box through a network connection. I am getting errors during the boot process as you can see:</p><p>CFE version 1.0.34 for BCM95365R (32bit,SP,LE)<br />Build Date: Tue Feb 24 03:21:41 CST 2004 (root@jackylinux)<br />Copyright (C) 2000,2001,2002 Broadcom Corporation.</p><p>Add MAC client version(DNI).<br />Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x81BB1280 - 0x82000000 (4517248)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB1280 - 0x81BB3E90 (11280)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB3E90 - 0x81BB45D0 (1856)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81BB45D0 - 0x81FB45D0 (4194304)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x81FB45D0 - 0x81FB65D0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x81FB65E0 - 0x81FFFFB0 (301520)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x01B70000 - 0x01BB0000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:E23B65E0 - D:01BB0280</p><p>configure vlans<br />*****************************************************************<br />*********************** VLAN Driver initial&nbsp; ********************<br />*****************************************************************<br />Process LAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add LAN port</p><p>Process WAN port(2-5) vlan Architecture...<br />SUCCESS: trying to create VLAN 0 for switch<br />SUCCESS: trying to add WAN port<br />SUCCESS: enable ports&nbsp; success<br />configure vlans...done<br />Device eth0:&nbsp; hwaddr 00-0F-B5-3F-34-34, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Loader:elf Filesys:raw Dev:flash0.os File: Options:(null)<br />***************************<br />****&nbsp; MAC Client V1.0&nbsp; ****<br />***************************<br />et0macaddr value :flag =0 value=00-0f-b5-3f-34-34<br />et1macaddr value :flag =0 value=00-0f-b5-3f-34-35<br />MAC exist at least one<br />system ethernet mac exist and not default....<br />Skip mac client process.....<br />Loading: 0x80001000/3732 Entry at 0x80001000<br />Closing network.<br />et0: link down<br />Starting program at 0x80001000<br />Linux version 2.6.15.3 (root@HOME) (gcc version 3.4.4) #1 Tue Feb 7 23:48:24 EST 2006<br />CPU revision is: 00029007<br />early_nvram_init: WGT634U NVRAM found.<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 4kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (19 instructions).<br />Synthesized TLB load handler fastpath (31 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 256 (order: 8, 4096 bytes)<br />Using 100.000 MHz high precision timer.<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 29904k/32768k available (1992k kernel code, 2848k reserved, 247k data, 120k init, 0k highmem)<br />Mount-cache hash table entries: 512<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />NET: Registered protocol family 16<br />PCI: fixing up bridge<br />PCI: Fixing up device 0000:01:00.0<br />Squashfs 2.2 (released 2005/07/03) (C) 2002-2005 Phillip Lougher<br />devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.<br />Initializing Cryptographic API<br />io scheduler noop registered<br />io scheduler anticipatory registered<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v0.97 (Nov 30, 2005)<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:0f:b5:3f:34:34<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Flash device: 0x800000 at 0x1c000000<br />bootloader size flag: 3<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00060000 : &quot;cfe&quot;<br />0x000a0000-0x007e0000 : &quot;linux&quot;<br />0x00148000-0x00241000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x00060000-0x00080000 : &quot;nvram&quot;<br />0x00260000-0x007e0000 : &quot;OpenWrt&quot;<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 512 (order: -1, 2048 bytes)<br />TCP established hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 244 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 120k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />insmod: diag.ko: no module by that name found<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />Partition marked as clean<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes<br />empty_blocks 0, bad_blocks 0, c-&gt;nr_blocks 44<br />mount: Mounting /dev/mtdblock/4 on /jffs failed: Input/output error<br />pivot_root: pivot_root: No such file or directory<br />mount: Mounting none on /proc failed: Device or resource busy<br />mount: Mounting none on /dev failed: Device or resource busy<br />umount: Couldn&#039;t umount /rom/proc: No such file or directory<br />umount: Couldn&#039;t umount /rom/dev: No such file or directory<br />Creating jffs2 partition... Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes<br />empty_blocks 0, bad_blocks 0, c-&gt;nr_blocks 44<br />mount: Mounting /dev/mtdblock/4 on /jffs failed: Input/output error<br />done<br />creating directories... done<br />setting up symlinks... done</p><p>init started:&nbsp; BusyBox v1.1.0 (2006.02.01-03:48+0000) multi-call binary</p><p>Please press Enter to activate this console. b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />wlan: 0.8.4.2 (svn 1451)<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.16.16 (AR5210, AR5211, AR5212, RF5111, RF5112, RF2413, RF5413)<br />ath_rate_sample: 1.2 (svn 1451)<br />ath_pci: 0.9.4.5 (svn 1451)<br />PCI: Enabling device 0000:01:01.0 (0000 -&gt; 0002)<br />PCI: Fixing up device 0000:01:01.0<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />wifi0: mac 5.9 phy 4.3 radio 4.6<br />wifi0: Use hw queue 1 for WME_AC_BE traffic<br />wifi0: Use hw queue 0 for WME_AC_BK traffic<br />wifi0: Use hw queue 2 for WME_AC_VI traffic<br />wifi0: Use hw queue 3 for WME_AC_VO traffic<br />wifi0: Use hw queue 8 for CAB traffic<br />wifi0: Use hw queue 9 for beacons<br />couldn&#039;t load module &#039;wlan_scan_ap&#039; (-89)<br />unable to load wlan_scan_ap<br />wifi0: Atheros 5212: mem=0x40000000, irq=2<br />wlan: mac acl policy registered<br />device eth0 entered promiscuous mode<br />device ath0 entered promiscuous mode<br />br0: port 1(ath0) entering learning state<br />br0: topology change detected, propagating<br />br0: port 1(ath0) entering forwarding state</p><br /><br /><p>BusyBox v1.1.0 (2006.02.01-03:48+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r3250) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/# ifconfig<br />ath0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:DE:AD:BE:EF:17&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING ALLMULTI MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:1180 (1.1 KiB)</p><p>br0&nbsp; &nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:DE:AD:BE:EF:17&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:3 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:1770 (1.7 KiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:0F:B5:3F:34:34&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING PROMISC MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:7 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:739 (739.0 B)&nbsp; TX bytes:0 (0.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>wifi0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:0F:B5:3F:40:F8&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:43 errors:0 dropped:0 overruns:0 frame:1866<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:20 errors:2 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:199 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2990 (2.9 KiB)&nbsp; TX bytes:2381 (2.3 KiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:2 Memory:c0100000-c0110000</p><p>Cheers,</p><p>Maverick</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21070">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						18 Feb 2006, 19:17					</div>
				</div>
				<div class="post-content content">
					<p>Yep ... essentially identical to my bootstrap, which goes back to my earlier message that the lack of any scripts in /etc/init.d to bring up networking makes customizing the nvram variables in the /etc/config/network file relatively useless.</p><br /><p>Also Yashi:</p><p>I assume you have a wrt54g/gs unit ... have you veried that networking works on the 2.6 images you provide?</p><p>When attempting to flash my gs unit with your 2.6 image, networking doesn&#039;t seem to come up either ... and I don&#039;t have a serial connected to my gs unit.</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 18 Feb 2006, 19:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21071">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Maverick</div>
					<div class="post-datetime">
						18 Feb 2006, 19:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Ydef wrote:</cite><blockquote><p>Yep ... essentially identical to my bootstrap</p></blockquote></div><p>Essentially identical? Any ideas why I get theses errors? Seems like the flashing or erasing of flash0.os doesn&#039;t work properly. Strange...</p><p>mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found<br />mount: Mounting /dev/mtdblock/4 on /jffs failed: Input/output error</p><p>Any help appreciated!</p><p>Cheers,</p><p>Maverick</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21076">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						18 Feb 2006, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>Ah yeah, I don&#039;t have the problem with my mtdblock/4 partition being hosed as it seems you do.</p><p>Are you running squash or jffs2?</p><p>My guess is you used a squash image.</p><p>Either way, reinstall with jffs2, even if you&#039;re going to use squash again after that.&nbsp; By install jffs2 install will do a complete rewrite of the flash partitions, which is what you need at the moment with you mtd/4 hosed like that.</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 18 Feb 2006, 21:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21077">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Ydef</div>
					<div class="post-datetime">
						18 Feb 2006, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>Also, Yashi:&nbsp; Doesn&#039;t seem like you have the usb drivers compiled in ... if you did then hardware would detect attached usb drives during bootstrap.</p><p>The usb 2.0 modules don&#039;t seem to be available on your site via ipkg either, and has disappeared from the TODO.</p><p>I&#039;m getting this error at the end of my bootstrap log:</p><p>Freeing unused kernel memory: 120k freed<br />Algorithmics/MIPS FPU Emulator v1.5&nbsp; &nbsp; &nbsp;<br />insmod: diag.ko: no module by that name found<br />/sbin/mount_root: /sbin/mount_root: 36: mtd: not found</p><br /><p>The mtd utility and the diag.o module are missing.</p><br /><p>Also the kernel attempts to insmod these three additional modules:</p><p>Jan&nbsp; 1 00:00:04 (none) user.info : insmod: switch-core.ko: no module by that name found<br />Jan&nbsp; 1 00:00:04 (none) user.info : insmod: switch-robo.ko: no module by that name found<br />Jan&nbsp; 1 00:00:04 (none) user.info : insmod: switch-adm.ko: no module by that name found</p>											<p class="post-edited">(Last edited by <strong>Ydef</strong> on 18 Feb 2006, 23:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21087">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						18 Feb 2006, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>Hmm..</p><p>Sorry to hear that my images aren&#039;t working. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I WAS running a WGT634U, but I fried it. I&#039;m gonna get another few soon, then I can do some testing.</p><p>The USB drivers aren&#039;t compiled in because not all routers have USB, and I didn&#039;t want to cloud the base image. I can compile them in if you guys want. They should be available via ipkg; if &quot;ipkg update&quot; doesn&#039;t work, edit your ipkg.conf to point to <a href="http://flyashi.dyndns.org:81/packages">http://flyashi.dyndns.org:81/packages</a> . It should be there by default in my images; if not, either edit it manually, or try the full URL: ipkg install <a href="http://flyashi.dyndns.org:81/packages/kmod-usb-core_2.6.15.3-brcm-1_mipsel.ipk">http://flyashi.dyndns.org:81/packages/k … mipsel.ipk</a> for example.</p><p>The image doesn&#039;t even boot for some people? Now THAT&#039;S not very nice... booted for me, even with a few errors (.ko&#039;s not found, etc).</p><p>I recall default networking wasn&#039;t working. Changes I made included adding a line to /etc/firewall.user for basic LAN&lt;--&gt;WAN access; wlandev create for the wireless; and I had a MAC-address changing script. Every upgrade I&#039;d have to do this; if I can get my exact commands, I&#039;ll post them.</p><p>Again, sorry to hear of your troubles. I&#039;ll see if I can&#039;t find my changes to the default image; however, it *should* be working as of 3200 or so...</p><p> - Yasha</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=4457&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=4457&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>