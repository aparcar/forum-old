<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> There is no tag for 15.05.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p315275">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>How can I pull the exact source for it? What is the svn id?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315278">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						17 Mar 2016, 11:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pilot6 wrote:</cite><blockquote><p>How can I pull the exact source for it? What is the svn id?</p></blockquote></div><p>it uses a 15.05 tree, pull it and reset to the following commit (used to build currently uploaded files)<br /><strong>87e9837 openssl: update to 1.0.2f (fixes CVE-2016-0701, CVE-2015-3197)</strong></p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 17 Mar 2016, 11:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315281">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. That what I needed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315287">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>There is another problem.</p><p>&quot;opkg update&quot; still pulls from 15.05, not from 15.05.1 repository.<br />The version is still shown 15.05. How can I change it?</p><p>Where is the version and the opkg URL stored?</p>											<p class="post-edited">(Last edited by <strong>Pilot6</strong> on 17 Mar 2016, 12:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315290">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>When I add URL to opkg.conf it pulls both.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315291">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						17 Mar 2016, 12:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pilot6 wrote:</cite><blockquote><p>There is another problem.</p><p>&quot;opkg update&quot; still pulls from 15.05, not from 15.05.1 repository.<br />The version is still shown 15.05. How can I change it?</p><p>Where is the version and the opkg URL stored?</p></blockquote></div><p>in your current .config <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />create new default config and you&#039;ll see changes</p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 17 Mar 2016, 12:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315294">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Mar 2016, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>In 15.05.1 the opkg config should be like this:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/opkg/distfeeds.conf
src/gz chaos_calmer_base http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/base
src/gz chaos_calmer_telephony http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/telephony
src/gz chaos_calmer_packages http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/packages
src/gz chaos_calmer_routing http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/routing
src/gz chaos_calmer_luci http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/luci
src/gz chaos_calmer_management http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/management

root@OpenWrt:~# cat /etc/opkg.conf
dest root /
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay
option check_signature 1</code></pre></div><p>But the 15.05 sources still point to 15.05 packages, so you need to manually set the correct option for your build. Otherwise the built firmware still points to the wrong place.</p><p>If you want to build your own firmware that pulls opkg packages from the 15.05.1, you need to set this in your .config file:<br /></p><div class="codebox"><pre><code># opkg download directory: 15.05.1 release packages                                            
CONFIG_IMAGEOPT=y                                                                              
CONFIG_VERSIONOPT=y                                                                            
CONFIG_VERSION_NUMBER=&quot;15.05.1&quot;                                                                
CONFIG_VERSION_REPO=&quot;http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages&quot;</code></pre></div><p>(Of course, adjust the platform &quot;ar71xx/generic&quot; according to your device...)</p><p>Alternatively you can set the same option in &quot;make menuconfig&quot;. <br />Image configuration--&gt; Version configuration options <br /> --&gt; Release version number<br />--&gt; Release repository</p><p>Actually, if you are building your own firmware, you should build from the currect tip of the 15.05 branch, currently r49007. Then you get also all the fixes since January (when 15.05.1 was built).</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Mar 2016, 12:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315295">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>I do not see anything regarding the version in .config</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315298">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						17 Mar 2016, 12:49					</div>
				</div>
				<div class="post-content content">
					<p>oh. sorry, yeah, nothing changed in the build scripts about version<br />so you need make a few changes in your .config as hnyman said</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315299">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Mar 2016, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>One more alternative for you:<br />copy the 15.05.1 belease build config as your .config and start from that.<br />E.g. for ar17xx/generic:&nbsp; <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/config.diff">https://downloads.openwrt.org/chaos_cal … onfig.diff</a><br />That is the output of ./scripts/diffconfig.sh that can be used as a &quot;seed .config&quot; which gets expanded to a full .config by &quot;make defconfig&quot; or &quot;make menuconfig&quot;</p><p>But the config used for the release builds also the Imagebuilder, SDK and all possible packages, so you need to cut those options away.</p><p>This would be the base config for normal use (base image + Luci + CC15.05.1 version options):<br /></p><div class="codebox"><pre><code>CONFIG_TARGET_ar71xx=y
CONFIG_TARGET_ar71xx_generic=y
CONFIG_PACKAGE_luci=y
CONFIG_IMAGEOPT=y
CONFIG_VERSIONOPT=y
CONFIG_VERSION_DIST=&quot;OpenWrt&quot;
CONFIG_VERSION_FILENAMES=y
CONFIG_VERSION_HWREV=&quot;&quot;
CONFIG_VERSION_MANUFACTURER=&quot;&quot;
CONFIG_VERSION_NICK=&quot;Chaos Calmer&quot;
CONFIG_VERSION_NUMBER=&quot;15.05.1&quot;
CONFIG_VERSION_PRODUCT=&quot;&quot;
CONFIG_VERSION_REPO=&quot;http://downloads.openwrt.org/%n/%v/%S/packages&quot;</code></pre></div><br /><p>EDIT:<br />I practiced all the variations yesterday when I updated my own CC15.05 build for 15.05.1 ;-)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Mar 2016, 12:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315300">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 13:01					</div>
				</div>
				<div class="post-content content">
					<p>There is no Version configuration options in menuconfig. <br />But that&#039;s not a problem.</p><p>I know that I can build from HEAD of the repository, but the problem is that it has a different kernel and kernel packages will not install from Openwrt repos.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315301">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Mar 2016, 13:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pilot6 wrote:</cite><blockquote><p>There is no Version configuration options in menuconfig.</p></blockquote></div><p>There are version control options, but you have to first toggle &quot;Image configuration&quot; active, then you can enter its submenu.<br />Then same thing for &quot;Version configuration options&quot;</p><div class="codebox"><pre><code> .config - OpenWrt Configuration
 &gt; Image configuration &gt; Version configuration options ──────────────────────────────────────
  ┌──────────────────────────── Version configuration options ────────────────────────────┐
  │  Arrow keys navigate the menu.  &lt;Enter&gt; selects submenus ---&gt; (or empty submenus      │  
  │  ----).  Highlighted letters are hotkeys.  Pressing &lt;Y&gt; includes, &lt;N&gt; excludes, &lt;M&gt;   │  
  │  modularizes features.  Press &lt;Esc&gt;&lt;Esc&gt; to exit, &lt;?&gt; for Help, &lt;/&gt; for Search.       │  
  │  Legend: [*] built-in  [ ] excluded  &lt;M&gt; module  &lt; &gt; module capable                   │  
  │ ┌───────────────────────────────────────────────────────────────────────────────────┐ │  
  │ │      --- Version configuration options                                            │ │  
  │ │      (OpenWrt) Release distribution                                               │ │  
  │ │      (Chaos Calmer) Release version nickname                                      │ │  
  │ │      (15.05.1) Release version number                                             │ │  
  │ │      (http://downloads.openwrt.org/%n/%v/%S/packages) Release repository          │ │  
  │ │      ()    Manufacturer name                                                      │ │  
  │ │      ()    Product name                                                           │ │  
  │ │      ()    Hardware revision                                                      │ │  
  │ │      [*]   Version number in filenames                                            │ │  
  │ │                                                                                   │ │  </code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Mar 2016, 13:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315304">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>Oh, I see.</p><p>Do you know where in the source is the default version number? Is it include/version.mk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315306">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 13:15					</div>
				</div>
				<div class="post-content content">
					<p>hnyman,</p><p>Thanks so much!</p><p>I am building Openwrt with some of my patches. It is supposed to be used with the standard repos.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315309">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Mar 2016, 13:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pilot6 wrote:</cite><blockquote><p>Do you know where in the source is the default version number? Is it include/version.mk?</p></blockquote></div><p>Version info is in several places, in a rather distributed way.</p><p>Mainly in these two:<br /><a href="https://dev.openwrt.org/browser/branches/chaos_calmer/include/version.mk">https://dev.openwrt.org/browser/branche … version.mk</a><br /><a href="https://dev.openwrt.org/browser/branches/chaos_calmer/package/base-files/image-config.in">https://dev.openwrt.org/browser/branche … -config.in</a></p><p>Version name is mentioned also in these two:<br /><a href="https://dev.openwrt.org/browser/branches/chaos_calmer/package/base-files/files/etc/banner">https://dev.openwrt.org/browser/branche … etc/banner</a><br /><a href="https://dev.openwrt.org/browser/branches/chaos_calmer/include/toplevel.mk">https://dev.openwrt.org/browser/branche … oplevel.mk</a></p><p>And the svn revision is determined during build by using the latest commit.<br /><a href="https://dev.openwrt.org/browser/branches/chaos_calmer/scripts/getver.sh">https://dev.openwrt.org/browser/branche … /getver.sh</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Mar 2016, 13:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315311">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>I fixed it in the source. It was indeed</p><p>include/version.mk</p><p>That was enough to fix the repo issue.</p><p>Now I can have my fork OK.</p>											<p class="post-edited">(Last edited by <strong>Pilot6</strong> on 17 Mar 2016, 13:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315312">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Pilot6</div>
					<div class="post-datetime">
						17 Mar 2016, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>There is a default 15.05, that can be overridden by .config</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315834">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						20 Mar 2016, 17:25					</div>
				</div>
				<div class="post-content content">
					<p>Chaos Calmer sources were patched today with r49053 to have 15.05.1 as the default version:<br /><a href="http://git.openwrt.org/?p=15.05/openwrt.git;a=commitdiff;h=f1f9a388705c5cb25a779246415471ffd58b1fb6;hp=0fd48fd7dab066db8a46e51775579c9ef507ca25">http://git.openwrt.org/?p=15.05/openwrt … 9ef507ca25</a> </p><p>If CC sources are now cloned or updated with git pull, the version number should default to 15.05.1 and opkg should download packages from .../15.05.1/... download repo.</p><p>Manual changes are not needed any more.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 20 Mar 2016, 17:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>