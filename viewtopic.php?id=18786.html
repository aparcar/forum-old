<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> FTDI SIO driver</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p81179">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">crow</div>
					<div class="post-datetime">
						5 Feb 2009, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I am trying to get USB2Serial Converter (from Digitus (should be ftdi)) on ASUS WL-500gP v1 with Kamikaze 8.09 RC2 working.<br />I installed usb stuff, and mount my usb stick to /opt and added it to /etc/opkg.conf. USB stick is recognized and working.<br />I installed driver, they are in repository (for 2.4 kernel)<br />opkg update<br />opkg&nbsp; install kmod-usb-serial-ftdi<br />wich will install kmod-usb-serial to.</p><p>But it seems USB2Serial Converter isnt recognized correct:<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:~# cat /proc/bus/usb/devices<br />T:&nbsp; Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=&nbsp; 1 Spd=480 MxCh= 4<br />B:&nbsp; Alloc=&nbsp; 0/800 us ( 0%), #Int=&nbsp; 0, #Iso=&nbsp; 0<br />D:&nbsp; Ver= 2.00 Cls=09(hub&nbsp; ) Sub=00 Prot=01 MxPS= 8 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=0000 ProdID=0000 Rev= 2.04<br />S:&nbsp; Manufacturer=Linux 2.4.35.4 ehci_hcd<br />S:&nbsp; Product=PCI device 1106:3104<br />S:&nbsp; SerialNumber=01:03.2<br />C:* #Ifs= 1 Cfg#= 1 Atr=40 MxPwr=&nbsp; 0mA<br />I:&nbsp; If#= 0 Alt= 0 #EPs= 1 Cls=09(hub&nbsp; ) Sub=00 Prot=00 Driver=hub<br />E:&nbsp; Ad=81(I) Atr=03(Int.) MxPS=&nbsp; &nbsp;2 Ivl=256ms<br />T:&nbsp; Bus=01 Lev=01 Prnt=01 Port=01 Cnt=01 Dev#=&nbsp; 2 Spd=480 MxCh= 0<br />D:&nbsp; Ver= 2.00 Cls=00(&gt;ifc ) Sub=00 Prot=00 MxPS=64 #Cfgs=&nbsp; 1<br />P:&nbsp; Vendor=1976 ProdID=6025 Rev= 1.00<br />S:&nbsp; Manufacturer=USB0707B<br />S:&nbsp; Product=Flash Disk<br />S:&nbsp; SerialNumber=05122100BACC7E06<br />C:* #Ifs= 1 Cfg#= 1 Atr=80 MxPwr=100mA<br />I:&nbsp; If#= 0 Alt= 0 #EPs= 2 Cls=08(stor.) Sub=06 Prot=50 Driver=usb-storage<br />E:&nbsp; Ad=01(O) Atr=02(Bulk) MxPS= 512 Ivl=0ms<br />E:&nbsp; Ad=81(I) Atr=02(Bulk) MxPS= 512 Ivl=0ms<br />root@OpenWrt:~#</p></blockquote></div><p>Can someone help me in this, is there a way to test if this is working ok before pluging in the smartcard reader???<br />Thnx</p>											<p class="post-edited">(Last edited by <strong>crow</strong> on 8 Feb 2009, 00:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81432">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">crow</div>
					<div class="post-datetime">
						9 Feb 2009, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Here is dmesg output. I pluged first USB2Serial Converter and then after 10sec usb flash driver, usb flash driver is found, ftdi device not:<br />Kamikaze 8.09 RC2 2.4 kernel (because of bc43 wireless problem)<br />dmesg:<br /></p><div class="quotebox"><blockquote><p>CPU revision is: 00029006<br />Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 16kB, 2-way, linesize 16 bytes.<br />Linux version 2.4.35.4 (nbd@baustelle) (gcc version 3.4.6 (OpenWrt-2.0)) #27 Wed Jan 21 02:43:07 CET 2009<br />Setting the PFC to its default value<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />On node 0 totalpages: 8192<br />zone(0): 8192 pages.<br />zone(1): 0 pages.<br />zone(2): 0 pages.<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />CPU: BCM4704 rev 9 at 264 MHz<br />Using 132.000 MHz high precision timer.<br />Calibrating delay loop... 263.78 BogoMIPS<br />Memory: 30468k/32768k available (1425k kernel code, 2300k reserved, 100k data, 84k init, 0k highmem)<br />Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)<br />Inode cache hash table entries: 2048 (order: 2, 16384 bytes)<br />Mount cache hash table entries: 512 (order: 0, 4096 bytes)<br />Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Page-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />POSIX conformance testing by UNIFIX<br />PCI: Initializing host<br />PCI: Fixing up bus 0<br />PCI: Fixing up bridge<br />PCI: Setting latency timer of device 01:00.0 to 64<br />PCI: Fixing up bus 1<br />Linux NET4.0 for Linux 2.4<br />Based upon Swansea University Computer Society NET3.039<br />Initializing RT netlink socket<br />Starting kswapd<br />Registering mini_fo version $Id$<br />devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />pty: 256 Unix98 ptys configured<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 3) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 3) is a 16550A<br />b44.c:v0.93 (Mar, 2004)<br />PCI: Setting latency timer of device 00:01.0 to 64<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:17:31:d6:94:5b<br />PCI: Setting latency timer of device 00:02.0 to 64<br />eth1: Broadcom 47xx 10/100BaseT Ethernet 40:10:18:00:00:2d<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table v1.3 at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling fast programming due to code brokenness.<br />Flash device: 0x800000 at 0x1c000000<br />bootloader size: 262144<br />Physically mapped flash: Filesystem type: squashfs, size=0x180c3f<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;cfe&quot;<br />0x00040000-0x007f0000 : &quot;linux&quot;<br />0x000bb000-0x00240000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x007f0000-0x00800000 : &quot;nvram&quot;<br />0x00240000-0x007f0000 : &quot;rootfs_data&quot;<br />Initializing Cryptographic API<br />NET4: Linux TCP/IP 1.0 for NET4.0<br />IP Protocols: ICMP, UDP, TCP, IGMP<br />IP: routing cache hash table of 512 buckets, 4Kbytes<br />TCP: Hash tables configured (established 2048 bind 4096)<br />NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.<br />NET4: Ethernet Bridge 008 for NET4.0<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 84k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;ASUS WL-500g Premium&#039;<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />roboswitch: Probing device eth0: found!<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />jffs2.bbc: SIZE compression mode activated.<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />eth0.0: add 01:00:5e:00:00:01 mcast address to master interface<br />eth0.0: dev_set_promiscuity(master, 1)<br />device eth0 entered promiscuous mode<br />device eth0.0 entered promiscuous mode<br />br-lan: port 1(eth0.0) entering learning state<br />br-lan: port 1(eth0.0) entering forwarding state<br />br-lan: topology change detected, propagating<br />eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />SCSI subsystem driver Revision: 1.00<br />eth0.1: del 01:00:5e:00:00:01 mcast address from vlan interface<br />eth0.1: del 01:00:5e:00:00:01 mcast address from master interface<br />eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />usb.c: registered new driver usbdevfs<br />usb.c: registered new driver hub<br />br-lan: port 1(eth0.0) entering disabled state<br />br-lan: port 1(eth0.0) entering learning state<br />br-lan: port 1(eth0.0) entering forwarding state<br />br-lan: topology change detected, propagating<br />PCI: Setting latency timer of device 01:02.0 to 64<br />PCI: Enabling device 01:02.0 (0004 -&gt; 0006)<br />PCI/DMA<br />wl0: wlc_attach: chiprev 2 coreunit 0 corerev 9 cccap 0x640009 maccap 0x0 band 2.4G, phy_type 2 phy_rev 7 ana_rev 3<br />wl0: Broadcom BCM4318 802.11 Wireless Controller 4.150.10.5<br />Journalled Block Device driver loaded<br />CSLIP: code copyright 1989 Regents of the University of California<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2002 Netfilter core team<br />ip_conntrack version 2.1 (5953 buckets, 5953 max) - 360 bytes per conntrack<br />PCI: Enabling device 01:03.2 (0000 -&gt; 0002)<br />ehci_hcd 01:03.2: PCI device 1106:3104<br />ehci_hcd 01:03.2: irq 2, pci mem c021f000<br />usb.c: new USB bus registered, assigned bus number 1<br />EHCI: Enabling VIA 6212 workarounds<br />ehci_hcd 01:03.2: USB 2.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4<br />hub.c: USB hub found<br />hub.c: 4 ports detected<br />usb.c: registered new driver serial<br />usbserial.c: USB Serial support registered for Generic<br />usbserial.c: USB Serial Driver core v1.4<br />Initializing USB Mass Storage driver...<br />usb.c: registered new driver usb-storage<br />USB Mass Storage support registered.<br />usbserial.c: USB Serial support registered for FTDI SIO<br />usbserial.c: USB Serial support registered for FTDI 8U232AM Compatible<br />usbserial.c: USB Serial support registered for FTDI FT232BM Compatible<br />usbserial.c: USB Serial support registered for USB-UIRT Infrared Tranceiver<br />usbserial.c: USB Serial support registered for Home-Electronics TIRA-1 IR Transceiver<br />ftdi_sio.c: v1.3.5:USB FTDI Serial Converters Driver<br />device wl0 entered promiscuous mode<br />wl0: attempt to add interface with same source address.<br />br-lan: port 2(wl0) entering learning state<br />br-lan: port 2(wl0) entering forwarding state<br />br-lan: topology change detected, propagating<br />hub.c: new USB device 01:03.2-1, assigned address 2<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />&nbsp; Vendor: USB0707B&nbsp; Model: Flash Disk&nbsp; &nbsp; &nbsp; &nbsp; Rev: 5.00<br />&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0<br />SCSI device sda: 999424 512-byte hdwr sectors (512 MB)<br />sda: Write Protect is off<br />Partition check:<br /> /dev/scsi/host0/bus0/target0/lun0: p1<br />WARNING: USB Mass Storage data integrity not assured<br />USB Mass Storage device found at 2<br />root@OpenWrt:~#</p></blockquote></div><p>On desktop pc archlinux x86_64:<br /></p><div class="quotebox"><blockquote><p>usb 3-1: new full speed USB device using uhci_hcd and address 2<br />usb 3-1: configuration #1 chosen from 1 choice<br />usbcore: registered new interface driver usbserial<br />USB Serial support registered for generic<br />usbcore: registered new interface driver usbserial_generic<br />usbserial: USB Serial Driver core<br />USB Serial support registered for FTDI USB Serial Device<br />ftdi_sio 3-1:1.0: FTDI USB Serial Device converter detected<br />usb 3-1: Detected FT232BM<br />usb 3-1: FTDI USB Serial Device converter now attached to ttyUSB0<br />usbcore: registered new interface driver ftdi_sio<br />ftdi_sio: v1.4.3:USB FTDI Serial Converters Driver<br />[crow@vdrbox ~]$ lsusb<br />Bus 008 Device 002: ID 0bc7:0006 X10 Wireless Technology, Inc. Wireless Transceiver (ACPI-compliant)<br />Bus 008 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 007 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 006 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 005 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 004 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 003 Device 002: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC<br />Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub<br />Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br />Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p><p>ls -al /dev/ttyUSB0<br />lrwxrwxrwx 1 root root 8 2009-02-09 06:40 /dev/ttyUSB0 -&gt; tts/USB0</p></blockquote></div><p>So the device should work fine...</p><br /><p>Installed on Kamikaze 8.09 RC2 2.4<br /></p><div class="quotebox"><blockquote><p>opkg list | grep kmod<br />kmod-brcm-wl - 2.4.35.4+4.150.10.5.3-brcm-2.4-1 -<br />kmod-diag - 2.4.35.4-brcm-2.4-4 -<br />kmod-fs-ext2 - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-ext3 - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-conntrack - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-nat - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-nathelper - 2.4.35.4-brcm-2.4-1 -<br />kmod-ppp - 2.4.35.4-brcm-2.4-1 -<br />kmod-pppoe - 2.4.35.4-brcm-2.4-1 -<br />kmod-scsi-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-switch - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-storage - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb2 - 2.4.35.4-brcm-2.4-1 -<br />kmod-wlcompat - 2.4.35.4+4.150.10.5.3-brcm-2.4-1 -</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>crow</strong> on 10 Feb 2009, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81844">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gurgalof</div>
					<div class="post-datetime">
						14 Feb 2009, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>try installing &quot;kmod-usb-ohci&quot;<br />It worked for me!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81867">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">crow</div>
					<div class="post-datetime">
						14 Feb 2009, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />Yes that helped me to, do5mc on irc pointed me to that. I didnt tryed that before because was thinkint that this USB2Serial is USB2.0, on box: (USB 2.0, Supports high speed serial connection).</p><p>Thnx for suggesting and thnx do5mc for pointing on this before.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>