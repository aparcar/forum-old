<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Optimized and feature rich trunk build for select routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Aug 2014 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 79 of 155</div><nav><ul><li><a href="viewtopic.php%3Fid=50914&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=77.html">77</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=78.html">78</a></li><li class="pagination-current"><span>79</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=80.html">80</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=81.html">81</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=155.html">155</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p282858">
				<div class="post-metadata">
					<div class="post-num">Post #1951</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						8 Jul 2015, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>It looks correct to me, you&#039;ve got a proper vpn zone and forwarding rule. Post the output of &quot;logread | grep openvpn&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282859">
				<div class="post-metadata">
					<div class="post-num">Post #1952</div>
					<div class="post-author">johan81</div>
					<div class="post-datetime">
						8 Jul 2015, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>Here you are:</p>											<p class="post-edited">(Last edited by <strong>johan81</strong> on 9 Jul 2015, 15:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282860">
				<div class="post-metadata">
					<div class="post-num">Post #1953</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jul 2015, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Everything looks fine, you can see the client is pulling the network configuration. You can reach the LAN, so that means the tunnel is working fine. The forwarding rule for vpn zone to wan is in place, so you should be able to reach the internet as well. You could tcpdump on the tun interface to look at the packet flow for clues. I&#039;ll try to reproduce with a clean config when I get the time.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 9 Jul 2015, 00:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282861">
				<div class="post-metadata">
					<div class="post-num">Post #1954</div>
					<div class="post-author">johan81</div>
					<div class="post-datetime">
						9 Jul 2015, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>When I got time, I will do a full backup of my setup now and do a factory reset and fix the firewall problem, just to be sure nothing I did messed anything up. Thanks for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282897">
				<div class="post-metadata">
					<div class="post-num">Post #1955</div>
					<div class="post-author">quack</div>
					<div class="post-datetime">
						9 Jul 2015, 08:12					</div>
				</div>
				<div class="post-content content">
					<p>I have the same issue as johan81, I can connect via vpn but neither traffic to lan nor wan is let through. Changed the vpn zone list network in /etc/config/firewall to vpnudp vpntcp as per your hint, but no joy. I have tried the official Android app and OpenVPN client on windows.</p><p>Running the firewall reload command, it throws warnings. Also there is no tun0 and tun1 interface in the network config. See the configs as follows.</p><p>Output of /etc/init.d/firewall renew:<br /></p><div class="codebox"><pre><code>Warning: Unable to locate ipset utility, disabling ipset support
Warning: Section @zone[1] (vpn) cannot resolve device of network &#039;vpnudp vpntcp&#039;
Warning: Section @zone[2] (tor) cannot resolve device of network &#039;tor&#039;
Warning: Section @zone[1] (vpn) has no device, network, subnet or extra options
Warning: Section @zone[2] (tor) has no device, network, subnet or extra options
 * Clearing IPv4 filter table
 * Clearing IPv4 nat table
 * Clearing IPv4 mangle table
 * Clearing IPv4 raw table
 * Populating IPv4 filter table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
   * Rule &#039;Allow-DHCP-Renew&#039;
   * Rule &#039;Allow-Ping&#039;
   * Rule &#039;Allow-IGMP&#039;
   * Rule &#039;Allow OpenVPN&#039;
   * Rule &#039;Allow DHCP requests from Tor zone&#039;
   * Rule &#039;Allow traffic to the Tor proxy&#039;
   * Rule &#039;Allow DNS lookups from Tor zone&#039;
   * Rule &#039;Allow DNS lookups to Tor DNS proxy&#039;
   * Redirect &#039;Redirect TCP port 443 to OpenVPN&#039;
   * Forward &#039;lan&#039; -&gt; &#039;wan&#039;
   * Forward &#039;vpn&#039; -&gt; &#039;lan&#039;
   * Forward &#039;vpn&#039; -&gt; &#039;wan&#039;
   * Forward &#039;lan&#039; -&gt; &#039;vpn&#039;
 * Populating IPv4 nat table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
   * Redirect &#039;Redirect TCP port 443 to OpenVPN&#039;
 * Populating IPv4 mangle table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
 * Populating IPv4 raw table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
 * Clearing IPv6 filter table
 * Clearing IPv6 mangle table
 * Clearing IPv6 raw table
 * Populating IPv6 filter table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
   * Rule &#039;Allow-DHCPv6&#039;
   * Rule &#039;Allow-MLD&#039;
   * Rule &#039;Allow-ICMPv6-Input&#039;
   * Rule &#039;Allow-ICMPv6-Forward&#039;
   * Rule &#039;Allow OpenVPN&#039;
   * Rule &#039;Allow DHCP requests from Tor zone&#039;
   * Rule &#039;Allow traffic to the Tor proxy&#039;
   * Rule &#039;Allow DNS lookups from Tor zone&#039;
   * Rule &#039;Allow DNS lookups to Tor DNS proxy&#039;
   * Forward &#039;lan&#039; -&gt; &#039;wan&#039;
   * Forward &#039;vpn&#039; -&gt; &#039;lan&#039;
   * Forward &#039;vpn&#039; -&gt; &#039;wan&#039;
   * Forward &#039;lan&#039; -&gt; &#039;vpn&#039;
 * Populating IPv6 mangle table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
 * Populating IPv6 raw table
   * Zone &#039;lan&#039;
   * Zone &#039;vpn&#039;
   * Zone &#039;tor&#039;
   * Zone &#039;wan&#039;
 * Set tcp_ecn to off
 * Set tcp_syncookies to on
 * Set tcp_window_scaling to on
 * Running script &#039;/usr/share/miniupnpd/firewall.include&#039;</code></pre></div><p>My /etc/config/firewall:<br /></p><div class="codebox"><pre><code>config defaults
        option syn_flood &#039;1&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;lan&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;ACCEPT&#039;
        option network &#039;lan&#039;

config zone
        option name &#039;vpn&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;ACCEPT&#039;
        list network &#039;vpnudp vpntcp&#039;

config zone
        option name &#039;tor&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option conntrack &#039;1&#039;
        option network &#039;tor&#039;

config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        option network &#039;wan6&#039;

config forwarding
        option src &#039;lan&#039;
        option dest &#039;wan&#039;

config rule
        option name &#039;Allow-DHCP-Renew&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;68&#039;
        option target &#039;ACCEPT&#039;
        option family &#039;ipv4&#039;

config rule
        option name &#039;Allow-Ping&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option icmp_type &#039;echo-request&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-IGMP&#039;
        option src &#039;wan&#039;
        option proto &#039;igmp&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-DHCPv6&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option src_ip &#039;fe80::/10&#039;
        option src_port &#039;547&#039;
        option dest_ip &#039;fe80::/10&#039;
        option dest_port &#039;546&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-MLD&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option src_ip &#039;fe80::/10&#039;
        list icmp_type &#039;130/0&#039;
        list icmp_type &#039;131/0&#039;
        list icmp_type &#039;132/0&#039;
        list icmp_type &#039;143/0&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Input&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        list icmp_type &#039;router-solicitation&#039;
        list icmp_type &#039;neighbour-solicitation&#039;
        list icmp_type &#039;router-advertisement&#039;
        list icmp_type &#039;neighbour-advertisement&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Forward&#039;
        option src &#039;wan&#039;
        option dest &#039;*&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config include
        option path &#039;/etc/firewall.user&#039;

config redirect
        option src &#039;wan&#039;
        option src_dport &#039;222&#039;
        option dest &#039;lan&#039;
        option dest_port &#039;22&#039;
        option proto &#039;tcp&#039;
        option name &#039;Allow external SSH on port 222&#039;
        option target &#039;DNAT&#039;
        option enabled &#039;0&#039;
        option reflection &#039;1&#039;

config redirect
        option src &#039;wan&#039;
        option src_dport &#039;443&#039;
        option dest &#039;lan&#039;
        option dest_port &#039;1194&#039;
        option proto &#039;tcp&#039;
        option name &#039;Redirect TCP port 443 to OpenVPN&#039;
        option target &#039;DNAT&#039;
        option enabled &#039;1&#039;

config rule
        option target &#039;ACCEPT&#039;
        option name &#039;Allow OpenVPN&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;1194&#039;
        option enabled &#039;1&#039;

config rule
        option name &#039;Allow DHCP requests from Tor zone&#039;
        option src &#039;tor&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;67&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow traffic to the Tor proxy&#039;
        option src &#039;tor&#039;
        option proto &#039;tcp&#039;
        option dest_port &#039;9040&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow DNS lookups from Tor zone&#039;
        option src &#039;tor&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;53&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow DNS lookups to Tor DNS proxy&#039;
        option src &#039;tor&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;9053&#039;
        option target &#039;ACCEPT&#039;

config include &#039;miniupnpd&#039;
        option type &#039;script&#039;
        option path &#039;/usr/share/miniupnpd/firewall.include&#039;
        option family &#039;any&#039;
        option reload &#039;1&#039;

config forwarding
        option dest &#039;lan&#039;
        option src &#039;vpn&#039;

config forwarding
        option dest &#039;wan&#039;
        option src &#039;vpn&#039;

config forwarding
        option dest &#039;vpn&#039;
        option src &#039;lan&#039;</code></pre></div><p>My /etc/config/network:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fdf3:2217:0e71::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option force_link &#039;1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth1&#039;
        option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
        option ifname &#039;eth1&#039;
        option proto &#039;dhcpv6&#039;

config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;
        option blinkrate &#039;2&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 3 5t&#039;

config switch_port
        option device &#039;switch0&#039;
        option port &#039;1&#039;
        option led &#039;6&#039;

config switch_port
        option device &#039;switch0&#039;
        option port &#039;2&#039;
        option led &#039;9&#039;

config switch_port
        option device &#039;switch0&#039;
        option port &#039;5&#039;
        option led &#039;2&#039;

config interface &#039;vpnudp&#039;
        option proto &#039;none&#039;
        option ifname &#039;tun0&#039;

config interface &#039;vpntcp&#039;
        option proto &#039;none&#039;
        option ifname &#039;tun1&#039;

config interface &#039;tor&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.2.1&#039;
        option netmask &#039;255.255.255.0&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282912">
				<div class="post-metadata">
					<div class="post-num">Post #1956</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jul 2015, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>Ahh I&#039;m so stupid.</p><p>Correct:</p><div class="codebox"><pre><code>option network &#039;vpnudp vpntcp&#039;</code></pre></div><p>This would also be correct:<br /></p><div class="codebox"><pre><code>list network &#039;vpnudp&#039;
list network &#039;vpntcp</code></pre></div><p>Not correct:</p><div class="codebox"><pre><code>list network &#039;vpnudp vpntcp&#039;</code></pre></div><p>Do a reload/reboot and it should work, I have confirmed this with a clean config on the latest build.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 9 Jul 2015, 15:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282921">
				<div class="post-metadata">
					<div class="post-num">Post #1957</div>
					<div class="post-author">johan81</div>
					<div class="post-datetime">
						9 Jul 2015, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>Just to be clear, the list network should be deleted, or changed to &#039;vpn&#039; ?<br />And option network should be added?</p><p>EDIT:<br />To answer my own question, yes, that is how it should be done, works flawlessly now! THANKS!</p>											<p class="post-edited">(Last edited by <strong>johan81</strong> on 9 Jul 2015, 13:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282922">
				<div class="post-metadata">
					<div class="post-num">Post #1958</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jul 2015, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>Deleted. Use the correct line I posted above.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282925">
				<div class="post-metadata">
					<div class="post-num">Post #1959</div>
					<div class="post-author">johan81</div>
					<div class="post-datetime">
						9 Jul 2015, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>WOW! Just tested the speed and everything of the OpenVPN and it really has improved! I can now even stream HD video through the VPN on another location, great work!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282927">
				<div class="post-metadata">
					<div class="post-num">Post #1960</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jul 2015, 14:16					</div>
				</div>
				<div class="post-content content">
					<p>Glad to hear it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I&#039;m working on a new build that will include strongSwan IKEv1 and IKEv2 out of the box support for IOS8/Android as well. I measured 50/50 Mbps with my iPad.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282941">
				<div class="post-metadata">
					<div class="post-num">Post #1961</div>
					<div class="post-author">SSadistic</div>
					<div class="post-datetime">
						9 Jul 2015, 16:43					</div>
				</div>
				<div class="post-content content">
					<p>Is this installable on TP-Link 740N?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282943">
				<div class="post-metadata">
					<div class="post-num">Post #1962</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						9 Jul 2015, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s installable on any router (8MB flash required), but you&#039;ll have to compile yourself as I only provide images for the routers mentioned on the first page.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 9 Jul 2015, 16:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282947">
				<div class="post-metadata">
					<div class="post-num">Post #1963</div>
					<div class="post-author">SSadistic</div>
					<div class="post-datetime">
						9 Jul 2015, 17:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>It&#039;s installable on any router (8MB flash required), but you&#039;ll have to compile yourself as I only provide images for the routers mentioned on the first page.</p></blockquote></div><p>Damn it, you lost me on &quot;8MB flash required&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282973">
				<div class="post-metadata">
					<div class="post-num">Post #1964</div>
					<div class="post-author">quack</div>
					<div class="post-datetime">
						9 Jul 2015, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm, that did the trick! Thanks for the quick help!</p><div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Ahh I&#039;m so stupid.</p><p>Correct:</p><div class="codebox"><pre><code>option network &#039;vpnudp vpntcp&#039;</code></pre></div><p>This would also be correct:<br /></p><div class="codebox"><pre><code>list network &#039;vpnudp&#039;
list network &#039;vpntcp</code></pre></div><p>Not correct:</p><div class="codebox"><pre><code>list network &#039;vpnudp vpntcp&#039;</code></pre></div><p>Do a reload/reboot and it should work, I have confirmed this with a clean config on the latest build.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282984">
				<div class="post-metadata">
					<div class="post-num">Post #1965</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						10 Jul 2015, 00:09					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for letting me know <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283052">
				<div class="post-metadata">
					<div class="post-num">Post #1966</div>
					<div class="post-author">johan81</div>
					<div class="post-datetime">
						10 Jul 2015, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>The TCP option with OpenVPN is brilliant! I once thought I had configured it before with your build, but now I see why it didn&#039;t work back then (didn&#039;t configure a separate TCP option in the OpenVPN config file). Now it works on way more networks which are pretty tightly blocking a lot of protocols, when connecting to the OpenVPN, I finally have a fully working network on those Wi-Fi networks, freedom!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283058">
				<div class="post-metadata">
					<div class="post-num">Post #1967</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						10 Jul 2015, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>How come the Archer builds aren&#039;t fixed by now?...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283071">
				<div class="post-metadata">
					<div class="post-num">Post #1968</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						11 Jul 2015, 02:18					</div>
				</div>
				<div class="post-content content">
					<p>I will put out a new build in the next couple of days. I&#039;ve done a lot of cleanups and made reghack into a package so it gets compiled for the specific arch instead of bundling already built binaries for each platform which is doomed to cause issues at some point. I&#039;m hoping that might have been the problem, so if you can test a build for me that would be cool. I&#039;d really like to get it working it&#039;s very annoying that I don&#039;t know what&#039;s causing it <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283072">
				<div class="post-metadata">
					<div class="post-num">Post #1969</div>
					<div class="post-author">bmccoy11</div>
					<div class="post-datetime">
						11 Jul 2015, 02:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll be sure to test once a new build is out! Just be sure to reply to this thread once it&#039;s built so I get a notification.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283109">
				<div class="post-metadata">
					<div class="post-num">Post #1970</div>
					<div class="post-author">quack</div>
					<div class="post-datetime">
						11 Jul 2015, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>Regarding OpenSSL and VPN, is there hardware acceleration support on the WNDR3700? I am getting roughly 600KB/s inbound via OpenVPN and the CPU is maxed out. Also there is no /dev/crypto so I guess we are doing crypto in software here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283119">
				<div class="post-metadata">
					<div class="post-num">Post #1971</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						11 Jul 2015, 13:58					</div>
				</div>
				<div class="post-content content">
					<p>No there is no hardware acceleration but that sounds very low I&#039;m sure I got about 20Mbps with my old 3700v1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283121">
				<div class="post-metadata">
					<div class="post-num">Post #1972</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						11 Jul 2015, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>New build r46298 currently building:</p><p>- Added strongSwan VPN with IKEv1+IKEv2 out of the box (measured 58Mbps/55Mbps with iPad/wdr4900 from LAN)<br />&nbsp; * iOS IKEv2 profile automatically generated at <a href="http://192.168.3.254/ios.mobileconfig">http://192.168.3.254/ios.mobileconfig</a><br />&nbsp; * Default username/password = openwrt/changeme (can be changed in /etc/ipsec.secrets)<br />&nbsp; * IKEv1 uses psk and xauth username/password - no certificates<br />&nbsp; * IKEv2 uses pubkey and eap username/password<br />- Cleaned up and moved logic for creating .ovpn profiles into /usr/sbin/vpn.sh which also handles strongSwan<br />- Made reghack into a package and cleaned up logic in /etc/init.d/boot (previously I used pre-built reghack binaries for each router)<br />- Added Avahi mDNS reflection for OpenVPN tun interfaces<br />- Consolidated some settings into /etc/config/arokh<br />- Cleaned up smcroute hotplug script</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283196">
				<div class="post-metadata">
					<div class="post-num">Post #1973</div>
					<div class="post-author">erikoo</div>
					<div class="post-datetime">
						12 Jul 2015, 11:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>New build r46298 currently building:</p><p>&nbsp; * iOS IKEv2 profile automatically generated at <a href="http://192.168.3.254/ios.mobileconfig">http://192.168.3.254/ios.mobileconfig</a></p></blockquote></div><p>This file appears to be empty on my wdr4900.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283202">
				<div class="post-metadata">
					<div class="post-num">Post #1974</div>
					<div class="post-author">HumanMakro</div>
					<div class="post-datetime">
						12 Jul 2015, 12:16					</div>
				</div>
				<div class="post-content content">
					<p>r46298 softbricked my wndr3700v2 ...&nbsp; stuck at boot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283205">
				<div class="post-metadata">
					<div class="post-num">Post #1975</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						12 Jul 2015, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>@erikoo</p><p>Run this command on your router:</p><div class="codebox"><pre><code>wget -O /etc/strongswan.d/ios.template http://enduser.subsignal.org/~trondah/source-tree/package/feeds/packages/strongswan/files/ios.template &amp;&amp; clean-all &amp;&amp; rm /etc/.vpn &amp;&amp; vpn.sh &amp;&amp; ipsec restart</code></pre></div><p>Thanks for the feedback, rebuilding to fix that.</p><p>@HumanMakro</p><p>That&#039;s odd, do you have a serial console by any chance?</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 1976 to 1975 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 79 of 155</div><nav><ul><li><a href="viewtopic.php%3Fid=50914&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=77.html">77</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=78.html">78</a></li><li class="pagination-current"><span>79</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=80.html">80</a></li><li><a href="viewtopic.php%3Fid=50914&amp;p=81.html">81</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50914&amp;p=155.html">155</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>