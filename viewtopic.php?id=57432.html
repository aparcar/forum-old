<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Resolved] Filtered ports on Wan side ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p276789">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						19 May 2015, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>I was doing some tests to openwrt from the Wan side , and i notice a few filtered ports discovered by nmap .<br />How do i close these ports ?</p><p>4005 pxc-pin<br />4899 radmin<br />6566 sane-port<br />55555 unknow</p><p>image from nmap :<br /><a href="http://s29.postimg.org/yt8hc3u2f/openwrt.png">http://s29.postimg.org/yt8hc3u2f/openwrt.png</a></p>											<p class="post-edited">(Last edited by <strong>pedropt</strong> on 16 Jun 2015, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276812">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 May 2015, 03:50					</div>
				</div>
				<div class="post-content content">
					<p>Neither of these ports are listening by default. I&#039;m going out on a limb and say that they<br />a) have been opened before by by the router or by a machine from the inside and are still listening, or<br />b) are opened by a device that sits before the router (another router/modem? other infrastructure on the ISP&#039;s side?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276823">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						20 May 2015, 09:00					</div>
				</div>
				<div class="post-content content">
					<p>There was not another router or computer ahead on lan ports on the device&nbsp; on openwrt .<br />but even if it had some other device (witch it hadn`t) then openwrt should not forward filtered ports automatic on some specific device without a firewall rule for that .<br />The modem where openwrt is connected have some ports opened but none of them are showed , if ido the scan to the modem gateway then i get different ports .<br />This scan was pointed specifically to openwrt .</p>											<p class="post-edited">(Last edited by <strong>pedropt</strong> on 20 May 2015, 09:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276877">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 May 2015, 18:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pedropt wrote:</cite><blockquote><p>openwrt should not forward filtered ports automatic on some specific device without a firewall rule for that</p></blockquote></div><p>I agree. And it doesn&#039;t.</p><p>I assume it&#039;s your ISP. The ports you mention have a troubled history, so your ISP may be filtering them on your behalf.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276891">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						20 May 2015, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>This openwrt device is not a modem/router , this device is just a router .<br />And if you think is my isp then i give you all my ip right now so you all can scan and keep your doubts out .<br />actually i am scanning my actual ip address from other isp provider .<br />my ip is 81.193.178.29 .<br />Don&#039;t worry because i have dynamic ip address and i can change it when i restart the router .</p><p>I give you all authorization to scan if you want .</p><p>Note : I changed the default configuration from my isp modem in order to not open any port to internet and don&#039;t respond to scans&nbsp; it i</p>											<p class="post-edited">(Last edited by <strong>pedropt</strong> on 20 May 2015, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276899">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 May 2015, 21:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pedropt wrote:</cite><blockquote><p>This openwrt device is not a modem/router , this device is just a router . (...)<br />Note : I changed the default configuration from my isp modem in order to not open any port to internet and don&#039;t respond to scans&nbsp; it i</p></blockquote></div><p>You need to be more clear about your setup then. How is your OpenWrt router connected to the &quot;ISP modem&quot;? If it&#039;s connected to it through DHCP, then the OpenWrt&#039;s WAN is only facing that &quot;modem&quot;. It&#039;s your &quot;modem&quot; that&#039;s facing the internet, which is then actually a router itself and doing the filtering/blocking you witness.</p><p>(Edit: reworded)</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 20 May 2015, 21:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276922">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						20 May 2015, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s simply your ISP filtering the ports, it&#039;s quite common. OpenWrt has a reject policy on WAN, so any filtering of those ports is done at the ISP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276935">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						21 May 2015, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>You need to be more clear about your setup then. How is your OpenWrt router connected to the &quot;ISP modem&quot;? If it&#039;s connected to it through DHCP, then the OpenWrt&#039;s WAN is only facing that &quot;modem&quot;. It&#039;s your &quot;modem&quot; that&#039;s facing the internet, which is then actually a router itself and doing the filtering/blocking you witness.</p><p>Ok , lets get this straight .<br />I have my isp modem witch provides internet to openwrt router , openwrt have a static ip address from isp modem because i have in my isp modem dhcp disabled .<br />Since my isp modem have 4 lan ports , i have the openwrt router connected to one port (witch is my wireless network) , and i have my firewall also connected to my isp modem witch protects my internal cable network .<br />2 ports left right .<br />my linux connects to one of those left ports and i scan the ip that openwrt have assigned as static from isp modem , witch is 192.168.blá blá&nbsp; , so , when i scan that specific ip address from lan to lan , my isp modem have nothing to do with it because i am not scanning the modem itself , it is like i am doing a scanning to a computer over the network .</p><p>Now , i can do another scan on openwrt wan port from isp modem , just to check again .<br />I can put here the nmap command to you check out your routers in your network , because my nmap does not only scan ports as also inject some scripts to test specific ports for vulnerabilities .<br />What is bothers me most is that those ports are dangerous ports , specially the remote administrator port , because it is filtered it does not mean that that port can not be opened with the appropriate tool .</p><p>just look at these ports :<br />4005 pxc-pin<br />4899 radmin<br />6566 sane-port<br />55555 unknow</p><p>is this for real or what !!!!</p><p>i will check it out with another scan and i will post the results again .</p><p>Note : take out of your mind the idea that this is an isp port opened , because i am scanning a router from internal lan and not a modem from outside from the net .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276962">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						21 May 2015, 05:26					</div>
				</div>
				<div class="post-content content">
					<p>This is even more confusing then.</p><p>A first thing to clear up: Your &quot;ISP modem&quot; is a <em>router</em>, whether it does DHCP or not. It serves an internal private network (192.168.x.x) to its LAN ports and does NAT between that internal network and your WAN address (81.193.x.x).</p><p>A second thing to clear up:<br /></p><div class="quotebox"><blockquote><p>actually i am scanning my actual ip address from other isp provider</p></blockquote></div><p>In this case you are really scanning your &quot;ISP modem&quot;/router. OpenWrt has no part of this, none of the scans will even reach the OpenWrt device.</p><p>That being said, &quot;filtered&quot; ports are not &quot;open&quot; ports. And a &quot;filtered&quot; port certainly does not mean it can be opened. If you set your firewall to DROP packets instead of actively REJECTing them (which would be the OpenWrt standard IIRC), they show up as &quot;filtered&quot; in nmap -- simply because nmap doesn&#039;t get a response and can only assume that something is &quot;filtering&quot; there (a closed port would actually reply &quot;I&#039;m closed&quot;, a &quot;filtered&quot; port just doesn&#039;t reply). This is perfectly normal and in no way an indication of a security flaw.</p><p>It would be really interesting if, when you if repeat the scan from inside your network (ideally directly connecting your scanning machine to the OpenWrt WAN port), those are the only ports that show up &quot;filtered&quot;. Or if there&#039;s a thousand more ports that are &quot;filtered&quot; and your first scan just looked at selected obvious target ports.</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 21 May 2015, 05:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277001">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						21 May 2015, 13:17					</div>
				</div>
				<div class="post-content content">
					<p>&quot;It would be really interesting if, when you if repeat the scan from inside your network (ideally directly connecting your scanning machine to the OpenWrt WAN port), those are the only ports that show up &quot;filtered&quot;. Or if there&#039;s a thousand more ports that are &quot;filtered&quot; and your first scan just looked at selected obvious target ports.&quot;</p><p>i will do that when i get home .</p><p>&quot;In this case you are really scanning your &quot;ISP modem&quot;/router. OpenWrt has no part of this, none of the scans will even reach the OpenWrt device.&quot;</p><p>i did that just to test if my modem had some open/closed or filtered ports to the web , and that may cause the confusion around here .<br />But it have none , basically from outside my modem is not detectable as active device on the web by a remote port scan .</p><p>Note : i still have the same ip on my modem , i did not restart my router yet to change it , in case anyone wants to check it , and actually it would be very appriciated if someone and somehow get some results on my isp modem and post them here .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277106">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						22 May 2015, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>well , i had some issues here configuring my linux to start a dhcp server on eth0 port in order for openwrt get an ip address on the wan side , and then to make the port scan with my laptop .<br />Also the &quot;gang&quot; here was in need for wifi working , and i was unable to reconfigure everything again on openwrt like i did before , openwrt was unable to communicate with my modem on the wan port , and i lost my patience on this issue today .<br />I flashed other firmware to the router and after everything configured i did a port scan exactly the same way i did before with openwrt .<br />The result from this scan with a different firmware was 65535 ports closed on the wan side .<br /> here it is the screencapture from nmap scan .<br /><a href="http://s15.postimg.org/phy010bmz/Zenmap_051.png">http://s15.postimg.org/phy010bmz/Zenmap_051.png</a></p><p>on the weekend i have more time to deal with openwrt again , and i will re-flash firmware again and i will do the scan .<br />However&nbsp; , the process i used in this new firmware for port scanning was exactly the same process i did with openwrt firmware , and as you all may see i have everything closed on wan side .</p><p>Note : I already changed my internet address .</p>											<p class="post-edited">(Last edited by <strong>pedropt</strong> on 22 May 2015, 01:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279995">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						14 Jun 2015, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>I had this weekend&nbsp; a problem with my previous firmware (not openwrt) , so i updated my router with the openwrt again .<br />This time i was checking every configuration and firewall rules to see if everything stays right like i want .<br />For final i made a portscan like i did in previous posts with nmap , and the result was 65535 ports closed from the wan side (like i wanted) .</p><p>here it is the result :<br /><a href="http://s21.postimg.org/ezs3qhbuv/Zenmap_069.png">http://s21.postimg.org/ezs3qhbuv/Zenmap_069.png</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280020">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						14 Jun 2015, 19:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pedropt wrote:</cite><blockquote><p>This time i was checking every configuration and firewall rules to see if everything stays right like i want .</p></blockquote></div><p>&quot;everything stays&quot; of course meaning you didn&#039;t change things you don&#039;t understand. And suddenly, by sheer coincidence/luck/magic/magnetism, it does what it is supposed to do.</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 14 Jun 2015, 19:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280197">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						15 Jun 2015, 23:19					</div>
				</div>
				<div class="post-content content">
					<p>lets understand one thing here .<br />By default , any router dont leave open ports on wan side , except if user wants remote access to it .<br />telnet , ssh or even http cann be opened on wan side if user decides to do it , but by default it should not be opened .<br />What made me worried on this case was the specific ports that i found , witch was :<br />4005 pxc-pin<br />4899 radmin<br />6566 sane-port<br />55555 unknow</p><p>these ports are not well know , and i don&#039;t know any router model that by default have any of these ports opened on wan side .<br />Only ISP modems can have 1 or 2 of these ports opened for isp maintenance .<br />The configuration i made on openwrt this time that i did not last time was just :<br />Removing ipv6 <br />establishing rules in the firewalls for dos attacks <br />and configuring the wan side for not reply on pings .</p><p>So , as you can see , the configuration was nothing from outside this world .</p><p>Anyway , everything is working perfect as i wanted , and that is all that matters .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280220">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						16 Jun 2015, 01:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pedropt wrote:</cite><blockquote><p>By default , any router dont leave open ports on wan side , except if user wants remote access to it .<br />telnet , ssh or even http cann be opened on wan side if user decides to do it , but by default it should not be opened .</p></blockquote></div><p>That&#039;s exactly how OpenWrt&#039;s firewall comes in its default configuration.</p><div class="quotebox"><blockquote><p>What made me worried on this case was the specific ports that i found , witch was :</p></blockquote></div><p>Yeah, so you keep repeating -- always with the slight accusation that OpenWrt is to blame.</p><div class="quotebox"><blockquote><p>The configuration i made on openwrt this time that i did not last time was just :<br />Removing ipv6</p></blockquote></div><p>IPv6 does not open the ports you mention.</p><div class="quotebox"><blockquote><p>establishing rules in the firewalls for dos attacks</p></blockquote></div><p>Whatever that means.</p><div class="quotebox"><blockquote><p>and configuring the wan side for not reply on pings .</p></blockquote></div><p>Congratulations, you now pointlessly violate RFC 1122.</p><p>To summarize: You use a fresh installation of OpenWrt and did nothing to <em>close</em> the ports you previously saw open, and yet they are closed. What does that tell you?</p><div class="quotebox"><blockquote><p>Anyway , everything is working perfect as i wanted , and that is all that matters .</p></blockquote></div><p>Well then, good luck with your future forays into network security.</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 16 Jun 2015, 01:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280224">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Jun 2015, 02:29					</div>
				</div>
				<div class="post-content content">
					<p>OP is ignoring the correct answer, which of course is that his ISP is doing the filtering and those ports are _not_ &quot;opened&quot; in any way by default in OpenWrt. If you don&#039;t care to learn what is the point of starting threads here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280245">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						16 Jun 2015, 09:55					</div>
				</div>
				<div class="post-content content">
					<p>whatever it will make you all happy .<br />Note : I by default never use the original firmwares on my network devices , i always use (when is available) and open source firmware .<br />Openwrt is not my first experience , i just did an nmap scan and i found strange that fact of those ports , and that is why i posted here in the forum for answers .<br />If somebody here had told me that by default openwrt had those ports opened then i probably never had installed again the firmware .<br />I dont went here to blame anything or anyone , i went here to point a fact that was happening with one of my network devices with openwrt .<br />I was not yet unable to found why that nmap result happened that time and that some of you keep insisting that is the ISP port filtering .<br />Well , this open wrt device is not a modem , this device is installed on my subnet , so doing a wan scan on it will not reveal any ISP ports filtered on my external ip address .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280255">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Jun 2015, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>You are plain wrong, that is a fact.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280307">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">pedropt</div>
					<div class="post-datetime">
						16 Jun 2015, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>Ok .<br />Topic closed</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>