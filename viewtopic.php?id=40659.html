<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to: Install OpenWrt on D-Link DSL-2740 Revision/Version C2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p183923">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">corrupted</div>
					<div class="post-datetime">
						21 Nov 2012, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>Those of you who have D-Link DSL-2740B revision <strong>C2</strong>, may have noticed that the generated images do not work, and as a result, the router doesn&#039;t work.&nbsp; Over the past few months, I have tried many different releases and only one did the job. Release 31732.</p><p>So if you want to install a current release, you can use the release 31732 image for initial flashing, and then sysupgrade with a current image. This method <strong>DOES</strong> work. The image is the original generated image taken from the OpenWrt download site.</p><p><strong>1.</strong> Download the release 31732 image.<br /><a href="http://www30.zippyshare.com/v/44144811/file.html">openwrt-DSL274XB-C2-r31732.bin</a></p><p><strong>2.</strong> Turn the router off.</p><p><strong>3.</strong> Press the reset button and power the router on. Keep the reset button pressed, until the power button becomes red.</p><p><strong>4.</strong> Give your machine a static IP within the 192.168.1.2-254 range and navigate to <a href="http://192.168.1.1">http://192.168.1.1</a>. You should see this page:</p><p><span class="postimg"><img src="http://s18.postimage.org/9f7gw8495/dlink.png" alt="http://s18.postimage.org/9f7gw8495/dlink.png" /></span></p><p><strong>5.</strong> Update the firmware.</p><p><strong>6.</strong> Telnet to your newly installed OpenWrt. Configure your network or if you have a local server modify your opkg.conf (if you intend to install packages from your local mirror) and download the current image, which must be placed in /tmp.</p><p><strong>7.</strong> Sysupgrade the router.</p><p><span class="postimg"><img src="http://s9.postimage.org/c28j0bplr/sysupgrade.png" alt="http://s9.postimage.org/c28j0bplr/sysupgrade.png" /></span></p><p><strong>8.</strong> Enjoy! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If you want to revert to the original firmware, download it from a d-link ftp server and follow steps 2,3,4 and 5. The router is practically unbrickable, so don&#039;t be afraid to experiment. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>corrupted</strong> on 6 Jan 2013, 04:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213208">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lfgringo</div>
					<div class="post-datetime">
						26 Sep 2013, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi mate, thanks for the tutorial, but im stuck in the 6 step, i cant connect with the computer, always say, cant connect...<br />How i do that?</p><p>Done!!! <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>lfgringo</strong> on 26 Sep 2013, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240121">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">louis.m</div>
					<div class="post-datetime">
						13 Jul 2014, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />I&#039;m facing similar issue.<br />Did you ever get to install openwrt as mentioned above?<br />When I try that image I get the &quot;image check fail&quot; message.</p><p>see my post <a href="https://forum.openwrt.org/viewtopic.php?pid=240113#p240113">https://forum.openwrt.org/viewtopic.php â€¦ 13#p240113</a><br />Thanks<br />Louis</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367201">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">der schiefe Turm</div>
					<div class="post-datetime">
						23 Oct 2017, 08:04					</div>
				</div>
				<div class="post-content content">
					<p><strong>Wireless interface not working on DSL2740B-C3</strong><br />(This fix works for openwrt-15.05-brcm63xx-generic-DSL274XB-C3-squashfs-cfe.bin)<br />If your wireless interface does not start, you might want to add the following entry to /etc/config/wireless:</p><p>In the section &quot;config wifi-iface&quot; add the line:<br /></p><div class="codebox"><pre><code>option macaddr &#039;00:12:34:56:78:90&#039;</code></pre></div><p>and restart wireless with the command &#039;wifi&#039;.<br />Don&#039;t use the webinterface until the next reboot if you write to this config file manually. Doing so kicked out my edits. After a reboot however this fix also works neatly using the webinterface.</p><p>Alternatively I think you can also run the following command. I&#039;m not sure if this will avoid the conflict with the webinterface:<br /></p><div class="codebox"><pre><code>root@router:~# uci set wireless.wlan0.macaddr=00:12:34:56:78:90
root@router:~# uci commit wireless
root@router:~#</code></pre></div><br /><p><strong>==== Error description ====</strong><br />Before applying this fix, logread always reported:<br /></p><div class="codebox"><pre><code>Mon Oct 23 11:57:01 2017 daemon.notice netifd: phy0 (746): Configuration file: /var/run/hostapd-phy0.conf
Mon Oct 23 11:57:01 2017 daemon.notice netifd: phy0 (746): nl80211: deinit ifname=wlan0 disabled_11b_rates=0</code></pre></div><p>... which basically does not tell you anything. The first line is just an info which temporary file was used to start up hostapd. The second line is NOT the error! It is netifd &#039;s attempt to switch the wlan interface back from AP mode (access point) to managed mode (station) after failing to start the wlan interface in access-point mode.</p><p>It seems the driver does not download its firmware to the wireless chip unless it is previously set up with a valid mac address. For me the mac setting was always FF:FF:FF:FF:FF:FF initially.</p><p>You can check that by running:<br /></p><div class="codebox"><pre><code>root@router:~# iw dev
&lt;&lt;&lt; If you read any devices here, delete them first using &quot;iw dev &lt;DEVICENAME&gt; del&quot; before going on to the next step! &gt;&gt;&gt; 
root@router:~# iw phy phy0 interface add wlan0 type managed
root@router:~# iw dev
phy#0
        Interface wlan0
                ifindex 13
                wdev 0x8
                addr ff:ff:ff:ff:ff:ff
                type managed
root@router:~# ifconfig wlan0 hw ether 00:01:02:03:04:05
root@router:~# iw dev
phy#0
        Interface wlan0
                ifindex 13
                wdev 0x8
                addr 00:01:02:03:04:05
                type managed
root@router:~# ifconfig wlan0 up
root@router:~#</code></pre></div><p>This last step will now trigger the firmware download. logread reports:<br /></p><div class="codebox"><pre><code>Mon Oct 23 15:47:28 2017 kern.info kernel: [ 1706.684000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)</code></pre></div><br /><p>My complete /etc/config/wireless file now reads:<br /></p><div class="codebox"><pre><code>config wifi-device &#039;phy0&#039;
        option type &#039;mac80211&#039;
        option hwmode &#039;11g&#039;
        option path &#039;pci0000:00/0000:00:01.0/ssb0:0&#039;
        option channel &#039;11&#039;
        option txpower &#039;20&#039;
        option country &#039;US&#039;
        option disabled &#039;0&#039;

config wifi-iface &#039;wlan0&#039;
        option device &#039;phy0&#039;
        option network &#039;lan&#039;
        option mode &#039;ap&#039;
        option ssid &#039;SomeSSID&#039;
        option key &#039;somepassword&#039;
        option encryption &#039;psk2&#039;
        option macaddr &#039;00:12:34:56:78:90&#039;</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>