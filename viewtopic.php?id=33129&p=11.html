<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> New package: mwan2; testers wanted.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 27 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 11 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=33129&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33129&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li><li><a href="viewtopic.php%3Fid=33129&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=14.html">14</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p173846">
				<div class="post-metadata">
					<div class="post-num">Post #251</div>
					<div class="post-author">garynych</div>
					<div class="post-datetime">
						2 Aug 2012, 07:03					</div>
				</div>
				<div class="post-content content">
					<p>web admin for mwan2 <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /><a href="http://file.oboz.ua/download.php?fid=147043">http://file.oboz.ua/download.php?fid=147043</a></p><p>1. install mwan2<br />2. install luci-app-ddns<br />3. files from an archive, to place in device <br />4. reboot<br />(checked on the tp-link 3420) it`s work <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /><a href="http://www.radikal.ru"><span class="postimg"><img src="http://s12.radikal.ru/i185/1208/b8/8b94b1b90ac5.jpg" alt="http://s12.radikal.ru/i185/1208/b8/8b94b1b90ac5.jpg" /></span></a></p><p>sorry for my english</p>											<p class="post-edited">(Last edited by <strong>garynych</strong> on 2 Aug 2012, 07:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173864">
				<div class="post-metadata">
					<div class="post-num">Post #252</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Aug 2012, 13:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jcgalvez wrote:</cite><blockquote><p>This is it with qos started:</p><p>...</p><p>I removed my VoIP entries in both cases.</p><p>Thank you for your help.</p></blockquote></div><p>You are using an incompatible version of QoS script. This overrides the mark value incorrectly. Look at my entries and look at the MARK mask values:</p><div class="codebox"><pre><code>Chain qos_default (4 references)
 pkts bytes target     prot opt in     out     source               destination         
 102M  108G CONNMARK   all  --  *      *       0.0.0.0/0            0.0.0.0/0           CONNMARK restore mask 0xff 
1875K  198M qos_default_ct  all  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff 
  87M  107G MARK       all  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x1/0xff length 400:65535 MARK and 0xffffff00 
    0     0 MARK       all  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x2/0xff length 800:65535 MARK and 0xffffff00 
 375K   78M MARK       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff length 0:500 MARK xset 0x2/0xff 
 574K   48M MARK       icmp --  *      *       0.0.0.0/0            0.0.0.0/0           MARK xset 0x1/0xff 
 320K   33M MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff tcp spts:1024:65535 dpts:1024:65535 MARK xset 0x4/0xff 
    0     0 MARK       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff udp spts:1024:65535 dpts:1024:65535 MARK xset 0x4/0xff 
 115K 7040K MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           length 0:128 mark match !0x4/0xff tcp flags:0x3F/0x02 MARK xset 0x1/0xff 
  12M  549M MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           length 0:128 mark match !0x4/0xff tcp flags:0x3F/0x10 MARK xset 0x1/0xff 

Chain qos_default_ct (1 references)
 pkts bytes target     prot opt in     out     source               destination         
15505  806K MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff tcp multiport ports 22,53 MARK xset 0x1/0xff 
 381K   27M MARK       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff udp multiport ports 22,53 MARK xset 0x1/0xff 
 185K   11M MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff tcp multiport ports 20,25,80,110,119,443,563,993,995 MARK xset 0x3/0xff 
    0     0 MARK       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff tcp multiport ports 5190 MARK xset 0x2/0xff 
    0     0 MARK       udp  --  *      *       0.0.0.0/0            0.0.0.0/0           mark match 0x0/0xff udp multiport ports 5190 MARK xset 0x2/0xff 
1875K  198M CONNMARK   all  --  *      *       0.0.0.0/0            0.0.0.0/0           CONNMARK save mask 0xff</code></pre></div><p>Please use a correct QoS package. Not an mwan2 problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173877">
				<div class="post-metadata">
					<div class="post-num">Post #253</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Aug 2012, 14:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>Hi, I have pppoe-wan(DSL) and dhcp client wan2 (Wireless Antenna) problem is it only shows one route table. The odd thing is I have to use &quot;ifwan up&quot; just to initialize pppoe-wan connection which might be the cause the problem.</p><div class="codebox"><pre><code>#Network
config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.0.254&#039;
        option netmask &#039;255.255.255.0&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;xxxx&#039;
        option password &#039;xxxx&#039;
        option mtu &#039;1454&#039;
        option metric &#039;1&#039;

config interface &#039;wan2&#039;
        option proto &#039;dhcp&#039;
        option ifname &#039;eth0.3&#039;
        option metric &#039;5&#039;
        option macaddr &#039;1C:AF:F7:38:9B:33&#039;</code></pre></div></blockquote></div><p>Please try the following network config:</p><div class="codebox"><pre><code>#Network
config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.0.254&#039;
        option netmask &#039;255.255.255.0&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;xxxx&#039;
        option password &#039;xxxx&#039;
        option mtu &#039;1454&#039;
        option defaultroute &#039;0&#039;

config interface &#039;wan2&#039;
        option proto &#039;dhcp&#039;
        option ifname &#039;eth0.3&#039;
        option metric &#039;5&#039;
        option macaddr &#039;1C:AF:F7:38:9B:33&#039;

config &#039;route&#039;
    option interface &#039;wan&#039;
    option target &#039;0.0.0.0&#039;
    option netmask &#039;0.0.0.0&#039;
    option metric &#039;2&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173914">
				<div class="post-metadata">
					<div class="post-num">Post #254</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						2 Aug 2012, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>hey adze here is my current setting what should i change in the following configs to get mwan2 to load balance wlan0 and eth0.1</p><br /><div class="codebox"><pre><code>Kernel IP routing table
Destination     Gateway         Genmask         Flags  Metric Ref    Use Iface
192.168.0.0     0.0.0.0         255.255.255.0     U       0      0        0    wlan0
192.168.1.0     0.0.0.0         255.255.255.0     U       0      0        0    br-lan
default          192.68.1.1      255.255.255.0    UG      2      0        0    eth0.1
default         192.168.0.1     0.0.0.0               UG      1      0       0     wlan0

/etc/config/network

#### VLAN configuration
config switch eth0
        option enable   1

config switch_vlan eth0_0
        option device   &quot;eth0&quot;
        option vlan     0
        option ports    &quot;1 2 3 4 5&quot;

config switch_vlan eth0_1
        option device   &quot;eth0&quot;
        option vlan     1
        option ports    &quot;0 5&quot;

#### Loopback configuration
config interface loopback
        option ifname   &quot;lo&quot;
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0


#### LAN configuration
config interface lan
        option type     bridge
        option ifname   &quot;eth0.0&quot;
        option proto    static
        option ipaddr   192.168.1.1
        option netmask  255.255.255.0


#### WAN configuration
config interface        wan
        option ifname   &quot;eth0.1&quot;
        option proto    dhcp
         option metric 2

config interface wan2 
       option proto dhcp
       option metric 1</code></pre></div><div class="codebox"><pre><code>/etc/config/mwan2
#This is an mwan2 example config. In this config we define three load-balanced interfaces. Interface
#wan and wan2 are primary and load-balanced. Interface wan3 is a backup in case both wan and wan2 have
#failed. Load between wan and wan2 is shared on factor of 3:2. Both wan and wan2 have connection
#monitoring active. Interface wan3 is a last resort, so no connection monitoring there.

config &#039;interface&#039; &#039;wan&#039;
        option &#039;enabled&#039; &#039;1&#039;
        option &#039;metric&#039; &#039;1&#039;
        option &#039;weight&#039; &#039;3&#039;
        option &#039;track_ip&#039; &#039;8.8.8.8&#039;
        option &#039;count&#039; &#039;1&#039;
        option &#039;timeout&#039; &#039;2&#039;
        option &#039;interval&#039; &#039;5&#039;
        option &#039;down&#039; &#039;3&#039;
        option &#039;up&#039; &#039;8&#039;

config &#039;interface&#039; &#039;wan2&#039;
        option &#039;enabled&#039; &#039;1&#039;
        option &#039;metric&#039; &#039;1&#039;
        option &#039;weight&#039; &#039;2&#039;
        option &#039;track_ip&#039; &#039;8.8.4.4&#039;
        option &#039;count&#039; &#039;1&#039;
        option &#039;timeout&#039; &#039;2&#039;
        option &#039;interval&#039; &#039;5&#039;
        option &#039;down&#039; &#039;3&#039;
        option &#039;up&#039; &#039;8&#039;

config &#039;interface&#039; &#039;wan3&#039;
        option &#039;enabled&#039; &#039;1&#039;
        option &#039;metric&#039; &#039;2&#039;
        option &#039;weight&#039; &#039;1&#039;

#Below are the load balancing rules. These rules are matched in order, so if you define a matching
#rule, all following matches are ignored. By default mwan2 will load-balance nothing so to make mwan2
#work you have to define at least a default rule.

#Below an example to divert traffic to 192.168.0.0/16 to use the default routing table. This is used
#to reach subnets that are e.g. behind vpn tunnels or behind routers on the local lan.

config &#039;rule&#039;
        option &#039;dest_ip&#039; &#039;192.168.0.0/16&#039;
        list &#039;use_interface&#039; &#039;default&#039;

#Next an example rule which will send tcp traffic from 192.168.21.0 with destination port 563 only
#out on interface wan.

config &#039;rule&#039;
        option &#039;src_ip&#039; &#039;192.168.21.0/24&#039;
        option &#039;proto&#039; &#039;tcp&#039;
        option &#039;dest_port&#039; &#039;563&#039;
        list &#039;use_interface&#039; &#039;wan&#039;

#Next example will send tcp traffic from 192.168.21.0 with destination port 995 out on interfaces wan
#and wan2. This time we equalize the load on a session basis instead of route based.

config &#039;rule&#039;
        option &#039;src_ip&#039; &#039;192.168.21.0/24&#039;
        option &#039;proto&#039; &#039;tcp&#039;
        option &#039;dest_port&#039; &#039;995&#039;
        option &#039;equalize&#039; &#039;1&#039;
        list &#039;use_interface&#039; &#039;wan&#039;
        list &#039;use_interface&#039; &#039;wan2&#039;

#The last example is the default rule. All traffic that did not match before will be route balanced
#over all three interfaces. Option equalize is available, but to maintain compatibility we leave it
#out for now.

config &#039;rule&#039;
        option &#039;dest_ip&#039; &#039;0.0.0.0/0&#039;
        #option &#039;equalize&#039; &#039;1&#039;
        list &#039;use_interface&#039; &#039;wan&#039;
        list &#039;use_interface&#039; &#039;wan2&#039;
        list &#039;use_interface&#039; &#039;wan3&#039;</code></pre></div><div class="codebox"><pre><code>/etc/config/firewall
config defaults
        option syn_flood &#039;1&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;lan&#039;
        option network &#039;lan&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        option network &#039;wan wan2&#039;

config forwarding
        option src &#039;lan&#039;
        option dest &#039;wan&#039;

config rule
        option name &#039;Allow-DHCP-Renew&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;68&#039;
        option target &#039;ACCEPT&#039;
        option family &#039;ipv4&#039;

config rule
        option name &#039;Allow-Ping&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option icmp_type &#039;echo-request&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-DHCPv6&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option src_ip &#039;fe80::/10&#039;
        option src_port &#039;547&#039;
        option dest_ip &#039;fe80::/10&#039;
        option dest_port &#039;546&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Input&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        list icmp_type &#039;router-solicitation&#039;
        list icmp_type &#039;neighbour-solicitation&#039;
        list icmp_type &#039;router-advertisement&#039;
        list icmp_type &#039;neighbour-advertisement&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Forward&#039;
        option src &#039;wan&#039;
        option dest &#039;*&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config include
        option path &#039;/etc/firewall.user&#039;

config zone
        option name &#039;wan2&#039;
        option input &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option network &#039; &#039;

root@OpenWrt:/# clear
root@OpenWrt:/# cat /etc/config/firewall

config defaults
        option syn_flood &#039;1&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;lan&#039;
        option network &#039;lan&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        option network &#039;wan wan2&#039;

config forwarding
        option src &#039;lan&#039;
        option dest &#039;wan&#039;

config rule
        option name &#039;Allow-DHCP-Renew&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;68&#039;
        option target &#039;ACCEPT&#039;
        option family &#039;ipv4&#039;

config rule
        option name &#039;Allow-Ping&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option icmp_type &#039;echo-request&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-DHCPv6&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option src_ip &#039;fe80::/10&#039;
        option src_port &#039;547&#039;
        option dest_ip &#039;fe80::/10&#039;
        option dest_port &#039;546&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Input&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        list icmp_type &#039;router-solicitation&#039;
        list icmp_type &#039;neighbour-solicitation&#039;
        list icmp_type &#039;router-advertisement&#039;
        list icmp_type &#039;neighbour-advertisement&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Forward&#039;
        option src &#039;wan&#039;
        option dest &#039;*&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config include
        option path &#039;/etc/firewall.user&#039;

config zone
        option name &#039;wan2&#039;
        option input &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option network &#039; &#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 3 Aug 2012, 00:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173915">
				<div class="post-metadata">
					<div class="post-num">Post #255</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						3 Aug 2012, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve finally made it work just got a typo error &quot;confiig&quot; instead of config on wan mwan2.<br />Hmm, I don&#039;t get how load balancing work, well I was expecting that it would combine the speed of my ISP both my ISP which is 1.7Mbps and 2.4Mbps. It should atleast get more than 3Mbps but it didn&#039;t or atleast it would increase my torrent DL speed.<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         180.191.121.1   0.0.0.0         UG    1      0        0 pppoe-wan
0.0.0.0         192.168.224.1   0.0.0.0         UG    2      0        0 eth0.3
180.191.121.1   0.0.0.0         255.255.255.255 UH    0      0        0 pppoe-wan
192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
192.168.224.0   0.0.0.0         255.255.224.0   U     2      0        0 eth0.3

root@OpenWrt:~# ip rule show
0:      from all lookup local
192:    from 180.191.121.85 fwmark 0x0/0x8000 lookup 1
193:    from 192.168.254.239 fwmark 0x0/0x8000 lookup 2
256:    from all fwmark 0x100/0xff00 lookup 1
257:    from all fwmark 0x200/0xff00 lookup 2
258:    from all fwmark 0x300/0xff00 lookup 3
32766:  from all lookup main
32767:  from all lookup default

root@OpenWrt:~# ip route list table 3
default  metric 1
        nexthop via 192.168.224.1  dev eth0.3 weight 1
        nexthop via 180.191.121.1  dev pppoe-wan weight 1

root@OpenWrt:~# iptables -L mwan2_pre -t mangle -v
Chain mwan2_pre (2 references)
 pkts bytes target     prot opt in     out     source               destination 
 3110 1313K CONNMARK   all  --  any    any     anywhere             anywhere            CONNMARK restore mask 0xff00
   67  3428 MARK       all  --  eth0.3 any     anywhere             anywhere            MARK xset 0x8200/0xff00
  861  992K MARK       all  --  pppoe-wan any     anywhere             anywhere            MARK xset 0x8100/0xff00
 2182  317K mwan2_default  all  --  any    any     anywhere             anywhere            mark match !0x8000/0x8000
  511 44406 mwan2_rules  all  --  any    any     anywhere             anywhere            mark match 0x0/0xff00

root@OpenWrt:~# iptables -L mwan2_post -t mangle -v
Chain mwan2_post (1 references)
 pkts bytes target     prot opt in     out     source               destination 
   18  1512 MARK       all  --  any    eth0.3  anywhere             anywhere            mark match !0x8000/0x8000 MARK xset 0x200/0xff00
  661 44905 MARK       all  --  any    pppoe-wan  anywhere             anywhere            mark match !0x8000/0x8000 MARK xset 0x100/0xff00
  627  183K MARK       all  --  any    any     anywhere             anywhere            mark match 0x8000/0x8000 MARK and 0xffff7fff
 1488  246K CONNMARK   all  --  any    any     anywhere             anywhere            CONNMARK save mask 0xff00

root@OpenWrt:~# iptables -L mwan2_rules -t mangle -v
Chain mwan2_rules (1 references)
 pkts bytes target     prot opt in     out     source               destination 
    0     0 MARK       tcp  --  any    any     192.168.0.0/24       anywhere            multiport sports 0:65535 multiport dports nntp,nntps mark match 0x0/0xff00 MARK set 0x100
    0     0 MARK       tcp  --  any    any     192.168.0.0/24       anywhere            multiport sports 0:65535 multiport dports pop3s mark match 0x0/0xff00 MARK set 0x200</code></pre></div><p>It&#039;s not being used.<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# tail -f /proc/net/nf_conntrack | grep 180.191.21.241
ipv4     2 tcp      6 15 TIME_WAIT src=192.168.0.250 dst=23.48.111.144 sport=49308 dport=80 packets=4 bytes=172 src=23.48.111.144 dst=180.191.21.241 sport=80 dport=49308 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 5 TIME_WAIT src=192.168.0.250 dst=204.11.33.59 sport=49302 dport=80 packets=4 bytes=172 src=204.11.33.59 dst=180.191.21.241 sport=80 dport=49302 packets=4 bytes=172 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 95 TIME_WAIT src=192.168.0.250 dst=23.58.242.110 sport=49406 dport=443 packets=4 bytes=172 src=23.58.242.110 dst=180.191.21.241 sport=443 dport=49406 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 106 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 55 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 105 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 54 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 71 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 20 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 119 TIME_WAIT src=192.168.0.250 dst=74.204.71.247 sport=49432 dport=80 packets=6 bytes=276 src=74.204.71.247 dst=180.191.21.241 sport=80 dport=49432 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 59 TIME_WAIT src=192.168.0.250 dst=69.171.237.32 sport=49401 dport=80 packets=4 bytes=172 src=69.171.237.32 dst=180.191.21.241 sport=80 dport=49401 packets=3 bytes=128 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=72.165.61.176 sport=64216 dport=27017 packets=554 bytes=44212 src=72.165.61.176 dst=180.191.21.241 sport=27017 dport=64216 packets=580 bytes=159620 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3600 ESTABLISHED src=192.168.0.250 dst=74.125.235.34 sport=49495 dport=80 packets=2 bytes=92 src=74.125.235.34 dst=180.191.21.241 sport=80 dport=49495 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 udp      17 51 src=180.191.21.241 dst=8.8.8.8 sport=2550 dport=53 packets=1 bytes=59 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=2550 packets=1 bytes=75 mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=49488 dport=80 packets=2 bytes=92 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=49488 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 udp      17 59 src=180.191.21.241 dst=8.8.8.8 sport=57217 dport=53 packets=1 bytes=65 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=57217 packets=1 bytes=175 mark=256 use=2
ipv4     2 tcp      6 120 SYN_SENT src=192.168.0.250 dst=203.106.50.18 sport=49477 dport=80 packets=1 bytes=52 [UNREPLIED] src=203.106.50.18 dst=180.191.21.241 sport=80 dport=49477 packets=0 bytes=0 mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=49486 dport=80 packets=2 bytes=92 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=49486 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 120 SYN_SENT src=192.168.0.250 dst=74.125.235.32 sport=49506 dport=80 packets=1 bytes=52 [UNREPLIED] src=74.125.235.32 dst=180.191.21.241 sport=80 dport=49506 packets=0 bytes=0 mark=256 use=2
ipv4     2 tcp      6 120 SYN_SENT src=192.168.0.250 dst=58.26.1.65 sport=49478 dport=80 packets=1 bytes=52 [UNREPLIED] src=58.26.1.65 dst=180.191.21.241 sport=80 dport=49478 packets=0 bytes=0 mark=256 use=2
ipv4     2 udp      17 58 src=180.191.21.241 dst=8.8.8.8 sport=26416 dport=53 packets=1 bytes=52 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=26416 packets=1 bytes=68 mark=256 use=2
ipv4     2 tcp      6 49 TIME_WAIT src=192.168.0.250 dst=23.48.111.144 sport=49320 dport=80 packets=7 bytes=854 src=23.48.111.144 dst=180.191.21.241 sport=80 dport=49320 packets=6 bytes=701 [ASSURED] mark=256 use=2
ipv4     2 icmp     1 22 src=180.191.21.241 dst=173.194.72.106 type=8 code=0 id=63269 packets=1 bytes=84 src=173.194.72.106 dst=180.191.21.241 type=0 code=0 id=63269 packets=1 bytes=84 mark=256 use=2
ipv4     2 tcp      6 59 TIME_WAIT src=192.168.0.250 dst=74.204.71.245 sport=49383 dport=80 packets=6 bytes=276 src=74.204.71.245 dst=180.191.21.241 sport=80 dport=49383 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 120 SYN_SENT src=192.168.0.250 dst=74.125.235.32 sport=49507 dport=80 packets=1 bytes=52 [UNREPLIED] src=74.125.235.32 dst=180.191.21.241 sport=80 dport=49507 packets=0 bytes=0 mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=74.125.31.105 sport=65465 dport=443 packets=537 bytes=110116 src=74.125.31.105 dst=180.191.21.241 sport=443 dport=65465 packets=831 bytes=635626 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=49489 dport=80 packets=2 bytes=92 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=49489 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3583 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=65395 dport=80 packets=38 bytes=3621 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=65395 packets=59 bytes=58743 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 63 TIME_WAIT src=192.168.0.250 dst=173.194.38.170 sport=65466 dport=443 packets=28 bytes=2295 src=173.194.38.170 dst=180.191.21.241 sport=443 dport=65466 packets=36 bytes=15789 [ASSURED] mark=256 use=2
ipv4     2 udp      17 85 src=184.175.37.228 dst=180.191.21.241 sport=65061 dport=12265 packets=16 bytes=2344 src=192.168.0.250 dst=184.175.37.228 sport=12265 dport=65061 packets=12 bytes=886 [ASSURED] mark=256 use=2
ipv4     2 udp      17 47 src=180.191.21.241 dst=8.8.8.8 sport=4878 dport=53 packets=1 bytes=61 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=4878 packets=1 bytes=258 mark=256 use=2
ipv4     2 tcp      6 3581 ESTABLISHED src=192.168.0.250 dst=74.125.235.47 sport=49431 dport=443 packets=5 bytes=678 src=74.125.235.47 dst=180.191.21.241 sport=443 dport=49431 packets=4 bytes=385 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 119 TIME_WAIT src=192.168.0.250 dst=23.48.98.110 sport=49455 dport=443 packets=4 bytes=172 src=23.48.98.110 dst=180.191.21.241 sport=443 dport=49455 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 icmp     1 6 src=180.191.21.241 dst=173.194.72.106 type=8 code=0 id=57893 packets=1 bytes=84 src=173.194.72.106 dst=180.191.21.241 type=0 code=0 id=57893 packets=1 bytes=84 mark=256 use=2
ipv4     2 tcp      6 104 TIME_WAIT src=183.89.92.180 dst=180.191.21.241 sport=38061 dport=12265 packets=4 bytes=284 src=192.168.0.250 dst=183.89.92.180 sport=12265 dport=38061 packets=3 bytes=164 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3599 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=49490 dport=80 packets=2 bytes=92 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=49490 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3598 ESTABLISHED src=192.168.0.250 dst=173.194.38.172 sport=49461 dport=443 packets=6 bytes=603 src=173.194.38.172 dst=180.191.21.241 sport=443 dport=49461 packets=6 bytes=2720 [ASSURED] mark=256 use=2
ipv4     2 udp      17 59 src=180.191.21.241 dst=8.8.8.8 sport=54514 dport=53 packets=1 bytes=58 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=54514 packets=1 bytes=263 mark=256 use=2
ipv4     2 tcp      6 59 TIME_WAIT src=192.168.0.250 dst=23.58.242.110 sport=49406 dport=443 packets=4 bytes=172 src=23.58.242.110 dst=180.191.21.241 sport=443 dport=49406 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 70 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 19 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 61 TIME_WAIT src=192.168.0.250 dst=173.194.38.170 sport=65466 dport=443 packets=28 bytes=2295 src=173.194.38.170 dst=180.191.21.241 sport=443 dport=65466 packets=36 bytes=15789 [ASSURED] mark=256 use=2
ipv4     2 udp      17 83 src=184.175.37.228 dst=180.191.21.241 sport=65061 dport=12265 packets=16 bytes=2344 src=192.168.0.250 dst=184.175.37.228 sport=12265 dport=65061 packets=12 bytes=886 [ASSURED] mark=256 use=2
ipv4     2 udp      17 45 src=180.191.21.241 dst=8.8.8.8 sport=4878 dport=53 packets=1 bytes=61 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=4878 packets=1 bytes=258 mark=256 use=2
ipv4     2 tcp      6 3579 ESTABLISHED src=192.168.0.250 dst=74.125.235.47 sport=49431 dport=443 packets=5 bytes=678 src=74.125.235.47 dst=180.191.21.241 sport=443 dport=49431 packets=4 bytes=385 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 117 TIME_WAIT src=192.168.0.250 dst=23.48.98.110 sport=49455 dport=443 packets=4 bytes=172 src=23.48.98.110 dst=180.191.21.241 sport=443 dport=49455 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 icmp     1 4 src=180.191.21.241 dst=173.194.72.106 type=8 code=0 id=57893 packets=1 bytes=84 src=173.194.72.106 dst=180.191.21.241 type=0 code=0 id=57893 packets=1 bytes=84 mark=256 use=2
ipv4     2 tcp      6 102 TIME_WAIT src=183.89.92.180 dst=180.191.21.241 sport=38061 dport=12265 packets=4 bytes=284 src=192.168.0.250 dst=183.89.92.180 sport=12265 dport=38061 packets=3 bytes=164 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3597 ESTABLISHED src=192.168.0.250 dst=74.125.235.37 sport=49490 dport=80 packets=2 bytes=92 src=74.125.235.37 dst=180.191.21.241 sport=80 dport=49490 packets=1 bytes=52 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 3596 ESTABLISHED src=192.168.0.250 dst=173.194.38.172 sport=49461 dport=443 packets=6 bytes=603 src=173.194.38.172 dst=180.191.21.241 sport=443 dport=49461 packets=6 bytes=2720 [ASSURED] mark=256 use=2
ipv4     2 udp      17 57 src=180.191.21.241 dst=8.8.8.8 sport=54514 dport=53 packets=1 bytes=58 src=8.8.8.8 dst=180.191.21.241 sport=53 dport=54514 packets=1 bytes=263 mark=256 use=2
ipv4     2 tcp      6 57 TIME_WAIT src=192.168.0.250 dst=23.58.242.110 sport=49406 dport=443 packets=4 bytes=172 src=23.58.242.110 dst=180.191.21.241 sport=443 dport=49406 packets=2 bytes=92 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 68 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 17 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 67 TIME_WAIT src=192.168.0.250 dst=209.85.175.84 sport=65396 dport=443 packets=45 bytes=16310 src=209.85.175.84 dst=180.191.21.241 sport=443 dport=65396 packets=49 bytes=12086 [ASSURED] mark=256 use=2
ipv4     2 tcp      6 16 TIME_WAIT src=192.168.0.250 dst=173.245.61.159 sport=49340 dport=80 packets=9 bytes=879 src=173.245.61.159 dst=180.191.21.241 sport=80 dport=49340 packets=12 bytes=5991 [ASSURED] mark=256 use=2
^C
root@OpenWrt:~# tail -f /proc/net/nf_conntrack | grep 192.168.254.239
ipv4     2 icmp     1 3 src=192.168.254.239 dst=173.194.72.105 type=8 code=0 id=62501 packets=1 bytes=84 src=173.194.72.105 dst=192.168.254.239 type=0 code=0 id=62501 packets=1 bytes=84 mark=512 use=2</code></pre></div><p>My Config<br /></p><div class="codebox"><pre><code>##Network##
root@OpenWrt:~# cat /etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.0.254&#039;
        option netmask &#039;255.255.255.0&#039;

config interface &#039;wan&#039;
        option ifname &#039;eth0.2&#039;
        option proto &#039;pppoe&#039;
        option username &#039;carllesliefitado@globelines.com.ph&#039;
        option password &#039;846332524&#039;
        option metric &#039;1&#039;

config interface &#039;wan2&#039;
        option ifname &#039;eth0.3&#039;
        option proto &#039;dhcp&#039;
        option macaddr &#039;1C:AF:F7:38:9B:33&#039;
        option metric &#039;2&#039;

##Firewall##
root@OpenWrt:~# cat /etc/config/firewall

config defaults
        option syn_flood &#039;1&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option drop_invalid &#039;1&#039;

config zone
        option name &#039;lan&#039;
        option network &#039;lan&#039;
        option input &#039;ACCEPT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;

config zone
        option name &#039;wan&#039;
        option input &#039;REJECT&#039;
        option output &#039;ACCEPT&#039;
        option forward &#039;REJECT&#039;
        option masq &#039;1&#039;
        option mtu_fix &#039;1&#039;
        option network &#039;wan wan2&#039;

config forwarding
        option src &#039;lan&#039;
        option dest &#039;wan&#039;

config rule
        option name &#039;Allow-DHCP-Renew&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option dest_port &#039;68&#039;
        option target &#039;ACCEPT&#039;
        option family &#039;ipv4&#039;

config rule
        option name &#039;Allow-Ping&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        option icmp_type &#039;echo-request&#039;
        option family &#039;ipv4&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-DHCPv6&#039;
        option src &#039;wan&#039;
        option proto &#039;udp&#039;
        option src_ip &#039;fe80::/10&#039;
        option src_port &#039;547&#039;
        option dest_ip &#039;fe80::/10&#039;
        option dest_port &#039;546&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Input&#039;
        option src &#039;wan&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        list icmp_type &#039;router-solicitation&#039;
        list icmp_type &#039;neighbour-solicitation&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config rule
        option name &#039;Allow-ICMPv6-Forward&#039;
        option src &#039;wan&#039;
        option dest &#039;*&#039;
        option proto &#039;icmp&#039;
        list icmp_type &#039;echo-request&#039;
        list icmp_type &#039;echo-reply&#039;
        list icmp_type &#039;destination-unreachable&#039;
        list icmp_type &#039;packet-too-big&#039;
        list icmp_type &#039;time-exceeded&#039;
        list icmp_type &#039;bad-header&#039;
        list icmp_type &#039;unknown-header-type&#039;
        option limit &#039;1000/sec&#039;
        option family &#039;ipv6&#039;
        option target &#039;ACCEPT&#039;

config include
        option path &#039;/etc/firewall.user&#039;

##MWAN2##
root@OpenWrt:~# cat /etc/config/mwan2
config &#039;interface&#039; &#039;wan&#039;
        option &#039;enabled&#039; &#039;1&#039;
        option &#039;metric&#039; &#039;1&#039;
        option &#039;weight&#039; &#039;3&#039;
        option &#039;track_ip&#039; &#039;www.google.com&#039;
        option &#039;count&#039; &#039;1&#039;
        option &#039;timeout&#039; &#039;2&#039;
        option &#039;interval&#039; &#039;5&#039;
        option &#039;down&#039; &#039;3&#039;
        option &#039;up&#039; &#039;8&#039;

config &#039;interface&#039; &#039;wan2&#039;
        option &#039;enabled&#039; &#039;1&#039;
        option &#039;metric&#039; &#039;1&#039;
        option &#039;weight&#039; &#039;1&#039;
        option &#039;track_ip&#039; &#039;www.google.com&#039;
        option &#039;count&#039; &#039;1&#039;
        option &#039;timeout&#039; &#039;2&#039;
        option &#039;interval&#039; &#039;5&#039;
        option &#039;down&#039; &#039;3&#039;
        option &#039;up&#039; &#039;8&#039;

config &#039;rule&#039;
        option &#039;proto&#039; &#039;tcp&#039;
        option &#039;src_ip&#039; &#039;192.168.0.0/24&#039;
        option &#039;dest_port&#039; &#039;119,563&#039;
        list &#039;use_interface&#039; &#039;wan&#039;

config &#039;rule&#039;
        option &#039;proto&#039; &#039;tcp&#039;
        option &#039;src_ip&#039; &#039;192.168.0.0/24&#039;
        option &#039;dest_port&#039; &#039;995&#039;
        list &#039;use_interface&#039; &#039;wan2&#039;</code></pre></div><p>Also when you reload your netifd &quot;ubus call network reload&quot; the table would get like this which destroys the table<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ip route list table 3
default via 180.191.14.1 dev pppoe-wan  metric 1</code></pre></div>											<p class="post-edited">(Last edited by <strong>gendouhydeist</strong> on 3 Aug 2012, 07:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173917">
				<div class="post-metadata">
					<div class="post-num">Post #256</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						3 Aug 2012, 01:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>hey adze here is my current setting what should i change in the following configs to get mwan2 to load balance wlan0 and eth0.1</p></blockquote></div><p>Hi drektar,</p><br /><p>Your network config does not look like it will function at all. Be sure that you can ping google from both your wan interfaces, before even trying to configure mwan2.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173923">
				<div class="post-metadata">
					<div class="post-num">Post #257</div>
					<div class="post-author">mocho</div>
					<div class="post-datetime">
						3 Aug 2012, 04:17					</div>
				</div>
				<div class="post-content content">
					<p>thanks for this nice package</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173944">
				<div class="post-metadata">
					<div class="post-num">Post #258</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						3 Aug 2012, 11:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>I&#039;ve finally made it work just got a typo error &quot;confiig&quot; instead of config on wan mwan2.<br />Hmm, I don&#039;t get how load balancing work, well I was expecting that it would combine the speed of my ISP both my ISP which is 1.7Mbps and 2.4Mbps. It should atleast get more than 3Mbps but it didn&#039;t or atleast it would increase my torrent DL speed.<br /></p><div class="codebox"><pre><code>...</code></pre></div></blockquote></div><p>Where is your mwan2 rule that says it should load-balance? You don&#039;t even have a default 0.0.0.0/0 rule...</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 3 Aug 2012, 11:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173945">
				<div class="post-metadata">
					<div class="post-num">Post #259</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						3 Aug 2012, 12:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>I&#039;ve finally made it work just got a typo error &quot;confiig&quot; instead of config on wan mwan2.<br />Hmm, I don&#039;t get how load balancing work, well I was expecting that it would combine the speed of my ISP both my ISP which is 1.7Mbps and 2.4Mbps. It should atleast get more than 3Mbps but it didn&#039;t or atleast it would increase my torrent DL speed.<br /></p><div class="codebox"><pre><code>...</code></pre></div></blockquote></div><p>Where is your mwan2 rule that says it should load-balance? You don&#039;t even have a default 0.0.0.0/0 rule...</p></blockquote></div><p>Funny thing is my ISP2 is on maintenance. Oh yeah this should do.</p><p>Oh BTW is there a rule that is site or IP based that will only use specified interface? from what I&#039;m seeing from the example is only port based.</p><p>Ex.<br /><a href="http://www.google.com">www.google.com</a> will only use wan2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173946">
				<div class="post-metadata">
					<div class="post-num">Post #260</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						3 Aug 2012, 12:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>Oh BTW is there a rule that is site or IP based that will only use specified interface? from what I&#039;m seeing from the example is only port based.</p></blockquote></div><p>But ofcourse..&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />&nbsp; Look at the examples in this thread please.</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 3 Aug 2012, 12:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173949">
				<div class="post-metadata">
					<div class="post-num">Post #261</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						3 Aug 2012, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>Oh BTW is there a rule that is site or IP based that will only use specified interface? from what I&#039;m seeing from the example is only port based.</p></blockquote></div><p>But ofcourse..&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />&nbsp; Look at the examples in this thread please.</p></blockquote></div><p>ok thanks man! found it!</p><div class="codebox"><pre><code>config &#039;rule&#039;
    option &#039;dest_ip&#039; &#039;10.38.0.0/16&#039;
    list &#039;use_interface&#039; &#039;rds&#039;</code></pre></div><p>thanks for this awesome package and for your awesome help <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Is there a way to reload mwan2 without rebooting?</p>											<p class="post-edited">(Last edited by <strong>gendouhydeist</strong> on 3 Aug 2012, 12:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173991">
				<div class="post-metadata">
					<div class="post-num">Post #262</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						3 Aug 2012, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>Somewhere in the topic I saw that mwan2 could be compiled into the image. I am playing at the moment with a trunk snapshot image for a TP-Link MR3220&nbsp; - managed to build a custom image capable of triple WAN handling (all needed included in the 4MB image) and cannot find the package in the menuconfig. All packaged are included (./scripts/feeds install -a). <br />mwan2 will be of great use if added in this image.</p><p>Is it possible mwan2 to be integrated into the image?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173992">
				<div class="post-metadata">
					<div class="post-num">Post #263</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						3 Aug 2012, 19:56					</div>
				</div>
				<div class="post-content content">
					<p>Yes is it, go to trunk/package wget <a href="http://213.136.13.52/mwan2_1.4-2.tar.gz">http://213.136.13.52/mwan2_1.4-2.tar.gz</a><br />then tar xvfz mwan2_1.4-2.tar.gz go to make menuconfig on network include mwan2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174027">
				<div class="post-metadata">
					<div class="post-num">Post #264</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						4 Aug 2012, 04:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi Adze, I also tried to use IP Address instead of hostname it&#039;s still the same. Because the site is whitelisted my IP on second ISP. Also the site is using static address.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174044">
				<div class="post-metadata">
					<div class="post-num">Post #265</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						4 Aug 2012, 13:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>Hi Adze, I also tried to use IP Address instead of hostname it&#039;s still the same. Because the site is whitelisted my IP on second ISP. Also the site is using static address.</p></blockquote></div><p>What i would do in your situation is use tcpdump to check wether this site uses additional ip addresses, or that mwan2 does not funtion right. Try to dump a specific host on both interfaces. The tool netstat-nat also helps in finding the issue.</p><p>Can&#039;t say what your problem is on the basis of the info you have given...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174045">
				<div class="post-metadata">
					<div class="post-num">Post #266</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						4 Aug 2012, 14:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I don&#039;t know if this could help you. My IP Address is 180.191.22.200 (wan) and 121.1.48.1 (wan2). My wan2 is block by blackcats-games.net also my wan2 is not behind not only the first one.<br /></p><div class="codebox"><pre><code>config &#039;rule&#039;
                option &#039;dest_ip&#039; &#039;70.33.21771&#039;
                list &#039;use_interface&#039; &#039;wan&#039;</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# tcpdump host blackcats-games.net -n
tcpdump: WARNING: eth0: no IPv4 address assigned
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
22:46:55.092897 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [s], seq 3467544094, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:55.093187 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [s], seq 3467544094, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:55.234750 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [s], seq 1871163978, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:55.234974 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [s], seq 1871163978, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:55.695383 IP 70.33.217.71.80 &gt; 192.168.254.239.49369: Flags [S.], seq 225465041, ack 3467544095, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:55.695554 IP 70.33.217.71.80 &gt; 192.168.0.250.49369: Flags [S.], seq 225465041, ack 3467544095, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:55.696039 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:55.696242 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:55.696356 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [P.], seq 1:422, ack 1, win 256, length 421
22:46:55.696478 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [P.], seq 1:422, ack 1, win 256, length 421
22:46:56.813096 IP 70.33.217.71.80 &gt; 192.168.254.239.49369: Flags [.], ack 422, win 54, length 0
22:46:56.813232 IP 70.33.217.71.80 &gt; 192.168.0.250.49369: Flags [.], ack 422, win 54, length 0
22:46:56.813258 IP 70.33.217.71.80 &gt; 192.168.254.239.49369: Flags [F.], seq 471, ack 422, win 54, length 0
22:46:56.813350 IP 70.33.217.71.80 &gt; 192.168.0.250.49369: Flags [F.], seq 471, ack 422, win 54, length 0
22:46:56.813527 IP 70.33.217.71.80 &gt; 192.168.254.239.49369: Flags [P.], seq 1:471, ack 422, win 54, length 470
22:46:56.813609 IP 70.33.217.71.80 &gt; 192.168.0.250.49369: Flags [P.], seq 1:471, ack 422, win 54, length 470
22:46:56.813756 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:56.813900 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:56.814071 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [.], ack 472, win 254, length 0
22:46:56.814188 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [.], ack 472, win 254, length 0
22:46:56.814338 IP 192.168.0.250.49369 &gt; 70.33.217.71.80: Flags [F.], seq 422, ack 472, win 254, length 0
22:46:56.814446 IP 192.168.254.239.49369 &gt; 70.33.217.71.80: Flags [F.], seq 422, ack 472, win 254, length 0
22:46:57.027751 IP 70.33.217.71.80 &gt; 192.168.254.239.49369: Flags [.], ack 423, win 54, length 0
22:46:57.027876 IP 70.33.217.71.80 &gt; 192.168.0.250.49369: Flags [.], ack 423, win 54, length 0
22:46:58.230882 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [s], seq 1871163978, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:58.231059 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [s], seq 1871163978, win 8192, options [mss 1460,nop,wscale 8,nop,nop,sackOK], length 0
22:46:58.625460 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [S.], seq 2288208298, ack 1871163979, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:58.625602 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [S.], seq 2288208298, ack 1871163979, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:58.625625 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [S.], seq 2288208298, ack 1871163979, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:58.625692 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [S.], seq 2288208298, ack 1871163979, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
22:46:58.625918 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:58.626061 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:46:58.626296 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, options [nop,nop,sack 1 {0:1}], length 0
22:46:58.626419 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, options [nop,nop,sack 1 {0:1}], length 0
22:47:08.451109 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [P.], seq 1:465, ack 1, win 256, length 464
22:47:08.451273 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [P.], seq 1:465, ack 1, win 256, length 464
22:47:08.658062 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [.], ack 465, win 54, length 0
22:47:08.658188 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [.], ack 465, win 54, length 0
22:47:08.662979 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [F.], seq 471, ack 465, win 54, length 0
22:47:08.663122 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [F.], seq 471, ack 465, win 54, length 0
22:47:08.663398 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:47:08.663553 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [.], ack 1, win 256, length 0
22:47:08.663599 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [P.], seq 1:471, ack 465, win 54, length 470
22:47:08.663701 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [P.], seq 1:471, ack 465, win 54, length 470
22:47:08.664029 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [.], ack 472, win 254, length 0
22:47:08.664167 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [.], ack 472, win 254, length 0
22:47:08.664448 IP 192.168.0.250.49370 &gt; 70.33.217.71.80: Flags [F.], seq 465, ack 472, win 254, length 0
22:47:08.664589 IP 192.168.254.239.49370 &gt; 70.33.217.71.80: Flags [F.], seq 465, ack 472, win 254, length 0
22:47:08.871966 IP 70.33.217.71.80 &gt; 192.168.254.239.49370: Flags [.], ack 466, win 54, length 0
22:47:08.872114 IP 70.33.217.71.80 &gt; 192.168.0.250.49370: Flags [.], ack 466, win 54, length 0</code></pre></div><div class="codebox"><pre><code>WAN2
Tracing route to blackcats-games.net [70.33.217.71]
over a maximum of 30 hops:

  1    &lt;1 ms    &lt;1 ms    &lt;1 ms  OpenWrt.lan [192.168.0.254] 
  2     *        *        *     Request timed out.
  3    53 ms   539 ms   151 ms  121.1.48.1 
  4   371 ms    39 ms    12 ms  121.54.3.201 
  5    68 ms   194 ms   144 ms  203.87.132.30 
  6    28 ms    24 ms    13 ms  203.87.132.69 
  7   154 ms    92 ms    34 ms  210.213.244.221.static.pldt.net [210.213.244.221] 
  8    46 ms    44 ms    39 ms  210.213.130.74.static.pldt.net [210.213.130.74] 
  9     *      176 ms    25 ms  210.213.130.137.static.pldt.net [210.213.130.137] 
 10   210 ms   265 ms   192 ms  so-4-0-0.edge5.Seattle1.Level3.net [4.30.140.1] 
 11   206 ms   209 ms   229 ms  ae-2-52.edge1.Seattle3.Level3.net [4.69.147.170] 
 12   205 ms   221 ms   204 ms  PEER-1-NETW.edge1.Seattle3.Level3.net [4.59.232.2] 
 13     *        *        *     Request timed out.
 14     *        *        *     Request timed out.
 15     *        *        *     Request timed out.
 16   218 ms   772 ms   214 ms  blackcats-games.net [70.33.217.71] 

WAN
Tracing route to blackcats-games.net [70.33.217.71]
over a maximum of 30 hops:

  1    &lt;1 ms    &lt;1 ms    &lt;1 ms  OpenWrt.lan [192.168.0.254] 
  2    20 ms    21 ms    20 ms  180.191.22.1 
  3    20 ms    20 ms    20 ms  10.109.9.65 
  4    21 ms    20 ms    21 ms  120.28.0.197 
  5    23 ms    23 ms    22 ms  120.28.4.86 
  6   161 ms   161 ms   161 ms  120.28.0.78 
  7   165 ms   166 ms   164 ms  peer1.net [198.32.146.13] 
  8   173 ms   173 ms   173 ms  10ge-ten6-1.sj-mkp2-dis-1.peer1.net [216.187.88.129] 
  9   172 ms   171 ms   173 ms  10ge.ten1-1.sj-mkp16-dis-1.peer1.net [216.187.88.133] 
 10   191 ms   192 ms   191 ms  10ge.xe-0-0-0.sea-coloc-dis-1.peer1.net [216.187.88.201] 
 11   194 ms   195 ms   194 ms  10ge.xe-0-0-0.van-hc21e-cor-1.peer1.net [216.187.89.185] 
 12   195 ms   194 ms   195 ms  10ge.xe-0-2-0.van-hc21e-dis-1.peer1.net [216.187.88.122] 
 13   200 ms   201 ms   197 ms  candiru.did-it.com [216.187.113.116] 
 14   195 ms   194 ms   195 ms  blackcats-games.net [70.33.217.71] 
Trace complete.</code></pre></div>											<p class="post-edited">(Last edited by <strong>gendouhydeist</strong> on 6 Aug 2012, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174791">
				<div class="post-metadata">
					<div class="post-num">Post #267</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						13 Aug 2012, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>Your rule is missing a . (dot).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174873">
				<div class="post-metadata">
					<div class="post-num">Post #268</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						14 Aug 2012, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I might mistype it here so disregard that. I&#039;ve been double and triple checking, I even tried tried to set rules in firewall. I didn&#039;t run put this code at the same time. I&#039;m just showing you what I did.<br />BTW I&#039;m using SVN Attitude Adjustment build.<br />/etc/config/mwan2<br /></p><div class="codebox"><pre><code>##NetDNA
config &#039;rule&#039;
    option &#039;dest_ip&#039; &#039;50.23.98.19&#039;
    list &#039;use_interface&#039; &#039;wan2&#039;

config &#039;rule&#039;
    option &#039;dest_ip&#039; &#039;69.174.36.21&#039;
    list &#039;use_interface&#039; &#039;wan2&#039;

config &#039;rule&#039;
    option &#039;dest_ip&#039; &#039;108.161.181.200&#039;
    list &#039;use_interface&#039; &#039;wan2&#039;

##Whitelisted
config &#039;rule&#039;
    option &#039;dest_ip&#039; &#039;70.33.217.71&#039;
    list &#039;use_interface&#039; &#039;wan&#039;

config &#039;rule&#039;
        option &#039;dest_ip&#039; &#039;70.33.217.25&#039;
        list &#039;use_interface&#039; &#039;wan&#039;</code></pre></div><p>/etc/config/firewall<br /></p><div class="codebox"><pre><code>##NetDNA##
#bo.netdna.com
config rule
        option src      lan
        option dest     wan2
        option dest_ip  108.161.181.200
        option target   ACCEPT

#bazinga.netdna.com
config rule
        option src      lan
        option dest     wan2
        option dest_ip  50.23.98.19
        option target   ACCEPT

#billing.netdna.com
config rule
        option src      lan
        option dest     wan2
        option dest_ip  69.174.36.21
        option target   ACCEPT

##Redirects
#what.cd
config rule
        option src      lan
        option dest     wan
        option dest_ip  70.33.217.25
        option target   ACCEPT

#blackcats-games.net
config rule
        option src      lan
        option dest     wan
        option dest_ip  70.33.217.71
        option target   ACCEPT</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174880">
				<div class="post-metadata">
					<div class="post-num">Post #269</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						14 Aug 2012, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>OK, config looks good. Please try the following and post the outcome:</p><br /><p>While not browsing to any site on any client, start a tcpdump on the router (&quot;tcpdump tcp port 80 -n &quot;) and then try to access the website blackcats-games.net on a client . I&#039;m curious to see what traffic comes through and how it´s routed...</p><br /><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174925">
				<div class="post-metadata">
					<div class="post-num">Post #270</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						15 Aug 2012, 07:50					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt:~# tcpdump tcp port 80 -n
tcpdump: WARNING: eth0: no IPv4 address assigned
tcpdump: verbose output suppressed, use -v or -vv for full protocol decode
listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes
12:43:05.647544 IP 192.168.0.250.60115 &gt; 70.33.217.71.80: Flags [s], seq 2366124138, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.647862 IP 192.168.254.239.60115 &gt; 70.33.217.71.80: Flags [s], seq 2366124138, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.647922 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [s], seq 1563924847, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648204 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [s], seq 1563924847, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648237 IP 192.168.0.250.60117 &gt; 70.33.217.71.80: Flags [s], seq 3910463144, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648492 IP 192.168.254.239.60117 &gt; 70.33.217.71.80: Flags [s], seq 3910463144, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648582 IP 192.168.0.250.60118 &gt; 70.33.217.71.80: Flags [s], seq 3746632454, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648852 IP 192.168.254.239.60118 &gt; 70.33.217.71.80: Flags [s], seq 3746632454, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.648884 IP 192.168.0.250.60119 &gt; 70.33.217.71.80: Flags [s], seq 3047299835, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.649136 IP 192.168.254.239.60119 &gt; 70.33.217.71.80: Flags [s], seq 3047299835, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.649952 IP 192.168.0.250.60120 &gt; 70.33.217.71.80: Flags [s], seq 1398768834, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.650268 IP 192.168.254.239.60120 &gt; 70.33.217.71.80: Flags [s], seq 1398768834, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:05.878233 IP 70.33.217.71.80 &gt; 192.168.254.239.60116: Flags [S.], seq 4189646201, ack 1563924848, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878395 IP 70.33.217.71.80 &gt; 192.168.0.250.60116: Flags [S.], seq 4189646201, ack 1563924848, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878422 IP 70.33.217.71.80 &gt; 192.168.254.239.60117: Flags [S.], seq 4066531992, ack 3910463145, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878532 IP 70.33.217.71.80 &gt; 192.168.0.250.60117: Flags [S.], seq 4066531992, ack 3910463145, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878613 IP 70.33.217.71.80 &gt; 192.168.254.239.60118: Flags [S.], seq 2980748332, ack 3746632455, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878729 IP 70.33.217.71.80 &gt; 192.168.0.250.60118: Flags [S.], seq 2980748332, ack 3746632455, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878752 IP 70.33.217.71.80 &gt; 192.168.254.239.60119: Flags [S.], seq 1598762177, ack 3047299836, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878845 IP 70.33.217.71.80 &gt; 192.168.0.250.60119: Flags [S.], seq 1598762177, ack 3047299836, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878866 IP 70.33.217.71.80 &gt; 192.168.254.239.60120: Flags [S.], seq 3559081460, ack 1398768835, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878959 IP 70.33.217.71.80 &gt; 192.168.0.250.60120: Flags [S.], seq 3559081460, ack 1398768835, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:05.878980 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879125 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879213 IP 192.168.0.250.60117 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879433 IP 192.168.254.239.60117 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879472 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [P.], seq 1:448, ack 1, win 16425, length 447
12:43:05.879647 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [P.], seq 1:448, ack 1, win 16425, length 447
12:43:05.879676 IP 192.168.0.250.60118 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879827 IP 192.168.254.239.60118 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.879914 IP 192.168.0.250.60119 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.880084 IP 192.168.254.239.60119 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.880113 IP 192.168.0.250.60120 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:05.880261 IP 192.168.254.239.60120 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:06.082564 IP 70.33.217.71.80 &gt; 192.168.254.239.60116: Flags [.], ack 448, win 54, length 0
12:43:06.082702 IP 70.33.217.71.80 &gt; 192.168.0.250.60116: Flags [.], ack 448, win 54, length 0
12:43:06.092594 IP 70.33.217.71.80 &gt; 192.168.254.239.60116: Flags [F.], seq 471, ack 448, win 54, length 0
12:43:06.092742 IP 70.33.217.71.80 &gt; 192.168.0.250.60116: Flags [F.], seq 471, ack 448, win 54, length 0
12:43:06.093056 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:06.093252 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:06.095379 IP 70.33.217.71.80 &gt; 192.168.254.239.60116: Flags [P.], seq 1:471, ack 448, win 54, length 470
12:43:06.095537 IP 70.33.217.71.80 &gt; 192.168.0.250.60116: Flags [P.], seq 1:471, ack 448, win 54, length 470
12:43:06.095858 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [.], ack 472, win 16307, length 0
12:43:06.096049 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [.], ack 472, win 16307, length 0
12:43:06.096278 IP 192.168.0.250.60116 &gt; 70.33.217.71.80: Flags [F.], seq 448, ack 472, win 16307, length 0
12:43:06.096486 IP 192.168.254.239.60116 &gt; 70.33.217.71.80: Flags [F.], seq 448, ack 472, win 16307, length 0
12:43:06.295158 IP 70.33.217.71.80 &gt; 192.168.254.239.60116: Flags [.], ack 449, win 54, length 0
12:43:06.295318 IP 70.33.217.71.80 &gt; 192.168.0.250.60116: Flags [.], ack 449, win 54, length 0
12:43:07.891068 IP 192.168.0.250.60086 &gt; 173.194.38.137.80: Flags [.], seq 2520275771:2520275772, ack 3191710257, win 16425, length 1
12:43:07.891270 IP 192.168.254.239.60086 &gt; 173.194.38.137.80: Flags [.], seq 2520275771:2520275772, ack 3191710257, win 16425, length 1
12:43:07.892073 IP 192.168.0.250.60085 &gt; 173.194.38.137.80: Flags [.], seq 615738033:615738034, ack 3182531800, win 16425, length 1
12:43:07.892291 IP 192.168.254.239.60085 &gt; 173.194.38.137.80: Flags [.], seq 615738033:615738034, ack 3182531800, win 16425, length 1
12:43:07.935897 IP 173.194.38.137.80 &gt; 192.168.254.239.60086: Flags [.], ack 1, win 241, options [nop,nop,sack 1 {0:1}], length 0
12:43:07.936041 IP 173.194.38.137.80 &gt; 192.168.0.250.60086: Flags [.], ack 1, win 241, options [nop,nop,sack 1 {0:1}], length 0
12:43:07.936066 IP 173.194.38.137.80 &gt; 192.168.254.239.60085: Flags [.], ack 1, win 241, options [nop,nop,sack 1 {0:1}], length 0
12:43:07.936169 IP 173.194.38.137.80 &gt; 192.168.0.250.60085: Flags [.], ack 1, win 241, options [nop,nop,sack 1 {0:1}], length 0
12:43:08.653405 IP 192.168.0.250.60115 &gt; 70.33.217.71.80: Flags [s], seq 2366124138, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:08.653650 IP 192.168.254.239.60115 &gt; 70.33.217.71.80: Flags [s], seq 2366124138, win 8192, options [mss 1460,nop,wscale 2,nop,nop,sackOK], length 0
12:43:08.851093 IP 70.33.217.71.80 &gt; 192.168.254.239.60115: Flags [S.], seq 1934351121, ack 2366124139, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:08.851256 IP 70.33.217.71.80 &gt; 192.168.0.250.60115: Flags [S.], seq 1934351121, ack 2366124139, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:08.851532 IP 192.168.0.250.60115 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:08.851727 IP 192.168.254.239.60115 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, length 0
12:43:08.883616 IP 70.33.217.71.80 &gt; 192.168.254.239.60117: Flags [S.], seq 4066531992, ack 3910463145, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:08.883761 IP 70.33.217.71.80 &gt; 192.168.0.250.60117: Flags [S.], seq 4066531992, ack 3910463145, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:08.884058 IP 192.168.0.250.60117 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:08.884250 IP 192.168.254.239.60117 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.486331 IP 70.33.217.71.80 &gt; 192.168.254.239.60115: Flags [S.], seq 1934351121, ack 2366124139, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.486486 IP 70.33.217.71.80 &gt; 192.168.0.250.60115: Flags [S.], seq 1934351121, ack 2366124139, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.486795 IP 192.168.0.250.60115 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.486984 IP 192.168.254.239.60115 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.886478 IP 70.33.217.71.80 &gt; 192.168.254.239.60118: Flags [S.], seq 2980748332, ack 3746632455, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.886631 IP 70.33.217.71.80 &gt; 192.168.0.250.60118: Flags [S.], seq 2980748332, ack 3746632455, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.886923 IP 192.168.0.250.60118 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.887116 IP 192.168.254.239.60118 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.888983 IP 70.33.217.71.80 &gt; 192.168.254.239.60120: Flags [S.], seq 3559081460, ack 1398768835, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.889138 IP 70.33.217.71.80 &gt; 192.168.0.250.60120: Flags [S.], seq 3559081460, ack 1398768835, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:09.889299 IP 192.168.0.250.60120 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.889538 IP 192.168.254.239.60120 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:09.971997 IP 192.168.0.250.60088 &gt; 58.26.1.35.80: Flags [.], seq 4284263650:4284263651, ack 2467736911, win 16138, length 1
12:43:09.972200 IP 192.168.254.239.60088 &gt; 58.26.1.35.80: Flags [.], seq 4284263650:4284263651, ack 2467736911, win 16138, length 1
12:43:10.084770 IP 70.33.217.71.80 &gt; 192.168.254.239.60119: Flags [S.], seq 1598762177, ack 3047299836, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:10.084920 IP 70.33.217.71.80 &gt; 192.168.0.250.60119: Flags [S.], seq 1598762177, ack 3047299836, win 5840, options [mss 1460,nop,nop,sackOK,nop,wscale 7], length 0
12:43:10.085214 IP 192.168.0.250.60119 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:10.085406 IP 192.168.254.239.60119 &gt; 70.33.217.71.80: Flags [.], ack 1, win 16425, options [nop,nop,sack 1 {0:1}], length 0
12:43:10.184929 IP 58.26.1.35.80 &gt; 192.168.254.239.60088: Flags [.], ack 1, win 3918, options [nop,nop,sack 1 {0:1}], length 0
12:43:10.185084 IP 58.26.1.35.80 &gt; 192.168.0.250.60088: Flags [.], ack 1, win 3918, options [nop,nop,sack 1 {0:1}], length 0</code></pre></div><p>I don&#039;t know where does 192.168.254.239 coming from tried to tracert it</p><p>Tracing route to 192.168.254.239 over a maximum of 30 hops</p><p>&nbsp; 1&nbsp; &nbsp; &lt;1 ms&nbsp; &nbsp; &lt;1 ms&nbsp; &nbsp; &lt;1 ms&nbsp; 192.168.254.239 </p><p>Trace complete.</p><p>EDIT: It&#039;s coming from my radio antenna. (Motorola Canopy)<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# ifdown wan
root@OpenWrt:~# ping 192.168.254.239
PING 192.168.254.239 (192.168.254.239): 56 data bytes
64 bytes from 192.168.254.239: seq=0 ttl=64 time=0.576 ms
64 bytes from 192.168.254.239: seq=1 ttl=64 time=0.400 ms
64 bytes from 192.168.254.239: seq=2 ttl=64 time=0.384 ms
64 bytes from 192.168.254.239: seq=3 ttl=64 time=0.377 ms
64 bytes from 192.168.254.239: seq=4 ttl=64 time=0.372 ms
64 bytes from 192.168.254.239: seq=5 ttl=64 time=0.378 ms
64 bytes from 192.168.254.239: seq=6 ttl=64 time=0.381 ms
64 bytes from 192.168.254.239: seq=7 ttl=64 time=0.388 ms
64 bytes from 192.168.254.239: seq=8 ttl=64 time=0.628 ms
^C
--- 192.168.254.239 ping statistics ---
9 packets transmitted, 9 packets received, 0% packet loss
round-trip min/avg/max = 0.372/0.431/0.628 ms

root@OpenWrt:~# ifdown wan2
root@OpenWrt:~# ping 192.168.254.239
PING 192.168.254.239 (192.168.254.239): 56 data bytes
ping: sendto: Network is unreachable</code></pre></div><p>My antenna&#039;s radio IP 192.168.3.1 my antenna and router have the same subnet 255.255.255.0 would that affect range of broadcast to 192.168.3.0?</p>											<p class="post-edited">(Last edited by <strong>gendouhydeist</strong> on 15 Aug 2012, 09:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174954">
				<div class="post-metadata">
					<div class="post-num">Post #271</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						15 Aug 2012, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi gendouhydeist,</p><p>Your output raises more questions than it answers... (duplicate entries, multiple syn&#039;s) Is it possible for me to get access to your router and troubleshoot some more from there?</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174973">
				<div class="post-metadata">
					<div class="post-num">Post #272</div>
					<div class="post-author">gendouhydeist</div>
					<div class="post-datetime">
						15 Aug 2012, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi, would ssh access would suffice? Do I need to set firewall rule? thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174974">
				<div class="post-metadata">
					<div class="post-num">Post #273</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						15 Aug 2012, 20:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gendouhydeist wrote:</cite><blockquote><p>Hi, would ssh access would suffice? Do I need to set firewall rule? thanks!</p></blockquote></div><p>Yes and yes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175127">
				<div class="post-metadata">
					<div class="post-num">Post #274</div>
					<div class="post-author">Sorbe</div>
					<div class="post-datetime">
						17 Aug 2012, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>Hmm... so I upgraded from 1.3-10 to 1.4-3 and things are &quot;sort of&quot; working.&nbsp; I must have done something wrong because only one of my WAN ports ever gets any traffic even though both show as connected and have IP addresses.&nbsp; &nbsp;The configuration is supposed to be 1 LAN (old WAN port), 4 WAN on a WNDR3700.</p><p>Adze: Could you take a peek?&nbsp; What should I upload?</p>											<p class="post-edited">(Last edited by <strong>Sorbe</strong> on 17 Aug 2012, 11:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175128">
				<div class="post-metadata">
					<div class="post-num">Post #275</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						17 Aug 2012, 11:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Sorbe wrote:</cite><blockquote><p>Hmm... so I upgraded from 1.3-10 to 1.4-3 and things are &quot;sort of&quot; working.&nbsp; I must have done something wrong because only one of my WAN ports ever gets any traffic even though both show as connected and have IP addresses.&nbsp; &nbsp;The configuration is supposed to be 1 LAN (old WAN port), 4 WAN on a WNDR3700.</p><p>Adze: Could you take a peek?&nbsp; What should I upload?</p></blockquote></div><p>Hi Sorbe,</p><p>I think i know what&#039;s wrong. In earlier versions of mwan, there was an implicit default rule. In newer versions you must define it yourself. Please make sure that there is a default (0.0.0.0/0) rule in your mwan2 config.</p><p>For more info see post #174 in this thread.</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 17 Aug 2012, 11:21)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 11 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=33129&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33129&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li><li><a href="viewtopic.php%3Fid=33129&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=33129&amp;p=14.html">14</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>