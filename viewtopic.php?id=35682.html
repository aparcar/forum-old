<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Converting MicroB USB to USB2serial+Power on TP-WR703N</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p161700">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						22 Mar 2012, 08:42					</div>
				</div>
				<div class="post-content content">
					<p>As you know TP-LINK TL-WR703N have MicroB USB port used <em>ONLY</em> for supplying power to the router. There is USB-A to USB micro-B Cable in the box and USB Power Supply. <br />I got mine a few days ago, but I did not know that it&#039;s possible to use OpenWRT firmware on it.<br />Using OpenWRT gives you endless opportunities to play with that device beyond router abilities...</p><p>My first idea was to add LiIon buid-in battery for field use + mini charger, but this is not what I need right now, so I decide to implant my USB2Serial converter (based on PL-2303HX) inside Router box and re-use free ( and not used) D+ D- connections on Micro-B USB port. This will save me one cable and will make the ongoing testing more fun. The other toughs that now I&#039;m having is adding external antenna and dedicated power-jack, plus 1-Wire sensor, and one or more relay to some of really difficult to solder GPIO.<br />First I need to modify my USB2Serial converter because it was designed for 5V TX levels, this chip PL-2303HX has internal 3.3v voltage stabilization, so I just needed to make sure that the TX not exceeding 3.3v to not fry my AR9331 chip. (Mine is in SSOP 28 package, PIN#4 is VDD_232 for defining RxTx levels it was connected to 5V so I redo and re-connect PIN#4 to PIN#17 VDD_3V3 using thin coper wires) A few more tweaks, getting off&nbsp; USB-A connector on the board and Pins to be able to fit it in the tiny router box, also moving 12MHz crystal to back side of the board.</p><p>How it was before(fixed): <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120321_004.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 21_004.jpg</a><br />How it&#039;s now: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120322_023.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 22_023.jpg</a></p><p>WR703N board up side: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120321_001.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 21_001.jpg</a><br />WR703N board bottom side: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120321_002.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 21_002.jpg</a></p><p>With USB2Serial side-up: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120322_002.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 22_002.jpg</a><br />TP_IN,TP_OUT solder joint view closeup: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120322_006.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 22_006.jpg</a></p><p>Back in the box: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120322_026.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 22_026.jpg</a><br />Cover on: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/20120322_030.jpg">http://dl.dropbox.com/u/12258575/TP-LIN … 22_030.jpg</a></p><p>I post this quick and dirty hardware hack, with hope that someone will find it useful.</p><p>For most connection I used coper coil wire ( it has lacquer isolation, which is easily burned with soldering iron, no need to be cleaned), and most important do not apply much pressure on the tiny TP_IN and TP_OUT soldering joint.</p><p>I just discovered the power of OpenWRT, so I&#039;m new here.</p><p>Hack-with-OpenWRT!</p><p>Oh I forgot minicom console shoot: <a href="http://dl.dropbox.com/u/12258575/TP-LINK_TL-WR700N/minicom_MacOSX_WR703N_USB2Serial_PL2303HX.png">http://dl.dropbox.com/u/12258575/TP-LIN … 2303HX.png</a><br />I&#039;m on Mac and I have to install minicom and PL-2303 driver (md_PL2303_MacOSX10.6_dmg_v1.4.0.zip) before been able to log into the serial terminal.<br />My TL-WR703N is ver.1.5, PCB rev.1.1</p>											<p class="post-edited">(Last edited by <strong>mveplus</strong> on 22 Mar 2012, 11:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162092">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arnulf</div>
					<div class="post-datetime">
						25 Mar 2012, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for sharing !</p><p>I was also wondering how to connect the serial-USB, this one was clever !</p><p>I used Wire-Wrap wire to connect (it&#039;s a tiny bit thicker, but resist heat):<br /><a href="http://goodluckbuy.com/wrapping-wire-wrap-multicolor-300-meters-awg30-cable.html">http://goodluckbuy.com/wrapping-wire-wr … cable.html</a></p><p>For those new to Wire-Wrap, a tool to strip, wrap and unwrap is useful:<br /><a href="http://goodluckbuy.com/wire-wrap-strip-unwrap-tool-awg-30-prototyping-wrapping.html">http://goodluckbuy.com/wire-wrap-strip- … pping.html</a><br />I used this tool to connect (wrap) to the square pins on serial-USB card. </p><p>Strip: hole in the middle.<br />Wrap: put wire into the smallest hole on the longest end of tool, put the tool into pin, and twist around.<br />Unwrap: put the other end into pin and twist the other way.<br /><a href="http://en.wikipedia.org/wiki/Wire_wrap">http://en.wikipedia.org/wiki/Wire_wrap</a></p>											<p class="post-edited">(Last edited by <strong>arnulf</strong> on 25 Mar 2012, 18:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162188">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						26 Mar 2012, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Very nice hack to get that highly desirable second usb port.</p><p>Gotta admire your soldering skills on this tiny board.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162198">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						27 Mar 2012, 02:26					</div>
				</div>
				<div class="post-content content">
					<p>Wouldnt this mean that you can only connect to the USB2Serial converter once the router is fed with power as you can only connect the terminal to a &quot;live&quot; PL-2303HX chip? I suspect this renders the time window to start up the console quite small if you want to see the whole boot-up process?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162321">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						28 Mar 2012, 06:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lennong wrote:</cite><blockquote><p>Wouldnt this mean that you can only connect to the USB2Serial converter once the router is fed with power as you can only connect the terminal to a &quot;live&quot; PL-2303HX chip? I suspect this renders the time window to start up the console quite small if you want to see the whole boot-up process?</p></blockquote></div><p>Yes, the window is small, but still useful, first I fire-up my console then plug it to USB. Also if I really miss something there is reboot <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />....</p><p>But on the next device will just lead-out GND, Tx Rx and Power on external connector. Just can not decide how to do it simple and universal.</p><br /><p>Hack-with-OpenWRT!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162337">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						28 Mar 2012, 09:42					</div>
				</div>
				<div class="post-content content">
					<p>I think my console complains if the serial port it is configured to use is not existing on program start. And even the time to get the serial settled (load and register its driver, ...) is around 1-2 seconds, while the router is already outputting something. Another point is, if the router is really messed up, how to issue a reboot?<br />To wrap it all up, it&#039;s probably a good idea to add a power switch to the design.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162342">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						28 Mar 2012, 11:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>I think my console complains if the serial port it is configured to use is not existing on program start. And even the time to get the serial settled (load and register its driver, ...) is around 1-2 seconds, while the router is already outputting something. Another point is, if the router is really messed up, how to issue a reboot?<br />To wrap it all up, it&#039;s probably a good idea to add a power switch to the design.</p></blockquote></div><p>Yes, power switch is good idea, but I was thinking about dedicated power-jack! and antenna, because I do not like WiFi without antenna! </p><p>One guy in China offer modification service (of WR703N, MR11U, etc.) but require sending your router, which I do not like! I asked him to send me the parts (8M flash and 64M RAM + SMA connector) but he refused?!? Why I should spend money on sipping back and forth when I can change two chips by myself? <a href="http://item.taobao.com/item.htm?id=10683439079">http://item.taobao.com/item.htm?id=10683439079</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162352">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						28 Mar 2012, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>Ooh that&#039;s a nice little mod! I should have thought of using copper wire for my internal hub mod, would have made it a little easier.<br />Link in my sig for my 703 hub mod thread if you are interested, I&#039;m thinking of adding an external aerial connector next <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162364">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						28 Mar 2012, 15:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JamesA wrote:</cite><blockquote><p>Ooh that&#039;s a nice little mod! I should have thought of using copper wire for my internal hub mod, would have made it a little easier.<br />Link in my sig for my 703 hub mod thread if you are interested, I&#039;m thinking of adding an external aerial connector next <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Nice HUB mode!, I was thinking if it be possible GPIO - to SD Card mode? And you found a good way to do it!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163768">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">twinclouds</div>
					<div class="post-datetime">
						8 Apr 2012, 22:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mveplus wrote:</cite><blockquote><div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>I think my console complains if the serial port it is configured to use is not existing on program start. And even the time to get the serial settled (load and register its driver, ...) is around 1-2 seconds, while the router is already outputting something. Another point is, if the router is really messed up, how to issue a reboot?<br />To wrap it all up, it&#039;s probably a good idea to add a power switch to the design.</p></blockquote></div><p>Yes, power switch is good idea, but I was thinking about dedicated power-jack! and antenna, because I do not like WiFi without antenna! </p><p>One guy in China offer modification service (of WR703N, MR11U, etc.) but require sending your router, which I do not like! I asked him to send me the parts (8M flash and 64M RAM + SMA connector) but he refused?!? Why I should spend money on sipping back and forth when I can change two chips by myself? <a href="http://item.taobao.com/item.htm?id=10683439079">http://item.taobao.com/item.htm?id=10683439079</a></p></blockquote></div><p>You should be able to buy the parts from Taobao if you have someone to help you to buy and get it over to you.&nbsp; I bought some 8M flash (MX25L6445EM2I-10G SOP8) for less than one US Dollar each plus shipping.&nbsp; You can also get 64M ram (HY5DU121622DTP) for about 1.5 USD.&nbsp; Shipping to a China address will be about 10 RMB, i.e., 1.5 USD.&nbsp; You&#039;d better buy a few instead of just one because shipping cost is fixed.<br />I have successfully replaced 8 pin flash chip with no problem.&nbsp; Never tried RAM.&nbsp; Looks pretty difficult.<br />SMA female connector is also pretty cheap on Taobao.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165920">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						27 Apr 2012, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>Whoow, great mod!</p><p>Are there any detailed instructions on how to add external antenna for wr703n ? I saw somewere some images of wr703 with external rsma connector, but didn&#039;t see instructions how to make that.</p><p>Any help is much appreciated.</p><p>Cheers,<br />Valent.</p><p>UPDATE:<br />here is mod from our forums:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=163755#p163755">https://forum.openwrt.org/viewtopic.php … 55#p163755</a></p><p>and here is one other external antenna mod for 703:<br /><a href="http://laakkonen.dy.fi/projektit/tl-wr703n/">http://laakkonen.dy.fi/projektit/tl-wr703n/</a></p>											<p class="post-edited">(Last edited by <strong>valentt</strong> on 27 Apr 2012, 14:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165997">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						28 Apr 2012, 12:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>twinclouds wrote:</cite><blockquote><div class="quotebox"><cite>mveplus wrote:</cite><blockquote><div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>I think my console complains if the serial port it is configured to use is not existing on program start. And even the time to get the serial settled (load and register its driver, ...) is around 1-2 seconds, while the router is already outputting something. Another point is, if the router is really messed up, how to issue a reboot?<br />To wrap it all up, it&#039;s probably a good idea to add a power switch to the design.</p></blockquote></div><p>Yes, power switch is good idea, but I was thinking about dedicated power-jack! and antenna, because I do not like WiFi without antenna! </p><p>One guy in China offer modification service (of WR703N, MR11U, etc.) but require sending your router, which I do not like! I asked him to send me the parts (8M flash and 64M RAM + SMA connector) but he refused?!? Why I should spend money on sipping back and forth when I can change two chips by myself? <a href="http://item.taobao.com/item.htm?id=10683439079">http://item.taobao.com/item.htm?id=10683439079</a></p></blockquote></div><p>You should be able to buy the parts from Taobao if you have someone to help you to buy and get it over to you.&nbsp; I bought some 8M flash (MX25L6445EM2I-10G SOP8) for less than one US Dollar each plus shipping.&nbsp; You can also get 64M ram (HY5DU121622DTP) for about 1.5 USD.&nbsp; Shipping to a China address will be about 10 RMB, i.e., 1.5 USD.&nbsp; You&#039;d better buy a few instead of just one because shipping cost is fixed.<br />I have successfully replaced 8 pin flash chip with no problem.&nbsp; Never tried RAM.&nbsp; Looks pretty difficult.<br />SMA female connector is also pretty cheap on Taobao.</p></blockquote></div><p>I live in China,Buy part form Taobao is not a problem <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. I just try to buy form wrong place firs time... Already WR703N and MR11U have 64MB RAM+ 8M flash. Yes without hot air de-soldering station is pretty hard to remove RAM chip without damage the board. WR703N now has DIP 8 socket installed on the place of this serial board... for easy reprogramming and changing flash using my flash-programmer (also form Taobao).</p><p>valentt: Thanks for the antenna links <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />, that&#039;s next what I&#039;ll add to both my boxes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167947">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">grayman4hire</div>
					<div class="post-datetime">
						23 May 2012, 01:55					</div>
				</div>
				<div class="post-content content">
					<p>This is interesting...</p><p>So the microUSB port (USB1) is a working usb port, assuming you have the skills to solder to the tiny points? I&#039;m looking at add an additional usb port for a usb drive. This seems like a better/simpler solution versus JamesA&#039;s adding a internal usb hub mod. </p><p>Am I correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196884">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						1 Apr 2013, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>I have started a separate thread for POE mod:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=196881">https://forum.openwrt.org/viewtopic.php?pid=196881</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>