<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Intel WiFi ipw2100 &quot;Firmware image not compatible&quot; (15.05 ar71xx)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p288743">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tuxmartin</div>
					<div class="post-datetime">
						22 Aug 2015, 02:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have OpenWrt 15.05-RC3 on Ubiquity RouterStation (ar71xx).</p><p>I have two miniPCI WiFi cards. First with atheros chip - works good with package <strong>kmod-ath5k</strong>.<br />Second card is <strong>Intel PRO 2100 3B WM3B2100 (HP)</strong>. Photo: <a href="http://postimg.org/image/k16zch6aj/">http://postimg.org/image/k16zch6aj/</a> <br />I installed package with driver <strong>kmod-net-ipw2100</strong>, but system does not see wlan0 (I check iwconfig output).<br />In <strong>dmesg</strong> is message about bad firmware:</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/openwrt_release 
DISTRIB_ID=&#039;OpenWrt&#039;
DISTRIB_RELEASE=&#039;15.05-rc3&#039;
DISTRIB_REVISION=&#039;r46163&#039;
DISTRIB_CODENAME=&#039;chaos_calmer&#039;
DISTRIB_TARGET=&#039;ar71xx/generic&#039;
DISTRIB_DESCRIPTION=&#039;OpenWrt Chaos Calmer 15.05-rc3&#039;
DISTRIB_TAINTS=&#039;&#039;
root@OpenWrt:~# 
root@OpenWrt:~# dmesg | grep ipw
[   13.570000] libipw: 802.11 data/management/control stack, git-1.1.13
[   13.580000] libipw: Copyright (C) 2004-2005 Intel Corporation &lt;jketreno@linux.intel.com&gt;
[   14.420000] ipw2100: Intel(R) PRO/Wireless 2100 Network Driver, git-1.2.2
[   14.420000] ipw2100: Copyright(c) 2003-2006 Intel Corporation
[   14.440000] ipw2100: Detected Intel PRO/Wireless 2100 Network Connection
[   14.620000] ipw2100: Firmware image not compatible (detected version id of 259). See Documentation/networking/README.ipw2100
[   14.650000] Modules linked in: ipw2100(+) iptable_nat ath9k_hw ath5k ath pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 mac80211 libipw ipt_REJECT ipt_MASQUERADE cfg80211 xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT slhc nf_reject_ipv4 nf_nat_masquerade_ipv4 nf_nat_ftp nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack_ftp nf_conntrack lib80211_crypt_wep lib80211_crypt_tkip lib80211_crypt_ccmp lib80211 iptable_raw iptable_mangle iptable_filter ip_tables crc_ccitt compat ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_raw ip6table_mangle ip6table_filter ip6_tables x_tables ipv6 michael_mic arc4 crypto_blkcipher crypto_hash ohci_platform ohci_hcd ehci_platform ehci_hcd gpio_button_hotplug usbcore nls_base usb_common
root@OpenWrt:~#
root@OpenWrt:~# ls -lh /lib/firmware/
-rw-r--r--    1 500      500        11.6K Mar  3  2004 LICENSE
-rw-r--r--    1 root     root      196.4K Jul  3 20:43 ipw2100-1.3-i.fw
-rw-r--r--    1 root     root      191.9K Jul  3 20:43 ipw2100-1.3-p.fw
-rw-r--r--    1 root     root      204.3K Jul  3 20:43 ipw2100-1.3.fw
root@OpenWrt:~#  </code></pre></div><p>How can I fix it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288756">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						22 Aug 2015, 08:13					</div>
				</div>
				<div class="post-content content">
					<p>there is a Kernel creash happening - please post a complete log / file a bug on the bugtracker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288761">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tuxmartin</div>
					<div class="post-datetime">
						22 Aug 2015, 10:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zloop wrote:</cite><blockquote><p>there is a Kernel creash happening - please post a complete log / file a bug on the bugtracker</p></blockquote></div><p>Where I can find complete kernel log? In /var/log and in /tmp there are only lastlog and wtmp.<br /> Do you mean </p><div class="codebox"><pre><code>dmesg</code></pre></div><p>?</p><p>I put&nbsp; log_file to system config. Is this that?<br /></p><div class="codebox"><pre><code># cat /etc/config/system 
config system
    option hostname &#039;OpenWrt&#039;
    option zonename &#039;UTC&#039;
    option timezone &#039;GMT0&#039;
    option conloglevel &#039;8&#039;
    option cronloglevel &#039;8&#039;
    option log_file &#039;/tmp/log.txt&#039;</code></pre></div><div class="codebox"><pre><code>Sat Aug 22 07:23:00 2015 kern.debug kernel: [   22.000000] ar71xx: pll_reg 0xb8050014: 0x1099
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.000000] eth1: link up (100Mbps/Full duplex)
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.020000] device eth1 entered promiscuous mode
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.030000] br-lan: port 1(eth1) entered listening state
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.030000] br-lan: port 1(eth1) entered listening state
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.040000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;lan&#039; is enabled
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;lan&#039; is setting up now
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;lan&#039; is now up
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;loopback&#039; is enabled
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;loopback&#039; is setting up now
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;loopback&#039; is now up
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.070000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;wan&#039; is enabled
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;wifi&#039; is enabled
Sat Aug 22 07:23:00 2015 kern.info kernel: [   22.110000] IPv6: ADDRCONF(NETDEV_UP): br-wifi: link is not ready
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;wifi&#039; is setting up now
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;wifi&#039; is now up
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Network device &#039;eth1&#039; link is up
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Network device &#039;lo&#039; link is up
Sat Aug 22 07:23:00 2015 daemon.notice netifd: Interface &#039;loopback&#039; has link connectivity 
Sat Aug 22 07:23:00 2015 daemon.info procd: - init complete -
Sat Aug 22 07:23:01 2015 daemon.notice netifd: radio0 (913): Configuration file: /var/run/hostapd-phy0.conf
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.470000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.480000] device wlan0 entered promiscuous mode
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.490000] br-wifi: port 1(wlan0) entered forwarding state
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.490000] br-wifi: port 1(wlan0) entered forwarding state
Sat Aug 22 07:23:01 2015 daemon.notice netifd: Bridge &#039;br-wifi&#039; link is up
Sat Aug 22 07:23:01 2015 daemon.notice netifd: Interface &#039;wifi&#039; has link connectivity 
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.500000] IPv6: ADDRCONF(NETDEV_CHANGE): br-wifi: link becomes ready
Sat Aug 22 07:23:01 2015 kern.debug kernel: [   23.540000] ar71xx: pll_reg 0xb8050010: 0x1099
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.540000] eth0: link up (100Mbps/Full duplex)
Sat Aug 22 07:23:01 2015 kern.info kernel: [   23.540000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
Sat Aug 22 07:23:01 2015 daemon.notice netifd: radio0 (913): Using interface wlan0 with hwaddr 00:0c:42:0c:6a:16 and ssid &quot;66&quot;
Sat Aug 22 07:23:01 2015 daemon.notice netifd: Network device &#039;eth0&#039; link is up
Sat Aug 22 07:23:01 2015 daemon.notice netifd: Interface &#039;wan&#039; has link connectivity 
Sat Aug 22 07:23:01 2015 daemon.notice netifd: Interface &#039;wan&#039; is setting up now
Sat Aug 22 07:23:01 2015 daemon.notice netifd: wan (1035): udhcpc (v1.23.2) started
Sat Aug 22 07:23:02 2015 kern.info kernel: [   24.010000] br-wifi: port 1(wlan0) entered disabled state
Sat Aug 22 07:23:02 2015 kern.info kernel: [   24.030000] br-lan: port 1(eth1) entered learning state
Sat Aug 22 07:23:02 2015 daemon.notice netifd: wan (1035): Sending discover...
Sat Aug 22 07:23:02 2015 kern.info kernel: [   24.290000] br-wifi: port 1(wlan0) entered forwarding state
Sat Aug 22 07:23:02 2015 kern.info kernel: [   24.300000] br-wifi: port 1(wlan0) entered forwarding state
Sat Aug 22 07:23:02 2015 kern.info kernel: [   24.300000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
Sat Aug 22 07:23:02 2015 daemon.notice netifd: radio0 (913): wlan0: interface state UNINITIALIZED-&gt;ENABLED
Sat Aug 22 07:23:02 2015 daemon.notice netifd: radio0 (913): wlan0: AP-ENABLED 
Sat Aug 22 07:23:02 2015 daemon.notice netifd: Network device &#039;wlan0&#039; link is up
Sat Aug 22 07:23:03 2015 daemon.notice netifd: wan (1035): Sending select for 192.168.1.86...
Sat Aug 22 07:23:03 2015 daemon.notice netifd: wan (1035): Lease of 192.168.1.86 obtained, lease time 3600
Sat Aug 22 07:23:03 2015 daemon.notice netifd: Interface &#039;wan&#039; is now up
Sat Aug 22 07:23:04 2015 kern.info kernel: [   26.030000] br-lan: topology change detected, propagating
Sat Aug 22 07:23:04 2015 kern.info kernel: [   26.030000] br-lan: port 1(eth1) entered forwarding state
Sat Aug 22 07:23:04 2015 kern.info kernel: [   26.040000] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
Sat Aug 22 07:23:04 2015 daemon.notice netifd: Bridge &#039;br-lan&#039; link is up
Sat Aug 22 07:23:04 2015 daemon.notice netifd: Interface &#039;lan&#039; has link connectivity 
Sat Aug 22 07:23:04 2015 kern.info kernel: [   26.300000] br-wifi: port 1(wlan0) entered forwarding state</code></pre></div><p>dmesg:</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.18.17 (buildbot@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r46018) ) #1 Fri Jul 3 22:49:15 CEST 2015
[    0.000000] MyLoader: sysp=00000000, boardp=00000000, parts=ace50014
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR7161 rev 2
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x03ffffff]
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 803842b0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16384 pages, LIFO batch:3
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=UBNT-RS console=ttyS0,115200 ethaddr=00.15.6d.c3.7f.c1 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=000569f2
[    0.000000] Readback ErrCtl register=000569f2
[    0.000000] Memory: 60748K/65536K available (2629K kernel code, 133K rwdata, 548K rodata, 264K init, 194K bss, 4788K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:680.000MHz, DDR:340.000MHz, AHB:170.000MHz, Ref:40.000MHz
[    0.000000] Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
[    0.060000] pid_max: default: 32768 minimum: 301
[    0.060000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.070000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] NET: Registered protocol family 16
[    0.080000] MIPS: machine is Ubiquiti RouterStation
[    0.380000] registering PCI controller with io_map_base unset
[    2.720000] PCI host bridge to bus 0000:00
[    2.730000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x16ffffff]
[    2.730000] pci_bus 0000:00: root bus resource [io  0x0000]
[    2.740000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    2.740000] pci 0000:00:11.0: [168c:0013] type 00 class 0x020000
[    2.740000] pci 0000:00:11.0: reg 0x10: [mem 0x00000000-0x0000ffff]
[    2.740000] pci 0000:00:13.0: [8086:1043] type 00 class 0x028000
[    2.740000] pci 0000:00:13.0: reg 0x10: [mem 0x00000000-0x00000fff]
[    2.740000] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 00
[    2.740000] pci 0000:00:11.0: BAR 0: assigned [mem 0x10000000-0x1000ffff]
[    2.750000] pci 0000:00:13.0: BAR 0: assigned [mem 0x10010000-0x10010fff]
[    2.750000] pci 0000:00:11.0: using irq 40 for pin 1
[    2.760000] pci 0000:00:13.0: using irq 42 for pin 1
[    2.760000] Switched to clocksource MIPS
[    2.770000] NET: Registered protocol family 2
[    2.770000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    2.780000] TCP: Hash tables configured (established 1024 bind 1024)
[    2.790000] TCP: reno registered
[    2.790000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    2.790000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    2.800000] NET: Registered protocol family 1
[    2.800000] PCI: CLS 0 bytes, default 32
[    2.810000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    2.820000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    2.820000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    2.840000] msgmni has been set to 118
[    2.840000] io scheduler noop registered
[    2.840000] io scheduler deadline registered (default)
[    2.850000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    2.860000] console [ttyS0] disabled
[    2.880000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11, base_baud = 10625000) is a 16550A
[    2.890000] console [ttyS0] enabled
[    2.900000] bootconsole [early0] disabled
[    2.910000] m25p80 spi0.0: found mx25l12805d, expected m25p80
[    2.910000] m25p80 spi0.0: mx25l12805d (16384 Kbytes)
[    2.920000] Searching for RedBoot partition table in spi0.0 at offset 0xfe0000
[    2.950000] Searching for RedBoot partition table in spi0.0 at offset 0xff0000
[    2.980000] 5 RedBoot partitions found on MTD device spi0.0
[    2.980000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    2.990000] 0x000000000000-0x000000030000 : &quot;RedBoot&quot;
[    2.990000] 0x000000030000-0x000000160000 : &quot;kernel&quot;
[    3.000000] 0x000000160000-0x000000ff0000 : &quot;rootfs&quot;
[    3.010000] mtd: device 2 (rootfs) set to be root filesystem
[    3.010000] 1 squashfs-split partitions found on MTD device rootfs
[    3.020000] 0x000000390000-0x000000ff0000 : &quot;rootfs_data&quot;
[    3.020000] 0x000000ff0000-0x000000fff000 : &quot;FIS directory&quot;
[    3.030000] 0x000000fff000-0x000001000000 : &quot;RedBoot config&quot;
[    3.060000] libphy: ag71xx_mdio: probed
[    3.390000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.0:14 [uid=03026071, driver=Generic PHY]
[    3.400000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    3.720000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:RMII
[    3.720000] TCP: cubic registered
[    3.730000] NET: Registered protocol family 17
[    3.730000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    3.740000] Bridge firewalling registered
[    3.750000] 8021q: 802.1Q VLAN Support v1.8
[    3.760000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    3.770000] Freeing unused kernel memory: 264K (8039e000 - 803e0000)
[    4.660000] init: Console is alive
[    4.670000] init: - watchdog -
[    5.740000] usbcore: registered new interface driver usbfs
[    5.740000] usbcore: registered new interface driver hub
[    5.750000] usbcore: registered new device driver usb
[    5.760000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.770000] ehci-platform: EHCI generic platform driver
[    5.770000] ehci-platform ehci-platform: EHCI Host Controller
[    5.780000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    5.790000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[    5.810000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[    5.810000] hub 1-0:1.0: USB hub found
[    5.820000] hub 1-0:1.0: 2 ports detected
[    5.820000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288777">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tuxmartin</div>
					<div class="post-datetime">
						22 Aug 2015, 16:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zloop wrote:</cite><blockquote><p>there is a Kernel creash happening - please post a complete log / file a bug on the bugtracker</p></blockquote></div><p>I opened new ticket: <a href="https://dev.openwrt.org/ticket/20378">https://dev.openwrt.org/ticket/20378</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>