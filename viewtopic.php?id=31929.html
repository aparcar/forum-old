<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Backfire performance troubleshooting</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p143889">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pablo</div>
					<div class="post-datetime">
						18 Sep 2011, 04:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>[Backstory]<br />I just got a DIR-615 C1 (used). I previously had a WRT54G running whiterussian. I decided to try DD-WRT but I disliked it (half-assed opkg support), so I put Backfire 10.03.1-rc5 on the 615 because it had the right drivers out of the box (as opposed to 10.03)<br />[/Backstory]</p><p>So when I tested the WAN performance on DD-WRT I was getting significantly better results (16mbps on dd-wrt vs 4-7mbps on backfire). I&#039;d really prefer to use backfire, but I can&#039;t imagine what might be causing the difference in performance. How can I track down the performance difference.</p><p>Here&#039;s my thoughts: ath9k driver versions<br />Bandwidth tracking (nf_conntrack) </p><p>Can anyone suggest anything I might try?<br />Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143892">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						18 Sep 2011, 05:23					</div>
				</div>
				<div class="post-content content">
					<p>edit the config file in /etc/config/wireless<br />add Fast Frames, compression, 40HT Channel, Enable noscan, google and add tcp tweaks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143926">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pablo</div>
					<div class="post-datetime">
						18 Sep 2011, 16:14					</div>
				</div>
				<div class="post-content content">
					<p>alphasparc: Thanks for the reply but I should clarify. <br />I&#039;m talking about WAN (ISP) performance from the LAN. My Comcast internet service is nominally 20 mbps. When I was using DD-WRT (same device, wired to the LAN port) I would get significantly better performance than using Backfire 10.03.1-rc5 on the same device in the same manner. I&#039;m trying to resolve what might be impacting performance so significantly.</p><p>I will look at those settings though, thank you.<br />-Pablo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143933">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Sep 2011, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>Did you maybe install and enable QoS without configuring the up- and downstream bandwidth?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143936">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						18 Sep 2011, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>Edit:<br />It is for gigabit only so never mind.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 18 Sep 2011, 18:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143957">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pablo</div>
					<div class="post-datetime">
						19 Sep 2011, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>So, I&#039;ll eat my hat a little here and after more debugging it seems to be a LAN issue. </p><p>- I connected a laptop directly to the cablemodem (no router) and got 25mbps.&nbsp; [laptop -&gt; cablemodem = 25mbps ]<br />- I the connected the same laptop to the dir-615 (openwrt) and also got 25mbps.&nbsp; [ laptop -&gt; dir-615 -&gt; cablemodem = 25mbps ]<br />- I connected the same laptop to the gigabit switch connected to the router and got 6mbps. [ laptop -&gt; gigabit switch -&gt; dir-615 -&gt; cablemodem = 6mbps ]</p><p>Alphasparc: i&#039;m interested because it seems you wrote something and maybe edited it regarding gigabit so now I&#039;m wondering if that&#039;s applicable?</p><p>The LAN ports on the DIR-615 are 100mbit, however it seems that maybe the Dir-615 -&gt; Gigabit link are being negotiated down to 10mbps.<br />Any ideas here?</p>											<p class="post-edited">(Last edited by <strong>pablo</strong> on 19 Sep 2011, 02:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143959">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">pablo</div>
					<div class="post-datetime">
						19 Sep 2011, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>Confirmed with mii-tool:</p><p>eth0: negotiated 10baseT-FD, link ok<br />eth1: negotiated 100baseTx-FD, link ok</p><p>Interestingly, mii-tool seems to only report the status of one of the four physical ports. If I plug into a different port, I get &quot;no link&quot; on eth0 (even though there is a link).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143961">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">pablo</div>
					<div class="post-datetime">
						19 Sep 2011, 03:20					</div>
				</div>
				<div class="post-content content">
					<p>I replaced the gigabit switch with an identical unit (I had a spare) and that has resolved the problem. Assuming that unit had some sort of damage. </p><p>(More detail than you care to know: it wasn&#039;t a single port on the switch, I tried various ports and cables to connect the switch to the dir-615)</p><p>The WAN link is now testing at 22mbps in the original network configuration. Thank you all who took an interest.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>