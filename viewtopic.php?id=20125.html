<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> config changes aren&#039;t permanent</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p87007">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						30 Apr 2009, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>My apologies if this is covered somewhere.&nbsp; I&#039;ve looked in the <br />user guide and dug around the wiki a fair bit and can&#039;t find this.</p><p>I&#039;ve telnetted in to my newly flashed WRT54G, and changed <br />the password.&nbsp; I log out and ssh in no probs.&nbsp; But everytime I unplug<br />the power and then plug it back in again, I can&#039;t ssh in.&nbsp; I have to<br />telnet in to the passwordless root account and change the password <br />again.&nbsp; </p><p>How do I make this permanent ?</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87020">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						30 Apr 2009, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>You did use kamikaze 8.09? Did you change the password with &quot;passwd&quot;? What is the output of &quot;mount&quot;? Are you using a jffs2 partition?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87057">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						1 May 2009, 05:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zorxd wrote:</cite><blockquote><p>You did use kamikaze 8.09? Did you change the password with &quot;passwd&quot;? What is the output of &quot;mount&quot;? Are you using a jffs2 partition?</p></blockquote></div><p>Yes, version 8.09</p><br /><p>--------------<br /># mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro)<br />proc on /proc type proc (rw)<br />sysfs on /sys type sysfs (rw)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,size=6848k)<br />tmpfs on /dev type tmpfs (rw,size=512k)<br />devpts on /dev/pts type devpts (rw,mode=600)<br />mini_fo:/tmp/root on / type mini_fo (rw)<br />---------------</p><p>So, no, I am not running a jffs2 part, which I wondered<br />about when I&#039;d run mount before.&nbsp; Given that there is <br />both a rootfs and mini_fo:/tmp/root mounted on /<br />I am a little confused by the filesystem setup on openwrt.</p><p>Nothing I&#039;ve read so far lead me to think I needed to <br />explicitly mount an jffs2 part. I just assumed that it was<br />part of the flashed system and that it was hidden somewhere <br />behind this magic double mounted /.&nbsp; &nbsp;I&#039;ve never seen mini_fo<br />mentioned in any docs that I can remember.</p><p>I&#039;ve read&nbsp; openwrt_8.09.pdf and cruised around the docs on <br />the wiki, but obviously I&#039;ve missed something.&nbsp; Can you point<br />me to what I need to read?</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87067">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						1 May 2009, 11:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zorxd wrote:</cite><blockquote><p>You did use kamikaze 8.09? Did you change the password with &quot;passwd&quot;? What is the output of &quot;mount&quot;? Are you using a jffs2 partition?</p></blockquote></div><p>Hm.&nbsp; Just realized I didn&#039;t answer your second question.<br />Yes, I use passwd to change the root passwd.</p><p>FWIW, I&#039;m using release 14511 of 8.09.</p><p>Been googling and roaming through the openwrt wiki<br />and so far I&#039;ve found nothing that addresses this.&nbsp; The <br />closest I&#039;ve come says I need to delete the symlink<br />of whatever file I want to edit, then recreate the file.<br />That was talking about rc4 &amp; 5 of wht russian, though.</p><p>Plus &quot;ls&quot; doesn&#039;t show /etc/passwd&nbsp; as being a symlink.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87074">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						1 May 2009, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>Openwrt uses two filesystems normally : a read only squashfs and a jffs. When you modify a file in the squashfs, as it can&#039;t be written, the change is written in the jffs partition. Your problem seems that instead of a jffs partition you have a tmpfs (RAM drive). So when you reboot, your tmpfs is lost.<br />What is the size of the firmware you flashed and what is the size of your flash memory?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87100">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						1 May 2009, 22:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zorxd wrote:</cite><blockquote><p>[snip]<br />What is the size of the firmware you flashed and what is the size of your flash memory?</p></blockquote></div><p>$ ls -l openwrt-wrt54g-squashfs.bin <br />-rw------- 1 kami kami 2494496 2009-04-28 03:37 openwrt-wrt54g-squashfs.bin</p><p>According to table of supported h/w the Linksys WRT54G has 4MB flash.<br />I don&#039;t know how to verify this except maybe the free command:</p><p># free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br /> Mem:&nbsp; &nbsp; &nbsp; &nbsp; 13692&nbsp; &nbsp; &nbsp; &nbsp; 10152&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3540&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1112<br /> Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Total:&nbsp; &nbsp; &nbsp; &nbsp; 13692&nbsp; &nbsp; &nbsp; &nbsp; 10152&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3540</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87120">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						2 May 2009, 04:56					</div>
				</div>
				<div class="post-content content">
					<p>also try &quot;df -h&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87121">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						2 May 2009, 05:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zorxd wrote:</cite><blockquote><p>also try &quot;df -h&quot;</p></blockquote></div><p># df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used&nbsp; &nbsp;Available&nbsp; &nbsp;Use%&nbsp; &nbsp;Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6M&nbsp; &nbsp; &nbsp; 1.6M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 100%&nbsp; &nbsp; /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.6M&nbsp; &nbsp; &nbsp; 1.6M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 100%&nbsp; &nbsp; /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6.7M&nbsp; &nbsp;116.0k&nbsp; &nbsp; &nbsp; 6.6M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2%&nbsp; &nbsp; /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512.0k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;512.0k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0%&nbsp; &nbsp; /dev<br />mini_fo:/tmp/root&nbsp; &nbsp; &nbsp;1.6M&nbsp; &nbsp; &nbsp; 1.6M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 100%&nbsp; &nbsp; /</p><p>Realize I never mentioned my wrt54g is v1.1</p><p>Just for completeness, output from the problem:</p><p>-------------<br />~$ telnet 192.168.1.1<br />Trying 192.168.1.1...<br />Connected to 192.168.1.1.<br />Escape character is &#039;^]&#039;.<br /> === IMPORTANT ============================<br />&nbsp; Use &#039;passwd&#039; to set your login password<br />&nbsp; this will disable telnet and enable SSH<br /> ------------------------------------------</p><br /><p>BusyBox v1.11.2 (2009-01-06 15:14:38 CET) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (8.09, r14511) ----------------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------</p><p>root@OpenWrt:/# ls -lF /etc/passwd<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 119 Oct&nbsp; 6 14:15 /etc/passwd</p><p>root@OpenWrt:/# passwd<br />Changing password for root<br />New password:<br />Retype password:<br />Password for root changed by root</p><p>root@OpenWrt:/# ls -lF /etc/passwd<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 152 Feb&nbsp; 6 04:28 /etc/passwd</p><p>root@OpenWrt:/# exit<br />Connection closed by foreign host.<br />~$ ssh root@192.168.1.1<br />The authenticity of host &#039;192.168.1.1 (192.168.1.1)&#039; can&#039;t be established.<br />RSA key fingerprint is 97:bc:59:9c:37:d7:92:61:c4:29:26:92:e5:fe:5f:78.<br />Are you sure you want to continue connecting (yes/no)? yes<br />Warning: Permanently added &#039;192.168.1.1&#039; (RSA) to the list of known hosts.<br />root@192.168.1.1&#039;s password: </p><br /><p>BusyBox v1.11.2 (2009-01-06 15:14:38 CET) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (8.09, r14511) ----------------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:~# exit<br />$</p><p>[unplug, replug power]</p><p>~$ ssh root@192.168.1.1<br />ssh: connect to host 192.168.1.1 port 22: Connection refused</p><p>$ telnet 192.168.1.1<br />Trying 192.168.1.1...<br />Connected to 192.168.1.1.<br />Escape character is &#039;^]&#039;.<br /> === IMPORTANT ============================<br />&nbsp; Use &#039;passwd&#039; to set your login password<br />&nbsp; this will disable telnet and enable SSH<br /> ------------------------------------------</p><br /><p>BusyBox v1.11.2 (2009-01-06 15:14:38 CET) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (8.09, r14511) ----------------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------</p><p>root@OpenWrt:/# ls -lF /etc/passwd<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 119 Oct&nbsp; 6 14:15 /etc/passwd<br />root@OpenWrt:/# </p><p>----------------</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87232">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mark.clegg</div>
					<div class="post-datetime">
						4 May 2009, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just had exactly the same problem, and have just &#039;solved&#039; it by reflashing with the 2.4 kernel version of 8.09.</p><p>I thought the only difference between the 2.4 and 2.6 versions were down to wireless support, although the 2.6 is slightly larger....</p><p>Could it be down to the revision of WRT54G? mines a 1.1</p><p>Maybe someone can enlighten us?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87316">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						5 May 2009, 06:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mark.clegg wrote:</cite><blockquote><p>I&#039;ve just had exactly the same problem, and have just &#039;solved&#039; it by reflashing with the 2.4 kernel version of 8.09.</p><p>I thought the only difference between the 2.4 and 2.6 versions were down to wireless support, although the 2.6 is slightly larger....</p></blockquote></div><p>where did you find 8.09 with a 2.4 kernel (how do you know what kernel version a .bin contains)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87317">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">HellFire</div>
					<div class="post-datetime">
						5 May 2009, 08:00					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/">http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87373">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						5 May 2009, 22:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>HellFire wrote:</cite><blockquote><p><a href="http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/">http://downloads.openwrt.org/kamikaze/8.09/brcm-2.4/</a></p></blockquote></div><p>I thought that was for a different Broadcom chip when I saw it, not a <br />kernel version.&nbsp; &nbsp;Thanks for the link.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87500">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">kamispaz</div>
					<div class="post-datetime">
						7 May 2009, 09:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mark.clegg wrote:</cite><blockquote><p>I&#039;ve just had exactly the same problem, and have just &#039;solved&#039; it by reflashing with the 2.4 kernel version of 8.09.</p></blockquote></div><p>Yea, that solved the problem for me, too.</p><p>Thanks a bundle.&nbsp; Now I can get to work on this thing.</p><p>I&#039;ve filed bug report on this:</p><p><a href="https://dev.openwrt.org/ticket/5071">https://dev.openwrt.org/ticket/5071</a></p>											<p class="post-edited">(Last edited by <strong>kamispaz</strong> on 7 May 2009, 10:38)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>