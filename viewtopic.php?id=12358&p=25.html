<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 25 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=24.html">24</a></li><li class="pagination-current"><span>25</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=26.html">26</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=27.html">27</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p98050">
				<div class="post-metadata">
					<div class="post-num">Post #601</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						29 Nov 2009, 15:30					</div>
				</div>
				<div class="post-content content">
					<p>As there were again some ath9k, madwifi and iw changes I posted a ramdisk build of 18596 at <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/build_18596/ramdisk/">ftp://ftp.maddes.net/openwrt/trunk/orio … 6/ramdisk/</a></p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 7 Apr 2010, 21:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98051">
				<div class="post-metadata">
					<div class="post-num">Post #602</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						29 Nov 2009, 15:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>@bourne:<br />I hope you also read #437 too (and the other follow-ups of #436).<br />You can also try to use the stock image from <a href="ftp://ftp.maddes.net/openwrt/kamikaze/orion/stock/">ftp://ftp.maddes.net/openwrt/kamikaze/orion/stock/</a> , e.g. the original LinkSys image inside &quot;wrt350n.zip&quot; (2.00.17 and 2.00.19) or DirkNL&#039;s 2.0.0.17 extract &quot;mtd0.orig.img&quot;.</p></blockquote></div><p>As I wrote the post I remembered mentioning something about padding the img file to bin so I have done it, sorry for bothering you in advance. Found it <a href="https://forum.openwrt.org/viewtopic.php?pid=92928#p92928">here</a> and did it accordingly. <br />The recovery utility asks only for *.BIN not accepting *.IMG. I have done it with FW version 2.0.0.20 and now I have again flashed to 18148, jdt downloading luci.... Will see if it will panic again when PPPoE is set.</p><br /><p>Thanks for help, appreciate it!!</p>											<p class="post-edited">(Last edited by <strong>bourne</strong> on 29 Nov 2009, 15:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98052">
				<div class="post-metadata">
					<div class="post-num">Post #603</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						29 Nov 2009, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Remember that there have been wifi/wlan issues for some weeks, the older build 17264 from my ftp space is the last solid I released for testing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98054">
				<div class="post-metadata">
					<div class="post-num">Post #604</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						29 Nov 2009, 16:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>Remember that there have been wifi/wlan issues for some weeks, the older build 17264 from my ftp space is the last solid I released for testing.</p></blockquote></div><p>Thanks for the heads up. I enabled Wifi and it is working. Atleast with no security set. I am trying to find how to make PPPoE working now. Probably I messed the config before trying to do PPPoE connection and WiFi in the same time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98055">
				<div class="post-metadata">
					<div class="post-num">Post #605</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						29 Nov 2009, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>I have installed 17264,however luci stopped working after downgrade. I did firsboot but now it is updating packages from your ftp. How can I set it to download packages from OWRT?</p><p>From SSh PuTTY when I try to edit the /etc/opkg.conf it says permission denied.</p><p><strong>EDIT:</strong> I managed with vi.</p>											<p class="post-edited">(Last edited by <strong>bourne</strong> on 29 Nov 2009, 18:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98073">
				<div class="post-metadata">
					<div class="post-num">Post #606</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						30 Nov 2009, 08:25					</div>
				</div>
				<div class="post-content content">
					<p>So, I managed to get it to work, though PPPoE drops somewhat often. Nevertheless, WiFi is working, reporting 54Mb/s with WPA2 enabled. I used 17264 build as you have recommended, so far so good.</p><p>Thanks for the help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98125">
				<div class="post-metadata">
					<div class="post-num">Post #607</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						1 Dec 2009, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>@ Maddes.b I got my cable today so I have tried your newest build 18596 but I can not test it properly as when I try to activate wifi router restarts.<br />Is there any chance to get the squashfs.img so I can test it?</p><p>I have to report that build 17264 is working flawlessly so far. I thought there were some problems in the beginning as the link was dropping but so far it is working great. I have also enabled n&nbsp; mode and it is reporting 130 Mbps. I enabled Turbo also but I don&#039;t know if this is of any help.</p><p>I am using LuCI as my interface of choice, tried X-Wrt also but there seems to be some troube with packages. For some reason it is failing to download packages that it is requesting from web interface (bandwithd, for example) and after installation of the X-wrt I have to edit the opkg.conf as it messes up the X-Wrt repo somehow.</p>											<p class="post-edited">(Last edited by <strong>bourne</strong> on 1 Dec 2009, 18:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98133">
				<div class="post-metadata">
					<div class="post-num">Post #608</div>
					<div class="post-author">nd_100</div>
					<div class="post-datetime">
						1 Dec 2009, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>Bourne and Maddes:&nbsp; Kudos to you for all the hard work you are putting into this!&nbsp; This is my first attemp to using wrt firmware, and i am already a fan!</p><p>Question:&nbsp; I updated the build from 2 weeks back onto my WNR854T and other than the wifi, its been working very good.&nbsp; Is build 17264 able to get wifi for WNR854T working as well, or is it just for WNR350.&nbsp; Also, since sysupgrade is not working for WNR854T, is TFTP the best alternative?</p><p>Thanks in advance...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98134">
				<div class="post-metadata">
					<div class="post-num">Post #609</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						1 Dec 2009, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>@bourne:<br />That&#039;s why I&#039;m currently only releasing ramdisk builds. If a build crashes, then it is not a good idea to flash it from the squashfs image.<br />Right now there are some crashes (so called &quot;kernel panics&quot;) on encrypted wifi/wlan.<br />Just created a ramdisk build of 18615.</p><p>@nd_1000 / nilfred:<br />Thanks, but major credit goes to Kaloz from the OpenWrt developers, Leonard from Marvel plus DirkNL, StrikerNL from this forum.<br />I published all 17264 images for the Marvell Orion CPU, therefore: yes, you can test that build for WNR854T.<br />Can not say if WNR854T has also wifi/wlan problems with the latest builds. Maybe Nilfred can tell you more about this.</p><p>And yes TFTP is the most robust way to flash. Flashing inside Linux works (read page 12 and onwards) but you have to check a lot of stuff.</p><p><span class="bbu">Update:</span><br />Currently rebuilding 17264 with sysupgrade support for WRT350 and WNR854T. Will take 12-14 hours.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 1 Dec 2009, 22:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98135">
				<div class="post-metadata">
					<div class="post-num">Post #610</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						1 Dec 2009, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>I want to create a complete repository for WRT350N and other Orion-CPU-based routers, right now I would try to create it for build 17264.<br />Please mail(!) me if you would prefer this build, or would prefer another.<br />Please mail me via the mail link under my name - don&#039;t spam this thread. Your mail address will be visiable to me, if you want to be anonymous then PM me.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 1 Dec 2009, 22:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98143">
				<div class="post-metadata">
					<div class="post-num">Post #611</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						2 Dec 2009, 07:16					</div>
				</div>
				<div class="post-content content">
					<p>@nd_100: O_o I am the last person here that should be thanked, I just tried the almost_done build few days back. As Maddes said, major credit goes to Kaloz, Leonard, DirkNL, StrikerNL, and all the early testers willing to help. And Maddes, of course. Without him and his will to keep track on the changes, applying and compiling them for testing, we would have hard time with crappy Linksys <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thanks Maddes!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98144">
				<div class="post-metadata">
					<div class="post-num">Post #612</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						2 Dec 2009, 07:42					</div>
				</div>
				<div class="post-content content">
					<p>@nd_100: Please read this tread (at least). Stock WNR854T wifi is unsupported, but as it&#039;s Mini-PCI, can be exchanged by a well supported one. Needed mwl8k driver is unfinished.</p><p>I have x-wrt official package repositories, 160~190 Mb each, if someone is interested for:<br />r17427<br />r17980<br />r18042<br />r18161<br />r18327<br />r18433<br />r18454<br />r18456<br />r18580</p><p>@maddes.b: +1 r17264. Could we have a fork? Some changes after that are completely harmless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98145">
				<div class="post-metadata">
					<div class="post-num">Post #613</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						2 Dec 2009, 10:12					</div>
				</div>
				<div class="post-content content">
					<p>@ maddes.b I have tried following ramdisk builds:</p><p>17357, 17399, 17456, 17562, 17650.</p><p>17358 did not have ramdisk image so I skipped on that one.</p><p>wifi is working on all off them for me but n is not working. I tested on my xp machine and all are reporting 54Mbps.</p><p>On the build I ave installed configuration for WiFi is following:</p><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;wlan0&#039;
        option &#039;type&#039; &#039;mac80211&#039;
        option &#039;country&#039; &#039;cn&#039;
        option &#039;hwmode&#039; &#039;11ng&#039;
        option &#039;maxassoc&#039; &#039;&#039;
        option &#039;distance&#039; &#039;&#039;
        option &#039;diversity&#039; &#039;&#039;
        option &#039;txantenna&#039; &#039;&#039;
        option &#039;rxantenna&#039; &#039;&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;antenna&#039; &#039;&#039;
        option &#039;channel&#039; &#039;9&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wlan0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;hidden&#039; &#039;0&#039;
        option &#039;isolate&#039; &#039;0&#039;
        option &#039;txpower&#039; &#039;&#039;
        option &#039;bgscan&#039; &#039;0&#039;
        option &#039;wds&#039; &#039;0&#039;
        option &#039;key1&#039; &#039;&#039;
        option &#039;key2&#039; &#039;&#039;
        option &#039;key3&#039; &#039;&#039;
        option &#039;key4&#039; &#039;&#039;
        option &#039;80211h&#039; &#039;&#039;
        option &#039;compression&#039; &#039;&#039;
        option &#039;bursting&#039; &#039;&#039;
        option &#039;ff&#039; &#039;&#039;
        option &#039;wmm&#039; &#039;&#039;
        option &#039;xr&#039; &#039;&#039;
        option &#039;ar&#039; &#039;&#039;
        option &#039;turbo&#039; &#039;1&#039;
        option &#039;macpolicy&#039; &#039;none&#039;
        option &#039;maclist&#039; &#039;&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;key&#039; &#039;***********&#039;
        option &#039;ssid&#039; &#039;OW_test&#039;</code></pre></div><p>Adding following lines did not make any difference:</p><div class="codebox"><pre><code>        list &#039;ht_capab&#039; &#039;HT40-&#039;
        list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;
        list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;</code></pre></div><p><strong>one question</strong>: Does setting option &#039;encryption&#039; &#039;psk2&#039; or &#039;psk2/aes&#039; make any difference?<br />XP is connecting as PSK2/AES in both configurations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98153">
				<div class="post-metadata">
					<div class="post-num">Post #614</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						2 Dec 2009, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>This will be a &quot;sticky&quot; post to keep track of the mac80211 changes (due to the current wlan/wifi issues), so please bookmark it (same as you did with <a href="https://forum.openwrt.org/viewtopic.php?pid=82410#p82410">#300</a>, didn&#039;t you?).</p><p><span class="bbu">Explanations:</span> (as of <a href="https://dev.openwrt.org/changeset/19183">r19183</a>)<br />WPA[1] is normally TKIP encryption, and was inofficially updated to CCMP (AES) encryption.<br />WPA2 is the official implementation of CCMP (AES) encryption.<br />WEP is totally unsecure and unsupported by OpenWrt&#039;s hostapd script.<br /><a href="http://linuxwireless.org/en/users/Documentation/hostapd#Configuring_hostapd">Linux Wireless info</a>, <a href="http://w1.fi/hostapd/">HostAPd homepage</a></p><br /><p>The files in OpenWrt that handle wireless are lib/wifi/mac80211.sh and lib/wifi/hostapd.sh, plus sbin/wifi for general functions.<br />a) lib/wifi/mac80211.sh<br />Checks for lower case of *wep* or *psk*|*wpa*<br />b) lib/wifi/hostapd.sh<br />Checks for wpa2*|*psk2* and sets CCMP only, or *mixed* and sets CCMP+TKIP, otherwise TKIP only<br />Then checks for encryption overrides: *tkip+aes|*tkip+ccmp sets CCMP+TKIP, *tkip sets TKIP only, and *aes|*ccmp sets CCMP only</p><p>To set the different encryptions in their default way use one of this lines:<br />uci set wireless.@wifi-iface[0].encryption=psk-mixed&nbsp; # WPA-PSK with TKIP and WPA2-PSK with CCMP (AES)<br />uci set wireless.@wifi-iface[0].encryption=psk2&nbsp; # WPA2 with CCMP (AES)<br />uci set wireless.@wifi-iface[0].encryption=psk&nbsp; # WPA[1] with TKIP</p><p>Additionally for PSK mode: if the passphrase is a 64 chars long key then it is used as a hex key.</p><p>For hwmode the following possibilities exist: (lib\wifi\hostapd.sh)<br />11bg, 11a, 11b, 11g, 11na, 11ng</p><p><span class="bbu">Issues:</span><br />After 17264 some older drivers could not connect to OpenWrt, big problem with rarely updated devices like Smartphones, etc.<br />Additionally there must be a mac address in the config, this may not be the case if you kept/copied the config from a previous build.<br />Somewhere after 18000 there are kernel panics when starting the network or a device connects (<strong>last test: 19265</strong>).<br />There&#039;s a ticket for this issue: <a href="https://dev.openwrt.org/ticket/5815">#5815</a><br />It turned out that only release builds have this problem, a mini build does work.<br />The problematic package is kmod/Network Support/kmod-ipsec.</p><p>Test with <a href="https://dev.openwrt.org/changeset/19265">19265</a>:<br /></p><div class="codebox"><pre><code>* mini+tun build:
11g with G device (Dell Latitude D630, Intel Pro Wireless 3945ABG, Driver 12.2.0.0)
  none: +
  wep: not supported by hostapd script
       would be key management WEP104 or WEP40, instead of TKIP or CCMP
  wpa1-psk: ++
  wpa2-psk: ++
  wpa-mixed-psk: ++

11ng with G device (Dell Latitude D630, Intel Pro Wireless 3945ABG, Driver 12.2.0.0)
&quot;Per the draft standard, wpa2 is required for 802.11n.&quot;
  none: +
  wep: not supported by hostapd script
       would be key management WEP104 or WEP40, instead of TKIP or CCMP
  wpa1-psk: not allowed due to N mode
  wpa2-psk: +
  wpa-mixed-psk: only WPA2, no connection with WPA1 TKIP (from Laptop or Smartphone)


* release build:
11g with G device (Dell Latitude D630, Intel Pro Wireless 3945ABG, Driver 12.2.0.0)
  none: kernel panic</code></pre></div><p><strong>Currently not working on the list, it is complete up to the time I started creating it.</strong></p><p><strong>MAC80211-related changes after <a href="https://dev.openwrt.org/changeset/17264">17264</a>:</strong> (checked up to <a href="https://dev.openwrt.org/changeset/18617">18617</a>)<br /><span class="bbu">a) direct changes to package/mac80211</span><br /><a href="https://dev.openwrt.org/changeset/17265">17265</a> - [mac80211] Update to compat-wireless-2009-08-15<br /><a href="https://dev.openwrt.org/changeset/17266">17266</a> - [mac80211] update openfw to 5.2<br /><a href="https://dev.openwrt.org/changeset/17267">17267</a> - [mac80211] Build modules only if realy needed.<br /><a href="https://dev.openwrt.org/changeset/17275">17275</a> - [mac80211] also exclude usb_unpoison_urb<br /><a href="https://dev.openwrt.org/changeset/17276">17276</a> - [mac80211] Do not build the mac80211 module in the kernel.<br /><a href="https://dev.openwrt.org/changeset/17277">17277</a> - [mac80211] increase release number<br /><a href="https://dev.openwrt.org/changeset/17280">17280</a> - [mac80211] add deadlock fix patch<br /><a href="https://dev.openwrt.org/changeset/17326">17326</a> - [mac80211] upgrade to 2008-08-20 and clean up some unnecessary patching to config.mk, which frequently causes rejects on new versions<br /><a href="https://dev.openwrt.org/changeset/17327">17327</a> - [mac80211] remove support for compat-wireless-old<br /><a href="https://dev.openwrt.org/changeset/17328">17328</a> - [mac80211] fix ath5k dma size workaround for ar71xx. <br /><a href="https://dev.openwrt.org/changeset/17331">17331</a> - [mac80211] add missing config override<br /><a href="https://dev.openwrt.org/changeset/17335">17335</a> - [mac80211] speed up build by reducing the makefile shell calls, fix forced disable of rfkill<br /><a href="https://dev.openwrt.org/changeset/17336">17336</a> - [mac80211] disable b43 lp-phy support for now<br /><a href="https://dev.openwrt.org/changeset/17337">17337</a> - [mac80211] fix a typo in the compat-wireless build speedup patch<br /><a href="https://dev.openwrt.org/changeset/17339">17339</a> - [mac80211] reorganize compat code to make cfg80211 load without usb<br /><a href="https://dev.openwrt.org/changeset/17340">17340</a> - [mac80211] b43: disable pio and pcmcia support<br /><a href="https://dev.openwrt.org/changeset/17341">17341</a> - [mac80211] fix a race condition in the cfg80211 scanning code<br /><a href="https://dev.openwrt.org/changeset/17457">17457</a> - [mac80211] fix module loading with kernel 2.6.27<br /><a href="https://dev.openwrt.org/changeset/17541">17541</a> - [mac80211] add menuconfig option for enabling debug support via debugfs<br /><a href="https://dev.openwrt.org/changeset/17754">17754</a> - [mac80211] Do not depend on rfkill. With kernel 2.6.31 cfg80211 is build with rfkill if it was build.<br /><a href="https://dev.openwrt.org/changeset/17755">17755</a> - [mac80211] Do not build some modules as they are not needed<br /><a href="https://dev.openwrt.org/changeset/17760">17760</a> - [mac80211] Add ar9170usb driver<br /><a href="https://dev.openwrt.org/changeset/17821">17821</a> - [mac80211] merge Pat Erley&#039;s mac80211.sh from openwrt-devel@ with many cleanups and other changes by nbd. adds support for multiple interfaces, tested with ath9k<br /><a href="https://dev.openwrt.org/changeset/17824">17824</a> - [mac80211] fix typo in ifname setup, suppress error messages of interface enumeration commands<br /><a href="https://dev.openwrt.org/changeset/17825">17825</a> - [mac80211] autodetect the default phy mode based on 11n and freq capabilities<br /><a href="https://dev.openwrt.org/changeset/17828">17828</a> - [mac80211] ath: add a compile time option that gives the user full control over regulatory settings (disabled by default for now)<br /><a href="https://dev.openwrt.org/changeset/17982">17982</a> - [mac80211] libertas: use driver from compat-wireless instead of OpenWrt (deprecated) one<br /><a href="https://dev.openwrt.org/changeset/17986">17986</a> - [mac80211] fix typos in KernelPackage/libertas<br /><a href="https://dev.openwrt.org/changeset/18023">18023</a> - [mac80211] upgrade to latest compat-wireless, fix ad-hoc interface setup<br /><a href="https://dev.openwrt.org/changeset/18024">18024</a> - [mac80211] fix autochannel / fixed channel selection, add commands for unencrypted sta mode<br /><a href="https://dev.openwrt.org/changeset/18025">18025</a> - [mac80211] fix encryption fallback for sta mode, add frequency/bssid selection support<br /><a href="https://dev.openwrt.org/changeset/18030">18030</a> - [mac80211] fix ibss join/create<br /><a href="https://dev.openwrt.org/changeset/18031">18031</a> - [mac80211] fix rt2800pci, tx ack timeout is now hardcoded<br /><a href="https://dev.openwrt.org/changeset/18034">18034</a> - [mac80211] fix a warning during interface bringup when using autochannel<br /><a href="https://dev.openwrt.org/changeset/18040">18040</a> - [mac80211] fix download url<br /><a href="https://dev.openwrt.org/changeset/18065">18065</a> - [mac80211] fix ath5k compile on 2.6.28 and earlier<br /><a href="https://dev.openwrt.org/changeset/18258">18258</a> - [mac80211] fix hostapd frame injection in mac80211, backport 9b1ce526eb917c8b5c8497c327768130ee683392<br /><a href="https://dev.openwrt.org/changeset/18283">18283</a> - [kernel] add preliminary 2.6.32 support (patch)<br /><a href="https://dev.openwrt.org/changeset/18293">18293</a> - [mac80211] fill some important capabilities into ht_capab in the hostapd config<br /><a href="https://dev.openwrt.org/changeset/18294">18294</a> - [mac80211] update to 2009-11-03<br /><a href="https://dev.openwrt.org/changeset/18317">18317</a> - [mac80211] fix up the download location for the updated mac80211 version<br /><a href="https://dev.openwrt.org/changeset/18338">18338</a> - [mac80211] b43: work around a locking issue, might fix #5996<br /><a href="https://dev.openwrt.org/changeset/18351">18351</a> - [mac80211] fix wifi detect with 11n cards that have multiple bands<br /><a href="https://dev.openwrt.org/changeset/18355">18355</a> - [mac80211] fix wpa in client mode<br /><a href="https://dev.openwrt.org/changeset/18356">18356</a> - [mac80211] implement wds sta support (wds ap support work in progress, needs hostapd changes)<br /><a href="https://dev.openwrt.org/changeset/18363">18363</a> - [mac80211] fix a bug in broadcast handling of wds sta interfaces<br /><a href="https://dev.openwrt.org/changeset/18377">18377</a> - [mac80211] fix a race condition when bringing up wds sta interfaces on the ap<br /><a href="https://dev.openwrt.org/changeset/18379">18379</a> - [mac80211] disable powersave on the sta by default (for performance reasons)<br /><a href="https://dev.openwrt.org/changeset/18412">18412</a> - [mac80211] add config option to enable Atheros wireless debugging<br /><a href="https://dev.openwrt.org/changeset/18415">18415</a> - [mac80211] update to 2009-11-13 and add some of my new performance improvement patches.ixes excessive cpu usage of hostapd in ap mode, should also fix the ath9k memleak.<br /><a href="https://dev.openwrt.org/changeset/18427">18427</a> - [mac80211] sync with changes to patches submitted upstream<br /><a href="https://dev.openwrt.org/changeset/18428">18428</a> - [mac80211] ath9k: fix massive packet loss issue introduced by upstream cleanups<br /><a href="https://dev.openwrt.org/changeset/18429">18429</a> - [mac80211] ath9k: work-in-progress patch to adapt ath9k to the mac80211 rate control api<br /><a href="https://dev.openwrt.org/changeset/18430">18430</a> - [mac80211] add some missing patch chunks that were accidentally left out in the previous commit<br /><a href="https://dev.openwrt.org/changeset/18431">18431</a> - [mac80211] adjust patches based on upstream feedback<br /><a href="https://dev.openwrt.org/changeset/18433">18433</a> - [mac80211] ath: use GFP_DMA for rx buffer allocations to fix allocation errors on ixp4xx devices with more than 64 MB RAM<br /><a href="https://dev.openwrt.org/changeset/18436">18436</a> - [mac80211] use platform_data on PCI devices in ath9k<br /><a href="https://dev.openwrt.org/changeset/18444">18444</a> - [mac80211] ath9k: split up and adjust rc cleanup patch according to upstream feedback, also fix tx status reporting for minstrel compatibility<br /><a href="https://dev.openwrt.org/changeset/18445">18445</a> - [mac80211] ath9k: fix bisectability of rc patches<br /><a href="https://dev.openwrt.org/changeset/18452">18452</a> - [mac80211] ath9k: fix compiler warning without debug enabled<br /><a href="https://dev.openwrt.org/changeset/18465">18465</a> - [mac80211] update to compat-wireless 2009-11-21<br /><a href="https://dev.openwrt.org/changeset/18503">18503</a> - [mac80211] ath9k: add a few debugfs files to access the chainmasks and registers<br /><a href="https://dev.openwrt.org/changeset/18504">18504</a> - [mac80211] do not build b44<br /><a href="https://dev.openwrt.org/changeset/18505">18505</a> - [mac80211] separate ath9k debugfs support from ath9k debugging, use the mac80211 debugfs config option to enable it<br /><a href="https://dev.openwrt.org/changeset/18525">18525</a> - [mac80211] ath: only use GFP_DMA on ixp4xx<br /><a href="https://dev.openwrt.org/changeset/18537">18537</a> - [mac80211] disable 2GHz band for 5GHz only devices<br /><a href="https://dev.openwrt.org/changeset/18562">18562</a> - [mac80211] select channel 36 by default on 5GHz only devices<br /><a href="https://dev.openwrt.org/changeset/18563">18563</a> - [mac80211] update ath9k patch<br /><a href="https://dev.openwrt.org/changeset/18567">18567</a> - [mac80211] fix a typo in the mac80211.sh<br /><a href="https://dev.openwrt.org/changeset/18577">18577</a> - [mac80211] fix default channel selection in mac80211.sh<br /><a href="https://dev.openwrt.org/changeset/18580">18580</a> - [mac80211] update p54usb firmware to 2.13.24.0.lm87.arm<br /><a href="https://dev.openwrt.org/changeset/18582">18582</a> - [mac80211] remove trailing whitespaces in mac80211.sh<br /><a href="https://dev.openwrt.org/changeset/18583">18583</a> - [mac80211] fix detection of multiple mac80211 devices<br /><a href="https://dev.openwrt.org/changeset/18584">18584</a> - [mac80211] use mac address from platform data if present on ath9k<br /><a href="https://dev.openwrt.org/changeset/18600">18600</a> - [mac80211] fix up wds sta mode after r18591 (= [iw] Update iw to version 0.9.18)<br /><a href="https://dev.openwrt.org/changeset/18615">18615</a> - [mac80211] ix p54usb firmware installation</p><p><span class="bbu">b) outside changes related to mac80211</span><br /><a href="https://dev.openwrt.org/changeset/17276">17276</a> - [mac80211] Do not build the mac80211 module in the kernel.<br /><a href="https://dev.openwrt.org/changeset/17280">17280</a> - [mac80211] fix for commit r17276<br /><a href="https://dev.openwrt.org/changeset/17296">17296</a> ? [kernel] use 2.6.30.5<br /><a href="https://dev.openwrt.org/changeset/17311">17311</a> ? [madwifi] refresh patches<br /><a href="https://dev.openwrt.org/changeset/17312">17312</a> ? [madwifi] add powersave fixes based on patches by Steven Luo (#4376)<br /><a href="https://dev.openwrt.org/changeset/17314">17314</a> ? [madwifi] add patch for building all modules (except for the HAL) into a single module. removes support for onoe and amrr.<br /><a href="https://dev.openwrt.org/changeset/17315">17315</a> ? [madwifi] remove support for the madwifi upstream release, it doesn&#039;t work on newer kernels and it&#039;s not very reliable anyway<br /><a href="https://dev.openwrt.org/changeset/17316">17316</a> ? [madwifi] remove version selection support<br /><a href="https://dev.openwrt.org/changeset/17431">17431</a> ? [madwifi] fix another unconverted netdev_ops issue<br /><a href="https://dev.openwrt.org/changeset/17510">17510</a> ? [madwifi] add a configuration for uapsd (unscheduled automatic powersave delivery), turn it off by default<br /><a href="https://dev.openwrt.org/changeset/17545">17545</a> ? [madwifi] fix several noderef and ibss merge issues that led to memory leaks and high system load<br /><a href="https://dev.openwrt.org/changeset/17546">17546</a> ? [madwifi] replace an implicit memcpy with an explicit one (cosmetic fix)<br /><a href="https://dev.openwrt.org/changeset/17549">17549</a> ? [kernel] update to 2.6.30.6<br /><a href="https://dev.openwrt.org/changeset/17554">17554</a> ? [madwifi] bump some revisions and update copyrights<br /><a href="https://dev.openwrt.org/changeset/17576">17576</a> ? [madwifi] remove an unimportant part of the ibss node handling fix, which led to a regression in ap-to-ap wds operation<br /><a href="https://dev.openwrt.org/changeset/17578">17578</a> ? [madwifi] fix a wds related race condition<br /><a href="https://dev.openwrt.org/changeset/17592">17592</a> ? [madwifi] fix iwconfig tx power display<br /><a href="https://dev.openwrt.org/changeset/17602">17602</a> ? [kernel] update to latest 2.6.27 and 2.6.30 kernels<br /><a href="https://dev.openwrt.org/changeset/17687">17687</a> ? [madwifi] fix maximum txpower display<br /><a href="https://dev.openwrt.org/changeset/17688">17688</a> ? [madwifi] fix sta mode reconnect when roaming between different aps of the same essid<br /><a href="https://dev.openwrt.org/changeset/17689">17689</a> ? [madwifi] fix beacon slot handling and add support for more than 4 vaps (useful for wds per-sta interfaces)<br /><a href="https://dev.openwrt.org/changeset/17690">17690</a> ? [madwifi] fix a theoretical tx buffer leak<br /><a href="https://dev.openwrt.org/changeset/17691">17691</a> ? [madwifi] fix bugs in the calibration triggers<br /><a href="https://dev.openwrt.org/changeset/17804">17804</a> ? [kernel] upgrade to 2.6.30.8<br /><a href="https://dev.openwrt.org/changeset/17823">17823</a> ? [hostapd] initialize wme to sane values<br /><a href="https://dev.openwrt.org/changeset/17953">17953</a> ? [madwifi] madwifi cannot be compiled on cobalt which has a different mips cpu abi<br /><a href="https://dev.openwrt.org/changeset/17960">17960</a> ? [madwifi] add HAL_TARGET mapping for kirkwood board<br /><a href="https://dev.openwrt.org/changeset/18001">18001</a> ? [madwifi] we cannot build madwifi for octeon since there is no mips64r2 hal target<br /><a href="https://dev.openwrt.org/changeset/18045">18045</a> ? [madwifi] beacon timer fixes<br /><a href="https://dev.openwrt.org/changeset/18046">18046</a> ? [madwifi] fix race condition on ibss init<br /><a href="https://dev.openwrt.org/changeset/18048">18048</a> ? [madwifi] fix another ibss crash<br /><a href="https://dev.openwrt.org/changeset/18050">18050</a> ? [madwifi] more ad-hoc fixes<br /><a href="https://dev.openwrt.org/changeset/18051">18051</a> ? [hostapd] do not configure wme when using madwifi - fixes wpa/wpa2 association problems<br /><a href="https://dev.openwrt.org/changeset/18052">18052</a> ? [madwifi] fix various noderef/memleak issues<br /><a href="https://dev.openwrt.org/changeset/18053">18053</a> ? [madwifi] remove the 10HZ timer for updating rate control statistics<br /><a href="https://dev.openwrt.org/changeset/18054">18054</a> ? [madwifi] merge fixes from trunk<br /><a href="https://dev.openwrt.org/changeset/18055">18055</a> ? [madwifi] add antenna gpio support for nanostation loco2<br /><a href="https://dev.openwrt.org/changeset/18107">18107</a> ? [hostapd] make compilation of the hostap driver conditional - saves 10k uncompressed<br /><a href="https://dev.openwrt.org/changeset/18108">18108</a> ? [wireless-tools] reduce binary size by ~13k by removing unused/obsolete features<br /><a href="https://dev.openwrt.org/changeset/18112">18112</a> ? [madwifi] reduce the size of the multicall tool binary<br /><a href="https://dev.openwrt.org/changeset/18126">18126</a> ? [kernel] update to 2.6.30.9<br /><a href="https://dev.openwrt.org/changeset/18290">18290</a> ? [madwifi] fix a crash bug related to refcounting of bss nodes<br /><a href="https://dev.openwrt.org/changeset/18293">18293</a> - [hostapd] fill some important capabilities into ht_capab in the hostapd config<br /><a href="https://dev.openwrt.org/changeset/18358">18358</a> - [hostapd] use the new build variants feature to clean up the makefile<br /><a href="https://dev.openwrt.org/changeset/18360">18360</a> - [hostapd] update to latest git, remove openssl dependency for hostapd-full, it works with internal crypto now<br /><a href="https://dev.openwrt.org/changeset/18364">18364</a> - [hostapd] implement wds ap support<br /><a href="https://dev.openwrt.org/changeset/18365">18365</a> - [hostapd] automatically add wds sta interfaces of an ap to the right bridge<br /><a href="https://dev.openwrt.org/changeset/18377">18377</a> - [hostapd] fix a race condition when bringing up wds sta interfaces on the ap<br /><a href="https://dev.openwrt.org/changeset/18378">18378</a> ? [wireless-tools] re-enable support for enabling/disabling powersave<br /><a href="https://dev.openwrt.org/changeset/18404">18404</a> - [hostapd] fix HT40 BSS scan checks<br /><a href="https://dev.openwrt.org/changeset/18405">18405</a> - [hostapd] fix endian bugs in STA HT capability handling<br /><a href="https://dev.openwrt.org/changeset/18417">18417</a> - [hostapd] fix build of hostapd-utils<br /><a href="https://dev.openwrt.org/changeset/18464">18464</a> - [hostapd] only build opkg packages for the requested build variant (or any if no variant was specified for the package)<br /><a href="https://dev.openwrt.org/changeset/18497">18497</a> - [hostapd] fix rebuild checks<br /><a href="https://dev.openwrt.org/changeset/18602">18602</a> - [hostapd] replace the wme_* config variables with wmm_* ones<br /><a href="https://dev.openwrt.org/changeset/18606">18606</a> - [hostapd] update to latest git, fixes ampdu settings in the beacon HT IE</p><p>This is a preparation for creating a current build with the old mac80211 package of 17264.<br />But for this to work correctly all outside changes have to be known, evaluated and maybe reversed.</p><p>Here&#039;s how to setup the source code for a recent build with an old mac80211 package: (see post <a href="https://forum.openwrt.org/viewtopic.php?pid=82410#p82410">#300</a> for my information on how to compile it yourself).<br /></p><div class="codebox"><pre><code># extra folder for all downloads (stays untouched on &#039;make distclean&#039;)
mkdir ~/downloads/

# create folder for this special build
mkdir ~/kernel_mac80211/
cd ~/kernel_mac80211/

# create link to download folder
ln -s ../downloads/ dl

# initial checkout
svn checkout svn://svn.openwrt.org/openwrt/trunk/ .

# change mac80211 to old revision
cd package/mac80211/
svn update -r 17264
cd ../..</code></pre></div>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 3 Apr 2010, 19:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98158">
				<div class="post-metadata">
					<div class="post-num">Post #615</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						2 Dec 2009, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>Re-created ramdisk and squashfs builds of 17264 have been published on <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/">my ftp space</a> with the main packages.<br />Only change in main is the updated sysupgrade support for WNR845T and WRT350Nv2.</p><p>A compilation with all packages of 17264 (plus updated packages of OpenSSL, OpenVPN, SSLH, etherwake) went fine and is <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/build_17264/squashfs_all/README.txt">fully uploaded</a>.</p><p>Compilation with a complete current feed package (r18617) plus updated packages of dnsmasq, dropbear, opkg went fine and is <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/build_17264/squashfs/README.txt">fully uploaded</a>.<br />Tested successfully SSH, OpenVPN, both also via SSLH, etherwake, also via X-Wrt interface, ntpclient, PPPOE/DSL, Wifi/WLAN WPA2-PSK/AES.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 7 Apr 2010, 21:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98257">
				<div class="post-metadata">
					<div class="post-num">Post #616</div>
					<div class="post-author">nd_100</div>
					<div class="post-datetime">
						4 Dec 2009, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>For swapping card out of my wnr854t, would any of the following 2 cards work:</p><p>Intel WiFi Link 5100 <br />Atheros AR5008 </p><p>Any other card that will work right out of the gate instead of having to recompile something?&nbsp; <br />Thanks in advance.&nbsp; I tried searching the forums to see if this information is already been discussed but i didnt find anything specific...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98282">
				<div class="post-metadata">
					<div class="post-num">Post #617</div>
					<div class="post-author">bourne</div>
					<div class="post-datetime">
						4 Dec 2009, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>I have to correct myself on one thing:</p><div class="codebox"><pre><code>        list &#039;ht_capab&#039; &#039;HT40-&#039;
        list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;
        list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;</code></pre></div><p>does make a difference, speed goes up.</p><p>I have reflashed to the latest 17264 and I have updated hostapd too before I have added the &#039;list&#039; options.</p><p>btw it works flawlessly, 17264.</p><p>@nd_100, I think that with change of card you need to recompile the kernel, but am not sure. Maybe someone more experienced can answer this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98302">
				<div class="post-metadata">
					<div class="post-num">Post #618</div>
					<div class="post-author">Watha</div>
					<div class="post-datetime">
						4 Dec 2009, 23:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nd_100 wrote:</cite><blockquote><p>For swapping card out of my wnr854t, would any of the following 2 cards work:</p><p>Intel WiFi Link 5100 <br />Atheros AR5008 </p><p>Any other card that will work right out of the gate instead of having to recompile something?&nbsp; <br />Thanks in advance.&nbsp; I tried searching the forums to see if this information is already been discussed but i didnt find anything specific...</p></blockquote></div><p>The WRT350N comes with an AR5008 (consisting of Atheros AR5416 MAC/BB Rev:2 AR2133 RF Rev:81) so that should work fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98440">
				<div class="post-metadata">
					<div class="post-num">Post #619</div>
					<div class="post-author">slxar</div>
					<div class="post-datetime">
						7 Dec 2009, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for interrupt, but i want to ask whether I can use the file<br />openwrt-wrt350nv2-squashfs.padded.img<br />directly upgrade form the webGUI of the WRT350n V2 router</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98470">
				<div class="post-metadata">
					<div class="post-num">Post #620</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						8 Dec 2009, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>What WebGUI?<br />If stock firmware, then no. You need a webupgrade image.<br />If OpenWrt, then this would work. If sysupgrade support is already included then you do not need a padded image.</p><p>Btw it is recommended to really read the complete thread (at least from page 10 on), so you know what problems and issues currently exist. For example post #614 above and there are more.<br />Plus read the Wiki and Docs to know how to configure your router via uci, otherwise you will be lost and your router is rendered useless.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 8 Dec 2009, 02:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98479">
				<div class="post-metadata">
					<div class="post-num">Post #621</div>
					<div class="post-author">operron</div>
					<div class="post-datetime">
						8 Dec 2009, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>@maddes: I did give a try to your latest &quot;enhanced&quot; 17264 build.<br />For me it is not the way to go as from a wifi perspective, this version is quite worse compared to the latest stable you had (18148): it is a nightmare for my smartphone to keep connected :-(<br />So I wanted to switch back to 18148 which is not perfect but better (I made a local copy a few weeks ago) but... sysupgrade seems broken in the latest 17264:<br /></p><div class="codebox"><pre><code># sysupgrade -v ftp://192.168.1.11/public/openwrt/maddes/build_18148/squashfs/openwrt-wrt350nv2-squashfs.img
File does not exist.
Image check &#039;platform_check_image&#039; failed.</code></pre></div><p>(Of course a wget with the exact same url is ok.)</p><p>Edit1:<br />For the bad wifi:<br />I&#039;ve managed to get decent performances by:<br />- installing hostapd from optware trunk rather than from maddes build.<br />- manually editing /lib/wifi/hostapd.sh to add some more parameters as they were not handled through uci or the /etc/config/wireless file<br /></p><div class="codebox"><pre><code>ieee80211d=1
dtim_period=1
ignore_broadcast_ssid=1
ap_max_inactivity=1800</code></pre></div><p>I think that most of the above paremeters are just to deal with how I want my wifi network to operate and should&#039;nt play any role with regards to performance. Anyway, there&#039;s no way to set them up with uci.</p><p>-&nbsp; using some specific wireless parameters (with uci):<br /></p><div class="codebox"><pre><code>wireless.wlan0.ht_capab=[HT40-][SHORT-GI-40][DSSS_CCK-40]
wireless.wlan0.hwmode=11ng</code></pre></div><p>Edit2:<br />Finaly, I have too many wifi stability issues with 17264, so I reverted to 18148... (if one can say it reverts from 17264 to 18148 :D, yeah I&#039;m back in the future :D :D)<br />For the broken sysupgrade, just wget the image in /tmp and then sysupgrade from the local file in /tmp.</p>											<p class="post-edited">(Last edited by <strong>operron</strong> on 8 Dec 2009, 23:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98490">
				<div class="post-metadata">
					<div class="post-num">Post #622</div>
					<div class="post-author">slxar</div>
					<div class="post-datetime">
						8 Dec 2009, 16:14					</div>
				</div>
				<div class="post-content content">
					<p>If i am using the stock firmware, is there any methods that can be done in order to use OpenWrt?<br />sorry i don&#039;t know much about the other ways to flash the router</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98492">
				<div class="post-metadata">
					<div class="post-num">Post #623</div>
					<div class="post-author">operron</div>
					<div class="post-datetime">
						8 Dec 2009, 17:08					</div>
				</div>
				<div class="post-content content">
					<p>@slxar: maddes already answered you: You need a webupgrade image.<br />What may be not obvious if you just jumped in this thread is: where the hell do I find a webugrade image ? Hence maddes recommendation to get through the whole thread... yeah painful but very valuable.<br />So, having said that, the latest webugrade image (as the time of writing this) is <a href="ftp://ftp.maddes.net/openwrt/kamikaze/orion/build_17264/squashfs/NOT_FOR_NEWBIES_openwrt-wrt350nv2-squashfs-webupgrade.img">here</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98522">
				<div class="post-metadata">
					<div class="post-num">Post #624</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						9 Dec 2009, 13:54					</div>
				</div>
				<div class="post-content content">
					<p>Operron is right there&#039;s a left over from testing.<br />After some more testing it is not possible to do a sanity check on files from ftp/http spaces.<br />Therefore please download to /tmp and sysupgrade from there.</p><p>Latest version:<br /></p><div class="codebox"><pre><code># use default &quot;image&quot; for PART_NAME
# use default for platform_do_upgrade()

platform_check_image() {
    [ &quot;${ARGC}&quot; -gt 1 ] &amp;&amp; { echo &#039;Too many arguments. Only flash file expected.&#039;; return 1; }

    local hardware=`sed -n /Hardware/s/.*:.//p /proc/cpuinfo`
    local magic=&quot;$(get_magic_word &quot;$1&quot;)&quot;

    case &quot;${hardware}&quot; in
     # hardware with padded uImage + padded rootfs
     &#039;Netgear WNR854T&#039; | &#039;Linksys WRT350N v2&#039;)
        [ &quot;${magic}&quot; != &#039;2705&#039; ] &amp;&amp; {
            echo &quot;Invalid image type ${magic}.&quot;
            return 1
        }
        # special cases
        [ &quot;${hardware}&quot; == &#039;Linksys WRT350N v2&#039; ] &amp;&amp; {
            # checks can only be done with directly available files
            [ ! -f &quot;$1&quot; ] &amp;&amp; {
                local filename=`basename $1`;
                echo &quot;Due to necessary checks please download \&quot;${filename}\&quot; via wget to /tmp and upgrade from there.&quot;;
                return 1;
            }
            # WRT350Nv2 eRcOmM sanity check, if 0x00750000-0x0075FFFF would be overwritten or erased
            local checksize=$(( 0x00750000 ))
            local size=`ls -l &quot;$1&quot; | awk &#039;{ print $5 }&#039;`
            [ ${size} -gt ${checksize} ] &amp;&amp; {
                local bytes=`hexdump -v -e &#039;1/1 &quot;%02X&quot;&#039; -s $(( 0x0075FFE8 )) -n 8 &quot;$1&quot;`
                [ &quot;${bytes}&quot; != &#039;6552634F6D4D0000&#039; ] &amp;&amp; {
                    echo &quot;Flash image would kill eRcOmM identifier for WRT350N v2. Not flashing.&quot;
                    return 1
                }
            }
        }
        return 0
        ;;
    esac

    echo &quot;Sysupgrade is not yet supported on ${hardware}.&quot;
    return 1
}</code></pre></div>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 11 Dec 2009, 13:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98525">
				<div class="post-metadata">
					<div class="post-num">Post #625</div>
					<div class="post-author">slxar</div>
					<div class="post-datetime">
						9 Dec 2009, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>sorry about that,my english is too bad for understanding the posts but i have read the whole thread before i wrote the posts<br />Frankly speaking, thanks for you help and i will try it ASAP</p><p>Sorry for another question, how can i access to the web interface after flashing the router?<br />also some more question about routing<br />how can i set to have port forwarding and also access via lan device?<br />for example computer A got port 80 open but computer B can&#039;t access when typing the IP it just shows 404 error<br />sorry for my foolish question and English but it is in urgency</p>											<p class="post-edited">(Last edited by <strong>slxar</strong> on 9 Dec 2009, 18:04)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 25 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=24.html">24</a></li><li class="pagination-current"><span>25</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=26.html">26</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=27.html">27</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>