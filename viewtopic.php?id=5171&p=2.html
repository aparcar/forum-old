<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> UPnP and RC5</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 27 Mar 2018 and 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=5171&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p30644">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						17 Jul 2006, 20:20					</div>
				</div>
				<div class="post-content content">
					<p>4. Not neccesary here....</p><p>so just <br /></p><div class="quotebox"><blockquote><p>ipkg install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/libupnp_1.2.1a_mipsel.ipk">http://perso.wanadoo.fr/Stephane.Coulon … mipsel.ipk</a> <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon … -linux.ipk</a></p></blockquote></div><p>And sorry .. add:</p><p>edit: /etc/upnpd.conf<br />ln -s /etc/linuxigd/upnpd.rc /etc/init.d/S65upnpd</p><p>edit:<br />needed also</p><p>libpthread.so.0</p><p>so libpthread</p>											<p class="post-edited">(Last edited by <strong>combro2k</strong> on 17 Jul 2006, 20:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30649">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">obrienj</div>
					<div class="post-datetime">
						17 Jul 2006, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>Can someone put all of the last few posts into a concise, complete &quot;cookbook&quot; style post for those of us who are loosing track of what installs with what and needs what added or not added?</p><p>Jim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30650">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						17 Jul 2006, 22:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>BoAustin wrote:</cite><blockquote><p>stcoulon, I also am having problems with RC5 and upnp (both linksys&#039; and yani&#039;s) and I tried to install the two packages you provided, the libupnp 1.2.1a installed successfully, but the linux-igd failed:</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# ipkg install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon … -linux.ipk</a><br />Downloading <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon … -linux.ipk</a><br />Clearing state_want and state_flag for pkg=linux-igd (arch_priority=0 flag=16 want=2)<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />Cannot find package linux-igd.<br />Check the spelling or perhaps run &#039;ipkg update&#039;</p></blockquote></div></blockquote></div><p>I was able to replicate this bug. It installed 0.92 version of linux-igd. If I removed repository with this version from my ipkg.conf and did ipkg update then it refused to install cvs version. I got little frustrated.. So I just renamed ipk to tar.gz did tar xvzf to it and then did</p><p>#cd /<br />#tar xvzf /tmp/data.tar.gz</p><p>to install this. Thanks, works great, just a shame that it could had been this easy in the first place with ipkg install <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30657">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">guardia</div>
					<div class="post-datetime">
						18 Jul 2006, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Everything seems to work all right, after having to install it manually with tar... Here&#039;s the same error message with verbosity=3, if it can help someone figure out what&#039;s wrong:</p><p>root@OpenWrt:~# ipkg -V 3 install linux-igd_1.0.1-cvs_mipsel-linux.ipk<br />pkg_info_preinstall_check: updating arch priority for each package<br />Clearing state_want and state_flag for pkg=linux-igd (arch_priority=0 flag=16 want=2)<br />pkg_info_preinstall_check: update file owner list<br />best installation candidate for linux-igd<br /> adding linux-igd to providers<br />&nbsp; linux-igd arch=mipsel-linux arch_priority=0 constraint=1<br />Configuring unpacked packages<br />Nothing to be done<br />An error ocurred, return value: 4.<br />Collected errors:<br />Cannot find package linux-igd.<br />Check the spelling or perhaps run &#039;ipkg update&#039;<br />hash_table[pkg-hash] n_buckets=0 n_elements=488 max_conflicts=0 n_conflicts=0<br />hash_table[file-hash] n_buckets=0 n_elements=307 max_conflicts=0 n_conflicts=0<br />hash_table[obs-file-hash] n_buckets=0 n_elements=0 max_conflicts=0 n_conflicts=0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30716">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						18 Jul 2006, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t add the the link to my ipkg.conf<br />just use the url..<br />it works here quite good.<br />Just standard. micro version + nas etc <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30717">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">combro2k</div>
					<div class="post-datetime">
						18 Jul 2006, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>A quick how to ...</p><p>ipkg install <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/libupnp_1.2.1a_mipsel.ipk">http://perso.wanadoo.fr/Stephane.Coulon … mipsel.ipk</a> <a href="http://perso.wanadoo.fr/Stephane.Coulon/OpenWRT/linux-igd_1.0.1-cvs_mipsel-linux.ipk">http://perso.wanadoo.fr/Stephane.Coulon … -linux.ipk</a> libpthread</p><p>(btw for the links... rightclick copy ... otherwise you got &#039;.&#039; (dots) into your url line...)</p><p>then <br />vim /etc/upnpd.conf<br />edit the lines <br />#<br /># The internet line upstream bit rate reported from<br /># the daemon. Value in bits per second<br /># default = 0<br />upstream_bitrate = 1000000</p><p>#<br /># The internet line downstream bit rate reported from<br /># the daemon. Value in bits per second<br /># default = 0<br />downstream_bitrate = 12000000</p><p>then :</p><p>ln -s /etc/linuxigd/upnpd.rc /etc/init.d/S65upnpd</p><p>after that:</p><p>/etc/init.d/S65upnpd start</p><p>now it starts <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Good luck and this is how I got it work.</p><p>I&#039;ve a WRT54GS</p>											<p class="post-edited">(Last edited by <strong>combro2k</strong> on 18 Jul 2006, 19:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30743">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						19 Jul 2006, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>There&#039;s a bug in stop part of init script, here&#039;s a fix:<br /></p><div class="codebox"><pre><code>stop() {
    echo -n &quot;Stopping $prog: &quot;
    killall `echo $UPNPD|cut -d &quot;/&quot; -f 3`
    route del -net 239.0.0.0 netmask 255.0.0.0 $INTIFACE
    echo &quot;OK&quot;
}</code></pre></div><p>killall /sbin/upnpd just doesn&#039;t work, because killall on openwrt doesn&#039;t like paths, this fix strips $UPNPD from &quot;/sbin/upnpd&quot; to just &quot;upnpd&quot;</p><p>Second thing.. I have ADSL2MUE setup as a bridge, I changed my upnp setup a little so speed settings are acquired from the modem and set inside upnpd.conf during upnpd startup.<br />To make this work, you need your ADSL2MUE to be reachable from your router, I wrote a howto on that subject, it&#039;s here: <a href="http://forum.openwrt.org/viewtopic.php?pid=30739">http://forum.openwrt.org/viewtopic.php?pid=30739</a></p><p>Okay, now you can reach your ADSL2MUE, right? I use firmware 4.22EU (Plain linksys firmware) but I assume that this works with all linksys&#039;s adsl2mue firmware&#039;s (expect 2.17TI, I bet it doesn&#039;t work with that).</p><p>Happy with this and still reading? Okay, let&#039;s make changes then..<br />Move your /etc/upnpd.conf to /etc/config/upnpd.conf</p><p>then edit file, remove everything about speed (well, lines containing downstream_bitrate and upstream_bitrate is enough)</p><p>My script also writes original comments in upnpd.conf just because.. Well, I just made it do so <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Then do a symlink from /tmp/upnpd.conf to /etc/upnpd.conf<br /></p><div class="codebox"><pre><code>#ln -s /tmp/upnpd.conf /etc/upnpd.conf</code></pre></div><p>Yeah, I know, file doesn&#039;t exist, but ln doesn&#039;t complain about that. My startup script will write file /tmp/upnpd.conf.</p><p>Okay, now we are ready to go. Here&#039;s a new /etc/init.d/S65upnpd:<br /></p><div class="codebox"><pre><code>#!/bin/sh
#
#       /etc/linux-igd/upnpd
#
# Starts the upnpd daemon
#
# description: Internet Gateway Device
# processname: upnpd

# Setup Internal and External interfaces

#Put your DSL Modem&#039;s IP or hostname in this variable.
#If you use hostname, make sure that it resolves correctly.

MODEM_IP=&quot;10.0.0.9&quot;

#Also make sure that route to your modem exists BEFORE
#upnpd starts.

nvram=/usr/sbin/nvram
INTIFACE=$($nvram get lan_ifname)
EXTIFACE=$($nvram get wan_ifname)

UPNPD=/sbin/upnpd

test -x &quot;$UPNPD&quot; || exit 1

#
#       See how we were called.
#

prog=&quot;upnpd&quot;

start() {

    echo -n &quot;Acquiring link speed: &quot;
    wget -q -O - &quot;http://${MODEM_IP}/cgi-bin/webcm?getpage=../html/StatusModem.htm&amp;var:conid=connection0&quot; | grep &quot;var dsl_&quot; &gt; /tmp/.speedreport
    DOWNSTREAM=`grep &#039;dsl_ds_rate = &quot;&#039; /tmp/.speedreport | cut -d &#039;&quot;&#039; -f 2`
    UPSTREAM=`grep &#039;dsl_us_rate = &quot;&#039; /tmp/.speedreport | cut -d &#039;&quot;&#039; -f 2`
    rm /tmp/.speedreport
    echo &quot;OK&quot;
    echo Downstream: ${DOWNSTREAM}
    echo Upstream: ${UPSTREAM}

    echo -n &quot;Generating upnpd.conf: &quot;

    cp /etc/config/upnpd.conf /tmp/upnpd.conf
    echo -n &quot;#
# The internet line upstream bit rate reported from
# the daemon. Value in bits per second
# default = 0
upstream_bitrate = &quot;&gt;&gt;/tmp/upnpd.conf
    echo $(( $UPSTREAM * 1000))&gt;&gt;/tmp/upnpd.conf
echo &gt;&gt;/tmp/upnpd.conf
echo -n &quot;#
# The internet line downstream bit rate reported from
# the daemon. Value in bits per second
# default = 0
downstream_bitrate = &quot;&gt;&gt;/tmp/upnpd.conf
echo $(( $DOWNSTREAM * 1000))&gt;&gt;/tmp/upnpd.conf
echo &gt;&gt;/tmp/upnpd.conf

    echo &quot;OK&quot;

    echo -n &quot;Starting $prog: &quot;
    route add -net 239.0.0.0 netmask 255.0.0.0 $INTIFACE
    &quot;$UPNPD&quot; $EXTIFACE $INTIFACE
    echo &quot;OK&quot;
}

stop() {
    echo -n &quot;Stopping $prog: &quot;
    killall `echo $UPNPD|cut -d &quot;/&quot; -f 3`
    route del -net 239.0.0.0 netmask 255.0.0.0 $INTIFACE
    echo &quot;OK&quot;
}


restart() {
        stop
        sleep 10
        start
}

reload() {
        restart
}

case &quot;$1&quot; in
start)
        start
        ;;
stop)
        stop
        ;;
reload|restart)
        restart
        ;;
*)
        echo $&quot;Usage: $0 {start|stop|reload|restart}&quot;
        exit 1
esac</code></pre></div><p>There you go. In windows XP, it says Speed: 8.0 Mbps to me. Works just as it shoulds <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>EDIT: It doesn&#039;t seem to work so fine. After I rebooted both devices, adsl2mue wants me to login and I can&#039;t do this with wget utility of busybox. But hang on.. I am working on a solution, hard part in this is that password needs to be sent as encrypted (encryption is quite simple as it is done with javascript, but maybe I&#039;ll just skip that part since propably nobody has changed from default &quot;admin&quot; password.. or then they have:)</p><p>I&#039;ll continue tomorrow.. Too tired now..</p>											<p class="post-edited">(Last edited by <strong>jake1981</strong> on 19 Jul 2006, 02:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p30745">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						19 Jul 2006, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>btw. in ADSL2MUE, if you need to know what is current DSL speed..</p><p>You can find it in /proc/avalanche/avsar_modem_stats</p><p>To get correct line..<br /></p><div class="codebox"><pre><code>cat /proc/avalanche/avsar_modem_stats| grep &quot;Connection Rate:&quot;</code></pre></div><p>I tried to make another init script, which would had utilized scp to acquire speed information from that file, but unfortunately I was reported that file doesn&#039;t exist when it does exist and I didn&#039;t do a typo or anything. Maybe /proc/* is protected somehow, who knows about montavista..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31294">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						30 Jul 2006, 07:55					</div>
				</div>
				<div class="post-content content">
					<p>Peoples,</p><p>I have fixed Stephane&#039;s Linux IGD Package so that it now installs correctly.&nbsp; I also altered the package so that it notifies you that libupnp and libpthread are prerequisites.</p><p>To fix the installation I made two changes to the control file:</p><p>1. I set the dependencies value to include libpthread and libupnp<br />2. I altered the architecture value, changing it back to &quot;mipsel&quot; rather than &quot;mipsel-linux&quot;</p><p>Change #2 is what fixed the installation problem, whilst change #1 provides the notification of the dependencies.</p><p>I have asked Stephane if he would also like to include the symbolic link to the startup file in the package as well, but until then the current version of the fixed package can be obtained here: <a href="http://members.optusnet.com.au/edwardluck/openwrt/packages/linux-igd_1.0.1.ipk">http://members.optusnet.com.au/edwardlu … _1.0.1.ipk</a></p><p>Note that all credit still goes to Stephane for getting this package up - I&#039;ve just added a couple of tweaks to help the installation!</p><p>Kaldek</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31300">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						30 Jul 2006, 13:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kaldek wrote:</cite><blockquote><p>I have asked Stephane if he would also like to include the symbolic link to the startup file in the package as wel<br />Kaldek</p></blockquote></div><p>I have spoken with Stephane and he is happy for me to apply all the fixes including the startup file.&nbsp; I&#039;ll generate a new package that contains all three of the modifications and re-post it to my website.&nbsp; This basically means that the current supported version of upnp is the one hosted on my site, until the next release of OpenWRT when Stephane thinks he will get involved again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31301">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						30 Jul 2006, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>The Wiki documentation has now also been updated: <a href="http://wiki.openwrt.org/OpenWrtDocs/upnp">http://wiki.openwrt.org/OpenWrtDocs/upnp</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31303">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						30 Jul 2006, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>I did add one final change to the package - the bandwidth in the /etc/upnpd.conf file has now been set to 10Mb/s for both upload and download.&nbsp; I figure this is a good default value.&nbsp; Not that it actually affects how fast you can download anything - it&#039;s effectively meant to be informative more than anything else.</p><p>P.S.&nbsp; I would have edited the previous posts rather than keep adding new ones but there appears to be a problem with posting edits to this thread.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31315">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">stcoulon</div>
					<div class="post-datetime">
						30 Jul 2006, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>Sorry guys that I had no time to spend fixing the package, as I was very busy at work. Anyway it belongs to the community, and thanks to Kaldek for doing the job. Stéphane.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31359">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">obrienj</div>
					<div class="post-datetime">
						31 Jul 2006, 20:27					</div>
				</div>
				<div class="post-content content">
					<p>kaldek thanks for the effort.</p><p>I am compelled to ask one question, does this Upnp support work well enough to turn loose my widely scattered family (mostly non-technical) on MSN Messenger using video as well as audio and text?</p><p>Some member have an OpenWRT based router (to have this support installed) and others have vanilla Linksys routers with UPnP enabled.</p><p>Jim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31379">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						1 Aug 2006, 01:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>obrienj wrote:</cite><blockquote><p>kaldek thanks for the effort.</p><p>I am compelled to ask one question, does this Upnp support work well enough to turn loose my widely scattered family (mostly non-technical) on MSN Messenger using video as well as audio and text?<br />Jim</p></blockquote></div><p>Absolutely - it&#039;s the first thing I tested on this new package and it&#039;s working fine.&nbsp; Needing MSN video &amp; audio was the original reason I personally got involved with the package in the first place (way back in early 2005).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31381">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						1 Aug 2006, 01:47					</div>
				</div>
				<div class="post-content content">
					<p>Since there has been so many updates to this thread I thought I&#039;d provide an updated installation procedure for everyone.&nbsp; </p><p>First, log on to your router as <strong>root</strong>, then enter the following commands:</p><div class="codebox"><pre><code>cd /tmp
wget http://members.optusnet.com.au/edwardluck/openwrt/packages/libupnp_1.2.1a_mipsel.ipk
ipkg install libupnp_1.2.1a_mipsel.ipk
wget http://members.optusnet.com.au/edwardluck/openwrt/packages/linux-igd_1.0.1.ipk
ipkg install linux-igd_1.0.1.ipk
/etc/init.d/S65upnpd start</code></pre></div><p>Installing the linux-igd package will automatically also install the libpthread package (which is part of the indexed package tree).&nbsp; Other than these above steps, you don&#039;t need to do anything; after any further system reboots, the uPnP daemon will start automatically.</p><p>As a Windows XP user, you can tell that the uPnP daemon is working by looking at your <strong>Network Connections</strong> control panel.&nbsp; There will be an entry titled &quot;Internet Gateway&quot; which you can double-click on to see the network stats.&nbsp; You can also right-click on this and manually open any ports - these changes will be applied to IPTables on the router on the fly.&nbsp; Do note that as soon as you reboot those ports will no longer be open.</p><p>As a final note, I do suggest that any newcomers to using uPnP read the security warning section of the uPnP documentation so that you know the risks. <a href="http://wiki.openwrt.org/OpenWrtDocs/upnp">http://wiki.openwrt.org/OpenWrtDocs/upnp</a></p>											<p class="post-edited">(Last edited by <strong>kaldek</strong> on 1 Aug 2006, 01:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31382">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">obrienj</div>
					<div class="post-datetime">
						1 Aug 2006, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>kaldek,</p><p>Again, many thanks. I will install tomorrow using the wiki doc.&nbsp; oops, I mean the post that preceeded this one.</p><p>Jim</p>											<p class="post-edited">(Last edited by <strong>obrienj</strong> on 1 Aug 2006, 01:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31406">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">loyukfai</div>
					<div class="post-datetime">
						1 Aug 2006, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks to kaldek, stcoulon and all others who have contributed to this.</p><p>Finally I should be able to use Remote Assistance to help fixing my friend&#039;s PC again.</p><p>Have a nice week to all!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p31566">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">logandzwon</div>
					<div class="post-datetime">
						4 Aug 2006, 06:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kaldek wrote:</cite><blockquote><p>Since there has been so many updates to this thread I thought I&#039;d provide an updated installation procedure for everyone.&nbsp; </p><p>First, log on to your router as <strong>root</strong>, then enter the following commands:</p><div class="codebox"><pre><code>cd /tmp
wget http://members.optusnet.com.au/edwardluck/openwrt/packages/libupnp_1.2.1a_mipsel.ipk
ipkg install libupnp_1.2.1a_mipsel.ipk
wget http://members.optusnet.com.au/edwardluck/openwrt/packages/linux-igd_1.0.1.ipk
ipkg install linux-igd_1.0.1.ipk
/etc/init.d/S65upnpd start</code></pre></div><p>Installing the linux-igd package will automatically also install the libpthread package (which is part of the indexed package tree).&nbsp; Other than these above steps, you don&#039;t need to do anything; after any further system reboots, the uPnP daemon will start automatically.</p><p>As a Windows XP user, you can tell that the uPnP daemon is working by looking at your <strong>Network Connections</strong> control panel.&nbsp; There will be an entry titled &quot;Internet Gateway&quot; which you can double-click on to see the network stats.&nbsp; You can also right-click on this and manually open any ports - these changes will be applied to IPTables on the router on the fly.&nbsp; Do note that as soon as you reboot those ports will no longer be open.</p><p>As a final note, I do suggest that any newcomers to using uPnP read the security warning section of the uPnP documentation so that you know the risks. <a href="http://wiki.openwrt.org/OpenWrtDocs/upnp">http://wiki.openwrt.org/OpenWrtDocs/upnp</a></p></blockquote></div><p>I set-up this upnp package on a couple of my openwrts.&nbsp; I&#039;ve noticed a few things I thought I&#039;d suggest though;<br />1) the default setting for upnp.conf doesn&#039;t match the way the default way the openwrt crew set-up their firewall; changing these veriables brings that back into sync;<br />&nbsp; &nbsp; forward_chain_name = forwarding_rule<br />&nbsp; &nbsp; prerouting_chain_name = prerouting_rule<br />2) One of the openwrts I set this up on has an xbox 360 behind it.&nbsp; The 360 addes the rules it needs, then no longer and access XBL.&nbsp; The rules look correct, dnat anything on 3074 to LANIPOF360:3074-0&nbsp; <br />&nbsp; I&#039;m not sure what the -0 means, but I tried removing that rules from iptables and adding with out it, and that made no difference.&nbsp; My RV042 does not have any issues with the 360, upnp, and XBL.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36927">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">gojoors</div>
					<div class="post-datetime">
						10 Nov 2006, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>hi,</p><p>I tried to install linux-igd as you describe and it seems some rules are added (no extensive tests yet).</p><p>However, several upnpd instances are running (ps)... can you observe the same thing ?</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p36989">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">loswillios</div>
					<div class="post-datetime">
						11 Nov 2006, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>yes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54489">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Cyberlullaby</div>
					<div class="post-datetime">
						24 Aug 2007, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m seeing them too on Kamikaze, and there&#039;s also fail2ban which eat 5 times 9% of my WL-700gE memory..<br />On my Gentoo machine I have only one instance of upnpd and fail2ban running, what could this be due to ?</p>											<p class="post-edited">(Last edited by <strong>Cyberlullaby</strong> on 24 Aug 2007, 08:10)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=5171&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>