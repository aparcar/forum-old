<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Fully featured OpenWrt build for the WNDR3700 (NO LONGER MAINTAINED)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Apr 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 149</div><nav><ul><li><a href="viewtopic.php%3Fid=27722&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=27722&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=27722&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=27722&amp;p=149.html">149</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p123326">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Dec 2010, 00:31					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://dl.dropbox.com/u/3104731/openwrt-wndr3700-r24569-3-squashfs-sysupgrade.bin">http://dl.dropbox.com/u/3104731/openwrt … pgrade.bin</a></p><p>Here you go, let me know if there&#039;s any difference.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123327">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						16 Dec 2010, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>Nothing to do, same results <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Tomorrow i&#039;ll retry the rc4 blackfire and i&#039;ll can tell you if the issue is only on your build or not.</p><p>See you <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123330">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						16 Dec 2010, 01:14					</div>
				</div>
				<div class="post-content content">
					<p>Mate, i tried this build <a href="https://forum.openwrt.org/viewtopic.php?pid=123275#p123275">https://forum.openwrt.org/viewtopic.php … 75#p123275</a> and it doesn&#039;t have the issue.<br />We have to understand where is the mistake.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123335">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Eugen1968</div>
					<div class="post-datetime">
						16 Dec 2010, 08:32					</div>
				</div>
				<div class="post-content content">
					<p>miniDLNA and NFS works perfectly.<br />I mounted the HDD attached to router on the WDTV Live player with NFS.<br />Samsung LCD 40c650 works perfectly with miniDLNA.<br />I try today, pure-ftpd, but I do not understand how to edit and save the config files.<br />I try this command: vi /etc/config/pure-ftpd and how save the file ?</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>Eugen1968</strong> on 16 Dec 2010, 11:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123345">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						16 Dec 2010, 13:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Eugen1968 wrote:</cite><blockquote><p>miniDLNA and NFS works perfectly.<br />I mounted the HDD attached to router on the WDTV Live player with NFS.<br />Samsung LCD 40c650 works perfectly with miniDLNA.<br />I try today, pure-ftpd, but I do not understand how to edit and save the config files.<br />I try this command: vi /etc/config/pure-ftpd and how save the file ?</p><p>Thanks</p></blockquote></div><p>You could install nano and use it instead of vi <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123346">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Dec 2010, 13:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>coatto87 wrote:</cite><blockquote><p>Mate, i tried this build <a href="https://forum.openwrt.org/viewtopic.php?pid=123275#p123275">https://forum.openwrt.org/viewtopic.php … 75#p123275</a> and it doesn&#039;t have the issue.<br />We have to understand where is the mistake.</p></blockquote></div><p>I&#039;m not convinced there is an issue, you haven&#039;t really provided any performance benchmarks. I suggest you make some and then make a ticket.</p><p><a href="http://dl.dropbox.com/u/3104731/openwrt-wndr3700-backfire-r24616-squashfs-sysupgrade.bin">http://dl.dropbox.com/u/3104731/openwrt … pgrade.bin</a><br /><a href="http://dl.dropbox.com/u/3104731/openwrt-wndr3700-backfire-r24616-squashfs-factory.img">http://dl.dropbox.com/u/3104731/openwrt … actory.img</a></p><p>I rebuilt with backfire, you can try that.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 16 Dec 2010, 14:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123349">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						16 Dec 2010, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>This is a benchmark of backfire rc4.<br />I have installed, after the flash, these packages:</p><p>- vsftpd<br />- portmap<br />- kmod-fs-ext3<br />- kmod-fs-usb-storage<br />- kmod-fs-usb2<br />- kmod-usb-ohci</p><p><span class="postimg"><img src="http://i56.tinypic.com/sw2udx.jpg" alt="http://i56.tinypic.com/sw2udx.jpg" /></span></p><p><span class="postimg"><img src="http://i52.tinypic.com/b4i7lv.jpg" alt="http://i52.tinypic.com/b4i7lv.jpg" /></span></p><p>As you can see, 21MB/s on reading and 17MB/s on writing.</p>											<p class="post-edited">(Last edited by <strong>coatto87</strong> on 16 Dec 2010, 14:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123359">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Dec 2010, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>And how exactly does this app measure throughput? What results are you getting with trunk? Did you try the backfire build I posted?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123361">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Dec 2010, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s a sequential write test:</p><p>root@OpenWrt sda1# time dd if=/dev/zero of=test bs=1M count=256<br />256+0 records in<br />256+0 records out<br />real&nbsp; &nbsp; 0m 13.66s<br />user&nbsp; &nbsp; 0m 0.00s<br />sys&nbsp; &nbsp; 0m 3.99s</p><p>Connected is a 1.5TB 2.5&quot; Seagate.</p><p>$ time dd if=/dev/zero of=test bs=1M count=256<br />256+0 records in<br />256+0 records out<br />268435456 bytes (268 MB) copied, 7.96075 s, 33.7 MB/s</p><p>real&nbsp; &nbsp; 0m8.002s<br />user&nbsp; &nbsp; 0m0.000s<br />sys&nbsp; &nbsp; 0m0.500s</p><p>Same test on my laptop&#039;s SSD. 5 seconds faster.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123362">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						16 Dec 2010, 19:24					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt:/mnt/sda1# time dd if=/dev/zero of=test bs=1M count=256
256+0 records in
256+0 records out
real    0m 8.65s
user    0m 0.02s
sys    0m 3.73s</code></pre></div><p>On svn24619 with 2,5 5400rpm hdd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123367">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						16 Dec 2010, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>As fast as the SSD <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123383">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">MadHost</div>
					<div class="post-datetime">
						17 Dec 2010, 09:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><div class="quotebox"><cite>coatto87 wrote:</cite><blockquote><p>Mate, i tried this build <a href="https://forum.openwrt.org/viewtopic.php?pid=123275#p123275">https://forum.openwrt.org/viewtopic.php … 75#p123275</a> and it doesn&#039;t have the issue.<br />We have to understand where is the mistake.</p></blockquote></div><p>I&#039;m not convinced there is an issue, you haven&#039;t really provided any performance benchmarks. I suggest you make some and then make a ticket.</p><p><a href="http://dl.dropbox.com/u/3104731/openwrt-wndr3700-backfire-r24616-squashfs-sysupgrade.bin">http://dl.dropbox.com/u/3104731/openwrt … pgrade.bin</a><br /><a href="http://dl.dropbox.com/u/3104731/openwrt-wndr3700-backfire-r24616-squashfs-factory.img">http://dl.dropbox.com/u/3104731/openwrt … actory.img</a></p><p>I rebuilt with backfire, you can try that.</p></blockquote></div><p>Thank you for rebuilding with backfire. This build is very stable with Wireless so keep on the good work! And enable even more features ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123385">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Dec 2010, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Updated build. With a cable I get ~20MB/s reading from the USB drive through FTP, and ~15MB/s writing. I don&#039;t think there&#039;s any speed regressions over backfire.</p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 17 Dec 2010, 11:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123386">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						17 Dec 2010, 12:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Updated build. With a cable I get ~20MB/s reading from the USB drive through FTP, and ~15MB/s writing. I don&#039;t think there&#039;s any speed regressions over backfire.</p></blockquote></div><p>sda1# time dd if=/dev/zero of=test bs=1M count=256<br />256+0 records in<br />256+0 records out<br />real&nbsp; &nbsp; 0m 10.29s<br />user&nbsp; &nbsp; 0m 0.01s<br />sys&nbsp; &nbsp; 0m 3.00s</p><p>With your latest build <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123388">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Dec 2010, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>Looks good to me, keep in mind that command is just writing zeroes as fast as it can to disk. Depending on how fragmented the filesystem is results will vary. You are guaranteed to have some seconds difference depending on where you write.</p><p>Load up an FTP client and do some tests over cabled network, that should give you some solid performance measurements.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123389">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						17 Dec 2010, 12:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Looks good to me, keep in mind that command is just writing zeroes as fast as it can to disk. Depending on how fragmented the filesystem is results will vary. You are guaranteed to have some seconds difference depending on where you write.</p><p>Load up an FTP client and do some tests over cabled network, that should give you some solid performance measurements.</p></blockquote></div><p>Well made, now it&#039;s ok.<br />You should change pure-ftpd with vsftpd and you&#039;ll see the difference <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />Another thing: samba doesn&#039;t work because you have to add OpenWrt in /etc/hosts:</p><div class="codebox"><pre><code>127.0.0.1 localhost OpenWrt</code></pre></div><p>Bye <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123390">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Dec 2010, 12:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>coatto87 wrote:</cite><blockquote><p>Well made, now it&#039;s ok.</p></blockquote></div><p>Meaning? You don&#039;t have any performance issues anymore, or your measurements were wrong?</p><div class="quotebox"><blockquote><p>You should change pure-ftpd with vsftpd and you&#039;ll see the difference <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p></blockquote></div><p>What difference would that be?</p><div class="quotebox"><blockquote><p>Another thing: samba doesn&#039;t work because you have to add OpenWrt in /etc/hosts:</p><div class="codebox"><pre><code>127.0.0.1 localhost OpenWrt</code></pre></div><p>Bye <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>You really shouldn&#039;t use OpenWrt as an alias to loopback. Other machines on the network will lookup OpenWrt as 127.0.0.1 as well. Samba works fine, you can use \\192.168.1.1\sda1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123391">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						17 Dec 2010, 12:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><div class="quotebox"><cite>coatto87 wrote:</cite><blockquote><p>Well made, now it&#039;s ok.</p></blockquote></div><p>Meaning? You don&#039;t have any performance issues anymore, or your measurements were wrong?</p><div class="quotebox"><blockquote><p>You should change pure-ftpd with vsftpd and you&#039;ll see the difference <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p></blockquote></div><p>What difference would that be?</p><div class="quotebox"><blockquote><p>Another thing: samba doesn&#039;t work because you have to add OpenWrt in /etc/hosts:</p><div class="codebox"><pre><code>127.0.0.1 localhost OpenWrt</code></pre></div><p>Bye <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>You really shouldn&#039;t use OpenWrt as an alias to loopback. Other machines on the network will lookup OpenWrt as 127.0.0.1 as well. Samba works fine, you can use \\192.168.1.1\sda1.</p></blockquote></div><p>I don&#039;t have performance issue anymore.<br />Vsftp is faster than pure-ftp.<br />Are you sure samba is working on your network?<br />Try this command:</p><div class="codebox"><pre><code>root@OpenWrt /root# ps | grep smbd</code></pre></div><p>Is there smbd in your processes?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123392">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">sruon</div>
					<div class="post-datetime">
						17 Dec 2010, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm samba doesn&#039;t work, even with above poster fix</p><div class="codebox"><pre><code>root@OpenWrt /root# ps | grep smbd
 2198 root      1340 S    grep smbd</code></pre></div><div class="codebox"><pre><code>root@OpenWrt /root# /etc/init.d/samba restart
sh: can&#039;t kill pid 2190: No such process
sh: can&#039;t kill pid 2188: No such process</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123394">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						17 Dec 2010, 12:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sruon wrote:</cite><blockquote><p>I can confirm samba doesn&#039;t work, even with above poster fix</p><div class="codebox"><pre><code>root@OpenWrt /root# ps | grep smbd
 2198 root      1340 S    grep smbd</code></pre></div><div class="codebox"><pre><code>root@OpenWrt /root# /etc/init.d/samba restart
sh: can&#039;t kill pid 2190: No such process
sh: can&#039;t kill pid 2188: No such process</code></pre></div></blockquote></div><p>Strange, have you reboot openwrt after the edit?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123395">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">sruon</div>
					<div class="post-datetime">
						17 Dec 2010, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>Multiple times, I&#039;ll retry just because I&#039;m way too tired and might have fucked up.</p><p>Edit: Nope, nothing~ Might have to do with the fact I&#039;m using WORKGROUP ?</p><p>Dunno, anyway giving credits where credit is due, new alternative firmware user, it has been a living hell to setup anything and this firmware is the one giving me the least troubles so far.</p>											<p class="post-edited">(Last edited by <strong>sruon</strong> on 17 Dec 2010, 12:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123406">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Dec 2010, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>Hm, it works here. Anything in the logs? Is your /mnt/sda1 mounted?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123407">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">sruon</div>
					<div class="post-datetime">
						17 Dec 2010, 17:29					</div>
				</div>
				<div class="post-content content">
					<p>Nothing in the logs and yeah it&#039;s mounted.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123408">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">coatto87</div>
					<div class="post-datetime">
						17 Dec 2010, 18:42					</div>
				</div>
				<div class="post-content content">
					<p>Could you add cups in your build?<br />I have many troubles to get it working from usb and on flash there isn&#039;t avaiable space left to install it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p123415">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Dec 2010, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>Set syslog = 1 in smb.conf and check your logs after that. Did you upgrade from backfire? Maybe try a TFTP flash that erases everything.</p><p>@coatto87</p><p>The build is pretty packed already, there&#039;s no room for cups in there and I can think of more useful things to put in there first. If you won&#039;t be using the router as a NAS you are better off with the official builds as they leave more space for jffs2.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 149</div><nav><ul><li><a href="viewtopic.php%3Fid=27722&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=27722&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=27722&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=27722&amp;p=149.html">149</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>