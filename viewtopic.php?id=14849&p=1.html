<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need help on building kamikaze + asterisk</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Apr 2018 and 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=14849&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p64950">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						11 Mar 2008, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>I managed to build the latest Kamikaze with svn, but have problems with &quot;asterisk&quot;.</p><p>My configuration:<br />- Dell XPS&nbsp; M1330 (2.5G) with Windows Vista<br />- Ubuntu 7.10 under VMWare 6 ACE (this is my develpment plateform)</p><p>How I did ?</p><p>Under Ubuntu: svn co <a href="https://svn.openwrt.org/openwrt/kamikaze/trunk">https://svn.openwrt.org/openwrt/kamikaze/trunk</a> kamikaze-7.09<br />I made apt-get to install differents libaries needed.</p><p>In the kamikaze-7.09 folder, I made a &quot;make menuconfig&quot; then selected squashfs image with 2.6 kernel. I saved.</p><p>I launched the make &quot;make -j2 world V=99&quot;</p><p>After one hour, I got my image in the kamikaze/bin folder.</p><p>I installed this new image on my asus WL-500GP then asterisk 14.18 from Zandbelt built &quot;<a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/op … kaze/7.09/</a>&quot;</p><p>Installation stepo is ok.</p><p>BUT<br />----<br />If I simply started asterisk like that it is ok: &quot;asterisk -cvvvvvv&quot; asterisk seems running ok,<br />but when I statred: &quot;asterisk &amp;&quot; or &quot;asterisk&quot; I d only 3 asterisk daemons running<br />----<br />883 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;asterisk<br />884 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;asterisk<br />885 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;asterisk<br />----<br />and when I did &quot;asterisk -r&quot; I got this message :<br />----<br />root@OpenWrt:~# asterisk -r<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:~#<br />-----</p><p>I do not know what is wrong in my kamikaze compiling/building. I already try with asterisk 1.4.9 and got same thing. Idem when I built others kamikaze releases.</p><p>Could anyone suggest me a solution ? On howto build correctly kamikaze ?</p><p>When building kamikaze, I tried it with different users, with different permissions of kamikaze folder but always got the same result.</p><br /><p>Thanks.</p><p>palexy91.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64952">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sfa</div>
					<div class="post-datetime">
						11 Mar 2008, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>The latest trunk i tried that worked more or less 100% with my wl-500gp was r9770.<br />All the later versions has segfaulted or given me some strange errors or something.<br />Here&#039;s an image if ur interested. <a href="http://donagrejja.com/temp/WRT/flashing%20openwrt%20(wl-500gP)/openwrt-brcm47xx-squashfs.trx">http://donagrejja.com/temp/WRT/flashing … uashfs.trx</a><br />It&#039;s 2.6 kernel using Atheros Wifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64995">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>No idea ?</p><p>Could anyone kindly give me an image for test ? The image on the openwrt website is old and the &quot;segmentation fault&quot; is not resolved. This latter resolved with the &quot;Random segfaults -- Fixed in SVN 9285&quot; release. &quot;<a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Asus/WL500GP?highlight=%28asus%29">http://wiki.openwrt.org/OpenWrtDocs/Har … %28asus%29</a>&quot;.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65004">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						12 Mar 2008, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>root@OpenWrt:~# asterisk -r<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:~#</p></blockquote></div><p>I sure am very glad to see someone has encountered such a problem. AFAIC and I may be wrong, it has something to do with pthread. I am sure Zandbelt knows this issue but fails to respond to fix it. Anyway, I got mine fixed with some quick hack as shown on my response <a href="http://forum.openwrt.org/viewtopic.php?pid=63365#p63365">here</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65006">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>Thank Mazi,</p><p>It&#039;s very glad that people who know how to fix the problems do not share their idea. I wonder if there are others people in my situation ? Or how they do for building kamikaze ?</p><p>Palexy91.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65009">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 18:20					</div>
				</div>
				<div class="post-content content">
					<p>Mazi, I followed your hack and asterisk seems to run like what you show in your post. But I think adding &quot;-v&quot; option makes asterisk consumes more CPU time. Am I right ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65010">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 19:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>I sure am very glad to see someone has encountered such a problem. AFAIC and I may be wrong, it has something to do with pthread. I am sure Zandbelt knows this issue but fails to respond to fix it. .</p></blockquote></div><p>well since you apparently must have the right on support from me I would like to point out that you fail to response to the question no 1. &quot;does /var/run/asterisk.ctl exist?&quot; Question no. 2 would be: &quot;what does your /etc/default/asterisk look like?&quot;</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65011">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>Hans,</p><p>You are our master on Asterisk+Openwrt, have you any idea why this error occurs ? Personaly I used a lot your work and thank so much for your good job. I show you my /etc/default/asterisk file:</p><p>## startup options for /etc/init.d/asterisk</p><p>ENABLE_ASTERISK=&quot;yes&quot;<br />OPTIONS=&quot;-vC /etc/asterisk/asterisk.conf&quot;<br />------------------------------------------------------</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65023">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 20:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Hans,</p><p>You are our master on Asterisk+Openwrt, have you any idea why this error occurs ? Personaly I used a lot your work and thank so much for your good job. I show you my /etc/default/asterisk file:</p><p>## startup options for /etc/init.d/asterisk</p><p>ENABLE_ASTERISK=&quot;yes&quot;<br />OPTIONS=&quot;-vC /etc/asterisk/asterisk.conf&quot;<br />------------------------------------------------------</p><p>Thanks.</p></blockquote></div><p>thanks for the answer on question number two...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65026">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi Hans, </p><p>I deleted the &quot;-v&quot; option in the /etc/default/asterisk file then rebooted my openwrt, I got the following message with &quot;ps&quot;:</p><p>SW&lt; [usb-storage]<br />&nbsp; 772 root&nbsp; &nbsp; &nbsp; &nbsp;1928 S&nbsp; &nbsp;/usr/sbin/dropbear -p 22<br />&nbsp; 775 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 776 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 777 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 781 root&nbsp; &nbsp; &nbsp; &nbsp;2412 S&nbsp; &nbsp;/usr/sbin/httpd -p 80 -h /www -r OpenWrt</p><p>Then I checked the &quot;asterisk.ctl&quot; in /var/run and I did NOT found it. No asterisk.ctl in /var/run.</p><p>Here the answer of the first question.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65027">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 21:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Hi Hans, </p><p>I deleted the &quot;-v&quot; option in the /etc/default/asterisk file then rebooted my openwrt, I got the following message with &quot;ps&quot;:</p><p>SW&lt; [usb-storage]<br />&nbsp; 772 root&nbsp; &nbsp; &nbsp; &nbsp;1928 S&nbsp; &nbsp;/usr/sbin/dropbear -p 22<br />&nbsp; 775 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 776 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 777 root&nbsp; &nbsp; &nbsp; &nbsp;3932 S&nbsp; &nbsp;//usr/sbin/asterisk -C /etc/asterisk/asterisk.conf<br />&nbsp; 781 root&nbsp; &nbsp; &nbsp; &nbsp;2412 S&nbsp; &nbsp;/usr/sbin/httpd -p 80 -h /www -r OpenWrt</p><p>Then I checked the &quot;asterisk.ctl&quot; in /var/run and I did NOT found it. No asterisk.ctl in /var/run.</p><p>Here the answer of the first question.</p></blockquote></div><p>now we&#039;re in business ;-)<br />some more questions:<br />what are the contents of your /etc/asterisk/asterisk.conf?<br />does asterisk function at all (since apparently it runs)?<br />if yes, is the only problem that &#039;asterisk -r&#039; does not work?</p><p>For the record: the 3 processes you see are actually 3 threads but because of the threading implementation used on your OpenWRT platform they are listed as processes in the output of &#039;ps&#039;.</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 12 Mar 2008, 22:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65029">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						12 Mar 2008, 22:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>now we&#039;re in business ;-)</p></blockquote></div><p>Thank you.</p><div class="quotebox"><blockquote><p>one more question: what are the contents of your /etc/asterisk/asterisk.conf?</p></blockquote></div><p>Since my Fonera hasn&#039;t been modded to use an external storage (SD card), the asterisk-1.4.18 is installed in the original directories as seen below:<br /></p><div class="codebox"><pre><code>root@Fonerisk:/tmp# cat /etc/asterisk/asterisk.conf 
[directories]
astetcdir =&gt; /etc/asterisk
astmoddir =&gt; /usr/lib/asterisk/modules
astvarlibdir =&gt; /usr/lib/asterisk
astdatadir =&gt; /usr/lib/asterisk
astagidir =&gt; /usr/lib/asterisk/agi-bin
astspooldir =&gt; /var/spool/asterisk
astrundir =&gt; /var/run
astlogdir =&gt; /var/log/asterisk

;[options]
;verbose = 3
;debug = 3
;alwaysfork = yes ; same as -F at startup
;nofork = yes ; same as -f at startup
;quiet = yes ; same as -q at startup
;timestamp = yes ; same as -T at startup
;execincludes = yes ; support #exec in config files
;console = yes ; Run as console (same as -c at startup)
;highpriority = yes ; Run realtime priority (same as -p at startup)
;initcrypto = yes ; Initialize crypto keys (same as -i at startup)
;nocolor = yes ; Disable console colors
;dontwarn = yes ; Disable some warnings
;dumpcore = yes ; Dump core on crash (same as -g at startup)
;languageprefix = yes ; Use the new sound prefix path syntax
;internal_timing = yes
;systemname = my_system_name ; prefix uniqueid with a system name for global uniqueness issues
;maxcalls = 10 ; Maximum amount of calls allowed
;maxload = 0.9 ; Asterisk stops accepting new calls if the load average exceed this limit
;cache_record_files = yes ; Cache recorded sound files to another directory during recording
;record_cache_dir = /tmp ; Specify cache directory (used in cnjunction with cache_record_files)
;transmit_silence_during_record = yes ; Transmit SLINEAR silence while a channel is being recorded
;transcode_via_sln = yes ; Build transcode paths via SLINEAR, instead of directly
;runuser = asterisk ; The user to run as
;rungroup = asterisk ; The group to run as

; Changing the following lines may compromise your security.
;[files]
;astctlpermissions = 0660
;astctlowner = root
;astctlgroup = apache
;astctl = asterisk.ctl
root@Fonerisk:/tmp#</code></pre></div><p>BTW, how did you patch asterisk-1.4.18 so that it will compile on OpenWRT? My asterisk-1.4.18 on my Fonera running on OpenWRT SVN trunk is based on some your asterisk-1.4.11 patches and an additional patch I created to link to <em>openntpd-3.9p1/openbsd-compat/bsd-getifaddrs.c</em> file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65030">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>Here is my asterisk.conf file :</p><p>[directories]<br />astetcdir =&gt; /etc/asterisk<br />astmoddir =&gt; /usr/lib/asterisk/modules<br />astvarlibdir =&gt; /usr/lib/asterisk<br />astdatadir =&gt; /usr/lib/asterisk<br />astagidir =&gt; /usr/lib/asterisk/agi-bin<br />astspooldir =&gt; /var/spool/asterisk<br />astrundir =&gt; /var/run<br />astlogdir =&gt; /var/log/asterisk</p><p>;[options]<br />;verbose = 3<br />;debug = 3<br />;alwaysfork = yes ; same as -F at startup<br />;nofork = yes ; same as -f at startup<br />;quiet = yes ; same as -q at startup<br />;timestamp = yes ; same as -T at startup<br />;execincludes = yes ; support #exec in config files<br />;console = yes ; Run as console (same as -c at startup)<br />;highpriority = yes ; Run realtime priority (same as -p at startup)<br />;initcrypto = yes ; Initialize crypto keys (same as -i at startup)<br />;nocolor = yes ; Disable console colors<br />;dontwarn = yes ; Disable some warnings<br />;dumpcore = yes ; Dump core on crash (same as -g at startup)<br />;languageprefix = yes ; Use the new sound prefix path syntax<br />;internal_timing = yes<br />;systemname = my_system_name ; prefix uniqueid with a system name for global uniqueness issues<br />;maxcalls = 10 ; Maximum amount of calls allowed<br />;maxload = 0.9 ; Asterisk stops accepting new calls if the load average exceed this limit<br />;cache_record_files = yes ; Cache recorded sound files to another directory during recording<br />;record_cache_dir = /tmp ; Specify cache directory (used in cnjunction with cache_record_files)<br />;transmit_silence_during_record = yes ; Transmit SLINEAR silence while a channel is being recorded<br />;transcode_via_sln = yes ; Build transcode paths via SLINEAR, instead of directly<br />;runuser = asterisk ; The user to run as<br />;rungroup = asterisk ; The group to run as</p><p>; Changing the following lines may compromise your security.<br />;[files]<br />;astctlpermissions = 0660<br />;astctlowner = root<br />;astctlgroup = apache<br />;astctl = asterisk.ctl<br />~</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65032">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, forgot to answer 2d question:</p><p>&quot; does asterisk function at all (since apparently it runs)?<br />if yes, is the only problem that &#039;asterisk -r&#039; does not work?&quot;</p><p>No, asterisk did not run at all, I made a &quot;asterisk -r&quot; and I got :</p><p>root@OpenWrt:/etc/asterisk# asterisk -r<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:/etc/asterisk#</p><p>I tried to make a call or received a call from my mobile, nothing. Very strange.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65034">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>you mentioned that it does run from the commandline, with:</p><p>&nbsp; /usr/sbin/asterisk -cvvv -C /etc/asterisk/asterisk.conf</p><p>is that correct? and if you run the above command in one terminal, and in another terminal run:</p><p>&nbsp; /usr/sbin/asterisk -r&nbsp; -C /etc/asterisk/asterisk.conf</p><p>does /var/run/asterisk.ctl then exist? and does asterisk then work?</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65042">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>Hans I got this:</p><p>root@OpenWrt:/etc/asterisk# /usr/sbin/asterisk -r -C /etc/asterisk/asterisk.conf<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:/etc/asterisk#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65043">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 23:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Hans I got this:</p><p>root@OpenWrt:/etc/asterisk# /usr/sbin/asterisk -r -C /etc/asterisk/asterisk.conf<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)<br />root@OpenWrt:/etc/asterisk#</p></blockquote></div><p>and this is with the other terminal running:</p><p>&nbsp; /usr/sbin/asterisk -cvvv -C /etc/asterisk/asterisk.conf</p><p>right (Q1)? and does asterisk then work (Q2)?</p><p>Hans.</p>											<p class="post-edited">(Last edited by <strong>zandbelt</strong> on 12 Mar 2008, 23:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65044">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>With this command:</p><p>&nbsp; /usr/sbin/asterisk -cvvv -C /etc/asterisk/asterisk.conf</p><p>Yes, asterisk is running. I confirm.</p><p>*CLI&gt; [Jan&nbsp; 1 01:49:03] NOTICE[876]: ..............</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65045">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 23:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>With this command:</p><p>&nbsp; /usr/sbin/asterisk -cvvv -C /etc/asterisk/asterisk.conf</p><p>Yes, asterisk is running. I confirm.</p><p>*CLI&gt; [Jan&nbsp; 1 01:49:03] NOTICE[876]: ..............</p></blockquote></div><p>but, in another terminal, at the same time, this command is not working</p><p>&nbsp; /usr/sbin/asterisk -r&nbsp; -C /etc/asterisk/asterisk.conf</p><p>, right (Q1)? and /var/run/asterisk.ctl does not exist, right (Q2)?</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65046">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>Q1) In the same time and on another terminal, I typed &quot;&nbsp; /usr/sbin/asterisk -r&nbsp; -C /etc/asterisk/asterisk.conf&quot; I got:</p><p>root@OpenWrt:~#/usr/sbin/asterisk -r&nbsp; -C /etc/asterisk/asterisk.conf<br />Asterisk 1.4.18, Copyright (C) 1999 - 2008 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Connected to Asterisk 1.4.18 currently running on OpenWrt (pid = 870)<br />Verbosity is at least 3<br />[Jan&nbsp; 1 01:55:43] NOTICE[879]: chan_iax2.c:5316 register_verify: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx<br />OpenWrt*CLI&gt;</p><p>Q2) I verified in /var/run on another terminal</p><p> ---------------------------------------------------<br />root@OpenWrt:~# ll /var/run/<br />drwxr-xr-x&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 160 Jan&nbsp; 1 01:48 .<br />drwxrwxrwt&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 260 Jan&nbsp; 1 01:48 ..<br />srwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Jan&nbsp; 1 01:48 asterisk.ctl<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 Jan&nbsp; 1 01:48 asterisk.pid<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 Jan&nbsp; 1 00:00 dnsmasq.pid<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 Jan&nbsp; 1 00:00 dropbear.pid<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 Jan&nbsp; 1 00:00 eth0.1.pid<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4 Jan&nbsp; 1 00:00 motion.pid<br />root@OpenWrt:~#</p><p>Asterisk is running...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65047">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						12 Mar 2008, 23:45					</div>
				</div>
				<div class="post-content content">
					<p>so if you now run:</p><p>&nbsp; /usr/sbin/asterisk -C /etc/asterisk/asterisk.conf</p><p>in one terminal, and in the other:</p><p>&nbsp; /usr/sbin/asterisk -r&nbsp; -C /etc/asterisk/asterisk.conf</p><p>it does not run right (Q1)? And which version of asterisk 1.4.18 do you use: a self-compile one, or the one from my repository (Q2)?</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65048">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						12 Mar 2008, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>Frankly speaking, if you try to run asterisk without a <strong>-v</strong> switch, you will only see three asterisk processes are running and any attempt to run rasterisk and/or asterisk -r will end up with the error messages saying <em>Unable to connect to remote asterisk (does /var/run/asterisk.ctl exist?)</em></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65049">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>Hans,</p><p>Q1) Yes, asterisk does not run with the 2 commands.</p><p>Q2) I use your build asterisk 1.4.18 in your repository.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65052">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">palexy91</div>
					<div class="post-datetime">
						12 Mar 2008, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>Hans,</p><p>I read somewhere that this problems could generate by the manner that one build/compile the Openwrt. Note that I used Ubuntu under VMWare 6 ACE as my development platform for building the image. It&#039;s a week now I tried to find a solution ....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65054">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						13 Mar 2008, 00:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>palexy91 wrote:</cite><blockquote><p>Hans,</p><p>Q1) Yes, asterisk does not run with the 2 commands.</p><p>Q2) I use your build asterisk 1.4.18 in your repository.</p></blockquote></div><p>I just found out that I went over disk space quota for the website when uploading the atheros repository, and some files were truncated to 0 bytes because of that. I cleaned up some space and uploaded the atheros repository again.<br />Please reinstall at least libpthread (was truncated to 0 bytes), libpopt, libncurses and asterisk14 and try again.</p><p>BTW: I did get a clear warning from ipkg, telling me that the md5sum was incorrect; didn&#039;t you get that (Q1)?</p><p>I just did an install on a &quot;clean kamikaze 7.09&quot; and it works just fine for me, so I reckon this is where your problem comes from.</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=14849&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>