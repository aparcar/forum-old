<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> aprsd: can&#039;t load library &#039;libpthread.so.0&#039;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p120550">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">borexino</div>
					<div class="post-datetime">
						7 Nov 2010, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />i would to try APRSD (ham radio application) on my OpenWRT box.<br />When i start the application i give:</p><div class="codebox"><pre><code>aprsd: can&#039;t load library &#039;libpthread.so.0&#039;</code></pre></div><p>I use find for search the missing lib into the box using this:</p><div class="codebox"><pre><code>root@OpenWrt:~# find / -name libpthread*</code></pre></div><p>But I have no matchs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120551">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						7 Nov 2010, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>aprsd is not part of any official supported OpenWrt package....</p><p>From where are you installed this package?</p>											<p class="post-edited">(Last edited by <strong>written_direcon</strong> on 7 Nov 2010, 11:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120552">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">borexino</div>
					<div class="post-datetime">
						7 Nov 2010, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>I appositely compile the fw for my 504T with add the package APRSD downloadable from here:<br /><a href="http://downloads.wetnet.net/openwrt/ax25/">http://downloads.wetnet.net/openwrt/ax25/</a><br />chose your platform and enjoy!</p><p>Yesterday all ok but this morning i have this problem! :-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120553">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						7 Nov 2010, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>Try to build it by yourself from source...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120554">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">borexino</div>
					<div class="post-datetime">
						7 Nov 2010, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>Can you give me help please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120556">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">borexino</div>
					<div class="post-datetime">
						7 Nov 2010, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# ldd aprsd</p><div class="codebox"><pre><code>    libcrypt.so.0 =&gt; /lib/libcrypt.so.0 (0x2aaee000)
    libpthread.so.0 =&gt; not found
    libax25.so.0 =&gt; /usr/lib/libax25.so.0 (0x2ab43000)
    libstdc++.so.6 =&gt; not found
    libm.so.0 =&gt; /lib/libm.so.0 (0x2ab8b000)
    libgcc_s.so.1 =&gt; /lib/libgcc_s.so.1 (0x2abd9000)
    libc.so.0 =&gt; /lib/libc.so.0 (0x2ac28000)
    ld-uClibc.so.0 =&gt; /lib/ld-uClibc.so.0 (0x2aaa8000)</code></pre></div>											<p class="post-edited">(Last edited by <strong>borexino</strong> on 7 Nov 2010, 11:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120562">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						7 Nov 2010, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>I have already created a patch for the <em>libax25</em> package. Buildes fine here:</p><div class="codebox"><pre><code>Index: feeds/packages/libs/libax25/Makefile
===================================================================
--- feeds/packages/libs/libax25/Makefile    (revision 0)
+++ feeds/packages/libs/libax25/Makefile    (revision 0)
@@ -0,0 +1,63 @@
+#
+# Copyright (C) 2010 OpenWrt.org
+#
+# This is free software, licensed under the GNU General Public License v2.
+# See /LICENSE for more information.
+#
+
+include $(TOPDIR)/rules.mk
+
+PKG_NAME:=libax25
+PKG_VERSION:=0.0.11
+PKG_RELEASE:=1
+
+PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz
+PKG_SOURCE_URL:=@SF/ax25
+PKG_MD5SUM:=
+
+PKG_FIXUP:=libtool-ucxx
+PKG_INSTALL:=1
+PKG_BUILD_PARALLEL:=1
+
+include $(INCLUDE_DIR)/package.mk
+
+define Package/libax25
+  SECTION:=libs
+  CATEGORY:=Libraries
+  DEPENDS:=+uclibcxx
+  TITLE:=A library that allow you to use the ax25/rose/netrom features of the Linux kernel. 
+  URL:=http://www.linux-ax25.org/wiki/LinuxAX25 \
+    http://db0fhn.efi.fh-nuernberg.de/doku.php?id=projects:openwrt:devel:ax25
+endef
+
+TARGET_CFLAGS += $(FPIC)
+
+CONFIGURE_ARGS += \
+    --enable-shared \
+    --disable-static
+
+CONFIGURE_VARS += \
+    CXXFLAGS=&quot;$$$$CXXFLAGS -fno-builtin -fno-rtti -I$(STAGING_DIR)/usr/include/uClibc++ -I$(STAGING_DIR)/include/linux -nostdinc++&quot;  \
+    LIBS=&quot;-nodefaultlibs -luClibc++ -Wl,-Bstatic,-lstdc++,-Bdynamic -lm&quot; \
+        CPPFLAGS=&quot;$$$$CPPFLAGS -I$(STAGING_DIR)/usr/include/uClibc++ -I$(STAGING_DIR)/include/linux&quot; \
+
+define Build/Configure
+    (cd $(PKG_BUILD_DIR); aclocal &amp;&amp; autoconf &amp;&amp; automake)
+    $(call Build/Configure/Default)
+endef
+
+define Build/InstallDev
+    $(INSTALL_DIR) $(1)/usr/include/netax25
+    $(CP) $(PKG_INSTALL_DIR)/usr/include/netax25/*.h $(1)/usr/include/netax25/
+    $(INSTALL_DIR) $(1)/usr/lib
+    $(CP) $(PKG_INSTALL_DIR)/usr/lib/libax25.{a,so} $(1)/usr/lib/
+    $(CP) $(PKG_INSTALL_DIR)/usr/lib/libax25io*.so.* $(1)/usr/lib/
+endef
+
+define Package/libax25/install
+    $(INSTALL_DIR) $(1)/usr/lib/
+    $(CP) $(PKG_INSTALL_DIR)/usr/lib/libax25*.so.* $(1)/usr/lib/
+    $(CP) $(PKG_INSTALL_DIR)/usr/lib/libax25io*.so.* $(1)/usr/lib/
+endef
+
+$(eval $(call BuildPackage,libax25))</code></pre></div><p>Apply the patch and add it to your local subversion copy:<br /></p><div class="codebox"><pre><code>patch -p0 &lt; libax25.patch
svn add feeds/packages/libs/libax25</code></pre></div><p>Next, update the packages feed and install the package:<br /></p><div class="codebox"><pre><code>./scripts/feeds update -i packages
./scripts/feeds install -d m libax25</code></pre></div><p>Finally, build the package:<br /></p><div class="codebox"><pre><code>make package/libax25/{clean,compile}</code></pre></div><p>Your new package is in:<br /></p><div class="codebox"><pre><code>ll bin/ar71xx/packages/libax25_0.0.11-1_ar71xx.ipk 
-rw-r--r-- 1 openwrt openwrt 20408 2010-11-07 11:56 bin/ar71xx/packages/libax25_0.0.11-1_ar71xx.ipk</code></pre></div><p>The <em>libax25</em> package is a dependency needed by aprsd. Next is to build and package the <em>aprsd</em> package.</p>											<p class="post-edited">(Last edited by <strong>written_direcon</strong> on 7 Nov 2010, 13:13)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>