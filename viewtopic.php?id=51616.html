<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> strongswan in OpenWRT 12.09 depends on modprobe?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p240232">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">coralamp</div>
					<div class="post-datetime">
						14 Jul 2014, 17:29					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code># opkg install strongswan-full
# ipsec start
no files found matching &#039;/etc/strongswan.d/charon/*.conf&#039;, ignored
no files found matching &#039;/etc/strongswan.d/*.conf&#039;, ignored
Starting strongSwan 5.1.3 IPsec [starter]...
/bin/sh: modprobe: not found
/bin/sh: modprobe: not found
/bin/sh: modprobe: not found
/bin/sh: modprobe: not found
/bin/sh: modprobe: not found</code></pre></div><p>As far as I know, modprobe is not available in OpenWRT. How do I fix this problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240238">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						14 Jul 2014, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>insmod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240387">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">coralamp</div>
					<div class="post-datetime">
						16 Jul 2014, 11:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>qasdfdsaq wrote:</cite><blockquote><p>insmod</p></blockquote></div><p>Thanks qasdfdsaq! Could you please elaborate on how I can use insmod in place of modprobe? I tried symlink it but found no success. I&#039;m not sure if I need to modify anything from strongswan?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240606">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						18 Jul 2014, 00:34					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@n1:~# insmod
BusyBox v1.19.4 (2013-03-14 11:28:31 UTC) multi-call binary.

Usage: insmod FILE [SYMBOL=VALUE]...

Load the specified kernel modules into the kernel</code></pre></div><p>Course I have no idea what your script is trying to do with modprobe so I can&#039;t say how you should reconfigure it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240796">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">coralamp</div>
					<div class="post-datetime">
						19 Jul 2014, 19:28					</div>
				</div>
				<div class="post-content content">
					<p>Thanks again qasdfdsaq! I think that&#039;s precisely why I&#039;m stuck here. I have no idea why and how `ipsec start` would use `modprobe` on OpenWRT instead of `insmod`. I checked `/usr/sbin/ipsec` and found it&#039;s calling `/usr/lib/ipsec/starter`, which is a binary, and I have no idea how to reconfigure it to use `insmod` instead. Any suggestions on what I should do now? Thanks a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p241819">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						28 Jul 2014, 02:17					</div>
				</div>
				<div class="post-content content">
					<p>Honestly, I probably don&#039;t know more than you. But this seems to be a bug with Strongswan:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=51714">https://forum.openwrt.org/viewtopic.php?id=51714</a></p><p>Now we know where the problem is and what the solution is it&#039;s fairly easy to fix. You can&#039;t recompile it manually as per the above thread, you can create a quick bash script named &#039;modprobe&#039; to remap the commands.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>