<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PPPoE Security and Routing Questions</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p47730">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cjk32</div>
					<div class="post-datetime">
						4 May 2007, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m running OpenWRT White Russian 0.9 on a linksys WRT54G v2.&nbsp; This is set up to use PPPoE, and is connected to a DrayTek Vigor 100 ADSL modem which does PPPoE to PPPoA bridging.&nbsp; The ADSL connection is provided by Zen, and gives me an 8 address subnet.</p><p>The Vigor 100 provides a web control panel via its ethernet port on 192.168.1.1.&nbsp; At the moment I&#039;ve configured br0 to be 192.168.2.254, and created an &#039;mdm&#039; interface on vlan1 with ip 192.168.1.2, with IP masquerading to allow the LAN clients to access this control panel (straight routing doesn&#039;t work as the Vigor 100 has no way to know that 192.168.2.x is reachable via 192.168.1.2).&nbsp; Does anyone have any good suggestion what to call my &#039;mdm&#039; interface?</p><p>What I&#039;m wondering is if it&#039;s safe to add vlan1 to br0 (or rather, make the relevant port part of vlan0), and make the entire LAN into 192.168.1.x.&nbsp; My first thought is that is is not safe.&nbsp; Noone on the internet can send anything onto the LAN other than suitable encapsulated (PPPoE) packets.</p><p>However, presumably anyone with access to the ADSL line could put whatever traffic they wanted onto the LAN unless the Vigor provides any filtering of packets, specifically only allowing PPPoE packets in.&nbsp; I&#039;d rather not rely on it doing so.&nbsp; I take it a need to make sure that OpenWRT specifically doesn&#039;t route from 192.168.1.x to 192.168.2.x, much like a second WAN interface.</p><p>Is this the justification for having both wan_ifname and wan_ifdevice considered seperately?&nbsp; </p><p>Secondly, as mentioned above, I&#039;ve a range of 8 addresses, 5 of which are available for my own hosts.&nbsp; My first thought for making these available was to partition off a couple of ports on the switch, vlan2, and then create a br1 comprising ppp0 and vlan2.&nbsp; Unfortunately, I understand that this isn&#039;t possible, can anyone point me to a good document on what BCM is exactly?</p><p>Are there any alternatives that will keep all 5 IPs available for me?&nbsp; The only thought I&#039;ve had is to split my 8 addresses into 2 sets of 4, with ppp0 in one set and vlan2 in the other, then route between them, e.g.</p><p>a.b.c.0&nbsp; - network 1<br />a.b.c.1&nbsp; - my public host (default gateway of 11.0.0.2)<br />a.b.c.2&nbsp; - vlan2<br />a.b.c.3&nbsp; - network 1 broadcast<br />a.b.c.4&nbsp; - network 2<br />a.b.c.5&nbsp; - unused<br />a.b.c.6&nbsp; - ppp0<br />a.b.c.7&nbsp; - netowork 2 broadcast</p><p>Surely there has to be a better way to do this.&nbsp; Can anyone advise?</p><p>Many thanks,</p><p>Chris Key</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>