<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Which target for Edimax BR-6104K?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 Apr 2018 and 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=10863&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p51737">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">bifferos</div>
					<div class="post-datetime">
						3 Jul 2007, 18:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Berny wrote:</cite><blockquote><p>I also played too much with the configuration, here is what I missed:<br />- libgcc (openwrt configuration: Base system)<br />- udevtrigger (openwrt configuration: Utilities)<br />- special mount-utilities</p></blockquote></div><p>It would be nice to come up with a suggested &#039;example&#039; configuration for this device - the one most likely to work, and support as many devices as possible.&nbsp; If that were included in SVN it would be extremely useful!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52064">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">vjahns</div>
					<div class="post-datetime">
						10 Jul 2007, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>OK. Boot success on BR6104KP with Linux kernel 2.6.22-rc6</p><div class="quotebox"><blockquote><p>Linux Loader Menu<br />====================<br />(a) Download vmlinuz to flash ...<br />(b) Download vmlinuz to sdram (for debug) ...<br />(c) Exit</p><p>Please enter your key : c<br />no sys signature found!!</p><p>jump to linux code!!</p><br /><p>LZMA loader for BR-6104KP, Copyright (C) 2007 OpenWrt.org</p><p>Looking for TRX header... found at 0xBFC30000, kernel in partition 0<br />decompressing kernel... done!<br />launching kernel...</p><p>mem_detect: disable buffers for both banks<br />mem_detect: checking for 16MB chip in 1st bank<br />mem_detect: chip size in 1st bank is 16MB<br />mem_detect: check presence of 2nd bank<br />mem_detect: write 0x55555555 to 0xA1FFFFFC<br />mem_detect: delay 10000 ns<br />mem_detect: pattern at 0xA1FFFFFC is 0x02003021<br />mem_detect: enable buffers for both banks<br />mem_detect: 1x16MB memory found<br />Linux version 2.6.22-rc6 (jahns@pcm1035) (gcc version 4.1.2) #15 Tue Jul 10 09:7ADM5120P revision 8, running at 175MHz<br />Boot loader is: Unknown<br />Booted from&nbsp; &nbsp;: NOR flash<br />Board is&nbsp; &nbsp; &nbsp; : Unknown ADM5120 board<br />Memory size&nbsp; &nbsp;: 16MB<br />CPU revision is: 0001800b<br />ADM5120 board setup<br />Determined physical RAM map:<br /> memory: 00d05000 @ 002fb000 (usable)<br />Wasting 24416 bytes for tracking 763 unused pages<br />Initrd not found or empty - disabling initrd<br />Built 1 zonelists.&nbsp; Total pages: 4064<br />Kernel command line: console=ttyS0,115200 rootfs=squashfs init=/etc/preinit<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 8kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />PID hash table entries: 64 (order: 6, 256 bytes)<br />Using 87.500 MHz high precision timer.<br />Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Memory: 13184k/13332k available (2195k kernel code, 148k reserved, 600k data, 1)Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />adm5120: system has no PCI BIOS<br />Time: MIPS clocksource has been installed.<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 512 bind 512)<br />TCP reno registered<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />ttyS0 at I/O 0x12600000 (irq = 9) is a ADM5120<br />ttyS1 at I/O 0x12800000 (irq = 10) is a ADM5120<br />eth0: ADM5120 switch port0<br />eth1: ADM5120 switch port1<br />eth2: ADM5120 switch port2<br />eth3: ADM5120 switch port3<br />eth4: ADM5120 switch port4<br />$Id: ftl.c,v 1.59 2005/11/29 14:48:31 gleixner Exp $<br />NFTL driver: nftlcore.c $Revision: 1.98 $, nftlmount.c $Revision: 1.41 $<br />INFTL: inftlcore.c $Revision: 1.19 $, inftlmount.c $Revision: 1.18 $<br />SSFDC read-only Flash Translation layer<br />adm5120 : flash init : 0x1fc00000 0x00400000<br />adm5120 physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />adm5120 physically mapped flash: CFI does not contain boot bank location. Assum.number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Flash device: 0x200000 at 0x1fc00000<br />adm5120 : using CFE flash mapping<br />bootloader size: 196608<br />Updating TRX offsets and length:<br />old trx = [0x0000001c, 0x000df800, 0x00000000], len=0x0019a000 crc32=0x7209dcf7<br />new trx = [0x0000001c, 0x000df800, 0x00000000], len=0x000df800 crc32=0x3ab5e3de<br />Done<br />Creating 4 MTD partitions on &quot;adm5120 physically mapped flash&quot;:<br />0x00000000-0x00030000 : &quot;cfe&quot;<br />mtd: Giving out device 0 to cfe<br />rfd_ftl: no RFD magic found in &#039;cfe&#039;<br />ftl_cs: FTL header not found.<br />0x00030000-0x001f0000 : &quot;linux&quot;<br />mtd: Giving out device 1 to linux<br />rfd_ftl: no RFD magic found in &#039;linux&#039;<br />ftl_cs: FTL header not found.<br />0x0010f800-0x001f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-ymtd: Giving out device 2 to rootfs<br />rfd_ftl: no RFD magic found in &#039;rootfs&#039;<br />ftl_cs: FTL header corrupt!<br />0x001d0000-0x001f0000 : &quot;rootfs_data&quot;<br />mtd: Giving out device 3 to rootfs_data<br />rfd_ftl: no RFD magic found in &#039;rootfs_data&#039;<br />ftl_cs: FTL header not found.<br />0x001f0000-0x00200000 : &quot;nvram&quot;<br />mtd: Giving out device 4 to nvram<br />ftl_cs: FTL header not found.<br />block2mtd: version $Revision: 1.30 $<br />RB1xx nand<br />No NAND device found!!!<br />No NAND device found!!!<br />No NAND device found!!!<br />No NAND device found!!!<br />RB1xxx nand device not found<br />NAND device: Manufacturer ID: 0x98, Chip ID: 0x39 (Toshiba NAND 128MiB 1,8V 8-b)flash size: 128 MiB<br />page size: 512 bytes<br />OOB area size: 16 bytes<br />sector size: 16 KiB<br />pages number: 262144<br />pages per sector: 32<br />bus width: 8<br />bits in sector size: 14<br />bits in page size: 9<br />bits in OOB size: 4<br />flash size with OOB: 135168 KiB<br />page address bytes: 4<br />sector address bytes: 3<br />options: 0x62<br />Scanning device for bad blocks<br />Creating 1 MTD partitions on &quot;NAND 128MiB 1,8V 8-bit&quot;:<br />0x00000000-0x08000000 : &quot;NAND simulator partition 0&quot;<br />mtd: Giving out device 5 to NAND simulator partition 0<br />ftl_cs: FTL header not found.<br />GPIO LEDs driver registered<br />Registered led device: gpio0<br />Registered led device: gpio1<br />Registered led device: gpio2<br />Registered led device: gpio3<br />gpio-led gpio-led.4: gpio_request failed<br />gpio-led: probe of gpio-led.4 failed with error -22<br />gpio-led gpio-led.5: gpio_request failed<br />gpio-led: probe of gpio-led.5 failed with error -22<br />gpio-led gpio-led.6: gpio_request failed<br />gpio-led: probe of gpio-led.6 failed with error -22<br />gpio-led gpio-led.7: gpio_request failed<br />gpio-led: probe of gpio-led.7 failed with error -22<br />Registered led device: port0led0<br />Registered led device: port0led1<br />Registered led device: port0led2<br />Registered led device: port1led0<br />Registered led device: port1led1<br />Registered led device: port1led2<br />Registered led device: port2led0<br />Registered led device: port2led1<br />Registered led device: port2led2<br />Registered led device: port3led0<br />Registered led device: port3led1<br />Registered led device: port3led2<br />Registered led device: port4led0<br />Registered led device: port4led1<br />Registered led device: port4led2<br />nf_conntrack version 0.5.0 (104 buckets, 832 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />NET: Registered protocol family 15<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 136k freed<br />Warning: unable to open an initial console.<br />Algorithmics/MIPS FPU Emulator v1.5<br />- preinit -<br />switching to jffs2<br />jffs2 not ready yet; using ramdisk<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /tmp/root<br />- init -<br />init started:&nbsp; BusyBox v1.4.2 (2007-07-05 12:00:58 CEST) multi-call binary<br />command=&#039;/etc/init.d/rcS S boot&#039; action=&#039;1&#039; terminal=&#039;/dev/ttyS0&#039;<br />command=&#039;/etc/init.d/rcS K stop&#039; action=&#039;64&#039; terminal=&#039;/dev/ttyS0&#039;<br />command=&#039;/bin/ash --login&#039; action=&#039;4&#039; terminal=&#039;/dev/tts/0&#039;<br />command=&#039;/bin/ash --login&#039; action=&#039;4&#039; terminal=&#039;/dev/ttyS0&#039;<br />command=&#039;/bin/ash --login&#039; action=&#039;4&#039; terminal=&#039;/dev/tty1&#039;<br />Please press Enter to activate this console.</p><p>BusyBox v1.4.2 (2007-07-05 12:00:58 CEST) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r7861) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/# <br />ieee80211: 802.11 data/management/control stack, git-1.1.13<br />ieee80211: Copyright (C) 2004-2005 Intel Corporation &lt;jketreno@linux.intel.com&gt;<br />root@OpenWrt:/# uname -a<br />Linux OpenWrt 2.6.22-rc6 #15 Tue Jul 10 09:08:56 CEST 2007 mips unknown</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52150">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">bifferos</div>
					<div class="post-datetime">
						11 Jul 2007, 15:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>floe wrote:</cite><blockquote><p>I&#039;ve put my flash-related patches in this ticket: <a href="https://dev.openwrt.org/ticket/2012">https://dev.openwrt.org/ticket/2012</a><br />The second one is still a rather crude hack. If anybody has a better idea, go ahead..</p><p>Florian</p></blockquote></div><p>Well... maybe.&nbsp; I&#039;ve updated the ticket with some thoughts.&nbsp; The probe comes into inline_map_read()<br />and attempts to read memory which (I assume) causes a bus-error.&nbsp; This is understandable<br />because this memory doesn&#039;t exist on the BR-6104KP.&nbsp; We could add a check at the start of<br />inline_map_read() to see if the requested offset is more than 2MB (0x200000) and return <br />zero if so.&nbsp; That&#039;s a less intrusive &#039;hack&#039; and works fine on my Edimax, but I&#039;ve no idea<br />of the implications for other boards.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=10863&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>