<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Porting OpenWrt for STAR_STR9100, kernel boot but....</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p82128">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						18 Feb 2009, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have a emprex nsd100, this is a little NAS box. Link <a href="http://www.emprex.com/02_products_02.php?id=205">http://www.emprex.com/02_products_02.php?id=205</a> I would like port OpenWrt for that device. Find some patches for kernel 2.6.25 on net and apply it. The final results is that kernel boot, but don&#039;t run whole system from NFS filesystem. I try boot from /dev/sda1(USB stick) is the same problem.<br /></p><div class="codebox"><pre><code>Uncompressing Linux.......................................................................................................... done, booting the kernel.
Linux version 2.6.25.4artek (artek@the_box) (gcc version 4.3.2 (GCC) ) #1 Wed Feb 18 12:20:18 CET 2009
CPU: FA526id(wb) [66015261] revision 1 (ARMv4), cr=0000397f
Machine: STAR_STR9100
Warning: bad configuration page, trying to continue
Ignoring unrecognised tag 0x00000000
Memory policy: ECC disabled, Data cache writeback
CPU0: D VIVT write-back cache
CPU0: I cache: 16384 bytes, associativity 2, 16 byte lines, 512 sets
CPU0: D cache: 16384 bytes, associativity 2, 16 byte lines, 512 sets
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,38400 root=/dev/nfs rw nfsroot=192.168.88.245:/media/share/str9100/ ip=192.168.88.222
PID hash table entries: 128 (order: 7, 512 bytes)
STR9100 CPU Clock: 200 MHz
IRQ Timer1 at interrupt number 0x0 and clock 100000000(Hz)

Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 32MB = 32MB total
Memory: 28952KB available (3080K code, 246K data, 120K init)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
bus: &#039;platform&#039;: registered
net_namespace: 440 bytes
NET: Registered protocol family 16
bus: &#039;platform&#039;: add device ehci-str9100
bus: &#039;platform&#039;: add device ohci-str9100
bus: &#039;platform&#039;: add device i2c-str9100
bus: &#039;platform&#039;: add device led-str9100
bus: &#039;platform&#039;: add device watchdog-str9100
bus: &#039;platform&#039;: add device button-str9100
bus: &#039;scsi&#039;: registered
SCSI subsystem initialized
bus: &#039;usb&#039;: registered
bus: &#039;usb&#039;: add driver usbfs
usbcore: registered new interface driver usbfs
bus: &#039;usb&#039;: add driver hub
usbcore: registered new interface driver hub
bus: &#039;usb&#039;: add driver usb
usbcore: registered new device driver usb
bus: &#039;serio&#039;: registered
bus: &#039;i2c&#039;: registered
bus: &#039;i2c&#039;: add driver dummy
i2c_register_driver: res = 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NetWinder Floating Point Emulator V0.97 (extended precision)
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
SGI XFS with no debug enabled
io scheduler noop registered
io scheduler anticipatory registered
io scheduler deadline registered
io scheduler cfq registered (default)
Non-volatile memory driver v1.2
Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled
bus: &#039;platform&#039;: add device serial8250
bus: &#039;platform&#039;: add driver serial8250
bus: &#039;platform&#039;: add device serial8250.10
serial8250.10: ttyS0 at MMIO 0xf7800000 (irq = 10) is a 16550A
console [ttyS0] enabled
loop: module loaded
nbd: registered device at major 43
GSW : init
star9100_gsw1000_lan_init dev name = eth0
star9100_gsw1000_lan_probe dev name = eth0

 BIST complete 
eth0: Switch Type: GENERAL(Two Macs mode) 
Lanport

  IC_PLUS_PHY 
config lan port phy 5
configure icplus

Check MAC/PHY icplus 0 Link Status : port cfg reg = f7000008



val = 00463d75



Check MAC/PHY 0 Link Status : UP!

 Configure CPU port  

 Write some default ARL table entries ,default ARL entry for VLAN0 

 Write some default ARL table entries ,default ARL entry for VLAN1 
doneether setup
create proc entry
ok creating proc eth link entry 
eth0: STAR9100 LAN Port Initial Finished 
Driver &#039;sd&#039; needs updating - please use bus_type methods
bus: &#039;scsi&#039;: add driver sd
base c3000000 phys 10000000
str9100_flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
str9100_flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Creating 3 MTD partitions on &quot;str9100_flash&quot;:
0x00000000-0x00020000 : &quot;armboot&quot;
0x00020000-0x007e0000 : &quot;Kernel &amp; Ramdisk&quot;
0x007e0000-0x00800000 : &quot;configure&quot;
usbmon: debugfs is not available
ehci_hcd: block sizes: qh 128 qtd 96 itd 160 sitd 96
registering ehci-str9100
bus: &#039;platform&#039;: add driver ehci-str9100
Initializing STR9100 EHCI controller
ehci-str9100 ehci-str9100: STR9100 EHCI Host Controller
ehci-str9100 ehci-str9100: new USB bus registered, assigned bus number 1
ehci halt: regs fcc00020
ehci halt: regstat fcc00024 temp = 4096
ehci-str9100 ehci-str9100: irq 24, io mem 0xfcc00000
ehci-str9100 ehci-str9100: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
bus: &#039;usb&#039;: add device usb1
usb usb1: configuration #1 chosen from 1 choice
bus: &#039;usb&#039;: add device 1-0:1.0
hub 1-0:1.0: USB hub found
get hub descriptor devnum = 1
hub 1-0:1.0: 2 ports detected
EHCI platform driver Successfully registerd&lt;7&gt;ohci_hcd: 2006 August 04 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
bus: &#039;platform&#039;: add driver ohci-str9100
Initializing STR9100 OHCI controller
ohci-str9100 ohci-str9100: STR9100 OHCI
ohci-str9100 ohci-str9100: new USB bus registered, assigned bus number 2
ohci-str9100 ohci-str9100: irq 23, io mem 0xfc400000
bus: &#039;usb&#039;: add device usb2
usb usb2: configuration #1 chosen from 1 choice
bus: &#039;usb&#039;: add device 2-0:1.0
hub 2-0:1.0: USB hub found
get hub descriptor devnum = 1
hub 2-0:1.0: 2 ports detected
Initializing USB Mass Storage driver...
bus: &#039;usb&#039;: add driver usb-storage
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
bus: &#039;usb&#039;: add driver libusual
usbcore: registered new interface driver libusual
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ctnetlink v0.93: registering with nfnetlink.
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
Initializing XFRM netlink socket
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
opening LAN00:aa:bb:cc:dd:21enable
install_isr
IP-Config: Failed to open eth1
IP-Config: Guessing netmask 255.255.255.0
IP-Config: Complete:
     device=eth0, addr=192.168.88.222, mask=255.255.255.0, gw=255.255.255.255,
     host=192.168.88.222, domain=, nis-domain=(none),
     bootserver=255.255.255.255, rootserver=192.168.88.245, rootpath=
Looking up port of RPC 100003/2 on 192.168.88.245
Looking up port of RPC 100005/1 on 192.168.88.245
VFS: Mounted root (nfs filesystem).
Freeing init memory: 120K</code></pre></div><p>Kernel boot hang here, and a don&#039;t know what do now <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> Can anyone help me ? I can post patches and kernel confgi if it nessesary.</p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 18 Feb 2009, 14:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82134">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tl71</div>
					<div class="post-datetime">
						18 Feb 2009, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>you should at least add </p><div class="codebox"><pre><code> init=/etc/preinit</code></pre></div><p>to the kernel commandline.</p><p>And for booting via nfs, do not include the firewall in your system and remove configuration of eth0 from /etc/config/network, otherwise the communication with your nfs server will stop at a later point :-)</p><p>HTH,<br />Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82139">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						18 Feb 2009, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>I try boot from usb stick /dev/sda1 with init=/etc/preinit in kernel commandline. Hangs too <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><div class="codebox"><pre><code>Uncompressing Linux.......................................................................................................... done, booting the kernel.
Linux version 2.6.25.4artek (artek@the_box) (gcc version 4.3.2 (GCC) ) #2 Wed Feb 18 14:26:50 CET 2009
CPU: FA526id(wb) [66015261] revision 1 (ARMv4), cr=0000397f
Machine: STAR_STR9100
Warning: bad configuration page, trying to continue
Ignoring unrecognised tag 0x00000000
Memory policy: ECC disabled, Data cache writeback
CPU0: D VIVT write-back cache
CPU0: I cache: 16384 bytes, associativity 2, 16 byte lines, 512 sets
CPU0: D cache: 16384 bytes, associativity 2, 16 byte lines, 512 sets
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,38400 root=/dev/sda1 rootwait init=/etc/preinit
PID hash table entries: 128 (order: 7, 512 bytes)
STR9100 CPU Clock: 200 MHz
IRQ Timer1 at interrupt number 0x0 and clock 100000000(Hz)

Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 32MB = 32MB total
Memory: 28952KB available (3080K code, 246K data, 120K init)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
bus: &#039;platform&#039;: registered
net_namespace: 440 bytes
NET: Registered protocol family 16
bus: &#039;platform&#039;: add device ehci-str9100
bus: &#039;platform&#039;: add device ohci-str9100
bus: &#039;platform&#039;: add device i2c-str9100
bus: &#039;platform&#039;: add device led-str9100
bus: &#039;platform&#039;: add device watchdog-str9100
bus: &#039;platform&#039;: add device button-str9100
bus: &#039;scsi&#039;: registered
SCSI subsystem initialized
bus: &#039;usb&#039;: registered
bus: &#039;usb&#039;: add driver usbfs
usbcore: registered new interface driver usbfs
bus: &#039;usb&#039;: add driver hub
usbcore: registered new interface driver hub
bus: &#039;usb&#039;: add driver usb
usbcore: registered new device driver usb
bus: &#039;serio&#039;: registered
bus: &#039;i2c&#039;: registered
bus: &#039;i2c&#039;: add driver dummy
i2c_register_driver: res = 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NetWinder Floating Point Emulator V0.97 (extended precision)
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
SGI XFS with no debug enabled
io scheduler noop registered
io scheduler anticipatory registered
io scheduler deadline registered
io scheduler cfq registered (default)
Non-volatile memory driver v1.2
Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled
bus: &#039;platform&#039;: add device serial8250
bus: &#039;platform&#039;: add driver serial8250
bus: &#039;platform&#039;: add device serial8250.10
serial8250.10: ttyS0 at MMIO 0xf7800000 (irq = 10) is a 16550A
console [ttyS0] enabled
loop: module loaded
nbd: registered device at major 43
GSW : init
star9100_gsw1000_lan_init dev name = eth0
star9100_gsw1000_lan_probe dev name = eth0

 BIST complete 
eth0: Switch Type: GENERAL(Two Macs mode) 
Lanport

  IC_PLUS_PHY 
config lan port phy 5
configure icplus

Check MAC/PHY icplus 0 Link Status : port cfg reg = f7000008



val = 00463d75



Check MAC/PHY 0 Link Status : UP!

 Configure CPU port  

 Write some default ARL table entries ,default ARL entry for VLAN0 

 Write some default ARL table entries ,default ARL entry for VLAN1 
doneether setup
create proc entry
ok creating proc eth link entry 
eth0: STAR9100 LAN Port Initial Finished 
Driver &#039;sd&#039; needs updating - please use bus_type methods
bus: &#039;scsi&#039;: add driver sd
base c3000000 phys 10000000
str9100_flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
str9100_flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Creating 3 MTD partitions on &quot;str9100_flash&quot;:
0x00000000-0x00020000 : &quot;armboot&quot;
0x00020000-0x007e0000 : &quot;Kernel &amp; Ramdisk&quot;
0x007e0000-0x00800000 : &quot;configure&quot;
usbmon: debugfs is not available
ehci_hcd: block sizes: qh 128 qtd 96 itd 160 sitd 96
registering ehci-str9100
bus: &#039;platform&#039;: add driver ehci-str9100
Initializing STR9100 EHCI controller
ehci-str9100 ehci-str9100: STR9100 EHCI Host Controller
ehci-str9100 ehci-str9100: new USB bus registered, assigned bus number 1
ehci halt: regs fcc00020
ehci halt: regstat fcc00024 temp = 4096
ehci-str9100 ehci-str9100: irq 24, io mem 0xfcc00000
ehci-str9100 ehci-str9100: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
bus: &#039;usb&#039;: add device usb1
usb usb1: configuration #1 chosen from 1 choice
bus: &#039;usb&#039;: add device 1-0:1.0
hub 1-0:1.0: USB hub found
get hub descriptor devnum = 1
hub 1-0:1.0: 2 ports detected
EHCI platform driver Successfully registerd&lt;7&gt;ohci_hcd: 2006 August 04 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
bus: &#039;platform&#039;: add driver ohci-str9100
Initializing STR9100 OHCI controller
ohci-str9100 ohci-str9100: STR9100 OHCI
ohci-str9100 ohci-str9100: new USB bus registered, assigned bus number 2
ohci-str9100 ohci-str9100: irq 23, io mem 0xfc400000
bus: &#039;usb&#039;: add device usb2
usb usb2: configuration #1 chosen from 1 choice
bus: &#039;usb&#039;: add device 2-0:1.0
hub 2-0:1.0: USB hub found
get hub descriptor devnum = 1
hub 2-0:1.0: 2 ports detected
Initializing USB Mass Storage driver...
bus: &#039;usb&#039;: add driver usb-storage
usb 1-1: new high speed USB device using ehci-str9100 and address 2
bus: &#039;usb&#039;: add device 1-1
usb 1-1: configuration #1 chosen from 1 choice
bus: &#039;usb&#039;: add device 1-1:1.0
scsi0 : SCSI emulation for USB Mass Storage devices
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
bus: &#039;usb&#039;: add driver libusual
usbcore: registered new interface driver libusual
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ctnetlink v0.93: registering with nfnetlink.
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
Initializing XFRM netlink socket
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
Waiting for root device /dev/sda1...
scsi 0:0:0:0: Direct-Access     Generic  USB  SD Reader   0.00 PQ: 0 ANSI: 2
bus: &#039;scsi&#039;: add device 0:0:0:0
sd 0:0:0:0: [sda] 3842048 512-byte hardware sectors (1967 MB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Assuming drive cache: write through
sd 0:0:0:0: [sda] 3842048 512-byte hardware sectors (1967 MB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Assuming drive cache: write through
 sda: sda1
sd 0:0:0:0: [sda] Attached SCSI removable disk
EXT3-fs: INFO: recovery required on readonly filesystem.
EXT3-fs: write access will be enabled during recovery.
kjournald starting.  Commit interval 5 seconds
EXT3-fs: recovery complete.
EXT3-fs: mounted filesystem with ordered data mode.
VFS: Mounted root (ext3 filesystem) readonly.
Freeing init memory: 120K</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82146">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						18 Feb 2009, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi, arteqw.</p><p>Do you use openwrt buildroot? How about ramdisk image?</p><p>regards,<br />zukky</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82149">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						18 Feb 2009, 17:31					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I use latest trunk code. With it I compile whole system. I don&#039;t try ramdisk, could You explain how use it, what change in kernel config.</p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 18 Feb 2009, 17:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82151">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tl71</div>
					<div class="post-datetime">
						18 Feb 2009, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi, arteqw.</p><p>maybe your system is running already, but you just don&#039;t see the output of usermode.<br />Try to ping your target, and telnet if it answers.<br />In this case you should check the file /etc/inittab.</p><p>Do you have the hotplug2 package included in your file system?<br />Otherwise try to modify /etc/preinit to create manually some more device nodes <br />(e.g. /dev/ttyS0, please lookup the major/minor numbers yourself :-)</p><p>If your are booting via NFS, it should be easy to modify the files and playing around.</p><p>Best regards,<br />Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82152">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						18 Feb 2009, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>make menuconfig -&gt; Target Images -&gt; select &#039;ramdisk&#039;<br />Then, build.</p><p>You can find ramdisk image in trunk/bin directory.</p><p>Good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82267">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						20 Feb 2009, 18:29					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I still playing with Emprex and i have strange observastion. When I use oryginal rootfs, and my custom kernel, then system boot without problem. In my opinion there is a problem with OpenWrt toolchain(or which part of it). To by sure I compile a sample helloworld code with toolchain from <a href="ftp://ftp.linksys.com/opensourcecode/wap4400n/1.2.11/WAP4400N_v1.2.11.tgz">ftp://ftp.linksys.com/opensourcecode/wa … 1.2.11.tgz</a>. Next in kernel commandline add init=/bin/helloworld and result </p><div class="codebox"><pre><code>Initializing USB Mass Storage driver...
bus: &#039;usb&#039;: add driver usb-storage
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
bus: &#039;usb&#039;: add driver libusual
usbcore: registered new interface driver libusual
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ctnetlink v0.93: registering with nfnetlink.
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
Initializing XFRM netlink socket
NET: Registered protocol family 1
NET: Registered protocol family 17
NET: Registered protocol family 15
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
opening LAN00:aa:bb:ccsmileyd:21enable
install_isr
IP-Config: Failed to open eth1
IP-Config: Guessing netmask 255.255.255.0
IP-Config: Complete:
device=eth0, addr=192.168.88.222, mask=255.255.255.0, gw=255.255.255.255,
host=192.168.88.222, domain=, nis-domain=(none),
bootserver=255.255.255.255, rootserver=192.168.88.245, rootpath=
Looking up port of RPC 100003/2 on 192.168.88.245
Looking up port of RPC 100005/1 on 192.168.88.245
VFS: Mounted root (nfs filesystem).
Freeing init memory: 120K
Hello world!</code></pre></div><p>i don&#039;t know what to do now :-)</p><p>PS. Sory for bad English <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82304">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						21 Feb 2009, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Can you make us download your compressed target/linux/strxxxx files?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82305">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						21 Feb 2009, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>sure, everything is on my personal git repository. This is a /trunk/target/linux/star91/ files. Link to repo tree -&gt; <a href="http://tinyurl.com/aqqbg3">http://tinyurl.com/aqqbg3</a> or <a href="http://artekw.cerbero.pl/tmp/star9100.tar.gz">http://artekw.cerbero.pl/tmp/star9100.tar.gz</a></p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 21 Feb 2009, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82352">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						22 Feb 2009, 06:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Thanks. I tried star9100.tar.gz on latest trunk.</p><p>owrt@debian:~/openwrt/trunk$ ls target/linux/star91/<br />Makefile&nbsp; &nbsp; compatibly_list.txt&nbsp; image&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;star9100.tar<br />base-files&nbsp; config-2.6.25&nbsp; &nbsp; &nbsp; &nbsp; patches-2.6.25<br />owrt@debian:~/openwrt/trunk$</p><div class="codebox"><pre><code>Applying patch generic/905-i386_build.patch
patching file arch/x86/boot/tools/build.c

Applying patch generic/906-msdosfs_header.patch
patching file include/linux/msdos_fs.h
Hunk #1 FAILED at 57.
1 out of 1 hunk FAILED -- rejects in file include/linux/msdos_fs.h
Patch generic/906-msdosfs_header.patch does not apply (enforce with -f)
make[4]: *** [/home/owrt/openwrt/trunk/build_dir/linux-star91/linux-2.6.25.4/.quilt_checked] Error 1
make[4]: Leaving directory `/home/owrt/openwrt/trunk/target/linux/star91&#039;
make[3]: *** [compile] Error 2
make[3]: Leaving directory `/home/owrt/openwrt/trunk/target/linux&#039;
make[2]: *** [target/linux/compile] Error 2
make[2]: Leaving directory `/home/owrt/openwrt/trunk&#039;
make[1]: *** [/home/owrt/openwrt/trunk/staging_dir/target-arm_uClibc-0.9.29/stamp/.target_compile] Error 2
make[1]: Leaving directory `/home/owrt/openwrt/trunk&#039;
make: *** [world] ã‚¨ãƒ©ãƒ¼ 2
owrt@debian:~/openwrt/trunk$</code></pre></div><p>...patch fails.</p><p>Which buildroot version do you use?</p><p>regards,<br />zukky</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82357">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						22 Feb 2009, 07:11					</div>
				</div>
				<div class="post-content content">
					<p>OK.<br />After changing kernel version, error disappeared.<br /></p><div class="codebox"><pre><code>owrt@debian:~/openwrt/trunk$ cat target/linux/star91/Makefile
#
# Copyright (C) 2009 OpenWrt.org
#
# This is free software, licensed under the GNU General Public License v2.
# See /LICENSE for more information.
#
include $(TOPDIR)/rules.mk

ARCH:=arm
BOARD:=star91
BOARDNAME:=Star9100
#FEATURES:=usb
FEATURES:=jffs2

LINUX_VERSION:=2.6.25.20
#LINUX_VERSION:=2.6.25.4
#LINUX_VERSION:=2.4.35.4

include $(INCLUDE_DIR)/target.mk

define Target/Description
  My Port
endef

$(eval $(call BuildTarget))
owrt@debian:~/openwrt/trunk$</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82360">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						22 Feb 2009, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>Yes, i know about that error, to eliminate this I delete that patch from generic and all is fine :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82373">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						22 Feb 2009, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>What bootloader does your device have?</p><p>Mine, corega cg-wlbargn<br /><a href="http://www.corega.co.jp/prod/wlbargn/">http://www.corega.co.jp/prod/wlbargn/</a><br />star str9102<br />29lv320cbtc-70g<br />em6a9160ts-5g x2<br />(switch can&#039;t be seen under heat sink)<br />ar5416(minipci)</p><p>has armboot. It seems almost same as u-boot. Like this.<br /></p><div class="codebox"><pre><code>ARMboot 1.1.0 (Feb 10 2007 - 14:26:40)

Star maintain version 0.14.100000000
ARMboot code: 00000000 -&gt; 000698e8
ARMboot code(Bin file):00000000 -&gt;0001f0f8

STR9100 CPU Clock: 250 MHz

DDR Bank #0: 00000000 32 MB
DDR Controller Data Bus Width: 32 bits
This flash ID = 0x22A8

Flash Bank #1: 4 MB

*** Using default environment
&lt;str9100gsw.c #393&gt; readPhyID(): Phy reg id = 0x273850E9
Begin vitesse7385 switch basic config ...  &lt;str9100gsw.c #521&gt; h2_post_reset(): set_fatal_error(H2_GENERAL_FAILURE)
&lt;str9100gsw.c #521&gt; h2_post_reset(): set_fatal_error(H2_GENERAL_FAILURE)
done

Hit any key to stop autoboot:  0
STR9100&gt;help
go      - start application at address &#039;addr&#039;
run     - run commands in an environment variable
bootm   - boot application image from memory
bootp   - boot image via network using BootP/TFTP protocol
tftpboot- boot image via network using TFTP protocol
               and env variables ipaddr and serverip
rarpboot- boot image via network using RARP/TFTP protocol
bootd file over serial line
run &#039;bootcmd&#039;
loads   - load S-Record file over serial line
loadb   - load binary file over serial line (kermit mode)
autoscr - run script from memory
md      - memory display
mm      - memory modify (auto-incrementing)
nm      - memory modify (constant address)
mw      - memory write (fill)
cp      - memory copy
cmp     - memory compare
crc32   - checksum calculation
base    - print or set address offset
printenv- print environment variables
setspi- print environment variables
getspi- print environment variables
phywrite- print environment variables
phyread- print environment variables
dumpphy- print environment variables
setenv  - set environment variables
saveenv - save environment variables to persistent storage
protect - enable or disable FLASH write protection
erase   - erase FLASH memory
flinfo  - print FLASH memory information
bdinfo  - print Board Info structure
iminfo  - print header information for application image
loop    - infinite loop on address range
mtest   - simple RAM test
reset   - Perform RESET of the CPU
echo    - echo args to console
sleep   - delay execution for some time
download   - Perform bootload
assign   - Perform give the device a mac
version - print monitor version
help    - print online help
?       - alias for &#039;help&#039;
STR9100&gt;&lt;str9100gsw.c #1044&gt; handle_phy(): Port 4 LINK_UP
printenv
bootcmd=go 10040000
bootdelay=1
baudrate=38400
netmask=255.255.255.0
serverip=192.168.171.198
ipaddr=192.168.171.199
ethaddr=00:0a:79:ac:ab:c6

Environment size: 143/32764 bytes
STR9100&gt;bdinfo
enetaddr      = 00:0A:79:AC:AB:C6
ip_addr       = 192.168.171.199
baudrate      = 38400 bps
arch_number   = 242
env_t         = 000898F0
boot_params   = 00000100
DRAM:00.start = 00000000
DRAM:00.size  = 02000000
STR9100&gt;flinfo

Bank # 1: MXIC: 1x MX29LV320B(64Mbit)
  Size: 4 MB in 71 Sectors
  Sector Start Addresses:
    10000000      10002000      10004000      10006000      10008000
    1000A000      1000C000      1000E000      10010000      10020000
    10030000      10040000      10050000      10060000      10070000
    10080000      10090000      100A0000      100B0000      100C0000
    100D0000      100E0000      100F0000      10100000      10110000
    10120000      10130000      10140000      10150000      10160000
    10170000      10180000      10190000      101A0000      101B0000
    101C0000      101D0000      101E0000      101F0000      10200000
    10210000      10220000      10230000      10240000      10250000
    10260000      10270000      10280000      10290000      102A0000
    102B0000      102C0000      102D0000      102E0000      102F0000
    10300000      10310000      10320000      10330000      10340000
    10350000      10360000      10370000      10380000      10390000
    103A0000      103B0000      103C0000      103D0000      103E0000
    103F0000
STR9100&gt;tftpboot 0x10040000 openwrt-star91-zImage
begin in eth_init()
begin in eth_init_poll()
Check MAC/PHY 0 Link Status : UP!
ARP broadcast 1
eth addr: 00:0d:5e:42:cb:70
TFTP from server 192.168.171.198
; our IP address is 192.168.171.199

Filename &#039;openwrt-star91-zImage&#039;.
Load address: 0x10040000
Loading: ################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
done
Bytes transferred = 2618468 (27f464 hex)
STR9100&gt;bootm
## Booting image at 10040000 ...
Bad Magic Number
STR9100&gt;</code></pre></div><p>It looks like this error is alike when u-boot loads non uImage.</p><p>Do you know how to make image for armboot?<br />Does anyone?</p><p>regards,<br />zukky</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82374">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						22 Feb 2009, 14:16					</div>
				</div>
				<div class="post-content content">
					<p>Yes it is ARMboot</p><p>After <br /></p><div class="codebox"><pre><code>tftpboot 0x1020000 &lt;image&gt;</code></pre></div><p>put<br /></p><div class="codebox"><pre><code>go 0x1020000</code></pre></div><p>Bootloader run kernel :-)</p><p>EDIT:</p><p>Ok, i know how to generate uImage kernel</p><p>in file image/Makefile change define Image/BuildKernel to<br /></p><div class="codebox"><pre><code>define Image/BuildKernel
    cp $(LINUX_DIR)/arch/arm/boot/zImage $(KDIR)/zImage
    $(STAGING_DIR_HOST)/bin/mkimage -A arm -O linux -T kernel \
    -C none -a 0x1020000 -e 0x01020000 -n &#039;Linux-$(LINUX_VERSION)&#039; \
    -d $(KDIR)/zImage $(KDIR)/uImage
    cp $(KDIR)/uImage $(BIN_DIR)/openwrt-$(BOARD)-uImage
endef</code></pre></div><p>then you can boot using bootm command in armboot</p><p>But, init hang too <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br /><a href="http://pastebin.com/m77082b0f">http://pastebin.com/m77082b0f</a></p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 22 Feb 2009, 15:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82395">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						22 Feb 2009, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>ok, is a success :-) My Emprex boot OpenWrt :-)<br /><a href="http://wstaw.org/p/4d35/">http://wstaw.org/p/4d35/</a></p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 22 Feb 2009, 20:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82426">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						23 Feb 2009, 04:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi, congulatulation!</p><p>What did you chanage? :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82471">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						23 Feb 2009, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>Here is a new code, work for me :-) <a href="http://artekw.cerbero.pl/star9100.tar.gz">http://artekw.cerbero.pl/star9100.tar.gz</a></p><p>But there is a problem with lan driver, it is a lot a drop packet and in dmesg a have<br /></p><div class="codebox"><pre><code>------------[ cut here ]---------
WARNING: at kernel/softirq.c:141 ()
Modules linked in: ppp_async ppp_generic slhc crc_ccitt
Function entered at [&lt;c002ac6c&gt;] from [&lt;c0042bc0&gt;]
Function entered at [&lt;c0042b7c&gt;] from [&lt;c0048904&gt;]
 r5:c034a4a8 r4:c1d8e000
Function entered at [&lt;c0048884&gt;] from [&lt;c024605c&gt;]
 r5:c1df64f8 r4:c1dbc150
Function entered at [&lt;c0245fa0&gt;] from [&lt;c02421fc&gt;]
 r4:c1d9bc60
Function entered at [&lt;c02421d8&gt;] from [&lt;c0227cd0&gt;]
Function entered at [&lt;c0227bdc&gt;] from [&lt;c0227250&gt;]
 r5:60000013 r4:c1df64f8
Function entered at [&lt;c022723c&gt;] from [&lt;c0227320&gt;]
 r4:ffc01190
Function entered at [&lt;c02272fc&gt;] from [&lt;c01d8750&gt;]
Function entered at [&lt;c01d8430&gt;] from [&lt;c022dc10&gt;]
Function entered at [&lt;c022d9f0&gt;] from [&lt;c023d070&gt;]
 r8:c1d8e000 r7:c1cdc34c r6:c1cdc34c r5:c1cdc34c r4:c1c610a0
Function entered at [&lt;c023d018&gt;] from [&lt;c0230b38&gt;]
Function entered at [&lt;c02308e4&gt;] from [&lt;c025a610&gt;]
 r6:c1cf0868 r5:0000000e r4:00000000
Function entered at [&lt;c025a4e8&gt;] from [&lt;c025aaf4&gt;]
 r8:00000000 r7:00000000 r6:c1d97050 r5:c1cdc34c r4:80000000
Function entered at [&lt;c025aa6c&gt;] from [&lt;c025a0d0&gt;]
 r5:c1cdc34c r4:c1cdc34c
Function entered at [&lt;c025a0a0&gt;] from [&lt;c025ad48&gt;]
 r4:c1d8c9e8
Function entered at [&lt;c025abec&gt;] from [&lt;c026cee0&gt;]
Function entered at [&lt;c026cad4&gt;] from [&lt;c026d458&gt;]
Function entered at [&lt;c026d3c4&gt;] from [&lt;c026a4ec&gt;]
 r5:00000000 r4:c1d97050
Function entered at [&lt;c026a448&gt;] from [&lt;c026bc3c&gt;]
 r5:00000000 r4:c1d97050
Function entered at [&lt;c026b8bc&gt;] from [&lt;c0271ed0&gt;]
Function entered at [&lt;c0271e1c&gt;] from [&lt;c02608ec&gt;]
 r7:c1d97050 r6:00000000 r5:c1d97050 r4:c1d97300
Function entered at [&lt;c026084c&gt;] from [&lt;c0263174&gt;]
 r6:c03355d4 r5:00000000 r4:c1d970b4
Function entered at [&lt;c0262d78&gt;] from [&lt;c0222930&gt;]
Function entered at [&lt;c02228e8&gt;] from [&lt;c0220310&gt;]
 r6:00000000 r5:c1d8feb8 r4:00000000
Function entered at [&lt;c02201fc&gt;] from [&lt;c00907f4&gt;]
Function entered at [&lt;c0090728&gt;] from [&lt;c009106c&gt;]
 r7:00000003 r6:c1d8ff80 r5:be86bc00 r4:c1de9af8
Function entered at [&lt;c0090f90&gt;] from [&lt;c0091494&gt;]
 r6:00000000 r5:00000000 r4:c1de9af8
Function entered at [&lt;c0091448&gt;] from [&lt;c00269e0&gt;]
 r6:000001a0 r5:000001a0 r4:00075130
---[ end trace 8f94abdf58fc907e ]---</code></pre></div><p>It seems problem with IRQ, i don&#039;t know how to fix this <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> This driver was ported by some guy from <a href="http://tinyhack.com/category/agestar/">http://tinyhack.com/category/agestar/</a> I found a new kernel(maybe with better driver) for 2.6.16, but i don&#039;t know how to patch a 2.6.25.20 with changes from 2.6.16. Need help. Patch with STAR9100 support for 2.6.16 is&nbsp; here -&gt; <a href="http://artekw.cerbero.pl/2.6.26-star.tar.gz">http://artekw.cerbero.pl/2.6.26-star.tar.gz</a> I think this driver seems better than that from 2.4 kernel.</p><p>Sory for english. I forget a working firmware is here -&gt; <a href="http://artekw.cerbero.pl/star9100">http://artekw.cerbero.pl/star9100</a></p>											<p class="post-edited">(Last edited by <strong>arteqw</strong> on 23 Feb 2009, 16:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82763">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Z3r0</div>
					<div class="post-datetime">
						27 Feb 2009, 07:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I think that I can help a tiny bit.</p><p>I have managed to compile 2.6.25.4 successfully using the files from here: <a href="http://tinyhack.com/patch-2.6.25.4-for-agestar-20080618.bz2">http://tinyhack.com/patch-2.6.25.4-for- … 080618.bz2</a> and using arteqws files.</p><p>I can&#039;t actually upload or test due to armboot not having a TFTP server and I have no serial cable <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Procedure:</p><p>1.) Delete target/linux/generic/linux-2.6.25/906-msdosfs_header.patch </p><p>You can alternatively fix it up so that it works for 2.6.25.4 (but breaks for other versions of 2.6.25).</p><p>Changing the relevant part to this might work as this code doesn&#039;t exist in 2.6.25.4 (untested):<br /> +#ifdef __KERNEL__<br />+/* media of boot sector */<br />+static inline int fat_valid_media(u8 media)<br />+{<br />+&nbsp; &nbsp; return 0xf8 &lt;= media || media == 0xf0;<br />+}<br />+#endif</p><p>2.) Make a target/linux/star9100 directory</p><p>3.) Place arteqws files <a href="http://artekw.cerbero.pl/star9100.tar.gz">http://artekw.cerbero.pl/star9100.tar.gz</a> in the correct folders</p><p>4.) Delete the (4) files in target/linux/star9100/patches-2.6.25</p><p>5.) get the kernel patch for 2.6.25.4 from kernel.org <a href="ftp://ftp.kernel.org/pub/linux/kernel/v2.6/patch-2.6.25.4.bz2">ftp://ftp.kernel.org/pub/linux/kernel/v … 6.25.4.bz2</a> , bunzip it and place in the target/linux/star9100/patches-2.6.25 folder. Call it 100-patches-2.6.25.4 so that it is executed first.</p><p>6.) Download Yohanes patch <a href="http://tinyhack.com/patch-2.6.25.4-for-agestar-20080618.bz2">http://tinyhack.com/patch-2.6.25.4-for- … 080618.bz2</a>&nbsp; extract and place in the target/linux/star9100/patches-2.6.25 folder. Call it 200-patch-2.6.25.4-for-agestar-20080618 you will also need to open it with gedit and replace every occurance of &quot;2.6.25.4&quot; with &quot;2.6.25&quot;, I think that is all. You will need to search for &quot;mach-types&quot; and delete the diff (similar to the one below).</p><p>7.) Create a 300-mach-patch with (modded from star/arteqws patches, just changed patch paths) or place this inside the other patch in step 6:</p><p>diff -urN linux-2.6.25-ori/arch/arm/tools/mach-types linux-2.6.25/arch/arm/tools/mach-types<br />--- linux-2.6.25-ori/arch/arm/tools/mach-types&nbsp; &nbsp; 2008-05-15 17:00:12.000000000 +0200<br />+++ linux-2.6.25/arch/arm/tools/mach-types&nbsp; &nbsp; 2009-02-17 09:41:04.882689088 +0100<br />@@ -1720,3 +1720,4 @@<br /> lg_ks20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MACH_LG_KS20&nbsp; &nbsp; &nbsp; &nbsp; LG_KS20&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1725<br /> hhgps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MACH_HHGPS&nbsp; &nbsp; &nbsp; &nbsp; HHGPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1726<br /> nokia_n810_wimax&nbsp; &nbsp; MACH_NOKIA_N810_WIMAX&nbsp; &nbsp; NOKIA_N810_WIMAX&nbsp; &nbsp; 1727<br />+str9100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ARCH_STR9100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; STR9100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1728</p><p>Now you should be able to compile without any problems.</p><p>Let me know if it actually works lol <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>Unfortunately have no time to get serial and test etc so best of luck whoever takes this on and please put this into the OpenWRT repo if it works!!!</p><p>Cheers,<br />Joe</p>											<p class="post-edited">(Last edited by <strong>Z3r0</strong> on 27 Feb 2009, 07:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82769">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						27 Feb 2009, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>You don&#039;t understand me. I succsefully ported STR9100 for openwrt, and my files from tar.gz works. You don&#039;t need use patch from that site. To compile OpenWrt for STR9100 you need untar my archive to correct folders and do &quot;make&quot;. You got working 2.6.25.20 kernel <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> and rootfs in tar.gz file format Thats all :-) </p><p>My problem is that patch <a href="http://tinyhack.com/patch-2.6.25.4-for-agestar-20080618.bz2">http://tinyhack.com/patch-2.6.25.4-for- … 080618.bz2</a> have hackish lan driver and don&#039;t work corectly. It is a lot droped packet under pinging str9100 box!! I would like to fix this ? Can you help me ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82771">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Z3r0</div>
					<div class="post-datetime">
						27 Feb 2009, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>Yes I am having many language problems today <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> Great to hear that you have it working.</p><p>I think that maybe Yohannes solved this:</p><p><a href="http://tinyhack.com/2008/06/22/network-driver-problem-solved/">http://tinyhack.com/2008/06/22/network- … em-solved/</a></p><p>I ended up using Yohannes firmware <a href="http://tinyhack.com/agestar/star-20092008.bin">http://tinyhack.com/agestar/star-20092008.bin</a> via web interface and now I have SSH into the unit. That firmware has only ext3 support for XFS there is another firmware on his site.</p>											<p class="post-edited">(Last edited by <strong>Z3r0</strong> on 27 Feb 2009, 09:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82777">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						27 Feb 2009, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>ok thanks Z3r0, it fix my problem completly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82817">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						27 Feb 2009, 20:40					</div>
				</div>
				<div class="post-content content">
					<p>no, after more testing lan suck <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82955">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						1 Mar 2009, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Thank you for your code for u-boot image.<br />I wrote it to image/Makefile and modified load address for my device.<br /></p><div class="codebox"><pre><code>define Image/BuildKernel
        cp $(LINUX_DIR)/arch/arm/boot/zImage $(KDIR)/zImage
        $(STAGING_DIR_HOST)/bin/mkimage -A arm -O linux -T kernel \
        -C none -a 0x10040000 -e 0x010040000 -n &#039;Linux-$(LINUX_VERSION)&#039; \
        -d $(KDIR)/zImage $(KDIR)/uImage
        cp $(KDIR)/uImage $(BIN_DIR)/openwrt-$(BOARD)-uImage
endef</code></pre></div><p>Unfortunately boot fails.<br /></p><div class="codebox"><pre><code>STR9100&gt;tftpboot 10040000 openwrt-star91-uImage
begin in eth_init()
begin in eth_init_poll()
Check MAC/PHY 0 Link Status : UP!
ARP broadcast 1
eth addr: 00:0d:5e:42:cb:70
TFTP from server 192.168.171.198
; our IP address is 192.168.171.199

Filename &#039;openwrt-star91-uImage&#039;.
Load address: 0x10040000
Loading: #################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
done
Bytes transferred = 2626384 (281350 hex)
STR9100&gt;bootm
## Booting image at 10040000 ...
Bad Magic Number
STR9100&gt;</code></pre></div><p>I read this post.<br /><a href="http://pastebin.com/m77082b0f">http://pastebin.com/m77082b0f</a><br />How did you generate uImage.bin?</p><p>BTW, Do you know how to bump to newer kernel version? Does anyone?</p><p>regards,<br />zukky</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82962">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						1 Mar 2009, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for interesting to run OpenWrt at STAR9100. </p><p>I working on it last week, and i have way how to write kernel permanently do device. <br />There is a latest and working code <a href="http://artekw.cerbero.pl/star9100-01032009.tar.gz">http://artekw.cerbero.pl/star9100-01032009.tar.gz</a>. You need untar this to correct folders. For my Emprex i generate uImage and merge it with armboot with this tools <a href="http://artekw.cerbero.pl/mergetool.tar.gz">http://artekw.cerbero.pl/mergetool.tar.gz</a>. After that I got firmware, and now i upload it via oficial upgrade webgui. Now, in bootloader i change some variable:<br /></p><div class="codebox"><pre><code>setenv bootm 10020000
setenv</code></pre></div><p>Now OpenWrt will boot automaticly :-)<br />Here is working uImage and whole firmware(to upload via webgui) <a href="http://artekw.cerbero.pl/openwrt/emprex">http://artekw.cerbero.pl/openwrt/emprex</a></p><p>To answer for your question about kernel. I don&#039;t know how to bump kernel. In my opinion this isn&#039;t a problem. Problem is a lan driver, because it a lot of dropped packet, and using telnet or ssh is a nightmare!. I looking for people those help porting a new lan driver from 2.6.16 kernel <a href="http://artekw.cerbero.pl/2.6.26-star.tar.gz">http://artekw.cerbero.pl/2.6.26-star.tar.gz</a>.</p><p>If you have any question, ask :-)</p><br /><p>Sory for my english :P</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>