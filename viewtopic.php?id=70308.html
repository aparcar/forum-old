<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Which packages to delete to get wpad instead of wpad-mini</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p354727">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lazyadmin</div>
					<div class="post-datetime">
						21 Mar 2017, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>Hey folks,</p><p>I installed the generic image for my TPLink 710N (v2) router, which has only 4MB flash ROM. I installed it because I want to have WIFI with Enterprise WPA, to be able to login to my university. </p><p>Unfortunately, when I remove the wpad-mini package and want to install the wpad package to enable the advanced wifi settings, the package manager tells me, that there is not enough space.</p><p>When I delete some USB packages, or anything else, I tried also the Luci package, and use SSH terminal, that doesn&#039;t also help much. Actually the free space sometimes even decreases after removing a package, with luci, which kind of confuses me.</p><p>Can anyone suggest me any packages which I could remove or tell me why this free space figure is so confusing?</p><p>thanks a lot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354732">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						21 Mar 2017, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>If you remove any packages pre-built into an image it doesn&#039;t free up space. I suggest you build a custom image for your device with image builder removing packages you don&#039;t want and adding packages you do want.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354738">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lazyadmin</div>
					<div class="post-datetime">
						21 Mar 2017, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>oh really? :-O<br />So I can only add and remove packages at runtime, but after reboot, they are all gone except the pre-built ones?<br />No way to write back the flash??</p><p>well, I wanted to circumvent setting up the whole build environment <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354742">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						21 Mar 2017, 21:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>If you remove any packages pre-built into an image it doesn&#039;t free up space. I suggest you build a custom image for your device with image builder removing packages you don&#039;t want and adding packages you do want.</p></blockquote></div><div class="quotebox"><cite>Lazyadmin wrote:</cite><blockquote><p>oh really? :-O<br />So I can only add and remove packages at runtime, but after reboot, they are all gone except the pre-built ones?<br />No way to write back the flash??</p></blockquote></div><p>No. He did not say that.</p><p>try the command &quot;df&quot; from console, and you see the disk partitions.</p><p>Flashed firmware is in /rom and you can not change that.<br />All the config changes, package installs, file edits etc. will get written to the /overlay that you normally see seamlessy on top of the /rom part (as one unified filesystem). That /overlay is the remaining free storage space on your flash.</p><p>That enables you to reset the router back to the flashed original etc., but the drawback is that the flash space consumed by stuff included in the original firmware can not be reutilised. If you delete a pre-installed package, it stays in flash and an additional deletion record gets written, so you actually consume a tiny bit more disk space...</p><p>Like stangri said, you can use the &quot;imagebuilder&quot; executable to cook a personal firmware from ready-compiled packages. There is no need to set quite the full build environment, but you need to at least download the imagebuilder to a Linux system.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 21 Mar 2017, 23:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354760">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rony albert</div>
					<div class="post-datetime">
						21 Mar 2017, 23:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>If you remove any packages pre-built into an image it doesn&#039;t free up space. I suggest you build a custom image for your device with image builder removing packages you don&#039;t want and adding packages you do want.</p></blockquote></div><p>Thanks for giving right way!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>