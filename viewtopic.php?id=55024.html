<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ZTE MF29A support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p260625">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Kaar3l</div>
					<div class="post-datetime">
						9 Jan 2015, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>I cracked open a MF29A 3g router and found serial port. I recorded serial output on boot.<br /></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Feb 13 2012 - 16:50:17)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fb0000
spi_wait_nsec: 1e 
spi device id: 1 2 16 4d 0 (2164d00)
find flash: S25FL064P
raspi_read: from:30000 len:1000 
.raspi_read: from:30000 len:1000 
.============================================ 
Ralink UBoot Version: 3.5.0.0
-------------------------------------------- 
ASIC 3352_MP (Port5&lt;-&gt;None)
DRAM_CONF_FROM: Boot-Strapping 
DRAM_TYPE: DDR2 
DRAM_SIZE: 512 Mbits
DRAM_WIDTH: 16 bits
DRAM_TOTAL_WIDTH: 16 bits
TOTAL_MEMORY_SIZE: 64 MBytes
Flash component: SPI Flash
FLASH_SIZE: 8 MB 
Date:Feb 13 2012  Time:16:50:17
============================================ 
icache: sets:256, ways:4, linesz:32 ,total:32768
dcache: sets:128, ways:4, linesz:32 ,total:16384 

 ##### The CPU freq = 400 MHZ #### 
 estimate memory size =64 Mbytes

Please choose the operation: 
   1: Load system code to SDRAM via TFTP. 
   2: Load system code then write to Flash via TFTP. 
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load Boot Loader code then write to Flash via Serial. 
   9: Load Boot Loader code then write to Flash via TFTP. 

You choosed 3

 0 
   
3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40 
.   Image Name:   Linux Kernel Image
   Created:      2012-05-31   3:00:21 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    6410250 Bytes =  6.1 MB
   Load Address: 80000000
   Entry Point:  80366000
raspi_read: from:50040 len:61d00a 
..................................................................................................   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80366000) ...
## Giving linux memsize in MB, 64

Starting kernel ...


LINUX started...

 THIS IS ASIC
Linux version 2.6.21 (jiangqs@localhost.localdomain) (gcc version 3.4.2) #4 Thu May 31 11:00:07 CST 2012

 The CPU feqenuce set to 400 MHz
CPU revision is: 0001964c
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Built 1 zonelists.  Total pages: 16256
Kernel command line: console=ttyS1,57600n8 root=/dev/ram0
Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
cause = e0808070, status = 11000000
PID hash table entries: 256 (order: 8, 1024 bytes)
calculating r4koff... 00186a00(1600000)
CPU frequency 400.00 MHz
Using 200.000 MHz high precision timer.
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 56124k/65536k available (2884k kernel code, 9348k reserved, 591k data, 5184k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
detected lzma initramfs
detected lzma initramfs
initramfs: LZMA lc=3,lp=0,pb=2,dictSize=1048576,origSize=25367040
LZMA initramfs by Ming-Ching Tiew &lt;mctiew@yahoo.com&gt;....................................................................................................................................................................................................................................................................................................................................................................................................deice id : 1 2 16 4d 0 (2164d00)
S25FL064P(01 2164d00) (8192 Kbytes)
mtd .name = raspi, .size = 0x00800000 (8M) .erasesize = 0x00010000 (64K) .numeraseregions = 0
Creating 7 MTD partitions on &quot;raspi&quot;:
0x00000000-0x00800000 : &quot;ALL&quot;
0x00000000-0x00030000 : &quot;Bootloader&quot;
0x00030000-0x00040000 : &quot;Config&quot;
0x00040000-0x00050000 : &quot;Factory&quot;
0x00050000-0x00770000 : &quot;Kernel&quot;
0x00770000-0x008e0000 : &quot;JFFS2&quot;
mtd: partition &quot;JFFS2&quot; extends beyond the end of device &quot;raspi&quot; -- size truncated to 0x90000
0x008e0000-0x00800000 : &quot;Data&quot;
mtd: partition &quot;Data&quot; is out of reach -- disabled
RT3xxx EHCI/OHCI init.
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
NTFS driver 2.1.28 [Flags: R/W].
JFFS2 version 2.2. (NAND) (C) 2001-2006 Red Hat, Inc.
fuse init (API version 7.8)
io scheduler noop registered (default)
Ralink gpio driver initialized
Enable Ralink GDMA Controller Module 
GDMA IP Version=2
HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
N_HDLC line discipline registered.
Serial: 8250/16550 driver $Revision: 1.7 $ 2 ports, IRQ sharing disabled
serial8250: ttyS0 at I/O 0xb0000500 (irq = 37) is a 16550A
serial8250: ttyS1 at I/O 0xb0000c00 (irq = 12) is a 16550A
RAMDISK driver initialized: 16 RAM disks of 8192K size 1024 blocksize
loop: loaded (max 8 devices)
nbd: registered device at major 43
rdm_major = 254
MAC_ADRH -- : 0x00000000
MAC_ADRL -- : 0x00000000
Ralink APSoC Ethernet Driver Initilization. v2.0  256 rx/tx descriptors allocated, mtu = 1500!
MAC_ADRH -- : 0x00004828
MAC_ADRL -- : 0x2faea74e
PROC INIT OK!
IMQ starting with 2 devices...
IMQ driver loaded successfully.
    Hooking IMQ after NAT on PREROUTING.
    Hooking IMQ before NAT on POSTROUTING.
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
PPP MPPE Compression module registered
NET: Registered protocol family 24
PPPoL2TP kernel driver, V0.17
PPTP driver version 0.8.1
block2mtd: version $Revision: 1.1.1.1 $
usbmon: debugfs is not available
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00, driver 10 Dec 2004
usb usb1: Product: Ralink EHCI Host Controller
usb usb1: Manufacturer: Linux 2.6.21 ehci_hcd
usb usb1: SerialNumber: rt3xxx
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
usbcore: registered new interface driver cdc_acm
drivers/usb/class/cdc-acm.c: v0.25:USB Abstract Control Model driver for USB modems and ISDN adapters
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usbcore: registered new interface driver usbserial
drivers/usb/serial/usb-serial.c: USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
drivers/usb/serial/usb-serial.c: USB Serial Driver core
drivers/usb/serial/usb-serial.c: USB Serial support registered for GSM modem (1-port)
usbcore: registered new interface driver option
drivers/usb/serial/option.c: USB Driver for GSM modems: v0.7.1
usbcore: registered new interface driver usb-pcm
drivers/usb/serial/usb-pcm.c: USB Driver for GSM modems: V2.4.20_uC0_1B12
nf_conntrack version 0.5.0 (512 buckets, 4096 max)
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 10
lo: Disabled Privacy Extensions
Mobile IPv6
ip6_tables: (C) 2000-2006 Netfilter Core Team
ip6_queue: failed to register queue handler
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 5184k freed
init started: BusyBox v1.12.1 (2012-05-31 10:46Algorithmics/MIPS FPU Emulator v1.5
:46 CST)
starting pid 17, tty &#039;&#039;: &#039;/etc_ro/rcS&#039;
devpts: called with bogus options
usb 1-2: new high speed USB device using rt3xxx-ehci and address 2
JFFS2 notice: (23) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.
Load cfg new driver...
cfg init, drivers/cfg/cfg_param.c 540

DDNSPassword=csq=s
44444e5350617373776f72643d006373713d0073

 cfg init end, drivers/cfg/cfg_param.c 598
cfg init, drivers/cfg/cfg_param.c 540

TESTBITSIGNINFO=0000
544553544249545349474e494e464f3d30303030

 cfg init end, drivers/cfg/cfg_param.c 598
cfg init, drivers/cfg/cfg_param.c 540


0000000000000000000000000000000000000000

 cfg init end, drivers/cfg/cfg_param.c 598
cfg init, drivers/cfg/cfg_param.c 540


0000000000000000000000000000000000000000

 cfg init end, drivers/cfg/cfg_param.c 598
usb 1-2: Product: ZTE WCDMA Technologies MSM
usb 1-2: Manufacturer: ZTE,Incorporated
usb 1-2: SerialNumber: MF260ACSLD010000
usb 1-2: configuration #1 chosen from 1 choice
send c6 switch instruction message.
Welcome to
     _______  _______  ___     __  ____   _  _   ___
    |  ___  \|   __  ||   |   |__||    \ | || | /  /
    | |___| ||  |__| ||   |__  __ |     \| || |/  /
    |   _   /|   _   ||      ||  || |\     ||     \
    |__| \__\|__| |__||______||__||_| \____||_|\___\

                    =System Architecture Department=

zhaoyong open gpio success
ralink_gpio: sending a SIGUSR1 to process 32
scsi0 : SCSI emulation for USB Mass Storage devices
usb 1-2: USB disconnect, address 2
If printf these words,usb umounted!
usbcore: registered new interface driver cdc_ether
Password for &#039;admin&#039; changed
insmod: bridge.ko: module not found
insmod: mii.ko: module not found
insmod: raeth.ko: module not found

phy_tx_ring = 0x00436000, tx_ring = 0xa0436000

phy_rx_ring0 = 0x00437000, rx_ring0 = 0xa0437000
RT305x_ESW: Link Status Changed
CDMA_CSG_CFG = 81000007
GDMA1_FWD_CFG = C0710000
usb 1-2: new high speed USB device using rt3xxx-ehci and address 3
usb 1-2: Product: ZTE WCDMA Technologies MSM
usb 1-2: Manufacturer: ZTE,Incorporated
usb 1-2: SerialNumber: MF260ACSLD010000
usb 1-2: configuration #1 chosen from 1 choice
zhaoyong modetype=WCDMA
find modem i:45
modem name: MF110
option 1-2:1.0: GSM modem (1-port) converter detected
usb 1-2: GSM modem (1-port) converter now attached to ttyUSB0
find modem i:45
modem name: MF110
option 1-2:1.1: GSM modem (1-port) converter detected
usb 1-2: GSM modem (1-port) converter now attached to ttyUSB1
find modem i:45
modem name: MF110
this is VOUSB interface&lt;7&gt;usb-pcm 1-2:1.2: usb_probe_interface
drivers/usb/serial/usb-pcm.c :pid:1254 vid:19d2 
descriptor matchesfind modem i:45
found bulk in
found bulk out
ZTE port(usb-pcm) converter detected
find modem i:45
modem name: MF110
option 1-2:1.3: GSM modem (1-port) converter detected
usb 1-2: GSM modem (1-port) converter now attached to ttyUSB3
find modem i:45
modem name: MF110
option 1-2:1.4: don&#039;t support this interface.
drivers/usb/serial/usb-pcm.c :pid:1254 vid:19d2 
descriptor matchesfind modem i:45
this isn&#039;t VOUSB interface&lt;7&gt;cdc_ether 1-2:1.4: usb_probe_interface
cdc_ether 1-2:1.4: ZTE Ethernet Device: claiming interface 4
usb 1-2: bad CDC descriptors
usb0: register &#039;cdc_ether&#039; at usb-rt3xxx-2, ZTE Ethernet Device, f6:23:f5:98:ae:9f

##### disable 1st wireless interface #####
rmmod: rt2860v2_ap_net: No such file or directory
rmmod: rt2860v2_ap: No such file or directory
rmmod: rt2860v2_ap_util: No such file or directory
rmmod: rt2860v2_sta_net: No such file or directory
rmmod: rt2860v2_sta: No such file or directory
rmmod: rt2860v2_sta_util: No such file or directory
insmod: rt2860v2_ap_util.ko: module not found
rt2860v2_ap: module license &#039;unspecified&#039; taints kernel.


=== pAd = c03b5000, size = 637784 ===

&lt;-- RTMPAllocAdapterBlock, Status=0
insmod: rt2860v2_ap_net.ko: module not found
rmmod: nf_nat_pptp: No such file or directory
rmmod: nf_conntrack_pptp: No such file or directory
rmmod: nf_nat_proto_gre: No such file or directory
rmmod: nf_conntrack_proto_gre: No such file or directory
RX DESC a0493000  size = 2048
&lt;-- RTMPAllocTxRxRingMemory, Status=0
Key1Str is Invalid key length(0) or Type(0)
Key2Str is Invalid key length(0) or Type(0)
Key3Str is Invalid key length(0) or Type(0)
Key4Str is Invalid key length(0) or Type(0)
1. Phy Mode = 9
2. Phy Mode = 9
3. Phy Mode = 9
MCS Set = ff ff 00 00 01
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
Main bssid = 48:28:2f:ae:a7:4e
&lt;==== rt28xx_init, Status=0
0x1300 = 00064380
vconfig: ioctl error for rem: Invalid argument
vconfig: ioctl error for rem: Invalid argument
rmmod: 8021q: No such file or directory
insmod: 8021q.ko: module not found
BusyBox v1.12.1 (2012-05-31 10:46:46 CST) multi-call binary

Usage: ifconfig [-a] interface [address]

ifconfig: ioctl 0x8913 failed: No such device
brctl: bridge br0: No such device or address
device ra0 entered promiscuous mode
##### restore Ralink ESW to dump switch #####
switch reg write offset=14, value=5555
switch reg write offset=40, value=1001
switch reg write offset=44, value=1001
switch reg write offset=48, value=1001
switch reg write offset=4c, value=1
switch reg write offset=50, value=2001
switch reg write offset=70, value=ffffffff
switch reg write offset=98, value=7f7f
switch reg write offset=e4, value=7f
done.
device eth2 entered promiscuous mode
br0: port 2(eth2) entering learning state
br0: port 1(ra0) entering learning state
route: ioctl 0x890c failed: No such process
route: ioctl 0x890b failed: Invalid argument
ifconfig: ioctl 0x8914 failed: Cannot assign requested address
ifconfig: ioctl 0x8914 failed: Cannot assign requested address
myc2
killall: udhcpd: no process killed
Set: phy[0].reg[0] = 3900
Set: phy[4].reg[0] = 3900
Set: phy[1].reg[0] = 3900
Set: phy[2].reg[0] = 3900
Set: phy[3].reg[0] = 3900
Set: phy[0].reg[0] = 3100
Set: phy[4].reg[0] = 3100
Set: phy[1].reg[0] = 3100
Set: phy[2].reg[0] = 3100
Set: phy[3].reg[0] = 3100
ifconfig: ioctl 0x8913 failed: No such device
route: ioctl 0x890c failed: No such process
route: ioctl 0x890b failed: Invalid argument
killall: pppoecd: no process killed
killall: udhcpc: no process killed
logread: can&#039;t find syslogd buffer: No such file or directory
set tr069_SerialNumber to 48282FAEA74E
qmi_app:main: started
qmi_app:main: Create the QMI dail module&#039;s message queue ok!
qmi_app:main: QMI_APP begin to rcv msg from queue 32769. 
not enter 29A

 goahead main .
DB: Registering database table &lt;users&gt;
DB: Registering database table &lt;groups&gt;
DB: Registering database table &lt;access&gt;
UM: Loading User Configuration from file &lt;umconfig.txt&gt;
DB: About to read data file &lt;./umconfig.txt&gt;
DB: Failed to stat persistent data file.
goahead initWebs info: webdir is /etc_ro/web!
webs: Listening for HTTP requests at address 192.168.0.1
register PBC_WPS_34 ---------------------------&gt; 
firewall_init.sh
iptables: No chain/target/match by that name
iptables: No chain/target/match by that name
ip6tables: No chain/target/match by that name
iptables: No chain/target/match by that name
iptables: No chain/target/match by that name
startsmbfilepwent_internal: file /etc/smbpasswd did not exist. File successfully created.
account_policy_get: tdb_fetch_uint32 failed for field 1 (min password length), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 2 (password history), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 3 (user must logon to change password), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 4 (maximum password age), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 5 (minimum password age), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 6 (lockout duration), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 7 (reset count minutes), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 8 (bad lockout attempt), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 9 (disconnect time), returning 0
account_policy_get: tdb_fetch_uint32 failed for field 10 (refuse machine password change), returning 0
Added user admin.
iptables: No chain/target/match by that name
WanIfName=...
iptables -t nat -A POSTROUTING -o usb0 -j MASQUERADE
iptables -t filter -F INPUT
si3217x : Channel 0 : Type = PROSLIC
si3217x : Channel 1 : Type = DAA
Si3217x : Channel 0 : VBAT Up = 61.630 v
PROSLIC[0]: FXS is CHAN[0], ChipType = SI32178, ChipRev = B
PROSLIC[0]: FXO is CHAN[1], ChipRev = A
slic_drv.c 679: ProSLIC[0] is active now
iptables -t filter -I INPUT -p udp --sport 53  -j ACCEPT
iptables -t filter -I INPUT -p udp --dport 53  -j ACCEPT
init slic api.
normal mode!
starting pid 1032, tty &#039;/dev/ttyS1&#039;: &#039;/bin/sh&#039;


BusyBox v1.12.1 (2012-05-31 10:46:46 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

# 
dnsmasq: failed to create listening socket: Address already in use
iptables -t filter -I INPUT -p tcp --sport 53  -j ACCEPT
iptables -t filtbr0: topology change detected, propagating
er -I INPUT -p tbr0: port 2(eth2) entering forwarding state
cp --dport 53  -br0: topology change detected, propagating
j ACCEPT
br0: port 1(ra0) entering forwarding state
iptables -t filter -I INPUT -p tcp --dport 4719 -j ACCEPT
iptables -t filter -I INPUT -p udp --dport 4719 -j ACCEPT
iptables -A INPUT -i usb0 -p icmp --icmp-type echo-reply -j ACCEPT 
iptables -t filter -A INPUT -i usb0 -p tcp --dport 80  -j DROP
iptables -t filter -A INPUT -i usb0 -p icmp -j DROP
zte_iptables_port_forward_run-&gt;PortForwardRules: [192.168.0.99,37777,37777,3,Videovalve;192.168.0.100,37779,37779,3,Katlamaja;192.168.0.200,80,80,3,PROOV], wan_if_name: [usb0]
iptables -t nat -A port_forward -j DNAT -i usb0 -p tcp --dport 37777:37777 --to 192.168.0.99 
Send Timer Msg Fail!
FXS RAM 545 : 0x010C7E60
FXS RAM 546 : 0x13788C15
FXS RAM 547 : 0x1A436404
FXS RAM 548 : 0x00E2B23D
FXS RAM 549 : 0x1FBF1964
cs_phone initialization...cs phone begin to rcv msg from queue 163845. 
iptables -t nat -A port_forward -j DNAT -i usb0 -p udp --dport 37777:37777 --to 192.168.0.99 
iptables -t nat -A port_forward -j DNAT -i usb0 -p tcp --dport 37779:37779 --to 192.168.0.100 
iptables -t nat -A port_forward -j DNAT -i usb0 -p udp --dport 37779:37779 --to 192.168.0.100 
iptables -t nat -A port_forward -j DNAT -i usb0 -p tcp --dport 80:80 --to 192.168.0.200 
iptables -t nat -A port_forward -j DNAT -i usb0 -p udp --dport 80:80 --to 192.168.0.200 
cfg save index:0
ip6tables -F macipport_filter
ip6tables -t filter -P FORWARD ACCEPT
ip6tables -t filter -A macipport_filter -m state --state RELATED,ESTABLISHED -j ACCEPT
zte_run_all_filter_rules_v6: read IPPortFilterEnable fail or IPPortFilterEnable is 0upnp.sh
killall: miniupnpd: no process killed
iptables: No chain/target/match by that name
iptables v1.4.0rc1: Couldn&#039;t find target `MINIUPNPD&#039;

Try `iptables -h&#039; or &#039;iptables --help&#039; for more information.
iptables: No chain/target/match by that name
iptables: No chain/target/match by that name
iptables v1.4.0rc1: Couldn&#039;t find target `MINIUPNPD&#039;

Try `iptables -h&#039; or &#039;iptables --help&#039; for more information.
iptables: No chain/target/match by that name
killall: miniupnpd: no process killed
iptables: No chain/target/match by that name
iptables v1.4.0rc1: Couldn&#039;t find target `MINIUPNPD&#039;

Try `iptables -h&#039; or &#039;iptables --help&#039; for more information.
iptables: No chain/target/match by that name
iptables: No chain/target/match by that name
iptables v1.4.0rc1: Couldn&#039;t find target `MINIUPNPD&#039;

Try `iptables -h&#039; or &#039;iptables --help&#039; for more information.
iptables: No chain/target/match by that name</code></pre></div><p>It seems very very similar to DIR-615 H1. I think I&#039;ll try to backup flash and then try DIR-615 firmware. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260692">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaar3l</div>
					<div class="post-datetime">
						9 Jan 2015, 13:16					</div>
				</div>
				<div class="post-content content">
					<p>I flashed DIR-620 D1 firmware and it works perfectly. Then I needed to get ZTE 3G modem working. I compiled into firmware : chat, comgt, kmod-usb-serial, kmod-usb-serial-option, kmod-usb-serial-wwan, libusb, usb-modeswitch.<br />Then I added to network config under wan:<br />/etc/config/network:<br />option ifname &#039;ppp0&#039;<br />option proto &#039;3g&#039;<br />option device &#039;/dev/ttyUSB3&#039;<br />option apn &#039;static.emt.ee&#039;<br />option service &#039;umts&#039;</p><p>3G started to work. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />All the leds are lit and messed up, but the system is working. (Y)</p><p>Openwrt bootlog:<br /></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Feb 13 2012 - 16:50:17)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fb0000
spi_wait_nsec: 1e 
spi device id: 1 2 16 4d 0 (2164d00)
find flash: S25FL064P
raspi_read: from:30000 len:1000 
.raspi_read: from:30000 len:1000 
.============================================ 
Ralink UBoot Version: 3.5.0.0
-------------------------------------------- 
ASIC 3352_MP (Port5&lt;-&gt;None)
DRAM_CONF_FROM: Boot-Strapping 
DRAM_TYPE: DDR2 
DRAM_SIZE: 512 Mbits
DRAM_WIDTH: 16 bits
DRAM_TOTAL_WIDTH: 16 bits
TOTAL_MEMORY_SIZE: 64 MBytes
Flash component: SPI Flash
FLASH_SIZE: 8 MB 
Date:Feb 13 2012  Time:16:50:17
============================================ 
icache: sets:256, ways:4, linesz:32 ,total:32768
dcache: sets:128, ways:4, linesz:32 ,total:16384 

 ##### The CPU freq = 400 MHZ #### 
 estimate memory size =64 Mbytes

Please choose the operation: 
   1: Load system code to SDRAM via TFTP. 
   2: Load system code then write to Flash via TFTP. 
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load Boot Loader code then write to Flash via Serial. 
   9: Load Boot Loader code then write to Flash via TFTP. 
 0 
   
3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40 
.   Image Name:   MIPS OpenWrt Linux-3.14.27
   Created:      2015-01-09  10:36:02 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1053438 Bytes =  1 MB
   Load Address: 80000000
   Entry Point:  80000000
raspi_read: from:50040 len:1012fe 
.................   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80000000) ...
## Giving linux memsize in MB, 64

Starting kernel ...

[    0.000000] Linux version 3.14.27 (msi@msi-MS-7750) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r43888) ) #5 Fri Jan 9 12:35:01 EET 2015
[    0.000000] SoC Type: Ralink RT3352 id:1 rev:4
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001964c (MIPS 24KEc)
[    0.000000] MIPS: machine is D-Link DIR-620 D1
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=000113e0
[    0.000000] Readback ErrCtl register=000113e0
[    0.000000] Memory: 61708K/65536K available (2292K kernel code, 119K rwdata, 456K rodata, 132K init, 180K bss, 3828K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 400MHz
[    0.000000] clocksource_of_init: no matching clocksources found
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.090000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.100000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.110000] pinctrl core: initialized pinctrl subsystem
[    0.120000] NET: Registered protocol family 16
[    0.160000] bio: create slab &lt;bio-0&gt; at 0
[    0.170000] rt2880_gpio 10000600.gpio: registering 24 gpios
[    0.180000] rt2880_gpio 10000600.gpio: registering 24 irq handlers
[    0.190000] Switched to clocksource MIPS
[    0.200000] NET: Registered protocol family 2
[    0.210000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.220000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.240000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.250000] TCP: reno registered
[    0.260000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.270000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.280000] NET: Registered protocol family 1
[    0.290000] rt-timer 10000100.timer: maximum frequency is 8138Hz
[    0.310000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.360000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.370000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.390000] msgmni has been set to 120
[    0.400000] io scheduler noop registered
[    0.410000] io scheduler deadline registered (default)
[    0.420000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.440000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20, base_baud = 2500000) is a 16550A
[    0.450000] console [ttyS0] enabled
[    0.450000] console [ttyS0] enabled
[    0.470000] bootconsole [early0] disabled
[    0.470000] bootconsole [early0] disabled
[    0.490000] m25p80 spi32766.0: found s25sl064p, expected mx25l6405d
[    0.510000] m25p80 spi32766.0: s25sl064p (8192 Kbytes)
[    0.520000] 4 ofpart partitions found on MTD device spi32766.0
[    0.530000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:
[    0.540000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.550000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.570000] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.580000] 0x000000050000-0x000000800000 : &quot;firmware&quot;
[    0.610000] 2 uimage-fw partitions found on MTD device firmware
[    0.620000] 0x000000050000-0x00000015133e : &quot;kernel&quot;
[    0.630000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.660000] 0x00000015133e-0x000000800000 : &quot;rootfs&quot;
[    0.670000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.700000] mtd: device 5 (rootfs) set to be root filesystem
[    0.710000] 1 squashfs-split partitions found on MTD device rootfs
[    0.720000] 0x0000003b0000-0x000000800000 : &quot;rootfs_data&quot;
[    0.750000] ralink_soc_eth 10100000.ethernet eth0: ralink at 0xb0100000, irq 5
[    0.760000] rt3xxx-usbphy usbphy.3: loaded
[    0.770000] rt2880_wdt 10000120.watchdog: Initialized
[    0.780000] TCP: cubic registered
[    0.790000] NET: Registered protocol family 17
[    0.800000] 8021q: 802.1Q VLAN Support v1.8
[    0.820000] VFS: Mounted root (squashfs filesystem) readonly on device 31:5.
[    0.840000] Freeing unused kernel memory: 132K (802cf000 - 802f0000)
[    2.320000] rt305x-esw 10110000.esw: link changed 0x02
procd: Console is alive
procd: - watchdog -
[    5.470000] usbcore: registered new interface driver usbfs
[    5.480000] usbcore: registered new interface driver hub
[    5.490000] usbcore: registered new device driver usb
[    5.520000] SCSI subsystem initialized
[    5.540000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.550000] ehci-platform: EHCI generic platform driver
[    5.760000] rt3xxx-usbphy usbphy.3: remote usb device wakeup disabled
[    5.780000] rt3xxx-usbphy usbphy.3: UTMI 16bit 30MHz
[    5.790000] ehci-platform 101c0000.ehci: EHCI Host Controller
[    5.800000] ehci-platform 101c0000.ehci: new USB bus registered, assigned bus number 1
[    5.810000] ehci-platform 101c0000.ehci: irq 26, io mem 0x101c0000
[    5.850000] ehci-platform 101c0000.ehci: USB 2.0 started, EHCI 1.00
[    5.860000] hub 1-0:1.0: USB hub found
[    5.870000] hub 1-0:1.0: 2 ports detected
[    5.880000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    5.900000] ohci-platform: OHCI generic platform driver
[    5.910000] ohci-platform 101c1000.ohci: Generic Platform OHCI controller
[    5.920000] ohci-platform 101c1000.ohci: new USB bus registered, assigned bus number 2
[    5.940000] ohci-platform 101c1000.ohci: irq 26, io mem 0x101c1000
[    6.010000] hub 2-0:1.0: USB hub found
[    6.020000] hub 2-0:1.0: 2 ports detected
[    6.050000] usbcore: registered new interface driver usb-storage
[    6.200000] usb 1-2: new high-speed USB device number 2 using ehci-platform
[    6.360000] usb-storage 1-2:1.0: USB Mass Storage device detected
[    6.380000] scsi0 : usb-storage 1-2:1.0
procd: - preinit -
[    7.560000] scsi 0:0:0:0: CD-ROM            ZTE      USB SCSI CD-ROM  2.31 PQ: 0 ANSI: 2
[    7.580000] scsi 0:0:0:1: Direct-Access     ZTE      MMC Storage      2.31 PQ: 0 ANSI: 2
[    7.620000] sd 0:0:0:1: [sda] Attached SCSI removable disk
[    8.010000] rt305x-esw 10110000.esw: link changed 0x00
[    8.050000] 8021q: adding VLAN 0 to HW filter on device eth0
[    8.120000] random: mktemp urandom read with 58 bits of entropy available
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    9.600000] rt305x-esw 10110000.esw: link changed 0x02
jffs2 is ready
No jffs2 marker was found
[   11.620000] jffs2: notice: (318) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 7 of xref (0 dead, 2 orphan) found.
switching to overlay
procd: - early -
procd: - watchdog -
procd: - ubus -
Command failed: Not found
procd: - init -
Please press Enter to activate this console.
[   15.370000] NET: Registered protocol family 10
[   15.390000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   15.420000] Loading modules backported from Linux version master-2014-11-04-0-gf3660a2
[   15.440000] Backport generated by backports.git backports-20141023-2-g4ff890b
[   15.460000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   15.490000] nf_conntrack version 0.5.0 (966 buckets, 3864 max)
[   15.540000] usbcore: registered new interface driver usbserial
[   15.560000] usbcore: registered new interface driver usbserial_generic
[   15.570000] usbserial: USB Serial support registered for generic
[   15.610000] xt_time: kernel timezone is -0000
[   15.630000] usbcore: registered new interface driver cdc_ether
[   15.690000] cfg80211: Calling CRDA to update world regulatory domain
[   15.750000] cfg80211: World regulatory domain updated:
[   15.760000] cfg80211:  DFS Master region: unset
[   15.760000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   15.780000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   15.800000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   15.820000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   15.830000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   15.850000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   15.870000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   15.880000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   15.900000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   15.950000] PPP generic driver version 2.4.2
[   15.970000] NET: Registered protocol family 24
[   15.990000] usbcore: registered new interface driver rndis_host
[   16.030000] usbcore: registered new interface driver option
[   16.040000] usbserial: USB Serial support registered for GSM modem (1-port)
[   16.080000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3352, rev 0200 detected
[   16.100000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 000c detected
[   19.390000] rt305x-esw 10110000.esw: link changed 0x00
[   20.970000] rt305x-esw 10110000.esw: link changed 0x02
[   23.440000] usb 1-2: USB disconnect, device number 2
procd: - init complete -
[   26.010000] 8021q: adding VLAN 0 to HW filter on device eth0
[   26.030000] device eth0.1 entered promiscuous mode
[   26.040000] device eth0 entered promiscuous mode
[   26.050000] br-lan: port 1(eth0.1) entered forwarding state
[   26.060000] br-lan: port 1(eth0.1) entered forwarding state
[   26.490000] usb 1-2: new high-speed USB device number 3 using ehci-platform
[   26.710000] option 1-2:1.0: GSM modem (1-port) converter detected
[   26.740000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB0
[   26.790000] random: nonblocking pool is initialized
[   26.880000] option 1-2:1.1: GSM modem (1-port) converter detected
[   26.960000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB1
[   27.000000] option 1-2:1.2: GSM modem (1-port) converter detected
[   27.130000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB2
[   27.170000] option 1-2:1.3: GSM modem (1-port) converter detected
[   27.210000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB3
[   28.060000] br-lan: port 1(eth0.1) entered forwarding state</code></pre></div>											<p class="post-edited">(Last edited by <strong>Kaar3l</strong> on 9 Jan 2015, 13:49)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>