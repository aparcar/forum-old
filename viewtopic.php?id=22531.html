<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Open Vpn Problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p97281">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						12 Nov 2009, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello, i try to connect to swiss vpn but there comes the following message:</p><p>root@OpenWrt:~# openvpn --cd /etc/openvpn --config swissvpn.ovpn<br />Tue Nov 10 20:53:11 2009 OpenVPN 2.0.9 mipsel-linux [SSL] [LZO] built on Feb&nbsp; 2 2009<br />Enter Auth Username:swissvpntest<br />Enter Auth Password:<br />Tue Nov 10 20:53:18 2009 IMPORTANT: OpenVPN&#039;s default port number is now 1194, based on an official port number assignment by IANA.&nbsp; OpenVPN 2.0-beta16 and earlier used 5000 as the default port.<br />Tue Nov 10 20:53:18 2009 WARNING: No server certificate verification method has been enabled.&nbsp; See <a href="http://openvpn.net/howto.html#mitm">http://openvpn.net/howto.html#mitm</a> for more info.<br />Tue Nov 10 20:53:18 2009 Attempting to establish TCP connection with 80.254.79.87:443<br />Tue Nov 10 20:53:18 2009 TCP connection established with 80.254.79.87:443<br />Tue Nov 10 20:53:18 2009 TCPv4_CLIENT link local: [undef]<br />Tue Nov 10 20:53:18 2009 TCPv4_CLIENT link remote: 80.254.79.87:443<br />Tue Nov 10 20:53:20 2009 [server] Peer Connection Initiated with 80.254.79.87:443<br />Tue Nov 10 20:53:21 2009 Options error: unknown --redirect-gateway flag: bypass-dhcp<br />Tue Nov 10 20:53:21 2009 Options error: Unrecognized option or missing parameter(s) in [PUSH-OPTIONS]:5: topology (2.0.9)<br />Tue Nov 10 20:53:21 2009 Options error: Unrecognized option or missing parameter(s) in [PUSH-OPTIONS]:8: socket-flags (2.0.9)<br />Tue Nov 10 20:53:21 2009 WARNING: Since you are using --dev tun, the second argument to --ifconfig must be an IP address.&nbsp; You are using something (255.255.255.128) that looks more like a netmask. (silence this warning with --ifconfig-nowarn)<br />Tue Nov 10 20:53:21 2009 TUN/TAP device tun0 opened<br />Tue Nov 10 20:53:21 2009 /sbin/ifconfig tun0 80.254.76.136 pointopoint 255.255.255.128 mtu 1500<br />ifconfig: SIOCSIFDSTADDR: Invalid argument<br />Tue Nov 10 20:53:22 2009 Linux ifconfig failed: shell command exited with error status: 1<br />Tue Nov 10 20:53:22 2009 Exiting<br />root@OpenWrt:~#</p><br /><p>here the swissvpn.ovpn file:</p><p>dev tun<br />client<br />proto tcp-client<br />remote connect-openvpn.swissvpn.net 443<br />ca ca.crt<br />auth-user-pass<br />reneg-sec 86400<br />ns-cert-type server</p><br /><p>What can i do now that it works?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97282">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						12 Nov 2009, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>out of curiosity visited the sitte of swissvpn. They indicate that <br />quote<br />Download the latest OpenVPN version from the 2.1 branch (2.1_rc18 at the time of this writing). Important: OpenVPN 2.0 will not work! <br />unquote.<br />Your log says:<br />OpenVPN 2.0.9</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97283">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						12 Nov 2009, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>hi, how can i make open vpn 2.1 on the router? I made yesterday a update with this command:<br />opkg update<br />opkg install openvpn<br />But it istalled OpenVPN 2.0.9.</p><p>exist open vpn v. 2.1 for openwrt?</p>											<p class="post-edited">(Last edited by <strong>sangul</strong> on 12 Nov 2009, 18:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97287">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						12 Nov 2009, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>2.1_rc18 is available under snapshots from downloads.openwrt.org.<br />Choose the proper architecture and make sure OpenWrt itself and all the packages you want to install are of the same kernel version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97298">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						13 Nov 2009, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>Ok, i will test it tomorrow and write back</p><p>cu</p>											<p class="post-edited">(Last edited by <strong>sangul</strong> on 13 Nov 2009, 01:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97333">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						13 Nov 2009, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>hi doodel,</p><p>now it works the only problem was:</p><p>the resolv.conf.auto was not updated so i had manually write the dns of swissvpn in it.</p><p>On this page:&nbsp; <a href="https://forum.openwrt.org/viewtopic.php?id=21408">https://forum.openwrt.org/viewtopic.php?id=21408</a></p><p>there is a solution the this works automatically with two scirpts </p><p>up:</p><p>#!/bin/sh<br />mv /tmp/resolv.conf.auto /tmp/resolv.conf.auto.hold<br />echo $foreign_option_1 | sed -e &#039;s/dhcp-option DOMAIN/domain/g&#039; -e &#039;s/dhcp-option DNS/nameserver/g&#039; &gt; /tmp/resolv.conf.auto<br />echo $foreign_option_2 | sed -e &#039;s/dhcp-option DOMAIN/domain/g&#039; -e &#039;s/dhcp-option DNS/nameserver/g&#039; &gt;&gt; /tmp/resolv.conf.auto<br />echo $foreign_option_3 | sed -e &#039;s/dhcp-option DOMAIN/domain/g&#039; -e &#039;s/dhcp-option DNS/nameserver/g&#039; &gt;&gt; /tmp/resolv.conf.auto</p><p>down:</p><p>#!/bin/sh<br />mv /tmp/resolv.conf.auto.hold /tmp/resolv.conf.auto</p><br /><p>i made it like discribed but if i make in putty/ssh:</p><p>openvpn --up ./up --down ./down --config swissvpn.ovpn</p><p>it comes this message:</p><br /><p>Options error: In [CMD-LINE]:1: Error opening configuration file: swissvpn.ovpn<br />Use --help for more information.</p><p>What can i do?</p>											<p class="post-edited">(Last edited by <strong>sangul</strong> on 13 Nov 2009, 18:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97359">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						14 Nov 2009, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>it looks as if it is looking for the conf file but cannot find it. Perhaps add a path to it, like you did with the up and down scripts.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97360">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						14 Nov 2009, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, with open vpn 2.1 you can&#039;t load own scipts in open vpn.<br />So i installed the version 2.0.9 and add the path:</p><p>openvpn --up ./up --down ./down --config /etc/openvpn/swissvpn.ovpn</p><p>But now this message comes:</p><p>Sat Nov 14 15:05:16 2009 Cannot load CA certificate file ca.crt (SSL_CTX_load_verify_locations): error:02001002:lib(2):func(1):reason(2): error:2006D080:lib(32):func(109):reason(128): error:0B084002:lib(11):func(132):reason(2)<br />Sat Nov 14 15:05:16 2009 Exiting</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97361">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">sangul</div>
					<div class="post-datetime">
						14 Nov 2009, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>the problem is solved the problem was that i wrote:</p><p>openvpn --up ./up --down ./down --config /etc/openvpn/swissvpn.ovpn</p><p>instead of</p><br /><p>openvpn --cd /etc/openvpn/ --up /etc/openvpn/up --down /etc/openvpn/down --config /etc/openvpn/swissvpn.ovpn</p><br /><p>cu</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>