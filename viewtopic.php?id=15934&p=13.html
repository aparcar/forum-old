<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is this router based on the infineon danube?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Oct 2014 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 13 of 40</div><nav><ul><li><a href="viewtopic.php%3Fid=15934&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=15.html">15</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=40.html">40</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p132181">
				<div class="post-metadata">
					<div class="post-num">Post #301</div>
					<div class="post-author">sblanco</div>
					<div class="post-datetime">
						2 Apr 2011, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>Do you think there are different arv4518 boards out there?<br />By the way, is the uImage the right one generated to flash when using the ramdisk image? Is it ok to flash squashfs or jffs2 instead?</p><p>two days ago I found the serial cable, but it has some damage so i have to solder some wires to a connector for thntil I managee pins. It will take some time until I manage to get it working :-(</p><p>Thanks for replying!</p>											<p class="post-edited">(Last edited by <strong>sblanco</strong> on 2 Apr 2011, 22:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132182">
				<div class="post-metadata">
					<div class="post-num">Post #302</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						2 Apr 2011, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>You could try this uboot:<br /><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv4518PW_brnboot/">http://downloads.openwrt.org/snapshots/ … W_brnboot/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132183">
				<div class="post-metadata">
					<div class="post-num">Post #303</div>
					<div class="post-author">sblanco</div>
					<div class="post-datetime">
						2 Apr 2011, 22:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pippolippi wrote:</cite><blockquote><p>You could try this uboot:<br /><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv4518PW_brnboot/">http://downloads.openwrt.org/snapshots/ … W_brnboot/</a></p></blockquote></div><p>Don&#039;t you think that i should use this one instead:</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv4518PW_ramboot/">http://downloads.openwrt.org/snapshots/ … W_ramboot/</a></p><p>I was going to try that anyway, but thanks :-) If I manage to get something working, I will post it here.</p>											<p class="post-edited">(Last edited by <strong>sblanco</strong> on 2 Apr 2011, 22:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132184">
				<div class="post-metadata">
					<div class="post-num">Post #304</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						2 Apr 2011, 22:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Do you think there are different arv4518 boards out there?</p></blockquote></div><p>I don&#039;t know, but I simply got confused by your mentioning SP700exe: I first though it was the name of another router <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><div class="quotebox"><blockquote><p>By the way, is the uImage the right one generated to flash when using the ramdisk image? Is it ok to flash squashfs or jffs2 instead?</p></blockquote></div><p>Again, I don&#039;t know. The advantage of the ramdisk image is that it doesn&#039;t need anything else to work, so it&#039;s easier to test, the disadvantage, of course, is that all modifications are lost.<br />Maybe your problem is that the snapshot image isn&#039;t good (I think that ngp found some problems with the patches committed to openwrt trunk).</p><br /><div class="quotebox"><blockquote><p>two days ago I found the serial cable, but it has some damage so i have to solder some wires to a connector for thntil I managee pins. It will take some time until I manage to get it working :-(</p></blockquote></div><p>Ok, remember that the serial port in the router uses 3.3V, so you&#039;ll need either an usb adapter for a phone (those usually are 3.3V too) or you&#039;ll need a max232 to convert the rs232 levels to ttl (otherwise you&#039;ll fry the serial port on the router).</p>											<p class="post-edited">(Last edited by <strong>pippolippi</strong> on 2 Apr 2011, 22:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132185">
				<div class="post-metadata">
					<div class="post-num">Post #305</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						2 Apr 2011, 22:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sblanco wrote:</cite><blockquote><div class="quotebox"><cite>pippolippi wrote:</cite><blockquote><p>You could try this uboot:<br /><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv4518PW_brnboot/">http://downloads.openwrt.org/snapshots/ … W_brnboot/</a></p></blockquote></div><p>Don&#039;t you think that i should use this one instead:</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/uboot-lantiq-arv4518PW_ramboot/">http://downloads.openwrt.org/snapshots/ … W_ramboot/</a></p><p>I was going to try that anyway, but thanks :-) If I manage to get something working, I will post it here.</p></blockquote></div><p>Look here:<br /><a href="https://dev.openwrt.org/browser/trunk/package/uboot-lantiq/patches/300-arcadyan.patch">https://dev.openwrt.org/browser/trunk/p … dyan.patch</a></p><p>brnboot is the one configured to run from 0x80002000.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132189">
				<div class="post-metadata">
					<div class="post-num">Post #306</div>
					<div class="post-author">sblanco</div>
					<div class="post-datetime">
						2 Apr 2011, 23:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pippolippi wrote:</cite><blockquote><div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Do you think there are different arv4518 boards out there?</p></blockquote></div><p>I don&#039;t know, but I simply got confused by your mentioning SP700exe: I first though it was the name of another router <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><div class="quotebox"><blockquote><p>By the way, is the uImage the right one generated to flash when using the ramdisk image? Is it ok to flash squashfs or jffs2 instead?</p></blockquote></div><p>Again, I don&#039;t know. The advantage of the ramdisk image is that it doesn&#039;t need anything else to work, so it&#039;s easier to test, the disadvantage, of course, is that all modifications are lost.<br />Maybe your problem is that the snapshot image isn&#039;t good (I think that ngp found some problems with the patches committed to openwrt trunk).</p></blockquote></div><p>Ok, I will try, but I guess there is a reason why arv4518 is not compiled in the snapshot from the trunk compilation, as you mention that ngp reported problems in trunk.</p><div class="quotebox"><blockquote><div class="quotebox"><blockquote><div class="quotebox"><blockquote><p>two days ago I found the serial cable, but it has some damage so i have to solder some wires to a connector for thntil I managee pins. It will take some time until I manage to get it working :-(</p></blockquote></div><p>Ok, remember that the serial port in the router uses 3.3V, so you&#039;ll need either an usb adapter for a phone (those usually are 3.3V too) or you&#039;ll need a max232 to convert the rs232 levels to ttl (otherwise you&#039;ll fry the serial port on the router).</p></blockquote></div></blockquote></div><p>Yes, it has 3,3 V conversion. If i don&#039;t find the pinout, I will ask.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132190">
				<div class="post-metadata">
					<div class="post-num">Post #307</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						2 Apr 2011, 23:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sblanco wrote:</cite><blockquote><p>Ok, I will try, but I guess there is a reason why arv4518 is not compiled in the snapshot from the trunk compilation, as you mention that ngp reported problems in trunk.</p></blockquote></div><p>No, I don&#039;t think that&#039;s the reason: the only snapshots available are for falcon, the new kid on the block,&nbsp; there are no snapshot for the xway (or danube or whatever is called).<br />I don&#039;t think ngp reported any problem, only that he found them, but since my memory isn&#039;t that good anymore I may be wrong on both counts.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132520">
				<div class="post-metadata">
					<div class="post-num">Post #308</div>
					<div class="post-author">victorz</div>
					<div class="post-datetime">
						8 Apr 2011, 12:58					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />I have a adsl router called NetFaster IAD 2 (ARV4518PW2-A) this is the photo from board: <br /><a href="http://img84.imageshack.us/f/img1577l.jpg/">http://img84.imageshack.us/f/img1577l.jpg/</a></p><p>I have succesfully build openwrt from svn and boot router with openwrt via serial connection by following these steps brnboot-&gt;uboot(xmodem)-&gt;uImage(tftp).<br />But after this i used the update_uboot script from uboot shell to flash boot loader with u-boot-bootstrap.bin file, resulting to freezes the router on boot.<br />Now I enabled the UART booting but after sending the u-boot.asc file via ascii upload with minicom the router does not respond.<br />Any suggestions ?</p><p>Thanks in advance !!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132531">
				<div class="post-metadata">
					<div class="post-num">Post #309</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						8 Apr 2011, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>No, sorry, you may try to ping Jokinen since <a href="https://forum.openwrt.org/viewtopic.php?pid=117354#p117354">he managed to boot with u-boot.asc</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132660">
				<div class="post-metadata">
					<div class="post-num">Post #310</div>
					<div class="post-author">Jokinen</div>
					<div class="post-datetime">
						11 Apr 2011, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>Yeah I managed to do that but my box is just collecting dust at the moment since Lantiq builds are causing me some headache.<br />I kinda lost my interest in this unit - mostly cause of the flash layout &amp; that same old jffs2 problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133375">
				<div class="post-metadata">
					<div class="post-num">Post #311</div>
					<div class="post-author">victorz</div>
					<div class="post-datetime">
						18 Apr 2011, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Many thanks @ Jokinen and pippolippi for the&nbsp; help.<br />My problem was the DDR memory settings in board config file and&nbsp; Makefile, of uboot-lantiq package.<br />Now i can&nbsp; boot my router with openwrt from flash memory.<br />Network,Dsl and USB operate all fine but the wifi don&#039;t works.<br />When i run :<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# wifi up
ifconfig: SIOCSIFFLAGS: Cannot assign requested address
ifconfig: SIOCSIFFLAGS: Cannot assign requested address
ifconfig: SIOCSIFFLAGS: Cannot assign requested address
device ath0 entered promiscuous mode
device ath0 left promiscuous mode
device ath0 entered promiscuous mode
device ath0 left promiscuous mode
brctl: bridge br-lan: Invalid argument
brctl: bridge br-lan: File exists
ifconfig: SIOCSIFFLAGS: Cannot assign requested address
device ath0 entered promiscuous mode
device ath0 left promiscuous mode
device ath0 entered promiscuous mode
device ath0 left promiscuous mode
brctl: bridge br-lan: Invalid argument</code></pre></div><p>The wifi chip is Atheros 2417. <br />My startup,wireless config,interfaces have pasted <a href="http://pastebin.com/EHLv6ZKC">here</a><br />I hope not to importune</p><p>Thanks again</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133413">
				<div class="post-metadata">
					<div class="post-num">Post #312</div>
					<div class="post-author">angrybb</div>
					<div class="post-datetime">
						19 Apr 2011, 01:05					</div>
				</div>
				<div class="post-content content">
					<p>Great! What exactly have you changed in those two files? Could you post your .config file?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133491">
				<div class="post-metadata">
					<div class="post-num">Post #313</div>
					<div class="post-author">victorz</div>
					<div class="post-datetime">
						19 Apr 2011, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>I changed the /trunk/package/uboot-lantiq/files/include/configs/arv4518PW.h file in line</p><p>7:#define CONFIG_SYS_MAX_RAM&nbsp; &nbsp; &nbsp; 64*1024*1024&nbsp; <strong>to</strong>&nbsp; #define CONFIG_SYS_MAX_RAM&nbsp; &nbsp; &nbsp; 32*1024*1024<br />8:#define CONFIG_USE_DDR_PSC_64&nbsp; &nbsp;1&nbsp; <strong>to</strong>&nbsp; #define CONFIG_USE_DDR_PSC_32&nbsp; 1<br />9:#define CONFIG_RTL8306_SWITCH&nbsp; &nbsp;1&nbsp; <strong>to</strong>&nbsp; #define CONFIG_AR8216_SWITCH&nbsp; 1</p><p>and the /trunk/package/uboot-lantiq/Makefile in line</p><p>72:DDR_CONFIG_arv4518PW_ramboot:=arcadyan_psc166_64&nbsp; <strong>to</strong>&nbsp; DDR_CONFIG_arv4518PW_ramboot:=arcadyan_psc166_32</p><p>My .config is <a href="http://www.2shared.com/file/7zA4yJ71/config.html">this</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133614">
				<div class="post-metadata">
					<div class="post-num">Post #314</div>
					<div class="post-author">adi65</div>
					<div class="post-datetime">
						20 Apr 2011, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I&#039;m new to this forum. I&#039;ve been reading a lot, but I couldn&#039;t find the jtag schematic for&nbsp; bewan ibox (aka wippies, sfr ibox, tele2 ibox etc. ).<br />Can you post a picture with the jtag pinout or send me an e-mail with it (or a link to it). <br />Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133810">
				<div class="post-metadata">
					<div class="post-num">Post #315</div>
					<div class="post-author">adi65</div>
					<div class="post-datetime">
						22 Apr 2011, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>What program did you use to send u-boot.asc to the router. And what settings?<br />I get an error when I try to use hyper terminal : no response from remote system.<br />I tried to send using zmodem, xmodem and ymodem settings in HyperTerminal.<br />I&#039;m using a serial cable with tx, rx&nbsp; and ground. I can see the boot output of the router and I can send commands to another router (clubinternet ah4222) using this cable.</p><p>Thank you!</p>											<p class="post-edited">(Last edited by <strong>adi65</strong> on 22 Apr 2011, 23:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133816">
				<div class="post-metadata">
					<div class="post-num">Post #316</div>
					<div class="post-author">angrybb</div>
					<div class="post-datetime">
						23 Apr 2011, 03:31					</div>
				</div>
				<div class="post-content content">
					<p>adi65 could you post some info of your device? serial boot log, pictures or info of CPU, switch?<br />I upload my stuff to router via factory web interface.<br />I am still testing openwrt from ram (using brn_boot uboot).<br />I managed to setup LAN and ADSL (PPPoE over ATM). USB seems to work. It recognize Kingston USB flash, but i didn&#039;t mounted it.<br />I have problem accessing serial port after booting openwrt. Minicom is connecting (cutecom too) but only display garbage symbols ?!? Can someone help me with this?<br />Also, i do not know why, but it seems that ModemHWE.bin (danube firmware, should be at /lib/firmware) is not present in my compiled image, although i enabled annex a firmware in menuconfig and file <a href="http://mirror2.openwrt.org/sources/dsl_danube_firmware_adsl_a-02.04.04.00.00.01.tar.gz">http://mirror2.openwrt.org/sources/dsl_ … .01.tar.gz</a> is in dl folder of buildroot. Is this a bug?</p><p>Here is my image, compiled with brn_boot uboot, so it wont mess up factory bootloader and you will be able to reflash it with factory FW (i assume that you have one) from &quot;failsafe&quot; mode (hold reset button for 2-3 sec when turning on the router).</p><p><a href="http://www.mediafire.com/file/3ua2a8djoyz5q2h/arv4518pw_2-a-lf-lic_openwrt_svn.bin">http://www.mediafire.com/file/3ua2a8djo … rt_svn.bin</a></p><p>EDIT: in this image nano is text editor and you have basic x-wrt interface.</p>											<p class="post-edited">(Last edited by <strong>angrybb</strong> on 23 Apr 2011, 03:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133971">
				<div class="post-metadata">
					<div class="post-num">Post #317</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						25 Apr 2011, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>I found a sip client for other infineon boards with the vinetic chipset, I adapted it to the danube, heavily rewrote it to change its featureset and here is the result:</p><p><a href="http://code.google.com/p/danube-voip/">http://code.google.com/p/danube-voip/</a></p><p>Note that on my router the first channel is the one marked &quot;Phone 2&quot; and the second &quot;Phone 1&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134001">
				<div class="post-metadata">
					<div class="post-num">Post #318</div>
					<div class="post-author">adi65</div>
					<div class="post-datetime">
						25 Apr 2011, 22:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>angrybb wrote:</cite><blockquote><p>adi65 could you post some info of your device? serial boot log, pictures or info of CPU, switch?<br />I upload my stuff to router via factory web interface.</p></blockquote></div><p>I have the same board as Jokinen. Mine is branded tele2 bewan ibox. It has an Infineon PSB 50702 E cpu and an Infineon ADM 6996i switch.</p><p>It also has a 16MB flash and 32 MB Ram PSC.</p><p>I don&#039;t have a backup and I&#039;ve already erased brnboot. I&#039;m using an u-boot but I tried so many that I can&#039;t remember where i got it from. I haven&#039;t succeeded in booting openwrt. I tried many versions using bootm from u-boot.</p><p>My u-boot log is the following:</p><p>ROM VER: 1.0.3<br />CFG 01<br />Readü<br />ROM VER: 1.0.3<br />CFG 01<br />Read EEPROMX<br /> X</p><p>U-Boot 2009.11.1 (Nov 19 2010 - 22:46:28)<br />Board: unknown, chip part number 0x12B V1.3, DDR Speed 166 MHz, CPU Speed 333 MHz<br />DRAM:&nbsp; 32 MB<br />Flash: 16 MB<br />*** Warning - bad CRC, using default environment</p><p>Net:&nbsp; &nbsp;lq_cpe_eth</p><p>Type &quot;run flash_nfs&quot; to mount root filesystem over NFS</p><p>Hit any key to stop autoboot:&nbsp; 0</p><p>I don&#039;t have any programming knowledge so I can&#039;t be of too much help.</p><p>I installed uboot using u-boot.asc that i got from Jokinen.</p><p>I loaded the image you posted but it doesn&#039;t boot.</p>											<p class="post-edited">(Last edited by <strong>adi65</strong> on 15 Jul 2011, 06:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134034">
				<div class="post-metadata">
					<div class="post-num">Post #319</div>
					<div class="post-author">Snakus</div>
					<div class="post-datetime">
						26 Apr 2011, 09:21					</div>
				</div>
				<div class="post-content content">
					<p>Netgear DGN3500 based on Lantiq (infeneon) XWAY 168 (PSB 50810)<br />Netgear firmware is using kernel 2.6.20 and ADSL driver v.4.4.4</p><p>Can we expect OpenWRT support for this good hardware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134078">
				<div class="post-metadata">
					<div class="post-num">Post #320</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						26 Apr 2011, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Lantiq xway: it should work<br />switch rtl8366: I don&#039;t know<br />wifi ar9223: works like shit and only with some pending patches.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134270">
				<div class="post-metadata">
					<div class="post-num">Post #321</div>
					<div class="post-author">seuros</div>
					<div class="post-datetime">
						28 Apr 2011, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>Is the I/O port of the Danube, 5Volt Tolerant ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134397">
				<div class="post-metadata">
					<div class="post-num">Post #322</div>
					<div class="post-author">jjb_wii</div>
					<div class="post-datetime">
						1 May 2011, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have been following all your post and tips three or four months. Thanks to all of you who have contributed to this project (pippolippi, sblanco, ngp, jokinen and Co.).</p><p>Now, I&#039;m trying to run the openwrt from memory (uboot on &quot;0x80002000&quot; and openwrt kernel on &quot;0x80500000&quot; )</p><p>I have a 7518pw yacom router. I have succesfully build openwrt from svn lantiq target (with this options: 64Mb ram - 8Mb Flash - xway - 4518 image - 7518 kernel - CONFIG_AR8216_SWITCH 1 (thanks victorz)&nbsp; ) and u-boot runs ok, below the bootlog and printenv.</p><p> </p><div class="codebox"><pre><code>ROM VER: 1.0.3
CFG 01
Readà
ROM VER: 1.0.3
CFG 01
Read EEPROMX
 X



=======================================================================
Wireless ADSL Gateway DANUBE Loader v1.04.00 build Feb 26 2010 20:49:17
                    Arcadyan Technology Corporation
=======================================================================
MXIC MX29LV640BB bottom boot 16-bit mode found

Copying boot params.....DONE

RESET_BTN was pressed... 1

Press Space Bar 3 times to enter command mode ...123
Yes, Enter command mode ...


[DANUBE Boot]:!

Enter Administrator Mode !

======================
 [#] Set Serial Number
 [2] Use Normal Firmware
 [3] Use ART-Testing Firmware
 [9] Taggle ART Firmware Enable/Disable
 [A] Set MAC Address
 [E] Erase Flash
 [G] Run Runtime Code
 [h] Set Options
 [M] Upload to Memory
 [P] Print Boot Params
 [R] Read from Memory
 [T] Memory Test
 [u] Upload to Flash
 [V] Set Board Version
 [W] Write to Memory
 [Y] Go to Memory
 [Z] Dump DDR Ram Register
 [0] Primary = Image 0
 [1] Primary = Image 1
======================

[DANUBE Boot]:m

RAM upload destination: (default:0x80002000) : 0x
Starting XModem download...(press Enter to abort)
CCCCCC

XModem download Done.
Do you want to execute the uploaded code? (Y/n)

[DANUBE Boot]:

======================
 [#] Set Serial Number
 [2] Use Normal Firmware
 [3] Use ART-Testing Firmware
 [9] Taggle ART Firmware Enable/Disable
 [A] Set MAC Address
 [E] Erase Flash
 [G] Run Runtime Code
 [h] Set Options
 [M] Upload to Memory
 [P] Print Boot Params
 [R] Read from Memory
 [T] Memory Test
 [u] Upload to Flash
 [V] Set Board Version
 [W] Write to Memory
 [Y] Go to Memory
 [Z] Dump DDR Ram Register
 [0] Primary = Image 0
 [1] Primary = Image 1
======================

[DANUBE Boot]:m

RAM upload destination: (default:0x80002000) : 0x
Starting XModem download...(press Enter to abort)
CCCCCCCCC

XModem download Done.
Do you want to execute the uploaded code? (Y/n)

[DANUBE Boot]:Y

Go to Memory Address: (default:0x80002000) : 0x
Jump to address 0x80002000 ...


U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Board: ARV4518PW
SoC: Danube/Twinpass/Vinax-VE V1.5, DDR Speed 166 MHz, CPU Speed 333 MHz
DRAM:  64 MB
Flash:  8 MB
*** Warning - bad CRC, using default environment

Net:   initializing ar8216 switch... initialized
lq_cpe_eth
Hit any key to stop autoboot:  0
ARV4518 =&gt; help
?       - alias for &#039;help&#039;
base    - print or set address offset
bootm   - boot application image from memory
bootp   - boot image via network using BOOTP/TFTP protocol
cmp     - memory compare
cp      - memory copy
crc32   - checksum calculation
erase   - erase FLASH memory
flinfo  - print FLASH memory information
go      - start application at address &#039;addr&#039;
help    - print command description/usage
httpd   - httpd - start webserver
iminfo  - print header information for application image
loop    - infinite loop on address range
md      - memory display
mm      - memory modify (auto-incrementing address)
mtest   - simple RAM read/write test
mw      - memory write (fill)
nm      - memory modify (constant address)
printenv- print environment variables
protect - enable or disable FLASH write protection
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
setenv  - set environment variables
tftpboot- boot image via network using TFTP protocol
version - print monitor version
ARV4518 =&gt; printenv
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt;

------------------------------------------
------------------------------------------

U-Boot 2010.03 (Apr 27 2011 - 21:39:25)
ARV4518 =&gt; flinfo

Bank # 1: CFI conformant FLASH (16 x 16)  Size: 8 MB in 135 Sectors
  AMD Standard command set, Manufacturer ID: 0xC2, Device ID: 0x22CB
  Erase timeout: 16384 ms, write timeout: 1 ms

  Sector Start Addresses:
  B0000000        B0002000        B0004000        B0006000        B0008000

  B000A000        B000C000        B000E000        B0010000   RO   B0020000

  B0030000        B0040000        B0050000        B0060000        B0070000

  B0080000        B0090000        B00A0000        B00B0000        B00C0000

  B00D0000        B00E0000        B00F0000        B0100000        B0110000

  B0120000        B0130000        B0140000        B0150000        B0160000

  B0170000        B0180000        B0190000        B01A0000        B01B0000

  B01C0000        B01D0000        B01E0000        B01F0000        B0200000

  B0210000        B0220000        B0230000        B0240000        B0250000

  B0260000        B0270000        B0280000        B0290000        B02A0000

  B02B0000        B02C0000        B02D0000        B02E0000        B02F0000

  B0300000        B0310000        B0320000        B0330000        B0340000

  B0350000        B0360000        B0370000        B0380000        B0390000

  B03A0000        B03B0000        B03C0000        B03D0000        B03E0000

  B03F0000        B0400000        B0410000        B0420000        B0430000

  B0440000        B0450000        B0460000        B0470000        B0480000

  B0490000        B04A0000        B04B0000        B04C0000        B04D0000

  B04E0000        B04F0000        B0500000        B0510000        B0520000

  B0530000        B0540000        B0550000        B0560000        B0570000

  B0580000        B0590000        B05A0000        B05B0000        B05C0000

  B05D0000        B05E0000        B05F0000        B0600000        B0610000

  B0620000        B0630000        B0640000        B0650000        B0660000

  B0670000        B0680000        B0690000        B06A0000        B06B0000

  B06C0000        B06D0000        B06E0000        B06F0000        B0700000

  B0710000        B0720000        B0730000        B0740000        B0750000

  B0760000        B0770000        B0780000        B0790000        B07A0000

  B07B0000        B07C0000        B07D0000        B07E0000        B07F0000


UPLOAD Flash

---------------------------------------

    Area            Address      Length 

---------------------------------------

[0] Boot            0xB0000000     128K

[1] Configuration   0xB0020000     256K

[2] None            0xB0060000      64K

[3] Special Area    0xB0070000      64K

[4] Primary Setting 0xB0080000      64K

[5] Code Image 0    0xB0090000    3776K

[6] Code Image 1    0xB0440000    3776K

[7] Boot Params     0xB07F0000      64K

[8] Flash Image     0xB0000000    8192K

---------------------------------------

ARV4518 =&gt;</code></pre></div><p>Related to the ethernet 8216, I think, it works (when I start httpd or tftp it responds to ping) but when I try to upload tftp.....I have not success...&nbsp; perhaps is my windows 7 laptop firewall or the tftpd32 server...I am investigating on this...</p><br /><p>Because of this, I am trying to upload the openwrt-lantiq-xway-ARV7518PW-uImage or openwrt-lantiq-xway-ARV7518PW-squashfs.image&nbsp; with JTAG.&nbsp; but I get a kernel panic..... </p><p>can anybody help me ?&nbsp; I think, it should be easy but I don&#039;t know enough of my router. </p><p> </p><div class="codebox"><pre><code>ARV4518 =&gt; bootm 0x80500000
## Booting kernel from Legacy Image at 80500000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.37.6
   Created:      2011-04-27  19:40:31 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    893107 Bytes = 872.2 kB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

Linux version 2.6.37.6 (jose@pandiel) (gcc version 4.5.2 (Linaro GCC 4.5-2011.02
-0) ) #3 Wed Apr 27 21:40:25 CEST 2011
cpu: 333333334
fpi: 83333333
io: 83250000
SoC: Danube rev1.5 333Mhz
bootconsole [early0] enabled
CPU revision is: 00019641 (MIPS 24Kc)
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: console=ttyS1,115200 rootfstype=squashfs,jffs2 machtype=ARV
7518PW
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 16kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=00076db8
Readback ErrCtl register=00076db8
Memory: 62196k/65536k available (2104k kernel code, 3340k reserved, 347k data, 1
52k init, 0k highmem)
NR_IRQS:256
Calibrating delay loop... 221.69 BogoMIPS (lpj=443392)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is ARV7518PW - ASTORIA
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
pci 0000:00:0e.0: BAR 0: set to [mem 0x18000000-0x1800ffff] (PCI address [0x1800
0000-0x1800ffff])
arch/mips/pci/pci-lantiq.c:pcibios_map_irq[263]14 1
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
gptu: totally 6 16-bit timers/counters
gptu: misc_register on minor 63
gptu: succeeded to request irq 126
gptu: succeeded to request irq 127
gptu: succeeded to request irq 128
gptu: succeeded to request irq 129
gptu: succeeded to request irq 130
gptu: succeeded to request irq 131
squashfs: version 4.0 (2009/01/31) Phillip Lougher
JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006
 Red Hat, Inc.
msgmni has been set to 121
io scheduler noop registered
io scheduler deadline registered (default)
lq_asc.0: ttyS0 at MMIO 0x1e100400 (irq = 104) is a lq_asc
lq_asc.1: ttyS1 at MMIO 0x1e100c00 (irq = 112) is a lq_asc
console [ttyS1] enabled, bootconsole disabled
console [ttyS1] enabled, bootconsole disabled
lq_nor: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip
 ID 0x0022cb
Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.1.
number of CFI chips: 1
Creating 4 MTD partitions on &quot;lq_nor&quot;:
0x000000000000-0x000000010000 : &quot;uboot&quot;
0x000000010000-0x000000020000 : &quot;uboot_env&quot;
0x000000020000-0x0000007f0000 : &quot;linux&quot;
no uImage found in linux partition
Can&#039;t split linux partition
0x0000007f0000-0x000000800000 : &quot;board_config&quot;
eth0: using mac=88:25:2C:B2:2C:8E
lq_mii: probed
eth0: AR8216 switch driver attached.
eth0: attached PHY driver [Atheros AR8216/AR8316] (mii_bus:phy_addr=0:00, irq=-1
)
lq_etop: driver loaded!
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0)
Please append a correct &quot;root=&quot; boot option; here are the available partitions:
1f00              64 mtdblock0  (driver?)
1f01              64 mtdblock1  (driver?)
1f02            8000 mtdblock2  (driver?)
1f03              64 mtdblock3  (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div>											<p class="post-edited">(Last edited by <strong>jjb_wii</strong> on 1 May 2011, 22:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134415">
				<div class="post-metadata">
					<div class="post-num">Post #323</div>
					<div class="post-author">Delboy</div>
					<div class="post-datetime">
						2 May 2011, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>@jjb_wii </p><p>You need to use openwrt-lantiq-xway-ARV7518PW-squashfs.image and flash it, because linux partition is read from flash.</p><br /><p>Does anyone know how that lq_register_gpio_ebu address is found?<br />I&#039;m trying to enable USB on one router (<a href="http://wiki.openwrt.org/toh/gigaset/sx76x">http://wiki.openwrt.org/toh/gigaset/sx76x</a>) and it worked on old ifxmips target, but now i cannot get power to it.<br />I powered it up using this code on old target:<br /></p><div class="codebox"><pre><code>ifxmips_w32(0x8b87, IFXMIPS_GPIO_P1_ALTSEL0);
ifxmips_w32(0x400, IFXMIPS_GPIO_P1_ALTSEL1);
ifxmips_w32(0xf3fc, IFXMIPS_GPIO_P1_OD);
ifxmips_w32(0xfb3e, IFXMIPS_GPIO_P1_DIR);
ifxmips_w32(0x850, IFXMIPS_GPIO_P1_PUDSEL);
ifxmips_w32(ifxmips_r32(IFXMIPS_GPIO_P1_OUT) | (1&lt;&lt;13), IFXMIPS_GPIO_P1_OUT);</code></pre></div><p>changed that in ifxmips_usb_vbus_enable at devices.c</p>											<p class="post-edited">(Last edited by <strong>Delboy</strong> on 2 May 2011, 00:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134430">
				<div class="post-metadata">
					<div class="post-num">Post #324</div>
					<div class="post-author">jjb_wii</div>
					<div class="post-datetime">
						2 May 2011, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>@Delboy </p><p>Thanks for the information. Writing to flash is the last step.</p><p>Finally, Openwrt is working on memory <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><p>I compiled with &quot;ramdisk&quot; option. Using the new generated uboot and openwrt-lantiq-xway-ARV7518PW-uImage, it works!!!!! perhaps the problem was that I was using the uboot without &quot;ramdisk&quot; option or that I uploaded the uImage with other name or that now I uploaded the file with tftp...I don&#039;t know exacty.</p><p>Related to the tftp, it works with firewall and Windows defender deactivated on my windows tftpd32 server.&nbsp; I build with linux(lenny) and play with usb to serial RS232 TTL device (PL2303_Prolific driver and Hyperterminal tool) on windows 7.</p><div class="codebox"><pre><code>crc32   - checksum calculation
erase   - erase FLASH memory
flinfo  - print FLASH memory information
go      - start application at address &#039;addr&#039;
help    - print command description/usage
httpd   - httpd - start webserver
iminfo  - print header information for application image
loop    - infinite loop on address range
md      - memory display
mm      - memory modify (auto-incrementing address)
mtest   - simple RAM read/write test
mw      - memory write (fill)
nm      - memory modify (constant address)
printenv- print environment variables
protect - enable or disable FLASH write protection
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
setenv  - set environment variables
tftpboot- boot image via network using TFTP protocol
version - print monitor version
ARV4518 =&gt; printenv
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv ${bootargs}
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv bootargs
## Error: &quot;bootargs&quot; not defined
ARV4518 =&gt; printenv ${bootargs};
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; ${bootargs}
ARV4518 =&gt; printenv
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; ?
?       - alias for &#039;help&#039;
base    - print or set address offset
bootm   - boot application image from memory
bootp   - boot image via network using BOOTP/TFTP protocol
cmp     - memory compare
cp      - memory copy
crc32   - checksum calculation
erase   - erase FLASH memory
flinfo  - print FLASH memory information
go      - start application at address &#039;addr&#039;
help    - print command description/usage
httpd   - httpd - start webserver
iminfo  - print header information for application image
loop    - infinite loop on address range
md      - memory display
mm      - memory modify (auto-incrementing address)
mtest   - simple RAM read/write test
mw      - memory write (fill)
nm      - memory modify (constant address)
printenv- print environment variables
protect - enable or disable FLASH write protection
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
setenv  - set environment variables
tftpboot- boot image via network using TFTP protocol
version - print monitor version
ARV4518 =&gt; printenv
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv ${tftppath}
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv ${tftppath}
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv stdin
stdin=serial
ARV4518 =&gt; printenv bootargs
## Error: &quot;bootargs&quot; not defined
ARV4518 =&gt; printenv ${ram_addr}
## Error: &quot;0x80500000&quot; not defined
ARV4518 =&gt; printenv ${tftppath}
bootcmd=run flash_flash
bootdelay=2
baudrate=115200
loads_echo=
ipaddr=192.168.1.1
serverip=192.168.1.101
rootpath=&quot;/export&quot;
gatewayip=192.168.1.254
netmask=255.255.255.0
ram_addr=0x80500000
kernel_addr=0xb0020000
flashargs=setenv bootargs rootfstype=squashfs,jffs2
nfsargs=setenv bootargs root=/dev/nfs rw nfsroot=${serverip}:${rootpath}
addip=setenv bootargs ${bootargs} ip=${ipaddr}:${serverip}:${gatewayip}:${netmas
k}:${hostname}:${netdev}:off
addmisc=setenv bootargs ${bootargs} init=/etc/preinit console=ttyS1,115200 ethad
dr=${ethaddr} ${mtdparts}
flash_flash=run flashargs addip addmisc;bootm ${kernel_addr}
flash_nfs=run nfsargs addip addmisc;bootm ${kernel_addr}
net_flash=run load_kernel flashargs addip addmisc;bootm ${ram_addr}
net_nfs=run load_kernel nfsargs addip addmisc;bootm ${ram_addr}
load_kernel=tftp ${ram_addr} ${tftppath}openwrt-ifxmips-uImage
update_uboot=tftp 0x80500000 ${tftppath}u-boot-ARV4518PW.bin;era 0xb0000000 +${f
ilesize};cp.b 0x80500000 0xb0000000 ${filesize}
update_openwrt=tftp ${ram_addr} ${tftppath}ARV4518PW-squashfs.image;era ${kernel
_addr} +${filesize};cp.b ${ram_addr} ${kernel_addr} ${filesize}
stdin=serial
stdout=serial
stderr=serial
ethaddr=73:8f:e6:46:7a:b0
ethact=lq_cpe_eth
ver=U-Boot 2010.03 (Apr 27 2011 - 21:39:25)

Environment size: 1269/65532 bytes
ARV4518 =&gt; printenv ${kernel_addr}
## Error: &quot;0xb0020000&quot; not defined
ARV4518 =&gt; tftpboot 0x80500000 openwrt-lantiq-xway-ARV7518PW-uImage
Using lq_cpe_eth device
TFTP from server 192.168.1.101; our IP address is 192.168.1.1
Filename &#039;openwrt-lantiq-xway-ARV7518PW-uImage&#039;.
Load address: 0x80500000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #############################################################
done
Bytes transferred = 2305571 (232e23 hex)
ARV4518 =&gt; bootm 0x80500000
## Booting kernel from Legacy Image at 80500000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.37.6
   Created:      2011-05-01  20:59:02 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    2305507 Bytes =  2.2 MB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

Linux version 2.6.37.6 (jose@pandiel) (gcc version 4.5.2 (Linaro GCC 4.5-2011.02
-0) ) #7 Sun May 1 22:58:51 CEST 2011
cpu: 333333334
fpi: 83333333
io: 83250000
SoC: Danube rev1.5 333Mhz
bootconsole [early0] enabled
CPU revision is: 00019641 (MIPS 24Kc)
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: console=ttyS1,115200 rootfstype=squashfs,jffs2 machtype=ARV
7518PW
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 16kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=00010498
Readback ErrCtl register=00010498
Memory: 57560k/65536k available (2104k kernel code, 7976k reserved, 347k data, 4
788k init, 0k highmem)
NR_IRQS:256
Calibrating delay loop... 221.69 BogoMIPS (lpj=443392)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is ARV7518PW - ASTORIA
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
pci 0000:00:0e.0: BAR 0: set to [mem 0x18000000-0x1800ffff] (PCI address [0x1800
0000-0x1800ffff])
arch/mips/pci/pci-lantiq.c:pcibios_map_irq[263]14 1
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
gptu: totally 6 16-bit timers/counters
gptu: misc_register on minor 63
gptu: succeeded to request irq 126
gptu: succeeded to request irq 127
gptu: succeeded to request irq 128
gptu: succeeded to request irq 129
gptu: succeeded to request irq 130
gptu: succeeded to request irq 131
squashfs: version 4.0 (2009/01/31) Phillip Lougher
JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006
 Red Hat, Inc.
msgmni has been set to 112
io scheduler noop registered
io scheduler deadline registered (default)
lq_asc.0: ttyS0 at MMIO 0x1e100400 (irq = 104) is a lq_asc
lq_asc.1: ttyS1 at MMIO 0x1e100c00 (irq = 112) is a lq_asc
console [ttyS1] enabled, bootconsole disabled
console [ttyS1] enabled, bootconsole disabled
lq_nor: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip
 ID 0x0022cb
Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.1.
number of CFI chips: 1
Creating 4 MTD partitions on &quot;lq_nor&quot;:
0x000000000000-0x000000010000 : &quot;uboot&quot;
0x000000010000-0x000000020000 : &quot;uboot_env&quot;
0x000000020000-0x0000007f0000 : &quot;linux&quot;
no uImage found in linux partition
Can&#039;t split linux partition
0x0000007f0000-0x000000800000 : &quot;board_config&quot;
eth0: using mac=88:25:2C:B2:2C:8E
lq_mii: probed
eth0: AR8216 switch driver attached.
eth0: attached PHY driver [Atheros AR8216/AR8316] (mii_bus:phy_addr=0:00, irq=-1
)
lq_etop: driver loaded!
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 4788k freed
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
- init -

Please press Enter to activate this console. device eth0 entered promiscuous mod
e
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering forwarding state
Compat-wireless backport release: compat-wireless-2011-04-14
Backport based on wireless-testing.git master-2011-04-19
cfg80211: Calling CRDA to update world regulatory domain
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 8
NET: Registered protocol family 20
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
cfg80211: World regulatory domain updated:
cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (974 buckets, 3896 max)
IFX MEI Version 5.00.00

Infineon CPE API Driver version: DSL CPE API V3.24.4.4
Infineon Technologies ATM driver version 1.0.8
Infineon Technologies ATM (A1) firmware version 0.1
ifxmips_atm: ATM init succeed
dwc_otg: version 2.60a 22-NOV-2006
DWC_otg: Using DMA mode
dwc_otg dwc_otg.0: DWC OTG Controller
dwc_otg dwc_otg.0: new USB bus registered, assigned bus number 1
dwc_otg dwc_otg.0: irq 62, io mem 0xffffffffbe101000
DWC_otg: Init: Port Power? op_state=1
DWC_otg: Init: Power Port (0)
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
DISCONNECTED PORT



BusyBox v1.18.4 (2011-04-26 23:15:18 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 ATTITUDE ADJUSTMENT (bleeding edge, r26764) ----------
  * 1/4 oz Vodka      Pour all ingredents into mixing
  * 1/4 oz Gin        tin with ice, strain into glass.
  * 1/4 oz Amaretto
  * 1/4 oz Triple sec
  * 1/4 oz Peach schnapps
  * 1/4 oz Sour mix
  * 1 splash Cranberry juice
 -----------------------------------------------------
root@OpenWrt:/#</code></pre></div><p>My next step is to do a flash backup. I will try to mount the mtd blocks (menuconfig flag) and use my usb external disk to storage the flash backup. I am searching the flash blocks inside &#039;/dev&#039; directory but I only see mtd0, mtd1, mtd2, mtd3, mtd3ro... and mtdblock0, mtdblock1, mtdblock2, mtdblock3.&nbsp; I think this blocks they should be related to flash blocks ,see below:</p><div class="codebox"><pre><code>UPLOAD Flash

---------------------------------------

    Area            Address      Length 

---------------------------------------

[0] Boot            0xB0000000     128K

[1] Configuration   0xB0020000     256K

[2] None            0xB0060000      64K

[3] Special Area    0xB0070000      64K

[4] Primary Setting 0xB0080000      64K

[5] Code Image 0    0xB0090000    3776K

[6] Code Image 1    0xB0440000    3776K

[7] Boot Params     0xB07F0000      64K

[8] Flash Image     0xB0000000    8192K

---------------------------------------</code></pre></div>											<p class="post-edited">(Last edited by <strong>jjb_wii</strong> on 2 May 2011, 19:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134437">
				<div class="post-metadata">
					<div class="post-num">Post #325</div>
					<div class="post-author">pippolippi</div>
					<div class="post-datetime">
						2 May 2011, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>@jjb_wii, I have a quick&#039;n&#039;dirty program to backup the flash using brnboot, if you&#039;re interested I can post it somewhere. I have a full backup already, but probably the last section, where the calibration data and the mac resides, will be different. I&#039;d be interested in comparing them though.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 13 of 40</div><nav><ul><li><a href="viewtopic.php%3Fid=15934&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=15.html">15</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=40.html">40</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>