<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze 8.09 and WDS</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p82418">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">clews</div>
					<div class="post-datetime">
						23 Feb 2009, 02:36					</div>
				</div>
				<div class="post-content content">
					<p>I had two WRT54GL with WhiteRussian and a working WDS config... I tried an update to the latest Kamikaze (with 2.4 kernel) but I do not get WDS to work...</p><p>Tried the LuCI to configure the WDS as well as some manual configurations... Got through almost every forum post I could find, tried almost every configuration.. No luck....</p><p>Her is (one of the many) config(s i&#039;ve tried out):</p><p>Router1</p><p>config &#039;wifi-device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;type&#039; &#039;broadcom&#039;<br />&nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;ssid&#039; &#039;MYSSID&#039;<br />&nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; option &#039;key&#039; &#039;mypsk2key&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;mode&#039; &#039;wds&#039;<br />&nbsp; &nbsp; option &#039;bssid&#039; &#039;00:18:39:xx:xx:xx&#039;<br />&nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p><br /><br /><p>----------------------------------------------<br />Router2</p><p>config &#039;wifi-device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;type&#039; &#039;broadcom&#039;<br />&nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;ssid&#039; &#039;MYSSID&#039;<br />&nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; option &#039;key&#039; &#039;mypsk2key&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;wl0&#039;<br />&nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;mode&#039; &#039;wds&#039;<br />&nbsp; &nbsp; option &#039;bssid&#039; &#039;00:18:39:xx:xx:xx&#039;<br />&nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;</p><p>--------------------------------<br />bssid is respectively wl0-MAC of other router </p><p>I&#039;ve also tried with same ssid (for ap and wds-config), as it worked this way on WhiteRussian. And with MYSSIDWDS as SSID....</p><p>No luck.... No packets through the wds0.1 interface (which is up on both)</p><p>Has anyone a working WDS config on 2 WRT54GL?</p><p>I do not want to get back to white russian ;-)</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83068">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">slack---line</div>
					<div class="post-datetime">
						3 Mar 2009, 00:13					</div>
				</div>
				<div class="post-content content">
					<p>I have a similar problem.&nbsp; My two routers are WRT54G (v1.1 and 2.0), although one of my routers is running HyperWRT-2.1b1+thibor-15c.&nbsp; This has a WebUI option to run the router as an Access Point + WDS.&nbsp; The other is running OpenWRT Kamikazee (r14113) and I can&#039;t find any option to set the router as WDS under the default WebUi LuCI.</p><p>Was going to try as suggested in <a href="http://forum.openwrt.org/viewtopic.php?id=10514">this thread</a> but it doesn&#039;t sound as though it will work based on the above?</p>											<p class="post-edited">(Last edited by <strong>slack---line</strong> on 3 Mar 2009, 00:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83072">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						3 Mar 2009, 02:05					</div>
				</div>
				<div class="post-content content">
					<p>It should be in Administration -&gt; Network -&gt; Wireless -&gt; wl0&nbsp; Mode: WDS<br />Keep in mind that this only works for brcm-2.4 when you&#039;re on Broadcom hardware.</p>											<p class="post-edited">(Last edited by <strong>jow</strong> on 3 Mar 2009, 02:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83122">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">slack---line</div>
					<div class="post-datetime">
						3 Mar 2009, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Hmm I only have the following listed under Administration -&gt; Network -&gt; WiFfi (Wireless) -&gt; wl0...</p><p>Access Point<br />Ad-Hoc<br />Client<br />Psuedo Ad-hoc (ahdemo)<br />Monitor</p><p>This is on Kamikaze (8.09 r14127) so thats running a 2.6.25.17 and I&#039;ve therefore no hope?</p><p>Sounds as though I need to drop&nbsp; back to White Russian to get WDS working properly, but I&#039;m not sure what you mean by brcm-2.4?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83167">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">placebo</div>
					<div class="post-datetime">
						4 Mar 2009, 00:34					</div>
				</div>
				<div class="post-content content">
					<p>For Broadcom-based platforms, you can run Kamikaze with the 2.4 kernel or the 2.6 kernel. The proprietary Broadcom drivers only work with 2.4. The open-source wireless driver works with 2.6, but it doesn&#039;t support WDS yet. So if you want WDS right now, you need to go with the 2.4 variant of Kamikaze, the one labeled brcm-2.4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83751">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">cedrix</div>
					<div class="post-datetime">
						12 Mar 2009, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>I thought WDS is possible in the latest open-source driver? How long might it take and what might be the problem to put WDS into Kamikaze 8.09 (2.6 kernel) ?</p><p>Regards,<br />Ced</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90983">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Jim@JHUAPL</div>
					<div class="post-datetime">
						7 Jul 2009, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>I know this thread is a couple of months old... so I dunno if there&#039;s another thread that contains what I&#039;m about to post... but I was struggling with WDS when I figured out a way to set up a node as an &quot;AP&quot; operating in WDS mode without using two separate SSID&#039;s.&nbsp; I am using two ADI Pronghorn Metro router boards (atheros chipset) with one mini-pci radio in each.<br />Here is the code for the first router acting as an AP:<br /></p><div class="codebox"><pre><code>root@MERC_AP:/etc/config# cat wireless

config &#039;wifi-device&#039; &#039;wifi0&#039;
        option &#039;type&#039; &#039;atheros&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;channel&#039; &#039;6&#039;
        option &#039;diversity&#039; &#039;0&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wifi0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;encryption&#039; &#039;none&#039;
        option &#039;ssid&#039; &#039;21S365&#039;
        option &#039;wds&#039; &#039;1&#039;
        option &#039;bssid&#039; &#039;00:15:6D:XX:XX:XX&#039;</code></pre></div><p>And here is the wireless config code for the second router acting as the client:<br /></p><div class="codebox"><pre><code>root@MERC_Client:/etc/config# cat wireless

config &#039;wifi-device&#039; &#039;wifi0&#039;
        option &#039;type&#039; &#039;atheros&#039;
        option &#039;diversity&#039; &#039;0&#039;
        option &#039;channel&#039; &#039;6&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wifi0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;ssid&#039; &#039;21S365&#039;
        option &#039;encryption&#039; &#039;none&#039;
        option &#039;wds&#039; &#039;1&#039;
        option &#039;bssid&#039; &#039;00:15:6D:XX:XX:XX&#039;</code></pre></div><p>Note that both are set to AP mode, but there is an option called &quot;WDS&quot; that is enabled using &quot;1&quot;.&nbsp; This is instead of setting up two separate interfaces, one in AP mode and the other in WDS mode on each device.&nbsp; The BSSID is the MAC address of the other router you would like to connect to.</p><p>At this point, it seems like this solution will only work if you want to wirelessly connect no more than two devices, but I hope this helps.</p>											<p class="post-edited">(Last edited by <strong>Jim@JHUAPL</strong> on 7 Jul 2009, 18:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115041">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">RichardLeNoir</div>
					<div class="post-datetime">
						12 Aug 2010, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi Clews<br />Did you manage to resolve your problem or did you go back to with russian ? </p><p>Richard</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115042">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Aug 2010, 13:46					</div>
				</div>
				<div class="post-content content">
					<p>The configuration Clews used is not valid for atheros. The AP-to-AP WDS with BSSIDs is only used on Broadcom proprietary.<br />Corrected configuration below.</p><div class="codebox"><pre><code>root@MERC_AP:/etc/config# cat wireless

config &#039;wifi-device&#039; &#039;wifi0&#039;
        option &#039;type&#039; &#039;atheros&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;channel&#039; &#039;6&#039;
        option &#039;diversity&#039; &#039;0&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wifi0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;encryption&#039; &#039;none&#039;
        option &#039;ssid&#039; &#039;21S365&#039;
        option &#039;wds&#039; &#039;1&#039;</code></pre></div><div class="codebox"><pre><code>root@MERC_Client:/etc/config# cat wireless

config &#039;wifi-device&#039; &#039;wifi0&#039;
        option &#039;type&#039; &#039;atheros&#039;
        option &#039;diversity&#039; &#039;0&#039;
        option &#039;channel&#039; &#039;6&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wifi0&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;mode&#039; &#039;sta&#039;
        option &#039;ssid&#039; &#039;21S365&#039;
        option &#039;encryption&#039; &#039;none&#039;
        option &#039;wds&#039; &#039;1&#039;</code></pre></div><p>BSSID is not needed and one of both peers must be in Station mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115043">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">RichardLeNoir</div>
					<div class="post-datetime">
						12 Aug 2010, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>Ok thank you for the response but the it seems that Clew had a config with Broadcom, no ?&nbsp; <br />It&#039;s&nbsp; Jim@JHUAPL who used atheros... </p><p>In fact my question is : <br />In the first post of Clews was the configuration ok correct for Braodcom ( despite the 2.6 kernel problem) ?&nbsp; </p><p>Thx<br />Richard</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115044">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Aug 2010, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>Oops, you&#039;re right.</p><p>Jim@JHUAPL had atheros and an invalid config. <br />The config by Clew is almost correct, but the WDS ifaces _must have_ the same crypto settings as the AP. So he&#039;d need to add <br /></p><div class="codebox"><pre><code>    option &#039;encryption&#039; &#039;psk2&#039;
    option &#039;key&#039; &#039;mypsk2key&#039;</code></pre></div><p>To both WDS wifi-iface sections.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115045">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Aug 2010, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>Some more clarification:<br />Clews&#039; config is only applicable to brcm-2.4. The one from Jim@JHUAPL would be the one to use for Kernel 2.6, egardless of the wifi driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115046">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">RichardLeNoir</div>
					<div class="post-datetime">
						12 Aug 2010, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>So I wil try to enable the WDS on my two WRT54GL...</p><p>Hope it will works !<br />Thx for responding.<br />Richard</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>