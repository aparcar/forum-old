<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DCS-930/932 IP Camera</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 19 Apr 2018 and 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=49212&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49212&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=49212&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p342476">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">nathan_vanan</div>
					<div class="post-datetime">
						29 Oct 2016, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>I would appreciate if anyone confirm that a DCS930L-A1 or DCS932L-A1 can work with openwrt. <br />Also, if they ever succeeded with serial console on these devices.....thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348033">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">mike402</div>
					<div class="post-datetime">
						30 Dec 2016, 08:31					</div>
				</div>
				<div class="post-content content">
					<p>I have a DCS932L H/W version B1. I followed @veti&#039;s instructions, and it works fine. However I built my image with DHCP/DNS and without Luci. Again, it doesn&#039;t leave much JFFS space. For this particular model, the serial port is easy, no soldering involved. I crammed some jumper wires into the holes. I had to make sure nothing bumped the board while interfacing, but it was enough to tftp the sysupgrade-image. The Chaos Calmer sysupgrade file listed in the tech data page works also (via tftp). I tried the emergency web page upload with no success. <br />The light sensor daemon works too. Again, followed @veti&#039;s instructions and changed the buf[0] != code, then compiled with the mipsel-gcc compiler found in the ramips/rt305x SDK.</p><p>I&#039;m on the fence about this cam... deciding whether to buy more. I found mine at a thrift store, but online they are under $40US. I think it has a lot of potential even though it lacks resources. If someone wanted to buy a RaspberryPi with IR camera, wifi, SD card, and power supply, JUST so they can build a net camera to monitor a location, it would could cost well over $50US. I&#039;d tell them to get one of these instead. These things run on 5Volts. I measured mine and it only drew about 300mA while running mjpg-streamer and 1 client connected. You can power these things with those USB cell phone charging battery packs that they sell in every other gas station nowadays. The cheap lipstick sized ones are usually ~2000mAh. That would power this thing for over 4 hours. Then add an Arduino with senors to the ethernet port, and you&#039;ve got a decent portable environment monitoring device. Arduino nano clones run about $5US now, and their ethernet shields can be found for about $5US also. This camera looks easy to weather proof too. I want to buy more, but most sites don&#039;t indicate if their DCS932L is a B1 or A1. Has anyone had success on the A1 version yet? <br />I noticed snd-usb-audio show up in the logs. I&#039;m assuming there is a way to activate the microphone. Any success?? I plan to play with it this weekend.</p>											<p class="post-edited">(Last edited by <strong>mike402</strong> on 30 Dec 2016, 08:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348047">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">mike402</div>
					<div class="post-datetime">
						30 Dec 2016, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>The microphone works!!! Install alsa-utils. I had to rebuild the image to fit it. I took out everything IPv6 &amp; PPP related and kept iptables, firewall, and DHCP/DNS, in case I want to use the camera as router. No luci. I only added mjpg-streamer, libjpeg, and alsa-utils. When all is said and done, I only have about 160kb of free JFFS space available. That&#039;s fine with me... I&#039;m buying two more.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349021">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">an</div>
					<div class="post-datetime">
						11 Jan 2017, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>@ mike402<br />If you want to assemble really cheap solution, you can try Pogoplug Mobile. Adorama still sells them on Amazon and eBay for under $10 (from time to time they drop price to $6,99 with free shipping). You can install OpenWRT in NAND (128 MB) and enjoy about 100MB for your OpenWRT packages.<br />usb hub + usb wifi adapter add about $10. Even with good HD USB Webcam you will have the whole system under $40.</p><p>If you can live with ethernet connection, you need only pogoplug and usb camera.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356099">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">robi5972</div>
					<div class="post-datetime">
						12 Apr 2017, 12:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dmknob wrote:</cite><blockquote><p>So, i need help <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>With usb-serial and solder skills, i get these bootlog on DCS930L A1:</p><p>&quot;U-Boot 1.1.3</p><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB<br />relocate_code Pointer at: 81fac000<br />config usb..</p><p> Set info-&gt;start[0]=BF000000<br />flash_protect ON: from 0xBF000000 to 0xBF021767<br />flash_protect ON: from 0xBF030000 to 0xBF030FFF<br />*** Warning - bad CRC, using default environment</p><p>============================================ <br />Ralink UBoot Version: 3.5.2.0<br />-------------------------------------------- <br />ASIC 3052_MP2 (Port5&lt;-&gt;None)<br />DRAM component: 256 Mbits SDR<br />DRAM bus: 16 bit<br />Total memory: 32 MBytes<br />Flash component: NOR Flash<br />============================================ <br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384 </p><p> ##### The CPU freq = 320 MHZ #### <br /> estimate memory size =32 Mbytes &quot;</p><br /><br /><br /><p>The &quot;Signature&quot; and other lines does not comes from serial.<br />And i have solid Red and Blue leds.</p><p>Any advises?<br />i have more 2 cams death (1 even shows up the red led..).</p><p>Thanks all in advance.</p></blockquote></div><br /><p>I&#039;m in the same situation. Any help?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p356809">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">robi5972</div>
					<div class="post-datetime">
						22 Apr 2017, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>No one who can help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369354">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">dreamlayers</div>
					<div class="post-datetime">
						8 Dec 2017, 07:24					</div>
				</div>
				<div class="post-content content">
					<p>I have what seems to be a DCS-930L A2. The top sticker says P/N CCS930LANA...A2 H/W Ver.: A2 F/W Ver: 1.08. I can flash the *factory.bin via the rescue web interface, but it never seems to boot. I get an Ethernet connection, but no IP connectivity. Ping says 192.168.1.1 is &quot;Destination Host Unreachable&quot;. The front LED is red and the blue LED stays on.</p><p>I had a lot of trouble using Chrome and Firefox to upload firmwares via the recovery interface. In Chrome most of the interface became invisible. That didn&#039;t happen in Firefox, but I never got an upload to work. Wireshark shows TCP errors. I tried both Windows 7 and Linux.</p><p>However, it works perfectly from cURL in Linux, using &quot;curl -F firmware=@firmware.bin URL&quot;. (Edited because I can&#039;t post links.) I copied the firmware to firmware.bin in case the long file name is a problem. This never failed for *factory.bin but always failed for *sysupgrade.bin. When it succeeds, cURL outputs a short web page &quot;IMAGE UPLOADED SUCCESSFULLY&quot; and a JavaScript 90 second countdown. </p><p>I&#039;ve tried a whole bunch of things, including openwrt-15.05.1-ramips-rt305x-dcs-930-squashfs-factory.bin<br />openwrt-15.05-ramips-rt305x-dcs-930l-b1-squashfs-factory.bin, openwrt-ramips-rt305x-dcs-930-squashfs-factory.bin, and DCS-930 and DCS-930-B1 custom builds of 15.05.1. They all gave the same result. When I instead used dcs930l_v1.16.04.bin from DCS-930L_fw_revA1A2A3_1-16-04_eu_multi_20161027.zip, I got the original firmware back without problem. It even kept the settings.</p><p>I would like to try OpenWrt, but don&#039;t know what else to try to make it work. Probably I should open up the cam and look at serial output, but I don&#039;t feel like dealing with the clips holding it together now. Is there some trick to make it easy?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370309">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">dreamlayers</div>
					<div class="post-datetime">
						1 Jan 2018, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>I managed to open my camera without breaking any clips. I used one of those iPod opening tools with a simple wedge along the end. Placing the tool flat against the grey rim caused it to slip and scratch the front a bit. But, placing the tool at an angle with the cut surface of the wedge parallel to the rim allowed me to disengage the clips. I was pushing at approximately the midpoint of one side. The grey rim stays with the back and the front separates from the grey rim.</p><p>Then I hooked up a serial connection. I could boot various sysupgrade.bin files, but they failed to find root, giving a lot of JFFS errors like jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000e0024: 0xc1a8 instead. Flashing them didn&#039;t help either. i could not boot factoryupgrade.bin files directly from TFTP, because the bootloader said &quot;Verifying Checksum ... Bad Data CRC&quot;.</p><p>Then I finally tried to flash openwrt-ramips-rt305x-dcs-930-squashfs-factory.bin and I bricked the device. They factory.bin files ar exactly 4 megabytes, the same size as the flash, but they&#039;re &quot;u-boot legacy uImage&quot; files. They start with a header, which starts with a magic number. However, the original firmware DCS-930L_REVA_FIRMWARE_1.16.04.BIN, which is the same size, starts with MIPS code, with a branch instruction going to what definitely seems like startup code. The original firmware also contains bootloader strings.</p><p>So, I overwrote the bootloader with garbage, and bricked the device such that only JTAG or maybe the apparently undocumented iNIC boot using internal ROM could recover it. I&#039;m left wondering what&#039;s the point of the factory.bin files. How could they work with this device? Why is OpenWrt releasing them?</p>											<p class="post-edited">(Last edited by <strong>dreamlayers</strong> on 1 Jan 2018, 04:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370706">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">yottatsa</div>
					<div class="post-datetime">
						9 Jan 2018, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Got the same set of problems that dreamlayers had, but with the DCS-930L B2. Original firmware dcs930lb1_v2.14.04.bin works fine though, and also looks more or less the same</p><div class="codebox"><pre><code>openwrt-15.05-ramips-rt305x-dcs-930l-b1-squashfs-factory.bin: u-boot legacy uImage, MIPS OpenWrt Linux-3.18.20, Linux/MIPS, OS Kernel Image (lzma), 3514304 bytes, Fri Sep 11 17:26:57 2015, Load Address: 0x80000000, Entry Point: 0x80000000, Header CRC: 0x7044DC9E, Data CRC: 0x2FED1041

dcs930lb1_v2.14.04.bin: u-boot legacy uImage, SPI Flash Image, Linux/MIPS, Standalone Program (Not compressed), 111116 bytes, Fri Sep  9 14:07:58 2016, Load Address: 0x80200000, Entry Point: 0x80200000, Header CRC: 0x5ACE9A9B, Data CRC: 0xEE0479B8</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370841">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">dreamlayers</div>
					<div class="post-datetime">
						13 Jan 2018, 07:44					</div>
				</div>
				<div class="post-content content">
					<p>Okay, I see dcs930lb1_v2.14.04.bin original firmware for B version cameras with RT535x is u-boot format. However, dcs930l_v1.16.04.bin original firmware for A version cameras is not in u-boot format. OpenWrt firmware which seems to be for A version cameras is in u-boot format, for example openwrt-15.05.1-ramips-rt305x-dcs-930-squashfs-factory.bin. That definitely seems to be intended for A version because the same directory also contains dcs-930l-b1-squashfs-factory.bin for B version.</p>											<p class="post-edited">(Last edited by <strong>dreamlayers</strong> on 13 Jan 2018, 07:44)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=49212&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49212&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=49212&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>