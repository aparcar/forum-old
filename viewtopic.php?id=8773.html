<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile Error</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 21 Apr 2018 and 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=8773&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p39721">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						28 Dec 2006, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>When I try to compile, it gives me this error </p><p>make[4]: Entering directory `/root/usr5461/openwrt/toolchain_build_mipsel/gdbclient-6.3/gdb&#039;<br />if [ &quot;/root/usr5461/openwrt/toolchain_build_mipsel/gdb-6.3/missing flex&quot; ] &amp;&amp; /root/usr5461/openwrt/toolchain_build_mipsel/gdb-6.3/missing flex --version &gt;/dev/null 2&gt;&amp;1; then \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /root/usr5461/openwrt/toolchain_build_mipsel/gdb-6.3/missing flex -oada-lex.c /root/usr5461/openwrt/toolchain_build_mipsel/gdb-6.3/gdb/ada-lex.l &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rm -f ada-lex.c.new &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sed -e &#039;/extern.*malloc/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/extern.*realloc/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/extern.*free/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/include.*malloc.h/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/\([^x]\)malloc/\1xmalloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/\([^x]\)realloc/\1xrealloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/yy_flex_xrealloc/yyxrealloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt; ada-lex.c &gt; ada-lex.c.new &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rm -f ada-lex.c &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mv ada-lex.c.new ada-lex.c; \<br />&nbsp; &nbsp; &nbsp; &nbsp; elif [ -f ada-lex.c ]; then \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;Warning: ada-lex.c older than ada-lex.l and flex not available.&quot;; \<br />&nbsp; &nbsp; &nbsp; &nbsp; else \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;ada-lex.c missing and flex not available.&quot;; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; false; \<br />&nbsp; &nbsp; &nbsp; &nbsp; fi<br />ada-lex.c missing and flex not available.<br />make[4]: *** [ada-lex.c] Error 1<br />make[4]: Leaving directory `/root/usr5461/openwrt/toolchain_build_mipsel/gdbclient-6.3/gdb&#039;<br />make[3]: *** [all-gdb] Error 2<br />make[3]: Leaving directory `/root/usr5461/openwrt/toolchain_build_mipsel/gdbclient-6.3&#039;<br />make[2]: *** [/root/usr5461/openwrt/toolchain_build_mipsel/gdbclient-6.3/gdb/gdb] Error 2<br />make[2]: Leaving directory `/root/usr5461/openwrt/toolchain/gdb&#039;<br />make[1]: *** [gdb-install] Error 2<br />make[1]: Leaving directory `/root/usr5461/openwrt/toolchain&#039;<br />make: *** [toolchain/install] Error 2</p><p>How do I fix it?&nbsp; I think I have an idea, OpenWrt FAQ said I need libc headers, but I can not find the package for it (i am using ubuntu)</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 28 Dec 2006, 20:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39722">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						28 Dec 2006, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>Try this <a href="http://forum.openwrt.org/viewtopic.php?id=8410">http://forum.openwrt.org/viewtopic.php?id=8410</a>. Make sure you have all required package installed.</p><p>You can also disable building the useless GDB. See post #3.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 28 Dec 2006, 21:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39723">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						28 Dec 2006, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>I got all the packages, the error is still there.<br />I do not understand how to disable GDB, what do I do with that code?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39726">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						28 Dec 2006, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using the Ubuntu VMware image and everything works fine.</p><p>Maybe do a fresh check out from subversion and do a clean build again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39734">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						28 Dec 2006, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>WOW it worked!&nbsp; My image is 1.3MB!&nbsp; How small does it have to be to fit in the 5461&#039;s 2MB?&nbsp; Doesn&#039;t it reserve some of it for bootloader and stuff?<br />I need USB mass storage and telnet, thats all, I dont care for any routing features.</p><p>What image do I use for my 5461?&nbsp; openwrt-brcm-2.4-squashfs.trx?</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 28 Dec 2006, 23:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39735">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						28 Dec 2006, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>Well. I would use the ImageBuilder remove a few packages which are not really required and flash it.</p><br /><p>You have to select the ImageBuilder in menuconfig under packages (at the end of the list) run &#039;make clean world&#039; to build the ImageBuilder. The ImageBuilder tarball will be created in ~/whiterussian/bin/ directory.</p><br /><p>After unpacking the ImageBuilder tarball remove the following packages from lists/default.brcm-2.4 and run &#039;make&#039; in the ImageBuilder directory.</p><p>To build a image without webif GUI remove the following packages:<br />&nbsp; haserl, webif</p><p>To build a image without iptables and ppp remove the following packages:<br />&nbsp; iptables, kmod-ipt-nat-default, kmod-ppp, ppp-mod-pppoe, ppp, ppp-mod-pppoe</p><p>To build a image without wireless remove the following packages:<br />&nbsp; iwlib, kmod-brcm-wl, kmod-wlcompat, wificonf, wireless-tools</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 28 Dec 2006, 23:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39736">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						28 Dec 2006, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>Ok, so I can strip it down more, that is great!&nbsp; But which image do I have to use to flash my router?<br />Also, according to the wiki page for the 5461 ( <a href="http://wiki.openwrt.org/USR5461">http://wiki.openwrt.org/USR5461</a> ) I have to apply a patch, but the patch is for Kamikaze.&nbsp; Would it work for WhiteRussian?<br />Also, how do you get all the text that is output (like on the wiki page for the 5461)</p><p>What will happen if the flash fails?&nbsp; Is my router bricked?&nbsp; How do I know if it fails?</p><p>Also, what is faster, Ubuntu under VMWare on this computer (Core 2 Duo E6600, 2GB RAM) or natively on this computer (1.6GHz P4, 512MB RAM)</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 28 Dec 2006, 23:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39741">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 00:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>Also, according to the wiki page for the 5461 ( <a href="http://wiki.openwrt.org/USR5461">http://wiki.openwrt.org/USR5461</a> ) I have to apply a patch, but the patch is for Kamikaze.&nbsp; Would it work for WhiteRussian?</p></blockquote></div><p>The patch apply to WhiteRussian well. Just copy it to ~/whiterussian/target/linux/linux-2.4/patches/brcm and run &#039;make clean world&#039; and you included the patch in WR.</p><div class="codebox"><pre><code>cd ~/whiterussian/target/linux/linux-2.4/patches/brcm
wget --no-check-certificate -O 010-bcm47xx-cam_absent.patch &quot;https://dev.openwrt.org/browser/trunk/target/linux/brcm-2.4/patches/010-bcm47xx-cam_absent.patch?format=txt&quot;
cd ~/whiterussian
make clean world</code></pre></div><p>But no guarantee on this.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 00:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39742">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I put it there and it is building.&nbsp; Once built, I will extract the imagebuilder, remove the stuff I do not want from lists, and then make it.&nbsp; Then what image must I upload to my router?<br />Also, what will its IP and username and password be so that I may SSH in (dropbear)</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 00:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39743">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 00:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>Ok, I put it there and it is building.&nbsp; Once built, I will extract the imagebuilder, remove the stuff I do not want from lists, and then make it.&nbsp; Then what image must I upload to my router?</p></blockquote></div><p>Good <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> You also have to backport <a href="https://dev.openwrt.org/ticket/817">this patch</a> to WR. Maybe I&#039;ll do it tomorrow.</p><p>From the wiki:<br /></p><div class="quotebox"><blockquote><p>4. Firmware upload<br />The firmware upgrade page of the original U.S.Robotics software requires a special USR firmware format, which is a TRX file with an additional 28-byte header. Lookherefor a convertor tool. Probably the easiest way to upload a new firmware image is via the TFTP server of the CFE bootloader. There is a small window of 2-3 seconds right after reset where CFE checks for a TFTP transfer, provided boot_wait is enabled.</p></blockquote></div><div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>Also, what will its IP and username and password be so that I may SSH in (dropbear)</p></blockquote></div><p>The last IP you configured the router to. No default password. Use telnet the first time and set a password than use SSH.</p><p>Everything else is in the wiki.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 00:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39744">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>It Works!&nbsp; I Telnet In!&nbsp; Woohooo!<br />AMMMAAZING!</p><p>Now, how do I set the DNS and gateway info for the router?&nbsp; I need that to use ipkg for USB Mass Storage!</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 01:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39747">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:06					</div>
				</div>
				<div class="post-content content">
					<p>Alright, I&#039;ve finished backporting the patch to add U.S. Robotics USR5461 support to WhiteRussian.</p><p>It creates a .bin file which can be flashed with the original USR5461 web interface (watch the size difference of the two images. It&#039;s exactly the 28 bytes for the header, added by the trx2usr tool):<br /></p><div class="codebox"><pre><code>ll ~/whiterussian/bin/
-rw-r--r-- 1 ubuntu ubuntu 1548288 2006-12-29 00:59 openwrt-brcm-2.4-squashfs.trx
-rw-r--r-- 1 ubuntu ubuntu 1548316 2006-12-29 00:59 openwrt-usr5461-squashfs.bin</code></pre></div><p>I&#039;ll clean up my patches and post them here later...</p><p>Maybe I&#039;ll also create a special packages list (based on ImageBuilder&#039;s default list) for the 2MB flash. I know, there is already a micro, but the micro is not very usefull.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 02:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39749">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>Huh?&nbsp; I just used the tftp to load my image, but I guess that works too!&nbsp; Now I am having trouble making USB actually work, Here is my list for ImageBuilder<br />base-files<br />base-files-brcm<br />bridge<br />busybox<br />dropbear<br />ipkg<br />iptables<br />iwlib<br />kmod-brcm-wl<br />kmod-diag<br />kmod-switch<br />kmod-usb-core<br />kmod-usb-uhci<br />kmod-usb-storage<br />kmod-vfat<br />kmod-wlcompat<br />mtd<br />nvram<br />uclibc<br />wificonf</p><p>Here is what dmesg brings up, it does not change whether the usb stick is in or not<br />CPU revision is: 00029008<br />Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 8kB, 2-way, linesize 16 bytes.<br />Linux version 2.4.30 (root@router) (gcc version 3.4.4 (OpenWrt-1.0)) #1 Thu Dec 28 16:52:17 CST 2006<br />Setting the PFC value as 0x11<br />Determined physical RAM map:<br /> memory: 00800000 @ 00000000 (usable)<br />On node 0 totalpages: 2048<br />zone(0): 2048 pages.<br />zone(1): 0 pages.<br />zone(2): 0 pages.<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />CPU: BCM5350 rev 0 at 200 MHz<br />Using 100.000 MHz high precision timer.<br />Calibrating delay loop... 199.47 BogoMIPS<br />Memory: 6124k/8192k available (1457k kernel code, 2068k reserved, 104k data, 80k init, 0k highmem)<br />Dentry cache hash table entries: 1024 (order: 1, 8192 bytes)<br />Inode cache hash table entries: 512 (order: 0, 4096 bytes)<br />Mount cache hash table entries: 512 (order: 0, 4096 bytes)<br />Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Page-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />POSIX conformance testing by UNIFIX<br />PCI: Disabled<br />PCI: Fixing up bus 0<br />Linux NET4.0 for Linux 2.4<br />Based upon Swansea University Computer Society NET3.039<br />Initializing RT netlink socket<br />Starting kswapd<br />Registering mini_fo version $Id$<br />devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.<br />Squashfs 2.1-r2 (released 2004/12/15) (C) 2002-2004 Phillip Lougher<br />pty: 256 Unix98 ptys configured<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 2) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 0) is a 16550A<br />b44.c:v0.93 (Mar, 2004)<br />PCI: Setting latency timer of device 00:01.0 to 64<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 00:c0:49:f0:29:00<br />Physically mapped flash: Found an alias at 0x200000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x600000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xa00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xe00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1200000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1600000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1a00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1e00000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table v1.0 at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling fast programming due to code brokenness.<br />Flash device: 0x200000 at 0x1c000000<br />bootloader size: 131072<br />Physically mapped flash: Filesystem type: squashfs, size=0xe9bc6<br />Updating TRX offsets and length:<br />old trx = [0x0000001c, 0x000008d8, 0x0007e400], len=0x00168000 crc32=0x97a63de3<br />new trx = [0x0000001c, 0x000008d8, 0x0007e400], len=0x00170000 crc32=0x54b3ea97<br />Done<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00020000 : &quot;cfe&quot;<br />0x00020000-0x001f0000 : &quot;linux&quot;<br />0x0009e400-0x00190000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x001f0000-0x00200000 : &quot;nvram&quot;<br />0x00190000-0x001f0000 : &quot;OpenWrt&quot;<br />Initializing Cryptographic API<br />NET4: Linux TCP/IP 1.0 for NET4.0<br />IP Protocols: ICMP, UDP, TCP, IGMP<br />IP: routing cache hash table of 512 buckets, 4Kbytes<br />TCP: Hash tables configured (established 512 bind 1024)<br />ip_conntrack version 2.1 (5953 buckets, 5953 max) - 332 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team<br />NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.<br />NET4: Ethernet Bridge 008 for NET4.0<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 80k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;U.S. Robotics USR5461&#039;<br />Probing device eth0: found!<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /tmp/root<br />jffs2.bbc: SIZE compression mode activated.<br />PCI: Setting latency timer of device 00:07.0 to 64<br />eth1: Broadcom BCM4320 802.11 Wireless Controller 3.90.37.0<br />BFL_ENETADM not set in boardflags. Use force=1 to ignore.<br />usb.c: registered new driver usbdevfs<br />usb.c: registered new driver hub<br />SCSI subsystem driver Revision: 1.00<br />Initializing USB Mass Storage driver...<br />usb.c: registered new driver usb-storage<br />USB Mass Storage support registered.<br />uhci.c: USB Universal Host Controller Interface driver v1.1<br />device eth0 entered promiscuous mode<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />vlan0: add 01:00:5e:00:00:01 mcast address to master interface<br />vlan0: dev_set_promiscuity(master, 1)<br />vlan0: dev_set_allmulti(master, 1)<br />device eth1 entered promiscuous mode<br />br0: port 2(eth1) entering listening state<br />br0: port 1(vlan0) entering listening state<br />br0: port 2(eth1) entering learning state<br />br0: port 1(vlan0) entering learning state<br />br0: port 2(eth1) entering forwarding state<br />br0: topology change detected, propagating<br />br0: port 1(vlan0) entering forwarding state<br />br0: topology change detected, propagating<br />vlan1: add 01:00:5e:00:00:01 mcast address to master interface<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 02:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39750">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>Try kmod-usb-<strong>o</strong>hci instead of kmod-usb-uhci.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39753">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 02:25					</div>
				</div>
				<div class="post-content content">
					<p>should I remove uhci?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39755">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>yes, replace it. rebuild the image with the imagebuilder and reflash it.</p><p>if you look into the nice log in the wiki you see this:<br /></p><div class="codebox"><pre><code>usb.c: registered new driver hub
usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6
usb-ohci.c: usb-00:03.0, PCI device 14e4:4715
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
usb.c: registered new driver usblp</code></pre></div>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 02:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39757">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>YES IT DETECTED IT!&nbsp; I put UHCI because that is what UsbStorageHowto told me to put <br /><a href="http://wiki.openwrt.org/UsbStorageHowto">http://wiki.openwrt.org/UsbStorageHowto</a></p><p>Thanks though, you are a great help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39759">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>YES IT DETECTED IT!</p></blockquote></div><p>Great <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>Thanks though, you are a great help!</p></blockquote></div><p>No problem. You are welcome.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 02:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39760">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 02:35					</div>
				</div>
				<div class="post-content content">
					<p>Do you know how to mount it?</p><p>usb.c: registered new driver usbdevfs<br />usb.c: registered new driver hub<br />PCI: Setting latency timer of device 00:03.0 to 64<br />usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6<br />usb-ohci.c: usb-00:03.0, PCI device 14e4:4715<br />usb.c: new USB bus registered, assigned bus number 1<br />hub.c: USB hub found<br />hub.c: 2 ports detected<br />SCSI subsystem driver Revision: 1.00<br />Initializing USB Mass Storage driver...<br />usb.c: registered new driver usb-storage<br />USB Mass Storage support registered.<br />device eth0 entered promiscuous mode<br />hub.c: new USB device 00:03.0-1, assigned address 2<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />&nbsp; Vendor: LEXAR&nbsp; &nbsp; &nbsp;Model: JUMPDRIVE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Rev: 1.30<br />&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0<br />SCSI device sda: 251904 512-byte hdwr sectors (129 MB)<br />sda: Write Protect is off<br />Partition check:<br /> /dev/scsi/host0/bus0/target0/lun0: unknown partition table<br />WARNING: USB Mass Storage data integrity not assured<br />USB Mass Storage device found at 2<br />hub.c: new USB device 00:03.0-2, assigned address 3<br />usb.c: USB device not accepting new address=3 (error=-145)<br />hub.c: new USB device 00:03.0-2, assigned address 4<br />usb.c: USB device not accepting new address=4 (error=-145)<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />vlan0: add 01:00:5e:00:00:01 mcast address to master interface<br />vlan0: dev_set_promiscuity(master, 1)<br />vlan0: dev_set_allmulti(master, 1)<br />device eth1 entered promiscuous mode<br />br0: port 2(eth1) entering listening state<br />br0: port 1(vlan0) entering listening state<br />br0: port 2(eth1) entering learning state<br />br0: port 1(vlan0) entering learning state<br />br0: port 2(eth1) entering forwarding state<br />br0: topology change detected, propagating<br />br0: port 1(vlan0) entering forwarding state<br />br0: topology change detected, propagating<br />vlan1: add 01:00:5e:00:00:01 mcast address to master interface</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 02:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39761">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:40					</div>
				</div>
				<div class="post-content content">
					<p>Normally it should be auto-mounted by the hotplug scripts.</p><div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>Do you know how to mount it?</p><p>/dev/scsi/host0/bus0/target0/lun0: unknown partition table</p></blockquote></div><p>Make sure you have partitioned and formatted it correctly.</p><p>You, also need the right package for the filesystem e.g. kmod-vfat or kmod-ext2 installed/included in the image...</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 02:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39763">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 02:47					</div>
				</div>
				<div class="post-content content">
					<p>I see... I installed vfat, and I tried the drive formatted both fat and fat32, same thing.&nbsp; I need this drive to read in both a Windows PC and this router...&nbsp; Is vfat not for fat or fat32?</p><p>How do I configure the DNS and gateway info for my router?</p>											<p class="post-edited">(Last edited by <strong>schweitzer</strong> on 29 Dec 2006, 02:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39764">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 02:53					</div>
				</div>
				<div class="post-content content">
					<p>Hmm, you&#039;ll probably need kmod-vfat and kmod-msdos.</p><p>kmod-msdos has been added lately to the WR buildroot. Check if you have it in ~/whiterussian/bin/packages/</p><p>After installing (rebuild and reflash the image with the ImageBuilder. If you use the ImageBuilder all the packages go into the SquashFS partition which has higher compression and saves you some space) these two packages and rebooting show me &#039;lsmod&#039; and &#039;df -h&#039; output.</p><div class="quotebox"><cite>schweitzer wrote:</cite><blockquote><p>How do I configure the DNS and gateway info for my router?</p></blockquote></div><p>This is in the FAQ <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 03:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39765">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>lsmod<br />Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by&nbsp; &nbsp; Tainted: P<br />usb-storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 68624&nbsp; &nbsp;0 (unused)<br />sd_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;12500&nbsp; &nbsp;0<br />scsi_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;70616&nbsp; &nbsp;2 [usb-storage sd_mod]<br />usb-ohci&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;19204&nbsp; &nbsp;0 (unused)<br />usbcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 74808&nbsp; &nbsp;1 [usb-storage usb-ohci]<br />msdos&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6420&nbsp; &nbsp;0<br />vfat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;11692&nbsp; &nbsp;0<br />fat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 36840&nbsp; &nbsp;0 [msdos vfat]<br />wlcompat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15744&nbsp; &nbsp;0 (unused)<br />wl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 423640&nbsp; &nbsp;0 (unused)<br />switch-robo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4460&nbsp; &nbsp;0 (unused)<br />switch-core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4896&nbsp; &nbsp;0 [switch-robo]<br />diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;19808&nbsp; &nbsp;0 (unused)</p><p>df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;960.0k&nbsp; &nbsp; 960.0k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; &nbsp;16.0k&nbsp; &nbsp; &nbsp; 1.0M&nbsp; &nbsp;1% /tmp<br />/tmp/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;960.0k&nbsp; &nbsp; 960.0k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /tmp/root<br />/dev/mtdblock/4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;384.0k&nbsp; &nbsp; 324.0k&nbsp; &nbsp; &nbsp;60.0k&nbsp; 84% /jffs<br />/jffs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;960.0k&nbsp; &nbsp; 960.0k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /</p><br /><p>SWEET you just taught me how to check how much space I have open!&nbsp; Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39766">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						29 Dec 2006, 03:04					</div>
				</div>
				<div class="post-content content">
					<p>So, your stick is still not mounted but the modules are loaded correctly.</p><p>I guess it has something to do with the stick now. Maybe try another stick and try to format the stick with FAT and FAT32 from Windows.</p><p>Sorry, I&#039;m out of ideas.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 29 Dec 2006, 03:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39767">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">schweitzer</div>
					<div class="post-datetime">
						29 Dec 2006, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>Damnit, it is!&nbsp; I tried a small SD i had (32MB) in a card reader, and it works.&nbsp; That is weired that the stick works everywhere I have tried but in OpenWrt</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=8773&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>