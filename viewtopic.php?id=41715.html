<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WBMR-HP-G300H ADSL2+ Modem Router (Annex A) - trunk build</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p189241">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						18 Jan 2013, 04:07					</div>
				</div>
				<div class="post-content content">
					<p>I did trunk build for my Buffalo WBMR-HP-G300H from version 35214 and as wifi and ADSL seem to work ok I decided to share it.</p><p>Build itself is quite barebone and includes just luci, upnp, irssi, tf, nano, screen and busybox adduser stuff. Scandinavian letters work with irssi but its bit shaky and prolly breaks if you change LC_ALL/LC_CTYPE etc. stuff...</p><p>Also included are some ADSL line status additions for LuCI which are detailed here:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=188713#p188713">https://forum.openwrt.org/viewtopic.php … 13#p188713</a></p><p>Leech from here: <a href="http://openwrt.lehtivihrea.org/WBMR-HP-300h-squashfs-r35214.rar">http://openwrt.lehtivihrea.org/WBMR-HP- … r35214.rar</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189414">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Myst70</div>
					<div class="post-datetime">
						20 Jan 2013, 11:18					</div>
				</div>
				<div class="post-content content">
					<p>I would like to try but I need AnnexB.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190225">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tuananh</div>
					<div class="post-datetime">
						28 Jan 2013, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>hi teyn, </p><p>are you able to configure wireless to get 300Mbps transfer rate in this build?</p><p>I tried the tutorial in the forum but unable to get 300Mbps; wifi just refuse to go up. can you post your wireless config here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190352">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						29 Jan 2013, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>To be honest I tested wireless only with my phone as I mostly use my device as adsl/wired router. Was bit curious so compiled new version and enabled my motherboards wifi (Asus P8Z77-V Pro), its specsheet states maximum speed as 802.11n(HT40) up to 150Mbps and at least that works (MCS-7).</p><p>So in the end I can&#039;t aswer if 300Mbps works and all this wasnt very helpful. Unless you suddenly notice having 150Mbps max wificard. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>New image to test anyway: <a href="http://openwrt.lehtivihrea.org/WBMR-HP-300h-squashfs-r35397.rar">http://openwrt.lehtivihrea.org/WBMR-HP- … r35397.rar</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190705">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bassman</div>
					<div class="post-datetime">
						2 Feb 2013, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried to compile trunk for the WBMR-HP-G300H (annex A) too, and I have a few problems/questions.</p><p>1. Building issues</p><p>I did the following:<br /></p><div class="codebox"><pre><code>make distclean
svn update
./scripts/feeds update -a
./scripts/feeds install -a
echo CONFIG_TARGET_lantiq_xway_WBMRA=y &gt;.config
make defconfig
make download
make</code></pre></div><p>but my .config keeps resetting to &quot;CONFIG_TARGET_ar71xx=y&quot; after I &quot;make defconfig&quot;. It looks as if there are some leftovers from a previous build I made that are not cleaned up by &quot;make distclean&quot;. The result is I end up without usable *image.bin files in the bin/lantiq directory. Any ideas?</p><p><strong>EDIT - maybe I found out.</strong> When I create an initial, minimal .config, I have to specify target <em>and subtargets</em> and create my .config like this:<br /></p><div class="codebox"><pre><code>CONFIG_TARGET_lantiq=y
CONFIG_TARGET_lantiq_xway=y
CONFIG_TARGET_lantiq_xway_WBMRA=y</code></pre></div><p>2. You mention ADSL line status additions for LuCI. I&#039;ve been hoping for something like this for some time; Are they included in the source tree? How do I enable them in menuconfig?</p><p>I would use your build (and I will try it anyway <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />), but I&#039;d much prefer to make my own because I want to include some stuff like openvpn and usb/samba (small fileserver) and exclude ipv6, at least until it&#039;s mature enough.</p><p>Any help will be appreciated! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>bassman</strong> on 2 Feb 2013, 16:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190769">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						3 Feb 2013, 03:51					</div>
				</div>
				<div class="post-content content">
					<p>I just used files/ directory to override some Luci stuff after building image. All those files are included in the rar package. Think newer trunk builds have a bit different stat page though to show possible swap usage or something.</p><p>Btw, if you plan to do lots of tweaking I would suggest making minimal ram only image with Luci so you can recover and flash router easily back to working state. It has very nice recovery mode where you just start tftp server, set right ip and hold aoss button while plugging power on it and wait. I can tell I have used it a lot. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Oh, and I would prob use make menuconfig to select what to build.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190797">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bassman</div>
					<div class="post-datetime">
						3 Feb 2013, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello teyn, thanks for your quick reply.</p><div class="quotebox"><cite>teyn wrote:</cite><blockquote><p>Think newer trunk builds have a bit different stat page though to show possible swap usage or something.</p></blockquote></div><p>Yes, newer builds do have a richer initial stat page, that&#039;s one reason why I was looking for a &#039;permanent&#039; patch in trunk, so it won&#039;t be undone next time I make and update. It shouldn&#039;t be too hard for someone who understands a little about the packaging of OpenWrt releases/feeds.</p><div class="quotebox"><blockquote><p>Btw, if you plan to do lots of tweaking I would suggest making minimal ram only image with Luci so you can recover and flash router easily back to working state.</p></blockquote></div><p>Your suggestion of a minimal ramdisk image is a good one. I will build it and keep it somewhere safe for the occasional emergency.</p><div class="quotebox"><blockquote><p>Oh, and I would prob use make menuconfig to select what to build.</p></blockquote></div><p>Actually I used menuconfig at first, but for some reason the target didn&#039;t &quot;stick&quot; and was reset to AR7xxx when making defconfig. Now that it works I&#039;m not going to disturb it anytime soon <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191621">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						11 Feb 2013, 02:37					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m bit curious what kind of performance you get from OpenVPN. I myself tried to fiddle with kernels cryptoapi and kmod-ltq-deu-ar9 but apparently nothing actually uses them, or if does I lack the knowledge to make it so. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>There is small boost by enabling mips-mt though (OpenSSL benchmark below):</p><p>| 1.0.1d |&nbsp; 16916820 |&nbsp; 10973530 |&nbsp; 5282820 |&nbsp; 1746940 |&nbsp; 3037300 |&nbsp; 1105920 |&nbsp; 4257450 |&nbsp; 3664550 |&nbsp; 3215360 | 3.8 | 133.1 | 13.5 | 11.2 |</p><p>As for ADSL stats, guess I could someday(=aka not likely) do separate status page for lantiq ADSL stats. There is lots of status stuff and different ADSL settings (which aren&#039;t enabled by default) available but presenting them on some sensible way is different thing to do.</p><p>Also did new image: <a href="http://openwrt.lehtivihrea.org/WBMR-HP-300h-squashfs-r35547.rar">http://openwrt.lehtivihrea.org/WBMR-HP- … r35547.rar</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191693">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">bassman</div>
					<div class="post-datetime">
						11 Feb 2013, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello Teyn, I haven&#039;t tried to use OpenVPN yet. I&#039;ve got a client set up on my computer, and that&#039;s what I use on the rare occasions where I need it. I am planning to move the load to the router though, that&#039;s why I&#039;m building with OpenVPN. When I get to use it, I will post in this thread, but it might not be soon. I&#039;d like to have a setup where I can have several programs running on the computer, some tunneled through the vpn, some going normally through my ISP.</p><p>At the moment, more urgently for me, I&#039;m struggling with VLAN setup. It&#039;s a hard nut to crack.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195021">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						15 Mar 2013, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>Did new build which has newer kernel (3.8.3), useradd/group tools, irssi, tf4/5, miniupnpd, luci &amp; adsl stats &#039;patch&#039; for it and hopefully working switch name migration script. No guarantees as usual though.</p><p>Link: <a href="http://openwrt.lehtivihrea.org/WBMR-HP-300h-squashfs-r36040.rar">http://openwrt.lehtivihrea.org/WBMR-HP- … r36040.rar</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195572">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">AcidStew</div>
					<div class="post-datetime">
						21 Mar 2013, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>Im looking for another firmware for my WBMR-HP-G300H ADSL2+ Modem Router (Annex A) and im going to give a try with OpenWRT. I know there are a couple of ways to install the image file. Now my dumb question.. This image, provided here in this thread - can i just install it via the original firmware update method (webinterface)?</p><p>As i can see the LuCI and ADSL Annex A is fully supported by the latest build right?!</p><p>Thanks in advance,<br />Acid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195831">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						23 Mar 2013, 15:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AcidStew wrote:</cite><blockquote><p>Im looking for another firmware for my WBMR-HP-G300H ADSL2+ Modem Router (Annex A) and im going to give a try with OpenWRT. I know there are a couple of ways to install the image file. Now my dumb question.. This image, provided here in this thread - can i just install it via the original firmware update method (webinterface)?</p></blockquote></div><p>No, Buffalo firmwares are encrypted. Easiest way to flash is with encrypted dd-wrt and then openwrt image (both from webui). Also note that you lose ability to flash back to the original Buffalo firmware.</p><div class="quotebox"><cite>AcidStew wrote:</cite><blockquote><p>As i can see the LuCI and ADSL Annex A is fully supported by the latest build right?!</p></blockquote></div><p>They work for me, your experience may vary; aka no guarantees. There is also no luci interface for changing ADSL modes etc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197215">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">teyn</div>
					<div class="post-datetime">
						4 Apr 2013, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>Seems 36040 had kernel without board detection which borked switch when doing clean install. Here is fixed version...</p><p>Link: <a href="http://openwrt.lehtivihrea.org/WBMR-HP-300h-squashfs-r36193.rar">http://openwrt.lehtivihrea.org/WBMR-HP- … r36193.rar</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>