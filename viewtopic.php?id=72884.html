<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tor on NEXX WT3020 Router.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p370229">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						30 Dec 2017, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody,<br />I use your guide for install TOR on my NEXX WT3020 on this site,&nbsp; I install OpnWrt without problem but when I do the command:</p><p>wget -qO - h t t p : //onionwrt.us.to/install | sh - </p><p>on SSH the system reply me</p><p>wget: can&#039;t connect to remote host (2.139.236.123): <br />Connection refused</p><p>what can I do for install TOR?<br />thanks a lot for your work<br />spider81man</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370734">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">xicoyihl</div>
					<div class="post-datetime">
						10 Jan 2018, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>If you own the 8MB ROM version of the NEXX WT3020, then just build your own image with TOR inside. Its done in about 5minutes and then just wait until your image including tor is build.</p><p><a href="https://wiki.openwrt.org/doc/howto/build">https://wiki.openwrt.org/doc/howto/build</a></p><p>Otherwise you can use the package system to install it. Recent version of tor inside lede/openwrt is 0.3.1.9:<br /><a href="https://git.lede-project.org/?p=feed/packages.git;a=commit;h=d6b201b8078424481aa8d6dab0c3a38679dd402f">https://git.lede-project.org/?p=feed/pa … 8679dd402f</a></p>											<p class="post-edited">(Last edited by <strong>xicoyihl</strong> on 10 Jan 2018, 19:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370738">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						10 Jan 2018, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi thanks for tour reply,<br />i just install OpenWRT on the router, cause before has a chinise OS, but I can&#039;t install TOR like this guide</p><p>h t t p : //w w w .securityskeptic. c o m /2016/01/how-to-turn-a-nexx-wt3020-router-into-a-tor-router.html</p><p>I connect to the router and install openwrt with this command</p><p>wget h t t p : //downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/openwrt-15.05-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin</p><p>So for u I must re install open WRT?<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370741">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">xicoyihl</div>
					<div class="post-datetime">
						10 Jan 2018, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>openwrt-15.05-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin This is completely outdated and unsuported old software.</p><p>This is the recent version:<br /><a href="https://downloads.openwrt.org/releases/17.01.4/targets/ramips/mt7620/lede-17.01.4-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin">https://downloads.openwrt.org/releases/ … pgrade.bin</a></p><p>After you installed it, you should be able to install the packages.<br />I still recommend you to build your own recent image with the build howto i linked above.</p>											<p class="post-edited">(Last edited by <strong>xicoyihl</strong> on 10 Jan 2018, 19:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370742">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						10 Jan 2018, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I must do, on SSH</p><p>wget htt p s://downloads.openwrt.org/releases/17.01.4/targets/ramips/mt7620/lede-17.01.4-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin</p><p>and after the reboot I&#039;ve the last version of OpenWrt and AFTER I can install tor by packeages?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370743">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">xicoyihl</div>
					<div class="post-datetime">
						10 Jan 2018, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>After the download you have the image on the device in the directory you was when pressing enter. You have to install it then to use it.</p><p>But why are you not using luci for update? Have you not installed luci on your now running software on your router? The non-developer users use typically luci for updating their devices.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370745">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						10 Jan 2018, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>I just use the guide of the site linked before.<br />So for u now I do this</p><p>wget htt p s://downloads.openwrt.org/releases/17.01.4/targets/ramips/mt7620/lede-17.01.4-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin</p><p>And I reinstall OpenWrt but after what I must do for use tor on this device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370747">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">xicoyihl</div>
					<div class="post-datetime">
						10 Jan 2018, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>I cant open your link because it does not load securely.</p><p><a href="https://www.securityskeptic.com/2016/01/how-to-turn-a-nexx-wt3020-router-into-a-tor-router.html">https://www.securityskeptic.com/2016/01 … outer.html</a>&nbsp; &nbsp; &lt;- This is not working.</p><p>I have no idea what stand in this website. I dont use unencrypted http traffic for years. I can recommend you to do same and disable unencrypted traffic in your browser by using <a href="https://addons.mozilla.org/de/firefox/addon/https-everywhere/">https://addons.mozilla.org/de/firefox/a … verywhere/</a> with option &quot;block all unencrypted requests&quot; enabled.</p><p>This site domain name is &quot;securityskeptic&quot; and it does not support secure connections. Sounds like a scam for me. I wont recommend using anything from such website.</p>											<p class="post-edited">(Last edited by <strong>xicoyihl</strong> on 10 Jan 2018, 19:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370753">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						10 Jan 2018, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>I can open the link <a href="http://www.securityskeptic.com/2016/01/how-to-turn-a-nexx-wt3020-router-into-a-tor-router.html">http://www.securityskeptic.com/2016/01/ … outer.html</a> try now</p><p>After I download the package I must do</p><p>mtd_write -r write /lede-17.01.4-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin</p><p>?????</p>											<p class="post-edited">(Last edited by <strong>spider81man</strong> on 10 Jan 2018, 20:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370756">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">xicoyihl</div>
					<div class="post-datetime">
						10 Jan 2018, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Your link is missing the s. Its insecure http like you posted it. It is not normal https. I dont allow my ISP to run MITM attacks so i dont care about unencrypted traffic.<br />Why did you not enable in the https-everywhere addon from the EFF &quot;block all unencrypted requests&quot; like i told you? You would see then the broken security of the website.</p><p>I dont know why you would like to use mtd_write command. I asked you about luci but you did not answer. If you for some reason want to use the command line, then read the official description: <br /><a href="https://wiki.openwrt.org/doc/techref/sysupgrade">https://wiki.openwrt.org/doc/techref/sysupgrade</a><br /><a href="https://wiki.openwrt.org/doc/howto/generic.sysupgrade#sysupgrade_sshterminal_upgrade_procedure">https://wiki.openwrt.org/doc/howto/gene … _procedure</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370762">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						11 Jan 2018, 00:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xicoyihl wrote:</cite><blockquote><p> But why are you not using luci for update? Have you not installed luci on your now running software on your router? The non-developer users use typically luci for updating their devices.</p></blockquote></div><p>i don&#039;t use it cause I did not know it existed <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /> After I intall it what Imust do for use torrent on router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370763">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						11 Jan 2018, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>u can&#039;t open i send here the guide :</p><p>You must purchase a NEXX model that has 8 MB RAM. The simplest installation choice for me was to power the WT3020 through a laptop USB, connect the laptop to the WT3020 LAN port using Ethernet, and to connect WT3020 WAN port to my switch/firewall. To do as I did, open a browser window and connect to the NEXX Web interface at <a href="http://192.168.8.1">http://192.168.8.1</a> and configure for Internet connectivity using the Home and Work option. (Note: I had limited success using the WiFi repeater alternative. My Internet connection kept dropping.)</p><p>Important. I am not aware of any efforts to confirm that the router hasn&#039;t been back-doored. If you know, please share. I&#039;ve elected to use it but use with eyes wide open.</p><p>Install openWRT<br />Once you have an Internet connection, telnet to the WT3020 at 192.168.8.1 using the default Nexx account credentials I show here. I&#039;ve copied the commands I used and the output from the scripts below:</p><p>$ telnet 192.168.8.1<br />Trying 192.168.8.1...<br />Connected to 192.168.8.1.<br />Escape character is &#039;^]&#039;.</p><p>(none) login: nexxadmin<br />Password: y1n2inc.com0755</p><br /><p>BusyBox v1.12.1 (2015-02-05 18:04:51 HKT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p># cd /tmp<br /># wget <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/openwrt-15.">http://downloads.openwrt.org/chaos_calm … penwrt-15.</a><br />05-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin<br />Connecting to downloads.openwrt.org (78.24.191.177:80)<br />openwrt-15.05-ramips 100% |*******************************| 3328k 00:00:00 ETA<br /># mtd_write -r write openwrt-15.05-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin mtd3<br />Unlocking mtd3 ...<br />Writing from openwrt-15.05-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin to mtd3 ... [e]<br />#reboot<br />Warning. Your Nexx may force close telnet. Don&#039;t panic. Reboot via a power cycle.</p><p>At this point, you should be running the openWRT software. Note that openWRT assigns the IP address 192.168.1.1 to the internal LAN port. This is different from what NEXX assigns. If you&#039;re still able to connect to 192.168.8.1, something went awry: lather, rinse, repeat.</p><p>Install OnionWRT<br />Telnet to openWRT and change the root password:</p><p>$ telnet 192.168.1.1<br />Trying 192.168.1.1...<br />Connected to openwrt.lan.<br />Escape character is &#039;^]&#039;.<br />=== IMPORTANT ============================<br />Use &#039;passwd&#039; to set your login password<br />this will disable telnet and enable SSH<br />------------------------------------------</p><p>BusyBox v1.23.2 (2015-07-25 03:03:02 CEST) built-in shell (ash)</p><p>-----------------------------------------------------<br />CHAOS CALMER (15.05, r46767)<br />-----------------------------------------------------<br />* 1 1/2 oz Gin Shake with a glassful<br />* 1/4 oz Triple Sec of broken ice and pour<br />* 3/4 oz Lime Juice unstrained into a goblet.<br />* 1 1/2 oz Orange Juice<br />* 1 tsp. Grenadine Syrup<br />-----------------------------------------------------<br />root@OpenWrt:/# passwd<br />Changing password for root<br />New password: <br />Retype password: <br />Password for root changed by root<br />root@OpenWrt:/# <br />At this point openWRT blocks telnet. You can configure SSH if you haven&#039;t logged out (TL;DR and logged out? openWRT warned you... learn to read). You can also use the web interface, LuCI.</p><p>Configure your Internet connection via LuCI. Take a moment to admire how superior this interface is compared to the original software.</p><p>You&#039;ll want to install the OnionWRT software. Kudos to Paolo&#039;s students, who posted a link to a working script at <a href="http://www.hwupgrade.it/forum/archive/index.php/t-2692919.html">http://www.hwupgrade.it/forum/archive/i … 92919.html</a></p><p>The page is in Italian but simply search for &quot;onionwrt&quot;, use Google translate, or learn Italian:-)</p><p>At your root prompt enter the following wget command. I&#039;ve again illustrated the script output below:</p><p>root@OpenWrt:/# wget -qO - <a href="http://onionwrt.us.to/install">http://onionwrt.us.to/install</a> | sh -<br />Installing tor (0.2.5.12-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/packages/tor_0.2.5.12-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Installing libevent2 (2.0.22-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/base/libevent2_2.0.22-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Installing libopenssl (1.0.2e-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/base/libopenssl_1.0.2e-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Installing zlib (1.2.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/base/zlib_1.2.8-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Installing libpthread (0.9.33.2-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/base/libpthread_0.9.33.2-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Installing librt (0.9.33.2-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/base/librt_0.9.33.2-1_ramips_24kec.ipk.">http://downloads.openwrt.org/chaos_calm … 24kec.ipk.</a><br />Configuring libpthread.<br />Configuring libevent2.<br />Configuring librt.<br />Configuring zlib.<br />Configuring libopenssl.<br />Configuring tor.<br />Warning: Unable to locate ipset utility, disabling ipset support<br />* Flushing IPv4 filter table<br />* Flushing IPv4 nat table<br />* Flushing IPv4 mangle table<br />* Flushing IPv4 raw table<br />* Flushing IPv6 filter table<br />* Flushing IPv6 mangle table<br />* Flushing IPv6 raw table<br />* Flushing conntrack table ...<br />Warning: Unable to locate ipset utility, disabling ipset support<br />* Populating IPv4 filter table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Rule &#039;Allow-DHCP-Renew&#039;<br />* Rule &#039;Allow-Ping&#039;<br />* Rule &#039;Allow-IGMP&#039;<br />* Rule #7<br />* Rule #8<br />* Forward &#039;lan&#039; -&gt; &#039;wan&#039;<br />* Populating IPv4 nat table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Populating IPv4 mangle table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Populating IPv4 raw table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Populating IPv6 filter table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Rule &#039;Allow-DHCPv6&#039;<br />* Rule &#039;Allow-MLD&#039;<br />* Rule &#039;Allow-ICMPv6-Input&#039;<br />* Rule &#039;Allow-ICMPv6-Forward&#039;<br />* Rule #7<br />* Rule #8<br />* Forward &#039;lan&#039; -&gt; &#039;wan&#039;<br />* Populating IPv6 mangle table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Populating IPv6 raw table<br />* Zone &#039;lan&#039;<br />* Zone &#039;wan&#039;<br />* Flushing conntrack table ...<br />* Set tcp_ecn to off<br />* Set tcp_syncookies to on<br />* Set tcp_window_scaling to on<br />* Running script &#039;/etc/firewall.user&#039;<br />root@OpenWrt:/# <br />You&#039;re done. Confirm that you&#039;re on the Tor network by visiting <a href="https://check.torproject.org/">https://check.torproject.org/</a></p><p>UsesTOR</p><p>I take no credit for any of the brilliance here. I have really smart friends.</p><p>I will also take no abuse for broken external links, but if you find one on this page, contact me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370765">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						11 Jan 2018, 01:39					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>wget -qO - http://onionwrt.us.to/install | sh -</code></pre></div><p>This would download a script from the website and immediately execute it on your router, but the machine at onionwrt.us.to is now broken, it has no http server.&nbsp; Thus this happens:</p><div class="codebox"><pre><code>wget: can&#039;t connect to remote host (2.139.236.123):
Connection refused </code></pre></div><p>That&#039;s probably good, you should not run some unknown script on your router.&nbsp; Again, that &quot;wget | sh&quot; command would give whatever script is on the website (or, since it is not a secure connection, a man in the middle) complete root access to your router.&nbsp; It could do anything, such as installing malware or probing / hacking machines on your LAN.</p><p>Find some instructions that do not involve the &#039;onionwrt&#039; site.&nbsp; It is not working.&nbsp; And a bad idea in the first place.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 11 Jan 2018, 02:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370780">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">spider81man</div>
					<div class="post-datetime">
						11 Jan 2018, 09:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><div class="codebox"><pre><code>wget -qO - http://onionwrt.us.to/install | sh -</code></pre></div><p>This would download a script from the website and immediately execute it on your router, but the machine at onionwrt.us.to is now broken, it has no http server.&nbsp; Thus this happens:</p><div class="codebox"><pre><code>wget: can&#039;t connect to remote host (2.139.236.123):
Connection refused </code></pre></div><p>That&#039;s probably good, you should not run some unknown script on your router.&nbsp; Again, that &quot;wget | sh&quot; command would give whatever script is on the website (or, since it is not a secure connection, a man in the middle) complete root access to your router.&nbsp; It could do anything, such as installing malware or probing / hacking machines on your LAN.</p><p>Find some instructions that do not involve the &#039;onionwrt&#039; site.&nbsp; It is not working.&nbsp; And a bad idea in the first place.</p></blockquote></div><p>Ok I understand now I use the commanda sysupgrade -v ede-17.01.4-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin for upgrade the firmware but after what I must do for install TOR? I want all the traffic from this router is under TOR, it&#039;s possible??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370799">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						11 Jan 2018, 22:18					</div>
				</div>
				<div class="post-content content">
					<p>Install OpenWrt<br />Connect router to the Internet<br />ssh to router command line<br /><strong>opkg update</strong><br /><strong>opkg install tor</strong><br /><strong>opkg install nano</strong> (nano is a file editor much easier to use than vi)<br /><em>Google</em> &quot;tor on openwrt&quot; and find for example this:<br /><a href="https://medium.com/openwrt-iot/lede-openwrt-setting-up-tor-bebc2828d71a">https://medium.com/openwrt-iot/lede-ope … bc2828d71a</a><br />Make sure it is a guide for a recent version.&nbsp; In general these guides will have you:<br />* Create a new network for your tor&#039;d traffic, separate from the router&#039;s LAN<br />* Create a wifi AP linked to this network so you can use it<br />* Create a firewall zone to forward traffic out of the tor&#039;d network to tor client<br />* Configure /etc/tor/torrc and start the tor program</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 11 Jan 2018, 22:19)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>