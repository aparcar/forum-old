<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Developing Support for TPLINK WDR4900</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Oct 2014 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 9 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=11.html">11</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p209247">
				<div class="post-metadata">
					<div class="post-num">Post #201</div>
					<div class="post-author">artteam</div>
					<div class="post-datetime">
						8 Aug 2013, 10:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Horst_Tappert wrote:</cite><blockquote><p>On another note, has anybody already determined the maximum throughput of the WDR4900 as an OpenVPN client? <br />The raw benchmark published would lead me to believe that about double of the WDR4300&#039;s performance should be reached, i.e. close to the maximum of my connection, 60Mbit down and 6Mbit up. <br />I&#039;d be interested in getting a confirmation of this.</p></blockquote></div><p>I have 100M/5M DOWN/UP link connected to WDR4900<br />Using DH 1024, AES-256-CBC, TAP, UDP, LZO and &#039;redirect-gateway def1&#039;- from remote location i&#039;m getting ~4,4M stable link DOWN/UP with sys usage as below:</p><p>Mem: 41400K used, 85200K free, 0K shrd, 1620K buff, 9856K cached<br />CPU:&nbsp; 16% usr&nbsp; &nbsp;6% sys&nbsp; &nbsp;0% nic&nbsp; 67% idle&nbsp; &nbsp;0% io&nbsp; &nbsp;0% irq&nbsp; &nbsp;9% sirq<br />Load average: 0.09 0.10 0.13<br />&nbsp; PID&nbsp; PPID USER&nbsp; &nbsp; &nbsp;STAT&nbsp; &nbsp;VSZ&nbsp; &nbsp; %VSZ %CPU COMMAND<br /> 3143&nbsp; &nbsp; &nbsp;1&nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp;R&nbsp; &nbsp; &nbsp; &nbsp; 3372&nbsp; &nbsp;3%&nbsp; &nbsp; &nbsp;18%&nbsp; &nbsp; /usr/sbin/openvpn --syslog openvpn(la</p>											<p class="post-edited">(Last edited by <strong>artteam</strong> on 9 Aug 2013, 09:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209323">
				<div class="post-metadata">
					<div class="post-num">Post #202</div>
					<div class="post-author">kaefert</div>
					<div class="post-datetime">
						9 Aug 2013, 08:01					</div>
				</div>
				<div class="post-content content">
					<p>Is anyone able to run openwrt on this model, and have it run stable with wifi performance at least close to the stock firmware?</p><p>I&#039;ve tried r375 from the 26th June and I&#039;ve tried r377 from yesterday morning, both give me horrible wifi performance (sometimes I get latency &gt; 100ms &amp; bandwith a few kb/s)<br />Also sometimes the router become completly unresponsive (but the lan switch still works, though no ssh &amp; no luci till I power cycle)</p><p>I&#039;m on stock-firmware again for now, because of those problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209368">
				<div class="post-metadata">
					<div class="post-num">Post #203</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						9 Aug 2013, 20:05					</div>
				</div>
				<div class="post-content content">
					<p>As I described before - the following is working for me (without latency problems) with&nbsp; LuCI Trunk (svn-r9875) OpenWrt Barrier Breaker r37709:</p><p>SSID1<br />- Channel: 44 (5.220 GHz)<br />- 40MHz 2nd Channel above<br />- NO(!) Force 40MHz mode. If I enable this my router crashes<br />- 17dBm<br />- WMM Mode<br />- WPA2-PSK&nbsp; / CCMP-AES</p><p>SSID2<br />- Channel: 6 (2.437 GHz)<br />- 40MHz 2nd Channel above<br />- NO(!) Force 40MHz mode. If I enable this my router crashes<br />- 20dBm<br />- WMM Mode<br />- WPA2-PSK&nbsp; / CCMP-AES</p><p>SSID3<br />- Channel: 6 (2.437 GHz)<br />- 40MHz 2nd Channel above<br />- NO(!) Force 40MHz mode. If I enable this my router crashes<br />- 20dBm<br />- WMM Mode<br />- WPA2-PSK&nbsp; / CCMP-AES</p>											<p class="post-edited">(Last edited by <strong>vanhaakonnen</strong> on 9 Aug 2013, 20:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209461">
				<div class="post-metadata">
					<div class="post-num">Post #204</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						10 Aug 2013, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>I want to confirm the &quot;unresponsive&quot; crashes discribed here.<br />Since 4 Month i had used the device with an older trunk.<br />The r number is Lost but i am 100% sure it was kernel 3.8!<br />So maybe something to investigate here??<br />With that older build i never had such issues.<br />The VPN performance was totally great! There never was such a<br />Openwrt device in that price segment which has this VPN throughput.</p><p>I also tried it 5days without any wireless device enabled, no USB, nothing.<br />When i put heavy traffic over the switch (about 800mbits) you can count<br />from ten down till it becomes unresponsive. nothing in logread -f and dmesg<br />not possible then anymore.</p><p>Maybe someone has a serial console on it and can reproduce theese crashes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209483">
				<div class="post-metadata">
					<div class="post-num">Post #205</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						11 Aug 2013, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re right. I was so sure it has to be something with the wlan 40MHz setting... If I put high troughput on my device it also crashes... (tested with netio) <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p><strong>Please write your testing results also in the bug-report: <a href="https://dev.openwrt.org/ticket/14020">https://dev.openwrt.org/ticket/14020</a></strong></p>											<p class="post-edited">(Last edited by <strong>vanhaakonnen</strong> on 11 Aug 2013, 11:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209484">
				<div class="post-metadata">
					<div class="post-num">Post #206</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						11 Aug 2013, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m still using r36353 (with kernel 3.8.7) with 100+ days of uptime. Wireless performance is nice and device is completely stable with no single crash over last months. Looks like something is definitely broken in newer revisions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209490">
				<div class="post-metadata">
					<div class="post-num">Post #207</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						11 Aug 2013, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to downgrade to the older version of the trunk and can I still use opkg to install new software or do we have to wait to get the problem fixed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209492">
				<div class="post-metadata">
					<div class="post-num">Post #208</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						11 Aug 2013, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>You can Build an older Svn checkout.<br />BTW in which r has the Kernel changed?</p><p>@vanhakonnen<br />This Ticket was created by me <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>derdigge</strong> on 11 Aug 2013, 14:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209509">
				<div class="post-metadata">
					<div class="post-num">Post #209</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						11 Aug 2013, 20:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>derdigge wrote:</cite><blockquote><p>You can Build an older Svn checkout.<br />BTW in which r has the Kernel changed?</p></blockquote></div><p>r37472 is the last revision with 3.8 kernel.<br />Don&#039;t know whether the device is working fine there, though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209513">
				<div class="post-metadata">
					<div class="post-num">Post #210</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						11 Aug 2013, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>I will Check that next week<br />Also i ordernd an usb2serial Adapter to have a Look at that error.<br />But i am pretty sure that the skills are missing to fix that on my own<br />In 3.10</p>											<p class="post-edited">(Last edited by <strong>derdigge</strong> on 11 Aug 2013, 20:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209609">
				<div class="post-metadata">
					<div class="post-num">Post #211</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						12 Aug 2013, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>Many of the Sources Downloadlinks were broken in r37472.<br />So after hunting all those tarballs here i have an Image r37472 with luci/samba/openvpn.<br />I can not test it on my own until Wednesday maybe someone can stress it with tcp traffic and see if it crashes.</p><p><a href="http://www.file-upload.net/download-7954331/openwrt-mpc85xx-generic-tl-wdr4900-v1-squashfs-factory.bin.html">http://www.file-upload.net/download-795 … y.bin.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209628">
				<div class="post-metadata">
					<div class="post-num">Post #212</div>
					<div class="post-author">jkso</div>
					<div class="post-datetime">
						13 Aug 2013, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, I&#039;ll try and test.</p><p>EDIT: By the way. I now placed the device on some books on the edges so that it runs cooler. No hangup since then but I didn&#039;t test with much throughput, though.</p>											<p class="post-edited">(Last edited by <strong>jkso</strong> on 13 Aug 2013, 00:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209662">
				<div class="post-metadata">
					<div class="post-num">Post #213</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						13 Aug 2013, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>I dont think that Heat is our Problem here.<br />The most People here and Those i am in private conversation <br />Confirmed that it crashes on High tcp throughput.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209666">
				<div class="post-metadata">
					<div class="post-num">Post #214</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						13 Aug 2013, 13:01					</div>
				</div>
				<div class="post-content content">
					<p>That´s why I posted my netio results to the bug-report. UDP is absolutely no problem.<br />I thought that it could be a problem with the firewall... but it also freezes with the firewall disabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209673">
				<div class="post-metadata">
					<div class="post-num">Post #215</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						13 Aug 2013, 13:59					</div>
				</div>
				<div class="post-content content">
					<p>@vanhaakonnen<br />Can you please try to Crash the Image from Post 211 here.<br />Please try netio method as you did in post 205. We need to isolate<br />The problem more ecxatly so the dev Ticket will cause any result some Day.</p><p>If we definitly know that kernel 3.8.13 doesent crash i can diff the kernelcode<br />Between this versions for mpc85xx and See what devs made here, to make our lifes so &quot;easy&quot; in<br />3.10 <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209733">
				<div class="post-metadata">
					<div class="post-num">Post #216</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						14 Aug 2013, 09:15					</div>
				</div>
				<div class="post-content content">
					<p>sure <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>OpenWrt Barrier Breaker r37472 / LuCI Trunk (svn-r9881) <br />Kernel 3.8.13</p><p>&gt;&gt; NetIO with UDP and TCP are no problem. Nothing crashes &lt;&lt;</p><p>Is it possible that the device names or drivers has changed in the newer kernel versions? In 3.8.13 there are two &quot;Generic 802.11 Wireless Controller&quot;. In the newest kernel I can see one &quot;Generic MAC80211 802.11bgn&quot; and another &quot;Generic MAC80211 802.11an&quot;. Maybe there is a lot related to the drivers that has changed in the newer code...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209736">
				<div class="post-metadata">
					<div class="post-num">Post #217</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						14 Aug 2013, 09:34					</div>
				</div>
				<div class="post-content content">
					<p>Back on the the newest build (BARRIER BREAKER (Bleeding Edge, r37708)) it crashes again under load with tcp</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209752">
				<div class="post-metadata">
					<div class="post-num">Post #218</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						14 Aug 2013, 11:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vanhaakonnen wrote:</cite><blockquote><p>sure <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>OpenWrt Barrier Breaker r37472 / LuCI Trunk (svn-r9881) <br />Kernel 3.8.13</p><p>&gt;&gt; NetIO with UDP and TCP are no problem. Nothing crashes &lt;&lt;</p><p>Is it possible that the device names or drivers has changed in the newer kernel versions? In 3.8.13 there are two &quot;Generic 802.11 Wireless Controller&quot;. In the newest kernel I can see one &quot;Generic MAC80211 802.11bgn&quot; and another &quot;Generic MAC80211 802.11an&quot;. Maybe there is a lot related to the drivers that has changed in the newer code...</p></blockquote></div><p>jep same here ~2h 800mbit fullspeed, no crash.<br />I build an Image(latest trunk) without any Wireless and i will test</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209772">
				<div class="post-metadata">
					<div class="post-num">Post #219</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						14 Aug 2013, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>If we have found out that r37472 is working stable, then it will be interesting to compile and test r37473, which is the first revision with 3.10 kernel. If it somehow will appear to work fine as well, then those crashes aren&#039;t directly related to kernel upgrade only.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209919">
				<div class="post-metadata">
					<div class="post-num">Post #220</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						16 Aug 2013, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>it definitly crashes since r37473.<br />Today i build both and testet twice.<br />I generate tcp traffic from a vlaned nas using gnu wget,<br />it crashes faster than using netio.</p><p>Clean Install of r37473 = tcptraffic .... crash -&gt; reboot -&gt; tcptraffic .... crash</p><p>Clean Install of r37472 = tcptraffic fo 30 Minutes .... stable -&gt; reboot -&gt; tcptraffic for 60 Minutes ..... stable</p><p>Clean Install of r37473 = tcptraffic .... crash -&gt; reboot -&gt; tcptraffic .... crash</p><p>Clean Install of r37472 = tcptraffic fo 30 Minutes .... stable -&gt; reboot -&gt; tcptraffic for 60 Minutes ..... stable</p><p>So thats definitly fact now.<br />Tommorrow i will try to find something inside kernelcode. <br />But i am definitly not the one you should ecxpect results here.<br />My skills are to low.....</p>											<p class="post-edited">(Last edited by <strong>derdigge</strong> on 16 Aug 2013, 00:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209956">
				<div class="post-metadata">
					<div class="post-num">Post #221</div>
					<div class="post-author">jkso</div>
					<div class="post-datetime">
						16 Aug 2013, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>My skills are even lower since I have to ask a total noob question:</p><p>How to downgrade? Can I just flash the &quot;openwrt-mpc85xx-generic-tl-wdr4900-v1-squashfs-factory.bin&quot; that derdigge built via LuCi&#039;s update mechnism?</p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209994">
				<div class="post-metadata">
					<div class="post-num">Post #222</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						17 Aug 2013, 09:45					</div>
				</div>
				<div class="post-content content">
					<p>You can always install a full factory image instead of an upgrade image.</p>											<p class="post-edited">(Last edited by <strong>vanhaakonnen</strong> on 18 Aug 2013, 20:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210287">
				<div class="post-metadata">
					<div class="post-num">Post #223</div>
					<div class="post-author">vanhaakonnen</div>
					<div class="post-datetime">
						21 Aug 2013, 08:38					</div>
				</div>
				<div class="post-content content">
					<p>Any news? Has someone tried to get the error message with a serial console cable?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210340">
				<div class="post-metadata">
					<div class="post-num">Post #224</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						21 Aug 2013, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>I habe a serial cable here, but still not connected. I hope i find some time next week for that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210353">
				<div class="post-metadata">
					<div class="post-num">Post #225</div>
					<div class="post-author">dalius</div>
					<div class="post-datetime">
						21 Aug 2013, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Curious what the error is.... had to check out at r37472&nbsp; to make it stable</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 226 to 225 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 9 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=11.html">11</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>