<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Missing openwrt-kirkwood-Dockstar-jffs2-128k.img on daily snapshot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p116483">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						5 Sep 2010, 04:37					</div>
				</div>
				<div class="post-content content">
					<p>According to this <a href="http://wiki.openwrt.org/toh/seagate/dockstar">HOWTO</a>, one needs the following three files to flash an OpenWRT firmware to a Seagate DockStar:</p><p>&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; openwrt-kirkwood-dockstar-u-boot.bin<br />&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; openwrt-kirkwood-Dockstar-jffs2-128k.img<br />&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; openwrt-kirkwood-uImage</p><p>Unfortunately, the <a href="http://downloads.openwrt.org/snapshots/trunk/kirkwood">snapshots</a> directory for kirkwood didn&#039;t contain the <em>openwrt-kirkwood-Dockstar-jffs2-128k.img</em> file (as of this writing). <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116648">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						8 Sep 2010, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>I compiled my own dockstar openwrt following Lars <a href="http://wiki.openwrt.org/toh/seagate/dockstar">HowTo</a></p><p>But something went wrong</p><div class="quotebox"><blockquote><p>Starting kernel ...</p><p>Uncompressing Linux... done, booting the kernel.<br />Linux version 2.6.35.4 (felix@bflinux) (gcc version 4.3.3 (GCC) ) #1 Tue Sep 7 23:34:10 CEST 2010<br />CPU: Feroceon 88FR131 [56251311] revision 1 (ARMv5TE), cr=00053177<br />CPU: VIVT data cache, VIVT instruction cache<br />Machine: Seagate FreeAgent DockStar<br />Memory policy: ECC disabled, Data cache writeback<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32512<br />Kernel command line: console=ttyS0,115200 mtdparts=orion_nand:1M(u-boot),1M@1M(second_stage_u-boot),3M@2M(kernel),32M@5M(rootfs),219M@37M(data) rw root=/dev/mtdblock3 rw rootfstype=jffs2<br />PID hash table entries: 512 (order: -1, 2048 bytes)<br />Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Memory: 128MB = 128MB total<br />Memory: 126972k/126972k available, 4100k reserved, 0K highmem<br />Virtual kernel memory layout:<br />&nbsp; &nbsp; vector&nbsp; : 0xffff0000 - 0xffff1000&nbsp; &nbsp;(&nbsp; &nbsp;4 kB)<br />&nbsp; &nbsp; fixmap&nbsp; : 0xfff00000 - 0xfffe0000&nbsp; &nbsp;( 896 kB)<br />&nbsp; &nbsp; DMA&nbsp; &nbsp; &nbsp;: 0xffc00000 - 0xffe00000&nbsp; &nbsp;(&nbsp; &nbsp;2 MB)<br />&nbsp; &nbsp; vmalloc : 0xc8800000 - 0xfe800000&nbsp; &nbsp;( 864 MB)<br />&nbsp; &nbsp; lowmem&nbsp; : 0xc0000000 - 0xc8000000&nbsp; &nbsp;( 128 MB)<br />&nbsp; &nbsp; modules : 0xbf000000 - 0xc0000000&nbsp; &nbsp;(&nbsp; 16 MB)<br />&nbsp; &nbsp; &nbsp; .init : 0xc0008000 - 0xc0021000&nbsp; &nbsp;( 100 kB)<br />&nbsp; &nbsp; &nbsp; .text : 0xc0021000 - 0xc02bd000&nbsp; &nbsp;(2672 kB)<br />&nbsp; &nbsp; &nbsp; .data : 0xc02be000 - 0xc02d5340&nbsp; &nbsp;(&nbsp; 93 kB)<br />NR_IRQS:114<br />Calibrating delay loop... 1192.75 BogoMIPS (lpj=5963776)<br />pid_max: default: 32768 minimum: 301<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />NET: Registered protocol family 16<br />Kirkwood: MV88F6281-A0, TCLK=200000000.<br />Feroceon L2: Cache support initialised.<br />bio: create slab &lt;bio-0&gt; at 0<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />Switching to clocksource orion_clocksource<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />TCP: Hash tables configured (established 4096 bind 4096)<br />TCP reno registered<br />UDP hash table entries: 256 (order: 0, 4096 bytes)<br />UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />msgmni has been set to 247<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 33) is a 16550A<br />console [ttyS0] enabled<br />NAND device: Manufacturer ID: 0x2c, Chip ID: 0xda (Micron NAND 256MiB 3,3V 8-bit)<br />Scanning device for bad blocks<br />5 cmdlinepart partitions found on MTD device orion_nand<br />Creating 5 MTD partitions on &quot;orion_nand&quot;:<br />0x000000000000-0x000000100000 : &quot;u-boot&quot;<br />0x000000100000-0x000000200000 : &quot;second_stage_u-boot&quot;<br />0x000000200000-0x000000500000 : &quot;kernel&quot;<br />0x000000500000-0x000002500000 : &quot;rootfs&quot;<br />0x000002500000-0x000010000000 : &quot;data&quot;<br />MV-643xx 10/100/1000 ethernet driver version 1.4<br />mv643xx_eth smi: probed<br />net eth0: port 0 with MAC address 00:10:75:1a:d1:c3<br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />orion-ehci orion-ehci.0: Marvell Orion EHCI<br />orion-ehci orion-ehci.0: new USB bus registered, assigned bus number 1<br />orion-ehci orion-ehci.0: irq 19, io mem 0xf1050000<br />orion-ehci orion-ehci.0: USB 2.0 started, EHCI 1.00<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />usb 1-1: new high speed USB device using orion-ehci and address 2<br />hub 1-1:1.0: USB hub found<br />hub 1-1:1.0: 4 ports detected<br />rtc-mv rtc-mv: internal RTC not ticking<br />i2c /dev entries driver<br />cpuidle: using governor ladder<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />drivers/rtc/hctosys.c: unable to open rtc device (rtc0)<br />VFS: Mounted root (jffs2 filesystem) on device 31:3.<br />Freeing init memory: 100K<br />/etc/preinit: line 38: awk: not found<br />JFFS2 warning: (694) jffs2_do_read_inode_internal: Truncating ino #379 to 11476 bytes failed because it only had 3000 bytes to start with!</p></blockquote></div><p>Any hints what I did wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116657">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">z80yyz</div>
					<div class="post-datetime">
						8 Sep 2010, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>Likely cause is that the size of your jffs2 image are larger than what was expected in the instructions. that was the root cause when this message happened to me. But the kernel was up and running, I coul interact etc. That is not obvious from your output.</p><p>Try building &#039;out of the box&#039; first and flashing that. If that works then start customizing.</p><p>I am awaiting the application of a patch to do the auto build of jffs2 image.&nbsp; Add your name to Trac 7886 to get a notification of when this occurs.</p><p>Gerrit</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116726">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						8 Sep 2010, 23:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>z80yyz wrote:</cite><blockquote><p>Likely cause is that the size of your jffs2 image are larger than what was expected in the instructions. that was the root cause when this message happened to me. But the kernel was up and running, I coul interact etc. That is not obvious from your output.</p><p>Try building &#039;out of the box&#039; first and flashing that. If that works then start customizing.</p><p>I am awaiting the application of a patch to do the auto build of jffs2 image.&nbsp; Add your name to Trac 7886 to get a notification of when this occurs.</p><p>Gerrit</p></blockquote></div><p>Thx Gerrit...it&#039;s working&nbsp; fine now</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120196">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">z80yyz</div>
					<div class="post-datetime">
						2 Nov 2010, 03:36					</div>
				</div>
				<div class="post-content content">
					<p>The builds are working again in <a href="http://downloads.openwrt.org/snapshots/trunk/kirkwood/">http://downloads.openwrt.org/snapshots/trunk/kirkwood/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122148">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">supremedalek</div>
					<div class="post-datetime">
						28 Nov 2010, 18:18					</div>
				</div>
				<div class="post-content content">
					<p>Gerrit, does that mean I need to generate the file openwrt-kirkwood-Dockstar-jffs2-128k.img by myself? Isn&#039;t there a plain vanilla one I can use, so I can make sure everything works before customizing my root?</p><p>Reason I ask is that reading <a href="https://dev.openwrt.org/ticket/7886">https://dev.openwrt.org/ticket/7886</a> and <a href="https://forum.openwrt.org/viewtopic.php?id=27043">https://forum.openwrt.org/viewtopic.php?id=27043</a> make me feel that file should be available in <a href="http://downloads.openwrt.org/snapshots/trunk/kirkwood/">http://downloads.openwrt.org/snapshots/trunk/kirkwood/</a>. But, I have been wrong before, so... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>supremedalek</strong> on 28 Nov 2010, 19:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122193">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">z80yyz</div>
					<div class="post-datetime">
						29 Nov 2010, 05:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi <br />The file should be available but for some reason it isn&#039;t. <br />I am away for the next 5 months out of town so can&#039;t do much with openwrt. I suggest getting on IRC and asking there. or join the Dev list. User &#039;jow&#039; is very responsive to questions as well.</p><p>Gerrit</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122223">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						29 Nov 2010, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>z80yyz wrote:</cite><blockquote><p>The file should be available but for some reason it isn&#039;t.</p></blockquote></div><p>Agree. Yesterday, I just &#039;svn up; to r24191 and the build generated the following image files which includes the openwrt-kirkwood-Sheevaplug-jffs2-128k.img fimrware:<br /></p><div class="codebox"><pre><code>md5sums                        openwrt-kirkwood-sheevaplug-u-boot.bin
openwrt-kirkwood-dockstar-u-boot.bin        openwrt-kirkwood-sheevaplug-u-boot.kwb
openwrt-kirkwood-dockstar-u-boot.kwb        openwrt-kirkwood-uImage
openwrt-kirkwood-iconnect-u-boot.bin        packages
openwrt-kirkwood-iconnect-u-boot.kwb        uboot-kirkwood-dockstar
openwrt-kirkwood-rootfs.tar.gz            uboot-kirkwood-iconnect
openwrt-kirkwood-Sheevaplug-jffs2-128k.img  uboot-kirkwood-sheevaplug
openwrt-kirkwood-Sheevaplug-jffs2-64k.img</code></pre></div><div class="quotebox"><blockquote><p>I am away for the next 5 months out of town so can&#039;t do much with openwrt. I suggest getting on IRC and asking there. or join the Dev list. User &#039;jow&#039; is very responsive to questions as well.</p></blockquote></div><p>Gerrit, enjoy your vacation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122226">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						29 Nov 2010, 17:21					</div>
				</div>
				<div class="post-content content">
					<p>The buildbots do not build subtargets atm, therfore no Dockstar images, just the generic ones.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122659">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">yawlhoo</div>
					<div class="post-datetime">
						5 Dec 2010, 18:18					</div>
				</div>
				<div class="post-content content">
					<p>Not to thump my own drum, but as I have posted previously (<a href="https://forum.openwrt.org/viewtopic.php?pid=121452#p121452">https://forum.openwrt.org/viewtopic.php … 52#p121452</a>), IF you have the lzma-enabled mkfs.jffs2 from a trunk build (not necessary to build images, just the host tools) you can download the buildbot rootfs.tar.gz and build the needed image (openwrt-kirkwood-Dockstar-jffs2-128k.img) yourself:</p><p>0) create a new build directory, cd to it, create a directory ram, cd to it, and untar the snapshot file openwrt-kirkwood-rootfs.tar.gz:</p><p>mkdir ram<br />cd ram<br />tar xzf ../openwrt-kirkwood-rootfs.tar.gz<br />cd ..</p><p>1) run the following:</p><p>mkfs.jffs2 --little-endian --squash -v -X rtime -X lzma --compression-mode=size -x zlib --pagesize=0x800 --no-cleanmarkers --pad -e 128KiB -o root.jffs2-128 -d ram</p><p>2) add header to the intermediary file root.jffs2-128k:</p><p>echo -ne &#039;\xde\xad\xc0\xde&#039; &gt;&gt; root.jffs2-128k</p><p>3) create the required rootfs image:</p><p>dd if=root.jffs2-128k of=openwrt-kirkwood-Dockstar-jffs2-128k.img bs=2048 conv=sync</p><p>I have used this technique on two reflashs of my Dockstar and everything works perfectly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125079">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">watermark</div>
					<div class="post-datetime">
						10 Jan 2011, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>There is a typo here. root.jffs2-128 should be root.jffs2-128k.</p><div class="quotebox"><cite>yawlhoo wrote:</cite><blockquote><p>1) run the following:</p><p>mkfs.jffs2 --little-endian --squash -v -X rtime -X lzma --compression-mode=size -x zlib --pagesize=0x800 --no-cleanmarkers --pad -e 128KiB -o root.jffs2-128 -d ram</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125105">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">yawlhoo</div>
					<div class="post-datetime">
						11 Jan 2011, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks.&nbsp; I have slightly automated this process with a shell script and in posting my previous message there was a slip cutting and pasting the text.&nbsp; BTW, I have used this at least a couple of more times in reflashing my dockstar and it keeps working perfectly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128741">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">delirium</div>
					<div class="post-datetime">
						18 Feb 2011, 06:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yawlhoo wrote:</cite><blockquote><p>Thanks.&nbsp; I have slightly automated this process with a shell script and in posting my previous message there was a slip cutting and pasting the text.&nbsp; BTW, I have used this at least a couple of more times in reflashing my dockstar and it keeps working perfectly.</p></blockquote></div><p>Hi, I&#039;m putting openwrt on my dockstar, and I&#039;m fairly certain the only thing that <a href="http://downloads.openwrt.org/snapshots/trunk/kirkwood/">http://downloads.openwrt.org/snapshots/trunk/kirkwood/</a> is lacking is the jffs2 file, I was wondering if you could provide your openwrt-kirkwood-Dockstar-jffs2-128k.img that you&#039;d generated for the Feb-08 snapshot, thank you!</p><p>I managed to get this built (and included some wireless and usb drivers) and flashed it to my openwrt <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> thanks for the awesome software!</p>											<p class="post-edited">(Last edited by <strong>delirium</strong> on 18 Feb 2011, 13:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129634">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">yawlhoo</div>
					<div class="post-datetime">
						28 Feb 2011, 03:17					</div>
				</div>
				<div class="post-content content">
					<p>Some time ago delirium wrote (and, I just noticed this posting today):</p><p>&quot;I was wondering if you could provide your openwrt-kirkwood-Dockstar-jffs2-128k.img that you&#039;d generated for the Feb-08 snapshot, thank you!&quot;</p><p>You can get this here:</p><p><a href="http://www.mediafire.com/?sp5e5l8i641d58n">http://www.mediafire.com/?sp5e5l8i641d58n</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>