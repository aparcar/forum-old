<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mwan3; multi-wan policy routing (general topic)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 May 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 45 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=43.html">43</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=44.html">44</a></li><li class="pagination-current"><span>45</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=46.html">46</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=47.html">47</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p259983">
				<div class="post-metadata">
					<div class="post-num">Post #1101</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						5 Jan 2015, 02:01					</div>
				</div>
				<div class="post-content content">
					<p>Nice! Your welcome.</p><p>For the record: In version 1.5-9 (latest) it is lines 159 and 170.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260451">
				<div class="post-metadata">
					<div class="post-num">Post #1102</div>
					<div class="post-author">ayr0</div>
					<div class="post-datetime">
						7 Jan 2015, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>@Adze: Thank you so much for you help the other week.&nbsp; Your explanation was very enlightening.&nbsp; I was able to get a basic failover system working.&nbsp; Again, thanks.</p><p>Is mwan3 capable of dynamic load balancing to ensure a minimum connection speed?&nbsp; For example, always prefer 100% traffic to wan unless it slows down to much then gradually reroute traffic to wan2 until wan becomes faster, then reroute traffic back to wan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260541">
				<div class="post-metadata">
					<div class="post-num">Post #1103</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						8 Jan 2015, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>Hello All! Has somebody successfully operating mwan3(or mwan) and OpenVPN client? I have &quot;Attitude Ajustment&quot; on DIR-600. Please tell about successfull configure mwan3+opnevpn client.</p><p>wan is eth0.2 192.170.1.70<br />tun0 is 10.16.10.10<br />br-lan (LAN+WLAN0 bridge) 192.168.1.1<br />wlan0-1 192.168.2.1</p><p>I need send traffic from wlan0-1 to tun0 and br-lan to eth0.2. Is it possible?</p><p>PS I tried mwan, but I hadn&#039;t success</p>											<p class="post-edited">(Last edited by <strong>Senya</strong> on 8 Jan 2015, 13:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260589">
				<div class="post-metadata">
					<div class="post-num">Post #1104</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						8 Jan 2015, 19:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ayr0 wrote:</cite><blockquote><p>@Adze: Thank you so much for you help the other week.&nbsp; Your explanation was very enlightening.&nbsp; I was able to get a basic failover system working.&nbsp; Again, thanks.</p><p>Is mwan3 capable of dynamic load balancing to ensure a minimum connection speed?&nbsp; For example, always prefer 100% traffic to wan unless it slows down to much then gradually reroute traffic to wan2 until wan becomes faster, then reroute traffic back to wan.</p></blockquote></div><p>Mwan3 is not designed for this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260612">
				<div class="post-metadata">
					<div class="post-num">Post #1105</div>
					<div class="post-author">cblack</div>
					<div class="post-datetime">
						8 Jan 2015, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi - really appreciate your contributions and support.&nbsp; I was hoping this issue of mine is something simple. <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>I&#039;ve dug into one spot where I see an issue during mwan3_set_iface_route:<br /></p><div class="codebox"><pre><code>mwan3_set_iface_route()
{
    $IP route flush table $iface_id
    [ $ACTION == &quot;ifup&quot; ] &amp;&amp; $IP route add table $iface_id default $route_args
}</code></pre></div><p>(some logs here to show function arguments for my system)<br /></p><div class="codebox"><pre><code>Thu Jan  8 20:20:48 2015 user.notice mwan3: ifup interface wan (wlan0)
Thu Jan  8 20:20:48 2015 user.notice mwan3: +mwan3_set_iface_iptables -- DEVICE: wlan0, INTERFACE: wan
Thu Jan  8 20:20:48 2015 user.notice mwan3: +mwan3_set_iface_route -- iface_id: 1, route_args: nexthop via 192.168.30.1 dev wlan0
Thu Jan  8 20:20:48 2015 user.notice mwan3: +mwan3_set_iface_rules -- DEVICE: wlan0, INTERFACE: wan</code></pre></div><p>When trying to enter the commands manually, I get:</p><p>root@OpenWrt:/# ip -4 route flush table 1<br />root@OpenWrt:/# ip -4 route add table 1 default nexthop via 192.168.30.1 dev wlan0<br />RTNETLINK answers: Invalid argument</p><br /><p>This causes the entries to not be added in table 1,2 respectively and the mwan3 status call to report an error on each interface.</p><p>It would seem that the &#039;nexthop&#039; argument is causing the issues.&nbsp; Any ideas?<br />thanks!</p><br /><p>config/network:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;
        option metric 0

config globals &#039;globals&#039;
        option ula_prefix &#039;fd3a:0e88:acc6::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.2.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option metric 0

config interface &#039;wan&#039;
        option proto &#039;dhcp&#039;
        option metric 10

config interface &#039;wan2&#039;
        option proto &#039;dhcp&#039;
        option ifname &#039;usb0&#039;
        option iface &#039;usb0&#039;
        option metric 20</code></pre></div>											<p class="post-edited">(Last edited by <strong>cblack</strong> on 8 Jan 2015, 22:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260613">
				<div class="post-metadata">
					<div class="post-num">Post #1106</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						8 Jan 2015, 23:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cblack wrote:</cite><blockquote><p>When trying to enter the commands manually, I get:</p><p>root@OpenWrt:/# ip -4 route flush table 1<br />root@OpenWrt:/# ip -4 route add table 1 default nexthop via 192.168.30.1 dev wlan0<br />RTNETLINK answers: Invalid argument</p></blockquote></div><p>My first thought is you are missing ipv4 multi path module. I guess the command argument &quot;nexthop&quot; is invalid for your kernel. Did you compile it yourself?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260614">
				<div class="post-metadata">
					<div class="post-num">Post #1107</div>
					<div class="post-author">cblack</div>
					<div class="post-datetime">
						8 Jan 2015, 23:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><div class="quotebox"><cite>cblack wrote:</cite><blockquote><p>When trying to enter the commands manually, I get:</p><p>root@OpenWrt:/# ip -4 route flush table 1<br />root@OpenWrt:/# ip -4 route add table 1 default nexthop via 192.168.30.1 dev wlan0<br />RTNETLINK answers: Invalid argument</p></blockquote></div><p>My first thought is you are missing ipv4 multi path module. I guess the command argument &quot;nexthop&quot; is invalid for your kernel. Did you compile it yourself?</p></blockquote></div><p>This was it!</p><p>Yes, I am developing support for a new platform which is a (unfortunately custom) 3.10 kernel.</p><p>thanks.. seems like it is working OK so far.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261349">
				<div class="post-metadata">
					<div class="post-num">Post #1108</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 02:11					</div>
				</div>
				<div class="post-content content">
					<p>If I try to go out through a specific interface, lets just say wan2 using wget bind-address it will bypass mwan3? <br />I just asking because I&#039;m having some problems to update the dns4me service which uses the source&#039;s IP address&nbsp; that made the connection to update their database.<br />The IP address that they get it&#039;s always the wan1 IP address which by the way is the main connection in mwan3 (metric and weight).<br />I just want to get the doubt out of my head to look the root cause somewhere else.<br />Thanks.</p>											<p class="post-edited">(Last edited by <strong>joaopaulo.mello</strong> on 14 Jan 2015, 02:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261351">
				<div class="post-metadata">
					<div class="post-num">Post #1109</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						14 Jan 2015, 02:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>joaopaulo.mello wrote:</cite><blockquote><p>If I try to go out through a specific interface, lets just say wan2 using wget bind-address it will bypass mwan3? <br />I just asking because I&#039;m having some problems to update the dns4me service which uses the source&#039;s IP address&nbsp; that made the connection to update their database.<br />The IP address that they get it&#039;s always the wan1 IP address which by the way is the main connection in mwan3 (metric and weight).<br />I just want to get the doubt out of my head to look the root cause somewhere else.<br />Thanks.</p></blockquote></div><p>Why not make an mwan3 rule directing your traffic for the dynamic DNS site out the interface you want? Static route works as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261358">
				<div class="post-metadata">
					<div class="post-num">Post #1110</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 04:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>joaopaulo.mello wrote:</cite><blockquote><p>If I try to go out through a specific interface, lets just say wan2 using wget bind-address it will bypass mwan3? <br />I just asking because I&#039;m having some problems to update the dns4me service which uses the source&#039;s IP address&nbsp; that made the connection to update their database.<br />The IP address that they get it&#039;s always the wan1 IP address which by the way is the main connection in mwan3 (metric and weight).<br />I just want to get the doubt out of my head to look the root cause somewhere else.<br />Thanks.</p></blockquote></div><p>Why not make an mwan3 rule directing your traffic for the dynamic DNS site out the interface you want? Static route works as well.</p></blockquote></div><p>I have 2 records which I have to update, one for each wan uplink, two URL&#039;s for the same domain, the only difference is a parameter. AFAIK mwan3 doesn&#039;t know about URL&#039;s, just IP addresses and ports so it won&#039;t work. That&#039;s the reason i&#039;m not using the Luci ddns client, because I can&#039;t control what wan will be used to fetch the URL, which by the way I&#039;ll suggest to the DDNS people.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261360">
				<div class="post-metadata">
					<div class="post-num">Post #1111</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						14 Jan 2015, 04:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>joaopaulo.mello wrote:</cite><blockquote><div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>joaopaulo.mello wrote:</cite><blockquote><p>If I try to go out through a specific interface, lets just say wan2 using wget bind-address it will bypass mwan3? <br />I just asking because I&#039;m having some problems to update the dns4me service which uses the source&#039;s IP address&nbsp; that made the connection to update their database.<br />The IP address that they get it&#039;s always the wan1 IP address which by the way is the main connection in mwan3 (metric and weight).<br />I just want to get the doubt out of my head to look the root cause somewhere else.<br />Thanks.</p></blockquote></div><p>Why not make an mwan3 rule directing your traffic for the dynamic DNS site out the interface you want? Static route works as well.</p></blockquote></div><p>I have 2 records which I have to update, one for each wan uplink, two URL&#039;s for the same domain, the only difference is a parameter. AFAIK mwan3 doesn&#039;t know about URL&#039;s, just IP addresses and ports so it won&#039;t work. That&#039;s the reason i&#039;m not using the Luci ddns client, because I can&#039;t control what wan will be used to fetch the URL, which by the way I&#039;ll suggest to the DDNS people.</p></blockquote></div><p>The URL likely resolves to multiple IP addresses. You can simply create two rules for two different IP addresses.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261364">
				<div class="post-metadata">
					<div class="post-num">Post #1112</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 04:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>joaopaulo.mello wrote:</cite><blockquote><div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>Why not make an mwan3 rule directing your traffic for the dynamic DNS site out the interface you want? Static route works as well.</p></blockquote></div><p>I have 2 records which I have to update, one for each wan uplink, two URL&#039;s for the same domain, the only difference is a parameter. AFAIK mwan3 doesn&#039;t know about URL&#039;s, just IP addresses and ports so it won&#039;t work. That&#039;s the reason i&#039;m not using the Luci ddns client, because I can&#039;t control what wan will be used to fetch the URL, which by the way I&#039;ll suggest to the DDNS people.</p></blockquote></div><p>The URL likely resolves to multiple IP addresses. You can simply create two rules for two different IP addresses.</p></blockquote></div><p> If mwan3 just changes the default route my problem is in another place...because I&#039;m explicity telling to wget to use another, I don&#039;t see how mwan3 could be get in the way.<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261382">
				<div class="post-metadata">
					<div class="post-num">Post #1113</div>
					<div class="post-author">pingo</div>
					<div class="post-datetime">
						14 Jan 2015, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t remember specifics but setting an interface seemed to work fine for me. Here is a cron example with curl</p><div class="codebox"><pre><code>01 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash1 --interface wlan1
02 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash2 --interface wlan2
03 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash3 --interface wlan3
04 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash0</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261391">
				<div class="post-metadata">
					<div class="post-num">Post #1114</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 13:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pingo wrote:</cite><blockquote><p>I don&#039;t remember specifics but setting an interface seemed to work fine for me. Here is a cron example with curl</p><div class="codebox"><pre><code>01 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash1 --interface wlan1
02 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash2 --interface wlan2
03 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash3 --interface wlan3
04 * * * * curl -k http://freedns.afraid.org/dynamic/update.php?hash0</code></pre></div></blockquote></div><p>Thanks Pingo, it really works...I was using wget --bind-address, one more time curl surpass wget as usual.<br />Problem solved.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262673">
				<div class="post-metadata">
					<div class="post-num">Post #1115</div>
					<div class="post-author">dgi</div>
					<div class="post-datetime">
						24 Jan 2015, 18:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>On a second note; it has been said that mwan3 is not compatible with ipv6. Let me clear this up by saying that it is ok to have ipv6 and mwan3 running on the same router. Only ipv6 is ignored by mwan3. Ipv6 routing is done without intervention of any mwan3 rule/route.</p></blockquote></div><p>To see what would happen, I created an interface wan6_2 with @wan2 for the IPv6 address of wan2. Traceroute6 showed IPv6 traffic from the router correctly load-balanced between wan and wan2, but from a client, IPv6 traffic routed over wan2 is simply lost because the client&#039;s interface has an IPv6 address from wan and not from wan2.</p><p>Given this, would it be possible for OpenWrt to issue DHCPv6 leases delegated from both wan and wan2 to the same client interface so that mwan3 could load-balance between them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262679">
				<div class="post-metadata">
					<div class="post-num">Post #1116</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						24 Jan 2015, 18:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dgi wrote:</cite><blockquote><div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>On a second note; it has been said that mwan3 is not compatible with ipv6. Let me clear this up by saying that it is ok to have ipv6 and mwan3 running on the same router. Only ipv6 is ignored by mwan3. Ipv6 routing is done without intervention of any mwan3 rule/route.</p></blockquote></div><p>To see what would happen, I created an interface wan6_2 with @wan2 for the IPv6 address of wan2. Traceroute6 showed IPv6 traffic from the router correctly load-balanced between wan and wan2, but from a client, IPv6 traffic routed over wan2 is simply lost because the client&#039;s interface has an IPv6 address from wan and not from wan2.</p><p>Given this, would it be possible for OpenWrt to issue DHCPv6 leases delegated from both wan and wan2 to the same client interface so that mwan3 could load-balance between them?</p></blockquote></div><p>Mwan3 does not load balance ipv6.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262700">
				<div class="post-metadata">
					<div class="post-num">Post #1117</div>
					<div class="post-author">dgi</div>
					<div class="post-datetime">
						24 Jan 2015, 22:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>Mwan3 does not load balance ipv6.</p></blockquote></div><p>So you say, but traceroute6 from the router was clearly using load-balanced routes. Maybe this accidental partial success can be built upon?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262705">
				<div class="post-metadata">
					<div class="post-num">Post #1118</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						24 Jan 2015, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi dgi,</p><br /><p>It is not as straightforward as you might think. The solution you opted (use dhcpv6 delegation from both wans to lan clients) will not work. You might be able to give lan clients an ipv6 address from both wan ranges, but the decision of which source address to use is then completely out of the hands of the router.</p><p>A working solotion could be to only use ipv6 ula address ranges on your lan(s). The router must then nat66 or nptv6 it to the correct wan range. A nice way of doing nat66 or nptv6 is as far as i know still not available in openwrt. But please let me know if i&#039;m wrong.</p><p>The reason that load balancing on ipv6 works on your router has absolutely nothing todo with mwan3.</p>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 24 Jan 2015, 23:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262836">
				<div class="post-metadata">
					<div class="post-num">Post #1119</div>
					<div class="post-author">bui159</div>
					<div class="post-datetime">
						25 Jan 2015, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>There is a question about the verison.<br />In wiki: <a href="http://wiki.openwrt.org/doc/howto/mwan3">http://wiki.openwrt.org/doc/howto/mwan3</a><br />OP 14.07 ,the latest version is 1.5-10.<br />I &quot;Update lists&quot; in OP 14.07, there is only 1.5-9.<br />How can i update it? Only compile the source code?<br />Thx very much</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263229">
				<div class="post-metadata">
					<div class="post-num">Post #1120</div>
					<div class="post-author">spon901</div>
					<div class="post-datetime">
						28 Jan 2015, 12:18					</div>
				</div>
				<div class="post-content content">
					<p>I have a configuration with one 3g dongle (eth1) and one tethered phone (usb0).&nbsp; both are connected properly to internet , and the connection works ok through both.&nbsp; I want to install mwan3 and load balance them. However everything seems to be ok in the configuration file, but mwan3 status shows under balancede policy only one interface with 100% Currently only 3gwan3 is used. If I changed the order unde balanced policy then 3gwan1 ised.&nbsp; The connection works ok through internet but using one interface in both cases.&nbsp; What is wrong?</p><p>My configuration is : </p><p>Detailed overview : </p><p>Interface status:<br />Interface 3gwan1 is online (tracking active)<br />Interface 3gwan3 is online (tracking active)</p><p>Policy balanced:<br /> 3gwan3 (100%)</p><p>Policy wan2_only:<br /> 3gwan3 (100%)</p><p>Policy wan2_wan:<br /> 3gwan3 (100%)</p><p>Policy wan_only:<br /> 3gwan1 (100%)</p><p>Policy wan_wan2:<br /> 3gwan1 (100%)</p><p>Known networks:<br />destination&nbsp; &nbsp; &nbsp; &nbsp; policy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hits&nbsp; &nbsp; &nbsp;<br />-----------------------------------------------<br />127.0.0.0/8&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />224.0.0.0/3&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.9.0/24&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 480&nbsp; &nbsp; &nbsp; <br />192.168.42.0/24&nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 302&nbsp; &nbsp; &nbsp; <br />192.168.105.0/27&nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; <br />127.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />127.0.0.0/8&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />127.0.0.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />127.255.255.255&nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.9.0&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.9.100&nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 480&nbsp; &nbsp; &nbsp; <br />192.168.9.255&nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.42.0&nbsp; &nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.42.154&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 302&nbsp; &nbsp; &nbsp; <br />192.168.42.255&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.105.0&nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.105.14&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />192.168.105.31&nbsp; &nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; </p><p>Active rules:<br />source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; proto&nbsp; src-port&nbsp; &nbsp; &nbsp; dest-port&nbsp; &nbsp; &nbsp;policy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hits&nbsp; &nbsp; &nbsp;<br />--------------------------------------------------------------------------------------------------<br />0.0.0.0/0.0.0.1&nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp&nbsp; &nbsp; 0:65535&nbsp; &nbsp; &nbsp; &nbsp;443&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wan_wan2&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />0.0.0.1/0.0.0.1&nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp&nbsp; &nbsp; 0:65535&nbsp; &nbsp; &nbsp; &nbsp;443&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;wan2_wan&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; <br />0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; balanced&nbsp; &nbsp; &nbsp; &nbsp; 783</p><br /><p>Software versions : </p><p>OpenWrt - OpenWrt Barrier Breaker 14.07<br />LuCI - 0.12+svn-r10530</p><p>mwan3 - 1.5-9<br />mwan3-luci - 1.3-5</p><p>Output of &quot;cat /etc/config/mwan3&quot; : </p><p>config interface &#039;3gwan1&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; list track_ip &#039;8.8.4.4&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list track_ip &#039;208.67.222.222&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;2&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config interface &#039;3gwan3&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list track_ip &#039;8.8.8.8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list track_ip &#039;208.67.220.220&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;</p><p>config member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; option interface &#039;3gwan1&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; option interface &#039;3gwan1&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;3&#039;</p><p>config member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; option interface &#039;3gwan3&#039;<br />&nbsp; &nbsp; option metric &#039;1&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config member &#039;wan2_m2_w2&#039;<br />&nbsp; &nbsp; option interface &#039;3gwan3&#039;<br />&nbsp; &nbsp; option metric &#039;2&#039;<br />&nbsp; &nbsp; option weight &#039;2&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config policy &#039;balanced&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m1_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m2_w2&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m2_w3&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m1_w2&#039;</p><p>config rule &#039;sticky_even&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.0/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan_wan2&#039;</p><p>config rule &#039;sticky_odd&#039;<br />&nbsp; &nbsp; option src_ip &#039;0.0.0.1/0.0.0.1&#039;<br />&nbsp; &nbsp; option dest_port &#039;443&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan2_wan&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option use_policy &#039;balanced&#039;</p><p>Output of &quot;cat /etc/config/network&quot; : </p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fdec:d62e:c6aa::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.105.14&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.224&#039;<br />&nbsp; &nbsp; option delegate &#039;0&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1 2 3 4 5&#039;<br />&nbsp; &nbsp; option vid &#039;1&#039;</p><p>config interface &#039;3gwan1&#039;<br />&nbsp; &nbsp; option ifname &#039;eth1&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;<br />&nbsp; &nbsp; option delegate &#039;0&#039;<br />&nbsp; &nbsp; option metric &#039;10&#039;</p><p>config interface &#039;3gwan3&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;<br />&nbsp; &nbsp; option ifname &#039;usb0&#039;<br />&nbsp; &nbsp; option delegate &#039;0&#039;<br />&nbsp; &nbsp; option metric &#039;20&#039;</p><p>Output of &quot;ifconfig&quot; : </p><p>br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.105.14&nbsp; Bcast:192.168.105.31&nbsp; Mask:255.255.255.224<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:18128 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:13748 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1429388 (1.3 MiB)&nbsp; TX bytes:4997182 (4.7 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:19101 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:13844 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1973176 (1.8 MiB)&nbsp; TX bytes:5058958 (4.8 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 </p><p>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:19099 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:13839 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1629274 (1.5 MiB)&nbsp; TX bytes:5003084 (4.7 MiB)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; XX:XX:XX:XX:XX:XX&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.9.100&nbsp; Bcast:192.168.9.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:3868 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2440 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:636659 (621.7 KiB)&nbsp; TX bytes:137652 (134.4 KiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:264 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:264 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:24258 (23.6 KiB)&nbsp; TX bytes:24258 (23.6 KiB)</p><p>usb0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr XX:XX:XX:XX:XX:XX&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.42.154&nbsp; Bcast:192.168.42.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:651 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:647 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:25966 (25.3 KiB)&nbsp; TX bytes:63442 (61.9 KiB)</p><p>Output of &quot;route -n&quot; : </p><p>Kernel IP routing table<br />Destination&nbsp; &nbsp; &nbsp;Gateway&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genmask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Flags Metric Ref&nbsp; &nbsp; Use Iface<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.9.1&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.42.129&nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 20&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 usb0<br />192.168.9.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;10&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br />192.168.42.0&nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp;20&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 usb0<br />192.168.105.0&nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.224 U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan</p><p>Output of &quot;ip rule show&quot; : </p><p>0:&nbsp; &nbsp; from all lookup local <br />1001:&nbsp; &nbsp; from all iif eth1 lookup main <br />1002:&nbsp; &nbsp; from all iif usb0 lookup main <br />2001:&nbsp; &nbsp; from all fwmark 0x100/0xff00 lookup 1 <br />2002:&nbsp; &nbsp; from all fwmark 0x200/0xff00 lookup 2 <br />2253:&nbsp; &nbsp; from all fwmark 0xfd00/0xff00 blackhole<br />2254:&nbsp; &nbsp; from all fwmark 0xfe00/0xff00 unreachable<br />32766:&nbsp; &nbsp; from all lookup main <br />32767:&nbsp; &nbsp; from all lookup default</p><p>Output of &quot;ip route list table 1-250&quot; : </p><p>1<br />default via 192.168.9.1 dev eth1 <br />2<br />default via 192.168.42.129 dev usb0</p><p>Firewall default output policy (must be ACCEPT) : </p><p>ACCEPT</p><p>Output of &quot;iptables -L -t mangle -v -n&quot; : </p><p>Chain PREROUTING (policy ACCEPT 3208 packets, 298K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 3241&nbsp; 300K mwan3_hook&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 3208&nbsp; 298K fwmark&nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain INPUT (policy ACCEPT 2962 packets, 214K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 mssfix&nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain OUTPUT (policy ACCEPT 2979 packets, 695K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 3014&nbsp; 714K mwan3_hook&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 3014&nbsp; 714K mwan3_output_hook&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain POSTROUTING (policy ACCEPT 2979 packets, 695K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain fwmark (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain mssfix (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; eth1&nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan (mtu_fix) */ TCPMSS clamp to PMTU<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 TCPMSS&nbsp; &nbsp; &nbsp;tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; usb0&nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tcp flags:0x06/0x02 /* wan (mtu_fix) */ TCPMSS clamp to PMTU</p><p>Chain mwan3_connected (2 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127.0.0.0/8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 224.0.0.0/3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; 576 18432 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.9.0/24&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; 361 13356 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.42.0/24&nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 4&nbsp; &nbsp;944 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.105.0/27&nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127.0.0.0/8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127.0.0.1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127.255.255.255&nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.9.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; 576 18432 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.9.100&nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.9.255&nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.42.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; 361 13356 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.42.154&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.42.255&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.105.0&nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.105.14&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.105.31&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00</p><p>Chain mwan3_hook (2 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 6255 1014K CONNMARK&nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONNMARK restore mask 0xff00<br /> 1193&nbsp; 117K mwan3_ifaces&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00<br />&nbsp; 949 33402 mwan3_connected&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00<br />&nbsp; 944 32406 mwan3_rules&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00<br /> 6255 1014K CONNMARK&nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONNMARK save mask 0xff00<br /> 1885 64322 mwan3_connected&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match ! 0xff00/0xff00</p><p>Chain mwan3_iface_3gwan1 (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; 240 83340 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; eth1&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;192.168.9.0/24&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* default */ MARK or 0xff00<br />&nbsp; &nbsp; 3&nbsp; &nbsp; 96 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; eth1&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan1 */ MARK xset 0x100/0xff00</p><p>Chain mwan3_iface_3gwan3 (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; usb0&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;192.168.42.0/24&nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* default */ MARK or 0xff00<br />&nbsp; &nbsp; 1&nbsp; &nbsp; 32 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; usb0&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan3 */ MARK xset 0x200/0xff00</p><p>Chain mwan3_ifaces (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 1193&nbsp; 117K mwan3_iface_3gwan1&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00<br />&nbsp; 945 33254 mwan3_iface_3gwan3&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00</p><p>Chain mwan3_output_hook (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain mwan3_policy_balanced (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; 939 32246 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan3 2 2 */ MARK xset 0x200/0xff00</p><p>Chain mwan3_policy_wan2_only (0 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan3 2 2 */ MARK xset 0x200/0xff00</p><p>Chain mwan3_policy_wan2_wan (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan3 2 2 */ MARK xset 0x200/0xff00</p><p>Chain mwan3_policy_wan_only (0 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan1 3 3 */ MARK xset 0x100/0xff00</p><p>Chain mwan3_policy_wan_wan2 (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* 3gwan1 3 3 */ MARK xset 0x100/0xff00</p><p>Chain mwan3_rules (1 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 mwan3_policy_wan_wan2&nbsp; tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0.0.0.1&nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; multiport sports 0:65535 multiport dports 443 mark match 0x0/0xff00 /* sticky_even */<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 mwan3_policy_wan2_wan&nbsp; tcp&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.1/0.0.0.1&nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; multiport sports 0:65535 multiport dports 443 mark match 0x0/0xff00 /* sticky_odd */<br />&nbsp; 939 32246 mwan3_policy_balanced&nbsp; all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mark match 0x0/0xff00 /* default_rule */</p><p>Chain mwan3_track_3gwan1 (0 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 208.67.220.220&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 208.67.222.222&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.8.8.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.8.4.4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00</p><p>Chain mwan3_track_3gwan3 (0 references)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 208.67.220.220&nbsp; &nbsp; &nbsp; &nbsp;MARK or 0xff00<br />&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0 MARK&nbsp; &nbsp; &nbsp; &nbsp;all&nbsp; --&nbsp; *&nbsp; &nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp;0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8.8.8.8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MARK or 0xff00</p><p>Powered by LuCI Trunk (0.12+svn-r10530) OpenWrt Barrier Breaker 14.07</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263265">
				<div class="post-metadata">
					<div class="post-num">Post #1121</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						28 Jan 2015, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi spon901,</p><p>This is obviously not correct. As far as i can tell your config is perfectly fine and both interfaces should be added to mwan3_policy_balanced table. After some thought i think it is a problem with statistics module. Could you please try the following? Does it return an error?</p><div class="codebox"><pre><code>/usr/sbin/iptables -t mangle -A mwan3_policy_balanced -m mark --mark 0x0/0xff00 -m statistic --mode random --probability 0.5 -j MARK --set-xmark 0x200/0xff00</code></pre></div>											<p class="post-edited">(Last edited by <strong>Adze</strong> on 28 Jan 2015, 17:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263270">
				<div class="post-metadata">
					<div class="post-num">Post #1122</div>
					<div class="post-author">spon901</div>
					<div class="post-datetime">
						28 Jan 2015, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>I managed to fix it. The problem was that the packages kmod-ipt-ipopt and iptables-mod-ipopt were not installed as a dependency of mwan3 and&nbsp; &nbsp;there was no error regarding this , the only issue was what I already explained.&nbsp; After I manually install them, and reboot the router everything seems to be ok.&nbsp; &nbsp;Thanks, very much for your support.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263761">
				<div class="post-metadata">
					<div class="post-num">Post #1123</div>
					<div class="post-author">noko</div>
					<div class="post-datetime">
						1 Feb 2015, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>I get&nbsp; an error every mwan3 restart: </p><div class="codebox"><pre><code># mwan3 restart
sh: enabled: unknown operand</code></pre></div><p>This error also bring on every interface event fired by mwan3track, like online/unreachable. </p><p>Number of errors is equal to number of intefaces configured on /etc/config/mwan3. So if I have three interfaces it returns:</p><div class="codebox"><pre><code># mwan3 restart
sh: enabled: unknown operand
sh: enabled: unknown operand
sh: enabled: unknown operand</code></pre></div><br /><p>Debug info:</p><div class="codebox"><pre><code>OpenWrt - OpenWrt Barrier Breaker 14.07
LuCI - 0.12+svn-r10530

mwan3 - 1.5-10
mwan3-luci - 1.3-5</code></pre></div><p>Update mwan3 from 1.5-9 to 1.5-10 didn&#039;t fix this error.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263762">
				<div class="post-metadata">
					<div class="post-num">Post #1124</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						1 Feb 2015, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi noko,</p><br /><p>Please take a look at posts #1066 till #1069 in this thread. Maybe this helps?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263793">
				<div class="post-metadata">
					<div class="post-num">Post #1125</div>
					<div class="post-author">noko</div>
					<div class="post-datetime">
						2 Feb 2015, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. It&#039;s truly miniupnpd hotplug script issues. </p><p>Actually this string:<br /></p><div class="codebox"><pre><code>if [ ! /etc/init.d/miniupnpd enabled ]</code></pre></div><p>How can I submit a bug report about this package?</p>											<p class="post-edited">(Last edited by <strong>noko</strong> on 2 Feb 2015, 01:40)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 45 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=43.html">43</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=44.html">44</a></li><li class="pagination-current"><span>45</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=46.html">46</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=47.html">47</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>