<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Nexx WT3020, few questions</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p345511">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						2 Dec 2016, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I&#039;m not new to OpenWRT but I didn&#039;t use it for quite a while now!<br />I have even used to compile my own system (on Asus RT-N16).<br />Anyway, I&#039;m back here and I have just got a Nexx WT3020 to play with.<br />First of all, anyone in UK and interested, you can find it 7.99 pounds on Amazon (unfortunately I can&#039;t post the link but look for &quot;AKORD 300Mbps Portable Mini Router Wireless Extender&quot;) and it&#039;s Prime too, so no wait for Chinese ones.<br />That said, I have a few questions before I flash OpenWRT on it.</p><p>- It has a USB port, so I believe I have the model without 3G but still with 8 MB Flash. I read on its page that my model should have the MAC address starting with 20:28:18:, just checking if there&#039;s any log (maybe bootlog, but where?) I can check while connected to telnet. Serial number starts with YS160 and it ends with H (is that the model maybe?)<br />- I didn&#039;t connect it yet, but I would like to check how is the stock firmware and then decide what to do. Is it possible to revert from OpenWRT to the stock firmware? If yes, where I can find the stock firmware? I have tried the Nexx support page but I have found only a firmware for WT3020A, which is for a 4 MB version. Is that correct?<br />- Does the OpenWRT system come with the Web interface or should it be installed later on?</p><p>I have tried to search these information in the forum and google, but I couldn&#039;t find a clear answer <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thank you in advance!</p>											<p class="post-edited">(Last edited by <strong>r4w</strong> on 2 Dec 2016, 16:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346288">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>I can answer my first question, it&#039;s definitely a WT3020H.<br />I have tried the stock firmware, I understand it&#039;s limited but it has done its job.<br />So I still have two questions:</p><p>- Can I revert back to the stock firmware?<br />- Does the OpenWRT firmware have the Web interface or must it be installed as a separate package?</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346320">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 12:56					</div>
				</div>
				<div class="post-content content">
					<p><strong>r4w</strong>, router has 3 revisions: A (4M), H,F(8M). Difference between H and F version is only firmware.</p><p>Stock firmware is very poor, so there is no need to revert back to it. However you can backup (or download) image of mtd3 partition and flash it with mtd_write. But in this case you should carefully examine new partition table to select correct partition to write in (it will differ from mtd3 in stock partition table). You can perform backup by yourself, if you want, I&#039;ll explain, how.</p><p>I recommend you to change booloader, because stock bootloader doesn&#039;t have emergency recovery option via Reset button (only option for soldered UART console, but it requires disassemble of router and soldering). Nice bootloader is breed-mt7620-reset1.bin However in stock OpenWRT image writing of bootloader is locked. I recommend you use intermediate firmware from Padavan to update bootloader, and after that to flash OpenWRT.</p><p>OpenWRT firmware contains LuCI - Web interface for 8M image (didn&#039;t check for 4M, but the size is the same, so I think, it is the same content).</p><p>You can download files via following link: <a href="https://downloads.openwrt.org/chaos_calmer/15.05.1/ramips/mt7620">https://downloads.openwrt.org/chaos_cal … ips/mt7620</a><br />Different files are:<br />openwrt-15.05.1-ramips-mt7620-wt3020-4M-squashfs-factory.bin<br />openwrt-15.05.1-ramips-mt7620-wt3020-4M-squashfs-sysupgrade.bin<br />openwrt-15.05.1-ramips-mt7620-wt3020-8M-squashfs-factory.bin<br />openwrt-15.05.1-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin</p><p>Initially you should use factory version, further for update from existing OpenWRT - sysupgrade.</p><p>There is also Padavan firmare for this router, you can try it also.</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 11 Dec 2016, 12:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346338">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>ulmwind, thank you!</p><p>So the H and F are identical from a hardware point of view, only the F supports attaching a 3G modem on the USB port. Is that correct?</p><p>It would be great to know how I can save the current firmware, just in case I will need it. If you can share how, I will appreciate.</p><p>I&#039;m happy to change the bootloader if that provides emergency recovery, did you test flashing Padavan firmware first in order to upgrade the bootloader and then flash openWRT?<br />Otherwise I&#039;m happy to upgrade the bootloader myself if there&#039;s a guide on how to do so.</p><p>That&#039;s great that the LuCI is integrated in the firmware!</p><p>Thank you again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346339">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 16:41					</div>
				</div>
				<div class="post-content content">
					<p><strong>r4w</strong>, yes, support of 3G modem is just firmware feature. Yes, I&#039;ve tested both Padavan and OpenWRT on this router. For Padavan I&#039;ve used UBOOT, for OpenWRT - breed-mt7620-reset1.bin, both work fine. I didn&#039;t tested &quot;cross compatibility&quot; UBOOT+OpenWRT, breed+Padavan, however it should work, and in emergency state both bootloaders have recovery feature, initiated by Reset button. Furthermore breed contains telnet in each boot, so there is even no need to press Reset button.</p><p>Stock firmware of router doesn&#039;t support ssh, so you should copy firmware by tftp. Login to router via telnet using following credentials:<br />Login: nexxadmin<br />Password: y1n2inc.com0755<br />Run command to make sure you have correct partition table:<br /></p><div class="codebox"><pre><code>cat /proc/mtd</code></pre></div><p>Change directory to /tmp, and make backup of mtd3:<br /></p><div class="codebox"><pre><code>cd /tmp
dd if=/dev/mtd3 of=mtd3_backup.bin</code></pre></div><p>After that run tftp server on your computer and put this file by tftp to your computer. Try command<br /></p><div class="codebox"><pre><code>$ tftp WWW.XXX.YYY.ZZZ
tftp&gt; put mtd3_backup.bin
tftp&gt; quit</code></pre></div><p>Make also backup of other partitions.<br />Confirm success of backup, and I&#039;ll write following instructions.</p><p>I&#039;ve uploaded backup for 8M H version (only mtd3 partition): <a href="https://www.4shared.com/archive/AnJxfcKQba/NEXX_WT3020H_STOCK.html">https://www.4shared.com/archive/AnJxfcK … STOCK.html</a> and intermediate firmware for 8M version: <a href="https://www.4shared.com/zip/kFXsg1YAce/nexx_zero_h.html">https://www.4shared.com/zip/kFXsg1YAce/nexx_zero_h.html</a></p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 11 Dec 2016, 17:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346343">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>Ulmwind, I think I&#039;m following the same instructions on 4pda (I&#039;m not allowed to paste URLs yet) but my Russian is far from perfect (Google translator helps).<br />I have attached a flash drive to the Nexx and I have used this command to backup the original firmware to it.</p><p>- for i in 0 1 2 3; do cat /dev/mtdblock$i &gt; mtdblock$i.bin; done</p><p>So I have a backup of 0/1/2/3 blocks on my flash drive now.</p><p>Thank you for uploading the intermediate firmware, unfortunately the link on 4pda forum is broken!</p><p>I&#039;m ready for the next steps. I understand that there&#039;s a script that automatize some steps, including enabling ssh and compiling a padavan personalized firmware, however I believe it&#039;s only in Russian at this time?</p>											<p class="post-edited">(Last edited by <strong>r4w</strong> on 11 Dec 2016, 17:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346346">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it&#039;s 4pda, you are welcome! Links are not broken, you should login to download from intrinsic 4pda links (external links works normally).</p><p>Yes, script Prometheus was developed to maintain routers firmware. It has English and Russian languages, you can change language by typing &quot;L&quot; in the start script screen (see hint on the screen). I can help you to use it, but for OpenWRT there is no need in this script. However you can make initial backup and firmware update with it.</p><p>Upload intermediate firmware via stock web-interface. Make sure, that your router has 8M memory. After that login to web-interface of intermediate firmware and enable SSH server in settings: Advanced Settings -&gt; Administration -&gt; Services -&gt; Enable SSH server. Download breed-mt7620-reset1.bin (<a href="http://breed.hackpascal.net/breed-mt7620-reset1.bin">http://breed.hackpascal.net/breed-mt7620-reset1.bin</a>) and upload it to /tmp folder of router via scp (pscp -scp, WinSCP, scp protocol). Flash it into mtd0:<br /></p><div class="codebox"><pre><code>mtd_write -e /dev/mtd0 write breed-mt7620-reset1.bin /dev/mtd0</code></pre></div><p> or <br /></p><div class="codebox"><pre><code>mtd_write -e &quot;Bootloader&quot; write breed-mt7620-reset1.bin &quot;Bootloader&quot;</code></pre></div><p> (see output cat /proc/mtd, see also mtd_write --help). Maybe you should unlock it before writing: </p><div class="codebox"><pre><code>mtd_write unlock /dev/mtd0</code></pre></div><p> or </p><div class="codebox"><pre><code>mtd_write unlock &quot;Bootloader&quot;</code></pre></div><p>Reboot router, and upload OpenWRT factory firmware via web-interface of intermediate firmware.</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 12 Dec 2016, 18:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346351">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>I have been able to change the bootloader but I&#039;m unable to flash OpenWRT from the intermediate firmware, I&#039;m getting:</p><p>Jan&nbsp; 1 00:03:21 httzd[186]: Firmware update: Incorrect image header!<br />Jan&nbsp; 1 00:04:00 httzd[186]: Firmware update: Incorrect image header!<br />Jan&nbsp; 1 00:05:08 httzd[186]: Firmware update: Incorrect image header!</p><p>Is it expecting a Padavan firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346352">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>Ok, have you tried factory version?</p><p>Ok, try to mtd_write it to correct partition. Please, BEFORE RUNNING ANY MTD_WRITE COMMAND bring output of </p><div class="codebox"><pre><code>cat /proc/mtd</code></pre></div><p> for me to approve your choice.</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 11 Dec 2016, 18:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346353">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I have tried factory version: openwrt-15.05-ramips-mt7620-wt3020-8M-squashfs-factory, always getting that output.</p><p>This is the current MTD layout:</p><p>/home/root # cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00030000 00010000 &quot;Bootloader&quot;<br />mtd1: 00010000 00010000 &quot;Config&quot;<br />mtd2: 00010000 00010000 &quot;Factory&quot;<br />mtd3: 000e2cb0 00010000 &quot;Kernel&quot;<br />mtd4: 0068d350 00010000 &quot;RootFS&quot;<br />mtd5: 00040000 00010000 &quot;Storage&quot;<br />mtd6: 007b0000 00010000 &quot;Firmware_Stub&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346355">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Ok, copy sysupgrade image via scp to /tmp directory of router and flash it to mtd6:<br /></p><div class="codebox"><pre><code>mtd_write -e &quot;Firmware_Stub&quot; write openwrt-15.05.1-ramips-mt7620-wt3020-8M-squashfs-sysupgrade.bin &quot;Firmware_Stub&quot;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346370">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>Ah ok, so in the &quot;Padavan&quot; firmwares, the Firmware_Stub is the location of the firmware.<br />I have flashed it and have OpenWRT running.<br />Thank you very much for your help.</p><p>I imagine that in order to revert back to the original firmware, I will have to overwrite, at least, mtd2 and mtd3:</p><p>root@OpenWrt:~# cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00030000 00010000 &quot;u-boot&quot;<br />mtd1: 00010000 00010000 &quot;u-boot-env&quot;<br />mtd2: 00010000 00010000 &quot;factory&quot;<br />mtd3: 007b0000 00010000 &quot;firmware&quot;<br />mtd4: 0011fe4b 00010000 &quot;kernel&quot;<br />mtd5: 006901b5 00010000 &quot;rootfs&quot;<br />mtd6: 00460000 00010000 &quot;rootfs_data&quot;</p><p>or should I overwrite from 0 to 3? (I can always change the bootloader again)?</p><p>In the end, what firmware do you like more for the Nexx?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346372">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						11 Dec 2016, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>You are welcome. To my mind, to revert to stock firmware you should flash mtd0 (u-boot) and mtd3 (firmware). Afaik mtd1 contains special data for uboot, mdt2 contains calibration data, that could be different for different samples of the same router. But you&#039;ve performed total backup of your router, so maybe you can flash all partitions. You know, that in OpenWRT you can&#039;t flash mtd0 (u-boot), so to revert you should use intermediate firmware again or flash via breed telnet or breed web-interface, or via mtd_write of stock firmware.</p><p>I don&#039;t know, both are good. OpenWRT has much more components. Padavan has specific interface, to my mind, and specific behavior of some components. Consider firewall, for example. Strangeness is that if you put firewall rules in startup script, they will not be applied, also they will executed normally. You should put them in special script. There are also similar tips. To my mind, OpenWRT is much more predictable, than Padavan.</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 11 Dec 2016, 21:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346399">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						11 Dec 2016, 23:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll give OpenWRT a try and see, so far it seems good to me.</p><p>Thanks again for all the help and I hope it may help others too <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346478">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						12 Dec 2016, 18:42					</div>
				</div>
				<div class="post-content content">
					<p><strong>r4w</strong>, I&#039;ve managed to know, that script contains both English and Russian interfaces (switching by typing &quot;L&quot; in the start screen of script, as shown on the hint). You can easily use it.</p><p><a href="http://prometheus.freize.net/">http://prometheus.freize.net/</a></p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 12 Dec 2016, 18:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346526">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						13 Dec 2016, 00:20					</div>
				</div>
				<div class="post-content content">
					<p>ulmwind, that&#039;s very interesting and promising. I will give that a shot soon. Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346586">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">r4w</div>
					<div class="post-datetime">
						13 Dec 2016, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>Ulmwind, actually on the first run the script detected the language of my Ubuntu VM, therefore it switched automatically to English. I have compiled a firmware using it. Thanks!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>