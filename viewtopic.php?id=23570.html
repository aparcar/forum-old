<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to recompile the kernel only?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p102747">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">GeertVc</div>
					<div class="post-datetime">
						11 Feb 2010, 21:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Is there a way to recompile only the kernel?&nbsp; Each time I&#039;m changing a kernel file, the whole make mechanism is dragging through all the packages, resulting in a lot of lost time.</p><p>Hope there&#039;s an efficient way to recompile the kernel only, just like you can recompile packages/kernel modules only.</p><p>Anyone any idea?</p><p>Best rgds,</p><p>-Geert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102748">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						11 Feb 2010, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>How about <strong>make target/linux/&lt;platform&gt;/compile</strong> or <strong>make target/linux/&lt;platform&gt;/compile V=99</strong>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102749">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						11 Feb 2010, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>make target/linux/platform/{clean,install} V=99 &amp;&amp; make V=99</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254347">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						14 Nov 2014, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>bump oldd thread, is this still valid?<br />because:</p><div class="codebox"><pre><code>make target/linux/mips_34kc/compile V=99
make[1]: Entering directory `/hdd/openwrt/dvb&#039;
make[1]: *** No rule to make target `target/linux/mips_34kc/compile&#039;.  Stop.
make[1]: Leaving directory `/hdd/openwrt/dvb&#039;
make: *** [target/linux/mips_34kc/compile] Fehler 2

make target/linux/ar71xx_generic/compile V=99
make[1]: Entering directory `/hdd/openwrt/dvb&#039;
make[1]: *** No rule to make target `target/linux/ar71xx_generic/compile&#039;.  Stop.
make[1]: Leaving directory `/hdd/openwrt/dvb&#039;
make: *** [target/linux/ar71xx_generic/compile] Fehler 2

make target/linux/ar71xx/compile V=99
make[1]: Entering directory `/hdd/openwrt/dvb&#039;
make[1]: *** No rule to make target `target/linux/ar71xx/compile&#039;.  Stop.
make[1]: Leaving directory `/hdd/openwrt/dvb&#039;
make: *** [target/linux/ar71xx/compile] Fehler 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254349">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Nov 2014, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>the current command would be just: make target/linux/compile</p><p>So, the complete command is <br />make target/linux/{clean,compile} V=s</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 14 Nov 2014, 17:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254360">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">derdigge</div>
					<div class="post-datetime">
						14 Nov 2014, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Thank You That worked</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267785">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ronaldoafonso</div>
					<div class="post-datetime">
						5 Mar 2015, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>&nbsp; And if I want to compile just a &quot;kmod&quot;?</p><p>&nbsp; Is there any make target for that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267786">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						5 Mar 2015, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>Which kmod package(s) do you want to compile?<br /></p><div class="codebox"><pre><code>[debian@debian:/opt/openwrt-git-trunk 840%] ~ scripts/feeds search kmod
Search results in feed &#039;packages&#039;:
kmod-gpiotoggling            Toggle GPIOs in kernel space
kmod-loop-aes                loopback module with built-in AES
kmod-madwifi                 Driver for Atheros wireless chipsets
kmod-openswan                Openswan (kernel module)
kmod-pcmcia-serial-sierra    Sierra AirCard PCMCIA support
kmod-siit                    Stateless IP ICMP Translation Algorithm
kmod-wprobe                  Wireless driver probe infrastructure
libmikmod                    Mikmod sound library
Search results in feed &#039;packages_github&#039;:
kmod                         Linux kernel module handling (tools)
kmod-cryptodev               Driver for cryptographic acceleration
kmod-lttng                   Linux Trace Toolkit: next generation (kernel modules)
kmod-openvswitch             Open vSwitch Kernel Package
kmod-usb-serial-dmx_usb_module    Support for FTDI RS485 based DMX modules
libkmod                      Linux kernel module handling (library)
open-plc-utils-int6kmod      Utility  from the Open PLC utilities
Search results in feed &#039;routing&#039;:
kmod-batgat                  B.A.T.M.A.N. gateway module
kmod-batman-adv              B.A.T.M.A.N. Adv
kmod-nat46                   Stateless NAT46 translation kernel module
Search results in feed &#039;local&#039;:
kmod-batman-adv-kernelland    B.A.T.M.A.N. layer 2
kmod-ipt-opendpi             OpenDPI net netfilter module</code></pre></div>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 5 Mar 2015, 21:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269343">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ronaldoafonso</div>
					<div class="post-datetime">
						20 Mar 2015, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Let&#039;s say I want to compile just the &quot;kmod-openvswitch&quot; or &quot;kmod-ipt-opendpi&quot;.</p><p>&nbsp; How can I do that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269452">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 Mar 2015, 04:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ronaldoafonso wrote:</cite><blockquote><p>Let&#039;s say I want to compile just the &quot;kmod-openvswitch&quot; or &quot;kmod-ipt-opendpi&quot;.</p></blockquote></div><p>AFAICT, these two packages are part of kernel modules. So, you will need to compile the kernel so that buildroot will generate the packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310936">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">rtrimana</div>
					<div class="post-datetime">
						10 Feb 2016, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>Just to add one more question to this thread. How can we change the kernel from the current version to the latest Linux Kernel available, say version 4.3 or 4.4? I tried &quot;make target/linux/{clean,compile} V=s&quot;, but I was getting the following error:</p><p>make[4]: Entering directory `/scratch/openwrt/openwrt/build_dir/target-arm_cortex-a7+vfp_uClibc-0.9.33.2_eabi/linux-brcm2708_bcm2709/linux-4.3&#039;</p><p>The present kernel configuration has modules disabled.<br />Type &#039;make config&#039; and enable loadable module support.<br />Then build a kernel with module support enabled.</p><p>make[4]: *** [modules] Error 1<br />make[4]: Leaving directory `/scratch/openwrt/openwrt/build_dir/target-arm_cortex-a7+vfp_uClibc-0.9.33.2_eabi/linux-brcm2708_bcm2709/linux-4.3&#039;<br />make[3]: *** [/scratch/openwrt/openwrt/build_dir/target-arm_cortex-a7+vfp_uClibc-0.9.33.2_eabi/linux-brcm2708_bcm2709/linux-4.3/.modules] Error 2<br />make[3]: Leaving directory `/scratch/openwrt/openwrt/target/linux/brcm2708&#039;<br />make[2]: *** [compile] Error 2<br />make[2]: Leaving directory `/scratch/openwrt/openwrt/target/linux&#039;<br />make[1]: *** [target/linux/compile] Error 2<br />make[1]: Leaving directory `/scratch/openwrt/openwrt&#039;<br />make: *** [target/linux/compile] Error 2</p><p>Could someone help? Thanks a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310959">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						10 Feb 2016, 23:10					</div>
				</div>
				<div class="post-content content">
					<p>Unless you really know what you are doing and I strongly do not recommend this approach but to wait until OpenWRT starts to support the Linux kernel version, you will need modify the <em>include/kernel-version.mk</em> to include the version you want. You will also make sure you have the <em>target/linux/generic/patches-x.y</em> and/or <em>target/linux/&lt;platform&gt;/patches-x.y</em> files to support the Linux kernel version x.y.z (if needed).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>