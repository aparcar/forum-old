<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Seeing no beacons from AR9340</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p193286">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pvangool</div>
					<div class="post-datetime">
						27 Feb 2013, 08:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m using openwrt/trunk on an OM2P-HS and when I enable wifi I never see any beacons. At boot time I see:</p><p>[&nbsp; &nbsp; 9.890000] Compat-drivers backport release: compat-drivers-2013-01-21-1<br />[&nbsp; &nbsp; 9.900000] Backport based on wireless-testing.git master-2013-02-22<br />[&nbsp; &nbsp; 9.910000] compat.git: wireless-testing.git<br />[&nbsp; &nbsp; 9.970000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp; 9.970000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp; 9.980000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp; 9.990000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.990000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.000000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.010000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.020000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.530000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;10.530000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;10.530000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;10.530000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;10.530000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;10.530000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;10.540000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;10.550000] Registered led device: ath9k-phy0<br />[&nbsp; &nbsp;10.550000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;10.560000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;10.560000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;10.570000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;10.570000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />[&nbsp; &nbsp;10.580000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />[&nbsp; &nbsp;10.590000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.600000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.610000] cfg80211:&nbsp; &nbsp;(5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.610000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)</p><p>which all seems fine as far as I can tell.</p><p>When I then enable wifi from luci, I see:</p><p>i[&nbsp; 309.720000] WARNING: at /home/openwrt/openwrt-trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/linux-ar71xx_generic/compat-wireless-2013-02-22/drivers/net/wireless/ath/ath9k/hw.c:789 ar9003_get_pll_sqsum_dvc+0x90/0x108 [ath9k_hw]()<br />[&nbsp; 309.740000] Modules linked in: ath79_wdt ledtrig_netdev nf_nat_irc nf_nat_ftp nf_conntrack_irc nf_conntrack_ftp ipt_MASQUERADE iptable_nat xt_nat nf_nat_ipv4 nf_nat pppoe xt_conntrack xt_CT iptable_raw xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack pppox ipt_REJECT xt_TCPMSS xt_LOG xt_comment xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc ath9k(O) ath9k_common(O) ath9k_hw(O) ath(O) mac80211(O) crc_ccitt cfg80211(O) compat(O) arc4 crypto_blkcipher aead ledtrig_timer ledtrig_default_on leds_gpio gpio_button_hotplug(O)<br />[&nbsp; 309.800000] Call Trace:<br />[&nbsp; 309.800000] [&lt;800703b0&gt;] dump_stack+0x8/0x34<br />[&nbsp; 309.800000] [&lt;80078dfc&gt;] warn_slowpath_common+0x78/0xa4<br />[&nbsp; 309.810000] [&lt;80078e40&gt;] warn_slowpath_null+0x18/0x24<br />[&nbsp; 309.810000] [&lt;83103934&gt;] ar9003_get_pll_sqsum_dvc+0x90/0x108 [ath9k_hw]<br />[&nbsp; 309.820000] [&lt;8316a978&gt;] ath_hw_pll_work+0x40/0xd4 [ath9k]<br />[&nbsp; 309.820000] [&lt;8008e5a4&gt;] process_one_work+0x224/0x380<br />[&nbsp; 309.830000] [&lt;8008ebb4&gt;] worker_thread+0x2cc/0x3dc<br />[&nbsp; 309.830000] [&lt;80092e28&gt;] kthread+0xb0/0xb8<br />[&nbsp; 309.840000] [&lt;8006dac0&gt;] kernel_thread_helper+0x10/0x18<br />[&nbsp; 309.840000]<br />[&nbsp; 309.850000] ---[ end trace 61a10e44e409a142 ]---<br />[&nbsp; 309.850000] ath: phy0: PLL4 meaurement not done<br />[&nbsp; 309.970000] ath: phy0: PLL4 meaurement not done<br />[&nbsp; 310.080000] ath: phy0: PLL4 meaurement not done<br />[&nbsp; 310.190000] ath: phy0: PLL4 meaurement not done</p><p>And it keeps logging &#039;ath: phy0: PLL4 meaurement not done&#039;.</p><p>Anybody else seeing this? Anybody know how to fix this?</p><p>Thanks.</p><p>Paul</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>