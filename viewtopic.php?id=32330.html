<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> cross compile openwrt problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p145489">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">james_xu</div>
					<div class="post-datetime">
						10 Oct 2011, 05:24					</div>
				</div>
				<div class="post-content content">
					<p>hi,all</p><p>&nbsp; &nbsp;i want to cross compile openwrt, i use the backfire_10.03, and make menuconfig to config,</p><p>&nbsp; &nbsp;as i will use the own cavium octeon(mips64) cross compile toolchain and kernel,&nbsp; </p><p>&nbsp; &nbsp;so the below is my config, and then use command &quot;source env-setup OCTEON_CN50XX&quot; to </p><p>&nbsp; &nbsp; setup cavium octeon build env,&nbsp; but compile openwrt fail, how could i do??? thanks</p><br /><br /><p>&nbsp; &nbsp;Target System ---&gt;Cavium Networks Octeon<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;Target Profile&nbsp; &nbsp;---&gt;Generic Octeon board</p><p>&nbsp; &nbsp;Advanced configuration options ---&gt;&nbsp; Use external kernel tree<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /home/users/OCTEON-SDK/linux/kernel_2.6<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;----&gt; Target Optimizations<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-Os -pipe -mips64 -mabi=64<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;----&gt;&nbsp; Use external toolchain&nbsp; ---&gt;[ ]&nbsp; &nbsp;Use host&#039;s toolchain<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;---&gt;(mips64-octeon-linux-gnu) Target name <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ---&gt;(mips64-octeon-linux-gnu-) Toolchain prefix <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ---&gt;(/home/users/OCTEON-SDK/tools) Toolchain root <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (./usr/bin ./bin) Toolchain program path<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (./usr/include ./include) Toolchain include path<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (./usr/lib ./lib) Toolchain library path</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145525">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						10 Oct 2011, 17:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>james_xu wrote:</cite><blockquote><p>so the below is my config, and then use command &quot;source env-setup OCTEON_CN50XX&quot; to setup cavium octeon build env,&nbsp; ...</p></blockquote></div><p>I am just curious how did you come about the <em>source env-setup OCTEON_CN50XX</em>? I sure would like to read it if you would provide the link on this.</p><p>So far, I followed this <a href="http://wiki.openwrt.org/doc/devel/env">Using Build Environments</a> to create a new OpenWRT environment.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145559">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">james_xu</div>
					<div class="post-datetime">
						11 Oct 2011, 05:06					</div>
				</div>
				<div class="post-content content">
					<p>thanks for your reply.</p><p>i have two question.</p><p>1. whether i config the &quot;external kernel tree&quot;(CONFIG_EXTERNAL_KERNEL_TREE), it seems that builder always <br />&nbsp; &nbsp; ignore&nbsp; this option.&nbsp; &nbsp;target/linux/octeon/Makefile is below, so it always gets LINUX_VERSION kernel,<br />&nbsp; &nbsp; how could i do to use my own kernel?? thanks<br /> </p><div class="codebox"><pre><code>include $(TOPDIR)/rules.mk

ARCH:=mips64
BOARD:=octeon
BOARDNAME:=Cavium Networks Octeon
FEATURES:=squashfs jffs2 pci usb
CFLAGS:=-Os -pipe -mtune=octeon -funit-at-a-time

LINUX_VERSION:=2.6.30.10

include $(INCLUDE_DIR)/target.mk

DEFAULT_PACKAGES += wpad-mini

define Target/Description
        Build firmware images for Cavium Networks Octeon-based boards.
endef

$(eval $(call BuildTarget))</code></pre></div><p>2.&nbsp; the toolchain question<br />&nbsp; &nbsp; i use &quot;source env-setup OCTEON_CN50XX&quot; because i use this command to set env to build my own program <br />&nbsp; &nbsp; before. i want to use my own toolchain to build openwrt, so how could i config the toolchain? below is my config<br />&nbsp; &nbsp;<br />----&gt;&nbsp; Use external toolchain&nbsp; ---&gt;[ ]&nbsp; &nbsp;Use host&#039;s toolchain<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;---&gt;(mips64-octeon-linux-gnu) Target name<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;---&gt;(mips64-octeon-linux-gnu-) Toolchain prefix<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ---&gt;(/home/users/OCTEON-SDK/tools) Toolchain root<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (./usr/bin ./bin) Toolchain program path<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (./usr/include ./include) Toolchain include path<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(./usr/lib ./lib) Toolchain library path</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145562">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						11 Oct 2011, 06:30					</div>
				</div>
				<div class="post-content content">
					<p>Sorry that I can&#039;t help. Perhaps, you may want to read the OpenWRT <a href="http://wiki.openwrt.org/doc/start">Documentation</a> under <em>Developing</em> section.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145573">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">james_xu</div>
					<div class="post-datetime">
						11 Oct 2011, 09:37					</div>
				</div>
				<div class="post-content content">
					<p>thanks, i have readed the openwrt wiki and document, but nothing help.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>