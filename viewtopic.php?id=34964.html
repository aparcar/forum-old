<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> advice needed on firmware version for tp link mr3220</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p158460">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						23 Feb 2012, 16:43					</div>
				</div>
				<div class="post-content content">
					<p>hi , ive recently purchased a tp link router mr3220. i want to install openwrt on it , but im a little confused about which version should i install.<br />its a mr 3220 v1.2 , in the wiki it shows something about a &quot;Trunk r27340 &quot; and 2 success installs.http://wiki.openwrt.org/toh/tp-link/tl-mr3420&nbsp; <br />on the internet ive only found that they recommend to install a v1 firmware with squashfs , but mine its v1.2 .<br />so im a little confused about which version should i install on it through the web interface ( its running now the ofiicial firmware of tp tplink).</p><p>im planning to attach an external hard disk to leave it downloading from bittorrent , thats the main reason why i bought it.</p><br /><p>thanks to anyone who gives advices and excuse me if my english is not perfect.</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158533">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						24 Feb 2012, 09:10					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158570">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						24 Feb 2012, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the reply , but which i should get , the only one that is for mr3220 v1?(rememver i hace a v1.2)&nbsp; and what are the differences between squashfs and jffs ?, does that diferrence affects me ofr the use im going to give the router(bittorrent downloading)? thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158596">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						24 Feb 2012, 19:38					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr3220-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a><br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3420#oem.easy.installation">http://wiki.openwrt.org/toh/tp-link/tl- … stallation</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158676">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						25 Feb 2012, 19:45					</div>
				</div>
				<div class="post-content content">
					<p>thanks , got it installed and works fine , but now i have a problem. i&#039;ve edited /etc/opkg.conf to add an external hdd as a destination for packages, but when i do the following command it just tries always to install to /root<br />te output is this : <br />root@OpenWrt:/# opkg install ctorrent -d usb<br />Installing ctorrent (dnh3.3.2-5) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/ctorrent_dnh3.3.2-5_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Installing libopenssl (1.0.0g-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/libopenssl_1.0.0g-1_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />^CInterrupted. Writing out status database.</p><p>and i dont have any more space on the local memory just to install. <br />the file /etc/opkg.conf has this:<br />src/gz snapshots <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages">http://downloads.openwrt.org/snapshots/ … x/packages</a></p><p>dest usb /usb<br />option force_space<br />dest root /<br />dest ram /tmp<br />lists_dir ext /var/opkg-lists<br />#option overlay_root /overlay</p><p>thanks for any advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158686">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						25 Feb 2012, 20:52					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt:/# opkg -d usb install ctorrent</code></pre></div><p><a href="http://wiki.openwrt.org/doc/techref/opkg">OPKG Package Manager - OpenWrt Wiki</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158692">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						25 Feb 2012, 21:19					</div>
				</div>
				<div class="post-content content">
					<p>thanks , but it tries to install it on the root path and it fails because of the little space left on the routers root filesystem&nbsp; , heres the output:</p><p>root@OpenWrt:~# opkg -d usb install ctorrent<br />Installing ctorrent (dnh3.3.2-5) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/ctorrent_dnh3.3.2-5_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Installing libopenssl (1.0.0g-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/libopenssl_1.0.0g-1_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Collected errors:<br /> * wfopen: //usr/lib/opkg/info/libopenssl.control: No space left on device.<br /> * copy_file_chunk: write: No space left on device.<br /> * set_flags_from_control: Failed to open //usr/lib/opkg/info/libopenssl.control: No such file or directory.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/libopenssl.list: No space left on device.<br /> * opkg_install_pkg: Failed to extract data files for libopenssl. Package debris may remain!<br /> * opkg_install_cmd: Cannot install package ctorrent.<br /> * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.</p><br /><br /><p>i havent been able to install anything to the external hdd.</p><p>thanks for any advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158693">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						25 Feb 2012, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>ive tried too to install it to ram /tmp and it doesnt install it.</p><p>root@OpenWrt:~# opkg -d ram install ctorrent<br />Installing ctorrent (dnh3.3.2-5) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/ctorrent_dnh3.3.2-5_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Installing libopenssl (1.0.0g-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/libopenssl_1.0.0g-1_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Collected errors:<br /> * wfopen: //usr/lib/opkg/info/libopenssl.control: No space left on device.<br /> * copy_file_chunk: write: No space left on device.<br /> * set_flags_from_control: Failed to open //usr/lib/opkg/info/libopenssl.control: No such file or directory.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/libopenssl.list: No space left on device.<br /> * opkg_install_pkg: Failed to extract data files for libopenssl. Package debris may remain!<br /> * opkg_install_cmd: Cannot install package ctorrent.<br /> * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158719">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">safia1230</div>
					<div class="post-datetime">
						26 Feb 2012, 09:19					</div>
				</div>
				<div class="post-content content">
					<p>great sharing, i really like it and i find it very use full</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158737">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						26 Feb 2012, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>First, remove the installed packages. Solve the administrative lock error if you see it.<br /></p><div class="codebox"><pre><code>opkg remove ctorrent libopenssl
df -h
opkg --force-space --noaction --dest usb install ctorrent</code></pre></div><p>Remove &quot;option force_space&quot; and restore &quot;option overlay_root /overlay&quot; and try again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158997">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						28 Feb 2012, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>thanks , it finally works , the problem was that i was executing opkg with -dest usb and it wasnt valid that and it didint warns me . th solution consist in executing opkg --dest usb install name_of_the_package .<br />now it install most of the software to the usb. <br />i got another question , ¿how do you remove downloaded packages which havent been succesfully installed? because every time i try to install anything it starts to complain about some luci package i removed a long ago and then tried to reinstall without success.</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159037">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						28 Feb 2012, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>opkgclean.sh in <a href="http://wiki.openwrt.org/doc/techref/opkg#troubleshooting">http://wiki.openwrt.org/doc/techref/opk … leshooting</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159321">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						2 Mar 2012, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>hi, i did a mtd -r erase rootfs_data because i couldnt delete anything on the router , now im configuring it again by¡ut i cannot get to install kmod-usb-storage. here is the output: root@OpenWrt:/mnt# opkg install kmod-usb-storage<br />Installing kmod-usb-storage (3.2.5-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/kmod-usb-storage_3.2.5-1_ar71xx.ipk">http://downloads.openwrt.org/snapshots/ … ar71xx.ipk</a>.<br />Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.<br />Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.<br />Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.<br />Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.<br />Not downgrading package kernel on root from 3.2.5-1-1372605cf58ad19e8d6ed5efaef392b1 to 3.2.5-1-052105d28b13fe66fa50bc364414616f.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package kmod-usb-storage.</p><br /><br /><p>thanks for any advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159340">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Mar 2012, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>maybe it&#039;s not needed??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159345">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						2 Mar 2012, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>i think its necesary for extenal hard drives and at the moment is not detecting my hard drive plugged by usb.<br />last time i installed it and it worked , now i cant ( i dont know why ) . as i put in the first message im planning to use it as a download box for bittorrent so the little space in the router rom wont be enougth for the files downloaded. thanks for the reply.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159348">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Mar 2012, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>donno why?? it&#039;s written:</p><p>&quot;Not downgrading package kernel on root&quot;</p><p>i think that module it&#039;s already there and it&#039;s newer!</p><br /><p>already tried to follow this??</p><p><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 2 Mar 2012, 18:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159354">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						2 Mar 2012, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>output of the opkg list-instaled,kmod-usb-storage is not installed:</p><p>base-files - 103-r30639<br />base-files-network - 3<br />busybox - 1.19.3-9<br />crda - 1.1.1-1<br />dnsmasq - 2.59-2<br />dropbear - 2011.54-1<br />firewall - 2-45<br />hotplug2 - 1.0-beta-4<br />iptables - 1.4.10-4<br />iptables-mod-conntrack - 1.4.10-4<br />iptables-mod-nat - 1.4.10-4<br />iw - 3.3-1<br />kernel - 3.2.5-1-1372605cf58ad19e8d6ed5efaef392b1<br />kmod-ath - 3.2.5+2012-02-06-4<br />kmod-ath9k - 3.2.5+2012-02-06-4<br />kmod-ath9k-common - 3.2.5+2012-02-06-4<br />kmod-button-hotplug - 3.2.5-3<br />kmod-cfg80211 - 3.2.5+2012-02-06-4<br />kmod-crypto-aes - 3.2.5-1<br />kmod-crypto-arc4 - 3.2.5-1<br />kmod-crypto-core - 3.2.5-1<br />kmod-input-core - 3.2.5-1<br />kmod-input-gpio-keys-polled - 3.2.5-1<br />kmod-input-polldev - 3.2.5-1<br />kmod-ipt-conntrack - 3.2.5-1<br />kmod-ipt-core - 3.2.5-1<br />kmod-ipt-nat - 3.2.5-1<br />kmod-ipt-nathelper - 3.2.5-1<br />kmod-leds-gpio - 3.2.5-1<br />kmod-ledtrig-usbdev - 3.2.5-1<br />kmod-lib-crc-ccitt - 3.2.5-1<br />kmod-mac80211 - 3.2.5+2012-02-06-4<br />kmod-nls-base - 3.2.5-1<br />kmod-ppp - 3.2.5-1<br />kmod-pppoe - 3.2.5-1<br />kmod-usb-core - 3.2.5-1<br />kmod-usb-ohci - 3.2.5-1<br />kmod-usb2 - 3.2.5-1<br />libc - 0.9.33-103<br />libgcc - 4.6-linaro-103<br />libip4tc - 1.4.10-4<br />libiwinfo - 31<br />libiwinfo-lua - 31<br />liblua - 5.1.4-8<br />libnl-tiny - 0.1-2<br />libuci - 2011-11-14.1-1<br />libuci-lua - 2012-02-24.1-1<br />libxtables - 1.4.10-4<br />lua - 5.1.4-8<br />luci - trunk+svn8323-1<br />luci-app-firewall - trunk+svn8323-1<br />luci-i18n-english - trunk+svn8323-1<br />luci-lib-core - trunk+svn8323-1<br />luci-lib-ipkg - trunk+svn8323-1<br />luci-lib-lmo - trunk+svn8323-1<br />luci-lib-nixio - trunk+svn8323-1<br />luci-lib-sys - trunk+svn8323-1<br />luci-lib-web - trunk+svn8323-1<br />luci-mod-admin-core - trunk+svn8323-1<br />luci-mod-admin-full - trunk+svn8323-1<br />luci-proto-core - trunk+svn8323-1<br />luci-proto-ppp - trunk+svn8323-1<br />luci-sgi-cgi - trunk+svn8323-1<br />luci-theme-base - trunk+svn8323-1<br />luci-theme-openwrt - trunk+svn8323-1<br />mtd - 17<br />opkg - 618-2<br />ppp - 2.4.5-4<br />ppp-mod-pppoe - 2.4.5-4<br />swconfig - 10<br />uboot-envtools - 2011.06-4<br />uci - 2011-11-14.1-1<br />uhttpd - 30<br />wireless-tools - 29-4<br />wpad-mini - 20111103-3</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159355">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						2 Mar 2012, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>here : <a href="http://www.minipwner.com/index.php/forum/5-minipwner-support/113-avoiding-kernel-upgrade">http://www.minipwner.com/index.php/foru … el-upgrade</a>&nbsp; &nbsp;they have the same problem and says that a solution is to have the latest kernel, how do i upgrade the kernel?</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159357">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						2 Mar 2012, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>ive seen that there is a new version of the firmware , released on 29 feb 2012 , which should i use to upgrade , sysupgrade or factory , i think its sysupgrade. i am planning to upgrade through luci web interface, is it ok like that? thanks for any reply.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159365">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Mar 2012, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>you should use sysupgrade and do it from luci is ok.</p><p>seems not useful to me because it says that your kernel is already NEWER than the one requested by package!<br />it&#039;s the opposite of what is written in the link you posted...</p><br /><p>anyway, you could also try:</p><p>opkg install kmod-usb-storage -force-downgrade</p><p>but i&#039;m not responsable for any event that could happen XD</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 2 Mar 2012, 20:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159468">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">gdb</div>
					<div class="post-datetime">
						3 Mar 2012, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>hi, ive upgrated the firmware and now it work correctly the opkg install , but i have another problem , the external hard drive its been recognised as a msdos filesystem i believe, because it show 8 caracters in the name plus the extention. and i cannot install correctly rtorrent because it cannot create symbolic links to the librarires that are been installed on the external drive. im planning formatting a pendrive in ext filesystem and add it to a usb hub and install things there, but i cannot found a good tutorial on how to do this in open wrt, anyone has a good tutorial on formatting in ext filesystem?? thanks for the replies.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159470">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Mar 2012, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>you can do that on you pc with almost any partitioning software <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 3 Mar 2012, 16:29)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>