<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Boot log - HG658c (HG658BZV Ver. A) with BCM63168 SoC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 23 Apr 2018 and 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=49676&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=49676&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p228239">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						23 Mar 2014, 14:16					</div>
				</div>
				<div class="post-content content">
					<p>See <a href="https://wikidevi.com/wiki/Huawei_HG658">https://wikidevi.com/wiki/Huawei_HG658</a></p><p>The BCM63168 SoC:</p><p>Dual-core VIPER (VoIP Enhanced RISC) processor (Broadcom MIPS 4350 32-bit) @ 400MHz<br />BCM435f 802.11 b/g/n Wireless Controller<br />BCM53115 5-port Gigabit Ethernet switch<br />Dual Broadcom Forwarding Assist Processor (FAP) ASIC (Application Specific Integrated Circuit)<br />BCM5862 IPSec Security Processor Unit<br />... </p><p>Pics here:<br /><a href="http://www.4shared.com/download/abEAbGY6ce/IMG_20140322_162443.jpg?lgfp=3000">http://www.4shared.com/download/abEAbGY … ?lgfp=3000</a><br /><a href="http://www.4shared.com/download/dg0XLz4tba/IMG_20140322_162509.jpg?lgfp=3000">http://www.4shared.com/download/dg0XLz4 … ?lgfp=3000</a></p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 27 Mar 2014, 18:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228602">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						27 Mar 2014, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>HG658c boot log is here: <a href="http://pastebin.com/YxkiEtZn">http://pastebin.com/YxkiEtZn</a></p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 27 Mar 2014, 21:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228758">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						29 Mar 2014, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>I managed to capture a Vodafone firmware update to the HG658c using a man in the middle. See <a href="https://forum.openwrt.org/viewtopic.php?pid=228756#p228756">https://forum.openwrt.org/viewtopic.php … 56#p228756</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228949">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						1 Apr 2014, 10:23					</div>
				</div>
				<div class="post-content content">
					<p>Can u make a dump of rootfs partition please. I have hg658b version and want to compare the file system tree.<br />Thank u.</p><p>U can make dump easy.<br />Insert an usb drive, log in to shell and execute.</p><p>cat /dev/mtdblock0 &gt; /mnt/usb1_1/xxxxfile.bin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228964">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						1 Apr 2014, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Sadly, not I cannot supply a rootfs yet. My branded device does not run telnetd, afaics, so a shell is not possible.</p><p>I have serial access to the boot loader. I do not know if it is possible to extract the rootfs from there. I am happy to try if you have suggestions.</p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 1 Apr 2014, 17:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228980">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						1 Apr 2014, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>The latest firmware is here: <a href="https://drive.google.com/file/d/0B8w9evGfsK03MVpMTlVBTDY3WlE/edit?usp=sharing">https://drive.google.com/file/d/0B8w9ev … sp=sharing</a></p><p>It includes a new bootloader (CFE).</p><p>I tested it by flashed using the stock interface. Boots fine.</p><p>The boot log is here: <a href="http://pastebin.com/1JaF3dPr">http://pastebin.com/1JaF3dPr</a></p><p>Please share your findings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245468">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						31 Aug 2014, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>Any news regarding this router? I also have one and willing to help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245548">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						1 Sep 2014, 02:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maivorbim wrote:</cite><blockquote><p>Any news regarding this router? I also have one and willing to help.</p></blockquote></div><p>Sadly, the bootloader remains locked. None of the published methods for unlocking the CFE work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245621">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						1 Sep 2014, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>If you have an HG658c that has been crippled by your ISP, an unlocked firmware for the HG658c is available: <a href="http://www.o2online.ie/o2/uploads/HG658cV100R001C59B012_upgrade_main.bin">http://www.o2online.ie/o2/uploads/HG658 … e_main.bin</a></p><p>You can fully configure it. I dont know if you can telnet to it, I will run nmap later.</p><p>Note: After flashing the new firmware, your user name and password will not have changed! Login, reset to Default Settings in Maintenance -&gt; Device menu. (You may wish to make note of your WAN settings first!!)</p><p>The HG658c will reboot. Your new username and password will both be &quot;admin&quot;.</p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 1 Sep 2014, 16:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245827">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						3 Sep 2014, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, dmcdonnell. I can&#039;t flash the firmware you posted, i get an &quot;Upgrade failed. Invalid image file!&quot; error. I downloaded it twice and i still get the same error, so i don&#039;t think it&#039;s corrupted. Is there any other way i can flash images?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245834">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Sep 2014, 13:22					</div>
				</div>
				<div class="post-content content">
					<p>You may be out of luck. The Broadcom CFE on the HG658c is locked, at least on all those I see here in Ireland. The devices are branded by Vodafone, O2, etc. Happily the Irish ISPs sign their firmware with the same key, thus you can flash the unlocked O2 firmware on the crippled Vodafone VDSL router to return it to OEM firmware status.</p><p>It may be worth your while to try a CFE flash. Keep the reset button pressed in for ~10 seconds or so at power up, until the power light shines orange. Connect your PC via Ethernet cable and set your PC port IP address manually to 192.168.1.100. Use your browser to navigate to 192.168.1.1, the built in IP address of the HG658c cfe. You should get the cfe firmware flash screen - however I expect it will also fail with invalid image. Note: you may need to flush the browser cache first - esp in firefox.</p><p>There are a couple of HG658c firmwares about that would not flash on Irish HG658c, giving the same error you received. Perhaps, one of those would work for you? I will dig out a link.</p><p>What country are you in? Who branded your HG658c?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245836">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						3 Sep 2014, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>Nevermind, i tried the recovery mode (i had to keep the reset button pressed for 30s), uploaded your firmware, but now the router is bricked. When i power it all the leds light up and stay lit, i can&#039;t reset it or anything. I guess the error was there for a reason <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> i&#039;m writing this so if anybody else tries this they should know what to expect.</p><p>The modem is branded by Romtelecom, Romanian ISP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245838">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Sep 2014, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>I bricked a couple of these too. Happily they are cheap here. I have a spare unlocked board. Send me your name n address. I will post it to you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245839">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						3 Sep 2014, 13:46					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> thanks man, that&#039;s really kind of you to do that for a stranger. However, i must refuse as my isp is sending me a replacement.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245841">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Sep 2014, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>@maivorbim, no problem. Can you check your bricked device and confirm the board is labelled HG658BZV Ver. A, please? I know there are similar, but different, varients on this board, in Saudi for example. Trying these firmwares bricked my HG658c.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245844">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						3 Sep 2014, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>It is indeed a HG658BZV Ver. A. Here are some photos <a href="http://imgur.com/a/iZXvP">http://imgur.com/a/iZXvP</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245856">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						3 Sep 2014, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>u cannot update hg658c over hg658b, because the NAND erase size.<br />in firmware for hg658b, erase size is 16kb, and for hg658c is 128kb.</p><p>i tryed some reverse engineering on firmware, as i know i found some info&#039;s.<br />we take as reference latest firmware posted.</p><p><strong>- in the first 128 bytes of image , is the header, but is encrypted and i cannot find a way to decrypt that.<br />- next 128kb are image header, this is 99% understanded.<br />&nbsp; &nbsp; - first 4 bytes unknown<br />&nbsp; &nbsp; - next 4 bytes is the length in hex of jffs image (started from hex address 20080 to 0xc4007f = c20000 length)<br />&nbsp; &nbsp; - next 35 bytes is the name gived for jffs<br />&nbsp; &nbsp; - next 14 bytes is the date and version<br />&nbsp; &nbsp; - next 4 bytes is the crc32 of the jffs-image (from address 0x20080 to 0xc4007f = c20000 length)<br />&nbsp; &nbsp; - next is empty space.<br />- from address 0x20080 to 0xC4007f is the jffs2 rootfs-image<br />- the last 20 bytes is the crc32 calculated for the whole image file (unknown header + known header + jffs2 image) - if this crc is wrong the router reject the firmware at upload.</strong></p><p>Hope those info&#039;s help, maybe someone else can share from his experience and make the firmware customizable for everyone&#039;s needs.</p><br /><p>Cheers.</p>											<p class="post-edited">(Last edited by <strong>cornelus2009</strong> on 17 Jan 2015, 18:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245857">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						3 Sep 2014, 16:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dmcdonnell wrote:</cite><blockquote><p>I bricked a couple of these too. Happily they are cheap here. I have a spare unlocked board. Send me your name n address. I will post it to you.</p></blockquote></div><p>hello, can send one of that piece to me, to try reverse eng. on that</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245858">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Sep 2014, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>@cornelus2009</p><p>I would be delighted to post you the HG658c board. email me your postal details: dermot [at] mcdonnell [dot] ie.</p><p>Also, a few months back I got this private message on another forum:</p><p>&quot;I have uploaded a few HG658c firmwares.&nbsp; They are full factory images and should work from the emergency upgrade gui obtained by holding reset and powering up.&nbsp; I also have the ordinary firmwares but they don&#039;t upgrade the default settings.&nbsp; Let me know if you want them.&nbsp; The full images are at&nbsp; drive [dot] google [dot] com/#folders/0BzdkzCqQ7QLdMXBOTmZHd3BHNVU .&quot;</p><p>These include Huawei Engineering documents which may well be of use to you. Some of them I can flash, some are &quot;invalid images&quot;.</p><p>Regards,</p><p>Dermot.</p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 3 Sep 2014, 16:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245860">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						3 Sep 2014, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>yes, send to me all u have about those, documents, codes , binaries, maybe i can do them.<br />on the hg655 was easy way to decustomize them.</p><p>mailed to u the address.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245868">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Sep 2014, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>@cornelus2009</p><p>Posted HG658c and VMG8324-B10A to you. Expect delivery early next week.</p><p>Please confirm arrival.</p><p>Regards,</p><p>Dermot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245884">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						3 Sep 2014, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>ok, thank u.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246325">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						7 Sep 2014, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know if this is new or not, but you can access telnet or ssh by going to adv settings &gt; acl &gt; add telnet and ssh service with destination lan,allow all. login u:admin pw:admin.</p>											<p class="post-edited">(Last edited by <strong>maivorbim</strong> on 7 Sep 2014, 20:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246362">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						7 Sep 2014, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>dmcdonnell, can you try to see if you have shell access when you type shell or sh after telnet/ssh login.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246425">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						8 Sep 2014, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>@maivorbim</p><p>Would love to but I mailed my Hg658c to Cornelus2009. I will try to get another cheap on the secondary market here. Thank you for the info, it is very interesting. I am sure Cornelus2009 will reply once he receives the packet.</p>											<p class="post-edited">(Last edited by <strong>dmcdonnell</strong> on 8 Sep 2014, 12:07)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=49676&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=49676&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>