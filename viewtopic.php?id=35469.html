<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> shc-3.8.7 shell script encryption for OpenWrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 28 Apr 2018 and 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=35469&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p160756">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">teara</div>
					<div class="post-datetime">
						13 Mar 2012, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, i have been working on porting the shc software to openwrt, i have successfully compile the shc-3.8.7 as a mipsel ipk. It runs fine in 8.09.2 only there is no cc compiler included so shc only preforms the first step (creates the .c source from the .sh script/s) but it does not compile the resulting source into tyhe executable, since ther is no compiler present if gives the &quot;cc: not found&quot; error. </p><p>I have used shc flawlessly&nbsp; on debian linux for a few years now and it works perfectly. Everything seems to be correct with the openwrt version aswell. only when i try to run the the executable i get the error msg&nbsp; &quot;mysrcipt: applet not found&quot;&nbsp; (**myscript is the executable created by shc from the&nbsp; mtscript.sh**)&nbsp; if i compile the same script for x86 it runs fine. I think the problem may have something to do with busybox. I have scoured the web for info, and anything reguarding embedded linuxs applet errors seem to point to busybox ??</p><p>If i was to compile gcc as an ipk and install in on the router, then compile the script natively (on the router), would this be any different then cross-compiling the .c produceced by shc ? </p><p>(** just to note i am using the SDK to cross-compile the .c source produced from the shc app on the router ,&nbsp; i run shc on the router, and scp the resulting .c file to my SDK pakage dir. I have tried producing the .c on my linux box aswell and it make no difference, i still get the &quot;applet not found&quot; error.</p><br /><p>I will give an example script and the resulting .c source produced by shc once i get it orginized in hopes that it will aid if solving this error </p><br /><p>Any thought or suggestions welcome <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Teara</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178535">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pingwho</div>
					<div class="post-datetime">
						17 Sep 2012, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />&nbsp; I am having a similar problem - I compiled a shell script as listed below using &quot;shc-3.8.7.2&quot; into a &quot;c&quot; code, and then to an Openwrt executable. The executable, when run on a Openwrt platform, is exiting with &quot;applet not found&quot;.&nbsp; Has anyone encountered a similar porblem or has any one used &quot;shc&quot; on an openwrt platform.<br />shc-3.8.7 can be found at -- <a href="http://www.datsi.fi.upm.es/~frosal/sources/">http://www.datsi.fi.upm.es/~frosal/sources/</a> .<br />&nbsp; Please let me know.<br />thanks<br />Raj</p><p>--</p><p>#! /bin/sh<br />echo &quot;TEST&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178536">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Sep 2012, 21:40					</div>
				</div>
				<div class="post-content content">
					<p>The &quot;applet not found&quot; errors happens when something calls busybox with a nonexisting command:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# busybox foo
foo: applet not found</code></pre></div><p>It is impossible to tell what the problem is without seeing the generated executable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178541">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">pingwho</div>
					<div class="post-datetime">
						17 Sep 2012, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the reply. You are right in a way, but My problem is specifically with respect to using &quot;shc&quot; - a shell script compiler, which can be used to convert &quot;.sh&quot; files to executables that can be run on OPENwrt or linux systems.</p><p>you can type &quot;strace busybox foo&quot; or &quot;strace busybox echo foo&quot;.&nbsp; to find the crash points. </p><p>I am still stuck. but if some has tried &quot;shc&quot; on openwrt please give me a howl <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>thanks.<br />Raj</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178542">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Sep 2012, 23:06					</div>
				</div>
				<div class="post-content content">
					<p>I know exactly where the &quot;crash point&quot; is, but that does not help to track down the actual issue with shc compiled scripts. I suspect the shc compiler puts some instructions in the embedded scripts which are not supported by busybox.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178752">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pingwho</div>
					<div class="post-datetime">
						19 Sep 2012, 16:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Jow. Finally found the issue after going through the &quot;shc-3.8.7&quot; code. The shc compiler is using &quot;execv&quot; command in the &quot;c&quot; code. BusyBox, for some reason, does not like it. I decided to put this aside for a while until I figure out how to replace &quot;execv&quot; command with &quot;system&quot; command, which works on busy box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183898">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">CiccioMinnesota</div>
					<div class="post-datetime">
						21 Nov 2012, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>any news about? I&#039;m facing the same problem.</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187991">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ddd203</div>
					<div class="post-datetime">
						5 Jan 2013, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Try patch: <a href="http://sdrv.ms/136LGal">http://sdrv.ms/136LGal</a></p><p>1. Patch shc-3.8.7.c ;<br />2. CrossCompill shc for you platform ;<br />3. Run shc on target platform with options: shc -r -B -i some-script.sh (-B - for supporting busybox) ;<br />4. It produse general C-code ;<br />5. CrossCompill C-code ;<br />6. Enjoy.</p><p>P.S. My platform is SH4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244904">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zxgdut</div>
					<div class="post-datetime">
						26 Aug 2014, 04:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi </p><p>The patch link can&#039;t be open.<br />Could please send the&nbsp; patch to my email zi_zhi_guang@163.com<br />Thanks .<br /></p><div class="quotebox"><cite>ddd203 wrote:</cite><blockquote><p>Try patch: <a href="http://sdrv.ms/136LGal">http://sdrv.ms/136LGal</a></p><p>1. Patch shc-3.8.7.c ;<br />2. CrossCompill shc for you platform ;<br />3. Run shc on target platform with options: shc -r -B -i some-script.sh (-B - for supporting busybox) ;<br />4. It produse general C-code ;<br />5. CrossCompill C-code ;<br />6. Enjoy.</p><p>P.S. My platform is SH4.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305411">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>I know this old topic..</p><p>but i have this problem too</p><p>I need shc for openwrt but dont know how compile?</p><p>some one please give me some directions?</p><p>I dont know any tags to seach about how to do this..</p><p>sorry bad english...</p><p>thanks for all!</p>											<p class="post-edited">(Last edited by <strong>gugaoforums</strong> on 29 Dec 2015, 23:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305415">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 18:26					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m install</p><p>opkg install make</p><p>root@openwrt:~/sda1/shc-3.8.9b# make<br />gcc -Wall&nbsp; shc.c -o shc<br />make: gcc: Command not found<br />make: *** [shc] Error 127</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305451">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						29 Dec 2015, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>what platform do you need it for ? rather the try and explain I have gone ahead and made an openwrt package with the patch applied. I will compile it and post it on my site for you to download and test ...just need to know what platform you need it for <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Note once you compile the script you will need to take the resulting C code and recompile for your platform ...as per the instructions above</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305458">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 23:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hostle19 wrote:</cite><blockquote><p>what platform do you need it for ? rather the try and explain I have gone ahead and made an openwrt package with the patch applied. I will compile it and post it on my site for you to download and test ...just need to know what platform you need it for <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Note once you compile the script you will need to take the resulting C code and recompile for your platform ...as per the instructions above</p></blockquote></div><p>I need shc for openwrt barrier breaker.</p><p>I have many bash scripts in my openwrt barrier breaker and I need to encrypt and run with the magic of shc</p><p>Thank you very much for your help my friend!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305459">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 23:32					</div>
				</div>
				<div class="post-content content">
					<p>how to CrossCompill C-code to running in openwrt?</p><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>hi friend&nbsp; hostle19</p><p>where is your site?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305460">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						29 Dec 2015, 23:34					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://wiki.openwrt.org/doc/devel/crosscompile">https://wiki.openwrt.org/doc/devel/crosscompile</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305461">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 23:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p><a href="https://wiki.openwrt.org/doc/devel/crosscompile">https://wiki.openwrt.org/doc/devel/crosscompile</a></p></blockquote></div><p>Thanks!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305462">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						29 Dec 2015, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>If I can encrypt my bash openwrt script in my linux with shc...</p><p>get the c code</p><p>and crosscompile for openwrt</p><p>works this solution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305468">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						30 Dec 2015, 00:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gugaoforums wrote:</cite><blockquote><p>If I can encrypt my bash openwrt script in my linux with shc...</p><p>get the c code</p><p>and cross-compile for openwrt</p><p>works this solution?</p></blockquote></div><p>NO you need the shc binary to run the script after its compiled. So you install the openwrt shc package vi opkg install, then you use shc to convert your script into C code then you cross compile the resulting C code into a binary/ openwrt package then you again install it via opkg install.</p><p>At least that is the only way I ever got it to work, I have only used it for testing a few years ago so I could be wrong, regardless you&#039;ll need the shc package to install shc on your router to run the compiled scripts.</p><p>I still need to know what type of router your are using so I can compile it for that platform. My site is <a href="http://www.fire-wrt.com/forums">www.fire-wrt.com/forums</a> ... its brand new <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305470">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						30 Dec 2015, 00:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hostle19 wrote:</cite><blockquote><div class="quotebox"><cite>gugaoforums wrote:</cite><blockquote><p>If I can encrypt my bash openwrt script in my linux with shc...</p><p>get the c code</p><p>and cross-compile for openwrt</p><p>works this solution?</p></blockquote></div><p>NO you need the shc binary to run the script after its compiled. So you install the openwrt shc package vi opkg install, then you use shc to convert your script into C code then you cross compile the resulting C code into a binary/ openwrt package then you again install it via opkg install.</p><p>At least that is the only way I ever got it to work, I have only used it for testing a few years ago so I could be wrong, regardless you&#039;ll need the shc package to install shc on your router to run the compiled scripts.</p><p>I still need to know what type of router your are using so I can compile it for that platform. My site is <a href="http://www.fire-wrt.com/forums">www.fire-wrt.com/forums</a> ... its brand new <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>sorry for my bad english..</p><p>I need to run shc in openwrt barrier breaker in routers TPlink&nbsp; mr3020 , mr3220 v1&nbsp; v2, 1043nd</p><p>thanks for your help and patience!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305473">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						30 Dec 2015, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>file has been posted at my site..</p><p><a href="http://fire-wrt.com/forums/showthread.php?2-shc-3-8-9b-for-AR71xx&amp;p=2#post2">http://fire-wrt.com/forums/showthread.p … ;p=2#post2</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305479">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						30 Dec 2015, 02:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hostle19 wrote:</cite><blockquote><p>file has been posted at my site..</p><p><a href="http://fire-wrt.com/forums/showthread.php?2-shc-3-8-9b-for-AR71xx&amp;p=2#post2">http://fire-wrt.com/forums/showthread.p … ;p=2#post2</a></p></blockquote></div><p>thanks friend!</p><p>but..</p><p>gugaoforums, you do not have permission to access this page. This could be due to one of several reasons:</p><p>Your user account may not have sufficient privileges to access this page. Are you trying to edit someone else&#039;s post, access administrative features or some other privileged system?<br />If you are trying to post, the administrator may have disabled your account, or it may be awaiting activation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305483">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						30 Dec 2015, 04:01					</div>
				</div>
				<div class="post-content content">
					<p>I activated your account, you should be good to go now</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305602">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						31 Dec 2015, 01:34					</div>
				</div>
				<div class="post-content content">
					<p>for share...</p><p>shc -r -B -i -f /mnt/sda1/test.sh<br />shc parse(-f): No source file specified<br />shc Usage: shc [-e date] [-m addr] [-i iopt] [-x cmnd] [-l lopt] [-rvDTCABh] -f script</p><p>******************</p><p>shc -r -B -f /mnt/sda1/test.sh<br />/bin/sh: cc: not found<br />shc: Success</p><p>/mnt/sda1/test.sh<br />/mnt/sda1/test.sh.x.c</p><p>now I dont know what to do lololol</p><p>but I learn about crosscompile...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305603">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">gugaoforums</div>
					<div class="post-datetime">
						31 Dec 2015, 01:36					</div>
				</div>
				<div class="post-content content">
					<p>the guru&#039;s can tel if this true</p><p>source link<br /><a href="http://www.linux-magazine.com/Online/Features/SHC-Shell-Compiler">http://www.linux-magazine.com/Online/Fe … l-Compiler</a></p><p>warning! shc will not protect your sourcecode!</p><p>After executing the “protected script” run:</p><p>ps aux | grep “name of shc compiled script”</p><p>You will notice it uses a single process to execute the entire contents of your script and it is now displayed in it’s entirety in your shell window. You can then simply find and replace ^J with \n and ^I with \t and you have the full formatted source code.</p><p>Therefore any shc ‘compiled script’ can be reversed to original complete source code in seconds… It is utterly pointless and I really wish people would stop suggesting it as an obfuscation technique, it gives authors a false sense of security because at a glance the *file* it compiles appears to be very secure. No obfuscation technique is irreversible but the point is to at least make it complex enough that it becomes more effort than it is worth to a would be code thief.</p><p>shc however, can be reversed in seconds as I have just described above.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305615">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						31 Dec 2015, 07:31					</div>
				</div>
				<div class="post-content content">
					<p>this bug was fix in version 3.89 ...here is the change log</p><br /><p>CHANGES</p><p>3.8.9b&nbsp; &nbsp; Fri, 4 Jan 2013 12:10:42 +0100 (CET)</p><p>&nbsp; &nbsp; Lee Chisnall &lt;lee@dnuk.com&gt;<br />&nbsp; &nbsp; - To work as daemon.&nbsp; </p><br /><p><span style="color: green"><br />3.8.9&nbsp; &nbsp; Wed Apr 25 09:24:25 CEST 2012</span></p><p><span style="color: green">&nbsp; &nbsp; Thanks to Giacomo Picconi &lt;giacomo.picconi@gpstudio.com&gt; for:<br />&nbsp; &nbsp; - Fixing a long standing bug making the source not hidden.<br /></span></p><br /><p>3.8.8&nbsp; &nbsp; Mon Nov 28 11:26:25 CEST 2012</p><p>&nbsp; &nbsp; &quot;me&quot;.</p><br /><br /><p>3.8.7&nbsp; &nbsp; Wed Feb 10 20:40:37 CET 2010</p><p>&nbsp; &nbsp; - Bug on 64bit systems with expiration dates.</p>											<p class="post-edited">(Last edited by <strong>hostle19</strong> on 31 Dec 2015, 07:36)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=35469&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>