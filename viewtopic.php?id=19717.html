<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How do I chose a kernel version of choice before compileing openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p85341">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fedormma</div>
					<div class="post-datetime">
						8 Apr 2009, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Everytime I compile the openwrt, it chose the latest one and my driver does not work with it.<br />How do I specify openwrt to choose a different kernel version?</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85431">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jhalfmoon</div>
					<div class="post-datetime">
						9 Apr 2009, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>Follow these instructions</p><p><a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)BuildingKamikazeHowTo.html">http://oldwiki.openwrt.org/OpenWrtDocs( â€¦ HowTo.html</a></p><p>and select the desired kernel in the &quot;make menuconfig&quot; part.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85844">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ozel</div>
					<div class="post-datetime">
						14 Apr 2009, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve read this wiki page and many others and I also don&#039;t know where I could set a specific kernel version.<br />If I choose my target system in menuconfig to be&nbsp; &quot;Atheros 231x/5312 [2.6]&quot;, I see under the help screen &quot;Selects: LINUX_2_6 &amp;&amp; LINUX_2_6_23 &amp;&amp; ...&quot;<br />So it looks as if the kernel version is hardcoded depending on the kamikaze revision (r 11949 in this case).</p><p>Or if I use a very recent kamikaze trunk version (r 15226) where under &quot;target/linux/atheros/&quot; there are allready all the files and patches for the 2.6.28 and the 2.6.26 kernel.<br />Where could I change the default behaviour to comple 2.6.26 instead of 2.6.28? If I change for example &quot;CONFIG_LINUX_2_6_28=y&quot; to &quot;CONFIG_LINUX_2_6_26=y&quot; in .config, it&nbsp; has no effect and gets overwritten everytime I do &quot;make menuconfig&quot;.</p><p>Thanks for any hints, oli</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85846">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						14 Apr 2009, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>Look into target/linux/atheros/Makefile, LINUX_VERSION</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85909">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ozel</div>
					<div class="post-datetime">
						15 Apr 2009, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks!</p><p>Now I got an old 2.6.23 kernel configured (through copying .23 kernel files from an older kamikaze r11949 &quot;target/linux/atheros&quot; dir over)&nbsp; into a recent kamikaze 809 trunk revision. There&#039;s probably something messed up now because i also had to copy over &quot;build_dir/linux-2.6.23.17&quot; from the older kamikaze revision buildroot in order to escape kernel build problems...</p><p>Should it work painless to include an older kernel in the current build process? Maybe I&#039;m sill doing something wrong?</p><p>I have the problem that with Accton MR3201_P_ modules (slightly modified MR3201A modules, sold by open-mesh.com) only the 2.6.23.17 kernel boots into the rootfs. 2.6.26 or 2.6.28 kernels complain at boot that they can&#039;t find the magic JFSS2 bitmask and end with &quot;Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,1)&quot;</p><p>regards, oli</p>											<p class="post-edited">(Last edited by <strong>ozel</strong> on 15 Apr 2009, 14:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85990">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ozel</div>
					<div class="post-datetime">
						16 Apr 2009, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>Hint:<br />after any changes in target/linux/* you have to do &quot;make target/linux/clean&quot; in order build cleanly another kernel with new settings.<br />After that my .23 kernel compile went without the erros described above. So copying the relevant patches-xxx/ and files-xxx/ folders and the config-xxx file into target/linux/atheros and selecting the new kernel version in the Makefile as describe above is enough!</p><p>OpenWrt is really great but the documentation is a little... well, widespread. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91808">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ps_sach</div>
					<div class="post-datetime">
						24 Jul 2009, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi ozel,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I want to do the same what you did - use other kernel version than the standard one&nbsp; to compile the openwrt image.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; I red through your posts, but i need it in more detail.&nbsp; Can you please give me the steps? I am confused about the Makefile changes.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; Regarding the Makefile, you meant to say just keep the original Makefile and replace other files from the other kernel version and just change the kernel version in the Makefile, right?</p><p>Thanks!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>