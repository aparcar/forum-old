<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Custom build squashfs firmware (8MB) for wr703n doen&#039;t save config</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p318448">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">oscarxvita</div>
					<div class="post-datetime">
						6 Apr 2016, 23:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I&#039;m newbie!<br />I&#039;ve compiled a custom firmware (8MB) for my tplink 703n with 8M mod, but only jffs2 version firmware is running Ok, the squashfs version factory firmware cannot save config after reboot.<br />Here&#039;s the bootlog<br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.18.23 (oscar@oscar-VirtualBox) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r48749) ) #6 Tue Apr 5 01:43:30 CST 2016
[    0.000000] MyLoader: sysp=48c1a485, boardp=ab07dc85, parts=858d577f
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR9330 rev 1
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x03ffffff]
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 80357cf0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16384 pages, LIFO batch:3
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=TL-WR703N  console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 60944K/65536K available (2480K kernel code, 121K rwdata, 528K rodata, 252K init, 188K bss, 4592K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.100000] NET: Registered protocol family 16
[    0.100000] MIPS: machine is TP-LINK TL-WR703N v1
[    0.370000] Switched to clocksource MIPS
[    0.370000] NET: Registered protocol family 2
[    0.380000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.390000] TCP: reno registered
[    0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.410000] NET: Registered protocol family 1
[    0.410000] PCI: CLS 0 bytes, default 32
[    0.410000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.440000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.440000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.450000] msgmni has been set to 119
[    0.460000] io scheduler noop registered
[    0.460000] io scheduler deadline registered (default)
[    0.460000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.470000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11, base_baud = 1562500) is a AR933X UART
[    0.480000] console [ttyATH0] enabled
[    0.490000] bootconsole [early0] disabled
[    0.500000] m25p80 spi0.0: found s25fl064k, expected m25p80
[    0.500000] m25p80 spi0.0: s25fl064k (8192 Kbytes)
[    0.510000] 5 tp-link partitions found on MTD device spi0.0
[    0.510000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.520000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.520000] 0x000000020000-0x000000135b1c : &quot;kernel&quot;
[    0.530000] 0x000000135b1c-0x0000007f0000 : &quot;rootfs&quot;
[    0.530000] mtd: device 2 (rootfs) set to be root filesystem
[    0.540000] 1 squashfs-split partitions found on MTD device rootfs
[    0.540000] 0x000000470000-0x0000007f0000 : &quot;rootfs_data&quot;
[    0.550000] 0x0000007f0000-0x000000800000 : &quot;art&quot;
[    0.550000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;
[    0.580000] libphy: ag71xx_mdio: probed
[    1.170000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
[    1.180000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    1.180000] TCP: cubic registered
[    1.180000] NET: Registered protocol family 17
[    1.190000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.200000] 8021q: 802.1Q VLAN Support v1.8
[    1.210000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.220000] Freeing unused kernel memory: 252K (80371000 - 803b0000)
[    2.050000] init: Console is alive
[    2.050000] init: - watchdog -
[    4.060000] init: - preinit -
[    4.560000] random: procd urandom read with 7 bits of entropy available
[    7.780000] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[    7.840000] procd: - early -
[    7.850000] procd: - watchdog -
[    8.510000] procd: - ubus -
[    9.530000] procd: - init -
[   10.720000] Netfilter messages via NETLINK v0.30.
[   10.730000] ip_set: protocol 6
[   10.840000] u32 classifier
[   10.840000]     input device check on
[   10.850000]     Actions configured
[   10.850000] Mirror/redirect action on
[   10.870000] nf_conntrack version 0.5.0 (956 buckets, 3824 max)
[   10.880000] Loading modules backported from Linux version master-2015-03-09-0-g141f155
[   10.890000] Backport generated by backports.git backports-20150129-0-gdd4a670
[   10.900000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.030000] xt_time: kernel timezone is -0000
[   11.100000] cfg80211: Calling CRDA to update world regulatory domain
[   11.100000] cfg80211: World regulatory domain updated:
[   11.110000] cfg80211:  DFS Master region: unset
[   11.110000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   11.120000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   11.130000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz, 92000 KHz AUTO), (N/A, 2000 mBm), (N/A)
[   11.140000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   11.150000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (N/A)
[   11.160000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   11.170000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   11.170000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   11.180000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   11.430000] PPP generic driver version 2.4.2
[   11.440000] NET: Registered protocol family 24
[   11.550000] ath: EEPROM regdomain: 0x0
[   11.550000] ath: EEPROM indicates default country code should be used
[   11.550000] ath: doing EEPROM country-&gt;regdmn map search
[   11.550000] ath: country maps to regdmn code: 0x3a
[   11.550000] ath: Country alpha2 being used: US
[   11.550000] ath: Regpair used: 0x3a
[   11.570000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   11.570000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2
[   11.580000] cfg80211: Calling CRDA for country: US
[   11.580000] cfg80211: Regulatory domain changed to country: US
[   11.590000] cfg80211:  DFS Master region: FCC
[   11.590000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   11.600000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)
[   11.610000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2300 mBm), (N/A)
[   11.620000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2300 mBm), (0 s)
[   11.630000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2300 mBm), (0 s)
[   11.640000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)
[   11.640000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   48.730000] random: nonblocking pool is initialized</code></pre></div><p>And I saw this, but I googled it with no help....<br /> </p><div class="codebox"><pre><code>mount_root: jffs2 not ready yet, using temporary tmpfs overlay</code></pre></div><p>Also it seems to boot on its RAM, not ROM.</p><p>I tried hard but I don&#039;t know what is the problem, can you help me??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318530">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						7 Apr 2016, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>What happens if you mount it manually?</p><p>How&#039;s your /dev/root looking sizewise? You didn&#039;t accidentally fill it all up by making your image too big?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>