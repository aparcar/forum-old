<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> configuring USB as extroot ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p161782">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						22 Mar 2012, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>router model :&nbsp; Tp-Link Tl-MR3220<br />Firmware :&nbsp; r27340 / LuCi Trucnk<br />----------<br />Problem : No Space to install packages <br />---------<br />Packages installed for extroot : <br />&nbsp; - Kmod-usb-storage-extras <br />&nbsp; - kmod-fs-Ext4<br />&nbsp; - Block-mount <br />--------<br />i prepared my USB using &quot; MiniTool Partition &quot; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.95GB&nbsp; , File system Ext4</p><p>after i installed the packages and inserted the usb , i rebooted the router , and wrote the following : <br />&nbsp; &nbsp;<br />root@OpenWrt:~# mount /dev/sda2 /overlay<br />mount: mounting /dev/sda2 on /overlay failed: No such file or directory</p><p>--------<br />my fstab configuration is : <br />config global autoswap<br />&nbsp; &nbsp; &nbsp; &nbsp; option from_fstab 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option anon_swap 0</p><p>config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp;/home<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;/dev/sda1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp;ext4<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; 0<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck 0</p><p>config swap<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;/dev/sda2<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; 0<br />------<br />my opkg configuration is : </p><p>src/gz snapshots <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages">http://downloads.openwrt.org/snapshots/ … x/packages</a><br />dest root /<br />dest ram /tmp<br />lists_dir ext /var/opkg-lists<br />option overlay_root /overlay</p><p>-----<br />Mount points ( form luci ) : </p><p><a href="http://www.image-upload.net/di-12MZ.png">http://www.image-upload.net/di-12MZ.png</a></p><p>------------</p><p>what is wrong ?</p>											<p class="post-edited">(Last edited by <strong>7amadabsi</strong> on 22 Mar 2012, 19:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161793">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Mar 2012, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>first you have to mount the partition, are you sure it&#039;s sda2? if you have only one partition it will be on sda1..</p><p>mkdir /mnt/sda1<br />mount /dev/sda1 /mnt/sda1</p><p>then duplicate data:</p><p><a href="http://wiki.openwrt.org/doc/howto/extroot#duplicate.data1">http://wiki.openwrt.org/doc/howto/extro … cate.data1</a></p><p>done with</p><p>tar -C /overlay -cvf - . | tar -C /mnt/sda1 -xf -</p><p>then edit fstab</p><p><a href="http://wiki.openwrt.org/doc/howto/extroot#new.external.overlay.variant.pivot.overlay">http://wiki.openwrt.org/doc/howto/extro … ot.overlay</a></p><p>with the exact example in wiki (but using /dev/sda1 or whatever..) <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161795">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						22 Mar 2012, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>yes i have done only one partition , so again with the same error ! </p><br /><p>root@OpenWrt:~# mkdir /mnt/sda1<br />root@OpenWrt:~# mount /dev/sda1 /mnt/sda1<br />mount: mounting /dev/sda1 on /mnt/sda1 failed: No such file or directory</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161796">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						22 Mar 2012, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi, look on<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a><br /><a href="http://wiki.openwrt.org/doc/uci/fstab">http://wiki.openwrt.org/doc/uci/fstab</a><br />and <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a> trunk details.</p><p>Need also to work: kmod-scsi-generic</p><p>Useful: e2fsprog (to check and stable use), blkid (to get uuid, insert value on fstab and avoid problems when you connect more than one device to the hub)</p><p>Notes: Ext4 is not best option with openwrt, more sure is ext3. Init time is very high, before any external root or overlay, mounted file system is checked by default. With a working fstab, &quot;Last attempt&quot; notes work fine.</p><p>Example of working fstab:</p><br /><p>config &#039;global&#039; &#039;automount&#039;<br />&nbsp; &nbsp; option &#039;from_fstab&#039; &#039;1&#039;<br />&nbsp; &nbsp; option &#039;anon_mount&#039; &#039;1&#039;</p><p>config &#039;global&#039; &#039;autoswap&#039;<br />&nbsp; &nbsp; option &#039;from_fstab&#039; &#039;1&#039;<br />&nbsp; &nbsp; option &#039;anon_swap&#039; &#039;0&#039;</p><p>config &#039;mount&#039;<br />&nbsp; &nbsp; option &#039;target&#039; &#039;/overlay&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;/dev/sda1&#039;<br />&nbsp; &nbsp; option &#039;fstype&#039; &#039;ext3&#039;<br />&nbsp; &nbsp; option &#039;options&#039; &#039;rw,sync&#039;<br />&nbsp; &nbsp; option &#039;enabled&#039; &#039;1&#039;<br />#&nbsp; &nbsp; option &#039;uuid&#039; &#039;some-uuid&#039;<br />&nbsp; &nbsp; option &#039;enabled_fsck&#039; &#039;0&#039;</p><p>config &#039;swap&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;/dev/sda3&#039;<br />#&nbsp; &nbsp; option &#039;uuid&#039; &#039;some-uuid&#039;<br />&nbsp; &nbsp; option &#039;enabled&#039; &#039;0&#039;&nbsp; # change to 1 to enable</p><p>config &#039;mount&#039;<br />&nbsp; &nbsp; option &#039;enabled&#039; &#039;0&#039; # change to 1 to enable<br />&nbsp; &nbsp; option &#039;device&#039; &#039;/dev/sda2&#039;<br />#&nbsp; &nbsp; option &#039;uuid&#039; &#039;some-uuid&#039;<br />&nbsp; &nbsp; option &#039;target&#039; &#039;/mnt/sda2&#039;<br />&nbsp; &nbsp; option &#039;fstype&#039; &#039;ext3&#039;<br />&nbsp; &nbsp; option &#039;options&#039; &#039;rw,sync&#039;</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 22 Mar 2012, 19:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161799">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						22 Mar 2012, 19:57					</div>
				</div>
				<div class="post-content content">
					<p>but in the trunk ar7xx packages there is no Ext3 !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161801">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						22 Mar 2012, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi, ext2, ext3 and ext4 is all on same file on trunk (it&#039;s different that backfire, take care): kmod-fs-ext4. Go ever to trunk notes, and forget notes for backfire.<br />Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161802">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						22 Mar 2012, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>thanks alot , i&#039;ll work on it and update you with the result .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161805">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Mar 2012, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>on dmesg you should see that the partition is detected and what is it&#039;s name <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161807">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						22 Mar 2012, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>You may want to try your USB stick on a proper linux distro/live CD. I had problems when i created my partitions and formatted them with that minitool thing. In the end i did it all under Backtrack or on the device itself after installing fdisk and e2fsprogs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161809">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						22 Mar 2012, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>so i&#039;ve installed also this package : kmod-scsi-generic<br />and repatriation my usb to Ext3 , but again as u can see :</p><p>root@OpenWrt:~# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1920&nbsp; &nbsp; &nbsp; 1920&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14780&nbsp; &nbsp; &nbsp; &nbsp;144&nbsp; &nbsp; &nbsp;14636&nbsp; &nbsp;1% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;768&nbsp; &nbsp; &nbsp; &nbsp;592&nbsp; &nbsp; &nbsp; &nbsp;176&nbsp; 77% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;768&nbsp; &nbsp; &nbsp; &nbsp;592&nbsp; &nbsp; &nbsp; &nbsp;176&nbsp; 77% /</p><br /><p>when i write : dmesg </p><p>it looks like the router can&#039;t see the usb partition , so i guess minitool isn&#039;t working very well , i&#039;ll try to do it by my self using fdisk and e2fsprogs <br />i&#039;ll update u guys later .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161812">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Mar 2012, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>i always use gparted live...</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 22 Mar 2012, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161824">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>so i used&nbsp; gparted live to partition my usb , when i opened&nbsp; gparted live it showed that there is 3 drivers one of them is my usb <br />dev/sdg </p><p>i made one partition :&nbsp; &nbsp;/dev/sdg1&nbsp; &nbsp;Ext3&nbsp; </p><p>then i connected the usb to the router and rebooted the router , and still nothing : </p><br /><p>root@OpenWrt:~# mount /dev/sdg1 /overlay<br />mount: mounting /dev/sdg1 on /overlay failed: No such file or directory<br />root@OpenWrt:~# mount /dev/sda1 /overlay<br />mount: mounting /dev/sda1 on /overlay failed: No such file or directory</p><br /><p> </p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
Linux version 2.6.39.2 (nay@HPmini) (gcc version 4.5.4 20110526 (prerelease) (Linaro GCC 4.5-2011.06-0) ) #2 Fri Aug 5 12:39:14 WIT 2011
prom: fw_arg0=00000008, fw_arg1=a1f87fb0, fw_arg2=a1f88470, fw_arg3=00000004
MyLoader: sysp=f0f0f0f0, boardp=f0f0f0f0, parts=f0f0f0f0
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
SoC: Atheros AR7241 rev 1
Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 802b6420, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
pcpu-alloc: [0] 0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line:  board=TL-MR3220 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29380k/32768k available (2005k kernel code, 3388k reserved, 388k data, 176k init, 0k highmem)
SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
NR_IRQS:80
Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is TP-LINK TL-MR3220
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200
pci 0000:00:00.0: fixup device configuration
pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]
pci 0000:00:00.0: supports D1
pci 0000:00:00.0: PME# supported from D0 D1 D3hot
pci 0000:00:00.0: PME# disabled
pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]
pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])
PCI: mapping irq 72 to pin1@0000:00:00.0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
PCI: CLS 0 bytes, default 32
squashfs: version 4.0 (2009/01/31) Phillip Lougher
JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
msgmni has been set to 57
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: found s25sl032a, expected m25p80
m25p80 spi0.0: s25sl032a (4096 Kbytes)
spi0.0: searching for MyLoader partition table at offset 0x10000
spi0.0: searching for MyLoader partition table at offset 0x20000
spi0.0: searching for MyLoader partition table at offset 0x30000
spi0.0: searching for MyLoader partition table at offset 0x40000
spi0.0: no MyLoader partition table found
Searching for RedBoot partition table in spi0.0 at offset 0x3e0000
Searching for RedBoot partition table in spi0.0 at offset 0x3f0000
No RedBoot partition table detected in spi0.0
spi0.0: no WRT160NL signature found
Creating 5 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000160000 : &quot;kernel&quot;
0x000000160000-0x0000003f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=330000, len=C0000
0x000000330000-0x0000003f0000 : &quot;rootfs_data&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
0x000000020000-0x0000003f0000 : &quot;firmware&quot;
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xba000000, irq 5
eth0: Found an AR7240 built-in switch
eth1: Atheros AG71xx at 0xb9000000, irq 4
eth1: connected to PHY at ag71xx-mdio:04 [uid=004dd041, driver=Generic PHY]
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=21)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 176k freed
input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0
Button Hotplug driver version 0.4.1
eth0: link up (1000Mbps/Full duplex)
Registered led device: tl-mr3x20:green:system
Registered led device: tl-mr3x20:green:qss
Registered led device: tl-mr3x20:green:3g
JFFS2 notice: (376) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 15 of xref (0 dead, 0 orphan) found.
crc16: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
scsi_mod: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
mbcache: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
jbd2: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
ext4: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
sd_mod: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
usb_storage: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;
eth0: link down
eth0: link up (1000Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering forwarding state
Compat-wireless backport release: compat-wireless-2011-06-23
Backport based on wireless-testing.git master-2011-06-22
cfg80211: Calling CRDA to update world regulatory domain
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
cfg80211: World regulatory domain updated:
cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
PCI: Setting latency timer of device 0000:00:00.0 to 64
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
Registered led device: ath9k-phy0
ieee80211 phy0: Atheros AR9285 Rev:2 mem=0xb0000000, irq=72
cfg80211: Calling CRDA for country: US
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
cfg80211: Regulatory domain changed to country: US
cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
cfg80211:     (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
nf_conntrack version 0.5.0 (461 buckets, 1844 max)
usb 1-1: new high speed USB device number 2 using ar71xx-ehci
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
USB Serial support registered for GSM modem (1-port)
usbcore: registered new interface driver option
option: v0.7.2:USB Driver for GSM modems
cfg80211: Calling CRDA for country: JO
cfg80211: Regulatory domain changed to country: JO
cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
cfg80211:     (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)
cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 1800 mBm)
wlan0: authenticate with 04:c0:6f:fa:ec:35 (try 1)
wlan0: authenticated
wlan0: associate with 04:c0:6f:fa:ec:35 (try 1)
wlan0: RX AssocResp from 04:c0:6f:fa:ec:35 (capab=0x421 status=0 aid=2)
wlan0: associated
ar71xx-wdt: enabling watchdog timer</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161826">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						23 Mar 2012, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>crc16: version magic &#039;3.2.9 mod_unload MIPS32_R2 32BIT &#039; should be &#039;2.6.39.2 mod_unload MIPS32_R2 32BIT &#039;<br />...etcetera...</p><p>Hi, all this tell you that you need a sysupgrade with latest trunk, kernel now is 3.2.9. Modules are no loaded due to it (maybe my temporal fork is useful for you, on <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a> , but r30950 have some local-dns problems, more stable is .old sysupgrade image). Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 23 Mar 2012, 00:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161831">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 02:09					</div>
				</div>
				<div class="post-content content">
					<p>after successfully downloading this firmware&nbsp; <a href="http://wiki.openwrt.org/es/doc/howto/3g.mr3220">http://wiki.openwrt.org/es/doc/howto/3g.mr3220</a> <br />i configured the internet access , then when i insert the usb i get this : </p><p> </p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
[    0.000000] Linux version 3.2.9 (yasin@almursi36) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #22 Thu Mar 15 15:54:13 CET 2012
[    0.000000] MyLoader: sysp=f0f0f0f0, boardp=f0f0f0f0, parts=f0f0f0f0
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR7241 rev 1
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 802cbe00, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8128 pages, LIFO batch:0
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-MR3220 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29284k/32768k available (2086k kernel code, 3484k reserved, 394k data, 192k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:48
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is TP-LINK TL-MR3220
[    0.500000] registering PCI controller with io_map_base unset
[    0.540000] bio: create slab &lt;bio-0&gt; at 0
[    0.550000] pci 0000:00:00.0: [168c:002b] type 0 class 0x000280
[    0.550000] pci 0000:00:00.0: fixup device configuration
[    0.550000] pci 0000:00:00.0: reg 10: [mem 0x10000000-0x1000ffff 64bit]
[    0.550000] pci 0000:00:00.0: supports D1
[    0.550000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot
[    0.550000] pci 0000:00:00.0: PME# disabled
[    0.550000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]
[    0.560000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])
[    0.570000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.570000] Switching to clocksource MIPS
[    0.580000] NET: Registered protocol family 2
[    0.580000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.580000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.590000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.590000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.600000] TCP reno registered
[    0.600000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.610000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.620000] NET: Registered protocol family 1
[    0.620000] PCI: CLS 0 bytes, default 32
[    0.640000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.650000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.660000] msgmni has been set to 57
[    0.660000] io scheduler noop registered
[    0.670000] io scheduler deadline registered (default)
[    0.670000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.700000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.710000] console [ttyS0] enabled, bootconsole disabled
[    0.720000] m25p80 spi0.0: found s25sl032a, expected m25p80
[    0.730000] m25p80 spi0.0: s25sl032a (4096 Kbytes)
[    0.730000] 5 tp-link partitions found on MTD device spi0.0
[    0.740000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.740000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.750000] 0x000000020000-0x0000000fee00 : &quot;kernel&quot;
[    0.760000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.770000] 0x0000000fee00-0x0000003f0000 : &quot;rootfs&quot;
[    0.770000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.790000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.800000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=340000, len=B0000
[    0.800000] 0x000000340000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.810000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.820000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    1.170000] ag71xx_mdio: probed
[    1.170000] eth0: Atheros AG71xx at 0xba000000, irq 5
[    1.760000] eth0: Found an AR7240/AR9330 built-in switch
[    1.780000] eth1: Atheros AG71xx at 0xb9000000, irq 4
[    2.390000] ag71xx ag71xx.0: eth1: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
[    2.400000] TCP westwood registered
[    2.400000] NET: Registered protocol family 17
[    2.400000] 8021q: 802.1Q VLAN Support v1.8
[    2.430000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    2.440000] Freeing unused kernel memory: 192k freed
[    6.100000] Registered led device: tp-link:green:system
[    6.100000] Registered led device: tp-link:green:qss
[    6.100000] Registered led device: tp-link:green:3g
[    6.180000] eth0: link up (1000Mbps/Full duplex)
[    9.550000] JFFS2 notice: (414) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 11 of xref (0 dead, 2 orphan) found.
[   10.670000] SCSI subsystem initialized
[   11.000000] usbcore: registered new interface driver usbfs
[   11.010000] usbcore: registered new interface driver hub
[   11.020000] usbcore: registered new device driver usb
[   11.150000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   11.160000] ath79-ehci ar724x-ehci: Atheros built-in EHCI controller
[   11.160000] ath79-ehci ar724x-ehci: new USB bus registered, assigned bus number 1
[   11.200000] ath79-ehci ar724x-ehci: irq 3, io mem 0x1b000000
[   11.220000] ath79-ehci ar724x-ehci: USB 2.0 started, EHCI 1.00
[   11.220000] hub 1-0:1.0: USB hub found
[   11.230000] hub 1-0:1.0: 1 port detected
[   11.250000] Initializing USB Mass Storage driver...
[   11.250000] usbcore: registered new interface driver usb-storage
[   11.260000] USB Mass Storage support registered.
[   11.550000] usb 1-1: new high-speed USB device number 2 using ath79-ehci
[   11.700000] scsi0 : usb-storage 1-1:1.0
[   12.700000] scsi 0:0:0:0: Direct-Access     FLASH    Drive AU_USB20   8.07 PQ: 0 ANSI: 2
[   12.710000] sd 0:0:0:0: [sda] 4085760 512-byte logical blocks: (2.09 GB/1.94 GiB)
[   12.720000] sd 0:0:0:0: [sda] Write Protect is off
[   12.720000] sd 0:0:0:0: [sda] Mode Sense: 03 00 00 00
[   12.720000] sd 0:0:0:0: [sda] No Caching mode page present
[   12.730000] sd 0:0:0:0: [sda] Assuming drive cache: write through
[   12.740000] sd 0:0:0:0: [sda] No Caching mode page present
[   12.740000] sd 0:0:0:0: [sda] Assuming drive cache: write through
[   13.370000]  sda: sda1
[   13.380000] sd 0:0:0:0: [sda] No Caching mode page present
[   13.380000] sd 0:0:0:0: [sda] Assuming drive cache: write through
[   13.390000] sd 0:0:0:0: [sda] Attached SCSI removable disk
[   31.990000] eth0: link down
[   34.540000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r30950
[   34.550000] Backport based on wireless-testing.git master-2012-02-27
[   34.580000] cfg80211: Calling CRDA to update world regulatory domain
[   35.130000] cfg80211: World regulatory domain updated:
[   35.130000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   35.140000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   35.150000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   35.160000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   35.160000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   35.170000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.130000] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)
[   36.140000] PCI: Setting latency timer of device 0000:00:00.0 to 64
[   36.140000] ath: EEPROM regdomain: 0x0
[   36.140000] ath: EEPROM indicates default country code should be used
[   36.140000] ath: doing EEPROM country-&gt;regdmn map search
[   36.140000] ath: country maps to regdmn code: 0x3a
[   36.140000] ath: Country alpha2 being used: US
[   36.140000] ath: Regpair used: 0x3a
[   36.150000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   36.150000] Registered led device: ath9k-phy0
[   36.150000] ieee80211 phy0: Atheros AR9285 Rev:2 mem=0xb0000000, irq=40
[   36.160000] cfg80211: Calling CRDA for country: US
[   36.180000] Button Hotplug driver version 0.4.1
[   36.360000] cfg80211: Regulatory domain changed to country: US
[   36.370000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   36.370000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   36.380000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   36.390000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.400000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.400000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.410000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   36.520000] PPP generic driver version 2.4.2
[   36.880000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   37.100000] NET: Registered protocol family 24
[   37.270000] nf_conntrack version 0.5.0 (460 buckets, 1840 max)
[   38.170000] xt_time: kernel timezone is -0000
[   38.740000] usbcore: registered new interface driver usbserial
[   38.750000] USB Serial support registered for generic
[   38.750000] usbcore: registered new interface driver usbserial_generic
[   38.760000] usbserial: USB Serial Driver core
[   39.010000] Error: Driver &#039;gpio-keys-polled&#039; is already registered, aborting...
[   39.120000] USB Serial support registered for GSM modem (1-port)
[   39.120000] usbcore: registered new interface driver option
[   39.130000] option: v0.7.2:USB Driver for GSM modems
[   42.950000] wlan0: authenticate with 04:c0:6f:fa:ec:35
[   42.960000] wlan0: send auth to 04:c0:6f:fa:ec:35 (try 1/3)
[   42.960000] wlan0: authenticated
[   43.000000] wlan0: associate with 04:c0:6f:fa:ec:35 (try 1/3)
[   43.000000] wlan0: RX AssocResp from 04:c0:6f:fa:ec:35 (capab=0x421 status=0 aid=2)
[   43.000000] wlan0: associated
[   54.330000] eth0: link up (1000Mbps/Full duplex)
[   54.470000] device eth0 entered promiscuous mode
[   54.560000] br-lan: port 1(eth0) entering forwarding state
[   54.560000] br-lan: port 1(eth0) entering forwarding state</code></pre></div><p>so i guess now the router can see the usb right ? </p><p>ok this is how my router so far is : </p><br /><p>root@OpenWrt:~# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;704&nbsp; &nbsp; &nbsp; &nbsp;220&nbsp; &nbsp; &nbsp; &nbsp;484&nbsp; 31% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2304&nbsp; &nbsp; &nbsp; 2304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14740&nbsp; &nbsp; &nbsp; &nbsp;140&nbsp; &nbsp; &nbsp;14600&nbsp; &nbsp;1% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;704&nbsp; &nbsp; &nbsp; &nbsp;220&nbsp; &nbsp; &nbsp; &nbsp;484&nbsp; 31% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;704&nbsp; &nbsp; &nbsp; &nbsp;220&nbsp; &nbsp; &nbsp; &nbsp;484&nbsp; 31% /</p><p>and as u can see /overlay has a little space left , and i want to configure the usb to have more space there , i tried to follow wiki but i got everything missed up , so whats the right configuration ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161832">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						23 Mar 2012, 02:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, only need check what required modules are missing and install it (a little one is yet installed). Also, you can go to web LuCi -&gt; System -&gt; Mount points and see fstab options. First try to do a testing mount for /dev/sda, and, after working, try to set a overlay or that you like (r30857 and r30950 have different built-in packages, every time that I do a &quot;svn update&quot; I lost my config... Edited: wiith r31054 I think only missed kmod-usb-storage, kmod-scsi-generic, kmod-fs-ext4 and e2fsprogs and it&#039;s working, and remain near of 316 kb.).</p><p>After a little time I left usb_storage: unless you want to use the router to listen to music, or have another local service running (ftp, www, etc.), it is usually sufficient with little space that left LuCi.</p><p>Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 23 Mar 2012, 04:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161874">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 11:59					</div>
				</div>
				<div class="post-content content">
					<p><strong>UPDATE</strong></p><p>i tried to copy my root file system to the usb stick : </p><p>root@OpenWrt:~# mkdir -p /tmp/usb<br />root@OpenWrt:~# mount --bind / /tmp/usb<br />root@OpenWrt:~# tar -C /tmp/usb -cvf . | tar -C /dev/sda1<br />tar: empty archive<br />BusyBox v1.19.3 (2012-03-07 21:31:47 CET) multi-call binary.</p><p>Usage: tar -[cxtzhvO] [-X FILE] [-T FILE] [-f TARFILE] [-C DIR] [FILE]...</p><p>Create, extract, or list files from a tar file</p><p>Operation:<br />&nbsp; &nbsp; &nbsp; &nbsp; c&nbsp; &nbsp; &nbsp; &nbsp;Create<br />&nbsp; &nbsp; &nbsp; &nbsp; x&nbsp; &nbsp; &nbsp; &nbsp;Extract<br />&nbsp; &nbsp; &nbsp; &nbsp; t&nbsp; &nbsp; &nbsp; &nbsp;List<br />&nbsp; &nbsp; &nbsp; &nbsp; f&nbsp; &nbsp; &nbsp; &nbsp;Name of TARFILE (&#039;-&#039; for stdin/out)<br />&nbsp; &nbsp; &nbsp; &nbsp; C&nbsp; &nbsp; &nbsp; &nbsp;Change to DIR before operation<br />&nbsp; &nbsp; &nbsp; &nbsp; v&nbsp; &nbsp; &nbsp; &nbsp;Verbose<br />&nbsp; &nbsp; &nbsp; &nbsp; z&nbsp; &nbsp; &nbsp; &nbsp;(De)compress using gzip<br />&nbsp; &nbsp; &nbsp; &nbsp; O&nbsp; &nbsp; &nbsp; &nbsp;Extract to stdout<br />&nbsp; &nbsp; &nbsp; &nbsp; h&nbsp; &nbsp; &nbsp; &nbsp;Follow symlinks<br />&nbsp; &nbsp; &nbsp; &nbsp; X&nbsp; &nbsp; &nbsp; &nbsp;File with names to exclude<br />&nbsp; &nbsp; &nbsp; &nbsp; T&nbsp; &nbsp; &nbsp; &nbsp;File with names to include</p><p>and this is my fstab configuration : </p><p>root@OpenWrt:~# vi /etc/config/fstab</p><p>config global &#039;automount&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option from_fstab &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option anon_mount &#039;1&#039;</p><p>config global &#039;autoswap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option from_fstab &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option anon_swap &#039;0&#039;</p><p>config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;/dev/sda1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option options &#039;rw,sync&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype &#039;ext3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option target &#039;/&#039;</p><p>config swap<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;/dev/sda2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;0&#039;</p><p>but when check the mount points i don&#039;t see my usb ! </p><p> </p><div class="codebox"><pre><code>Mounted file systems
Filesystem    Mount Point    Available    Used
rootfs
/
480.00 KB / 704.00 KB
32% (224.00 KB)
/dev/root
/rom
0.00 B / 2.25 MB
100% (2.25 MB)
tmpfs
/tmp
14.26 MB / 14.39 MB
1% (136.00 KB)
tmpfs
/dev
512.00 KB / 512.00 KB
0% (0.00 B)
/dev/mtdblock3
/overlay
480.00 KB / 704.00 KB
32% (224.00 KB)
overlayfs:/overlay
/
480.00 KB / 704.00 KB
32% (224.00 KB)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161879">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 12:25					</div>
				</div>
				<div class="post-content content">
					<p>there is something wrong with the tar command ? </p><p>root@OpenWrt:~# tar -C /tmp/usb -cvf . | tar -C /dev/sda1<br /><span style="color: #FF0000">tar: empty archive</span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161880">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						23 Mar 2012, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>Yes, you should not specify &quot;-f&quot;, or alternatively specify &quot;-f -&quot;.<br />You ommitted the dash in your command.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161881">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 12:31					</div>
				</div>
				<div class="post-content content">
					<p>what do u mean ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161882">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						23 Mar 2012, 12:33					</div>
				</div>
				<div class="post-content content">
					<p>Have a look at my post here about extroot: <a href="https://forum.openwrt.org/viewtopic.php?pid=160225#p160225">https://forum.openwrt.org/viewtopic.php … 25#p160225</a><br />I have used this method, on 2 TP-Link routers now and it works well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161883">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						23 Mar 2012, 12:33					</div>
				</div>
				<div class="post-content content">
					<p>I mean your command is wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161884">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 12:39					</div>
				</div>
				<div class="post-content content">
					<p>ok im going to try this </p><div class="quotebox"><cite>JamesA wrote:</cite><blockquote><p>Have a look at my post here about extroot: <a href="https://forum.openwrt.org/viewtopic.php?pid=160225#p160225">https://forum.openwrt.org/viewtopic.php … 25#p160225</a><br />I have used this method, on 2 TP-Link routers now and it works well.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161887">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">7amadabsi</div>
					<div class="post-datetime">
						23 Mar 2012, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>i did everything step by step , but when i try to do this step :</p><p>1. Format then mount the USB drive (I mount to /mnt/sda1 so I can copy the copy statement directly, but you can mount it to anywhere).</p><p>i get this : </p><br /><p>root@OpenWrt:~# mkdir -p /mnt/sda1<br />root@OpenWrt:~# mount /mnt/sda1 /dev/sda1<br />mount: mounting /mnt/sda1 on /dev/sda1 failed: Not a directory</p><br /><p>whats wrong ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161888">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						23 Mar 2012, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>mount /dev/sda1 /mnt/sda1</p><p>-.-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161889">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">JamesA</div>
					<div class="post-datetime">
						23 Mar 2012, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>You have your syntax backwards for the mount command. Try:</p><p>mount /dev/sda1 /mnt/sda1</p><p>You also need to create a directlry in /mnt called sda1, if you didnt already.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>