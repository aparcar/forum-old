<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [How To] Asterisk 11+GSM/SMS channel+Google Voice+OpenWRT SIP Client</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=53874&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53874&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53874&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p266401">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						21 Feb 2015, 18:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nague wrote:</cite><blockquote><p>I&#039;m trying to use chan_dongle on Barrier Breaker, my chipset’s router is AR71xx so I hope the one way issue is not present… but I have some doubts.</p><p>My dongle is Huawei E180. Voice is enable. And I’m using a powered USB Hub.</p><p>At time this time, I’m having two issues with outgoing calls (incoming not tested yet):</p><p>-&nbsp; &nbsp; The dongle stuck on Dialing state each time I want to make a call… until a dongle reset<br />-&nbsp; &nbsp; I can hear from the GSM =&gt; VoIP (even if the dongle is in the Dialing state), but not in the other side</p><p>Any idea to help me?</p></blockquote></div><p><em>-&nbsp; &nbsp; I can hear from the GSM =&gt; VoIP (even if the dongle is in the Dialing state), but not in the other side</em></p><p>this is the one-way audio issue I mention before.</p><p>As far as I know E180 is compatible with chan_dongle but it seems that chan_dongle module has been recently changed in Openwrt, the one-way audio issue is now always present in all B.B. versions, same with C.C.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 21 Feb 2015, 18:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266421">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">nague</div>
					<div class="post-datetime">
						21 Feb 2015, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>The one way issue has been reported here : <a href="https://dev.openwrt.org/ticket/18672">https://dev.openwrt.org/ticket/18672</a></p><p>And here: <a href="https://github.com/openwrt/telephony/issues/7">https://github.com/openwrt/telephony/issues/7</a></p><p>I still don&#039;t understand if the Dialing state is related to the issue...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266750">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">slachta</div>
					<div class="post-datetime">
						24 Feb 2015, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>It should be the same issue. I am still trying to find out what is causing this, but I have not been succesfull in fixing it yet. If anyone will find out what is causing this issue, please, let me know. I will immediately merge the patch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270402">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">mikewse</div>
					<div class="post-datetime">
						29 Mar 2015, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks pilovis for all the work you&#039;ve put into writing this guide!<br />As you mention, the official Asterisk guide on the wiki is still for 1.8 and your guide covers version 11. What&#039;s your impression after doing all the stuff you did - is version 11 working all fine in OpenWRT or is 1.8 better for some use cases?<br />Also, did you try out any admin GUIs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270984">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						2 Apr 2015, 15:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mikewse wrote:</cite><blockquote><p>Thanks pilovis for all the work you&#039;ve put into writing this guide!<br />As you mention, the official Asterisk guide on the wiki is still for 1.8 and your guide covers version 11. What&#039;s your impression after doing all the stuff you did - is version 11 working all fine in OpenWRT or is 1.8 better for some use cases?<br />Also, did you try out any admin GUIs?</p></blockquote></div><p>Honestly I don&#039;t know which of the two versions is better, I tested both and both have worked very well on my OpenWRT routers.<br />My main PBX instead uses a real PC with Ubuntu server 10.04 32 bits and Asterisk 1.6.2.4 + FreePBX 2.8.1.5.</p><p>I tried Asterisk Gui but I don&#039;t like it at all, I prefere using FreePBX, but unfortunately it doesn&#039;t work on Openwrt, it is too heavy.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 2 Apr 2015, 15:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p270985">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						2 Apr 2015, 15:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>slachta wrote:</cite><blockquote><p>It should be the same issue. I am still trying to find out what is causing this, but I have not been succesfull in fixing it yet. If anyone will find out what is causing this issue, please, let me know. I will immediately merge the patch.</p></blockquote></div><p>It seems that some USB2 ports on some routers do not really handle 500 mA as required on USB2 specifications, some dongles need 500 mA or a little bit more current, this might cause the &#039;one way audio&#039; problem.<br />I tested a GSM dongle on a PC with USB1.1 port (100 mA max) and I had the same issue.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 2 Apr 2015, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271018">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">mikewse</div>
					<div class="post-datetime">
						2 Apr 2015, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>Did you have good experience with the QoS setup? I&#039;m getting a Cisco SPA3102 for the FXS/FXO ports and it seems this device has QoS capabilities as well. I&#039;d like to lose as little bandwidth as possible while not in a call and if this throttling works fine in OpenWRT I prefer to use that (I also notice there is a Network &gt; SQM QoS module with more settings).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272261">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						13 Apr 2015, 07:46					</div>
				</div>
				<div class="post-content content">
					<p>My SIP and Google Voice accounts were hacked because of this thread, I forgot to remove login data of my accounts when I put the configuration files available as examples (my fault).</p><p>The configuration files examples are not more avaible, for safety I removed all files.</p><p>I have all the numbers called from my hacked acconts and the originating IP addresses , I informed the Police.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 13 Apr 2015, 07:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275847">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						10 May 2015, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>The Openwrt PBX:</p><p><a href="http://youtu.be/pFnP5IdfWi8">http://youtu.be/pFnP5IdfWi8</a></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 10 May 2015, 15:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277280">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						23 May 2015, 12:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>slachta wrote:</cite><blockquote><p>It should be the same issue. I am still trying to find out what is causing this, but I have not been succesfull in fixing it yet. If anyone will find out what is causing this issue, please, let me know. I will immediately merge the patch.</p></blockquote></div><p>Today I&#039;ve tried again the chan_dongle module, and surprisingly, without doing any modification it is working now!<br />I am sure it didn&#039;t work a month ago on the same hardware with the same configuration, I had the one way audio issue described here: <a href="https://code.google.com/p/asterisk-chan-dongle/issues/detail?id=112">https://code.google.com/p/asterisk-chan … ail?id=112</a> <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277283">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						23 May 2015, 13:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><div class="quotebox"><cite>slachta wrote:</cite><blockquote><p>It should be the same issue. I am still trying to find out what is causing this, but I have not been succesfull in fixing it yet. If anyone will find out what is causing this issue, please, let me know. I will immediately merge the patch.</p></blockquote></div><p>Today I&#039;ve tried again the chan_dongle module, and surprisingly, without doing any modification it is working now!<br />I am sure it didn&#039;t work a month ago on the same hardware with the same configuration, I had the one way audio issue described here: <a href="https://code.google.com/p/asterisk-chan-dongle/issues/detail?id=112">https://code.google.com/p/asterisk-chan … ail?id=112</a> <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p></blockquote></div><p>It seems that to solve this problem you have to insert the following two lines in /etc/asterisk/modules.conf:</p><p>noload =&gt; res_timing_pthread.so<br />noload =&gt; res_timing_timerfd.so</p><p>but by doing this the Music On Hold becomes jerky on SIP channels (MOH seems OK on dongle channel) <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" />&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>If you use &quot;load =&gt; res_timing_pthread.so&quot;, SIP channels are OK but Chan_dongle has one way audio with high noise on the other channel,<br />with &quot;load =&gt; res_timing_timerfd.so&quot; SIP channels are OK but Chan_dongle has one way audio with no audio on the other channel.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 23 May 2015, 19:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277313">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						23 May 2015, 17:18					</div>
				</div>
				<div class="post-content content">
					<p>Since I was able to make chan_dongle working on OpenWRT B.B., I want to post some useful commands:</p><p>To send a SMS from shell: </p><p><strong>/usr/sbin/asterisk -rx &#039;dongle sms dongle0 number message&#039;</strong></p><p>example:</p><p>/usr/sbin/asterisk -rx &#039;dongle sms dongle0 <span style="color: #FF0000">+393711734567</span> test message&#039;</p><br /><p>bash:<br />#!/bin/sh<br />asterisk -rx &#039;dongle sms dongle0 +393711734567 test message&#039;</p><p>Perl:<br />#!/usr/bin/perl<br />system qq(asterisk -rx &#039;dongle sms dongle0 +393711734567 test message&#039;)</p><br /><p>-----------------------------------------------------------------<br /> Chan_dongle configuration example for Huawei E169<br />-----------------------------------------------------------------</p><p><span class="bbu">/etc/asterisk/extensions.conf:</span></p><p><em><span style="color: #0000FF">[from-internal]<br />; extension 100 - rings for 30 seconds<br />exten =&gt; 100,1,Dial(SIP/100,30)<br />exten =&gt; 100,2,Hangup()<br />; dial out<br />exten =&gt; _1NXXNXXXXXX,Dial(dongle/dongle0/${EXTEN})<br />[from-pstn]<br />; incoming<br />exten =&gt; </span><span style="color: #FF0000">+393711734567</span><span style="color: #0000FF">,1,Answer()<br />exten =&gt; </span><span style="color: #FF0000">+393711734567</span><span style="color: #0000FF">,2,Dial(SIP/100,30)<br />exten =&gt; </span><span style="color: #FF0000">+393711734567</span><span style="color: #0000FF">,3,Hangup()<br /></span></em></p><p><span class="bbu">/etc/asterisk/dongle.conf:</span></p><p><em><span style="color: #0000FF">[general]<br />interval=15<br />[defaults]<br />context=from-pstn<br />group=1<br />rxgain=0<br />txgain=0<br />autodeletesms=yes<br />resetdongle=yes<br />u2diag=-1<br />usecallingpres=yes<br />callingpres=allowed_passed_screen<br />disablesms=no<br />language=it<br />smsaspdu=yes<br />mindtmfgap=45<br />mindtmfduration=80<br />mindtmfinterval=200<br />callwaiting=auto<br />disable=no<br />initstate=start<br />exten=</span><span style="color: #FF0000">+393711734567</span><span style="color: #0000FF"><br />dtmf=relax<br />[dongle0]<br />audio=/dev/ttyUSB1<br />data=/dev/ttyUSB2<br />imei=123456789012345<br />imsi=123456789012345<br /></span></em></p><p><span class="bbu">/etc/asterisk/modules.conf:</span></p><p><em><span style="color: #0000FF">[modules]<br />autoload=yes<br />noload =&gt; res_timing_pthread.so<br />noload =&gt; pbx_gtkconsole.so<br />noload =&gt; res_musiconhold.so<br />noload =&gt; chan_alsa.so<br />noload =&gt; chan_console.so<br />noload =&gt; pbx_ael.so<br />load =&gt; pbx_spool.so<br />noload =&gt; chan_motif.so<br />noload =&gt; res_timing_timerfd.so<br />load =&gt; chan_dongle.so<br />noload =&gt; chan_iax2.so<br /></span></em></p><p><span class="bbu">/etc/asterisk/sip.conf:</span></p><p><em><span style="color: #0000FF">[general]<br />transport=udp<br />bindport=5060<br />bindaddr=0.0.0.0<br />nat=force_rport,comedia<br />language=en<br />allowguest=no<br />srvlookup=no<br />disallow=all<br />allow=ulaw<br />allow=alaw<br />allow=gsm<br />dateformat=%F %T<br />alwaysauthreject=yes<br />localnet=192.168.1.0/255.255.255.0<br />localnet=127.0.0.0/255.255.255.0<br />localnet=10.0.0.0/255.255.255.0<br />;tcpbindaddr=0.0.0.0<br />;tcpenable=yes</span></em></p><p><em><span style="color: #0000FF">[100]<br />user=100<br />type=friend<br />secret=</span><span style="color: #FF0000">Change_Me!</span><span style="color: #0000FF"><br />host=dynamic<br />qualify=yes<br />nat=force_rport,comedia<br />insecure=invite,port<br />context=from-internal<br /></span></em></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 23 May 2015, 17:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277321">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						23 May 2015, 18:02					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>Forward any SMS received through &quot;chan_dongle&quot; to email:</strong></span></p><p>edit &quot;/etc/asterisk/extensions.conf&quot; and add the following:</p><p><em><span style="color: #0000FF">[from-pstn]<br />;<br />; SMS 2 email ; it needs mini_sendmail and asterisk11-func-base64 installed<br />;<br />exten =&gt; sms,1,Noop(Incoming SMS from ${CALLERID(num)} ${BASE64_DECODE(${SMS_BASE64})})</span></em><br /><em><span style="color: #FF0000">exten =&gt; sms,2,System(echo &#039;From: ${CALLERID(num)} &lt;sender@domain.com&gt;\nTo: &lt;myself@domain.com&gt;\nSubject:Received SMS\nfrom: ${CALLERID(num)}\n${BASE64_DECODE(${SMS_BASE64})}&#039; &gt;&gt; /var/log/asterisk/sms.txt)</span><span style="color: #0000FF"><br />exten =&gt; sms,3,System(/usr/sbin/mini_sendmail -<strong>f</strong>sender@domain.com <strong>-s</strong>smtp.server.com -p25 myself@domain.com &lt; /var/log/asterisk/sms.txt)<br />exten =&gt; sms,4,System(rm -f /var/log/asterisk/sms.txt)<br />exten =&gt; sms,5,Hangup()<br /></span></em><br />Notes: <br />the line in <span style="color: #FF0000">red</span> is a single line!<br />-ssmtp.server.com is the SMTP server and need to be adapted to your parameters, -p25 is the SMTP port, example:<br />if your server is relay.post.com, then use: -srelay.post.com -p25</p><p>usage:<br />mini_sendmail -f(sender) -s(SMTP) -p(port) (recipient)</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 23 May 2015, 19:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277329">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						23 May 2015, 18:38					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>Web page to send SMS from OpenWRT (B.B.) using Asterisk11+Chan_dongle:</strong></span></p><br /><p>1) Install PHP:<br /><strong>opkg update<br />opkg install php5 php5-cgi</strong></p><p>2) create /www/sms directory<br /><strong>mkdir /www/sms<br /></strong><br />3) create index.php file<br /><strong>nano /www/sms/index.php</strong><br /><em>(or <strong>vi /www/sms/index.php</strong> if you don&#039;t have nano installed)</em></p><p>insert the following lines:<br /><em><span style="color: #0000FF"><br />&lt;?php<br />/************************************************** *******************<br />* Chan_Dongle SMS Script v.0.01<br />* for The Raspberry Asterisk<br />*<br />* Author: Troy Nahrwold<br />* Email: Troy(at)eternalworks(dot)com<br />* Company: Eternal Works<br />* Website: <a href="http://www.eternalworks.com">www.eternalworks.com</a><br />*<br />* Disclaimer:<br />* This product is solely a private production of the above named<br />* author, and is neither endorsed nor supported by Eternal Works.<br />* Although this product has been thuroughly tested, it is<br />* distributed AS IS, and the author assumes no liability for any<br />* damages this script may cause to your system. The author<br />* has provided full source code and encourages you to review the<br />* source code to determine any effects it may have on your system.<br />*<br />* (c) Copyright 2011, Troy A Nahrwold, Eternal Works, LLC.<br />* All Rights Reserved.<br />*<br />* ITALIAN/OPENWRT VERSION BY: pilovis<br />* EVENTUALLY EDIT THIS FILE TO CHANGE DESCRIPTIONS FROM ITALIAN TO YOUR LANGUAGE<br />************************************************** *******************/<br />$dongle = &quot;dongle sms dongle0 &quot;;<br />$ini = &quot;&#039;&quot;;<br />if(isset($_REQUEST[&#039;phonenumbers&#039;]) &amp;&amp; !empty($_REQUEST[&#039;phonenumbers&#039;]) &amp;&amp; !empty($_REQUEST[&#039;message&#039;]))<br />{<br />$message = substr($_REQUEST[&#039;message&#039;],0,160);<br />$phonenumberarray1 = explode(&#039; &#039;,$_REQUEST[&#039;phonenumbers&#039;]);<br />foreach ($phonenumberarray1 as $phonenumber)<br />{<br />}<br />$output = &quot;Testo: $message&lt;br&gt;&lt;br&gt;\n&quot;;<br />{<br />$runcommand = &#039;/usr/sbin/asterisk -rx&#039; . $ini . $dongle . $phonenumber . &quot; &quot; . $message . $ini;<br />$output .= &quot;Invio messaggio a: $phonenumber&lt;br&gt;\n&quot;;<br />exec($runcommand);<br />}<br />}<br />?&gt;<br />&lt;html&gt;<br />&lt;head&gt;<br />&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot;&gt;<br />&lt;title&gt;SMS Messaging for Asterisk&lt;/title&gt;<br />&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; type=&quot;text/css&quot;&gt;<br />&lt;/head&gt;<br />&lt;script type=&quot;text/javascript&quot;&gt;<br />/**<br />**/<br />function countChar() {<br />//<br />var count_char_textarea = document.getElementById(&quot;message&quot;);<br />// count_char_textarea.value = count_char_textarea.value.length;<br />var char_length = document.getElementById(&quot;char_length&quot;);<br />//<br />if ( count_char_textarea.value.length &gt; 160 ) {<br />count_char_textarea.value = count_char_textarea.value.substr(0, 160);<br />}<br />char_length.innerHTML = count_char_textarea.value.length;<br />}<br />&lt;/script&gt;<br />&lt;hr&gt;<br />&lt;body bgcolor=&quot;#84b0fd&quot; text=&quot;#030303&quot; link=&quot;#9abcde&quot;&gt;<br />&lt;a href=&quot;./index.php&quot;&gt;&lt;h2 align=&quot;center&quot;&gt;&lt;/h2&gt;&lt;/a&gt;<br />&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;1&quot; width=&quot;600&quot; bgcolor=&quot;#ffffff&quot; align=&quot;center&quot;&gt;<br />&lt;tr&gt;<br />&lt;td&gt;<br />&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot; bgcolor=&quot;#ffffff&quot; align=&quot;center&quot;&gt;<br />&lt;tr bgcolor=&quot;#abcdef&quot;&gt;<br />&lt;td&gt;&lt;b&gt;&lt;?php echo $output; ?&gt;&lt;/b&gt;&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;tr&gt;&lt;form action=&quot;index.php&quot; method=&quot;post&quot;&gt;<br />&lt;p&gt;&lt;b&gt;Numero di cellulare:&lt;/b&gt; &lt;br&gt;&lt;font size=&quot;-2&quot;&gt;(Formato: +39XXXXXXXX)&lt;/font&gt;&lt;/p&gt;<br />&lt;textarea id=&quot;phonenumbers&quot; name=&quot;phonenumbers&quot;&gt;&lt;/textarea&gt;<br />&lt;p&gt;&lt;b&gt;Testo del messaggio:&lt;/b&gt; &lt;br&gt; &lt;font size=&quot;-2&quot;&gt;(Massimo 160 caratteri, se superiore il messaggio verra&#039; troncato) &lt;/font&gt;&lt;/p&gt;<br />&lt;textarea id=&quot;message&quot; name=&quot;message&quot; size=&quot;160&quot; rows=&quot;6&quot; cols=&quot;30&quot; onchange=&quot;countChar()&quot; onkeyup=&quot;countChar()&quot;&gt;&lt;/textarea&gt;&lt;br /&gt;&lt;br/&gt;<br />&lt;font size=&quot;2&quot;&gt;conteggio caratteri del messaggio: &lt;span id=&quot;char_length&quot;&gt; 0 &lt;/span&gt;&lt;/font&gt;<br />&lt;p&gt;<br />&lt;button type=&quot;submit&quot;&gt;Invia Messaggio&lt;/button&gt;&lt;br /&gt;&lt;br /&gt;<br />&lt;/form&gt;&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;/dd&gt;<br />&lt;p&gt;&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;tr&gt;<br />&lt;td bgcolor=&quot;#ffffff&quot;&gt;&lt;a href=&quot;javascript:history.back()&quot;&gt;Invia lo stesso messaggio ad altro numero&lt;/a&gt;&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;p&gt;<br />&lt;/td&gt;<br />&lt;/tr&gt;<br />&lt;/table&gt;<br />&lt;hr&gt;<br />&lt;/body&gt;<br /></span></em></p><br /><p>4) test the page at <span class="bbu">http://your_IP_address/sms/</span></p><br /><p>5) protect the page with a password</p><p>Basic Authentication on uhttpd, to add a password to uhttpd (global web page access) use the following commands:</p><p><strong>uci set uhttpd.main.config=/etc/httpd.conf<br />uci commit uhttpd<br />echo &quot;/:root:<span style="color: #FF0000">password</span>&quot; &gt; $(uci get uhttpd.main.config)<br />/etc/init.d/uhttpd restart</strong></p><p>change <span style="color: #FF0000">password</span> as you desire, user is root (note that this is not the &quot;root user&quot; of OpenWRT)</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 23 May 2015, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279398">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						9 Jun 2015, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>To improve a little bit the efficency of Asterisk11 + Chan_dongle on Openwrt there are some configuration modifications to do:</p><p>In &quot;asterisk.conf&quot; add the following line under [options]:</p><p><span style="color: #0000FF"><em>internal_timing = yes</em></span></p><p>the &quot;modules.conf&quot; file should be modified as per the following:</p><p><span style="color: #0000FF"><em>[modules]</em></span></p><p><em><span style="color: #0000FF">; notes:<br />; noload =&gt; disable a module<br />; load =&gt; enable a module</span></em></p><p><span style="color: #0000FF"><em>autoload=yes</em></span></p><p><span style="color: #0000FF"><em>noload =&gt; res_timing_pthread.so ; never enable it when using chan_dongle <br />noload =&gt; pbx_gtkconsole.so<br />noload =&gt; res_musiconhold.so ; you shouldn&#039;t use music on hod with chan_dongle because of choppy audio<br />noload =&gt; chan_alsa.so<br />noload =&gt; chan_console.so<br />noload =&gt; pbx_ael.so<br />load =&gt; pbx_spool.so<br />noload =&gt; chan_motif.so ; enable it only if you have an active Google voice account<br />noload =&gt; res_timing_timerfd.so ; never enable it when using chan_dongle<br />load =&gt; chan_dongle.so ; if you don&#039;t use chan_dongle, disable this and enable res_timing_timerfd.so<br />noload =&gt; chan_iax2.so<br />noload =&gt; codec_ilbc.so<br />noload =&gt; codec_lpc10.so<br />noload =&gt; skipping codec_lpc10.so<br />noload =&gt; codec_speex.so<br />noload =&gt; app_adsiprog.so<br />noload =&gt; app_db.so<br />noload =&gt; chan_skinny.so<br />noload =&gt; cdr_csv.so<br />noload =&gt; res_adsi.so<br />noload =&gt; res_agi.so</em></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 9 Jun 2015, 18:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279439">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						9 Jun 2015, 17:57					</div>
				</div>
				<div class="post-content content">
					<p><strong>Say current date and time to the caller</strong></p><p>install zoneinfo-core:</p><p><strong>opkg update<br />opkg install zoneinfo-core<br />opkg install zoneinfo-europe</strong></p><p>Insert the following lines in &quot;extensions.conf&quot;:</p><p><em>[from-internal]</em></p><p><em>; say current Date &amp; Time<br />exten =&gt; 161,1,SayUnixTime(,CET,AdbYkM)<br />exten =&gt; 161,2,Wait(2)<br />exten =&gt; 161,3,Hangup()</em></p><p>note: change CET with your timezone (ex.: GMT, EST, UTC, etc.).</p><p>Restart asterisk:</p><p><strong>/etc/init.d/asterisk restart</strong></p><p>To test it dial 161.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 12 Nov 2015, 10:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282592">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">xwx</div>
					<div class="post-datetime">
						6 Jul 2015, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi...<br /> Great work done...Thx for sharing...<br /> I have a question, why you are not using asterisk as sip client it supports same answering and dialling.<br /> And did you ever tried video with baresip ? My audio is working fine but with video I always get problems or asterisk is telling me that video stream is ignored because port is zero or some other random errors .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283495">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">alxe</div>
					<div class="post-datetime">
						14 Jul 2015, 10:44					</div>
				</div>
				<div class="post-content content">
					<p>Several issues about SMS...</p><p>What about merging long SMS? Each part of the message is sent as a single email.</p><p>${CALLERID(num)} displays literals sender name as a sequence like AC4#9#A*#410<br />Any idea how to show alphanumeric sender?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290489">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">varma</div>
					<div class="post-datetime">
						4 Sep 2015, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi pilovis!</p><p>Thank you for your hard work sharing your Asterisk knowledge!</p><p>I&#039;d like tu use an old Fastweb router as PBX to make 1 (maximum 2) contemporary calls using a HT-503 as FXO trunk.</p><p>The router is a F226M FWB with 16 MB of flash memory and 64 MB of RAM, with a broadcom SoC 6358 (such as the first Vodafone Station you used for the old AA project).<br /><a href="https://www.ilpuntotecnicoeadsl.com/wiki/index.php?title=Pirelli_DRG_F226M_E-411-200-1-8-X-B-FWB">https://www.ilpuntotecnicoeadsl.com/wik … -8-X-B-FWB</a></p><p>Is it capable to use a compressed codec such as ILBC? I&#039;d like to use it to make calls from outside, trough my OpenVPN on the smartphone, using the PSTN line via the HT-503.</p><p>PS I know the are newer cheap routers, but I&#039;ve plenty of Fastweb routers to use before to buy others...<br />PPS What about this project?<br /><a href="https://github.com/pgid69/bcm63xx-phone">https://github.com/pgid69/bcm63xx-phone</a></p>											<p class="post-edited">(Last edited by <strong>varma</strong> on 4 Sep 2015, 19:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290704">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						6 Sep 2015, 21:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>varma wrote:</cite><blockquote><p>Hi pilovis!</p><p>Thank you for your hard work sharing your Asterisk knowledge!</p><p>I&#039;d like tu use an old Fastweb router as PBX to make 1 (maximum 2) contemporary calls using a HT-503 as FXO trunk.</p><p>The router is a F226M FWB with 16 MB of flash memory and 64 MB of RAM, with a broadcom SoC 6358 (such as the first Vodafone Station you used for the old AA project).<br /><a href="https://www.ilpuntotecnicoeadsl.com/wiki/index.php?title=Pirelli_DRG_F226M_E-411-200-1-8-X-B-FWB">https://www.ilpuntotecnicoeadsl.com/wik … -8-X-B-FWB</a></p><p>Is it capable to use a compressed codec such as ILBC? I&#039;d like to use it to make calls from outside, trough my OpenVPN on the smartphone, using the PSTN line via the HT-503.</p><p>PS I know the are newer cheap routers, but I&#039;ve plenty of Fastweb routers to use before to buy others...<br />PPS What about this project?<br /><a href="https://github.com/pgid69/bcm63xx-phone">https://github.com/pgid69/bcm63xx-phone</a></p></blockquote></div><p>I think the F226M FWB should work well with Asterisk, Asterisk needs at least 32 Mbytes to work smoothly on OpenWRT.<br />About the ILBC codec, I&#039;ve never tried it. <br />If you want to use a smartphone as a Voip client, I would suggest you use a IAX2 channel with gsm codec.<br />About the bcm63xx-phone project, I don&#039;t have time to compile the code, but honestly I don&#039;t understand why the author has not published the compiled driver yet.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 7 Sep 2015, 12:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290756">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">varma</div>
					<div class="post-datetime">
						7 Sep 2015, 12:28					</div>
				</div>
				<div class="post-content content">
					<p>thank you!<br />I installed the 12.09 version because in the newer versions the package luci-app-pbx dependencies&#039; couldn&#039;t resolve.<br />but in this version there are codec packages only for uLaw and aLaw...not big problem.</p><p>is possible to add a FXO gateway (with a SPA3000 or HT-503) using the &quot;SIP Account&quot; tab? Or I need to set it manually in conf files?</p><p>could you please send me a private message with the templates you removed for security reason?</p><p>PS. in PM you should reply in Italian, to better communicate <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298710">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">fapw</div>
					<div class="post-datetime">
						5 Nov 2015, 15:33					</div>
				</div>
				<div class="post-content content">
					<p><strong>pilovis</strong>, thanks for your post about baresip in openwrt.<br />Have someone tried to configure video broadcasting with baresip?<br />Does it work?<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298728">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						5 Nov 2015, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>DON&#039;T USE CHAOS CALMER, asterisk11 is badly compiled, many modules are missing, use Barrier Breaker only.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 5 Nov 2015, 18:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298806">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">fapw</div>
					<div class="post-datetime">
						6 Nov 2015, 12:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>DON&#039;T USE CHAOS CALMER, asterisk11 is badly compiled, many modules are missing, use Barrier Breaker only.</p></blockquote></div><p>And video broadcasting will work? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319550">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">usavich</div>
					<div class="post-datetime">
						14 Apr 2016, 00:29					</div>
				</div>
				<div class="post-content content">
					<p>On the contrary I can say that openwrt is the best ever image. I&#039;m using BarrierBreaker 14.07 image<br />Im running bitminer, asterisk18, samba, iptv, motion with webcam, collecting interface statistics on my TPLINK3600. Also I have compiled <br />asterisk18-dongle module, up and running with E1550 and E173 voice enabled modems for<br />asterisk dialouts. these dongles are fantastic working SMS, USSD, both direction Voice.</p><p>router2*CLI&gt; dongle show devices<br />ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Group State&nbsp; &nbsp; &nbsp; RSSI Mode Submode Provider Name&nbsp; Model&nbsp; &nbsp; &nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number<br />dongle0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;3&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; E1550&nbsp; &nbsp; &nbsp; 11.608.14.15.311&nbsp; 3XXXXXXXXXXXX37&nbsp; 2XXXXXXXXXX77&nbsp; Unknown<br />dongle1&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;8&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E173&nbsp; &nbsp; &nbsp; &nbsp;11.126.85.00.209&nbsp; 8XXXXXXXXXX05&nbsp; 2XXXXXXXXXXXX2&nbsp; Unknown</p>											<p class="post-edited">(Last edited by <strong>usavich</strong> on 14 Apr 2016, 00:33)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=53874&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53874&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53874&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>