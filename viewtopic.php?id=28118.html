<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help!my Netgear WNR854T was  bricked when webupgrade  .</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p125313">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jsawar</div>
					<div class="post-datetime">
						13 Jan 2011, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>my Netgear WNR854T was&nbsp; bricked when webupgrade&nbsp; select &quot;erase&nbsp; flash&quot;&nbsp; first ,but u-boot is good .</p><p>Marvell&gt;&gt; printenv&nbsp; &nbsp;&gt;&gt;&gt; copy my original environment of the u-boot loader<br />Marvell&gt;&gt; printenv<br />bootcmd=tftpboot 0x400000 $(image_name); setenv bootargs $(bootargs) $(bootargs_root) nfsroot=$(serverip):$(rootpath)&nbsp; ip=$(ipaddr):$(serverip)$(bootargs_end);&nbsp; bootm 0x400000;<br />baudrate=115200<br />loads_echo=0<br />ipaddr=10.4.50.146<br />serverip=10.4.50.4<br />rootpath=/mnt/ARM_FS/<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />cpuName=926<br />CASset=min<br />enaMonExt=no<br />enaFlashBuf=yes<br />enaCpuStream=no<br />MALLOC_len=4<br />ethprime=egiga0<br />bootargs_root=root=/dev/nfs rw<br />bootargs_end=:::DB88FXX81:eth0:none<br />image_name=uImage<br />standalone=fsload 0x400000 $(image_name);setenv bootargs $(bootargs) root=/dev/mtdblock0 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x400000;<br />bootdelay=3<br />disaMvPnp=no<br />ethaddr=00:00:00:00:51:81<br />overEthAddr=no<br />usb0Mode=host<br />ethact=egiga0<br />bootargs=console=ttyS0,115200 mtdparts=phys_mapped_flash:15m(root),1m@15m(uboot)ro nfsroot=10.4.50.4:/mnt/ARM_FS/ ip=10.4.50.146:10.4.50.4:::DB88FXX81:eth0:none root=/dev/m tdblock0 rw ip=10.4.50.146:10.4.50.4:::DB88FXX81:eth0:none</p><p>Environment size: 965/40956 bytes</p><p>after power-on router auto wait for tftp file &quot;uImage&quot;<br />then i download the &quot;uImage&quot; from &quot;http://ipkg.nslu2-linux.org/feeds/openwrt/unstable/orion/openwrt-wnr854t-uImage&nbsp; &quot;<br />it can load the file &quot;uImage&quot; and runing,but always stop at :<br />....................................<br />Further such events for this erase block will not be printed<br />Old JFFS2 bitmask found at 0x004f0900<br />You cannot use older JFFS2 filesystems with newer kernels<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00500000: 0x8b55 in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00500004: 0x8b55 in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00500008: 0x8b55 in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0050000c: 0x8b55 in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00500010: 0x8b55 in&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stead<br />Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes<br />empty_blocks 9, bad_blocks 0, c-&gt;nr_blocks 51<br />VFS: Cannot open root device &quot;mtdblock1&quot; or unknown-block(31,1)<br />Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1024 mtdblock0 (driver?)<br />1f01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6528 mtdblock1 (driver?)<br />1f02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;256 mtdblock2 (driver?)<br />1f03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7552 mtdblock3 (driver?)<br />Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,1)<br />Backtrace:<br />Function entered at [&lt;c00253f8&gt;] from [&lt;c022d2d4&gt;]<br />r7:00008000 r6:c186a000 r5:c02dc1bf r4:c1815f50<br />Function entered at [&lt;c022d2bc&gt;] from [&lt;c022d33c&gt;]<br />Function entered at [&lt;c022d2d8&gt;] from [&lt;c0008e88&gt;]<br />r3:c1937adc r2:00000000 r1:c1815f50 r0:c02435dc<br />Function entered at [&lt;c0008c98&gt;] from [&lt;c0008fb4&gt;]<br />Function entered at [&lt;c0008f60&gt;] from [&lt;c0009100&gt;]<br />r5:c001fa14 r4:c028cb28<br />Function entered at [&lt;c0008fcc&gt;] from [&lt;c00084ec&gt;]<br />r6:c003448c r5:c001ecd4 r4:c001ecd4<br />Function entered at [&lt;c00083d4&gt;] from [&lt;c003448c&gt;]<br />r5:c00083d4 r4:00000000</p><p>the router has halt</p><p>other way ,i tried tftpboot jffs2&#039;s img (download from <a href="http://ipkg.nslu2-linux.org/feeds/openw">http://ipkg.nslu2-linux.org/feeds/openw</a> â€¦ ble/orion/)</p><p>Marvell&gt;&gt; tftpboot 0 ???jffs2.img&nbsp; ----is ok!</p><p>Marvell&gt;&gt; erase 0xFF800000 0xFFDFFFFF<br />this step always failed ,router was auto restart.try skip this step to next step<br />Marvell&gt;&gt; cp.b 0x14 0xFF800000 0x600000<br />cp.b 0x14 0xFF800000 0x600000</p><p>Copy to Flash... done<br />Marvell&gt;&gt; run standalone<br />run standalone<br />it dislay :<br />~~~~~~~~~~~</p><p>### JFFS2 loading &#039;uImage&#039; to 0x400000<br />Scanning JFFS2 FS:&nbsp; done.<br />find_inode failed for name=uImage<br />load: Failed to find inode<br />### JFFS2 LOAD ERROR&lt;0&gt; for uImage!<br />## Booting image at 00400000 ...<br />Bad Header Checksum<br />~~~~~~~~~~~~~~~~</p><p>Now ,i know anyone can&nbsp; back up a running with the latest factory firmware, 38NA.<br />Help&nbsp; me! what can i do?<br />Sorry!Forgive my English grammar errors, since English is not my mother tongue,I in china.</p><p>Thanks !</p><p>jsawar <br />&nbsp; <br />jsawar@gmail.com</p><p>Online</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>