<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help debricking Netgear WNDR4300</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p316486">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">navas</div>
					<div class="post-datetime">
						24 Mar 2016, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi All</p><p>I have a Netgear WNDR4300 which has a corrupted bootloader due to a recent power failure. the device keeps restarting every second. I connected a serial cable and found that it is giving a &quot;checksum mismatch&quot; error. So device failed starting before it reaches the u-boot. I don&#039;t have any JTAG cable to trouble shoot.</p><p>But I see chinese forum talking about a new bootloader called &quot;Breed&quot; but the instructions are in chinese so I have problem understanding them,</p><p><a href="http://www.right.com.cn/forum/thread-170402-1-1.html">http://www.right.com.cn/forum/thread-170402-1-1.html</a></p><p>Can any one please help me debricking my device ? or summarize the instructions appears in the above URL ?</p><br /><br /><p>find_hif: bootstrap = 0xaf055b</p><p>WASP BootROM Ver. 1.1<br />Nand Flash init<br />ONFI: Control setting = 0xb44</p><p>hdr: [0xbd004000 : 0xbd004000 : 0x3000 : 0xc200e86c]</p><p>nand_load_fw: read 6 pages</p><p>nand_load_fw: 0x10000 0x800 0xbd0047f0</p><p>nand_load_fw: 0x20000 0x800 0xbd004ff0</p><p>nand_load_fw: 0x30000 0x800 0xbd0057f0</p><p>nand_load_fw: 0x40000 0x800 0xbd005ff0</p><p>nand_load_fw: 0x50000 0x800 0xbd0067f0</p><p>f/w 0 read complete, jumping to 0xbd004000</p><p>initialize PLL &amp; DDR</p><p>sri<br />Wasp 1.2<br />Wasp (16bit) ddr1 init<br />setting for 40<br />fw1: Nand Init<br />leave FW1<br />f/w 0 execution complete</p><p>hdr: [0xa0100000 : 0xa0100000 : 0x11000 : 0xb4da1a60]</p><p>nand_load_fw: read 34 pages</p><p>nand_load_fw: 0x70000 0x800 0xa01007f0</p><p>nand_load_fw: 0x80000 0x800 0xa0100ff0</p><p>nand_load_fw: 0x90000 0x800 0xa01017f0</p><p>nand_load_fw: 0xa0000 0x800 0xa0101ff0</p><p>nand_load_fw: 0xb0000 0x800 0xa01027f0</p><p>nand_load_fw: 0xc0000 0x800 0xa0102ff0</p><p>nand_load_fw: 0xd0000 0x800 0xa01037f0</p><p>nand_load_fw: 0xe0000 0x800 0xa0103ff0</p><p>nand_load_fw: 0xf0000 0x800 0xa01047f0</p><p>nand_load_fw: 0x100000 0x800 0xa0104ff0</p><p>nand_load_fw: 0x110000 0x800 0xa01057f0</p><p>nand_load_fw: 0x120000 0x800 0xa0105ff0</p><p>nand_load_fw: 0x130000 0x800 0xa01067f0</p><p>nand_load_fw: 0x140000 0x800 0xa0106ff0</p><p>nand_load_fw: 0x150000 0x800 0xa01077f0</p><p>nand_load_fw: 0x160000 0x800 0xa0107ff0</p><p>nand_load_fw: 0x170000 0x800 0xa01087f0</p><p>nand_load_fw: 0x180000 0x800 0xa0108ff0</p><p>nand_load_fw: 0x190000 0x800 0xa01097f0</p><p>nand_load_fw: 0x1a0000 0x800 0xa0109ff0</p><p>nand_load_fw: 0x1b0000 0x800 0xa010a7f0</p><p>nand_load_fw: 0x1c0000 0x800 0xa010aff0</p><p>nand_load_fw: 0x1d0000 0x800 0xa010b7f0</p><p>nand_load_fw: 0x1e0000 0x800 0xa010bff0</p><p>nand_load_fw: 0x1f0000 0x800 0xa010c7f0</p><p>nand_load_fw: 0x200000 0x800 0xa010cff0</p><p>nand_load_fw: 0x210000 0x800 0xa010d7f0</p><p>nand_load_fw: 0x220000 0x800 0xa010dff0</p><p>nand_load_fw: 0x230000 0x800 0xa010e7f0</p><p>nand_load_fw: 0x240000 0x800 0xa010eff0</p><p>nand_load_fw: 0x250000 0x800 0xa010f7f0</p><p>nand_load_fw: 0x260000 0x800 0xa010fff0</p><p>nand_load_fw: 0x270000 0x800 0xa01107f0</p><p>Checksum mismatch. 0xb4da1a60 != 0xb2d1e53a</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316763">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ericwongcm</div>
					<div class="post-datetime">
						26 Mar 2016, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>From your log, I am guessing you are have the NAND model as the chinese forum says.<br />Double check this and use the correct bin file.</p><p>Seems like post #2 contains the information you need.<br />Translation in-line below. (Note: I am not responsible for what happens if you follow these instructions. Good luck)</p><p>通过原厂 U-Boot 刷入 Breed<br />Using factory u-boot to flash Breed</p><p>在 OpenWrt 中通过 mtd 命令刷入，请参考 <a href="http://www.right.com.cn/forum/thread-154561-1-1.html">http://www.right.com.cn/forum/thread-154561-1-1.html</a> 帖子 1 楼。<br />Using Openwrt&#039;s MTD command to flash, visit the first post on <a href="http://www.right.com.cn/forum/thread-154561-1-1.html">http://www.right.com.cn/forum/thread-154561-1-1.html</a></p><p>这里介绍从 U-Boot 刷入 Breed 的方法：<br />Introduction to flashing Breed via U-boot.<br />参考 <a href="http://www.right.com.cn/forum/thread-154561-1-1.html">http://www.right.com.cn/forum/thread-154561-1-1.html</a> 帖子 2 楼方法搭建 TFTP 环境<br />In reference to method in post #2 <a href="http://www.right.com.cn/forum/thread-154561-1-1.html">http://www.right.com.cn/forum/thread-154561-1-1.html</a> to setup TFTP environment </p><p>然后再在原厂 U-Boot 中执行以下命令：<br />Then, execute this under factory Uboot</p><p>1.<br />tftp 0x80000000 breed-ar9344-wndr4300-nand.bin<br />此命令作用为通过 TFTP 服务器将 Breed 文件传入到内存地址 0x80000000 处<br />This command&#039;s purpose is to use TFTP to transfer Breed file to ram address 0x80000000</p><p>此时要记下输出中<br />Remember to note down the output<br />Bytes transferred = AAAAA (BBBBB hex)<br />中的 BBBBB 数值<br />i.e. the value in BBBBB</p><p>2.<br />nand erase 0x0 0x40000<br />此命令作用为擦除 NAND 开头 256KB 的数据<br />this command is used to erase NAND&#039;s 256KB header</p><p>3.<br />nand write 0x80000000 0x0 0xBBBBB<br />此命令作用为向 NAND 中写入 Breed<br />This command is used to write Breed into NAND<br />其中 BBBBB 要替换为第 1 步中记录的数值<br />The BBBBB value need to be replaced from the value in step 1</p><p>[Image]</p><p>以上操作之后，重启便可通过按压复位键 5~10 秒进入 Breed<br />After the above operation, reboot and you can enter Breed by pressing the reset button for 5-10 seconds.<br />-------------<br />After translating, I don&#039;t think this will help you when your Uboot is gone.<br />What you need to do is in the post #3&#039;s instructions but that will require you to have SPI flash programmer and soldering. I don&#039;t think you have both of these tools, so there is no point translating.</p>											<p class="post-edited">(Last edited by <strong>ericwongcm</strong> on 26 Mar 2016, 08:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317282">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">navas</div>
					<div class="post-datetime">
						29 Mar 2016, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi </p><p>Thank you so much for your response. Much appreciated.</p><p>Yes, you are correct. My u-boot is gone, so post #3 is the one which I am looking for. I do have soldering iron and stuffs, but I do not have SPI flash programmer. Is there any thing which I can buy from ebay ? Can you recommend one or help me build one (I am basically a engineering student) </p><p>Thanks much<br />Navas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317468">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ericwongcm</div>
					<div class="post-datetime">
						31 Mar 2016, 02:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>navas wrote:</cite><blockquote><p>Hi </p><p>Thank you so much for your response. Much appreciated.</p><p>Yes, you are correct. My u-boot is gone, so post #3 is the one which I am looking for. I do have soldering iron and stuffs, but I do not have SPI flash programmer. Is there any thing which I can buy from ebay ? Can you recommend one or help me build one (I am basically a engineering student) </p><p>Thanks much<br />Navas</p></blockquote></div><p>I never need to use one, so I have no suggestion in this aspect but I bet buying a SPI flash programmer would cost more than a new router itself. You may be better off borrowing one at your University or something, those working in these things will surely have one around.</p><p>Even if you have one, you will need to have very good soldering skills to be able to take the flash chip off and then put it back on without frying it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317501">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">navas</div>
					<div class="post-datetime">
						31 Mar 2016, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Man,</p><p>I think I will look for a better router then, do you have any suggestion ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>