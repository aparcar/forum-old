<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with Kamikaze 7 on WRT54GL v1.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p50647">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">xiao_xin3</div>
					<div class="post-datetime">
						17 Jun 2007, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m having couple of issue after upgrading to Kamikaze. </p><p>One of them are my web does not seem to work totally. Although port 80 is still listening.. my /www directory seem to be empty. While try to upgrade the version via ipkg command, I got this following error</p><br /><p>root@OpenWrt:~# ipkg upgrade base-files-brcm-2.4<br />Upgrading base-files-brcm-2.4 on root from 8-7431 to 8-7485...<br />Downloading <a href="http://downloads.openwrt.org/kamikaze/7.06/brcm-2.4/packages/./base-files-brcm-2.4_8-7485_mipsel.ipk">http://downloads.openwrt.org/kamikaze/7 … mipsel.ipk</a><br />Segmentation fault</p><br /><p>Routing seem to be working. Able to go to internet but I not too sure what should I do now.. </p><p>Anyone has any advise for me please?</p><p>Below are list of package installed on my router:</p><p>root@OpenWrt:~# ipkg list_installed<br />base-files-brcm-2.4 - 8-7431 -<br />bridge - 1.0.6-1 -<br />busybox - 1.4.2-1 -<br />dnsmasq - 2.38-1 -<br />dropbear - 0.49-1 -<br />haserl - 0.8.0-1 -<br />iptables - 1.3.5-1 -<br />kernel - 2.4.34-brcm-1 -<br />kmod-brcm-wl - 2.4.34+4.80.53.0-1 -<br />kmod-diag - 1+2.4.34-brcm-1 -<br />kmod-ipt-nathelper - 2.4.34-brcm-1 -<br />kmod-ppp - 2.4.34-brcm-1 -<br />kmod-pppoe - 2.4.34-brcm-1 -<br />kmod-switch - 2.4.34-brcm-1 -<br />kmod-wlcompat - 2.4.34+brcm-4 -<br />libgcc - 3.4.6-8 -<br />mtd - 5 -<br />nas - 4.80.53.0-1 -<br />nvram - 1 -<br />ppp - 2.4.3-7 -<br />ppp-mod-pppoe - 2.4.3-7 -<br />uclibc - 0.9.28-8 -<br />wireless-tools - 28-1 -<br />wlc - 4.80.53.0-1 -<br />Done.</p>											<p class="post-edited">(Last edited by <strong>xiao_xin3</strong> on 17 Jun 2007, 00:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50862">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Weedy</div>
					<div class="post-datetime">
						20 Jun 2007, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>your probably out of space, your not supposed to use ipkg to update/upgrade. reflash</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50863">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">anfalas</div>
					<div class="post-datetime">
						20 Jun 2007, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>I have exactly the same problem.</p><p>root@OpenWRT:/etc# ipkg upgrade<br />Upgrading base-files-brcm-2.4 on root from 8-7431 to 8-7485...<br />Downloading <a href="http://downloads.openwrt.org/kamikaze/7.06/brcm-2.4/packages/./base-files-brcm-2.4_8-7485_mipsel.ipk">http://downloads.openwrt.org/kamikaze/7 … mipsel.ipk</a><br />Segmentation fault<br />root@OpenWRT:/etc#</p><p>doing a &quot;dmesg&quot; will give the following Kernel Ooop:</p><p>ASSERTION FAILED: src != NULL at mini_fo.h:394 (fist_copy_attr_times)<br />Unable to handle kernel paging request at virtual address 00000000, epc == 80064b08, ra == 80064b08<br />Oops in fault.c::do_page_fault, line 206:<br />$0 : 00000000 1000fc00 00000049 814ca000 00000019 00000000 0000001f 811286a0<br />$8 : 00000000 00001a7f 00001a7f 00001a36 801a0000 801a0000 801a0000 ffffffff<br />$16: 00000000 817d62f0 811f8000 815ac9c0 ffffffea fffffff0 817d6260 00000000<br />$24: 00000002 00000002&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;814ca000 814cbe88 00000000 80064b08<br />Hi : 00000000<br />Lo : 00000300<br />epc&nbsp; &nbsp;: 80064b08&nbsp; &nbsp; Tainted: P <br />Status: 1000fc03<br />Cause : 0000000c<br />PrId&nbsp; : 00029006<br />Process ipkg (pid: 1320, stackpage=814ca000)<br />Stack:&nbsp; &nbsp; 817d6260 801550ec 801550e0 0000018a 8014d0d4 00000000 817d6110<br /> 817d62f0 811f8000 815ac9c0 817d6260 fffffff0 10096b38 80045ad0 00000000<br /> 80044744 8004467c 80044664 815ac9c0 815ac9c0 811f8000 10096b38 1009f478<br /> 102b9ee8 10096b38 80045d10 10344000 811286a0 00008000 814cbf30 815aca40<br /> 8105e4a0 811f800c 00000005 1370fd29 00000010 00000000 102ba520 102ba710<br /> 7fff7c70 ...<br />Call Trace:&nbsp; &nbsp;[&lt;801550ec&gt;] [&lt;801550e0&gt;] [&lt;8014d0d4&gt;] [&lt;80045ad0&gt;] [&lt;80044744&gt;]<br /> [&lt;8004467c&gt;] [&lt;80044664&gt;] [&lt;80045d10&gt;] [&lt;80008a60&gt;] [&lt;8005b9ec&gt;]</p><p>Code: 2407018a&nbsp; 0c004d45&nbsp; afa20010 &lt;a2000000&gt; 8e020058&nbsp; 8e040054&nbsp; 8e030050&nbsp; aec20058&nbsp; aec40054</p><br /><p>And no, there is plenty of disk space available</p>											<p class="post-edited">(Last edited by <strong>anfalas</strong> on 20 Jun 2007, 11:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50864">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Weedy</div>
					<div class="post-datetime">
						20 Jun 2007, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>both of you reflash, and never run ipkg upgrade again -_-</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50866">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">anfalas</div>
					<div class="post-datetime">
						20 Jun 2007, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your very intelligent answer. What kind of help would it be for the developers since this IS a matter of a bug in Kamikaze?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50869">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Weedy</div>
					<div class="post-datetime">
						20 Jun 2007, 11:32					</div>
				</div>
				<div class="post-content content">
					<p>its not a &quot;bug&quot; because you cant replace the kernel with ipkg, so your updating your box with an unsupport method.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50874">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">anfalas</div>
					<div class="post-datetime">
						20 Jun 2007, 12:03					</div>
				</div>
				<div class="post-content content">
					<p>As far as I know this package does not contain the kernel.</p><p>But I&#039;ve found a few Bug Tickets regarding this problem (for example 1871 and 1823). The answer of the guys were both to not use ipkg upgrade.<br />But I do not understand two things:<br />- if ipkg upgrade should not be used - why not disable this feature or at least give a warning message?<br />- This IS a bug. Why not fix it?</p><p>IMHO the mini_fo is a overlay filesystem to make certain read-only filesystems writable, redirecting write operations to somwhere else, leaving the original FS untouched. This is exactly what I expect doing a ipkg upgrade: the ro base file system is not writable and therefore the &quot;overinstalled&quot; packages will be linked or somewhat else (overlayed in the kernel?). It&#039;s true&nbsp; - it may have no much sense to replace files this way. Looking at &quot;Common mistakes&quot; we will find the following:</p><p>#7 WRONG:<br />&quot;You can use &#039;ipkg upgrade&#039; to upgrade to the latest firmware&quot;</p><p>My opinion is: the Assertion handed to the kernel from the mini_fo routines should not happen, the mechanism should at least to what one expect. Even if it does not make much sense. Sure, the developers may have much mor important problems. But a bug remains a bug.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p51700">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">anton_kg</div>
					<div class="post-datetime">
						3 Jul 2007, 03:39					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also lost what to do. Reflash? Fine, but using which file then?..<br />Last time I flashed:<br />[&nbsp; &nbsp;] openwrt-wrt54g-2.4-squashfs.bin&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 01-Jun-2007 15:51&nbsp; 1.7M <br />There is no newer version until today.<br />And there are a lot of new files in the packages directory. Mostly all of them dated with 05-Jun, including base-files:<br />[&nbsp; &nbsp;] base-files-brcm-2.4_8-7431_mipsel.ipk&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 01-Jun-2007 15:48&nbsp; &nbsp;24K&nbsp; <br />[&nbsp; &nbsp;] base-files-brcm-2.4_8-7485_mipsel.ipk&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 05-Jun-2007 02:08&nbsp; &nbsp;24K&nbsp; </p><p>So what is the right way to upgrade it?.. Could you show what is the correct way? Is any manual how to do it?..<br />Thanks.</p>											<p class="post-edited">(Last edited by <strong>anton_kg</strong> on 3 Jul 2007, 03:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p51910">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">diablo</div>
					<div class="post-datetime">
						6 Jul 2007, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>Same problem here. Same segmetation fault, same packet.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>