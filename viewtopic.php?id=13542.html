<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netgear MP101, redux</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p59622">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">raf</div>
					<div class="post-datetime">
						28 Nov 2007, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>The Netgear MP101 MP3 player was brought up before, in the context of somehow unbricking one using OpenWrt.&nbsp; The response then was that it could not be made to run OpenWrt because the factory firmware runs eCos.</p><p>It turns out that the MP101 is based on the ARM9 Marvell Libertas 88W8510H, which is intended for Wi-Fi access point duties, and is indeed used in some of the devices listed in the TableOfHardware &lt;<a href="http://wiki.openwrt.org/TableOfHardware">http://wiki.openwrt.org/TableOfHardware</a>&gt;.&nbsp; Supposedly the device has 8 MB DRAM.&nbsp; It has an Ethernet port, Wi-Fi, line-level stereo RCA (analog) audio outputs, and a headphone jack.</p><p>Needless to say, with Linux/OpenWRT, it could be a lot more useful than it is off the shelf.&nbsp; (The eCos firmware is functionally limited, buggy, and abandoned by Netgear.)</p><p>So my question is: would the fact that it runs eCos out of the box totally preclude it from running Linux/OpenWRT?</p><p>Thanks,<br />Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59744">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">raf</div>
					<div class="post-datetime">
						29 Nov 2007, 22:57					</div>
				</div>
				<div class="post-content content">
					<p>These are going for $10â€“$20 on eBay.&nbsp; I&#039;d buy one for someone who could make it run Linux.&nbsp; It has a bright 4-line Ã— 25-character monochrome LCD display (probably 128Ã—32 pixels).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60027">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						6 Dec 2007, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>In case you think nobody&#039;s paying attention...</p><p>This would be a great project - there are many OpenWRT people whose target system is a music player like the MP101!&nbsp; However, the first (?) hurdle is a big one: You&#039;ve got to get at least a minimal version of OpenWRT on the system, so that you have somewhere to start. That step has been figured out for Linksys, Netgear, and other systems, but assuming you have a 88W8510 version of OpenWRT compiled, do you know what it takes to load that system onto the MP101?</p><p>Here&#039;s hoping that the answer is &quot;Yes&quot;...!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60073">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">raf</div>
					<div class="post-datetime">
						6 Dec 2007, 21:19					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know why I didn&#039;t mention it before, but Netgear does provide a ZIP file of source code online &lt;<a href="http://kbserver.netgear.com/kb_web_files/n101238.asp">http://kbserver.netgear.com/kb_web_files/n101238.asp</a>&gt;, per eCos&#039;s GPL-derived license.&nbsp; I poked through it and it looks like it&#039;s geared for building specifically in a Cygwin environment.</p><p>Putting OpenWRT on my Motorola router is the extent of my embedded experience; but provided the Netgear source release is complete, I suppose it would be possible to glean from it how to go about building a MP101-bootable image.</p><p>I see that the eCos build dependences are in Debian so maybe I&#039;ll play with it a little more and see if I can reproduce the MP101&#039;s factory firmware under Linux.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p67061">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">psmears</div>
					<div class="post-datetime">
						17 Apr 2008, 23:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>raf wrote:</cite><blockquote><p>I don&#039;t know why I didn&#039;t mention it before, but Netgear does provide a ZIP file of source code online &lt;<a href="http://kbserver.netgear.com/kb_web_files/n101238.asp">http://kbserver.netgear.com/kb_web_files/n101238.asp</a>&gt;, per eCos&#039;s GPL-derived license.&nbsp; I poked through it and it looks like it&#039;s geared for building specifically in a Cygwin environment.</p><p>Putting OpenWRT on my Motorola router is the extent of my embedded experience; but provided the Netgear source release is complete, I suppose it would be possible to glean from it how to go about building a MP101-bootable image.</p><p>I see that the eCos build dependences are in Debian so maybe I&#039;ll play with it a little more and see if I can reproduce the MP101&#039;s factory firmware under Linux.</p></blockquote></div><p>I&#039;ve just obtained an MP101, so I had a quick look into this. The bad news is that the Marvell chip has no MMU, so it can&#039;t (AFAIK) run OpenWRT. However, that doesn&#039;t mean it can&#039;t run Linux: the ucLinux patches to the Linux kernel can get it working on a system with no MMU (with all the restrictions that implies, of course). <a href="http://www.bitsum.com/openwiking/owbase/ow.asp?WL-530G">This project (WL-530G)</a> is a Linux distribution for a box that runs on a similar chip. However, the firmwares from that can&#039;t just be loaded directly onto the MP101 - they seem to be in a completely different format. The WL-530G firmware seems to have a small header, then a decompressor for the kernel, then the kernel in gzip format. The MP101 file, on the other hand, has a (different) small header, starting with the letters &quot;MRVL&quot;, then after the header... it has a lot of data that means nothing to me. Perhaps someone wise around here may be able to provide a clue.</p><p>On a more positive note, the board seems to have a space to solder on a JTAG connector with the standard ARM pinout - this could be very useful for trying to get Linux to come up on the box.</p><p>I&#039;d be very interested to know whether anyone&#039;s interested in getting Linux to work on this box, and especially if anyone has any information that could be useful. (If there are many such people, we should probably take the discussion elsewhere to avoid polluting the OpenWRT forum with information about a box that can&#039;t even run it!)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p67073">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Apr 2008, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>Excellent. I have two units of this MP101 that are sitting on some shelves in the basement. I sure would like it to run OpenWRT and hope you guys can do something about it.</p><p>BTW, I poke around this <a href="ftp://downloads.netgear.com/files/GPL/SPH200W_1.2.0.2_src.tar.bz2">SPH200W</a> firmware source code and there is a pub/microwin/src/ecos directory. Perhaps, you guys can check it out.</p>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 18 Apr 2008, 03:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91586">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jochen</div>
					<div class="post-datetime">
						19 Jul 2009, 16:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>psmears wrote:</cite><blockquote><p>On a more positive note, the board seems to have a space to solder on a JTAG connector with the standard ARM pinout - this could be very useful for trying to get Linux to come up on the box.</p></blockquote></div><p>It is a standard JTAG connector. OpenOCD works with this config file:</p><div class="codebox"><pre><code>telnet_port 4444
gdb_port 3333

interface &lt;whatever interface you use&gt;

reset_config trst_only

jtag newtap mp101 cpu -irlen 4 -ircapture 1 -irmask 0x0f

target create 88w8500 arm9tdmi -chain-position mp101.cpu

flash bank cfi 0xffe00000 0x200000 2 2 88w8500</code></pre></div><p>Additionally, current URJtag svn can be used to access the flash:</p><div class="codebox"><pre><code># jtag

UrJTAG 0.10 #
Copyright (C) 2002, 2003 ETC s.r.o.
Copyright (C) 2007, 2008, 2009 Kolja Waschk and the respective authors

UrJTAG is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
There is absolutely no warranty for UrJTAG.

jtag.c:537 main() Warning: UrJTAG may damage your hardware!
Type &quot;quit&quot; to exit, &quot;help&quot; for help.

Connected to libftdi driver.
jtag&gt; detect
IR length: 4
Chain length: 1
Device Id: 00010101100101000110001111010011 (0x00000000159463D3)
  Manufacturer: Marvell
  Part(0):         MV88W8500
  Stepping:     BAN
  Filename:     /usr/share/urjtag/marvell/88w8500/88w8500-ban
The target is halted in ARM mode.
jtag&gt; detectflash 0xffe00000
Query identification string:
    Primary Algorithm Command Set and Control Interface ID Code: 0x0002 (AMD/Fujitsu Standard Command Set)
    Alternate Algorithm Command Set and Control Interface ID Code: 0x0000 (null)
Query system interface information:
    Vcc Logic Supply Minimum Write/Erase or Write voltage: 2700 mV
    Vcc Logic Supply Maximum Write/Erase or Write voltage: 3600 mV
    Vpp [Programming] Supply Minimum Write/Erase voltage: 0 mV
    Vpp [Programming] Supply Maximum Write/Erase voltage: 0 mV
    Typical timeout per single byte/word program: 128 us
    Typical timeout for maximum-size multi-byte program: 0 us
    Typical timeout per individual block erase: 1024 ms
    Typical timeout for full chip erase: 0 ms
    Maximum timeout for byte/word program: 256 us
    Maximum timeout for multi-byte program: 0 us
    Maximum timeout per individual block erase: 16384 ms
    Maximum timeout for chip erase: 0 ms
Device geometry definition:
    Device Size: 2097152 B (2048 KiB, 2 MiB)
    Flash Device Interface Code description: 0x0002 (x8/x16)
    Maximum number of bytes in multi-byte program: 1
    Number of Erase Block Regions within device: 4
    Erase Block Region Information:
        Region 0:
            Erase Block Size: 16384 B (16 KiB)
            Number of Erase Blocks: 1
        Region 1:
            Erase Block Size: 8192 B (8 KiB)
            Number of Erase Blocks: 2
        Region 2:
            Erase Block Size: 32768 B (32 KiB)
            Number of Erase Blocks: 1
        Region 3:
            Erase Block Size: 65536 B (64 KiB)
            Number of Erase Blocks: 31
Primary Vendor-Specific Extended Query:
    Major version number: 1
    Minor version number: 3
    Address Sensitive Unlock: Required
    Process Technology: CS99
    Erase Suspend: Read/write
    Sector Protect: 1 sectors per group
    Sector Temporary Unprotect: Not supported
    Sector Protect/Unprotect Scheme: 29BDS640 mode (Software Command Locking)
    Simultaneous Operation: Not supported
    Burst Mode Type: Supported
    Page Mode Type: Not supported
    ACC (Acceleration) Supply Minimum: 0 mV
    ACC (Acceleration) Supply Maximum: 0 mV
    Top/Bottom Sector Flag: No boot
    Program Suspend: Not supported
jtag&gt; quit
vrnul03074nb:~# openocd
Open On-Chip Debugger 0.2.0-in-development (2009-07-05-20:55) svn:2462M
$URL: http://svn.berlios.de/svnroot/repos/openocd/trunk/src/openocd.c $
For bug reports, read http://svn.berlios.de/svnroot/repos/openocd/trunk/BUGS
jtag_speed: 1
Info : JTAG tap: mp101.cpu tap/device found: 0x159463d3 (mfg: 0x1e9, part: 0x5946, ver: 0x1)
target state: halted
target halted in ARM state due to breakpoint, current mode: Abort
cpsr: 0xa00000d7 pc: 0xffffeb80
Info : accepting &#039;telnet&#039; connection from 0
Info : Flash Manufacturer/Device: 0x0001 0x0000
flash &#039;cfi&#039; found at 0xffe00000
successfully checked protect state
#0 : cfi at 0xffe00000, size 0x00200000, buswidth 2, chipwidth 2
    #  0: 0x00000000 (0x4000 16kB) not protected
    #  1: 0x00004000 (0x2000 8kB) not protected
    #  2: 0x00006000 (0x2000 8kB) not protected
    #  3: 0x00008000 (0x8000 32kB) not protected
    #  4: 0x00010000 (0x10000 64kB) not protected
    #  5: 0x00020000 (0x10000 64kB) not protected
    #  6: 0x00030000 (0x10000 64kB) not protected
    #  7: 0x00040000 (0x10000 64kB) not protected
    #  8: 0x00050000 (0x10000 64kB) not protected
    #  9: 0x00060000 (0x10000 64kB) not protected
    # 10: 0x00070000 (0x10000 64kB) not protected
    # 11: 0x00080000 (0x10000 64kB) not protected
    # 12: 0x00090000 (0x10000 64kB) not protected
    # 13: 0x000a0000 (0x10000 64kB) not protected
    # 14: 0x000b0000 (0x10000 64kB) not protected
    # 15: 0x000c0000 (0x10000 64kB) not protected
    # 16: 0x000d0000 (0x10000 64kB) not protected
    # 17: 0x000e0000 (0x10000 64kB) not protected
    # 18: 0x000f0000 (0x10000 64kB) not protected
    # 19: 0x00100000 (0x10000 64kB) not protected
    # 20: 0x00110000 (0x10000 64kB) not protected
    # 21: 0x00120000 (0x10000 64kB) not protected
    # 22: 0x00130000 (0x10000 64kB) not protected
    # 23: 0x00140000 (0x10000 64kB) not protected
    # 24: 0x00150000 (0x10000 64kB) not protected
    # 25: 0x00160000 (0x10000 64kB) not protected
    # 26: 0x00170000 (0x10000 64kB) not protected
    # 27: 0x00180000 (0x10000 64kB) not protected
    # 28: 0x00190000 (0x10000 64kB) not protected
    # 29: 0x001a0000 (0x10000 64kB) not protected
    # 30: 0x001b0000 (0x10000 64kB) not protected
    # 31: 0x001c0000 (0x10000 64kB) not protected
    # 32: 0x001d0000 (0x10000 64kB) not protected
    # 33: 0x001e0000 (0x10000 64kB) not protected
    # 34: 0x001f0000 (0x10000 64kB) not protected

cfi information:

mfr: 0x0001, id:0x0000
qry: &#039;QRY&#039;, pri_id: 0x0002, pri_addr: 0x0040, alt_id: 0x0000, alt_addr: 0x0000
Vcc min: 2.7, Vcc max: 3.6, Vpp min: 0.0, Vpp max: 0.0
typ. word write timeout: 128, typ. buf write timeout: 1, typ. block erase timeout: 1024, typ. chip erase timeout: 1
max. word write timeout: 256, max. buf write timeout: 1, max. block erase timeout: 16384, max. chip erase timeout: 1
size: 0x200000, interface desc: 2, max buffer write size: 1

Spansion primary algorithm extend information:
pri: &#039;PRI&#039;, version: 1.3
Silicon Rev.: 0x2, Address Sensitive unlock: 0x0
Erase Suspend: 0x2, Sector Protect: 0x1
VppMin: 00.0, VppMax: 00.0</code></pre></div><p>Unfortunately, the serial port of the CPU is being used to communicate with the Winbond W78LE51P (probably for the IR control). However, there are two jumpers on the board and next to them there&#039;s a 4 pin connector. Changing the position of the jumpers will detach the Winbond chip and connect the serial port to the connector.</p><p>The boot loader seems to be some proprietary code (Netgear MP101-BLDR).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113308">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">LloydEwing</div>
					<div class="post-datetime">
						18 Jul 2010, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>It bothers me that the MP101 is so close to perfect hardware for an internet radio.&nbsp; I would like to know if the 88W8500-BAN processor could be replaced with a similar processor that has an MMU so it could run OpenWrt.</p><p>I know that semiconductor manufacturers frequently make what is basically the same product but disable certain functions when they are to be sold at a lower prices.&nbsp; If there is a better processor that is pin-for-pin compatible, it should be worth having the processor replaced so it could run OpenWrt.</p><p>The small flash memory could probably also be replaced.&nbsp; The press release announcing the 88W8500 mentions a USB interface.&nbsp; Maybe that function is built-in and would work if one were to connect the processor pins...</p><p>I understand that router chip makers do not provide any information to the public about their products.&nbsp; (I can&#039;t even find a datasheet for the 88W8500.)&nbsp; Somehow the public must have acquired quite a bit of information about the 88W8500, because so much open-source work has been done.&nbsp; Where do they get this information?</p><br /><p>If it is not possible to upgrade the 88W8500, the MP101 is pretty much useless.&nbsp; One might be able to throw out and replace the circuit board or remove the display on the front panel and use it...&nbsp; I wonder if it might be practical to run OpenWrt on a separate router and redirect the inputs and outputs to the MP101 hardware through the Ethernet port?&nbsp; (I don&#039;t know enough about Linux to know if this is a stupid question.)&nbsp; If OpenWrt on another router could do that, then it would seem like the MP101 might be able to handle the data transfers using Jeremy&#039;s Liberated Libertas firmware at Bitsum.com.</p><p>Lloyd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113327">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Jul 2010, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>Oh well, so much for this device. Readers here don&#039;t seem to be interested in porting OpenWRT to this device. Perhaps, one of the reasons is it only has 8MB RAM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113358">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">LloydEwing</div>
					<div class="post-datetime">
						19 Jul 2010, 03:13					</div>
				</div>
				<div class="post-content content">
					<p>Mazi,<br />None of the posts above mention the 8 MB of RAM as the reason OpenWrt will not run.&nbsp; The main problem appears to be the lack of a MMU in the processor.&nbsp; There are pads on the MP101 circuit board that appear to be designed for another RAM IC.</p><p>I hope that one of the experts who contributed technical information in the postings above will respond to my questions.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>