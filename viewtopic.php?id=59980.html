<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Chaos Calmer 15.05 l2tp disconnect</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p293905">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Vanzent</div>
					<div class="post-datetime">
						29 Sep 2015, 11:30					</div>
				</div>
				<div class="post-content content">
					<p>sorry for my english.<br />With installed 14.07 i had no problem with l2tp. Only insert my server,login and password. All work fine.<br />Today i installed 15.05. And now l2tp after authentication always disconnect.<br />I install xl2tpd from package from version 12.09 and from version 10.03 - no difference - alway disconnect.<br />What can i do for fix this problem?</p><p>Also i insert into /lib/netifd/proto/l2tp.sh &quot;tx bps=100000000&quot;<br /></p><div class="codebox"><pre><code>xl2tpd-control add l2tp-${config} pppoptfile=${optfile} lns=${server} redial=yes redial timeout=20 &quot;tx bps=100000000&quot;</code></pre></div><p> <br /></p><div class="codebox"><pre><code>option &#039;pppd_options&#039; &#039;noipdefault&#039;</code></pre></div><p> </p><p>syslogs<br /></p><div class="codebox"><pre><code>Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: start_pppd: I&#039;m running: 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;/usr/sbin/pppd&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;passive&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;nodetach&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;:&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;file&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;/tmp/l2tp/options.Flex&quot; 
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: &quot;/dev/pts/0&quot; 
Tue Sep 29 06:19:56 2015 daemon.notice pppd[1423]: pppd 2.4.7 started by root, uid 0
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: using channel 3
Tue Sep 29 06:19:56 2015 kern.info kernel: [   47.350000] l2tp-Flex: renamed from ppp0
Tue Sep 29 06:19:56 2015 daemon.info pppd[1423]: Using interface l2tp-Flex
Tue Sep 29 06:19:56 2015 daemon.notice pppd[1423]: Connect: l2tp-Flex &lt;--&gt; /dev/pts/0
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x50d81025&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: rcvd [LCP ConfReq id=0x1 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcbdfaf9f&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [LCP ConfRej id=0x1 &lt;pcomp&gt; &lt;accomp&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x50d81025&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: rcvd [LCP ConfReq id=0x2 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcbdfaf9f&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [LCP ConfAck id=0x2 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcbdfaf9f&gt;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [LCP EchoReq id=0x0 magic=0x50d81025]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: rcvd [CHAP Challenge id=0x1 &lt;8377834526213f0b15058dc4d21672dc&gt;, name = &quot;l2tp2&quot;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [CHAP Response id=0x1 &lt;17e75b4d310d2fe5be939384833cb3c8&gt;, name = &quot;12345&quot;]
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Tue Sep 29 06:19:56 2015 daemon.info pppd[1423]: CHAP authentication succeeded
Tue Sep 29 06:19:56 2015 daemon.notice pppd[1423]: CHAP authentication succeeded
Tue Sep 29 06:19:56 2015 daemon.info xl2tpd[1026]: Disconnecting from 10.255.255.254, Local: 27422, Remote: 57862
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: Terminating pppd: sending TERM signal to pid 1423
Tue Sep 29 06:19:56 2015 daemon.info xl2tpd[1026]: Connection 57862 closed to 10.255.255.254, port 1701 (Goodbye!)
Tue Sep 29 06:19:56 2015 daemon.notice netifd: Flex (1422): 00 OK
Tue Sep 29 06:19:56 2015 daemon.info xl2tpd[1026]: Can not find tunnel 27422 (refhim=0)
Tue Sep 29 06:19:56 2015 daemon.debug xl2tpd[1026]: network_thread: unable to find call or tunnel to handle packet.  call = 1178, tunnel = 27422 Dumping.
Tue Sep 29 06:19:56 2015 daemon.debug pppd[1423]: sent [IPCP ConfReq id=0x1 &lt;compress VJ 0f 01&gt; &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Tue Sep 29 06:19:56 2015 daemon.info pppd[1423]: Terminating on signal 15
Tue Sep 29 06:19:56 2015 daemon.notice pppd[1423]: Modem hangup
Tue Sep 29 06:19:56 2015 daemon.notice pppd[1423]: Connection terminated.
Tue Sep 29 06:19:56 2015 daemon.info pppd[1423]: Exit.
Tue Sep 29 06:19:57 2015 daemon.notice netifd: Flex (1422): 00 OK</code></pre></div><div class="codebox"><pre><code>Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: start_pppd: I&#039;m running: 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;/usr/sbin/pppd&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;passive&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;nodetach&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;:&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;file&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;/tmp/l2tp/options.Flex&quot; 
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: &quot;/dev/pts/1&quot; 
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: pppd 2.4.7 started by root, uid 0
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: using channel 158
Tue Sep 29 08:17:36 2015 kern.info kernel: [ 1091.180000] l2tp-Flex: renamed from ppp0
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: Using interface l2tp-Flex
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: Connect: l2tp-Flex &lt;--&gt; /dev/pts/1
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [LCP ConfReq id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x91e7bc74&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [LCP ConfReq id=0x1 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcc436659&gt; &lt;pcomp&gt; &lt;accomp&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [LCP ConfRej id=0x1 &lt;pcomp&gt; &lt;accomp&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [LCP ConfAck id=0x1 &lt;asyncmap 0x0&gt; &lt;magic 0x91e7bc74&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [LCP ConfReq id=0x2 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcc436659&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [LCP ConfAck id=0x2 &lt;mru 1460&gt; &lt;asyncmap 0xa0000&gt; &lt;auth chap MD5&gt; &lt;magic 0xcc436659&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [LCP EchoReq id=0x0 magic=0x91e7bc74]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [CHAP Challenge id=0x1 &lt;75143b4422f1fabc15058dc420a50f6a&gt;, name = &quot;l2tp2&quot;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [CHAP Response id=0x1 &lt;e300e6bb5d0b26aab832c81dd8df8cf8&gt;, name = &quot;12345&quot;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [CHAP Success id=0x1 &quot;&quot;]
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: CHAP authentication succeeded
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: CHAP authentication succeeded
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [IPCP ConfReq id=0x1 &lt;addr 0.0.0.0&gt; &lt;ms-dns1 0.0.0.0&gt; &lt;ms-dns2 0.0.0.0&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [IPV6CP ConfReq id=0x1 &lt;addr fe80::e8ce:e18b:8b20:ae87&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [IPCP ConfReq id=0x1 &lt;addr 10.255.255.254&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [IPCP ConfAck id=0x1 &lt;addr 10.255.255.254&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [IPV6CP ConfReq id=0x1 &lt;addr fe80::0224:14ff:fe28:b700&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [IPV6CP ConfAck id=0x1 &lt;addr fe80::0224:14ff:fe28:b700&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [IPCP ConfNak id=0x1 &lt;addr 94.253.50.145&gt; &lt;ms-dns1 94.253.7.118&gt; &lt;ms-dns2 80.252.130.253&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: sent [IPCP ConfReq id=0x2 &lt;addr 94.253.50.145&gt; &lt;ms-dns1 94.253.7.118&gt; &lt;ms-dns2 80.252.130.253&gt;]
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: rcvd [IPV6CP ConfAck id=0x1 &lt;addr fe80::e8ce:e18b:8b20:ae87&gt;]
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: local  LL address fe80::e8ce:e18b:8b20:ae87
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: remote LL address fe80::0224:14ff:fe28:b700
Tue Sep 29 08:17:36 2015 daemon.info xl2tpd[1332]: Disconnecting from 10.255.255.254, Local: 53967, Remote: 25070
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: Terminating pppd: sending TERM signal to pid 9896
Tue Sep 29 08:17:36 2015 daemon.info xl2tpd[1332]: Connection 25070 closed to 10.255.255.254, port 1701 (Goodbye!)
Tue Sep 29 08:17:36 2015 daemon.notice netifd: Flex (9893): 00 OK
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: Script /lib/netifd/ppp-up started (pid 9904)
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: Terminating on signal 15
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: Modem hangup
Tue Sep 29 08:17:36 2015 daemon.notice pppd[9896]: Connection terminated.
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: Connect time 0.0 minutes.
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: Sent 234 bytes, received 82 bytes.
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: Waiting for 1 child processes...
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]:   script /lib/netifd/ppp-up, pid 9904
Tue Sep 29 08:17:36 2015 daemon.info xl2tpd[1332]: Can not find tunnel 53967 (refhim=0)
Tue Sep 29 08:17:36 2015 daemon.debug xl2tpd[1332]: network_thread: unable to find call or tunnel to handle packet.  call = 56653, tunnel = 53967 Dumping.
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: Script /lib/netifd/ppp-up finished (pid 9904), status = 0x0
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: Script /lib/netifd/ppp-down started (pid 9921)
Tue Sep 29 08:17:36 2015 daemon.debug pppd[9896]: Script /lib/netifd/ppp-down finished (pid 9921), status = 0x1
Tue Sep 29 08:17:36 2015 daemon.info pppd[9896]: Exit.</code></pre></div>											<p class="post-edited">(Last edited by <strong>Vanzent</strong> on 2 Oct 2015, 09:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293947">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Reborns</div>
					<div class="post-datetime">
						29 Sep 2015, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>Same err for l2tp and pptp , i&nbsp; have&nbsp; switched back to the&nbsp; Barrier Breaker and no more&nbsp; errors so far ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293987">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Vanzent</div>
					<div class="post-datetime">
						29 Sep 2015, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Reborns wrote:</cite><blockquote><p>Same err for l2tp and pptp , i&nbsp; have&nbsp; switched back to the&nbsp; Barrier Breaker and no more&nbsp; errors so far ..</p></blockquote></div><p>Thanx for reply<br />I did the same thing</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294233">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">brvno</div>
					<div class="post-datetime">
						1 Oct 2015, 22:26					</div>
				</div>
				<div class="post-content content">
					<p>xl2tpd works flawlessly on trunk, though</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294287">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Vanzent</div>
					<div class="post-datetime">
						2 Oct 2015, 09:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brvno wrote:</cite><blockquote><p>xl2tpd works flawlessly on trunk, though</p></blockquote></div><p>I installed trunk. Works fine! Thank you!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>