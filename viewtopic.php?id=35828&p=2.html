<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto enable channel 12 and 13 on TP-Link WR-1043ND?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 24 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=35828&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p163036">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						2 Apr 2012, 17:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>I changed the wireless channel from 13 to 1 in and wlan now works automatically at boot...</p></blockquote></div><p>Hi, I use another model, but I think that process is similar and regulatory is changed twice. To get channel 13 with regulatory domain updated, I think an easy way is put &quot;/sbin/wifi&quot; on rc.local and test if it work then. Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163052">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						2 Apr 2012, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>If wireless doesn’t come up, try to isolate the issue and file a bug.</p><p>I built trunk for the same device yesterday and it comes up fine on channel 13.</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 2 Apr 2012, 18:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163059">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						2 Apr 2012, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>My build was r31152 and with ATH_USER_REGD but maybe it is something else causing the problem.</p><p>It is difficult to isolate the issue when not too familiar with OpenWRT. I did try debugging, I checked the /etc/init.d/network script was working properly and it is, /sbin/wifi is executed on boot but for channel 13 it doesn&#039;t work until sometime after boot completes which I guess is a hint about the issue. I even created S99wifi and made it do /sbin/wifi like in S40network and it ran it on boot as expected but again with channel 13 the wlan0 wasn&#039;t up.</p><p>So it seems the wireless configuration isn&#039;t broken it&#039;s just after a reboot channel 13 won&#039;t come up until boot completes so we need to ssh and run wifi command and it comes up fine.</p><p>I am fine using channel 1 until I know more to debug such issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163060">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						2 Apr 2012, 19:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>almursi wrote:</cite><blockquote><div class="quotebox"><cite>j8soot wrote:</cite><blockquote><p>I changed the wireless channel from 13 to 1 in and wlan now works automatically at boot...</p></blockquote></div><p>Hi, I use another model, but I think that process is similar and regulatory is changed twice. To get channel 13 with regulatory domain updated, I think an easy way is put &quot;/sbin/wifi&quot; on rc.local and test if it work then. Regards.</p></blockquote></div><p>I didn&#039;t think to use rc.local but I might be able to check it later.</p><p>I think it can&#039;t be too hard for someone who knows OpenWRT to find the cause and fix it and I am learning quickly so hopefully I will be able to solve it with more knowledge. I can make do with channel 1 for now as I have other learning taking up my time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163061">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Apr 2012, 19:24					</div>
				</div>
				<div class="post-content content">
					<p>try to insert a &quot;sleep 10&quot; right before the &quot;/sbin/wifi is called in /etc/init.d/network...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163069">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						2 Apr 2012, 20:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>If wireless doesn’t come up, try to isolate the issue and file a bug.</p><p>I built trunk for the same device yesterday and it comes up fine on channel 13.</p></blockquote></div><p>Did you compiled OpenVPN and luci within? Than I would like to download your trunk!</p><p>I also enabled the REGD...-thing in the .config.</p><p>How did you enable channel 13 on the device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163099">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						2 Apr 2012, 22:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>try to insert a &quot;sleep 10&quot; right before the &quot;/sbin/wifi is called in /etc/init.d/network...</p></blockquote></div><p>Hi, yes <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> that was the idea, but the simplest is to try first on rc.local.</p><div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><p>[I also enabled the REGD...-thing in the .config.<br />How did you enable channel 13 on the device?</p></blockquote></div><p>Sorry, I do not remember if it has been commented here, but a common mistake is forgetting to install kmod-wprobe (happened to me more than once), although in the wiki I&#039;ve seen it quite well explained. Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163137">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Apr 2012, 13:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>almursi wrote:</cite><blockquote><p>Hi, yes <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> that was the idea, but the simplest is to try first on rc.local.</p></blockquote></div><p>is it EXACTLY the same thing?</p><p>have you tried?</p><p>because that trick solved me a &quot;no wifi at boot&quot; problem with a zd1211rw usb wifi adapter on my x86 box..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163281">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						4 Apr 2012, 17:06					</div>
				</div>
				<div class="post-content content">
					<p>Today I compiled again the latest trunk with kmod-wprobe enabled. But nothing changed, wlan won&#039;t start when router is powered on. That&#039;s really annoying!</p><p>@towolf</p><p>Can you post your .config file here? So I can build another firmware with the same options like yours!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163319">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						4 Apr 2012, 20:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><p>Today I compiled again the latest trunk with kmod-wprobe enabled. But nothing changed, wlan won&#039;t start when router is powered on. That&#039;s really annoying!</p><p>@towolf</p><p>Can you post your .config file here? So I can build another firmware with the same options like yours!</p></blockquote></div><p>I don&#039;t think you want my config. I stripped out everything not needed when using the box as a dumb, switched AP.<br />I also run uncrypted wireless. But other than that I use the defaults (don&#039;t forget make defconfig).</p><p>Could you, first of all, post full logread and full dmesg immediately after startup?</p><p>Also post /etc/config/wireless</p><p>Redact at will.</p><br /><p>EDIT: Here&#039;s mine:</p><div class="codebox"><pre><code>root@plink:~# cat /etc/config/wireless 
config wifi-device  radio0
        option type     mac80211
        option macaddr  f8:d1:11:xx:xx:xx
        option hwmode   11ng
        option htmode   HT20
        option &#039;noscan&#039; &#039;1&#039;
        option short_preamble &#039;1&#039;
        option &#039;country&#039; &#039;DE&#039;
        list ht_capab   SHORT-GI-40
        list ht_capab   DSSS_CCK-40
        option channel  4
        option disabled 0

config wifi-iface
        option device   radio0
        option network  lan
        option mode     ap
        option ssid     someap
        option encryption none</code></pre></div>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 4 Apr 2012, 20:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163338">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						5 Apr 2012, 00:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>is it EXACTLY the same thing?</p><p>have you tried?</p></blockquote></div><p>Hi, your tip is simply pefect (but rc.local it&#039;s easy to edit using luci web page <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />, to test). Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163401">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						5 Apr 2012, 16:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><p>Today I compiled again the latest trunk with kmod-wprobe enabled. But nothing changed, wlan won&#039;t start when router is powered on. That&#039;s really annoying!</p><p>@towolf</p><p>Can you post your .config file here? So I can build another firmware with the same options like yours!</p></blockquote></div><p>I don&#039;t think you want my config. I stripped out everything not needed when using the box as a dumb, switched AP.<br />I also run uncrypted wireless. But other than that I use the defaults (don&#039;t forget make defconfig).</p><p>Could you, first of all, post full logread and full dmesg immediately after startup?</p><p>Also post /etc/config/wireless</p><p>Redact at will.</p><br /><p>EDIT: Here&#039;s mine:</p><div class="codebox"><pre><code>root@plink:~# cat /etc/config/wireless 
config wifi-device  radio0
        option type     mac80211
        option macaddr  f8:d1:11:xx:xx:xx
        option hwmode   11ng
        option htmode   HT20
        option &#039;noscan&#039; &#039;1&#039;
        option short_preamble &#039;1&#039;
        option &#039;country&#039; &#039;DE&#039;
        list ht_capab   SHORT-GI-40
        list ht_capab   DSSS_CCK-40
        option channel  4
        option disabled 0

config wifi-iface
        option device   radio0
        option network  lan
        option mode     ap
        option ssid     someap
        option encryption none</code></pre></div></blockquote></div><p>Ok, let&#039;s start with dmesg:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
[    0.000000] Linux version 3.2.13 (ultrazauberer@ubuntu) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Wed Apr 4 15:35:53 CEST 2012
[    0.000000] MyLoader: sysp=49020000, boardp=04a21122, parts=002a0188
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR9132 rev 2
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 802d19e0, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8128 pages, LIFO batch:0
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-WR1043ND console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29256k/32768k available (2112k kernel code, 3512k reserved, 391k data, 196k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:48
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is TP-LINK TL-WR1043ND
[    0.350000] bio: create slab &lt;bio-0&gt; at 0
[    0.360000] Switching to clocksource MIPS
[    0.370000] NET: Registered protocol family 2
[    0.370000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.370000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.380000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.390000] TCP reno registered
[    0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.410000] NET: Registered protocol family 1
[    0.410000] PCI: CLS 0 bytes, default 32
[    0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.430000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.450000] msgmni has been set to 57
[    0.450000] io scheduler noop registered
[    0.450000] io scheduler deadline registered (default)
[    0.460000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.490000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.490000] console [ttyS0] enabled, bootconsole disabled
[    0.510000] m25p80 spi0.0: found s25sl064a, expected m25p80
[    0.510000] m25p80 spi0.0: s25sl064a (8192 Kbytes)
[    0.520000] 5 tp-link partitions found on MTD device spi0.0
[    0.520000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.530000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.540000] 0x000000020000-0x000000101800 : &quot;kernel&quot;
[    0.540000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.560000] 0x000000101800-0x0000007f0000 : &quot;rootfs&quot;
[    0.560000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.580000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.580000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=4E0000, len=310000
[    0.590000] 0x0000004e0000-0x0000007f0000 : &quot;rootfs_data&quot;
[    0.600000] 0x0000007f0000-0x000000800000 : &quot;art&quot;
[    0.600000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;
[    0.610000] Realtek RTL8366RB ethernet switch driver version 0.2.3
[    0.620000] rtl8366rb rtl8366rb: using GPIO pins 18 (SDA) and 19 (SCK)
[    0.630000] rtl8366rb rtl8366rb: RTL5937 ver. 3 chip found
[    0.670000] rtl8366rb: probed
[    0.680000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    0.980000] TCP westwood registered
[    0.990000] NET: Registered protocol family 17
[    0.990000] 8021q: 802.1Q VLAN Support v1.8
[    1.000000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.010000] Freeing unused kernel memory: 196k freed
[    3.190000] ar71xx: pll_reg 0xb8050014: 0x1a000000
[    3.190000] eth0: link up (1000Mbps/Full duplex)
[    3.350000] Registered led device: tp-link:green:usb
[    3.350000] Registered led device: tp-link:green:system
[    3.350000] Registered led device: tp-link:green:qss
[    3.360000] Registered led device: tp-link:green:wlan
[    6.640000] JFFS2 notice: (406) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 11 of xref (0 dead, 0 orphan) found.
[    6.830000] eth0: link down
[    9.010000] deflate: Unknown symbol zlib_inflateReset (err 0)
[    9.020000] deflate: Unknown symbol zlib_inflateInit2 (err 0)
[    9.020000] deflate: Unknown symbol zlib_inflate (err 0)
[    9.030000] deflate: Unknown symbol zlib_inflate_workspacesize (err 0)
[    9.030000] deflate: Unknown symbol zlib_inflateEnd (err 0)
[    9.920000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r31182
[    9.930000] Backport based on wireless-testing.git master-2012-02-27
[    9.960000] cfg80211: Calling CRDA to update world regulatory domain
[   10.350000] NET: Registered protocol family 10
[   10.580000] cfg80211: World regulatory domain updated:
[   10.580000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   10.590000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.600000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.610000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.610000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.620000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.860000] SCSI subsystem initialized
[   11.040000] usbcore: registered new interface driver usbfs
[   11.040000] usbcore: registered new interface driver hub
[   11.050000] usbcore: registered new device driver usb
[   11.660000] ath: EEPROM regdomain: 0x0
[   11.660000] ath: EEPROM indicates default country code should be used
[   11.660000] ath: doing EEPROM country-&gt;regdmn map search
[   11.660000] ath: country maps to regdmn code: 0x3a
[   11.660000] ath: Country alpha2 being used: US
[   11.660000] ath: Regpair used: 0x3a
[   11.670000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   11.670000] ieee80211 phy0: Atheros AR9100 MAC/BB Rev:7 AR2133 RF Rev:a2 mem=0xb80c0000, irq=2
[   11.690000] cfg80211: Calling CRDA for country: US
[   11.830000] cfg80211: Regulatory domain changed to country: US
[   11.840000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   11.850000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   11.860000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   11.860000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.870000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.880000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   11.890000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   12.490000] NET: Registered protocol family 15
[   12.530000] Initializing XFRM netlink socket
[   12.730000] PPP generic driver version 2.4.2
[   12.770000] tun: Universal TUN/TAP device driver, 1.6
[   12.770000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[   12.940000] IPv4 over IPv4 tunneling driver
[   13.910000] L2TP core driver, V2.0
[   13.930000] L2TP netlink interface
[   13.950000] L2TP ethernet pseudowire support (L2TPv3)
[   13.970000] L2TP IP encapsulation support (L2TPv3)
[   14.020000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   14.230000] NET: Registered protocol family 24
[   14.500000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   14.500000] ath79-ehci ar913x-ehci: Atheros built-in EHCI controller
[   14.510000] ath79-ehci ar913x-ehci: new USB bus registered, assigned bus number 1
[   14.550000] ath79-ehci ar913x-ehci: irq 3, io mem 0x1b000000
[   14.570000] ath79-ehci ar913x-ehci: USB 2.0 started, EHCI 1.00
[   14.570000] hub 1-0:1.0: USB hub found
[   14.580000] hub 1-0:1.0: 1 port detected
[   14.610000] nf_conntrack version 0.5.0 (460 buckets, 1840 max)
[   15.250000] uhci_hcd: USB Universal Host Controller Interface driver
[   15.610000] usbcore: registered new interface driver usblp
[   15.740000] Initializing USB Mass Storage driver...
[   15.750000] usbcore: registered new interface driver usb-storage
[   15.750000] USB Mass Storage support registered.
[   15.880000] usbcore: registered new interface driver ums-alauda
[   15.900000] usbcore: registered new interface driver ums-cypress
[   15.920000] usbcore: registered new interface driver ums-datafab
[   15.940000] usbcore: registered new interface driver ums-freecom
[   15.960000] usbcore: registered new interface driver ums-isd200
[   15.980000] usbcore: registered new interface driver ums-jumpshot
[   16.010000] usbcore: registered new interface driver ums-karma
[   16.030000] usbcore: registered new interface driver ums-sddr09
[   16.050000] usbcore: registered new interface driver ums-sddr55
[   16.070000] usbcore: registered new interface driver ums-usbat
[   16.320000] usbcore: registered new interface driver usbhid
[   16.320000] usbhid: USB HID core driver
[   16.340000] usbip_core: USB/IP Core v1.0.0
[   20.980000] ar71xx: pll_reg 0xb8050014: 0x1a000000
[   21.280000] eth0: link up (1000Mbps/Full duplex)
[   23.740000] device eth0.1 entered promiscuous mode
[   23.740000] device eth0 entered promiscuous mode
[   23.790000] br-lan: port 1(eth0.1) entering forwarding state
[   23.800000] br-lan: port 1(eth0.1) entering forwarding state
root@OpenWrt:~#</code></pre></div><p>Then the /etc/config/wireless: (MAC and PW faked)</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/config/wireless

config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;aa:bb:cc:dd:ee:ff&#039;
        option hwmode &#039;11ng&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;DSSS_CCK-40&#039;
        option disabled &#039;1&#039;
        option channel &#039;13&#039;
        option txpower &#039;20&#039;
        option country &#039;DE&#039;
        option htmode &#039;HT40-&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option network &#039;lan&#039;
        option mode &#039;ap&#039;
        option ssid &#039;OpenWrt&#039;
        option encryption &#039;psk2+ccmp&#039;
        option key &#039;myPW&#039;

root@OpenWrt:~#</code></pre></div><p>And after all the command iwconfig:</p><div class="codebox"><pre><code>root@OpenWrt:~# iwconfig
eth0.1    no wireless extensions.

lo        no wireless extensions.

tunl0     no wireless extensions.

eth0      no wireless extensions.

ip6tnl0   no wireless extensions.

br-lan    no wireless extensions.

eth0.2    no wireless extensions.

root@OpenWrt:~#</code></pre></div><p>I have no idea how to autostart channel 13. After WLAN is working I can start with the configuration of the router (vlans, ...).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163405">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						5 Apr 2012, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/config/wireless

config wifi-device &#039;radio0&#039;
        ...
        option disabled &#039;1&#039;
        ...</code></pre></div><p>I have no idea how to autostart channel 13. After WLAN is working I can start with the configuration of the router (vlans, ...).</p></blockquote></div><p>Hi, maybe because you&#039;d disabled <strong>wifi-device</strong>, change to 0 (or delete) option &#039;disabled&#039; &#039;1&#039;.&nbsp; (with only a wifi-iface disabled regulatory domain is update on boot, at least on my router, but in your case all under wifi-devide seems to be ignored). Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163407">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						5 Apr 2012, 17:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the hint. I edited the file and changed the number to zero. After a reboot I also can&#039;t the the OpenWRT ESSID.</p><p>iwconfig shows me following:</p><div class="codebox"><pre><code>root@OpenWrt:~# iwconfig
eth0.1    no wireless extensions.

lo        no wireless extensions.

tunl0     no wireless extensions.

wlan0     IEEE 802.11bgn  ESSID:off/any
          Mode:Managed  Access Point: Not-Associated   Tx-Power=20 dBm
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:on

eth0      no wireless extensions.

ip6tnl0   no wireless extensions.

br-lan    no wireless extensions.

eth0.2    no wireless extensions.

root@OpenWrt:~#</code></pre></div><p>So I wonder why my wlan isn&#039;t configured? I also wonder why the wlan won&#039;t start because I configured all in luci and saved&amp;applied the settings.</p><p>EDIT: The wlan LED won&#039;t go on. In the webinterface the wlan seems still be deactivated:</p><p><span class="postimg"><img src="http://www.abload.de/img/wlan02aucr.png" alt="http://www.abload.de/img/wlan02aucr.png" /></span></p><p><span class="postimg"><img src="http://www.abload.de/img/wlan1y0urn.png" alt="http://www.abload.de/img/wlan1y0urn.png" /></span></p><p>If I start the wlan manually over luci it works fine and the config is loaded.</p>											<p class="post-edited">(Last edited by <strong>DerUltrazauberer</strong> on 5 Apr 2012, 17:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163416">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">almursi</div>
					<div class="post-datetime">
						5 Apr 2012, 19:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I get same problem:</p><p>Apr&nbsp; 5 18:49:07 OpenWrt kern.info kernel: [&nbsp; &nbsp;43.930000] cfg80211: Calling CRDA for country: ES<br />Apr&nbsp; 5 18:49:10 OpenWrt kern.info kernel: [&nbsp; &nbsp;46.240000] device wlan0 entered promiscuous mode<br />Apr&nbsp; 5 18:49:10 OpenWrt daemon.warn hostapd: wlan0: IEEE 802.11 Configured channel (13) not found from the channel list of current mode (1) IEEE 802.11g<br />Apr&nbsp; 5 18:49:10 OpenWrt daemon.warn hostapd: wlan0: IEEE 802.11 Hardware does not support configured channel<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: rmdir[ctrl_interface]: No such file or directory<br />Apr&nbsp; 5 18:49:10 OpenWrt kern.info kernel: [&nbsp; &nbsp;46.250000] device wlan0 left promiscuous mode<br />Apr&nbsp; 5 18:49:10 OpenWrt kern.info kernel: [&nbsp; &nbsp;46.260000] br-lan: port 1(wlan0) entering disabled state<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: Configuration file: /var/run/hostapd-phy0.conf<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: channel [12] (13) is disabled for use in AP mode, flags: 0x1<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: wlan0: IEEE 802.11 Configured channel (13) not found from the channel list of current mode (1) IEEE 802.11g<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: wlan0: IEEE 802.11 Hardware does not support configured channel<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: Could not select hw_mode and channel. (-4)<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: wlan0: Unable to setup interface.<br />Apr&nbsp; 5 18:49:10 OpenWrt user.info sysinit: Failed to start hostapd for phy0</p><p>Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.920000] cfg80211: Regulatory domain changed to country: ES<br />Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.920000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.930000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.940000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.950000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />Apr&nbsp; 5 18:49:26 OpenWrt kern.info kernel: [&nbsp; &nbsp;62.950000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2700 mBm)</p><p>I put sleep 10 on /etc/init.d/network, but I think that it need more delay.</p><p>Edited: I can fix it with a simple sleep 10 and /sbin/wifi on rc.local (delay on init.d seems no work, and country is updated near call of rc.local)</p><p>it is on luci -&gt; system -&gt; startup -&gt; local startup</p><div class="codebox"><pre><code># Put your custom commands here that should be executed once
# the system init finished. By default this file does nothing.
sleep 10
/sbin/wifi
exit 0</code></pre></div><p>Regards.</p>											<p class="post-edited">(Last edited by <strong>almursi</strong> on 5 Apr 2012, 20:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163431">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						5 Apr 2012, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Here are some useful links concerning the topic:<br /><a href="http://smorgasbord.gavagai.nl/2010/09/wifi-regulatory-compliance-and-how-to-fix-it/">http://smorgasbord.gavagai.nl/2010/09/w … to-fix-it/</a><br /><a href="http://forum.aircrack-ng.org/index.php?;topic=6822.0">http://forum.aircrack-ng.org/index.php?;topic=6822.0</a><br /><a href="http://forum.aircrack-ng.org/index.php?topic=7826.0">http://forum.aircrack-ng.org/index.php?topic=7826.0</a></p><p>I have included a customized regulatory.bin in my latest openwrt image and it works as expected.</p><p>BR</p>											<p class="post-edited">(Last edited by <strong>dir2cas</strong> on 5 Apr 2012, 22:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163614">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						7 Apr 2012, 18:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dir2cas wrote:</cite><blockquote><p>Here are some useful links concerning the topic:<br /><a href="http://smorgasbord.gavagai.nl/2010/09/wifi-regulatory-compliance-and-how-to-fix-it/">http://smorgasbord.gavagai.nl/2010/09/w … to-fix-it/</a><br /><a href="http://forum.aircrack-ng.org/index.php?;topic=6822.0">http://forum.aircrack-ng.org/index.php?;topic=6822.0</a><br /><a href="http://forum.aircrack-ng.org/index.php?topic=7826.0">http://forum.aircrack-ng.org/index.php?topic=7826.0</a></p><p>I have included a customized regulatory.bin in my latest openwrt image and it works as expected.</p><p>BR</p></blockquote></div><p>I successfully compiled a modded regulatory.bin. I compiled this file into the firmware and deactivated the ATH_USER_REGD in the .config. Now I can set a much higher tx power, but I can&#039;t activate channel 13 in the luci webif. When I manually set the channel to 13 the wlan won&#039;t start. I will compile another new firmware with ATH_USER_REGD activated. I will hope the wlan will come on after a reboot. Otherwise I will add the script.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163620">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						7 Apr 2012, 19:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>almursi wrote:</cite><blockquote><p>it is on luci -&gt; system -&gt; startup -&gt; local startup</p><div class="codebox"><pre><code># Put your custom commands here that should be executed once
# the system init finished. By default this file does nothing.
sleep 10
/sbin/wifi
exit 0</code></pre></div><p>Regards.</p></blockquote></div><p>Thanks! This worked, but&#039;s just a temporarily solution. I will hope this problem will be fixed in the future.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p163686">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						8 Apr 2012, 14:57					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone tried to enable vlans? I added the entries for vlan id 7 and id 8 in the /etc/config/network and luci isn&#039;t showing the ids. I need tagged vlan ids for internet and iptv. Someone has this constellation working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164909">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">fame</div>
					<div class="post-datetime">
						18 Apr 2012, 11:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><p>Does anyone tried to enable vlans? I added the entries for vlan id 7 and id 8 in the /etc/config/network and luci isn&#039;t showing the ids. I need tagged vlan ids for internet and iptv. Someone has this constellation working?</p></blockquote></div><p>I was about to ask the same thing. I will order vdsl with entertain in a couple of weeks. I don&#039;t want one of those stupid router which I have to configure with the gui etc. Is there any router that is working with vdsl50+entertain and openwrt?</p><p>Kind regards,<br />fame</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164912">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						18 Apr 2012, 12:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fame wrote:</cite><blockquote><div class="quotebox"><cite>DerUltrazauberer wrote:</cite><blockquote><p>Does anyone tried to enable vlans? I added the entries for vlan id 7 and id 8 in the /etc/config/network and luci isn&#039;t showing the ids. I need tagged vlan ids for internet and iptv. Someone has this constellation working?</p></blockquote></div><p>I was about to ask the same thing. I will order vdsl with entertain in a couple of weeks. I don&#039;t want one of those stupid router which I have to configure with the gui etc. Is there any router that is working with vdsl50+entertain and openwrt?</p><p>Kind regards,<br />fame</p></blockquote></div><p>Sorry, I can&#039;t test it now. But I think the 1043ND will working with Entertain. I can check it at the beginnung of may. But I also ordered a Netgeat WNDR3800 a week ago, which should have no problems with vlans and it is powerfull enough to route with more than 50mbps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164913">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">fame</div>
					<div class="post-datetime">
						18 Apr 2012, 12:59					</div>
				</div>
				<div class="post-content content">
					<p>Now I&#039;m confused <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> You asked the question about the vlan tagging. Isn&#039;t that something you need to get working before you can use it with entertain (vdsl, iptv, etc...)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164963">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						18 Apr 2012, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>Of course you need VLAN tagging on the WAN port. VLAN id7 should be the normal internet traffic and VLAN id8 is the multicast stream for iptv. So you have to configure these two tags to the wan port and then it should running.</p><p>Or what do you mean?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164967">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">fame</div>
					<div class="post-datetime">
						18 Apr 2012, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the confusion. I thought this would be a problem with openwrt. But it seems to be no problem at all. Would you mind to write a REALLY short tutorial what one have to do to configure the router for the usage with vdsl + entertain? Or is it simple enough that one doesn&#039;t need any help?</p><p>Thanks for your help so far!</p>											<p class="post-edited">(Last edited by <strong>fame</strong> on 18 Apr 2012, 20:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164969">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">DerUltrazauberer</div>
					<div class="post-datetime">
						18 Apr 2012, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>The router is configured like here: <a href="http://www.computerhilfen.de/hilfen-22-389919-0.html">http://www.computerhilfen.de/hilfen-22-389919-0.html</a></p><p>But this is just the basic. The problem is, that you have to configure the tagged vlans first. When I have tested the router, I can post my config and what I have done. But this can lasts 2 weeks.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=35828&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=35828&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=35828&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>