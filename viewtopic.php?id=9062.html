<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Buffalo WZR-RS-54G and kernel 2.6.19.1 (SVN 6113)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p40977">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">winnme</div>
					<div class="post-datetime">
						18 Jan 2007, 01:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I want to try the new kmikaze build (switching from dd-wrt) and with the old 2.4 kernel, everything&#039;s fine with my router.</p><p>Now when I try to switch to a 2.6 kernel, it boots up with an exception.<br />Even the bcm43xx driver works for me (wlan is detected correctly)...</p><p>but running commands like &quot;ps&quot; give me segfaults!</p><p>I have used the brcm47xx-2.6 target!</p><br /><p>here&#039;s my dmesg output (sorry don&#039;t have a serial console)</p><div class="codebox"><pre><code>Linux version 2.6.19.1 (winnme@localhost) (gcc version 3.4.6 (OpenWrt-2.0)) #2 Wed Jan 17 22:54:08 CET 2007
CPU revision is: 00029006
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
On node 0 totalpages: 16384
  DMA zone: 128 pages used for memmap
  DMA zone: 0 pages reserved
  DMA zone: 16256 pages, LIFO batch:3
  Normal zone: 0 pages used for memmap
Built 1 zonelists.  Total pages: 16256
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Synthesized TLB refill handler (19 instructions).
Synthesized TLB load handler fastpath (31 instructions).
Synthesized TLB store handler fastpath (31 instructions).
Synthesized TLB modify handler fastpath (30 instructions).
PID hash table entries: 256 (order: 8, 1024 bytes)
Using 132.000 MHz high precision timer.
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 62292k/65536k available (2047k kernel code, 3184k reserved, 281k data, 132k init, 0k highmem)
Calibrating delay loop... 262.14 BogoMIPS (lpj=524288)
Mount-cache hash table entries: 512
Checking for &#039;wait&#039; instruction...  unavailable.
NET: Registered protocol family 16
PCI: fixing up bridge
PCI: Setting latency timer of device 0000:01:00.0 to 64
PCI: Fixing up device 0000:01:00.0
NET: Registered protocol family 2
IP route cache hash table entries: 512 (order: -1, 2048 bytes)
TCP established hash table entries: 2048 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 2048 bind 1024)
TCP reno registered
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.2. (NAND) (C) 2001-2006 Red Hat, Inc.
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing enabled
serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A
serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A
b44.c:v1.01 (Jun 16, 2006)
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Setting latency timer of device 0000:00:01.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 00:0d:0b:47:fe:9c
PCI: Enabling device 0000:00:02.0 (0000 -&gt; 0002)
PCI: Setting latency timer of device 0000:00:02.0 to 64
eth1: Broadcom 47xx 10/100BaseT Ethernet 00:0d:0b:47:fe:9d
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table at 0x0040
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Flash device: 0x800000 at 0x1fc00000
bootloader size: 262144
Physically mapped flash: Filesystem type: squashfs, size=0xbec7e
Updating TRX offsets and length:
old trx = [0x0000001c, 0x000008ec, 0x000b3800], len=0x00173000 crc32=0x5195c59a
new trx = [0x0000001c, 0x000008ec, 0x000b3800], len=0x00180000 crc32=0xa36aa82f
Done
Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007f0000 : &quot;linux&quot;
0x000f3800-0x001c0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x007f0000-0x00800000 : &quot;nvram&quot;
0x001c0000-0x007f0000 : &quot;OpenWrt&quot;
ip_conntrack version 2.4 (512 buckets, 4096 max) - 240 bytes per conntrack
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Time: MIPS clocksource has been installed.
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 132k freed
Algorithmics/MIPS FPU Emulator v1.5
diag: Detected &#039;Buffalo WZR-RS-G54&#039;
Probing device eth0: No Robo switch in managed mode found
Probing device eth1: No Robo switch in managed mode found
Probing device eth2: No such device
Probing device eth3: No such device
BFL_ENETADM not set in boardflags. Use force=1 to ignore.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering disabled state
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
Probing device eth0: No Robo switch in managed mode found
Probing device eth1: No Robo switch in managed mode found
Probing device eth2: No such device
Probing device eth3: No such device
BFL_ENETADM not set in boardflags. Use force=1 to ignore.
PPP generic driver version 2.4.2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
Data bus error, epc == 8010e1d4, ra == 80014b50
Oops[#1]:
Cpu 0
$ 0   : 00000000 1000b800 83db9000 00000001
$ 4   : 83db9000 fffdbfab 0000000b 83db9000
$ 8   : 00000000 00000000 00000000 7fa53fab
$12   : 00000000 0006d8b5 00000001 2abdee84
$16   : 0000000b 0000000b 7fa53fab 83db9000
$20   : 80266ae0 80266b14 83db9000 00000000
$24   : 00000003 800159e0                  
$28   : 813ca000 813cbdf8 802998c8 80014b50
Hi    : 000000d0
Lo    : 000001b3
epc   : 8010e1d4     Not tainted
ra    : 80014b50 Status: 1000b803    KERNEL EXL IE 
Cause : 0000001c
PrId  : 00029006
Modules linked in: ip_conntrack_tftp ip_nat_irc ip_conntrack_irc ip_nat_ftp ip_conntrack_ftp ppp_async ppp_generic slhc crc_ccitt switch_core diag
Process ps (pid: 656, threadinfo=813ca000, task=810e8ce0)
Stack : 80266ae0 80266b14 83db9000 00000000 80069138 800690b4 802998c8 80266ae0
        8023827c 802ac5a0 803f1fab 0000000b 813cbe30 813cbe34 81007e20 8116b5c0
        0000000b 00000000 80266ae0 fffffff4 83db9000 00001000 802998c8 00000001
        0040967c 800bbc38 000003ff fffffffd 83db8b00 813cbf18 00000000 00000001
        802998c8 83db9000 000003ff fffffff4 83db8b00 813cbf18 7fb22880 800bc434
        ...
Call Trace:[&lt;80069138&gt;][&lt;800690b4&gt;][&lt;800bbc38&gt;][&lt;800bc434&gt;][&lt;8007da54&gt;][&lt;8007de38&gt;][&lt;8007d050&gt;][&lt;80012860&gt;]

Code: 30d80003  1306000a  00000000 &lt;98a80000&gt; 88a80003  24a50004  24c6fffc  ac880000  14d8fffa 
note: ps[656] exited with preempt_count 1</code></pre></div><p>This dmesg output is from the defualt configuration (only selectet 2.6 kernel / no wifi and then compiled)<br />Can anyone help me with this??</p>											<p class="post-edited">(Last edited by <strong>winnme</strong> on 18 Jan 2007, 02:14)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>