<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DWL2100AP - build from source does not boot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p146013">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ivan8</div>
					<div class="post-datetime">
						17 Oct 2011, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>After compiling and flashing backfire-rc5 for atheros AR231x/AR5312 it does not boot.</p><p>Although flashing snapshot from <a href="http://downloads.openwrt.org/backfire/10.03.1-rc5/atheros/">http://downloads.openwrt.org/backfire/1 â€¦ 5/atheros/</a><br />works fine.</p><p>I used config and svn revision the same as for the precompiled snapshot.</p><p>Here is serial console output:</p><div class="codebox"><pre><code>Now booting linux kernel:                                                       
 Base address 0x80080000 Entry 0x80041000                                       
 Cmdline :                                                                      
Linux version 2.6.30.10 (user@usv-10) (gcc version 4.3.3 (GCC) ) #1 Mon Oct 17 1
console [early0] enabled                                                        
CPU revision is: 0001800a (MIPS 4Kc)                                            
Determined physical RAM map:                                                    
 memory: 01000000 @ 00000000 (usable)                                           
Initrd not found or empty - disabling initrd                                    
Zone PFN ranges:                                                                
  Normal   0x00000000 -&gt; 0x00001000                                             
Movable zone start PFN for each node                                            
early_node_map[1] active PFN ranges                                             
    0: 0x00000000 -&gt; 0x00001000                                                 
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064      
Kernel command line: console=ttyS0,9600 rootfstype=squashfs,jffs2               
Primary instruction cache 16kB, VIPT, 4-way, linesize 16 bytes.                 
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 16 bytes             
NR_IRQS:128                                                                     
PID hash table entries: 64 (order: 6, 256 bytes)                                
console handover: boot [early0] -&gt; real [ttyS0]                                 
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)                    
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)                     
Memory: 13248k/16384k available (2089k kernel code, 3136k reserved, 404k data, )
Calibrating delay loop... 179.40 BogoMIPS (lpj=897024)                          
Mount-cache hash table entries: 512                                             
Reserved instruction in kernel code[#1]:                                        
Cpu 0                                                                           
$ 0   : 00000000 1000c000 00000001 00000000                                     
$ 4   : 80f173c0 1000c001 fffffed5 fffffed5                                     
$ 8   : 80f21820 1000c001 00000000 80f08b00                                     
$12   : ffffffff 80f08b08 80f08b10 00000001                                     
$16   : 00000000 8030c880 80f20000 00000001                                     
$20   : 8031b000 80f19ee0 8031def8 00000000                                     
$24   : 00000000 00000000                                                       
$28   : 8031c000 8031de88 00000000 800c7080                                     
Hi    : 00000000                                                                
Lo    : 00000780                                                                
epc   : 8008003c 0x8008003c                                                     
    Not tainted                                                                 
ra    : 800c7080 0x800c7080                                                     
Status: 1000c003    KERNEL EXL IE                                               
Cause : 30800028                                                                
PrId  : 0001800a (MIPS 4Kc)                                                     
Modules linked in:                                                              
Process khelper (pid: 6, threadinfo=8031c000, task=80313048, tls=00000000)      
Stack : 00000021 00000000 80f20000 00000000 fffffffe 800c84d8 1ce89cac 802a8470 
        802e0000 00000000 00000000 800cb654 80f20000 80f20000 00000000 00000000 
        00000000 00000000 00000000 80051060 6ce8ceee fb8bb967 3cc1c763 fceff3bf 
        6dfc0ec9 00000000 80f08300 800431d0 802a8470 80f19ee0 8031b000 00000078 
        802e0000 80313948 00000000 8005e3fc 00000fab 8031c000 802a8470 80f19ee0 
        ...                                                                     
Call Trace:[&lt;800c84d8&gt;] 0x800c84d8                                              
[&lt;800cb654&gt;] 0x800cb654                                                         
[&lt;80051060&gt;] 0x80051060                                                         
[&lt;800431d0&gt;] 0x800431d0                                                         
[&lt;8005e3fc&gt;] 0x8005e3fc                                                         
[&lt;8005ced8&gt;] 0x8005ced8                                                         
[&lt;8005a664&gt;] 0x8005a664                                                         
[&lt;80074094&gt;] 0x80074094                                                         
[&lt;80050a80&gt;] 0x80050a80                                                         
[&lt;8004eae0&gt;] 0x8004eae0                                                         
                                                                                
                                                                                
Code: 30783030  38303030  3030006d &lt;6f646574&gt; 74793000  302c6e2c  382c312c  687 
Disabling lock debugging due to kernel taint                                    
Reserved instruction in kernel code[#2]:                                        

...

Code: 40016000  30630001  3421001f &lt;80080028&gt; 80080030  8008003b  80080044  800 
Kernel panic - not syncing: Attempted to kill init!</code></pre></div><p>Any ideas, hints, tips etc?</p><p>Here is the relevant diff portion of boot process of broken image and the working one:<br /></p><div class="codebox"><pre><code> console handover: boot [early0] -&gt; real [ttyS0]                                 
 Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)                    
 Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)                     
-Memory: 13248k/16384k available (2089k kernel code, 3136k reserved, 404k data, )
-Calibrating delay loop... 179.40 BogoMIPS (lpj=897024)                          
+Memory: 13000k/16384k available (2181k kernel code, 3384k reserved, 415k data, )
+Calibrating delay loop... 179.81 BogoMIPS (lpj=899072)                          
 Mount-cache hash table entries: 512                                             
-Reserved instruction in kernel code[#1]:                                        
-Cpu 0                                                                           
...</code></pre></div><p>Thanks &amp; regards</p>											<p class="post-edited">(Last edited by <strong>ivan8</strong> on 17 Oct 2011, 11:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146052">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vpritiskovic</div>
					<div class="post-datetime">
						18 Oct 2011, 00:13					</div>
				</div>
				<div class="post-content content">
					<p>Funny, I have tested rc5 with my device it worked out of the box, see bottom of the <a href="https://dev.openwrt.org/ticket/8064">https://dev.openwrt.org/ticket/8064</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146073">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ivan8</div>
					<div class="post-datetime">
						18 Oct 2011, 09:12					</div>
				</div>
				<div class="post-content content">
					<p>rc5 also works out of the box for me.<br />The matter is that I&#039;m trying to compile rc5 from scratch - that&#039;s where things break</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146988">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vpritiskovic</div>
					<div class="post-datetime">
						29 Oct 2011, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>@ivan8</p><p>Tested today and both backfire and trunk are working out of the box with this ap!!</p><p>The problem was always the &#039;exec&#039; command in bootscript; change it to &#039;go&#039; and everything works like it should!</p><p>Updated the WIKI</p><p><a href="https://dev.openwrt.org/ticket/8064#comment:12">https://dev.openwrt.org/ticket/8064#comment:12</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p147095">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ivan8</div>
					<div class="post-datetime">
						31 Oct 2011, 02:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. Checked it out.</p><p>It seems not to use &#039;option txpower ...&#039; in /etc/config/wireless.<br />It always uses default 27dBm after restart/reboot.<br />However it works via &#039;iwconfig wlan0 txpower 0&#039;.<br />Am I missing something?</p>											<p class="post-edited">(Last edited by <strong>ivan8</strong> on 31 Oct 2011, 10:34)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>