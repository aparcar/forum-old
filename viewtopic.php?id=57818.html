<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt Chaos Calmer on WNCE2001: Root on RAM instead on EEPROM?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p279128">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Fredl</div>
					<div class="post-datetime">
						6 Jun 2015, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am not deeply familiar yet with Linux and Openwrt, so please forgive me not to understand all the underlaying mechanisms :-)</p><p>I have a Netgear WNCE2001, which I flashed to OpenWrt Barrier Breaker. It worked fine, except for some issue with WPA Enterprise, which I hoped to solve by upgrading to Chaos Calmer (but later I realized on another router how it is done in Barrier Breaker).</p><p>So I updated the Firmware first to openwrt-15.05-rc1-ramips-rt305x-wnce2001-initramfs-uImage.bin and then to openwrt-15.05-rc1-ramips-rt305x-wnce2001-squashfs-factory-worldwide.bin , which seemed to work fine.</p><p>But... When I edit for example files in /etc/config or by Luci-Interface, or if I install or remove Software using Luci or opkg, it seems all to be done in the RAM and not in the Flash. On every reboot all changes are lost.</p><p>So I downgraded to Barrier Breaker again, using openwrt-ramips-rt305x-wnce2001-squashfs-sysupgrade.bin - but the problem of mounting RAM instead of Flash at / remained. I suspect some issue with the file system and mountings of it?</p><p>root@OpenWrt:/# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14684&nbsp; &nbsp; &nbsp; &nbsp; 44&nbsp; &nbsp; &nbsp;14640&nbsp; &nbsp;0% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2304&nbsp; &nbsp; &nbsp; 2304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp;452&nbsp; &nbsp; &nbsp;14232&nbsp; &nbsp;3% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp; 44&nbsp; &nbsp; &nbsp;14640&nbsp; &nbsp;0% /tmp/root<br />overlayfs:/tmp/root&nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp; 44&nbsp; &nbsp; &nbsp;14640&nbsp; &nbsp;0% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev</p><p>rootfs shows 14640k - it should be around 400k, so it is in RAM instead of Flash, right?</p><p>root@OpenWrt:/# mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)<br />tmpfs on /tmp/root type tmpfs (rw,noatime,mode=755)<br />overlayfs:/tmp/root on / type overlayfs (rw,noatime,lowerdir=/,upperdir=/tmp/root)<br />tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,relatime,mode=600)<br />debugfs on /sys/kernel/debug type debugfs (rw,noatime)</p><br /><p>How can I convince the device to use Flash instead of RAM for such operations again? Is there something like openwrt-ramips-rt305x-wnce2001-initramfs-uImage.bin for Barrier Breaker?</p><br /><p>Thanks in advance, best regards, Fred :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280947">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Fredl</div>
					<div class="post-datetime">
						22 Jun 2015, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>Did noone else run into this problem?<br />Or is its solution so trivial that nobody bothers to answer? :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280957">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						22 Jun 2015, 04:10					</div>
				</div>
				<div class="post-content content">
					<p>Flash BB again without &quot;saving settings.&quot;&nbsp; This should give you a clean install.</p><p>An initramfs image runs entirely from RAM, these you have to build yourself as that functionality is mostly of use to developers to quickly test code without flashing.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 22 Jun 2015, 04:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280978">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Fredl</div>
					<div class="post-datetime">
						22 Jun 2015, 10:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>Flash BB again without &quot;saving settings.&quot;&nbsp; This should give you a clean install.</p></blockquote></div><p>Thanks for the answer;</p><p>I previously flashed it many times in my desperation with as well as without saving the settings, by different approaches (RS232 via u-boot (and this needs initramfs...), scp, Web, (these two want squashfs)...),</p><p>however, I just tried it again via webinterface without saving the settings - still the same: All changes (regardless with opkg as well as www-interface as well as editing e.g. /etc/init.d/...) happens in RAM instead in Flash.</p><p>Example: Software-Luci-Page after de-installing wpad-mini and installing wpad via scp and opkg:<br /><a href="http://666kb.com/i/czpqxv7v76g8mw9w0.gif">http://666kb.com/i/czpqxv7v76g8mw9w0.gif</a></p><p>Any other ideas are very welcome!</p><p>I suspect in Chaos Calmer this has been done cause 4MB are not enough for the system and for the userspace.<br />But what exactly has been changed to get this behavior?<br />And how can it be changed back?<br />For example: Where is the mounting point defined, and how can it be changed? Does it have something to do with U-Boot?<br />Or: How does the Eeprom get partitioned into squashfs and user-eeprom? How can this be changed?</p><p>Thanks in advance! :-)</p>											<p class="post-edited">(Last edited by <strong>Fredl</strong> on 22 Jun 2015, 11:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282573">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Fredl</div>
					<div class="post-datetime">
						6 Jul 2015, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>This is the bootlog and the output of ifconfig and df seen on RS232 directly on first reboot after flashing openwrt-ramips-rt305x-wnce2001-squashfs-sysupgrade.bin via U-Boot:<br />(An attempt of flashing openwrt-ramips-rt305x-wnce2001-squashfs-factory-worldwide.bin results in &quot;raspi_read: from:b0000 len:40 Bad Magic Number,1B21B1B4&quot; in U-Boot).</p><br /><br /><p>U-Boot 1.1.3 (Jul&nbsp; 2 2010 - 09:49:13)</p><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB<br />relocate_code Pointer at: 81fb4000<br />spi_wait_nsec: 3e<br />spi deice id: c2 20 16 c2 20 (2016c220)<br />find flash: mx25l3205d<br />raspi_read: from:30000 len:1000<br />raspi_read: from:30000 len:1000<br />============================================<br />Ralink UBoot Version: 3.3<br />--------------------------------------------<br />ASIC 3052_MP2 (Port5&lt;-&gt;None)<br />DRAM component: 256 Mbits SDR<br />DRAM bus: 16 bit<br />Total memory: 32 MBytes<br />Flash component: SPI Flash<br />Date:Jul&nbsp; 2 2010&nbsp; Time:09:49:13<br />Cameo Version: v1.00 Build:07<br />Module Name: Netgear WNCE-2001<br />============================================<br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384</p><p> ##### The CPU freq = 384 MHZ ####</p><p>SDRAM bus set to 16 bit<br /> SDRAM size =32 Mbytes</p><p>Please choose the operation:<br />&nbsp; &nbsp;0: Don&#039;t check the image&#039;s checksum.<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.</p><p>You choosed 3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0<br />raspi_read: from:a0000 len:50<br />raspi_read: from:b0000 len:0</p><p>3: System Boot system code via Flash.<br />## Booting image at bf0b0000 ...<br />raspi_read: from:b0000 len:40<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-3.10.49<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2014-10-01&nbsp; 14:34:54 UTC<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 1054668 Bytes =&nbsp; 1 MB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />raspi_read: from:b0040 len:1017cc<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 32</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r42625) ) #3 Wed Oct 1 16:33:08 CEST 2014<br />[&nbsp; &nbsp; 0.000000] SoC Type: Ralink RT3052 id:1 rev:3<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] MIPS: machine is Netgear WNCE2001<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x01ffffff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,115200 rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00049865<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00049865<br />[&nbsp; &nbsp; 0.000000] Memory: 29156k/32768k available (2284k kernel code, 3612k reserved, 574k data, 212k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:256<br />[&nbsp; &nbsp; 0.000000] CPU Clock: 384MHz<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 255.59 BogoMIPS (lpj=1277952)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] pinctrl core: initialized pinctrl subsystem<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.130000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.140000] rt2880_gpio 10000600.gpio: registering 24 gpios<br />[&nbsp; &nbsp; 0.140000] rt2880_gpio 10000600.gpio: registering 24 irq handlers<br />[&nbsp; &nbsp; 0.150000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.160000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.170000] TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.180000] TCP: Hash tables configured (established 512 bind 512)<br />[&nbsp; &nbsp; 0.190000] TCP: reno registered<br />[&nbsp; &nbsp; 0.190000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.200000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.200000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.210000] rt-timer 10000100.timer: maximum frequncy is 7812Hz<br />[&nbsp; &nbsp; 0.260000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.260000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.270000] msgmni has been set to 56<br />[&nbsp; &nbsp; 0.280000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.280000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.290000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.310000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20) is a 16550A<br />[&nbsp; &nbsp; 0.320000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.320000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.340000] m25p80 spi32766.0: mx25l3205d (4096 Kbytes)<br />[&nbsp; &nbsp; 0.350000] 7 ofpart partitions found on MTD device spi32766.0<br />[&nbsp; &nbsp; 0.350000] Creating 7 MTD partitions on &quot;spi32766.0&quot;:<br />[&nbsp; &nbsp; 0.360000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.370000] 0x000000030000-0x000000040000 : &quot;factory&quot;<br />[&nbsp; &nbsp; 0.380000] 0x000000040000-0x000000060000 : &quot;config&quot;<br />[&nbsp; &nbsp; 0.380000] 0x000000060000-0x000000090000 : &quot;language&quot;<br />[&nbsp; &nbsp; 0.390000] 0x000000090000-0x0000000a0000 : &quot;pot&quot;<br />[&nbsp; &nbsp; 0.400000] 0x0000000a0000-0x0000000b0000 : &quot;checksum&quot;<br />[&nbsp; &nbsp; 0.410000] 0x0000000b0000-0x000000400000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.420000] 0x0000001b180c-0x000000400000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.420000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.440000] mtd: device 7 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.450000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x3d0000, len=0x30000<br />[&nbsp; &nbsp; 0.450000] 0x0000003d0000-0x000000400000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.470000] eth0: done loading<br />[&nbsp; &nbsp; 0.480000] rt2880_wdt 10000120.watchdog: Initialized<br />[&nbsp; &nbsp; 0.490000] TCP: cubic registered<br />[&nbsp; &nbsp; 0.490000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.490000] Bridge firewalling registered<br />[&nbsp; &nbsp; 0.500000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.520000] VFS: Mounted root (squashfs filesystem) readonly on device 31:7.<br />[&nbsp; &nbsp; 0.530000] Freeing unused kernel memory: 212K (802cb000 - 80300000)<br />procd: Console is alive<br />procd: - watchdog -<br />[&nbsp; &nbsp; 5.400000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 5.410000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 5.420000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 5.430000] dwc_otg: version 2.72a 24-JUN-2008<br />[&nbsp; &nbsp; 5.440000] leds-gpio gpio-leds.3: pins are not configured from the driver<br />procd: - preinit -<br />Board is WNCE2001, updating checksum partition...<br />Checksum is already zero, nothing to do.<br />ifconfig: SIOCSIFFLAGS: Cannot assign requested address<br />sendto(): Network is unreachable<br />Press the [f] key and hit [enter] to enter failsafe mode<br />Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level<br />jffs2 is not ready - marker found<br />ifconfig: SIOCSIFFLAGS: Cannot assign requested address<br />procd: - early -<br />procd: - watchdog -<br />procd: - ubus -<br />procd: - init -<br />Please press Enter to activate this console.<br />[&nbsp; &nbsp;12.250000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;12.270000] nf_conntrack version 0.5.0 (458 buckets, 1832 max)<br />[&nbsp; &nbsp;12.290000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.310000] Loading modules backported from Linux version master-2014-05-22-0-gf2032ea<br />[&nbsp; &nbsp;12.320000] Backport generated by backports.git backports-20140320-37-g5c33da0<br />[&nbsp; &nbsp;12.340000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.410000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;12.460000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;12.460000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;12.470000] cfg80211:&nbsp; DFS Master region: unset<br />[&nbsp; &nbsp;12.470000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;12.480000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;12.490000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;12.500000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;12.510000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;12.510000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;12.520000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;12.530000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;12.540000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)<br />[&nbsp; &nbsp;12.630000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;12.640000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;12.690000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 2872, rev 0200 detected<br />[&nbsp; &nbsp;12.700000] ieee80211 phy0: rt2800_init_eeprom: Error - Invalid RF chipset 0x000a detected<br />[&nbsp; &nbsp;12.700000] ieee80211 phy0: rt2x00lib_probe_dev: Error - Failed to allocate device<br />[&nbsp; &nbsp;12.710000] ------------[ cut here ]------------<br />[&nbsp; &nbsp;12.720000] WARNING: at mm/vmalloc.c:1482 release_firmware+0x58/0x8c()<br />[&nbsp; &nbsp;12.720000] Trying to vfree() bad address (80d74600)<br />[&nbsp; &nbsp;12.730000] Modules linked in: rt2800soc(+) rt2800mmio rt2800lib pppoe ppp_async iptable_nat rt2x00soc rt2x00mmio rt2x00lib pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv4 mac80211 ipt_MASQUERADE cfg80211 xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT slhc nf_nat_irc nf_nat_ftp nf_nat nf_defrag_ipv4 nf_conntrack_irc nf_conntrack_ftp iptable_raw iptable_mangle iptable_filter ipt_REJECT ip_tables crc_itu_t crc_ccitt compat ledtrig_usbdev ip6t_REJECT ip6table_raw ip6table_mangle ip6table_filter ip6_tables x_tables nf_conntrack_ipv6 nf_conntrack nf_defrag_ipv6 ipv6 eeprom_93cx6 arc4 crypto_blkcipher leds_gpio dwc_otg gpio_button_hotplug usbcore nls_base usb_common<br />[&nbsp; &nbsp;12.790000] CPU: 0 PID: 510 Comm: kmodloader Not tainted 3.10.49 #3<br />[&nbsp; &nbsp;12.800000] Stack : 00000000 00000000 00000000 00000000 8032afbe 00000037 81918e38 80320000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 802789ac 802bab73 000001fe 80323820 81918e38 80320000 00000000 00000016<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00000124 8021b168 00000003 801836c4 8027e76c 80320000 8027a004 81b77bcc<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00000000 00000000 00000000 00000000 00000000 00000000 00000000 81b77b58<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br />[&nbsp; &nbsp;12.840000] Call Trace:<br />[&nbsp; &nbsp;12.840000] [&lt;801c077c&gt;] show_stack+0x48/0x70<br />[&nbsp; &nbsp;12.840000] [&lt;8022b98c&gt;] warn_slowpath_common+0x78/0xa8<br />[&nbsp; &nbsp;12.850000] [&lt;8022b9e8&gt;] warn_slowpath_fmt+0x2c/0x38<br />[&nbsp; &nbsp;12.850000] [&lt;8019d278&gt;] release_firmware+0x58/0x8c<br />[&nbsp; &nbsp;12.860000] [&lt;80d062bc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]<br />[&nbsp; &nbsp;12.870000] [&lt;80d01848&gt;] rt2x00lib_probe_dev+0x72c/0x7c8 [rt2x00lib]<br />[&nbsp; &nbsp;12.870000] [&lt;80d0b198&gt;] rt2x00soc_probe+0x15c/0x1b0 [rt2x00soc]<br />[&nbsp; &nbsp;12.880000] [&lt;800bed50&gt;] driver_probe_device+0xd8/0x22c<br />[&nbsp; &nbsp;12.880000] [&lt;8003250c&gt;] __driver_attach+0x7c/0xb4<br />[&nbsp; &nbsp;12.890000] [&lt;8007d6d8&gt;] bus_for_each_dev+0x98/0xa8<br />[&nbsp; &nbsp;12.890000] [&lt;8007d3a0&gt;] bus_add_driver+0x108/0x24c<br />[&nbsp; &nbsp;12.900000] [&lt;800bef78&gt;] driver_register+0xbc/0x16c<br />[&nbsp; &nbsp;12.900000] [&lt;800b451c&gt;] do_one_initcall+0xf0/0x198<br />[&nbsp; &nbsp;12.910000] [&lt;80139a2c&gt;] load_module+0x156c/0x1b34<br />[&nbsp; &nbsp;12.910000] [&lt;80016764&gt;] SyS_init_module+0xbc/0xd4<br />[&nbsp; &nbsp;12.920000] [&lt;800065b0&gt;] stack_done+0x20/0x44<br />[&nbsp; &nbsp;12.920000]<br />[&nbsp; &nbsp;12.920000] ---[ end trace 7afa57f459e157ec ]---<br />[&nbsp; &nbsp;12.930000] Kernel bug detected[#1]:<br />[&nbsp; &nbsp;12.930000] CPU: 0 PID: 510 Comm: kmodloader Tainted: G&nbsp; &nbsp; &nbsp; &nbsp; W&nbsp; &nbsp; 3.10.49 #3<br />[&nbsp; &nbsp;12.930000] task: 81918c90 ti: 81b76000 task.ti: 81b76000<br />[&nbsp; &nbsp;12.930000] $ 0&nbsp; &nbsp;: 00000000 00000000 8101df80 00000001<br />[&nbsp; &nbsp;12.930000] $ 4&nbsp; &nbsp;: 00000000 00000000 80d07650 00000000<br />[&nbsp; &nbsp;12.930000] $ 8&nbsp; &nbsp;: 0000002d 39353466 37353165 5d206365<br />[&nbsp; &nbsp;12.930000] $12&nbsp; &nbsp;: 00000000 03bf0000 00000000 bc000000<br />[&nbsp; &nbsp;12.930000] $16&nbsp; &nbsp;: 8188b440 ffffffed 8188aac0 8188b6cc<br />[&nbsp; &nbsp;12.930000] $20&nbsp; &nbsp;: 81857210 80320000 00000000 00000016<br />[&nbsp; &nbsp;12.930000] $24&nbsp; &nbsp;: 00000003 80061e8c<br />[&nbsp; &nbsp;12.930000] $28&nbsp; &nbsp;: 81b76000 81b77c88 00000124 80d062bc<br />[&nbsp; &nbsp;12.930000] Hi&nbsp; &nbsp; : 00000000<br />[&nbsp; &nbsp;12.930000] Lo&nbsp; &nbsp; : cbd20000<br />[&nbsp; &nbsp;12.930000] epc&nbsp; &nbsp;: 8012d9a0 kfree+0x64/0x11c<br />[&nbsp; &nbsp;12.930000]&nbsp; &nbsp; &nbsp;Tainted: G&nbsp; &nbsp; &nbsp; &nbsp; W<br />[&nbsp; &nbsp;12.t2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]<br />[&nbsp; &nbsp;12.930000] Status: 1100a403 KERNEL EXL IE<br />[&nbsp; &nbsp;12.930000] Cause : 10800034<br />[&nbsp; &nbsp;12.930000] PrId&nbsp; : 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp;12.930000] Modules linked in: rt2800soc(+) rt2800mmio rt2800lib pppoe ppp_async iptable_nat rt2x00soc rt2x00mmio rt2x00lib pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv4 mac80211 ipt_MASQUERADE cfg80211 xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT slhc nf_nat_irc nf_nat_ftp nf_nat nf_defrag_ipv4 nf_conntrack_irc nf_conntrack_ftp iptable_raw iptable_mangle iptable_filter ipt_REJECT ip_tables crc_itu_t crc_ccitt compat ledtrig_usbdev ip6t_REJECT ip6table_raw ip6table_mangle ip6table_filter ip6_tables x_tables nf_conntrack_ipv6 nf_conntrack nf_defrag_ipv6 ipv6 eeprom_93cx6 arc4 crypto_blkcipher leds_gpio dwc_otg gpio_button_hotplug usbcore nls_base usb_common<br />[&nbsp; &nbsp;12.930000] Process kmodloader (pid: 510, threadinfo=81b76000, task=81918c90, tls=77501440)<br />[&nbsp; &nbsp;12.930000] Stack : 80d0683c 81b77c90 81b77ca8 8188b440 8188b440 80d01848 80d37c00 80e32fd8<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 80d06474 00000000 00000000 80d37e80 8188a120 8188b440 8188b440 81857200<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8188aac0 80e59554 81857210 80320000 00000000 00000016 00000124 80d0b198<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 80320000 800bf0b4 00000200 81b77d98 81857210 00000000 80e597c4 80330000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00000003 800bed50 00000124 80d37c00 81857210 8017e64c 00000000 81857210<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...<br />[&nbsp; &nbsp;12.930000] Call Trace:<br />[&nbsp; &nbsp;12.930000] [&lt;8012d9a0&gt;] kfree+0x64/0x11c<br />[&nbsp; &nbsp;12.930000] [&lt;80d062bc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]<br />[&nbsp; &nbsp;12.930000] [&lt;80d01848&gt;] rt2x00lib_probe_dev+0x72c/0x7c8 [rt2x00lib]<br />[&nbsp; &nbsp;12.930000] [&lt;80d0b198&gt;] rt2x00soc_probe+0x15c/0x1b0 [rt2x00soc]<br />[&nbsp; &nbsp;12.930000] [&lt;800bed50&gt;] driver_probe_device+0xd8/0x22c<br />[&nbsp; &nbsp;12.930000] [&lt;8003250c&gt;] __driver_attach+0x7c/0xb4<br />[&nbsp; &nbsp;12.930000] [&lt;8007d6d8&gt;] bus_for_each_dev+0x98/0xa8<br />[&nbsp; &nbsp;12.930000] [&lt;8007d3a0&gt;] bus_add_driver+0x108/0x24c<br />[&nbsp; &nbsp;12.930000] [&lt;800bef78&gt;] driver_register+0xbc/0x16c<br />[&nbsp; &nbsp;12.930000] [&lt;800b451c&gt;] do_one_initcall+0xf0/0x198<br />[&nbsp; &nbsp;12.930000] [&lt;80139a2c&gt;] load_module+0x156c/0x1b34<br />[&nbsp; &nbsp;12.930000] [&lt;80016764&gt;] SyS_init_module+0xbc/0xd4<br />[&nbsp; &nbsp;12.930000] [&lt;800065b0&gt;] stack_done+0x20/0x44<br />[&nbsp; &nbsp;12.930000]<br />[&nbsp; &nbsp;12.930000]<br />Code: 8c430000&nbsp; 3063c000&nbsp; 2c630001 &lt;00030336&gt; 8c450000&nbsp; 7ca503 13.210000] ---[ end trace 7afa57f459e157ed ]---<br />[&nbsp; &nbsp;22.890000] jffs2: Too few erase blocks (3)<br />procd: - init complete -</p><br /><br /><p>BusyBox v1.22.1 (2014-09-21 10:15:39 CEST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> -----------------------------------------------------<br /> BARRIER BREAKER (14.07, r42625)<br /> -----------------------------------------------------<br />&nbsp; * 1/2 oz Galliano&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Pour all ingredients into<br />&nbsp; * 4 oz cold Coffee&nbsp; &nbsp; &nbsp; &nbsp; an irish coffee mug filled<br />&nbsp; * 1 1/2 oz Dark Rum&nbsp; &nbsp; &nbsp; &nbsp;with crushed ice. Stir.<br />&nbsp; * 2 tsp. Creme de Cacao<br /> -----------------------------------------------------<br />root@OpenWrt:/# ifconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:192 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:192 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:13056 (12.7 KiB)&nbsp; TX bytes:13056 (12.7 KiB)</p><p>root@OpenWrt:/# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14684&nbsp; &nbsp; &nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp;14652&nbsp; &nbsp;0% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2304&nbsp; &nbsp; &nbsp; 2304&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp; 40&nbsp; &nbsp; &nbsp;14644&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp;14652&nbsp; &nbsp;0% /tmp/root<br />overlayfs:/tmp/root&nbsp; &nbsp; &nbsp; 14684&nbsp; &nbsp; &nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp;14652&nbsp; &nbsp;0% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />root@OpenWrt:/#</p>											<p class="post-edited">(Last edited by <strong>Fredl</strong> on 6 Jul 2015, 19:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284522">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">r3sist3nt</div>
					<div class="post-datetime">
						22 Jul 2015, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>Hey Fredl,</p><p>i ran into the same problem you did.. I also flashed chaos calmer 15.05 rc3 and now the whole root partition seems to be in the ram... Does someone know how this can be undone? When i try to flash barrier breaker back the issue still remains.. <br />You&#039;re not alone..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284529">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">DBAA</div>
					<div class="post-datetime">
						22 Jul 2015, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Normally `df -T` should show something along the lines of:</p><div class="codebox"><pre><code>Filesystem           Type       1K-blocks      Used Available Use% Mounted on
rootfs               rootfs          4608      1112      3496  24% /
/dev/root            squashfs        2304      2304         0 100% /rom
tmpfs                tmpfs          62992      1144     61848   2% /tmp
/dev/mtdblock3       jffs2           4608      1112      3496  24% /overlay
overlayfs:/overlay   overlay         4608      1112      3496  24% /
tmpfs                tmpfs            512         0       512   0% /dev</code></pre></div><p>Notice the chain rootfs -&gt; overlayfs -&gt; /dev/mtdblock3, the final one is what actually puts stuff on flash but the rest of the chain needs to be there. Each member of the chain has the same stats for 1K-blocks, used, available and Use%.</p>											<p class="post-edited">(Last edited by <strong>DBAA</strong> on 22 Jul 2015, 21:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285242">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">yoshac</div>
					<div class="post-datetime">
						28 Jul 2015, 05:39					</div>
				</div>
				<div class="post-content content">
					<p>I have the same problem, same hardware.</p><p>With the latest BB or CC images, after kernel and rootfs are flashed, there is not enough space remaining to create a jffs2 partition for rootfs_data.</p><p>dmesg shows the corresponding logs:<br />&nbsp; &nbsp;jffs2: Too few erase blocks (1)&nbsp; &nbsp;(for CC)<br />or<br />&nbsp; &nbsp;jffs2: Too few erase blocks (3)&nbsp; &nbsp;(for BB)</p><p>Without a rootfs_data jffs2 partition, there is no persistent storage for the overlay filesystem to use, so a rams is used instead. That&#039;s why the config gets erased at every reboot.</p><p>To confirm, here&#039;s the /proc/mtd map from installing openwrt-15.05-rc3-ramips-rt305x-wnce2001-squashfs-sysupgrade.bin</p><p>root@OpenWrt:/# cat /proc/mtd <br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00030000 00010000 &quot;u-boot&quot;<br />mtd1: 00010000 00010000 &quot;factory&quot;<br />mtd2: 00020000 00010000 &quot;config&quot;<br />mtd3: 00030000 00010000 &quot;language&quot;<br />mtd4: 00010000 00010000 &quot;pot&quot;<br />mtd5: 00010000 00010000 &quot;checksum&quot;<br />mtd6: 00350000 00010000 &quot;firmware&quot;<br />mtd7: 00116f1b 00010000 &quot;kernel&quot;<br />mtd8: 002390e5 00010000 &quot;rootfs&quot;<br />mtd9: 00010000 00010000 &quot;rootfs_data&quot;</p><p>You can see that there is only a single 64KB block available (0x10000 bytes) on CC.</p><p>(and your BB map above shows 0x30000 bytes, still too small for a jffs2)</p><br /><p>So basically, both the currently released builds for WNCE2001 aren&#039;t usable with its 4MB flash.&nbsp; <br />I wonder how long this has been broken?</p><p>What we really need is an older build, before things got bloated out, or to build a new image with smaller kernel and rootfs.</p><p>Unfortunately, I don&#039;t have one.&nbsp; </p><p>But if you still have your original working &#039;factory&#039; bin file, you can force the WNCE2001 into recovery mode by doing:</p><p>dd if=/dev/zero of=/dev/mtd5<br />reboot -f</p><p>then set your local PC&#039;s IP to static 192.168.1.3 and sftp the replacement file in binary mode to 192.168.1.251</p><p>(and if you do have such a working image, can you share it to me please. yoshac at hotmail dot com.&nbsp; thanks)</p>											<p class="post-edited">(Last edited by <strong>yoshac</strong> on 28 Jul 2015, 08:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285615">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Fredl</div>
					<div class="post-datetime">
						30 Jul 2015, 15:02					</div>
				</div>
				<div class="post-content content">
					<p>This one definitely worked for me for half a year or so:</p><p><a href="http://downloads.openwrt.org/barrier_breaker/14.07/ramips/rt305x/openwrt-ramips-rt305x-wnce2001-squashfs-factory-worldwide.bin">http://downloads.openwrt.org/barrier_br … ldwide.bin</a></p><p>Going to CC (RC1, 2, 3) as well as going back to 14.07 however did not work. CC must have changed something in the ?partitioning, in U-Boot, or somwhere else, which does not get reverted when downgrading.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285884">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">yoshac</div>
					<div class="post-datetime">
						1 Aug 2015, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi Fredl, I just took a brand new (never been powered on, still in the package) WNCE2001 and booted it with its default 1.0.0.21 firmware.&nbsp; Then I installed the file you linked to.</p><p>The results are exactly the same.</p><p>dmesg shows too few erase blocks to create mtd8, and the partition map confirms that image is also too large to run in the 4MB flash.</p><p>[&nbsp; &nbsp;23.610000] jffs2: Too few erase blocks (3)</p><p>root@OpenWrt:/# cat /proc/mtd <br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00030000 00010000 &quot;u-boot&quot;<br />mtd1: 00010000 00010000 &quot;factory&quot;<br />mtd2: 00020000 00010000 &quot;config&quot;<br />mtd3: 00030000 00010000 &quot;language&quot;<br />mtd4: 00010000 00010000 &quot;pot&quot;<br />mtd5: 00010000 00010000 &quot;checksum&quot;<br />mtd6: 00350000 00010000 &quot;firmware&quot;<br />mtd7: 0024e7f4 00010000 &quot;rootfs&quot;<br />mtd8: 00030000 00010000 &quot;rootfs_data&quot;</p><p>Maybe you previously had a pre-release image, a -RC or something for BB ?</p><p>Anyway, it seems none of the currently available images on openwrt.org are going to get where we want to be, so I am building my own...</p><p>To confirm this is being caused by squashfs/kernel too large, I built a default image with LuCI disabled.&nbsp; That image works fine, and gives me a ~500KB jffs2 filesystem on mtd8</p><p>root@OpenWrt:/# cat /proc/mtd <br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00030000 00010000 &quot;u-boot&quot;<br />mtd1: 00010000 00010000 &quot;factory&quot;<br />mtd2: 00020000 00010000 &quot;config&quot;<br />mtd3: 00030000 00010000 &quot;language&quot;<br />mtd4: 00010000 00010000 &quot;pot&quot;<br />mtd5: 00010000 00010000 &quot;checksum&quot;<br />mtd6: 00350000 00010000 &quot;firmware&quot;<br />mtd7: 002599eb 00010000 &quot;rootfs&quot;<br />mtd8: 00090000 00010000 &quot;rootfs_data&quot;<br />root@OpenWrt:/# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 576.0K&nbsp; &nbsp; 208.0K&nbsp; &nbsp; 368.0K&nbsp; 36% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8M&nbsp; &nbsp; &nbsp; 1.8M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.4M&nbsp; &nbsp; &nbsp;60.0K&nbsp; &nbsp; &nbsp;14.3M&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.4M&nbsp; &nbsp; &nbsp;28.0K&nbsp; &nbsp; &nbsp;14.4M&nbsp; &nbsp;0% /tmp/root<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 576.0K&nbsp; &nbsp; 208.0K&nbsp; &nbsp; 368.0K&nbsp; 36% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; 576.0K&nbsp; &nbsp; 208.0K&nbsp; &nbsp; 368.0K&nbsp; 36% /</p><br /><p>So the trick will be to build an image with enough junk stripped out, but still allow LuCI to be used.</p><p>I&#039;ll start by dropping the USB related modules, as those are pretty large and we don&#039;t have USB on these devices.</p><p>Will post back with results later this weekend.</p>											<p class="post-edited">(Last edited by <strong>yoshac</strong> on 1 Aug 2015, 16:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286056">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">yoshac</div>
					<div class="post-datetime">
						3 Aug 2015, 07:04					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve posted CC binaries and the build config file here:</p><p><a href="https://www.dropbox.com/sh/o8u162p87oqf5o6/AAAZPHcSDxmDanUDRImlv1Daa?dl=0">https://www.dropbox.com/sh/o8u162p87oqf … v1Daa?dl=0</a></p><p>Please post back here if you have any success with it... or email to yoshac at hotmail dot com</p><p>To free up enough usable space on the tiny 4MB flash, I had to cut fairly deep into the default packages. These images have no PPP, USB, ISDN, 3G and IPv6, but do have LuCI enabled.</p><p>I did a quick test of the &#039;worldwide&#039; image, with wifi to lan bridging set up via the web interface - everything worked fine for IPv4, it shows 640KB size for the overlay filesystem and the config was persistent across a reboot.</p><p>Hey, 640KB should be enough for anyone, right?&nbsp; ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289069">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">r3sist3nt</div>
					<div class="post-datetime">
						24 Aug 2015, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>Damn, thanks!!!!!!! I tested it and it works!! There are no issues so far and the root is now finally on the EEPROM <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293473">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">jackalope</div>
					<div class="post-datetime">
						25 Sep 2015, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>hello guys<br />a little help... how can i install openwrt on wnce2001?<br />do you have an howto?<br />i tried to search but without results...<br />thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335783">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						24 Aug 2016, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>hi guys!<br />Could you please Tell me,&nbsp; has a new version of firmware for the device already released? Firmware from the repository is not suitable, because of the settings, which are not savable. After reboot all the settings are resetiing to the factory defaults and free memory is displayed incorrectly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335800">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						24 Aug 2016, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Use <strong>Image Generator</strong> to create a smaller image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335837">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						24 Aug 2016, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>Image Generator build a standard image, with the problem (not saving settings after reboot, unrealistically large amount of free memory on a flash, etc). <strong>yoshac</strong> create a work image, but this version didnt update on new version OpenWRT and didnt work OPKG (Signature check failed. opkg_download: Failed to download)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335872">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						25 Aug 2016, 10:09					</div>
				</div>
				<div class="post-content content">
					<p>Correct, to a point.</p><p>IG is capable of creating an image with modules and packages <strong>included</strong> and <strong>excluded</strong> from the device profile <strong>and</strong> command line.</p><p>An image, without PPP, IPv6 and web interface = ~2.3MB</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335900">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						25 Aug 2016, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>Sorry Max, it looks like we do not get each other.<br />The image size is not a problem at all.<br />The one I have (an image which is 3.2Mb) is installed properly.<br />However after installation I see: &quot;there are 14 Mb free ROM space&quot;, but I have only 4Mb chip.<br />Therefore it seems to be using router RAM instead of the flash memory and no settings are saved after reboot.<br />I hope that clarifies everything</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335903">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						25 Aug 2016, 16:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>evgeneys wrote:</cite><blockquote><p>... and no settings are saved after reboot.</p></blockquote></div><p>An indication that the <em>jffs2</em> is <strong>full</strong>.</p><p>Output of <em>df -h</em>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335912">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						25 Aug 2016, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>Output :<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                   14.2M     72.0K     14.1M   0% /
/dev/root                 2.3M      2.3M         0 100% /rom
tmpfs                    14.2M    504.0K     13.7M   3% /tmp
tmpfs                    14.2M     72.0K     14.1M   0% /tmp/root
overlayfs:/tmp/root      14.2M     72.0K     14.1M   0% /
tmpfs                   512.0K         0    512.0K   0% /dev</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335914">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						25 Aug 2016, 17:29					</div>
				</div>
				<div class="post-content content">
					<p>Odd.<br />Output of <em>dmesg</em> (directly after booting)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335922">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						25 Aug 2016, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>Output :<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
[    0.000000] Linux version 3.18.23 (buildbot@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r47269) ) #1 Sun Jan 31 14:39:33 CET 2016
[    0.000000] SoC Type: Ralink RT3052 id:1 rev:3
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001964c (MIPS 24KEc)
[    0.000000] MIPS: machine is Netgear WNCE2001
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x01ffffff]
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 802f6290, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8192 pages, LIFO batch:0
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line: console=ttyS0,115200 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Writing ErrCtl register=00064210
[    0.000000] Readback ErrCtl register=00064210
[    0.000000] Memory: 28948K/32768K available (2508K kernel code, 119K rwdata, 492K rodata, 136K init, 185K bss, 3820K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 384MHz
[    0.000000] clocksource_of_init: no matching clocksources found
[    0.070000] Calibrating delay loop... 255.59 BogoMIPS (lpj=1277952)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] pinctrl core: initialized pinctrl subsystem
[    0.100000] NET: Registered protocol family 16
[    0.110000] rt2880-pinmux pinctrl: try to register 52 pins ...
[    0.110000] pinctrl core: registered pin 0 (io0) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 1 (io1) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 2 (io2) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 3 (io3) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 4 (io4) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 5 (io5) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 6 (io6) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 7 (io7) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 8 (io8) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 9 (io9) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 10 (io10) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 11 (io11) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 12 (io12) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 13 (io13) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 14 (io14) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 15 (io15) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 16 (io16) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 17 (io17) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 18 (io18) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 19 (io19) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 20 (io20) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 21 (io21) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 22 (io22) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 23 (io23) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 24 (io24) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 25 (io25) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 26 (io26) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 27 (io27) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 28 (io28) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 29 (io29) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 30 (io30) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 31 (io31) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 32 (io32) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 33 (io33) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 34 (io34) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 35 (io35) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 36 (io36) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 37 (io37) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 38 (io38) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 39 (io39) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 40 (io40) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 41 (io41) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 42 (io42) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 43 (io43) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 44 (io44) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 45 (io45) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 46 (io46) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 47 (io47) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 48 (io48) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 49 (io49) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 50 (io50) on rt2880-pinmux
[    0.110000] pinctrl core: registered pin 51 (io51) on rt2880-pinmux
[    0.110000] pinctrl core: add 6 pinmux maps
[    0.110000] rt2880-pinmux pinctrl: found group selector 7 for sdram
[    0.110000] rt2880-pinmux pinctrl: found group selector 0 for i2c
[    0.110000] rt2880-pinmux pinctrl: found group selector 4 for jtag
[    0.110000] rt2880-pinmux pinctrl: found group selector 6 for rgmii
[    0.110000] rt2880-pinmux pinctrl: found group selector 5 for mdio
[    0.110000] rt2880-pinmux pinctrl: found group selector 2 for uartf
[    0.110000] rt2880-pinmux pinctrl: request pin 24 (io24) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 25 (io25) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 26 (io26) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 27 (io27) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 28 (io28) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 29 (io29) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 30 (io30) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 31 (io31) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 32 (io32) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 33 (io33) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 34 (io34) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 35 (io35) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 36 (io36) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 37 (io37) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 38 (io38) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 39 (io39) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 1 (io1) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 2 (io2) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 17 (io17) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 18 (io18) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 19 (io19) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 20 (io20) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 21 (io21) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 40 (io40) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 41 (io41) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 42 (io42) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 43 (io43) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 44 (io44) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 45 (io45) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 46 (io46) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 47 (io47) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 48 (io48) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 49 (io49) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 50 (io50) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 51 (io51) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 22 (io22) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 23 (io23) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 7 (io7) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 8 (io8) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 9 (io9) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 10 (io10) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 11 (io11) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 12 (io12) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 13 (io13) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: request pin 14 (io14) for pinctrl
[    0.110000] rt2880-pinmux pinctrl: failed to lookup the sleep state
[    0.130000] rt2880_gpio 10000600.gpio: registering 24 gpios
[    0.130000] rt2880_gpio 10000600.gpio: registering 24 irq handlers
[    0.140000] Switched to clocksource MIPS
[    0.140000] NET: Registered protocol family 2
[    0.150000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.150000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.160000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.170000] TCP: reno registered
[    0.170000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.180000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.180000] NET: Registered protocol family 1
[    0.190000] rt-timer 10000100.timer: maximum frequency is 7812Hz
[    0.200000] alarmtimer alarmtimer: no of_node; not parsing pinctrl DT
[    0.200000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.250000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.250000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.260000] msgmni has been set to 56
[    0.280000] io scheduler noop registered
[    0.280000] io scheduler deadline registered (default)
[    0.290000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.300000] serial8250 serial8250: no of_node; not parsing pinctrl DT
[    0.300000] pinctrl core: add 1 pinmux maps
[    0.300000] rt2880-pinmux pinctrl: found group selector 3 for uartlite
[    0.300000] rt2880-pinmux pinctrl: request pin 15 (io15) for 10000c00.uartlite
[    0.300000] rt2880-pinmux pinctrl: request pin 16 (io16) for 10000c00.uartlite
[    0.300000] console [ttyS0] disabled
[    0.310000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20, base_baud = 8000000) is a 16550A
[    0.310000] console [ttyS0] enabled
[    0.320000] bootconsole [early0] disabled
[    0.330000] pinctrl core: add 1 pinmux maps
[    0.330000] rt2880-pinmux pinctrl: found group selector 1 for spi
[    0.330000] rt2880-pinmux pinctrl: request pin 3 (io3) for 10000b00.spi
[    0.330000] rt2880-pinmux pinctrl: request pin 4 (io4) for 10000b00.spi
[    0.330000] rt2880-pinmux pinctrl: request pin 5 (io5) for 10000b00.spi
[    0.330000] rt2880-pinmux pinctrl: request pin 6 (io6) for 10000b00.spi
[    0.350000] m25p80 spi32766.0: mx25l3205d (4096 Kbytes)
[    0.350000] 7 ofpart partitions found on MTD device spi32766.0
[    0.360000] Creating 7 MTD partitions on &quot;spi32766.0&quot;:
[    0.360000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.370000] 0x000000030000-0x000000040000 : &quot;factory&quot;
[    0.380000] 0x000000040000-0x000000060000 : &quot;config&quot;
[    0.380000] 0x000000060000-0x000000090000 : &quot;language&quot;
[    0.390000] 0x000000090000-0x0000000a0000 : &quot;pot&quot;
[    0.400000] 0x0000000a0000-0x0000000b0000 : &quot;checksum&quot;
[    0.400000] 0x0000000b0000-0x000000400000 : &quot;firmware&quot;
[    0.450000] 2 uimage-fw partitions found on MTD device firmware
[    0.450000] 0x0000000b0000-0x0000001c2a9f : &quot;kernel&quot;
[    0.460000] 0x0000001c2a9f-0x000000400000 : &quot;rootfs&quot;
[    0.470000] mtd: device 8 (rootfs) set to be root filesystem
[    0.470000] 1 squashfs-split partitions found on MTD device rootfs
[    0.480000] 0x0000003f0000-0x000000400000 : &quot;rootfs_data&quot;
[    0.490000] ralink_soc_eth 10100000.ethernet eth0: ralink at 0xb0100000, irq 5
[    0.500000] rt2880_wdt 10000120.watchdog: Initialized
[    0.510000] TCP: cubic registered
[    0.510000] NET: Registered protocol family 17
[    0.520000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    0.530000] Bridge firewalling registered
[    0.530000] 8021q: 802.1Q VLAN Support v1.8
[    0.570000] VFS: Mounted root (squashfs filesystem) readonly on device 31:8.
[    0.580000] Freeing unused kernel memory: 136K (8030e000 - 80330000)
[    3.350000] init: Console is alive
[    3.360000] init: - watchdog -
[    6.170000] usbcore: registered new interface driver usbfs
[    6.180000] usbcore: registered new interface driver hub
[    6.180000] usbcore: registered new device driver usb
[    6.190000] rt2880-pinmux pinctrl: request pin 10 (io10) for pio:10
[    6.190000] rt2880-pinmux pinctrl: request pin 0 (io0) for pio:0
[    6.190000] rt2880-pinmux pinctrl: request pin 11 (io11) for pio:11
[    6.190000] rt2880-pinmux pinctrl: request pin 7 (io7) for pio:7
[    6.200000] rt2880-pinmux pinctrl: request pin 8 (io8) for pio:8
[    6.200000] rt2880-pinmux pinctrl: request pin 9 (io9) for pio:9
[    6.200000] rt2880-pinmux pinctrl: request pin 12 (io12) for pio:12
[    6.200000] rt2880-pinmux pinctrl: request pin 13 (io13) for pio:13
[    6.490000] init: - preinit -
[    8.000000] 8021q: adding VLAN 0 to HW filter on device eth0
[    8.170000] random: procd urandom read with 12 bits of entropy available
[   11.570000] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[   11.620000] procd: - early -
[   11.620000] procd: - watchdog -
[   12.780000] procd: - ubus -
[   13.790000] procd: - init -
[   15.010000] NET: Registered protocol family 10
[   15.020000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   15.050000] Loading modules backported from Linux version master-2015-03-09-0-g141f155
[   15.060000] Backport generated by backports.git backports-20150129-0-gdd4a670
[   15.070000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   15.100000] nf_conntrack version 0.5.0 (454 buckets, 1816 max)
[   15.160000] xt_time: kernel timezone is -0000
[   15.220000] cfg80211: Calling CRDA to update world regulatory domain
[   15.270000] cfg80211: World regulatory domain updated:
[   15.270000] cfg80211:  DFS Master region: unset
[   15.270000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   15.280000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   15.290000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz, 92000 KHz AUTO), (N/A, 2000 mBm), (N/A)
[   15.300000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   15.310000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (N/A)
[   15.320000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   15.330000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   15.340000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   15.350000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   15.420000] PPP generic driver version 2.4.2
[   15.430000] NET: Registered protocol family 24
[   15.500000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 2872, rev 0200 detected
[   15.500000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0008 detected
[   15.510000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   26.790000] jffs2: Too few erase blocks (1)
[   29.140000] 8021q: adding VLAN 0 to HW filter on device eth0
[   29.160000] device eth0 entered promiscuous mode
[   29.160000] br-lan: port 1(eth0) entered forwarding state
[   29.170000] br-lan: port 1(eth0) entered forwarding state
[   31.170000] br-lan: port 1(eth0) entered forwarding state
[   36.050000] rt305x-esw 10110000.esw: link changed 0x11
[   56.900000] rt305x-esw 10110000.esw: link changed 0x11
[   62.320000] rt305x-esw 10110000.esw: link changed 0x11
[   64.400000] rt305x-esw 10110000.esw: link changed 0x11
[   72.380000] rt305x-esw 10110000.esw: link changed 0x11
[   74.190000] random: nonblocking pool is initialized
[   80.240000] nf_conntrack: automatic helper assignment is deprecated and it will be removed soon. Use the iptables CT target to attach helpers instead.
[   81.310000] rt305x-esw 10110000.esw: link changed 0x11
[   97.010000] rt305x-esw 10110000.esw: link changed 0x11
[  108.990000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[  146.760000] rt305x-esw 10110000.esw: link changed 0x05
[  184.300000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[  186.760000] wlan0: authenticate with ec:cb:30:de:2e:b8
[  186.840000] wlan0: send auth to ec:cb:30:de:2e:b8 (try 1/3)
[  186.840000] wlan0: authenticated
[  186.860000] wlan0: associate with ec:cb:30:de:2e:b8 (try 1/3)
[  186.870000] wlan0: RX AssocResp from ec:cb:30:de:2e:b8 (capab=0x431 status=0 aid=1)
[  186.870000] wlan0: associated
[  186.880000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335924">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						25 Aug 2016, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi evgeneys,</p><p>the followiong looks suspicious:</p><p>[&nbsp; &nbsp;11.570000] mount_root: jffs2 not ready yet, using temporary tmpfs overlay</p><p>Not sure what the root cause is though...</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335933">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">evgeneys</div>
					<div class="post-datetime">
						25 Aug 2016, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello Friend!<br /> I also noticed that line in the log file. <br />Guess that there is a problem, but I got no idea how to get rid off this and get the working result member Yoshac:<br />  rootfs 576.0K 208.0K 368.0K 36% /<br />/ Dev / root 1.8M 1.8M 0 100% / rom<br />tmpfs 14.4M 60.0K 14.3M 0% / tmp<br />tmpfs 14.4M 28.0K 14.4M 0% / tmp / root<br />tmpfs 512.0K 0 512.0K 0% / dev<br />/ Dev / mtdblock8 576.0K 208.0K 368.0K 36% / overlay<br />overlayfs: / overlay 576.0K 208.0K 368.0K 36% /<br />Does anyone know how to?</p>											<p class="post-edited">(Last edited by <strong>evgeneys</strong> on 25 Aug 2016, 20:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335950">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						25 Aug 2016, 23:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>evgeneys wrote:</cite><blockquote><p>Hello Friend!<br /> I also noticed that line in the log file. <br />Guess that there is a problem, but I got no idea how to get rid off this and get the working result member Yoshac:<br />  rootfs 576.0K 208.0K 368.0K 36% /<br />/ Dev / root 1.8M 1.8M 0 100% / rom<br />tmpfs 14.4M 60.0K 14.3M 0% / tmp<br />tmpfs 14.4M 28.0K 14.4M 0% / tmp / root<br />tmpfs 512.0K 0 512.0K 0% / dev<br />/ Dev / mtdblock8 576.0K 208.0K 368.0K 36% / overlay<br />overlayfs: / overlay 576.0K 208.0K 368.0K 36% /<br />Does anyone know how to?</p></blockquote></div><p>Comparing this with your latest df I see the rom partition grew from 1.8M to 2.3M or pretty much the 0.5M you had available for overlay on the old firmware. If I am allowed to guess all the &quot;hidden&quot; partitions like the kernel partition eat up all the rest of the 4M so that with you new new firmware you simply have no room for the overlay, so you would need to put /rom on a strict diet, and maybe in case image builder does not allow enough trimming you might need to build your own firmware image from scratch (then you have more control over what is included). What does:<br />cat /proc/mtd<br />return on your machine? Please also post the output of:<br />df -h<br />and<br />cat /proc/mtd<br />from after a fresh reboot of the router.</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>