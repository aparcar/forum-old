<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRTSL54GS (WL-500g) versus WRT54G + NAS</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p51824">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mx-5</div>
					<div class="post-datetime">
						4 Jul 2007, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone comment on the pros / cons of using a WRT-based router with USB, such as the WRTSL54GS and the WL-500g line, versus a WRT54G and offloading the storage capability to a NAS device?</p><p>I currently have a WRTSL54GS and an external USB hard drive, but the RAID 1 functionality and affordability in something like the HP Media Vault or WD My Book World Edition has me interested in picking one up.</p><p>My main usage are:<br />file server (samba)<br />web server (lighttpd)<br />ctorrent w/ screen</p><p>I&#039;d love to get mt-daapd / uPnP working as well, but I&#039;ve given up on mt-daapd because I need Chinese characters in my ID3 tags to show up in my clients, and it looks like 0.2.4 in the repository doesn&#039;t support it, and the WRTSL54GS doesn&#039;t have the dependencies to install the nightly Firefly releases which apparently have more language support.&nbsp; And I can&#039;t get gMediaServer and other uPnP servers to work at this time.&nbsp; So I&#039;m also thinking a NAS device that can share multimedia can offload that capability from the WRT to the NAS.</p><p>Thoughts?</p>											<p class="post-edited">(Last edited by <strong>mx-5</strong> on 4 Jul 2007, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52187">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">500gx</div>
					<div class="post-datetime">
						12 Jul 2007, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>My 2 cents: current NAS devices are in general going to be a lot faster then USB attached storage on WRT devices. A lot of them already bring lots of functionality similar to the OpenWRT media capabilities. Some already sport 1GB LAN interfaces. Most WRT with USB support do indeed support USB 2.0 nevertheless they don&#039;t even get close to using the full bandwidth.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53315">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Arnaud</div>
					<div class="post-datetime">
						3 Aug 2007, 07:45					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m very happy with my RAID solution build around by WL-500Gp. I use two 160GB USB drives both setup as a mirror.</p><p>My router now acts as a File Server, Print Server (cups), Firewall, Monitor System and Hotspot and I still have resources left. </p><p>I also remounted /usr, /tmp and the router got a real nice performance boost working with the external disks instead of the slow flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53338">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">macsat</div>
					<div class="post-datetime">
						3 Aug 2007, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>Are you saying that I can expect a lot better performance if I remount /usr and /tmp to use my attached disks compared to FLASH / RAM ?</p><p>I have more or less the same setup as you (except for the mirroring - no backups needed here ;-) ) and everything works, except that SAMBA isnt the fastest in the world :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53351">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Arnaud</div>
					<div class="post-datetime">
						3 Aug 2007, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>That is of course depending on the type of program I use, but use yes I experienced some performance boost. For example already with installing packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59548">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zimm0who0net</div>
					<div class="post-datetime">
						26 Nov 2007, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>Arnaud, how did you setup mirroring on your Asus?&nbsp; It&#039;s my understanding that the dm package is not quite ready for prime time.&nbsp; Did you setup mirroring some other way (like an rsync cron job?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59569">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						27 Nov 2007, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>I am very down on this combo lately.</p><p>The NAS functions in any of these routers are quite slow.</p><p>I can find even very basic low-power PC for free, load with Linux, run Samba and it&#039;s much faster for NAS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59577">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Arnaud</div>
					<div class="post-datetime">
						27 Nov 2007, 08:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi zimm0who0net,</p><p>I installed two USB harddisks and added mdadm as a package to set up a mirror. I got mdadm 1.12.0 working on Kamikaze 7.07. If you want I can send you the mdadm sources and package Makefile. You also have to run the kernel make to add md support to the kernel. It says somewhere in the OpenWRT docs how to run the kernel make. If you can&#039;t find it I can look it up for you.</p><p>If I&#039;m forgetting something please let me know because it&#039;s some time ago that I&#039;ve set it up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59675">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zimm0who0net</div>
					<div class="post-datetime">
						29 Nov 2007, 00:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vincentfox wrote:</cite><blockquote><p>I am very down on this combo lately.</p><p>The NAS functions in any of these routers are quite slow.</p><p>I can find even very basic low-power PC for free, load with Linux, run Samba and it&#039;s much faster for NAS.</p></blockquote></div><p>True.&nbsp; I recently stopped backing up my desktop to my Asus router because it was taking about 7 hours to run a full backup vs. 2 hours to a local USB drive and about 3 hours to a separate PC.&nbsp; However, speed isn&#039;t everything.&nbsp; Having a PC on all the time for just file serving can be co$tly in electricity.&nbsp; 99% of what I need network storage for won&#039;t really benefit from increased speed (e.g. I keep all my photographs and mp3s on the router.&nbsp; The speed is fast enough so I wouldn&#039;t really notice any delay unless I need to move a whole lot of them at once).</p><p>Arnaud - thanks for the information.&nbsp; I&#039;d love to see your diff file for what you had to do to get mdadm to compile. (was it just the changed Makefile??)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59682">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Arnaud</div>
					<div class="post-datetime">
						29 Nov 2007, 02:44					</div>
				</div>
				<div class="post-content content">
					<p>I made no changes to the sources (1.12.0). I only created the Makefile at packages/utils/mdadm. It&#039;s then available when building the image packages. You also will have to add md support to your kernel.</p><p>BTW I use rsync to backup my home dir and that takes only a few minutes to rsync a couple of GB</p><p>The Makefile:</p><div class="codebox"><pre><code># 
# This is free software, licensed under the GNU General Public License v2.
# See /LICENSE for more information.

include $(TOPDIR)/rules.mk

PKG_NAME:=mdadm
PKG_VERSION:=1.12.0
PKG_RELEASE:=1

PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz
PKG_SOURCE_URL:=http://www.kernel.org/pub/linux/utils/raid/mdadm/
PKG_MD5SUM:=4de899ddb1ede1d2cafd183794874ce1
PKG_CAT:=zcat

PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)

include $(INCLUDE_DIR)/package.mk

define Package/mdadm
  SECTION:=utils
  CATEGORY:=Utilities
  TITLE:=Controls Linux md devices (software RAID arrays)
  DESCRIPTION:=\
    mdadm is used to create, manage, and monitor Linux MD (software RAID)\\\
    devices.  As such, it provides similar functionality to the raidtools\\\
    package.  However, mdadm is a single program, and it can perform\\\
    almost all functions without a configuration file, though a configuration\\\
    file can be used to help with some common tasks.
  URL:=http://neil.brown.name/blog/mdadm
endef

define Build/Configure
endef

define Build/Compile
    $(call Build/Compile/Default, \
        CFLAGS=&quot;$(EXTRA_CFLAGS)&quot; \
        LDFLAGS=&quot;$(EXTRA_LDFLAGS)&quot; \
    )
endef

define Package/mdadm/install
    $(INSTALL_DIR) $(1)/usr/sbin
    $(INSTALL_BIN) $(PKG_BUILD_DIR)/mdadm $(1)/usr/sbin
endef

$(eval $(call BuildPackage,mdadm))</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65616">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">buzzy</div>
					<div class="post-datetime">
						24 Mar 2008, 02:55					</div>
				</div>
				<div class="post-content content">
					<p>You are taking about compiling a kernel with raid-support. How would I do that? I don&#039;t see any option for raid in &quot;make menuconfig&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65623">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Arnaud</div>
					<div class="post-datetime">
						24 Mar 2008, 05:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi Buzzy,</p><p>By running the kernel config</p><p>This is what I quote from the manual:</p><p>&quot;If you want, you can also modify the kernel config for the selected target system. simply run &quot;make kernel_menuconfig&quot; and the build system will unpack the kernel sources (if necessary), run menuconfig inside of the kernel tree, and then copy the kernel config to target/linux/&lt;platform&gt;/config so that it is preserved over &quot;make clean&quot; calls.&quot;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>