<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Excessive frame errors on wireless</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p7885">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">evanspa1</div>
					<div class="post-datetime">
						1 Jun 2005, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using sta mode on a wrt54g v2.2. Data transfer is working ok but a bit slower than I expected.</p><p>I did an ifconfig and noticed that the number of frame errors on eth1 was high - ranging from 6% to 16% of all packets transferred!&nbsp; This could trigger numerous TCP retransmissions - explaining the lower than expected transfer rates.</p><p>Are these sort of numbers normal for wireless?&nbsp; If not what other causes could there be?&nbsp; Any suggestions would be much appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p7892">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						2 Jun 2005, 01:03					</div>
				</div>
				<div class="post-content content">
					<p>did you brake the bridge ?<br />few errors are normal</p><p>I&#039;m using sta mode, speed is 55 MBs</p><p>wj</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p7953">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">chriberg</div>
					<div class="post-datetime">
						3 Jun 2005, 10:12					</div>
				</div>
				<div class="post-content content">
					<p>Does this &quot;frame&quot; indicate the number of frame errors? This is partial dump from ifconfig for eth1. If so, I&#039;ve got quite a few myself!</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:225675 errors:0 dropped:0 overruns:0 frame:1802525<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:100556 errors:5 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:219966045 (209.7 MiB)&nbsp; TX bytes:11632211 (11.0 MiB)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8016">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wirelessjoe</div>
					<div class="post-datetime">
						5 Jun 2005, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>don&#039;t worry about 5 packets, and is this your WLAN interface ?<br />and watch for more errors, signal noise etc,&nbsp; you can use netstumbler for that.</p><p>wj</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8039">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">chriberg</div>
					<div class="post-datetime">
						6 Jun 2005, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s a full dump sans IP addresses and MACs:</p><p>root@chriberg-longrange2:/# ifconfig<br />eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr xx:xx:xx:xx:xx:xx <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING PROMISC MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:128796 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:174636 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:16952501 (16.1 MiB)&nbsp; TX bytes:192021657 (183.1 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:5 Base address:0x2000 </p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr xx:xx:xx:xx:xx:xx&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:xxx.xxx.xxx.xxx&nbsp; Bcast:xxx.xxx.xxx.xxx&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:399800 errors:0 dropped:0 overruns:0 frame:8237789<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:125504 errors:11 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:268830939 (256.3 MiB)&nbsp; TX bytes:16387948 (15.6 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 Base address:0x1000 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:1 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:76 (76.0 B)&nbsp; TX bytes:76 (76.0 B)</p><p>vlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr xx:xx:xx:xx:xx:xx&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.16.1&nbsp; Bcast:192.168.16.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:128796 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:174636 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:14634173 (13.9 MiB)&nbsp; TX bytes:192021657 (183.1 MiB)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8292">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						12 Jun 2005, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>would like to confirm this same problem in our installation. A network with a central WAP54G AP (original Linksys software) and 5 pcs WRT54G:<br />3 pcs v2 OpenWRT late 2004 snapshot and 2 pcs v2.2 OpenWRT experimental May 25 2005. One of the V2.2 connects to internet via an ADSL modem.<br />All boxes show no errors on any of their interfaces but the eth1 (wifi). On all boxes the &#039;ifconfig eth1&#039; shows a very high number of frame errors , in the order of magnitude of total traffic and sometimes by far exceeding that. All WRTs have bridging disabled and act as routers.<br />Anybody has a clue what might be causing this ??<br />I can see e.g. during a Dropbear session that a simple keyboard press initiates a series of wireless communications, as if several retransmissions would be required.<br />All radios have at least 25 dB signal to noise in their radio link.<br />Example of the &#039;ifconfig eth1&#039; from the box that connects to ADSL via vlan1:<br />eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr xx:xx:xx:xx:xx:xx:xx:xx<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr: a.b.c.d&nbsp; Bcast: e.f.g.h&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:51386 errors:0 dropped:0 overruns:0 frame:47355<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:69241 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3462681 (3.3 MiB)&nbsp; TX bytes:95909657 (91.4 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 Base address:0x1000</p><p>Saw somewhere on the net in cabled situations that frame errors are related to the CRC check on packets not giving the right result and then retransmission requests taking place. Also saw some hints on full-duplex vs. half-duplex conflicts. Cabled ethernet traffic (vlanx) in this case is full-duplex, while the radio links (eth1) are half-duplex. Does OpenWRT take care of that properly??? Any tools around to test this ??</p><p>Latest results: the setting of txpwr seems to be related to these frame errors. Going back from the 250 realm to around 75, either through &#039;wl txpwr xx&#039; or &#039;wlc eth1 txpwr xx&#039;, seems to have a positive effect on frame errors. They do not disappear but reduce in number. The wireless driver then, if set to automatic rate choice, starts to increase speed. So there may be a RF problem involved with distortion on the physical transmission level. Anybody reading this with knowledge of the Broadcom radio chip in V2 and V2.2 and how realistic these higher power settings are ?</p><p>rgds, doddel</p>											<p class="post-edited">(Last edited by <strong>doddel</strong> on 15 Jun 2005, 14:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p8570">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Alystan</div>
					<div class="post-datetime">
						21 Jun 2005, 04:47					</div>
				</div>
				<div class="post-content content">
					<p>I have the exact same problem: I get 100% frame errors on the wireless interface.</p><p>My setting is: WRT54GS with openWRT (obsolete version) running in client mode.</p><p>It was running fine for 6 months, and suddenly I got 100% frame error on the wireless interface. I did try to reduce the transmit power to around 71 mW but it didn&#039;t do anything for me.</p><p>I last tested the device in AP mode: clients could see the wireless SSID and associate. However, not one packet was getting through.</p><p>Alystan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10798">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						15 Aug 2005, 12:34					</div>
				</div>
				<div class="post-content content">
					<p>Results of continued testing:<br />set-up: <br />WAP54g access point with latest Linksys software<br />WRT54g v2 client in infra mode at 8 km distance with parabolic antennas and amplifiers. S/N ratio &gt; 30 dB. Gmode only (2).<br />software: HEAD (7-8-2005) compilation with modified wificonf.c to be able to experiment with settings. <br />problem: excessive frame errors and limitation of effective data rate to ~ 700 kbps even though indicated bit rate (&#039;wl rate&#039;) is much higher.<br />Observations:<br />frameburst and gmode protection have no significant influence on bit rate.<br />the client automatically reduces its bitrate to 2 Mbps for least bad result.</p><p>Further experiments:<br />Have used same client WRT54Gv2 but now with WRT54Gv2.2 access point with same HEAD based firmware. Just 1 meter apart and no amplifiers or special antennas.<br />Observation: when doing file transfers, using openssh sftp server, from client to AP the data rate saturates at some 1.5 Mbps, even though gmode bitrate is 54 Mbps on both sides and does now not reduce. S/N ratio &gt; 50 dB. Used 6 MB file to be sent back and forth. Once per ~10 transfers the AP box hangs up and resets itself.<br />&#039;Ifconfig eth1&#039; shows very high frame error numbers on both sides.</p><p>I think that there is a problem around these frame errors. Perhaps they don&#039;t really exist but are just the result of some software interface error but they do upset the box as with plenty of data to be sent and received it cannot cope with a massive amount of retransmissions and associated bookkeeping and intermediate storage of data.</p><p>Anybody reading this that is familiar with frame error checking in the radio link and its interface to Busybox ?</p><p>Another strange thing is that after booting the box and without yet having had any contact to another box &#039;ifconfig eth1&#039; shows 0 data transfer but already does show a number of frame errors, as if it is freely generating them by itself.</p>											<p class="post-edited">(Last edited by <strong>doddel</strong> on 15 Aug 2005, 12:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167553">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">web11</div>
					<div class="post-datetime">
						17 May 2012, 05:56					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m pretty sure this is due to packet collisions from other stations around you. My theory is it causes CRC errors and all kinds of havoc to packets so the interface sees them as Frame errors.</p><p>If you could isolate the AP and client in a place that has no other outside stations, possibly remove antennas to be sure and then do a test to see if the Frame errors are still there. Put on the antennas and see if it starts going up at that moment.</p><p>What bothers me about seeing this is that the 802.11 layer should be preventing this. The idea is that the ethernet side (which you are looking at with ifconfig eth1) should be just like having a straight wire between AP and client, the 802.11 layer should hide any packet failures, dropped bits etc...</p><p>At least that&#039;s how I understand it. Anyone else have a grasp on the 802.11 protocol and why we are seeing Frame errors?</p><p>It&#039;s also possible that this is being reported from the 802.11 layer and they carry it forward so you can see the dropped packets from that layer so you can possibly do something about it. Otherwise we may never know what is going on out there.</p><p>And there&#039;s a good question, are there any commands so we can see what is really going on at the 802.11 layer?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>