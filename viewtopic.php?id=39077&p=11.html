<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Repeater configurations here! Both ways, bridged and simple repeater</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Oct 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 11 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=39077&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39077&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=39077&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p308578">
				<div class="post-metadata">
					<div class="post-num">Post #251</div>
					<div class="post-author">Rampler</div>
					<div class="post-datetime">
						22 Jan 2016, 08:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dabyd64 wrote:</cite><blockquote><p>Have you installed igmpproxy?</p></blockquote></div><p>Yes, i did ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308608">
				<div class="post-metadata">
					<div class="post-num">Post #252</div>
					<div class="post-author">Rampler</div>
					<div class="post-datetime">
						22 Jan 2016, 14:28					</div>
				</div>
				<div class="post-content content">
					<p>I think using homegroups with Windows 10 ist in the relayd configuration not possible !<br />The pc connected to the repeater via relayd gets the same IPV4 subnet. Using IPV6 the subnet is different, because relayd only handle IPV4.<br />I believe using a transparent layer 2 bridge like WDS is the way for future. Disadvantage, you neet two openwrt routers...<br />In order to verify, it would be nice, if anybody here in the forum could test the homegroup functionality with W10 over relayd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309574">
				<div class="post-metadata">
					<div class="post-num">Post #253</div>
					<div class="post-author">Rampler</div>
					<div class="post-datetime">
						30 Jan 2016, 09:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Rampler wrote:</cite><blockquote><p>In order to verify, it would be nice, if anybody here in the forum could test the homegroup functionality with W10 over relayd.</p></blockquote></div><p>It seems, that i am the only one, who have Windows 10 and relayd using homegroups ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p313389">
				<div class="post-metadata">
					<div class="post-num">Post #254</div>
					<div class="post-author">exliko</div>
					<div class="post-datetime">
						3 Mar 2016, 03:21					</div>
				</div>
				<div class="post-content content">
					<p>When I do #1 method for Wireless Bridging, I always get an error when I enter this code<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;stabridge&#039; 
    option &#039;proto&#039; &#039;relay&#039; 
    option &#039;network&#039; &#039;lan wwan&#039; 
    option ipaddr &#039;192.168.1.254&#039;</code></pre></div><p>It&#039;s said Unknown Protocol</p><p>So I do more search and it need one more packet and it&#039;s call <strong>Luci-Proto-Relay</strong></p><p>And viola.... the protocol now recognized </p><p>Thx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315981">
				<div class="post-metadata">
					<div class="post-num">Post #255</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						21 Mar 2016, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>@dabyd64, thanks for the walk-thru, I&#039;m working on getting the repeater working on my DIR-505 and your post is great help.</p><p>A few questions:<br />1. With the repeater, mode 2 (non-bridged), do I need to delete dnsmasq part of the dhcp config or do I leave it there? Your post doesn&#039;t have it listed, made me wonder.<br />2. Same mode, what else do I need to do in addition to your OP instructions to make sure that the only ethernet port (eth1) of my router is on the same network as my WiFi clients? Add &#039;option ifname &#039;eth1&#039;&#039; to the lan interface section of network config?<br />3. I swear I&#039;ve seen the script for STA+AP before, but I can&#039;t recall where and googling didn&#039;t yield specific results I was looking for. If you can link to an existing script -- that&#039;d be great, otherwise -- how do I detect if STA is connected or not? And if not, I was thinking of switching it to either monitor or ad-hoc mode, so I&#039;d be able to make the edits via luci. Are there other options for temporarily disabling it?</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 21 Mar 2016, 23:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316262">
				<div class="post-metadata">
					<div class="post-num">Post #256</div>
					<div class="post-author">mesiu84</div>
					<div class="post-datetime">
						23 Mar 2016, 11:03					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried MODE 1 configuration and have 3 problems with it:</p><p>1. Wired configuration doesn&#039;t work, I can connect to WiFi created on my router and all works fine, but when I try to connect using ethernet I don&#039;t receive IP address and can&#039;t work to internet.<br />2. When I&#039;m connected to OpenWrt router via WiFi (and probably wired but this doesn&#039;t work now) I can&#039;t connect to OpenWrt via ssh or anything else, even luci web page doesn&#039;t work. I&#039;m trying to connect to all IP addresses but nothing work. If I wan&#039;t to connect to OpenWrt via ssh i need to first connect to Master router (the one from ISP) and then I can do ssh but only on relay IP address (in my situation it&#039;s 192.168.0.3)<br />3. When I&#039;m connected to OpenWrt via ssh I can&#039;t ping outside, the solution for this is to change DNS settings to for example OpenDNS and then all works fine, but when I switch back to Master router as DNS server it doesn&#039;t work.</p><p>Here is my /etc/config/network:</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
option ifname &#039;lo&#039;
option proto &#039;static&#039;
option ipaddr &#039;127.0.0.1&#039;
option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
option ula_prefix &#039;fd5e:f30c:d349::/48&#039;

config interface &#039;lan&#039;
option ifname &#039;eth0.1&#039;
option force_link &#039;1&#039;
option type &#039;bridge&#039;
option proto &#039;static&#039;
option ipaddr &#039;192.168.0.2&#039;
option netmask &#039;255.255.255.0&#039;
option ip6assign &#039;60&#039;
option gateway &#039;192.168.0.1&#039; 
option dns     &#039;192.168.0.1&#039;

config interface &#039;wan&#039;
option ifname &#039;eth0.2&#039;
option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
option ifname &#039;eth0.2&#039;
option proto &#039;dhcpv6&#039;

config switch
option name &#039;switch0&#039;
option reset &#039;1&#039;
option enable_vlan &#039;1&#039;

config switch_vlan
option device &#039;switch0&#039;
option vlan &#039;1&#039;
option ports &#039;1 2 3 4 5t&#039;

config switch_vlan
option device &#039;switch0&#039;
option vlan &#039;2&#039;
option ports &#039;0 5t&#039;

config interface &#039;wwan&#039;
option proto &#039;static&#039;
option ipaddr &#039;192.168.0.3&#039;
option netmask &#039;255.255.255.0&#039; 
option gateway &#039;192.168.0.1&#039;   

config interface &#039;stabridge&#039; 
option proto &#039;relay&#039; 
option network &#039;lan wwan&#039; 
option ipaddr &#039;192.168.0.3&#039; #Same IP as in WWAN</code></pre></div><p>DHCP&nbsp; is turned off, firewall also. Do you have any idea what could be wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317453">
				<div class="post-metadata">
					<div class="post-num">Post #257</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						30 Mar 2016, 23:21					</div>
				</div>
				<div class="post-content content">
					<p>Try this</p><p>config interface &#039;lan&#039;<br />.<br />.<br /><strong>option ipaddr &#039;192.168.10.1&#039;</strong><br />option netmask &#039;255.255.255.0&#039;<br />option ip6assign &#039;60&#039;<br />option gateway &#039;192.168.0.1&#039; <br />option dns&nbsp; &nbsp; &nbsp;&#039;192.168.0.1&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317458">
				<div class="post-metadata">
					<div class="post-num">Post #258</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						30 Mar 2016, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>Follow-up question -- is it possible to have the device fetch gateway/dns from the upstream router automatically in Hotspot/Repeater 1 mode instead of hardcoding it like above?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319053">
				<div class="post-metadata">
					<div class="post-num">Post #259</div>
					<div class="post-author">kusumy</div>
					<div class="post-datetime">
						10 Apr 2016, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi @dabyd64,<br />I&#039;ve try both methods (I am using TPLINK MR3420). The results are:</p><p>1. Method 1 --&gt; RepeaterAP shows in my wireless AP lists, I can connect to the repeaterAP, but only have &#039;Limited&#039; connection. I did not get the IP address network as the same as the router.</p><p>2. Method 2 --&gt; It works</p><p>However, i need method 1 working, but i can&#039;t figure out what i am doing wrong. I think i have followed the instructions carefully.</p><p>Anyway thanks for the tutorial.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319665">
				<div class="post-metadata">
					<div class="post-num">Post #260</div>
					<div class="post-author">opensimon</div>
					<div class="post-datetime">
						14 Apr 2016, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys,</p><p>first of all thanks for the tutorial! However I have the following problem and hope you can help:</p><p>I used method 2 as I couldn&#039;t get method 1 to work. Everything works well, but clients in the main network are not visible from the client network (e.g. I can&#039;t access the time capsule or my apple tv from the client network; accessing the main router (192.168.0.1) from the client network works).</p><p>I started from a vanilla openwrt installation and followed the routed client recipe (<a href="https://wiki.openwrt.org/doc/recipes/routedclient">https://wiki.openwrt.org/doc/recipes/routedclient</a>).</p><p>My setup:</p><p>Main router (provided by ISP): CBN CH6640E (192.168.0.1)<br />connected via ethernet to an Apple Airport Time Capsule 802.11ac (192.168.0.2)<br />bridged client is a d-link dir-300 rev B running cc 15.05 (192.168.1.1)</p><p>My config files:</p><p>network</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;fd20:96dc:2d98::/48&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth0.1&#039;
    option force_link &#039;1&#039;
    option macaddr &#039;00:26:5a:a4:68:18&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.1.1&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;

config interface &#039;wan&#039;
    option proto &#039;dhcp&#039;

config interface &#039;wan6&#039;
    option ifname &#039;eth0.2&#039;
    option proto &#039;dhcpv6&#039;

config switch
    option name &#039;rt305x&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;rt305x&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 1 2 3 5 6t&#039;

config switch_vlan
    option device &#039;rt305x&#039;
    option vlan &#039;2&#039;
    option ports &#039;4 6t&#039;</code></pre></div><p>wireless</p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
    option type &#039;mac80211&#039;
    option channel &#039;11&#039;
    option hwmode &#039;11g&#039;
    option path &#039;10180000.wmac&#039;
    option htmode &#039;HT20&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option ssid &#039;wombat&#039;
    option encryption &#039;psk2&#039;
    option key &#039;iloveopenwrt&#039;
    option mode &#039;sta&#039;
    option network &#039;wan&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option mode &#039;ap&#039;
    option ssid &#039;koala&#039;
    option encryption &#039;psk2&#039;
    option key &#039;iloveopenwrt&#039;
    option network &#039;lan&#039;</code></pre></div><p>firewall</p><div class="codebox"><pre><code>config defaults
    option syn_flood    1
    option input        ACCEPT
    option output        ACCEPT
    option forward        REJECT
# Uncomment this line to disable ipv6 rules
#    option disable_ipv6    1

config zone
    option name        lan
    list   network        &#039;lan&#039;
    option input        ACCEPT
    option output        ACCEPT
    option forward        ACCEPT

config zone
    option name        wan
    list   network        &#039;wan&#039;
    list   network        &#039;wan6&#039;
    option input        REJECT
    option output        ACCEPT
    option forward        REJECT
    option masq        1
    option mtu_fix        1

config forwarding
    option src        lan
    option dest        wan

# We need to accept udp packets on port 68,
# see https://dev.openwrt.org/ticket/4108
config rule
    option name        Allow-DHCP-Renew
    option src        wan
    option proto        udp
    option dest_port    68
    option target        ACCEPT
    option family        ipv4

# Allow IPv4 ping
config rule
    option name        Allow-Ping
    option src        wan
    option proto        icmp
    option icmp_type    echo-request
    option family        ipv4
    option target        ACCEPT

config rule
    option name        Allow-IGMP
    option src        wan
    option proto        igmp
    option family        ipv4
    option target        ACCEPT

# Allow DHCPv6 replies
# see https://dev.openwrt.org/ticket/10381
config rule
    option name        Allow-DHCPv6
    option src        wan
    option proto        udp
    option src_ip        fe80::/10
    option src_port        547
    option dest_ip        fe80::/10
    option dest_port    546
    option family        ipv6
    option target        ACCEPT

config rule
    option name        Allow-MLD
    option src        wan
    option proto        icmp
    option src_ip        fe80::/10
    list icmp_type        &#039;130/0&#039;
    list icmp_type        &#039;131/0&#039;
    list icmp_type        &#039;132/0&#039;
    list icmp_type        &#039;143/0&#039;
    option family        ipv6
    option target        ACCEPT

# Allow essential incoming IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Input
    option src        wan
    option proto    icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    list icmp_type        router-solicitation
    list icmp_type        neighbour-solicitation
    list icmp_type        router-advertisement
    list icmp_type        neighbour-advertisement
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT

# Allow essential forwarded IPv6 ICMP traffic
config rule
    option name        Allow-ICMPv6-Forward
    option src        wan
    option dest        *
    option proto        icmp
    list icmp_type        echo-request
    list icmp_type        echo-reply
    list icmp_type        destination-unreachable
    list icmp_type        packet-too-big
    list icmp_type        time-exceeded
    list icmp_type        bad-header
    list icmp_type        unknown-header-type
    option limit        1000/sec
    option family        ipv6
    option target        ACCEPT

# include a file with users custom iptables rules
config include
    option path /etc/firewall.user


### EXAMPLE CONFIG SECTIONS
# do not allow a specific ip to access wan
#config rule
#    option src        lan
#    option src_ip    192.168.45.2
#    option dest        wan
#    option proto    tcp
#    option target    REJECT

# block a specific mac on wan
#config rule
#    option dest        wan
#    option src_mac    00:11:22:33:44:66
#    option target    REJECT

# block incoming ICMP traffic on a zone
#config rule
#    option src        lan
#    option proto    ICMP
#    option target    DROP

# port redirect port coming in on wan to lan
#config redirect
#    option src            wan
#    option src_dport    80
#    option dest            lan
#    option dest_ip        192.168.16.235
#    option dest_port    80
#    option proto        tcp

# port redirect of remapped ssh port (22001) on wan
#config redirect
#    option src        wan
#    option src_dport    22001
#    option dest        lan
#    option dest_port    22
#    option proto        tcp

# allow IPsec/ESP and ISAKMP passthrough
config rule
    option src        wan
    option dest        lan
    option proto        esp
    option target        ACCEPT

config rule
    option src        wan
    option dest        lan
    option dest_port    500
    option proto        udp
    option target        ACCEPT

### FULL CONFIG SECTIONS
#config rule
#    option src        lan
#    option src_ip    192.168.45.2
#    option src_mac    00:11:22:33:44:55
#    option src_port    80
#    option dest        wan
#    option dest_ip    194.25.2.129
#    option dest_port    120
#    option proto    tcp
#    option target    REJECT

#config redirect
#    option src        lan
#    option src_ip    192.168.45.2
#    option src_mac    00:11:22:33:44:55
#    option src_port        1024
#    option src_dport    80
#    option dest_ip    194.25.2.129
#    option dest_port    120
#    option proto    tcp</code></pre></div><p>dhcp</p><div class="codebox"><pre><code>config dnsmasq
    option domainneeded &#039;1&#039;
    option boguspriv &#039;1&#039;
    option filterwin2k &#039;0&#039;
    option localise_queries &#039;1&#039;
    option rebind_protection &#039;1&#039;
    option rebind_localhost &#039;1&#039;
    option local &#039;/lan/&#039;
    option domain &#039;lan&#039;
    option expandhosts &#039;1&#039;
    option nonegcache &#039;0&#039;
    option authoritative &#039;1&#039;
    option readethers &#039;1&#039;
    option leasefile &#039;/tmp/dhcp.leases&#039;
    option resolvfile &#039;/tmp/resolv.conf.auto&#039;
    option localservice &#039;1&#039;

config dhcp &#039;lan&#039;
    option interface &#039;lan&#039;
    option start &#039;100&#039;
    option limit &#039;199&#039;
    option leasetime &#039;12h&#039;
    option dhcpv6 &#039;server&#039;
    option ra &#039;server&#039;

config dhcp &#039;wan&#039;
    option interface &#039;wan&#039;
    option ignore &#039;1&#039;

config odhcpd &#039;odhcpd&#039;
    option maindhcp &#039;0&#039;
    option leasefile &#039;/tmp/hosts/odhcpd&#039;
    option leasetrigger &#039;/usr/sbin/odhcpd-update&#039;</code></pre></div><p>Any idea how to get access to the main network from the client network?<br />When I replace my firewall configuration with the code from this tutorial the client network does not have internet access anymore. I also installed igmpproxy on the dir-300 and enabled igmp on the time capsule without any result.</p><p>Thanks for any help and be aware I am rather a n00b.</p><p>Simon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320844">
				<div class="post-metadata">
					<div class="post-num">Post #261</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						22 Apr 2016, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>Not sure if this thread is still active or not, but figured I would give it a try.</p><p>We are using method 1.</p><p>We have router &quot;A&quot; (main router) running BB.<br />We have router &quot;B&quot; (repeater) running AA with the config as shown in method 1.</p><p>For periods of time (24-36 hours), everything works OK.&nbsp; Clients all see each other, and all have access to the internet.&nbsp; Wireless devices can move from &quot;A&quot; to &quot;B&quot; and back to &quot;A&quot; and all works fine.&nbsp; Wired devices on &quot;B&quot; are also able to access all clients, and the internet.</p><p>Issue at times, router &quot;B&quot; will lose the connection to &quot;A&quot;, and then obviously everything on &quot;B&quot; is in essence disconnected.&nbsp; DHCP stops working, and then nothing can see anything on &quot;B&quot;.</p><p>I have logs, both from &quot;A&quot; and &quot;B&quot;, and &quot;B&quot; is attempting to re-connect to &quot;A&quot;, but keeps failing.&nbsp; If we reboot &quot;B&quot;, it connects right back up and all is fine.&nbsp; We do not touch &quot;A&quot;.</p><p>Both &quot;A&quot; and &quot;B&quot; are Atheros based hardware, and we are pretty confident the issue is not on router &quot;A&quot; as we have many clients connected to &quot;A&quot; for a year and never saw any issues.</p><p>Log from &quot;A&quot;:&nbsp; 02:c0 is the MAC for &quot;B&quot;</p><div class="codebox"><pre><code>Thu Apr 21 16:46:23 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: authenticated
Thu Apr 21 16:46:24 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: authenticated
Thu Apr 21 16:46:24 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: associated (aid 2)
Thu Apr 21 16:46:25 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: associated (aid 2)
Thu Apr 21 16:46:26 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: associated (aid 2)
Thu Apr 21 16:46:35 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: deauthenticated due to local deauth request
Thu Apr 21 16:48:43 2016 daemon.info hostapd: wlan0: STA 68:a3:c4:58:1f:52 WPA: group key handshake completed (RSN)
Thu Apr 21 16:48:43 2016 daemon.info hostapd: wlan0: STA 2c:54:cf:c0:89:81 WPA: group key handshake completed (RSN)</code></pre></div><p>Log from &quot;B&quot;:&nbsp; 04:f0 MAC is router &quot;A&quot;</p><div class="codebox"><pre><code>Apr 21 16:46:23 kern.info kernel: [17703.880000] wlan0-1: authenticate with 04:f0:21:18:1e:38
Apr 21 16:46:23 kern.info kernel: [17704.080000] wlan0-1: send auth to 04:f0:21:18:1e:38 (try 1/3)
Apr 21 16:46:24 kern.info kernel: [17705.010000] wlan0-1: send auth to 04:f0:21:18:1e:38 (try 2/3)
Apr 21 16:46:24 kern.info kernel: [17705.090000] wlan0-1: authenticated
Apr 21 16:46:24 kern.info kernel: [17705.120000] wlan0-1: associate with 04:f0:21:18:1e:38 (try 1/3)
Apr 21 16:46:25 kern.info kernel: [17706.010000] wlan0-1: associate with 04:f0:21:18:1e:38 (try 2/3)
Apr 21 16:46:26 kern.info kernel: [17707.010000] wlan0-1: associate with 04:f0:21:18:1e:38 (try 3/3)
Apr 21 16:46:26 kern.info kernel: [17707.110000] wlan0-1: RX AssocResp from 04:f0:21:18:1e:38 (capab=0x431 status=0 aid=2)
Apr 21 16:46:26 kern.info kernel: [17707.120000] wlan0-1: associated</code></pre></div><br /><p>These logs simply repeat over and over again about every 5 minutes according to the log, and &quot;B&quot; is never able to re-establish its connection with &quot;A&quot;.</p><p>This line from &quot;A&quot;:<br /></p><div class="codebox"><pre><code>Thu Apr 21 16:46:35 2016 daemon.info hostapd: wlan0: STA 02:c0:ca:7d:ff:96 IEEE 802.11: deauthenticated due to local deauth request</code></pre></div><p>Always appears 9 seconds after &quot;B&quot; appears to be associated with &quot;A&quot;.</p><p>I assume this is generated from &quot;A&quot;?&nbsp; And if so, what prompts &quot;A&quot; to do this?</p><p>Any ideas are greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320926">
				<div class="post-metadata">
					<div class="post-num">Post #262</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						22 Apr 2016, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Another question/issue.</p><p>Router A is main router, router B is repeater.&nbsp; Used relayd.</p><p>I have a wireless printer connected to router B via WiFi.</p><p>Devices on router &quot;B&quot; can see and print to the printer.</p><p>Devices on router &quot;A&quot; cannot see the printer.</p><p>I can ping the printer from a device on &quot;A&quot;, but the printer does not come up in the list of available devices when trying to print from &quot;A&quot;.</p><p>What am I missing?&nbsp; Or is this not possible?</p><br /><p>I have igmpproxy installed on router &quot;B&quot;<br />Firewall and dnsmasq are both disabled on router &quot;B&quot;</p><br /><p>edit:&nbsp; I switched to using WDS and everything is more stable and working fine.&nbsp; I apologize for posting to the howto thread, my mistake.&nbsp; Feel free to move or delete as required.</p>											<p class="post-edited">(Last edited by <strong>JohnV</strong> on 1 May 2016, 14:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320975">
				<div class="post-metadata">
					<div class="post-num">Post #263</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						23 Apr 2016, 14:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JohnV wrote:</cite><blockquote><p>I have a wireless printer connected to router B via WiFi.</p></blockquote></div><p>Is the printer a DHCP client?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320976">
				<div class="post-metadata">
					<div class="post-num">Post #264</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						23 Apr 2016, 14:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JohnV wrote:</cite><blockquote><p>Any ideas are greatly appreciated.</p></blockquote></div><p>Post <em>dmesg</em> buffer from B at time of disconnect.</p><p>N.B. move this <strong>support question</strong> to the General Discussion forum (obey the <a href="https://forum.openwrt.org/viewtopic.php?id=11639">rules</a>)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322049">
				<div class="post-metadata">
					<div class="post-num">Post #265</div>
					<div class="post-author">tinbilly</div>
					<div class="post-datetime">
						1 May 2016, 13:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>Just a quick question. Is it possible to setup a wireless repeating between a Netgear R6250 (broadcom-based) running Advanced Tomato as the main router AND a Netgear WNDR3800 (Atheros-based) running Openwrt Chaos Calmer 15.05.1 as the repeating router?</p><p>main router = R6250 on Advanced Tomato &lt;&lt;&lt;&lt;&gt;&gt;&gt;&gt; repeating router = WNDR3800 on Chaos Calmer 15.05.1?</p><p>I tried both of your setups but failed.</p><p>Any ideas/suggestions?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322103">
				<div class="post-metadata">
					<div class="post-num">Post #266</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						1 May 2016, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Just a quick answer... this post is better served in the General Discussion forum.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322583">
				<div class="post-metadata">
					<div class="post-num">Post #267</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						4 May 2016, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>This is offered as-is, sorry, I did use this for myself few years ago while I didn&#039;t had internet.<br />Apart of that, I can&#039;t help on any other setup, firmwares or devices. I tested on Atheros and worked great, once I tried on a Broadcom and Ralink device, both worked well as clients, until I enabled the second wireless network, it would just die.</p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 4 May 2016, 23:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325738">
				<div class="post-metadata">
					<div class="post-num">Post #268</div>
					<div class="post-author">vukhuong002</div>
					<div class="post-datetime">
						25 May 2016, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>I have a AP TL 901ND. Could you help me how to config Bridged mode? Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331689">
				<div class="post-metadata">
					<div class="post-num">Post #269</div>
					<div class="post-author">marosg</div>
					<div class="post-datetime">
						15 Jul 2016, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>Stupid question - what do I need to change so that also ipv6 works ? I implemented bridged version two years ago, it works beautifully. I started to play with IPv6 and I realized I cannot access link-local addresses between my main and bridged network. It works perfectly within each network.<br />I am no expert in any shape or form in this... <br />Thank you</p>											<p class="post-edited">(Last edited by <strong>marosg</strong> on 15 Jul 2016, 13:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332152">
				<div class="post-metadata">
					<div class="post-num">Post #270</div>
					<div class="post-author">ahmak</div>
					<div class="post-datetime">
						19 Jul 2016, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />&nbsp; &nbsp; &nbsp; &nbsp;I tried this on the ramips RT5350 - some observations:</p><p>If the ap mode is kept as open relayd always forwarded dhcp request to all clients connected to the wireless repeater, However, if the ap encryption mode is kept psk or psk2, I could see the router reply over wireshark but the wireless repeater did not relay the dhcp offer. </p><p>Static IP address worked flawlessly in either of the case above. </p><p>Can daby help on the same.</p><p>thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333883">
				<div class="post-metadata">
					<div class="post-num">Post #271</div>
					<div class="post-author">abhilashgoyal4</div>
					<div class="post-datetime">
						10 Aug 2016, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I am facing the same issue. Any solution to this issue ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334033">
				<div class="post-metadata">
					<div class="post-num">Post #272</div>
					<div class="post-author">mongoled</div>
					<div class="post-datetime">
						11 Aug 2016, 10:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi peeps, first many thanks to dabyd64 for posting these guides.</p><p>Have a strange issue that no one else has posted anything similar.</p><p>Am using the bridged/routed method (mode:1)</p><p>Everything is working as I would expect, but have some strange happenings when doing things via the GUI.</p><p>If I am connected via wireless/ethernet from main AP or Station certain things in Luci dont work, for example if I click on Network --&gt; Wifi and click to edit any of the wireless networks will get a&nbsp; &quot;Bad Gateway The process did not produce any response&quot; error.</p><p>The same message also occurs if I go System --&gt; Software --&gt; Update Lists</p><p>To make things even more stranger, if I connect via ethernet, but via the static assigned IP address on the LAN adapter, I can edit the wireless netorks but when I attempt to &#039;Update Lists&#039; I get a </p><p>&quot;opkg_conf_load: Could not lock /var/lock/opkg.lock: Resource temporarily unavailable.&quot;</p><p>message.</p><p>This is on a WA801ND v2 using the latest version of OpenWRT, Chaos Calmer 15.05.1 / LuCI 15.05-149-g0d8bbd2 Release (git-15.363.78009-956be55)</p><p>Have tried with two WA801ND v2, one of them connecting to a WR841N and the other connecting to a Mikrotik AP, both configs are displaying the same issues via GUI.</p><p>Also tried using https, issue still remains.</p><p>Hope someone has an idea with what is causing this, have not tired an earlier build</p>											<p class="post-edited">(Last edited by <strong>mongoled</strong> on 11 Aug 2016, 10:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338754">
				<div class="post-metadata">
					<div class="post-num">Post #273</div>
					<div class="post-author">mwCT</div>
					<div class="post-datetime">
						20 Sep 2016, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>If dns does not work and your gateway/dns is 192.168.1.1, consider:</p><p>rm /etc/resolv.conf<br />echo &quot;nameserver 127.0.0.1&quot;&gt;&gt;/etc/resolv.conf<br />echo &quot;nameserver 192.168.1.1&quot; &gt;&gt;/etc/resolv.conf</p><p>R/<br />Mike</p>											<p class="post-edited">(Last edited by <strong>mwCT</strong> on 20 Sep 2016, 23:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364488">
				<div class="post-metadata">
					<div class="post-num">Post #274</div>
					<div class="post-author">nico87bit</div>
					<div class="post-datetime">
						28 Aug 2017, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I should repeat a wifi network with wpa enterprise security, can i do it? With any openwrt router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365620">
				<div class="post-metadata">
					<div class="post-num">Post #275</div>
					<div class="post-author">urnen</div>
					<div class="post-datetime">
						21 Sep 2017, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello I followed the configuration being said in this thread, for the second option with 2 networks.</p><p>It almost works. The repeater is able to accesss the mainAP having himself internet connection, and is able to serve connection via the ethernet ports to connected hosts. However the secondary AP although visible, I am unable to connect to it.</p><p>This is the dmesg of a Linux host machine trying to connect to this AP:</p><p>[ 3467.212499] wlan1: authenticate with 02:1f:e2:bb:19:91<br />[ 3467.212578] wlan1: send auth to 02:1f:e2:bb:19:91 (try 1/3)<br />[ 3467.320027] wlan1: send auth to 02:1f:e2:bb:19:91 (try 2/3)<br />[ 3467.424021] wlan1: send auth to 02:1f:e2:bb:19:91 (try 3/3)<br />[ 3467.532016] wlan1: authentication with 02:1f:e2:bb:19:91 timed out</p><p>Although as can be seen in the configuration:</p><p>gist.github.com/anonymous/123215dc372f5012e463a05abca607e7</p><p> I even disabled the encryption for the SecondaryAP, What could be wrong?</p><p>The device is a bcrm63xx based one with AA, How can I be sure that this device is capable of this functionality?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 11 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=39077&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39077&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=39077&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>