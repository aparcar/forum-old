<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TEW-673GRU serial recovery</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p286992">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jericho</div>
					<div class="post-datetime">
						10 Aug 2015, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>Got the above-mentioned router (a clone of Dlink DIR-825v.B1). The device was bricked after trying to flash a new firmware image and not responding for about an hour. </p><p>Did some soldering and established serial connection with putty and&nbsp; finally got to the u-boot prompt. <br />The info i got is as follows:</p><p>U-Boot 1.1.4 (Apr&nbsp; 9 2009 - 15:45:22)</p><p>AP94 (ar7100) U-boot 0.0.12<br />HTTP-UID AP94: DRAM:&nbsp; b8050000: 0xc0140180<br />64 MB<br />Top of RAM usable for U-Boot at: 84000000<br />Reserving 214k for U-Boot at: 83fc8000<br />Reserving 192k for malloc() at: 83f98000<br />Reserving 44 Bytes for Board Info at: 83f97fd4<br />Reserving 36 Bytes for Global Data at: 83f97fb0<br />Reserving 128k for boot params() at: 83f77fb0<br />Stack Pointer at: 83f77f98<br />Now running in RAM - U-Boot at: 83fc8000<br />ar7100 flash_init: start<br />ar7100_spi_flash_unblock: start<br />ar7100_flash: id read: start<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;eth_initialize: ag7100_enet_initialize<br />rtl8366sr_phy_setup&nbsp; ethUnit=0<br />ar7100.c: eth0 using default MAC: 00:14:d1:e6:8b:e6<br />eth0 up<br />ar7100.c: eth1 using default MAC: 00:14:d1:e6:8b:e7<br />eth1 up<br />eth0, eth1<br />### main_loop entered: bootdelay=1</p><p>### main_loop: bootcmd=&quot;bootm 0xbf050000&quot;<br />Hit any key to stop autoboot:&nbsp; 0<br />### main_loop: no key string, allow autoboot<br />### main_loop: abortboot<br />## Booting image at bf050000 ...<br />checksum:b5ff500c<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS Linux Kernel Image<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma&nbsp; compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 926953 Bytes = 905.2 kB<br />&nbsp; &nbsp;Load Address: 80060000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80064950<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;LZMA Umcompressing Kernel Image ...&nbsp; &nbsp; Image loaded from 80060000-802fa5c8<br /> OK<br />&nbsp; &nbsp;Boot image os 5=IH_OS_LINUX<br />## do_bootm_linux start....<br />No initrd<br />## Transferring control to Linux (at address 80064950) ...<br />## Giving linux memsize in bytes, 67108864</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] booting platform Atheros AR7161 rev 2 (0xaa)<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x03ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x03ffffff]<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, 4-way, VIPT, I-cache aliases, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Linux version 3.5.7.33 (root@dd-wrt.buildserver) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r42002) ) #18201 Sun Jan 4 02:25:25 CET 2015<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line: console=ttyS0,115200 root=1f02 rootfstype=squashfs noinitrd init=/sbin/init<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] __ex_table already sorted, skipping sort<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61612k/65536k available (2153k kernel code, 3924k reserved, 351k data, 160k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:80<br />[&nbsp; &nbsp; 0.000000] irq init done<br />[&nbsp; &nbsp; 0.000000] plat_time_init: plat time init done<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)<br />[&nbsp; &nbsp; 0.060000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.060000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.070000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 3.070000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 3.080000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 3.080000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 3.090000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 3.090000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 3.100000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 3.100000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x16ffffff]<br />[&nbsp; &nbsp; 3.110000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 3.110000] found calibration data for slot 0 on 0xBF661000<br />[&nbsp; &nbsp; 3.120000] PCI: fixup device 0000:00:00.0<br />[&nbsp; &nbsp; 3.130000] found calibration data for slot 1 on 0xBF665000<br />[&nbsp; &nbsp; 3.140000] PCI: fixup device 0000:00:01.0<br />[&nbsp; &nbsp; 3.140000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff]<br />[&nbsp; &nbsp; 3.150000] pci 0000:00:01.0: BAR 0: assigned [mem 0x10010000-0x1001ffff]<br />[&nbsp; &nbsp; 3.150000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 3.160000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 3.160000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 3.170000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 3.180000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 3.180000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 3.190000] TCP: reno registered<br />[&nbsp; &nbsp; 3.190000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 3.200000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 3.200000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 3.210000] gpio_proc: module loaded and /proc/gpio/ created<br />[&nbsp; &nbsp; 3.210000] Register LED Device<br />[&nbsp; &nbsp; 3.220000] wl0gpio_proc: module loaded and /proc/wl0gpio/ created<br />[&nbsp; &nbsp; 3.220000] AR7100 GPIOC major 0<br />[&nbsp; &nbsp; 3.230000] squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />[&nbsp; &nbsp; 3.230000] msgmni has been set to 120<br />[&nbsp; &nbsp; 3.240000] io scheduler noop registered<br />[&nbsp; &nbsp; 3.240000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 3.250000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 3.280000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 19) is a 16550A<br />[&nbsp; &nbsp; 3.280000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 3.280000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 3.290000] guessed flashsize = 8M<br />[&nbsp; &nbsp; 3.300000] scanning for root partition<br />[&nbsp; &nbsp; 3.300000] uboot detected<br />[&nbsp; &nbsp; 3.300000] bootloader size = 50000<br />[&nbsp; &nbsp; 3.310000]<br />[&nbsp; &nbsp; 3.310000] found squashfs at 133000<br />[&nbsp; &nbsp; 3.320000] Creating 8 MTD partitions on &quot;ar7100-nor0&quot;:<br />[&nbsp; &nbsp; 3.320000] 0x000000000000-0x000000050000 : &quot;RedBoot&quot;<br />[&nbsp; &nbsp; 3.330000] 0x000000050000-0x000000800000 : &quot;linux&quot;<br />[&nbsp; &nbsp; 3.330000] 0x000000133000-0x000000650000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 3.340000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 3.350000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 3.360000] 0x000000670000-0x0000007e0000 : &quot;ddwrt&quot;<br />[&nbsp; &nbsp; 3.360000] 0x0000007e0000-0x0000007f0000 : &quot;nvram&quot;<br />[&nbsp; &nbsp; 3.370000] 0x0000007f0000-0x000000800000 : &quot;FIS directory&quot;<br />[&nbsp; &nbsp; 3.380000] 0x0000007f0000-0x000000800000 : &quot;board_config&quot;<br />[&nbsp; &nbsp; 3.380000] 0x000000000000-0x000000800000 : &quot;fullflash&quot;<br />[&nbsp; &nbsp; 3.390000] -&gt;Oops: flash id 0x202017 .<br />[&nbsp; &nbsp; 3.390000] tun: Universal TUN/TAP device driver, 1.6<br />[&nbsp; &nbsp; 3.400000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />[&nbsp; &nbsp; 3.410000] Found an RTL8366S switch<br />[&nbsp; &nbsp; 3.410000] Realtek RTL8366S ethernet switch driver version 0.2.2<br />[&nbsp; &nbsp; 3.420000] rtl8366s rtl8366s: using GPIO pins 5 (SDA) and 7 (SCK)<br />[&nbsp; &nbsp; 3.420000] rtl8366s rtl8366s: RTL8366 ver. 1 chip found<br />[&nbsp; &nbsp; 3.450000] rtl8366s rtl8366s: applying initvals<br />[&nbsp; &nbsp; 3.470000] rtl8366s: probed<br />[&nbsp; &nbsp; 3.870000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp; 3.880000] PPP BSD Compression module registered<br />[&nbsp; &nbsp; 3.880000] PPP Deflate Compression module registered<br />[&nbsp; &nbsp; 3.890000] PPP MPPE Compression module registered<br />[&nbsp; &nbsp; 3.890000] NET: Registered protocol family 24<br />[&nbsp; &nbsp; 3.910000] u32 classifier<br />[&nbsp; &nbsp; 3.910000]&nbsp; &nbsp; &nbsp;Performance counters on<br />[&nbsp; &nbsp; 3.910000]&nbsp; &nbsp; &nbsp;input device check on<br />[&nbsp; &nbsp; 3.920000]&nbsp; &nbsp; &nbsp;Actions configured<br />[&nbsp; &nbsp; 3.920000] Netfilter messages via NETLINK v0.30.<br />[&nbsp; &nbsp; 3.930000] nf_conntrack version 0.5.0 (962 buckets, 3848 max)<br />[&nbsp; &nbsp; 3.930000] nf_conntrack_rtsp v0.6.21 loading<br />[&nbsp; &nbsp; 3.940000] nf_nat_rtsp v0.6.21 loading<br />[&nbsp; &nbsp; 3.940000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp; 3.950000] IPP2P v0.8.2 loading<br />[&nbsp; &nbsp; 3.950000] TCP: westwood registered<br />[&nbsp; &nbsp; 3.950000] TCP: hybla registered<br />[&nbsp; &nbsp; 3.960000] TCP: vegas registered<br />[&nbsp; &nbsp; 3.960000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 3.960000] Bridge firewalling registered<br />[&nbsp; &nbsp; 3.970000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 3.970000] searching for nvram<br />[&nbsp; &nbsp; 3.980000] nvram size = 0<br />[&nbsp; &nbsp; 4.010000] Atheros AR71xx hardware watchdog driver version 0.1.0<br />[&nbsp; &nbsp; 4.020000] ar71xx-wdt: timeout=15 secs (max=25) ref freq=170000000<br />[&nbsp; &nbsp; 4.030000] SQUASHFS error: Unknown inode type 12 in squashfs_iget!<br />[&nbsp; &nbsp; 4.040000] List of all partitions:<br />[&nbsp; &nbsp; 4.040000] 1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;320 mtdblock0&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.050000] 1f01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7872 mtdblock1&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.050000] 1f02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5236 mtdblock2&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.060000] 1f03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1472 mtdblock3&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.060000] 1f04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock4&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.070000] 1f05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock5&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.070000] 1f06&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock6&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.080000] 1f07&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8192 mtdblock7&nbsp; (driver?)<br />[&nbsp; &nbsp; 4.080000] No filesystem could mount root, tried:&nbsp; squashfs<br />[&nbsp; &nbsp; 4.090000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)<br />[&nbsp; &nbsp; 4.090000] Rebooting in 1 seconds..</p><br /><p>After successfully entering u-boot prompt i have:</p><p>U-Boot 1.1.4 (Apr&nbsp; 9 2009 - 15:45:22)<br />ar7100&gt; printenv<br />bootargs=console=ttyS0,115200 root=31:03 mem=64M rootfstype=squashfs,jffs2 init=/sbin/init mtdparts=ar7100-nor0:256k(uboot),64k(Config),1024k(vmlinux),5184k(rootfs),64k(caldata)<br />bootcmd=bootm 0xbf050000<br />bootdelay=1<br />baudrate=115200<br />ipaddr=192.168.0.1<br />serverip=192.168.0.107<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />ethact=eth0</p><p>So my questions are:</p><p>1. which exact memory addresses should I use to perform: tftpboot 0xXXXXXXX openwrt-ar71xx-generic-tew-673gru-squashfs-factory.bin<br />2. should I first perform memory erase as in this example:<br />ar7100&gt; erase 0xbf020000 +7c0000<br />First 0x2 last 0x7d sector size 0x10000&nbsp; &nbsp; Erased 124 sectors</p><p>If yes - which memory address should be used</p><p>Thanks in advance to anyone responding.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290864">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jericho</div>
					<div class="post-datetime">
						8 Sep 2015, 09:50					</div>
				</div>
				<div class="post-content content">
					<p>Anyone at all?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>