<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> any recent Archer C7 tftp flashes? what IP did you use?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p314789">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						14 Mar 2016, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>I cannot get tftp flash to work on new Archer C7 (v2) with part number 0150502252.</p><p>Has anyone recently flashed a new purchase Archer C7 with tftp? What IP address did you use (e.g., 192.168.0.66) and do you know what part number the router had?</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 15 Mar 2016, 00:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314790">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						14 Mar 2016, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>That is the correct IP. Perhaps you are running into the 18005 issue? Search forum for that error code. You will find a number of different ways to resolve flashing if that is what you are encountering.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314792">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						14 Mar 2016, 20:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anomeome wrote:</cite><blockquote><p>That is the correct IP. Perhaps you are running into the 18005 issue? Search forum for that error code. You will find a number of different ways to resolve flashing if that is what you are encountering.</p></blockquote></div><p>Well, several people have reported that tftp flashing resolves it. I successfully flashed (on another Archer C7 with a different part number) by using the &quot;ddwrt workaround&quot; but that did not work on this newer part number. I&#039;m wondering if TP-Link has done something to the newer part number.</p><p>Here is the procedure I used to tftp flash. Can you please report if I&#039;m doing anything wrong?<br />-connect laptop to LAN1 port of router with cat6 cable<br />-change laptop wired networking to IP 192.168.0.66 and subnet of 255.255.255.0<br />-open tftpd64 and set the directory to where I have the factory.bin openwrt (I renamed the factory.bin openwrt file to &quot;ArcherC7v3_tp_recovery.bin&quot; (I also tried ArcherC7v2_tp_recovery.bin as a last resort). <br />-in the tftpd64 app, set the server interface to the 192.168.0.66 address<br />-hold down the reset button on the router and turn on the router<br />-I wait 3 seconds before letting off the reset button (I tried letting off reset button after 1 second, 2 seconds, 4 seconds, and 5 seconds as well)<br />-nothing ever happens.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314795">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						14 Mar 2016, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>With my unit:<br />192.168.0.66 for ip<br />ArcherC7v2_tp_recovery.bin is the file name<br />the timing on releasing the button was based on leds indication</p><p>I would suggest wireshark, or something similar, to snoop the nic. That will at least tell you what is happening on the wire.</p><p>Edit: if you were hitting the 18005 issue I think you would see it get the file from your tftp server, it just would fail to load it.</p>											<p class="post-edited">(Last edited by <strong>anomeome</strong> on 14 Mar 2016, 20:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314796">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						14 Mar 2016, 21:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anomeome wrote:</cite><blockquote><p>With my unit:<br />192.168.0.66 for ip<br />ArcherC7v2_tp_recovery.bin is the file name<br />the timing on releasing the button was based on leds indication</p><p>I would suggest wireshark, or something similar, to snoop the nic. That will at least tell you what is happening on the wire.</p><p>Edit: if you were hitting the 18005 issue I think you would see it get the file from your tftp server, it just would fail to load it.</p></blockquote></div><p>You have any insight into what LED pattern I&#039;m looking for? As I understand you, when I release the reset button matters, right?</p><p>I successfully installed openwrt via the ddwrt workaround on two other Archers (same part number). ddwrt workaround failed on two other archers (different part numbers than above). Any chance the different part numbers had to do with it? All 4 were ver 2.0.</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 14 Mar 2016, 21:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314800">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						14 Mar 2016, 21:20					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?pid=301490#p301490">Sure</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314802">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						14 Mar 2016, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>Really important to use Wireshark (or tcpdump, or similar) to snoop the Ethernet interface.&nbsp; Your IP address seems to be correct.&nbsp; Assuming it is, you&#039;ll see the router asking for the file to upload by name.&nbsp; That way you can give it the matching name so it uploads it.&nbsp; If you&#039;re not seeing it ask for the file by name, something else would seem to be wrong.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314813">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						14 Mar 2016, 23:36					</div>
				</div>
				<div class="post-content content">
					<p>I got wireshark up and managed to get the tftp to flash. I had to hold reset down for 7 seconds.</p><p>Anyways, everything indicated that it was successful, but after automatic reboot, the router &quot;dies.&quot; Power light and LAN1 light. That&#039;s it. I tried it three times, letting it sit for a full 5 minutes just to be sure.</p><p>I ordered another Archer C7 from a different company. Hopefully I&#039;ll get the older part number. </p><p>Can anyone else get openwrt flashed on Archer C7 with part number 0150502252?</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 14 Mar 2016, 23:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314822">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						15 Mar 2016, 00:00					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm that I can successfully tftp flash the TP-Link software onto the router. But every attempt to flash openwrt fails. I even retro-installed an old TP-Link firmware that allows OpenWRT to be flashed from the GUI (i.e., it doesn&#039;t give that 18005 error). But the end result (no matter if it&#039;s GUI or TFTP) is a &quot;bricked&quot; router.</p><p>I think TP-Link did something hardware wise to block installs. Manufacture date of the ones I&#039;m having trouble on are 2015 Dec and part number is as mentioned above.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314826">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						15 Mar 2016, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>This isn&#039;t a <a href="https://forum.openwrt.org/viewtopic.php?id=61574">V3</a> per chance?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314830">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						15 Mar 2016, 00:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anomeome wrote:</cite><blockquote><p>This isn&#039;t a <a href="https://forum.openwrt.org/viewtopic.php?id=61574">V3</a> per chance?</p></blockquote></div><p>On both the box it came in and the router itself, &quot;ver: 2.0&quot; is stated (on both routers). I verified each was 2.0 before opening.</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 15 Mar 2016, 00:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314836">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						15 Mar 2016, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>Is this a current DD build? This user is reporting <a href="https://forum.openwrt.org/viewtopic.php?pid=314594#p314594">here</a> something similar to what you are describing. My part # *2154.</p><p>Edit:<br />DD is the next version after CC, you are not loading that but I did not know what you were trying to flash..<br />Part #0150502154, different than yours, another data point.<br />The user in that post is flashing a DD build on a C7V2 and is describing the same led outcome that you described in post 8. But since it is a totally different release probably best to ignore.</p>											<p class="post-edited">(Last edited by <strong>anomeome</strong> on 15 Mar 2016, 02:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314841">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						15 Mar 2016, 02:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anomeome wrote:</cite><blockquote><p>Is this a current DD build? This user is reporting <a href="https://forum.openwrt.org/viewtopic.php?pid=314594#p314594">here</a> something similar to what you are describing. My part # *2154.</p></blockquote></div><p>I&#039;m not following you here. &quot;DD build&quot;? &quot;part # *2154&quot;?</p><p>I tried to install the 15.05 release version and verified sha256sum: openwrt-15.05-ar71xx-generic-archer-c7-v2-squashfs-factory.bin</p><p>The post you linked to does accurately describe the problem I&#039;m having on routers manufactured after Nov 2015. I successfully flashed 3 routers last week (2 archer C7 manufactured in Nov 2015 and one wdr4300 manufactured in Nov 2014).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314842">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						15 Mar 2016, 02:46					</div>
				</div>
				<div class="post-content content">
					<p>TP-Link made a very minor change last fall.&nbsp; After that, flashing firmware via the stock web interface throws the infamous 18005 error if you try to install non-US firmware.&nbsp; BrainSlayer easily designed dd-wrt to conform to this specification.</p><p>Perhaps the first firmware redeisgn was a quick-and-dirty fix only???&nbsp; Now TP-Link has made <a href="http://www.tp-link.us/faq-1058.html">an official announcement</a>.&nbsp; Perhaps this means newer hardware/firmware has a different, more difficult design to prevent &quot;non-manufacturer certified&quot; firmware from being installed.</p><p>We shouldn&#039;t jump to hasty conclusions, I suppose.&nbsp; I don&#039;t have any such hardware myself to see how it operates (or fails to).&nbsp; If so, it&#039;s a sad day, and TP-Link is willing to surrender a certain percentage of their business.&nbsp; And they were pretty good routers, too....</p><p>Clemmitt</p><p>P.S.: Despite the cost, I&#039;m beginning to think buying x86_64 hardware that&#039;s powerful enough for routing is going to be the best way to go.&nbsp; sigh</p>											<p class="post-edited">(Last edited by <strong>cmsigler</strong> on 15 Mar 2016, 02:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314853">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						15 Mar 2016, 04:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cmsigler wrote:</cite><blockquote><p>Now TP-Link has made <a href="http://www.tp-link.us/faq-1058.html">an official announcement</a>.</p></blockquote></div><p>TP-Link says they are doing this per FCC regulation. But my understanding was that the FCC backed away from requiring it. Isn&#039;t TP-Link doing this on there own?</p><p>What can be done about this? I&#039;d like to see TP-Link go out of business for this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314877">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">eas</div>
					<div class="post-datetime">
						15 Mar 2016, 09:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><div class="quotebox"><cite>cmsigler wrote:</cite><blockquote><p>Now TP-Link has made <a href="http://www.tp-link.us/faq-1058.html">an official announcement</a>.</p></blockquote></div><p>TP-Link says they are doing this per FCC regulation. But my understanding was that the FCC backed away from requiring it. Isn&#039;t TP-Link doing this on there own?</p><p>What can be done about this? I&#039;d like to see TP-Link go out of business for this.</p></blockquote></div><p>Dream on. People like us who install 3rd party firmware on our routers don&#039;t represent much of the market. Occasionally, a vendor might throw us a bone, but even then, its more an attempt to cultivate our goodwill as influencers among less sophisticated consumers than it is for the devices we buy.</p><p>TP-Link provided a good value for hardware that was easily flashed with 3rd party firmware (which helped attract developer interest). Don&#039;t mistake discovery of that happy accident for an entitlement that every Archer C7 you purchase will continue to work outside its specification and product description. You&#039;d like to see them go out of business for not keeping a promise they never made? Grow up! If you want to try to persuade TP-Link to reconsider, petulance isn&#039;t going to encourage anyone to be more friendly to 3rd party software.</p><p>I have a C7 with OpenWRT, and I&#039;d probably order a second if TP-Link hadn&#039;t made this move. I wish they hadn&#039;t, but thems the breaks. I&#039;d feel differently if I was an early buyer of the WRT1900AC, or some other device the vendor pitched in part on the basis of its compatibility with 3rd party firmware.</p>											<p class="post-edited">(Last edited by <strong>eas</strong> on 15 Mar 2016, 09:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314971">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						15 Mar 2016, 17:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eas wrote:</cite><blockquote><div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><div class="quotebox"><cite>cmsigler wrote:</cite><blockquote><p>Now TP-Link has made <a href="http://www.tp-link.us/faq-1058.html">an official announcement</a>.</p></blockquote></div><p>TP-Link says they are doing this per FCC regulation. But my understanding was that the FCC backed away from requiring it. Isn&#039;t TP-Link doing this on there own?</p><p>What can be done about this? I&#039;d like to see TP-Link go out of business for this.</p></blockquote></div><p>You&#039;d like to see them go out of business for not keeping a promise they never made? Grow up! If you want to try to persuade TP-Link to reconsider, petulance isn&#039;t going to encourage anyone to be more friendly to 3rd party software.</p></blockquote></div><p>No, not cause they made some promise. No, not to try to encourage them to be friendly. I&#039;d like them to go out of business because then others would realize they should support Free Software because it&#039;s good for business.</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 17 Mar 2016, 00:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315200">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						17 Mar 2016, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Guys, I received two new Archer C7s today from a different vendor. Luckily, they were both manufactured in Nov 2015. And both them tftp flashed without any issues whatsoever.</p><p>I have to assume TP-Link has done something. Beware of anything manufactured after Nov 2015 guys.</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 17 Mar 2016, 00:32)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>