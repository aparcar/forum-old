<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> fail2ban on OpenWRT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p111416">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						18 Jun 2010, 02:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello, is possible to add the fail2ban package to OpenWRT. I use on my server and it avoid a lot of SSH attacks.</p><p>Thanks and regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111434">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jun 2010, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>The fail2ban utility is implemented in python which is rather big for the typical OpenWrt device. You should look for an alternative C only solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111440">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jlazkano</div>
					<div class="post-datetime">
						18 Jun 2010, 12:19					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your reply, any other software similar to fail2ban?</p><p>Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124795">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						7 Jan 2011, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>eah, but how about x86 users??! you can not ignore us like we not exists just because you don&#039;t like personally something. as i know python packages is available for x86, so what is problem to help on jlazkano&#039;s request? <br /><a href="http://downloads.openwrt.org/snapshots/trunk/x86/packages/python_2.6.4-3_x86.ipk">prooflink</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124807">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						8 Jan 2011, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>A much better approach is to not use port 22 externally. You&#039;ll see 99.99% of all brute force attacks go away.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124808">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						8 Jan 2011, 00:32					</div>
				</div>
				<div class="post-content content">
					<p>Personally I don&#039;t really understand the whole ssh paranoia... ditching password authentication for public keys is probably more secure than fail2ban and the like. If someone really wants to crack your ssh he probably does distributed brute force which those block scripts are mostly useless against.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124809">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						8 Jan 2011, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>common guys... why so much flame here but no one word about can you do what or not. <br />ps: all the cases is different, don&#039;t try to understand whats we needs, just help us (or not), thank you.<br />pps: its so hard to make this package? i don&#039;t think so. i think you just get lazy <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124810">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						8 Jan 2011, 00:50					</div>
				</div>
				<div class="post-content content">
					<p>As you already noticed, there is python available. And as you also know, fail2ban is a python script, so why don&#039;t just grab it and copy it to your router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124815">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						8 Jan 2011, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>i personally can. but question was different, i&#039;ll remind you:<br /></p><div class="quotebox"><blockquote><p>is possible to add the fail2ban <strong>package</strong> to OpenWRT?</p></blockquote></div><p>if you personally can not help here, please stop this flame and go away. maybe someone else will want to help. thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124817">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						8 Jan 2011, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>Actually everybody in here tried to help you. Now I&#039;m not so inclined anymore.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124818">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						8 Jan 2011, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>tip to change port IS NOT help, thanks. request was to make PACKAGE.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124827">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						8 Jan 2011, 04:08					</div>
				</div>
				<div class="post-content content">
					<p>anest,</p><p>If you would really like to contribute to package fail2ban for OpenWRT, then please read this <a href="http://wiki.openwrt.org/doc/devel/packages">build packages</a> documentation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124829">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						8 Jan 2011, 04:28					</div>
				</div>
				<div class="post-content content">
					<p>no, i can&#039;t (and actually why i asking for help here). i just install from scratch. but will be nice if you, or anybody who can, will make package, for anyone (jlazkano in same bot) who want it. thanks.<br />ps: if you really can not assembled this package, please stop this pointless flame here. just pass by and do not troll, i hope you finally got my point, thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124830">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						8 Jan 2011, 05:29					</div>
				</div>
				<div class="post-content content">
					<p>Actually, I can do that; however, I don&#039;t see any good reasons/needs for it, let alone it makes no sense at all to waste the resources. Having Fail2Ban is like letting ladrones come inside your house at any time lurking around, watching your wife and/or daughters naked while taking a shower, etc. If I want to stop ladrones, I would have stopped them way before they step their foot passing through my outer gate. In this case, I would completely block intruders before they get a chance to get passed through my NAT/Firewall router. I also <strong>hope you finally got my point</strong>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124831">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">anest</div>
					<div class="post-datetime">
						8 Jan 2011, 06:43					</div>
				</div>
				<div class="post-content content">
					<p>exactly. its what fail2ban doing that job - &quot;completely block intruders before they get a chance to get passed through&quot; your gate. <br />anyway, i just shockingly surprised how nasty some people here. i must repeat: if you personally don&#039;t want help us just go away! maybe someone will help. but you stop trolling please, respect if not us but community please. thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124841">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						8 Jan 2011, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>@anest: what did you contribute to this community (you are referring to)? you wrote a &quot;please make me a package&quot;-post and now you are accusing other members that they are trolling around.&nbsp; on the other hand arokh, mazilo and jow are developers or active members which contribute a lot to this project. So please stop it!</p><p>@jlazkano: I don&#039;t know fail2ban, but denyhosts and similar packages normally depends on standard-logfiles. openwrt lack this standard-logfiles because you could only store them on ramdisk, and the space is quite limited, and they won&#039;t survive a reboot. <br />Search for &quot;ssh bruteforce&quot; in this forum und you will find some iptables-rules which should prevent bruteforce-attacks (but there seems to be some issues with backfire). All other approaches need a big writeable diskspace, special syslogd configuration,... to adapt openwrt to the requirements of these packages. Or you have to change a lot to adapt the packages to work with openwrt. Both not really an option for the mainstream-openwrt-development, especially because the openwrt-devs don&#039;t see the need for this package.&nbsp; </p><p>So your options are:&nbsp; <br />1. use publickey-authentication only<br />2. change the ssh-port <br />3. try to get the iptables-rules working<br />and if this doesn&#039;t satisfy your needs<br />4. try to adapt fail2ban to work with openwrt yourself, are come up with some real good reasons why this package is important for the openwrt-project.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124843">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						8 Jan 2011, 15:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anest wrote:</cite><blockquote><p>exactly. its what fail2ban doing that job - &quot;completely block intruders before they get a chance to get passed through&quot; your gate.</p></blockquote></div><p>No and that&#039;s not how fail2ban works. Since fail2ban resides behind the firewall on your router, an intruder has to pass through the firewall on your router before fail2ban can recognize the intruder has failed to poke your system. If the intruder once gets passed through your firewall on your NAT/Firewall router and does nothing, fail2ban won&#039;t be able to detect the intruder. This is the same as letting a ladrones come into your bathroom while watching your wife and/or daughter(s) undress, getting naked, and taking a shower. If one is really serious and wants to fight against any intruders, don&#039;t let them pass through your 1st gate, let alone be inside your house or even bathroom. Why do you think your GMail, MSN/HotMail, Yahoo, and/or any e-mail accounts from any major (free) e-mail provider are inundated with spam/junk e-mails (even they provide filters to move them to junk folder) bogus e-mail addresses or even from bogus e-mail servers? The reason is simply they are not serious, but to promote spam e-mails. Can you imagine what Internet traffics will look like without spam e-mails?</p><div class="quotebox"><blockquote><p>anyway, i just shockingly surprised how nasty some people here. i must repeat: if you personally don&#039;t want help us just go away! maybe someone will help. but you stop trolling please, respect if not us but community please. thank you.</p></blockquote></div><p>Honestly, if any one who is considered being nasty here, it must be you. What a hypocrite you really are!</p><p>BTW, you are not only nastily telling readers who tried to help you here to go away, but also implied to accuse them acting as a troll. Such acts are what I call being a hubris. Until you have toned down and are being nice to everyone who tries to help you, you are going to go nowhere except just doing a merry-go-round begging everyone while insulting them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124846">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						8 Jan 2011, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Wow. Just wow <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128911">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">neurosys</div>
					<div class="post-datetime">
						20 Feb 2011, 05:46					</div>
				</div>
				<div class="post-content content">
					<p>Well. Aside from the strange egos going on in this thread; there are some legit reasons for fail2ban:</p><p>If running services (aside from SSH) that require passing thru the firewall, such as SIP, it is nice to have fail2ban. With that said, as someone mentioned above - having python there and just installing the script is easy enough. Just my 2 cents.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p129681">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ouaibe</div>
					<div class="post-datetime">
						1 Mar 2011, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>I think it&#039;s a fairly reasonable request to have fail2ban packaged in OpenWRT.<br />I haven&#039;t had the opportunity to check how to install it and I&#039;m not totally sure it&#039;s as easy as installing the python script (since it&#039;s based on some logfiles that aren&#039;t necessarily present in OpenWRT), but if someone has managed to do it, please do update the wiki, that&#039;s how a community lives and how knowledge get passed to others...<br />That said, someone mentionned logtrigger as an alternative, and there&#039;s even an OpenWRT sample configuration: <a href="https://forum.openwrt.org/viewtopic.php?id=27955">https://forum.openwrt.org/viewtopic.php?id=27955</a></p>											<p class="post-edited">(Last edited by <strong>ouaibe</strong> on 13 Apr 2011, 15:31)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>