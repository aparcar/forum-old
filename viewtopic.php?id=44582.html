<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> failsafe ping works but</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p203894">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">shabbir1282</div>
					<div class="post-datetime">
						6 Jun 2013, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, my tp-link after upgrade if i assign ip address to vlan it say invalid<br /> interface, but it works under failsafe mode i upgraded the os from there.</p><p>tp-link 1043nd. <br />ifconfig eth0.1<br />ifconfig: eth0.1: error fetching interface information: Device not found<br />root@OpenWrt:/# uci show&nbsp; | grep eth<br />dhcp.@dnsmasq[0].readethers=1<br />network.lan.ifname=eth0.1<br />network.wan.ifname=eth0.2</p><p>ifconfig doesnt return any thing.</p><p>swconfig dev rtl8366rb show<br />VLAN 2:<br />&nbsp; &nbsp; &nbsp; &nbsp; info: VLAN 2: Ports: &#039;05t&#039;, members=0021, untag=0001, fid=0<br />&nbsp; &nbsp; &nbsp; &nbsp; fid: 0<br />&nbsp; &nbsp; &nbsp; &nbsp; ports: 0 5t</p><p>eariler i patched this rtl8366rb switch for mirroring support.</p><p>kinldy help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203899">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						6 Jun 2013, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>Aftter telneting to failsafe-mode, do an ifconfig. You will see only eth0 without any VLANs. Failsafe-mode is to recover bricked device. Thus you cannot test settings there.</p><p>You need to boot normally and aplly your changes there, and also test by normal rebooting. If your brick something, goto failsafe-mode and unbrick it again = do mount_root to mount the JFFS2-Partition and undo you last changes to the normal configuration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203900">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						6 Jun 2013, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>If you really screwed up, enter failsafe and type firstboot. That will get you back to as-new settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203905">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						6 Jun 2013, 17:27					</div>
				</div>
				<div class="post-content content">
					<p>firstboot wil erase the entire JFFS2 partition. This is only on very seldom occasions really adept and necessary!</p><p>If you want to implement some fancy and complicated configuration, rather go step by step. Check after each step, if it results in a bricked device, use the failsafe mode to undo only the last step and proceed from there on again instead of erasing your entire work by &quot;simply&quot; typing firstboot. imo.</p><p>Also, you should read the available documentation first. From your posting I understand, you have not read the wiki-page about the failsafe mode. It does not only tell you to &quot;type firstboot&quot; but also explains what happens, so you wouldn&#039;t have so much trouble.</p><p>OpenWrt is quite well documented. You are welcome to augment the available documentation where you see demand.</p><p>Ah, jedem das seine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203909">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						6 Jun 2013, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>OK, I put my hands up! I have no idea what jedem das seine is, or even what language!<br />I have visions of a huge Dam flooding Paris (which might get rid of the smell of urine along some areas of the Seine)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203911">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">shabbir1282</div>
					<div class="post-datetime">
						6 Jun 2013, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>what im saying, i upgraded my tplink to enable port mirroring, now if i normally boot the router and assign ip to eth0 it doesnt work ip is assigned but i can ping to and from the router. </p><p>if&nbsp; i boot the router in fail-safe mode and assign ip to eth0. i can even access the web gui.</p><p>also tried fail-safe.</p><p>thanks,<br />shabbir.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203914">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						6 Jun 2013, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>Can you provide the changes you made to do port mirroring?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203915">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						6 Jun 2013, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>I am sorry, but I do not understand your problem. I simply assumed you have an underling problem, because you do not fully understand how OpenWrt Failsafe mode works and for what scenarios it is intended for!</p><p>Whether you need or can have working &quot;port mirroring&quot; with the embedded switch and with only one NIC (that is eth0) is again a totally different problem.<br />1. Understand OpenWrt<br />2. implement port mirorring or try alternative with iptables and TEE</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203917">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">shabbir1282</div>
					<div class="post-datetime">
						6 Jun 2013, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>I wanted to mirror all the traffic of one port of the tp-link switch to its one other port, so i applied the patch from here, <a href="https://dev.openwrt.org/ticket/10202.">https://dev.openwrt.org/ticket/10202.</a> after which the router rebooted but nothign works i accessed it via serial console where if i run ifconfig it doesnt show any thing.... we can dig it down more.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>