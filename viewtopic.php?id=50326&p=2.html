<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Run Docker containers on OpenWrt?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 11 Apr 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=50326&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p272706">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">mrpositive</div>
					<div class="post-datetime">
						16 Apr 2015, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>Just wondering if anyone is still pursuing this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272749">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						16 Apr 2015, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>I am still awaiting from NodeGuy&#039;s response. Perhaps, this <a href="https://forum.openwrt.org/viewtopic.php?id=56845">Building OpenWRT on Docker</a> discussion thread will be useful for you to get started.</p>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 16 Apr 2015, 16:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274420">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">nikescar</div>
					<div class="post-datetime">
						29 Apr 2015, 11:37					</div>
				</div>
				<div class="post-content content">
					<p>Docker Requriements</p><p><a href="http://docs.docker.com/installation/binaries/">http://docs.docker.com/installation/binaries/</a></p><p>I dont think libcontainer has been ported to openwrt. it&#039;s most critical.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274436">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						29 Apr 2015, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>To this date, I still have no idea why I would need docker. Does it natively run on a device flashed with an OpenWRT firmware? If so, what can it do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293516">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">zixia</div>
					<div class="post-datetime">
						26 Sep 2015, 06:48					</div>
				</div>
				<div class="post-content content">
					<p>I love this idea, because I want to run docker inside my openwrt router. it will simplify lots of configuration works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293931">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">RussianNeuroMancer</div>
					<div class="post-datetime">
						29 Sep 2015, 14:48					</div>
				</div>
				<div class="post-content content">
					<p>I also interesting in trying Docker on OpenWRT if this will be possible.</p><p>There is already solution for LXC if anyone want to give it a try: <a href="https://forum.openwrt.org/viewtopic.php?pid=275064#p275064">https://forum.openwrt.org/viewtopic.php â€¦ 64#p275064</a></p>											<p class="post-edited">(Last edited by <strong>RussianNeuroMancer</strong> on 29 Sep 2015, 15:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293936">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						29 Sep 2015, 15:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zixia wrote:</cite><blockquote><p>I love this idea, because I want to run docker inside my openwrt router. it will simplify lots of configuration works.</p></blockquote></div><p>I just can&#039;t perceive how this will be possible. Care to elaborate with some examples?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355538">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">maxfuchs</div>
					<div class="post-datetime">
						3 Apr 2017, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>Has there been any progress on this?<br />I&#039;m trying to get an instance of docker running on openWRT myself.<br />So far I&#039;ve tried to run a prebuilt Docker on my ARM Platform. </p><p>An attemp to run &quot;dockerd &amp;&quot; gave me:<br /></p><div class="quotebox"><blockquote><p>root@lede:~# WARN[0000] could not change group /var/run/docker.sock to docker: group docker not found <br />&nbsp; &nbsp; INFO[0000] libcontainerd: new containerd process, pid: 2902 <br />&nbsp; &nbsp; WARN[0000] containerd: low RLIMIT_NOFILE changing to max&nbsp; current=1024 max=4096<br />&nbsp; &nbsp; WARN[0001] unable to modify root key limit, number of containers could be limited by this quota: open /proc/sys/kernel/keys/root_maxkeys: no such file or directory <br />&nbsp; &nbsp; Error starting daemon: error while opening volume store metadata database: madvise: function not implemented</p></blockquote></div><p>this doesn&#039;t look too bad, right?<br />The Docker Installation guide points out that I need to have &quot;a properly mounted cgroupfs hierarchy&quot;<br />As my error output says something about groups, my guess is that I need to set up a cgroup hierarchy.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363948">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">yichya</div>
					<div class="post-datetime">
						19 Aug 2017, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>This is made possible on Chaos Calmer built for x86-64 platform, however building from source code is required.</p><p>First add these to targets/linux/x86/config-3.18(i don&#039;t remember the actual path but seems so):</p><div class="codebox"><pre><code>CONFIG_ADVISE_SYSCALLS=y
CONFIG_KEYS=y
CONFIG_EXT4_FS_POSIX_ACL=y
CONFIG_EXT4_FS_SECURITY=y
CONFIG_KEYS_DEBUG_PROC_KEYS=y
CONFIG_AUDIT=y
CONFIG_AUDITSYSCALL=y
CONFIG_SCHED_AUTOGROUP=y
CONFIG_TMPFS_POSIX_ACL=y
CONFIG_PROC_KCORE=y
CONFIG_JFFS2_FS_POSIX_ACL=y
CONFIG_JFFS2_FS_SECURITY=y
CONFIG_X86_DECODER_SELFTEST=y</code></pre></div><p>Then in Global Build settings select everything related to namespace, cgroup and lxc, select kmod-veth in Network Support, select everything related to ebtables(just use search) and kmod-nf-nathelper kmod-nf-nathelper-extra in Netfilter Extensions.</p><p>Also select iptables-mod-conntrack-extra iptables-mod-extra iptables-mod-ipsec iptables-mod-nat-extra in iptables, and procps xz-utils in Utiltites.</p><p>Start the build now and you&#039;ll get what you want.</p><p>I&#039;m not allowed to post image or links here, if possible I&#039;m willing to share my prebuilt image and buildroot environment(a docker image).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363957">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">RussianNeuroMancer</div>
					<div class="post-datetime">
						19 Aug 2017, 15:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yichya wrote:</cite><blockquote><p>I&#039;m not allowed to post image or links here, if possible I&#039;m willing to share my prebuilt image and buildroot environment(a docker image).</p></blockquote></div><p>Use link shorter and post link with spaces, just like this: <br />bit. ly /2ifHGW8</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363964">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						19 Aug 2017, 17:06					</div>
				</div>
				<div class="post-content content">
					<p>hmm, can somebody tell me a good reason/good example to install docker on an OpenWRT router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364233">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">maxfuchs</div>
					<div class="post-datetime">
						24 Aug 2017, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>here is my full kernel config that I used to get it running: bit. ly /2wIvKSs</p><p>@rj-45<br />We&#039;re using it for research in the field of edge computing.<br />We use docker swarm as a cloud computing platform and the router would be one possible processing node for a task/application that is being deployed to the swarm. The router has the unique characteristic that it has a 0 hop distance to the user (-&gt; low latency). So the router might be the best node in the swarm to run a computationally light task for the user.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364262">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						24 Aug 2017, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>how about a swarm of raspberry pies? More power and space and a more stable implemantation of docker.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364319">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">maxfuchs</div>
					<div class="post-datetime">
						25 Aug 2017, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Yes, actually we switched to using a raspberry for our tests. Using the router was sort of a proof of concept. As routers are fairly ubiquitous in the environment they form an attractive platform for the deployment of edge computing services. Another reason to explore routers/Wifi-APs as an edge computing platform is, that they have unique contextual knowledge of theire end-devices (e.g., proximity, channel characteristics) which can be useful for applications. Also you can have applications create theire own Wifi-Network with custom SSID. This would allow for networked devices to be shipped preconfigured on that custom SSID and be operational out of the box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364321">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						25 Aug 2017, 15:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maxfuchs wrote:</cite><blockquote><p>unique contextual knowledge of theire end-devices (e.g., proximity, channel characteristics) which can be useful for applications.</p></blockquote></div><p>Which applications do you have in mind? <br /></p><div class="quotebox"><blockquote><p>Also you can have applications create theire own Wifi-Network with custom SSID.</p></blockquote></div><p>Where is the requierement for docker? <br /></p><div class="quotebox"><blockquote><p>This would allow for networked devices to be shipped preconfigured on that custom SSID and be operational out of the box.</p></blockquote></div><p> <br />I don&#039;t understand. What is the difference to a openwrt installation without docker?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364324">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">maxfuchs</div>
					<div class="post-datetime">
						25 Aug 2017, 16:24					</div>
				</div>
				<div class="post-content content">
					<p><strong>Which applications do you have in mind? </strong><br />E.g. I implemented a smart desktop lamp which used the currently connected devices in the network as a feature. If my ereader was connected (which it is only when in use) this would give the lamp a hint that it should turn on. I didn&#039;t use docker to broadcast that information to the lamp.</p><p><strong>Where is the requierement for docker? </strong><br />I gave these arguments to support the idea of using the Router as a computing platform in general. Not related to docker. </p><p>The benefit of using docker is that it makes the provisioning of applications across different routers/servers/Raspberrys easy. Think of a mobile user. He may run his application on different routers as he moves through the city. Those routers might all be part of a docker swarm, and we can dynamically move the application in form of a container between the routers.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=50326&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>