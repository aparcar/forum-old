<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WR741ND 64M Memory mod.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Feb 2018 and 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=27128&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=27128&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p119901">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pokot</div>
					<div class="post-datetime">
						28 Oct 2010, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody!<br />Today I resolder the memory chip on my Tp-link TL-wr741ND v1.9. The chip which I used is Infineon HYB25D512160BE-5 from Kingston DDR notebook memory (KVR333x64sc25/256). </p><p><span class="postimg"><img src="http://lh6.ggpht.com/_YCKhpRvR2wA/TMsSmHTWLKI/AAAAAAAAA9c/yk2hwFnuAuE/s640/0_DDR64.JPG" alt="http://lh6.ggpht.com/_YCKhpRvR2wA/TMsSmHTWLKI/AAAAAAAAA9c/yk2hwFnuAuE/s640/0_DDR64.JPG" /></span> </p><p>boot log with 64M:<br />--------------------------- </p><p>U-Boot 1.1.4 (Mar&nbsp; 8 2010 - 10:29:42)</p><p>AP91 (ar7240) U-boot<br />DRAM:<br />sri<br />#### TAP VALUE 1 = c, 2 = d<br />64 MB<br />id read 0x100000ff<br />flash size 4194304, sector count = 64<br />Flash:&nbsp; 4 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7214<br />eth1: 00:03:7f:09:0b:ad<br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done<br />eth1 up<br />eth0, eth1<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>Linux version 2.6.32.10 (pokot@pokot-laptop) (gcc version 4.3.3 (GCC) ) #1 Thu Oct 14 19:19:03 CEST 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR7240 rev 2, CPU:350.000 MHz, AHB:175.000 MHz, DDR:350.000 MHz<br />Determined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR741ND<br />PID hash table entries: 256 (order: -2, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 61840k/65536k available (2022k kernel code, 3624k reserved, 385k data, 152k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... 232.65 BogoMIPS (lpj=1163264)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-WR741ND<br />registering PCI controller with io_map_base unset<br />bio: create slab &lt;bio-0&gt; at 0<br />PCI: fixup device 0000:00:00.0<br />pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:00:00.0: PME# disabled<br />PCI: mapping irq 48 to pin1@0000:00:00.0<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ÂŠ 2001-2006 Red Hat, Inc.<br />yaffs Oct 14 2010 19:11:30 Installing.<br />msgmni has been set to 120<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: en25f32 (4096 Kbytes)<br />Searching for RedBoot partition table in spi0.0 at offset 0x3fe000<br />Searching for RedBoot partition table in spi0.0 at offset 0x3ff000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=3A4000, len=4C000<br />0x0000003a4000-0x0000003f0000 : &quot;rootfs_data&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xba000000, irq 5<br />eth1: Atheros AG71xx at 0xb9000000, irq 4<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Distributed Switch Architecture driver version 0.1<br />eth0[0]: detected a Atheros AR7240 built-in switch<br />ar8216: Unknown Atheros device [ver=16777215, rev=255, phy_id=004dd041]<br />ar8216: Unknown Atheros device [ver=16777215, rev=255, phy_id=004dd041]<br />ar8216: Unknown Atheros device [ver=16777215, rev=255, phy_id=004dd041]<br />ar8216: Unknown Atheros device [ver=16777215, rev=255, phy_id=004dd041]<br />dsa slave smi: probed<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 152k freed<br />Please be patient, while OpenWrt loads ...<br />gpio-buttons driver version 0.1.2<br />input: gpio-buttons as /devices/platform/gpio-buttons/input/input0<br />Button Hotplug driver version 0.3.1<br />eth0: link up (1000Mbps/Full duplex)<br />- preinit -<br />Registered led device: tl-wr741nd:green:system<br />Registered led device: tl-wr741nd:green:qss<br />Press the [f] key and hit [enter] to enter failsafe mode<br />- regular preinit -<br />switching to jffs2<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /overlay<br />- init -<br />eth0: link down</p><p>Please press Enter to activate this console. eth0: link up (1000Mbps/Full duplex)<br />eth1: link up (100Mbps/Full duplex)<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />device lan1 entered promiscuous mode<br />device eth0 entered promiscuous mode<br />device lan2 entered promiscuous mode<br />device lan3 entered promiscuous mode<br />device lan4 entered promiscuous mode<br />Generic kernel compatibility enabled based on linux-next next-20100113<br />cfg80211: Calling CRDA to update world regulatory domain<br />cfg80211: World regulatory domain updated:<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />Registered led device: ath9k-phy0::radio<br />Registered led device: ath9k-phy0::assoc<br />Registered led device: ath9k-phy0::tx<br />Registered led device: ath9k-phy0::rx<br />phy0: Atheros AR9285 Rev:2 mem=0xb0000000, irq=48<br />cfg80211: Calling CRDA for country: US<br />cfg80211: Regulatory domain changed to country: US<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />&nbsp; &nbsp; (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />nf_conntrack version 0.5.0 (969 buckets, 3876 max)<br />ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />ar71xx-ohci ar71xx-ohci: Atheros AR71xx built-in OHCI controller<br />ar71xx-ohci ar71xx-ohci: new USB bus registered, assigned bus number 1<br />ar71xx-ohci ar71xx-ohci: irq 3, io mem 0x1b000000<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />uhci_hcd: USB Universal Host Controller Interface driver<br />usbcore: registered new interface driver usblp<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />device wlan0 entered promiscuous mode<br />br-lan: port 5(wlan0) entering forwarding state<br />device wlan0 left promiscuous mode<br />br-lan: port 5(wlan0) entering disabled state<br />device wlan0 entered promiscuous mode<br />br-lan: port 5(wlan0) entering forwarding state</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> Backfire (10.03, r20742) --------------------------<br />&nbsp; * 1/3 shot Kahlua&nbsp; &nbsp; In a shot glass, layer Kahlua<br />&nbsp; * 1/3 shot Bailey&#039;s&nbsp; on the bottom, then Bailey&#039;s,<br />&nbsp; * 1/3 shot Vodka&nbsp; &nbsp; &nbsp;then Vodka.<br /> ---------------------------------------------------<br />root@OpenWrt:~# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />&nbsp; Mem:&nbsp; &nbsp; &nbsp; &nbsp; 62064&nbsp; &nbsp; &nbsp; &nbsp; 20084&nbsp; &nbsp; &nbsp; &nbsp; 41980&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1692<br /> Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Total:&nbsp; &nbsp; &nbsp; &nbsp; 62064&nbsp; &nbsp; &nbsp; &nbsp; 20084&nbsp; &nbsp; &nbsp; &nbsp; 41980<br />root@OpenWrt:~#</p><br /><p>Good bye:</p><p>pokot</p>											<p class="post-edited">(Last edited by <strong>pokot</strong> on 29 Oct 2010, 21:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131118">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DrStein</div>
					<div class="post-datetime">
						19 Mar 2011, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>Was there necessary to recompile kernel or make some other firmware modifications?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131214">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">regressor</div>
					<div class="post-datetime">
						21 Mar 2011, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>The memory amount is detected by u-boot automatically. No changes needed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131846">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">pokot</div>
					<div class="post-datetime">
						29 Mar 2011, 09:30					</div>
				</div>
				<div class="post-content content">
					<p>Regressor is right. No changes nedded.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132228">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bonham</div>
					<div class="post-datetime">
						3 Apr 2011, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>What are compatible memory chips for&nbsp; WR741ND&nbsp; ???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132265">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pokot</div>
					<div class="post-datetime">
						4 Apr 2011, 11:27					</div>
				</div>
				<div class="post-content content">
					<p>I think all of the 64mbyte 333MHz DDR memory chip are suitable for this router. You find these in 256Mbyte notebook DDR module or 512Mbyte desktop PC DDR module.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132289">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bonham</div>
					<div class="post-datetime">
						4 Apr 2011, 21:14					</div>
				</div>
				<div class="post-content content">
					<p>Thx!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134750">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mibs510</div>
					<div class="post-datetime">
						6 May 2011, 05:24					</div>
				</div>
				<div class="post-content content">
					<p>@pokot<br />Do you think it is possible to solder a larger capacity chip? including speed (MHz)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p137509">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kimstik</div>
					<div class="post-datetime">
						19 Jun 2011, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>Chip AENEON AED93T500 form module PC3200U-30331 512MB DDR400 CL3 on my Tp-link TL-wr741ND v2.0 not worked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />I carefully resolder 3 times 3 different chips from this module in case of static/thermal damage.. with 0 result.<br />A12(pin42) routed on PCB.</p><p>Finally old chip soldered back work well (Zentel A3S56D40FTP-G5).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p137844">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">pokot</div>
					<div class="post-datetime">
						25 Jun 2011, 17:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kimstik wrote:</cite><blockquote><p>Chip AENEON AED93T500 form module PC3200U-30331 512MB DDR400 CL3 on my Tp-link TL-wr741ND v2.0 not worked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />I carefully resolder 3 times 3 different chips from this module in case of static/thermal damage.. with 0 result.<br />A12(pin42) routed on PCB.</p><p>Finally old chip soldered back work well (Zentel A3S56D40FTP-G5).</p></blockquote></div><p>I&#039;m not sure about it, but i think the AENEON chip is 64M*8bit and the Zentel chip is 16bit wide. maybe this is the problem.<br />The HYB25D512160 chip which i used also 32M*16bit.</p>											<p class="post-edited">(Last edited by <strong>pokot</strong> on 25 Jun 2011, 17:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138259">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">kimstik</div>
					<div class="post-datetime">
						30 Jun 2011, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>maybe.. but module with 8 chips<br />IMHO problem of timings or number of banks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138260">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">kimstik</div>
					<div class="post-datetime">
						30 Jun 2011, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>What do you thik about 32MB Flash upgrade with MX25L25635EZNI-12G ?<br />Maybe from <a href="http://fr.futureelectronics.com/fr/Technologies/Product.aspx?ProductID=MX25L25635EZNI12GMACRONIX1131059">http://fr.futureelectronics.com/fr/Tech … NIX1131059</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138293">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">pokot</div>
					<div class="post-datetime">
						1 Jul 2011, 11:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kimstik wrote:</cite><blockquote><p>What do you thik about 32MB Flash upgrade with MX25L25635EZNI-12G ?<br />Maybe from <a href="http://fr.futureelectronics.com/fr/Technologies/Product.aspx?ProductID=MX25L25635EZNI12GMACRONIX1131059">http://fr.futureelectronics.com/fr/Tech … NIX1131059</a></p></blockquote></div><p>I replaced the flash chip to w25q64 some months ago but there was problems:&nbsp; <br />- i had to patch the kernel source (JEDEC ID + mtd partitions)<br />- the wifi didnt work because the place of the art partition i think (the solution is here: <a href="https://forum.openwrt.org/viewtopic.php?id=28343">https://forum.openwrt.org/viewtopic.php?id=28343</a>&nbsp; )<br />- i had to write the u-boot to the new flash with special programmer device (TOPMAX EETOOLS )</p>											<p class="post-edited">(Last edited by <strong>pokot</strong> on 1 Jul 2011, 19:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142018">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">CraFT</div>
					<div class="post-datetime">
						24 Aug 2011, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>Today i resoldered stock memory chip on my rev2.4 router with NCP memory module (chip NP25D3216512K-6, used many times for modding asus wl-500gp). U-boot has detected 64mb, but hangs.</p><p>---------------bootlog start---------------</p><p>U-Boot 1.1.4 (Sep&nbsp; 3 2010 - 12:28:13)</p><p>AP91 (ar7240) U-boot<br />DRAM:<br />sri<br />#### TAP VALUE 1 = 8, 2 = 8<br />64 MB</p><p>--------nothing after this line------------</p><p>Is there chance of bad soldering or just u-boot bug?<br />Before resoldering chip router boots ok.</p><p>update: was bad soldering. Now boots with &quot;#### TAP VALUE 1 = b, 2 = b&quot; (dunno what that &quot;b&quot; means). Now &quot;memtesting&quot; for errors. Very Happy! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>											<p class="post-edited">(Last edited by <strong>CraFT</strong> on 24 Aug 2011, 15:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151892">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						23 Dec 2011, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>You should keep in mind, replace the memory with same memory organisation , you can find it on memory datasheet.</p><p>Is your router memory controller could handle memory address above 32mb ?.</p><p>Here some list of memory chip that has memory organisation 32x16bit</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=150253#p150253">https://forum.openwrt.org/viewtopic.php … 53#p150253</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192321">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">kimstik</div>
					<div class="post-datetime">
						17 Feb 2013, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>I had a bit of time in the evening.<br />64M RAM works fine.<br />Flash upgraded to 32MB<br />It remains only to build custom openwrt code for 32MB template.<br />Maybe somebody will compile it? If not I will wait until the next free evening <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="http://www.use.com/c206389406f80510d835?p=1"><span class="postimg"><img src="http://media.use.com/images/s_1/c206389406f80510d835_1.jpg" alt="http://media.use.com/images/s_1/c206389406f80510d835_1.jpg" /></span></a> <a href="http://www.use.com/c206389406f80510d835?p=2"><span class="postimg"><img src="http://media.use.com/images/s_1/c206389406f80510d835_2.jpg" alt="http://media.use.com/images/s_1/c206389406f80510d835_2.jpg" /></span></a> <a href="http://www.use.com/c206389406f80510d835?p=3"><span class="postimg"><img src="http://media.use.com/images/s_1/c206389406f80510d835_3.jpg" alt="http://media.use.com/images/s_1/c206389406f80510d835_3.jpg" /></span></a></p><p>Terminal log file<br />Date: 17.02.2013 - 19:48:48<br />-----------------------------------------------</p><br /><p>U-Boot 1.1.4 (May 31 2010 - 09:46:31)</p><p>AP91 (ar7240) U-boot<br />DRAM:&nbsp; <br />sri<br />#### TAP VALUE 1 = 9, 2 = a<br />64 MB<br />id read 0x100000ff<br />flash size 4194304, sector count = 64<br />Flash:&nbsp; 4 MB<br />Using default environment</p><p>BOARD IS NOT CALIBRATED!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7240_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7014<br />eth0: <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />eth0 up<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7214<br />eth1: <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />ATHRS26: resetting s26<br />ATHRS26: s26 reset done<br />eth1 up<br />eth0, eth1<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><br /><br /><br /><p>OpenWrt kernel loader for AR7XXX/AR9XXX</p><p>Copyright (C) 2011 Gabor Juhos &lt;juhosg@openwrt.org&gt;</p><p>Looking for OpenWrt image... found at 0xbf022000</p><p>Decompressing kernel... done!</p><p>Starting kernel at 80060000...</p><br /><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (blogic@Debian-60-squeeze-64-minimal) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Sun Nov 18 04:31:55 UTC 2012<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR7240 rev 2<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:350.000MHz, DDR:350.000MHz, AHB:175.000MHz, Ref:5.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WR741ND console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61496k/65536k available (2209k kernel code, 4040k reserved, 412k data, 212k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 232.24 BogoMIPS (lpj=1161216)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] gpiochip_add: registered GPIOs 0 to 17 on device: ath79<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-WR741ND<br />[&nbsp; &nbsp; 0.500000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.510000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.520000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.520000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.530000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.530000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.540000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />[&nbsp; &nbsp; 0.540000] pci 0000:00:00.0: using irq 40 for pin 1<br />[&nbsp; &nbsp; 0.550000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.550000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.560000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.560000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.570000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.570000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 0.580000] TCP reno registered<br />[&nbsp; &nbsp; 0.580000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.590000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.600000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.620000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.630000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.640000] msgmni has been set to 120<br />[&nbsp; &nbsp; 0.640000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br />[&nbsp; &nbsp; 0.650000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.650000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.660000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.690000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.700000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.700000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.710000] m25p80 spi0.0: found s25fl256s1, expected m25p80<br />[&nbsp; &nbsp; 0.720000] m25p80 spi0.0: s25fl256s1 (32768 Kbytes)<br />[&nbsp; &nbsp; 0.730000] spi0.0: no TP-Link header found<br />[&nbsp; &nbsp; 0.840000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 0.850000] eth0: Atheros AG71xx at 0xba000000, irq 5<br />[&nbsp; &nbsp; 1.400000] eth0: Found an AR7240/AR9330 built-in switch<br />[&nbsp; &nbsp; 2.440000] eth1: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 3.010000] ag71xx ag71xx.0: eth1: connected to PHY at ag71xx-mdio.0:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 3.020000] TCP cubic registered<br />[&nbsp; &nbsp; 3.020000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 3.020000] Bridge firewalling registered<br />[&nbsp; &nbsp; 3.030000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 3.030000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0)<br />[&nbsp; &nbsp; 3.040000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />[&nbsp; &nbsp; 3.050000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p><p>-----------------------------------------------<br />Date: 17.02.2013 - 19:49:33<br />End log file</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192367">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						18 Feb 2013, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>I think you just need a custom uboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192388">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						18 Feb 2013, 13:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>I think you just need a custom uboot.</p></blockquote></div><p>Do you know how to build tp-link uboot from the sdk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192433">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						18 Feb 2013, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Several threads have covered this issue. For quite some time now, the openwrt-firmware automatically detects the flash size, so no patching required there. Only uboot needs to be patched.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=146315#p146315">https://forum.openwrt.org/viewtopic.php … 15#p146315</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192459">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Dioptimizer</div>
					<div class="post-datetime">
						19 Feb 2013, 06:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kimstik wrote:</cite><blockquote><p>...<br />Flash upgraded to 32MB<br />It remains only to build custom openwrt code for 32MB template.<br />...</p></blockquote></div><p>One might first ask on the forum before using 256mb (32mb) flash chip.<br />The problem is that the SPI address space on all ar71xx/ar924x/ar91xx/ar933x/ar934x physically limited up to 128mbit (16mb).<br />If you&#039;ve heard info about 32mb router, it is based on two chips using 16mb spi0.0 and spi0.1 (two banks), example: WZRHPG300NH, WZR-HP-G450H.</p><p>By the way it can be implemented in the kernel without need change the uboot loader.</p><div class="quotebox"><cite>Datasheet wrote:</cite><blockquote><p>2.7 Serial Flash (SPI)<br />The single SPI chip select is dedicated to an <br />external flash to boot the chip. Two <br />configurable chip selects are available to bit-<br />bang using GPIOs that configure external <br />components. As an AHB slave, the SPI <br />controller only supports word transactions. <br />Because serial flash supports cached reads (but <br />not cached writes) functionality, the CPU must <br />perform uncached write, but a read can be <br />accelerated by performing cached reads. By <br />default, the REMAP_DISABLE bit is zero <br />which only 4 MBytes are accessible. By setting <br />this bit to 1, <strong>up to 16 MBytes</strong> of flash space can <br />be accessed.</p></blockquote></div><p><span class="postimg"><img src="http://dioptimizer.narod.ru/files/images/temp.png" alt="http://dioptimizer.narod.ru/files/images/temp.png" /></span><br /><em>HEX size 0x00FFFFFF = 128mbit(16mb)</em></p><p>Serial Flash 0x1F<strong>FFFFFF</strong> (default)<br />i.e. (0x1F000000 - 0x1FFFFFFF) == i.e. 128mbit</p>											<p class="post-edited">(Last edited by <strong>Dioptimizer</strong> on 19 Feb 2013, 07:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192460">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						19 Feb 2013, 07:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>Several threads have covered this issue. For quite some time now, the openwrt-firmware automatically detects the flash size, so no patching required there. Only uboot needs to be patched.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=146315#p146315">https://forum.openwrt.org/viewtopic.php … 15#p146315</a></p></blockquote></div><p>Thanks! Missed this thread.<br />I think it will be extremely helpful if we can &#039;mark&#039; useful threads so other users can find it easily.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192484">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						19 Feb 2013, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />I keep getting this error using the tplink sdk when I do &#039;make BOARD_TYPE=ap123 uboot&#039; (this is a mr3420v2.2 and I downloaded the correct sdk)<br />It seems that the toolchain is absent or not pointing correctly. Any idea why?<br />My build directory is in<br />/home/user_name/ap123_gpl/build/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192495">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						19 Feb 2013, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>Ok I got it. There are 2 Makefile.<br />The default Makefile is the one containing the build target for toolchain_prep<br />First you perform the command &#039;make BOARD_TYPE=apXXX toolchain_prep in the build folder<br />Then you copy the Makefile.apXXX to Makefile<br />Then perform the command &#039;make BOARD_TYPE=apXXX&#039; (read the readme.txt for the actual commands)<br />If you are using 64bit OS you need the following 32bit libraries:<br />zlib<br />zlib-devel<br />glibc<br />libstdc<br />libstdc-devel<br />libgcc<br />It will copy the binaries to some folder in the sdk if it doesn&#039;t exist it will create an error so make it.<br />Now I am worried because I am using Fedora 18 while the SDK was tested using Red Hat Enterprise 4...<br />Also how to keep the mac address and which file to edit the pll?<br />Edit I found the pll file it is in<br />apxxx/boot/u-boot/include/configs/apxxx.h</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 19 Feb 2013, 17:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192510">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						19 Feb 2013, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>While building the uboot I saw this<br />CFG_DUAL_PHY_SUPPORT 1<br />CONFIG_ATHRS17_PHY 1<br />Anyone knows what it does?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192815">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						22 Feb 2013, 16:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>Hi<br />I keep getting this error using the tplink sdk when I do &#039;make BOARD_TYPE=ap123 uboot&#039; (this is a mr3420v2.2 and I downloaded the correct sdk)<br />It seems that the toolchain is absent or not pointing correctly. Any idea why?<br />My build directory is in<br />/home/user_name/ap123_gpl/build/</p></blockquote></div><p>This my build log of ap123 :</p><div class="codebox"><pre><code>#tar -xvf ap123_gpl.tar.gz

#ls

#cd ap123_gpl

#ls

#cd build

#ls

#make BOARD_TYPE=ap123 toolchain_prep
.
.
.
#mkdir /home/xopal/TPL/ap123_gpl/build/../tftpboot
#mkdir /home/xopal/TPL/ap123_gpl/build/../tftpboot/ap123
.
.
#mkdir  /home/xopal/TPL/ap123_gpl/build/../images
#mkdir  /home/xopal/TPL/ap123_gpl/build/../images/ap123
.
.
#make BOARD_TYPE=ap123 uboot
.
.
.
#cd /home/xopal/TPL/ap123_gpl/build/../images/ap123

xopal@debian:~/TPL/ap123_gpl/images/ap123$ ls -la
total 56
drwxr-xr-x 2 xopal xopal  4096 Feb 22 20:59 .
drwxr-xr-x 3 xopal xopal  4096 Feb 22 20:59 ..
-rw-r--r-- 1 xopal xopal 48357 Feb 22 21:00 u-boot.bin</code></pre></div><br /><p>Patch for 16MB Flash size :</p><p>~/ap123_gpl/ap123/boot/u-boot/include/configs/db12x.h</p><div class="codebox"><pre><code>--- db12x.h    2012-05-10 09:13:15.000000000 +0700
+++ db12x.patch    2013-02-22 21:54:49.000000000 +0700
@@ -7,7 +7,7 @@
 
 #include &lt;configs/ar7240.h&gt;
 
-#define FLASH_SIZE 4
+#define FLASH_SIZE 16
 /*-----------------------------------------------------------------------
  * FLASH and environment organization
  */
@@ -357,7 +357,7 @@
 #else  /* CONFIG_ATH_NAND_FL */
 #define CFG_ENV_ADDR        0x9f040000
 #if (FLASH_SIZE == 16)
-#define CONFIG_BOOTCOMMAND &quot;bootm 0x9f055000&quot;
+#define CONFIG_BOOTCOMMAND &quot;bootm 0x9f020000&quot;
 #else  /* FLASH_SIZE == 16 */
 #ifdef COMPRESSED_UBOOT
 #if (FLASH_SIZE == 4)</code></pre></div>											<p class="post-edited">(Last edited by <strong>xopal</strong> on 28 Feb 2013, 12:34)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=27128&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=27128&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>