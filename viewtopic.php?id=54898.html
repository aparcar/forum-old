<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT Cavium and other questions</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p259727">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						3 Jan 2015, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I&#039;m always shooting simple questions, that&#039;s because I&#039;m a OpenWRT noobie and I have a LOT, I mean a LOT of questions because since I discovered OpenWRT I can&#039;t stop thinking in all possibilities to improve my shit, and by my &quot;shit&quot;&nbsp; I mean all stuff I have here.<br />I Have one TP-Link ER6120 Dual Wan router and it was a big disappointment, it&#039;s fast and has a superb WAN/LAN throughput, but just like all TP-Link stuff it&#039;s dumb and right now it&#039;s playing the &quot; $240 Bucks Paper Weight&quot; role in my office and the reason is: I cannot do tagged WAN and since now I have a ISP with tagged PPPOE I cannot use it.<br />I&nbsp; currently have one TL-WDR4300 as&nbsp; a main router and the perfomance isn&#039;t so great and there&#039;s a problem: The ER6120 has a Cavium Processor, detailed specs on the link below:<br /><a href="http://www.tp-link.com/lk/products/details/?model=TL-ER6120">http://www.tp-link.com/lk/products/deta … =TL-ER6120</a></p><p>My question is: There&#039;s a OpenWRT cavium image here: <a href="https://downloads.openwrt.org/snapshots/trunk/octeon.">https://downloads.openwrt.org/snapshots/trunk/octeon.</a><br />Since the Cavium images doesn&#039;t have any indication what the devices can be flashed with it how you guys are doing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259732">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						3 Jan 2015, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>The current cavium images will run on some development boards as well the ubnt edgerouter lite, there&#039;s no support for that tp-link unit, as we don&#039;t have one</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259744">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						4 Jan 2015, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi kaloz, thanks for your response.<br />Before start dreaming I think I need to know if the router it&#039;s compatible with OpenWRT, so I&#039;ll need at least the boot log is that it?<br />The router has a console port at the front (RJ45 to DB9 serial).My question is:<br /> This port works to intercept the boot log since it was placed there by the manufacturer?</p>											<p class="post-edited">(Last edited by <strong>joaopaulo.mello</strong> on 4 Jan 2015, 03:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260266">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">iamalittlepepper</div>
					<div class="post-datetime">
						6 Jan 2015, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>Since mostly likely the router is linux based you can try to the instructions here: <a href="http://wiki.openwrt.org/doc/devel/add.new.device">http://wiki.openwrt.org/doc/devel/add.new.device</a><br />and get the info.</p><p>I think the best is to purchase another router and contribute it to the dev team.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261465">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 22:06					</div>
				</div>
				<div class="post-content content">
					<p>I think before doing that, it&#039;s better to check openwrt compatibility and I think the boot log can help, please correct me if I&#039;m wrong.<br />Today I ran into my old pile of junkie and prepared a old Core 2 Quad, it&#039;s not easy to get a serial port on a computer these days. I successfully talk with the router, but only through the TP-LINK &quot;sucks&quot; CLI, very bad and very limited. I really don&#039;t understand why these companies keeps trying to reinvent the wheel delivering a crap of software, making CLI´s, wrappers and facades that never really do the job well, but it&#039;s another history.</p><p>Where am I? I&#039;m talking with router and I have a lot of questions, one of them is:<br />- How can you guys knows what to type at boot time to intercept the boot?<br />I tried to get the source code at TP-LINK GPL code center but no joy, isn&#039;t there...filled a complain with the support and they told me that the ER6120 isn&#039;t linux based, seriously? I asked on what it is based on and I get no answer until now.</p><p>I&#039;m really determined to put OpenWRT in this router, that said I opened the case and all chips that matters has heatsinks glued on it, I just can&#039;t remove the heatsink to read the chips brands, models and revisions without forcing it and breaking it. </p><p>Anyone can help me with something please?</p>											<p class="post-edited">(Last edited by <strong>joaopaulo.mello</strong> on 14 Jan 2015, 22:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261466">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Jan 2015, 22:22					</div>
				</div>
				<div class="post-content content">
					<p>I cannot help, but usually posting serial bootlog is a good point to start.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261471">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						14 Jan 2015, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>Sure, that&#039;s what I&#039;m trying to get...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261690">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						16 Jan 2015, 12:40					</div>
				</div>
				<div class="post-content content">
					<p>Anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261727">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						16 Jan 2015, 18:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>- How can you guys knows what to type at boot time to intercept the boot?</p></blockquote></div><p>Nothing. In most cases the bootlog is always send to the serial port.<br /></p><div class="quotebox"><blockquote><p>I tried to get the source code at TP-LINK GPL code center but no joy, isn&#039;t there...filled a complain with the support and they told me that the ER6120 isn&#039;t linux based, seriously? I asked on what it is based on and I get no answer until now.</p></blockquote></div><p>A simple &#039;strings&#039; on the firmware binary shows </p><div class="codebox"><pre><code>VxWorks
VxWorks 6.6
Jan 13 2014, 16:48:24</code></pre></div><p>So I guess it&#039;s VxWorks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>To know if the box can run OpenWRT you can open the box and look at the chips. If it has less than 16MiB ram you can forget OpenWRT. VxWorks needs less memory than Linux does.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261831">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						17 Jan 2015, 13:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Nothing. In most cases the bootlog is always send to the serial port.</p></blockquote></div><p>In this case it&#039;s not, maybe because I&#039;m using the the external serial port that comes with the router?</p><div class="quotebox"><blockquote><p>To know if the box can run OpenWRT you can open the box and look at the chips. If it has less than 16MiB ram you can forget OpenWRT. VxWorks needs less memory than Linux does.</p></blockquote></div><p>I opened the case and the memory chips is the only that I can read, it has 128MB and accordingly with TP-Link specs, it has 8MB flash. It&#039;s a Small Business Router with less horse power than&nbsp; several home routers, it&#039;s a shame.<br />I can build a OpenWRT image for the processor with the essential packages, but I need to know the flash layout and what switch it has in order to not brick losing the connectivity with router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261841">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						17 Jan 2015, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Do you have specifictions of the port? It can be RS232, or 5, 3.3 or 1.8V TTL. If you connect a 3.3V TTL port (most popular in routers) to a &#039;standard&#039; PC RS232 port, you won&#039;t receive anything.<br />If you have an oscilloscope it can tell you the levels on the TX. (And also the baudrate) if there is any signal on that port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263254">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						28 Jan 2015, 15:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>Do you have specifictions of the port? It can be RS232, or 5, 3.3 or 1.8V TTL. If you connect a 3.3V TTL port (most popular in routers) to a &#039;standard&#039; PC RS232 port, you won&#039;t receive anything.<br />If you have an oscilloscope it can tell you the levels on the TX. (And also the baudrate) if there is any signal on that port.</p></blockquote></div><p>Sorry for take so long to reply and thanks for your response Mijzelf.<br />I don&#039;t know the serial port specification but I think it&#039;s important to mention that it&#039;s a external serial port (RJ45) provided with the router, TP-Link packaged a RJ45 to DB9 cable with the router.<br />I can connect and use the TP-Link CLI without any issues using putty, but I can&#039;t see the boot log when the router is starting or resetted, maybe because it&#039;s a port provided by the manufacturer and have some limitations to avoid tweaks or there&#039;s no such thing?</p>											<p class="post-edited">(Last edited by <strong>joaopaulo.mello</strong> on 28 Jan 2015, 15:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263257">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						28 Jan 2015, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>Toke some pictures with cellphone, quality sucks but just to have an idea on which port I&#039;m talking about, the one labeled &quot;console&quot; </p><p><span class="postimg"><img src="https://drive.google.com/uc?export=download&amp;id=0B4TlEVfFFrMjV1BVbG1zOTZhUDQ" alt="https://drive.google.com/uc?export=download&amp;amp;id=0B4TlEVfFFrMjV1BVbG1zOTZhUDQ" /></span><br /><span class="postimg"><img src="https://drive.google.com/uc?export=download&amp;id=0B4TlEVfFFrMjX1VyTXN5SWVqbG8" alt="https://drive.google.com/uc?export=download&amp;amp;id=0B4TlEVfFFrMjX1VyTXN5SWVqbG8" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263260">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						28 Jan 2015, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>If you can access the CLI through that port, you are using the right type of port on your PC. I can think of several reasons why you don&#039;t see a bootlog:<br /></p><ul><li><p>The SoC has more than one serial port, and the bootlog is on another one.</p></li><li><p>The box boots silent, no output from bootloader and kernel.</p></li><li><p>The box changes baudrate after booting.</p></li><li><p>As the SoC probably has a 3.3V TTL serial port, a level convertor is needed. This convertor can be powered by a GPIO which is set when boot is done.</p></li><li><p>...</p></li></ul><p>You can search for another serial port on the mobo. In many cases 3 or 4 pins or solder islands, maybe labelled RX TX GND (Vcc).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263311">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						28 Jan 2015, 23:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>If you can access the CLI through that port, you are using the right type of port on your PC. I can think of several reasons why you don&#039;t see a bootlog:<br /></p><ul><li><p>The SoC has more than one serial port, and the bootlog is on another one.</p></li><li><p>The box boots silent, no output from bootloader and kernel.</p></li><li><p>The box changes baudrate after booting.</p></li><li><p>As the SoC probably has a 3.3V TTL serial port, a level convertor is needed. This convertor can be powered by a GPIO which is set when boot is done.</p></li><li><p>...</p></li></ul><p>You can search for another serial port on the mobo. In many cases 3 or 4 pins or solder islands, maybe labelled RX TX GND (Vcc).</p></blockquote></div><p>Cannot find another serial port anywhere on the mobo, so, it seems that I got TP-Linked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />What should I do to get a &quot;bin&quot; file out of Image Builder? The CLI has a update functionality that connects to a FTP server and download the file &quot;Update.bin&quot; to update the firmware. I&#039;ll build a very basic image with only the OpenWRT essentials to test, but it seems that cavium profile doesn&#039;t generate a &quot;bin&quot; file.<br />I know the chances to have a bricked router are sky high, but to be quite frankly, it will serve the purpose that it has today, bricked or not: Paper-weight.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263375">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						29 Jan 2015, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>A bin file? That is just a name, and doesn&#039;t say anything about the contents. It <em>suggests</em> that it contains only a raw flash dump, but I&#039;m pretty sure it doesn&#039;t.<br />The bin file I downloaded contains from address 0x01014 up:</p><div class="codebox"><pre><code>fwup-ptn partition-table base 0x00800 size 0x00800    
fwup-ptn product-info base 0x01000 size 0x00221    
fwup-ptn os-image base 0x01221 size 0x3cb401    
fwup-ptn soft-version base 0x3cc622 size 0x00015    
fwup-ptn profile base 0x3cc637 size 0x00c59    
fwup-ptn default-config base 0x3cd290 size 0x00db9    
fwup-ptn web-res base 0x3ce049 size 0xa303a    
fwup-ptn isp-addr-list base 0x471083 size 0x009d9    
fwup-ptn app-desc base 0x471a5c size 0x00519    
fwup-ptn app-db base 0x471f75 size 0x00c21</code></pre></div><p>and from 0x01818 up:</p><div class="codebox"><pre><code>partition fs-uboot base 0x00000 size 0x20000    
partition partition-table base 0x20000 size 0x02000    
partition default-mac base 0x30000 size 0x00020    
partition product-info base 0x30020 size 0x01000    
partition signature base 0x31020 size 0x00400    
partition hw-info base 0x3c000 size 0x04000    
partition os-image base 0x40000 size 0x500000    
partition soft-version base 0x540000 size 0x00100    
partition profile base 0x540100 size 0x02f00    
partition default-config base 0x543000 size 0x02000    
partition user-config base 0x550000 size 0x40000    
partition web-res base 0x590000 size 0x100000    
partition isp-addr-list base 0x690000 size 0x04000    
partition app-desc base 0x694000 size 0x10000    
partition app-db base 0x704000 size 0x20000    
partition license base 0x730000 size 0x10000    
partition log base 0x7e0000 size 0x20000    </code></pre></div><p>That <em>might</em> be a database which has to be flashed, and is read by the firmware, but I think it is information for the flashing mechanism, meaning this file has some structure.<br />*Maybe* all TP-link devices use this structure, in that case you might borrow parts of a TP-Link project to build your .bin file.</p><p>Having said that, I think flashing OpenWRT using the internal firmware updater is a reliable way to brick your box. Updating the firmware will write a new filesystem, and maybe a new kernel, but it will leave the bootloader. I don&#039;t think a bootloader which expects VxWorks will successfully boot Linux. So to boot OpenWRT you&#039;ll have to exchange the bootloader, or insert a 2nd bootloader which behaves as an VxWorks image.<br />Seeing your knowledge level, I think you&#039;d better sell this box and buy a OpenWRT supported model instead. (Or donate this box to the developer team)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263391">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">joaopaulo.mello</div>
					<div class="post-datetime">
						29 Jan 2015, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>Being a developer for almost two decades I know software very well, but you&#039;re right, my knowledge sucks regarding devices, firmware and stuff.<br />This is not a very popular model, so I think it&#039;s not worth the effort by the developer team. I just wanted something better than a consumer grade router to run openwrt at my home-office since I&#039;m having some perfomance issues with TL-WDR4300.<br />I have this guy <a href="http://www.supermicro.com/products/system/1U/5018/SYS-5018A-FTN4.cfm">SYS-5018A-FTN4</a> running OpenWRT Trunk x86_64 compiled with eglibc with SpeedStep,SMP and other goodies working without any issues, the perfomance is amazing much better than pfsense since the image was compiled with eglibc I can run another services that I&#039;m used to run on my linux box, but I don&#039;t feel comfortable having a &quot;computer&quot; running 24x7 as a internet gateway, I need perfomance: YES, but not that much and power saving is a must which I don&#039;t have using the supermicro. I have 2 wans, one FFTH 200Mbps and another Cable 100Mbps and I can&#039;t go above 180Mbps with consumer grade routers.<br />I don&#039;t think that TP-Link ER6120 is a top perfomance router, but it could be better than the most popular ones. I think I&#039;ll keep the supermicro for awhile and try to use for other things like TimeMachine, Mediaserver and so on.</p>											<p class="post-edited">(Last edited by <strong>joaopaulo.mello</strong> on 29 Jan 2015, 18:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367116">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">antreas32</div>
					<div class="post-datetime">
						21 Oct 2017, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi i know this is a old thread can someone confirm this is it a 14 pin ejjtag&nbsp; so i can try to install openwrt on this as my router is bricked<br />imgur.com/a/b9F3s</p>											<p class="post-edited">(Last edited by <strong>antreas32</strong> on 21 Oct 2017, 23:43)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>