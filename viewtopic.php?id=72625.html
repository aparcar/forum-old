<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> failsafe mode help needed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p368647">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						22 Nov 2017, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>OK i guess it had to happen at some point, but i&#039;ve finally had a bad flash to my r8000 and it is stuck in a boot loop.</p><p>after a bunch of messing around trying tftp etc i finally got it into failsafe mode and can ssh to the router.</p><p>When I try mount_root I get <br /></p><div class="codebox"><pre><code>root@(none):~# mount_root
loading kmods from internal overlay
overlay filesystem has not been fully initialized yet
switching to ubifs overlay</code></pre></div><p>unfortunately when I try firstboot or jffs2reset i get</p><div class="codebox"><pre><code>This will erase all settings and remove any installed packages. Are you sure? [N/y]
y
/dev/ubi0_1 is not mounted
/dev/ubi0_1 will be erased on next mount
writing /dev/ubi0_1 failed: Bad file descriptor</code></pre></div><p>trying to sysupgrade causes:</p><div class="codebox"><pre><code>root@(none):/tmp# sysupgrade -n -p -v lede*chk
Image metadata not found
Found CHK image with device board_id U12H315T00_NETGEAR
Found a valid TRX version 1
Commencing upgrade. All shell sessions will be closed now.
Failed to connect to ubus</code></pre></div><p>Any thoughts are appreciated!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368655">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						22 Nov 2017, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>although sysupgrade would not work for me using mtd did (sort of)&nbsp; after using mtd the router rebooted into tftp mode and I was able to flash the firmware.</p><p>I have seen a ton of posts from people with the same issue (reboot loop) who seemed their only hope was to get a serial cable.</p><p>To get into failsafe mode on this dang thing wait until the power light turns white then start mashing the reset button it will start to flash, then flash very fast and you will see pings that have a ttl of 64 permanently.</p><p>you can then ssh to the router, <br />use nc to transfer the file to /overlay/work/work<br />use mtd to write the firmware<br />if it reboots with a constant ping ttl of 100 (does it forever) its in tftp mode so send firmware again</p><p>hope this may help someone else stuck like me.</p>											<p class="post-edited">(Last edited by <strong>WWTK</strong> on 22 Nov 2017, 22:04)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>