<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> kernel panic - custom kernel</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p51950">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						7 Jul 2007, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello, ÃŽ&#039;m trying to create my custom kernel... some attempts were successfully but now I&#039;m stuck:</p><div class="codebox"><pre><code>Flash device: 0x800000 at 0x1fc00000
bootloader size: 262144
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007f0000 : &quot;linux&quot;
0x000f8000-0x007f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x00400000-0x007f0000 : &quot;rootfs_data&quot;
0x007f0000-0x00800000 : &quot;nvram&quot;
nf_conntrack version 0.5.0 (256 buckets, 2048 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Failed to execute /etc/preinit.  Attempting defaults...
Kernel panic - not syncing: No init found.  Try passing init= option to kernel.</code></pre></div><p>I guess this is because of an missing dependency, any hints about this?</p><p>thanks in advance<br />cheers michu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p51952">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">cyberstorm</div>
					<div class="post-datetime">
						7 Jul 2007, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>have u got in rootfs the file /etc/preinit and/or /sbin/init, that is usually a link to busybox ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p51953">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						7 Jul 2007, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Well as I couln&#039;t boot, I recreated my Image... I re-added this package (compiled into the kernel)</p><p>[*] libgcc............................................... GCC support library</p><p>now the error went away.. pretty strange...</p><p>when I reboot there is still a warning: Warning: unable to open an initial console.</p><div class="codebox"><pre><code>...
bootloader size: 262144
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007f0000 : &quot;linux&quot;
0x000f8000-0x007f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x00450000-0x007f0000 : &quot;rootfs_data&quot;
0x007f0000-0x00800000 : &quot;nvram&quot;
nf_conntrack version 0.5.0 (256 buckets, 2048 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 120k freed
Warning: unable to open an initial console.
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
...</code></pre></div><p>? ? &lt;*&gt; iptables............................... IPv4 firewall administration tool&nbsp; ---&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt;*&gt; libgcc............................................... GCC support library&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? --- libpthread.......................................... POSIX thread library&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt; &gt; libssp............................................... GCC support library&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt; &gt; libstdcpp.................................... GNU Standard C++ Library v3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt; &gt; mksh................................................................ mksh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt;*&gt; mtd............................... Update utility for trx firmware images&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt; &gt; qos-scripts.................................................. QoS scripts&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt;*&gt; uclibc........................................ C library embedded systems&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?<br />&nbsp; ? ? &lt; &gt; wireless-tools.......... Tools for manipulating Linux Wireless Extensions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;? ?</p><br /><p>what is the &quot;general&quot; recommendation for libgcc/libssp/libstdcpp/uclibc?</p><p>should the be enabled? </p><p>back to you question:</p><p>root@OpenWrt:/# ls -al /etc/preinit<br />-rwxr-xr-x&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1401 Jul&nbsp; 7&nbsp; 2007 /etc/preinit</p><p>root@OpenWrt:/# ls -al /sbin/init<br />lrwxrwxrwx&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14 Jul 11&nbsp; 2007 /sbin/init -&gt; ../bin/busybox</p><br /><p>another question about mount:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# mount --h
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro)
none on /proc type proc (rw)
none on /sys type sysfs (rw)
none on /tmp type tmpfs (rw,nosuid,nodev)
tmpfs on /dev type tmpfs (rw)
none on /dev/pts type devpts (rw)
/dev/mtdblock3 on /jffs type jffs2 (rw)
/jffs on / type mini_fo (rw)
root@OpenWrt:/# mount --help
BusyBox v1.4.2 (2007-07-07 07:21:50 CEST) multi-call binary

Usage: mount [-l] [-p PORT] [IPADDR PORTNUM]

Open a pipe to IP:port

Options:
        -l      Listen mode, for inbound connects
        -p PORT Local port number</code></pre></div><p>I guess the help for mount is pretty strange...</p>											<p class="post-edited">(Last edited by <strong>michu</strong> on 7 Jul 2007, 19:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52007">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ggp81</div>
					<div class="post-datetime">
						9 Jul 2007, 10:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>michu wrote:</cite><blockquote><p>what is the &quot;general&quot; recommendation for libgcc/libssp/libstdcpp/uclibc?</p><p>should the be enabled?</p></blockquote></div><p>I think you have not to include them if you are not using packages which require them.</p><p>About your problem, for what device are you building the firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54000">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">unverbraucht</div>
					<div class="post-datetime">
						16 Aug 2007, 14:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>michu wrote:</cite><blockquote><p>Well as I couln&#039;t boot, I recreated my Image... I re-added this package (compiled into the kernel)</p><p>[*] libgcc............................................... GCC support library</p><p>now the error went away.. pretty strange...</p></blockquote></div><p>Thanks for the info, you just saved my day <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /></p><div class="quotebox"><blockquote><p>when I reboot there is still a warning: Warning: unable to open an initial console.</p></blockquote></div><p>This is normal. The new preinit stuff doesn&#039;t need initial device files under /dev. Instead preinit creates them on the fly. The shell, which is started to created the devices, complains about this at first<br /></p><div class="quotebox"><blockquote><p>what is the &quot;general&quot; recommendation for libgcc/libssp/libstdcpp/uclibc?</p><p>should the be enabled?</p></blockquote></div><p>I run all my boxen with uclibc and uclibcxx and didn&#039;t need libstdcpp up to now. I *thought* that I didn&#039;t need libgcc, but now I know better <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I guess applications that depend on libssp should include it through Makefile dependency, but maybe that isn&#039;t possible...</p><div class="quotebox"><blockquote><div class="codebox"><pre><code>root@OpenWrt:/# mount --help
BusyBox v1.4.2 (2007-07-07 07:21:50 CEST) multi-call binary

Usage: mount [-l] [-p PORT] [IPADDR PORTNUM]

Open a pipe to IP:port

Options:
        -l      Listen mode, for inbound connects
        -p PORT Local port number</code></pre></div><p>I guess the help for mount is pretty strange...[</p></blockquote></div><p>Pretty bizarre <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54509">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">DD7</div>
					<div class="post-datetime">
						24 Aug 2007, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p><p>You are using Wrong loader or wrong firmware with wrong flash size. </p><p>So get a a correct firmware which must be same with ur board one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85484">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">aboaboit</div>
					<div class="post-datetime">
						9 Apr 2009, 21:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>michu wrote:</cite><blockquote><p>Well as I couln&#039;t boot, I recreated my Image... I re-added this package (compiled into the kernel)<br />[*] libgcc............................................... GCC support library<br />now the error went away.. pretty strange...</p></blockquote></div><p>I think I&#039;ve found a reason for that, if not an explanation:</p><div class="codebox"><pre><code>root@router-casa-andrea:/# ldd /bin/busybox
        libcrypt.so.0 =&gt; /lib/libcrypt.so.0 (0x2aabe000)
        libm.so.0 =&gt; /lib/libm.so.0 (0x2aae3000)
        libc.so.0 =&gt; /lib/libc.so.0 (0x2ab00000)
        ld-uClibc.so.0 =&gt; /lib/ld-uClibc.so.0 (0x2aaa8000)</code></pre></div><p>Naturally, this begs the question as to why busybox is requiring libc instead of being happy with uClibc and, also, why that specific busybox option requiring it isn&#039;t toggling the selection of libc. I&#039;ll open a ticket pointing to this thread, maybe it&#039;s nothing, maybe it isn&#039;t.</p><p>(Edit: ticket is at <a href="https://dev.openwrt.org/ticket/4908)">https://dev.openwrt.org/ticket/4908)</a></p>											<p class="post-edited">(Last edited by <strong>aboaboit</strong> on 10 Apr 2009, 09:26)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>