<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt on PC Engines APU2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p311817">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						17 Feb 2016, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m planning on buying a PC Engines APU2 (apu2b2 or apu2b4).<br />But about the LEDs. I saw serveral patches and build targets for the APU. But what is the current support in CC for the LEDs of the APU?</p><p>Regards,<br />Timeless</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315383">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						17 Mar 2016, 20:38					</div>
				</div>
				<div class="post-content content">
					<p>No one that can help me with my problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315386">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aafj</div>
					<div class="post-datetime">
						17 Mar 2016, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>You might find some owners on <a href="https://webchat.freenode.net/">irc #openwrt</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315387">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						17 Mar 2016, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>I will try tomorrow. But isn&#039;t it just better to use the forum instead so everyone can see the progress?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315405">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						17 Mar 2016, 21:55					</div>
				</div>
				<div class="post-content content">
					<p>It does help to document your progress here <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />&nbsp; But the developers and senior users may hang out more on IRC.</p><p>So please report back!&nbsp; TIA.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315408">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						17 Mar 2016, 22:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Timeless wrote:</cite><blockquote><p>No one that can help me with my problem?</p></blockquote></div><p>I&#039;m using an apu apu1d4 with current trunk. To be honest I never take care of the three LEDs, not really a vital part of a router ... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315410">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						17 Mar 2016, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>No clue if this will help but here is the config from my ALIX system file:<br /></p><div class="codebox"><pre><code>config led
    option name &#039;LAN&#039;
    option sysfs &#039;alix:1&#039;
    option default &#039;1&#039;
    option trigger &#039;netdev&#039;
    option dev &#039;br-lan&#039;
    option mode &#039;tx rx&#039;

config led
    option default &#039;0&#039;
    option name &#039;WiFi&#039;
    option sysfs &#039;alix:2&#039;
    option trigger &#039;none&#039;

config led
    option default &#039;0&#039;
    option name &#039;Heartbeat&#039;
    option sysfs &#039;alix:3&#039;
    option trigger &#039;heartbeat&#039;</code></pre></div><p>And then maybe then can help you ID what&#039;s what to set things up<br /><a href="http://www.pcengines.ch/support.htm">http://www.pcengines.ch/support.htm</a></p><p>Any one up for some ToH maintenance on this?<br /><a href="https://wiki.openwrt.org/toh/start?dataflt">https://wiki.openwrt.org/toh/start?dataflt</a>[Brand*~]=PC+Engines</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315492">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						18 Mar 2016, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>Of course, it is a question of taste, but having an APU as my homeserver, running Voyage, and several smaller openwrt devices, I would never consider running openwrt on the APU, too. <br />Simply because of the more familar &quot;standard&quot; LINUX setup on the APU, AND the immediate access to up-to-date device drivers, as I also run LTE-modem on my APU, and other stuff. Which usually only needs some &quot;./configure make make install&quot;&quot; to be built.</p>											<p class="post-edited">(Last edited by <strong>augustus_meyer</strong> on 18 Mar 2016, 11:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315495">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						18 Mar 2016, 11:38					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the replies. I would like to get support for the LEDs to indicate the network activity and load of the device. Because the NIC LEDs are not visible from the front.</p><p>And I also considered Voyage for the APU but I like to have it configurable from a web interface so I can monitor its status from any device without and specific software.</p><p>And thanks for the Alix information. I have to admit that this APU is a replacement of my older ALIX. But the ALIX and the APU are completely different in case of hardware. And I also first need to get the class led drivers working before I can use the LED config in OpenWRT</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 18 Mar 2016, 11:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315498">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">adam2104</div>
					<div class="post-datetime">
						18 Mar 2016, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>The LEDs do not work on the APU. I have an APU 1D4 running the latest trunk (compiled yesterday). Before I was running OpenWRT on it I was running Fedora 23. Fedora ran great, but lacks the necessary firewall features in firewalld to make it a proper router. I&#039;m using the OpenWRT x86-64 target.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315509">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						18 Mar 2016, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Yeah thats correct. Since there is no support for it yet pushed to OpenWRT. I found some patches:<a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037031.html">link</a> and they compile succesfully on the 15.05.1 tag but the apu led package is not there.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 18 Mar 2016, 14:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316087">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						22 Mar 2016, 12:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m now running a APU2 with a x64 image and everything except the LEDs/Button/CPU temp seems to work.</p><p>Anyone working on this platform?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316196">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">danielchisholm</div>
					<div class="post-datetime">
						22 Mar 2016, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>I am not yet doing OpenWRT work on this platform but I would like to start doing so right away.</p><p>I have an APU1D4 and will soon be getting some APU2C4s.&nbsp; My preference is to run OpenWRT on it but I have not had a chance to try yet.&nbsp; The wiki is a bit vague as to what currently works and what is broken.&nbsp; Running a generic x86 image might be &quot;good enough&quot; but I would really, really prefer to be able to run x64 and SMP.</p><p>@Timeless you mention that you are running an x64 image.... any hints on what to do to build it and get it running?&nbsp; Is it buildable from Chaos Calmer or just from trunk?</p><p>I&#039;m a bit new at this but would be quite willing to contribute to this in some way (e.g. update the wiki page once I figure out how to do this)</p><p>My first choice, by quite a wide margin, is to get OpenWRT running on the APU1/APU2.... if that doesn&#039;t work I will reluctantly use one of the other operating systems known to run on it.</p><p>Any hints, any words of encouragement...?</p>											<p class="post-edited">(Last edited by <strong>danielchisholm</strong> on 22 Mar 2016, 22:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316282">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">adam2104</div>
					<div class="post-datetime">
						23 Mar 2016, 14:19					</div>
				</div>
				<div class="post-content content">
					<p>There is a generic x86-x64 image / target. Works fine on the apu1d4. SMP and all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316473">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						24 Mar 2016, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>I tried the Chaos Calmer 15.05.1 release but because the collectd package is broken for x64 I&#039;m now running a trunk x64 snapshot. Everything is working except the LEDs and front button. </p><p>I installed the k10temp module to get a CPU temp readout and SMP is enabled by default.</p><p>Strange thing is that sensors-detect does not list my CPU as supported. But the k10temp seems to work anyway.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 24 Mar 2016, 12:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316487">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">danielchisholm</div>
					<div class="post-datetime">
						24 Mar 2016, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks @adam2104 and @Timeless.&nbsp; Since I made my post I compiled in my local workspace (can&#039;t recall if its CC 15.05 or 15.05.1) and &quot;openwrt-x86-64-combined-squashfs.img&quot; seems to work fine on my APU1D4, including SMP as adam2104 says.&nbsp; This is the first time I&#039;ve run OpenWRT on an x86 platform, and with multi-GBs of storage so I am still feeling my way around trying to decide if I should use the ext4 or the squashfs images.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316494">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						24 Mar 2016, 16:11					</div>
				</div>
				<div class="post-content content">
					<p>I would like to use the squashfs filesystem (because of the factory reset) but I can&#039;t find a way how to resize the overlayfs partition. Gparted and resizefs are not working.</p><p>And since I have a 32GB msata disk I would be nice to have a bigger partition.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 24 Mar 2016, 16:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316913">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						27 Mar 2016, 03:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><div class="quotebox"><cite>Timeless wrote:</cite><blockquote><p>No one that can help me with my problem?</p></blockquote></div><p>I&#039;m using an apu apu1d4 with current trunk. To be honest I never take care of the three LEDs, not really a vital part of a router ... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Are APU.1D really powerfull as they say? Can it route 1Gbps of traffic?</p><p>Are you satisfied with stability of APU, are there any issues?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316939">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						27 Mar 2016, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>I have only tried a 100Mbit link between LAN and WAN and it causes a 0.35 load on the APU1 and a 0.2 load on the APU2. So something tels me that it should be capable of routing 1000Mbit. But it also depends on the multi core integration of OpenWRT. But for now I see a almost equal load on all the 4 cores in the APU2.</p><p>Ps. I also noticed that hwclock does not work in the current trunk. It causes a segfault and it does not change the hardware clock at all.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 27 Mar 2016, 13:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316952">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						27 Mar 2016, 14:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>valentt wrote:</cite><blockquote><p>Are you satisfied with stability of APU, are there any issues?</p></blockquote></div><p>Using APU1d4 for years already, as home-server (ext. 1TB, int. SSD, int. LTE-modem, DSL)&nbsp; and development system (also for openwrt-buildroot).<br />Never any problem. <br />However, I run voyage on the APU, as I also needed up-to-date LTE-drivers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317613">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						31 Mar 2016, 23:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Timeless wrote:</cite><blockquote><p>Ps. I also noticed that hwclock does not work in the current trunk. It causes a segfault and it does not change the hardware clock at all.</p></blockquote></div><p>could you please list the steps to reproduce this issue? Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317671">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Avolin</div>
					<div class="post-datetime">
						1 Apr 2016, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>Sorry dont jnow about it ....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317893">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						3 Apr 2016, 02:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dibdot wrote:</cite><blockquote><p>could you please list the steps to reproduce this issue? Thanks!</p></blockquote></div><p>The steps are Install trunk ---&gt; type hwclock in the CLI. And thats it.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 3 Apr 2016, 02:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317919">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						3 Apr 2016, 09:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Timeless wrote:</cite><blockquote><div class="quotebox"><cite>dibdot wrote:</cite><blockquote><p>could you please list the steps to reproduce this issue? Thanks!</p></blockquote></div><p>The steps are Install trunk ---&gt; type hwclock in the CLI. And thats it.</p></blockquote></div><p>worksforme, tested with my own trunk buildroot versions for 1d4 and 2c4:</p><div class="codebox"><pre><code>root@blackhole:~# cat /etc/openwrt_release 
DISTRIB_DESCRIPTION=&#039;OpenWrt Designated Driver r49088&#039;
[...]

root@blackhole:~# cat /proc/cpuinfo 
processor    : 0
vendor_id    : AuthenticAMD
cpu family    : 20
model        : 2
model name    : AMD G-T40E Processor
[...]

root@blackhole:~# hwclock
Sun Apr  3 05:26:35 2016  0.000000 seconds</code></pre></div><br /><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/openwrt_release 
DISTRIB_DESCRIPTION=&#039;OpenWrt Designated Driver r49114&#039;
[...]

root@OpenWrt:~# cat /proc/cpuinfo 
processor    : 0
vendor_id    : AuthenticAMD
cpu family    : 22
model        : 48
model name    : AMD GX-412TC SOC
[...]

root@OpenWrt:~# hwclock 
Mon Mar  7 14:38:31 2016  0.000000 seconds</code></pre></div><p>check that &quot;/dev/rtc0&quot; and &quot;/proc/driver/rtc&quot; exist. Further more I&#039;m using stock busybox hwclock utility on both devices (check with hwclock --help).</p>											<p class="post-edited">(Last edited by <strong>dibdot</strong> on 3 Apr 2016, 09:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317929">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Timeless</div>
					<div class="post-datetime">
						3 Apr 2016, 10:40					</div>
				</div>
				<div class="post-content content">
					<p>Thats strange? Is there a dep missing from my installation or something. I used the imagebuilder to create a r49066 image for my apu2c4. And it gave me that segfault. Yesterday I also used a acpi x86 thin client with r49088 and it gave me that same message.</p><p>Did you install something else apart from the hwclock utility? It would be really nice to that hwclock working since my system time is 2 hours in the future so once I reboot collectd will start collecting data after 2 hours since&nbsp; it gets started before NTP sets the correct time.</p>											<p class="post-edited">(Last edited by <strong>Timeless</strong> on 3 Apr 2016, 10:41)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>