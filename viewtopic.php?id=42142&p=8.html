<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hi-Link wireless module HLK-RM04</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Jan 2018 and 26 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 8 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li class="pagination-current"><span>8</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=9.html">9</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p253387">
				<div class="post-metadata">
					<div class="post-num">Post #176</div>
					<div class="post-author">gunya.electronics</div>
					<div class="post-datetime">
						6 Nov 2014, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi all! I want to use in your project OpenWrt on HLK-RM04, but I have the following problems arise. I can not set up a wireless network, if I turn it and then reboot the system at the next startup everything hangs, and then the message &quot;out of memory&quot;<br />Log:<br /></p><div class="codebox"><pre><code>[    0.290000] io scheduler deadline registered (default)
[    0.310000] gpio-export gpio_export.5: 2 gpio(s) exported
[    0.330000] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.330000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20) is a 16550A
[    0.360000] console [ttyS0] enabled, bootconsole disabled
[    0.360000] console [ttyS0] enabled, bootconsole disabled
[    0.380000] 10000500.uart: ttyS1 at MMIO 0x10000500 (irq = 13) is a 16550A
[    0.400000] m25p80 spi32766.0: found w25q32, expected s25fl064k
[    0.420000] m25p80 spi32766.0: w25q32 (4096 Kbytes)
[    0.420000] 4 ofpart partitions found on MTD device spi32766.0
[    0.440000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:
[    0.440000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.460000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.470000] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.490000] 0x000000050000-0x000000400000 : &quot;firmware&quot;
[    0.500000] 0x00000013af7a-0x000000400000 : &quot;rootfs&quot;
[    0.510000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.540000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.550000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x3a0000, len=0x60000
[    0.570000] 0x0000003a0000-0x000000400000 : &quot;rootfs_data&quot;
[    0.590000] eth0: done loading
[    0.600000] rt3xxx-usbphy ubsphy.2: loaded
[    0.610000] rt2880_wdt 10000120.watchdog: Initialized
[    0.620000] TCP: cubic registered
[    0.630000] NET: Registered protocol family 17
[    0.640000] 8021q: 802.1Q VLAN Support v1.8
[    0.670000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    0.690000] Freeing unused kernel memory: 184K (80292000 - 802c0000)
procd: Console is alive
procd: - watchdog -
[    7.000000] usbcore: registered new interface driver usbfs
[    7.000000] usbcore: registered new interface driver hub
[    7.020000] usbcore: registered new device driver usb
[    7.040000] Button Hotplug driver version 0.4.1
[    7.050000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    7.070000] ehci-platform: EHCI generic platform driver
[    7.410000] rt3xxx-usbphy ubsphy.2: remote usb device wakeup disabled
[    7.410000] rt3xxx-usbphy ubsphy.2: UTMI 16bit 30MHz
[    7.410000] ehci-platform 101c0000.ehci: EHCI Host Controller
[    7.410000] ehci-platform 101c0000.ehci: new USB bus registered, assigned bus number 1
[    7.410000] ehci-platform 101c0000.ehci: irq 26, io mem 0x101c0000
[    7.730000] ehci-platform 101c0000.ehci: USB 2.0 started, EHCI 1.00
[    7.750000] hub 1-0:1.0: USB hub found
[    7.750000] hub 1-0:1.0: 1 port detected
[    7.770000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    7.770000] ohci-platform 101c1000.ohci: Generic Platform OHCI Controller
[    7.790000] ohci-platform 101c1000.ohci: new USB bus registered, assigned bus number 2
[    7.810000] ohci-platform 101c1000.ohci: irq 26, io mem 0x101c1000
[    7.890000] hub 2-0:1.0: USB hub found
[    7.890000] hub 2-0:1.0: 1 port detected
[    7.910000] input: gpio-keys-polled.3 as /devices/gpio-keys-polled.3/input/input0
kmod: ran 20 iterations
procd: - preinit -
[    8.720000] rt305x-esw 10110000.esw: link changed 0x00
Press the [f] key and hit [enter] to enter failsafe mode
mount_root: jffs2 is ready
[   12.640000] jffs2: notice: (291) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 8 of xref (0 dead, 0 orphan) found.
procd: - early -
procd: - watchdog -
procd: - init -
/sbin/hotplug-call: /etc/hotplug.d/usb/20-usb_mode: line 1: service_triggers: not found
Please press Enter to activate this console.
glob failed on /etc/init.d/usbmode
glob failed on /etc/init.d/usbmode
[   17.570000] NET: Registered protocol family 10
[   17.600000] nf_conntrack version 0.5.0 (208 buckets, 832 max)
[   17.630000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   17.680000] usbcore: registered new interface driver cdc_acm
[   17.700000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
[   17.700000] Loading modules backported from Linux version master-2013-06-27-0-gdcfa6d5
[   17.730000] Backport generated by backports.git backports-20130617-4-ge3220f5
[   17.750000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   17.810000] usbcore: registered new interface driver usbserial
[   17.830000] usbcore: registered new interface driver usbserial_generic
[   17.850000] usbserial: USB Serial support registered for generic
[   17.890000] xt_time: kernel timezone is -0000
[   17.900000] usbcore: registered new interface driver asix
[   17.900000] usbcore: registered new interface driver cdc_ether
[   18.310000] cfg80211: Calling CRDA to update world regulatory domain
[   18.340000] cfg80211: World regulatory domain updated:
[   18.350000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   18.370000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   18.390000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   18.390000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   18.420000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   18.420000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   19.940000] usbcore: registered new interface driver ch341
[   19.960000] usbserial: USB Serial support registered for ch341-uart
[   20.520000] usbcore: registered new interface driver ftdi_sio
[   20.520000] usbserial: USB Serial support registered for FTDI USB Serial Device
[   24.310000] usbcore: registered new interface driver mos7720
[   24.310000] usbserial: USB Serial support registered for Moschip 2 port adapter
[   25.050000] usbcore: registered new interface driver pl2303
[   25.050000] usbserial: USB Serial support registered for pl2303
[   25.070000] PPP generic driver version 2.4.2
[   25.090000] NET: Registered protocol family 24
[   25.760000] usbcore: registered new interface driver rndis_host
[   25.760000] usbcore: registered new interface driver option
[   25.760000] usbserial: USB Serial support registered for GSM modem (1-port)
[   26.160000] rt2800_wmac 10180000.wmac: failed to load eeprom property
[   26.180000] ieee80211 phy0: rt2x00lib_request_eeprom_file: Info - Loading EEPROM data from &#039;soc_wmac.eeprom&#039;.
[   26.200000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5350, rev 0500 detected
[   26.220000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 5350 detected
[   40.730000] device eth0.1 entered promiscuous mode
[   40.750000] device eth0 entered promiscuous mode
[   40.770000] br-lan: port 1(eth0.1) entered forwarding state
[   40.770000] br-lan: port 1(eth0.1) entered forwarding state
[   40.970000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.1: link becomes ready
[   42.770000] br-lan: port 1(eth0.1) entered forwarding state

[  146.350000] askfirst invoked oom-killer: gfp_mask=0x200da, order=0, oom_score_adj=0
[  146.350000] CPU: 0 PID: 339 Comm: askfirst Not tainted 3.10.12 #10
[  146.350000] Stack : 00000006 00000000 00000000 00000000 00000000 00000000 802e2b16 00000036
          80873818 80238544 802c2a8c 802811fb 00000153 000200da 00000000 00000000
          802812d0 8001ba10 80280000 80019428 00000000 00000000 80239dec 80519a7c
          80519a00 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 80519a08
          ...
[  146.730000] Call Trace:
[  146.730000] [&lt;80010670&gt;] show_stack+0x48/0x70
[  146.750000] [&lt;80059e6c&gt;] dump_header.isra.16+0x4c/0x138
[  146.750000] [&lt;8005a1b8&gt;] oom_kill_process+0xd4/0x3b0
[  146.770000] [&lt;8005a8f8&gt;] out_of_memory+0x290/0x2ec
[  146.770000] [&lt;8005d970&gt;] __alloc_pages_nodemask+0x558/0x63c
[  146.790000] [&lt;80072c4c&gt;] handle_pte_fault+0x1d4/0x918
[  146.790000] [&lt;80073440&gt;] handle_mm_fault+0xb0/0xdc
[  146.810000] [&lt;80013da0&gt;] do_page_fault+0x148/0x38c
[  146.810000] [&lt;80004820&gt;] ret_from_exception+0x0/0xc
[  146.830000] [&lt;80135640&gt;] n_tty_read+0x4d0/0x6ec
[  146.830000] [&lt;80130604&gt;] tty_read+0x9c/0x100
[  146.850000] [&lt;80087380&gt;] vfs_read+0xb4/0x14c
[  146.850000] [&lt;80087588&gt;] SyS_read+0x60/0xa4
[  146.850000] [&lt;80006544&gt;] stack_done+0x20/0x40
[  146.870000]
[  146.870000] Mem-Info:
[  146.880000] Normal per-cpu:
[  146.880000] CPU    0: hi:    0, btch:   1 usd:   0
[  146.890000] active_anon:742 inactive_anon:7 isolated_anon:0
[  146.890000]  active_file:3 inactive_file:39 isolated_file:0
[  146.890000]  unevictable:0 dirty:0 writeback:0 unstable:0
[  146.890000]  free:114 slab_reclaimable:240 slab_unreclaimable:843
[  146.890000]  mapped:1 shmem:13 pagetables:110 bounce:0
[  146.890000]  free_cma:0
[  146.950000] Normal free:456kB min:456kB low:568kB high:684kB active_anon:2968kB inactive_anon:28kB active_file:12kB inactive_file:156kB unevictable:0kB isolated(anon):0kB isolated(file):0kB present:16384kB managed:13180kB mlocked:0kB dirty:0kB writeback:0kB mapped:4kB shmem:52kB slab_reclaimable:960kB slab_unreclaimable:3372kB kernel_stack:408kB pagetables:440kB unstable:0kB bounce:0kB free_cma:0kB writeback_tmp:0kB pages_scanned:84 all_unreclaimable? yes
[  147.030000] lowmem_reserve[]: 0 0
[  147.040000] Normal: 0*4kB 3*8kB (U) 1*16kB (U) 1*32kB (U) 0*64kB 1*128kB (U) 1*256kB (U) 0*512kB 0*1024kB 0*2048kB 0*4096kB = 456kB
[  147.060000] 65 total pagecache pages
[  147.070000] 0 pages in swap cache
[  147.080000] Swap cache stats: add 0, delete 0, find 0/0
[  147.080000] Free swap  = 0kB
[  147.100000] Total swap = 0kB
[  147.100000] 4096 pages RAM
[  147.100000] 756 pages reserved
[  147.100000] 264181 pages shared
[  147.120000] 2956 pages non-shared
[  147.120000] [ pid ]   uid  tgid total_vm      rss nr_ptes swapents oom_score_adj name
[  147.140000] [  336]     0   336      219       15       4        0             0 ubusd
[  147.160000] [  339]     0   339      191       13       3        0             0 askfirst
[  147.170000] [  544]     0   544      372       49       4        0             0 netifd
[  147.190000] [  545]     0   545      397       44       3        0             0 network
[  147.210000] [  582]     0   582      288       18       4        0             0 dropbear
[  147.210000] [  598]     0   598      371       15       3        0             0 telnetd
[  147.240000] [  610]     0   610      285       18       5        0             0 uhttpd
[  147.250000] [  659] 65534   659      240       22       4        0             0 dnsmasq
[  147.270000] [  691]     0   691      211       20       4        0             0 ser2net
[  147.290000] [  703]     0   703      384       30       3        0             0 hotplug-call
[  147.300000] [  732]     0   732      384       30       3        0             0 hotplug-call
[  147.320000] [  734]     0   734      373       19       3        0             0 udhcpc
[  147.340000] [  741]     0   741      415       62       5        0             0 wifi
[  147.350000] [  745]     0   745      444       45       4        0             0 fw3
[  147.370000] [  746]     0   746      395       42       5        0             0 dhcp.script
[  147.390000] [  760]     0   760      415       63       5        0             0 wifi
[  147.390000] [  761]     0   761      415       64       5        0             0 wifi
[  147.420000] [  766]     0   766      384       29       4        0             0 hotplug-call
[  147.430000] [  768]     0   768      204       20       4        0             0 6relayd
[  147.450000] [  770]     0   770      387       32       4        0             0 S95done
[  147.470000] [  773]     0   773      372       17       4        0             0 6relayd-update
[  147.470000] [  777]     0   777      371       15       4        0             0 killall
[  147.500000] [  779]     0   779      371       16       3        0             0 sh
[  147.520000] [  780]     0   780      384       29       4        0             0 hotplug-call
[  147.520000] [  781]     0   781      277       15       3        0             0 ubus
[  147.550000] [  782]     0   782      370       13       4        0             0 sed
[  147.560000] [  783]     0   783      370       13       3        0             0 sysctl
[  147.580000] [  784]     0   784      370       13       3        0             0 logger
[  147.600000] Out of memory: Kill process 659 (dnsmasq) score 7 or sacrifice child
[  147.600000] Killed process 659 (dnsmasq) total-vm:960kB, anon-rss:88kB, file-rss:0kB</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253406">
				<div class="post-metadata">
					<div class="post-num">Post #177</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						6 Nov 2014, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>&gt;the message &quot;out of memory&quot;</p><p>What release?&nbsp; It has been reported that low-memory devices work best with AA (if at all, depending on what you&#039;re doing), not with BB or trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253501">
				<div class="post-metadata">
					<div class="post-num">Post #178</div>
					<div class="post-author">gunya.electronics</div>
					<div class="post-datetime">
						7 Nov 2014, 10:05					</div>
				</div>
				<div class="post-content content">
					<p>My wifi module has 16mb RAM and 4 mb flash. Install the OS on this instruction <a href="http://wiki.openwrt.org/toh/hilink/hlk-rm04">http://wiki.openwrt.org/toh/hilink/hlk-rm04</a> download it here <a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04/tree/master/image">https://github.com/JiapengLi/OpenWrt-Hi … ster/image</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256024">
				<div class="post-metadata">
					<div class="post-num">Post #179</div>
					<div class="post-author">yaqwsx_cz</div>
					<div class="post-datetime">
						30 Nov 2014, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />I followed &quot;Jeff Kent&quot; installation for OpenWRT on my module (<a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04/blob/master/README.md">https://github.com/JiapengLi/OpenWrt-Hi … /README.md</a>). After the flashing, the module seem to be quite dead - only the power LED ligths, WAN port LED are also ligth. When I connect ethernet to LAN, its LED starts flashing like the connection was established, however my PC can&#039;t connect - both dynamic, and static IP (192.168.16.100).&nbsp; When I connect the cable to WAN port the LEDs start synchronously blinking - but slowly 3 timers per second, perhaps - like it was some kind of error message. Also the green LED on module lights up. There are some data on serial port, however I can&#039;t read them, since I am not able to determine the baudrate - according LA it seems like boudrate 1M, however I am not able to decode the data.</p><p>What did I wrong? How can I unbrick the module?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256932">
				<div class="post-metadata">
					<div class="post-num">Post #180</div>
					<div class="post-author">wpagnon</div>
					<div class="post-datetime">
						8 Dec 2014, 06:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys,</p><p>same thing,</p><p>I&#039;m trying to install openWRT without success, I&#039;ve bricked 3 modules already.</p><p>I&#039;ve followed those instructions too</p><p><a href="http://wiki.openwrt.org/toh/hilink/hlk-rm04">http://wiki.openwrt.org/toh/hilink/hlk-rm04</a></p><p>I&#039;m using the dev board Kit-V2.3 of the HLK-RM04. any help would be greatfull. My main aim is to get it to work as Wi-Fi client with a device connected to the HLK-RM04 ethernet port, ATM it seem that the client Wi-Fi workes only for RS232 connection</p><p>as well, a question, I&#039;ve used the bootloader uboot128.img but there is as well uboot256.img.... is this an updated one or is it for diferent memory setup?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257813">
				<div class="post-metadata">
					<div class="post-num">Post #181</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						16 Dec 2014, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody,</p><p>If you are interested in freeing GPIO like I was and you can&#039;t find out how, like me, perhaps this helps. I managed to free six GPIOs.</p><p>First I freed GPIO0 (pin10) and GPIO14 (pin 25) by removing:</p><p>&gt; &nbsp; &nbsp; gpio-keys-polled {<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-keys-polled&quot;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; poll-interval = &lt;20&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; wps {<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;reset&quot;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 14 1&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,code = &lt;0x198&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&gt; &nbsp; &nbsp; };<br />&gt; <br />&gt; &nbsp; &nbsp; gpio-leds {<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-leds&quot;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; power {<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;hlk-rm04:red:power&quot;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio0 0 1&gt;;<br />&gt; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&gt; &nbsp; &nbsp; };</p><br /><p>from target/linux/ramips/dts/HLKRM04.dts. Then I freed GPIO7 (pin19), GPIO8 (pin26), GPIO9 (pin24) and GPIO10 (pin22) by modifying target/linux/ramips/dts/rt5350.dtsi. I changed:</p><p>ralink,function = &quot;uartf&quot;<br />into<br />ralink,function = &quot;gpio&quot;</p><p>Still unresolved how to turn both i2c pins into GPIO. The trivial modification of rt5350.dtsi doesn&#039;t work.</p><p>@wpagnon:<br />I replaced uboot first as described by <a href="https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04">https://github.com/JiapengLi/OpenWrt-HiLink-HLK-RM04</a> under &quot;This method is out of date&quot;.</p><p>To build the new firmware:<br />svn co svn://svn.openwrt.org/openwrt/branches/barrier_breaker<br />make menuconfig<br />Target System: Ralink RT288x/RT3xxx Subtarget: RT3x5x based boards Target Profile: HILINK HLK-RM04</p><p>Add functions to busybox like httpd, remove firewall and things you don&#039;t need.</p><p>make kernel_menuconfig<br />add 16M to kernel command line as described by JiapengLi.</p><p>Now make and hope for the best.<br />The result is in bin/ramips/ and is called openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin</p><p>If you use Ubuntu, copy this file to /var/lib/tftpboot and start tfpd:<br />sudo /usr/sbin/in.tftpd -u tftp --address 0.0.0.0:69 -s -l /var/lib/tftpboot</p><p>Now connect PC (fixed IP=192.168.16.100) to LAN interface of development board, connect serial port of PC to development board (57600,8,n,1), start GtkTerm if you use Ubuntu:</p><p>sudo gtkterm -p /dev/ttyUSB0 -s 57600 &amp;</p><p>Power up development board, e.g. from USB port of PC. This is all you need to flash: <a href="http://uip.nl.eu.org/HLKRM04/">http://uip.nl.eu.org/HLKRM04/</a></p><p>Press 2.<br />Press Y.<br />Input device IP (10.10.10.123) ==:192.168.16.1<br />Input server IP (10.10.10.3) ==:192.168.16.100<br />Input Linux Kernel filename (tim_uImage) ==:openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin</p><p>And there you go. Good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257820">
				<div class="post-metadata">
					<div class="post-num">Post #182</div>
					<div class="post-author">smarpl</div>
					<div class="post-datetime">
						16 Dec 2014, 03:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>suso wrote:</cite><blockquote><p>Then I freed GPIO7 (pin19), GPIO8 (pin26), GPIO9 (pin24) and GPIO10 (pin22) by modifying target/linux/ramips/dts/rt5350.dtsi. I changed:</p><p>ralink,function = &quot;uartf&quot;<br />into<br />ralink,function = &quot;gpio&quot;</p><p>Still unresolved how to turn both i2c pins into GPIO. The trivial modification of rt5350.dtsi doesn&#039;t work.</p></blockquote></div><p>It&#039;s not a good idea to modify rt5350.dtsi, since not only HLK-RM04 depends on it.</p><p>The following changes to HLKRM04.dts enable most GPIO pins<br /></p><div class="codebox"><pre><code>        palmbus@10000000 {
                uart@500 {
                        status = &quot;disabled&quot;;
                };
                        
                gpio1: gpio@660 {
                        status = &quot;okay&quot;;
                };

                        
.......................


        pinctrl {
                state_default: pinctrl0 {
                        gpio {
                                ralink,group = &quot;i2c&quot;, &quot;jtag&quot;, &quot;uartf&quot;, &quot;led&quot;;
                                ralink,function = &quot;gpio&quot;;
                        };
                };
        };</code></pre></div><p>And the result in /sys/class/gpio:</p><div class="codebox"><pre><code>root@OpenWrt:/sys/class/gpio# ls -v
export      gpio7       gpio11      gpio17      gpio21      gpio25      unexport
gpio0       gpio8       gpio12      gpio18      gpio22      gpio26
gpio1       gpio9       gpio13      gpio19      gpio23      gpiochip0
gpio2       gpio10      gpio14      gpio20      gpio24      gpiochip22
root@OpenWrt:/sys/class/gpio# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257999">
				<div class="post-metadata">
					<div class="post-num">Post #183</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						17 Dec 2014, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>Thank you smarpl, you nailed it. I left the uart enabled:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; palmbus@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uart@500 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>to configure the network at first boot through the development board console.</p><p>Even though, I now have 10 GPIOs:</p><p>GPIO0 (pin10)<br />GPIO1 (pin8)<br />GPIO2 (pin9)<br />GPIO7 (pin19)<br />GPIO8 (pin26)<br />GPIO9 (pin24)<br />GPIO10 (pin22)<br />GPIO14 (pin 25)<br />GPIO25 (pin 5)<br />GPIO26 (pin 23)</p><p>More than enough. Thanks again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258013">
				<div class="post-metadata">
					<div class="post-num">Post #184</div>
					<div class="post-author">smarpl</div>
					<div class="post-datetime">
						18 Dec 2014, 04:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>suso wrote:</cite><blockquote><p> I left the uart enabled:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; palmbus@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uart@500 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>to configure the network at first boot through the development board console.</p></blockquote></div><p>There are two UART interfaces on HLK-RM04 board. When uart@500 is disabled, the second one - uart lite (Pin20 - RX, Pin21 - TX) still can be used for console. <br />One more change to HLKRM04.dts required (forgot to paste in my previous message)<br /></p><div class="codebox"><pre><code>        chosen {
                bootargs = &quot;console=ttyS0,57600&quot;;
        };</code></pre></div><p>But if you prefer to use uart@500 for console, you can disable uartlite and get 2 more gpios - (GPIO16) Pin20 and GPIO15(Pin21). <br /></p><div class="codebox"><pre><code>        chosen {
                bootargs = &quot;console=ttyS0,57600&quot;;
        };

         palmbus@10000000 {
                uartlite@c00 {
                        status = &quot;disabled&quot;;
                };</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258098">
				<div class="post-metadata">
					<div class="post-num">Post #185</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						19 Dec 2014, 00:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>suso wrote:</cite><blockquote><p>Thank you smarpl, you nailed it. I left the uart enabled:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; palmbus@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; uart@500 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; status = &quot;okay&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>to configure the network at first boot through the development board console.</p><p>Even though, I now have 10 GPIOs:</p><p>GPIO0 (pin10)<br />GPIO1 (pin8)<br />GPIO2 (pin9)<br />GPIO7 (pin19)<br />GPIO8 (pin26)<br />GPIO9 (pin24)<br />GPIO10 (pin22)<br />GPIO14 (pin 25)<br />GPIO25 (pin 5)<br />GPIO26 (pin 23)</p><p>More than enough. Thanks again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p></blockquote></div><p>Can you upload your image file?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258571">
				<div class="post-metadata">
					<div class="post-num">Post #186</div>
					<div class="post-author">deece</div>
					<div class="post-datetime">
						24 Dec 2014, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks,</p><p>If you are having trouble with the unit rebooting after bringing WiFi up, try using a higher current {and regulated) power supply.</p><p>I was having lots of spontaneous reboots when powering the unit from a USB-&gt;TTL adapter, but it was stable when using a plug pack.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259218">
				<div class="post-metadata">
					<div class="post-num">Post #187</div>
					<div class="post-author">forsakenrider</div>
					<div class="post-datetime">
						30 Dec 2014, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>Anyone using this module? I have been using it as a WIFI dumb AP for about 10 months now and it&#039;s been great (With upgraded ram/flash) But now I&#039;ve moved and Im coming into config problems.</p><p>Basically I want to use it as a dumb AP, so no firewall or dhcp, and I want its WAN port to connect to my network, then have the LAN port available and the wifi. I have it working now but I am not able&nbsp; to SSH back into it from my network UNLESS I am on the WIFI of that machine, which is tough because I have two wifi routers to make sure I have good signal throughout my house.</p><p>In the stock /etc/config/network <br />there are a few lines for &quot;switch&quot;. Is there a switch of this router? How can I set up my interfaces so I still will have access to Luci/ssh from within my network?</p><p>Thanks for any help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259354">
				<div class="post-metadata">
					<div class="post-num">Post #188</div>
					<div class="post-author">igorp</div>
					<div class="post-datetime">
						31 Dec 2014, 22:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forsakenrider wrote:</cite><blockquote><p>Anyone using this module? I have been using it as a WIFI dumb AP for about 10 months now and it&#039;s been great (With upgraded ram/flash) But now I&#039;ve moved and Im coming into config problems.</p><p>Basically I want to use it as a dumb AP, so no firewall or dhcp, and I want its WAN port to connect to my network, then have the LAN port available and the wifi. I have it working now but I am not able&nbsp; to SSH back into it from my network UNLESS I am on the WIFI of that machine, which is tough because I have two wifi routers to make sure I have good signal throughout my house.</p><p>In the stock /etc/config/network <br />there are a few lines for &quot;switch&quot;. Is there a switch of this router? How can I set up my interfaces so I still will have access to Luci/ssh from within my network?</p><p>Thanks for any help.</p></blockquote></div><p>My second usage option is the same way as you want to do <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> First is as a classical router - but I need port forwarding plus some extra goodies which usually come with openwrt and others. It&#039;s pity that stock FW is that bad and almost no possibility for future upgrade <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I know this does not help you but it helps this topic to be more alive.</p><p>I was reading here and there that going from stock to OpenWrt is not so straightforward ... or is it? I bought only one module for my DIY project and don&#039;t want to waste it on experimenting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259388">
				<div class="post-metadata">
					<div class="post-num">Post #189</div>
					<div class="post-author">deece</div>
					<div class="post-datetime">
						1 Jan 2015, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks,</p><p>Just a heads up, trunk seems to break WiFi for this module. The tip of Barrier Breaker does work though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262884">
				<div class="post-metadata">
					<div class="post-num">Post #190</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						26 Jan 2015, 04:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have been struggling with this for a while (I&#039;m no Linux guru - lol) and after gathering information from many threads was able to successfully compile OpenWrt trunk 44152 for HLK-RM04. The HLK-RM04 was upgraded to 32M using ELPIDA DS2516APTA-75 SDRAM but the module is still only 4M Flash.</p><p> - This was all done in VirtualBox 4.3.20</p><p>Install Ubuntu Desktop 14.10 (32bit)</p><p>sudo apt-get update</p><p>sudo apt-get upgrade</p><p>sudo apt-get install subversion git-core build-essential libssl-dev libncurses5-dev gawk texinfo</p><p>sudo apt-get autoremove</p><p>mkdir openwrt</p><p>cd openwrt</p><p>svn co svn://svn.openwrt.org/openwrt/trunk</p><p>cd trunk</p><p>./scripts/feeds update -a</p><p>./scripts/feeds install -a</p><p>mkdir dl</p><p>Download this file <a href="http://www.cmake.org/files/v2.8/cmake-2.8.12.2.tar.gz">http://www.cmake.org/files/v2.8/cmake-2.8.12.2.tar.gz</a> and save it to openwrt &gt; trunk &gt; dl</p><p>rm -rf tmp</p><p>make kernel_menuconfig</p><p> &gt; Kernel hacking<br />&nbsp; &nbsp; &nbsp; &gt; rootfstype=squashfs,jffs2 Default kernel command string<br />change to rootfstype=squashfs,jffs2 mem=32M<br />Save and Exit</p><p>make menuconfig</p><p> &gt; Target System: Ralink RT288x/RT3xxx<br /> &gt; Subtarget: RT3x5x/RT5350 based boards<br /> &gt; Target Profile: HILINK HLK-RM04</p><br /><p> &gt; LuCI<br />&nbsp; &nbsp; &nbsp; &nbsp;&gt; Collections: luci (press &lt;Space&gt; until you get a *)<br />&nbsp; &nbsp; &nbsp; &nbsp;&gt; Protocols: luci-proto-3g (press &lt;Space&gt; until you get a *)<br />Save and Exit</p><p>Open folder Openwrt &gt; trunk &gt; target &gt; linux &gt; ramips &gt; dts<br />Open file HLKRM04.dts in gedit<br />Change the line near the top from - reg = &lt;0x0 0x1000000&gt;; to reg = &lt;0x0 0x2000000&gt;; **this to configure 32M SDRAM<br />Save and Exit</p><p>make</p><p>The firmware file openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin is in openwrt &gt; trunk &gt; bin &gt; ramips</p><p>I used the &quot;Installation (This method is out of date)&quot; from JiapengLi/OpenWrt-HiLink-HLK-RM04 page to upload the uboot256.img and openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin firmware.</p><p>So I hope this is able to help someone else...</p><p>Next task is to minimize the number of packages.</p>											<p class="post-edited">(Last edited by <strong>Brutus_NZ</strong> on 10 Feb 2015, 02:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263114">
				<div class="post-metadata">
					<div class="post-num">Post #191</div>
					<div class="post-author">igorp</div>
					<div class="post-datetime">
						27 Jan 2015, 15:21					</div>
				</div>
				<div class="post-content content">
					<p>One question before starting flashing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>What is the main shortage running openwrt with 16Mb memory? Is it usable for a simple router with or without wireless AP. Last thing what I want to do is some soldering.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263194">
				<div class="post-metadata">
					<div class="post-num">Post #192</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						28 Jan 2015, 02:44					</div>
				</div>
				<div class="post-content content">
					<p>This is just my short experience as I&#039;m no expert on this.<br />My first compile was with Luci but my mistake was not changing kernel and .dts to 32M.<br />With Luci and just 16M it ran very slowly and crashed frequently, basically unusable.</p><p>My suggestion -<br />Don&#039;t compile with Luci if only 16M<br />If you want Luci, upgrade the SDRAM to 32M or buy one of the newer HLK-RM04E with 32M SDRAM and 8M Flash</p>											<p class="post-edited">(Last edited by <strong>Brutus_NZ</strong> on 10 Feb 2015, 02:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263212">
				<div class="post-metadata">
					<div class="post-num">Post #193</div>
					<div class="post-author">igorp</div>
					<div class="post-datetime">
						28 Jan 2015, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>OK, thanks! I didn&#039;t know that 32M version exists until now. I&#039;ll try with 16M and if I brick it than I go for 32M module <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Anyway I can survive without Luci. Idea is to setup things and leave it alone.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263222">
				<div class="post-metadata">
					<div class="post-num">Post #194</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						28 Jan 2015, 10:52					</div>
				</div>
				<div class="post-content content">
					<p>ok sounds like you&#039;re on the right track.</p><p>You can follow my example but instead - </p><p>1/ Change rootfstype=squashfs,jffs2 mem=32M to rootfstype=squashfs,jffs2 mem=16M</p><p>2 /Don&#039;t add Luci in the make menuconfig</p><p>3/ Don&#039;t change the HLKRM04.dts file</p><p>4/ Use uboot128.img instead of uboot256.img</p><p>That should work fine with a 16M SDRAM, 4M Flash HLK-RM04</p>											<p class="post-edited">(Last edited by <strong>Brutus_NZ</strong> on 10 Feb 2015, 02:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263345">
				<div class="post-metadata">
					<div class="post-num">Post #195</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						29 Jan 2015, 04:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>smarpl wrote:</cite><blockquote><p>It&#039;s not a good idea to modify rt5350.dtsi, since not only HLK-RM04 depends on it.</p><p>The following changes to HLKRM04.dts enable most GPIO pins<br /></p><div class="codebox"><pre><code>        palmbus@10000000 {
                uart@500 {
                        status = &quot;disabled&quot;;
                };
                        
                gpio1: gpio@660 {
                        status = &quot;okay&quot;;
                };

                        
.......................


        pinctrl {
                state_default: pinctrl0 {
                        gpio {
                                ralink,group = &quot;i2c&quot;, &quot;jtag&quot;, &quot;uartf&quot;, &quot;led&quot;;
                                ralink,function = &quot;gpio&quot;;
                        };
                };
        };</code></pre></div><p>And the result in /sys/class/gpio:</p><div class="codebox"><pre><code>root@OpenWrt:/sys/class/gpio# ls -v
export      gpio7       gpio11      gpio17      gpio21      gpio25      unexport
gpio0       gpio8       gpio12      gpio18      gpio22      gpio26
gpio1       gpio9       gpio13      gpio19      gpio23      gpiochip0
gpio2       gpio10      gpio14      gpio20      gpio24      gpiochip22
root@OpenWrt:/sys/class/gpio# </code></pre></div></blockquote></div><p>Needing a bit of help with this.<br />I followed the above but I just get the 2 gpio&#039;s -<br /></p><div class="codebox"><pre><code>root@OpenWrt:/sys/class/gpio# ls -v
export      gpiochip0   gpiochip22  unexport</code></pre></div><p>My HLKRM04.dts is <br /></p><div class="codebox"><pre><code>/dts-v1/;

/include/ &quot;rt5350.dtsi&quot;

/ {
    compatible = &quot;HLKRM04&quot;, &quot;ralink,rt5350-soc&quot;;
    model = &quot;HILINK HLK-RM04&quot;;

    memory@0 {
        device_type = &quot;memory&quot;;
        reg = &lt;0x0 0x2000000&gt;;
    };

    chosen {
        bootargs = &quot;console=ttyS0,57600&quot;;
    };

    palmbus@10000000 {
        uart@500 {
            status = &quot;disabled&quot;;
        };

    gpio1: gpio@660 {
                        status = &quot;okay&quot;;
        };

        spi@b00 {
            status = &quot;okay&quot;;
            m25p80@0 {
                #address-cells = &lt;1&gt;;
                #size-cells = &lt;1&gt;;
                compatible = &quot;gd25q64&quot;;
                reg = &lt;0 0&gt;;
                linux,modalias = &quot;m25p80&quot;, &quot;s25fl064k&quot;;
                spi-max-frequency = &lt;10000000&gt;;

                partition@0 {
                    label = &quot;u-boot&quot;;
                    reg = &lt;0x0 0x30000&gt;;
                    read-only;
                };

                partition@30000 {
                    label = &quot;u-boot-env&quot;;
                    reg = &lt;0x30000 0x10000&gt;;
                    read-only;
                };

                factory: partition@40000 {
                    label = &quot;factory&quot;;
                    reg = &lt;0x40000 0x10000&gt;;
                    read-only;
                };

                partition@50000 {
                    label = &quot;firmware&quot;;
                    reg = &lt;0x50000 0x3b0000&gt;;
                };
            };
        };
    };

    pinctrl {
        state_default: pinctrl0 {
            gpio {
                ralink,group = &quot;i2c&quot;, &quot;jtag&quot;, &quot;uartf&quot;, &quot;led&quot;;
                ralink,function = &quot;gpio&quot;;
            };
        };
    };

    ethernet@10100000 {
        mtd-mac-address = &lt;&amp;factory 0x4&gt;;
    };

    wmac@10180000 {
        ralink,mtd-eeprom = &lt;&amp;factory 0&gt;;
    };

    ehci@101c0000 {
        status = &quot;okay&quot;;
    };

    ohci@101c1000 {
        status = &quot;okay&quot;;
    };

    gpio-keys-polled {
        compatible = &quot;gpio-keys-polled&quot;;
        #address-cells = &lt;1&gt;;
        #size-cells = &lt;0&gt;;
        poll-interval = &lt;20&gt;;
        wps {
            label = &quot;reset&quot;;
            gpios = &lt;&amp;gpio0 14 1&gt;;
            linux,code = &lt;0x198&gt;;
        };
    };

    gpio-leds {
        compatible = &quot;gpio-leds&quot;;
        power {
            label = &quot;hlk-rm04:red:power&quot;;
            gpios = &lt;&amp;gpio0 0 1&gt;;
        };
    };
};</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264056">
				<div class="post-metadata">
					<div class="post-num">Post #196</div>
					<div class="post-author">rtek1000</div>
					<div class="post-datetime">
						3 Feb 2015, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody!</p><p>My news:</p><p>Successfully changed the RAM chip, from 16MB to 32MB.<br />(Samsung K4S561632D-TC1L memory DIMM computer)<br /><span class="postimg"><img src="https://cloud.githubusercontent.com/assets/8660811/6018229/4ce2e15e-ab7c-11e4-9bcd-c59078aae8dd.jpg" alt="PunBB bbcode test" /></span></p><br /><p>Now I have 4MB flash and 32MB RAM <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The Luci worked fine now !!!</p><p>--------------------------------------------------</p><p>I tried setting the wifi to client with encryption and static IP, but do not work yet <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>--------------------------------------------------</p><p>I tried using the OpenWRT-HLK-rm04-4m-32m-luci-usb-mjpg.bin firmware but I found a bug, and I sent a question:<br /><a href="https://github.com/JiapengLi/OpenWrt-RT5350/issues/3">https://github.com/JiapengLi/OpenWrt-RT5350/issues/3</a><br /><span class="postimg"><img src="https://cloud.githubusercontent.com/assets/8660811/6017937/016baa46-ab7a-11e4-95b1-3214f75dad62.gif" alt="PunBB bbcode test" /></span></p><p>--------------------------------------------------</p><p>I&#039;ve had success with firmware version to 32 MB:<br /><a href="https://code.google.com/p/rcc/source/browse/trunk/projects/rt5350_mini_router/#rt5350_mini_router%2Fimg_32">https://code.google.com/p/rcc/source/br … r%2Fimg_32</a></p><p>There are great and different functions:</p><p>audio_streamer.bin<br />default.bin<br />dlna_server.bin<br />internet_radio.bin [need USB Audio Device]<br />internet_radio_wifi.bin [need USB Audio Device]<br />mini.bin<br />mini_luci_web.bin<br />mini_luci_web_wifi.bin<br />mqtt_server.bin<br />serial_server.bin [many drivers: CH341, PL2303 &amp; others]<br />uboot256.img<br />video_streamer.bin</p><p>But I need one with ser2net + wifi + LuCI with 32MB<br />to send any bytes for TCP server and communicate with the microcontroller via serial port.<br />[And if possible, in the future, I want to implement an automated program that controls some GPIO]</p><p>--------------------------------------------------</p><p>I would like to &#039;cook&#039; my firmware version (or perhaps find an already compiled), but I do not know much about OpenWrt.</p><p>I wrote apps for Android, Visual Studio, Python, Arduino and PIC (microcontroller), but for OpenWrt I have not learned!</p><p>I use kubuntu, I noticed that I will need to compile the Linux firmware.</p><p>Where can I find a tutorial on how to build a firmware to HLK-RM04 ???<br />(step-by-step, please!)</p><p>--------------------------------------------------</p><p>@hot-dog thanks for you answer! (post # 169)</p><p>Then I saw you found changing RAM size from 16MB to 32MB in firmware, you (or others) may explain in detail how to do this?</p><p>What do I need to edit the file HLKRM04.dts?</p><p>I found many tips, but do not help me to &#039;cook&#039;.</p><p>Thanks for all the guys that help us!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264102">
				<div class="post-metadata">
					<div class="post-num">Post #197</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						4 Feb 2015, 08:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rtek1000 wrote:</cite><blockquote><p>&lt;&lt;Snip&gt;&gt;</p><p>Where can I find a tutorial on how to build a firmware to HLK-RM04 ???<br />(step-by-step, please!)</p><p>&lt;&lt;Snip&gt;&gt;</p></blockquote></div><p>A step-by-step method is shown 7 Posts above ^</p><p>I&#039;m not sure what more you could need!</p>											<p class="post-edited">(Last edited by <strong>Brutus_NZ</strong> on 4 Feb 2015, 08:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264184">
				<div class="post-metadata">
					<div class="post-num">Post #198</div>
					<div class="post-author">rtek1000</div>
					<div class="post-datetime">
						4 Feb 2015, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>@Brutus_NZ</p><p>That&#039;s great !!!</p><p>Sorry not to see this!</p><p>Thank U!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264223">
				<div class="post-metadata">
					<div class="post-num">Post #199</div>
					<div class="post-author">Brutus_NZ</div>
					<div class="post-datetime">
						5 Feb 2015, 05:48					</div>
				</div>
				<div class="post-content content">
					<p>I was thinking that you may want to install the stable release of OpenWrt which is Barrier_Breaker.<br />My method above installs Chaos_Calmer which is the dev version and is missing quite a few packages.</p><p>To install Barrier_Breaker 14.07</p><p>Change the following steps -</p><p>From<br />svn co svn://svn.openwrt.org/openwrt/trunk<br />to<br />svn co svn://svn.openwrt.org/openwrt/branches/barrier_breaker</p><p>and</p><p>From<br />cd trunk<br />to<br />cd barrier_breaker</p><p>The firmware file openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin will be in openwrt &gt; barrier_breaker &gt; bin &gt; ramips</p><p>the rest should be the same.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267311">
				<div class="post-metadata">
					<div class="post-num">Post #200</div>
					<div class="post-author">djbugs</div>
					<div class="post-datetime">
						1 Mar 2015, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>Has someone got a second device running on the hardware SPI?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 8 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li class="pagination-current"><span>8</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=9.html">9</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>