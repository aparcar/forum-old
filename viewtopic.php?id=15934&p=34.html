<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is this router based on the infineon danube?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Oct 2014 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 34 of 40</div><nav><ul><li><a href="viewtopic.php%3Fid=15934&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=32.html">32</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=33.html">33</a></li><li class="pagination-current"><span>34</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=35.html">35</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=36.html">36</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=40.html">40</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p182722">
				<div class="post-metadata">
					<div class="post-num">Post #826</div>
					<div class="post-author">Pteridium</div>
					<div class="post-datetime">
						8 Nov 2012, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>In the last revision of trunk blogic solved some problems with the adsl modules:<br /><a href="https://dev.openwrt.org/changeset/34098">https://dev.openwrt.org/changeset/34098</a><br />and this is a ticket with the issue:<br /><a href="https://dev.openwrt.org/ticket/12340">https://dev.openwrt.org/ticket/12340</a></p><p>In /etc/config/network delete the line&nbsp; &quot;option annex &#039;a2p&#039;&quot; or write # al the beginning.<br />Some more information here (the OpenWRT images are for the arv7518):<br /><a href="http://foro.seguridadwireless.net/openwrt/openwrt-para-roters-astoria-de-ya-com/msg256236/#msg256236">http://foro.seguridadwireless.net/openw … #msg256236</a></p><p>Hope this information could be helpful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182806">
				<div class="post-metadata">
					<div class="post-num">Post #827</div>
					<div class="post-author">vpablos</div>
					<div class="post-datetime">
						9 Nov 2012, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi there.</p><p>Thanks Pteridium, this might be the reason.</p><p>I used an image from<br /><a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta/lantiq/danube/">http://downloads.openwrt.org/attitude_a … iq/danube/</a><br />because there was no valid image in <br /><a href="http://downloads.openwrt.org/attitude_adjustment/12.09-beta2/lantiq/danube/">http://downloads.openwrt.org/attitude_a … iq/danube/</a><br />and now the first is outdated and there is one valid image in the last one.</p><p>But I&#039;ll download the one in <br /><a href="http://downloads.openwrt.org/snapshots/trunk/lantiq/">http://downloads.openwrt.org/snapshots/trunk/lantiq/</a><br />because it&#039;s dated from 07-Nov-2012 and <br />the patch you talk about is from Nov 6, 2012 8:41:44 AM</p><p>Although maybe it is time for me to start learning how to compile OpenWRT<br />and generate my own image. I really want to ... ;-)</p><p>Thanks again.<br />Victor.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183315">
				<div class="post-metadata">
					<div class="post-num">Post #828</div>
					<div class="post-author">pgid69</div>
					<div class="post-datetime">
						15 Nov 2012, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Hello</p><p>A few days ago i tried to install OpenWrt on the SMC 7908 / Arcadyan 4518PW.<br />I followed instructions form Ayaya on page 27 of this topic.<br />Ayaya warns that in uboot from trunk, tftp and http are not working.<br />As this warning dates from may 2012, i though that uboot code was corrected.<br />Unfortunately i was wrong and i flashed a bootloader that could not upload anything.<br />As i have no skills in soldering, instead of enabling UART mode, i develop a small python program to upload something in memory by using command mw of uboot.</p><p>Here is the program :<br /></p><div class="codebox"><pre><code># -*- coding: utf-8 -*-
from __future__ import division #1/2 = float, 1//2 = integer, python 3.0 behaviour in 2.6, to make future port to 3 easier.
from __future__ import print_function
from optparse import OptionParser
import os
import struct
import sys
import zlib

debug = False
if not debug:
        import serial

# The maximum size to transfer if we can determinate the size of the file (if input data comes from stdin).
MAX_SIZE = 2 ** 30
LINE_FEED = &quot;\n&quot;

# Wait for the prompt
def getprompt(ser, addr, verbose):

        # Send a command who does not produce a result so when receiving the next line feed, only show the prompt will be returned
        ser.write(&quot;mw {0:08x} 0&quot;.format(addr) + LINE_FEED)
        # Flushing read buffer
        while ser.read(256):
                pass
        if verbose:
                print(&quot;Waiting for a prompt...&quot;, file = sys.stderr)
        while True:
                # Write carriage return and wait for a response
                ser.write(LINE_FEED)
                # Read the response
                buf = ser.read(256);
                if (buf.endswith(b&quot;=&gt; &quot;)):
                        if verbose:
                                print(&quot;Ok, prompt is &#039;&quot;, buf, &quot;&#039;&quot;, sep=&#039;&#039;, file = sys.stderr)
                        # The prompt returned starts with a line feed. This is the echo of the line feed we send to get the prompt.
                        # We keep this linefeed
                        return buf
                else:
                        # Flush read buffer
                        while ser.read(256):
                                pass

# Wait for the prompt and return True if received or False otherwise 
def writecommand(ser, command, prompt, verbose):

        # Write the command and a line feed, so we must get back the command and the prompt
        ser.write(command)
        ser.write(LINE_FEED)
        
        buf = ser.read(len(command))
        if (buf != command):
                if verbose:
                        print(&quot;Echo command not received. Instead received &#039;&quot;, buf, &quot;&#039;&quot;, sep=&#039;&#039;, file = sys.stderr)
                return False

        if verbose:
                print(&quot;Waiting for prompt...&quot;, file = sys.stderr)
        
        buf = ser.read(len(prompt))
        if (buf == prompt):
                if verbose:
                        print(&quot;Ok, prompt received&quot;, file = sys.stderr)
                return True
        else:
                if verbose:
                        print(&quot;Prompt not received. Instead received &#039;&quot;, buf, &quot;&#039;&quot;, sep=&#039;&#039;, file = sys.stderr)
                return False

def memwrite(ser, path, size, start_addr, verbose, debug):
        
        if not debug:
                prompt = getprompt(ser, start_addr, verbose)
        
        if (path == &quot;-&quot;):
                fd = sys.stdin
                if (size &lt;= 0):
                        size = MAX_SIZE 
        else:
                fd = open(path,&quot;rb&quot;)
                if (size &lt;= 0):
                        # Get the size of the file
                        fd.seek(0, os.SEEK_END);
                        size = fd.tell();
                        fd.seek(0, os.SEEK_SET);

        addr = start_addr
        bytes_read = 0
        crc32_checksum = 0
        while (bytes_read &lt; size):
                if ((size - bytes_read) &gt; 4):           
                        read_bytes = fd.read(4);
                else:
                        read_bytes = fd.read(size - bytes_read);

                if (len(read_bytes) == 0):
                        if (path == &quot;-&quot;):
                                size = bytes_read
                        break

                bytes_read += len(read_bytes)
                crc32_checksum = zlib.crc32(read_bytes, crc32_checksum) &amp; 0xFFFFFFFF
                
                while (len(read_bytes) &lt; 4):
                        read_bytes += b&#039;\x00&#039;

                (val, ) = struct.unpack(&quot;&gt;L&quot;, read_bytes)
                read_bytes = &quot;&quot;.format(val)

                str_to_write = &quot;mw {0:08x} {1:08x}&quot;.format(addr, val)
                if verbose:
                        print(&quot;Writing:&quot;, str_to_write, &quot;at:&quot;, &quot;0x{0:08x}&quot;.format(addr), file = sys.stderr)

                if debug:
                        str_to_write = struct.pack(&quot;&gt;L&quot;, int(&quot;{0:08x}&quot;.format(val), 16))

                if not debug:
                        if not writecommand(ser, str_to_write, prompt, verbose):
                                print(&quot;Found an error, so aborting&quot;, file = sys.stderr)
                                return

                # Increment address
                addr += 4

        if (bytes_read != size):
                print(&quot;Error while reading file &#039;&quot;, fd.name, &quot;&#039; at offset &quot;, bytes_read, sep=&#039;&#039;, file = sys.stderr)
        else:
                print(&quot;File successfully written. You should run command &#039;crc32&quot;, &quot; {0:08x}&quot;.format(start_addr), &quot; {0:08x}&quot;.format(bytes_read), &quot;&#039; on the modem and the result must be&quot;, &quot; {0:08x}&quot;.format(crc32_checksum), &quot;.&quot;, sep=&#039;&#039;, file = sys.stderr)
                
        fd.close()
        return

def main():

        optparser = OptionParser(&quot;usage: %prog [options]&quot;, version = &quot;%prog 0.1&quot;)
        optparser.add_option(&quot;--verbose&quot;, action = &quot;store_true&quot;, dest = &quot;verbose&quot;, help = &quot;be verbose&quot;, default = False)
        optparser.add_option(&quot;--serial&quot;, dest = &quot;serial&quot;, help = &quot;specify serial port&quot;, default = &quot;/dev/ttyUSB0&quot;, metavar = &quot;dev&quot;)
        optparser.add_option(&quot;--write&quot;, dest = &quot;write&quot;, help = &quot;write mem from file&quot;, metavar = &quot;path&quot;)
        optparser.add_option(&quot;--addr&quot;, dest = &quot;addr&quot;, help = &quot;mem address&quot;, default = &quot;0x80500000&quot;, metavar = &quot;addr&quot;)
        optparser.add_option(&quot;--size&quot;, dest = &quot;size&quot;, help = &quot;# bytes to write&quot;, default = &quot;0&quot;, metavar = &quot;size&quot;)
        (options, args) = optparser.parse_args()
        if (len(args) != 0):
                optparser.error(&quot;incorrect number of arguments&quot;)

        if not debug:
                ser = serial.Serial(options.serial, 115200, timeout=1)
        else:
                ser = open(options.write + &quot;.out&quot;, &quot;wb&quot;)
        
        if debug:
                prompt = getprompt(ser, options.verbose)
                writecommand(ser, &quot;mw 80500000 01234567&quot;, prompt, options.verbose)
                buf = ser.read(256)
                print(&quot;buf = &#039;&quot;, buf, &quot;&#039;&quot;, sep = &quot;&quot;)
                return

        if options.write:
                memwrite(ser, options.write, int(options.size, 0), int(options.addr, 0), options.verbose, debug)
        return

if __name__ == &#039;__main__&#039;:
        main()</code></pre></div><p>It works only with uboot (not brnboot).<br />First connect to the modem with serial and start the modem as explained in page 21 or 27 of this topic<br />Then launch the program above<br /></p><div class="codebox"><pre><code>ubootwrite.py --serial=/dev/ttyUSB0 --write=file_to_write --addr=0x80500000</code></pre></div><p>This will write the file in the memory of the modem.<br />Then you could use commands for uboot to flash it.</p><p>I run the program with python 2.7, but it should work with python 3.</p><p>PS : please note that it&#039;s one of my first program in Python. I started from brntool.py from Roc Valles (<a href="https://github.com/rvalles/brntool">https://github.com/rvalles/brntool</a>) and adapted it, so please be indulgent if you find the code is clumsy.</p>											<p class="post-edited">(Last edited by <strong>pgid69</strong> on 15 Nov 2012, 15:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183513">
				<div class="post-metadata">
					<div class="post-num">Post #829</div>
					<div class="post-author">onny</div>
					<div class="post-datetime">
						17 Nov 2012, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />the switch on my ARV752DPW router still won&#039;t work with the latest trunk r34222. I tried several vlan configurations but no traffic is routed on all ports <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>/etc/config/network:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;

config &#039;switch&#039; &#039;eth0&#039;
        option &#039;reset&#039; &#039;1&#039;
        option &#039;enable&#039; &#039;1&#039;
        option &#039;enable_vlan&#039; &#039;1&#039;

config &#039;switch_vlan&#039;
        option &#039;device&#039; &#039;eth0&#039;
        option &#039;vlan&#039; &#039;1&#039;
        option &#039;vid&#039; &#039;1&#039;
        option &#039;ports&#039; &#039;5 4 3 2 0t&#039;</code></pre></div><p>Also tried option ifname &#039;eth0.1&#039; and &#039;eth0.2&#039; for interface lan.</p><p>swconfig dev eth0 show:<br /></p><div class="codebox"><pre><code>Global attributes:
        reset: ???
        enable_vlan: ???
        trunk: 0
        trunk_sel: 0
Port 0:
        pvid: 0
        link: 0
        speed: 0
        nway: 1
Port 1:
        pvid: 15
        link: 0
        speed: 0
        nway: 1
Port 2:
        pvid: 1
        link: 0
        speed: 0
        nway: 1
Port 3:
        pvid: 1
        link: 0
        speed: 0
        nway: 1
Port 4:
        pvid: 1
        link: 0
        speed: 0
        nway: 1
Port 5:
        pvid: 5
        link: 0
        speed: 1
        nway: 0
VLAN 0:
        vid: 0
        ports: 0 5 
VLAN 1:
        vid: 1
        ports: 0 2 3 4 5 
VLAN 2:
        vid: 2
        ports: 2 5 
VLAN 3:
        vid: 3
        ports: 3 5 
VLAN 4:
        vid: 4
        ports: 4 5 
VLAN 5:
        vid: 5
        ports: 0 1 2 3 4 </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185695">
				<div class="post-metadata">
					<div class="post-num">Post #830</div>
					<div class="post-author">molinn</div>
					<div class="post-datetime">
						10 Dec 2012, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a vodafone BeWAN ARV4510-PW-A that I want to flash with openwrt.<br />the device has the following firmware info:</p><div class="codebox"><pre><code># fwburn -i
Current firmware:
  copyright             : Copyright (c) 2006-2008 BeWAN Systems
  platform              : Arcadyan vf-ARV4510PW-A-LF-L3 - Vodafone_PT
  platform              : A51404
  filename              : A51404-vodafone_PT4.2-17076.bin
  date                  : 2008-10-16-15:43:59
  svn version           : 17076
  boot status           : will boot
  boot order            : 2
  checksum              : NOT tested

Previous firmware:
  copyright             : Copyright (c) 2006-2008 BeWAN Systems
  platform              : Arcadyan vf-ARV4510PW-A-LF-L3
  platform              : A51400
  filename              : A51400-vodafone_PT4.2-17076.bin
  date                  : 2008-10-16-15:43:59
  svn version           : 17076
  boot status           : will boot
  boot order            : 1
  checksum              : NOT tested</code></pre></div><div class="codebox"><pre><code># cat /proc/mtd
dev:    size   erasesize  name
mtd0: 01000000 00020000 &quot;Flash&quot;
mtd1: 00020000 00008000 &quot;Loader&quot;
mtd2: 00020000 00020000 &quot;Config&quot;
mtd3: 007e0000 00020000 &quot;Firmware&quot;
mtd4: 007e0000 00020000 &quot;OldFirmware&quot;
mtd5: 00673000 00020000 &quot;ART&quot;</code></pre></div><div class="codebox"><pre><code># ls -la /dev/mtd 
drwxr-xr-x    1 root     root            0 Jan  1  1970 .
drwxr-xr-x    1 root     root            0 Jan  1  1970 ..
cr--r--r--    1 root     root      90,   0 Jan  1  1970 0
cr--r--r--    1 root     root      90,   1 Jan  1  1970 0ro
cr--r--r--    1 root     root      90,   2 Jan  1  1970 1
cr--r--r--    1 root     root      90,   3 Jan  1  1970 1ro
cr--r--r--    1 root     root      90,   4 Jan  1  1970 2
cr--r--r--    1 root     root      90,   5 Jan  1  1970 2ro
cr--r--r--    1 root     root      90,   6 Jan  1  1970 3
cr--r--r--    1 root     root      90,   7 Jan  1  1970 3ro
cr--r--r--    1 root     root      90,   8 Jan  1  1970 4
cr--r--r--    1 root     root      90,   9 Jan  1  1970 4ro
cr--r--r--    1 root     root      90,  10 Jan  1  1970 5
cr--r--r--    1 root     root      90,  11 Jan  1  1970 5ro
# ls -la /dev/mtdblock
drwxr-xr-x    1 root     root            0 Jan  1  1970 .
drwxr-xr-x    1 root     root            0 Jan  1  1970 ..
br--------    1 root     root      31,   0 Jan  1  1970 0
br--------    1 root     root      31,   1 Jan  1  1970 1
br--------    1 root     root      31,   2 Jan  1 01:07 2
br--------    1 root     root      31,   3 Jan  1  1970 3
br--------    1 root     root      31,   4 Jan  1  1970 4
br--------    1 root     root      31,   5 Jan  1  1970 5</code></pre></div><p>I already backup with dd to an usb all mtd from 0 to 5.<br />the result file from &quot;cat 1 2 3 4&quot; equals 0 mtd</p><p>My questions are:<br />- Can I flash directly the bootloader and firmware with dd and how, using <a href="http://downloads.openwrt.org/backfire/10.03.1/lantiq_danube/">http://downloads.openwrt.org/backfire/1 … iq_danube/</a><br /> openwrt-lantiq-danube-ARV4510PW-squashfs.image<br /> openwrt-lantiq-danube-ARV4510PW-uImage</p><p>- If dd doesn&#039;t work, can I use the mtd from <a href="http://downloads.openwrt.org/backfire/10.03.1/lantiq_danube/packages/mtd_13_lantiq.ipk">http://downloads.openwrt.org/backfire/1 … lantiq.ipk</a> loaded from a usb drive?</p><p>regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193782">
				<div class="post-metadata">
					<div class="post-num">Post #831</div>
					<div class="post-author">misha.gps</div>
					<div class="post-datetime">
						4 Mar 2013, 15:42					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Be so kind help with ARV752DPW22 wifi.<br />I installed last openwrt from trunk, but wifi does not work.</p><p>Has anyone been able to run WiFi on ARV752DPW22 ?</p><p>How can I do correct chipset detect&nbsp; = rt: 3062 ?</p><p>[&nbsp; &nbsp;16.060000] Lantiq VMMC device driver, version 1.9.0.3, (c) 2006-2010 Lantiq Deutschland GmbH<br />[&nbsp; &nbsp;16.432000] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)<br />[&nbsp; &nbsp;16.436000] rt2800pci 0000:00:0e.0: setting latency timer to 64<br />[&nbsp; &nbsp;16.444000] phy0 -&gt; rt2800_validate_eeprom: EEPROM recovery - MAC: 12:bc:a0:df:c6:eb<br />[&nbsp; &nbsp;16.464000] phy0 -&gt; rt2x00_set_chip: Info - Chipset detected - rt: 3572, rf: 0000, rev: 0221.<br />[&nbsp; &nbsp;16.472000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::radio<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::assoc<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::quality<br />[&nbsp; &nbsp;16.656000] NET: Registered protocol family 8<br />[&nbsp; &nbsp;16.656000] NET: Registered protocol family 20</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193827">
				<div class="post-metadata">
					<div class="post-num">Post #832</div>
					<div class="post-author">Pteridium</div>
					<div class="post-datetime">
						5 Mar 2013, 00:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>misha.gps wrote:</cite><blockquote><p>Hello,<br />Be so kind help with ARV752DPW22 wifi.<br />I installed last openwrt from trunk, but wifi does not work.</p><p>Has anyone been able to run WiFi on ARV752DPW22 ?</p><p>How can I do correct chipset detect&nbsp; = rt: 3062 ?</p></blockquote></div><p>rt2800pci covers almost all the ralink N wifi chipsets.</p><br /><div class="quotebox"><cite>misha.gps wrote:</cite><blockquote><p>[&nbsp; &nbsp;16.060000] Lantiq VMMC device driver, version 1.9.0.3, (c) 2006-2010 Lantiq Deutschland GmbH<br />[&nbsp; &nbsp;16.432000] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)<br />[&nbsp; &nbsp;16.436000] rt2800pci 0000:00:0e.0: setting latency timer to 64<br />[&nbsp; &nbsp;16.444000] phy0 -&gt; rt2800_validate_eeprom: EEPROM recovery - MAC: 12:bc:a0:df:c6:eb<br />[&nbsp; &nbsp;16.464000] phy0 -&gt; rt2x00_set_chip: Info - Chipset detected - rt: 3572, rf: 0000, rev: 0221.<br />[&nbsp; &nbsp;16.472000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::radio<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::assoc<br />[&nbsp; &nbsp;16.476000] Registered led device: rt2800pci-phy0::quality<br />[&nbsp; &nbsp;16.656000] NET: Registered protocol family 8<br />[&nbsp; &nbsp;16.656000] NET: Registered protocol family 20</p></blockquote></div><p>The log seems to be ok as the ralink driver have detected the wifi and the MAC.<br />Have you tried to enable the wifi? By default is disabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193897">
				<div class="post-metadata">
					<div class="post-num">Post #833</div>
					<div class="post-author">misha.gps</div>
					<div class="post-datetime">
						5 Mar 2013, 19:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pteridium wrote:</cite><blockquote><p>rt2800pci covers almost all the ralink N wifi chipsets.</p></blockquote></div><br /><p>Not in my case. By default rt2800pci said that &quot;Invalid RF chipset 0 detected.&quot;<br />for correcting the error<br />In the end, I added one line of code to rt2800lib.c -&gt; static int rt2800_init_eeprom(struct rt2x00_dev *rt2x00dev)</p><p> value = RF3022;</p><p>everything looks good - no errors and WiFi enabled, but the AP is not visible.<br />(If I put dd-wrt - wifi works)</p><br /><div class="quotebox"><cite>Pteridium wrote:</cite><blockquote><p>The log seems to be ok as the ralink driver have detected the wifi and the MAC.<br />Have you tried to enable the wifi? By default is disabled.</p></blockquote></div><br /><br /><p>Any way - when I make wifi enable, i see Bitrate: ? Mbit/s and <br />Signal: 0 dBm | Noise: 0 dBm<br />Bitrate: 0.0 Mbit/s</p><p>I don&#039;t see my AP from outside.</p><p>root@OpenWrt:/# cat /etc/config/wireless</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option path &#039;pci0000:00/0000:00:0e.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;GF&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;none&#039;</p><br /><p>root@OpenWrt:/# iwconfig</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bgn&nbsp; Mode:Master&nbsp; Tx-Power=20 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off</p>											<p class="post-edited">(Last edited by <strong>misha.gps</strong> on 5 Mar 2013, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194362">
				<div class="post-metadata">
					<div class="post-num">Post #834</div>
					<div class="post-author">ancient</div>
					<div class="post-datetime">
						9 Mar 2013, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to install OpenWRT using this site <a href="http://wiki.openwrt.org/toh/arcadyan/arv7510pw">http://wiki.openwrt.org/toh/arcadyan/arv7510pw</a><br />but with every u-boot i try gives me this error</p><div class="codebox"><pre><code>ARV4510PW # protect  off  all
Un-Protect Flash Bank # 1
................................................................................................................................ done
ARV4510PW # erase all
Erase Flash Bank # 1 
................................................................................................................................ done
ARV4510PW # loady 0x80700000
## Ready for binary (ymodem) download to 0x80700000 at 115200 bps...
C
Starting ymodem transfer.  Press Ctrl+C to cancel.
  100%     176 KB    4 KB/s 00:00:42       0 Errorsg...

xyzModem - CRC mode, 1414(SOH)/0(STX)/0(CAN) packets, 3 retries
## Total Size      = 0x0002c20c = 180748 Bytes
ARV4510PW #0 0 0
ARV4510PW # cp.l 0x80700000 0xb0000000 0x40000
Copy to Flash... 10Flash not Erased
ARV4510PW # </code></pre></div><p>any ideas what to do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194626">
				<div class="post-metadata">
					<div class="post-num">Post #835</div>
					<div class="post-author">misha.gps</div>
					<div class="post-datetime">
						12 Mar 2013, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>If someone have ARV752DPW22, rev:01B, Vodafone Easybox 803A - you will have problem with wifi (openwrt trunk from 11.03.2013). <br />The problem is connected with incorrect reading of rt3062 eeprom through PCI.</p><p>I don&#039;t know how to do eeprom reading&nbsp; correct, but I can did dirty hack. </p><p>via ssh I did <br /></p><div class="quotebox"><blockquote><p>hexdump -s 0x410 -n 0x110 -x /dev/mtd6</p></blockquote></div><p>and make small fix of ./build_dir/target-mips_r2_uClibc-0.9.33.2/linux-lantiq_xway/compat-wireless-2013-02-22/drivers/net/wireless/rt2x00/rt2800pci.c</p><p>don&#039;t forget do <br />rm ./build_dir/target-mips_r2_uClibc-0.9.33.2/linux-lantiq_xway/compat-wireless-2013-02-22/drivers/net/wireless/rt2x00/rt2800pci.o</p><p>I fill eeprom buffer from result of hexdump output<br /></p><div class="quotebox"><blockquote><p>static int rt2800pci_read_eeprom_pci(struct rt2x00_dev *rt2x00dev)<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp; struct eeprom_93cx6 eeprom;<br />&nbsp; &nbsp; &nbsp; &nbsp; u32 reg;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; rt2x00pci_register_read(rt2x00dev, E2PROM_CSR, &amp;reg);</p><p>&nbsp; &nbsp; &nbsp; &nbsp; eeprom.data = rt2x00dev;<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.register_read = rt2800pci_eepromregister_read;<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.register_write = rt2800pci_eepromregister_write;<br />&nbsp; &nbsp; &nbsp; &nbsp; switch (rt2x00_get_field32(reg, E2PROM_CSR_TYPE))<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; case 0:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eeprom.width = PCI_EEPROM_WIDTH_93C46;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; case 1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eeprom.width = PCI_EEPROM_WIDTH_93C66;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; default:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eeprom.width = PCI_EEPROM_WIDTH_93C86;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; break;<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.reg_data_in = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.reg_data_out = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.reg_data_clock = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; eeprom.reg_chip_select = 0;</p><p>//&nbsp; &nbsp; &nbsp; eeprom_93cx6_multiread(&amp;eeprom, EEPROM_BASE, rt2x00dev-&gt;eeprom,<br />//&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;EEPROM_SIZE / sizeof(u16));</p><p>&nbsp; &nbsp; &nbsp; &nbsp; u16 iPos = 0;</p><p>rt2x00_eeprom_write(rt2x00dev,iPos++,0x3062&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x0001&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x8825&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x2CF1&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x82FA&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x3062&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x1814&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x8001 );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x0000&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0x3062&nbsp; );<br />....<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0xFFFF&nbsp; );<br />rt2x00_eeprom_write(rt2x00dev,iPos++,0xFFFF&nbsp; );</p><p>&nbsp; &nbsp; &nbsp; &nbsp; return 0;<br />}</p></blockquote></div><p>after that wifi working perfectly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194697">
				<div class="post-metadata">
					<div class="post-num">Post #836</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						12 Mar 2013, 19:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ancient wrote:</cite><blockquote><p>I am trying to install OpenWRT using this site <a href="http://wiki.openwrt.org/toh/arcadyan/arv7510pw">http://wiki.openwrt.org/toh/arcadyan/arv7510pw</a><br />but with every u-boot i try gives me this error</p><div class="codebox"><pre><code>ARV4510PW # protect  off  all
Un-Protect Flash Bank # 1
................................................................................................................................ done
ARV4510PW # erase all
Erase Flash Bank # 1 
................................................................................................................................ done
ARV4510PW # loady 0x80700000
## Ready for binary (ymodem) download to 0x80700000 at 115200 bps...
C
Starting ymodem transfer.  Press Ctrl+C to cancel.
  100%     176 KB    4 KB/s 00:00:42       0 Errorsg...

xyzModem - CRC mode, 1414(SOH)/0(STX)/0(CAN) packets, 3 retries
## Total Size      = 0x0002c20c = 180748 Bytes
ARV4510PW #0 0 0
ARV4510PW # cp.l 0x80700000 0xb0000000 0x40000
Copy to Flash... 10Flash not Erased
ARV4510PW # </code></pre></div><p>any ideas what to do?</p></blockquote></div><p>That is because the flash chip in ARV4510PW/ARV7510PW has broken buffered writes. I have disabled it in the latest version of the U-Boot patch linked in the wiki page you used. Also TFTP works in that version, so no need to use loady anymore. If you have any problems in the installation process, let me know and I try to make the wiki page better!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194803">
				<div class="post-metadata">
					<div class="post-num">Post #837</div>
					<div class="post-author">ancient</div>
					<div class="post-datetime">
						13 Mar 2013, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>Thanks! now everything works. I had to do erase again before squashfs.image and i used &quot;era 0xb0060000 +{filesize}&quot;<br />dont know if this is the correct way but all seems to work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194806">
				<div class="post-metadata">
					<div class="post-num">Post #838</div>
					<div class="post-author">Pteridium</div>
					<div class="post-datetime">
						13 Mar 2013, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>There is a little issue with block-extroot in the Lantiq target:&nbsp; <a href="https://dev.openwrt.org/ticket/12807">https://dev.openwrt.org/ticket/12807</a></p><p>The workarounds explained are very simple and worked perfectly.</p><p>Hope this post could help somebody.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194865">
				<div class="post-metadata">
					<div class="post-num">Post #839</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						14 Mar 2013, 15:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ancient wrote:</cite><blockquote><p>Thanks! now everything works. I had to do erase again before squashfs.image and i used &quot;era 0xb0060000 +{filesize}&quot;<br />dont know if this is the correct way but all seems to work.</p></blockquote></div><p>Extra erase should not be needed if the whole flash is erased, but it won&#039;t do any harm either. Do you have a 4510 or 7510? If you have 4510 I could add information to the wiki that it works on that model as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196238">
				<div class="post-metadata">
					<div class="post-num">Post #840</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						26 Mar 2013, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>I had the same problem getting wifi to work with ARV752DPW22, rev:01C:<br /></p><div class="quotebox"><cite>misha.gps wrote:</cite><blockquote><p>If someone have ARV752DPW22, rev:01B, Vodafone Easybox 803A - you will have problem with wifi (openwrt trunk from 11.03.2013). <br />The problem is connected with incorrect reading of rt3062 eeprom through PCI.</p><p>I don&#039;t know how to do eeprom reading&nbsp; correct, but I can did dirty hack. <br />[...snip...]<br />after that wifi working perfectly</p></blockquote></div><p>Here&#039;s the story of what I did:</p><p>(All testing was done against current trunk, all patches are for about r36130.)</p><p>Starting point was this forum thread which hinted for some time about the WLAN eeprom not&nbsp; being loaded / extracted. The fix for this is easy, just patch:<br />&nbsp; &nbsp; /etc/hotplug.d/firmware/10-rt2xx-eeprom<br />or do the steps manually.</p><p>Patch: <a href="http://pastebin.com/LGQQZH7G">ARV752DPW-hotplug-firmware-wifi-eeprom.patch</a></p><p>(The patch just adds another case to the script, maybe it would be better to strip the old/other cases out completely?)</p><p>But, this wasn&#039;t working - even if the file was present, it would not be loaded. Browsing the source code and openwrt patches showed that there should be a Message if any filename was even attempted to load - no such luck with my box.</p><p>Since it seemed to be working on ARV752DPW and it should not be overly complicated&nbsp; (the eeprom is even stored in the same mtd blocks), I thought it could only be some board specific code.</p><p>I thought maybe it&#039;s got something to do with the whole device-tree migration....</p><p>--&gt; Bingo! The *.dts file on ARV752DPW defined an eeprom name, the ARV752DPW22 didn&#039;t</p><p>Patch: <a href="http://pastebin.com/4K2qWJzJ">ARV752DPW-dts.patch</a></p><p>So, now it tried to load the file and if it was present, it would even succeed.</p><p>But, the file wasn&#039;t generated by default, manually generating it worked fine.</p><p>Why? Because /lib/functions/lantiq.sh greps /proc/cpuinfo for the board name/type which simply stated &quot;Danube rev. 1.5&quot; and didn&#039;t include the board name at all. Hmmm..... I was pretty sure this worked before in 3.7?</p><p>Luckily the Patches for 3.7 are still present. After a bit of digging around in the arch code of the kernel I was pretty sure that the &quot;arch&quot; directory and/or &quot;prom.c&quot; would be the place to edit if i wanted to do something like this.</p><p>Grepping the existing linux-3.7 patches showed that there was something going on in that place *and* most the patches are missing for linux-3.8. I isolated the missing feature to the &quot;0100-MIPS-lantiq-honour-model-property-inside-devicetree-.patch&quot; patch and tested if it applied against linux-3.8. Unfortunately, the entire patch series was reorganized, so 0100 means &quot;last patch&quot; as of now. Since I didn&#039;t want to mess around with the other patches, i rewrote the patch a bit (mostly line numbers) so that it applies correctly.</p><p>Another rebuild later -&gt; bingo.</p><p>EDIT: This patch is outdated. Model name is contained in the &quot;machine&quot; line of /proc/cpuinfo as of now. Therefore the file /lib/functions/lantiq must be patched to reflect that.<br /><em>Patch: <a href="http://pastebin.com/4sr8ZYpe">ARV752DPW22-enable_model_dts.patch</a></em></p><p>The only problem is, that even if my Box now generates the eeprom an loads it, i still can&#039;t get WLAN to work.<br />&quot;iwlist scan&quot; shows nothing (I&#039;m trying to join an existing wifi network as client) and I&#039;m getting &quot;command failed: No buffer space available (-132)&quot; on &quot;wifi enable&quot;.</p><p>I&#039;m stumped as to why this is happening, maybe i&#039;ve missed something else.</p><p>I hope that at least the patches/code may help someone else to get it to work, no Idea what&#039;s wrong with my setup since loading the eeprom worked for &quot;misha.gps&quot;.<br />Currently I&#039;m compiling a bare-bones trunk, I&#039;m still hoping my wifi will magically work with that.</p><br /><p>Edit: I forgot something:<br />The default profile for ARV752DPW22 also doesn&#039;t contain wifi modules and userspace software, so I also patched it:<br /><a href="http://pastebin.com/Zxfyyhtk">ARV752DPW22-profile.patch</a></p>											<p class="post-edited">(Last edited by <strong>qwertz123</strong> on 13 Apr 2013, 10:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197104">
				<div class="post-metadata">
					<div class="post-num">Post #841</div>
					<div class="post-author">happyelement</div>
					<div class="post-datetime">
						3 Apr 2013, 19:36					</div>
				</div>
				<div class="post-content content">
					<p>Like onny, I have also problems to get the switch working ... my device is a <strong>ARV752DPW22</strong><br />My plan is really simple ... I just want to use the 4Lan ports on my router, without any subnets etc.</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option bridge &#039;true&#039;
        option ifname &#039;eth0&#039;

config switch &#039;eth0&#039;
        option enable_vlan &#039;1&#039;
        option reset &#039;1&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0t 1t 2 3 4 5t&#039;
        option vid &#039;1&#039;

config adsl-device &#039;adsl&#039;
        option fwannex &#039;b&#039;
        option annex &#039;b2p&#039;

config atm-bridge &#039;atm&#039;
        option unit &#039;0&#039;
        option vpi &#039;1&#039;
        option vci &#039;32&#039;
        option encaps &#039;llc&#039;
        option payload &#039;bridged&#039;

config interface &#039;wan&#039;
        option ifname &#039;nas0&#039;
        option proto &#039;pppoe&#039;
        option username &#039;bla&#039;
        option password &#039;blub&#039;</code></pre></div><p>Also my wlan is active ...</p><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
        option type &#039;mac80211&#039;
        option macaddr &#039;0c:00:28:43:00:60&#039;
        option hwmode &#039;11ng&#039;
        option noscan &#039;1&#039;
        list ht_capab &#039;GF&#039;
        list ht_capab &#039;SHORT-GI-20&#039;
        list ht_capab &#039;SHORT-GI-40&#039;
        list ht_capab &#039;RX-STBC1&#039;
        option channel &#039;11&#039;
        option htmode &#039;HT40-&#039;
        option country &#039;DE&#039;

config wifi-iface
        option device &#039;radio0&#039;
        option mode &#039;ap&#039;
        option ssid &#039;bla&#039;
        option encryption &#039;psk2&#039;
        option key &#039;blub&#039;
        option network &#039;lan&#039;</code></pre></div><br /><p>Has anybody a clue how to get this running ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197278">
				<div class="post-metadata">
					<div class="post-num">Post #842</div>
					<div class="post-author">mgies</div>
					<div class="post-datetime">
						5 Apr 2013, 01:12					</div>
				</div>
				<div class="post-content content">
					<p>qwertz123, are you going to push your patches to trunk?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197353">
				<div class="post-metadata">
					<div class="post-num">Post #843</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						5 Apr 2013, 16:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mgies wrote:</cite><blockquote><p>qwertz123, are you going to push your patches to trunk?</p></blockquote></div><p>If someone wants to include them, feel free, no rights reserved.<br />EDIT: The patch ARV752DPW22-enable_model_dts.patch is still needed it seems. </p><p>Other than that: <br />I&#039;m not a developer, more like an tester who knows to read code. I have only a rudimentary knowledge of the openwrt development process and project structure.<br />From what I could see, tickets for the lantiq platform in the bugtracker don&#039;t seem to make any progress at all. I don&#039;t believe any developer for the platform is actually working with the bugtracker...</p><p>So I&#039;m doing this &quot;one shot&quot; in the hopes to get my ARV752DPW22 (and ARV752DPW) up and running. <br />Unfortunately I have not succeeded so far: <br />Even with my patches I get no wifi scan results and I&#039;m unable to join or host a wifi network on ARV75DPW22. <br />The other box with ARV752DPW was constantly rebooting before. At the moment it doesn&#039;t boot at all since it can&#039;t seem to mount anything, not even serial console works.<br />I&#039;m guessing I&#039;ll monitor the situation a while longer, until i finally loose interest or get better boxes.</p>											<p class="post-edited">(Last edited by <strong>qwertz123</strong> on 9 Apr 2013, 21:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197373">
				<div class="post-metadata">
					<div class="post-num">Post #844</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						5 Apr 2013, 17:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>qwertz123 wrote:</cite><blockquote><p>Even with my patches I get no wifi scan results and I&#039;m unable to join or host a wifi network on ARV75DPW22.</p></blockquote></div><p>Out of curiosity, can you try to replace the line<br /></p><div class="codebox"><pre><code>req-mask = &lt;0x3&gt;;</code></pre></div><p>in /trunk/target/linux/lantiq/image/ARV752DPW22.dts to<br /></p><div class="codebox"><pre><code>req-mask = &lt;0xf&gt;;</code></pre></div><p>and line<br /></p><div class="codebox"><pre><code>lantiq,groups = &quot;gnt1&quot;;</code></pre></div><p>to<br /></p><div class="codebox"><pre><code>lantiq,groups = &quot;gnt1&quot;, &quot;gnt2&quot;;</code></pre></div><p>Let me know if that helps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197376">
				<div class="post-metadata">
					<div class="post-num">Post #845</div>
					<div class="post-author">mgies</div>
					<div class="post-datetime">
						5 Apr 2013, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>qwertz123 wrote:</cite><blockquote><p>Other than that: <br />I&#039;m not a developer, more like an tester who knows to read code. I have only a rudimentary knowledge of the openwrt development process and project structure.<br />From what I could see, tickets for the lantiq platform in the bugtracker don&#039;t seem to make any progress at all. I don&#039;t believe any developer for the platform is actually working with the bugtracker...</p></blockquote></div><p>Yep, I understand. Me neither, that&#039;s why I&#039;m asking... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><div class="quotebox"><cite>qwertz123 wrote:</cite><blockquote><p>Even with my patches I get no wifi scan results and I&#039;m unable to join or host a wifi network on ARV75DPW22.</p></blockquote></div><p>Isn&#039;t wireless-tools required for scanning and simple WEP encryption? You didn&#039;t add it with your last patch...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197794">
				<div class="post-metadata">
					<div class="post-num">Post #846</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						9 Apr 2013, 17:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mgies wrote:</cite><blockquote><div class="quotebox"><cite>qwertz123 wrote:</cite><blockquote><p>Even with my patches I get no wifi scan results and I&#039;m unable to join or host a wifi network on ARV75DPW22.</p></blockquote></div><p>Isn&#039;t wireless-tools required for scanning and simple WEP encryption? You didn&#039;t add it with your last patch...</p></blockquote></div><p>I have the packages in my config/image, but they don&#039;t work. My patch just added the absolute minimum packages which worked on ARV752DPW, I assume everything else is optional <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />.</p><p>I usually get various error messages if I use tools like &quot;iw&quot;, &quot;rfkill&quot;, &quot;iwlist&quot; etc.<br />At one point I even tried compiling rfkill in, didn&#039;t help.</p><p>Most errors simply state something like &quot;command failed: No buffer space available (-132)&quot;, &quot;device/resource busy&quot; or the like, but I could not pinpoint what is failing and why. Google was no help either.</p><p>I&#039;m currently trying the mods suggested by &quot;snk&quot;, I think modding the device tree file (*.dts) seems like a good idea since the eeprom wasn&#039;t poperly defined before patching it in. <br />Unfortunately I don&#039;t really know the hardware to properly write my own DTS, I can only look into other files and hope for the best.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197811">
				<div class="post-metadata">
					<div class="post-num">Post #847</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						9 Apr 2013, 19:21					</div>
				</div>
				<div class="post-content content">
					<p>EDIT:<br />Ignore this, this was my foulup. I configured busybox wrong, I guess it was CONFIG_BUSYBOX_CONFIG_FEATURE_SH_STANDALONE, which does not work in a non-static build.</p><div class="quotebox"><blockquote><p>I&#039;m currently trying the mods suggested by &quot;snk&quot;, I think modding the device tree file (*.dts) seems like a good idea since the eeprom wasn&#039;t poperly defined before patching it in.</p></blockquote></div><p>Funny:<br /></p><div class="codebox"><pre><code>... snip ....
[    0.404000] 4 ofpart partitions found on MTD device ltq_nor
[    0.408000] Creating 4 MTD partitions on &quot;ltq_nor&quot;:
[    0.416000] 0x000000000000-0x000000010000 : &quot;uboot&quot;
[    0.424000] 0x000000010000-0x000000020000 : &quot;uboot_env&quot;
[    0.428000] 0x000000020000-0x0000007f0000 : &quot;linux&quot;
[    0.436000] found squashfs behind kernel
[    0.440000] Creating 2 MTD partitions on &quot;ltq_nor&quot;:
[    0.444000] 0x000000020000-0x00000013d443 : &quot;kernel&quot;
[    0.448000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.464000] 0x00000013d443-0x0000007f0000 : &quot;rootfs&quot;
[    0.468000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.480000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.488000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=730000, len=C0000 
[    0.492000] 0x000000730000-0x0000007f0000 : &quot;rootfs_data&quot;
[    0.500000] 0x0000007f0000-0x000000800000 : &quot;board_config&quot;
[    0.548000] switch0: Atheros AR8216 switch registered on 1e180000.etop-ff
[    0.584000] libphy: ltq_mii: probed
[    0.680000] eth0: attached PHY [Atheros AR8216/AR8236/AR8316] (phy_addr=1e180000.etop-ff:00, irq=-1)
[    0.692000] wdt 1f8803f0.watchdog: Init done
[    0.696000] leds-gpio gpio-leds.6: pins are not configured from the driver
[    0.716000] TCP: cubic registered
[    0.716000] NET: Registered protocol family 17
[    0.720000] Bridge firewalling registered
[    0.724000] 8021q: 802.1Q VLAN Support v1.8
[    0.748000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    0.752000] Freeing unused kernel memory: 208k freed
/etc/preinit: line 1: mount: not found
/etc/preinit: line 1: mount: not found
awk: /proc/meminfo: No such file or directory
/etc/preinit: line 1: mount: not found
/etc/preinit: line 1: grep: not found
/etc/preinit: line 1: grep: not found
/etc/preinit: line 1: mount: not found
/etc/preinit: line 1: grep: not found
mknod: /dev/console: Read-only file system</code></pre></div><p>.... on current trunk.<br />I got this error on my ARV752DPW last week, seems like the bug &quot;migrated&quot; to ARV752DPW22. At first I thought it had something to do with &quot;procd as init&quot;, but i tried with and without it.<br />As far as I can tell, the commands are where they are supposed to be? The funny thing is, &quot;awk&quot; and &quot;mknod&quot; are working. So my initial guess &quot;no PATH set&quot; isn&#039;t possible. The line number is bogus as far as i can see, neither the /init, /etc/preinit nor other scripts do something with mount/grep on line 1.</p><p>No idea, I guess I&#039;ll have to test a minimal config again, the above is a heavily modded build (7,25MiB Flash used).</p><p>I hate starting from scratch...</p>											<p class="post-edited">(Last edited by <strong>qwertz123</strong> on 9 Apr 2013, 21:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197813">
				<div class="post-metadata">
					<div class="post-num">Post #848</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						9 Apr 2013, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>Another question just came up:</p><p>Is there any way to build uboot for ARV752DPW22 (and ARV752DPW)? <br />Or are there some new binaries to download?</p><p>I downloaded some semi-working versions from this thread, but they are buggy or not &quot;feature complete&quot;.<br />Hence I&#039;d like to build my own version, at least for ARV752DPW22, since the one i&#039;m currently using has no working ethernet.<br />But I could not find the sources anywhere and via openwrt there is only support for ARV7518, which detects ram/clock speeds wrong.</p><p>At the moment I have to boot via UART/ramboot to recover my ARV752DPW22, which is annoying as hell.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197815">
				<div class="post-metadata">
					<div class="post-num">Post #849</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						9 Apr 2013, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>The &quot;old&quot; (2010.03) U-Boots on Danube were incredibly unreliable when it comes to networking. The new branch (2013.01) in trunk is working perfectly.</p><p>There is no profile for ARV752*, but it should be quite trivial to make one based on the other Danube profiles. I made one for ARV7510PW: <a href="http://ltl.tkk.fi/~malaakso/misc/0030-MIPS-add-board-support-for-Arcadyan-ARV7510.patch">http://ltl.tkk.fi/~malaakso/misc/0030-M … 7510.patch</a></p><p>The information you need is basically memory size, switch type and connection (MII or Reverse MII), and U-Boot environment offset and size in flash. The memory controller configuration you can extract from the original bootloader image (brnboot) with the script written by Luka (lantiq_ram_extract_magic.awk).</p>											<p class="post-edited">(Last edited by <strong>snk</strong> on 9 Apr 2013, 21:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197816">
				<div class="post-metadata">
					<div class="post-num">Post #850</div>
					<div class="post-author">qwertz123</div>
					<div class="post-datetime">
						9 Apr 2013, 21:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><p>There is no profile for ARV752*, but it should be quite trivial to make one based on the other Danube profiles. I made one for ARV7510PW: <a href="http://ltl.tkk.fi/~malaakso/misc/0030-MIPS-add-board-support-for-Arcadyan-ARV7510.patch">http://ltl.tkk.fi/~malaakso/misc/0030-M … 7510.patch</a></p></blockquote></div><p>I&#039;ll try this, doesn&#039;t seem to complicated, thanks.<br />Since I have both ARV752DPW* at hand this seems like a good idea and testing this via UART doesn&#039;t take long.</p><p>EDIT: Oh, I see, this is for upstream uboot it seems. Oh well, another git to clone...</p>											<p class="post-edited">(Last edited by <strong>qwertz123</strong> on 9 Apr 2013, 21:37)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 851 to 850 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 34 of 40</div><nav><ul><li><a href="viewtopic.php%3Fid=15934&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=32.html">32</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=33.html">33</a></li><li class="pagination-current"><span>34</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=35.html">35</a></li><li><a href="viewtopic.php%3Fid=15934&amp;p=36.html">36</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=15934&amp;p=40.html">40</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>