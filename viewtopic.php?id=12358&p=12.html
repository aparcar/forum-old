<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 12 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p80411">
				<div class="post-metadata">
					<div class="post-num">Post #276</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						26 Jan 2009, 13:25					</div>
				</div>
				<div class="post-content content">
					<p>if it fails with an error about staging_dir/host/etc &quot;no such file or directory&quot; do a &#039;mkdir staging_dir/host/etc&#039;</p><p>the webupgrade should just be uploaded through the webupgrade utility (found under administration), see why it&#039;s called a webupgrade?!?</p><p>Still this upgrade can just fail or don&#039;t work at all. We&#039;ve worked out all the errors the webinterface is throwing us. But sometimes it just looks as if it accepts the img, but doesn&#039;t flash it...</p><p>Due to lack of time I won&#039;t be looking into this issue shortly, but hey, it&#039;s opensource so anyone could try and figure it out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80421">
				<div class="post-metadata">
					<div class="post-num">Post #277</div>
					<div class="post-author">mpu</div>
					<div class="post-datetime">
						26 Jan 2009, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>dirkNL: Yes, figured &#039;etc&#039; directory problem out myself=D. It fails in the final webimage generation right after make prints xx% deflated for the img file. Thanks anyway for the reply:]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80490">
				<div class="post-metadata">
					<div class="post-num">Post #278</div>
					<div class="post-author">dcf</div>
					<div class="post-datetime">
						27 Jan 2009, 09:04					</div>
				</div>
				<div class="post-content content">
					<p>mpu: Not sure if this is the same issue you&#039;re having, but when I tried with revision 14171 make failed after the wrt350nv2-builder returned &#039;164&#039;.<br />After enabling the debugging text in tools/wrt350nv2-builder/src/wrt350nv2-builder.c, it seemed that the image was indeed created, but the non-zero return value caused make to fail.</p><p>Simply adding &#039;return 0;&#039; at the end of main() allowed make to continue. I haven&#039;t tried the resulting image yet though, so I don&#039;t know whether it works or not.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80565">
				<div class="post-metadata">
					<div class="post-num">Post #279</div>
					<div class="post-author">mpu</div>
					<div class="post-datetime">
						28 Jan 2009, 09:51					</div>
				</div>
				<div class="post-content content">
					<p>dcf: Yeah, that was it! Thanks. </p><p>I had a linksys fw 2.00.19 and flashed it with my own image. The flashing seem to went fine (waited long enough) and port lights do blink but I can&#039;t telnet to it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> (brick&#039;em all(tm)?) Well, there&#039;s always JTAG. :-I</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80580">
				<div class="post-metadata">
					<div class="post-num">Post #280</div>
					<div class="post-author">Mavy</div>
					<div class="post-datetime">
						28 Jan 2009, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>I have had no succes with my jtag yet. If you manage to get it working i am very interested in how.</p><p>Openocd connects to the device fine, however for some strange reason my router wont go into a halt state at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80587">
				<div class="post-metadata">
					<div class="post-num">Post #281</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						28 Jan 2009, 13:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mpu wrote:</cite><blockquote><p>dcf: Yeah, that was it! Thanks. </p><p>I had a linksys fw 2.00.19 and flashed it with my own image. The flashing seem to went fine (waited long enough) and port lights do blink but I can&#039;t telnet to it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> (brick&#039;em all(tm)?) Well, there&#039;s always JTAG. :-I</p></blockquote></div><p>Did you wait for the second reboot as suggested?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80589">
				<div class="post-metadata">
					<div class="post-num">Post #282</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						28 Jan 2009, 13:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mavy wrote:</cite><blockquote><p>I have had no succes with my jtag yet. If you manage to get it working i am very interested in how.</p><p>Openocd connects to the device fine, however for some strange reason my router wont go into a halt state at all.</p></blockquote></div><p>I remember some similar problems, what kind of jtag are you using? if you&#039;re using one with rst pins, please disable those (openocd.conf) and try again by shorting pin 1 and 3 yourself. That&#039;s the &quot;manual&quot; reset state. Good luck with it, if you find yourself around eindhoven someday I maybe able to help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80590">
				<div class="post-metadata">
					<div class="post-num">Post #283</div>
					<div class="post-author">Mavy</div>
					<div class="post-datetime">
						28 Jan 2009, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using a DLC5 cable with a jumper on pins 1 and 3. The chip identifies in openocd but it times out when i try to halt it.</p><p>I also discovered that connecting a 3v ttl cable causes the chip at U9 (near the jtag connector) to go extremely hot. I had this on 2 wrt350n&#039;s. I&#039;d suggest using the dc adapter with the device to power it and leave the 3v line of your serial disconnected.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80591">
				<div class="post-metadata">
					<div class="post-num">Post #284</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						28 Jan 2009, 14:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mavy wrote:</cite><blockquote><p>I&#039;m using a DLC5 cable with a jumper on pins 1 and 3. The chip identifies in openocd but it times out when i try to halt it.</p></blockquote></div><p>Could you try and connect openocd, don&#039;t halt it, but connect with gdb to the remote target? you need an arm-target based gdb build for that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80593">
				<div class="post-metadata">
					<div class="post-num">Post #285</div>
					<div class="post-author">Mavy</div>
					<div class="post-datetime">
						28 Jan 2009, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ll try that tonight. But if i remember correctly connecting gdb caused openocd to spam not halted warnings and loading something to memory would just fail.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80667">
				<div class="post-metadata">
					<div class="post-num">Post #286</div>
					<div class="post-author">mpu</div>
					<div class="post-datetime">
						29 Jan 2009, 13:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dirkNL wrote:</cite><blockquote><p>Did you wait for the second reboot as suggested?</p></blockquote></div><p>Yes, I _think_ so. Waited for over 20 minutes.... Didn&#039;t actually check how many times device booted. Noticed one boot because browser refreshed the usual &quot;network not found&quot; message and checked on panel.</p><p>Is there a time window that you have to try telnet on when the wrt350n is booting? I&#039;ll try today yet again (unfortunately don&#039;t have much time to play around with this).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80668">
				<div class="post-metadata">
					<div class="post-num">Post #287</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						29 Jan 2009, 13:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mpu wrote:</cite><blockquote><p>Is there a time window that you have to try telnet on when the wrt350n is booting? I&#039;ll try today yet again (unfortunately don&#039;t have much time to play around with this).</p></blockquote></div><p>No timewindow, but because of some flashcleaning up I let the router reboot itself after the cleaning process. So in all it should reboot twice, but without any assistence from your end.</p><p>When it&#039;s done you should be able to connect to it using telnet on the 192.168.1.1 address. If not I&#039;m affraid you&#039;ve got your first brick in the wall</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80767">
				<div class="post-metadata">
					<div class="post-num">Post #288</div>
					<div class="post-author">cmoegele</div>
					<div class="post-datetime">
						30 Jan 2009, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I tried to flash via serial and tftpboot the mtd0.orig.img like DirkNL described below:</p><br /><div class="quotebox"><cite>dirkNL wrote:</cite><blockquote><p>I&#039;ve uploaded the stock flash contents for you, so not build from Linksys sources but really stock from the flash. It&#039;s the same dump I used to bring back my WRT to life. I only used the mtd0 part because I knew my u-boot wasn&#039;t screwed, but I&#039;ve uploaded all other partitions as well. Maybe it&#039;ll help.</p><p><a href="http://hosting.upexia.nl/wrt350n/mtd0.orig.img">mtd0.img</a> (kernel+rootfs)<br /><a href="http://hosting.upexia.nl/wrt350n/mtd1.img">mtd1.img</a> (rootfs)<br /><a href="http://hosting.upexia.nl/wrt350n/mtd2.img">mtd2.img</a> (lang)<br /><a href="http://hosting.upexia.nl/wrt350n/mtd3.img">mtd3.img</a> (nvram)<br /><a href="http://hosting.upexia.nl/wrt350n/mtd4.img">mtd4.img</a> (u-boot)</p><p>Because of the overlapping mtd0 and mtd1 you only need to use the contents of mtd0 and mtd2 through mtd4.</p><p>If you could post your image contents I can have a look and maybe find out what&#039;s missing, but I doubt you can&#039;t fix it with the images provided here.</p></blockquote></div><p>And also lots of self generated imgaes from trunk with no success.</p><p>Most of the images have bad magic numbers or crc failures !?<br />The device does not work with recovery mode, even with ip like in uboot env.<br />Can someone explain to me what Iá¸¿ doing wrong ?<br />Is there any Howto or Wiki for Jtag or and serial flash for doing step by step?</p><p>Or can someone do me a favour and flash my board ? I will pay for it.</p><p>Thx</p><p>Best regards</p><p>Best rtegards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80778">
				<div class="post-metadata">
					<div class="post-num">Post #289</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						30 Jan 2009, 21:31					</div>
				</div>
				<div class="post-content content">
					<p>cmoegele,</p><p>in your state you will need to boot uImage kernel with NFS or ramfs support, most likely NFS is the easyist way. From inside the booted uImage with NFS it&#039;s possible to flash back the original contents for mt0. Read back a few pages about how we restored my brick, aside from the kernel booting with JTAG the procedure with booting a tftp kernel is very similar.</p><p>To boot a tftp kernel, go to the u-boot console &quot;press enter to stop autoboot&quot;<br />&gt; tftp 0x400000 your.uImage.bin<br />&gt; bootm 0x400000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81042">
				<div class="post-metadata">
					<div class="post-num">Post #290</div>
					<div class="post-author">cmoegele</div>
					<div class="post-datetime">
						4 Feb 2009, 12:57					</div>
				</div>
				<div class="post-content content">
					<p>Thx for help dirkNL!</p><p>My failure was the wrong tftp values, and wrong image.</p><p>Now with ramdisk compiled img, I could run openwrt from ram:</p><p>&gt;tftpboot 0x400000 uImage.img<br />&gt;bootm </p><br /><p>But now I have problems to write any image to the flash :</p><p>&gt; wget http://server-ip/squashfs<br />&gt; mtd -r write squashfs kernel</p><p>brings always errors.</p><p>Can this problem be caused because of missing mtd?</p><p>&gt; cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00100000 00010000 &quot;kernel&quot;<br />mtd1: 005c0000 00010000 &quot;rootfs&quot;<br />mtd4: 00040000 00010000 &quot;u-boot&quot;</p><p>everywhere in the post there are mtd0 - mtd4 described.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81045">
				<div class="post-metadata">
					<div class="post-num">Post #291</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						4 Feb 2009, 13:15					</div>
				</div>
				<div class="post-content content">
					<p>Seems to me your mtd map isn&#039;t correct. It might be easiest to use the values used by OpenWRT.</p><p>Look for the file</p><p>arch/arm/mach-orion/wrt350n_setup.c (something like that) in you kernel sources.</p><p>If you boot a kernel with those values, you&#039;ll be able to flash OpenWRT right away, no need to restore to stock or anything else. Unless ofcourse that&#039;s what you want to do right now...</p><p>I&#039;m gonna asume you want to flash OpenWRT, if so, just use dd to flash your mtd.</p><p>dd if=wrt350nv2-uImage of=/dev/mtdblock0<br />dd if=root.squashfs of=/dev/mtdblock1</p><p>You&#039;ll be able to find those files after you&#039;ve build for the orion target with OpenWRT trunk in the build_dir/linux-orion/ directory.</p><p>It&#039;s all from the top of my head so double check everything before you start flashing <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Just one last tip: stay away from the u-boot mtd space at any time! It&#039;ll be alot more difficult to restore once you&#039;ve screwed that up...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81104">
				<div class="post-metadata">
					<div class="post-num">Post #292</div>
					<div class="post-author">cmoegele</div>
					<div class="post-datetime">
						5 Feb 2009, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi friends I must thank you all for your great help!</p><p>Especially DirkNL, your my hero!!!! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Once you will visit Germany, you can come to me and we will drink some beer or something else together, perhaps at Oktoberfest in Munich ;-)</p><p>After nearly 2 months, many very short nights, I have learned a lot linux basics and finally got openwrt to my router <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Now its time to test performance and stability of this goodie!</p><br /><p>Thx</p><p>cmoegele</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81474">
				<div class="post-metadata">
					<div class="post-num">Post #293</div>
					<div class="post-author">heji</div>
					<div class="post-datetime">
						9 Feb 2009, 17:04					</div>
				</div>
				<div class="post-content content">
					<p>i tiy tftp my uImage. and bootm but get jffs error.</p><p> </p><div class="codebox"><pre><code>|  \/  | __ _ _ ____   _____| | |
        | |\/| |/ _` | &#039;__\ \ / / _ \ | |
        | |  | | (_| | |   \ V /  __/ | |
        |_|  |_|\__,_|_|    \_/ \___|_|_|
 _   _     ____              _
| | | |   | __ )  ___   ___ | |_ 
| | | |___|  _ \ / _ \ / _ \| __| 
| |_| |___| |_) | (_) | (_) | |_ 
 \___/    |____/ \___/ \___/ \__|  ** LOADER **
 ** MARVELL BOARD: RD-88F5181L-VOIP-GE LE 

U-Boot 1.1.1 (Dec 12 2006 - 16:12:22) Marvell version: 1.7.3

DRAM CS[0] base 0x00000000   size 128MB 
DRAM Total size 128MB 
Flash: mvFlashInit base 0xff800000 devW 1 busW 1
Flash: flashStructGet manu 0xec id 0xe0 
Flash: flashStructGet flash is supported.
FLASH: initFlashSecs TOP Sector Type 
Flash: flashSecsInit main sector loop 0 - 127 
[8192kB@ff800000] Flash:  8 MB
Addresses 20M - 0M are saved for the U-Boot usage.
Mem malloc Initialization (20M - 16M): Done
*** Warning - bad CRC, using default environment


Soc: MV88F5181 Rev 9
CPU: ARM926 (Rev 0) running @ 500Mhz 
SysClock = 166Mhz , TClock = 166Mhz 


USB 0: host mode
PCI 0: PCI Express Root Complex Interface
PCI 1: Conventional PCI, speed = 33000000
Net:   mvEgigaLoad: egiga0 load ok
egiga0 [PRIME]

***************DRIVER INFO*****************

DRIVER BUILD DATA: Jan  9 2007 at 18:25:44
DRIVER VERSION 1.06

*******************************************
dbSign is:65:52:63:4f:6d:4d
mac address in flash is:00:1d:7e:ad:cc:08
have eRcOmM 
Hit ENTER to stop autoboot:  0 
Marvell&gt;&gt; 
Marvell&gt;&gt; tftp 0x400000 openwrt-wrt350nv2-uImage
mvEgigaInit: egiga0 init - mvBoardPhyAddrGet()=0x0 , priv-&gt;port =0x0
ring full
mvEgigaInit: egiga0 complete ok
Using egiga0 device
TFTP from server 172.21.5.30; our IP address is 172.21.5.10
Filename &#039;openwrt-wrt350nv2-uImage&#039;.
Load address: 0x400000
Loading: #################################################################
         #################################################################
         #################################################################
         #########
done
Bytes transferred = 1043236 (feb24 hex)
Marvell&gt;&gt; bootm
## Booting image at 00400000 ...
   Image Name:   Linux-2.6.28.4
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1043172 Bytes = 1018.7 kB
   Load Address: 00008000
   Entry Point:  00008000
   Verifying Checksum ... OK
OK

Starting kernel ...

Uncompressing Linux..................................................................... done, booting the kernel.
Linux version 2.6.28.4 (heji@heji-desktop) (gcc version 4.1.2) #2 Mon Feb 9 19:23:52 CST 2009
CPU: Feroceon [41069260] revision 0 (ARMv5TEJ), cr=a0053177
CPU: VIVT data cache, VIVT instruction cache
Machine: Linksys WRT350N v2
Clearing invalid memory bank 0KB@0xffffffff
Clearing invalid memory bank 0KB@0xffffffff
Clearing invalid memory bank 0KB@0xffffffff
Ignoring unrecognised tag 0x00000000
Ignoring unrecognised tag 0x00000000
Ignoring unrecognised tag 0x00000000
Ignoring unrecognised tag 0x41000403
Memory policy: ECC disabled, Data cache writeback
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
Kernel command line: root=/dev/mtdblock1 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit
PID hash table entries: 512 (order: 9, 2048 bytes)
Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
Memory: 128MB = 128MB total
Memory: 127600KB available (1928K code, 144K data, 96K init)
Calibrating delay loop... 332.59 BogoMIPS (lpj=1662976)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
net_namespace: 476 bytes
NET: Registered protocol family 16
Orion ID: MV88F5181L-Rev-A1. TCLK=166666667.
Applying Orion-1/Orion-NAS PCIe config read transaction workaround
PCI: bus0: Fast back to back transfers disabled
pci 0000:01:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:01:00.0: PME# disabled
PCI: bus1: Fast back to back transfers enabled
SCSI subsystem initialized
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 4096 (order: 3, 32768 bytes)
TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
TCP: Hash tables configured (established 4096 bind 4096)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
msgmni has been set to 249
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver2 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 3) is a 16550A
console [ttyS0] enabled
MV-643xx 10/100/1000 ethernet driver version 1.4
mv643xx_eth smi: probed
net eth0: port 0 with MAC address 00:00:00:00:51:81
physmap platform flash device: 00800000 at f4000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 8-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
physmap-flash.0: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
cmdlinepart partition parsing not available
RedBoot partition parsing not available
Using physmap partition information
Creating 3 MTD partitions on &quot;physmap-flash.0&quot;:
0x00000000-0x00100000 : &quot;kernel&quot;
0x00100000-0x00750000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
split_squashfs: no squashfs found in &quot;physmap-flash.0&quot;
0x007c0000-0x00800000 : &quot;u-boot&quot;
i2c /dev entries driver
TCP westwood registered
NET: Registered protocol family 17
Distributed Switch Architecture driver version 0.1
eth0: detected a Marvell 88E6131 switch
dsa slave smi: probed
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000000: 0x9062 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000004: 0x542b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000008: 0x5663 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000000c: 0xce7e instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000010: 0x52c1 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000014: 0x332c instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000018: 0x37c0 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000001c: 0x69e7 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000020: 0x3ce3 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000024: 0x45da instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010000: 0x8379 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010004: 0xa513 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010008: 0x8e16 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001000c: 0x7df0 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010010: 0x43f6 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010014: 0x21b3 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010018: 0x1e17 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001001c: 0x441f instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010020: 0x0e45 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010024: 0xfffb instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020000: 0xa485 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020004: 0x37fe instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020008: 0x9bf9 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0002000c: 0xd4ef instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020010: 0xe5e5 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020014: 0xebbe instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020018: 0xcfd2 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0002001c: 0x7be9 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020020: 0xfa27 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020024: 0x77c2 instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030000: 0x729c instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030004: 0x05bb instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030008: 0x9f81 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0003000c: 0x9d05 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030010: 0xaaca instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030014: 0x1026 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030018: 0xdab4 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0003001c: 0x23e7 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030020: 0x9816 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00030024: 0x040d instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040000: 0xfb8b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040004: 0x5f89 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040008: 0xda89 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0004000c: 0x4e22 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040010: 0x036b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040014: 0x5df1 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040018: 0x24da instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0004001c: 0x81fc instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040020: 0x662d instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00040024: 0x2df7 instead
Further such events for this erase block will not be printed
Old JFFS2 bitmask found at 0x000453e0
You cannot use older JFFS2 filesystems with newer kernels
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050000: 0xea30 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050004: 0xea28 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050008: 0xca38 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0005000c: 0x7502 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050010: 0xe50a instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050014: 0x28ae instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050018: 0x4ea3 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0005001c: 0xcea0 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050020: 0x9455 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00050024: 0x9454 instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060000: 0x081a instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060004: 0xf117 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060008: 0x708d instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0006000c: 0x0dd1 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060010: 0x78ca instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060014: 0x395c instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060018: 0x7fec instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0006001c: 0x67e5 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060020: 0x714b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00060024: 0xbe51 instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070000: 0x07ec instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070004: 0x2c03 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070008: 0xfd91 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0007000c: 0xc07e instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070010: 0x2b80 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070014: 0xec8f instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070018: 0x07ec instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0007001c: 0x9407 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070020: 0xec94 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00070024: 0x03f6 instead
Further such events for this erase block will not be printed
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0009fff0: 0x4900 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0000: 0x7368 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0004: 0x0269 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0008: 0x7357 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a000c: 0x2ca0 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0010: 0xd4f8 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0014: 0xcfb4 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0018: 0xf1ac instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a001c: 0x0003 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0020: 0x2d04 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000a0024: 0x0351 instead
Further such events for this erase block will not be printed
Empty flash at 0x000a0070 ends at 0x000a0074
Old JFFS2 bitmask found at 0x000aea74
You cannot use older JFFS2 filesystems with newer kernels
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0000: 0xcf3a instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0004: 0xde66 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0008: 0x16e4 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b000c: 0xadd6 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0010: 0xaa5b instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0014: 0xb142 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0018: 0x68f0 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b001c: 0x8f1f instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0020: 0xaaaf instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x000b0024: 0x471a instead
Further such events for this erase block will not be printed
Old JFFS2 bitmask found at 0x000bf818
Empty flash at 0x00536218 ends at 0x0053621c
Empty flash at 0x0053623c ends at 0x00536240
Empty flash at 0x00536260 ends at 0x00536264
Empty flash at 0x005362b4 ends at 0x005362b8
Empty flash at 0x005362d8 ends at 0x005362dc
Empty flash at 0x00536300 ends at 0x00536304
Empty flash at 0x00536324 ends at 0x00536328
Empty flash at 0x00536348 ends at 0x0053634c
Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes
empty_blocks 0, bad_blocks 0, c-&gt;nr_blocks 101
VFS: Cannot open root device &quot;mtdblock1&quot; or unknown-block(31,1)
Please append a correct &quot;root=&quot; boot option; here are the available partitions:
1f00            1024 mtdblock0 (driver?)
1f01            6464 mtdblock1 (driver?)
1f02             256 mtdblock2 (driver?)
Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,1)</code></pre></div>											<p class="post-edited">(Last edited by <strong>heji</strong> on 9 Feb 2009, 17:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81724">
				<div class="post-metadata">
					<div class="post-num">Post #294</div>
					<div class="post-author">cmoegele</div>
					<div class="post-datetime">
						12 Feb 2009, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>hi heji,</p><p>make menuconfig and in target image select ramdisk</p><p>generate image with this option and tftpboot 0x40000 as you have already done.</p><p>Once the router is running from ram you can write a squashfs image to flash.</p><p>(You&#039;ll be able to find those files ( 2 ) after you&#039;ve build for the orion target with OpenWRT trunk in the build_dir/linux-orion/ directory.<br />dd if=wrt350nv2-uImage of=/dev/mtdblock0&nbsp; <br />dd if=root.squashfs of=/dev/mtdblock1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;as dirNLk wrote)</p><p>And then you will be happy with a very fast router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>br</p><p>cm</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81853">
				<div class="post-metadata">
					<div class="post-num">Post #295</div>
					<div class="post-author">bigjezza</div>
					<div class="post-datetime">
						14 Feb 2009, 06:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cmoegele wrote:</cite><blockquote><p>&lt;SNIP&gt;<br />And then you will be happy with a very fast router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>br</p><p>cm</p></blockquote></div><p>Hey, just wondering, how is the WiFi working out? I cant stand the stock linksys firmware. Have you checked out the throughput of LAN-LAN file transfers through gigabit? Is it atleast as quick as the linksys firmware?</p><p>Also, anyone wanna help a dude out and upload an image I can flash with the Linksys web config? Do I have to bribe someone with Paypal? I&#039;d do almost anything for a version of WRT that has a web interface and is precompiled for this router...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81902">
				<div class="post-metadata">
					<div class="post-num">Post #296</div>
					<div class="post-author">DaBigMac</div>
					<div class="post-datetime">
						15 Feb 2009, 04:36					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s an interesting though actually, is the webif^2 package going to work? It should right, it&#039;s not a binary.. or is it?? <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>I never really thought about it.. has anyone tried it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81962">
				<div class="post-metadata">
					<div class="post-num">Post #297</div>
					<div class="post-author">relghuar</div>
					<div class="post-datetime">
						16 Feb 2009, 12:37					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />It&#039;s been a while since the last time I joined this discussion... Meanwhile I&#039;ve managed to screw my first device up quite thoroughly, doing a few nasty hardware experiments. Recently I&#039;ve got a brand new working one, and I&#039;m doing my best to keep it working (at least to get to u-boot prompt). I hope it will survive the 128mb upgrade I&#039;m gonna do sometime next week <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />)<br />I&#039;ve noticed there seems to be a bit of confusion about flashing images into the device, so - at least for those with working serial connection and u-boot prompt access - here&#039;s quite a safe way to flash anything you want, it&#039;s really just a few simple u-boot commands:<br /></p><div class="codebox"><pre><code>tftpboot 0x400000 &lt;filename&gt;
erase 0xff800000 0xfff4ffff
protect off 0xff800000 0xfff4ffff
cp.b 0x400000 0xff800000 0x750000</code></pre></div><p>This little code will burn any file you want directly to the flash, starting from address 0. In u-boot the flash is mapped to 0xff800000 address, so using correct offset you can boot things elsewhere as well. There are just a few things to watch out for:<br />- you should never EVER write anything above 0x7fc000 even if you by any chance need to overwrite u-boot - this area contains u-boot configuration and some signatures, if you corrupt this area u-boot will get stuck in the mac-address communication mode and you won&#039;t get access to prompt (not a complete disaster yet, it&#039;s still possible to recover without jtag from this)<br />- you should almost never write anything above 0x7c0000 address in flash either - that&#039;s u-boot code area and you don&#039;t need to rewrite this unless you want to upgrade/hack u-boot (for example to get rid of the annoying &quot;ercomm&quot; signature check at the end of rootfs <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> which is actually quite simple)<br />- you should be VERY careful while erasing or overwriting the 64k sector starting at 0x750000 (hence the 0xfff4ffff boundary in the erase above) - u-boot considers this to be the last sector of kernel/rootfs partitions, and checks the end of this sector for &#039;eRcOmM&#039; signature. If it&#039;s not there, again you will get stuck before u-boot prompt and the only way to recover without jtag is a special software communicating with router directly over low-level ethernet (mac addresses and other nasty stuff). I&#039;ve managed to get it working once, in a very hardcoded and limited way, if someone&#039;s interested (or desperate enough), I can supply the source code for further refinement.<br />Other than the 3 points above, there&#039;s really not much to screw up. If you stay inside flash address range 0 to 0x74ffff, you will always be able to get to u-boot prompt and reflash your device again.<br />Another little feature I found quite helpful was removing the kamikaze/target/linux/orion/patches/010-ignore-atag-cmdline.patch - this patch prevents kernel from accepting custom parameters from u-boot, so it will always start with the compiled-in command line regardless of the value of u-boot&#039;s &#039;bootargs&#039; variable. If you remove it, you can control kernel startup with this variable, making it for example capable to mount rootfs directly from usb drive. This is actually a nice little trick, as you can load the kernel over tftp each time, mounting USB root, and you can experiment without reflashing anything at all. And when playing with patches, it&#039;s also nice to reconfigure default openwrt mtd table to something like:<br /></p><div class="codebox"><pre><code>0x00000000-0x00750000 : &quot;kernel&quot;
0x001a0000-0x00750000 : &quot;rootfs&quot;
0x00750000-0x007c0000 : &quot;donttouch&quot;
0x007c0000-0x00800000 : &quot;u-boot&quot;</code></pre></div><p>- this way you will have a little more place for root (0x1a0000 gives you about 1.7mb for kernel, which I personally never managed to overrun), and you can be sure that even by direct /dev/mtdblock1 or 2 rewriting from linux you won&#039;t screw up the rootfs signature.<br />If you want to gain additional space for root, you can patch uboot to ignore the signature (I can supply a do-it-yourself-no-guarantee-at-all patch if someone feels brave enough) and get additional 3x64k sectors, and even use the nvram space (which you don&#039;t need in openwrt anyway) and gain another 2x64k... not much, but it&#039;s nice if you want to squeeze a lot of packages inside without USB drive, or if you need larger jffs partition.<br />Well, that was quite enough for one post I believe, now it&#039;s time for lunch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I&#039;m experiencing some problems with wifi network in 14384 svn checkout, but I&#039;ll get to that later.<br />Regards,</p><p>Rel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81986">
				<div class="post-metadata">
					<div class="post-num">Post #298</div>
					<div class="post-author">cmoegele</div>
					<div class="post-datetime">
						16 Feb 2009, 18:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DaBigMac wrote:</cite><blockquote><p>That&#039;s an interesting though actually, is the webif^2 package going to work? It should right, it&#039;s not a binary.. or is it?? <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>I never really thought about it.. has anyone tried it?</p></blockquote></div><p>Yes Webif^2 (xwrt) and LUCI is working well I tried both images and my favorite is Luci, because its pretty fast.</p><p>Best regards</p><p>cm</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82362">
				<div class="post-metadata">
					<div class="post-num">Post #299</div>
					<div class="post-author">heji</div>
					<div class="post-datetime">
						22 Feb 2009, 10:38					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>sata_via 0000:01:07.0: routed to hard irq line 4
Unable to handle kernel paging request at virtual address 0010042a
pgd = c6cf4000
[0010042a] *pgd=06d06031, *pte=00000000, *ppte=00000000
Internal error: Oops: 817 [#1]
Modules linked in: sata_via(+) ipt_REJECT xt_TCPMSS ipt_LOG xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc libata crc_ccitt
CPU: 0    Not tainted  (2.6.28.6 #3)
pc : [&lt;bf013b70&gt;]    lr : [&lt;bf00f030&gt;]    psr: 20000093
sp : c6d1fc2c  ip : c6d1fc40  fp : c6d1fc3c
r10: bf07e1b4  r9 : c6c95630  r8 : 00000000
r7 : 00000000  r6 : c6c9562c  r5 : 00000000  r4 : c7888000
r3 : 0000000a  r2 : 0010042a  r1 : c6d2a9e0  r0 : c7888000
Flags: nzCv  IRQs off  FIQs on  Mode SVC_32  ISA ARM  Segment user
Control: a005317f  Table: 06cf4000  DAC: 00000015
Process insmod (pid: 2259, stack limit = 0xc6d1e260)
Stack: (0xc6d1fc2c to 0xc6d20000)
fc20:                            c7888000 c6d1fc50 c6d1fc40 bf00f030 bf013b54 
fc40: a0000013 c6d1fc64 c6d1fc54 bf00f074 bf00effc c7888000 c6d1fc94 c6d1fc68 
fc60: bf004734 bf00f058 c6d1fc90 c780e0e4 bf015e7c c6c9562c 00000024 00000080 
fc80: c6d1e000 bf07de3c c6d1fcc4 c6d1fc98 bf00a754 bf004524 c780e000 c780e058 
fca0: c780e0e4 c780e000 c780e058 00000004 c6c9562c 00001d1c c6d1fd0c c6d1fcc8 
fcc0: bf07d7d0 bf00a73c bf07de3c c6d1fcd8 c02eefdc c02efd2c bf07ded0 bf07ded0 
fce0: bf07deec c6d1fcf1 bf07de04 c780e000 c780e058 bf07ddd0 00000000 000615c7 
fd00: c6d1fd30 c6d1fd10 c0303548 bf07d2c8 c780e058 c780e104 c780e058 bf07de04 
fd20: c0406398 c6d1fd50 c6d1fd34 c031ad10 c03034f8 c780e058 c780e104 bf07de04 
fd40: c6d1fd70 c6d1fd6c c6d1fd54 c031ae4c c031ac48 00000000 c031ade4 bf07de04 
fd60: c6d1fd94 c6d1fd70 c031a594 c031adf4 c782c698 c780e0a0 00000000 bf07de04 
fd80: bf07de04 c6c42120 c6d1fda4 c6d1fd98 c031ab50 c031a550 c6d1fdcc c6d1fda8 
fda0: c0319e6c c031ab40 bf07dc6e bf07ddd0 bf07de04 bf07de04 00000000 c0210f24 
fdc0: c6d1fdf0 c6d1fdd0 c031b058 c0319dd4 bf07ddd0 bf07de04 bf081000 00000000 
fde0: c0210f24 c6d1fe0c c6d1fdf4 c03037bc c031afb8 00002740 bf07e380 bf081000 
fe00: c6d1fe1c c6d1fe10 bf08101c c0303780 c6d1ff80 c6d1fe20 c0210298 bf081010 
fe20: c782e400 00000000 00000001 00000001 00000010 00000000 00000010 00000000 
fe40: 00000005 c73b3000 c0507ae0 c040bf10 40000013 c6d1fe80 c6d1fe64 c024bac0 
fe60: c024a404 00000000 c88bd000 c6d2ad80 00000001 c6d1fe90 c6d1fe84 c024bb80 
fe80: c024b9a8 00000003 c88bd000 c6d2ad80 00000001 c88be7e4 c6d1fec4 c6d1fea8 
fea0: c025dcb8 c025fbfc 00000000 c6d1ff48 00000000 bf07e380 c6d1fed4 c6d1fec8 
fec0: c025dd48 c025dc08 c6d1ff80 c6d1fed8 c02415f4 c025dd1c 00000000 c6d1ff50 
fee0: c6d1ff3c c88be9ec 00000000 c88bd000 c88be740 c6d2aea0 c88bef34 00000012 
ff00: 00000013 0000000a c02fe27c 00000043 00000043 c6d1e000 bf01d244 bf07e3c8 
ff20: bf07e38c c88beadc c03bf324 c88beadc 00000000 00000000 00000000 00000000 
ff40: 00000000 00000000 00000000 00002740 bf07e380 00074038 00000000 c0210f24 
ff60: c6d1ff80 00002740 bf07e380 00074038 00000000 c6d1ffa4 c6d1ff84 c0241964 
ff80: c0210258 c6d1ff90 756e694c 00000078 00000000 00000080 00000000 c6d1ffa8 
ffa0: c0210d80 c02418dc 00000078 00000000 00900080 00074038 00002740 00074028 
ffc0: 756e694c 00000078 00000000 00074028 beea0e91 000612e2 000615c7 00000000 
ffe0: 400508f0 beea0b24 0001184c 40050900 20000010 00900080 00522031 00522431 
Backtrace: 
Function entered at [&lt;bf013b44&gt;] from [&lt;bf00f030&gt;]
 r4:c7888000
Function entered at [&lt;bf00efec&gt;] from [&lt;bf00f074&gt;]
 r4:a0000013
Function entered at [&lt;bf00f048&gt;] from [&lt;bf004734&gt;]
 r4:c7888000
Function entered at [&lt;bf004514&gt;] from [&lt;bf00a754&gt;]
Function entered at [&lt;bf00a72c&gt;] from [&lt;bf07d7d0&gt;]
Function entered at [&lt;bf07d2b8&gt;] from [&lt;c0303548&gt;]
Function entered at [&lt;c03034e8&gt;] from [&lt;c031ad10&gt;]
 r8:c0406398 r7:bf07de04 r6:c780e058 r5:c780e104 r4:c780e058
Function entered at [&lt;c031ac38&gt;] from [&lt;c031ae4c&gt;]
 r7:c6d1fd70 r6:bf07de04 r5:c780e104 r4:c780e058
Function entered at [&lt;c031ade4&gt;] from [&lt;c031a594&gt;]
 r6:bf07de04 r5:c031ade4 r4:00000000
Function entered at [&lt;c031a540&gt;] from [&lt;c031ab50&gt;]
 r7:c6c42120 r6:bf07de04 r5:bf07de04 r4:00000000
Function entered at [&lt;c031ab30&gt;] from [&lt;c0319e6c&gt;]
Function entered at [&lt;c0319dc4&gt;] from [&lt;c031b058&gt;]
 r8:c0210f24 r7:00000000 r6:bf07de04 r5:bf07de04 r4:bf07ddd0
Function entered at [&lt;c031afa8&gt;] from [&lt;c03037bc&gt;]
 r8:c0210f24 r7:00000000 r6:bf081000 r5:bf07de04 r4:bf07ddd0
Function entered at [&lt;c0303770&gt;] from [&lt;bf08101c&gt;]
 r6:bf081000 r5:bf07e380 r4:00002740
Function entered at [&lt;bf081000&gt;] from [&lt;c0210298&gt;]
Function entered at [&lt;c0210248&gt;] from [&lt;c0241964&gt;]
 r7:00000000 r6:00074038 r5:bf07e380 r4:00002740
Function entered at [&lt;c02418cc&gt;] from [&lt;c0210d80&gt;]
 r7:00000080 r6:00000000 r5:00000078 r4:756e694c
Code: e5c03061 e5c03060 15d03060 e1a04000 (15c23000) 
---[ end trace 3482ee2c85f43df7 ]---
nf_conntrack version 0.5.0 (2048 buckets, 8192 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.



BusyBox v1.11.3 (2009-02-22 12:13:27 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r14586) -------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/#</code></pre></div><p>I used via 6421a sata get error.</p>											<p class="post-edited">(Last edited by <strong>heji</strong> on 23 Feb 2009, 13:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82410">
				<div class="post-metadata">
					<div class="post-num">Post #300</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						23 Feb 2009, 01:14					</div>
				</div>
				<div class="post-content content">
					<p>For all those eager to test WRT350N v2 support, but are not used to build OpenWRT, I wrote and enhanced some HowTos for <a href="http://wiki.openwrt.org/doc/howto/buildvm">setting up a virtual machine with Debian for building OpenWrt</a> and for <a href="http://wiki.openwrt.org/doc/howto/buildroot">setting up the build environment and building OpenWrt</a> on the wiki (or <a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Development%282f%29SetupBuildEnvironmentHowTo.html#head-e3e4f92bbc7fecac221d72168eb2b57f92741df2">here</a> and <a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29BuildingKamikazeHowTo.html">here</a> in the old wiki) plus some additions in this post.<br />Thanks to Dirk, Striker, Kaloz, Lennert, Davidkra and all the others to make this possible.</p><p>Please PM me if you can provide additional information, so I can update this post.</p><p><strong>Attention! It is NOT recommended to do this stuff without having a <a href="http://forum.openwrt.org/viewtopic.php?pid=66943#p66943">serial connection</a> or JTAG connection to the router! Do flashing at your own risk!</strong></p><p>To build OpenWRT just login with root and a normal user in parallel into the build environment, then follow the instructions of the <a href="http://wiki.openwrt.org/doc/howto/buildroot">Building OpenWrt HowTo</a> (or <a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)BuildingKamikazeHowTo.html">here</a> in the old wiki).<br />For older revisions you can add <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/patches/webupgrade/">webupgrade image</a> (before <a href="https://dev.openwrt.org/changeset/18761">r18761</a> plus fix from <a href="https://dev.openwrt.org/changeset/18794">r18794</a>) and <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/patches/sysupgrade/">sysupgrade support</a> (before <a href="https://dev.openwrt.org/changeset/19166">r19166</a>).<br />Place the patch files directly in the normal user&#039;s home directory (~).<br />The property changes have to be applied manually, maybe you have to apply some code changes manually too (the code is always under development).<br /></p><div class="codebox"><pre><code>(as root user)
aptitude install zip

(as normal user)
mkdir -p ~/orion/trunk/
cd ~/orion/trunk/
... do all the checkout stuff from the HowTo ...
... Note: repository now at svn://svn.openwrt.org/openwrt/trunk (not https)...
# sysupgrade (only necessary before revision 19166)
patch -p0 &lt; ~/orion_sysupgrade_mtd_wnr854t.r17264.patch
patch -p0 &lt; ~/orion_sysupgrade_mtd_wrt350nv2.r17264.patch
patch -p0 &lt; ~/orion_sysupgrade_platform_sh.r17264.patch
# webupgrade (only necessary before revision 18761/18794)
patch -p0 &lt; ~/orion_webupgrade.builder_v21.patch
patch -p0 &lt; ~/orion_webupgrade.tools_makefile.r17264.patch
patch -p0 &lt; ~/orion_webupgrade.image_makefile_wrt350nv2.r17264.patch</code></pre></div><p>--&gt; &quot;make menuconfig&quot; will tell if more packages have to be installed via APT by the root user (parallel login).<br />--&gt; Change the target to &quot;Marvell Orion&quot;, for temporary testing set the target image to &quot;ramdisk&quot;.<br />--&gt; Add the modules to the image (=&quot;*&quot;) that are required to access the internet, so OpenWrt can retrieve further packages.<br />&nbsp; &nbsp; &nbsp; Be careful, do not make your package too big, only the essentials are necessary, all other stuff can be added later.<br />--&gt; If you don&#039;t use a 192.16.1.0/24 net, then you may change the configuration of the image to fit your network.<br />--&gt; If for any reason you want to compile everything again, then run &quot;make distclean&quot; to compile from scratch</p><p>After compilation the build can be found in the bin folder.</p><p>Loading the build into the router via serial console and TFTP<br />--&gt; Download the build from the virtual machine to the real computer (e.g. via <a href="http://www.winscp.net/">WinSCP</a>).<br />--&gt; Setup the <a href="http://forum.openwrt.org/viewtopic.php?pid=66943#p66943">serial connection</a> to the router, start the console (115200,8,N,1; e.g. via <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">Putty</a>) to listen on the serial port, power up the router and interrupt the boot process by pressing enter in the console.<br />--&gt; Temporary change the envvars with setenv to fit your network. You can apply the changes permanently with saveenv (not recommended).<br /></p><div class="codebox"><pre><code>setenv ipaddr 10.0.0.99
setenv serverip 10.0.0.1</code></pre></div><p>--&gt; Start a tftp server on your computer (e.g. <a href="http://tftpd32.jounin.net/">tftpd32</a> on windows) and point it to your copy of the bin folder.</p><p>In the console you can now load and start the ramdisk image with<br /></p><div class="codebox"><pre><code>tftpboot &quot;openwrt-wrt350nv2-uImage&quot;
bootm</code></pre></div><p>After booting you can telnet to 192.168.1.1 (e.g via <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">Putty</a>).<br />Setup a password for root to enable SSH access. This also disables telnet.</p><p>[s]<strong>Remember the <a href="http://forum.openwrt.org/viewtopic.php?pid=76997#p76997">caveats mentioned by DirkNL</a>.</strong>[/s] (Wifi/W-LAN, LAN port #4, USB is working; please do stability and performance tests before using it in a production environment).<br />Several people report instabilities for wireless/WLAN/Wifi after running it for several days. These can normally be avoided by a daily restart as described in <a href="https://forum.openwrt.org/viewtopic.php?pid=102856#p102856">post #751</a>.</p><p>For flashing (<strong>at your own risk!</strong>) see the next two pages of this thread (especially <a href="https://forum.openwrt.org/viewtopic.php?pid=92789#p92789">#375</a> and <a href="http://forum.openwrt.org/viewtopic.php?pid=89744#p89744">#341</a>) plus the instructions of <a href="http://forum.openwrt.org/viewtopic.php?pid=81962#p81962">this post</a> by relghuar.<br />Also read the <a href="http://wiki.openwrt.org/OpenWrtDocs/Installing/TFTP">wiki page about TFTP</a> (or <a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)Installing(2f)TFTP.html">here</a>).<br />If there&#039;s no /jffs after flashing, then check out <a href="http://forum.openwrt.org/viewtopic.php?pid=84103#p84103">this post by DirkNL</a>.</p><p>For a web interface install the package &quot;webif&quot;, or &quot;luci-admin-mini&quot; plus &quot;luci-admin-full&quot; with &quot;luci-theme-openwrt&quot;.</p><p>For getting back to the stock firmware check out DirkNL&#039;s posting <a href="http://forum.openwrt.org/viewtopic.php?pid=74727#p74727">here</a> and <a href="http://forum.openwrt.org/viewtopic.php?pid=81042#p81042">here</a> plus Pregi&#039;s posting <a href="http://forum.openwrt.org/viewtopic.php?pid=79879#p79879">here</a>.</p><p>There&#039;s even a recovery method for the WRT350Nv2 without any gadgets: &#039;download mode&#039;.<br />The update via download mode was described by drizzt81 in post <a href="http://forum.openwrt.org/viewtopic.php?pid=93665#p93665">#436</a> and DaBigMac created a HowTo for setting the router into download mode in post <a href="https://forum.openwrt.org/viewtopic.php?pid=94830#p94830">#524</a>.</p><p>Hope these guides will help to get more people into testing.<br />Maddes</p><p>Changelog:<br />* 2009-02-26: webupgrade image build working, repositories, luci information<br />* 2009-02-28: bigger HD needed for all packages, added DirkNL&#039;s warnings<br />* 2009-03-01: temporary change the U-Boot config to fit the network, how to get back to stock firmware<br />* 2009-03-05: updated Building Kamikaze HowTo with a bell/beep/alert, when make finishes<br />* 2009-03-23: splitted the webupgrade patch into a general part and an often changed part (tools/Makefile)<br />* 2009-03-31: adjusted wiki links to server change<br />* 2009-07-04: corrected links, added info about kernel size issue<br />* 2009-08-03: kernel is now below 1MB, [s]mtd patch is just for a nicer mtd map[/s]<br />* 2009-08-31: updated instructions to most current sysupgrade support and webupgrade<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mtd patch is necessary for sysupgrade support<br />* 2009-11-29: added links to &#039;download mode&#039; recovery method<br />* 2009-12-13: webupgrade image is now in trunk (added in <a href="https://dev.openwrt.org/changeset/18761">r18761</a>, fixed in <a href="https://dev.openwrt.org/changeset/18794">r18794</a>)<br />* 2010-01-16: sysupgrade support is now in trunk (added in <a href="https://dev.openwrt.org/changeset/19166">r19166</a>)<br />* 2010-01-17: package &quot;luci-theme-openwrt&quot; was not mentioned for luci<br />* 2010-02-02: package &quot;luci-admin-mini&quot; was not mentioned for luci<br />* 2010-04-05: added info about wireless instabilities after several days plus link to solution<br />* 2010-06-13: fixed wiki links for HowTos</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 13 Jun 2010, 18:52)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 12 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>