<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR7100</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 7 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p70432">
				<div class="post-metadata">
					<div class="post-num">Post #151</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						3 Jul 2008, 19:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>my bad.&nbsp; I forgot to transfer the new files from the: <br /></p><div class="codebox"><pre><code>build_dir/linux-ar7100/linux-2.6.23.17/drivers/net/ag7100 
to the 
target/linux/ar7100/files/drivers/net/ag7100</code></pre></div><p>fixed. please checkout again the source code. the ag7100-old directory is where tha mikrotik original files reside.&nbsp; this code does not compile clean.</p></blockquote></div><p>Your ag7100_phy.h hardcodes the &quot;active&quot; PHY to the kzh_phy.&nbsp; &nbsp;I have modified your tarball from yesterday and have a cleanly building ipPlus PHY that seems to work in that it correctly reports links speed.&nbsp; I still can&#039;t get packets in or out, but at least the PHY is happier.&nbsp; I&#039;m currently working on inserting the ipPlus init code into the driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70433">
				<div class="post-metadata">
					<div class="post-num">Post #152</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						3 Jul 2008, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>Forgot to mention that I would love to share by snapshot but have nowhere to share it from.&nbsp; Any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70484">
				<div class="post-metadata">
					<div class="post-num">Post #153</div>
					<div class="post-author">flam</div>
					<div class="post-datetime">
						4 Jul 2008, 18:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I did some reverse enginering about RB433 and ICPlus Phy. Here comes some info:<br />- AR7100 MAC0 is connected to IP175C&#039;s Port5 (CPU Port)<br />- AR7100 MAC1 is connected to IP175C&#039;s Phy4 (Port4) - this is RB433&#039;s POE port<br />- IP175C&#039;s Port1 and Port2 are connected to ports on the right of RB433<br />- Port1, Port2 and Port5 must be in the same VLAN</p><p>The following list is RB433&#039;s IP175C register dump:</p><p>PHY state for PHY0 (enet0, phyBase 0x&nbsp; &nbsp; &nbsp; &nbsp;0, phyAddr 0x0)<br />PHY Registers:<br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00003100<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000</p><p>PHY state for PHY1 (enet0, phyBase 0x&nbsp; &nbsp; &nbsp; &nbsp;0, phyAddr 0x1)<br />PHY Registers:<br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00003100<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000</p><p>PHY state for PHY2 (enet0, phyBase 0x&nbsp; &nbsp; &nbsp; &nbsp;0, phyAddr 0x2)<br />PHY Registers:<br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00003100<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000</p><p>PHY state for PHY3 (enet0, phyBase 0x&nbsp; &nbsp; &nbsp; &nbsp;0, phyAddr 0x3)<br />PHY Registers:<br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00003100<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000</p><p>PHY state for PHY4 (enet0, phyBase 0x&nbsp; &nbsp; &nbsp; &nbsp;0, phyAddr 0x0)<br />PHY Registers:<br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00003100<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000</p><p>Switch Global Registers:<br />Phy29 Registers:<br />Reg 18 (0x12) 29_18_REG&nbsp; &nbsp; = 0x0000cc08<br />Reg 19 (0x13) 29_19_REG&nbsp; &nbsp; = 0x00008080<br />Reg 20 (0x14) 29_20_REG&nbsp; &nbsp; = 0x00008080<br />Reg 21 (0x15) 29_21_REG&nbsp; &nbsp; = 0x00008000<br />Reg 22 (0x16) 29_22_REG&nbsp; &nbsp; = 0x00000420<br />Reg 23 (0x17) 29_23_REG&nbsp; &nbsp; = 0x000007c2</p><p>Reg 24 (0x18) 29_24_REG&nbsp; &nbsp; = 0x0000ffff<br />Reg 25 (0x19) 29_25_REG&nbsp; &nbsp; = 0x0000ffff<br />Reg 26 (0x1a) 29_26_REG&nbsp; &nbsp; = 0x0000ffff<br />Reg 27 (0x1b) 29_27_REG&nbsp; &nbsp; = 0x0000ffff<br />Reg 28 (0x1c) 29_28_REG&nbsp; &nbsp; = 0x0000ffff</p><p>Reg 29 (0x1d) 29_29_REG&nbsp; &nbsp; = 0x0000403f<br />Reg 30 (0x1e) 29_30_REG&nbsp; &nbsp; = 0x0000ffff<br />Reg 31 (0x1f) 29_31_REG&nbsp; &nbsp; = 0x0000175c<br />Phy30 Registers:<br />Reg 00 (0x00) 30_0_REG&nbsp; &nbsp; &nbsp;= 0x00008014<br />Reg 01 (0x01) 30_1_REG&nbsp; &nbsp; &nbsp;= 0x00002f3f<br />Reg 02 (0x02) 30_2_REG&nbsp; &nbsp; &nbsp;= 0x00003f30<br />Reg 03 (0x03) 30_3_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f<br />Reg 04 (0x04) 30_4_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f<br />Reg 05 (0x05) 30_5_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f<br />Reg 06 (0x06) 30_6_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f<br />Reg 07 (0x07) 30_7_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f<br />Reg 08 (0x08) 30_8_REG&nbsp; &nbsp; &nbsp;= 0x00003f3f</p><p>Reg 09 (0x09) 30_9_REG&nbsp; &nbsp; &nbsp;= 0x00000005</p><p>Reg 10 (0x0a) 30_10_REG&nbsp; &nbsp; = 0x00000000<br />Reg 11 (0x0b) 30_11_REG&nbsp; &nbsp; = 0x00000000</p><p>Reg 12 (0x0c) 30_12_REG&nbsp; &nbsp; = 0x000000a2</p><p>Reg 13 (0x0d) 30_13_REG&nbsp; &nbsp; = 0x0000000f<br />Reg 16 (0x10) 30_16_REG&nbsp; &nbsp; = 0x0000009f<br />Reg 17 (0x11) 30_17_REG&nbsp; &nbsp; = 0x00000000<br />Reg 18 (0x12) 30_18_REG&nbsp; &nbsp; = 0x00006900<br />Reg 20 (0x14) 30_20_REG&nbsp; &nbsp; = 0x00000000<br />Reg 21 (0x15) 30_21_REG&nbsp; &nbsp; = 0x0000c200<br />Reg 22 (0x16) 30_22_REG&nbsp; &nbsp; = 0x00000180<br />Reg 23 (0x17) 30_23_REG&nbsp; &nbsp; = 0x00000000<br />Reg 24 (0x18) 30_24_REG&nbsp; &nbsp; = 0x00000000<br />Reg 25 (0x19) 30_25_REG&nbsp; &nbsp; = 0x00000000<br />Reg 26 (0x1a) 30_26_REG&nbsp; &nbsp; = 0x00000000<br />Reg 27 (0x1b) 30_27_REG&nbsp; &nbsp; = 0x00000100<br />Reg 28 (0x1c) 30_28_REG&nbsp; &nbsp; = 0x00000000<br />Reg 29 (0x1d) 30_29_REG&nbsp; &nbsp; = 0x00000000<br />Reg 30 (0x1e) 30_30_REG&nbsp; &nbsp; = 0x00000000<br />Reg 31 (0x1f) 30_31_REG&nbsp; &nbsp; = 0x00000000<br />Phy31 Registers:<br />Reg 00 (0x00) 31_0_REG&nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 01 (0x01) 31_1_REG&nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 02 (0x02) 31_2_REG&nbsp; &nbsp; &nbsp;= 0x00000000<br />Reg 03 (0x03) 31_3_REG&nbsp; &nbsp; &nbsp;= 0x0000ff60<br />Reg 04 (0x04) 31_4_REG&nbsp; &nbsp; &nbsp;= 0x0000ff61<br />Reg 05 (0x05) 31_5_REG&nbsp; &nbsp; &nbsp;= 0x000091f0<br />Reg 06 (0x06) 31_6_REG&nbsp; &nbsp; &nbsp;= 0x0000c003</p><p>If anyone is interested in how to dump any register or memory region from RouterOS I can explain it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70487">
				<div class="post-metadata">
					<div class="post-num">Post #154</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						4 Jul 2008, 19:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flam wrote:</cite><blockquote><p>Hi All,</p><p>I did some reverse enginering about RB433 and ICPlus Phy. Here comes some info:<br />- AR7100 MAC0 is connected to IP175C&#039;s Port5 (CPU Port)<br />- AR7100 MAC1 is connected to IP175C&#039;s Phy4 (Port4) - this is RB433&#039;s POE port<br />- IP175C&#039;s Port1 and Port2 are connected to ports on the right of RB433<br />- Port1, Port2 and Port5 must be in the same VLAN</p><br /><p>If anyone is interested in how to dump any register or memory region from RouterOS I can explain it.</p></blockquote></div><p>Flam,</p><p>I am trying to do the same as you for the RB450 but have a couple of questions. </p><p>- When you refer to the AR7100&#039;s MAC0 and MAC1 above, are you actually referring to the AR7100&#039;s MII0 and MII1 interfaces?<br />- I would love to find out how to dump the registers from my 450<br />- When I try to dump the 450 registers from my OpenWRT build, I get a lot of invalid values, especially in the switch registers (29-31).&nbsp; The values returned are 0xffff.&nbsp; I am suspecting that the ag7100.c ag7100_mii_write and ag7100_mii_read functions are placing the phy_addr in the wrong place in the bitmask, but I am not sure.&nbsp; Any ideas?</p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70492">
				<div class="post-metadata">
					<div class="post-num">Post #155</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						4 Jul 2008, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>Here is a copy of my reg dump from OpenWRT for the RB450:</p><p>Things I noticed:<br />- For the switch registers, regardless of where PHY 29, 30 or 31 are selected, the registers from PHY 29 are returned.&nbsp; This causes the attempted read from 30_0 through 30_17 and 31_0 through 31_6 to fail (29_0 through 29_17 are invalid). <br />- The PHY states for PHY0 through PHY4 are identical, even though only PHY4 has a cable plugged in.&nbsp; This makes me believe that the PHY selection is very broken.</p><p>PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY state for PHY1 (enet1, phyBase 0x00000000, phyAddr 0x1)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY state for PHY2 (enet1, phyBase 0x00000000, phyAddr 0x2)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY state for PHY3 (enet1, phyBase 0x00000000, phyAddr 0x3)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY state for PHY4 (enet0, phyBase 0x00000000, phyAddr 0x4)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY state for PHY5 (enet0, phyBase 0x00000000, phyAddr 0x0)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />PHY Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) PHY Control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 0x00001000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) PHY Status&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00007849&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) PHY Identifier 1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000243&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) PHY Identifier 2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000d80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) Auto-Negotiation Advertisement&nbsp; &nbsp;= 0x000001e1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) Link Partner Ability&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) Auto-Negotiation Expansion&nbsp; &nbsp; &nbsp; &nbsp;= 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Switch Global Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Phy29 Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 18 (0x12) 29_18_REG&nbsp; &nbsp; = 0x0000cc08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 19 (0x13) 29_19_REG&nbsp; &nbsp; = 0x00009f9f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 20 (0x14) 29_20_REG&nbsp; &nbsp; = 0x00009f9f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 21 (0x15) 29_21_REG&nbsp; &nbsp; = 0x00009f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 22 (0x16) 29_22_REG&nbsp; &nbsp; = 0x00000420&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 23 (0x17) 29_23_REG&nbsp; &nbsp; = 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 24 (0x18) 29_24_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 25 (0x19) 29_25_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 26 (0x1a) 29_26_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 27 (0x1b) 29_27_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 28 (0x1c) 29_28_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 29 (0x1d) 29_29_REG&nbsp; &nbsp; = 0x0000403f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 30 (0x1e) 29_30_REG&nbsp; &nbsp; = 0x00000002&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 31 (0x1f) 29_31_REG&nbsp; &nbsp; = 0x0000175a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Phy30 Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) 30_0_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) 30_1_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) 30_2_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) 30_3_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) 30_4_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) 30_5_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) 30_6_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 07 (0x07) 30_7_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 08 (0x08) 30_8_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 09 (0x09) 30_9_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 10 (0x0a) 30_10_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 11 (0x0b) 30_11_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 12 (0x0c) 30_12_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 13 (0x0d) 30_13_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 16 (0x10) 30_16_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 17 (0x11) 30_17_REG&nbsp; &nbsp; = 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 18 (0x12) 30_18_REG&nbsp; &nbsp; = 0x0000cc08&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 20 (0x14) 30_20_REG&nbsp; &nbsp; = 0x00009f9f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 21 (0x15) 30_21_REG&nbsp; &nbsp; = 0x00009f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 22 (0x16) 30_22_REG&nbsp; &nbsp; = 0x00000420&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 23 (0x17) 30_23_REG&nbsp; &nbsp; = 0x00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 24 (0x18) 30_24_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 25 (0x19) 30_25_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 26 (0x1a) 30_26_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 27 (0x1b) 30_27_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 28 (0x1c) 30_28_REG&nbsp; &nbsp; = 0x00000001&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 29 (0x1d) 30_29_REG&nbsp; &nbsp; = 0x0000403f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 30 (0x1e) 30_30_REG&nbsp; &nbsp; = 0x00000002&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 31 (0x1f) 30_31_REG&nbsp; &nbsp; = 0x0000175a&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Phy31 Registers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Reg 00 (0x00) 31_0_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 01 (0x01) 31_1_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 02 (0x02) 31_2_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 03 (0x03) 31_3_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 04 (0x04) 31_4_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 05 (0x05) 31_5_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Reg 06 (0x06) 31_6_REG&nbsp; &nbsp; &nbsp;= 0x0000ffff</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70494">
				<div class="post-metadata">
					<div class="post-num">Post #156</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						4 Jul 2008, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>I am getting quite frustrated trying to get OpenWRT working on the RB450 and am ready to try a different approach to getting the problem solved.&nbsp; Forgive me if this is inappropriate for this forum, but I would like to offer a bounty to the person who comes us with a working OpenWRT build (with source!) that works on the RB450, including the network stuff.</p><p>The bounty will be CAD$600:</p><p>- $300 to the winner<br />- $150 to OpenWRT<br />- $150 to the open source project of the winner&#039;s choosing</p><p>I have already donated two RB450s and two RB433s to the core OpenWRT team, so you can trust that the bounty will be paid.&nbsp; Again, if this is inappropriate, let me know (kindly) and I&#039;ll withdraw the offer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70498">
				<div class="post-metadata">
					<div class="post-num">Post #157</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						4 Jul 2008, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>patience is a virtue.&nbsp; I am sure we will sort this out.&nbsp; it&#039;s just a matter of time.&nbsp; our free time is limited but we will get this going one way or another.&nbsp; I still feel that alix boards are by far a much better choice on cost/performance/stability/reliability and compatibility. also atom boards are just around the corner!</p><p>also if you think 800MHz is cool, check out this <a href="http://www.linuxdevices.com/news/NS8083740858.html">ARM 2GHz</a> baby ...</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 5 Jul 2008, 00:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70503">
				<div class="post-metadata">
					<div class="post-num">Post #158</div>
					<div class="post-author">flam</div>
					<div class="post-datetime">
						5 Jul 2008, 10:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>number6 wrote:</cite><blockquote><p>When you refer to the AR7100&#039;s MAC0 and MAC1 above, are you actually referring to the AR7100&#039;s MII0 and MII1 interfaces?<br />- I would love to find out how to dump the registers from my 450<br />- When I try to dump the 450 registers from my OpenWRT build, I get a lot of invalid values, especially in the switch registers (29-31).&nbsp; The values returned are 0xffff.&nbsp; I am suspecting that the ag7100.c ag7100_mii_write and ag7100_mii_read functions are placing the phy_addr in the wrong place in the bitmask, but I am not sure.&nbsp; Any ideas?</p><p>thanks.</p></blockquote></div><p>In RB433 AR7100&#039;s MAC0 is connected through MII0 interface to IP175C&#039;s MAC5 which has to be switched to IP175C&#039;s MAC1(PHY1) and/or IP175C&#039;s MAC2(PHY2)<br />AR7100&#039;s MAC1 is connected through MII1 interface to IP175C&#039;s PHY4, this is RB433&#039;s POE port<br />IP175C&#039;s PHY0 and PHY3 are not used in RB433</p><p>My register dump was generated from Mikrotik&#039;s RouterOS 3.9. To make this you have to do the followings:<br />- Build a static Busybox with telnetd and login and sh support. Ofcourse you have to build any other network or shell tools which you want to use<br />- Boot your custom Openwrt or other custom kernel through ethernet<br />- Mount /dev/mtdblock1 to /mnt/mtd1<br />- Copy static busybox to /mnt/mtd1/bin/busybox.new. There is an original Busybox in bin directory so don&#039;t overwrite it.<br />- Make symbolic links from busybox.new to /mnt/mtd1/bin/telnetd, /mnt/mtd1/bin/sh and /mnt/mtd1/sbin/login. Don&#039;t overwrite login in bin directory.<br />- Make symbolic links to any other missing tools (ifconfig, route, etc.)<br />- Edit /mnt/mtd1/etc/rc.d/run.d/S10nova and insert the following at the begining of the file:<br />/bin/telnetd -l /sbin/login -p 2323<br />- Edit /mnt/mtd1/etc/passwd and set root&#039;s home to /root<br />- Reboot RouterOS<br />- Now you can telnet to RouterOS through port 2323 and get Linux shell<br />- Determine the exact kernel version <br />- Compile a test module for that kernel. Ony module init and exit needed. From this module you will able to access any memory region of RB4XX. <br />- Copy your module to RB4XX and modprobe it.<br />To print values I was not able to use printk because after inserting test module kernel immediatelly crashed. I wrote simple serial string print function based on AR7100&#039;s Uart16550Put function.</p>											<p class="post-edited">(Last edited by <strong>flam</strong> on 5 Jul 2008, 10:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70509">
				<div class="post-metadata">
					<div class="post-num">Post #159</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						5 Jul 2008, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>Flam, thanks for the info.&nbsp; I&#039;ll give it a go on Monday.</p><p>Acoul, patience may be a virtue but it&#039;s not one of mine! :-)&nbsp; I&#039;m simply running out of ideas on how to move forward.</p><p>I haven&#039;t given up working on this myself but thought that a little extra motivation might move the RB450 higher up on the priority list.&nbsp; I&#039;ll work on finding a suitable place to place my target/linux/ar7100 stuff, hopefully by Monday as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70538">
				<div class="post-metadata">
					<div class="post-num">Post #160</div>
					<div class="post-author">arianofiran</div>
					<div class="post-datetime">
						6 Jul 2008, 09:13					</div>
				</div>
				<div class="post-content content">
					<p>hi all</p><p>i have booted the rb411 by netboot imaged provided,but when mounting the mtdblock1 or mtblock1 all file size is 0 ,what was going wrong? this is my dsmeg:</p><br /><p>Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #2 Mon Jun 30 14:04:06 EEST 2008<br />CPU revision is: 00019374<br />Determined physical RAM map:<br />User-defined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />On node 0 totalpages: 8192<br />&nbsp; Normal zone: 64 pages used for memmap<br />&nbsp; Normal zone: 0 pages reserved<br />&nbsp; Normal zone: 8128 pages, LIFO batch:0<br />&nbsp; Movable zone: 0 pages used for memmap<br />Built 1 zonelists in Zone order.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS0,115200 gpio=4031 mem=32M kmac=00:0C:42:17:5A:8B board=411 boot=1 <br />Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />Cache parity protection disabled<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Using 150.000 MHz high precision timer.<br />Console: colour dummy device 80x25<br />console [ttyS0] enabled<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 28140k/32768k available (2070k kernel code, 4628k reserved, 321k data, 804k init, 0k highmem)<br />Calibrating delay loop... 199.47 BogoMIPS (lpj=997376)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />registering PCI controller with io_map_base unset<br />Generic PHY: Registered new driver<br />NET: Registered protocol family 2<br />Time: MIPS clocksource has been installed.<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; Â© 2001-2006 Red Hat, Inc.<br />yaffs Jun 30 2008 14:01:34 Installing. <br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A<br />serial8250.0: ttyS1 at I/O 0x3f8 (irq = 4) is a 16450<br />serial8250.0: ttyS2 at I/O 0x2f8 (irq = 3) is a 16450<br />serial8250.0: ttyS3 at I/O 0x3e8 (irq = 4) is a 16450<br />serial8250 serial8250.0: unable to register port at index 3 (IO2e8 MEM0 IRQ3): -28<br />ICPlus IP175C: Registered new driver<br />Infineon ADM6996: Registered new driver<br />Marvell 88E6060: Registered new driver<br />AG7100: Length per segment 1536<br />AG7100: Max segments per packet 2<br />AG7100: Max tx descriptor count&nbsp; &nbsp; 256<br />AG7100: Max rx descriptor count&nbsp; &nbsp; 128<br />AG7100: fifo cfg 3 008001ff<br />AG7100CHH: Mac address for unit 0 &#039;00:0c:42:17:5a:8b&#039;<br />RB400 nand<br />NAND SPI clock 25000 kHz (AHB 150000 kHz / 6)<br />FLASH SPI clock 25000 kHz (AHB 150000 kHz / 6)<br />NAND device: Manufacturer ID: 0xad, Chip ID: 0x76 (Hynix NAND 64MiB 3,3V 8-bit)<br />Scanning device for bad blocks<br />Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:<br />0x00040000-0x00400000 : &quot;RouterBoard NAND Boot&quot;<br />0x00400000-0x04000000 : &quot;RouterBoard NAND Main&quot;<br />0x00000000-0x00040000 : &quot;RouterBoard NAND Booter&quot;<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 804k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />ag7100_ring_alloc Allocated 3072 at 0x81288000<br />ag7100_ring_alloc Allocated 1536 at 0x812c8000<br />AG7100: cfg1 0xf cfg2 0x7014<br />ksz_phy: autonegotiation is not supported<br />AG7100: unit 0: phy not up carrier 1<br />Writing 4<br />ag7100_ring_free Freeing at 0x81288000<br />ag7100_ring_free Freeing at 0x812c8000<br />ag7100_ring_alloc Allocated 3072 at 0x81288000<br />ag7100_ring_alloc Allocated 1536 at 0x812c8000<br />AG7100: cfg1 0xf cfg2 0x7014<br />ksz_phy: autonegotiation does not completed<br />Writing 4<br />ag7100_ring_free Freeing at 0x81288000<br />ag7100_ring_free Freeing at 0x812c8000<br />ag7100_ring_alloc Allocated 3072 at 0x81288000<br />ag7100_ring_alloc Allocated 1536 at 0x812c8000<br />AG7100: cfg1 0xf cfg2 0x7014<br />ksz_phy: autonegotiation is not supported<br />Writing 4<br />ag7100_ring_free Freeing at 0x81288000<br />ag7100_ring_free Freeing at 0x812c8000<br />ag7100_ring_alloc Allocated 3072 at 0x81288000<br />ag7100_ring_alloc Allocated 1536 at 0x812c8000<br />AG7100: cfg1 0xf cfg2 0x7014<br />ksz_phy: autonegotiation does not completed<br />Writing 4<br />AG7100: unit 0 phy is up...GMii 100Mbps full duplex<br />AG7100: pll reg 0x18050010: 0x1099&nbsp; AG7100: cfg_1: 0x1ff0000<br />AG7100: cfg_2: 0x3ff<br />AG7100: cfg_3: 0x8001ff<br />AG7100: cfg_4: 0xffff<br />AG7100: cfg_5: 0x7ffef<br />AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x10 <br />end_request: I/O error, dev mtdblock2, sector 0<br />SQUASHFS error: sb_bread failed reading block 0x0<br />yaffs: dev is 32505858 name is &quot;mtdblock2&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 31.2, &quot;mtdblock2&quot;<br />yaffs: dev is 32505857 name is &quot;mtdblock1&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 31.1, &quot;mtdblock1&quot;<br />root@OpenWrt:/#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70539">
				<div class="post-metadata">
					<div class="post-num">Post #161</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						6 Jul 2008, 09:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arianofiran wrote:</cite><blockquote><p>hi all</p><p>i have booted the rb411 by netboot imaged provided,but when mounting the mtdblock1 or mtblock1 all file size is 0 ,what was going wrong? this is my dsmeg:<br /></p><div class="codebox"><pre><code>Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #2 Mon Jun 30 14:04:06 EEST 2008</code></pre></div></blockquote></div><p>please use the latest nedtboot image provided <a href="http://wifi.ozo.com/airo/mirror/ar7100/alex/">here</a>. this is still work in progress.<br /></p><div class="codebox"><pre><code>Linux version 2.6.23.17 (alex@extreme) (gcc version 4.2.4) #3 Wed Jul 2 22:56:34 EEST 2008</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70587">
				<div class="post-metadata">
					<div class="post-num">Post #162</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						7 Jul 2008, 11:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>number6 wrote:</cite><blockquote><p>Here is a copy of my reg dump from OpenWRT for the RB450:</p><p>Things I noticed:<br />- For the switch registers, regardless of where PHY 29, 30 or 31 are selected, the registers from PHY 29 are returned.&nbsp; This causes the attempted read from 30_0 through 30_17 and 31_0 through 31_6 to fail (29_0 through 29_17 are invalid). <br />- The PHY states for PHY0 through PHY4 are identical, even though only PHY4 has a cable plugged in.&nbsp; This makes me believe that the PHY selection is very broken.<br />...</p></blockquote></div><p>Have you tried to enable the IP175C register by writing 0x175c to phy 29, register 31? Like the r6040.c driver does for the RDC3211 (e.g. on [s]Sitecom WL-153[/s] Airlink101 AR525W):<br /></p><div class="codebox"><pre><code>    if (lp-&gt;switch_sig  == ICPLUS_PHY_ID) {
        phy_write(ioaddr, 29, 31, 0x175C); /* Enable registers */</code></pre></div><p>Maybe this fixes the values read from the registers.</p>											<p class="post-edited">(Last edited by <strong>jal2</strong> on 7 Jul 2008, 13:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70594">
				<div class="post-metadata">
					<div class="post-num">Post #163</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						7 Jul 2008, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>Belkin recently&nbsp; also <a href="http://www.belkin.com/uk/support/article/?lid=enu&amp;pid=F5D8232uk4&amp;aid=10243&amp;scid=0">released</a> some GPL code for this platform.</p><p>Looking at the Kconfig file under the drivers/net directory:<br /></p><div class="codebox"><pre><code>choice
    prompt &quot;PHY (or switch) used&quot;
    depends on AG7100

config ATHR_PHY
    bool &quot;Atheros F1 GigE Phy&quot;

config VITESSE_PHY
    bool &quot;Vitesse GigE Phy 8201&quot;

config VITESSE_8601_PHY
    bool &quot;Vitesse Gige Phy 8601 on MAC0 and optionally on MAC1&quot;

config VITESSE_8601_7395_PHY
    bool &quot;Vitesse Gige Phy 8601 on MAC0 / VSC73XX Switch on MAC1&quot;

config  ICPLUS_PHY
    bool &quot;IP Icplus Phy&quot;

config REALTEK_PHY
    bool &quot;Rtl8201&quot;

config ADM6996FC_PHY
    bool &quot;AdmTek 6996FC&quot;

endchoice</code></pre></div><p>and <a href="http://wifi.ozo.com/airo/mirror/ar7100/belkin/">here</a> the relative header files.</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 7 Jul 2008, 16:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70605">
				<div class="post-metadata">
					<div class="post-num">Post #164</div>
					<div class="post-author">flam</div>
					<div class="post-datetime">
						7 Jul 2008, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve found another mystical problem on RB433. First I was not able to restart the board by writing AR7100&#039;s FULL_RESET bit. I started to play with other RESET bits and successfully rebooted it with NMI_RESET. After rebooting kernel can&#039;t see nand flash device and unable to mount partitions. After powering off and on RB433 the nand flash was usable again. It seems there is something difference between the nand driver Mikrotik published in their patch and which they use in RouterOS 3.10 because when I boot RouterOS after NMI_RESET it starts successfully and can mount flash devices. I think this is in connection with SPI.<br />Has anybody encountered this problem ?</p>											<p class="post-edited">(Last edited by <strong>flam</strong> on 7 Jul 2008, 18:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70613">
				<div class="post-metadata">
					<div class="post-num">Post #165</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						7 Jul 2008, 19:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jal2 wrote:</cite><blockquote><p>Have you tried to enable the IP175C register by writing 0x175c to phy 29, register 31? Like the r6040.c driver does for the RDC3211 (e.g. on [s]Sitecom WL-153[/s] Airlink101 AR525W):<br /></p><div class="codebox"><pre><code>    if (lp-&gt;switch_sig  == ICPLUS_PHY_ID) {
        phy_write(ioaddr, 29, 31, 0x175C); /* Enable registers */</code></pre></div><p>Maybe this fixes the values read from the registers.</p></blockquote></div><p>Unfortunately this did not do the trick.&nbsp; Thanks for the suggestion.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70614">
				<div class="post-metadata">
					<div class="post-num">Post #166</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						7 Jul 2008, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve made my RB450 specific snapshot available here: <a href="ftp://ftp.ipeaknetworks.com/ar7100/ar7100-number6.tar.bz2">ftp://ftp.ipeaknetworks.com/ar7100/ar71 … r6.tar.bz2</a></p><p>I am still stuck on not being able to read the icPlus registers correctly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70615">
				<div class="post-metadata">
					<div class="post-num">Post #167</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						7 Jul 2008, 19:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>Belkin recently&nbsp; also <a href="http://www.belkin.com/uk/support/article/?lid=enu&amp;pid=F5D8232uk4&amp;aid=10243&amp;scid=0">released</a> some GPL code for this platform.</p><p>Looking at the Kconfig file under the drivers/net directory:</p><p>and <a href="http://wifi.ozo.com/airo/mirror/ar7100/belkin/">here</a> the relative header files.</p></blockquote></div><p>Unfortunately the actual ipPhy driver is missing and none of the config files have the ipPhy Kconfig option defined.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70646">
				<div class="post-metadata">
					<div class="post-num">Post #168</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						8 Jul 2008, 17:00					</div>
				</div>
				<div class="post-content content">
					<p>Partial success!&nbsp; I can now read/write the ipPhy registers on the RB450.&nbsp; There were two problems with my previous snapshot. <br />1. Two of the ipPhy.h defines were incorrect.<br />2. The IC175C seems to revert to IC175A mode somewhere between initialization and opening of the interface between the 7130 and the 175C.</p><p>The updated snapshot can be found here along with the older tarball:<br /><a href="ftp://ftp.ipeaknetworks.com/ar7100/">ftp://ftp.ipeaknetworks.com/ar7100/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70657">
				<div class="post-metadata">
					<div class="post-num">Post #169</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						8 Jul 2008, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>Success!&nbsp; I can pass packets through the WAN interface (labeled Eth1/PoE) of the RB450.&nbsp; I have updated my snapshot.&nbsp; Note that the port is accessible as eth1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70659">
				<div class="post-metadata">
					<div class="post-num">Post #170</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						8 Jul 2008, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Full success.&nbsp; Eth1/PoE appears as eth1 and Eth2 through Eth5 are accessible through eth0.&nbsp; Snapshot updated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70662">
				<div class="post-metadata">
					<div class="post-num">Post #171</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						8 Jul 2008, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>Last update for today.&nbsp; I have removed most of the debug messages and have fixed a quirk where both eth0 and eth1 had the same MAC address.&nbsp; Snapshot is still at:<br /><a href="ftp://ftp.ipeaknetworks.com/ar7100/">ftp://ftp.ipeaknetworks.com/ar7100/</a></p><p>Up to now I&#039;ve been running off a network boot image.&nbsp; I would appreciate any pointers on what I need to do to have this successfully written to the flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70664">
				<div class="post-metadata">
					<div class="post-num">Post #172</div>
					<div class="post-author">krzychuu</div>
					<div class="post-datetime">
						8 Jul 2008, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>hi, <br />I build kamikaze with patches from acoul. I put kernel onto mtdblock0 on my rb 411 and rootfs onto mtdblock1. After this I don&#039;t have any communication with device. It doesn&#039;t response on the serial. It seems that bootloader has been written. What&#039;s going on?</p><br /><p>Regards</p>											<p class="post-edited">(Last edited by <strong>krzychuu</strong> on 9 Jul 2008, 00:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70694">
				<div class="post-metadata">
					<div class="post-num">Post #173</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						9 Jul 2008, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been attempting to flash my OpenWRT image onto the RB450 but have run into an issue.&nbsp; The bootloader finds the kernel and I&#039;ve patched the kernel to recognize the correct MTD partition as the root fs.&nbsp; However, when the kernel calls /sbin/init, the box hangs.&nbsp; I&#039;ve added some swears to linux/init.main.c to aid in debugging.&nbsp; &nbsp;Here&#039;s a copy of the last few console messages at boot.&nbsp; Any suggestions?</p><div class="codebox"><pre><code>NAND device: Manufacturer ID: 0xad, Chip ID: 0x76 (Hynix NAND 64MiB 3,3V 8-bit) 
Scanning device for bad blocks                                                  
Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:                           
0x00040000-0x00400000 : &quot;RouterBoard NAND Boot&quot;                                 
0x00400000-0x04000000 : &quot;RouterBoard NAND Main&quot;                                 
mtd: partition &quot;rootfs&quot; set to be root filesystem                               
0x00000000-0x00040000 : &quot;RouterBoard NAND Booter&quot;                               
TCP vegas registered                                                            
NET: Registered protocol family 1                                               
NET: Registered protocol family 17                                              
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;                            
drivers/rtc/hctosys.c: unable to open rtc device (rtc0)                         
yaffs: dev is 32505857 name is &quot;mtdblock1&quot;                                      
yaffs: passed flags &quot;&quot;                                                          
yaffs: Attempting MTD mount on 31.1, &quot;mtdblock1&quot;                                
VFS: Mounted root (yaffs filesystem) readonly.                                  
Freeing unused kernel memory: 120k freed                                        
Please be patient, while OpenWrt loads ...                                      
About to call sys_dup(0)                                                        
About to check ramdisk_execute_command                                          
About to check execute_command                                                  
Trying to run /sbin/init</code></pre></div>											<p class="post-edited">(Last edited by <strong>number6</strong> on 9 Jul 2008, 18:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70696">
				<div class="post-metadata">
					<div class="post-num">Post #174</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						9 Jul 2008, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>number6, with the netboot image are you able to mount and read the root filesystem under the mtdblock1?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70697">
				<div class="post-metadata">
					<div class="post-num">Post #175</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						9 Jul 2008, 18:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><p>number6, with the netboot image are you able to mount and read the root filesystem under the mtdblock1?</p></blockquote></div><p>Yes.&nbsp; I have no trouble mounting mtdblock0 (kernel) and mtdblock1 (root) from the netboot image.&nbsp; The structure of the root looks right and I can execute files within the mounted root partition, include /bin/busybox which /sbin/init softlinks to.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 176 to 175 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 7 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>