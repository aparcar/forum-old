<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to plan for a future reflash</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p126742">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nameanyone</div>
					<div class="post-datetime">
						28 Jan 2011, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi I&#039;m new to everything and a bit overwhelmed. So I installed 10.03.1-rc4 on Buffalo WZR-HP-G300NH and everything is working, wireless is there out of the box.</p><p>I&#039;m going to start installing packages and configuring everything to my liking. Then when rc5 or final comes along, what do I do if I want to upgrade? Repeat everything from scratch? What&#039;s the best practice to preserve as much as possible and restore it after a reflash? There is a multitude of guides explaining how to boot from USB, but I don&#039;t feel that is necessary with WZR-HP-G300NH, and I&#039;m not sure it will actually make upgrades easier.</p><p>It would be sufficient if I just had a procedure to backup the list of packages I installed and backup all the settings for all the packages, and quickly restore everything after a reflash.<br />But if there is a setup that will allow me to unplug my USB stick, reflash the firmware, and after some necessary initial tweaking plug the stick back and have my system back the way it was, that would be great.</p><p>Also, should I be concerned about wearing out the internal flash, and if yes, what can I do to keep the writes to it a minimum and use the USB stick instead. I plan to use the router for web caching and filtering.</p><p>Thank you.</p><p>EDIT<br />After browsing the forum a bit, I&#039;d like to add (before Dogge shows up and tells me that using ImageBuilder is good for me): I&#039;m a strong proponent of the KISS principle; it always pays off in the long run. I came up with this backup solution that I can use to capture the state of things immediately upon the first boot, and later do it again and diff and hopefully glean some insight (I included /rom just so I could study it on my desktop pc):<br /></p><div class="codebox"><pre><code>ssh root@192.168.1.1 &#039;tar zcvf - /rom /overlay&#039; | tar zxvf - -C ~/backup/OpenWrt-10.03.1-rc4</code></pre></div><p>Now the restore part, would it be as easy as copying the whole /overlay back? How can I compare package versions between the newly flashed /rom and backed up /overlay, so I could skip the older packages when I copy everything back?</p>											<p class="post-edited">(Last edited by <strong>nameanyone</strong> on 29 Jan 2011, 03:11)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>