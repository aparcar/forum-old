<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-MR3020 problem with launching large file from mmc over gpio</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p225605">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">atmel8051</div>
					<div class="post-datetime">
						17 Feb 2014, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i have TP-Link TL-MR3020 with SD card connected over GPIO. SD is mounted to /overlay and there is installed MPD (music player daemon). </p><p>When i try execute mpd after boot, then i get error. If I try it e.g. six times, it starts to work. And then no more errors.<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# mpd /etc/mpd.conf
Illegal instruction
root@OpenWrt:~# mpd /etc/mpd.conf
Segmentation fault
root@OpenWrt:~# mpd /etc/mpd.conf
^C
root@OpenWrt:~# mpd /etc/mpd.conf
Segmentation fault
root@OpenWrt:~# mpd /etc/mpd.conf
Segmentation fault
root@OpenWrt:~# mpd /etc/mpd.conf
Illegal instruction
root@OpenWrt:~# mpd /etc/mpd.conf</code></pre></div><p>Part of dmesg:</p><div class="codebox"><pre><code>[   15.550000] gpio-mmc: Failed to request mmc_spi module.
[   15.550000] spi-gpio spi-gpio.0: master is unqueued, this is deprecated
[   15.560000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power
[   15.580000] mmc_spi spi32766.0: setup: unsupported mode bits 4
[   15.580000] mmc_spi spi32766.0: can&#039;t change chip-select polarity
[   15.610000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff
[   15.610000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=29, do=18, clk=20, cs=7
[   16.060000] mmc0: host does not support reading read-only switch. assuming write-enable.
[   16.070000] mmc0: new SD card on SPI
[   16.080000] mmcblk0: mmc0:0000 SD2GB 1.85 GiB
[   16.110000]  mmcblk0: p1 p2 p3
[   24.510000] device eth0 entered promiscuous mode
[   25.200000] eth0: link up (100Mbps/Full duplex)
[   25.200000] br-lan: port 1(eth0) entered forwarding state
[   25.210000] br-lan: port 1(eth0) entered forwarding state
[   27.210000] br-lan: port 1(eth0) entered forwarding state
[   27.460000] EXT4-fs (mmcblk0p1): recovery complete
[   27.510000] EXT4-fs (mmcblk0p1): mounted filesystem with ordered data mode. Opts:
[   28.310000] Adding 102396k swap on /dev/mmcblk0p2.  Priority:-1 extents:1 across:102396k SS
[   30.180000] EXT4-fs (mmcblk0p3): recovery complete
[   30.200000] EXT4-fs (mmcblk0p3): mounted filesystem with ordered data mode. Opts:</code></pre></div>											<p class="post-edited">(Last edited by <strong>atmel8051</strong> on 18 Feb 2014, 09:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240834">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">seba.wetzel</div>
					<div class="post-datetime">
						20 Jul 2014, 07:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i don&#039;t know how to help you, but maybe you can help me, how did you do to use a /overlay in a sd mounted over gpio&#039;s? Could you send me an email to seba.wetzel@gmail.com with an example? Thank you a lot!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>