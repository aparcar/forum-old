<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> power fault factory reset protection</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p357853">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">seanprice2016</div>
					<div class="post-datetime">
						5 May 2017, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>Every single router I&#039;ve owned in my lifetime has factory reset on a distinct power outage.</p><p>In United States power hardly ever goes out, no complaints.&nbsp; In Dominican Republic, where I have a 2nd home power goes out, voltage spikes, low voltage, transformers blow every other month, etc.&nbsp; I have UPC&#039;s and aux power source but if the batteries discharge in a prolonged outage its very probable my router&#039;s wifi passwords and all settings will have been erased.</p><p>What can be done in terms of router firmware to prevent this factory reset?&nbsp; &nbsp;A possible solution IMO would be to actually overwrite the embedded factory settings.&nbsp; &nbsp;</p><p>Has anyone tried this, will this work? How can this be accomplished?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357858">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						5 May 2017, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Some UPS&#039;s have USB ports to &quot;warn&quot; computers before shutting down.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357894">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">seanprice2016</div>
					<div class="post-datetime">
						6 May 2017, 05:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>Some UPS&#039;s have USB ports to &quot;warn&quot; computers before shutting down.</p></blockquote></div><p>ok so your suggesting using a micro controller to cut power completely until power restoration?&nbsp; (to prevent line conditions where electricity can erase memory) GREAT, I guess I&#039;ll google a little bit more for my solution.&nbsp; Though its an alternative, your relay idea can work in absence of base firmware reprogramming.</p>											<p class="post-edited">(Last edited by <strong>seanprice2016</strong> on 6 May 2017, 05:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p357899">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						6 May 2017, 07:19					</div>
				</div>
				<div class="post-content content">
					<p>That really hasn&#039;t been a problem with OpenWrt.&nbsp; They store settings in a different way than most firmwares.&nbsp; It is common to turn routers off by just pulling the plug rather than ordering a shutdown of the OS.&nbsp; I would agree it&#039;s better to turn the power off abruptly than to let it run down slowly.&nbsp; A simple circuit with a voltage detector and FET could be built to do that.&nbsp; I would not use a relay since the relay coil would take power from the battery all the time.</p><p>You can use Image Builder to put your config files in as default.&nbsp; Configure the router how you want then use the feature to make a tar file configuration backup.&nbsp; Then untar that file into the Image Builder files directory and build a new image.&nbsp; Be sure you know how to unbrick your router with TFTP or serial, as if there is a problem with the image preventing you from logging into the router, there is no way to fix it other than a complete reflash.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>