<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb 3g dongle sometimes have no ttyUSBx, what shall i do?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p256552">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">atioioio</div>
					<div class="post-datetime">
						4 Dec 2014, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>router: tplink 703n,&nbsp; and gl-inet<br />openwrt: BARRIER BREAKER (14.07, r42625)</p><p>703n/gl-inet,&nbsp; &nbsp;with a huawei-e353 usb 3g dongle.</p><p>sometimes when router boot up,&nbsp; ls /dev/tty* shows no ttyUSBx,&nbsp; so no 3g-wan to internet.<br />but if i unplug and plug in again, ttyUSBx is there,<br />how can i make it always there ?</p><p>root@OpenWrt:~# ls /dev/tty*<br />/dev/tty&nbsp; &nbsp; &nbsp; /dev/ttyS0&nbsp; &nbsp; /dev/ttyS10&nbsp; &nbsp;/dev/ttyS12&nbsp; &nbsp;/dev/ttyS14&nbsp; &nbsp;/dev/ttyS2&nbsp; &nbsp; /dev/ttyS4&nbsp; &nbsp; /dev/ttyS6&nbsp; &nbsp; /dev/ttyS8<br />/dev/ttyATH0&nbsp; /dev/ttyS1&nbsp; &nbsp; /dev/ttyS11&nbsp; &nbsp;/dev/ttyS13&nbsp; &nbsp;/dev/ttyS15&nbsp; &nbsp;/dev/ttyS3&nbsp; &nbsp; /dev/ttyS5&nbsp; &nbsp; /dev/ttyS7&nbsp; &nbsp; /dev/ttyS9<br />root@OpenWrt:~# <br />root@OpenWrt:~# dmesg<br />[&nbsp; &nbsp; 0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r42625) ) #3 Wed Oct 1 14:00:51 CEST 2014<br />[&nbsp; &nbsp; 0.000000] MyLoader: sysp=71582a59, boardp=731349c1, parts=4e50740f<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;[mem 0x00000000-0x03ffffff]<br />[&nbsp; &nbsp; 0.000000] Movable zone start for each node<br />[&nbsp; &nbsp; 0.000000] Early memory node ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;node&nbsp; &nbsp;0: [mem 0x00000000-0x03ffffff]<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 16384<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 80334b60, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 128 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 16384 pages, LIFO batch:3<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0 <br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=GL-INET console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61076k/65536k available (2369k kernel code, 4460k reserved, 621k data, 272k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.080000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is GL-CONNECT INET v1<br />[&nbsp; &nbsp; 0.550000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.560000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.570000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.570000] TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.570000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.570000] TCP: Hash tables configured (established 512 bind 512)<br />[&nbsp; &nbsp; 0.580000] TCP: reno registered<br />[&nbsp; &nbsp; 0.580000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.590000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.600000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.600000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.620000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.630000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.640000] msgmni has been set to 119<br />[&nbsp; &nbsp; 0.640000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.640000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.650000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.660000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART<br />[&nbsp; &nbsp; 0.670000] console [ttyATH0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.680000] ath79-spi ath79-spi: master is unqueued, this is deprecated<br />[&nbsp; &nbsp; 0.690000] m25p80 spi0.0: found en25q64, expected m25p80<br />[&nbsp; &nbsp; 0.690000] m25p80 spi0.0: en25q64 (8192 Kbytes)<br />[&nbsp; &nbsp; 0.700000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.700000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.710000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.720000] 0x000000020000-0x00000012e620 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.720000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.730000] 0x00000012e620-0x0000007f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.740000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.750000] mtd: device 2 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.760000] 1 squashfs-split partitions found on MTD device rootfs<br />[&nbsp; &nbsp; 0.760000] 0x000000350000-0x0000007f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.770000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.770000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.800000] libphy: ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.350000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 1.360000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII<br />[&nbsp; &nbsp; 1.910000] ag71xx-mdio.1: Found an AR7240/AR9330 built-in switch<br />[&nbsp; &nbsp; 2.950000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII<br />[&nbsp; &nbsp; 2.950000] TCP: cubic registered<br />[&nbsp; &nbsp; 2.960000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.960000] Bridge firewalling registered<br />[&nbsp; &nbsp; 2.960000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 2.980000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.990000] Freeing unused kernel memory: 272K (8034c000 - 80390000)<br />[&nbsp; &nbsp; 5.750000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 5.750000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 5.760000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 5.770000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 5.780000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 5.780000] ehci-platform ehci-platform: EHCI Host Controller<br />[&nbsp; &nbsp; 5.790000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 5.800000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp; 5.820000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 5.820000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 5.820000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 6.150000] usb 1-1: new high-speed USB device number 2 using ehci-platform<br />[&nbsp; &nbsp; 8.290000] eth1: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;10.590000] jffs2: notice: (317) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 16 of xref (0 dead, 2 orphan) found.<br />[&nbsp; &nbsp;10.640000] eth1: link down<br />[&nbsp; &nbsp;14.330000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;14.350000] nf_conntrack version 0.5.0 (958 buckets, 3832 max)<br />[&nbsp; &nbsp;14.370000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;14.410000] Loading modules backported from Linux version master-2014-05-22-0-gf2032ea<br />[&nbsp; &nbsp;14.410000] Backport generated by backports.git backports-20140320-37-g5c33da0<br />[&nbsp; &nbsp;14.430000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;14.490000] usbcore: registered new interface driver usbserial<br />[&nbsp; &nbsp;14.490000] usbcore: registered new interface driver usbserial_generic<br />[&nbsp; &nbsp;14.510000] usbserial: USB Serial support registered for generic<br />[&nbsp; &nbsp;14.550000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;14.580000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;14.580000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;14.590000] cfg80211:&nbsp; DFS Master region: unset<br />[&nbsp; &nbsp;14.590000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;14.600000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;14.610000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;14.620000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;14.620000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;14.630000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;14.640000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;14.650000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;14.660000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)<br />[&nbsp; &nbsp;14.740000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;14.750000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;14.790000] usbcore: registered new interface driver option<br />[&nbsp; &nbsp;14.790000] usbserial: USB Serial support registered for GSM modem (1-port)<br />[&nbsp; &nbsp;14.830000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;14.830000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;14.830000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;14.830000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;14.830000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;14.830000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;14.840000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;14.850000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;14.860000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;14.860000] cfg80211:&nbsp; DFS Master region: FCC<br />[&nbsp; &nbsp;14.860000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;14.870000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;14.880000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 1700 mBm), (N/A)<br />[&nbsp; &nbsp;14.890000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2300 mBm), (0 s)<br />[&nbsp; &nbsp;14.900000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;14.910000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)<br />[&nbsp; &nbsp;14.910000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2<br />[&nbsp; &nbsp;25.010000] IPv6: ADDRCONF(NETDEV_UP): eth1: link is not ready<br />[&nbsp; &nbsp;25.010000] device eth1 entered promiscuous mode<br />[&nbsp; &nbsp;25.020000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready<br />[&nbsp; &nbsp;25.060000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready<br />[&nbsp; &nbsp;26.110000] eth1: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;26.110000] br-lan: port 1(eth1) entered forwarding state<br />[&nbsp; &nbsp;26.110000] br-lan: port 1(eth1) entered forwarding state<br />[&nbsp; &nbsp;26.120000] IPv6: ADDRCONF(NETDEV_CHANGE): eth1: link becomes ready<br />[&nbsp; &nbsp;26.130000] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready<br />[&nbsp; &nbsp;28.110000] br-lan: port 1(eth1) entered forwarding state<br />root@OpenWrt:~#</p>											<p class="post-edited">(Last edited by <strong>atioioio</strong> on 16 Dec 2014, 06:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257848">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">atioioio</div>
					<div class="post-datetime">
						16 Dec 2014, 06:53					</div>
				</div>
				<div class="post-content content">
					<p>not solved.&nbsp; &nbsp;any advise ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>