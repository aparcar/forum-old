<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile (backport) patched driver from trunk - Help needed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p195125">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">y_not</div>
					<div class="post-datetime">
						17 Mar 2013, 02:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone!</p><p>I&#039;d like to use the b43 Broadcom open source driver patch as shown in the following link.<br /><a href="https://dev.openwrt.org/browser/trunk/package/mac80211/patches/840-43-increase_number_of_rx_dma_slots.patch?rev=35671">b43 Driver - Increase Number of RX DMA Slots</a></p><p>Is there a way to compile just this 1 driver as a kernel module /w all it&#039;s patches incl. this one, then replace the original in an existing BackFire installation, overwriting the included one?</p><p>I know this can be done in regular Linux distros, but I&#039;m unsure /w OpenWRT as to the procedure.<br />Usually you just run the included makefile and all is well. But I can&#039;t seem to find in Trunk where the source is for the driver in question. I do see &quot;/trunk/package/broadcom-wl/&quot;, as well as the same end dir. in the BF branch. But it seems to be a bunch of patches and updates, not the main C source files for the driver. I&#039;m thinking from what I have read in the Wiki that possibly the makefile pulls in all the base source code when you run it, yeah? <br />Sorry, not a programmer. IT guy, yes. Programmer? No. </p><p>Since I&#039;m just wanting to backport 1 driver, is there a more basic route to follow? <br />I presume I would follow this document?<br /><a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence#downloading.sources">OpenWRT Wiki How To - Buildroot</a></p><p>What adl. steps would I need if any?<br />IE. What parts can I skip since I&#039;m only compiling a driver and not the Kernel/OS.</p><p>I did find this too.<br /><a href="https://forum.openwrt.org/viewtopic.php?id=8410">How to setup a build environment in VM Ware</a></p><p>I&#039;m not entirely clueless, just crawling on the floor looking for missing parts I can&#039;t find. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Any help would be wonderfully appreciated. I&#039;ll do my best to be as self sufficient as possible, I&#039;m by no means an OpenWRT newb, nor a PC *nix/WinX or PC HW newb. <br />Thanks!!</p>											<p class="post-edited">(Last edited by <strong>y_not</strong> on 17 Mar 2013, 03:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195232">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">y_not</div>
					<div class="post-datetime">
						18 Mar 2013, 07:42					</div>
				</div>
				<div class="post-content content">
					<p>Do I need to post this in the developers section, since it&#039;s related to compiling from source?</p><p>It appears this forum doesn&#039;t have a whole lot of traffic, so if I don&#039;t hear anything back in a few days I&#039;ll go ahead and post it there. Please just delete this one if duplicate posts are an issue. </p><p>Thank you for looking at my post.</p><br /><p>OH, even if you don&#039;t know the answers to all of what I posted questions on. That&#039;s fine, anything you can throw my way would be great. More often than not, just a spark of information is enough to fire off a full fledged idea &amp; solution. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195237">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						18 Mar 2013, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>This &quot;patch&quot;&nbsp; is just a constant change.&nbsp; </p><p>My approach would be to check out the final backfire code and set up an environment.</p><p>Do a make menuconfig to select just the target you&#039;re interested in and the module in question</p><p>go manually edit the file in question to change the 64 to 256 </p><p>compile.</p><p>Hmm... but apparently there&#039;s some parts that are some shortcuts:<br /><a href="http://wiki.openwrt.org/doc/howtobuild/single.package">http://wiki.openwrt.org/doc/howtobuild/single.package</a></p><p>(although you&#039;ll still have to install/compile &quot;the toolchain&quot;&nbsp; since you&#039;ve got to set up for crosscompiling for some other platform not your&nbsp; Linux system)</p><p>i BELIEVE that the &quot;OpenWRT-SDK-&quot;&nbsp; downloads and/or the &quot;toolchain&quot; downloads as found in each platform, e.g.<br />&quot;<a href="http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/">http://downloads.openwrt.org/backfire/10.03.1/brcm47xx/</a>&quot;<br />Can make your life easier further by not requiring you to compile the toolchain... but i don&#039;t know how they&#039;d be used.&nbsp; &nbsp;You may want to search/ read up on that.</p>											<p class="post-edited">(Last edited by <strong>vhrm</strong> on 18 Mar 2013, 10:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195351">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">y_not</div>
					<div class="post-datetime">
						19 Mar 2013, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>Awesome!! Thanks for the info. I about have my VM setup and I&#039;ll be trying out your suggestions. <br />I have a running LUBUNTU workstation, but I really don&#039;t want to pollute it with extra packages, etc.. I&#039;ll post back if I hit any snags I can&#039;t beat my way through. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Thanks again, I appreciate it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195354">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						19 Mar 2013, 01:22					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s the thing this buildroot (at least trunk)&nbsp; installs all its own compilers, linkers, autoconf,&nbsp; libraries, linux source, etc under the buildroot.&nbsp; So it doesn&#039;t mess with your system at all.</p><p>On a very sparse debian box on which i hadn&#039;t compiled anything&nbsp; (a linode actually)&nbsp; i only had to install one or two packages iirc. some gzip lib and some getopt or something.&nbsp; &nbsp;It was surprisingly painless from that POV.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>