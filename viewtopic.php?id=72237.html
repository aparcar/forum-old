<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Luci Form URL Changed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p366271">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">johnpeng47</div>
					<div class="post-datetime">
						4 Oct 2017, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi I&#039;ve been trying to create a html page that will allow users to upload their custom ovpn config files to Openwrt. However, I have encountered a weird problem where my form&#039;s action attribute would point to the wrong url after browser rendering:</p><p><strong>Original source:</strong><br />&lt;fieldset class=&quot;cbi-section&quot;&gt;<br />&nbsp; &nbsp; &lt;form method=&quot;post&quot; action=&quot;&lt;%=<strong>url(&#039;admin/services/openvpn_test/upload_config&#039;)%&gt;</strong>&quot; enctype=&quot;multipart/form-data&quot;&gt;<br />&lt;!-- &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;%=token%&gt;&quot; /&gt;<br /> --&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-section-node&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-value cbi-value-last&lt;% if image_invalid then %&gt; cbi-value-error&lt;% end %&gt;&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class=&quot;cbi-value-title&quot; for=&quot;image&quot;&gt;&lt;%:Config Name%&gt;:&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-value-field&quot;&gt;<br />&nbsp; &nbsp; &lt;!-- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;text&quot; placeholder=&quot;Config Name&quot;/&gt;<br />&nbsp; &nbsp;&nbsp; --&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;file&quot; name=&quot;image&quot; id=&quot;image&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; class=&quot;cbi-button cbi-input-apply&quot; value=&quot;&lt;%:Upload File%&gt;&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;/form&gt;<br />&lt;/fieldset&gt;</p><p><strong>After rendering (or what I see in the browser)</strong>:</p><p>&lt;form method=&quot;post&quot; name=&quot;cbi&quot; action=<strong>&quot;/cgi-bin/luci/admin/services/openvpn_test&quot; </strong>enctype=&quot;multipart/form-data&quot; onreset=&quot;return cbi_validate_reset(this)&quot; onsubmit=&quot;return cbi_validate_form(this, &#039;Some fields are invalid, cannot save values!&#039;)&quot;&gt;<br />&nbsp; &nbsp; &lt;div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;script type=&quot;text/javascript&quot; src=&quot;/luci-static/resources/cbi.js?v=git-17.051.53299-a100738&quot; data-strings=&quot;{&amp;quot;path&amp;quot;:{&amp;quot;resource&amp;quot;:&amp;quot;\/luci-static\/resources&amp;quot;,&amp;quot;browser&amp;quot;:&amp;quot;\/cgi-bin\/luci\/admin\/filebrowser&amp;quot;},&amp;quot;label&amp;quot;:{&amp;quot;choose&amp;quot;:&amp;quot;-- Please choose --&amp;quot;,&amp;quot;custom&amp;quot;:&amp;quot;-- custom --&amp;quot;}}&quot;&gt;&lt;/script&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;209855933d91d6866e377f956780a704&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;hidden&quot; name=&quot;cbi.submit&quot; value=&quot;1&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; value=&quot;Save&quot; class=&quot;hidden&quot;&gt;<br />&nbsp; &nbsp; &lt;/div&gt;<br />&lt;div class=&quot;cbi-map&quot; id=&quot;cbi-openvpn&quot;&gt;<br />&nbsp; &nbsp; &lt;h2 name=&quot;content&quot;&gt;OpenVPN&lt;/h2&gt;<br />&nbsp; &nbsp; &lt;!-- tblsection --&gt;<br />&lt;fieldset class=&quot;cbi-section&quot; id=&quot;cbi-openvpn-&lt;&nbsp; &nbsp; %=self.sectiontype%&gt;&quot;&gt;<br />&nbsp; &nbsp; &lt;legend&gt;OpenVPN instances&lt;/legend&gt;&lt;div class=&quot;cbi-section-descr&quot;&gt;Below is a list of configured OpenVPN instances and their current state&lt;/div&gt;<br />&nbsp; &nbsp; &lt;div class=&quot;cbi-section-node&quot;&gt;&lt;table class=&quot;cbi-section-table&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tbody&gt;&lt;tr class=&quot;cbi-section-table-titles&quot;&gt;&lt;th&gt;&amp;nbsp;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;Enabled&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;Started&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;Start/Stop&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;Porqt&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;Protocol&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&amp;nbsp;&lt;/th&gt;&lt;/tr&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;tr class=&quot;cbi-section-table-descr&quot;&gt;&lt;th&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;th class=&quot;cbi-section-table-cell&quot;&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr class=&quot;cbi-section-table-row cbi-rowstyle-1&quot; id=&quot;cbi-openvpn-Vancouver&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;th&gt;&lt;h3&gt;Vancouver&lt;/h3&gt;&lt;/th&gt;&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-Vancouver-enabled&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>&nbsp; &nbsp; &lt;input type=&quot;hidden&quot; value=&quot;1&quot; name=&quot;cbi.cbe.openvpn.Vancouver.enabled&quot;&gt;<br />&nbsp; &nbsp; &lt;input class=&quot;cbi-input-checkbox&quot; data-update=&quot;click change&quot; type=&quot;checkbox&quot; id=&quot;cbid.openvpn.Vancouver.enabled&quot; name=&quot;cbid.openvpn.Vancouver.enabled&quot; value=&quot;1&quot;&gt;<br />&nbsp; &nbsp; &lt;label for=&quot;cbid.openvpn.Vancouver.enabled&quot;&gt;&lt;/label&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-Vancouver-_active&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>no<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.Vancouver._active&quot; value=&quot;no&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-Vancouver-start&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input class=&quot;cbi-button cbi-input-reload&quot; type=&quot;submit&quot; name=&quot;cbid.openvpn.Vancouver.start&quot; id=&quot;cbid.openvpn.Vancouver.start&quot; value=&quot;start&quot;&gt;<br />&nbsp; &nbsp; <br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-Vancouver-port&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>1194<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.Vancouver.port&quot; value=&quot;1194&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-Vancouver-proto&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>udp<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.Vancouver.proto&quot; value=&quot;udp&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-section-table-cell&quot;&gt;&lt;input class=&quot;cbi-button cbi-button-edit&quot; type=&quot;button&quot; value=&quot;Edit&quot; onclick=&quot;location.href=&#039;/cgi-bin/luci/admin/services/openvpn/basic/Vancouver&#039;&quot; alt=&quot;Edit&quot; title=&quot;Edit&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;cbi-section-table-row cbi-rowstyle-2&quot; id=&quot;cbi-openvpn-USA&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;th&gt;&lt;h3&gt;USA&lt;/h3&gt;&lt;/th&gt;&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-USA-enabled&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>&nbsp; &nbsp; &lt;input type=&quot;hidden&quot; value=&quot;1&quot; name=&quot;cbi.cbe.openvpn.USA.enabled&quot;&gt;<br />&nbsp; &nbsp; &lt;input class=&quot;cbi-input-checkbox&quot; data-update=&quot;click change&quot; type=&quot;checkbox&quot; id=&quot;cbid.openvpn.USA.enabled&quot; name=&quot;cbid.openvpn.USA.enabled&quot; value=&quot;1&quot;&gt;<br />&nbsp; &nbsp; &lt;label for=&quot;cbid.openvpn.USA.enabled&quot;&gt;&lt;/label&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-USA-_active&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>no<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.USA._active&quot; value=&quot;no&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-USA-start&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input class=&quot;cbi-button cbi-input-reload&quot; type=&quot;submit&quot; name=&quot;cbid.openvpn.USA.start&quot; id=&quot;cbid.openvpn.USA.start&quot; value=&quot;start&quot;&gt;<br />&nbsp; &nbsp; <br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-USA-port&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>1194<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.USA.port&quot; value=&quot;1194&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-value-field&quot;&gt;<br />&lt;div id=&quot;cbi-openvpn-USA-proto&quot; data-index=&quot;&quot; data-depends=&quot;[]&quot;&gt;</p><br /><p>udp<br />&lt;input type=&quot;hidden&quot; id=&quot;cbid.openvpn.USA.proto&quot; value=&quot;udp&quot;&gt;<br />&lt;/div&gt;<br />&lt;/td&gt;</p><br /><p>&lt;td class=&quot;cbi-section-table-cell&quot;&gt;&lt;input class=&quot;cbi-button cbi-button-edit&quot; type=&quot;button&quot; value=&quot;Edit&quot; onclick=&quot;location.href=&#039;/cgi-bin/luci/admin/services/openvpn/basic/USA&#039;&quot; alt=&quot;Edit&quot; title=&quot;Edit&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&lt;/fieldset&gt;<br />&lt;a href=&quot;/cgi-bin/luci/admin/services/openvpn_test/upload_config&quot;&gt;&lt;button&gt;ClickMe&lt;/button&gt;&lt;/a&gt;<br />&lt;h3&gt;Upload New Config&lt;/h3&gt;<br />&lt;fieldset class=&quot;cbi-section&quot;&gt;<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;209855933d91d6866e377f956780a704&quot;&gt;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-section-node&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-value cbi-value-last&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;label class=&quot;cbi-value-title&quot; for=&quot;image&quot;&gt;Config Name:&lt;/label&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;cbi-value-field&quot;&gt;<br />&nbsp; &nbsp; &lt;!-- &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;text&quot; placeholder=&quot;Config Name&quot;/&gt;<br />&nbsp; &nbsp;&nbsp; --&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;file&quot; name=&quot;image&quot; id=&quot;image&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;input type=&quot;submit&quot; class=&quot;cbi-button cbi-input-apply&quot; value=&quot;Upload File&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; <br />&lt;/fieldset&gt;</p><br /><p>&lt;!-- /tblsection --&gt;</p><p>&nbsp; &nbsp; </p><p>&nbsp; &nbsp; &lt;br&gt;<br />&lt;/div&gt;&lt;/form&gt;</p><br /><br /><p>Not sure why the bolded url gets changed would someone be able to explain?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p366272">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						4 Oct 2017, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>The <em>&lt;%=...%&gt;</em> notation means that there is a variable there, and it should be changed by it&#039;s value. If you want to maintain the literal, just use <em>&lt;form method=&quot;post&quot; action=&quot;admin/services/openvpn_test/upload_config&gt;&quot; enctype=&quot;multipart/form-data&quot;&gt;</em>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p366276">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">johnpeng47</div>
					<div class="post-datetime">
						4 Oct 2017, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>I have tried doing that as well but the end result is still the same. So when I set the action as a string literal:</p><p><strong>Source:</strong><br />&lt;form method=&quot;post&quot; name=&quot;cbi&quot; action=&quot;/cgi-bin/luci/admin/services/openvpn_test/upload_config&quot; ..</p><p><strong>After rendering:</strong><br />&lt;form method=&quot;post&quot; name=&quot;cbi&quot; action=&quot;/cgi-bin/luci/admin/services/openvpn_test&quot;</p><p>Luci automatically changes my url for some reason...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>