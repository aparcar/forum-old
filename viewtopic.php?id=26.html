<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Source code repository for packages ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p88">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						26 Mar 2004, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>I want to propose that we have a common CVS area for package source code.</p><p>Unless there is a more suitable place (perhaps associated with openwrt.ksilebo.net), then the existing (but unused) SourceForge CVS repository would be a good place for this.&nbsp; We could fairly openly give write access to OpenWRT developers (as opposed to users who would just have read-only access if they wanted to get package source code) by making them members of the OpenWRT SourceForge project.&nbsp; We could use the bug tracking mechanism there to track package bugs.&nbsp; We would still use the forums here for discussion about packages and package development.</p><p>The benefits of a common CVS area for package source code are:</p><p>1/ We comply with our GPL responsibilities for GPL&#039;d packages without any extra effort.&nbsp; No-one can make the sort of accusations which have previously been levelled at Sveafost, Wifi-Box and even OpenWRT (all of which have now released source code, but the repercussions of the accusations still cause bitterness in the WRT54G third-party firmware community).</p><p>2/ We always know where the latest bleeding-edge version of every package lives, and we can help fix bugs in each other&#039;s packages.</p><p>3/ We can use CVS tags to define the latest &quot;stable&quot; set of packages, and perhaps even use that to automatically generate the public packages area on openwrt.ksilebo.net.</p><p>4/ We get to see each others code and hopefully converge on a common packaging environment (as opposed to the existing common openwrt buildroot environment which is currently used for building the initial firmware, not packages).&nbsp; It would be good if the buildroot environment and the packaging environment were one and the same tree.</p><p>5/ The main OpenWRT developers have access to a test suite of package source code which they can use (if desired) to check that changes to the basic OpenWRT code and modules don&#039;t have an adverse effect on packages.</p><p>What do you other developers think ?</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Warren</div>
					<div class="post-datetime">
						26 Mar 2004, 06:13					</div>
				</div>
				<div class="post-content content">
					<p>Totally in agreement, but before this happens a few things must be agreed upon.</p><p>* common structure for ipkg source should be agreed upon<br />* <strong>One CVS module per ipkg?</strong><br />* common template to copy for each base ipkg definition &amp; build script<br />* mjn3 talked about the possibility of creating a standard within the buildroot for package building.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						26 Mar 2004, 06:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Totally in agreement, but before this happens a few things must be agreed upon.</p><p>* common structure for ipkg source should be agreed upon<br />* <strong>One CVS module per ipkg?</strong><br />* common template to copy for each base ipkg definition &amp; build script<br />* mjn3 talked about the possibility of creating a standard within the buildroot for package building.</p></blockquote></div><p>Agreed.&nbsp; Is anyone working on these common structures and standards for package building (as opposed to for basic firmware building) ?</p><p>I would expect one CVS module per ipkg.&nbsp; Then you could control write access with CVS admin files if necessary - but I would expect that we could trust the developers not to mess with each other&#039;s files.&nbsp; People could also then just check out the packages they wanted, and it also makes sure that package names don&#039;t collide.</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Warren</div>
					<div class="post-datetime">
						26 Mar 2004, 06:39					</div>
				</div>
				<div class="post-content content">
					<p>Part of the standardized structure for packages in CVS is not only package name, but also version.&nbsp; How should version be tracked?&nbsp; I am assuming ipkg handles upgrading to new versions of already installed packages right?</p><p>One idea is for the ipkg versions to be an extension of the CVS version tags.&nbsp; That way a simple tool or macro used during ipkg building always results in a unique package version.&nbsp; Fedora uses this kind of automated versioning for kernel packages for example.&nbsp; CVS branches are expressed as another &quot;.&quot; and a new incrementing number appended to the end.</p><p><strong>Example</strong><br />cipe-1.5.4-18<br />This could be the 18th revision of cipe within CVS.<br />cipe-1.5.4-18.PKCIPE.1<br />This could&nbsp; be an experimental OpenWRT branch, say with PKCIPE enabled.</p><p>The actual naming scheme would be similar to this but I am not sure how at this moment since I still know nothing about ipkg, but you should get the basic idea.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						26 Mar 2004, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>Unless it&#039;s a custom package I see no reason to to store the entire sources in cvs; if it&#039;s a standard GPL&#039;d program just write a script to compile and possibly commit that to cvs. A cvs module per script would be overkill.</p><p>Seeing as we already have the&nbsp; buildroot structure in place we can probably just extend that to build ipkgs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						26 Mar 2004, 14:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Unless it&#039;s a custom package I see no reason to to store the entire sources in cvs; if it&#039;s a standard GPL&#039;d program just write a script to compile and possibly commit that to cvs. A cvs module per script would be overkill.</p><p>Seeing as we already have the&nbsp; buildroot structure in place we can probably just extend that to build ipkgs.</p></blockquote></div><p>Yeah - I see your point and agree.&nbsp; I need to get my head into &quot;buildroot&quot; mode when I think about these things ...</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Warren</div>
					<div class="post-datetime">
						29 Mar 2004, 16:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Unless it&#039;s a custom package I see no reason to to store the entire sources in cvs; if it&#039;s a standard GPL&#039;d program just write a script to compile and possibly commit that to cvs. A cvs module per script would be overkill.</p><p>Seeing as we already have the&nbsp; buildroot structure in place we can probably just extend that to build ipkgs.</p></blockquote></div><p>okay, but the download &amp; build makefile template for ipkg&#039;s should check at least the md5sum of the tarball that it downloads.&nbsp; Then make sure the CVS has a set of &quot;known good&quot; tarballs.&nbsp; Let me know when you get to this point and I have a bunch of in production scripts used by other projects to use as a sample.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						30 Mar 2004, 01:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Let me know when you get to this point and I have a bunch of in production scripts used by other projects to use as a sample.</p></blockquote></div><p>Are these scripts which link against uClibc ?</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rwhitby</div>
					<div class="post-datetime">
						12 Apr 2004, 13:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Unless it&#039;s a custom package I see no reason to to store the entire sources in cvs; if it&#039;s a standard GPL&#039;d program just write a script to compile and possibly commit that to cvs. A cvs module per script would be overkill.</p><p>Seeing as we already have the&nbsp; buildroot structure in place we can probably just extend that to build ipkgs.</p></blockquote></div><p>Do you have the scripts (or source code patches) available for the packages that are currently available ?</p><p>I&#039;d like to contribute a HeartBeat (bpalogin) package, but I don&#039;t want to be accused of violating the GPL, so I want to upload a script or patch to the same place as the package (or whever all the other source code for the existing GPL packages is stored - BTW where is that?).</p><p>-- Rod</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3469">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						20 Dec 2004, 01:58					</div>
				</div>
				<div class="post-content content">
					<p>An interesting topic I thought I&#039;d revisit.&nbsp; Did anything come of this discussion?&nbsp; Looking through the package repositories reveals that many OpenWRT packages don&#039;t have source-code patches available.&nbsp; </p><p>The legal ramifications of this don&#039;t worry me as much as just the plain inconvenience of having to start from scratch to repackage an app if the original packager abandons it.&nbsp; What&#039;s the solution to this?</p><p>PS. If there was no modification was necessary to cross-compile the ipk, either to the source-code or the makefile, then it would be nice if the package info said that somewhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p3510">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">florian_</div>
					<div class="post-datetime">
						22 Dec 2004, 10:28					</div>
				</div>
				<div class="post-content content">
					<p>Most of the developpers do give access to the source they used and also the makefile they produced.</p><p>I think that we should agree on one thing : do we keep the .mk file or use ipkg rulesets to make ipks ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>