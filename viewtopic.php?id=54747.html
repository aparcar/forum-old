<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how can i access webserver through Wan?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p258715">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 04:52					</div>
				</div>
				<div class="post-content content">
					<p>now i can access webserver through wifi(it was belong to lan), but can&#039;t access through wan,<br />the parameters of uhttpd is -p 0.0.0.0:80,&nbsp; <br />from the help message, uhttpd will&nbsp; listen Wan.<br />Even i change it to 192.168.66.28:80(ip of wan), i can&#039;t access webserver through wan,<br />can anyone give me some tips?<br />thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258731">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Have you set up port forwarding?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258736">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 10:08					</div>
				</div>
				<div class="post-content content">
					<p>hi, kh_tsang, thank you for reply.<br />i think yes, because i can access the ethernet through lan.<br />from the spec of uhttpd:<br />Securing uHTTPd<br />By default, uHTTPd is bind to 0.0.0.0 which also includes the WAN port of your router. To bind uHTTPd to the LAN port only you have to change the listen_http and listen_https options to your LAN IP address.</p><p>i think we needn&#039;t setup port forwarding, do you think you?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258737">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 10:15					</div>
				</div>
				<div class="post-content content">
					<p>Is the uHTTPd on the openwrt? If yes, port forwarding is not needed, but you need to allow port 80 input from wan in the firewall settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258740">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 10:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>Is the uHTTPd on the openwrt? If yes, port forwarding is not needed, but you need to allow port 80 input from wan in the firewall settings.</p></blockquote></div><p>yes, i use the uhttpd on the openwrt.<br />i didn&#039;t set any setting about firewall and can&#039;t found how to set this,<br />could you gvie me some tips about how to set it?<br />In my opinion, when Wan received a packet which send to port 80, it should send to Wan because there is no NAT table about this port. right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258741">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:20					</div>
				</div>
				<div class="post-content content">
					<p>Router control panel --&gt; Network --&gt; Firewall --&gt; Add rule.</p><p>Source zone: wan or any<br />Destination: Device(input)<br />Port number: 80</p><p>Then save and apply.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258744">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 11:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>Router control panel --&gt; Network --&gt; Firewall --&gt; Add rule.</p><p>Source zone: wan or any<br />Destination: Device(input)<br />Port number: 80</p><p>Then save and apply.</p></blockquote></div><p>oh, i can&#039;t found this path, maybe my version is different with yours, <br />my version is: OpenWrt Barrier Breaker r39579 / LuCI Trunk (svn-r10537),</p><p>what&#039;s your version?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258745">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yjpcn wrote:</cite><blockquote><div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>Router control panel --&gt; Network --&gt; Firewall --&gt; Add rule.</p><p>Source zone: wan or any<br />Destination: Device(input)<br />Port number: 80</p><p>Then save and apply.</p></blockquote></div><p>oh, i can&#039;t found this path, maybe my version is different with yours, <br />my version is: OpenWrt Barrier Breaker r39579 / LuCI Trunk (svn-r10537),</p><p>what&#039;s your version?</p></blockquote></div><p>Barrier breaker 14.07, the stable version.</p>											<p class="post-edited">(Last edited by <strong>kh_tsang</strong> on 26 Dec 2014, 11:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258746">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>One more thing, how do you access the router from WAN?</p>											<p class="post-edited">(Last edited by <strong>kh_tsang</strong> on 26 Dec 2014, 11:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258748">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 11:44					</div>
				</div>
				<div class="post-content content">
					<p>i found a similar config that is traffic rules, and it describe that &quot;From any host in wan To any router IP at port 80 on this device&quot; after save and apply, do you think is it ok?<br />but i still can&#039;t access webserver through Wan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258749">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 11:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>One more thing, how do you access the router from WAN?</p></blockquote></div><p>input ip address directly in the browser, i.e., 192.168.66.28,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258751">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yjpcn wrote:</cite><blockquote><div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>One more thing, how do you access the router from WAN?</p></blockquote></div><p>input ip address directly in the browser, i.e., 192.168.66.28,</p></blockquote></div><p>Is it from other network or mobile network?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258755">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:52					</div>
				</div>
				<div class="post-content content">
					<p>You need to forward port 80 of your public ip to your openwrt router first.</p>											<p class="post-edited">(Last edited by <strong>kh_tsang</strong> on 26 Dec 2014, 11:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258757">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 11:55					</div>
				</div>
				<div class="post-content content">
					<p>oh, it&#039;s ok. I restore the config, and add the rule you suggest, then it&#039;s ok.<br />thank you very much.<br />but i still can understand why.<br />the wan drop the packet if i didn&#039;t add this rule?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258758">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 11:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yjpcn wrote:</cite><blockquote><p>oh, it&#039;s ok. I restore the config, and add the rule you suggest, then it&#039;s ok.<br />thank you very much.<br />but i still can understand why.<br />the wan drop the packet if i didn&#039;t add this rule?</p></blockquote></div><p>But you have another problem: there is no public ip so it cannot be accessed from the internet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258761">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 12:09					</div>
				</div>
				<div class="post-content content">
					<p>in my environment, there is no ethernet(lan), so i have to access the web through wifi or wan, but my PC don&#039;t have wireless, so the best for me is through wan.<br />my PC and wan belong the same ip range in the lab. <br />and in future wan will report it&#039;s ip(can be public ip) to our server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258763">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						26 Dec 2014, 12:15					</div>
				</div>
				<div class="post-content content">
					<p>about the packet path without any firewall rule,my understanding is this: packet--&gt; wan--&gt;nat, if found, forward to lan, if didn&#039;t, goto cpu/dropped,<br />but now it seems like this: packet--&gt;wan--&gt;go to lan if there are no rule, right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258764">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						26 Dec 2014, 12:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yjpcn wrote:</cite><blockquote><p>about the packet path without any firewall rule,my understanding is this: packet--&gt; wan--&gt;nat, if found, forward to lan, if didn&#039;t, goto cpu/dropped,<br />but now it seems like this: packet--&gt;wan--&gt;go to lan if there are no rule, right?</p></blockquote></div><p>No. The IP belongs to the openwrt wan interface. If there is no rule, it will follow the default action for input in the firewall zone settings. The packet will not go to lan unless you are connecting to lan IP with using the wan IP as gateway and allow forward from wan to lan.</p>											<p class="post-edited">(Last edited by <strong>kh_tsang</strong> on 26 Dec 2014, 12:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259012">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">yjpcn</div>
					<div class="post-datetime">
						29 Dec 2014, 04:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><div class="quotebox"><cite>yjpcn wrote:</cite><blockquote><p>about the packet path without any firewall rule,my understanding is this: packet--&gt; wan--&gt;nat, if found, forward to lan, if didn&#039;t, goto cpu/dropped,<br />but now it seems like this: packet--&gt;wan--&gt;go to lan if there are no rule, right?</p></blockquote></div><p>No. The IP belongs to the openwrt wan interface. If there is no rule, it will follow the default action for input in the firewall zone settings. The packet will not go to lan unless you are connecting to lan IP with using the wan IP as gateway and allow forward from wan to lan.</p></blockquote></div><p>ok, got it, thank you very much</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>