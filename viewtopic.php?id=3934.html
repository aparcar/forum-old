<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IPTables ICMP format</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p18243">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bengalih</div>
					<div class="post-datetime">
						3 Jan 2006, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>So, I know I can use the following command to drop pings to my box:</p><p>iptables -I INPUT 3 -p icmp --icmp-type echo-request -j DROP</p><br /><p>But what format would this be put in the firewall.user file?</p><p>Also, does anyone have a link to a tutorial that more fully explains the OpenWRT implementation of IPTables?&nbsp; I am confused with the prerouting_rule and forwarding_rule syntax.</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18273">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kaldek</div>
					<div class="post-datetime">
						4 Jan 2006, 03:02					</div>
				</div>
				<div class="post-content content">
					<p>First up, here is the syntax you would use in the firewall.user file:</p><p>iptables -I input_rule -p icmp --icmp --icmp-type echo-request -j DROP</p><p>I&#039;m not sure why you&#039;re using &quot;-I&quot; though as compared to &quot;-A&quot;?</p><p>As for IPtables, it&#039;s not &quot;customised for OpenWRT&quot; in any way.&nbsp; The whole firewall.user thing is just a script file used on OpenWRT for your own entries because the startup script is on the read-only partition.&nbsp; The reason for this, is that the basic firewall configuration sets up iptables to work with a single external address, block all inbound connections but allow all outbound connections (much like when you use the stock firmware).&nbsp; You have every right to change this default behaviour but it tends to fit most of our needs.</p><p>The firewall.user file allows extra rules to be defined to allow traffic inbound.&nbsp; Anyway, my recommendation to you for iptables is to read the iptables tutorial, available everywhere, but here&#039;s one mirror for you: <a href="http://www.faqs.org/docs/iptables/">http://www.faqs.org/docs/iptables/</a>&nbsp; </p><p>Everything I know about iptables, I learned from this document in the space of about a day.</p><p>Kaldek</p>											<p class="post-edited">(Last edited by <strong>kaldek</strong> on 4 Jan 2006, 03:03)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>