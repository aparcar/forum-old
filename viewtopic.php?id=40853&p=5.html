<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> 6rd and ipv6-support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Jul 2015 and 30 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 12</div><nav><ul><li><a href="viewtopic.php%3Fid=40853&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=40853&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=40853&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=12.html">12</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p190696">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						2 Feb 2013, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>FYI: dhcpv6 should work again now. sorry for the inconveniences</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190698">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						2 Feb 2013, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />@Hnyman<br />Since some versions the default settings allow proper functioning of 6rd. My customization consite simply adding the port forwarding, the allocation of permanent leases and the settings for wi-fi.<br />I will do some tests again and I will inform you.</p><p>Edit: i&#039;ll wait for next build with fixed DHCPv6 before testing.</p>											<p class="post-edited">(Last edited by <strong>Manani</strong> on 2 Feb 2013, 12:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190750">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						2 Feb 2013, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>It was a settings problem. Everything goes well as follows:</p><p>network</p><div class="codebox"><pre><code>config interface &#039;wan6&#039;
    option proto &#039;dhcpv6&#039;
    option ifname &#039;@wan&#039;
    option reqaddress &#039;none&#039;
    option reqprefix &#039;no&#039;</code></pre></div><br /><p>6relayd</p><div class="codebox"><pre><code>config server &#039;default&#039;
    list network &#039;lan&#039;
    option fallback_relay &#039;rd dhcpv6 ndp&#039;
    option master &#039;wan6&#039;
    option rd &#039;relay&#039;
    option dhcpv6 &#039;relay&#039;</code></pre></div><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190772">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">wkweksl</div>
					<div class="post-datetime">
						3 Feb 2013, 04:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>@wkweksl:<br />which version of openwrt are you using?</p><p>if you are on trunk<br />ip6prefix should be added to wan6 not lan (although it will finally be assigned to lan)<br />accept_ra and send_rs do not exist anymore in recent trunk versions though the rest looks ok</p></blockquote></div><p>CyrusFF,</p><p>Currently running on trunk r35407. Made the following changes. The wan comes up for a few minutes and then drops. The pc client now cannot get any ipv6 address from the router. Think before when I was using radvd, the router propagated the ra nicely.&nbsp; Now a little confused if I should go back to radvd. Any ideas?</p><p>Thanks.</p><p>Edit : Reinstalled radvd and the router propagates the ipv6 lan addresses nicely.</p><p>/etc/config/network</p><div class="codebox"><pre><code>config interface &#039;lan&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option _orig_ifname &#039;eth0.1 radio0.network1&#039;
    option _orig_bridge &#039;true&#039;
    option ifname &#039;eth0.1&#039;
    option ipaddr &#039;192.168.1.254&#039;
    option ip6assign &#039;64&#039;

config interface &#039;wan&#039;
    option ifname &#039;eth0.2&#039;
    option _orig_ifname &#039;eth0.2&#039;
    option _orig_bridge &#039;false&#039;
    option proto &#039;dhcp&#039;
    option broadcast &#039;1&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;2001:xxxx:xxxx:4::/64&#039;

config interface &#039;wan6&#039;
    option proto &#039;static&#039;
    option ifname &#039;eth0.2&#039;
    option dns &#039;2001:xxxx:xxxx::3 2001:xxxx:xxxx::3&#039;
    option ip6addr &#039;2001:xxxx:xxxx::9f/64&#039;
    option ip6gw &#039;2001:xxxx:xxxx::1&#039;
    option ip6prefix &#039;2001:xxxx:xxxx:4::/64&#039;</code></pre></div><p>/etc/config/6relayd</p><div class="codebox"><pre><code>config server &#039;default&#039;
    option master &#039;wan6&#039;
    option fallback_relay &#039;rd dhcpv6 ndp&#039;
    list network &#039;lan&#039;
    option rd &#039;relay&#039;
    option dhcpv6 &#039;relay&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>wkweksl</strong> on 3 Feb 2013, 05:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190787">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						3 Feb 2013, 10:35					</div>
				</div>
				<div class="post-content content">
					<p>Set the option rd and option dhcpv6 to &#039;server&#039; and not to &#039;relay&#039; otherwise this won&#039;t work.<br />The rest looks ok from my perspective.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190849">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">wkweksl</div>
					<div class="post-datetime">
						4 Feb 2013, 03:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>Set the option rd and option dhcpv6 to &#039;server&#039; and not to &#039;relay&#039; otherwise this won&#039;t work.<br />The rest looks ok from my perspective.</p></blockquote></div><p>Still no joy. &quot;ip -6 neigh show&quot; shows the wan gateway to be reachable. However, it&#039;s just simply not responding to pings. Anything else I can try?</p><p>Thanks.</p><p>Edit : Escalated to ISP. Waiting for outcome.</p><p>Edit2 : Some slight misconfiguration on ISP part. IPv6 working fine now. Thanks, CyrusFF!<br /></p><div class="codebox"><pre><code>2001:xxxx:xxxx::1 dev eth0.2 lladdr 00:12:xx:xx:xx:6c router REACHABLE</code></pre></div>											<p class="post-edited">(Last edited by <strong>wkweksl</strong> on 4 Feb 2013, 11:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192824">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						22 Feb 2013, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>so I just downloaded and built trunk r35736 and so far I am very impressed how far IPv6 support has come.&nbsp; PPPoE+DHCP-PD/DHCPv6 work perfectly, as does 6RD, all configurable from LuCI.&nbsp; wow!&nbsp; Hats off to the devel community for this progress.</p><p>I am wondering however how to shorten the RA lifetimes and DHCPv6 prefix lifetimes on the LAN?&nbsp; In the case where the wan link does an up-down or temporary loss of connectivity, the prefix is valid for 24hrs yet in the case of a dynamically assigned IP, the 6RD prefix will necessarily change.</p><p>I made a few tests and disconnected/reconnected and since the wan up/down does not deprecate the previously assigned prefix, the hosts behind the wrt end up with a whole list of prefixes assigned that are valid for 24 hrs - n*seconds.&nbsp; It would be nice to know how to shorten the validity of the delegated prefix as well as the frequency of router announcements?</p><p>I was using radvd previously to do this, however I see that the current de-facto seems to be 6relayd.&nbsp; Is it possible to control this as well using 6relayd?</p><p>thanks for any help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193005">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						24 Feb 2013, 13:25					</div>
				</div>
				<div class="post-content content">
					<p>This seems like a misconfiguration normally when the native connection or the 6rd-uplink goes down the prefix of the interface that went down is advertised for another 2 hours (validity time 2 hours and counting down) and a preferred lifetime of 0 meaning non-preferred or &quot;do not use any more&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193080">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						25 Feb 2013, 05:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>This seems like a misconfiguration normally when the native connection or the 6rd-uplink goes down the prefix of the interface that went down is advertised for another 2 hours (validity time 2 hours and counting down) and a preferred lifetime of 0 meaning non-preferred or &quot;do not use any more&quot;.</p></blockquote></div><p>You are correct, the lifetime for the prefixes drops to 120 minutes.</p><p>Am i correct in saying that 6relayd does not send router announcements at all and only replies to sollicited RA requests?</p><p>I rebuilt my trunk and am using radvd and disabled 6relayd for RAs and SLAAC on the LAN; 6relayd has the advantage of a tiny footprint but I had some devices that seem to misbehave with it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> need to do more testing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193112">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						25 Feb 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>No, it also sends RAs automatically every 3-10 Minutes if there are no RS from clients.</p><p>Maybe the ULA-prefix is the problem?<br />You could try removing that local prefix in the global-section of /etc/config/network and or in LuCI on the Interface-page.</p><p>Also it would be interesting to know which client (Windows, Linux, Mac, iOS, Android, ...) is the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193136">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						25 Feb 2013, 15:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>No, it also sends RAs automatically every 3-10 Minutes if there are no RS from clients.</p><p>Maybe the ULA-prefix is the problem?<br />You could try removing that local prefix in the global-section of /etc/config/network and or in LuCI on the Interface-page.</p><p>Also it would be interesting to know which client (Windows, Linux, Mac, iOS, Android, ...) is the problem.</p></blockquote></div><p>I disabled my radvd and rebooted with 6relayd acting in server-mode for RAs and DHCPv6, I will do more testing and see if I can get back to the state where I had broken connectivity.&nbsp; It was a iPad device running the latest iOS that according to ip6info software had a valid prefix, yet I was not able to utilize it for whatever reason - it was coming out of sleep when I was doing the testing.</p><p>as you suggested I removed the ULA prefix from globals in the configuration as well.</p><p>I see from a wireshark capture that there are in fact semi-random RAs being generated.&nbsp; What is the frequency logic and can it be tweaked?&nbsp; As well I see there is RDNSS (yay!) that announces the wrt device; is it possible to specify an alternate DNS server?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193137">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						25 Feb 2013, 15:42					</div>
				</div>
				<div class="post-content content">
					<p>No specifying a different DNS-server is not yet possible.</p><p>The frequency logic is like this:<br />Send RA in the following cases:<br />* Just after (re)starting 6relayd<br />* An address (prefix) was added / removed / changed on the interface.<br />* The router acquired / lost an IPv6 default route.<br />* When an RS is received<br />* After not sending an RA for MinRtrAdvInterval + a random number between 0 and (MaxRtrAdvinterval - MinRtrAdvInterval) seconds</p><p>with MaxRtrAdvInterval being 600 and MinRtrAdvInterval being MaxRtrAdvInterval / 3&nbsp; (RFC 4861 default)<br />part of that is specified by RFC 4861 and / or RFC 6204.</p><br /><p>The MaxRtrAdvInterval, MinRtrAdvInterval and also the DNS-server announced are not yet configurable but I could put this on my ToDo. However I don&#039;t see where changing the interval could fix the clients as an RA is sent anyway if an update to the prefix on the interface happens.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193158">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						25 Feb 2013, 18:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>The MaxRtrAdvInterval, MinRtrAdvInterval and also the DNS-server announced are not yet configurable but I could put this on my ToDo. However I don&#039;t see where changing the interval could fix the clients as an RA is sent anyway if an update to the prefix on the interface happens.</p></blockquote></div><p>I was not saying this was lacking, I only liked the regular RAs that could be configured in radvd for predictability of debugging.&nbsp; Using a different DNS than the wrt would be nice but the rest if compliant (I have not read the RFCs <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> would be fluff.</p><p>I am guessing my issue with the iPad was the ULA and will report anything different should it be the case.&nbsp; I had also noticed something of a &quot;lag&quot; in terms of obtaining a prefix over a WDS client, I need to investigate that as well.&nbsp; I obtain one on my windows7 laptop after 60-90 seconds, whereas with my old openwrt + radvd I was getting it as quickly as v4 DHCP.</p><p>I would like to re-iterate how glad I am to see 6RD/DHCP-PD configurable via LuCI <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; thx for the work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193228">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						26 Feb 2013, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>I added some new features to 6relayd:<br />#1 is 6relayd announces ULA-address with a preferred time of 0 if there is a public prefix now<br />This is enabled by default and can be disable by setting option compat_ula 0 in the UCI-file.</p><p>#2 is the option rewrite_dns_addr which allows you to override the announced DNS-server.<br />Those are only avaiable in the config file for now. I&#039;ll write a patch for LuCI some time later.</p><p>I also just ordered a new router and I will try to test with my iPod touch later and see how that thing behaves.</p><p>And yeah also it was finally time to add proper IPv6 support to OpenWrt.</p>											<p class="post-edited">(Last edited by <strong>CyrusFF</strong> on 26 Feb 2013, 15:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193256">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">Basker</div>
					<div class="post-datetime">
						26 Feb 2013, 21:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m running BB r35770 using the new ipv6 code - which worked basically perfectly from fresh build of BB. I&#039;m connected via Comcast, and have a /128 address on the public interface of my router, and a /64 for my internal network. Works fine, routes fine. Folks on my primary network have fast, stable ipv6. Thanks!</p><p>Question: I have guest network set up more or less as described here: <a href="https://dev.openwrt.org/ticket/4108.">https://dev.openwrt.org/ticket/4108.</a> I&#039;d like to propagate ipv6 to the guest interface. Is there a way to do this using the new ipv6 setup? What I had done so far is to enable the guest network as a service interface under &quot;IPv6 RA and DHCPv6&quot;. I then select /64 for the IPv6 assignment length in the guest interface ivp6 setting. I now have a /64 from the ULA-Prefix on the guest network. But, not sure how to break up my /64 and get a piece of public ivp6 on the get network as well as the lan network.</p><p>My suspicion is that both my lan and guest interfaces should be set to /66 subnets of the assigned public /64. I can&#039;t set that in the UI, and I&#039;m an ipv6 novice, so am not sure.</p><p>B</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193259">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						26 Feb 2013, 21:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Basker wrote:</cite><blockquote><p>Hello,</p><p>I&#039;m running BB r35770 using the new ipv6 code - which worked basically perfectly from fresh build of BB. I&#039;m connected via Comcast, and have a /128 address on the public interface of my router, and a /64 for my internal network. Works fine, routes fine. Folks on my primary network have fast, stable ipv6. Thanks!</p><p>Question: I have guest network set up more or less as described here: <a href="https://dev.openwrt.org/ticket/4108.">https://dev.openwrt.org/ticket/4108.</a> I&#039;d like to propagate ipv6 to the guest interface. Is there a way to do this using the new ipv6 setup? What I had done so far is to enable the guest network as a service interface under &quot;IPv6 RA and DHCPv6&quot;. I then select /64 for the IPv6 assignment length in the guest interface ivp6 setting. I now have a /64 from the ULA-Prefix on the guest network. But, not sure how to break up my /64 and get a piece of public ivp6 on the get network as well as the lan network.</p><p>My suspicion is that both my lan and guest interfaces should be set to /66 subnets of the assigned public /64. I can&#039;t set that in the UI, and I&#039;m an ipv6 novice, so am not sure.</p><p>B</p></blockquote></div><p>hello,</p><p>using anything shorter than a /64 will break IPv6 autoconfiguration and pretty much everything else - Comcast is only giving you a /64 and thats it?&nbsp; Ideally you want a /64 for every interface</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193260">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">cconn</div>
					<div class="post-datetime">
						26 Feb 2013, 21:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CyrusFF wrote:</cite><blockquote><p>I added some new features to 6relayd:<br />#1 is 6relayd announces ULA-address with a preferred time of 0 if there is a public prefix now<br />This is enabled by default and can be disable by setting option compat_ula 0 in the UCI-file.</p><p>#2 is the option rewrite_dns_addr which allows you to override the announced DNS-server.<br />Those are only avaiable in the config file for now. I&#039;ll write a patch for LuCI some time later.</p><p>I also just ordered a new router and I will try to test with my iPod touch later and see how that thing behaves.</p><p>And yeah also it was finally time to add proper IPv6 support to OpenWrt.</p></blockquote></div><p>doing a svn up now!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193262">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">Basker</div>
					<div class="post-datetime">
						26 Feb 2013, 22:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cconn wrote:</cite><blockquote><p>hello,</p><p>using anything shorter than a /64 will break IPv6 autoconfiguration and pretty much everything else - Comcast is only giving you a /64 and thats it?&nbsp; Ideally you want a /64 for every interface</p></blockquote></div><p>According to this:</p><p><a href="http://forums.comcast.com/t5/Home-Networking-Router-WiFi/IPv6-Multiple-Networks/td-p/1414909">http://forums.comcast.com/t5/Home-Netwo … -p/1414909</a></p><p>A Comcast employee said: We allocate a /64 by default, if your router supports shorter prefixes it needs to send us a hint per RFC3633.&nbsp; We will allocate up to a /60 today.&nbsp; We have plans on tap for 2013 to change the defaults.</p><p>I tried changing the setting in network that I think hints that I want a /60:</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; option proto &#039;dhcpv6&#039;<br />&nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; option reqprefix &#039;60&#039;<br />&nbsp; &nbsp; <br />But I&#039;m still getting a /64. Not sure if I&#039;m setting this correctly or not.</p><p>B</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193291">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						27 Feb 2013, 09:42					</div>
				</div>
				<div class="post-content content">
					<p>That setting is indeed what you need and setting it to a specific value sends out hints as specified in RFC3633. So its probably your ISP not complying with the hint. Maybe you could try with 62 or 63 and see what happens. Otherwise you have to talk to Comcast.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193439">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">hato</div>
					<div class="post-datetime">
						28 Feb 2013, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Hello, continue with post in another thread:</p><p>No, I didn&#039;t see anything related with 6relayd in /tmp except the pid file in /tmp/run. Do I need to check that after I restart the network script but before I manually start 6relayed? (Currently I can&#039;t test that. Need the network).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193442">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						28 Feb 2013, 15:48					</div>
				</div>
				<div class="post-content content">
					<p>No I just wanted to make sure that it did not crash unexpectedly.<br />I&#039;m not sure at the moment what happens there. It is ok if it disappears for a few seconds a new process comes up. If it doesn&#039;t there might be something wrong. Do you see anything unusual in the log?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193446">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">hato</div>
					<div class="post-datetime">
						28 Feb 2013, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>Searching &quot;6relayd&quot; in the system log showed those:<br />Feb 28 21:21:12 WYWNDR3700 daemon.warn 6relayd[28256]: Termination requested by signal.<br />Feb 28 21:21:12 WYWNDR3700 daemon.warn 6relayd[28256]: Failed to relay to ff02::1%br-lan (Network is unreachable)<br />Feb 28 21:21:12 WYWNDR3700 daemon.err 6relayd[29406]: Unable to open interface wan6 (No such device)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193447">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						28 Feb 2013, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>Interesting can you show me your /etc/config/network and /etc/config/6relayd?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193449">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">hato</div>
					<div class="post-datetime">
						28 Feb 2013, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Sure.<br />/etc/config/network:<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option netmask &#039;255.255.255.0&#039;
        option ipaddr &#039;192.168.51.1&#039;
        option ifname &#039;eth0&#039;
        option ip6assign &#039;64&#039;

config interface &#039;wan&#039;
        option auto &#039;1&#039;
        option ifname &#039;eth1&#039;
        option defaultroute &#039;1&#039;
        option proto &#039;pppoe&#039;
        option keepalive &#039;10&#039;
        option demand &#039;0&#039;
        option peerdns &#039;0&#039;
        option username &#039;username&#039;
        option password &#039;password&#039;
        option ipv6 &#039;1&#039;

config interface &#039;henet&#039;
        option proto &#039;6in4&#039;
        option wan_device &#039;wan&#039;
        option peeraddr &#039;xx.xx.xx.xx&#039;
        option tunnelid &#039;id&#039;
        option username &#039;name&#039;
        option password &#039;xxxxxxx&#039;
        option ip6addr &#039;xxxxxxxxxxxx&#039;
        option ip6prefix &#039;xxxxxxxxxxxxx&#039;
        option mtu &#039;1472&#039;

config switch
        option enable &#039;1&#039;
        option name &#039;rtl8366s&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;
        option blinkrate &#039;2&#039;
        option max_length &#039;3&#039;

config switch_vlan
        option device &#039;rtl8366s&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 3 5&#039;

config switch_port
        option device &#039;rtl8366s&#039;
        option port &#039;1&#039;
        option led &#039;6&#039;

config switch_port
        option device &#039;rtl8366s&#039;
        option port &#039;2&#039;
        option led &#039;9&#039;</code></pre></div><p>/etc/config/6relayd:<br /></p><div class="codebox"><pre><code>config server default
        option master   wan6
        list network    lan
        option rd       server
        option dhcpv6   server
        option fallback_relay   &#039;rd dhcpv6 ndp&#039;
        option compat_ula 1</code></pre></div><p>I just realized that I forgot to delete &quot;option ipv6 &#039;1&#039;&quot; from wan interface after the latest firmware update, could that possibly be the reason?</p><p>Oh, seems the &quot;option master wan6&quot; be the culprit (never noticed that before)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193451">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">CyrusFF</div>
					<div class="post-datetime">
						28 Feb 2013, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>Yeah can you either rename your &quot;henet&quot; to &quot;wan6&quot; in /etc/config/network or your &quot;wan6&quot; to &quot;henet&quot; in /etc/config/6relayd and retry?</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 126 to 125 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 12</div><nav><ul><li><a href="viewtopic.php%3Fid=40853&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=40853&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=40853&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=40853&amp;p=12.html">12</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>