<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 23 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=21.html">21</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=22.html">22</a></li><li class="pagination-current"><span>23</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=24.html">24</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p327837">
				<div class="post-metadata">
					<div class="post-num">Post #551</div>
					<div class="post-author">freezer2k</div>
					<div class="post-datetime">
						9 Jun 2016, 23:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sebr wrote:</cite><blockquote><p>Thanks for your reply. Now I used the patch command and it revelaed that /src/flash/nor/drivers.c was not patched. Since it was only two additional lines I added them manually. Now no errors and I can build OpenOCD without errors.<br />But I cannot communicate with the target or halt it. The bootstrap resistor is not present. Since I have only connected VTref, GND, TDI, TDO, TMS and TCK the reset configuration of my buspirate should not matter. <a href="http://dangerousprototypes.com/docs/Bus_Pirate_JTAG_connections_for_OpenOCD">Here</a> is the interface config.I wonder what I am doing wrong.</p></blockquote></div><br /><p>Why connect VTref? Does the buspirate use it?<br />I&#039;m not quite sure, but IIRC my WDR3600 did not have any voltage present on that pin. I did not need to connect it. What router model?<br />I never used the buspirate, only Rpi1/3. Maybe someone else here knows more?</p><p>What exactly did you do with your router? It might be necessary to pull the CS- or one of the Data-Pins of the Flash to ground while powering up the router and executing the initialization commands in OpenOCD. Depending on the flash-content it might prevent the CPU to halt otherwise.<br />There&#039;s some risk to damage the router though. Did not happen with mine, but I just want to point it out.</p>											<p class="post-edited">(Last edited by <strong>freezer2k</strong> on 9 Jun 2016, 23:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328081">
				<div class="post-metadata">
					<div class="post-num">Post #552</div>
					<div class="post-author">sebr</div>
					<div class="post-datetime">
						11 Jun 2016, 20:09					</div>
				</div>
				<div class="post-content content">
					<p>I have the same router and situation (messed up uboot) as you. I sorted out the JTAG problems: indeed VTref seems not connected. So I canged the buspirate config (buspirate_mode normal, buspirate_pullup 0) and now I can talk to the hardware. First thing I would like to do is to get back the stock uboot. So I took the uboot image from <a href="https://github.com/pepe2k/u-boot_mod/tree/master/original_u-boot_images">https://github.com/pepe2k/u-boot_mod/tr … oot_images</a> and wrote it to the flash (flash write_image unlock tp-link_wdr3600_v1_130909.bin 0xbf000000). But nothing on serial console. Only a brief flash of all LED&#039;s and then Power stays on permanently. Do I need to strip off something of that file? Where can I find a stock uboot i can wrtie to flash via JTAG?</p><p>Update: Now I treid to flash a different image but flash auto probe fails now <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Not possible to access the flash anymore.</p>											<p class="post-edited">(Last edited by <strong>sebr</strong> on 12 Jun 2016, 01:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328285">
				<div class="post-metadata">
					<div class="post-num">Post #553</div>
					<div class="post-author">freezer2k</div>
					<div class="post-datetime">
						13 Jun 2016, 14:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sebr wrote:</cite><blockquote><p>I have the same router and situation (messed up uboot) as you. I sorted out the JTAG problems: indeed VTref seems not connected. So I canged the buspirate config (buspirate_mode normal, buspirate_pullup 0) and now I can talk to the hardware. First thing I would like to do is to get back the stock uboot. So I took the uboot image from <a href="https://github.com/pepe2k/u-boot_mod/tree/master/original_u-boot_images">https://github.com/pepe2k/u-boot_mod/tr … oot_images</a> and wrote it to the flash (flash write_image unlock tp-link_wdr3600_v1_130909.bin 0xbf000000). But nothing on serial console. Only a brief flash of all LED&#039;s and then Power stays on permanently. Do I need to strip off something of that file? Where can I find a stock uboot i can wrtie to flash via JTAG?</p><p>Update: Now I treid to flash a different image but flash auto probe fails now <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> Not possible to access the flash anymore.</p></blockquote></div><br /><p>Did you erase the flash before writing?</p><p>Did you read back the flash after writing and compare md5sums?</p><p>Don&#039;t think you need to strip anything, seems to be an even 64kb in size. I only flashed my 128kb mtd0 backup or the binary from pepe2k&#039;s compile output, which was close to 128kb, so I filled it up with zeros. </p><p>I had issues with not erasing the flash before, resulting in garbage that creates issues with CPU halt/flash access. In this case try what I wrote in my previous post:</p><p>&gt; It might be necessary to pull the CS- or one of the Data-Pins of the Flash to ground while powering up the router and executing the initialization commands in OpenOCD. Depending on the flash-content it might prevent the CPU to halt otherwise.<br />There&#039;s some risk to damage the router though. Did not happen with mine, but I just want to point it out.</p>											<p class="post-edited">(Last edited by <strong>freezer2k</strong> on 13 Jun 2016, 14:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328287">
				<div class="post-metadata">
					<div class="post-num">Post #554</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						13 Jun 2016, 14:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Hi pepe2k!<br />I want to disable LED LAN blinking every boot on my tplink 740 V4. Could you help me!<br />Thanks in advance!</p></blockquote></div><p>Hello, <br />I have interest in pepe2k uboot mod for that reason too, I have achieved this but it only work&nbsp; 740 V4/5<br />You can download it here:<br /><a href="http://urlstat.eu/uboot740v4_5.bin">http://urlstat.eu/uboot740v4_5.bin</a><br />it can be flashed thru openwrt if you have u-boot partition unlocked,<br />keep in mind that this is my compilation of pepe2k mod and most of it features did not work. It just boots the routers, and do not blink the leds. Also flashing it will change router mac address.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328403">
				<div class="post-metadata">
					<div class="post-num">Post #555</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						14 Jun 2016, 10:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello, <br />I have interest in pepe2k uboot mod for that reason too, I have achieved this but it only work&nbsp; 740 V4/5<br />You can download it here:<br /><a href="http://urlstat.eu/uboot740v4_5.bin">http://urlstat.eu/uboot740v4_5.bin</a><br />it can be flashed thru openwrt if you have u-boot partition unlocked,<br />keep in mind that this is my compilation of pepe2k mod and most of it features did not work. It just boots the routers, and do not blink the leds. Also flashing it will change router mac address.</p></blockquote></div><p>Thanks so much!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328404">
				<div class="post-metadata">
					<div class="post-num">Post #556</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						14 Jun 2016, 11:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello, <br />I have interest in pepe2k uboot mod for that reason too, I have achieved this but it only work&nbsp; 740 V4/5<br />You can download it here:<br /><a href="http://urlstat.eu/uboot740v4_5.bin">http://urlstat.eu/uboot740v4_5.bin</a><br />it can be flashed thru openwrt if you have u-boot partition unlocked,<br />keep in mind that this is my compilation of pepe2k mod and most of it features did not work. It just boots the routers, and do not blink the leds. Also flashing it will change router mac address.</p></blockquote></div><p>what&#039;s the changes you have made it??<br />are you tried modifying ap121.h file?</p><div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Thanks so much!</p></blockquote></div><p>lâu quá ko liên lạc, bữa nay bạn làm gì rồi?</p>											<p class="post-edited">(Last edited by <strong>phantnang</strong> on 14 Jun 2016, 12:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328519">
				<div class="post-metadata">
					<div class="post-num">Post #557</div>
					<div class="post-author">sebr</div>
					<div class="post-datetime">
						15 Jun 2016, 01:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>freezer2k wrote:</cite><blockquote><p>Did you erase the flash before writing?</p><p>Did you read back the flash after writing and compare md5sums?</p><p>Don&#039;t think you need to strip anything, seems to be an even 64kb in size. I only flashed my 128kb mtd0 backup or the binary from pepe2k&#039;s compile output, which was close to 128kb, so I filled it up with zeros. </p><p>I had issues with not erasing the flash before, resulting in garbage that creates issues with CPU halt/flash access. In this case try what I wrote in my previous post:</p></blockquote></div><p>No I not erased before. Simply flashed the uboot image using JTAG. That caused the router to still not boot and now the flash could not be probed anymore. Pulling the data or CS pin low not worked it out.<br />So I ended up desoldering the flash (no problem thanks to hotair station) and soldering it on a SO-DIP adapter and connect to it with buspirate in SPI mode. Then dumped the flash with flashrom and there was garbage where uboot supposed to be. The following was rather simple: took the lastest stock firmware and cut off the header with a hex editor. The flash layout in the wiki helps you to locate the things inside the bin file and how much to cut off. Then I simply copy the whole content of this file and paste it into the dumped file to overwrite the garbage but keep the ART. After soldering it back the router booted up fine with latest stock firmware and fully functional!<br />I really think JTAG is the one to blame here as for some reason it not works reliable like yu also experienced.</p>											<p class="post-edited">(Last edited by <strong>sebr</strong> on 15 Jun 2016, 01:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328530">
				<div class="post-metadata">
					<div class="post-num">Post #558</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						15 Jun 2016, 05:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>lâu quá ko liên lạc, bữa nay bạn làm gì rồi?</p></blockquote></div><p>Vẫn thường bạn. Dạo này có mod gì ko?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328547">
				<div class="post-metadata">
					<div class="post-num">Post #559</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						15 Jun 2016, 11:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello, <br />I have interest in pepe2k uboot mod for that reason too, I have achieved this but it only work&nbsp; 740 V4/5<br />You can download it here:<br /><a href="http://urlstat.eu/uboot740v4_5.bin">http://urlstat.eu/uboot740v4_5.bin</a><br />it can be flashed thru openwrt if you have u-boot partition unlocked,<br />keep in mind that this is my compilation of pepe2k mod and most of it features did not work. It just boots the routers, and do not blink the leds. Also flashing it will change router mac address.</p></blockquote></div><p>Thanks so much!</p></blockquote></div><p>I do it long time ago and do not remember what exactly was it, but as long as I remember I comment ALL_LEDS_ON function but got no idea inside which file was it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328549">
				<div class="post-metadata">
					<div class="post-num">Post #560</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						15 Jun 2016, 11:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello, <br />I have interest in pepe2k uboot mod for that reason too, I have achieved this but it only work&nbsp; 740 V4/5<br />You can download it here:<br /><a href="http://urlstat.eu/uboot740v4_5.bin">http://urlstat.eu/uboot740v4_5.bin</a><br />it can be flashed thru openwrt if you have u-boot partition unlocked,<br />keep in mind that this is my compilation of pepe2k mod and most of it features did not work. It just boots the routers, and do not blink the leds. Also flashing it will change router mac address.</p></blockquote></div><p>Thanks so much!</p></blockquote></div><p>I do it long time ago and do not remember what exactly was it, but as long as I remember I comment ALL_LEDS_ON function but got no idea inside which file was it</p></blockquote></div><p>It&#039;s here: <a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/lib_mips/board.c#L415">https://github.com/pepe2k/u-boot_mod/bl … ard.c#L415</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328610">
				<div class="post-metadata">
					<div class="post-num">Post #561</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						15 Jun 2016, 17:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>It&#039;s here: <a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/lib_mips/board.c#L415">https://github.com/pepe2k/u-boot_mod/bl … ard.c#L415</a></p></blockquote></div><p>thank so much<br />i&#039;ve rebuid your mod, it work well with full function u-boot and not blinking the led</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328621">
				<div class="post-metadata">
					<div class="post-num">Post #562</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						15 Jun 2016, 19:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Vẫn thường bạn. Dạo này có mod gì ko?</p></blockquote></div><p>đang làm cái bộ điều khiển trung tâm kết hợp camera, báo động và điều khiển thiết bị...Đang kiếm con router mạnh tí như Bufallo AG300H mà trên BMT mình ko có? bạn mua giúp mình được ko?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328693">
				<div class="post-metadata">
					<div class="post-num">Post #563</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						16 Jun 2016, 09:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello,<br /> I just want to say thanks to Pepe for making this mod. I was tested it on&nbsp; TL-WR740N v5 and it work fine, tried it on version 6 - router was bricked.<br />Is there any chance TL-WR740N v6 to be supported? (as long as I read it is 841N v10 identical)</p></blockquote></div><p>Come on Pepe <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />tell me what should I try to make it work on that hardware, I&#039;m ready to brick another router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328694">
				<div class="post-metadata">
					<div class="post-num">Post #564</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						16 Jun 2016, 09:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phantnang wrote:</cite><blockquote><div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Vẫn thường bạn. Dạo này có mod gì ko?</p></blockquote></div><p>đang làm cái bộ điều khiển trung tâm kết hợp camera, báo động và điều khiển thiết bị...Đang kiếm con router mạnh tí như Bufallo AG300H mà trên BMT mình ko có? bạn mua giúp mình được ko?</p></blockquote></div><p>compile uboot như thế nào bạn. mình làm mà báo lỗi.<br /></p><div class="codebox"><pre><code>dinhchuc@K52Jr:~/u-boot_mod-master$ make tplink_wr740n_v4
fatal: Not a git repository (or any of the parent directories): .git
bash: mips-openwrt-linux-uclibc-gcc: command not found
Makefile:155: warning: overriding recipe for target &#039;.PHONY&#039;
Makefile:153: warning: ignoring old recipe for target &#039;.PHONY&#039;
Makefile:241: warning: overriding recipe for target &#039;board/ar7240/ap121/libap121.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;board/ar7240/ap121/libap121.a&#039;
Makefile:241: warning: overriding recipe for target &#039;cpu/mips/libmips.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;cpu/mips/libmips.a&#039;
Makefile:241: warning: overriding recipe for target &#039;cpu/mips/ar7240/libar7240.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;cpu/mips/ar7240/libar7240.a&#039;
&gt; Configuring for TP-Link TL-WR740N v4 at: Thứ năm, 16 Tháng sáu năm 2016 13:49:37 ICT 
fatal: Not a git repository (or any of the parent directories): .git
bash: mips-openwrt-linux-uclibc-gcc: command not found
Makefile:155: warning: overriding recipe for target &#039;.PHONY&#039;
Makefile:153: warning: ignoring old recipe for target &#039;.PHONY&#039;
Makefile:241: warning: overriding recipe for target &#039;board/ar7240/ap121/libap121.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;board/ar7240/ap121/libap121.a&#039;
Makefile:241: warning: overriding recipe for target &#039;cpu/mips/libmips.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;cpu/mips/libmips.a&#039;
Makefile:241: warning: overriding recipe for target &#039;cpu/mips/ar7240/libar7240.a&#039;
Makefile:209: warning: ignoring old recipe for target &#039;cpu/mips/ar7240/libar7240.a&#039;
make[2]: mips-openwrt-linux-uclibc-gcc: Command not found
fatal: Not a git repository (or any of the parent directories): .git
make[2]: mips-openwrt-linux-uclibc-gcc: Command not found
bash: mips-openwrt-linux-uclibc-gcc: command not found
/home/dinhchuc/u-boot_mod-master/u-boot/config.mk:242: recipe for target &#039;cpu/mips/start.o&#039; failed
make[1]: *** [cpu/mips/start.o] Error 127
Makefile:108: recipe for target &#039;tplink_wr740n_v4&#039; failed
make: *** [tplink_wr740n_v4] Error 2</code></pre></div><p>Bạn mua online họ bán mà. Mình cũng đang dùng con ag300h đây.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328705">
				<div class="post-metadata">
					<div class="post-num">Post #565</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						16 Jun 2016, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello,<br /> I just want to say thanks to Pepe for making this mod. I was tested it on&nbsp; TL-WR740N v5 and it work fine, tried it on version 6 - router was bricked.<br />Is there any chance TL-WR740N v6 to be supported? (as long as I read it is 841N v10 identical)</p></blockquote></div><p>Come on Pepe <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />tell me what should I try to make it work on that hardware, I&#039;m ready to brick another router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Just try image for WR841Nv9.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328710">
				<div class="post-metadata">
					<div class="post-num">Post #566</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						16 Jun 2016, 12:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>Hello,<br /> I just want to say thanks to Pepe for making this mod. I was tested it on&nbsp; TL-WR740N v5 and it work fine, tried it on version 6 - router was bricked.<br />Is there any chance TL-WR740N v6 to be supported? (as long as I read it is 841N v10 identical)</p></blockquote></div><p>Come on Pepe <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />tell me what should I try to make it work on that hardware, I&#039;m ready to brick another router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Just try image for WR841Nv9.</p></blockquote></div><p>Tried it on WR841NV10 and bricked it. (I do that few monts ago) I can try it on 740Nv6 but suspect result will be the same.</p>											<p class="post-edited">(Last edited by <strong>nedoskiv</strong> on 16 Jun 2016, 12:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329461">
				<div class="post-metadata">
					<div class="post-num">Post #567</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						22 Jun 2016, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>pepe2K:</p><p>Is there any way of extracting factory firmware image by replacing the bootloader with your version? Can the httpd serve regions to memory?</p><p>The ISP custom order TP-Link 841n with 8mb flash has a Winbond W25Q64 instead of a 4mb flash chip, so it should be supported by your bootloader. More info here including bootlogs</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=65786">https://forum.openwrt.org/viewtopic.php?id=65786</a></p><p>The root password is different to other TP-LINK OEM Firmwares. Root/5up doesn&#039;t work as with the newer tp-link models.<br /><a href="https://wiki.openwrt.org/toh/tp-link/tl-wdr4300">https://wiki.openwrt.org/toh/tp-link/tl-wdr4300</a><br /><a href="https://wiki.openwrt.org/toh/tp-link/tl-mr3020">https://wiki.openwrt.org/toh/tp-link/tl-mr3020</a> &lt;- as it did on the old</p><p>This is an alternative way of extracting the ROM from the OEM u-boot. Worked on the kindle <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /><a href="http://igorsk.blogspot.be/2007/12/hacking-kindle-part-2-bootloader-and.html">http://igorsk.blogspot.be/2007/12/hacki … r-and.html</a></p>											<p class="post-edited">(Last edited by <strong>hojuruku</strong> on 22 Jun 2016, 15:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329689">
				<div class="post-metadata">
					<div class="post-num">Post #568</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						24 Jun 2016, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>any one help me, please??<br />i have replaced flash ic on my router with backup, restore ART &amp; Uboot. My problem is WIFI not work but it work well on stock firmware!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329863">
				<div class="post-metadata">
					<div class="post-num">Post #569</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						26 Jun 2016, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>Great you are in Vietnam too. I may need some hardware mod help from time to time, and I&#039;ll help you with the software, compiling, debugging wifi. In Hanoi I experimented doing a wifi-mesh a while back.</p><p>Can you tell vozforums (I can&#039;t make an account) about this for me. <br /><a href="https://vozforums.com/showthread.php?t=4127691&amp;page=1">https://vozforums.com/showthread.php?t= … amp;page=1</a><br />vs<br /><a href="https://forum.openwrt.org/viewtopic.php?id=65786">https://forum.openwrt.org/viewtopic.php?id=65786</a></p><p>Find hojuruku on #openwrt on Freenode IRC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329903">
				<div class="post-metadata">
					<div class="post-num">Post #570</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						27 Jun 2016, 04:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>any one help me, please??<br />i have replaced flash ic on my router with backup, restore ART &amp; Uboot. My problem is WIFI not work but it work well on stock firmware!</p></blockquote></div><p>you replace with uboot you compile?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330127">
				<div class="post-metadata">
					<div class="post-num">Post #571</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						29 Jun 2016, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>The location of the art image needed by the wireless driver has some interplay with u-boot I think.</p><p>Look at all the other threads with upgrading the flash size. i may run into the same trouble soon. You are glad you backed up the art mtd partition, if not you&#039;d have a router with no usable wifi.</p><p>You are looking in the right place. Try and read the forums for information on doing a flash rom size upgrade, and the changes they need to do in software after. <br />Thank you for telling vozforums about my work on the 941nd v9.2 vn 8mb flash version.</p><p>The other crazy idea is to just put the kernel bloated up with everything you need (no modules at all monolithic kernel) , and use the old u-boot - change the uboot-env to set the rootfs mtd partition AFTER the art starting at 4MB in the flash. </p><p>Or boot squashfs + kernel in the first 4mb, and tweak openwrt to put jffs2 AFTER the 4MB mark. That&#039;s just my 2 cents and it&#039;s wrong. The best thing to do is to make your bootloader or wifi-driver load art from the END of your flash.</p><p>Luke</p>											<p class="post-edited">(Last edited by <strong>hojuruku</strong> on 29 Jun 2016, 14:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330174">
				<div class="post-metadata">
					<div class="post-num">Post #572</div>
					<div class="post-author">hojuruku</div>
					<div class="post-datetime">
						30 Jun 2016, 06:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>any one help me, please??<br />i have replaced flash ic on my router with backup, restore ART &amp; Uboot. My problem is WIFI not work but it work well on stock firmware!</p></blockquote></div><p>Usually the ART has to be in the last 64k i.e size of rom minus 64k so my 8mb rom is 0x800000 - 0x10000 art partition start. This could vary in theory. The definitive answer is from the datasheet for the exact wifi chip you have in your router. Most ar71xx are as I described. </p><p><a href="https://forum.openwrt.org/viewtopic.php?id=41449">https://forum.openwrt.org/viewtopic.php?id=41449</a></p>											<p class="post-edited">(Last edited by <strong>hojuruku</strong> on 30 Jun 2016, 06:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330627">
				<div class="post-metadata">
					<div class="post-num">Post #573</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						6 Jul 2016, 13:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>any one help me, please??<br />i have replaced flash ic on my router with backup, restore ART &amp; Uboot. My problem is WIFI not work but it work well on stock firmware!</p></blockquote></div><p>you replace with uboot you compile?</p></blockquote></div><p>yes, it&#039;s still this bugs in my complie</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330697">
				<div class="post-metadata">
					<div class="post-num">Post #574</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						7 Jul 2016, 06:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>yes, it&#039;s still this bugs in my complie</p></blockquote></div><p>Your uboot = 128kb will delete ogrinal MAC adress</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330933">
				<div class="post-metadata">
					<div class="post-num">Post #575</div>
					<div class="post-author">phantnang</div>
					<div class="post-datetime">
						9 Jul 2016, 11:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><div class="quotebox"><cite>phantnang wrote:</cite><blockquote><p>yes, it&#039;s still this bugs in my complie</p></blockquote></div><p>Your uboot = 128kb will delete ogrinal MAC adress</p></blockquote></div><p>chỉ 123KB thôi!<br />mình xem trong u-boot đó vẫn còn mac bạn ơi, với u-boot đó + stock firmware vẫn chạy wifi mà!</p>											<p class="post-edited">(Last edited by <strong>phantnang</strong> on 9 Jul 2016, 11:13)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 576 to 575 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 23 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=21.html">21</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=22.html">22</a></li><li class="pagination-current"><span>23</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=24.html">24</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>