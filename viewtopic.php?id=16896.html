<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mtd partition unlock problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p73219">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sara</div>
					<div class="post-datetime">
						10 Sep 2008, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am having a problem while trying to unlock and rewrite the RedBoot config partition from within the linux. <br />All other partitions are able to unlock and rewrite except the RedBoot config &quot;mtd6&quot; and FIS directory&quot;mtd7&quot;.</p><p>Following is the partition setup on the Intel IXP425 board running kamikaez r12369.&nbsp; </p><p>root@OpenWrt:/etc# cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00060000 00020000 &quot;RedBoot&quot;<br />mtd1: 00140000 00020000 &quot;kernel1&quot;<br />mtd2: 00500000 00020000 &quot;rootfs1&quot;<br />mtd3: 00140000 00020000 &quot;kernel2&quot;<br />mtd4: 00500000 00020000 &quot;rootfs2&quot;<br />mtd5: 00100000 00020000 &quot;OSMOconfig&quot;<br />mtd6: 00001000 00020000 &quot;RedBoot config&quot;<br />mtd7: 00020000 00020000 &quot;FIS directory&quot;<br />root@OpenWrt:/# </p><p>When trying to unlock RedBoot config, it throws the fowlloing error.</p><p>root@OpenWrt:/etc# mtd unlock mtd6<br />Could not open mtd device: mtd6<br />Could not open mtd device: mtd6<br />root@OpenWrt:/#</p><p>Whereas, unlocking other parition like mtd5 is ok.<br />root@OpenWrt:~# mtd unlock mtd5<br />Unlocking mtd5 ...<br />root@OpenWrt:~#</p><p>Does anybody have an idea where the problem could be?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p73232">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						10 Sep 2008, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Just a wild guess. Check that there are device files for mtd6 and 7 in /dev.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p73255">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sara</div>
					<div class="post-datetime">
						11 Sep 2008, 11:25					</div>
				</div>
				<div class="post-content content">
					<p>Wodin,</p><p>Thanks for the tips.&nbsp; The device files are there in /dev for mtd6 and mtd7.</p><p>I have fixed the problem by disabling the Force Read-only for Redboot system images under <br />MTD support in the kernel_menuconfig. Now, I can able to unclock the partitions mtd6 and mtd7.</p><p>Now there is another problem . I am getting Write error image.</p><p>root@OpenWrt:/# mtd write /tmp/redbootconfig &quot;RedBoot config&quot;<br />Unlocking RedBoot config ...<br />Writing from /tmp/redbootconfig to RedBoot config ...&nbsp; [w]Error writing image.<br />root@OpenWrt:/#</p><p>But this works well using stable kamikaze_7.09. Whereas it doesn&#039;t using latest kamikaze-trunk.</p><p>any idea ?</p>											<p class="post-edited">(Last edited by <strong>sara</strong> on 11 Sep 2008, 15:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141581">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">DSPONFPGA</div>
					<div class="post-datetime">
						17 Aug 2011, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>How can I create my own flash partitons in OpenWRT?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>