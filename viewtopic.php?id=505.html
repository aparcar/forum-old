<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT on WRT54GS ( Experiencing problems with IPv6)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p2396">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						3 Oct 2004, 15:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi. I am a new user on this forum, I was browsing in Internet and looking for information if any companies were planning on creating a switch/hub that would have support for IPv6 and surprisingly I found out that some people had tweaked their LinkSYS WRT54(gs)&#039;s to support IPv6 by installing linux to those devices, found also other tweaks like serial ports in same devices, well I am not in to that so much, since computer I mainly use is a laptop that doesn&#039;t even have a serial port.. Interesting tweak anyway.. So, I immediately checked out that my funding was on very low, but if I&#039;d order it right a way, it would have been mailed to me on the same day that my paycheck would arrive, so I ordered it, while working and waiting for it&#039;s arrival I readed more stuff about the process so I&#039;d be more ready for it.</p><p>Okay, that was the intro.. Now, I&#039;d like to get some information, since I wouldn&#039;t love to go though de-bricking, so here are my questions about this..</p><p>1) Is there risks that installing openwrt while having specific firmware would brick my device more easier? Should I install another firmware to it before starting this (meaning maybe better to install openwrt with older firmware?)</p><p>2) Strange.. On Linksys&#039;s website.. Newest firmware seems to be 2.07.1 but my Linksys is saying that it would be running currently on 2.09.1 (Jul. 3, 2004)</p><p>3) In openwrt userguide it sayes that if my firmware has upgrade possibility with using webpage I could use that instead of using ftp connection during bootwait.. Which would be better idea? Using that or using ftp during boot_wait? Ofcourse it would be easier to use webpage upgrade but I&#039;m ready to use even harder way if it lowers the possibility to brick my device.</p><p>4) Manual is saying:<br />Disconnect the power from the router, open tftp and connect to 192.168.1.1, switch to binary mode and start sending the firmware while the router is unplugged. Immediately after the tftp client starts sending, plug in the router. Note that unplugging is just an easy way to reboot the router, reboot any way you like just be sure to have tftp sending when it boots up again.</p><p>So if I disconnect power from my linksys.. (by taking power-cord off from the wall) how can I connect to 192.168.1.1 as it&#039;s powered down? Or does this mean that I should take off the power, put it back in and immediately connect to it?</p><p>5) Anything else that you&#039;d like to tell to this newbie? I am familiar with linux and BSD&#039;s (mostly netbsd) so that shouldn&#039;t be so big problem, I just would love to get this right at once..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2397">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Jannes</div>
					<div class="post-datetime">
						3 Oct 2004, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>Some answers in no particular order:<br /></p><div class="quotebox"><blockquote><p>So if I disconnect power from my linksys.. (by taking power-cord off from the wall) how can I connect to 192.168.1.1 as it&#039;s powered down? Or does this mean that I should take off the power, put it back in and immediately connect to it?</p></blockquote></div><p>Manual is a little bit ambiguous there, but yes, you should do exactly as it says: power off, type the TFTP commands (AND connect!), THEN power on. </p><p>TFTP of course can&#039;t really connect when the power is off, but it will just keep trying until you power on.</p><p>Also note that the manual says you should use the ping-hack to enable boot_wait ! Make sure you do this before upgrading (through TFTP or webinterface). Having practiced the TFTP method is a good thing, just to know the drill. Other than that upgrading through the webinterface works well too.</p><p>GL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2398">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						3 Oct 2004, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanx for tips.. First I tryied to compile it on one of my linux boxes.. Unfortunately I seemed that I ran out of disk space (it took much more than 2 linux kernel source trees&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> ) and it was really slow on a pentium 75mhz +24mb ram.. So I downloaded a pre-compiled snapshot.. Then I tryied to install with tftp.. Finally I almost succeeded as it no longer said invalid password.. But instead I timed out&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; Next phase was to take a risk.. I opened web interface, downloaded openwrt-gs binary to my windows machine and installed from net interface.. First I was scared.. It saied that it&#039;s complete.. I tryied to telnet to it and blam!!! Success.. First I typed help and tryied ls.. it worked.. next command was reboot so I&#039;d see if it would work even after a reboot.. And it did&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> Thanx.. This is great.. Next I need to find another editor than vim as I never got familiar with it <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> Maybe need to check if there&#039;s nano or something similar in 3rd party list.. But thanx! This is really cool, a linux router&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> (And doesn&#039;t take space as much as my earlier linux router which was blown by my gf who spilled water on it&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2418">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						4 Oct 2004, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Okay.. Now I have been getting myself comfortable with openwrt.. and have encountered some problems..</p><p>The toughest challenge is getting IPv6..<br />The damned thing doesn&#039;t work&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><p>My experiences with ipv6 earlier have been with using tspc of freenet6.. Well, I installed my openwrt as a CVS snapshot.. ( 03.10.2004 ) And I noticed it didn&#039;t have ipv6 support compiled inside, so I installed modules and all the ipv6 stuff told in ipv6 howto. Then I installed tspc package. I had to edit it a little as I must use broker.freenet6.net instead of tsps*.freenet6.net as the service has changed in there..</p><p>After making bunch of changes I almost got it working.. expect now I get errors when it tryies to make changes to interface with ifconfig..</p><p>At default it uses sit1, which didn&#039;t seem to exist <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> So I tryied<br />ifconfig create sit1</p><p>But busybox doesn&#039;t seem to support this as there&#039;s no device sit1 <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br />I changed settings again so instead of sit1 I used sit0.. And I still got some errors, as it uses command:<br />ifconfig sitX tunnel ::ipv4</p><p>I thought it was a bug, so I removed :: from the corresponding line and thought that I&#039;d be more near to solution.. No, I still wasn&#039;t able to make it <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /><br />My ISP doesn&#039;t offer IPv6 so I need to use tunnel broker to provide it, and using freenet6 is no more a requirement, as it doesn&#039;t seem to be any easier that using other techniques as it ain&#039;t so easy on openwrt, so if anyone is able to give me a good quick howto on getting ipv6 connectivity.. I&#039;d be more than glad..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2420">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						5 Oct 2004, 02:07					</div>
				</div>
				<div class="post-content content">
					<p>you need kmod-ipv6 and iproute2 package. There is a wiki telling you how to do it for 6to4. Freenet6 is similar. you need to find the tspc package.</p><p>However, ifconfig has some problem. You have to use &quot;ip&quot; instead. But the linux.sh used by tspc expect &quot;ip&quot; to be in a different place than what is in openwrt. Change the script and tspc should work perfectly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2436">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 18:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>you need kmod-ipv6 and iproute2 package. There is a wiki telling you how to do it for 6to4. Freenet6 is similar. you need to find the tspc package.</p><p>However, ifconfig has some problem. You have to use &quot;ip&quot; instead. But the linux.sh used by tspc expect &quot;ip&quot; to be in a different place than what is in openwrt. Change the script and tspc should work perfectly.</p></blockquote></div><p>Thanks for tips. Just got off from my job and I&#039;ll try to edit linux.sh to use ip instead of ifconfig.. </p><p>I already have installed kmod-ipv6 and iproute2.. ip(2) is part of iproute2 afaik.. I was wondering if I should use something else than freenet6 as last night when I tryied to install it, I got many times errors that freenet6&#039;s server doesn&#039;t respond <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> But trying now again with tspc.. Maybe changing to other provider later on..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2437">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>I corrected path of ip to /usr/sbin/ip (seems to be there) and switched sit0 back to sit1 as it was as default and executed tspc..</p><p>Now I get different error:<br />Error while executing /usr/sbin/ip<br />&nbsp; &nbsp;Command: /usr/sbin/ip tunnel add sit1 mode sit ttl 64 remote 206.123.31.116</p><p>Btw.. Go to address <a href="http://broker.freenet6.net">http://broker.freenet6.net</a><br />Does the page look familiar?&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>EDIT: Fixed! Forgot to &quot;insmod ipv6&quot; after rebooting..<br />------</p><p>Now I have different problem again..<br />Error while executing /sbin/radvd<br />&nbsp; &nbsp;Command: /sbin/radvd -C /etc/radvd.conf</p><p>(Changed config file to /etc/radvd.conf in linux.sh)</p><p>If I execute /sbin/radvd -C /etc/radvd.conf I get no errors.. Log file doesn&#039;t explain this also..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2438">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>radvd doesn&#039;t seem to daemonize.. but it doesn&#039;t also report any errors.. hmm..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2439">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						5 Oct 2004, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>which version of tspc you used ? I like the 1.0 better than 2.1, less cumbersome. Though both worked after some tweaking here and there. just check where it puts the radvd.conf file and you can launch it manually.</p><p>You can tell radvd to output to stderr instead of syslog. Alternatively, try syslogd -R&nbsp; and setup syslogd on a remote host to receive the error and see what is wrong.</p><p>I have tried both freenet6 and 6to4 but both have problem accessing certain ipv6 sites making me think that this ipv6 is still not quite functional and didn&#039;t bother to go further, though both setup did work, just routing at the remote side that forced me to give up. I could see the dancing turtle at kame.org in both case.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2440">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>I have 1.0.1 (only version that I was able to find for openwrt)</p><p>Propably radvd -m must be used to make it report to stderr.. I don&#039;t know correct parameter so I tryied &quot;radvd -C /etc/radvd.conf -m stderr&quot; after this it outputted: <br />[date] radvd: version 0.7.2 started<br />still didn&#039;t daemonize..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2441">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>@OpenWrt:/etc/tspc# radvd -C /etc/radvd.conf -d 4 -m stderr<br />[Jan 01 01:00:51] radvd: version 0.7.2 started<br />[Jan 01 01:00:51] radvd: Insecure file permissions, but continuing anyway<br />[Jan 01 01:00:51] radvd: inet_pton returned 1<br />[Jan 01 01:00:51] radvd: hardware type for br0 is 1<br />[Jan 01 01:00:51] radvd: link layer token length for br0 is 48<br />[Jan 01 01:00:51] radvd: prefix length for br0 is 64<br />[Jan 01 01:00:51] radvd: interface definition for br0 is ok<br />[Jan 01 01:00:51] radvd: sending RA on br0<br />[Jan 01 01:00:51] radvd: setting timer: 600.00 secs<br />[Jan 01 01:00:51] radvd: calling alarm: 599 secs, 999923 usecs<br />[Jan 01 01:00:51] radvd: recvmsg len=56<br />[Jan 01 01:00:51] radvd: if_index 4<br />[Jan 01 01:00:51] radvd: found Interface: br0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2445">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						5 Oct 2004, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>I trashed the idea with tspc and started to set up a tun6to4.. Well, after few try&#039;es.. I was able to set it up without errors.. Then I decided to give it a try and commanded &quot;ping6 <a href="http://www.sixxs.net">www.sixxs.net</a>&quot; and it resolved and pings started to reply. I was amazed. Finally.. Then I tryied to another address, I tryied multiple addresses, &quot;<a href="http://www.kame.net">www.kame.net</a>&quot; &quot;<a href="http://www.6bone.net">www.6bone.net</a>&quot; and many more, also tryied to few ipv6 ircnet servers.. And I had to face it.. It didn&#039;t work after all.. It seemed that I was able to connect with sixxs.net with ipv6.. But not to anywhere else <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>I am lost in ipv6 space..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2471">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						7 Oct 2004, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>I finally succeeded, now I can ping6 to ipv6 hosts, also kame.net and others than sixxs.net only, here&#039;s the script I created to setup tunnel to sixxs.</p><p>ip tunnel add sixxs mode sit local [yourIPv4] remote [POP&#039;s IPv4]<br />ip link set sixxs up<br />ip link set mtu 1280 dev sixxs<br />ip tunnel change sixxs ttl 64<br />ip -6 addr add [myIPv6]/prefix dev sixxs<br />ip -6 ro add default via [POP&#039;s IPv6] dev sixxs<br />ip -6 ro add 2000://3 via [POP&#039;s IPv6] dev sixxs<br />ping6 -c 3 [myIPv6]<br />ping6 -c 2 [POP&#039;s IPv6]</p><p>Next.. Native IPv6 router could pass ipv6 to client computers <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2569">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						16 Oct 2004, 08:57					</div>
				</div>
				<div class="post-content content">
					<p>damndamndamn.. Requested sixxs for a subnet but as I am not so familiar with ipv6.. Couldn&#039;t get it work.. Someone to help..?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2577">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						16 Oct 2004, 19:57					</div>
				</div>
				<div class="post-content content">
					<p>Okay. It&#039;s working now. Cool.</p><p>Posting later on some examples here so ppl could easily get ipv6 without requiring to study this much.. well.. study anyway.. it won&#039;t make u worse..</p><p>Compiling openwrt now, installed a snapshot earlier..<br />I was wondering.. Is there possibility to make changes to kernel? As I&#039;d love to have ipv6 compiled into kernel natively, and not as modules.. Checked out main Makefile and atleast it wasn&#039;t there to be configured..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2580">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">zibadun</div>
					<div class="post-datetime">
						16 Oct 2004, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t tried with ipv6 but you can probably do CONFIG_IPV6=y in linux.conf and recompile.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2588">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">jake1981</div>
					<div class="post-datetime">
						16 Oct 2004, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>CONFIG_IPv6 is set to y as default.<br />But it compiles it as module, and I&#039;d like native better..</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>