<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WA801ND v2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p204814">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">TasksOfOhm</div>
					<div class="post-datetime">
						17 Jun 2013, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>Based on my experience with porting version 12.09 of OpenWRT to the TP-Link TL-WA801ND v2 model I ported the current development version as well. The following patch adds support for the v2 model of that device to the development branch:</p><p>diff --git a/target/linux/ar71xx/base-files/etc/diag.sh b/target/linux/ar71xx/base-files/etc/diag.sh<br />index 7b6421b..b1f8fac 100755<br />--- a/target/linux/ar71xx/base-files/etc/diag.sh<br />+++ b/target/linux/ar71xx/base-files/etc/diag.sh<br />@@ -119,6 +119,7 @@ get_status_led() {<br /> &nbsp; &nbsp; tl-mr3220-v2 | \<br /> &nbsp; &nbsp; tl-mr3420 | \<br /> &nbsp; &nbsp; tl-mr3420-v2 | \<br />+&nbsp; &nbsp; tl-wa801nd-v2 | \<br /> &nbsp; &nbsp; tl-wa901nd | \<br /> &nbsp; &nbsp; tl-wa901nd-v2 | \<br /> &nbsp; &nbsp; tl-wdr3500 | \<br />diff --git a/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds b/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds<br />index c9bcedd..c19e05d 100755<br />--- a/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds<br />+++ b/target/linux/ar71xx/base-files/etc/uci-defaults/01_leds<br />@@ -141,6 +141,11 @@ tl-wa901nd)<br /> &nbsp; &nbsp; ucidef_set_led_netdev &quot;lan&quot; &quot;LAN&quot; &quot;tp-link:green:lan&quot; &quot;eth0&quot;<br /> &nbsp; &nbsp; ;;</p><p>+tl-wa801nd-v2)<br />+&nbsp; &nbsp; ucidef_set_led_wlan &quot;wlan&quot; &quot;WLAN&quot; &quot;tp-link:green:wlan&quot; &quot;phy0tpt&quot;<br />+&nbsp; &nbsp; ucidef_set_led_netdev &quot;lan&quot; &quot;LAN&quot; &quot;tp-link:green:lan&quot;&nbsp; &quot;eth0&quot;<br />+&nbsp; &nbsp; ;;<br />+<br /> tl-wa901nd-v2)<br /> &nbsp; &nbsp; ucidef_set_led_wlan &quot;wlan&quot; &quot;WLAN&quot; &quot;tp-link:green:wlan&quot; &quot;phy0tpt&quot;<br /> &nbsp; &nbsp; ;;<br />diff --git a/target/linux/ar71xx/base-files/etc/uci-defaults/02_network b/target/linux/ar71xx/base-files/etc/uci-defaults/02_network<br />index 86dceab..15c9f40 100755<br />--- a/target/linux/ar71xx/base-files/etc/uci-defaults/02_network<br />+++ b/target/linux/ar71xx/base-files/etc/uci-defaults/02_network<br />@@ -206,6 +206,7 @@ rb-411 |\<br /> tl-mr11u |\<br /> tl-mr3020 |\<br /> tl-mr3040 |\<br />+tl-wa801nd-v2 |\<br /> tl-wa901nd |\<br /> tl-wa901nd-v2 |\<br /> tl-wr703n |\<br />diff --git a/target/linux/ar71xx/base-files/lib/ar71xx.sh b/target/linux/ar71xx/base-files/lib/ar71xx.sh<br />index 05e1093..8a2c347 100755<br />--- a/target/linux/ar71xx/base-files/lib/ar71xx.sh<br />+++ b/target/linux/ar71xx/base-files/lib/ar71xx.sh<br />@@ -112,6 +112,9 @@ tplink_board_detect() {<br /> &nbsp; &nbsp; &quot;084200&quot;*)<br /> &nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR842N/ND&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;080100&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WA801N/ND&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br /> &nbsp; &nbsp; &quot;090100&quot;*)<br /> &nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WA901N/ND&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />@@ -414,6 +417,9 @@ ar71xx_board_detect() {<br /> &nbsp; &nbsp; *TL-WA7510N)<br /> &nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wa7510n&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WA801N/ND v2&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wa801nd-v2&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br /> &nbsp; &nbsp; *TL-WA901ND)<br /> &nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wa901nd&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />diff --git a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh<br />index 26b855f..05d3c50 100755<br />--- a/target/linux/ar71xx/base-files/lib/upgrade/platform.sh<br />+++ b/target/linux/ar71xx/base-files/lib/upgrade/platform.sh<br />@@ -164,6 +164,7 @@ platform_check_image() {<br /> &nbsp; &nbsp; tl-mr3420 | \<br /> &nbsp; &nbsp; tl-mr3420-v2 | \<br /> &nbsp; &nbsp; tl-wa7510n | \<br />+&nbsp; &nbsp; tl-wa801nd-v2 | \<br /> &nbsp; &nbsp; tl-wa901nd | \<br /> &nbsp; &nbsp; tl-wa901nd-v2 | \<br /> &nbsp; &nbsp; tl-wdr3500 | \<br />diff --git a/target/linux/ar71xx/config-3.8 b/target/linux/ar71xx/config-3.8<br />index 8a8d6a6..61bcf4e 100644<br />--- a/target/linux/ar71xx/config-3.8<br />+++ b/target/linux/ar71xx/config-3.8<br />@@ -65,6 +65,7 @@ CONFIG_ATH79_MACH_TEW_712BR=y<br /> CONFIG_ATH79_MACH_TL_MR11U=y<br /> CONFIG_ATH79_MACH_TL_MR3020=y<br /> CONFIG_ATH79_MACH_TL_MR3X20=y<br />+CONFIG_ATH79_MACH_TL_WA801ND_V2=y<br /> CONFIG_ATH79_MACH_TL_WA901ND=y<br /> CONFIG_ATH79_MACH_TL_WA901ND_V2=y<br /> CONFIG_ATH79_MACH_TL_WDR3500=y<br />diff --git a/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wa801nd-v2.c b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wa801nd-v2.c<br />index e69de29..7444b26 100644<br />--- a/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wa801nd-v2.c<br />+++ b/target/linux/ar71xx/files/arch/mips/ath79/mach-tl-wa801nd-v2.c<br />@@ -0,0 +1,115 @@<br />+/*<br />+ *&nbsp; TP-LINK TL-WA801N/ND v2 board support<br />+ *<br />+ *&nbsp; Copyright (C) 2012 Gabor Juhos &lt;juhosg@openwrt.org&gt;<br />+ *<br />+ *&nbsp; This program is free software; you can redistribute it and/or modify it<br />+ *&nbsp; under the terms of the GNU General Public License version 2 as published<br />+ *&nbsp; by the Free Software Foundation.<br />+ */<br />+<br />+#include &lt;linux/platform_device.h&gt;<br />+<br />+#include &lt;asm/mach-ath79/ath79.h&gt;<br />+#include &lt;asm/mach-ath79/ar71xx_regs.h&gt;<br />+<br />+#include &quot;common.h&quot;<br />+#include &quot;dev-eth.h&quot;<br />+#include &quot;dev-gpio-buttons.h&quot;<br />+#include &quot;dev-leds-gpio.h&quot;<br />+#include &quot;dev-m25p80.h&quot;<br />+#include &quot;dev-wmac.h&quot;<br />+#include &quot;machtypes.h&quot;<br />+<br />+#define TL_WA801ND_V2_GPIO_LED_WLAN&nbsp; &nbsp; 13<br />+#define TL_WA801ND_V2_GPIO_LED_QSS&nbsp; &nbsp; 15<br />+#define TL_WA801ND_V2_GPIO_LED_LAN&nbsp; &nbsp; 18<br />+#define TL_WA801ND_V2_GPIO_LED_SYSTEM&nbsp; &nbsp; 14<br />+<br />+#define TL_WA801ND_V2_GPIO_BTN_RESET&nbsp; &nbsp; 17<br />+#define TL_WA801ND_V2_GPIO_SW_RFKILL&nbsp; &nbsp; 16<br />+<br />+#define TL_WA801ND_V2_KEYS_POLL_INTERVAL&nbsp; &nbsp; 20&nbsp; &nbsp; /* msecs */<br />+#define TL_WA801ND_V2_KEYS_DEBOUNCE_INTERVAL (3 * TL_WA801ND_V2_KEYS_POLL_INTERVAL)<br />+<br />+static const char *tl_wa801nd_v2_part_probes[] = {<br />+&nbsp; &nbsp; &quot;tp-link&quot;,<br />+&nbsp; &nbsp; NULL,<br />+};<br />+<br />+static struct flash_platform_data tl_wa801nd_v2_flash_data = {<br />+&nbsp; &nbsp; .part_probes&nbsp; &nbsp; = tl_wa801nd_v2_part_probes,<br />+};<br />+<br />+static struct gpio_led tl_wa801nd_v2_leds_gpio[] __initdata = {<br />+&nbsp; &nbsp; {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:qss&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_LED_QSS,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:system&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_LED_SYSTEM,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:lan&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_LED_LAN,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:wlan&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_LED_WLAN,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; },<br />+};<br />+<br />+static struct gpio_keys_button tl_wa801nd_v2_gpio_keys[] __initdata = {<br />+&nbsp; &nbsp; {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .desc&nbsp; &nbsp; &nbsp; &nbsp; = &quot;Reset button&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .type&nbsp; &nbsp; &nbsp; &nbsp; = EV_KEY,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; = KEY_RESTART,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .debounce_interval = TL_WA801ND_V2_KEYS_DEBOUNCE_INTERVAL,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_BTN_RESET,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .desc&nbsp; &nbsp; &nbsp; &nbsp; = &quot;RFKILL switch&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .type&nbsp; &nbsp; &nbsp; &nbsp; = EV_SW,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; = KEY_RFKILL,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .debounce_interval = TL_WA801ND_V2_KEYS_DEBOUNCE_INTERVAL,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WA801ND_V2_GPIO_SW_RFKILL,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 0,<br />+&nbsp; &nbsp; }<br />+};<br />+<br />+static void __init tl_wa801nd_v2_setup(void)<br />+{<br />+&nbsp; &nbsp; u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);<br />+&nbsp; &nbsp; u8 *ee = (u8 *) KSEG1ADDR(0x1fff1000);<br />+<br />+&nbsp; &nbsp; ath79_register_leds_gpio(-1, ARRAY_SIZE(tl_wa801nd_v2_leds_gpio),<br />+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; tl_wa801nd_v2_leds_gpio);<br />+<br />+&nbsp; &nbsp; ath79_register_gpio_keys_polled(1, TL_WA801ND_V2_KEYS_POLL_INTERVAL,<br />+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ARRAY_SIZE(tl_wa801nd_v2_gpio_keys),<br />+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tl_wa801nd_v2_gpio_keys);<br />+<br />+&nbsp; &nbsp; ath79_register_m25p80(&amp;tl_wa801nd_v2_flash_data);<br />+<br />+&nbsp; &nbsp; ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_PHY_SWAP);<br />+<br />+&nbsp; &nbsp; ath79_register_mdio(1, 0x0);<br />+<br />+&nbsp; &nbsp; ath79_init_mac(ath79_eth0_data.mac_addr, mac, -1);<br />+&nbsp; &nbsp; ath79_init_mac(ath79_eth1_data.mac_addr, mac, 0);<br />+<br />+&nbsp; &nbsp; /* GMAC0 is connected to the PHY0 of the internal switch */<br />+&nbsp; &nbsp; ath79_switch_data.phy4_mii_en = 1;<br />+&nbsp; &nbsp; ath79_switch_data.phy_poll_mask = BIT(0);<br />+&nbsp; &nbsp; ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;<br />+&nbsp; &nbsp; ath79_eth0_data.phy_mask = BIT(0);<br />+&nbsp; &nbsp; ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio1_device.dev;<br />+&nbsp; &nbsp; ath79_register_eth(0);<br />+<br />+&nbsp; &nbsp; ath79_register_wmac(ee, mac);<br />+}<br />+<br />+MIPS_MACHINE(ATH79_MACH_TL_WA801ND_V2, &quot;TL-WA801ND-v2&quot;, &quot;TP-LINK TL-WA801N/ND v2&quot;,<br />+&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; tl_wa801nd_v2_setup);<br />diff --git a/target/linux/ar71xx/generic/profiles/tp-link.mk b/target/linux/ar71xx/generic/profiles/tp-link.mk<br />index 8c16df6..d20feb7 100644<br />--- a/target/linux/ar71xx/generic/profiles/tp-link.mk<br />+++ b/target/linux/ar71xx/generic/profiles/tp-link.mk<br />@@ -136,6 +136,17 @@ endef<br /> $(eval $(call Profile,TLWA830))</p> <br /><p>+define Profile/TLWA801<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WA801N/ND<br />+&nbsp; &nbsp; PACKAGES:=<br />+endef<br />+<br />+define Profile/TLWA801/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WA801N/ND.<br />+endef<br />+$(eval $(call Profile,TLWA801))<br />+<br />+<br /> define Profile/TLWA901<br /> &nbsp; &nbsp; NAME:=TP-LINK TL-WA901N/ND<br /> &nbsp; &nbsp; PACKAGES:=<br />diff --git a/target/linux/ar71xx/image/Makefile b/target/linux/ar71xx/image/Makefile<br />index 24c0a00..3acc28e 100644<br />--- a/target/linux/ar71xx/image/Makefile<br />+++ b/target/linux/ar71xx/image/Makefile<br />@@ -945,6 +945,7 @@ $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR720NV3,tl-wr720n-v3,TL-<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR740NV4,tl-wr740n-v4,TL-WR741ND-v4,ttyATH0,115200,0x07400004,1,4Mlzma))<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR741NV4,tl-wr741nd-v4,TL-WR741ND-v4,ttyATH0,115200,0x07410004,1,4Mlzma))<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR743NV2,tl-wr743nd-v2,TL-WR741ND-v4,ttyATH0,115200,0x07430002,1,4Mlzma))<br />+$(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWA801NV2,tl-wa801nd-v2,TL-WA801ND-v2,ttyS0,115200,0x08010002,1,4Mlzma))<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR841NV8,tl-wr841n-v8,TL-WR841N-v8,ttyS0,115200,0x08410008,1,4Mlzma))<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR1041,tl-wr1041n-v2,TL-WR1041N-v2,ttyS0,115200,0x10410002,1,4Mlzma))<br /> $(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR2543,tl-wr2543-v1,TL-WR2543N,ttyS0,115200,0x25430001,1,8Mlzma,-v 3.13.99))<br />diff --git a/target/linux/ar71xx/patches-3.8/660-MIPS-ath79-TL-WA801ND-v2-support.patch b/target/linux/ar71xx/patches-3.8/660-MIPS-ath79-TL-WA801ND-v2-support.patch<br />index e69de29..37c7771 100644<br />--- a/target/linux/ar71xx/patches-3.8/660-MIPS-ath79-TL-WA801ND-v2-support.patch<br />+++ b/target/linux/ar71xx/patches-3.8/660-MIPS-ath79-TL-WA801ND-v2-support.patch<br />@@ -0,0 +1,38 @@<br />+--- a/arch/mips/ath79/machtypes.h<br />++++ b/arch/mips/ath79/machtypes.h<br />+@@ -77,6 +77,7 @@<br />+ &nbsp; &nbsp; ATH79_MACH_TL_MR3220,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-MR3220 */<br />+ &nbsp; &nbsp; ATH79_MACH_TL_MR3420,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-MR3420 */<br />+ &nbsp; &nbsp; ATH79_MACH_TL_WA7510N_V1,&nbsp; &nbsp; /* TP-LINK TL-WA7510N v1*/<br />++&nbsp; &nbsp; ATH79_MACH_TL_WA801ND_V2,&nbsp; &nbsp; /* TP-LINK TL-WA801ND v2 */<br />+ &nbsp; &nbsp; ATH79_MACH_TL_WA901ND,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WA901ND */<br />+ &nbsp; &nbsp; ATH79_MACH_TL_WA901ND_V2,&nbsp; &nbsp; /* TP-LINK TL-WA901ND v2 */<br />+ &nbsp; &nbsp; ATH79_MACH_TL_WDR4300,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WDR4300 */<br />+--- a/arch/mips/ath79/Kconfig<br />++++ b/arch/mips/ath79/Kconfig<br />+@@ -461,6 +461,15 @@<br />+ &nbsp; &nbsp; select ATH79_DEV_M25P80<br />+ &nbsp; &nbsp; select ATH79_DEV_USB<br />+ <br />++config ATH79_MACH_TL_WA801ND_V2<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WA801ND v2 support&quot;<br />++&nbsp; &nbsp; select SOC_AR934X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />+ config ATH79_MACH_TL_WA901ND<br />+ &nbsp; &nbsp; bool &quot;TP-LINK TL-WA901ND/TL-WA7510N support&quot;<br />+ &nbsp; &nbsp; select SOC_AR724X<br />+--- a/arch/mips/ath79/Makefile<br />++++ b/arch/mips/ath79/Makefile<br />+@@ -77,6 +77,7 @@<br />+ obj-$(CONFIG_ATH79_MACH_TL_MR11U)&nbsp; &nbsp; += mach-tl-mr11u.o<br />+ obj-$(CONFIG_ATH79_MACH_TL_MR3020)&nbsp; &nbsp; += mach-tl-mr3020.o<br />+ obj-$(CONFIG_ATH79_MACH_TL_MR3X20)&nbsp; &nbsp; += mach-tl-mr3x20.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WA801ND_V2)&nbsp; &nbsp; += mach-tl-wa801nd-v2.o<br />+ obj-$(CONFIG_ATH79_MACH_TL_WA901ND)&nbsp; &nbsp; += mach-tl-wa901nd.o<br />+ obj-$(CONFIG_ATH79_MACH_TL_WA901ND_V2)&nbsp; &nbsp; += mach-tl-wa901nd-v2.o<br />+ obj-$(CONFIG_ATH79_MACH_TL_WDR4300)&nbsp; &nbsp; &nbsp;+= mach-tl-wdr4300.o<br />diff --git a/tools/firmware-utils/src/mktplinkfw.c b/tools/firmware-utils/src/mktplinkfw.c<br />index 74a55fd..8f06243 100644<br />--- a/tools/firmware-utils/src/mktplinkfw.c<br />+++ b/tools/firmware-utils/src/mktplinkfw.c<br />@@ -38,6 +38,7 @@<br /> #define HWID_TL_WA701N_V1&nbsp; &nbsp; 0x07010001<br /> #define HWID_TL_WA7510N_V1&nbsp; &nbsp; 0x75100001<br /> #define HWID_TL_WA801ND_V1&nbsp; &nbsp; 0x08010001<br />+#define HWID_TL_WA801ND_V2&nbsp; &nbsp; 0x08010002<br /> #define HWID_TL_WA830RE_V1&nbsp; &nbsp; 0x08300010<br /> #define HWID_TL_WA830RE_V2&nbsp; &nbsp; 0x08300002<br /> #define HWID_TL_WA901ND_V1&nbsp; &nbsp; 0x09010001<br />@@ -243,6 +244,11 @@ static struct board_info boards[] = {<br /> &nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br /> &nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4M&quot;,<br /> &nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;TL-WA801NDv2&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WA801ND_V2,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br /> &nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WA901NDv1&quot;,<br /> &nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WA901ND_V1,<br /> &nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>