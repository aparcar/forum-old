<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Developing Support for TPLINK WDR4900</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Oct 2014 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 22 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=24.html">24</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p232546">
				<div class="post-metadata">
					<div class="post-num">Post #526</div>
					<div class="post-author">Jhime</div>
					<div class="post-datetime">
						6 May 2014, 10:02					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m going to buy a proper TTL cable today, wasn&#039;t hard to find one once I figured out they&#039;re advertised as Arduino cables. According to another post (<a href="https://forum.openwrt.org/viewtopic.php?id=46371">https://forum.openwrt.org/viewtopic.php?id=46371</a>) those values should be at 0x9F020040 and 0x9F020044... I&#039;ll probably try to find out what&#039;s in those locations on my device. Never really used u-boot before so if someone want to give me pointers feel free to.</p><p>I guess I don&#039;t need them to restore a new firmware but it&#039;s more for documentation/debugging reasons.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232562">
				<div class="post-metadata">
					<div class="post-num">Post #527</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						6 May 2014, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>ryts &amp; makro,</p><p>now I have the Web-UI - thank you both very much!</p><p>Both networks work well. The only problem I have with this router (also with the stock firmware from TP-Link) is the range-connectivity of the wireless networks (5,240GHz &amp; 2,462GHz - they are also called like this to seperate them well).</p><p>I get the networks in the 1st, 2nd &amp; 3rd floor (the router is on the ground-floor) but I get disconnected on every floor. I have also typed in 50m as the distance to farthest network member. As a consequence of this, I get mostly 100% signal strength when I&#039;m connected on the ground-floor. But when I just go only one floor upstairs, I can connect to one of the networks (full wifi bar on the macbook) , but I get disconnected from both and I&#039;m not able to transfer data from the internet. Near the router on the ground-floor, I get via speed-test 100mbit on the internet (what I actually got). </p><p>I bought the wdr4900 because i thought it would be better than my FRITZ!Box 7270 (<a href="http://www.avm.de/de/Produkte/FRITZBox/FRITZ_Box_Fon_WLAN_7270/">http://www.avm.de/de/Produkte/FRITZBox/ … WLAN_7270/</a>) but it isn&#039;t and I&#039;m wondering. </p><p>What about your connectivity? I got wifi-access on the 3rd floor with the FRITZ!Box on my mac but I&#039;m not able to get connectivity via wdr4900 in the 1st floor. <br/>What&#039;s wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232612">
				<div class="post-metadata">
					<div class="post-num">Post #528</div>
					<div class="post-author">Jhime</div>
					<div class="post-datetime">
						6 May 2014, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Feel a bit like a fool, I&#039;d forgotten to disable hardware flow control, which was probably why I couldn&#039;t type yesterday.</p><p>But now I&#039;ve successfully installed the openwrt image from last page, using the console command in the wiki. Very happy. Thanks for the help both here and whoever wrote the wiki.</p><p>I prefer to build a custom image though, anyone know what the last good git revision is for a stable image?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232614">
				<div class="post-metadata">
					<div class="post-num">Post #529</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						6 May 2014, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>lastest should work ok.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232619">
				<div class="post-metadata">
					<div class="post-num">Post #530</div>
					<div class="post-author">Jhime</div>
					<div class="post-datetime">
						7 May 2014, 00:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Ah, <a href="https://forum.openwrt.org/viewtopic.php?pid=232494#p232494">https://forum.openwrt.org/viewtopic.php … 94#p232494</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232957">
				<div class="post-metadata">
					<div class="post-num">Post #531</div>
					<div class="post-author">lander1</div>
					<div class="post-datetime">
						10 May 2014, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I bricked my router.<br/>First I installed ddwrt, but I didn&#039;t liked it and tried to install Openwrt, but that went all wrong.</p><p>Now i tried to recover it with the serial method.<br/><a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4900#serial">http://wiki.openwrt.org/toh/tp-link/tl-wdr4900#serial</a><br/>But than I only get this:</p><p>y½y½Ui¯HHÑÛöÖö6¶V-44©Öìl6ö{ë}ÚúÛvöÛöÖö+ûÛö¶ìÖ¶lÖÖo¯Þ/}U-ûûûûÕöÖvvíÚÔ)iÒìë6ûvû{ûöôì6êöÖÖöÖo/<br/>ÚªZöû«UûûvûÚÔ)iÒì«6ëvû{ûöôì¶Ö¶ÖVÖÖo/<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ZVë¿¿¿¿¿¿¿y_U¿¿eo<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; §¿åë¿¿¿¿¿¿¿yy{¿¿eo<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; §åë¿¿¿¿¿¿¿ww[£¿eo<br/>#9/§¿msy¿¿eo¿eW¡¿7==¿5¿¯}<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; åëg¿¿¿¿w¥9=9/5¿){¿5#=;&#039;57åë¿¿¿¿¿¿¿m¥9=9/5¿){¿5#=;&#039;57åë{!=¿_[w{¿åëY_måëw[}e¿¿¿e-{åëÖ³±ûûûÛV6öKíý«êÚ:ªº*ëU-#1¿753=&#039;¿5#-#åëåë_åë¿¿£¿¿¿¿¿¥¿9¿¥¿c5!9!#ë_ym5¿{¿¥¿åëm#¿¿¿¿5&#039;åëa¿¿¿5&#039;åëu¿¿¿5&#039;åëc5¿¿¿-#--=&#039;-¿¥¿1¿335<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;=-!#¿3!}/5}[¡}[åëMU«W¯VoOEQ¤«ôtêºTúÚTÔÚTZökÊÕªt)ªÑt)©º<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5jÚTÔÚTú+öûÖ+ë}!;!!-#1¿-#¿5#¿75-95åëVÕëÊôúÛTêºúËTÊªÊ4ªt*ëVÕëÊôúÛTêºúËTÊªÊ4ªt*ëQ¿m%=15¿s!¿3!;!!%¿9!%%=#7åëu[[a[¿9=#±¿15¿)5&#039;¿-%=15½åë</p><br/><br/><p>Does someone has an idea if this can be fixed?</p><p>P.S. I am using Putty for the serial connection</p>											<p class="post-edited">(Last edited by <strong>lander1</strong> on 10 May 2014, 16:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232958">
				<div class="post-metadata">
					<div class="post-num">Post #532</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						10 May 2014, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>what TTL adapter are you using? putty settings? I hope you did not connect an RS232 port..</p><p><a href="http://wiki.openwrt.org/doc/hardware/port.serial#voltage.levels">http://wiki.openwrt.org/doc/hardware/po … age.levels</a></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 10 May 2014, 16:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232972">
				<div class="post-metadata">
					<div class="post-num">Post #533</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						10 May 2014, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>@lander1</p><p>might be baudrate or connection problem ( hope not voltage level ! )</p><p>1. test the serial cable : reconnect from CPE - connect RX to TX cable - type some characters o putty - should show up on putty<br/>&nbsp; &nbsp; &nbsp;if fails - reset USB &amp; putty prog<br/>2. check if all connections are good RX-TX-Ground - make shure you to have RX -&gt; TX&nbsp; &amp; TX-&gt;RX depending on label<br/>3. check baudrate - Data 8 data 1stopbit&nbsp; noparity no flowcontrol</p><p>should get readable character on boot</p><p>regards<br/>3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232975">
				<div class="post-metadata">
					<div class="post-num">Post #534</div>
					<div class="post-author">gtdaniel</div>
					<div class="post-datetime">
						10 May 2014, 19:29					</div>
				</div>
				<div class="post-content content">
					<p>Please use Termite for serial connection!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233754">
				<div class="post-metadata">
					<div class="post-num">Post #535</div>
					<div class="post-author">borbalint</div>
					<div class="post-datetime">
						17 May 2014, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I should have my router arriving in a couple of days time ( v1.3 EU). Could you confirm that the snapshots from <a href="http://downloads.openwrt.org/snapshots/trunk/mpc85xx/">http://downloads.openwrt.org/snapshots/trunk/mpc85xx/</a> are stable? By stable I mean can I install them without bricking the device? I have read about some problems with the v1.3 EU and now I&#039;m worried I might brick it. </p><p>Cheers,</p><p>borbalint</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233756">
				<div class="post-metadata">
					<div class="post-num">Post #536</div>
					<div class="post-author">ryts</div>
					<div class="post-datetime">
						17 May 2014, 21:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>borbalint wrote:</cite><blockquote><p>I should have my router arriving in a couple of days time ( v1.3 EU). Could you confirm that the snapshots from <a href="http://downloads.openwrt.org/snapshots/trunk/mpc85xx/">http://downloads.openwrt.org/snapshots/trunk/mpc85xx/</a> are stable? By stable I mean can I install them without bricking the device? I have read about some problems with the v1.3 EU and now I&#039;m worried I might brick it.</p></blockquote></div><p>I cannot speak about the v1.3EU but please know that trunk is a moving target, with commits going in at odd times.&nbsp; Breakage can occur - not highly probable but possible. So if someone advises that a build is good, you must get it before a new build is done to replace the previous.&nbsp; If not possible, monitor the commits since the known good &#039;un to see if anything vital was changed.</p><p>I suggest you follow <a href="https://dev.openwrt.org/timeline">https://dev.openwrt.org/timeline?</a> (via the rss feed perhaps). Lets you take the pulse of wots wot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233866">
				<div class="post-metadata">
					<div class="post-num">Post #537</div>
					<div class="post-author">borbalint</div>
					<div class="post-datetime">
						19 May 2014, 13:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ryts wrote:</cite><blockquote><p>I suggest you follow <a href="https://dev.openwrt.org/timeline">https://dev.openwrt.org/timeline?</a> (via the rss feed perhaps). Lets you take the pulse of wots wot.</p></blockquote></div><p>Thanks, I&#039;ll keep a look out there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234066">
				<div class="post-metadata">
					<div class="post-num">Post #538</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						21 May 2014, 15:48					</div>
				</div>
				<div class="post-content content">
					<p>All was fine for few weeks. Yesterday the network died, so I rebooted it. When it came back all what I had installed had dissapeared (luci, etc).<br/>So, I updated to the latest trunk (r40783) , and did all again. But the wifi is dying after some minutes.<br/>Configs are set to defaults, only wifi is changed to enable and set ssid /security/key</p><p>*edit*</p><p>I see that wireless drivers are broken after r40780 and fixed in r40802<br/><a href="https://dev.openwrt.org/ticket/16545">https://dev.openwrt.org/ticket/16545</a></p><p>Today&#039;s trunk snapshot is still 40783. Compiling myself r70817...</p><p>*edit2*<br/>Working fine! For anyone who needs it, here it is.<br/>The only difference from Trunk is Luci added.<br/>RAR file, no password<br/><a href="https://dl.dropboxusercontent.com/u/23958662/openwrt/openwrt-mpc85xx-generic-tl-wdr4900-v1-squashfs-sysupgrade.rar">https://dl.dropboxusercontent.com/u/239 … pgrade.rar</a></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 21 May 2014, 17:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234212">
				<div class="post-metadata">
					<div class="post-num">Post #539</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						22 May 2014, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>Guys I need some help please. The router isn&#039;t working well (connectivity problems, I think a hardware problem). It wasn&#039;t also not working well with the original firmare and it&#039;s not with the openwrt aswell. Therefore I need to put the original firmware back on it, to send it back, but it&#039;s driving me nuts :-(</p><p>I found that link: <a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4900#reverting.to.stock.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … k.firmware</a> </p><p>But I don&#039;t know where to put in the 1st command!</p><p> 1. Download / copy with SCP or wget this firmware to the /tmp folder of the router: <a href="ftp://everbest.ftpserver.biz/Share/TP-Link/TL-WDR4900%20Firmware/wdr4900nv1_en_3_14_1_up(130304)_beta.bin">ftp://everbest.ftpserver.biz/Share/TP-L … )_beta.bin</a></p><p>2. Open a SSH session to the router, cd to /tmp<br/>Can&#039;t open a connection to host 192.168.1.1 (webUI LuCI is working) on port 23, connectionproblem</p><p>3. Execute the following command: mtd -r write wdr4900nv1_en_3_14_1_up(130304)_beta.bin firmware<br/>I would like to execute it!!!</p>											<p class="post-edited">(Last edited by <strong>CrAzYLuKe</strong> on 22 May 2014, 14:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234216">
				<div class="post-metadata">
					<div class="post-num">Post #540</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						22 May 2014, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>SSH is port 22, not 23.</p><p>Port 23 is telnet. You need to use SSH, not telnet.</p>											<p class="post-edited">(Last edited by <strong>qasdfdsaq</strong> on 22 May 2014, 15:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234219">
				<div class="post-metadata">
					<div class="post-num">Post #541</div>
					<div class="post-author">ryts</div>
					<div class="post-datetime">
						22 May 2014, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>Or download this version <a href="http://www.ofmodemsandmen.com/download/Factory/wdr4900v1.bin">http://www.ofmodemsandmen.com/download/ … 4900v1.bin</a> and flash from Luci, but do not use the &quot;keep settings&quot; tick box.</p><p>As always, at your own risk...</p><p>For the original method, if you use Windows, then there are tutorials linked below for using SCP and ssh to an OpenWRT box. SCP will get the .bin file into the /tmp folder on the wdr4900, ssh into the wdr4900 will get you the CLI (command line interface) that allows you to issue the &quot;mtd -r write ....&quot; command. </p><p><a href="http://www.ofmodemsandmen.com/winscp.html">http://www.ofmodemsandmen.com/winscp.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234231">
				<div class="post-metadata">
					<div class="post-num">Post #542</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						22 May 2014, 18:04					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks guys. Now I installed PuTTY. I&#039;m on it. I downloaded the current version.</p><p>The *.bin from ryts didn&#039;t work. Now I have following issue:</p><p>Usage: mtd [&lt;options&gt; ...] &lt;command&gt; [&lt;arguments&gt; ...] &lt;device&gt;[:&lt;device&gt;...]</p><p>The device is in the format of mtdX (eg: mtd4) or its label.<br/>mtd recognizes these commands:<br/>&nbsp; &nbsp; &nbsp; &nbsp; unlock&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; unlock the device<br/>&nbsp; &nbsp; &nbsp; &nbsp; refresh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;refresh mtd partition<br/>&nbsp; &nbsp; &nbsp; &nbsp; erase&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;erase all data on device<br/>&nbsp; &nbsp; &nbsp; &nbsp; verify &lt;imagefile&gt;|-&nbsp; &nbsp; verify &lt;imagefile&gt; (use - for stdin) to device<br/>&nbsp; &nbsp; &nbsp; &nbsp; write &lt;imagefile&gt;|-&nbsp; &nbsp; &nbsp;write &lt;imagefile&gt; (use - for stdin) to device<br/>&nbsp; &nbsp; &nbsp; &nbsp; jffs2write &lt;file&gt;&nbsp; &nbsp; &nbsp; &nbsp;append &lt;file&gt; to the jffs2 partition on the device<br/>Following options are available:<br/>&nbsp; &nbsp; &nbsp; &nbsp; -q&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; quiet mode (once: no [w] on writing,<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;twice: no status messages)<br/>&nbsp; &nbsp; &nbsp; &nbsp; -n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; write without first erasing the blocks<br/>&nbsp; &nbsp; &nbsp; &nbsp; -r&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reboot after successful command<br/>&nbsp; &nbsp; &nbsp; &nbsp; -f&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; force write without trx checks<br/>&nbsp; &nbsp; &nbsp; &nbsp; -e &lt;device&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;erase &lt;device&gt; before executing the command<br/>&nbsp; &nbsp; &nbsp; &nbsp; -d &lt;name&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;directory for jffs2write, defaults to &quot;tmp&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; -j &lt;name&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;integrate &lt;file&gt; into jffs2 data when writing an image<br/>&nbsp; &nbsp; &nbsp; &nbsp; -s &lt;number&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;skip the first n bytes when appending data to the jffs2 partiton, defaults to &quot;0&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; -p&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; write beginning at partition offset</p><p>Example: To write linux.trx to mtd4 labeled as linux and reboot afterwards<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mtd -r write linux.trx linux</p><br/><p>Many thanks in advance.<br/>Luke</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234251">
				<div class="post-metadata">
					<div class="post-num">Post #543</div>
					<div class="post-author">ryts</div>
					<div class="post-datetime">
						22 May 2014, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>What is your issue? You pasted the help output of mtd - that is not an issue. Your not understanding the output may well be an issue, and if so, please write that. Now I must guess.</p><p>Get the image to the device via scp, ssh in, and in the folder where the .bin resides issue the command (as per the wiki article you referenced) &quot;mtd -r write wdr4900nv1xxxxxx.bin firmware&quot; (the xxx bit must have the dame details as does the bin file) and wait until the device reboots.</p><p>What failed when you tried that bin from within Luci? Was there an error message that the bin was in the wrong format? I want to follow it up with the developer of that site if it does not work.</p>											<p class="post-edited">(Last edited by <strong>ryts</strong> on 23 May 2014, 21:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234255">
				<div class="post-metadata">
					<div class="post-num">Post #544</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 May 2014, 21:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ryts wrote:</cite><blockquote><p>Get the image to the device via scp, ssh in, and in the folder where the .bin resides</p></blockquote></div><p>usually you MUST use the /tmp folder!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234288">
				<div class="post-metadata">
					<div class="post-num">Post #545</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						23 May 2014, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>@ryts, <br/>&quot;Execute the following command: &quot;mtd -r write wdr4900nv1_en_3_14_1_up(130304)_beta.bin firmware&quot;<br/>Wait until the router reboots&quot;</p><p>The issue is, that the command line appears and nothing more...I&#039;m in the tmp directory! And before I have downloaded the image file, I also went to it. Also tried it by not to going there before - no difference. Nothing happens.</p><p>When I tried the image via Luci, following message occured: The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&nbsp; <br/>The checkbox with the settings was disabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234294">
				<div class="post-metadata">
					<div class="post-num">Post #546</div>
					<div class="post-author">ryts</div>
					<div class="post-datetime">
						23 May 2014, 00:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>usually you MUST use the /tmp folder!</p></blockquote></div><p>Indeed; fortunately I wrote as much in my post before the quoted. Should have mentioned it again.</p><div class="quotebox"><cite>CrAzYLuKe wrote:</cite><blockquote><p>@ryts, <br/></p><div class="codebox"><pre><code>mtd -r write wdr4900nv1_en_3_14_1_up(130304)_beta.bin firmware</code></pre></div><p>The issue is, that the command line appears and nothing more...I&#039;m in the tmp directory!</p></blockquote></div><p>Thanks for the info re the failed Luci firmware flash.</p><p>So you scp&#039;d it across to /tmp.&nbsp; You ssh in, cd to /tmp and try the command and nothing happens?</p><p>Please confirm that the firmware is present in /tmp by logging in with ssh and typing </p><div class="codebox"><pre><code>ls -al /tmp</code></pre></div><p> (with an enter afterwards).&nbsp; That should show many files BUT include the .bin file.</p><p>If it is there, the command with mtd should work as long as you type it out correctly.</p><p>You can also try </p><div class="codebox"><pre><code>mtd -r write wdr4900nv1_en_3_14_1_up(130304)_beta.bin mtd7</code></pre></div>											<p class="post-edited">(Last edited by <strong>ryts</strong> on 23 May 2014, 01:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234295">
				<div class="post-metadata">
					<div class="post-num">Post #547</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						23 May 2014, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>What&#039;s the problem? After r40802 wifi is fine again, all is stable <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 23 May 2014, 01:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234369">
				<div class="post-metadata">
					<div class="post-num">Post #548</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						23 May 2014, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ryts wrote:</cite><blockquote><p>You can also try </p><div class="codebox"><pre><code>mtd -r write wdr4900nv1_en_3_14_1_up(130304)_beta.bin mtd7</code></pre></div></blockquote></div><p>It will fail at least because of parenthesis characters in the filename like this: </p><div class="codebox"><pre><code>-ash: syntax error: unexpected &quot;(&quot;</code></pre></div><p>So the filename should be enclosed in quotation marks or the file itself should be renamed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234371">
				<div class="post-metadata">
					<div class="post-num">Post #549</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						23 May 2014, 13:13					</div>
				</div>
				<div class="post-content content">
					<p>Perenthesis characters in the filename have been deleted before! File was renamed to &quot;wdr4900nv1_tether_en_3_14_7_up_boot.bin&quot; and has been put on my on fileserver. It&#039;s the newest image from the tp-link website (1.3). I have also taken the beta from the other description, but no success with it aswell. </p><p>Here&#039;s the &quot;ls -al&quot; filelist. I have only taken the image line out of it. </p><p>-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp;4390912 May 22 23:23 wdr4900nv1_en_3_14_1_up130304_beta.bin<br/>-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 16646656 May 22 23:20 wdr4900nv1_tether_en_3_14_7_up_boot.bin<br/>root@OpenWrt:/tmp# mtd -r write wdr4900nv1_tether_en_3_14_7_up_boot.bin mtd7<br/>Could not open mtd device: mtd7<br/>Can&#039;t open device for writing!</p><p>Then I tried unlock, but nothing happens. </p><p>root@OpenWrt:/tmp# unlock<br/>-ash: unlock: not found<br/>root@OpenWrt:/tmp# unlock wdr4900nv1_tether_en_3_14_7_up_boot.bin<br/>-ash: unlock: not found<br/>root@OpenWrt:/tmp# </p><p>what should I do next?</p><p>Many thanks for your help so far!</p>											<p class="post-edited">(Last edited by <strong>CrAzYLuKe</strong> on 23 May 2014, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p234373">
				<div class="post-metadata">
					<div class="post-num">Post #550</div>
					<div class="post-author">CrAzYLuKe</div>
					<div class="post-datetime">
						23 May 2014, 13:41					</div>
				</div>
				<div class="post-content content">
					<p>I have reinstalled Lucy, after holding 5 sec the reset button, there was no more login possible. After setting the password new again (and nothing more!) I tried following steps again:</p><p>1. Open PuTTY<br/>2. Connect to it via&nbsp; 192.168.1.1 SSH Port 22 (like I already did before the whole time above)<br/>3. Login like on Luci<br/>4. Went to cd /tmp<br/>5. wget http://....../wdr4900nv1_tether_en_3_14_7_up_boot.bin<br/>6. mtd -r write wdr4900nv1_tether_en_3_14_7_up_boot.bin (mtd7)<br/>7. still the same error<br/>8. ls -al still shows the file<br/>9. going insane!</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 22 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=21.html">21</a></li><li class="pagination-current"><span>22</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=24.html">24</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>