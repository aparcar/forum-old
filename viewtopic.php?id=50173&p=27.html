<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Update on Linksys WRT1900AC support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 16 Sep 2014 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 27 of 598</div><nav><ul><li><a href="viewtopic.php%3Fid=50173&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=25.html">25</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=26.html">26</a></li><li class="pagination-current"><span>27</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=28.html">28</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=29.html">29</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=598.html">598</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p243499">
				<div class="post-metadata">
					<div class="post-num">Post #651</div>
					<div class="post-author">Chadster766</div>
					<div class="post-datetime">
						11 Aug 2014, 19:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gufus wrote:</cite><blockquote><div class="quotebox"><cite>hno wrote:</cite><blockquote><div class="quotebox"><cite>nbd wrote:</cite><blockquote><p>Quite frankly, this is completely ridiculous. Belkin has already released the source code of this driver in a GPL tarball. Interestingly enough, the driver there has GPL license headers apparently added by Marvell.</p></blockquote></div><p>Which GPL tarball? And it had full sources without precompiled library?</p></blockquote></div><p>Marvell 88W8864 Linux Driver/Firmware Source </p><p><a href="https://github.com/TheDgtl/mrvl_wlan_v7drv">https://github.com/TheDgtl/mrvl_wlan_v7drv</a> </p><p>Regards</p></blockquote></div><p>I copied the driver portion of this to the package folder in the OpenWRT SDK.</p><p>I&#039;m having problems getting creating a OpenWRT kernel package using the code. I&#039;m posting the Makefiles I&#039;m trying to use to compile the code and make the package. Help would be appreciated.</p><p>If trying to create an OpenWRT Package for this posted wireless driver code is wrong please advise and I will stop.</p><p>Makefile in package/wlan-v7:<br /></p><div class="codebox"><pre><code>#WRT1900AC Wifi Driver test package 

include $(TOPDIR)/rules.mk
include $(INCLUDE_DIR)/kernel.mk

PKG_NAME:=wlan-v7
PKG_VERSION:=1.0.0
PKG_RELEASE:=1

include $(INCLUDE_DIR)/package.mk

define KernelPackage/wlan-v7
  SECTION:=kernel
  CATEGORY:=Kernel modules
  SUBMENU:=Proprietary Test Marvell WiFi driver
  TITLE:=Kernel driver for 88W8764 WiFi chipsets
  FILES:=$(PKG_BUILD_DIR)/ap8x.o
  #AUTOLOAD:=$(call AutoLoad,30,wl_glue wl)
endef

define Build/Prepare
    $(call Build/Prepare/Default)
    mkdir -p $(PKG_BUILD_DIR)
    $(CP) ./src/* $(PKG_BUILD_DIR)/
endef

define Build/Configure
    #$(MAKE) -C $(PKG_BUILD_DIR) modules
    $(MAKE) -C $(PKG_BUILD_DIR) $(TARGET_CONFIGURE_OPTS)
endef

define KernelPackage/wlan-v7/install
    $(INSTALL_DIR) $(1)/bin
    $(INSTALL_BIN) $(PKG_BUILD_DIR)/wlan-v7 $(1)/bin/
endef

$(eval $(call KernelPackage,wlan-v7))</code></pre></div><p>Makefile in package/wlan-v7/src:</p><div class="codebox"><pre><code>#WRT1900AC Wifi Driver test package 

APS=8

#Set equal to 1 to build with client code, else 0
BUILD_CLIENT=1

#Cap Tx max rate
BUILD_CAP_MAX_RATE=1

ifeq (1, $(BUILD_CLIENT))
#Set equal to 1 in order compile in WPS client code
BUILD_WPS_CLIENT=1
#Set equal to 1 in order to compile DFS channel support and DFS passive scan for channels 52 to 64 and 100 to 140
BUILD_DFS_PASSIVE_SCAN = 1
#Set equal to 1 to include EWB FEATURE
BUILD_EWB=1
endif

#Set equal to 1 in order compile in multicast proxy code
BUILD_MPRXY=1
#Set equal to 1 to include TSO SUPPORT
#Enable TSO by default for L26; L24 does not support TSO
BUILD_TSO=1
#Set equal to 1 to include Dynamic BA Support
BUILD_DYNAMIC_BA=1
#Set equal to 1 to include WFA 11n TKIP Negative tests
BUILD_WFA_TKIP_NEGATIVE = 1
#set equal to 1 to include rx path interrupt reduction
BUILD_RXPATHOPT=0
#set to 1 to enable tcp ack enhancement
BUILD_TCP_ACK_ENHANCEMENT = 1
#Set equal to 1 to include SC2 Palladium simulation development.
PALLADIUM=0
#Set equal to 1 to include spectrum support.
BUILD_SSU_SUPPORT = 0

ifeq (1, $(PALLADIUM))
BUILD_SC_PALLADIUM=1
endif

#Set equal to 1 to enable packet statistics code.
BUILD_QUEUE_STATS_LATENCY=0
BUILD_QUEUE_STATS_CNT_HIST=1

#Set equal to 1,2, or 3 to enable packet statistics code in compile time.
ifeq (1, $(QUEUE_STATS))
BUILD_QUEUE_STATS_LATENCY=1
endif

ifeq (2, $(QUEUE_STATS))
BUILD_QUEUE_STATS_CNT_HIST=1
endif

ifeq (3, $(QUEUE_STATS))
BUILD_QUEUE_STATS_LATENCY=1
BUILD_QUEUE_STATS_CNT_HIST=1
endif

DRIVER_OBJS    := \
        driver/linux/ap8xLnxDesc.o     \
        driver/linux/ap8xLnxFwdl.o        \
        driver/linux/ap8xLnxFwcmd.o        \
        driver/linux/ap8xLnxIntf.o        \
        driver/linux/ap8xLnxApi.o        \
        driver/linux/ap8xLnxRecv.o        \
        driver/linux/ap8xLnxXmit.o        \
        driver/linux/ap8xLnxStat.o        \
        driver/linux/ap8xLnxWlLog.o    \
        driver/linux/ap8xLnxDump.o

API_OBJS    += \
        core/api/wlFun.o        \
        core/api/wlApi.o

AP_OBJS        += \
        core/dbg/wldebug.o         \
        core/encr/aes_key_wrap.o \
        core/encr/hmac_md5.o \
        core/encr/prfapi.o \
        core/encr/pbkdf2.o \
        core/encr/md5.o \
        core/encr/sha1.o \
        core/encr/tkip.o \
        core/encr/AP/ccmpAP.o \
        core/encr/AP/keyMgmt.o \
        core/encr/AP/tkipAP.o \
        core/wlsys/bcngen.o \
        core/wlsys/hal_mib.o \
        core/wlsys/hal_sys.o \
        core/wlsys/w81init.o \
        core/mgt/mhsm.o \
        core/mgt/List.o \
        core/mgt/timer.o \
        core/mgt/AP/AssocSrvAp.o \
        core/mgt/AP/AuthSrvAp.o \
        core/mgt/AP/idList.o \
        core/mgt/AP/macmgmtap.o \
        core/mgt/AP/macMgmtEvt.o \
        core/mgt/AP/macMgmtMlme.o \
        core/mgt/AP/mlmeApi.o \
        core/mgt/AP/mlmeAuth.o \
        core/mgt/AP/smeMain.o \
        core/mgt/AP/StaDb.o \
        core/mgt/AP/SyncSrvAp.o \
        core/mgt/AP/util.o \
        core/mgt/AP/wlMlmeSrv.o \
        core/mib/mib.o \
        core/mib/wl_mib.o \
        core/os/os_if.o \
        core/qos/qos.o \
        core/qos/qos_back.o \
        core/qos/AP/qos_dlp.o \
        core/qos/AP/qos_scheduler.o \
        core/wlsys/domain.o \
        core/wlsys/packet.o \
        core/wlsys/fragment.o \
        core/wlsys/autochannel.o \
        core/mgt/AP/dfsSM.o \
        core/mgt/AP/dfsEv.o \
        core/wds/wds.o

#ifeq (1, $(BUILD_CLIENT))
    $(AP_OBJS)    += \
        core/mgt/STA/AssocSta_sm.o \
        core/mgt/STA/AssocSta_srv.o \
        core/mgt/STA/AuthSta_sm.o \
        core/mgt/STA/AuthSta_srv.o \
        core/mgt/STA/SyncSta_sm.o \
        core/mgt/STA/SyncSta_srv.o \
        core/mgt/STA/macMgmtEvtSta.o \
        core/mgt/STA/smeStateMgrSta.o \
        core/mgt/STA/mlmeApiSta.o \
        core/mgt/STA/wlvmac.o \
        core/mgt/STA/child_srv.o \
        core/mgt/STA/parent_srv.o \
        core/mgt/STA/wlMlmeSrvSta.o \
        core/wlsys/linkmgt.o \
        core/wlsys/ewb_hash.o \
        core/wlsys/ewb_packet.o \
        core/encr/STA/keyMgmtSta.o
#endif

#obj-$(CONFIG_MARVELL_SOFTAP) += ap8x.o
obj-m += ap8x.o 

#CROSS_COMPILE=$(TARGET_CROSS)
#KDIR:=$(KDIR)
PWD:=$(shell pwd)

#AS        = $(CROSS_COMPILE)as
#LD        = $(CROSS_COMPILE)ld
#CC        = $(CROSS_COMPILE)gcc

#SOC:=$(KDIR)/arch/arm/mach-mv88fxx81

#EXTRA_CFLAGS+= -I${KDIR}
EXTRA_CFLAGS+= -DWL_KERNEL_26
EXTRA_CFLAGS+= -DUSE_TASKLET
#EXTRA_CFLAGS+= -DNAPI
EXTRA_CFLAGS+= -O2 -funroll-loops
EXTRA_CFLAGS+=-I${PWD} -I${PWD} -I${PWD}/driver/linux -I${PWD}/core/api -I${PWD}/core/incl -I${PWD}/core/mgt/STA/incl
#EXTRA_CFLAGS+=-I${SOC} -I${SOC}/Common -I${SOC}/Soc/idma -I${SOC}/Soc/ctrlEnv -I${SOC}/mv88f5181 -I${SOC}/osServices -I${SOC}/osServices/linux/ArchARM
#EXTRA_CFLAGS+=-I${SOC}/Board/boardEnv -I${SOC}/Board/boardEnv/DB_88FXX81 -I${SOC}/Soc/ctrlEnv/MV_88FXX81 -I${SOC}/osServices/linux

ifeq (BE,$(ENDIAN))
EXTRA_CFLAGS+=-DMV_CPU_BE
else
EXTRA_CFLAGS+=-DMV_CPU_LE
endif

EXTRA_CFLAGS+=-DMV_LINUX -DMV_ARM
EXTRA_CFLAGS+= -DUDP_API -DAP_MAC_LINUX \
        -DIEEE80211H -DWPA -DAP_WPA2 -DQOS_FEATURE -DSTA_INFO_DB \
        -DBT_COEXISTENCE -DAVOID_MIS_ACC -DQOS_WSM_FEATURE
EXTRA_CFLAGS+= -DEXPORT_SYMTAB
EXTRA_CFLAGS+= -DRELEASE_11N
EXTRA_CFLAGS+= -DAGG_QUE -DAP8X_STATISTICS
EXTRA_CFLAGS+= -DENABLE_WLSNDEVT
EXTRA_CFLAGS+= -DAP8X_DUMP -DAUTOCHANNEL -DENABLE_WLSYSLOG -DUAPSD_SUPPORT
EXTRA_CFLAGS+= -DAMPDU_SUPPORT 
EXTRA_CFLAGS+= -DMRV_8021X 
EXTRA_CFLAGS+= -DINTEROP -DAMSDU_BYTE_REORDER -DIEEE_HTIE
EXTRA_CFLAGS+= -DWDS_FEATURE
EXTRA_CFLAGS+= -DBRS_SUPPORT
EXTRA_CFLAGS+= -DIEEE80211_DH
#EXTRA_CFLAGS+= -DZERO_COPY
EXTRA_CFLAGS+= -DZERO_COPY_RX
EXTRA_CFLAGS+= -DMFG_SUPPORT
EXTRA_CFLAGS+= -DPWRFRAC
EXTRA_CFLAGS+= -DMRVL_WSC
#EXTRA_CFLAGS+= -DMRVL_WAPI
EXTRA_CFLAGS+= -DMRVL_DFS
#EXTRA_CFLAGS+= -DWMON
#EXTRA_CFLAGS+= -DINTOLERANT40
EXTRA_CFLAGS+= -DIEEE80211N_MIMOPSD110
EXTRA_CFLAGS+= -DCOEXIST_20_40_SUPPORT
EXTRA_CFLAGS+= -DGENERIC_GETIE
EXTRA_CFLAGS+= -DWNC_LED_CTRL

ifeq (16, $(APS))
EXTRA_CFLAGS+= -DMCAST_PS_OFFLOAD_SUPPORT
endif

ifeq (1, $(BUILD_RXPATHOPT))
EXTRA_CFLAGS+= -DRXPATHOPT
endif

EXTRA_CFLAGS+= -DMRVL_WPS2
EXTRA_CFLAGS+= -DEXPLICIT_BF

ifeq (1,$(BUILD_TCP_ACK_ENHANCEMENT))
EXTRA_CFLAGS += -DTCP_ACK_ENHANCEMENT
endif

ifeq (1, $(BUILD_EWB))
EXTRA_CFLAGS+= -DEWB
endif

ifeq (1, $(BUILD_TSO))
EXTRA_CFLAGS+= -DWLAN_INCLUDE_TSO
endif

EXTRA_CFLAGS+= -DMBSS -DCOMMON_PHYDSSS -DMIMO_PS_HT -DNPROTECTION

ifeq (1, $(BUILD_CLIENT))
EXTRA_CFLAGS+= -DCLIENT_SUPPORT -DWPA_STA -DWPA2 -DRSN_RESOLVE -DAMPDU_SUPPORT_TX_CLIENT
endif

EXTRA_CFLAGS+= -DSOC_W8764 -DSOC_W8864

ifeq (1, $(WLDBG))
EXTRA_CFLAGS+= -DWL_DEBUG
endif

ifeq (1, $(NOFWDL))
EXTRA_CFLAGS+= -DNO_FW_DOWNLOAD
endif

ifeq (1, $(MFGFW))
EXTRA_CFLAGS+= -DDEFAULT_MFG_MODE
endif

ifneq (1, $(WLMEM))
EXTRA_CFLAGS+= -DWLMEM_DISABLED
endif

ifeq (1, $(BUILD_MPRXY))
EXTRA_CFLAGS+= -DMPRXY -DMPRXY_SNOOP -DMPRXY_IGMP_QUERY
endif

ifeq (1, $(BULID_CLIENT_ONLY))
EXTRA_CFLAGS+= -DCLIENTONLY -DSINGLE_DEV_INTERFACE
endif

ifeq (, $(APS))
EXTRA_CFLAGS+= -DNUMOFAPS=1
else
EXTRA_CFLAGS+= -DNUMOFAPS=$(APS)
endif

ifeq (1, $(V4FW))
EXTRA_CFLAGS+= -DAMPDU_SUPPORT_SBA
EXTRA_CFLAGS+= -DV4FW
endif

ifeq (1, $(BUILD_WPS_CLIENT))
EXTRA_CFLAGS+= -DMRVL_WPS_CLIENT
endif

ifeq (1, $(BUILD_DFS_PASSIVE_SCAN))
EXTRA_CFLAGS+= -DDFS_PASSIVE_SCAN -DDFS_CHNL_SUPPORT -DFCC_15E_INTERIM_PLAN
endif

EXTRA_CFLAGS+= -DBA_WATCHDOG
EXTRA_CFLAGS+= -DV6FW -DATTN_RSSI -DAMPDU_SUPPORT_SBA

ifeq (1, $(BUILD_DYNAMIC_BA))
EXTRA_CFLAGS+= -DDYNAMIC_BA_SUPPORT
endif

EXTRA_CFLAGS+= -DAMSDUOVERAMPDU

ifeq (1, $(BUILD_WFA_TKIP_NEGATIVE))
EXTRA_CFLAGS+= -DWFA_TKIP_NEGATIVE
endif

ifeq (1, $(BUILD_SC_PALLADIUM))
EXTRA_CFLAGS+= -DSC_PALLADIUM
endif

ifeq (1, $(BUILD_SSU_SUPPORT))
EXTRA_CFLAGS+= -DSSU_SUPPORT
endif

ifeq (1, $(BUILD_QUEUE_STATS_LATENCY))
EXTRA_CFLAGS+= -DQUEUE_STATS_LATENCY -DQUEUE_STATS
endif

ifeq (1, $(BUILD_QUEUE_STATS_CNT_HIST))
EXTRA_CFLAGS+= -DQUEUE_STATS_CNT_HIST
endif

ifeq (0, $(BUILD_QUEUE_STATS_LATENCY))
EXTRA_CFLAGS+= -DQUEUE_STATS
endif

ifeq (1, $(BUILD_CAP_MAX_RATE))
EXTRA_CFLAGS+= -DCAP_MAX_RATE
endif

#all:
    #@echo $(if $(findstring MRVL_WPS2,$(EXTRA_CFLAGS)),MRVL_WPS2 defined,Info: MRVL_WPS2 not defined)
    #$(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules

#clean:
#    rm -f *.o *.a *.s *.ko *.ko.cmd *.o.cmd *.mod.* .ap8x.* $(ap8x-objs)
#    find . -name .*.o.cmd -exec rm -f {} \;</code></pre></div>											<p class="post-edited">(Last edited by <strong>Chadster766</strong> on 24 Aug 2014, 06:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243513">
				<div class="post-metadata">
					<div class="post-num">Post #652</div>
					<div class="post-author">CrimInalA</div>
					<div class="post-datetime">
						11 Aug 2014, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>The people that are offered a refund : Have you purchased the router directly from Belkin ?</p><p>I would love to get a refund for this thing too , however i did purchase it from a retailer several months ago .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243515">
				<div class="post-metadata">
					<div class="post-num">Post #653</div>
					<div class="post-author">dfarning</div>
					<div class="post-datetime">
						11 Aug 2014, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>Advertising the product as running openwrt is the same as advertising a product as running OSX. If you pay a premium to buy a product that is advertised to run a particular software... it should run it.</p><p>Linksys failing to follow through on their promise was grounds for a return. The manager on duty at Best Buy accepted the return.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243567">
				<div class="post-metadata">
					<div class="post-num">Post #654</div>
					<div class="post-author">dorian</div>
					<div class="post-datetime">
						12 Aug 2014, 06:37					</div>
				</div>
				<div class="post-content content">
					<p>Looks like thieving the palladium driver wasn&#039;t such a bad idea after all... Now I&#039;m just curious if it actually works on production hardware and whether you can disable regulatory rules on that thing and force running in high amplitude gain wide band mode (even if that&#039;s illegal). That would be so awesome.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243579">
				<div class="post-metadata">
					<div class="post-num">Post #655</div>
					<div class="post-author">Ephraim Gadsby Jr.</div>
					<div class="post-datetime">
						12 Aug 2014, 08:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dfarning wrote:</cite><blockquote><p>Advertising the product as running openwrt is the same as advertising a product as running OSX. If you pay a premium to buy a product that is advertised to run a particular software... it should run it.</p><p>Linksys failing to follow through on their promise was grounds for a return. The manager on duty at Best Buy accepted the return.</p></blockquote></div><p>Ok, it&#039;s time for me to try and return this WRT1900AC, but I bought it from a private individual so it looks like I&#039;m stuck with a very expensive nonOpenWRT doorstop. Has anyone determined if Belkin will give a refund to smucks like me who believed the marketing hype and bought from a private individual? I&#039;ve tried calling WRT1900AC Support: (877) 318-7026 and Customer Support&nbsp; (800) 546-5797 only to be told that all circuits are busy and to call back before being hung up on. Can anyone offer me a smidgen of hope that I can get a refund for this thing?&nbsp; I&#039;m sorry if this is OT, but I couldn&#039;t find a thread related to refunds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243586">
				<div class="post-metadata">
					<div class="post-num">Post #656</div>
					<div class="post-author">dorian</div>
					<div class="post-datetime">
						12 Aug 2014, 09:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Ephraim Gadsby Jr. wrote:</cite><blockquote><p>Can anyone offer me a smidgen of hope that I can get a refund for this thing?</p></blockquote></div><p>Get it from the manufacturer, claim the seller has gone out of business or get the invoice from the &quot;private individual&quot;. Not working as advertised in the state manufactured (say, because they used a part that fits but is lacking), is a manufacturing defect they have to cover by repairing the device or refunding you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243589">
				<div class="post-metadata">
					<div class="post-num">Post #657</div>
					<div class="post-author">CrimInalA</div>
					<div class="post-datetime">
						12 Aug 2014, 10:09					</div>
				</div>
				<div class="post-content content">
					<p>I have opened a new topic so we dont have to pollute this thread with refund questions .</p><p>You can find the new thread which is only about getting a refund here :<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=243588#p243588">https://forum.openwrt.org/viewtopic.php … 88#p243588</a> .</p>											<p class="post-edited">(Last edited by <strong>CrimInalA</strong> on 12 Aug 2014, 10:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243620">
				<div class="post-metadata">
					<div class="post-num">Post #658</div>
					<div class="post-author">Chadster766</div>
					<div class="post-datetime">
						12 Aug 2014, 15:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dorian wrote:</cite><blockquote><p>Looks like thieving the palladium driver wasn&#039;t such a bad idea after all... Now I&#039;m just curious if it actually works on production hardware and whether you can disable regulatory rules on that thing and force running in high amplitude gain wide band mode (even if that&#039;s illegal). That would be so awesome.</p></blockquote></div><p>If you are talking about the Marvell wireless driver; AFAIK nothing has been stolen. Otherwise I wouldn&#039;t attempt to compile it. </p><p>Really these drivers are built using other Open Source modules and should fall under GPL transparency compliance. Not that I know much about GPL protocol.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243646">
				<div class="post-metadata">
					<div class="post-num">Post #659</div>
					<div class="post-author">dorian</div>
					<div class="post-datetime">
						12 Aug 2014, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>GPL only requires public release of code changes to GPL code, code created for the purpose of interfacing with GPL code based binaries does not need to be released, unless compiled into the same binary. It goes without saying that not all modified GPL code fits the offending project&#039;s quality standards or code style guidelines.<br />Palladium is a diagnostic chip and circuit design toolkit from Cadence: <a href="http://www.cadence.com/products/sd/palladium_series/pages/default.aspx">http://www.cadence.com/products/sd/pall … fault.aspx</a><br />From what I can gather from the code, this is a diagnostic driver. Though it is likely an actual open source driver could be built with its code as a reference, I don&#039;t think using it as is for production use would be a good idea.<br />As far as the code being stolen goes, if you obtained it from a public source, it&#039;s fair game for you to have it. Legal issues are for the thief to deal with. I wasn&#039;t actually serious about that, though.</p>											<p class="post-edited">(Last edited by <strong>dorian</strong> on 12 Aug 2014, 19:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243649">
				<div class="post-metadata">
					<div class="post-num">Post #660</div>
					<div class="post-author">Chadster766</div>
					<div class="post-datetime">
						12 Aug 2014, 19:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dorian wrote:</cite><blockquote><p>GPL only requires public release of code changes to GPL code, code created for the purpose of interfacing with GPL code based binaries does not need to be released, unless compiled into the same binary. It goes without saying that not all modified GPL code fits the offending project&#039;s quality standards or code style guidelines.<br />Palladium is a diagnostic chip and circuit design toolkit from Cadence: <a href="http://www.cadence.com/products/sd/palladium_series/pages/default.aspx">http://www.cadence.com/products/sd/pall … fault.aspx</a><br />From what I can gather from the code, this is a diagnostic driver. Though it is likely an actual open source driver could be built with its code as a reference, I don&#039;t think using it as is for production use would be a good idea.<br />As far as the code being stolen goes, if you obtained it from a public source, it&#039;s fair game for you to have it. Legal issues are for the thief to deal with. I wasn&#039;t actually serious about that, though.</p></blockquote></div><p>Thanks for the GPL summary and clarification of publicly available code <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This Cadence stuff in new to me. Are you saying the posted source of Marvell wireless driver can&#039;t and shouldn&#039;t be compile for OpenWRT use?</p>											<p class="post-edited">(Last edited by <strong>Chadster766</strong> on 13 Aug 2014, 00:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243690">
				<div class="post-metadata">
					<div class="post-num">Post #661</div>
					<div class="post-author">dorian</div>
					<div class="post-datetime">
						13 Aug 2014, 01:55					</div>
				</div>
				<div class="post-content content">
					<p>No, it will probably compile and minimal modification would make it work, but it doesn&#039;t look like a production driver to me, though it could be that <em>it is</em>. Wi-Fi drivers are full of bugs far and wide and there&#039;s no compelling reason for the manufacturer to clean up the code most of the time, if it sort of works and is <em>good enough</em> to use. You don&#039;t even want to know about cellphone radio devices, they&#039;re even worse...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243692">
				<div class="post-metadata">
					<div class="post-num">Post #662</div>
					<div class="post-author">Chadster766</div>
					<div class="post-datetime">
						13 Aug 2014, 01:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dorian wrote:</cite><blockquote><p>No, it will probably compile and minimal modification would make it work, but it doesn&#039;t look like a production driver to me, though it could be that <em>it is</em>. Wi-Fi drivers are full of bugs far and wide and there&#039;s no compelling reason for the manufacturer to clean up the code most of the time, if it sort of works and is <em>good enough</em> to use. You don&#039;t even want to know about cellphone radio devices, they&#039;re even worse...</p></blockquote></div><p>Thanks <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243712">
				<div class="post-metadata">
					<div class="post-num">Post #663</div>
					<div class="post-author">grau</div>
					<div class="post-datetime">
						13 Aug 2014, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>Just to make sure after reading &quot;official&quot; linksys statement by escalation manager:</p><p>We won&#039;t get any usable openwrt for this router, right?!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243729">
				<div class="post-metadata">
					<div class="post-num">Post #664</div>
					<div class="post-author">geoffa</div>
					<div class="post-datetime">
						13 Aug 2014, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>I am running this;<br /><a href="https://github.com/wrt1900ac/opensource/tree/master/Barrier-Breaker">https://github.com/wrt1900ac/opensource … er-Breaker</a></p><p>which is openwrt.....</p><p>seems to work ok for me. I just downloaded the openwrt-mvebu-mamba-jffs2-128k.img file and through the default firmware interface uploaded it.</p><p>router rebooted and i was in. (new ip though of 192.168.200.1)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243733">
				<div class="post-metadata">
					<div class="post-num">Post #665</div>
					<div class="post-author">Boris2</div>
					<div class="post-datetime">
						13 Aug 2014, 14:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>geoffa wrote:</cite><blockquote><p>I am running this;<br /><a href="https://github.com/wrt1900ac/opensource/tree/master/Barrier-Breaker">https://github.com/wrt1900ac/opensource … er-Breaker</a></p><p>which is openwrt.....</p><p>seems to work ok for me.</p></blockquote></div><p>Yeah but that&#039;s a mutant which is old, not FOSS, and has no packages repository.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243735">
				<div class="post-metadata">
					<div class="post-num">Post #666</div>
					<div class="post-author">geoffa</div>
					<div class="post-datetime">
						13 Aug 2014, 15:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Boris2 wrote:</cite><blockquote><div class="quotebox"><cite>geoffa wrote:</cite><blockquote><p>I am running this;<br /><a href="https://github.com/wrt1900ac/opensource/tree/master/Barrier-Breaker">https://github.com/wrt1900ac/opensource … er-Breaker</a></p><p>which is openwrt.....</p><p>seems to work ok for me.</p></blockquote></div><p>Yeah but that&#039;s a mutant which is old, not FOSS, and has no packages repository.</p></blockquote></div><br /><p>I understand that its not F/OSS and i can see how not having a repo could be bad for people that want to run other stuff, but can you expand as to what you mean by mutant?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243770">
				<div class="post-metadata">
					<div class="post-num">Post #667</div>
					<div class="post-author">TheTrooper</div>
					<div class="post-datetime">
						13 Aug 2014, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>Are there any screenshots or video of this <br /><a href="https://github.com/wrt1900ac/opensource/tree/master/Barrier-Breaker">https://github.com/wrt1900ac/opensource … er-Breaker</a><br />running on a Linksys WRT1900AC?</p><p>WOULD LOVE TO SEE IT!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243771">
				<div class="post-metadata">
					<div class="post-num">Post #668</div>
					<div class="post-author">Boris2</div>
					<div class="post-datetime">
						13 Aug 2014, 21:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TheTrooper wrote:</cite><blockquote><p>WOULD LOVE TO SEE IT!</p></blockquote></div><p>TheTrooper, read pages 23+, you will be disappointed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243873">
				<div class="post-metadata">
					<div class="post-num">Post #669</div>
					<div class="post-author">SaberOne</div>
					<div class="post-datetime">
						14 Aug 2014, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running the latest firmware and the Linksys keeps loosing settings after reboot. That&#039;s a real showstopper cause it takes 20+ minutes to reconfigure/restore backup. And I had it reboot by itself today <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>So what I wanna know is whether openwrt runs or will run with either a closed or open source driver. Cause if openwrt is a no go for the coming 3 months or so I&#039;ll demand a refund. It&#039;s just bizar that the wrt1900ac is basically the most expensive 1900ac router on the market, but for some reason they manage to f it up at Linksys. I&#039;m absolutely not amused.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243879">
				<div class="post-metadata">
					<div class="post-num">Post #670</div>
					<div class="post-author">zo0ok</div>
					<div class="post-datetime">
						14 Aug 2014, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>SaberOne… the OpenWRT people here are giving up on the WRT1900AC and returning them for refunds. Draw your own conclusion <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243904">
				<div class="post-metadata">
					<div class="post-num">Post #671</div>
					<div class="post-author">mercsniper</div>
					<div class="post-datetime">
						15 Aug 2014, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>Saber,</p><p>I&#039;m running a AA version on my router and it is plenty stable. I tried flashing BB on it and it was definitely not stable. I would try the AA version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243984">
				<div class="post-metadata">
					<div class="post-num">Post #672</div>
					<div class="post-author">gufus</div>
					<div class="post-datetime">
						15 Aug 2014, 20:43					</div>
				</div>
				<div class="post-content content">
					<p>AAv1 works good</p>											<p class="post-edited">(Last edited by <strong>gufus</strong> on 16 Aug 2014, 05:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244077">
				<div class="post-metadata">
					<div class="post-num">Post #673</div>
					<div class="post-author">TheTrooper</div>
					<div class="post-datetime">
						17 Aug 2014, 08:27					</div>
				</div>
				<div class="post-content content">
					<p>Are there screenshots of AA or video of it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244532">
				<div class="post-metadata">
					<div class="post-num">Post #674</div>
					<div class="post-author">justniz</div>
					<div class="post-datetime">
						21 Aug 2014, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>Back here after an absence of a few weeks, and just trying to catch up on the latest again.</p><p>Am I right in thinking that still nothing has changed and that the driver from Belkin really STILL has not been released?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244543">
				<div class="post-metadata">
					<div class="post-num">Post #675</div>
					<div class="post-author">Chadster766</div>
					<div class="post-datetime">
						21 Aug 2014, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>If you want to do this on your own. The driver can be retrieved from:</p><p>Marvell 88W8864 Linux Driver/Firmware Source </p><p><a href="https://github.com/TheDgtl/mrvl_wlan_v7drv">https://github.com/TheDgtl/mrvl_wlan_v7drv</a> </p><p>You will need to copy the directories &quot;driver&quot; and &quot;core&quot; into a new OpenWRT directory &quot;package/network/wlan-v7/src&quot;</p><p>Create this Makefile in &quot;package/network/wlan-v7&#039;:<br /></p><div class="codebox"><pre><code>include $(TOPDIR)/rules.mk
include $(INCLUDE_DIR)/kernel.mk

PKG_NAME:=wlan-v7
PKG_VERSION:=1.0.0
PKG_RELEASE:=1

PKG_BUILD_DIR:=$(KERNEL_BUILD_DIR)/$(if $(PKG_BRANCH),$(PKG_BRANCH),wlan-v7-trunk)-$(PKG_VERSION)

include $(INCLUDE_DIR)/package.mk

WLAN_V7_FILES:=$(PKG_BUILD_DIR)/ap8x.ko
WLAN_V7_AUTOLOAD:=ap8x


define KernelPackage/wlan-v7
  SUBMENU:=Wireless Drivers
  TITLE:=Test driver for 88W8764 WiFi chipsets
  FILES:=$(WLAN_V7_FILES)
  AUTOLOAD:=$(call AutoLoad,30,WLAN_V7_AUTOLOAD)
endef

define KernelPackage/wlan-v7/description
 This package contains a test driver for Marvell 802.11a/b/g chipsets.
endef

#************************
APS=8

#Set equal to 1 to build with client code, else 0
BUILD_CLIENT=1

#Cap Tx max rate
BUILD_CAP_MAX_RATE=1

ifeq (1, $(BUILD_CLIENT))
#Set equal to 1 in order compile in WPS client code
BUILD_WPS_CLIENT=1
#Set equal to 1 in order to compile DFS channel support and DFS passive scan for channels 52 to 64 and 100 to 140
BUILD_DFS_PASSIVE_SCAN = 1
#Set equal to 1 to include EWB FEATURE
BUILD_EWB=1
endif

#Set equal to 1 in order compile in multicast proxy code
BUILD_MPRXY=1
#Set equal to 1 to include TSO SUPPORT
#Enable TSO by default for L26; L24 does not support TSO
BUILD_TSO=1
#Set equal to 1 to include Dynamic BA Support
BUILD_DYNAMIC_BA=1
#Set equal to 1 to include WFA 11n TKIP Negative tests
BUILD_WFA_TKIP_NEGATIVE = 1
#set equal to 1 to include rx path interrupt reduction
BUILD_RXPATHOPT=0
#set to 1 to enable tcp ack enhancement
BUILD_TCP_ACK_ENHANCEMENT = 1
#Set equal to 1 to include SC2 Palladium simulation development.
PALLADIUM=0
#Set equal to 1 to include spectrum support.
BUILD_SSU_SUPPORT = 0

ifeq (1, $(PALLADIUM))
BUILD_SC_PALLADIUM=1
endif

#Set equal to 1 to enable packet statistics code.P-OBJS)
BUILD_QUEUE_STATS_LATENCY=0
BUILD_QUEUE_STATS_CNT_HIST=1

#Set equal to 1,2, or 3 to enable packet statistics code in compile time.
ifeq (1, $(QUEUE_STATS))
BUILD_QUEUE_STATS_LATENCY=1
endif

ifeq (2, $(QUEUE_STATS))
BUILD_QUEUE_STATS_CNT_HIST=1
endif

ifeq (3, $(QUEUE_STATS))
BUILD_QUEUE_STATS_LATENCY=1
BUILD_QUEUE_STATS_CNT_HIST=1
endif

EXTRA_CFLAGS+= -I${LINUX_DIR}
EXTRA_CFLAGS+= -DWL_KERNEL_26
EXTRA_CFLAGS+= -DUSE_TASKLET
EXTRA_CFLAGS+= -O2 -funroll-loops
EXTRA_CFLAGS+=-I${PKG_BUILD_DIR} -I${PKG_BUILD_DIR} -I${PKG_BUILD_DIR}/driver/linux -I${PKG_BUILD_DIR}/core/api -I${PKG_BUILD_DIR}/core/incl -I${PKG_BUILD_DIR}/core/mgt/STA/incl

ifeq (BE,$(ENDIAN))
EXTRA_CFLAGS+=-DMV_CPU_BE
else
EXTRA_CFLAGS+=-DMV_CPU_LE
endif

EXTRA_CFLAGS+=-DMV_LINUX -DMV_ARM
EXTRA_CFLAGS+= -DUDP_API -DAP_MAC_LINUX \
                -DIEEE80211H -DWPA -DAP_WPA2 -DQOS_FEATURE -DSTA_INFO_DB \
                                -DBT_COEXISTENCE -DAVOID_MIS_ACC -DQOS_WSM_FEATURE
EXTRA_CFLAGS+= -DEXPORT_SYMTAB
EXTRA_CFLAGS+= -DRELEASE_11N
EXTRA_CFLAGS+= -DAGG_QUE -DAP8X_STATISTICS
EXTRA_CFLAGS+= -DENABLE_WLSNDEVT
EXTRA_CFLAGS+= -DAP8X_DUMP -DAUTOCHANNEL -DENABLE_WLSYSLOG -DUAPSD_SUPPORT
EXTRA_CFLAGS+= -DAMPDU_SUPPORT
EXTRA_CFLAGS+= -DMRV_8021X
EXTRA_CFLAGS+= -DINTEROP -DAMSDU_BYTE_REORDER -DIEEE_HTIE
EXTRA_CFLAGS+= -DWDS_FEATURE
EXTRA_CFLAGS+= -DBRS_SUPPORT
EXTRA_CFLAGS+= -DIEEE80211_DH
EXTRA_CFLAGS+= -DZERO_COPY_RX
EXTRA_CFLAGS+= -DMFG_SUPPORT
EXTRA_CFLAGS+= -DPWRFRAC
EXTRA_CFLAGS+= -DMRVL_WSC
EXTRA_CFLAGS+= -DMRVL_DFS
EXTRA_CFLAGS+= -DIEEE80211N_MIMOPSD110
EXTRA_CFLAGS+= -DCOEXIST_20_40_SUPPORT
EXTRA_CFLAGS+= -DGENERIC_GETIE
EXTRA_CFLAGS+= -DWNC_LED_CTRL

ifeq (16, $(APS))
EXTRA_CFLAGS+= -DMCAST_PS_OFFLOAD_SUPPORT
endif

ifeq (16, $(APS))
EXTRA_CFLAGS+= -DMCAST_PS_OFFLOAD_SUPPORT
endif

ifeq (1, $(BUILD_RXPATHOPT))
EXTRA_CFLAGS+= -DRXPATHOPT
endif

EXTRA_CFLAGS+= -DMRVL_WPS2
EXTRA_CFLAGS+= -DEXPLICIT_BF

ifeq (1,$(BUILD_TCP_ACK_ENHANCEMENT))
EXTRA_CFLAGS += -DTCP_ACK_ENHANCEMENT
endif

ifeq (1, $(BUILD_EWB))
EXTRA_CFLAGS+= -DEWB
endif

ifeq (1, $(BUILD_TSO))
EXTRA_CFLAGS+= -DWLAN_INCLUDE_TSO
endif

EXTRA_CFLAGS+= -DMBSS -DCOMMON_PHYDSSS -DMIMO_PS_HT -DNPROTECTION

ifeq (1, $(BUILD_CLIENT))
EXTRA_CFLAGS+= -DCLIENT_SUPPORT -DWPA_STA -DWPA2 -DRSN_RESOLVE -DAMPDU_SUPPORT_TX_CLIENT
endif

EXTRA_CFLAGS+= -DSOC_W8764 -DSOC_W8864

ifeq (1, $(WLDBG))
EXTRA_CFLAGS+= -DWL_DEBUG
endif

ifeq (1, $(NOFWDL))
EXTRA_CFLAGS+= -DNO_FW_DOWNLOAD
endif

ifeq (1, $(MFGFW))
EXTRA_CFLAGS+= -DDEFAULT_MFG_MODE
endif

ifneq (1, $(WLMEM))
EXTRA_CFLAGS+= -DWLMEM_DISABLED
endif

ifeq (1, $(BUILD_MPRXY))
EXTRA_CFLAGS+= -DMPRXY -DMPRXY_SNOOP -DMPRXY_IGMP_QUERY
endif

ifeq (1, $(BULID_CLIENT_ONLY))
EXTRA_CFLAGS+= -DCLIENTONLY -DSINGLE_DEV_INTERFACE
endif

ifeq (, $(APS))
EXTRA_CFLAGS+= -DNUMOFAPS=1
else
EXTRA_CFLAGS+= -DNUMOFAPS=$(APS)
endif

ifeq (1, $(V4FW))
EXTRA_CFLAGS+= -DAMPDU_SUPPORT_SBA
EXTRA_CFLAGS+= -DV4FW
endif

ifeq (1, $(BUILD_WPS_CLIENT))
EXTRA_CFLAGS+= -DMRVL_WPS_CLIENT
endif

ifeq (1, $(BUILD_DFS_PASSIVE_SCAN))
EXTRA_CFLAGS+= -DDFS_PASSIVE_SCAN -DDFS_CHNL_SUPPORT -DFCC_15E_INTERIM_PLAN
endif

EXTRA_CFLAGS+= -DBA_WATCHDOG
EXTRA_CFLAGS+= -DV6FW -DATTN_RSSI -DAMPDU_SUPPORT_SBA

ifeq (1, $(BUILD_DYNAMIC_BA))
EXTRA_CFLAGS+= -DDYNAMIC_BA_SUPPORT
endif

EXTRA_CFLAGS+= -DAMSDUOVERAMPDU

ifeq (1, $(BUILD_WFA_TKIP_NEGATIVE))
EXTRA_CFLAGS+= -DWFA_TKIP_NEGATIVE
endif

ifeq (1, $(BUILD_SC_PALLADIUM))
EXTRA_CFLAGS+= -DSC_PALLADIUM
endif

ifeq (1, $(BUILD_SSU_SUPPORT))
EXTRA_CFLAGS+= -DSSU_SUPPORT
endif

ifeq (1, $(BUILD_QUEUE_STATS_LATENCY))
EXTRA_CFLAGS+= -DQUEUE_STATS_LATENCY -DQUEUE_STATS
endif

ifeq (1, $(BUILD_QUEUE_STATS_CNT_HIST))
EXTRA_CFLAGS+= -DQUEUE_STATS_CNT_HIST
endif

ifeq (0, $(BUILD_QUEUE_STATS_LATENCY))
EXTRA_CFLAGS+= -DQUEUE_STATS
endif

ifeq (1, $(BUILD_CAP_MAX_RATE))
EXTRA_CFLAGS+= -DCAP_MAX_RATE
endif
#************************

MAKE_ARGS:= \
        ARCH=&quot;$(LINUX_KARCH)&quot; \
        CROSS_COMPILE=&quot;$(TARGET_CROSS)&quot; \
        TOOLPREFIX=&quot;$(KERNEL_CROSS)&quot; \
        TOOLPATH=&quot;$(KERNEL_CROSS)&quot; \
        KERNELPATH=&quot;$(LINUX_DIR)&quot; \
        KDIR=&quot;$(LINUX_DIR)&quot; \
        SUBDIRS=&quot;$(PKG_BUILD_DIR)&quot; \
        EXTRA_CFLAGS=&quot;$(EXTRA_CFLAGS)&quot;

define Build/Prepare
        mkdir -p $(PKG_BUILD_DIR)
        $(CP) ./src/* $(PKG_BUILD_DIR)/
endef

define Build/Compile
        $(MAKE) -C &quot;$(LINUX_DIR)&quot; $(MAKE_ARGS) modules
endef

define KernelPackage/wlan-v7/install
        $(INSTALL_DIR) $(1)/usr/bin
endef

$(eval $(call KernelPackage,wlan-v7))</code></pre></div><p>Create this Makefile in &quot;package/network/wlan-v7/src&quot;:</p><div class="codebox"><pre><code>#WRT1900AC Wifi Driver test package

DRIVER-OBJS = ap8x-objs
API-OBJS = ap8x-objs
AP-OBJS = ap8x-objs

$(DRIVER-OBJS)  := \
                driver/linux/ap8xLnxDesc.o      \
                driver/linux/ap8xLnxFwdl.o              \
                driver/linux/ap8xLnxFwcmd.o             \
                driver/linux/ap8xLnxIntf.o              \
                driver/linux/ap8xLnxApi.o               \
                driver/linux/ap8xLnxRecv.o              \
                driver/linux/ap8xLnxXmit.o              \
                driver/linux/ap8xLnxStat.o              \
                driver/linux/ap8xLnxWlLog.o     \
                driver/linux/ap8xLnxDump.o

$(API-OBJS)     += \
                core/api/wlFun.o                \
                core/api/wlApi.o

$(AP-OBJS)      += \
                core/dbg/wldebug.o              \
                core/encr/aes_key_wrap.o \
                core/encr/hmac_md5.o \
                core/encr/prfapi.o \
                core/encr/pbkdf2.o \
                core/encr/md5.o \
                core/encr/sha1.o \
                core/encr/tkip.o \
                core/encr/AP/ccmpAP.o \
                core/encr/AP/keyMgmt.o \
                core/encr/AP/tkipAP.o \
                core/wlsys/bcngen.o \
                core/wlsys/hal_mib.o \
                core/wlsys/hal_sys.o \
                core/wlsys/w81init.o \
                core/mgt/mhsm.o \
                core/mgt/List.o \
                core/mgt/timer.o \
                core/mgt/AP/AssocSrvAp.o \
                core/mgt/AP/AuthSrvAp.o \
                core/mgt/AP/idList.o \
                core/mgt/AP/macmgmtap.o \
                core/mgt/AP/macMgmtEvt.o \
                core/mgt/AP/macMgmtMlme.o \
                core/mgt/AP/mlmeApi.o \
                core/mgt/AP/mlmeAuth.o \
                core/mgt/AP/smeMain.o \
                core/mgt/AP/StaDb.o \
                core/mgt/AP/SyncSrvAp.o \
                core/mgt/AP/util.o \
                core/mgt/AP/wlMlmeSrv.o \
                core/mib/mib.o \
                core/mib/wl_mib.o \
                core/os/os_if.o \
                core/qos/qos.o \
                core/qos/qos_back.o \
                core/qos/AP/qos_dlp.o \
                core/qos/AP/qos_scheduler.o \
                core/wlsys/domain.o \
                core/wlsys/packet.o \
                core/wlsys/fragment.o \
                core/wlsys/autochannel.o \
                core/mgt/AP/dfsSM.o \
                core/mgt/AP/dfsEv.o \
                core/wds/wds.o

ifeq (1, $(BUILD_CLIENT))
$(AP-OBJS)      += \
                core/mgt/STA/AssocSta_sm.o \
                core/mgt/STA/AssocSta_srv.o \
                core/mgt/STA/AuthSta_sm.o \
                core/mgt/STA/AuthSta_srv.o \
                core/mgt/STA/SyncSta_sm.o \
                core/mgt/STA/SyncSta_srv.o \
                core/mgt/STA/macMgmtEvtSta.o \
                core/mgt/STA/smeStateMgrSta.o \
                core/mgt/STA/mlmeApiSta.o \
                core/mgt/STA/wlvmac.o \
                core/mgt/STA/child_srv.o \
                core/mgt/STA/parent_srv.o \
                core/mgt/STA/wlMlmeSrvSta.o \
                core/wlsys/linkmgt.o \
                core/wlsys/ewb_hash.o \
                core/wlsys/ewb_packet.o \
                core/encr/STA/keyMgmtSta.o
endif

obj-m += ap8x.o

clean:
        rm -f *.o *.a *.s *.ko *.ko.cmd *.o.cmd *.mod.* .ap8x.* $(ap8x-objs)
        find . -name .*.o.cmd -exec rm -f {} \;</code></pre></div><p>After that you will have to choose to build this kernel driver in OpenWRT menuconfig</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 676 to 675 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 27 of 598</div><nav><ul><li><a href="viewtopic.php%3Fid=50173&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=25.html">25</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=26.html">26</a></li><li class="pagination-current"><span>27</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=28.html">28</a></li><li><a href="viewtopic.php%3Fid=50173&amp;p=29.html">29</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50173&amp;p=598.html">598</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>