<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [How To] have DynDns working ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p144580">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">miguipda</div>
					<div class="post-datetime">
						27 Sep 2011, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I created a DynDNS free host on <a href="http://www.dyndns.org">www.dyndns.org</a></p><p>I well installed ddns-scripts end the luci dns management.<br />On luci I well specified the hostname and password. Nothing works.</p><p>Here is my /etc/config/ddns file content (Previously I used network as ip_source and wan as ip_interface. Idem=does not work)</p><p>config &#039;service&#039; &#039;myddns&#039;<br />&nbsp; &nbsp; option &#039;service_name&#039; &#039;dyndns.org&#039;<br />&nbsp; &nbsp; option &#039;force_interval&#039; &#039;72&#039;<br />&nbsp; &nbsp; option &#039;force_unit&#039; &#039;hours&#039;<br />&nbsp; &nbsp; option &#039;check_unit&#039; &#039;minutes&#039;<br />&nbsp; &nbsp; option &#039;username&#039; &#039;watercolorsgallery&#039;<br />&nbsp; &nbsp; option &#039;password&#039; &#039;XXXXXXXX&#039;<br />&nbsp; &nbsp; option &#039;enabled&#039; &#039;1&#039;<br />&nbsp; &nbsp; option &#039;check_interval&#039; &#039;5&#039;<br />&nbsp; &nbsp; option &#039;domain&#039; &#039;bigmama57.dyndns.org&#039;<br />&nbsp; &nbsp; option &#039;ip_source&#039; &#039;interface&#039;<br />&nbsp; &nbsp; option &#039;ip_interface&#039; &#039;eth0.1&#039;</p><br /><br /><p>Here is my /etc/config/network file content</p><p>config &#039;switch&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; option &#039;enable&#039; &#039;1&#039;</p><p>config &#039;switch_vlan&#039; &#039;eth0_0&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; option &#039;vlan&#039; &#039;0&#039;<br />&nbsp; &nbsp; option &#039;ports&#039; &#039;1 2 3 4 5&#039;</p><p>config &#039;switch_vlan&#039; &#039;eth0_1&#039;<br />&nbsp; &nbsp; option &#039;device&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; option &#039;vlan&#039; &#039;1&#039;<br />&nbsp; &nbsp; option &#039;ports&#039; &#039;0 5&#039;</p><p>config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0.0&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.2.1&#039;<br />&nbsp; &nbsp; option &#039;defaultroute&#039; &#039;0&#039;<br />&nbsp; &nbsp; option &#039;peerdns&#039; &#039;0&#039;</p><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0.1&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;dhcp&#039;</p><br /><br /><p>How can I get dyndns working on my routeur (OpenWRT Backfire) ?</p><p>Sincerely thanks and have a nice day,</p><p>Miguipda ;-)</p>											<p class="post-edited">(Last edited by <strong>miguipda</strong> on 28 Jan 2012, 13:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144588">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						27 Sep 2011, 13:06					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/doc/howto/ddns.client">DDNS Client - OpenWrt Wiki</a><br /></p><div class="quotebox"><blockquote><p>Source of IP-address: Network<br />Network/Interface/URL: wan</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144620">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">miguipda</div>
					<div class="post-datetime">
						27 Sep 2011, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>Dear fyi,</p><p>I previously had those Network and wan settings. But as I saw in other explaination I tried it. But it saty the same.</p><p>As I can see the IP hostname in the dyndns.org website does not change when my router receive a new IP.<br />And even if I change it manually on my dyndns host settings (on their website) if I try to join the hostname URL it is turning and turning without finding my hostname.</p><p>Then may be does it comes from the firewall on the router. I am not so sure. And I also do not understand why it does not catch the changed IP.</p><p>Sincerely thanks for your help and have a nice day.</p><p>Miguipda ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144625">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">adam2104</div>
					<div class="post-datetime">
						27 Sep 2011, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>What do you see if you try to run the update manually via the CLI?</p><div class="codebox"><pre><code>/usr/lib/ddns/dynamic_dns_updater.sh myddns</code></pre></div><p>I compared your DDNS config to mine, which is working, and I don&#039;t see any significant difference. Please try testing the above manually and pasting the config.</p><p>Also, if those are your real passwords you probably want to edit the posts to remove them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p147594">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">uqbar</div>
					<div class="post-datetime">
						4 Nov 2011, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>root@OfficeGW:~# /usr/lib/ddns/dynamic_dns_updater.sh myddns<br />update_url=http://[USERNAME]:[PASSWORD]@members.dyndns.org/nic/update?hostname=[DOMAIN]&amp;myip=[IP]<br />force seconds = 259200<br />check seconds = 600<br />time_since_update = 144 hours<br />Running IP check...<br />current system ip = A PUBLIC IP<br />registered domain ip = ANOTHER PUBLIC IP<br />update necessary, performing update ...<br />updating with url=&quot;http://[USERNAME]:[PASSWORD]@members.dyndns.org/nic/update?hostname=[MYHOST].dyndns.org&amp;myip=A PUBLIC IP&quot;<br />Connecting to members.dyndns.org (204.13.248.111:80)<br />-&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 100% |***********************************************************************************************************************************|&nbsp; &nbsp; 14&nbsp; --:--:-- ETA<br />Update Output:<br />good A PUBLIC IP</p><p>update complete, time is: Fri Sep 9 22:06:05 CEST 2011</p><br /><p>It&#039;s definitely GOOD, but nonetheless, the OpenWRT box doesn&#039;t update it!</p>											<p class="post-edited">(Last edited by <strong>uqbar</strong> on 4 Nov 2011, 17:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155603">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Dragon31337</div>
					<div class="post-datetime">
						28 Jan 2012, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>Is there a way to check update status in LuCi?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155645">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						28 Jan 2012, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>Running in very good condition, no problem at all :</p><div class="codebox"><pre><code>root@OpenWrt:~# /usr/lib/ddns/dynamic_dns_updater.sh myddns
update_url=http://freedns.afraid.org/dynamic/update.php?[PASSWORD]&amp;address=[IP]
force seconds = 259200
check seconds = 600
old process id (if it exists) = &quot; 2853 root 1604 S {dynamic_dns_upd} /bin/sh /usr/lib/ddns/dynamic_dns_&quot;
time_since_update = 0 hours
Running IP check...
current system ip = 18x.251.102.xxx
registered domain ip = 18x.251.102.xxx
update unnecessary
time since last update = 0 hours
the time is now Sat Jan 28 16:34:50 UTC 2012</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157023">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tomkarlo</div>
					<div class="post-datetime">
						11 Feb 2012, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>I am having the same problem, Openwrt doesnt update dyndns by itself, and running the script manualu works...</p><p>Can somebody help, please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158698">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">pabloalonso</div>
					<div class="post-datetime">
						25 Feb 2012, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi mates,</p><p>I&#039;m having right now same issue !!!</p><p>Maybe is just needed to add a line with the manual script in crontab ??<br />please someone more experimented with this, give a little help here.</p><p>this manual command provided by adam, worked good so far with my actual config: /usr/lib/ddns/dynamic_dns_updater.sh myddns</p><p>thanks<br />Regards,<br />Pablo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159094">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ceekee</div>
					<div class="post-datetime">
						29 Feb 2012, 13:03					</div>
				</div>
				<div class="post-content content">
					<p>I think you have to put the following lines in the startup: (see wiki)</p><p>Trying it out</p><p>The script runs when hotplug events happen or a monitored IP address changes, so initially, you have to start it manually. After setting &quot;enabled&quot; to 1, run the following:<br /></p><div class="codebox"><pre><code>sh
. /usr/lib/ddns/dynamic_dns_functions.sh # note the leading period
start_daemon_for_all_ddns_sections &quot;wan&quot;
exit</code></pre></div><p>I have put these lines in the startup.</p><p>After reboot the result is : PS -a</p><div class="codebox"><pre><code>2659 root      1600 S    {dynamic_dns_upd} /bin/sh /usr/lib/ddns/dynamic_dns_
2660 root      1600 S    {dynamic_dns_upd} /bin/sh /usr/lib/ddns/dynamic_dns_</code></pre></div>											<p class="post-edited">(Last edited by <strong>ceekee</strong> on 29 Feb 2012, 13:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159124">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">pabloalonso</div>
					<div class="post-datetime">
						29 Feb 2012, 16:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi ceekee !<br />thanks for your input!</p><p>it seems now to be partially working.<br />my $ ps -a throws this:<br /> 1011 root&nbsp; &nbsp; &nbsp; 1468 S&nbsp; &nbsp; /bin/sh /usr/lib/ddns/dynamic_dns_updater.sh myddns 0</p><p>(your output seems to be cutted, check this out in your previous post)<br />and you have two lines, why?</p><p>My only issue that still remains.... now seems to be working only when the router reboots, but when I unplug and re-plug the wan cable seems to do nothing! even the ip having changed, of course.</p><p>any other hint for this ?</p><p>thanks!!!<br />regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159196">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">ceekee</div>
					<div class="post-datetime">
						1 Mar 2012, 13:19					</div>
				</div>
				<div class="post-content content">
					<p>@pabloalonso</p><br /><p>Have you updated the parameters for myddns as mentioned in the starting post?</p><p>You can also modify the following two functions in (Thanks to dash17291)</p><p>/usr/lib/ddns/dynamic_dns_functions.sh</p><br /><div class="codebox"><pre><code>verbose_echo()
{
if [ &quot;$verbose_mode&quot; = 1 ]
then
logger -t ddns-scripts $1
fi
}

start_daemon_for_all_ddns_sections()
{
SECTIONS=&quot;&quot;
config_cb()
{
SECTIONS=&quot;$SECTIONS $2&quot;
}
config_load &quot;ddns&quot;

for section in $SECTIONS
do
/usr/lib/ddns/dynamic_dns_updater.sh $section 1 &gt; /dev/null 2&gt;&amp;1 &amp;
done
}</code></pre></div><p>On the CLI: command:&nbsp; ifup wan</p><p>Then you can see in your system log what the process is doing:</p><div class="codebox"><pre><code>Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: update_url=http://[USERNAME]:[PASSWORD]@nic.changeip.com/nic/update?u=[USERNAME]&amp;p=[PASSWORD]&amp;cmd=update&amp;hostname=[DOMAIN]&amp;ip=[IP]
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: force seconds = 259200
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: update_url=http://[USERNAME]:[PASSWORD]@members.dyndns.org/nic/update?hostname=[DOMAIN]&amp;myip=[IP]
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: force seconds = 86400
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: check seconds = 600
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: check seconds = 600
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: old process id (if it exists) = &quot; 1889 root 1600 S {dynamic_dns_upd} /bin/sh /usr/lib/ddns/dynamic_dns_&quot;
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: old process id (if it exists) = &quot; 1890 root 1600 S {dynamic_dns_upd} /bin/sh /usr/lib/ddns/dynamic_dns_&quot;
Mar  1 12:30:00 OpenWrt user.notice ddns-scripts: time_since_update = 1 hours</code></pre></div>											<p class="post-edited">(Last edited by <strong>ceekee</strong> on 1 Mar 2012, 14:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159207">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">pabloalonso</div>
					<div class="post-datetime">
						1 Mar 2012, 14:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ceekee wrote:</cite><blockquote><p>@pabloalonso</p><br /><p>Have you updated the parameters for myddns as mentioned in the starting post?</p><p>You can also modify the following two functions in (Thanks to dash17291)</p><p>/usr/lib/ddns/dynamic_dns_functions.sh</p></blockquote></div><p>Hi ceekee</p><p>I have both /etc/config/ddns and network configs looking good (identical post 1)<br />I have in some startup script the ddns-scripts because after normal boot the router has the process started (it appears in ps -a |grep ddns) as I have shared in my previous post.<br />Now if I execute the commands: ifup wan / or / ACTION=ifup INTERFACE=wan /sbin/hotplug-call iface (as stated in <a href="http://wiki.openwrt.org/doc/howto/ddns.client)">http://wiki.openwrt.org/doc/howto/ddns.client)</a><br />the ddns-script updates immediately and successfully transfers my current ip number to my dyndns.com account.</p><p>BUT</p><p>if I manually unplugg the WAN adapter from my router or ISP Modem end, and wait a few seconds and replug it again (having changed my dyndns ip address manually, when I replug do not happen nothing at all !)</p><p>that is my current problem right now, updates seems to work only when router reboots or when I manually run the script or executes both commands provided above.</p><p>Any idea what could I do or modify to solve this ? Maybe it is simply not possible, I do not fully understand what triggers the script...</p><p>Thank you again very much for your time and help !!!<br />regards</p><p>Pablo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159208">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ceekee</div>
					<div class="post-datetime">
						1 Mar 2012, 14:56					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps if you modify the script, you can see the logging</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>