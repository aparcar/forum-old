<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dis assembling flash image</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p130608">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pale</div>
					<div class="post-datetime">
						13 Mar 2011, 02:58					</div>
				</div>
				<div class="post-content content">
					<p>Not technically openWRT stuff , but I know you guys know what you are doing and might be able to help me<br />I am trying to alter the flash image on a emprex nsd-100 . </p><p>in /dev I have </p><p>mtdblock0<br />mtdblock1<br />mtdblock2<br />mtdblock3</p><p>in dmesg i have</p><p>0x00000000-0x00020000 : &quot;Armboot&quot;<br />0x00020000-0x007e0000 : &quot;Kernel &amp; Ramdisk&quot;<br />0x007e0000-0x00800000 : &quot;configure&quot;<br />0x001a0000-0x007c0000 : &quot;squashfs&quot;</p><p>/dev/mtdblock3 is the squashfs</p><p>In root i typed</p><p>[root@FA520]# dd if=/dev/mtdblock3 of=/mnt/data/public/squash.fs</p><p>to create a file that is an image of the block of flash that is the squashfs .</p><p>I also did the same for the configure section.</p><p>But I am unable to open either file . When I run up either &quot;hexedit 4.2&quot; or &quot;xvi32&quot; in windows they both either refuse to open the file or crash. <br />How can a hex editor refuse to open the file. its contents is irrelevant!!</p><p>Am I using dd wrong? these files are initially saved on a drive that is formatted xsf and I access them via samba. Copying them to the windows drive first makes no difference.</p><p>My goal is to open the squashfs alter it slightly so that one of the startup scripts runs a script on the external hard disc then copy it back. </p><p>At the moment the only way to get root access is to run preexec in the samba config and get that to start a terminal server , but this only runs if you access the samba share, thus this needs to be done every boot. I would like to get the system to automatically start the apps I have installed in the debian I have bolted on the side of the system. Just running one script on the harddisc at boot is all I need.</p><p>Or can I cut the squashfs out of the flash image file used for updating the device. I have this . It is 8 meg long but the device has 16 meg flash. Any idea where the start point would be ie 0x001a0000 ?&nbsp; does the flash update software flash in one contiguous lump.</p><br /><p>Thanks&nbsp; </p><p>Pale</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130640">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pale</div>
					<div class="post-datetime">
						13 Mar 2011, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>This works fine on my emprex me1.&nbsp; I dont understand how i can copy the file around but i cant open it. I tried it in the debian environment as well with the same result ?</p><p>Managed to open the files with a 3rd editor. still puzzled though</p>											<p class="post-edited">(Last edited by <strong>pale</strong> on 13 Mar 2011, 17:19)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>