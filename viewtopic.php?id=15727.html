<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> sierrawireless on 2.4?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p68431">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						20 May 2008, 03:45					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to get a USB EVDO modem to work with OpenWRT. From looking around it looks like what I need to make this happen is the kmod-usb-serial-sierrawireless package. The problem is, this package doesn&#039;t seem to be available for the 2.4 kernel which I&#039;m using (it shows up in the package lists for at least most of the 2.6 builds, but not for the 2.4 build). Are there any plans to port this or any reason why it hasn&#039;t been ported to 2.4? </p><p>TIA</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68566">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						22 May 2008, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>Anyone know where I can find the source for this package? I&#039;ve tried looking through the packages on the source browser but it doesn&#039;t seem to be there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68568">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						22 May 2008, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re right, it doesn&#039;t exist in the main tree - mainly because my patch hasn&#039;t been incorporated yet.</p><p><a href="http://article.gmane.org/gmane.comp.embedded.openwrt.devel/1240">http://article.gmane.org/gmane.comp.emb … devel/1240</a><br /><a href="http://article.gmane.org/gmane.comp.embedded.openwrt.devel/1239">http://article.gmane.org/gmane.comp.emb … devel/1239</a><br /><a href="http://article.gmane.org/gmane.comp.embedded.openwrt.devel/1241">http://article.gmane.org/gmane.comp.emb … devel/1241</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68621">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						23 May 2008, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the patch. I&#039;m trying to build with the latest trunk (11250) with your patches. I&#039;ve added the first one to the patches directory and applied the second one (removing the 2.6 dependency from the usb.mk file) manually. However when building I get a warning &quot;WARNING: kmod-usb-serial-sierrawireless is not available in the kernel config&quot; and the package is not built. I thought maybe it was because I was building for the Asuswl500gp but when I changed it to your target platform I get the same result. Is there something else I need to do to get the patch to work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68623">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						23 May 2008, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>The two patches are both against the root of trunk, the first is a &#039;meta&#039; patch, adding patch files itself to the patches directory.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68794">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						27 May 2008, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the tip, I was able to get it to compile now. </p><p>Is that driver strictly for the PCMCIA cards that you can get for the G3G? I&#039;m trying to get a USB modem (Sierra Wireless Compass 597) to work and no luck so far.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69073">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						3 Jun 2008, 00:51					</div>
				</div>
				<div class="post-content content">
					<p>No, it should be for all of them.&nbsp; I didn&#039;t write it, however, and only tested against PCMCIA cards, but all the modern Sierra Wireless modems are either USB or have an internal USB hub that uses the physical bus they connect over.&nbsp; That particular driver may not have the right vendor &amp; product ID for the &quot;wireless compass 597&quot;, as I&#039;ve never heard of it before.&nbsp; Is it rather new?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69077">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						3 Jun 2008, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>It is quite new. It was introduced in April. Sprint has end-of-life&#039;ed all of their other usb modems though. The only other option is the Novatel U727 which is more expensive and also quite new I think. </p><p>It did not have the right v/p ids. I added them in (v=0x1199,p=0x0023) but no luck. </p><p>I also heard that it is likely that the internal virtual cdrom drive the device has containing its windows drivers may be causing problems preventing the modem from being detected and installed properly. I haven&#039;t gone down that route very far yet, but it looks like the fix for that issue might involve adding an entry to the drivers/usb/storage/unusual_devs.h list to prevent the kernel from trying to load that virtual cdrom drive.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69079">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">pric0112</div>
					<div class="post-datetime">
						3 Jun 2008, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>I suspect this is required to make this device work. Unfortunately it is only in the 2.6 kernel. The only symbol that is undefined in the 2.4 source is the US_FL_IGNORE_DEVICE. </p><p>found in <a href="http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=blob_plain;f=drivers/usb/storage/unusual_devs.h;hb=HEAD">http://git.kernel.org/?p=linux/kernel/g … .h;hb=HEAD</a><br /></p><div class="codebox"><pre><code>/* Reported by Kevin Lloyd &lt;linux@sierrawireless.com&gt;
 * Entry is needed for the initializer function override,
 * which instructs the device to load as a modem
 * device.
 */
UNUSUAL_DEV(  0x1199, 0x0fff, 0x0000, 0x9999,
        &quot;Sierra Wireless&quot;,
        &quot;USB MMC Storage&quot;,
        US_SC_DEVICE, US_PR_DEVICE, NULL,
        US_FL_IGNORE_DEVICE),</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69086">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						3 Jun 2008, 06:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pric0112 wrote:</cite><blockquote><p>I suspect this is required to make this device work. Unfortunately it is only in the 2.6 kernel. The only symbol that is undefined in the 2.4 source is the US_FL_IGNORE_DEVICE.</p></blockquote></div><p>Not having looked at the relevant code, I would venture a guess it&#039;s non-trivial to backport, as most code I&#039;ve looked at has seemed to me.&nbsp; Even so, you should be able to avoid problems with other drivers if you&#039;re careful about the loading order.</p><p>Why must you use the 2.4 kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69090">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">windage</div>
					<div class="post-datetime">
						3 Jun 2008, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>I guess I should have looked into this thread instead of starting a new one. <a href="http://forum.openwrt.org/viewtopic.php?id=15874">http://forum.openwrt.org/viewtopic.php?id=15874</a><br />I believe he wants to use kernal 2.4 because 2.6 in the asus 500gp doesn&#039;t support the existing broadcom wireless card. I realized I am in the same vote. I might be wrong though.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>