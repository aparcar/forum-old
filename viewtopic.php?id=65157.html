<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Simple NOT! need to set up simple USB drive share</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p326173">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>I have a 5TB external drive I just want to plug in OpenWRT and be able to access via Windows Network share.&nbsp; &nbsp;Sounds like it might be a popular option but if so I can&#039;t find an up to date for Chaos Calmer cook-book to configure it.&nbsp; At least I can&#039;t make it work.</p><p>Here are my info sources I am using as a guide:<br /><a href="https://wiki.openwrt.org/doc/uci/samba">https://wiki.openwrt.org/doc/uci/samba</a><br /><a href="https://wiki.openwrt.org/_detail/media/usb-storage-samba-webinterface-mountpoint.png?id=doc%3Arecipes%3Ausb-storage-samba-webinterface">https://wiki.openwrt.org/_detail/media/ … binterface</a><br /><a href="http://www.geektalks.org/setup-usb-drive-and-sambanas-on-openwrt-from-scratch/">http://www.geektalks.org/setup-usb-driv … m-scratch/</a><br /><a href="https://wiki.openwrt.org/doc/howto/extroot">https://wiki.openwrt.org/doc/howto/extroot</a></p><p>Now #1 I am not too swift on Linux.&nbsp; &nbsp;I know not even the concept of &quot;mount&quot;.&nbsp; &nbsp;I am able to configure by following cook-book style configuration but I can&#039;t make this work.</p><p>I installed all the extra packages that each of these guides called for to use Samba just to be sure I had everything.&nbsp; &nbsp;But still I can&#039;t make it work.</p><p>Software Installed:<br /></p><div class="codebox"><pre><code>base-files - 157-r46767
block-mount - 2015-05-24-09027fc86babc3986027a0e677aca1b6999a9e14
busybox - 1.23.2-1
ddns-scripts - 2.4.3-1
dnsmasq - 2.73-1
dropbear - 2015.67-1
firewall - 2015-07-27
fstools - 2015-05-24-09027fc86babc3986027a0e677aca1b6999a9e14
hd-idle - 1.04-1
hostapd-common - 2015-03-25-1
ip6tables - 1.4.21-1
iptables - 1.4.21-1
iw - 3.17-1
jshn - 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8
jsonfilter - 2014-06-19-cdc760c58077f44fc40adbbe41e1556a67c1b9a9
kernel - 3.18.20-1-7bed08fa9c06eb8089e82c200340ec66
kmod-ath - 3.18.20+2015-03-09-3
kmod-ath9k - 3.18.20+2015-03-09-3
kmod-ath9k-common - 3.18.20+2015-03-09-3
kmod-cfg80211 - 3.18.20+2015-03-09-3
kmod-crypto-aes - 3.18.20-1
kmod-crypto-arc4 - 3.18.20-1
kmod-crypto-core - 3.18.20-1
kmod-fs-exfat - 3.18.20+git-20150301-1
kmod-fs-ntfs - 3.18.20-1
kmod-fs-vfat - 3.18.20-1
kmod-gpio-button-hotplug - 3.18.20-1
kmod-ip6tables - 3.18.20-1
kmod-ipt-conntrack - 3.18.20-1
kmod-ipt-core - 3.18.20-1
kmod-ipt-nat - 3.18.20-1
kmod-ipv6 - 3.18.20-1
kmod-ledtrig-usbdev - 3.18.20-1
kmod-lib-crc-ccitt - 3.18.20-1
kmod-mac80211 - 3.18.20+2015-03-09-3
kmod-nf-conntrack - 3.18.20-1
kmod-nf-conntrack6 - 3.18.20-1
kmod-nf-ipt - 3.18.20-1
kmod-nf-ipt6 - 3.18.20-1
kmod-nf-nat - 3.18.20-1
kmod-nf-nathelper - 3.18.20-1
kmod-nls-base - 3.18.20-1
kmod-nls-cp437 - 3.18.20-1
kmod-nls-iso8859-1 - 3.18.20-1
kmod-ppp - 3.18.20-1
kmod-pppoe - 3.18.20-1
kmod-pppox - 3.18.20-1
kmod-scsi-core - 3.18.20-1
kmod-slhc - 3.18.20-1
kmod-tun - 3.18.20-1
kmod-usb-core - 3.18.20-1
kmod-usb-ohci - 3.18.20-1
kmod-usb-storage - 3.18.20-1
kmod-usb-storage-extras - 3.18.20-1
kmod-usb-uhci - 3.18.20-1
kmod-usb2 - 3.18.20-1
libblobmsg-json - 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8
libc - 0.9.33.2-1
libgcc - 4.8-linaro-1
libip4tc - 1.4.21-1
libip6tc - 1.4.21-1
libiwinfo - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371
libiwinfo-lua - 2015-06-01-ade8b1b299cbd5748db1acf80dd3e9f567938371
libjson-c - 0.12-1
libjson-script - 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8
liblua - 5.1.5-1
liblzo - 2.08-1
libnl-tiny - 0.1-4
libopenssl - 1.0.2g-1
libubox - 2015-06-14-d1c66ef1131d14f0ed197b368d03f71b964e45f8
libubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
libubus-lua - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
libuci - 2015-04-09.1-1
libuci-lua - 2015-04-09.1-1
libxtables - 1.4.21-1
lua - 5.1.5-1
luci - git-15.248.30277-3836b45-1
luci-app-ddns - 2.2.4-1
luci-app-firewall - git-15.248.30277-3836b45-1
luci-app-samba - git-15.248.30277-3836b45-1
luci-base - git-15.248.30277-3836b45-1
luci-i18n-samba-en - git-15.248.30277-3836b45-1
luci-lib-ip - git-15.248.30277-3836b45-1
luci-lib-nixio - git-15.248.30277-3836b45-1
luci-mod-admin-full - git-15.248.30277-3836b45-1
luci-proto-ipv6 - git-15.248.30277-3836b45-1
luci-proto-ppp - git-15.248.30277-3836b45-1
luci-theme-bootstrap - git-15.248.30277-3836b45-1
mtd - 21
netifd - 2015-06-08-8795f9ef89626cd658f615c78c6a17e990c0dcaa
odhcp6c - 2015-07-13-024525798c5f6aba3af9b2ef7b3af2f3c14f1db8
odhcpd - 2015-05-21-2ebf6c8216287983779c8ec6597d30893b914a7c
openssl-util - 1.0.2g-1
openvpn-easy-rsa - 2013-01-30-2
openvpn-openssl - 2.3.6-5
opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-7
ppp - 2.4.7-6
ppp-mod-pppoe - 2.4.7-6
procd - 2015-08-16-0da5bf2ff222d1a499172a6e09507388676b5a08
rpcd - 2015-05-17-3d655417ab44d93aad56a6d4a668daf24b127b84
samba36-server - 3.6.25-5
swconfig - 10
uboot-envtools - 2014.10-2
ubox - 2015-07-14-907d046c8929fb74e5a3502a9498198695e62ad8
ubus - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
ubusd - 2015-05-25-f361bfa5fcb2daadf3b160583ce665024f8d108e
uci - 2015-04-09.1-1
uhttpd - 2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73
uhttpd-mod-ubus - 2015-08-17-f91788b809d9726126e9cf4384fedbbb0c5b8a73
usign - 2015-05-08-cf8dcdb8a4e874c77f3e9a8e9b643e8c17b19131
wpad-mini - 2015-03-25-1
zlib - 1.2.8-1</code></pre></div><p>I created a new user per:<br /></p><div class="codebox"><pre><code>root:!:0:0:root:/root:/bin/ash
nobody:*:65534:65534:nobody:/var:/bin/false
daemon:*:65534:65534:daemon:/var:/bin/false
newuser:*:1000:65534:newuser:/var:/bin/false</code></pre></div><p>On Windows, I can go to network, see my OpenWrt router in the available network resources along with other PC file shares on my network.&nbsp; &nbsp;I click the OpenWRT link and I can see a directory under the name of the new userID I created, plus I can see a share &quot;F-drive&quot; share that I created which has a share directory of &quot;/&quot;</p><p>Under each of these appears to be a Linux like directory tree of folders and files but the USB drive plugged in is no where to be found in this list (under mnt as I understand it should be????) .&nbsp; &nbsp; Searching further, I found this <a href="https://wiki.openwrt.org/doc/recipes/usb-storage-samba-webinterface">https://wiki.openwrt.org/doc/recipes/us … binterface</a> and following that guide, I do not see my USB drive listed under &quot;Mount Points&quot;.&nbsp; &nbsp;It&#039;s just a blank list.&nbsp; &nbsp;What might I be doing wrong?&nbsp; &nbsp; The drive is a 5TB USB 3 and 2.0 compatible drive.&nbsp; &nbsp; I can see the files on it when I plug it in the laptop.&nbsp; &nbsp;(Please note the RANK Linux amateur status)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326174">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						28 May 2016, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi¡¡<br />you have created a directory in /mnt?<br />if you have not done Make it (console)<br /># mkdir /mnt/usb5t for example<br />now give these permissions<br /># chmod 777 /mnt/usb5t<br />Now in blockmount (Luci) mount the disk on that directory<br />cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326176">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 00:42					</div>
				</div>
				<div class="post-content content">
					<p>Thank you... OK, I did that, this is what I get from &quot;System&quot;, &quot;Mount Points&quot;:</p><div class="codebox"><pre><code>Mount Points
Mounted file systems
Filesystem    Mount Point    Available    Used
            
rootfs
    
/
    
25.08 MB / 28.31 MB
    
11% (3.23 MB)
/dev/root
    
/rom
    
0.00 B / 2.25 MB
    
100% (2.25 MB)
tmpfs
    
/tmp
    
60.57 MB / 61.62 MB
    
2% (1.05 MB)
/dev/mtdblock8
    
/overlay
    
25.08 MB / 28.31 MB
    
11% (3.23 MB)
overlayfs:/overlay
    
/
    
25.08 MB / 28.31 MB
    
11% (3.23 MB)
tmpfs
    
/dev
    
512.00 KB / 512.00 KB
    
0% (0.00 B)
Mount Points
Mount Points define at which point a memory device will be attached to the filesystem
Enabled    Device    Mount Point    Filesystem    Options    Root    Check     
                            
    
? (not present)
    
?
    
?
    
defaults
    
no
    
no
    
SWAP
If your physical memory is insufficient unused data can be temporarily swapped to a swap-device resulting in a higher amount of usable RAM. Be aware that swapping data is a very slow process as the swap-device cannot be accessed with the high datarates of the RAM.
Enabled    Device     
        

This section contains no values yet

Powered by LuCI (git-15.248.30277-3836b45) / OpenWrt Chaos Calmer 15.05</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326178">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						28 May 2016, 01:09					</div>
				</div>
				<div class="post-content content">
					<p>Below the line are some of my install notes, which are based on a number of wikis, some of which you do not reference.&nbsp; The numbers in parens link the ipkg to the wiki.&nbsp; the file versions will probably be dated as this was from CC 15.05 RC2.&nbsp; I have not bumped your files up against the list below.</p><p>I never got NTFS to work and read much indicating that those that do find it slow.&nbsp; USB is slow compared to running off a PC.&nbsp; I use Vfat for devices I need to use on Windows, and EXT for those that I leave connected. </p><p>Wiki Articles<br />Basic USB Support (1)<br /><a href="http://wiki.openwrt.org/doc/howto/usb.essentials">http://wiki.openwrt.org/doc/howto/usb.essentials</a><br />USB Storage (2)<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a><br />Samba (3)<br /><a href="http://wiki.openwrt.org/doc/howto/cifs.server">http://wiki.openwrt.org/doc/howto/cifs.server</a><br />Share USB Hard-drive with Samba (4)<br /><a href="http://wiki.openwrt.org/doc/recipes/usb-storage-samba-webinterface">http://wiki.openwrt.org/doc/recipes/usb … binterface</a><br />NTFS RW (5)<br /><a href="http://wiki.openwrt.org/doc/howto/writable_ntfs">http://wiki.openwrt.org/doc/howto/writable_ntfs</a><br />Samba (smb) (6)<br /><a href="http://wiki.openwrt.org/doc/uci/samba">http://wiki.openwrt.org/doc/uci/samba</a><br />Linux Permissons on files and folders (7)<br /><a href="http://www.grymoire.com/Unix/Permissions.html">http://www.grymoire.com/Unix/Permissions.html</a><br />Block Mount (8)<br /><a href="http://wiki.openwrt.org/doc/techref/block_mount">http://wiki.openwrt.org/doc/techref/block_mount</a> <br />Partitioning, Formatting and Mounting Storage Devices<br /><a href="http://wiki.openwrt.org/doc/howto/storage">http://wiki.openwrt.org/doc/howto/storage</a> (9)<br />Fstab Configuration (10)<br /><a href="http://wiki.openwrt.org/doc/uci/fstab?s">http://wiki.openwrt.org/doc/uci/fstab?s</a>[]=enabled&amp;s[]=fsck</p><p>The following are packages that will need to be installed</p><p>USB Packages<br />------------<br />(1)kmod-usb-core (3.18.11-1)<br />(1)kmod-usb-uhci (3.18.11-1)<br />(1)kmod-usb-ohci (UHCI or OHCI depending on system)<br />(1)kmod-usb2 (3.18.11-1)</p><p>(2)kmod-usb-storage (3.18.11-1)<br />(2)kmod-scsi-core (3.18.11-1)&nbsp; &nbsp; =&gt; maybe not<br />(2)block-mount (2015-04-14-e6004000ff15d7bd32cf5663e8690fc94d7ec747)<br />File Systems<br />(2)kmod-fs-ext4 (3.18.11-1)&nbsp; &nbsp; &nbsp; &nbsp; Ext file systems<br />(2)kmod-fs-msdos (3.18.11-1)&nbsp; &nbsp; &nbsp; &nbsp; FAT&nbsp; &nbsp; =&gt; Test witout this<br />(2)kmod-fs-vfat (3.18.11-1)&nbsp; &nbsp; &nbsp; &nbsp; FAT<br />(2)kmod-fs-ntfs (3.18.11-1)&nbsp; &nbsp; &nbsp; &nbsp; NTFS&nbsp; &nbsp; =&gt; Test witout this<br />(5)ntfs-3g (2014.2.15-1-fuseint)&nbsp; &nbsp; NTFS<br />(5)fdisk (2.25.2-4)</p><p>(3)(4)samba36-server (3.6.25-3)<br />(3)(4)luci-app-samba (git-15.126.50380-7a54785-1)</p><p><a href="http://wiki.openwrt.org/doc/techref/block_mount">http://wiki.openwrt.org/doc/techref/block_mount</a> (8)<br />EXT4 needs:&nbsp; kmod-fs-ext4<br />(8)libext2fs <br />(8)kmod-fs-autofs4</p><p>VFAT Neeeds: kmod-fs-vfat AND<br />(8)kmod-nls-base&nbsp; (3.18.11-1)<br />(8)kmod-nls-cp437<br />(8)kmod-nls-iso8859-1<br />(8)kmod-nls-utf8</p><p>The following files will be &quot;touched&quot; and can be seen with WinSCP</p><p>etc\config\samba.conf<br />etc\config\fstab.conf<br />etc\config\firewall.conf<br />etc\samba\smb.conf<br />etc\samba\smb.conf.template</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326180">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>I am not sure what I just did to my router.&nbsp; &nbsp;I set it off in some kind of loop, using this command :</p><p>(from <a href="https://wiki.openwrt.org/doc/howto/extroot">https://wiki.openwrt.org/doc/howto/extroot</a> ):</p><p>mount /dev/sda1 /mnt ; tar -C /overlay -cvf - . | tar -C /mnt -xf - ; umount /mnt</p><p>Did I destroy anything by entering the command above?</p><p>.</p><div class="codebox"><pre><code>/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/upgrade/
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/upgrade/keep.d/
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/upgrade/keep.d/openvpn
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/ums-cypress.ko
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/ums-alauda.ko
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/nls_cp437.ko
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/ums-datafab.ko
./upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/mnt/upper/lib/modules/3.18.20/vfat.ko
^C</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326184">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						28 May 2016, 01:41					</div>
				</div>
				<div class="post-content content">
					<p>Once assembled and set to block-mount type this in console<br />in console put<br /># df -h<br />and<br /># mount<br />Put them here</p><p>NTFS is slower and consumes a lot of CPU but is now not the case. The case is simply mount a disk<br />extroot why???<br />cheers</p><p>###########edit#############<br />Like this<br /><span class="postimg"><img src="http://i65.tinypic.com/osgak6.jpg" alt="http://i65.tinypic.com/osgak6.jpg" /></span></p><p><span class="postimg"><img src="http://i65.tinypic.com/25qeofb.jpg" alt="http://i65.tinypic.com/25qeofb.jpg" /></span></p><p>follow my pointer <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>dimoni</strong> on 28 May 2016, 01:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326185">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>Note: I have replaced the 5TB drive with a 32G USB stick for testing, not wanting to wipe out my 5TB drive:</p><p>-----------------------------------------------------<br />root@Buffie:~# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28.3M&nbsp; &nbsp; &nbsp;16.0M&nbsp; &nbsp; &nbsp;12.4M&nbsp; 56% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.3M&nbsp; &nbsp; &nbsp; 2.3M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 61.6M&nbsp; &nbsp; &nbsp; 1.2M&nbsp; &nbsp; &nbsp;60.4M&nbsp; &nbsp;2% /tmp<br />/dev/mtdblock8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28.3M&nbsp; &nbsp; &nbsp;16.0M&nbsp; &nbsp; &nbsp;12.4M&nbsp; 56% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp;28.3M&nbsp; &nbsp; &nbsp;16.0M&nbsp; &nbsp; &nbsp;12.4M&nbsp; 56% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev</p><p>root@Buffie:~# mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)<br />/dev/mtdblock8 on /overlay type jffs2 (rw,noatime)<br />overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)<br />tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,relatime,mode=600)<br />debugfs on /sys/kernel/debug type debugfs (rw,noatime)<br />root@Buffie:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326186">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						28 May 2016, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>ntfs partitions will never be mounted automatically, you need to manually create mount point for it at System-&gt;Mount Points in your router web iface</p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 28 May 2016, 01:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326188">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						28 May 2016, 02:01					</div>
				</div>
				<div class="post-content content">
					<p>the 32G USB stick is not mounted see my pictures<br />you can see similar to that</p><div class="codebox"><pre><code>root@NAS1043ND:~# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                    4.6M      3.8M    808.0K  83% /
/dev/root                 2.3M      2.3M         0 100% /rom
tmpfs                    30.0M    828.0K     29.1M   3% /tmp
/dev/mtdblock3            4.6M      3.8M    808.0K  83% /overlay
overlayfs:/overlay        4.6M      3.8M    808.0K  83% /
tmpfs                   512.0K         0    512.0K   0% /dev
/dev/sdb1                 1.8T      1.4T    414.2G  77% /mnt/disco
/dev/sda1                14.5M     10.9M      2.4M  82% /mnt/mmcsis
/dev/sda2                10.6M      4.3M      5.5M  43% /mnt/mmc
root@NAS1043ND:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock3 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlayfs (rw,noatime,lowerdir=/,upperdir=/overlay)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
/dev/sdb1 on /mnt/disco type ext4 (rw,relatime,data=ordered)
/dev/sda1 on /mnt/mmcsis type ext4 (rw,relatime,data=ordered)
/dev/sda2 on /mnt/mmc type ext4 (rw,relatime,data=ordered)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
root@NAS1043ND:~#</code></pre></div><p>/dev/sdb1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8T&nbsp; &nbsp; &nbsp; 1.4T&nbsp; &nbsp; 414.2G&nbsp; 77% /mnt/disco<br />and<br />/dev/sdb1 on /mnt/disco type ext4 (rw,relatime,data=ordered)</p><p>This is my 1043v2<br />cheers</p>											<p class="post-edited">(Last edited by <strong>dimoni</strong> on 28 May 2016, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326206">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 07:59					</div>
				</div>
				<div class="post-content content">
					<p>As someone who understands only the most basic Linux file manipulation commands, this is way beyond my understanding.&nbsp; &nbsp;I can issue a &quot;mount&quot; command when I copy it off an instruction sheet, but that&#039;s about the extend of my knowledge.&nbsp; Also I searched quite extensively online and cannot find any ntfs-3g package to install.&nbsp; &nbsp;Thanks!</p><p>**** Even though I had refreshed the Opkg list several times today and attempted to install ntfs-3g, the package was never found.&nbsp; &nbsp;I tried it again just now and it installed!&nbsp; &nbsp; Not sure what is going on here.</p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 08:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326212">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 08:47					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@Buffie:/dev# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                   28.3M     16.2M     12.1M  57% /
/dev/root                 2.3M      2.3M         0 100% /rom
tmpfs                    61.6M    740.0K     60.9M   1% /tmp
/dev/mtdblock8           28.3M     16.2M     12.1M  57% /overlay
overlayfs:/overlay       28.3M     16.2M     12.1M  57% /
tmpfs                   512.0K         0    512.0K   0% /dev

root@Buffie:/dev# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock8 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)

root@Buffie:/dev# ntfs-3g /dev/sda1 /mnt/usb-ntfs -o rw,sync
NTFS signature is missing.
Failed to mount &#039;/dev/sda1&#039;: Invalid argument
The device &#039;/dev/sda1&#039; doesn&#039;t seem to have a valid NTFS.
Maybe the wrong device is used? Or the whole disk instead of a
partition (e.g. /dev/sda, not /dev/sda1)? Or the other way around?
root@Buffie:/dev#</code></pre></div><p><span class="postimg"><img src="http://s20.postimg.org/woglku39p/No_Mount.jpg" alt="http://s20.postimg.org/woglku39p/No_Mount.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 08:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326213">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 09:00					</div>
				</div>
				<div class="post-content content">
					<p>This is certainly no walk in the park, is it?</p><p>I think I got the thumb drive mounted .... maybe?&nbsp; &nbsp; Off to bed and will try my luck sharing it then tomorrow.</p><p><span class="postimg"><img src="http://s20.postimg.org/cv4hs4pvx/Usb_Thumb.jpg" alt="http://s20.postimg.org/cv4hs4pvx/Usb_Thumb.jpg" /></span></p><p>*** Thank you y muchos gracias to all those y todo personas who helped me que ayuda mi! </p><p>(But don&#039;t leave yet, I have yet to share :-0</p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 09:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326215">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						28 May 2016, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>Yeah¡¡<br />I&#039;am hapy to you<br />Now if you have it up and running i&#039;m glad, because basically with the disk of 5 Teras is the same process but instead of vfat serious with ntfs-3g in box where you told the usb vfat 32</p><p>####ahora si que lo tienes montado y funcionando me alegro, pues basicamente con el disco de 5 teras es el mismo proceso pero en vez de vfat seria con ntfs-3g en la casilla donde le dijiste vfat al usb de 32####</p><p>cheers/salut¡¡</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326237">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>OK, when I removed the USB thumb drive and plugged in the 5TB drive, this time when I click &quot;Add&quot; button I don&#039;t see the device listed in the UUID pull-down list like I did with the USB thumb drive.&nbsp; &nbsp; How do I get the NTFS 5TB drive to appear under the &quot;UUID:&quot; list under the option of &quot;Mount Entry&quot;?&nbsp; Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326240">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 16:27					</div>
				</div>
				<div class="post-content content">
					<p>What is it?&nbsp; &nbsp;The fool is the one who tries the same process over and over and expects a different result.&nbsp; &nbsp;Not with OpenWRT.&nbsp; &nbsp; Seriously, maybe it was the fact that I downloaded fdisk that made it work this time ...</p><p># ntfs-3g /dev/sda1 /mnt/usb5t -o rw,sync<br />The disk contains an unclean file system (0, 0).<br />The file system wasn&#039;t safely closed on Windows. Fixing</p><p>At last!&nbsp; the ntfs 5tb mounted!</p><p><a href="https://wiki.openwrt.org/doc/howto/writable_ntfs">https://wiki.openwrt.org/doc/howto/writable_ntfs</a></p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 16:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326243">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>Next: How to get this drive to spin down while not being accessed ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326252">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">dimoni</div>
					<div class="post-datetime">
						28 May 2016, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>in console<br /># opkg update<br /># opkg install hd-idle luci-app-hd-idle</p><p>or by Luci as you prefer</p><p>cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326260">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>Works great !&nbsp; &nbsp;Thanks to all who helped so graciously!&nbsp; &nbsp;This should get me started.&nbsp; &nbsp;I just tested and it spins down after the specified time once I configured it.&nbsp; &nbsp; Not an easy task for the untrained but hopefully this post will help someone else who&#039;s been afraid to try.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326262">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>So in summary it looks like the way this thing works is first you have to ensure you have the flash to hold all of these (I have a Buffalo router with 128M, would say forget it on anything smaller).&nbsp; If you have the space, then install the score of packages for usb support as illustrated by RangerZ, then using the additional valuable info above from dimoni, stas2z and others, the following has been my observation:</p><p>- installing the packages does basically nothing as far as showing you something new in your Mount Points menu<br />- you can create a mount for anything besides a ntfs drive by clicking &quot;ADD&quot; button and you should see the device appearing under UUID then and be able to easily then assign a mnt/Usbdevice name<br />- for a ntfs drive, you will not be able to see the Mount Points menu to control the ntfs drive or make it appear by any action, you have to use the ntfs-3g command to mount it originally, then use other portions of that tool to have the mount happen automatically at boot time or construct and install a script that serves as a &quot;hot mount&quot; mechanism (haven&#039;t tried this yet&quot;<br />- if the drive is an occasional use item and you want the drive to spin down when not in use, you will want to add the hd-idle package, and then either configure the control file for it in etc/config or use the luci graphical interface to customize it.</p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 19:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326269">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						28 May 2016, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>When you have the time can you run some speed tests on this.<br />I like this tool (windows) <a href="http://totusoft.com/lanspeed1/">http://totusoft.com/lanspeed1/</a></p><p>Your NTFS mount instructions may have been my issue with it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326289">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						28 May 2016, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>I spoke too soon.&nbsp; &nbsp;I tried your tool and it could never even close the file it wrote to the NetBios shared drive that it was trying to use to run the speed test.&nbsp; &nbsp; I used conventional drag and drop to copy a 122K file to the drive from my laptop and it took about 3 minutes to copy that small file.&nbsp; &nbsp; </p><p>So I would say that after all the effort, as it is it is unusable in its current implementation, because it is deathly slow.</p><p>***** Write speed was Mbps: 0.371040&nbsp; Read failed.</p><p>**** Update 2:&nbsp; This crawling speed encountered is via a Samba Netbios share to windows.&nbsp; If I use WinSCP to drag and drop a large file, the average speed while copying is 1,949 Kb/s (relatively fast)</p><p>**** Update 3: This 1,949 Kb/s was the download speed from the USB drive on the router.&nbsp; &nbsp; The upload speed is ~ 14,000 B/s&nbsp; (very, very slow)</p>											<p class="post-edited">(Last edited by <strong>DonJuane</strong> on 28 May 2016, 23:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326314">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						29 May 2016, 02:03					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately these results are in line with what I see.&nbsp; You may do better with other file systems, but the reality is they are all a magnitude or more slower than one sees attached to a PC.</p><p>Technically works, practically fails.&nbsp; </p><p>Not to different than wifi hotspots which seem to run between 1.5 and 2.5Mbps, and even slower under VPN.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326319">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">DonJuane</div>
					<div class="post-datetime">
						29 May 2016, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>Wonder how the little NAS Linux servers manage their drives with high speed data throughput?&nbsp; &nbsp;Maybe by not routing LOL.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326346">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">remlei</div>
					<div class="post-datetime">
						29 May 2016, 04:06					</div>
				</div>
				<div class="post-content content">
					<p>dont expect anything on OpenWRT&#039;s Samba, its terrible im telling you. You will be loosing about 80% of the actual speed you should be getting when running a windows OS with windows shares on it or a Ubuntu/Arch Linux vs a Plain OpenWRT.</p><p>In windows im getting full 120MB/s transfer speed samba using Windows and Arch Linux with only 20-25% CPU usage, while OpenWRT can only manage to get 30MB/s with one of the cores reaching 100% with average CPU usage of 35%. Tried applying some samba performance tweaking on it but non of them works.</p><p>im talking about a OS here hosting a WIndows Share aka Samba.</p>											<p class="post-edited">(Last edited by <strong>remlei</strong> on 29 May 2016, 04:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326359">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						29 May 2016, 07:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>remlei wrote:</cite><blockquote><p>dont expect anything on OpenWRT&#039;s Samba, its terrible im telling you. You will be loosing about 80% of the actual speed you should be getting when running a windows OS with windows shares on it or a Ubuntu/Arch Linux vs a Plain OpenWRT.</p><p>In windows im getting full 120MB/s transfer speed samba using Windows and Arch Linux with only 20-25% CPU usage, while OpenWRT can only manage to get 30MB/s with one of the cores reaching 100% with average CPU usage of 35%. Tried applying some samba performance tweaking on it but non of them works.</p><p>im talking about a OS here hosting a WIndows Share aka Samba.</p></blockquote></div><p>Is this the Arch Linux vs OpenWrt performance comparison on the same (x86 I presume) box? Or were you comparing performance of the x86/ARM Arch Linux with a SATA drive vs OpenWrt on low-power MIPS with USB-connected drive?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>