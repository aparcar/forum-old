<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Please help .. Want stock firmware back on my TP-L wr1043nd v2.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p226738">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">F4LLCON</div>
					<div class="post-datetime">
						3 Mar 2014, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello, my router suddenly started giving up on me. I only had 6Mbps download speed on WiFi, while normally I would have 122Mbps download speed. So I tried using OpenWrt, and flashed it, and went into the router with putty and turned on my WiFi, and the same speeds! So I decided to go back on the stock to figure out from there, but after using the method described on the website of OpenWrt, I get the message: &quot;Writing from wr1043v2_en_3_15_31.bin to firnware ... [e]Failed to erase block&quot;<br />The firmware name was &quot;wr1043v2_en_3_15_31_up_boot(130925).bin&quot; but I just renamed it to &quot;wr1043v2_en_3_15_31.bin&quot;. Is this where the problem starts? Could someone please help me out.. I am just to tired and frustrated.. Please help to get on stock again. </p><p>I have the TP-LINK wr1043nd v2.1, the dark blue one and I had &quot;wr1043v2_en_3_15_31_up_boot(130925)&quot; this firmware on it before upgrading to OpenWrt. I do not like the putty interface, and the internet speed is still low, so I want to go back.</p><p>Before 3.15.31 firmware, I had this one: (the stock firmware that came with the router while buying it) Firmware Version:&nbsp; &nbsp; <br />3.15.28 Build 130618 Rel.58493n<br />Hardware Version:&nbsp; &nbsp; <br />WR1043 v2 00000000</p><br /><p>Update: I just turned my router off, and on again, and now all the lights turn on, then they blink, and turn off, and the only lights staying on after blinking are the power, star and reload light. and it continues doing the same over and over again. I tried the 30/30/30 but didn&#039;t help. I can&#039;t connect to putty anymore</p><p>Oh.. please help.......</p>											<p class="post-edited">(Last edited by <strong>F4LLCON</strong> on 3 Mar 2014, 23:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226742">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Mar 2014, 23:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>F4LLCON wrote:</cite><blockquote><p>Update: I just turned my router off, and on again</p></blockquote></div><p>bad idea... </p><p>try this recovery mode to upload a SUITABLE tp-link firmware:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=46371">https://forum.openwrt.org/viewtopic.php?id=46371</a></p><p>suitable means you have to cut out uboot from firmware, or find an image without uboot...</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#back.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226744">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">F4LLCON</div>
					<div class="post-datetime">
						3 Mar 2014, 23:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><div class="quotebox"><cite>F4LLCON wrote:</cite><blockquote><p>Update: I just turned my router off, and on again</p></blockquote></div><p>bad idea... </p><p>try this recovery mode to upload a SUITABLE tp-link firmware:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=46371">https://forum.openwrt.org/viewtopic.php?id=46371</a></p><p>suitable means you have to cut out uboot from firmware, or find an image without uboot...</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#back.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a></p></blockquote></div><p>I can&#039;t figure out what to do on the first site linked, how should I try a recovery mode? I can&#039;t access my router anymore. </p><p>And I tried downloading with wget, but wget does not allow to download files with &#039;(&#039; and &#039;)&#039; in it, so how could I download the file and reformat it within the distro?</p><p>I am really lost....</p><br /><br /><p>Update: I managed to follow this post(https://forum.openwrt.org/viewtopic.php?pid=226754#p226754), until I had to put in some text to erase flash. There it went wrong. It is saying that end address not in flash. </p><p>I am at the point where i had to enter tpl to stop the rebooting. Now I want to enter the following steps;<br />9. Erase the firmware before writing it again using following command: erase 0xbf020000 +7c0000<br />but it says:<br />ap135&gt; erase 0xbf020000 +7c0000<br />erase 0xbf020000 +7c0000<br />Error: end address (0xbf7dffff) not in flash!<br />Bad address format<br />ap135&gt; erase 0xbf020000 +7c0000<br />erase 0xbf020000 +7c0000<br />Error: end address (0xbf7dffff) not in flash!<br />Bad address format<br />And with : tftpboot 0x81000000 code.bin it just is loading and then repeats T after T after T and then says retry count exceeded. So I think the tftp32 is not working? How to solve this part also?<br />Thank you...</p><p>i have the wr1043nd v2.1</p><br /><br /><br /><br /><br /><br /><p>___&quot;&quot;&quot;&quot;<br />What termite says after connecting before typing tpl:</p><p>U-Boot 1.1.4 (Sep 25 2013 - 08:43:53)<br />ap135 - Scorpion 1.0DRAM:&nbsp; <br />sri<br />Scorpion 1.0<br />ath_ddr_initial_config(178): (16bit) ddr2 init<br />tap = 0x00000003<br />Tap (low, high) = (0x0, 0x1c)<br />Tap values = (0xe, 0xe, 0xe, 0xe)<br />64 MB<br />Flash Manuf Id 0xef, DeviceId0 0x40, DeviceId1 0x17<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment<br />*** Warning *** : PCIe WLAN Module not found !!!<br />*** Warning *** : PCIe WLAN Module not found !!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ath_gmac_enet_initialize...<br />athrs_sgmii_res_cal: cal value = 0xe<br />No valid address in Flash. Using fixed address<br />No valid address in Flash. Using fixed address<br />ath_gmac_enet_initialize: reset mask:c02200 <br />Scorpion&nbsp; ----&gt; S17 PHY *<br />athrs17_reg_init: complete<br />: cfg1 0x80000000 cfg2 0x7114<br />eth0: ba:be:fa:ce:08:41<br />eth0 up<br />athrs17_reg_init_wan done<br />SGMII in forced mode<br />athr_gmac_sgmii_setup SGMII done<br />: cfg1 0x800c0000 cfg2 0x7214<br />eth1: ba:be:fa:ce:08:41<br />eth1 up<br />eth0, eth1<br />Setting 0x18116290 to 0x58b1a14f<br />Autobooting in 1 seconds</p>											<p class="post-edited">(Last edited by <strong>F4LLCON</strong> on 4 Mar 2014, 01:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226860">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">F4LLCON</div>
					<div class="post-datetime">
						5 Mar 2014, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>Ok, thank you for the replies. I managed to (de-brick) re-flash the openwrt firmware, and will configure all the settings, and start testing it to see if it works good. Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227269">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">a2issa</div>
					<div class="post-datetime">
						11 Mar 2014, 00:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi F4llcon,</p><p>I have the same problem as you, could you please tell me how you did it, espacially the file you used.</p><p>Many thanks.</p>											<p class="post-edited">(Last edited by <strong>a2issa</strong> on 11 Mar 2014, 01:52)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>