<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bandwidthd package does not compile anymore in trunk</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p300920">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						23 Nov 2015, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>Sorry is this is a trivial issue, but since Nov. 18, the package bandwidthd does not want to compile anymore in the trunk built (<a href="https://downloads.openwrt.org/snapshots/trunk/">https://downloads.openwrt.org/snapshots/trunk/</a>): I saw that yesterday afternoon (Nov. 22).&nbsp; As the maintainer of the package, I would like to resolve the problem.&nbsp; Take in&nbsp; account that I am far from being a pro in C.&nbsp; The package compile fine for the CC branch (I compiled it on Nov. 21st).</p><p>I saw that the GCC version changed in trunk, and I am wondering if that could be the source of the problem.</p><p>I therefore updated my built environment for trunk, rebuilt the tools and toolchain (vmebu) and tried to compile the package (after doing a make clean) and effectively, it does not compile anymore.&nbsp; I want to fix the problem, but I would like some help to point me in the right direction.&nbsp; Here is part of the compile message that I get with the compile (sorry for the length):</p><p>bandwidthd.c: In function &#039;RecoverDataFromCDF&#039;:<br />bandwidthd.c:1189:10: warning: variable &#039;logname2&#039; set but not used [-Wunused-but-set-variable]<br />&nbsp; &nbsp; &nbsp;char logname2[] = &quot;log.1.1.cdf&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from bandwidthd.c:1:0:<br />bandwidthd.c: At top level:<br />bandwidthd.h:218:17: warning: inline function &#039;DstCredit&#039; declared but never defined<br /> inline void&nbsp; &nbsp; &nbsp;DstCredit(uint32_t ipaddr, unsigned int psize);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from bandwidthd.c:1:0:<br />bandwidthd.h:199:17: warning: inline function &#039;IpAddr&#039; declared but never defined<br /> inline uint32_t IpAddr(unsigned char q1, unsigned char q2, unsigned char q3, unsigned char q4);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />arm-openwrt-linux-muslgnueabi-gcc -Wall -Os -pipe -march=armv7-a -mtune=cortex-a9 -mfpu=vfpv3-d16 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=soft -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include&nbsp; -DHAVE_CONFIG_H -DINSTALL_DIR=&quot;\&quot;/usr/bandwidthd\&quot;&quot;&nbsp; &nbsp;-c -o graph.o graph.c<br />graph.c: In function &#039;GraphIp&#039;:<br />graph.c:381:9: warning: variable &#039;white&#039; set but not used [-Wunused-but-set-variable]<br />&nbsp; &nbsp; &nbsp;int white;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c: In function &#039;GraphData&#039;:<br />graph.c:697:57: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; gdImageString(im, gdFontSmall, XOFFSET+5,&nbsp; YHEIGHT-20, Buffer, black);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c:698:66: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; gdImageString(im, gdFontSmall, XWIDTH/2+XOFFSET/2,&nbsp; YHEIGHT-20, Buffer2, black);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c:712:61: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; &nbsp; &nbsp;gdImageString(im2, gdFontSmall, XOFFSET+5,&nbsp; YHEIGHT-20, Buffer, black2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c:713:70: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; &nbsp; &nbsp;gdImageString(im2, gdFontSmall, XWIDTH/2+XOFFSET/2,&nbsp; YHEIGHT-20, Buffer2, black2);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c: In function &#039;PrepareYAxis&#039;:<br />graph.c:762:48: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gdImageString(im, gdFontSmall, 3, y-7, buffer, black);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c: In function &#039;PrepareXAxis&#039;:<br />graph.c:814:68: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gdImageString(im, gdFontSmall, x-30,&nbsp; YHEIGHT-YOFFSET+10, buffer, black);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c:848:67: warning: pointer targets in passing argument 5 of &#039;gdImageString&#039; differ in signedness [-Wpointer-sign]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gdImageString(im, gdFontSmall, x-6,&nbsp; YHEIGHT-YOFFSET+10, buffer, black);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from bandwidthd.h:48:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from graph.c:12:<br />/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include/gd.h:620:19: note: expected &#039;unsigned char *&#039; but argument is of type &#039;char *&#039;<br /> BGD_DECLARE(void) gdImageString (gdImagePtr im, gdFontPtr f, int x, int y,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />graph.c:772:26: warning: variable &#039;sample_end&#039; set but not used [-Wunused-but-set-variable]<br />&nbsp; &nbsp; &nbsp;time_t sample_begin, sample_end;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ^<br />In file included from graph.c:12:0:<br />graph.c: At top level:<br />bandwidthd.h:218:17: warning: inline function &#039;DstCredit&#039; declared but never defined<br /> inline void&nbsp; &nbsp; &nbsp;DstCredit(uint32_t ipaddr, unsigned int psize);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from graph.c:12:0:<br />bandwidthd.h:205:23: warning: inline function &#039;FindIp&#039; declared but never defined<br /> inline struct IPData *FindIp(uint32_t ipaddr);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:202:17: warning: inline function &#039;Credit&#039; declared but never defined<br /> inline void&nbsp; &nbsp; &nbsp;Credit(struct Statistics *Stats, const struct ip *ip);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:199:17: warning: inline function &#039;IpAddr&#039; declared but never defined<br /> inline uint32_t IpAddr(unsigned char q1, unsigned char q2, unsigned char q3, unsigned char q4);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:196:15: warning: inline function &#039;HostIp2CharIp&#039; declared but never defined<br /> char inline&nbsp; *HostIp2CharIp(unsigned long ipaddr, char *buffer);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />arm-openwrt-linux-muslgnueabi-gcc -Wall -Os -pipe -march=armv7-a -mtune=cortex-a9 -mfpu=vfpv3-d16 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=soft -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include&nbsp; -DHAVE_CONFIG_H -DINSTALL_DIR=&quot;\&quot;/usr/bandwidthd\&quot;&quot;&nbsp; &nbsp;-c -o conf.tab.o conf.tab.c<br />In file included from conf.y:12:0:<br />bandwidthd.h:218:17: warning: inline function &#039;DstCredit&#039; declared but never defined<br /> inline void&nbsp; &nbsp; &nbsp;DstCredit(uint32_t ipaddr, unsigned int psize);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />In file included from conf.y:12:0:<br />bandwidthd.h:205:23: warning: inline function &#039;FindIp&#039; declared but never defined<br /> inline struct IPData *FindIp(uint32_t ipaddr);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:202:17: warning: inline function &#039;Credit&#039; declared but never defined<br /> inline void&nbsp; &nbsp; &nbsp;Credit(struct Statistics *Stats, const struct ip *ip);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:199:17: warning: inline function &#039;IpAddr&#039; declared but never defined<br /> inline uint32_t IpAddr(unsigned char q1, unsigned char q2, unsigned char q3, unsigned char q4);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />bandwidthd.h:196:15: warning: inline function &#039;HostIp2CharIp&#039; declared but never defined<br /> char inline&nbsp; *HostIp2CharIp(unsigned long ipaddr, char *buffer);<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;^<br />arm-openwrt-linux-muslgnueabi-gcc -Os -pipe -march=armv7-a -mtune=cortex-a9 -mfpu=vfpv3-d16 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=soft -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include&nbsp; -DHAVE_CONFIG_H -c -o conf.l.o conf.l.c<br />arm-openwrt-linux-muslgnueabi-gcc -Wall -Os -pipe -march=armv7-a -mtune=cortex-a9 -mfpu=vfpv3-d16 -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -Wno-error=unused-result -mfloat-abi=soft -Wformat -Werror=format-security -fstack-protector -D_FORTIFY_SOURCE=1 -Wl,-z,now -Wl,-z,relro -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/include -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include/fortify -I/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/include&nbsp; -DHAVE_CONFIG_H -DINSTALL_DIR=&quot;\&quot;/usr/bandwidthd\&quot;&quot; bandwidthd.o graph.o conf.tab.o conf.l.o -o bandwidthd -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/lib -znow -zrelro -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/usr/lib -L/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/toolchain-arm_cortex-a9+vfpv3_gcc-5.2.0_musl-1.1.11_eabi/lib -znow -zrelro -Wl,-rpath-link,/home/lacroix/openwrt-dev/openwrt-trunk/staging_dir/target-arm_cortex-a9+vfpv3_musl-1.1.11_eabi/usr/lib -lpcap -lgd -lpng -lm -lresolv<br />graph.o: In function `rdns&#039;:<br />graph.c:(.text+0x2d4): undefined reference to `HostIp2CharIp&#039;<br />graph.o: In function `PrintTableLine&#039;:<br />graph.c:(.text+0x564): undefined reference to `HostIp2CharIp&#039;<br />graph.o: In function `MakeIndexPages&#039;:<br />graph.c:(.text+0x8c8): undefined reference to `HostIp2CharIp&#039;<br />graph.c:(.text+0x9b8): undefined reference to `HostIp2CharIp&#039;<br />graph.c:(.text+0xa50): undefined reference to `HostIp2CharIp&#039;<br />graph.o:graph.c:(.text+0xb88): more undefined references to `HostIp2CharIp&#039; follow<br />collect2: error: ld returned 1 exit status<br />make[3]: *** [bandwidthd] Error 1</p>											<p class="post-edited">(Last edited by <strong>jmlacroix</strong> on 23 Nov 2015, 16:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300923">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						23 Nov 2015, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>My input based on 5 minute googling:<br /><a href="https://www.google.fi/search?q=bandwidthd+gcc+5">https://www.google.fi/search?q=bandwidthd+gcc+5</a></p><p>you might be running into problems with 10+ year old source code (bandwidthd 2.0.1 is from 2005, right???), when you try to compile it with a compiler that is now following the year 1999 C standard instead of 1989. Apparently the handling of inline functions has changed etc.</p><p>Some similar reports: <br /><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=777794">https://bugs.debian.org/cgi-bin/bugrepo … bug=777794</a><br />One patch (removing inline):<br /><a href="https://www.mail-archive.com/debian-bugs-dist@lists.debian.org/msg1243897.html">https://www.mail-archive.com/debian-bug … 43897.html</a><br />Second:<br /><a href="https://launchpad.net/ubuntu/+source/bandwidthd/2.0.1+cvs20090917-8">https://launchpad.net/ubuntu/+source/ba … 20090917-8</a><br /><a href="http://launchpadlibrarian.net/209261825/bandwidthd_2.0.1%2Bcvs20090917-7_2.0.1%2Bcvs20090917-8.diff.gz">http://launchpadlibrarian.net/209261825 … -8.diff.gz</a></p><p>GC 5 background:<br /><a href="https://gcc.gnu.org/gcc-5/porting_to.html">https://gcc.gnu.org/gcc-5/porting_to.html</a><br /><a href="http://clang.debian.net/status.php?version=3.4.2&amp;key=UNDEF_REF">http://clang.debian.net/status.php?vers … =UNDEF_REF</a></p><p>You might try either:<br />* defining in Makefile CFLAGS (?) the option &quot;-std=gnu89&quot;&nbsp; to use the older standard<br />* patching the source to remove the offending inline definition.</p><p>The source code is so old, that I might try the C standard change first.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 23 Nov 2015, 17:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300951">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jmlacroix</div>
					<div class="post-datetime">
						23 Nov 2015, 20:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>My input based on 5 minute googling:<br /><a href="https://www.google.fi/search?q=bandwidthd+gcc+5">https://www.google.fi/search?q=bandwidthd+gcc+5</a></p><p>you might be running into problems with 10+ year old source code (bandwidthd 2.0.1 is from 2005, right???), when you try to compile it with a compiler that is now following the year 1999 C standard instead of 1989. Apparently the handling of inline functions has changed etc.</p><p>....</p><p>You might try either:<br />* defining in Makefile CFLAGS (?) the option &quot;-std=gnu89&quot;&nbsp; to use the older standard<br />* patching the source to remove the offending inline definition.</p><p>The source code is so old, that I might try the C standard change first.</p></blockquote></div><p>Yes: this is old source code indeed!&nbsp; Thank you for the various pointers: I read the various links you provided and others, and I understand the problem.</p><p>I will try the CFLAGS with the option &quot;-std=gnu89&quot; first: as you said the code is old, and trying to fix it for C99 may be more error prone and raise other problems.</p><p>Thanks a lot for everything!</p><p>EDIT: just to let know that it worked fine with the option &quot;-std=gnu89&quot;</p>											<p class="post-edited">(Last edited by <strong>jmlacroix</strong> on 24 Nov 2015, 01:54)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>