<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for TP-Link Archer C2600</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 18 of 49</div><nav><ul><li><a href="viewtopic.php%3Fid=54973&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=54973&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=54973&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=49.html">49</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p325886">
				<div class="post-metadata">
					<div class="post-num">Post #426</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						26 May 2016, 05:18					</div>
				</div>
				<div class="post-content content">
					<p>More details after a few tests</p><p>- Seems to affect (intermittent network hanging during high (50mbps) throughput) both 2.4ghz and 5ghz.<br />- Wired LAN seems unaffected, all tests so far were perfect and no packet drops/slowdowns on wired lan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325903">
				<div class="post-metadata">
					<div class="post-num">Post #427</div>
					<div class="post-author">TeutonJon78</div>
					<div class="post-datetime">
						26 May 2016, 09:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RedVortex wrote:</cite><blockquote><p>Wifi 2.4ghz enabled and working, Mode N, set to World, 30 dbm, 20 mhz (maybe it should default to 40 mhz instead of 20 ?)</p></blockquote></div><p>I don&#039;t think you&#039;d want this. 40 Mhz rarely gains you anything as not as many devices support it, and as soon as the router detects a single non-compatible device, it drops to 20 Mhz mode, so you&#039;re just polluting more of the spectrum.</p><p>How are the MACs being setup? That was one of the outstanding issues as well, where they weren&#039;t being actively setup correctly at boot and needed to be manually configured.</p><p>I also wonder with the slow to respond aspect if you&#039;re hitting a bufferbloat type situation.</p>											<p class="post-edited">(Last edited by <strong>TeutonJon78</strong> on 26 May 2016, 09:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325979">
				<div class="post-metadata">
					<div class="post-num">Post #428</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						26 May 2016, 17:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TeutonJon78 wrote:</cite><blockquote><p>How are the MACs being setup? That was one of the outstanding issues as well, where they weren&#039;t being actively setup correctly at boot and needed to be manually configured.</p></blockquote></div><p>Good catch, I&#039;ve just checked and even though it doesn&#039;t prevent anything from working, they are most likely not valid, at least on the 5ghz, maybe partly valid on the 2.4 ghz</p><p>The LAN MAC is valid and recognized as a TP-Link MAC.</p><p>As for the wifi, I don&#039;t mind posting those so here they are:</p><p>5 Ghz: BSSID: 00:34:56:78:16:16 (This is surely invalid 3,4,5,6,7,8... and it is not a recognized MAC)<br />2.4 Ghz: BSSID: 00:03:7F:12:F1:F1 (This is recognized as an Atheros MAC, not sure if it is the real MAC though)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326005">
				<div class="post-metadata">
					<div class="post-num">Post #429</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						26 May 2016, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>@james04:<br />Prepare linux and use this command:<br /></p><div class="codebox"><pre><code>git clone https://git.lede-project.org/source.git
cd source
make package/symlinks
wget http://hyniu.noip.pl:82/ipq806x-4.4.11/patches.tar.gz
tar xzf patches.tar.gz
patch -p1 &lt; OpenWrt-Devel-ipq806x-Add-support-for-linux-4.4.patch
patch -p1 &lt; LEDE-DEV-change-Makefile-to-kernel-4.4.patch
patch -p1 &lt; LEDE-DEV-kernel-mtd-Add-support-for-Macronix-mx25u25635f-used-in-C2600v1.1.patch
patch -p1 &lt; LEDE-DEV-fw-utils-tplink-safeloader.c-Add-support-for-Archer-C2600.patch
patch -p1 &lt; LEDE-DEV-ipq806x-Add-Archer-C2600-to-image-Makefile.patch
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-Add-Archer-C2600-LEDs-and-board.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-Add-support-for-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-extract-ath10k-caldata.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-profiles-Add-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-dts-Add-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-kernel-mac80211-skip-ath10k-OTP-check-if-caldata-found.patch
patch -p1 &lt; LEDE-DEV-ipq806x-Add-C2600-system-LED.patch
patch -p1 &lt; LEDE-DEV-include-image.mk-move-build-step-tplink-safeloader-to-image.mk.patch</code></pre></div><p>Now run:<br /><strong>make menuconfig</strong> and select Target System - Qualcomm Atheros IPQ806X, Target Profile - TP-Link Archer C2600.<br />Save settings and exit.<br />Run: <strong>make V=s</strong></p><p>To get 30dBm Tx power use command: patch -p1 &lt; 30dbm.patch</p><p>edit: add command make package/symlinks</p>											<p class="post-edited">(Last edited by <strong>Heinz</strong> on 26 May 2016, 23:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326009">
				<div class="post-metadata">
					<div class="post-num">Post #430</div>
					<div class="post-author">BladeDude</div>
					<div class="post-datetime">
						26 May 2016, 21:55					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?pid=326007#p326007">Link to n00b C2600 question posted in arokh build thread: Is the TP-Link Archer C2600 fully supported by OpenWRT or not?</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326030">
				<div class="post-metadata">
					<div class="post-num">Post #431</div>
					<div class="post-author">james04</div>
					<div class="post-datetime">
						27 May 2016, 00:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>@james04:<br />Prepare linux and use this command:<br /></p><div class="codebox"><pre><code>git clone https://git.lede-project.org/source.git
cd source
make package/symlinks
wget http://hyniu.noip.pl:82/ipq806x-4.4.11/patches.tar.gz
tar xzf patches.tar.gz
patch -p1 &lt; OpenWrt-Devel-ipq806x-Add-support-for-linux-4.4.patch
patch -p1 &lt; LEDE-DEV-change-Makefile-to-kernel-4.4.patch
patch -p1 &lt; LEDE-DEV-kernel-mtd-Add-support-for-Macronix-mx25u25635f-used-in-C2600v1.1.patch
patch -p1 &lt; LEDE-DEV-fw-utils-tplink-safeloader.c-Add-support-for-Archer-C2600.patch
patch -p1 &lt; LEDE-DEV-ipq806x-Add-Archer-C2600-to-image-Makefile.patch
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-Add-Archer-C2600-LEDs-and-board.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-Add-support-for-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-base-files-extract-ath10k-caldata.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-profiles-Add-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-ipq806x-dts-Add-Archer-C2600.patch 
patch -p1 &lt; LEDE-DEV-kernel-mac80211-skip-ath10k-OTP-check-if-caldata-found.patch
patch -p1 &lt; LEDE-DEV-ipq806x-Add-C2600-system-LED.patch
patch -p1 &lt; LEDE-DEV-include-image.mk-move-build-step-tplink-safeloader-to-image.mk.patch</code></pre></div><p>Now run:<br /><strong>make menuconfig</strong> and select Target System - Qualcomm Atheros IPQ806X, Target Profile - TP-Link Archer C2600.<br />Save settings and exit.<br />Run: <strong>make V=s</strong></p><p>To get 30dBm Tx power use command: patch -p1 &lt; 30dbm.patch</p><p>edit: add command make package/symlinks</p></blockquote></div><p>THANK YOU @Heinz.<br />I try figure it out and you are very helpful <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326033">
				<div class="post-metadata">
					<div class="post-num">Post #432</div>
					<div class="post-author">james04</div>
					<div class="post-datetime">
						27 May 2016, 00:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>BladeDude wrote:</cite><blockquote><p><a href="https://forum.openwrt.org/viewtopic.php?pid=326007#p326007">Link to n00b C2600 question posted in arokh build thread: Is the TP-Link Archer C2600 fully supported by OpenWRT or not?</a></p></blockquote></div><p>I vote C2600. Less flash size but still better device.</p><p>WRT1900/1200 many problems (look at thread).. just popular becuase all people freak out when they see wrt54g-style blue box and think it must be as good as original.... NOT!<br />you are comparing marvell vs qualcomm</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326039">
				<div class="post-metadata">
					<div class="post-num">Post #433</div>
					<div class="post-author">TeutonJon78</div>
					<div class="post-datetime">
						27 May 2016, 00:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RedVortex wrote:</cite><blockquote><div class="quotebox"><cite>TeutonJon78 wrote:</cite><blockquote><p>How are the MACs being setup? That was one of the outstanding issues as well, where they weren&#039;t being actively setup correctly at boot and needed to be manually configured.</p></blockquote></div><p>Good catch, I&#039;ve just checked and even though it doesn&#039;t prevent anything from working, they are most likely not valid, at least on the 5ghz, maybe partly valid on the 2.4 ghz</p><p>The LAN MAC is valid and recognized as a TP-Link MAC.</p><p>As for the wifi, I don&#039;t mind posting those so here they are:</p><p>5 Ghz: BSSID: 00:34:56:78:16:16 (This is surely invalid 3,4,5,6,7,8... and it is not a recognized MAC)<br />2.4 Ghz: BSSID: 00:03:7F:12:F1:F1 (This is recognized as an Atheros MAC, not sure if it is the real MAC though)</p></blockquote></div><p>These are the stock setup for MACs:</p><p>LAN/2.4 GHz = default-mac value (which should match the MAC sticker on the bottom of the router)<br />WLAN = default-mac +1<br />5 GHz = default-mac -1</p><p>I think someone earlier said you can manually setup the MACs in the config files, so it can be configured to match that. bendavid was a little unhappy with the setup and wanted different MACs for the LAN/2.4 GHz, but no one is sure why TP-Link did it that way, or what issues would pop up (or even where in the code that sets the default addresses).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326056">
				<div class="post-metadata">
					<div class="post-num">Post #434</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 05:37					</div>
				</div>
				<div class="post-content content">
					<p>@Heinz</p><p>I think I&#039;ll have to downgrade to the Kernel 3.18 firmware unless you want me to try something for the wireless issues first with kernel 4.4. The wireless is unfortunately not reliable enough for the usage I have. That&#039;s too bad because everything else works perfectly.</p><p>In the Kernel 3.18 firmware you have posted already on your site, does it also includes all the special fixes you did the other day ?</p><div class="quotebox"><blockquote><p>Add 30dBm patch<br />Add luci-ssl<br />Wifi default on<br />Wifi region set to 00 - World<br />Enable all repository and add kernel repository.<br />Power LED blink like system led</p></blockquote></div><p>I think it may not ? I&#039;d like to test a Kernel 3.18 version with those fixes in places and see how it goes maybe compared to 4.4...</p>											<p class="post-edited">(Last edited by <strong>RedVortex</strong> on 27 May 2016, 05:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326087">
				<div class="post-metadata">
					<div class="post-num">Post #435</div>
					<div class="post-author">bendavid</div>
					<div class="post-datetime">
						27 May 2016, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>I did eventually manage to track down where the MAC addresses are set in the stock firmware, but it is anyways not applicable for OpenWrt/LEDE, given that for the wired interfaces there is a better solution with the DTS already implemented, and for the wireless the situation is different because of ath10k vs proprietary wireless drivers.</p><p>The best solution for the wireless MAC&#039;s is probably still to patch it in the calibration data as done for earlier implementations.&nbsp; The problem is that the calibration data for QCA99X0 includes an additional checksum, so the patching is (slightly) less trivial.&nbsp; @ianchi already has an implementation to do this here<br /><a href="https://patchwork.ozlabs.org/patch/604557/">https://patchwork.ozlabs.org/patch/604557/</a> as part of his work on EA8500 support.</p><p>But a reasonable plan now is to let the dust settle on 4.4 kernel support, have the initial support patches for C2600 (and EA8500) make their way into (probably LEDE at this point) trunk, and then sort out the remaining pieces needed to properly set the wireless MAC&#039;s.</p><div class="quotebox"><cite>TeutonJon78 wrote:</cite><blockquote><div class="quotebox"><cite>RedVortex wrote:</cite><blockquote><div class="quotebox"><cite>TeutonJon78 wrote:</cite><blockquote><p>How are the MACs being setup? That was one of the outstanding issues as well, where they weren&#039;t being actively setup correctly at boot and needed to be manually configured.</p></blockquote></div><p>Good catch, I&#039;ve just checked and even though it doesn&#039;t prevent anything from working, they are most likely not valid, at least on the 5ghz, maybe partly valid on the 2.4 ghz</p><p>The LAN MAC is valid and recognized as a TP-Link MAC.</p><p>As for the wifi, I don&#039;t mind posting those so here they are:</p><p>5 Ghz: BSSID: 00:34:56:78:16:16 (This is surely invalid 3,4,5,6,7,8... and it is not a recognized MAC)<br />2.4 Ghz: BSSID: 00:03:7F:12:F1:F1 (This is recognized as an Atheros MAC, not sure if it is the real MAC though)</p></blockquote></div><p>These are the stock setup for MACs:</p><p>LAN/2.4 GHz = default-mac value (which should match the MAC sticker on the bottom of the router)<br />WLAN = default-mac +1<br />5 GHz = default-mac -1</p><p>I think someone earlier said you can manually setup the MACs in the config files, so it can be configured to match that. bendavid was a little unhappy with the setup and wanted different MACs for the LAN/2.4 GHz, but no one is sure why TP-Link did it that way, or what issues would pop up (or even where in the code that sets the default addresses).</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326091">
				<div class="post-metadata">
					<div class="post-num">Post #436</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						27 May 2016, 10:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi. Recompile LEDE-3.18.27 and add 30dBm.patch and change wifi to default ON. Fix system led.</p><p><a href="http://hyniu.noip.pl:82/ipq806x-3.18.29/">http://hyniu.noip.pl:82/ipq806x-3.18.29/</a></p><p>WiFi it has the same issue on high load, probably by latest compat-wireless-2016-05-12.<br />Transmit packet OK<br />Receive cause:<br /></p><div class="codebox"><pre><code>[  875.025918] WARNING: CPU: 0 PID: 0 at compat-wireless-2016-05-12/net/mac80211/rx.c:4068 ieee80211_rx_napi+0x8c/0x8b4 [mac80211]()
[  875.030576] Modules linked in: pppoe ppp_async iptable_nat pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 ipt_REJECT ipt_MASQUERADE ftdi_sio xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG xt_CT usbserial slhc nf_reject_ipv4 nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack iptable_raw iptable_mangle iptable_filter ip_tables crc_ccitt fuse ath10k_pci ath10k_core ath mac80211 cfg80211 compat ledtrig_usbdev ledtrig_oneshot xt_LED ledtrig_morse ledtrig_heartbeat ledtrig_gpio ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_raw ip6table_mangle ip6table_filter ip6_tables x_tables vfat fat lockd sunrpc grace configfs nls_utf8 nls_cp852 nls_cp850 nls_cp437 nls_cp1251 nls_cp1250 usb_storage leds_pca963x leds_gpio xhci_plat_hcd xhci_pci xhci_hcd dwc3 dwc3_qcom ohci_platform ohci_hcd ledtrig_transient phy_qcom_dwc3 ahci ehci_platform ehci_hcd sd_mod ahci_platform libahci_platform libahci libata scsi_mod gpio_button_hotplug ext4 jbd2 mbcache button_hotplug input_core usbcore nls_base usb_common crypto_hash
[  875.144556] CPU: 0 PID: 0 Comm: swapper/0 Tainted: G        W      3.18.29 #9
[  875.144919] [&lt;c021e82c&gt;] (unwind_backtrace) from [&lt;c021b588&gt;] (show_stack+0x10/0x14)
[  875.152038] [&lt;c021b588&gt;] (show_stack) from [&lt;c035712c&gt;] (dump_stack+0x8c/0xa0)
[  875.159849] [&lt;c035712c&gt;] (dump_stack) from [&lt;c0226480&gt;] (warn_slowpath_common+0x6c/0x88)
[  875.166879] [&lt;c0226480&gt;] (warn_slowpath_common) from [&lt;c0226538&gt;] (warn_slowpath_null+0x1c/0x24)
[  875.175150] [&lt;c0226538&gt;] (warn_slowpath_null) from [&lt;bf2d0a08&gt;] (ieee80211_rx_napi+0x8c/0x8b4 [mac80211])
[  875.183926] [&lt;bf2d0a08&gt;] (ieee80211_rx_napi [mac80211]) from [&lt;bf33f7b8&gt;] (ath10k_htt_t2h_msg_handler+0x928/0x984 [ath10k_core])
[  875.193380] [&lt;bf33f7b8&gt;] (ath10k_htt_t2h_msg_handler [ath10k_core]) from [&lt;bf3401cc&gt;] (ath10k_htt_txrx_compl_task+0x9b8/0x1178 [ath10k_core])
[  875.205007] [&lt;bf3401cc&gt;] (ath10k_htt_txrx_compl_task [ath10k_core]) from [&lt;c02291bc&gt;] (tasklet_action+0xb8/0x144)
[  875.217578] [&lt;c02291bc&gt;] (tasklet_action) from [&lt;c02293a0&gt;] (__do_softirq+0xf0/0x220)
[  875.227818] [&lt;c02293a0&gt;] (__do_softirq) from [&lt;c0229780&gt;] (irq_exit+0x98/0xe4)
[  875.235628] [&lt;c0229780&gt;] (irq_exit) from [&lt;c025aae4&gt;] (__handle_domain_irq+0xac/0xd4)
[  875.242745] [&lt;c025aae4&gt;] (__handle_domain_irq) from [&lt;c02085f8&gt;] (gic_handle_irq+0x40/0x5c)
[  875.250645] [&lt;c02085f8&gt;] (gic_handle_irq) from [&lt;c0209680&gt;] (__irq_svc+0x40/0x74)
[  875.258802] Exception stack(0xc06c9f48 to 0xc06c9f90)
[  875.266437] 9f40:                   ffffffed 00000000 000dbd6c c020a220 c06c8018 c06c8000
[  875.271478] 9f60: 00000000 00000000 ffffffed 00000000 c06d04b4 c05fc6e0 c06d1684 c06c9f90
[  875.279638] 9f80: c0219048 c021904c 60000013 ffffffff
[  875.287793] [&lt;c0209680&gt;] (__irq_svc) from [&lt;c021904c&gt;] (arch_cpu_idle+0x34/0x50)
[  875.292835] [&lt;c021904c&gt;] (arch_cpu_idle) from [&lt;c02528e0&gt;] (cpu_startup_entry+0x150/0x2c8)
[  875.300301] [&lt;c02528e0&gt;] (cpu_startup_entry) from [&lt;c069eccc&gt;] (start_kernel+0x3e4/0x3f0)
[  875.308424] ---[ end trace 8883c436753f1f59 ]---</code></pre></div><br /><p>@bendavid did You fix spi-qup problem on 4.4 kernel:<br /></p><div class="codebox"><pre><code>spi_qup 1a280000.spi: unexpected irq 00000000 00000000 00000080</code></pre></div><p>On 4.4 kernel work only button reset and wps,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326104">
				<div class="post-metadata">
					<div class="post-num">Post #437</div>
					<div class="post-author">bendavid</div>
					<div class="post-datetime">
						27 May 2016, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>@Heinz, no I have the same kernel messages in 4.4, both for spi_qup and ath10k.&nbsp; The ath10k stack traces also appear in 3.18, so this is definitely related to the compat-wireless update.</p><p>One other interesting piece of information.&nbsp; Testing ipv4 routing+nat speeds, I have ~700mbps on kernel 3.18.29, but only ~300mbps on 4.4.11.</p><p>This is probably related to either some of the changes in fq_codel in trunk recently OR possibly the kernel patches related to stmmac.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326106">
				<div class="post-metadata">
					<div class="post-num">Post #438</div>
					<div class="post-author">bendavid</div>
					<div class="post-datetime">
						27 May 2016, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>(or maybe related to reclocking of the cpu)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326109">
				<div class="post-metadata">
					<div class="post-num">Post #439</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						27 May 2016, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>Test package caldata-utils<br />Change MAC in both cal*.bin file.<br /></p><div class="codebox"><pre><code>root@lede:/# caldata -i lib/firmware/ath10k/cal-pci-0000\:01\:00.0.bin -v
Size: 12064
MAC: ec:08:6b:2c:a0:4b
Checksum: 0x07ff (OK)
root@lede:/# caldata -i lib/firmware/ath10k/cal-pci-0001\:01\:00.0.bin -v
Size: 12064
MAC: ec:08:6b:2c:a0:4c
Checksum: 0x75c8 (OK)</code></pre></div><p>After reboot type ifconfig:<br /></p><div class="codebox"><pre><code>wlan0     Link encap:Ethernet  HWaddr 00:08:6B:2C:4C:4C
          inet6 addr: fe80::208:6bff:fe2c:4c4c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:22 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:3551 (3.4 KiB)

wlan1     Link encap:Ethernet  HWaddr 00:08:6B:2C:D6:D6
          inet6 addr: fe80::208:6bff:fe2c:d6d6/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:33 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:4843 (4.7 KiB)</code></pre></div><p>Something changes first byte mac adres to 00 and two last to random byte.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326111">
				<div class="post-metadata">
					<div class="post-num">Post #440</div>
					<div class="post-author">bendavid</div>
					<div class="post-datetime">
						27 May 2016, 12:52					</div>
				</div>
				<div class="post-content content">
					<p>Hmm, ok, this is what the firmware does when it thinks it has default placeholder MAC&#039;s from the calibration data, so probably something is missing still.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326112">
				<div class="post-metadata">
					<div class="post-num">Post #441</div>
					<div class="post-author">Heinz</div>
					<div class="post-datetime">
						27 May 2016, 13:23					</div>
				</div>
				<div class="post-content content">
					<p>Recompile 4.4 and change compat-wireless to 2016-01-10.<br />WiFi in now &quot;stable&quot;.</p><p><a href="http://hyniu.noip.pl:82/ipq806x-4.4.11/">http://hyniu.noip.pl:82/ipq806x-4.4.11/</a></p><p>Compile caldata-utils package:<br /><a href="http://hyniu.noip.pl:82/caldata-utils_1_arm_cortex-a9_neon-vfpv4.ipk">http://hyniu.noip.pl:82/caldata-utils_1 … -vfpv4.ipk</a></p><p>usage:<br />Use their MAC addresses:</p><p>cd /lib/firmware/ath10k/ <br />caldata -a <strong>EC:08:6B:2C:A0:4B</strong> -i cal-pci-0000\:01\:00.0.bin -f out0.bin<br />caldata -a <strong>EC:08:6B:2C:A0:4C</strong> -i cal-pci-0001\:01\:00.0.bin -f out1.bin<br />mv cal-pci-0000\:01\:00.0.bin cal-pci-0000\:01\:00.0.bak<br />mv cal-pci-0001\:01\:00.0.bin cal-pci-0001\:01\:00.0.bak<br />mv out0.bin cal-pci-0000\:01\:00.0.bin<br />mv out1.bin cal-pci-0001\:01\:00.0.bin<br />reboot</p>											<p class="post-edited">(Last edited by <strong>Heinz</strong> on 27 May 2016, 19:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326136">
				<div class="post-metadata">
					<div class="post-num">Post #442</div>
					<div class="post-author">vxsys</div>
					<div class="post-datetime">
						27 May 2016, 19:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bendavid wrote:</cite><blockquote><p>@Heinz, no I have the same kernel messages in 4.4, both for spi_qup and ath10k.&nbsp; The ath10k stack traces also appear in 3.18, so this is definitely related to the compat-wireless update.</p><p>One other interesting piece of information.&nbsp; Testing ipv4 routing+nat speeds, I have ~700mbps on kernel 3.18.29, but only ~300mbps on 4.4.11.</p><p>This is probably related to either some of the changes in fq_codel in trunk recently OR possibly the kernel patches related to stmmac.</p></blockquote></div><br /><p>Hi, you have dhcp on wan or pppoe?<br />Is fixed routing+nat speed on 4.4.11 ?<br />i have 1000mbps fiber on pppoe so i&#039;m wonder if pppoe will work or there is no hardware acceleration for nat.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326137">
				<div class="post-metadata">
					<div class="post-num">Post #443</div>
					<div class="post-author">vxsys</div>
					<div class="post-datetime">
						27 May 2016, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>what version to install 4.4 or older one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326145">
				<div class="post-metadata">
					<div class="post-num">Post #444</div>
					<div class="post-author">bendavid</div>
					<div class="post-datetime">
						27 May 2016, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>@vxsys, this is with just DHCP.</p><p>There is no hardware acceleration implemented in OpenWRT/LEDE for ipq806x (and probably won&#039;t be).</p><p>I think that 1gbps routing+NAT is eventually achievable in software with some optimization of the network stack.&nbsp; Not sure with PPPOE though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326146">
				<div class="post-metadata">
					<div class="post-num">Post #445</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 20:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heinz wrote:</cite><blockquote><p>Recompile 4.4 and change compat-wireless to 2016-01-10.<br />WiFi in now &quot;stable&quot;.</p><p><a href="http://hyniu.noip.pl:82/ipq806x-4.4.11/">http://hyniu.noip.pl:82/ipq806x-4.4.11/</a></p></blockquote></div><p>I&#039;m having a few problems so far with this version. I upgraded from the version I&#039;ve already had installed (still kernel 4.4) and kept the configs to see if it would work.</p><p>Upon first reboot, the router did not seem to be able to come up. The system led was flashing continuously, I waited about 3-4 minutes, still not up.</p><p>I power cycled and then waited again and it finally came up. However, I can&#039;t edit the wireless configs, there is nothing in the drop down boxes for the signal, country, etc and both wifi don&#039;t show any mac address.</p><p>I&#039;m going for the 3rd reboot and see how it goes. If wireless is still unconfigurable, I&#039;ll try another upgrade but without keeping the configs this time to see how it goes.</p><div class="codebox"><pre><code>root@lede:~# dmesg | grep ath
[   23.300595] ath10k_pci 0000:01:00.0: enabling device (0140 -&gt; 0142)
[   23.300709] ath10k_pci 0000:01:00.0: enabling bus mastering
[   23.301639] ath10k_pci 0000:01:00.0: pci irq msi-x interrupts 13 irq_mode 0 reset_mode 0
[   23.432723] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/cal-pci-0000:01:00.0.bin failed with error -2
[   23.432764] ath10k_pci 0000:01:00.0: Falling back to user helper
[   85.459876] ath10k_pci 0000:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[   85.459925] ath10k_pci 0000:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   85.471131] ath10k_pci 0000:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[   87.520322] ath10k_pci 0000:01:00.0: unable to read from the device
[   87.520437] ath10k_pci 0000:01:00.0: could not execute otp for board id check: -110
[   87.525432] ath10k_pci 0000:01:00.0: failed to get board id from otp: -110
[   87.533138] ath10k_pci 0000:01:00.0: could not probe fw (-110)
[   87.561978] ath10k_pci 0001:01:00.0: enabling device (0140 -&gt; 0142)
[   87.568764] ath10k_pci 0001:01:00.0: enabling bus mastering
[   87.569840] ath10k_pci 0001:01:00.0: pci irq msi-x interrupts 13 irq_mode 0 reset_mode 0
[   87.781685] ath10k_pci 0001:01:00.0: Direct firmware load for ath10k/cal-pci-0001:01:00.0.bin failed with error -2
[   87.781756] ath10k_pci 0001:01:00.0: Falling back to user helper
[  147.810630] ath10k_pci 0001:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[  147.810709] ath10k_pci 0001:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[  147.822054] ath10k_pci 0001:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[  149.860372] ath10k_pci 0001:01:00.0: unable to read from the device
[  149.860482] ath10k_pci 0001:01:00.0: could not execute otp for board id check: -110
[  149.865545] ath10k_pci 0001:01:00.0: failed to get board id from otp: -110
[  149.873281] ath10k_pci 0001:01:00.0: could not probe fw (-110)</code></pre></div>											<p class="post-edited">(Last edited by <strong>RedVortex</strong> on 27 May 2016, 20:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326148">
				<div class="post-metadata">
					<div class="post-num">Post #446</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 20:38					</div>
				</div>
				<div class="post-content content">
					<p>After a 3rd reboot, I have one of the 2 wireless working, the first one gets disabled for some reason</p><div class="codebox"><pre><code>root@lede:~# dmesg | grep &quot;ath1\|wlan&quot;
[   13.257349] ath10k_pci 0000:01:00.0: enabling device (0140 -&gt; 0142)
[   13.257486] ath10k_pci 0000:01:00.0: enabling bus mastering
[   13.259336] ath10k_pci 0000:01:00.0: pci irq msi-x interrupts 13 irq_mode 0 reset_mode 0
[   14.715894] ath10k_pci 0000:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[   14.715969] ath10k_pci 0000:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   14.729853] ath10k_pci 0000:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[   14.733393] ath10k_pci 0000:01:00.0: failed to fetch board data for bus=pci,vendor=168c,device=0040,subsystem-vendor=168c,subsystem-device=0002 from ath10k/QCA99X0/hw2.0/board-2.bin
[   14.742428] ath10k_pci 0000:01:00.0: board_file api 1 bmi_id N/A crc32 7e56fd07
[   15.929846] ath10k_pci 0000:01:00.0: htt-ver 2.2 wmi-op 6 htt-op 4 cal file max-sta 512 raw 0 hwcrypto 1
[   16.120686] ath10k_pci 0001:01:00.0: enabling device (0140 -&gt; 0142)
[   16.120798] ath10k_pci 0001:01:00.0: enabling bus mastering
[   16.121677] ath10k_pci 0001:01:00.0: pci irq msi-x interrupts 13 irq_mode 0 reset_mode 0
[   25.377902] ath10k_pci 0001:01:00.0: qca99x0 hw2.0 target 0x01000000 chip_id 0x003b01ff sub 168c:0002
[   25.377969] ath10k_pci 0001:01:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   25.391609] ath10k_pci 0001:01:00.0: firmware ver 10.4.1.00030-1 api 5 features no-p2p crc32 d2901e01
[   25.394664] ath10k_pci 0001:01:00.0: failed to fetch board data for bus=pci,vendor=168c,device=0040,subsystem-vendor=168c,subsystem-device=0002 from ath10k/QCA99X0/hw2.0/board-2.bin
[   25.404205] ath10k_pci 0001:01:00.0: board_file api 1 bmi_id N/A crc32 7e56fd07
[   26.593736] ath10k_pci 0001:01:00.0: htt-ver 2.2 wmi-op 6 htt-op 4 cal file max-sta 512 raw 0 hwcrypto 1
[   32.584231] ath10k_pci 0001:01:00.0: DFS region 0x0 not supported, will trigger radar for every pulse
[   32.584326] ath10k_pci 0000:01:00.0: DFS region 0x0 not supported, will trigger radar for every pulse
[   35.214715] ath10k_pci 0001:01:00.0: no channel configured; ignoring frame(s)!
[   35.218155] IPv6: ADDRCONF(NETDEV_UP): wlan1: link is not ready
[   35.232955] device wlan1 entered promiscuous mode
[   36.520817] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   36.526874] device wlan0 entered promiscuous mode
[   36.580767] device wlan0 left promiscuous mode
[   36.580981] br-lan: port 3(wlan0) entered disabled state
[   37.607728] IPv6: ADDRCONF(NETDEV_CHANGE): wlan1: link becomes ready
[   37.608026] br-lan: port 2(wlan1) entered forwarding state
[   37.613368] br-lan: port 2(wlan1) entered forwarding state
[   39.610402] br-lan: port 2(wlan1) entered forwarding state</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326150">
				<div class="post-metadata">
					<div class="post-num">Post #447</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>Same problem on thr 4th reboot, Wifi 5ghz still doesn&#039;t want to come up.</p><p>Furthermore, I can see the MAC address of the wireless that comes up change on every reboot.</p><p>Last time it was: 00:03:7F:12:34:34<br />Now it is: 00:03:7F:12:16:16</p><p>I guess that why some of my wifi devices complains about new wifi discovered sometimes, hehehe.</p><p>Ok, I&#039;ll give it a last go. I&#039;ll update again but this time I won&#039;t keep the configs in case that changes things.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326151">
				<div class="post-metadata">
					<div class="post-num">Post #448</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>Ok, after another flash WITHOUT keeping any settings AND waiting long enough for the first boot to complete (I guess I wasn&#039;t patient enough the first time, maybe ssh key generation or SSL cert ?).</p><p>The router is up and working. I&#039;ll configure everything and do a final reboot to see if everything holds.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326153">
				<div class="post-metadata">
					<div class="post-num">Post #449</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>First thing I notice while configuring: 30dbm is missing for 00 World. I changed to CA - Canada and I can now set it up. For those looking for 30dbm on 5ghz even after setting to CA, make sure you use a high channel (like 157 for instance) first (and save/apply, the drop down will get updated aftwerwards) because 30dbm is only allowed on those, unlike 2.4ghz where it is valid on all channels.</p><p>I was also missing some channels on wireless 5ghz (I was also on 00 World). I changed to CA - Canada and now everything is there.</p><p>It&#039;s actually probably ok for things to be this way anyways, I mean choose the proper country for your power and channels :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326155">
				<div class="post-metadata">
					<div class="post-num">Post #450</div>
					<div class="post-author">RedVortex</div>
					<div class="post-datetime">
						27 May 2016, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>After reboot, everything is still working and both wireless are also working. I did a few speedtest and I&#039;m not seeing any drops or slowdowns.</p><p>I see a few weird errors in the logs every now and then but it doesn&#039;t seems to affect anything that I could detect.</p><div class="codebox"><pre><code>[   65.445624] ath10k_pci 0000:01:00.0: Unknown eventid: 36898
[  171.328677] ath10k_pci 0000:01:00.0: Unknown eventid: 36898
[  248.057496] ath10k_pci 0001:01:00.0: Unknown eventid: 36898</code></pre></div>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 451 to 450 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 18 of 49</div><nav><ul><li><a href="viewtopic.php%3Fid=54973&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=54973&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=54973&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54973&amp;p=49.html">49</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>