<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR841N(D) Extended Build [v3,v5,v7,v8,v9]</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 27 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=54604&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=54604&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=54604&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=54604&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p274168">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						27 Apr 2015, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>Try installing with –force-depends to ignore the dependencies (which don&#039;t seem to be relevant anyway, just some minor kernel version change).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274171">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">marco_silva85</div>
					<div class="post-datetime">
						27 Apr 2015, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>It fails for lack of disk space, I believe:<br /></p><div class="codebox"><pre><code>root@openwrt:~# opkg install ppp-mod-pptp -force-depends
Installing ppp-mod-pptp (2.4.7-5) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/ppp-mod-pptp_2.4.7-5_ar71xx.ipk.
Installing kmod-pptp (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-pptp_3.18.11-1_ar71xx.ipk.
Installing kmod-gre (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-gre_3.18.11-1_ar71xx.ipk.
Installing kmod-iptunnel (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-iptunnel_3.18.11-1_ar71xx.ipk.
Installing kmod-mppe (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-mppe_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-sha1 (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-sha1_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-hash (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-hash_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-ecb (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-ecb_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-manager (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-manager_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-aead (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-aead_3.18.11-1_ar71xx.ipk.
Installing kmod-crypto-pcompress (3.18.11-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/kmod-crypto-pcompress_3.18.11-1_ar71xx.ipk.
Installing resolveip (2) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/resolveip_2_ar71xx.ipk.
Configuring kmod-crypto-aead.
Configuring kmod-crypto-hash.
Configuring kmod-crypto-pcompress.
Configuring kmod-crypto-manager.
Configuring kmod-iptunnel.
Configuring kmod-gre.
Configuring resolveip.
Configuring kmod-pptp.
Configuring kmod-crypto-ecb.
Configuring kmod-crypto-sha1.
Configuring kmod-mppe.
1 module could not be probed
- ppp_mppe
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for ppp-mod-pptp:
 *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) *     kernel (= 3.18.11-1-317527fb328b694536ee00c07026c22c) * 
 * wfopen: /usr/lib/pppd/2.4.7/pptp.so: No space left on device.
 * wfopen: /etc/ppp/options.pptp: No space left on device.
 * pkg_write_filelist: Failed to open //usr/lib/opkg/info/ppp-mod-pptp.list: No space left on device.
 * opkg_install_pkg: Failed to extract data files for ppp-mod-pptp. Package debris may remain!
 * opkg_install_cmd: Cannot install package ppp-mod-pptp.
 * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.
root@openwrt:~# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                  384.0K    320.0K     64.0K  83% /
/dev/root                 2.5M      2.5M         0 100% /rom
tmpfs                    14.3M      1.0M     13.3M   7% /tmp
/dev/mtdblock3          384.0K    320.0K     64.0K  83% /overlay
overlayfs:/overlay      384.0K    320.0K     64.0K  83% /
tmpfs                   512.0K      4.0K    508.0K   1% /dev</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274172">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						27 Apr 2015, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>Right, it complains about the lack of free space. Then only option is building your own image then.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274175">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">marco_silva85</div>
					<div class="post-datetime">
						27 Apr 2015, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the answers amq.<br />Can you help me including pptp in the build_script so that it doesn&#039;t go over the free space?<br />(I tried PMing you but I think OpenWRT forums don&#039;t have that functionality)</p>											<p class="post-edited">(Last edited by <strong>marco_silva85</strong> on 27 Apr 2015, 18:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274262">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">moonstone</div>
					<div class="post-datetime">
						28 Apr 2015, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Hello amq ,thank you for this great build for 841n.It&#039;s working really well.<br />Is it possible to add DnsCrypt?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276566">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">c.monty</div>
					<div class="post-datetime">
						17 May 2015, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Do you have any idea how to modify the reset button?<br />My intention is to toggle WLAN manually using the WPS/RESET button on front panel.</p><p>According to (official) manual<br />(<a href="http://www.tp-link.com/resources/document/TL-WR841ND_V8_User_Guide_1910011002.pdf">http://www.tp-link.com/resources/docume … 011002.pdf</a>),<br />&quot;[...] this button is used for both WPS and Reset function.&quot;</p><p>According to Wiki <br /><a href="https://wiki.openwrt.org/toh/tp-link/tl-wr841nd">https://wiki.openwrt.org/toh/tp-link/tl-wr841nd</a> <br />it should be feasible to modify the button action.</p><p>Question:<br />How should I proceed with this?</p><p>Ideally I want the following button action:<br />1. Press and hold the WPS/RESET button (more than 5 seconds) until the<br />SYS LED becomes quick-flash from slow-flash. Then release the button and<br />wait the Router to reboot.<br />2. Press the WPS/RESET button to quickly toggle WLAN on/off.</p><p>THX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279736">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						11 Jun 2015, 22:35					</div>
				</div>
				<div class="post-content content">
					<p>The next release will be Chaos Calmer stable.</p><p>I plan the following extra changes:<br />- add DNSCrypt<br />- compile with GCC 5.1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279901">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						13 Jun 2015, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for this amq, I was able to install with no issues.</p><p>Only problem at this point may be that my wireless speed is a&nbsp; bit slower than with stock. Maybe messing with QoS will help. Have you considered using sqm-scripts instead of qos?</p><p>Also, how about adding zram to help with the low memory?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279906">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						13 Jun 2015, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>roger_, I would recommend completely disabling QoS, unless you have a clear plan of how to use it and what will it bring. There isn&#039;t enough space for SQM. Ragarding low memory, have you experienced it (not taking the first boot into account)?</p><p>BTW, I&#039;m thinking of leaving out QoS in the next release. It takes quite a lot of effort to find a space for it (like removing kernel debugging and USB support) and I suspect that not many people are benefiting from it. Those of you who are - don&#039;t be shy to have a say before the stable CC comes out.</p>											<p class="post-edited">(Last edited by <strong>amq</strong> on 13 Jun 2015, 23:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279910">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						13 Jun 2015, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>QoS wasn&#039;t active in my initial testing and my speeds seem to be stabilizing at around what they were before, so all is (probably) well. I&#039;m compiling my own version now to see if I can fit SQM (which is really the whole point for me), but I didn&#039;t think it was much bigger than qos-scripts.</p><p>Personally I&#039;d like to have SQM (or at least QoS) since I&#039;m connecting this router to my modem. I think some people (at least me) would appreciate a build with it, perhaps at the expense of OpenVPN, if you were willing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>My router&#039;s already hovering around ~15% available RAM and with only 32 MB this seems like the perfect use-case for zram, doesn&#039;t it?</p><p>BTW luci-app-watchcat is another useful package you might consider (reboots automatically if your net connection dies). It&#039;s about 5 KB.</p>											<p class="post-edited">(Last edited by <strong>roger_</strong> on 13 Jun 2015, 23:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279913">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						13 Jun 2015, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>SQM will definitely fit without OpenVPN and PolarSSL/mbedTLS, but those are the reason why I created my build.</p><p>I&#039;ll test ZRAM and if it works well I&#039;ll include it.</p>											<p class="post-edited">(Last edited by <strong>amq</strong> on 13 Jun 2015, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279914">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						14 Jun 2015, 00:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>amq wrote:</cite><blockquote><p> I&#039;ll test ZRAM and if it works well I&#039;ll include it.</p></blockquote></div><p>I&#039;ve used ZRAM for years on other devices and never had issues, so it should be fine.</p><div class="quotebox"><cite>amq wrote:</cite><blockquote><p> SQM will definitely fit without OpenVPN and PolarSSL/mbedTLS, but those are the reason why I created my build.</p></blockquote></div><p>No worries,&nbsp; probably easier if I roll out my own.</p><p>BTW you can save more space by leaving out all the ppp stuff (+ ppp-mod-pppoe, luci-proto-ppp, etc.) if you don&#039;t need it.</p><p><strong>EDIT</strong>: using the image builder (no reghack, minification, etc.) and </p><div class="codebox"><pre><code>make image PROFILE=TLWR841  PACKAGES=&quot;luci luci-app-commands luci-app-watchcat zram-swap -ppp -ppp-mod-pppoe -luci-proto-ppp luci-app-sqm&quot;</code></pre></div><p> leaves&nbsp; about 100 KB free, which is good enough for me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>roger_</strong> on 14 Jun 2015, 00:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280030">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">71033</div>
					<div class="post-datetime">
						14 Jun 2015, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>AMQ, I look forward for your new build. keep the good work. VPN for me is also the reason I am using yours.<br />Thanks and Best Regards</p><p>Edit: I do not care about QoS, Security &gt; QoS</p><br /><p>TL-WR841N v9</p>											<p class="post-edited">(Last edited by <strong>71033</strong> on 14 Jun 2015, 19:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280441">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">FluxSine</div>
					<div class="post-datetime">
						18 Jun 2015, 00:34					</div>
				</div>
				<div class="post-content content">
					<p>I wanted to thank you amq for creating this and labeling your thread so well.(Google made it easy to find) </p><p>I had bought a TL-WR841N (V9.3) for $20 and was excited to use it for an all in one VPN since I assumed ddwrt would work on it with VPN.</p><p>After I received it, I realized that a 4mb wasn&#039;t going to cut it. Luckily, searching for WRa841n+VPN got me here. I was able to change it to your firmware in a matter of minutes and have it up and running. Now the issues is trying to figure out how to configure the VPN; which hasb&#039;t gone as smoothly. </p><p>Anyone in here had success running this as a secondary router for a VPN? I currently have my primary sitting on a 192.168.0.1/24 acting as a DHCP server. And then I have the WR841n as a secondary router using 10.0.0.1/24 and have it also acting as a DHCP server for the Lan and Wireless(It works anything connected gets an ip and gets out). What I would like to do is have anything that connects through the lan or AP tunneled across my VPN service. I looked at the IPpredator config, but haven&#039;t had much luck. I wouldn&#039;t have asked but Seeing Ive smashed my head at the config for the last couple days I thought I&#039;d see if any of you have had better luck.</p><p>When I get back home I will post my config file.</p>											<p class="post-edited">(Last edited by <strong>FluxSine</strong> on 18 Jun 2015, 00:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282906">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">impersonator100</div>
					<div class="post-datetime">
						9 Jul 2015, 10:05					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the Nubie questions I need a little help!</p><p>I flash firmware </p><p>r45545 tl-wr841n-v9 factory bin</p><p>copy and pasted<br /><a href="http://paste.debian.net/168088/">http://paste.debian.net/168088/</a> SCRIPT</p><p>And I&#039;m getting these error at the end</p><p>root@OpenWrt:~#<br />root@OpenWrt:~# generate_buildenv<br />-ash: git: not found<br />-ash: cd: can&#039;t cd to openwrt<br />root@OpenWrt:~/openwrt_build# dl_and_install_feeds<br />-ash: ./scripts/feeds: not found<br />-ash: ./scripts/feeds: not found<br />root@OpenWrt:~/openwrt_build# dl_and_update_config<br />-ash: make: not found<br />root@OpenWrt:~/openwrt_build# dl_and_apply_patches<br />wget: can&#039;t open &#039;package/libs/polarssl/patches/300-disable-record-splitting.patch&#039;: No such file or directory<br />root@OpenWrt:~/openwrt_build# optimize_luci<br />wget: can&#039;t execute &#039;openssl&#039;: No such file or directory<br />wget: error getting response: Connection reset by peer<br />wget: short write<br />-ash: unzip: not found<br />find: feeds/luci: No such file or directory<br />find: feeds/luci: No such file or directory<br />root@OpenWrt:~/openwrt_build# run_make</p><p>Help!</p><p>Thank you in an advance …</p>											<p class="post-edited">(Last edited by <strong>impersonator100</strong> on 11 Jul 2015, 23:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284187">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">Macros</div>
					<div class="post-datetime">
						20 Jul 2015, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>Hello amq,</p><p>Thank you very much for this build. I installed it and everything just works perfectly.<br />There is one thing I miss (aside from the many which don&#039;t fit into the tiny ram)<br />and that is an sftp server to allow me to edit config files conveniently.</p><p>I tried opkg install openssh-sftp-server, which downloads a 36KB package, but after installing it,<br />I can&#039;t run it. Message, being &quot;-ash: /usr/lib/sftp-server: not found&quot;<br />Google suggests this is due to a missing library.</p><p>I would be very happy I you could tell me how to get it running, or if you just include it in the next build.<br />Thanks again for your efforts.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284394">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						21 Jul 2015, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Does reghack work? I have tried on some other routers and it seams not to work, and even reghack author says it needs to be updated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284397">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						21 Jul 2015, 21:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>roger_ wrote:</cite><blockquote><p>I&#039;ve used ZRAM for years on other devices and never had issues, so it should be fine.</p></blockquote></div><p>Can you please explain how do you use ZRAM and what benefit do you see? I tried using zram but it burned out my usb flash drive after one week of usage.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284521">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">gkris</div>
					<div class="post-datetime">
						22 Jul 2015, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi amq, </p><p>I just flashed my TPLINK WR841ND v7 router with the firmware you provided on dropbox. </p><p>I still cant see OpenVPN enabled on the device. When I goto Services tab there is no OpenVPN setting</p><p>Not sure what I am missing. Can you please assist? It still looks like the standard image without VPN. I tried the 30/30/30 trick but no luck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287150">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">dinjo</div>
					<div class="post-datetime">
						11 Aug 2015, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>Which one do i need to flash squashfs-factory.bin or squashfs-sysupgrade.bin.</p><p>And how do i run the openvpn from command line i have the client.ovpn how do i ensure all keys and ovpn files are restored ? </p><p>I specifically got this router especially for openVPN as it was damn cheap</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287667">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">dinjo</div>
					<div class="post-datetime">
						15 Aug 2015, 05:36					</div>
				</div>
				<div class="post-content content">
					<p>I got the image flashed on WR841 and openvpn started from command line but cannot get internet connected i know there are some port forwarding to be done and firewall rules changed i tried several things and none seems working , can someone please post what they did do get </p><div class="codebox"><pre><code>root@OpenWrt:~# ifconfig
br-lan    Link encap:Ethernet  HWaddr 30:B5:C2:36:20:56
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::32b5:c2ff:fe36:2056/64 Scope:Link
          inet6 addr: fde9:70ea:d3bc::1/60 Scope:Global
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1838 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1636 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:269021 (262.7 KiB)  TX bytes:894235 (873.2 KiB)

eth0      Link encap:Ethernet  HWaddr 30:B5:C2:36:20:56
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1817 errors:0 dropped:23 overruns:0 frame:0
          TX packets:1549 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:286557 (279.8 KiB)  TX bytes:877774 (857.2 KiB)
          Interrupt:5

eth1      Link encap:Ethernet  HWaddr 30:B5:C2:36:20:57
          inet6 addr: fe80::32b5:c2ff:fe36:2057/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:5255 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1675 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:942865 (920.7 KiB)  TX bytes:305488 (298.3 KiB)
          Interrupt:4

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:84 errors:0 dropped:0 overruns:0 frame:0
          TX packets:84 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:10450 (10.2 KiB)  TX bytes:10450 (10.2 KiB)

pppoe-wan Link encap:Point-to-Point Protocol
          inet addr:172.16.26.22  P-t-P:43.225.161.204  Mask:255.255.255.255
          inet6 addr: fe80::48e8:2cde:9a16:52de/10 Scope:Link
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1480  Metric:1
          RX packets:1557 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1409 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:3
          RX bytes:587978 (574.1 KiB)  TX bytes:265468 (259.2 KiB)

tun0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00
          inet addr:10.32.0.126  P-t-P:10.32.0.125  Mask:255.255.255.255
          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100
          RX bytes:990 (990.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 30:B5:C2:36:20:56
          inet6 addr: fe80::32b5:c2ff:fe36:2056/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:128 errors:0 dropped:0 overruns:0 frame:0
          TX packets:343 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:16465 (16.0 KiB)  TX bytes:46658 (45.5 KiB)</code></pre></div><p>When running openvpn </p><div class="codebox"><pre><code>Sat Aug 15 12:42:27 2015 /sbin/ifconfig tun0 10.32.0.126 pointopoint 10.32.0.125 mtu 1500
Sat Aug 15 12:42:27 2015 /sbin/route add -net 185.21.217.10 netmask 255.255.255.255 gw 43.225.161.204
Sat Aug 15 12:42:27 2015 /sbin/route add -net 0.0.0.0 netmask 128.0.0.0 gw 10.32.0.125
Sat Aug 15 12:42:27 2015 /sbin/route add -net 128.0.0.0 netmask 128.0.0.0 gw 10.32.0.125
Sat Aug 15 12:42:27 2015 /sbin/route add -net 10.32.0.1 netmask 255.255.255.255 gw 10.32.0.125
Sat Aug 15 12:42:27 2015 Initialization Sequence Completed</code></pre></div><p>IF someone can tell more on what needs to be changed would be helpful</p>											<p class="post-edited">(Last edited by <strong>dinjo</strong> on 15 Aug 2015, 10:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288753">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">dinjo</div>
					<div class="post-datetime">
						22 Aug 2015, 07:35					</div>
				</div>
				<div class="post-content content">
					<p>I was able to resolve it by running below commands and adding 8.8.8.8 in my PC DNS </p><p>iptables -I FORWARD -i tun0 -o eth0 \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-s 10.8.0.0/24 -m conntrack --ctstate NEW -j ACCEPT<br />iptables -I FORWARD -m conntrack --ctstate RELATED,ESTABLISHED \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-j ACCEPT<br />iptables -t nat -I POSTROUTING -o eth0 \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -s 10.8.0.0/24 -j MASQUERADE</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291432">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">marco_silva85</div>
					<div class="post-datetime">
						12 Sep 2015, 12:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>amq wrote:</cite><blockquote><p>The next release will be Chaos Calmer stable.</p><p>I plan the following extra changes:<br />- add DNSCrypt<br />- compile with GCC 5.1</p></blockquote></div><p>Chaos Calmer 15.05 is out <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Can you build update your images?</p><p>I&#039;ve been using r45545 for months with no issues, congratulations.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291709">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">amq</div>
					<div class="post-datetime">
						14 Sep 2015, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>Yay <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>2015-09-13<br />- Chaos Calmer 15.05 (r46849)<br />- Removed QoS<br />- Added dnscrypt-proxy<br />- Added ipset-dns<br />- Added luci-app-openvpn</p><p>If the OpenVPN page in Luci doesn&#039;t work:<br /></p><div class="codebox"><pre><code>mv /etc/config/openvpn /etc/config/openvpn.bak
touch /etc/config/openvpn</code></pre></div><p>I am particularity excited about ipset-dns, it can be used to bypass the VPN based on a domain, not IPs (eg. netflix.com)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291711">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">andre.beat</div>
					<div class="post-datetime">
						14 Sep 2015, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>This is a bit offtopic but do you mind sharing your VPN config? Also, are you using the official OpenVPN package or compiling a more recent version? Are you using the openssl version (or polarssl)? </p><p>I&#039;m asking this because I&#039;m running Chaos Calmer on a WDR4300 (which is a bit more powerful than the WR841N) and I only get 2MB/s over the VPN. And while doing so the router CPU goes to 100%.</p><p>Cheers!</p><p>Edit: Just re-read your first post and noticed the results were in Mbs. So the speeds you&#039;re seeing 12Mbs are actually a bit worse than what I&#039;m getting (2MB/s = 16Mbps).</p>											<p class="post-edited">(Last edited by <strong>andre.beat</strong> on 14 Sep 2015, 00:28)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=54604&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=54604&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=54604&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=54604&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>