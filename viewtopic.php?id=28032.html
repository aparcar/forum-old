<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problems with Agama webcam on Asus WL-520GU</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p124800">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">leecallen</div>
					<div class="post-datetime">
						7 Jan 2011, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys.&nbsp; First the obligatory &quot;rank noob&quot; notice: I am completely new to openwrt (but not to Linux).&nbsp; I started working on this yesterday, after a couple of weeks of research.</p><p>I am trying to turn my Asus WL-520GU into a wireless IP webcam. Specifically for use as a &quot;baby monitor&quot; for my multiply handicapped daughter.&nbsp; I hope to eventually add sound and maybe even temperature monitoring via a USB temperature sensor.&nbsp; But right now I am focused on the camera portion.</p><p>It has gone surprisingly well, thanks in large part to the answers buried in these forum posts.&nbsp; But now I have hit a wall.</p><p>I have 2 UVC web cams.&nbsp; The Logitech web cam (sorry I have lost the model number) works pretty well.&nbsp; There is a mysterious (to me) 3-4 second lag before the images appear on the web browser, but I can live with that, for now.&nbsp; But this camera doesn&#039;t have infrared.</p><p>The camera I want to use is an Agama V-1325R &quot;Night Vision Infrared&quot;.&nbsp; I can&#039;t get this to work.&nbsp; It&#039;s definitely a UVC.&nbsp; The drivers seem to find it okay, and mjpg-streamer seems happy with it.&nbsp; But all I get in the images is black, or an invalid jpg file.&nbsp; I have run mjpg-streamer to a file using &quot;output_file.so&quot; to be sure the problem isn&#039;t on the web server/browser side of things.</p><p>Here is the tail end of dmesg for the Logitech (working camera):<br />uvcvideo: Found UVC 1.00 device &lt;unnamed&gt; (046d:0804)<br />input: UVC Camera (046d:0804) as /devices/ssb0:1/usb2/2-1/2-1.4/2-1.4:1.0/input/input2</p><p>...and here is what I get for the Agama camera (non working camera).<br />uvcvideo: Found UVC 1.00 device Agama V-1325R (0458:7073)<br />input: Agama V-1325R as /devices/ssb0:1/usb2/2-1/2-1.1/2-1.1:1.0/input/input0</p><p>Relevant information:<br />Hardware: Asus WL-520GU<br />Image: <a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/backfire/1 â€¦ uashfs.trx</a>&nbsp; </p><p>I have installed the following packages (from the &quot;packages&quot; subdirectory of the above URL):<br />kmod-nls-base_2.6.32.10-1_brcm47xx.ipk<br />kmod-usb-core_2.6.32.10-1_brcm47xx.ipk<br />kmod-video-core_2.6.32.10-1_brcm47xx.ipk<br />kmod-video-usb_2.6.32.10-1_brcm47xx.ipk<br />kmod-usb2_2.6.32.10-1_brcm47xx.ipk<br />libjpeg_6b-1_brcm47xx.ipk<br />librt_0.9.30.1-42_brcm47xx.ipk <br />libpthread_0.9.30.1-42_brcm47xx.ipk <br />mjpg-streamer_r84-2_brcm47xx.ipk <br />kmod-input-core_2.6.32.10-1_brcm47xx.ipk<br />kmod-usb-ohci_2.6.32.10-1_brcm47xx.ipk<br />kmod-i2c-core_2.6.32.10-1_brcm47xx.ipk<br />kmod-scsi-core_2.6.32.10-1_brcm47xx.ipk<br />kmod-usb-storage_2.6.32.10-1_brcm47xx.ipk<br />kmod-fs-vfat_2.6.32.10-1_brcm47xx.ipk<br />kmod-nls-cp437_2.6.32.10-1_brcm47xx.ipk<br />kmod-nls-iso8859-1_2.6.32.10-1_brcm47xx.ipk</p><p>I am generally using mjpg-streamer as follows:<br />mjpg-streamer -i &quot;input_uvc.so -r 320x240 -f 2&quot; -o &quot;output_http.so -p 8080&quot;</p><p>Thanks for any &amp; all help.</p><p>Lee</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124802">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">leecallen</div>
					<div class="post-datetime">
						7 Jan 2011, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>PS - the Agama cam works just fine on my Ubuntu desktop system.</p><p>-Lee</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125063">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">leecallen</div>
					<div class="post-datetime">
						10 Jan 2011, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>(bump) Please, any help would be appreciated.</p><p>I have re-installed using the &quot;bleeding edge&quot; trunk code, and I get the same results.</p><p>I only paid $25 or so for this camera, at this point I would gladly dump it and get another, but I don&#039;t know if I would encounter the same problem.</p><p>If I were willing to wade into compilation and development (intimidating), which package would I tackle?<br />kmod-video-uvc or mjpg-streamer?<br />Because I think it might be productive to reconcile the Ubuntu version (works on my desktop with this camera) with the openwrt code.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125084">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						10 Jan 2011, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t provide specific help for your camera, but I have used a quickcam deluxe and a Quickcam Pro 9000 on a wl520gU with Kamikaze--I don&#039;t recall which version.</p><p>For software, I have used both motion and mjpg_streamer.&nbsp; I started mjpg_streamer with:</p><p>mjpg_streamer -i &quot;input_uvc.so -d /dev/video0 -r 640x480&quot; -o &quot;output_http.so -p 8080 -w /webcam_www&quot;&amp;</p><p>Viewed output with the following:</p><p><a href="http://192.168.1.60:8080">http://192.168.1.60:8080</a> [working]<br /><a href="http://192.168.1.60:8080/?action=snapshot">http://192.168.1.60:8080/?action=snapshot</a> [working]</p><p>With motion, after setting up motion.conf, I used:</p><p>motion -c /etc/motion.conf</p><p>See also: </p><p><a href="http://www.lavrsen.dk/twiki/bin/view/Motion/MotionGuide">http://www.lavrsen.dk/twiki/bin/view/Motion/MotionGuide</a></p><p>From the modules I installed you are missing kmod-video-uvc, but in Backfire that may be included in the kernel (I don&#039;t know one way or the other).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125090">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">leecallen</div>
					<div class="post-datetime">
						10 Jan 2011, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for responding.</p><p>I actually have mjpg-streamer working just fine, with a Logitech webcam.&nbsp; So that&#039;s not the area I am having trouble with.&nbsp; I just can&#039;t get things to work with this Agama (UVC) webcam.</p><p>That Motion package looks interesting: I have been looking for a way to isolate the problem, between the modules (video-uvc) and the mjpg-streamer user-space program.&nbsp; It looks like Motion would let me save images to a file.&nbsp; If I have the same problems with that program, it confirms my issues are with the module.</p><p>I will get to work on that.</p><p>-Lee</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125162">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">leecallen</div>
					<div class="post-datetime">
						11 Jan 2011, 19:13					</div>
				</div>
				<div class="post-content content">
					<p>&quot;motion&quot; is working with my infrared camera!&nbsp; WOO-HOO!!!&nbsp; WOOT!</p><p>Thanks a bunch lizby, I would never have discovered that approach.</p><p>Along the way I have built my own openwrt images &amp; packages.&nbsp; So ... I learned something.</p><p>Thanks!</p><p>-Lee</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125180">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						12 Jan 2011, 01:34					</div>
				</div>
				<div class="post-content content">
					<p>Glad you got it working.&nbsp; I wonder what the problem was with that camera and mjpg-streamer.&nbsp; These glitches often remain mysteries.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>