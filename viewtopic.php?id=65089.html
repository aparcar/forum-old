<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Not listening on ssh</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p325713">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">richard_h</div>
					<div class="post-datetime">
						25 May 2016, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>A few weeks ago, I upgraded from Attitude Adjustment to Chaos Calmer. After that, I have no ssh access.</p><p>Model&nbsp; &nbsp; TP-Link TL-WR1043N/ND v1<br />Firmware Version&nbsp; &nbsp; OpenWrt Chaos Calmer 15.05.1 / LuCI 15.05-149-g0d8bbd2 Release (git-15.363.78009-956be55)<br />Kernel Version&nbsp; &nbsp; 3.18.23</p><p>nmap shows only port 80 is open.<br />Dropbear appears to be configured sanely, but doesn&#039;t appear in the process list. It appears in the Startup page, but clicking Start or Restart has no effect - well, it takes time to process the http request, but there&#039;s still no dropbear.</p><p>I don&#039;t see anything in the system or kernel log when I try to start it.</p><p>I&#039;ve tried deleting and re-adding my key.</p><p>I&#039;ve just realised, I think I may have added /etc/dropbear (but not /etc/config/dropbear) to /lib/upgrade/keep.d, but I think that only keeps the host keys, right? I&#039;m not sure how I can look at files now that I can&#039;t ssh in :-(</p><p>Any tips? I&#039;d try running it from the commandline, but I don&#039;t have one ...</p><p>Thanks,<br />Richard</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325714">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">npkamen</div>
					<div class="post-datetime">
						25 May 2016, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>Did you clear your configs or try to use existing?</p><p>Try backing up and restoring from scratch?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325719">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">richard_h</div>
					<div class="post-datetime">
						25 May 2016, 09:04					</div>
				</div>
				<div class="post-content content">
					<p>I followed <a href="https://wiki.openwrt.org/doc/howto/generic.sysupgrade">https://wiki.openwrt.org/doc/howto/generic.sysupgrade</a></p><p>Unfortunately the notes I made at the time aren&#039;t as complete as I&#039;d remembered ...<br />I kept what I thought was useful, by adding to /etc/sysupgrade.conf or /lib/upgrade/keep.d (not sure which now).</p><p>If I reinstall now, won&#039;t those files still preserve the unwanted config?<br />Also I&#039;ll have to use a different method; I did it from the commandline before.</p><p>Richard</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325720">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">khain</div>
					<div class="post-datetime">
						25 May 2016, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>Let&#039;s start from sratch. Did you select or add correct interface which dropbear should listen on? If you try to ssh from WAN, you have to open port in firewall.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325721">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">richard_h</div>
					<div class="post-datetime">
						25 May 2016, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Fixed by reflashing without keeping settings, thanks. I can&#039;t see which config setting made the difference, but there are a lot of config settings that have changed and many that are new, so refreshing was probably a good idea.</p><p>Thanks,<br />Richard</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>