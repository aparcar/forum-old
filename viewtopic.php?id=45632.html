<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with USB-TTL adapter</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2018 and 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=45632&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p208945">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						4 Aug 2013, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi friends, I have USB-TTL adapter which not works properly. I mean when I type something in terminal I can not see it (I crossed TX and RX). The adapter is with Profilic PL2303 chip. I idetnified TX,RX,GND with my multimeter beeps according to datasheet of PL2303HX. Here are my settings:</p><p><a href="http://postimage.org/"><span class="postimg"><img src="http://s10.postimg.org/pc796lr49/pic1.png" alt="http://s10.postimg.org/pc796lr49/pic1.png" /></span></a></p><p><a href="http://postimage.org/"><span class="postimg"><img src="http://s7.postimg.org/ftjfx2gt7/pic2.png" alt="http://s7.postimg.org/ftjfx2gt7/pic2.png" /></span></a></p><p><a href="http://postimage.org/"><span class="postimg"><img src="http://s23.postimg.org/d85emmqjv/pic3.png" alt="http://s23.postimg.org/d85emmqjv/pic3.png" /></span></a></p><p>Do I need to find 3,3V Vcc and connected to power supply to see how it work ?</p><p>Thanks !</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 4 Aug 2013, 16:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208988">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						5 Aug 2013, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>No, the 3.3V should be supplied by the USB, so to have a quick echo test, you just need to connect Tx and Rx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208990">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						5 Aug 2013, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>I just bridged RX and TX and nothing shows in console (I typed something of course). So there is a difference in voltage of TX and RX if I use 3.3V and if I use 5.0V The voltage of TX and RX is different than 3.3V TX and RX. So my question is why we need only to connect GND, TX, RX on router&#039;s PCB and do not need to connect VCC pin according to difference in voltages of TX and RX? <br />Any suggestions what to do to see if the adapter works properly yet? </p><p>Thanks !</p><p>And another question: I did RS232 - Max232 adapter and I want to test it but now I have not got router on 5.0V Vcc so is it possible to test it like in a picture with 5.0V DC adapter as follow :</p><p><a href="http://postimg.org/image/hs5crn06d/"><span class="postimg"><img src="http://s18.postimg.org/hs5crn06d/5_V.jpg" alt="http://s18.postimg.org/hs5crn06d/5_V.jpg" /></span></a></p><p>Of course I will bridge TX and RX pins</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 5 Aug 2013, 01:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209005">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						5 Aug 2013, 06:32					</div>
				</div>
				<div class="post-content content">
					<p>if i not wrong,the ttl is meaning use the 3.3v level signal,and the pl2303 should can do the work for this. i dont know you use which route for this,but if for the ar9331,you should use 11522bit.no hard flow control<br /><span class="postimg"><img src="http://see.sl088.com/w/images/d/d4/JustCapIt3206.jpg" alt="http://see.sl088.com/w/images/d/d4/JustCapIt3206.jpg" /></span></p><p>this is in the seurecrt:<br /><span class="postimg"><img src="http://see.sl088.com/w/images/c/cc/JustCapIt3208.jpg" alt="http://see.sl088.com/w/images/c/cc/JustCapIt3208.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209006">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">slboat</div>
					<div class="post-datetime">
						5 Aug 2013, 06:39					</div>
				</div>
				<div class="post-content content">
					<p>and you can see the pl2302&#039;s homepage:</p><p>Flexible signal level requirement on the RS-232 serial port side also allows the PL-2303HX to connect directly to 3.3V ~ 1.8V devices.</p><p>so you should no worry about the 5v and 3.3v.</p><p>to need the gnd,i think that&#039;s because we use both diffrent power supply,need a base reference voltage, my suck english is very hard to expensive this,but you dont need vcc,because,you can measurement it by use gnd and signal it self.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209061">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						6 Aug 2013, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>@slboat: he should do the Tx-Rx-Echo test first to see, if his serial adapter can at least communicate to itself. this has to work first, before changing serial settings or connect to a router.<br />@Experimentator: a simplified reason for not connecting the Vcc&#039;s is that they are both outputs, on the router and your adapter, and you should connect just inputs to outputs. it is totally sufficient to connect GND and the appropriate signal lines (at the right voltage level).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209062">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						6 Aug 2013, 01:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>@Experimentator: a simplified reason for not connecting the Vcc&#039;s is that they are both outputs, on the router and your adapter, and you should connect just inputs to outputs. it is totally sufficient to connect GND and the appropriate signal lines (at the right voltage level).</p></blockquote></div><p>Ok, but according to <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=64016&amp;postdays=0&amp;postorder=asc&amp;start=0&amp;sid=7b5c06509f7333a9387a8276d474b182">http://www.dd-wrt.com/phpBB2/viewtopic. … 76d474b182</a> and post of shivasdream: Ok, i did it, build a serial adapter with a MAX232 and two resistors on the tx-output for the W311R (to get 3,3V) It´s working again! Flashed it with DD-WRT, yeah ... </p><p>So if I have a router with 3.3V Vcc I can use MAX232 and power the IC from 5.0V power adapter and connect only TX, RX, GND to router&#039;s TX, RX, GND ? Are there any difference in voltages of 3.3 and 5.0 level converters in TX and RX ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209144">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						6 Aug 2013, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>OK, put it this way: on the usb-serial adapters you normally get, Vcc is an output and may be used to power small devices. But it should not be connected to a router.<br />If you build an adapter using chips like the MAX232, you are basically on your own and should be able to read and understand the datasheet. The adapter IC should be powered with the same voltage as the routers SoC, which is usually 3.3V. Other voltage levels, like 5V may damage the SoC or reduce signal reception.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209145">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						6 Aug 2013, 23:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>OK, put it this way: on the usb-serial adapters you normally get, Vcc is an output and may be used to power small devices. But it should not be connected to a router.<br />If you build an adapter using chips like the MAX232, you are basically on your own and should be able to read and understand the datasheet. The adapter IC should be powered with the same voltage as the routers SoC, which is usually 3.3V. Other voltage levels, like 5V may damage the SoC or reduce signal reception.</p></blockquote></div><p>I understand THANKS !</p><p>My friend gave me brick tp-link tl-wr340g which is bricked. I will try to unbrick it because I want to learn more things and have free time but I do not know the settings like speed, parity, flow controw and etc. If you know something about settings please tell me. The router is not supported by any WRT firmware because it is old and hardware is not supported so I will flash TP-LINK firmware.</p><p>THANKS AGAIN !</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 6 Aug 2013, 23:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209206">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						7 Aug 2013, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>It is usually 8N1, which means 8 bits, no parity, 1 stop bit. Speed can vary, normally one of these: 115200, 9600, 19200, 38400, 57600.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209207">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Boompje123</div>
					<div class="post-datetime">
						7 Aug 2013, 21:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>It is usually 8N1, which means 8 bits, no parity, 1 stop bit. Speed can vary, normally one of these: 115200, 9600, 19200, 38400, 57600.</p></blockquote></div><p>Most often 115200</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209216">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						8 Aug 2013, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for replays ! When I touch with wire TX on the router with RX on the adapter I see only strange characters.</p><p>What must be character encoding in putty ? UTF-8 or ?</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 8 Aug 2013, 01:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209290">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						8 Aug 2013, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>Plain ASCII, so usually UTF8 will do.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209293">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						8 Aug 2013, 23:00					</div>
				</div>
				<div class="post-content content">
					<p>So I see this <br /><a href="http://postimg.org/image/a0z0k0gkp/"><span class="postimg"><img src="http://s12.postimg.org/a0z0k0gkp/TP1.jpg" alt="http://s12.postimg.org/a0z0k0gkp/TP1.jpg" /></span></a><br /><a href="http://postimg.org/image/4hf3rudsj/"><span class="postimg"><img src="http://s21.postimg.org/4hf3rudsj/TP2.jpg" alt="http://s21.postimg.org/4hf3rudsj/TP2.jpg" /></span></a></p><p>I use USB-COM adapter <a href="http://www.aten.com/products/productItem.php?model_no=UC232A">http://www.aten.com/products/productIte … _no=UC232A</a> an maybe this is the reason for this characters in images. </p><p>I found what is the boot log:</p><p>AR2315 rev 0x00000090 startup...<br />Attached TCP/IP interface to ae unit 0<br />Attaching interface lo0...done</p><p>USRCONF : g_size = 20428<br />Name = MODULE_USR_CONF_T , size = 12<br />Name = UC_IEEE802_1X_CFG_DATA_T , size = 512<br />Name = UC_ADVANCED_CFG_T , size = 16<br />Name = UC_ARP_CFG_T , size = 652<br />Name = UC_BPA_CFG_DATA_T , size = 912<br />Name = UC_DDNS_T , size = 1480<br />Name = UC_DHCPC_CFG_DATA_T , size = 416<br />Name = UC_DHCPS_CFG_AND_STATIC_T , size = 708<br />Name = UC_FIRE_WALL_STATE_T , size = 1992<br />Name = UC_FORWARD_VIRTUAL_SERVE_CLASS_T , size = 1572<br />Name = UC_LAN_CFG_DATA_T , size = 16<br />Name = UC_L2TP_CFG_DATA_T , size = 1472<br />Name = UC_MAC_CONFIG_T , size = 80<br />Name = UC_PPPOE_CFG_DATA_T , size = 1600<br />Name = UC_NTP_PREFER_SRV_CFG_DATA_T , size = 28<br />Name = UC_STATIC_IP_CFG_DATA_T , size = 144<br />Name = UC_SATTIC_ROUTE_CFG_DATA_T , size = 328<br />Name = UC_MANAGE_USERS_T , size = 64<br />Name = UC_UTILITIES_T , size = 16<br />Name = UC_WANCONNTYPE_T , size = 16<br />Name = UC_WLAN_CFG_T , size = 5164<br />Name = UC_OPMODE_CFG_T , size = 4<br />Name = UC_PPTP_CFG_DATA_T , size = 1472<br />Name = UC_NETWORK_PSEUDO_T , size = 4<br />Name = UC_QOS_ROUTER_CONF_FLASH_T , size = 740<br />Name = UC_DHCPP_CFG_DATA_T , size = 1008<br />dsInit 1 wlanBridgeInit(): ucGetOpMode() 1 wireless access point starting...<br />wlan0 Ready<br />TDDP</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Software Platform for ARM<br />&nbsp; &nbsp;Copyright(C) 2001-2004 by TP-LINK TECHNOLOGIES CO., LTD.<br />&nbsp; &nbsp;Creation date: Jan&nbsp; 6 2009, 15:49:50</p><p>&nbsp; &nbsp;Press CTRL-B to enter bootmenu...</p><p>&nbsp; &nbsp;Boot Menu:<br />&nbsp; &nbsp; &nbsp;1:&nbsp; Download application program<br />&nbsp; &nbsp; &nbsp;2:&nbsp; Modify Bootrom password<br />&nbsp; &nbsp; &nbsp;3:&nbsp; Exit the menu<br />&nbsp; &nbsp; &nbsp;4:&nbsp; Reboot<br />&nbsp; &nbsp; &nbsp;5:&nbsp; User commond line<br />&nbsp; &nbsp; &nbsp; &nbsp; Enter your choice(1-4):</p><br /><p><a href="http://www.elektroda.pl/rtvforum/viewtopic.php?p=7938781#7938781">http://www.elektroda.pl/rtvforum/viewto … 81#7938781</a></p><p>So do I need bootrom password to flash new firmware ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209294">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						8 Aug 2013, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>that seems like more like a RS232 serial adapter.. not 3.3v TTL!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209297">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						8 Aug 2013, 23:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>that seems like more like a RS232 serial adapter.. not 3.3v TTL!</p></blockquote></div><br /><p>No, I use max3232 and USB-COM and I connect only TX on adapter to TX on router and NOT CONNECT RX.</p><p>I will test on my desktop PC with real RS232 port not USB-RS232</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 8 Aug 2013, 23:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209376">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						9 Aug 2013, 21:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Experimentator wrote:</cite><blockquote><br /><p>No, I use max3232 and USB-COM and I connect only TX on adapter to TX on router and NOT CONNECT RX.</p><p>I will test on my desktop PC with real RS232 port not USB-RS232</p></blockquote></div><p>Do yourself a favor and get yourself a USB to 3.3V serial adapter. You will find them for 3-5$ and they work OTB.<br />The adapter cable you&#039;ve got probably runs 3.3V or 5V internally, and has a level shifter to reach +/- 12V, and with your max3232 you shift it back, at the expense of your signal quality.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209387">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						9 Aug 2013, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>ok now i understood why you need the max232.. </p><p>anyway.. are you using a very long cable?</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 9 Aug 2013, 23:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209388">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						9 Aug 2013, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>I see. Thanks for your advise. I did with my soldering iron RS232 - MAX3232 and want to see how it works. Test with crossed TX and RX is working fine but when I connect it to the router the things looks different. These days I will give you some images to see my diy work <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> When there is a ground pin I solder a wire from element to element ground pin. Is this the problem ? </p><br /><p>Thanks for your time and help to solve my problem !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209389">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						9 Aug 2013, 23:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>should it be tx from router with rx of adapter?? obviusly considering that rx is an input and tx an output...</p></blockquote></div><p>This is the scheme of adapter&nbsp; <a href="http://www.nslu2-linux.org/wiki/HowTo/AddASerialPort">http://www.nslu2-linux.org/wiki/HowTo/AddASerialPort</a> .&nbsp; &nbsp;When I do what you say there in nothing in terminal. It works with strange characters only when the connection is TX to TX. </p><p>Thanks for helping <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209390">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						10 Aug 2013, 00:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>ok now i understood why you need the max232.. </p><p>anyway.. are you using a very long cable?</p></blockquote></div><br /><p>No I need max3232 because there is 3.3V between Ground and Vcc pin. As I said these days I will upload some images to see my cable. And I think that the cable is not very long but you will see from the picture</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 10 Aug 2013, 00:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209391">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						10 Aug 2013, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>My USB-TTL cable is this <a href="http://forum.sat-expert.com/386992-post82.html">http://forum.sat-expert.com/386992-post82.html</a> but seems that I have it but it don&#039;t works properly for now and I do not know why</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209404">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						10 Aug 2013, 08:40					</div>
				</div>
				<div class="post-content content">
					<p>i have that type of usb-serial(ttl) cable. been using ok with my router. havent experienced any problem.</p><p>try to verify your set up also.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209425">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						10 Aug 2013, 15:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elaber wrote:</cite><blockquote><p>i have that type of usb-serial(ttl) cable. been using ok with my router. havent experienced any problem.</p><p>try to verify your set up also.</p></blockquote></div><p>What you see when you crossed TX and RX ? Any suggestions what to test ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209500">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">elaber</div>
					<div class="post-datetime">
						11 Aug 2013, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>are you sure you have the correct tx rx pins?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=45632&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>