<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> gzipped lzma-loader corrupted on TL-WR1043ND</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p160294">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						10 Mar 2012, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>On recent builds from trunk I am observing boot failure on TL-WR1043ND where U-Boot reports GUNZIP error.<br />I was able to get some additional details and created ticket for it:<br /><a href="https://dev.openwrt.org/ticket/11074">https://dev.openwrt.org/ticket/11074</a><br />But now I am stuck and this seems to be serious bug, since it basically bricks the router to the point, it has to be recovered from console.</p><p>Does anybody observe problems with this particular hardware and most recent lzma-loader? (It did work just two weeks ago.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160315">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						10 Mar 2012, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>I’m still waiting for my USB-TTL thingie. But I built trunk about a week ago and it directly transmogrified into something adobe-like.<br />I suspect this is what happened, but I’ll see ehen I hook up serial.</p><p>Quite annoying, but that’s what you get from running trunk. Not a complaint.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160374">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						11 Mar 2012, 01:24					</div>
				</div>
				<div class="post-content content">
					<p>Try make dirclean or simply nuke the buildroot and start over.<br />Back up .config if you have to.</p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 11 Mar 2012, 01:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160394">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						11 Mar 2012, 08:59					</div>
				</div>
				<div class="post-content content">
					<p>alphasparc: If it was suggestion to me, I have already tried clean, dirclean, distclean. In all cases I ended up with GUNZIP error from U-Boot about image not being correct.</p><p>Then I used exactly same environment with just different Makefile (r29441), which does not (yet) use lzma-loader, and where complete kernel is gzipped and it works well too. So I concluded toolchain is probably fine (at least gzip), but the process of building the the image, and in particular connecting the parts together, somehow corrupts it.</p><p>The strange thing is, it worked with lzma-loader too, just about two weeks ago, but not anymore.<br />(I tried to explain this in the ticket mentioned above.).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160400">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						11 Mar 2012, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>One thing I forgot to add. I am using ImageBuilder to build the image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160498">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						12 Mar 2012, 07:10					</div>
				</div>
				<div class="post-content content">
					<p>The thing is solved (see <a href="https://dev.openwrt.org/ticket/11074)">https://dev.openwrt.org/ticket/11074)</a> thanks to juhosg. Well, sort of. Make script was not putting lzma-loader in the image. Now it is time to fix this one <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p>											<p class="post-edited">(Last edited by <strong>risa2000</strong> on 12 Mar 2012, 07:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p160954">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						15 Mar 2012, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Err, during unbricking my box over serial it turned out that OpenWrt was being booted, but it could not find init and panicked. No idea how that happened. Reflashed and it works now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166539">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">johnvk</div>
					<div class="post-datetime">
						4 May 2012, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>how do I load a new image into the router when it keep looping </p><p>Autobooting in 1 seconds## Booting image at bf020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... Error: Bad gzipped data<br />GUNZIP ERROR - must RESET board to recover</p><p>Resetting...</p><p>my router was bricked, so I gained serial access; enter the &#039;tpl&#039; command; <br />* erased the firmware (erase 0xbf020000 +7c0000)<br />* downloaded new firmware from computer to the router (tftpboot 0x81000000 code.bin)<br />* while copying the firmware to flash (cp.b 0x81000000 0xbf020000 0x7c0000) the routre became unresponsive so I had to turn it off.<br />ever since, it is looping</p><p>help is appreciated.</p><p>John</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166543">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">johnvk</div>
					<div class="post-datetime">
						4 May 2012, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Problem solved. bad wire between the serial-pins and the USB/TTL.<br />After fixing this, I was able to download a new firmware.</p><p>John</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>