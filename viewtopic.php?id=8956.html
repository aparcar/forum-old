<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SSH access from WAN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p40598">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">5_o_clock</div>
					<div class="post-datetime">
						10 Jan 2007, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody!</p><p>I&#039;ve put RC6 on my WL500gP about a week ago, tried a couple of things since then (noip deamon, webif^2, ..) then i wanted to open SSH to the WAN to log into the router via the internet. So i looked into the firewall config file (/etc/firewall.user) uncommented the two lines to allow port 22 and restarted firewall with /etc/init.d/S35firewall restart. But whatever I try, I cant get the router to accept SSH connections from the wan side. I also tried to access port 80 from the wan - doesn&#039;t work either. Portforwarding to different machines is working though. </p><p>I searched the board for answers but couldn&#039;t find anything that would help. I also tried to allow port 22 via the webif^2 interface and manually in the /etc/config/firewall file. </p><p>Even tried to move dropbear to another port, cause i suspected my ISP to block port 22. </p><p>I&#039;m using pppoe to connect to the internet. Internet access from the client machines and from the router itself is working, and my IP is responding to ping on the wan port. I also can connect to ssh from the lan. </p><p>I don&#039;t know what to try next. Maybe it&#039;s a model specific problem, a NVRAM setting or its the FW. I&#039;ll post my NVRAM settings below.</p><p>Would be great if somebody could help me to get this thing sorted. </p><p>Thanks in advance.</p><p>Alex</p><p>root@OpenWrt:~# nvram show | sort<br />size: 3808 bytes (28960 left)<br />acc_num=0<br />app_running=0<br />apps_dl=1<br />apps_dl_seed=24<br />apps_dl_share=0<br />apps_dl_share_port_from=10000<br />apps_dl_share_port_to=10050<br />apps_dms=1<br />apps_dms_usb_port=1<br />apps_pool=harddisk/part0<br />apps_share=share<br />boardflags=0x0110<br />boardnum=45<br />boardrev=0x10<br />boardtype=0x042f<br />boot_wait=off<br />br0_ifnames=vlan0 eth1<br />cfe_wait_led_gpio=1<br />cfe_wait_on_restore=0<br />clkfreq=264<br />computer_name=WL500g.Premium<br />custom_shutdown_command=stoprcasus<br />default_boardflags=0x0110<br />default_lan_proto=dhcp_server<br />default_new_disk_action=no_action<br />default_start_page=start_system.asp<br />default_workgroup=WORKGROUP<br />dhcp1_end=192.168.2.254<br />dhcp1_start=192.168.2.2<br />dhcp_end=10.0.0.254<br />dhcp_num=50<br />dhcp_start=100<br />dl_ram_addr=a0001000<br />early_startup_command=convertasus<br />eject_from_web=0<br />et0macaddr=00:18:F3:59:D7:5F<br />et0mdcport=0<br />et0phyaddr=30<br />et1macaddr=40:10:18:00:00:2d<br />et1mdcport=1<br />et1phyaddr=31<br />firmver=1.9.7.0<br />ftp_running=0<br />gpio6=robo_reset<br />gpio_0_name=soft_power_switch<br />gpio_3_name=power_enable<br />hardware_version=WL500gp-01-01-00-00<br />httpd_die_reboot=1<br />kernel_gpio_init_out_3=1<br />kernel_gpio_init_out_6=1<br />lan1_ipaddr=192.168.2.1<br />lan1_netmask=255.255.255.0<br />lan_dhcp_enabled=1<br />lan_dhcp_lease=<br />lan_dhcp_num=50<br />lan_dhcp_start=100<br />lan_hwaddr=00:18:F3:59:D7:5F<br />lan_ifname=br0<br />lan_ifnames=vlan0 eth2<br />lan_ipaddr=10.0.0.1<br />lan_netmask=255.255.255.0<br />lan_proto=static<br />lan_stp=1<br />landevs=vlan0 wl0<br />machine_name=WL500gP<br />misc_io_mode=bcmgpio<br />no_br=0<br />os_date=Aug 28 2006<br />os_flash_addr=bfc40000<br />os_ram_addr=80001000<br />os_version=3.131.20.0<br />pa0maxpwr=78<br />pmon_ver=CFE 3.91.23.0<br />ppp_passwd=********<br />ppp_username=*********<br />pppoe_ifname=vlan1<br />pppoe_ifnames=<br />preferred_lang=EN<br />primary_ifname=eth0<br />printer_ifname=usb<br />productid=WL500g.Premium<br />rescue_gpio=4<br />reset_gpio=7<br />scratch=a0180000<br />sdram_config=0x0062<br />sdram_init=0x0009<br />sdram_ncdl=0x10508<br />sdram_refresh=0x0000<br />sp_battle_ips=1<br />st_ftp_mode=1<br />st_max_user=6<br />st_samba_mode=1<br />st_samba_workgroup=WORKGROUP<br />startup_command=rcasus<br />swap_on=0<br />usb_disc0_index=0<br />usb_disc0_port=0<br />usb_disc1_index=0<br />usb_disc1_port=0<br />vlan0hwname=et0<br />vlan0ports=1 2 3 4 5*<br />vlan1hwname=et0<br />vlan1ports=0 5<br />wait_time=1<br />wan_device=vlan1<br />wan_dhcp_lease=<br />wan_dhcp_num=50<br />wan_dhcp_start=100<br />wan_ifname=ppp0<br />wan_ifnames=vlan1<br />wan_pppoe_demand=0<br />wan_pppoe_idletime=1800<br />wan_pppoe_mru=1492<br />wan_pppoe_mtu=1492<br />wan_pppoe_passwd=*****<br />wan_pppoe_username=****<br />wan_proto=pppoe<br />wan_vport=4<br />wandevs=et0<br />watchdog=5000<br />wifi_dhcp_lease=<br />wifi_dhcp_num=50<br />wifi_dhcp_start=100<br />wifi_ifname=<br />wifi_ifnames=<br />wifi_proto=dhcp<br />wl0_afterburner=off<br />wl0_akm=psk psk2<br />wl0_antdiv=-1<br />wl0_ap_isolate=0<br />wl0_auth=0<br />wl0_auth_mode=none<br />wl0_bcn=100<br />wl0_channel=6<br />wl0_closed=0<br />wl0_corerev=9<br />wl0_country_code=DE<br />wl0_crypto=tkip+aes<br />wl0_dfs_postism=60<br />wl0_dfs_preism=60<br />wl0_dtim=1<br />wl0_frag=2346<br />wl0_frameburst=off<br />wl0_gmode=1<br />wl0_gmode_protection=off<br />wl0_guest_auth_mode_1=open<br />wl0_guest_crypto_1=0<br />wl0_guest_key_1=1<br />wl0_guest_ssid_1=guest<br />wl0_guest_wep_x_1=0<br />wl0_guest_wpa_gtk_rekey_1=0<br />wl0_hwaddr=00:18:F3:59:D7:5F<br />wl0_ifname=eth2<br />wl0_infra=1<br />wl0_key=2<br />wl0_lazywds=0<br />wl0_macmode=disabled<br />wl0_maxassoc=128<br />wl0_mode=ap<br />wl0_mode_ex=ap<br />wl0_mrate=0<br />wl0_net_reauth=36000<br />wl0_phytype=g<br />wl0_phytypes=g<br />wl0_plcphdr=long<br />wl0_preauth=1<br />wl0_radio=1<br />wl0_radioids=BCM2050<br />wl0_radius_port=1812<br />wl0_rate=0<br />wl0_rateset=default<br />wl0_reg_mode=off<br />wl0_rts=2347<br />wl0_ssid=home<br />wl0_wds_timeout=1<br />wl0_wep=disabled<br />wl0_wme=off<br />wl0_wme_ap_be=15 63 3 0 0 off<br />wl0_wme_ap_bk=15 1023 7 0 0 off<br />wl0_wme_ap_vi=7 15 1 6016 3008 off<br />wl0_wme_ap_vo=3 7 1 3264 1504 off<br />wl0_wme_no_ack=off<br />wl0_wme_sta_be=15 1023 3 0 0 off<br />wl0_wme_sta_bk=15 1023 7 0 0 off<br />wl0_wme_sta_vi=7 15 2 6016 3008 off<br />wl0_wme_sta_vo=3 7 2 3264 1504 off<br />wl0_wpa_gtk_rekey=0<br />wl0_wpa_psk=*******<br />wl0id=0x4320<br />wlan_hardware_present=yes<br />wlan_ifname=eth2<br />wlan_ipaddr=192.168.21.1<br />wlan_netmask=255.255.255.0<br />x_Setting=1</p>											<p class="post-edited">(Last edited by <strong>5_o_clock</strong> on 10 Jan 2007, 16:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40660">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ziggurat29</div>
					<div class="post-datetime">
						11 Jan 2007, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>OK, nobody&#039;s posted so I&#039;ll just say this:&nbsp; it does work for me, on a wl500gp RC6, uncommenting those two lines.&nbsp; I don&#039;t know the root of your problem but know it can be done.&nbsp; I haven&#039;t ever tried restarting the firewall script.&nbsp; Should work, though maybe just reboot as a sanity check.&nbsp; Sorry I can&#039;t say anything more illuminating....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40791">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">5_o_clock</div>
					<div class="post-datetime">
						14 Jan 2007, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>thank you very much for your reply! It seems that the problem solved itself. I always verified whether the firewalls are working by using the portscan on grc.com and <a href="http://www.heise.de/security/dienste/portscan/test/do.shtml">http://www.heise.de/security/dienste/po â€¦ t/do.shtml</a>. And even though they showed portforwarding was working port 22 was closed. But when i tried to connect using Putty it was suddenly working. </p><p>Thank you again</p><p>Alex</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>