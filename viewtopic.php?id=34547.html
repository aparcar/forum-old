<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Change WLAN MAC address</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Apr 2018 and 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=34547&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p156555">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 15:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, I have a TP-Link TL-WR841N v7.1 with bleeding edge r29484 installed on it. Everything has been working fine for months, I had set up pseudo bridging, connected the router to a remote access point and got internet from the router through a LAN connection to my PC. A few hours ago, my connection suddenly went down; I thought there must be sth wrong with the access point or sth but when I tried connecting to it using my phone, it connected just fine. Then I checked the system logs and I saw this:</p><div class="codebox"><pre><code>Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.780000] wlan0: authenticate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.790000] wlan0: authenticated
Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.800000] wlan0: associate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.830000] wlan0: RX AssocResp from XX:XX:XX:XX:XX:XX (capab=0x431 status=1 aid=16383)
Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.840000] wlan0: XX:XX:XX:XX:XX:XX denied association (code=1)
Feb  7 13:53:21 OpenWrt kern.debug kernel: [ 2430.860000] wlan0: deauthenticating from XX:XX:XX:XX:XX:XX by local choice (reason=3)
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.650000] wlan0: authenticate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.670000] wlan0: authenticated
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.680000] wlan0: associate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.690000] wlan0: RX AssocResp from XX:XX:XX:XX:XX:XX (capab=0x431 status=1 aid=16383)
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.700000] wlan0: XX:XX:XX:XX:XX:XX denied association (code=1)
Feb  7 13:53:22 OpenWrt kern.debug kernel: [ 2431.710000] wlan0: deauthenticating from XX:XX:XX:XX:XX:XX by local choice (reason=3)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.500000] wlan0: authenticate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.510000] wlan0: authenticated
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.520000] wlan0: associate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.530000] wlan0: RX AssocResp from XX:XX:XX:XX:XX:XX (capab=0x431 status=1 aid=16383)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.530000] wlan0: XX:XX:XX:XX:XX:XX denied association (code=1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2432.550000] wlan0: deauthenticating from XX:XX:XX:XX:XX:XX by local choice (reason=3)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.340000] wlan0: authenticate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.360000] wlan0: authenticated
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.370000] wlan0: associate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.380000] wlan0: RX AssocResp from XX:XX:XX:XX:XX:XX (capab=0x431 status=1 aid=16383)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.390000] wlan0: XX:XX:XX:XX:XX:XX denied association (code=1)
Feb  7 13:53:23 OpenWrt kern.debug kernel: [ 2433.400000] wlan0: deauthenticating from XX:XX:XX:XX:XX:XX by local choice (reason=3)
Feb  7 13:53:24 OpenWrt kern.debug kernel: [ 2434.190000] wlan0: authenticate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:24 OpenWrt kern.debug kernel: [ 2434.200000] wlan0: authenticated
Feb  7 13:53:24 OpenWrt kern.debug kernel: [ 2434.210000] wlan0: associate with XX:XX:XX:XX:XX:XX (try 1)
Feb  7 13:53:24 OpenWrt kern.debug kernel: [ 2434.220000] wlan0: RX AssocResp from XX:XX:XX:XX:XX:XX (capab=0x431 status=1 aid=16383)
Feb  7 13:53:24 OpenWrt kern.debug kernel: [ 2434.230000] wlan0: XX:XX:XX:XX:XX:XX denied association (code=1)</code></pre></div><p>I&#039;m not sure what that means, I got a feeling my router&#039;s MAC address might have been banned, that&#039;s why I tried changing the MAC address. If I change the MAC address of the radio0 interface from the wireless config file, upon restarting the router, the config file is modified and a new radio1 is added to it with the router default configuration; thus, I thought I must be doing it wrong. Then I tried changing the MAC address of the wwan interface (this interface has been added for pseudo bridging according to the guide in the wiki), which also changed the MAC address of the wlan0 interface in ifconfig but still the same old story, authentication works but association doesn&#039;t. The router isn&#039;t that old, I have been using it only for three months, thus I doubt it would be going bad or sth (hopefully) but I really have no idea where the problem is; thus, I really appreciate any help from you guys.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156557">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						7 Feb 2012, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>The macaddr in the config file is to identify the radiohardware to the system for the driver to act accordingly.<br />So if you changed the macaddr, the system assumes a hardware change and automatically adds an interface declaration.</p><p>So changing the macaddr in the config does NOT change the macaddr of your device.<br />As it seems that the system aknowledes your old macaddr the problem must be somewhere else.</p><p>Ifconfig shows your macaddr as HWaddr anyway.<br />Another place to start looking would be /sys/class/net/.. for informations about the interfaces used.</p><p>Seems more likely another problem with your router ( memory ? power ? )</p><p>regards<br />3zl</p>											<p class="post-edited">(Last edited by <strong>3zl</strong> on 7 Feb 2012, 19:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156570">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>i am experiencing the same deauthentication issue with a x86 pc running atheros mini card with ath5k driver...</p><p>if i kill wpa-supplicant then it connects for sometime but when it is under heavy traffic it starts to deauth and authenticate again.....</p><p>try killing wpa-supplicant hope anybody else has any&nbsp; answers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156571">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>what driver are you running ath9k???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156574">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 19:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>So changing the macaddr in the config does NOT change the macaddr of your device.<br />As it seems that the system aknowledes your old macaddr the problem must be somewhere else.</p></blockquote></div><p>How can I change the MAC address in a way that the remote access point would see the new MAC instead of the original one?</p><div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>Another place to start looking would be /sys/calls/net/.. for informations about the interfaces used.</p></blockquote></div><p>Hmm, I don&#039;t have that folder on my router.</p><div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>Seems more likely another problem with your router ( memory ? power ? )</p></blockquote></div><p>I don&#039;t know, such problems do not happen out of nowhere, do they? Everything was working fine till a few hours ago!<br />I noticed that /dev/root is completely full on the router, even though I just upgraded the firmware to the latest version from the trunk, can that be a problem?</p><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>if i kill wpa-supplicant then it connects for sometime but when it is under heavy traffic it starts to deauth and authenticate again.....</p><p>try killing wpa-supplicant hope anybody else has any&nbsp; answers</p></blockquote></div><p>Well, I don&#039;t have such process running, thus I can&#039;t kill it either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156579">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 19:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>try killing wpa-supplicant hope anybody else has any&nbsp; answers</p></blockquote></div><div class="quotebox"><blockquote><p>Well, I don&#039;t have such process running, thus I can&#039;t kill it either.</p></blockquote></div><p>you said you where running a pseudobridge but you din&#039;t mention what encryption you where using.... are using an encryted network ?</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 7 Feb 2012, 19:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156580">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>The remote access point to which my router is supposed to connect to is protected by WPA2-TKIP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156581">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>so then wpa-supplicant is running.....</p><p>what wireless driver are you using</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156583">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						7 Feb 2012, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>...sorry for typo...should be /sys/class/net</p><br /><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156584">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 19:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>so then wpa-supplicant is running.....</p></blockquote></div><div class="codebox"><pre><code>root@OpenWrt:~# ps -A
  PID USER       VSZ STAT COMMAND
    1 root      1480 S    init
    2 root         0 SW   [kthreadd]
    3 root         0 SW   [ksoftirqd/0]
    4 root         0 SW   [kworker/0:0]
    5 root         0 SW   [kworker/u:0]
    6 root         0 SW   [rcu_kthread]
    7 root         0 SW&lt;  [khelper]
    8 root         0 SW   [kworker/u:1]
   51 root         0 SW   [sync_supers]
   53 root         0 SW   [bdi-default]
   55 root         0 SW&lt;  [kblockd]
   83 root         0 SW   [kswapd0]
  130 root         0 SW   [fsnotify_mark]
  144 root         0 SW&lt;  [ar71xx-spi]
  157 root         0 SW   [mtdblock0]
  162 root         0 SW   [mtdblock1]
  167 root         0 SW   [mtdblock2]
  172 root         0 SW   [mtdblock3]
  177 root         0 SW   [mtdblock4]
  182 root         0 SW   [mtdblock5]
  229 root         0 SW   [kworker/0:1]
  368 root         0 SW&lt;  [ipolldevd]
  416 root         0 SWN  [jffs2_gcd_mtd3]
  418 root         0 SW   [flush-mtd-unmap]
  434 root      1480 S    init
  467 root         0 SW&lt;  [cfg80211]
  480 root         0 SW   [khubd]
  547 root      1484 S    /sbin/syslogd -C16
  549 root      1464 S    /sbin/klogd
  551 root       836 S    /sbin/hotplug2 --override --persistent --set-rules-f
  768 root      1476 S    /sbin/watchdog -t 5 /dev/watchdog
  980 root         0 SW   [kworker/0:2]
 1036 root      1504 S    wpa_supplicant -B -P /var/run/wifi-wlan0.pid -D nl80
 1046 root      1476 S    /sbin/udhcpc -t 0 -i eth1 -b -p /var/run/dhcp-eth1.p
 1091 root      1476 S    /sbin/udhcpc -t 0 -i wlan0 -b -p /var/run/dhcp-wlan0
 1232 root      1132 S    /usr/sbin/dropbear -P /var/run/dropbear.1.pid -p 22
 1430 nobody     924 S    /usr/sbin/dnsmasq -K -D -y -Z -b -E -s lan -S /lan/
 1502 root      1476 R    /usr/sbin/ntpd -n -p 0.openwrt.pool.ntp.org -p 1.ope
 1732 root       880 S    /usr/sbin/relayd -I br-lan -I wlan0 -B -D
 1793 root      1196 R    /usr/sbin/dropbear -P /var/run/dropbear.1.pid -p 22
 1834 root         0 SW   [kworker/0:3]
 2055 root      1480 S    -ash
 2200 root      1472 R    ps -A</code></pre></div><p>I don&#039;t see wpa-supplicant among the running processes, do you?</p><br /><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>what wireless driver are you using</p></blockquote></div><p>Not sure what you mean by &quot;driver&quot;, if you mean the firmware, I installed &quot;ATTITUDE ADJUSTMENT (bleeding edge, r30310)&quot; on the router a few hours ago.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156586">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 19:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>THEAST wrote:</cite><blockquote><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>so then wpa-supplicant is running.....</p></blockquote></div><div class="codebox"><pre><code>root@OpenWrt:~# ps -A
  PID USER       VSZ STAT COMMAND
    1 root      1480 S    init
    2 root         0 SW   [kthreadd]
    3 root         0 SW   [ksoftirqd/0]
    4 root         0 SW   [kworker/0:0]
    5 root         0 SW   [kworker/u:0]
    6 root         0 SW   [rcu_kthread]
    7 root         0 SW&lt;  [khelper]
    8 root         0 SW   [kworker/u:1]
   51 root         0 SW   [sync_supers]
   53 root         0 SW   [bdi-default]
   55 root         0 SW&lt;  [kblockd]
   83 root         0 SW   [kswapd0]
  130 root         0 SW   [fsnotify_mark]
  144 root         0 SW&lt;  [ar71xx-spi]
  157 root         0 SW   [mtdblock0]
  162 root         0 SW   [mtdblock1]
  167 root         0 SW   [mtdblock2]
  172 root         0 SW   [mtdblock3]
  177 root         0 SW   [mtdblock4]
  182 root         0 SW   [mtdblock5]
  229 root         0 SW   [kworker/0:1]
  368 root         0 SW&lt;  [ipolldevd]
  416 root         0 SWN  [jffs2_gcd_mtd3]
  418 root         0 SW   [flush-mtd-unmap]
  434 root      1480 S    init
  467 root         0 SW&lt;  [cfg80211]
  480 root         0 SW   [khubd]
  547 root      1484 S    /sbin/syslogd -C16
  549 root      1464 S    /sbin/klogd
  551 root       836 S    /sbin/hotplug2 --override --persistent --set-rules-f
  768 root      1476 S    /sbin/watchdog -t 5 /dev/watchdog
  980 root         0 SW   [kworker/0:2]
 1036 root      1504 S    wpa_supplicant -B -P /var/run/wifi-wlan0.pid -D nl80
 1046 root      1476 S    /sbin/udhcpc -t 0 -i eth1 -b -p /var/run/dhcp-eth1.p
 1091 root      1476 S    /sbin/udhcpc -t 0 -i wlan0 -b -p /var/run/dhcp-wlan0
 1232 root      1132 S    /usr/sbin/dropbear -P /var/run/dropbear.1.pid -p 22
 1430 nobody     924 S    /usr/sbin/dnsmasq -K -D -y -Z -b -E -s lan -S /lan/
 1502 root      1476 R    /usr/sbin/ntpd -n -p 0.openwrt.pool.ntp.org -p 1.ope
 1732 root       880 S    /usr/sbin/relayd -I br-lan -I wlan0 -B -D
 1793 root      1196 R    /usr/sbin/dropbear -P /var/run/dropbear.1.pid -p 22
 1834 root         0 SW   [kworker/0:3]
 2055 root      1480 S    -ash
 2200 root      1472 R    ps -A</code></pre></div><p>I don&#039;t see wpa-supplicant among the running processes, do you?</p><br /><br /><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>what wireless driver are you using</p></blockquote></div><p>Not sure what you mean by &quot;driver&quot;, if you mean the firmware, I installed &quot;ATTITUDE ADJUSTMENT (bleeding edge, r30310)&quot; on the router a few hours ago.</p></blockquote></div><p>dude it&#039;s right there wpa_supplicant -B -P /var/run/wifi-wlan0.pid -D nl80 type kill&nbsp; 1036<br />it&#039;s wpa_supplicant well it was obvious</p><p>give output of&nbsp; opkg list also</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 7 Feb 2012, 19:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156587">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>LOL, I was looking for wpa-suplicant (with dash instead of underline) all this time, can&#039;t believe I didn&#039;t see the process!<br />Anyway, I killed it but it seems the router isn&#039;t trying to connect to the remote access point anymore, logread doesn&#039;t show any more messages but the router is obviously not connected to the access point either; what should I do now?<br />And here&#039;s the list of the installed packages:</p><div class="codebox"><pre><code>base-files - 103-r30310
base-files-network - 3
busybox - 1.19.3-9
crda - 1.1.1-1
dnsmasq - 2.59-2
dropbear - 2011.54-1
firewall - 2-44
hotplug2 - 1.0-beta-4
iptables - 1.4.10-4
iptables-mod-conntrack - 1.4.10-4
iptables-mod-nat - 1.4.10-4
iw - 3.1-2
kernel - 2.6.39.4-1-a61666a8bc8129df4e90e18a2723f7d7
kmod-ath - 2.6.39.4+2011-12-01-2
kmod-ath9k - 2.6.39.4+2011-12-01-2
kmod-ath9k-common - 2.6.39.4+2011-12-01-2
kmod-button-hotplug - 2.6.39.4-3
kmod-cfg80211 - 2.6.39.4+2011-12-01-2
kmod-crypto-aes - 2.6.39.4-1
kmod-crypto-arc4 - 2.6.39.4-1
kmod-crypto-core - 2.6.39.4-1
kmod-input-core - 2.6.39.4-1
kmod-input-gpio-keys-polled - 2.6.39.4-1
kmod-input-polldev - 2.6.39.4-1
kmod-ipt-conntrack - 2.6.39.4-1
kmod-ipt-core - 2.6.39.4-1
kmod-ipt-nat - 2.6.39.4-1
kmod-ipt-nathelper - 2.6.39.4-1
kmod-leds-gpio - 2.6.39.4-1
kmod-ledtrig-usbdev - 2.6.39.4-1
kmod-lib-crc-ccitt - 2.6.39.4-1
kmod-mac80211 - 2.6.39.4+2011-12-01-2
kmod-nls-base - 2.6.39.4-1
kmod-ppp - 2.6.39.4-1
kmod-pppoe - 2.6.39.4-1
kmod-usb-core - 2.6.39.4-1
kmod-usb-ohci - 2.6.39.4-1
kmod-usb2 - 2.6.39.4-1
libc - 0.9.32-103
libgcc - 4.5-linaro-103
libip4tc - 1.4.10-4
libnl-tiny - 0.1-2
libubox - 2011-11-17-f565a7af429bd2d5fa4db9196724bee42d1f597b
libuci - 2011-11-14.1-1
libxtables - 1.4.10-4
mtd - 17
opkg - 618-2
ppp - 2.4.5-4
ppp-mod-pppoe - 2.4.5-4
relayd - 2011-10-24-4e8f1fa4ca2b176500362843a9e57ea5abd4b7a3
swconfig - 10
uboot-envtools - 2011.06-4
uci - 2011-11-14.1-1
wireless-tools - 29-4
wpad-mini - 20111103-3</code></pre></div><p>Edit: Also here are the network and wireless configs for the sake of completeness:</p><p>Network:<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;loopback&#039;
    option &#039;ifname&#039; &#039;lo&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;127.0.0.1&#039;
    option &#039;netmask&#039; &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;lan&#039;
    option &#039;ifname&#039; &#039;eth0&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;proto&#039; &#039;static&#039;
    option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
    option &#039;netmask&#039; &#039;255.255.255.0&#039;

config &#039;interface&#039; &#039;wan&#039;
    option &#039;ifname&#039; &#039;eth1&#039;
    option &#039;proto&#039; &#039;dhcp&#039;

config &#039;switch&#039;
    option &#039;name&#039; &#039;eth0&#039;
    option &#039;reset&#039; &#039;1&#039;
    option &#039;enable_vlan&#039; &#039;1&#039;

config &#039;switch_vlan&#039;
    option &#039;device&#039; &#039;eth0&#039;
    option &#039;vlan&#039; &#039;1&#039;
    option &#039;ports&#039; &#039;0 1 2 3 4&#039;

config &#039;interface&#039; &#039;wwan&#039;
        option &#039;proto&#039; &#039;dhcp&#039;

config &#039;interface&#039; &#039;stabridge&#039;
        option &#039;proto&#039;      &#039;relay&#039;
        option &#039;network&#039;    &#039;lan wwan&#039;</code></pre></div><p>Wireless:<br /></p><div class="codebox"><pre><code>config wifi-device  radio0
    option type     mac80211
    option channel  1
    option macaddr    74:ea:3a:ab:67:be
    option hwmode    11ng
    option htmode    HT20
    list ht_capab    SHORT-GI-20
    list ht_capab    SHORT-GI-40
    list ht_capab    TX-STBC
    list ht_capab    RX-STBC1
    list ht_capab    DSSS_CCK-40

config wifi-iface
    option device   radio0
    option network  wwan
    option mode     sta
    option ssid     XXXXX
    option encryption psk2+tkip
    option key        XXXXXXXXXXXX</code></pre></div>											<p class="post-edited">(Last edited by <strong>THEAST</strong> on 7 Feb 2012, 20:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156588">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>okay now type wifi to start wpa_suppicant again.....so it wills tart to authenticate now maybe...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156590">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>ps: any reason why your using trunk in general why not try the latest stable backfire 10.03.1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156591">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 20:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>okay now type wifi to start wpa_suppicant again.....so it wills tart to authenticate now maybe...</p></blockquote></div><p>wpa_supplicant needs some arguments to run, tired &quot;wpa_supplicant -B -iwlan0 -Dnl80211 -c /var/run/wpa_supplicant-wlan0.conf&quot;, same old story, authentication works, association doesn&#039;t. Honestly, I&#039;m quite sure my router&#039;s MAC address has been banned by the admin on the access point and that&#039;s why I can&#039;t connect anymore. I mean, just as wpa_supplicant is running now, it should have also been running during all these 2-3 months I have been using OpenWRT and never had any issues with it.</p><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>ps: any reason why your using trunk in general why not try the latest stable backfire 10.03.1</p></blockquote></div><p>According to the wiki, for my router to work, I have to use the latest version from trunk and well, everything was working fine until this evening.</p>											<p class="post-edited">(Last edited by <strong>THEAST</strong> on 7 Feb 2012, 20:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156592">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>is there any other networks that you can try connecting to rule out that issue ?<br /> set an ap up with another router or pc and try connecting to it....</p><p>if you don&#039;t have another router consider setting up an ap by running openwrt on pc with a wlan card either virtually or on a dedicated harddrive</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156594">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>from what i know changing mac address on a router is not that simple as you current mac adresses is stored in the bootloader if im correct so in order to change the mac i think you have to change it there. again idon&#039;t know wethere openwrt support it as a feature....</p><p>ps if you google the error you get on the internet you will find a lot of people having issues with router getting disconnected from ap.... but the catch is that it always connects back but acts flask with frequent disconnection</p><p>so i am not really sure what you maybe experiencing</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156599">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately I have nothing to connect to, right now; I think I might be able to ask a friend to bring his laptop over and configure it as an access point for me to connect to but isn&#039;t really an easy way to change the MAC address of the router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156605">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						7 Feb 2012, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>like i said the mac is embedded in bootloader so you have to dump the flash edit and flash back</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156610">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						7 Feb 2012, 22:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>...... everything was working fine until this evening.</p></blockquote></div><p>Would suppose you&#039;ll analyse what&nbsp; &nbsp;[bold]happened / you did then [/bold]&nbsp; will help much more than to anticipate a mac problem and doctor around.</p><br /><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156618">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						7 Feb 2012, 22:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>Would suppose you&#039;ll analyse what&nbsp; &nbsp;[bold]happened / you did then [/bold]&nbsp; will help much more than to anticipate a mac problem and doctor around.</p></blockquote></div><p>Nothing different from usual, downloading some stuff at around 350 KBps and browsing the internet; have been doing this non-stop for quite a few weeks now. Then everything suddenly stopped, I thought the access point or the internet connection must have gone down, checked with my phone, they hadn&#039;t. I&#039;m sure my uni&#039;s admin isn&#039;t happy that someone is bypassing their stupid speed limit (33.3 KBps per IP) and that&#039;s why I think he must have banned my MAC address.</p><div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>like i said the mac is embedded in bootloader so you have to dump the flash edit and flash back</p></blockquote></div><p>Hmm, can&#039;t say I have any idea how to do that; I thought there must be a software method to fake/spoof the MAC address the way things are, seems I was wrong.</p><p>By the way, isn&#039;t the router transparent in pseudo bridge mode? I mean, just as the access point I&#039;m connected to is transparent and when I traceroute an IP, the first hop is the gateway and not the access point, my router should also be transparent when someone traceroutes my IP and that person should only be able to see and blacklist my PC&#039;s MAC address and not the router&#039;s... <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>											<p class="post-edited">(Last edited by <strong>THEAST</strong> on 7 Feb 2012, 22:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156646">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						8 Feb 2012, 03:13					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?id=27678">OpenWrt / WR1043ND - AP and STA problem (linked to eduroam)</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156658">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">THEAST</div>
					<div class="post-datetime">
						8 Feb 2012, 08:33					</div>
				</div>
				<div class="post-content content">
					<p>I just checked /lib/wifi/mac80211.sh, it reads the MAC address from /sys/class/ieee80211/phy0/macaddress, tried editing the file, first got permission denied trying to save it, then changed the permission to 777, still when I wanna save it, WinSCP says copying the file failed with an Input/output error; can it be because /dev/root is completely full on the router? I don&#039;t wanna risk deleting the file and then copy it back because bricking the router at this moment is the last thing I want.</p><p>BTW, I&#039;m not running AP + STA as I originally intended to because doing so significantly reduced the receiving signal strength.</p>											<p class="post-edited">(Last edited by <strong>THEAST</strong> on 8 Feb 2012, 08:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156662">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						8 Feb 2012, 09:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>THEAST wrote:</cite><blockquote><p>Hmm, can&#039;t say I have any idea how to do that; I thought there must be a software method to fake/spoof the MAC address the way things are, seems I was wrong.</p></blockquote></div><p>again like i said i don&#039;t know wether openwrt has that feauture itself i just told you the only way i know how to do it</p><div class="quotebox"><cite>THEAST wrote:</cite><blockquote><p>By the way, isn&#039;t the router transparent in pseudo bridge mode? I mean, just as the access point I&#039;m connected to is transparent and when I traceroute an IP, the first hop is the gateway and not the access point, my router should also be transparent when someone traceroutes my IP and that person should only be able to see and blacklist my PC&#039;s MAC address and not the router&#039;s... <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p></blockquote></div><p>no running on pseudobridge is not transparent as you depend the main ap dhcp server to server ip to all client connected behind your tp link router </p><p>what you should try now is a client mode where you router (wireless mac) will be used to autenticate with the ap (before the mac of your computer on the lan would be used to autenticate) and start a dhcp server of it&#039;s own to server ip on you lan side....</p><p>try that out maybe the mac&nbsp; of you computer is banned which will not matter in client as pc mac will not be needed in this setup</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 8 Feb 2012, 09:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156694">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						8 Feb 2012, 16:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>THEAST wrote:</cite><blockquote><p>BTW, I&#039;m not running AP + STA as I originally intended to because doing so significantly reduced the receiving signal strength.</p></blockquote></div><p>Try AP + AP.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=34547&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>