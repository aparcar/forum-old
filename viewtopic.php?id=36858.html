<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wr941nd v 3.2., installation original firmware via Putty</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p167421">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">b737</div>
					<div class="post-datetime">
						15 May 2012, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;ve something switched in the Luci menu and after that router does not work.<br />How to restore Webinterface and DHCP?</p><p> or</p><br /><p>i&#039;ve managed to connect wr941nd to PC&nbsp; via&nbsp; 4 pin serial port + DKU-5.<br />Entered &quot;tlp&quot; and now i&#039;m thinking how revert.<br />I &#039;ve read diffrent matuals how to install original firmware<br />1.&nbsp; erase 0x_9 _f020000 + (bytes that new firmware consists of)<br />2. erase 0x!_b_f020000 +0x3c0000<br />Where can I find instruction &quot;for dummies&quot; how to install original firmware via serial?</p><br /><p>U-Boot 1.1.4 (Jun 18 2009 - 15:08:27)</p><p>AP81 (ar7100) U-boot<br />DRAM:<br />sri<br />32 MB<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7100_enet_initialize...<br />No valid address in Flash. Using fixed address<br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />eth0<br />Autobooting in 1 seconds## Booting image at bf020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>Linux version 2.6.32.25 (openwrt@ampere) (gcc version 4.3.3 (GCC) ) #1 Fri Nov 19 20:27:50 PST 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR9132 rev 2, CPU:400.000 MHz, AHB:100.000 MHz, DDR:400.000 MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR941ND<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 29304k/32768k available (2113k kernel code, 3464k reserved, 395k data, 152k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-WR941ND<br />bio: create slab &lt;bio-0&gt; at 0<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ?? 2001-2006 Red Hat, Inc.<br />yaffs Nov 19 2010 20:21:41 Installing.<br />msgmni has been set to 57<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: 320s33b (8192 Kbytes)<br />Searching for RedBoot partition table in spi0.0 at offset 0x7e0000<br />Searching for RedBoot partition table in spi0.0 at offset 0x7f0000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=370000, len=80000<br />0x000000370000-0x0000003f0000 : &quot;rootfs_data&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xb9000000, irq 4<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Distributed Switch Architecture driver version 0.1<br />ar7240_dsa: unsupported chip, ctrl=ffffffff<br />eth0[0]: detected a Marvell 88E6060 switch<br />dsa slave smi: probed<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 152k freed<br />Please be patient, while OpenWrt loads ...<br />input: gpio-buttons as /devices/platform/gpio-buttons/input/input0<br />Button Hotplug driver version 0.3.1<br />eth0: link up (100Mbps/Full duplex)<br />- preinit -<br />Registered led device: tl-wr941nd:green:system<br />Registered led device: tl-wr941nd:red:qss<br />Registered led device: tl-wr941nd:green:qss<br />Press the [f] key and hit [enter] to enter failsafe mode<br />- regular preinit -<br />switching to jffs2<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /overlay<br />- init -<br />eth0: link down</p><p>Please press Enter to activate this console.</p><br /><p>BusyBox v1.15.3 (2010-11-11 22:22:00 PST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>eth0: link up (100Mbps/Full duplex)<br />&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> Backfire (10.03.1-rc4, r24045) --------------------<br />&nbsp; * 1/3 shot Kahlua&nbsp; &nbsp; In a shot glass, layer Kahlua<br />&nbsp; * 1/3 shot Bailey&#039;s&nbsp; on the bottom, then Bailey&#039;s,<br />&nbsp; * 1/3 shot Vodka&nbsp; &nbsp; &nbsp;then Vodka.<br /> ---------------------------------------------------<br />root@OpenWrt:/# device lan1 entered promiscuous mode<br />device eth0 entered promiscuous mode<br />device lan2 entered promiscuous mode<br />device lan3 entered promiscuous mode<br />device lan4 entered promiscuous mode<br />Compat-wireless backport release: compat-wireless-2010-10-14-7-gab01eca<br />Backport based on wireless-testing.git master-2010-10-19<br />cfg80211: Calling CRDA to update world regulatory domain<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />cfg80211: World regulatory domain updated:<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />usbcore: registered new device driver usb<br />ieee80211 phy0: Atheros AR9100 MAC/BB Rev:0 AR2133 RF Rev:a2 mem=0xb80c0000, irq=2<br />cfg80211: Calling CRDA for country: US<br />cfg80211: Regulatory domain changed to country: US<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />&nbsp; &nbsp; (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />NET: Registered protocol family 24<br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />nf_conntrack version 0.5.0 (460 buckets, 1840 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />Disabling lock debugging due to kernel taint<br />ath_hal: 2009-05-08 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, XR)<br />ath_pci: trunk<br />wlan: trunk<br />wlan: mac acl policy registered<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />device wlan0 entered promiscuous mode<br />br-lan: port 5(wlan0) entering forwarding state<br />device wlan0 left promiscuous mode<br />br-lan: port 5(wlan0) entering disabled state<br />device wlan0 entered promiscuous mode<br />br-lan: port 5(wlan0) entering forwarding state<br />help<br />Built-in commands:<br />------------------<br />&nbsp; &nbsp; &nbsp; &nbsp; . : [ [[ alias bg break cd chdir command continue echo eval exec<br />&nbsp; &nbsp; &nbsp; &nbsp; exit export false fg getopts hash help jobs kill let local printf<br />&nbsp; &nbsp; &nbsp; &nbsp; pwd read readonly return set shift source test times trap true<br />&nbsp; &nbsp; &nbsp; &nbsp; type ulimit umask unalias unset wait</p><p>root@OpenWrt:/#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167433">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">b737</div>
					<div class="post-datetime">
						15 May 2012, 23:20					</div>
				</div>
				<div class="post-content content">
					<p>solved.. Firstboot)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>