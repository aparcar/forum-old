<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kernel Oops with madwifi on RB133</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p65486">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zgreycoat</div>
					<div class="post-datetime">
						21 Mar 2008, 01:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running the latest (Wednesday 3/19/08, I don&#039;t have the release # handy) svn build with madwifi drivers.&nbsp; I compiled for the ADM5120 target and booted up on a Mikrotik RB133.&nbsp; Everything works fine until I enable wifi.&nbsp; If I take out the &quot;disable&quot; line in /etc/config/wireless and reboot, I get the kernel Oops below.&nbsp; If I issue a &#039;Wifi up&#039;, the console (I&#039;m using serial) just hangs.&nbsp; The fact that it hangs whether or not wifi is enabled in /etc/config/wireless makes me wonder if it&#039;s dying on harware scan.&nbsp; Hm. </p><p>----------</p><p>ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: trunk<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi0: Atheros 5212: mem=0x11400000, irq=14<br />CPU 0 Unable to handle kernel paging request at virtual address 00000004, epc == c012bc74, ra == c012cad8<br />Oops[#1]:<br />Cpu 0<br />$ 0&nbsp; &nbsp;: 00000000 10008400 81f68000 000000a0<br />$ 4&nbsp; &nbsp;: 00000000 00000000 00000000 81f68000<br />$ 8&nbsp; &nbsp;: 000000a0 0007c1f0 004ecb44 7fe6fda4<br />$12&nbsp; &nbsp;: 7fe61043 2abe7370 2abe25b0 7fe6fda4<br />$16&nbsp; &nbsp;: 00000000 81f68000 81f68000 81f68000<br />$20&nbsp; &nbsp;: 00000000 81f68230 7fe6fbf8 7fe6fff8<br />$24&nbsp; &nbsp;: 00000000 8010d0a8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />$28&nbsp; &nbsp;: 81fd8000 81fd9cd0 81fc5dfc c012cad8<br />Hi&nbsp; &nbsp; : 00000363<br />Lo&nbsp; &nbsp; : d7139000<br />epc&nbsp; &nbsp;: c012bc74&nbsp; &nbsp; &nbsp;Tainted: P&nbsp; &nbsp; &nbsp; &nbsp;<br />ra&nbsp; &nbsp; : c012cad8 Status: 10008402&nbsp; &nbsp; KERNEL EXL <br />Cause : 00800008<br />BadVA : 00000004<br />PrId&nbsp; : 0001800b (MIPS 4Kc)<br />Modules linked in: ath_pci wlan_xauth wlan_wep wlan_tkip wlan_ccmp wlan_acl ath_rate_minstrel ath_hal(P) wlan_scan_sta wlan_scan_ap wlan nf_nat_tftp nf_conntrack_tftp nf_nat_irc nf_conntrack_irc nf_nat_ftp nf_conntrack_ftp<br />Process ifconfig (pid: 1948, threadinfo=81fd8000, task=81c2f8a8)<br />Stack : 7fe6fbf8 c0124d2c 81c2d013 8007cbd4 10008401 81fc4360 81f68000 81f68000<br />&nbsp; &nbsp; &nbsp; &nbsp; c0125768 c0125754 81df2000 81fe2c80 80222d68 00000000 00000002 00000001<br />&nbsp; &nbsp; &nbsp; &nbsp; 00000000 80222d48 00000000 8022329c 8005071c 81806610 8007ae18 8007ae04<br />&nbsp; &nbsp; &nbsp; &nbsp; 10008401 81fc4360 81f68000 81fc5b94 81fc4000 00008914 7fe6fbf8 7fe6fff8<br />&nbsp; &nbsp; &nbsp; &nbsp; 00000000 c007703c 81fc4478 00000006 81edcfd8 00000001 81fd9d90 81fc5b94<br />&nbsp; &nbsp; &nbsp; &nbsp; ...<br />Call Trace:[&lt;c0124d2c&gt;][&lt;8007cbd4&gt;][&lt;c0125768&gt;][&lt;c0125754&gt;][&lt;8005071c&gt;][&lt;8007ae18&gt;][&lt;8007ae04&gt;][&lt;c007703c&gt;][&lt;c007c2e8&gt;][&lt;8004e5e4&gt;][&lt;8015bf44&gt;][&lt;c00a940c&gt;][&lt;8005b3e0&gt;][&lt;8005b3e0&gt;][&lt;8015bf44&gt;][&lt;801585d4&gt;][&lt;8015a458&gt;][&lt;801afd04&gt;][&lt;801afb38&gt;][&lt;8015b838&gt;][&lt;8014e23c&gt;][&lt;8007dc9c&gt;][&lt;8007dfac&gt;][&lt;8014caf0&gt;][&lt;8014da50&gt;][&lt;8007e02c&gt;][&lt;80009590&gt;][&lt;80009590&gt;]</p><p>Code: 00021080&nbsp; 00471021&nbsp; 9444302c &lt;94a30004&gt; 10830017&nbsp; 00c01025&nbsp; 00061040&nbsp; 00461021&nbsp; 000210c0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65493">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						21 Mar 2008, 08:05					</div>
				</div>
				<div class="post-content content">
					<p>this is fixed on the latest snapshot.&nbsp; check ticket <a href="https://dev.openwrt.org/ticket/3213">#3213</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>