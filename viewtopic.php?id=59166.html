<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Issue with Chaos Calmer at HT speeds w/o AP connection</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Oct 2016.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p288858">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">johnnyman727</div>
					<div class="post-datetime">
						23 Aug 2015, 07:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am a developer on the completely open-source Tessel 2 project (tessel.io). We are running a OpenWRT distribution on a custom board designed around the MT7620N.</p><p>We are attempting to pass FCC approval but have exhausted our expertise on the following: testing requires our device operate in isolation, so we need to demonstrate that we can emit packets on for bitrates spanning b, g, and n.</p><p>Our distribution is updated to the Chaos Calmer release [1] as of June 14th but we have also tested Chaos Calmer as of August 14th. We have been using the packetspammer [3] utility to send packets as a monitor of wlan0, so wirelessly transmitting packets without being connected to an AP. In short, after hammering against this for sometime, we discovered these commands are successful in setting the appropriate bitrates:</p><p>```<br/>iw mon0 set bitrates legacy-2.4 1 2 11 # b<br/>iw mon0 set bitrates legacy-2.4 6 12 24 # g<br/>```</p><p>But when we try to configure our board for HT speeds, we find that, unless connected to an AP(!), the driver will only output speeds last set by the last legacy-2.4 command. We find this is the case even if we clear all legacy-2.4 speeds:</p><p>```<br/>iw mon0 set bitrates legacy-2.4<br/>iw dev mon0 set bitrates ht-mcs-2.4 4 10 # n<br/>```</p><p>In this scenario, we have been seeing packetspammer [3] output speeds of 1.0 Mb/s, as though HT rates were never being achieved and the driver were accepting defaults.</p><p>We cannot pass FCC certification by introducing another device (say, an AP) into the environment, so we must find some way to demonstrate with the current driver in isolation that we are able to achieve HT speeds.</p><p>Can someone can help us troubleshoot or discover exactly what failure mode we are running into? Are there any other test modes or things we should be doing besides monitor mode/packetspammer? It would be a huge help, as this is the last blocker before we can move forward to full production. Thank you for any help you may have!</p><p>References:</p><p>[1] Our distribution: <a href="https://github.com/tessel/openwrt">https://github.com/tessel/openwrt</a>&nbsp; <br/>[2] Our custom code overlay: <a href="https://github.com/tessel/openwrt-tessel">https://github.com/tessel/openwrt-tessel</a>&nbsp; <br/>[3] Packetspammer source code: <a href="https://wireless.wiki.kernel.org/en/users/documentation/packetspammer">https://wireless.wiki.kernel.org/en/use â€¦ ketspammer</a>&nbsp; <br/>[4] A breakdown of our testing setup: <a href="https://github.com/tessel/project/issues/79">https://github.com/tessel/project/issues/79</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>