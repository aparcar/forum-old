<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Set memory limits for ath9k</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p365001">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">slthomason</div>
					<div class="post-datetime">
						6 Sep 2017, 00:58					</div>
				</div>
				<div class="post-content content">
					<p>We are using the Archer C7 v2 routers (ar71xx) with the ath10k-ct drivers. All of these numbers are while the respective pieces are under load (using iperf).</p><p>Currently, the usage on the ath10k-ct drivers we seem to see stay within approx 20-30 MB of RAM usage. The kernel seems to take approx 20MB. Then we have some other things that are taking approx 30 MB.</p><p>However, as soon as I connect to the 2GHz (ath9k) channel while monitoring the RAM usage, the routers gets within 4 MB of available memory, and things start crashing until the router reboots.<br />Can someone explain:<br />1) why does the ath9k drivers consume what appears to be 60MB+ or RAM?<br />2) is there some way to set the top-end limit of how much it can use?</p><p>Thanks!<br />Spencer</p>											<p class="post-edited">(Last edited by <strong>slthomason</strong> on 6 Sep 2017, 01:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365015">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						6 Sep 2017, 08:00					</div>
				</div>
				<div class="post-content content">
					<p>This sounds like a bug.&nbsp; Have you tried later versions?&nbsp; You should try LEDE anyway as it includes most of the &quot;make wifi fast&quot; improvements to ath9k that have been added after CC was released.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>