<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Avila GW 2348-4 with root fs on CF, stop booting</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p88850">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tuxwet</div>
					<div class="post-datetime">
						27 May 2009, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve use the CF for the root filesystem, I&#039;ve modified the kernel config file to do this. I add monolitic into the kernel the features for CF support.<br />The kernel is on CF and Redboot get it from here with load -r -m disk -b 0x01600000 hda1:openwrt-avila-zImage<br />When bootig it&#039;s all ok, he mount the root fs from the CF but the booting stop..</p><p>This is my output:</p><div class="codebox"><pre><code>Trying NPE-B...success. Using NPE-B with PHY 0.
Ethernet eth0: MAC address 00:d0:12:09:95:47
IP: 192.168.1.100/255.255.255.0, Gateway: 192.168.1.1
Default server: 192.168.1.50

RedBoot(tm) bootstrap and debug environment [ROM]
Gateworks certified release, version 2.04 - built 17:31:20, Jan 29 2008

Platform: Gateworks Avila GW23XX (IXP4XX) BE
Model Number: GW2348-4
Manufacture Date: 02-22-2008
Copyright (C) 2000, 2001, 2002, 2003, 2004, 2007 Gateworks Corporation

RAM: 0x00000000-0x04000000, [0x00029f80-0x03fc1000] available
FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.
== Executing boot script in 2.500 seconds - enter ^C to abort
RedBoot&gt; load -r -m disk -b 0x01600000 hda1:openwrt-avila-zImage
Raw file loaded 0x01600000-0x0170839b, assumed entry at 0x01600000
RedBoot&gt; exec -c &quot;root=/dev/sda1 console=ttyS0,115200&quot;
Using base address 0x01600000 and length 0x0010839c
Uncompressing Linux......................................................................... done, booting the kernel.
Linux version 2.6.26.6 (tux@endorphine) (gcc version 4.1.2) #7 Wed May 27 17:08:32 CEST 2009
CPU: XScale-IXP42x Family [690541c2] revision 2 (ARMv5TE), cr=000039ff
Machine: Gateworks Avila Network Platform
Memory policy: ECC disabled, Data cache writeback
CPU0: D VIVT undefined 5 cache
CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets
CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: root=/dev/sda1 console=ttyS0,115200
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 64MB = 64MB total
Memory: 62592KB available (2012K code, 179K data, 104K init)
SLUB: Genslabs=12, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
net_namespace: 480 bytes
NET: Registered protocol family 16
IXP4xx: Using 16MiB expansion bus window size
PCI: IXP4xx is host
PCI: IXP4xx Using direct access for memory space
PCI: bus0: Fast back to back transfers enabled
dmabounce: registered device 0000:00:01.0 on pci bus
dmabounce: registered device 0000:00:02.0 on pci bus
dmabounce: registered device 0000:00:03.0 on pci bus
dmabounce: registered device 0000:00:04.0 on pci bus
SCSI subsystem initialized
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
IXP4xx Queue Manager initialized.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ?Â© 2001-2006 Red Hat, Inc.
msgmni has been set to 122
io scheduler noop registered
io scheduler deadline registered (default)
gpiodev: gpio device registered with major 253
gpiodev: gpio platform device registered with access mask 000002AA
Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale
console [ttyS0] enabled
serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale
Driver &#039;sd&#039; needs updating - please use bus_type methods
pata_ixp4xx_cf pata_ixp4xx_cf.0: version 0.3
scsi0 : pata_ixp4xx_cf
ata1: PATA max PIO4 cmd 0x51000000 ctl 0x52000006 irq 29
ata1.00: CFA: Transcend    512M, 1.1, max PIO4
ata1.00: 1000944 sectors, multi 1: LBA 
ata1.00: configured for PIO4
ata1.00: configured for PIO4
ata1: EH complete
scsi 0:0:0:0: Direct-Access     ATA      Transcend    512 1.1  PQ: 0 ANSI: 5
sd 0:0:0:0: [sda] 1000944 512-byte hardware sectors (512 MB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA
sd 0:0:0:0: [sda] 1000944 512-byte hardware sectors (512 MB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA
 sda: sda1 sda2
sd 0:0:0:0: [sda] Attached SCSI removable disk
sd 0:0:0:0: Attached scsi generic sg0 type 0
IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000
4 RedBoot partitions found on MTD device IXP4XX-Flash.0
Creating 4 MTD partitions on &quot;IXP4XX-Flash.0&quot;:
0x00000000-0x00080000 : &quot;RedBoot&quot;
0x00080000-0x001e0000 : &quot;zImage&quot;
0x00fe0000-0x00fff000 : &quot;FIS directory&quot;
0x00fff000-0x01000000 : &quot;RedBoot config&quot;
i2c /dev entries driver
ds1672 0-0068: chip found, driver version 0.4
ds1672 0-0068: rtc core: registered ds1672 as rtc0
i2c-gpio i2c-gpio.0: using pins 7 (SDA) and 6 (SCL)
ad7418 0-0028: ad7418 chip found
ad7418 0-0028: configuring for mode 1
IXP4xx Watchdog Timer: heartbeat 60 sec
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
XScale DSP coprocessor detected.
eth0: MII PHY 0 on NPE-B
eth1: MII PHY 1 on NPE-C
Registered led device: user
ds1672 0-0068: setting system clock to 2009-05-27 17:39:55 UTC (1243445995)
EXT2-fs warning: mounting unchecked fs, running e2fsck is recommended
VFS: Mounted root (ext2 filesystem).
Freeing init memory: 104K
Please be patient, while OpenWrt loads ...</code></pre></div><p>What&#039;s wrong?</p><p>Regards<br />tuxwet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88857">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Yanira</div>
					<div class="post-datetime">
						27 May 2009, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, same on NSLU2 (ixp4xx) here with latest trunk and eglibc.</p>											<p class="post-edited">(Last edited by <strong>Yanira</strong> on 27 May 2009, 21:05)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>