<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bricked?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p279937">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mattwylde</div>
					<div class="post-datetime">
						14 Jun 2015, 03:27					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to overwrite the boot loader when flashing a sysupgrade image using U-Boot/TFTP? I was using ramdisk images and they worked fine and they could be flashed without problem. Last time, I flashed a splashfs/sysupgrade image, and I can&#039;t access the serial console anymore! It seems like I overwrote U-Boot or something. Is it possible? There is no LAN access either and the LAN LED is off... I ordered a SPI flash programmer to fix it, but is there anything I can try in the mean time? It could take a while before I receive the programmer.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279958">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mattwylde</div>
					<div class="post-datetime">
						14 Jun 2015, 09:51					</div>
				</div>
				<div class="post-content content">
					<p>Alright I made a parallel port SPI programmer and extracted the ROM chip and binwalk&#039;ed it. Here&#039;s the output. It looks like U-Boot is still there. I don&#039;t understand why it&#039;s not booting.</p><div class="codebox"><pre><code>DECIMAL       HEXADECIMAL     DESCRIPTION
--------------------------------------------------------------------------------
86352         0x15150         U-Boot version string, &quot;U-Boot 1.1.3 (Aug 16 2012 - 13:48:50)&quot;
393216        0x60000         JFFS2 filesystem, little endian
1048656       0x100050        Zlib compressed data, compressed, uncompressed size &gt;= 81
1049048       0x1001D8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1049440       0x100360        Zlib compressed data, compressed, uncompressed size &gt;= 81
1049832       0x1004E8        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1051672       0x100C18        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1053176       0x1011F8        Zlib compressed data, compressed, uncompressed size &gt;= 2194
1054324       0x101674        Zlib compressed data, compressed, uncompressed size &gt;= 81
1054716       0x1017FC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1055108       0x101984        Zlib compressed data, compressed, uncompressed size &gt;= 81
1055500       0x101B0C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1055892       0x101C94        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1057732       0x1023C4        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1059232       0x1029A0        Zlib compressed data, compressed, uncompressed size &gt;= 2201
1060384       0x102E20        Zlib compressed data, compressed, uncompressed size &gt;= 81
1060776       0x102FA8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1061168       0x103130        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1063004       0x10385C        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1064504       0x103E38        Zlib compressed data, compressed, uncompressed size &gt;= 2204
1065656       0x1042B8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1066048       0x104440        Zlib compressed data, compressed, uncompressed size &gt;= 81
1066440       0x1045C8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1066832       0x104750        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1068680       0x104E88        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1070184       0x105468        Zlib compressed data, compressed, uncompressed size &gt;= 2196
1071332       0x1058E4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1071724       0x105A6C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1072116       0x105BF4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1072508       0x105D7C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1072900       0x105F04        Zlib compressed data, compressed, uncompressed size &gt;= 81
1073292       0x10608C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1073684       0x106214        Zlib compressed data, compressed, uncompressed size &gt;= 81
1074076       0x10639C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1074468       0x106524        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1076312       0x106C58        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1077812       0x107234        Zlib compressed data, compressed, uncompressed size &gt;= 2203
1078964       0x1076B4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1079356       0x10783C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1079748       0x1079C4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1080140       0x107B4C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1080532       0x107CD4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1080924       0x107E5C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1081316       0x107FE4        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1083156       0x108714        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1084656       0x108CF0        Zlib compressed data, compressed, uncompressed size &gt;= 2208
1085812       0x109174        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1087648       0x1098A0        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1089156       0x109E84        Zlib compressed data, compressed, uncompressed size &gt;= 2234
1090336       0x10A320        Zlib compressed data, compressed, uncompressed size &gt;= 81
1090728       0x10A4A8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1091120       0x10A630        Zlib compressed data, compressed, uncompressed size &gt;= 81
1091512       0x10A7B8        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1093348       0x10AEE4        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1094860       0x10B4CC        Zlib compressed data, compressed, uncompressed size &gt;= 2234
1096040       0x10B968        Zlib compressed data, compressed, uncompressed size &gt;= 81
1096432       0x10BAF0        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1098268       0x10C21C        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1099780       0x10C804        Zlib compressed data, compressed, uncompressed size &gt;= 2238
1100964       0x10CCA4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1101356       0x10CE2C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1101748       0x10CFB4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1102140       0x10D13C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1102532       0x10D2C4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1102924       0x10D44C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1103316       0x10D5D4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1103708       0x10D75C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1104100       0x10D8E4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1104492       0x10DA6C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1104884       0x10DBF4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1105156       0x10DD04        JFFS2 filesystem, little endian
1966348       0x1E010C        JFFS2 filesystem, little endian
1967180       0x1E044C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1967572       0x1E05D4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1967964       0x1E075C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1968356       0x1E08E4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1968748       0x1E0A6C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1969140       0x1E0BF4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1969532       0x1E0D7C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1969924       0x1E0F04        Zlib compressed data, compressed, uncompressed size &gt;= 81
1970316       0x1E108C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1970708       0x1E1214        Zlib compressed data, compressed, uncompressed size &gt;= 81
1971100       0x1E139C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1971492       0x1E1524        Zlib compressed data, compressed, uncompressed size &gt;= 81
1971884       0x1E16AC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1972276       0x1E1834        Zlib compressed data, compressed, uncompressed size &gt;= 81
1972668       0x1E19BC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1973060       0x1E1B44        Zlib compressed data, compressed, uncompressed size &gt;= 81
1973452       0x1E1CCC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1973844       0x1E1E54        Zlib compressed data, compressed, uncompressed size &gt;= 81
1974236       0x1E1FDC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1974628       0x1E2164        Zlib compressed data, compressed, uncompressed size &gt;= 81
1975020       0x1E22EC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1975412       0x1E2474        Zlib compressed data, compressed, uncompressed size &gt;= 81
1975804       0x1E25FC        Zlib compressed data, compressed, uncompressed size &gt;= 81
1976196       0x1E2784        Zlib compressed data, compressed, uncompressed size &gt;= 81
1976588       0x1E290C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1976980       0x1E2A94        Zlib compressed data, compressed, uncompressed size &gt;= 81
1977372       0x1E2C1C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1977764       0x1E2DA4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1978156       0x1E2F2C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1978548       0x1E30B4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1978940       0x1E323C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1979332       0x1E33C4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1979724       0x1E354C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1980116       0x1E36D4        Zlib compressed data, compressed, uncompressed size &gt;= 81
1980508       0x1E385C        Zlib compressed data, compressed, uncompressed size &gt;= 81
1980660       0x1E38F4        JFFS2 filesystem, little endian
1981912       0x1E3DD8        GIF image data, version &quot;89a&quot;, 1240 x 80
1985568       0x1E4C20        Zlib compressed data, compressed, uncompressed size &gt;= 81
1985960       0x1E4DA8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1986352       0x1E4F30        Zlib compressed data, compressed, uncompressed size &gt;= 81
1986744       0x1E50B8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1987136       0x1E5240        Zlib compressed data, compressed, uncompressed size &gt;= 81
1987528       0x1E53C8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1987920       0x1E5550        Zlib compressed data, compressed, uncompressed size &gt;= 81
1988312       0x1E56D8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1988704       0x1E5860        Zlib compressed data, compressed, uncompressed size &gt;= 81
1989096       0x1E59E8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1989488       0x1E5B70        Zlib compressed data, compressed, uncompressed size &gt;= 81
1989880       0x1E5CF8        Zlib compressed data, compressed, uncompressed size &gt;= 81
1990272       0x1E5E80        Zlib compressed data, compressed, uncompressed size &gt;= 81
1990664       0x1E6008        Zlib compressed data, compressed, uncompressed size &gt;= 81
1991056       0x1E6190        Zlib compressed data, compressed, uncompressed size &gt;= 81
1991448       0x1E6318        Zlib compressed data, compressed, uncompressed size &gt;= 81
1991840       0x1E64A0        Zlib compressed data, compressed, uncompressed size &gt;= 81
1992232       0x1E6628        Zlib compressed data, compressed, uncompressed size &gt;= 81
1992624       0x1E67B0        Zlib compressed data, compressed, uncompressed size &gt;= 81
1993016       0x1E6938        Zlib compressed data, compressed, uncompressed size &gt;= 81
1993356       0x1E6A8C        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1995204       0x1E71C4        Zlib compressed data, compressed, uncompressed size &gt;= 4096
1996720       0x1E77B0        Zlib compressed data, compressed, uncompressed size &gt;= 1490
1997560       0x1E7AF8        GIF image data, version &quot;89a&quot;, 1240 x 80
2001104       0x1E88D0        JFFS2 filesystem, little endian
2004888       0x1E9798        Zlib compressed data, compressed, uncompressed size &gt;= 81
2005280       0x1E9920        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2007128       0x1EA058        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2008640       0x1EA640        Zlib compressed data, compressed, uncompressed size &gt;= 1516
2009488       0x1EA990        Zlib compressed data, compressed, uncompressed size &gt;= 81
2009880       0x1EAB18        Zlib compressed data, compressed, uncompressed size &gt;= 81
2010272       0x1EACA0        Zlib compressed data, compressed, uncompressed size &gt;= 81
2010664       0x1EAE28        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2012512       0x1EB560        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2014024       0x1EBB48        Zlib compressed data, compressed, uncompressed size &gt;= 1516
2014872       0x1EBE98        Zlib compressed data, compressed, uncompressed size &gt;= 81
2015264       0x1EC020        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2017112       0x1EC758        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2018632       0x1ECD48        Zlib compressed data, compressed, uncompressed size &gt;= 1525
2019480       0x1ED098        Zlib compressed data, compressed, uncompressed size &gt;= 81
2019872       0x1ED220        Zlib compressed data, compressed, uncompressed size &gt;= 81
2020264       0x1ED3A8        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2022112       0x1EDAE0        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2023668       0x1EE0F4        Zlib compressed data, compressed, uncompressed size &gt;= 1629
2024372       0x1EE3B4        JFFS2 filesystem, little endian
2024816       0x1EE570        Zlib compressed data, compressed, uncompressed size &gt;= 81
2025208       0x1EE6F8        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2027060       0x1EEE34        Zlib compressed data, compressed, uncompressed size &gt;= 4096
2028580       0x1EF424        Zlib compressed data, compressed, uncompressed size &gt;= 1559
2029448       0x1EF788        Zlib compressed data, compressed, uncompressed size &gt;= 81
2029668       0x1EF864        JFFS2 filesystem, little endian
2030112       0x1EFA20        Zlib compressed data, compressed, uncompressed size &gt;= 81
2030504       0x1EFBA8        Zlib compressed data, compressed, uncompressed size &gt;= 81
2030896       0x1EFD30        Zlib compressed data, compressed, uncompressed size &gt;= 81
2031288       0x1EFEB8        Zlib compressed data, compressed, uncompressed size &gt;= 81
2031616       0x1F0000        JFFS2 filesystem, little endian
2097152       0x200000        uImage header, header size: 64 bytes, header CRC: 0x4F9A7108, created: Sat Jun 13 00:24:23 2015, image size: 1089768 bytes, Data Address: 0x80000000, Entry Point: 0x80000000, data CRC: 0xAE1F3FF8, OS: Linux, CPU: MIPS, image type: OS Kernel Image, compression type: lzma, image name: &quot;MIPS OpenWrt Linux-3.18.14&quot;
2097216       0x200040        LZMA compressed data, properties: 0x6D, dictionary size: 8388608 bytes, uncompressed size: 3234260 bytes
3186984       0x30A128        Squashfs filesystem, little endian, version 4.0, compression:lzma (non-standard type definition), size: 4997676 bytes,  1857 inodes, blocksize: 262144 bytes, created: Sat Jun 13 00:23:04 2015</code></pre></div><p>Flash content starts at 0x10000. It&#039;s all 0xFFs before that. Here&#039;s the original MTD layout:</p><div class="codebox"><pre><code>sn Jan  1 00:00:18 kernel: MX25L6405D(c2 2017c220) (8192 Kbytes)
sn Jan  1 00:00:18 kernel: mtd .name = raspi, .size = 0x00800000 (8M) .erasesize = 0x00010000 (64K) .numeraseregions = 0
sn Jan  1 00:00:18 kernel: Creating 6 MTD partitions on &quot;raspi&quot;:
sn Jan  1 00:00:18 kernel: 0x00000000-0x00800000 : &quot;ALL&quot;
sn Jan  1 00:00:18 kernel: 0x00000000-0x00030000 : &quot;Bootloader&quot;
sn Jan  1 00:00:18 kernel: 0x00030000-0x00050000 : &quot;Config&quot;
sn Jan  1 00:00:18 kernel: 0x00050000-0x00060000 : &quot;Factory&quot;
sn Jan  1 00:00:18 kernel: 0x00060000-0x00200000 : &quot;user_fs&quot;
sn Jan  1 00:00:18 kernel: 0x00200000-0x01000000 : &quot;Kernel&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>mattwylde</strong> on 14 Jun 2015, 10:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280669">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						19 Jun 2015, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>I have access to a H685, let me know if I can help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280672">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mattwylde</div>
					<div class="post-datetime">
						19 Jun 2015, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, you&#039;re very kind. Fortunately, I had a second router and I was able to extract the original U-Boot. I figured that it&#039;s not safe to flash the firmware with the bootloader. Sometimes, it randomly erases the 0x0 to 0x10000 flash region. Instead, I booted the original firmware and flashed the image from there using:</p><p>cat firmware.bin &gt; /dev/mtdblock5</p><p>It works everytime.</p><p>Thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303024">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pesalek</div>
					<div class="post-datetime">
						9 Dec 2015, 13:09					</div>
				</div>
				<div class="post-content content">
					<p>Hello Matt, can you help me with making thr custom openwrt for h685? I would like to pay for your help, since there is just very little info about this device and I need to put openwrt on 10. Thank you for reply</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311141">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mattwylde</div>
					<div class="post-datetime">
						12 Feb 2016, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Here&#039;s a link to my Google Drive. It contains all the files you need to make it work. I don&#039;t really have time for more but you should be able to figure it out.</p><p><a href="https://drive.google.com/folderview?id=0B63Xb295-XhNZjJCSm80bDJ4MjA&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p><p>The location for the files are in the comments of each file.</p>											<p class="post-edited">(Last edited by <strong>mattwylde</strong> on 12 Feb 2016, 15:39)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>