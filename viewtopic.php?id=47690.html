<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT NAS using LVM?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p219263">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">macMeck</div>
					<div class="post-datetime">
						5 Dec 2013, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I&#039;m about to reorganize my NAS and the all-day-long running router with OpenWRT is my current choice of hardware to host all the stuff. The HDDs are external drives attached to the router via USB hub. Might not be high-speed, but should be sufficient to host the media library and hold my backups. </p><p>So how about setting up LVM2 on the router (D-Link DIR-825 with 560MHz, 16MB Flash, 128MB RAM), throw all the physical drives together and use logical volumes of LVM? That would give me the flexibility to add more drives in the future and easily extend the storage without changing the configuration or specifically assign content to discs.</p><p>What do you think about such an approach? Any experience with LVM on OpenWRT? Too slow? Pros? Cons? Caveats? I&#039;m wondering why I can find almost nothing about similar setups. Wrong approach?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219329">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						6 Dec 2013, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>For LVM you need to recompile openwrt yourself with custom kernel_menuconfig. I have no experience doing this but I know about speeds routers can handle. Old routers give only 2-3 mb/s from samba share, newer up to 10 mb/s. Problem is slow CPU and limitations of internal NIC and USB ports. LVM will be even slower, with RAID i&#039;m sure you&#039;ll get very slow speed.<br />For external HDDs you&#039;ll need USB hub with external power supply. Router has not enough power for them.<br />I&#039;d rather used old PC for file server.</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 6 Dec 2013, 21:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219330">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ninadchaudhari</div>
					<div class="post-datetime">
						6 Dec 2013, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>I have been using my Router (TP-Link wdr3600 ) for some time now as a small NAS.<br />The problem is the speed !<br />I have (for now ) just connected a single USB HDD , and though it can achieve around 30MBPS via USB on PC , its not possible on the router ...<br />I get a speed of around 8-9MBPS(average) (both write and read) on wireless and no huge improvement on Gigabyte Ethernet either .<br />FYI , Samba shared;Seagate Backup Plus HDD and mounted with realtime,rw ;</p><p>I do enjoy the freedom of user dependent , personal and public shares ... i miss the speeds i had with a dedicated old PC with Internal HDD ... But i guess for a TM backup, and media round the House, even 8 MBPs is fine ... never find it coming in between except for when i need to transfer huge movie files form PC to HDD, else playing them simultaneously on many devices is breeze !&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p>LVM , as compiling and all required, ignored !!!!<br />but, i do have plans to do RAID 1 with mdadm which is readily available ... will post back for performance problems and results though later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219449">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">macMeck</div>
					<div class="post-datetime">
						8 Dec 2013, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your hints so far. As mentioned before, I know that speed will be record breaking, but still an improvement tot the current system.</p><p>What about compiling openwrt myself? LVM2 packages are available for Attitude Adjustment. I did a quick test with two USB sticks, works so far. What else is needed that is not already compiled?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219555">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">macMeck</div>
					<div class="post-datetime">
						9 Dec 2013, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>Well, my old WL-500G Premium gives only ~1.2MB/s while copying a file within the logical volume itself... let&#039;s try a more current piece of hardware in the upcoming days.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222163">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">macMeck</div>
					<div class="post-datetime">
						9 Jan 2014, 14:24					</div>
				</div>
				<div class="post-content content">
					<p>Copying a large file brings about 5-6MB/s on one physical HDD (LVM) on my D-Link DIR-825. Currently struggeling with the other HDD connected to the USB hub...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>