<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> kmod-rt2800-usb</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p151507">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						19 Dec 2011, 01:45					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to add a usb wifi dongle. It uses the rt2800usb driver and has the ralink 5370 chipset. From what I gathered from these forums and google is that the openwrt trunk kmod-2800-usb drivers are not working. I am getting a whole list of errors in dmesg like this one:</p><p>rt2800usb: Unknown symbol rt2x00mac_sw_scan_complete (err 0)</p><p>Is there something I am missing or that I need to do to fix this?</p><p>--<br />thanks</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 20 Dec 2011, 01:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151510">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						19 Dec 2011, 04:47					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using rt2800usb with a Sparclan Ralink dual band wifi usb dongle and it&#039;s working great--very fast and stable 11gn wireless connections (still flaky on 11an). I simply selected the rt2800usb driver in the Kernel Module/Wireless section of menuconfig. I&#039;m running OpenWrt trunk.</p>											<p class="post-edited">(Last edited by <strong>robrob</strong> on 19 Dec 2011, 04:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151515">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						19 Dec 2011, 06:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. I know I have something to look forward to... I meant to know if opkg install kmod-rt2800-usb would work. </p><p>I did try compiling it into the kernel but something was wrong (not sure where/what) that was having trouble with finding a magic bit in some part of the boot process. I did start from scratch and I don&#039;t know why but it bricked the router (even no failsafe) I need to connect the serial cable too see whats happening there. (I think I used the wrong fw by accident -- it happens)</p><p>Anyways I am happy to know that it works at least if compiled in. I am also running trunk.</p><p>--<br />thanks.</p><p>-edit-<br />I know the problem. It is the same error as before but like the genius I am I did not test it first on the router with the serial cable connected. now I need to solder on some connection to tftp boot a working fw.</p><p>just for curiosity sake here is whats happening. I have no clue why. as far as I know it is a clean build. I have a seperate build where I change makefiles etc.. so it is more likely a mistake from there, but here should be clean.<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00105024: 0x1513 instead</p><p>-- thanks again</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 19 Dec 2011, 06:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151581">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						20 Dec 2011, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>I tried again from scratch compiled build 29570 with the profile of my router (tplink mr3220) and added only kmod-rt2800-usb into the firmware.</p><p>It runs fine but I still dont see how to get it to recognise the wifi dongle. In /etc/config/wireless there is only one radio device. I even had the dongle plugged in on the first boot when it sets up the router. how do I see if its recognising/installing?</p><p>I should add that the device I have uses the ralink 5370 chipset.<br />lsusb: Bus 001 Device 003: ID 148f:5370 Ralink Technology, Corp.</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 20 Dec 2011, 01:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151667">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						21 Dec 2011, 06:46					</div>
				</div>
				<div class="post-content content">
					<p>Run dmesg and post its output and we&#039;ll see if we can see what&#039;s going on with the driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151728">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						22 Dec 2011, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>[&nbsp; &nbsp; 0.000000] Linux version 2.6.39.4 (tux@MintyTuX) (gcc version 4.5.4 20110808 (prerelease) (Linaro GCC 4.5-2011.08) ) #1 Mon Dec 19 16:54:50 EST 2011<br />[&nbsp; &nbsp; 0.000000] prom: fw_arg0=00000001, fw_arg1=80a01920, fw_arg2=00000000, fw_arg3=00000000<br />[&nbsp; &nbsp; 0.000000] MyLoader: sysp=f0f0f0f0, boardp=f0f0f0f0, parts=f0f0f0f0<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR7241 rev 1<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] early_node_map[1] active PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 8192<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 802bf820, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 64 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 8128 pages, LIFO batch:0<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0 <br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-MR3220 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 29324k/32768k available (2035k kernel code, 3444k reserved, 396k data, 196k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:80<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-MR3220<br />[&nbsp; &nbsp; 0.730000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.740000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: fixup device configuration<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: supports D1<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: PME# disabled<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])<br />[&nbsp; &nbsp; 0.770000] PCI: mapping irq 72 to pin1@0000:00:00.0<br />[&nbsp; &nbsp; 0.770000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.780000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.780000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.780000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.790000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.790000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.800000] TCP reno registered<br />[&nbsp; &nbsp; 0.800000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.810000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.810000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.820000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.830000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.840000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.850000] msgmni has been set to 57<br />[&nbsp; &nbsp; 0.860000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.860000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.860000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.890000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.900000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.910000] Atheros AR71xx SPI Controller driver version 0.2.4<br />[&nbsp; &nbsp; 0.920000] m25p80 spi0.0: found en25f32, expected m25p80<br />[&nbsp; &nbsp; 0.930000] m25p80 spi0.0: en25f32 (4096 Kbytes)<br />[&nbsp; &nbsp; 0.930000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.940000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.940000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.950000] 0x000000020000-0x0000000fa200 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.950000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.970000] 0x0000000fa200-0x0000003f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.970000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.990000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.990000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=270000, len=180000 <br />[&nbsp; &nbsp; 1.000000] 0x000000270000-0x0000003f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 1.010000] 0x0000003f0000-0x000000400000 : &quot;art&quot;<br />[&nbsp; &nbsp; 1.010000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 1.360000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.360000] eth0: Atheros AG71xx at 0xba000000, irq 5<br />[&nbsp; &nbsp; 1.950000] eth0: Found an AR7240/AR9330 built-in switch<br />[&nbsp; &nbsp; 1.970000] eth1: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 2.580000] eth1: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 2.580000] Atheros AR71xx hardware watchdog driver version 0.1.0<br />[&nbsp; &nbsp; 2.580000] ar71xx-wdt: timeout=15 secs (max=21)<br />[&nbsp; &nbsp; 2.580000] TCP westwood registered<br />[&nbsp; &nbsp; 2.590000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.590000] 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />[&nbsp; &nbsp; 2.600000] All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />[&nbsp; &nbsp; 2.620000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.620000] Freeing unused kernel memory: 196k freed<br />[&nbsp; &nbsp; 5.210000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0<br />[&nbsp; &nbsp; 5.390000] Button Hotplug driver version 0.4.1<br />[&nbsp; &nbsp; 5.470000] Registered led device: tp-link:green:system<br />[&nbsp; &nbsp; 5.480000] Registered led device: tp-link:green:qss<br />[&nbsp; &nbsp; 5.480000] Registered led device: tp-link:green:3g<br />[&nbsp; &nbsp; 5.600000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp; 8.830000] JFFS2 notice: (422) jffs2_build_xattr_subsystem: complete building xattr subsystem, 2 of xdatum (1 unchecked, 1 orphan) and 33 of xref (0 dead, 14 orphan) found.<br />[&nbsp; &nbsp; 9.030000] eth0: link down<br />[&nbsp; &nbsp; 9.900000] Compat-wireless backport release: compat-wireless-2011-11-29<br />[&nbsp; &nbsp; 9.900000] Backport based on wireless-testing.git master-2011-12-01<br />[&nbsp; &nbsp;10.040000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;10.550000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;10.550000] cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;10.560000] cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.570000] cfg80211:&nbsp; &nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.580000] cfg80211:&nbsp; &nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.580000] cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.590000] cfg80211:&nbsp; &nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.720000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp;10.730000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;10.750000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;11.660000] usbcore: registered new interface driver rt2800usb<br />[&nbsp; &nbsp;11.740000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.970000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;12.140000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;12.220000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp;12.230000] ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller<br />[&nbsp; &nbsp;12.230000] ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp;12.270000] ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp;12.290000] ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp;12.290000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp;12.300000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp;12.390000] nf_conntrack version 0.5.0 (461 buckets, 1844 max)<br />[&nbsp; &nbsp;12.620000] usb 1-1: new high speed USB device number 2 using ar71xx-ehci<br />[&nbsp; &nbsp;12.750000] uhci_hcd: USB Universal Host Controller Interface driver<br />[&nbsp; &nbsp;12.930000] usbcore: registered new interface driver yealink<br />[&nbsp; &nbsp;12.940000] yealink: yld-20051230:Yealink phone driver<br />[&nbsp; &nbsp;14.400000] eth0: link up (1000Mbps/Full duplex)<br />[&nbsp; &nbsp;14.410000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;14.470000] br-lan: port 1(eth0) entering forwarding state<br />[&nbsp; &nbsp;14.480000] br-lan: port 1(eth0) entering forwarding state<br />[&nbsp; &nbsp;20.960000] ar71xx-wdt: enabling watchdog timer</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151799">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						22 Dec 2011, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>Your dmesg does contain:</p><p>[&nbsp; &nbsp;11.660000] usbcore: registered new interface driver rt2800usb</p><p>Which is very similar to my dmesg:</p><p>Dec 22 09:57:08 RSPro kern.debug kernel: [&nbsp; &nbsp;40.800000] Registered led device: rt2800usb-phy2::radio<br />Dec 22 09:57:08 RSPro kern.debug kernel: [&nbsp; &nbsp;40.800000] Registered led device: rt2800usb-phy2::assoc<br />Dec 22 09:57:08 RSPro kern.debug kernel: [&nbsp; &nbsp;40.800000] Registered led device: rt2800usb-phy2::quality<br />Dec 22 09:57:08 RSPro kern.info kernel: [&nbsp; &nbsp;40.800000] usbcore: registered new interface driver rt2800usb</p><p>I don&#039;t know why your Ralink radio isn&#039;t coming online like mine:</p><p>Dec 22 09:59:24 RSPro kern.info kernel: [&nbsp; &nbsp;92.970000] device wlan2 entered promiscuous mode<br />Dec 22 09:59:24 RSPro kern.info kernel: [&nbsp; &nbsp;92.980000] br-lan: port 4(wlan2) entering forwarding state<br />Dec 22 09:59:24 RSPro kern.info kernel: [&nbsp; &nbsp;92.990000] br-lan: port 4(wlan2) entering forwarding state<br />Dec 22 09:59:30 RSPro kern.info kernel: [&nbsp; &nbsp;99.850000] device wlan2 left promiscuous mode<br />Dec 22 09:59:30 RSPro kern.info kernel: [&nbsp; &nbsp;99.860000] br-lan: port 4(wlan2) entering forwarding state<br />Dec 22 09:59:31 RSPro kern.info kernel: [&nbsp; &nbsp;99.980000] device wlan2 entered promiscuous mode<br />Dec 22 09:59:31 RSPro kern.info kernel: [&nbsp; &nbsp;99.990000] br-lan: port 4(wlan2) entering forwarding state<br />Dec 22 09:59:31 RSPro kern.info kernel: [&nbsp; &nbsp;99.990000] br-lan: port 4(wlan2) entering forwarding state</p><p>I assume the rt2800 driver is not compatible with your Ralink 5370 chipset.</p>											<p class="post-edited">(Last edited by <strong>robrob</strong> on 22 Dec 2011, 17:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151821">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						22 Dec 2011, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>the rt2800usb driver on ubuntu does recognize the device, but I guess I need to focus on the driver not wrt.</p><p>Does this site <a href="http://cateee.net/lkddb/web-lkddb/RT2800USB.html">http://cateee.net/lkddb/web-lkddb/RT2800USB.html</a> help me?</p><p>--thanks</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 22 Dec 2011, 20:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151845">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						23 Dec 2011, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>That site indicates the driver supports RT2770, RT2870 &amp; RT3070, RT3071 &amp; RT3072</p><p>Your Ralink USB dongle has a Ralink 5370 chipset but it is strange that the Ubuntu rt2800usb driver works.</p><p>Do you have these packages installed:</p><p>kmod-rt2800-lib<br />kmod-rt2800-usb<br />kmod-rt2x00-lib<br />kmod-rt2x00-usb</p><p>Here&#039;s my router&#039;s lsusb output:</p><p>Bus 001 Device 005: ID 148f:3572 Ralink Technology, Corp. RT3572 Wireless Adapter</p><p>RT3572 is an RT3072 with 5GHz dual band added (5GHz is flaky on OpenWrt). It&#039;s basically a combo RT2770 11gn &amp; RT2750 11an radio.</p>											<p class="post-edited">(Last edited by <strong>robrob</strong> on 23 Dec 2011, 00:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151907">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						23 Dec 2011, 16:50					</div>
				</div>
				<div class="post-content content">
					<p>I might be wrong but isn&#039;t the 5370 listed in the hardware list on that site?</p><p>here is my output:</p><p>root@OpenWrt:/# lsusb<br />Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</p><br /><p>root@OpenWrt:/# dmesg | tail -2<br />[&nbsp; &nbsp;20.680000] ar71xx-wdt: enabling watchdog timer<br />[&nbsp; 283.330000] usb 1-1: new high speed USB device number 2 using ar71xx-ehci</p><br /><br /><p>root@OpenWrt:/# lsusb<br />Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br />Bus 001 Device 002: ID 148f:5370 Ralink Technology, Corp. </p><br /><br /><p>root@OpenWrt:/# opkg list-installed | grep kmod-rt2<br />kmod-rt2800-lib - 2.6.39.4+2011-12-01-1<br />kmod-rt2800-usb - 2.6.39.4+2011-12-01-1<br />kmod-rt2x00-lib - 2.6.39.4+2011-12-01-1<br />kmod-rt2x00-usb - 2.6.39.4+2011-12-01-</p><p>It looks right to me...</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 23 Dec 2011, 20:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151930">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						24 Dec 2011, 05:12					</div>
				</div>
				<div class="post-content content">
					<p>It looks right to me too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151988">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						25 Dec 2011, 01:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>firesam wrote:</cite><blockquote><p>I might be wrong but isn&#039;t the 5370 listed in the hardware list on that site?</p></blockquote></div><p>What about that? Am I making a mistake?<br />In the section:</p><p>Hardware<br />USB<br />Numeric ID (from LKDDb) and names (from usb.ids) of recognized devices:<br />...<br />vendor: 148f (&quot;Ralink Technology, Corp.&quot;), product: 5370 (&quot;RT5370 Wireless Adapter&quot;)<br />...</p><br /><p>-- thanks</p><p>also what about this: <a href="http://patchwork.ozo.com/patch/838/">http://patchwork.ozo.com/patch/838/</a></p><br /><p>--again</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 25 Dec 2011, 01:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152136">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">firesam</div>
					<div class="post-datetime">
						27 Dec 2011, 02:06					</div>
				</div>
				<div class="post-content content">
					<p>as per mailing list openwrt-devel@lists.openwrt.org:</p><div class="quotebox"><blockquote><p>CONFIG_RT2800USB_RT53XX is supposed to live in <br />BUILDARGS rather than MAKE_OPTS to actually get support for the Rt5370.<br />Thanks to actmnophn for the hint!</p><p>This reverts changeset 29116 and adds it to the right section in the Makefile.</p><p>Signed-off-by: Daniel Golle &lt;dgolle@allnet.de&gt;</p><p>Index: package/mac80211/Makefile<br />===================================================================<br />--- package/mac80211/Makefile&nbsp; &nbsp; (revision 29569)<br />+++ package/mac80211/Makefile&nbsp; &nbsp; (working copy)<br />@@ -1095,6 +1096,7 @@<br /> &nbsp; &nbsp; $(if $(NEED_RT2X00_LIB_LEDS),-DCONFIG_RT2X00_LIB_LEDS) \<br /> &nbsp; &nbsp; $(if $(CONFIG_PACKAGE_kmod-rt2x00-pci),-DCONFIG_RT2X00_LIB_PCI) \<br /> &nbsp; &nbsp; $(if $(CONFIG_PACKAGE_kmod-rt2x00-usb),-DCONFIG_RT2X00_LIB_USB) \<br />+&nbsp; &nbsp; $(if $(CONFIG_PACKAGE_kmod-rt2x00-usb),-DCONFIG_RT2800USB_RT53XX) \<br /> &nbsp; &nbsp; $(if $(CONFIG_PACKAGE_kmod-rt2x00-soc),-DCONFIG_RT2X00_LIB_SOC) \<br /> &nbsp; &nbsp; $(if $(CONFIG_TARGET_atheros),-DCONFIG_ATH5K_AHB,-DCONFIG_ATH5K_PCI) \<br /> &nbsp; &nbsp; $(if $(CONFIG_PACKAGE_kmod-iwl3945),-DCONFIG_IWL3945) \<br />@@ -1171,7 +1173,6 @@<br /> &nbsp; &nbsp; CONFIG_RT2800_LIB=$(if $(CONFIG_PACKAGE_kmod-rt2800-lib),m) \<br /> &nbsp; &nbsp; CONFIG_RT2800PCI=$(if $(CONFIG_PACKAGE_kmod-rt2800-pci),m) \<br /> &nbsp; &nbsp; CONFIG_RT2800USB=$(if $(CONFIG_PACKAGE_kmod-rt2800-usb),m) \<br />-&nbsp; &nbsp; CONFIG_RT2800USB_RT53XX=$(if $(CONFIG_PACKAGE_kmod-rt2800-usb),y) \<br /> &nbsp; &nbsp; CONFIG_RTL8180=$(if $(CONFIG_PACKAGE_kmod-rtl8180),m) \<br /> &nbsp; &nbsp; CONFIG_RTL8187=$(if $(CONFIG_PACKAGE_kmod-rtl8187),m) \<br /> &nbsp; &nbsp; CONFIG_RTL8192CE= \</p></blockquote></div><p>Unfortunately I cannot test it because installing the drivers in windows messed up the dongle somehow. it won&#039;t even be recognized in windows and gives error 71 from now on in ubuntu and openwrt. I am getting a new one and will test it when it arrives.</p>											<p class="post-edited">(Last edited by <strong>firesam</strong> on 27 Dec 2011, 02:13)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>