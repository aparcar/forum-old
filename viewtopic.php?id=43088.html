<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt / External HDD USB issue</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p195883">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						24 Mar 2013, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>Asus RT-N13U Router 64MB internal RAM, 23MB used.<br />ATTITUDE ADJUSTMENT (12.09-rc1, r34185)</p><p>I have a 3.5 WD 160GB HDD in an external enclosure that coverts the HDD into a USB drive. THe external enclosure has it&#039;s own power supply, so the router&#039;s USB doesn&#039;t need to power it. On the router, I have a usb hub plugged in first, Printer plugged into the first port on the hub, and then the external HDD. All stays stable when the HDD is idle. The External HDD is shared via OPenWRT&#039;s samba.</p><p>If I log into my ubuntu box (Hard Wired), and then mount the OpenWRT external HDD as a network shared mount, and then try to transfer say 2GB of data from the Ubuntu box to the OpenWRT external HDD after a few minutes the transfer locks up. When I log into the router via CLI and check out the amount of free mem on the router, 99% is used. Stop the transfer, and reboot, all is normal again. Is there a way to prevent this? Is it bug related?</p>											<p class="post-edited">(Last edited by <strong>kgoerbig</strong> on 24 Mar 2013, 03:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195891">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						24 Mar 2013, 07:00					</div>
				</div>
				<div class="post-content content">
					<p>no idea but it might be useful to see what&#039;s taking up the memory.&nbsp; what does top show?&nbsp; </p><p>(probably easiest to log in and run top and watch it as the file transfer happens.&nbsp; Presumably there will be some process that is&nbsp; growing massive)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195925">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						24 Mar 2013, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Here is a video I shot of transferring data to this shared drive live. Shot from my ubuntu box wuth ffmeg, and ssh&#039;d into the router:</p><p><a href="http://youtu.be/MPYMOhcDeJM">http://youtu.be/MPYMOhcDeJM</a></p><p>Please open in full screen to see more details.</p><p>Also, as an added test, I hooked up the external 150GB enclosure to a Win8 Laptop, and booted up Clonezilla from CD and performed a full backup of the Win8&#039;s Partition on the laptop to the external HDD without any errors. So I do not beleive it is an issue with the External HDD enclusure, or with the drive.</p>											<p class="post-edited">(Last edited by <strong>kgoerbig</strong> on 24 Mar 2013, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195964">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						24 Mar 2013, 21:14					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s not a memory thing.&nbsp; When you look in top in the status line at the top you see it all goes to &quot;cached&quot;.&nbsp; &nbsp;That&#039;s the disk cache so it&#039;s normal that would happen.&nbsp; &nbsp;The memory is still available to programs should it be needed.&nbsp; &nbsp; So the memory thing is a red herring.</p><p>The big issue is that USB timeout that shows up in dmesg.&nbsp; &nbsp;There have been a few threads around here about USB instability.&nbsp; &nbsp;You should post the messages from dmesg, but i&#039;m not particularly hopeful.&nbsp; &nbsp; Some people get it to work by switching to a powered hub or an unpowered hub or just a different hub or getting rid of a hub...&nbsp; but there wasn&#039;t a single thing&nbsp; (from what i saw).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>