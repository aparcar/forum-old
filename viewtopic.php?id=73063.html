<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compilation failed with kmod package selected</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p371128">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						23 Jan 2018, 11:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>I&#039;m trying to compile OpenWRT for Armada A388 Solidrun Clearfog Pro router board from mainline distribution. It was working last year, but since few weeks the compilation failed with this error :</p><div class="codebox"><pre><code>Collected errors:
 * check_data_file_clashes: Package kmod wants to install file /home/jcd/Documents/Solidrun/openwrt-20180122/build_dir/target-arm_cortex-a9+vfpv3_musl_eabi/root-mvebu/sbin/insmod
    But that file is already provided by package  * ubox
 * check_data_file_clashes: Package kmod wants to install file /home/jcd/Documents/Solidrun/openwrt-20180122/build_dir/target-arm_cortex-a9+vfpv3_musl_eabi/root-mvebu/sbin/lsmod
    But that file is already provided by package  * ubox
 * check_data_file_clashes: Package kmod wants to install file /home/jcd/Documents/Solidrun/openwrt-20180122/build_dir/target-arm_cortex-a9+vfpv3_musl_eabi/root-mvebu/sbin/modinfo
    But that file is already provided by package  * ubox
 * check_data_file_clashes: Package kmod wants to install file /home/jcd/Documents/Solidrun/openwrt-20180122/build_dir/target-arm_cortex-a9+vfpv3_musl_eabi/root-mvebu/sbin/modprobe
    But that file is already provided by package  * ubox
 * check_data_file_clashes: Package kmod wants to install file /home/jcd/Documents/Solidrun/openwrt-20180122/build_dir/target-arm_cortex-a9+vfpv3_musl_eabi/root-mvebu/sbin/rmmod
    But that file is already provided by package  * ubox
 * opkg_install_cmd: Cannot install package kmod.
package/Makefile:64: recipe for target &#039;package/install&#039; failed
make[2]: *** [package/install] Error 255
make[2]: Leaving directory &#039;/home/jcd/Documents/Solidrun/openwrt-20180122&#039;
package/Makefile:103: recipe for target &#039;/home/jcd/Documents/Solidrun/openwrt-20180122/staging_dir/target-arm_cortex-a9+vfpv3_musl_eabi/stamp/.package_install&#039; failed
make[1]: *** [/home/jcd/Documents/Solidrun/openwrt-20180122/staging_dir/target-arm_cortex-a9+vfpv3_musl_eabi/stamp/.package_install] Error 2
make[1]: Leaving directory &#039;/home/jcd/Documents/Solidrun/openwrt-20180122&#039;
/home/jcd/Documents/Solidrun/openwrt-20180122/include/toplevel.mk:216 : la recette pour la cible « world » a échouée
make: *** [world] Erreur 2</code></pre></div><br /><p>It appears that &quot;ubox&quot; package is in conflict with &quot;kmod&quot;. But I need kmod to activate WiFi modules and other stuffs on this router board. Any help ?</p>											<p class="post-edited">(Last edited by <strong>MarcAZ81</strong> on 23 Jan 2018, 11:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371142">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						23 Jan 2018, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried make clean and compile again? Also make dirclean or make distclean can help, but you will have to make menuconfig again.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 23 Jan 2018, 17:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371194">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						24 Jan 2018, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;ve done all those steps :<br /></p><div class="codebox"><pre><code>make clean
make dirclean
make distclean
make menuconfig
./scripts/feeds update -a
./scripts/feeds install -a
make menuconfig
make</code></pre></div><p>Got always the same problem. &quot;kmod&quot; package crash the compilation.</p>											<p class="post-edited">(Last edited by <strong>MarcAZ81</strong> on 24 Jan 2018, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371209">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						24 Jan 2018, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>Why do you need the full &#039;kmod&#039; package? Does it provide you with some special options or features that the &#039;ubox&#039; variant does not, and which you absolutely require in order to insert your Wi-Fi module?</p><p>It seems <a href="https://git.openwrt.org/?p=openwrt/openwrt.git;a=commit;h=81aeba9b7f619ee1af1a64f355ae8001fa147d03">the commit which broke your setup</a> came about a year ago, around Jan 2017. In this commit, the symbolic links created by installation of &#039;ubox&#039; to the root filesystem were moved from /usr/sbin to /sbin, thus causing an issue if &#039;kmod&#039; is selected at the same time, as it wants to create symbolic links to the same directory.</p><p>If you want to use the full &#039;kmod&#039;, I see two potential options:<br /> - backtrace to a commit prior to the one linked above<br /> - modify the &#039;kmod&#039; package&#039;s makefile so it creates its symbolic links into some other directory</p><p>The latter option is, in my opinion, the safer one. You might also consider getting in touch with the developers and/or raise a ticket about this conflict.</p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 24 Jan 2018, 22:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371222">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						25 Jan 2018, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi Antek, thanks for your complete answer. About this second solution, can you desbribe me a little bit more how to do that ?</p><p>For more explanations : my WiFi modules (Compex WLE900VW, working with ATH10K QCA988X) aren&#039;t working anymore since recent OpentWRT distribution. Even &quot;lspci&quot; command doesn&#039;t return anything. I guess it&#039;s link to kmod package because previously it was checked and now I can&#039;t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371240">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						25 Jan 2018, 19:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>For more explanations : my WiFi modules (Compex WLE900VW, working with ATH10K QCA988X) aren&#039;t working anymore since recent OpentWRT distribution. Even &quot;lspci&quot; command doesn&#039;t return anything. I guess it&#039;s link to kmod package because previously it was checked and now I can&#039;t.</p></blockquote></div><p>If the &#039;lspci&#039; command doesn&#039;t return any information at all, then you might have a broken system, and adding &#039;kmod&#039; into the mix will not resolve anything.</p><p>If the command doesn&#039;t return the name of *your* module, or any supporting modules, then it can be a module loading problem e.g. a missing dependency, bad kernel version, or something else wrong with your module. In this latter case, adding &#039;kmod&#039; might not help either. Checking &#039;dmesg&#039; after attempting to load your module might yield some information as to why the module isn&#039;t getting loaded.</p><div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>About this second solution, can you desbribe me a little bit more how to do that ?</p></blockquote></div><p>Get the sources, run the scripts to update and install package feeds. Then, using your favorite text editor, modify the file &#039;feeds/packages/utils/kmod/Makefile&#039; as required. </p><p>The &#039;Package/kmod/install&#039; section is what creates the symlinks. Just alter the path between $(1) and /$$$$b, but do be careful <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Another idea could be to comment out the creation of the symlinks, and then just use &#039;/sbin/kmod&#039; directly with suitable parameters to perform the necessary work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371255">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						26 Jan 2018, 12:27					</div>
				</div>
				<div class="post-content content">
					<p>Just to let you know, if I pick any kmod packages like &quot;kmod-ath10k&quot; in &quot;Kernel modules / Wireless Drivers&quot; here is what I&#039;ve got in return during compilation process :<br /></p><div class="codebox"><pre><code>Configuring luci-proto-ncm.
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-dm:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-dm.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-crypto-ecb:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-crypto-ecb.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-crypto-sha1:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-crypto-sha1.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-fs-autofs4:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-fs-autofs4.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-fs-vfat:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-fs-vfat.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-lib-crc-ccitt:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-lib-crc-ccitt.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-mii:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-mii.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ifb:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ifb.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-nf-ipt:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-nf-ipt.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-nf-ipt6:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-nf-ipt6.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-core:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-core.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-nf-nat:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-nf-nat.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-conntrack:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-conntrack.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-conntrack-extra:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-conntrack-extra.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-ipopt:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-ipopt.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-ipset:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-ipset.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipt-nat:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipt-nat.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ip6tables:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ip6tables.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-atm:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-atm.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-udptunnel4:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-udptunnel4.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-udptunnel6:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-udptunnel6.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ipip:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ipip.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-gre:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-gre.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-tun:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-tun.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-slhc:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-slhc.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-ppp:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-ppp.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-pppox:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-pppox.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-pppoe:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-pppoe.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-pppoa:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-pppoa.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-pptp:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-pptp.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-pppol2tp:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-pppol2tp.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-mppe:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-mppe.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-sched-core:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-sched-core.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-sched-connmark:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-sched-connmark.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-core:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-usb-core.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-wdm:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-usb-wdm.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-net:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-usb-net.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-net-qmi-wwan:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-usb-net-qmi-wwan.
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-net-cdc-mbim:
 *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) *     kernel (= 4.9.77-1-1c041e40780894f48f816d0edad2c71e) * 
 * opkg_install_cmd: Cannot install package kmod-usb-net-cdc-mbim.
package/Makefile:64: recipe for target &#039;package/install&#039; failed
make[2]: *** [package/install] Error 255</code></pre></div><p>About dmesg after flashing the emmc, there&#039;s no trace about WiFi modules and &quot;/etc/config/wireless&quot; doesn&#039;t exists :<br /></p><div class="codebox"><pre><code>BootROM - 1.73

Booting from MMC


General initialization - Version: 1.0.0
Detected Device ID 6828
High speed PHY - Version: 2.0

Init Customer board board SerDes lanes topology details:
 | Lane # | Speed|    Type     |
 ------------------------------|
 |   0    |  3   |  SATA0      |
 |   1    |  0   |  SGMII1     |
 |   2    |  5   |  PCIe1      |
 |   3    |  5   |  USB3 HOST1 |
 |   4    |  5   |  PCIe2      |
 |   5    |  0   |  SGMII2     |
 -------------------------------
PCIe, Idx 1: detected no link
PCIe, Idx 2: detected no link
High speed PHY - Ended Successfully
DDR3 Training Sequence - Ver TIP-1.39.0
DDR3 Training Sequence - Switching XBAR Window to FastPath Window 
DDR3 Training Sequence - Ended Successfully
BootROM: Image checksum verification PASSED

 __   __                      _ _
|  \/  | __ _ _ ____   _____| | |
| |\/| |/ _` | &#039;__\ \ / / _ \ | |
| |  | | (_| | |   \ V /  __/ | |
|_|  |_|\__,_|_|    \_/ \___|_|_|
         _   _     ____              _
        | | | |   | __ )  ___   ___ | |_ 
        | | | |___|  _ \ / _ \ / _ \| __| 
        | |_| |___| |_) | (_) | (_) | |_ 
         \___/    |____/ \___/ \___/ \__| 
 ** LOADER **


U-Boot 2013.01-gf906e3d-dirty (Dec 01 2016 - 23:19:59) Marvell version: 2015_T1.0p11

Board: A38x-Customer-Board-1
SoC:   MV88F6828 Rev A0
       running 2 CPUs
CPU:   ARM Cortex A9 MPCore (Rev 1) LE
       CPU 0
       CPU    @ 1332 [MHz]
       L2     @ 666 [MHz]
       TClock @ 250 [MHz]
       DDR3    @ 666 [MHz]
       DDR3 32 Bit Width,FastPath Memory Access, DLB Enabled, ECC Disabled
DRAM:  1 GiB
MMC:   mv_sdh: 0
sdhci_transfer_data: Error detected in status(0x408000)!
PCI-e 1 (IF 0 - bus 0) Root Complex Interface, Detected Link X1, GEN 1.1
PCI-e 2 (IF 1 - bus 1) Root Complex Interface, Detected Link X1, GEN 1.1
USB2.0 0: Host Mode
USB3.0 0: Host Mode
USB3.0 1: Host Mode

Map:   Code:                    0x3fed4000:0x3ff980cc
       BSS:                     0x3ffefd5c
       Stack:                   0x3f9c3f20
       Heap:                    0x3f9c4000:0x3fed4000
       U-Boot Environment:      0x000f0000:0x00100000 (MMC)

Board configuration detected:
Net:   
|  port  | Interface | PHY address  |
|--------|-----------|--------------|
| egiga0 |   RGMII   |     0x00     |
| egiga1 |   SGMII   |   In-Band    |
| egiga2 |   SGMII   |   In-Band    |
egiga0 [PRIME], egiga1, egiga2
Hit any key to stop autoboot:  0 
18588 bytes read in 18 ms (1007.8 KiB/s)
2241292 bytes read in 131 ms (16.3 MiB/s)
## Flattened Device Tree blob at 01000000
   Booting using the fdt blob at 0x01000000
   Loading Device Tree to 07a0a000, end 07a1189b ... OK

   Skipping Device Tree update (&#039;fdt_skip_update&#039; = yes)

Limit DDR size at 3GB due to power of 2 requirement of Address decoding

Starting kernel ...

[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.14 (jcd@jcdserveri7b) (gcc version 5.3.0 (OpenWrt GCC 5.3.0 50108) ) #101 SMP Fri Dec 1 11:56:48 UTC 2017
[    0.000000] CPU: ARMv7 Processor [414fc091] revision 1 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: SolidRun Clearfog A1
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 12 pages/cpu @cfdd1000 s17984 r8192 d22976 u49152
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 65024
[    0.000000] Kernel command line: rootfstype=ext4 root=/dev/mmcblk0p1 rw console=ttyS0,115200 rootwait
[    0.000000] PID hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000000] Dentry cache hash table entries: 32768 (order: 5, 131072 bytes)
[    0.000000] Inode-cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Memory: 252868K/262144K available (4458K kernel code, 174K rwdata, 1612K rodata, 264K init, 296K bss, 9276K reserved, 0K cma-reserved, 0K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xd0800000 - 0xff800000   ( 752 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xd0000000   ( 256 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc05f5c44   (6072 kB)
[    0.000000]       .init : 0xc05f6000 - 0xc0638000   ( 264 kB)
[    0.000000]       .data : 0xc0638000 - 0xc0663a98   ( 175 kB)
[    0.000000]        .bss : 0xc0663a98 - 0xc06ade74   ( 297 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000]  RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.
[    0.000000] RCU: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] mvebu_mbus: [Firmware Warn]: deprecated mbus-mvebu Device Tree, suspend/resume will not work
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 D prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 Coherent cache controller enabled, 16 ways, 1024 kB
[    0.000000] L2C-310 Coherent: CACHE_ID 0x410054c9, AUX_CTRL 0x56070001
[    0.000000] Switching to timer-based delay loop, resolution 40ns
[    0.000003] sched_clock: 32 bits at 25MHz, resolution 40ns, wraps every 85899345900ns
[    0.000011] clocksource: armada_370_xp_clocksource: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 76450417870 ns
[    0.000130] Calibrating delay loop (skipped), value calculated using timer frequency.. 50.00 BogoMIPS (lpj=250000)
[    0.000138] pid_max: default: 32768 minimum: 301
[    0.000181] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000186] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.000401] CPU: Testing write buffer coherency: ok
[    0.000517] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.000544] Setting up static identity map for 0x8280 - 0x82d8
[    0.000645] mvebu-soc-id: MVEBU SoC ID=0x6828, Rev=0x4
[    0.000749] mvebu-pmsu: Initializing Power Management Service Unit
[    0.001217] Booting CPU 1
[    0.001413] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.001443] Brought up 2 CPUs
[    0.001450] SMP: Total of 2 processors activated (100.00 BogoMIPS).
[    0.001453] CPU: All CPU(s) started in SVC mode.
[    0.003445] VFP support v0.3: implementor 41 architecture 3 part 30 variant 9 rev 4
[    0.003534] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.003582] pinctrl core: initialized pinctrl subsystem
[    0.003957] NET: Registered protocol family 16
[    0.004527] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.029881] cpuidle: using governor ladder
[    0.033091] mvebu-pmsu: CPU hotplug support is currently broken on Armada 38x: disabling
[    0.033101] mvebu-pmsu: CPU idle is currently broken on Armada 38x: disabling
[    0.060688] SCSI subsystem initialized
[    0.060936] usbcore: registered new interface driver usbfs
[    0.060969] usbcore: registered new interface driver hub
[    0.060997] usbcore: registered new device driver usb
[    0.061559] clocksource: Switched to clocksource armada_370_xp_clocksource
[    0.062071] NET: Registered protocol family 2
[    0.062323] TCP established hash table entries: 2048 (order: 1, 8192 bytes)
[    0.062339] TCP bind hash table entries: 2048 (order: 2, 16384 bytes)
[    0.062361] TCP: Hash tables configured (established 2048 bind 2048)
[    0.062386] UDP hash table entries: 256 (order: 1, 8192 bytes)
[    0.062400] UDP-Lite hash table entries: 256 (order: 1, 8192 bytes)
[    0.062475] NET: Registered protocol family 1
[    0.062961] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.066088] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.066098] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.066939] io scheduler noop registered
[    0.066948] io scheduler deadline registered (default)
[    0.067443] armada-38x-pinctrl f1018000.pinctrl: registered pinctrl driver
[    0.067825] irq: Cannot allocate irq_descs @ IRQ50, assuming pre-allocated
[    0.067997] irq: Cannot allocate irq_descs @ IRQ82, assuming pre-allocated
[    0.068295] mv_xor f1060800.xor: Marvell shared XOR driver
[    0.102090] mv_xor f1060800.xor: Marvell XOR (Descriptor Mode): ( xor cpy intr )
[    0.102188] mv_xor f1060900.xor: Marvell shared XOR driver
[    0.142070] mv_xor f1060900.xor: Marvell XOR (Descriptor Mode): ( xor cpy intr )
[    0.142233] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.142569] console [ttyS0] disabled
[    0.162648] f1012000.serial: ttyS0 at MMIO 0xf1012000 (irq = 23, base_baud = 15625000) is a 16550A
[    0.715790] console [ttyS0] enabled
[    0.739566] f1012100.serial: ttyS1 at MMIO 0xf1012100 (irq = 24, base_baud = 15625000) is a 16550A
[    0.748954] ahci-mvebu f10a8000.sata: AHCI 0001.0000 32 slots 2 ports 6 Gbps 0x3 impl platform mode
[    0.758037] ahci-mvebu f10a8000.sata: flags: 64bit ncq sntf led only pmp fbs pio slum part sxs 
[    0.767548] scsi host0: ahci-mvebu
[    0.771140] scsi host1: ahci-mvebu
[    0.774670] ata1: SATA max UDMA/133 mmio [mem 0xf10a8000-0xf10a9fff] port 0x100 irq 45
[    0.782614] ata2: SATA max UDMA/133 mmio [mem 0xf10a8000-0xf10a9fff] port 0x180 irq 45
[    0.790652] ahci-mvebu f10e0000.sata: AHCI 0001.0000 32 slots 2 ports 6 Gbps 0x3 impl platform mode
[    0.799731] ahci-mvebu f10e0000.sata: flags: 64bit ncq sntf led only pmp fbs pio slum part sxs 
[    0.809337] scsi host2: ahci-mvebu
[    0.812934] scsi host3: ahci-mvebu
[    0.816446] ata3: SATA max UDMA/133 mmio [mem 0xf10e0000-0xf10e1fff] port 0x100 irq 46
[    0.824392] ata4: SATA max UDMA/133 mmio [mem 0xf10e0000-0xf10e1fff] port 0x180 irq 46
[    0.833538] libphy: Fixed MDIO Bus: probed
[    0.837763] libphy: orion_mdio_bus: probed
[    0.843225] mvneta f1030000.ethernet eth0: Using random mac address de:fe:9d:4e:2a:ee
[    0.852008] mvneta f1034000.ethernet eth1: Using random mac address fa:6f:49:c1:fa:db
[    0.860728] mvneta f1070000.ethernet eth2: Using random mac address 16:23:8d:58:c8:f5
[    0.868645] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    0.875198] ehci-pci: EHCI PCI platform driver
[    0.879681] ehci-platform: EHCI generic platform driver
[    0.885028] ehci-orion: EHCI orion driver
[    0.889132] orion-ehci f1058000.usb: EHCI Host Controller
[    0.894563] orion-ehci f1058000.usb: new USB bus registered, assigned bus number 1
[    0.902224] orion-ehci f1058000.usb: irq 40, io mem 0xf1058000
[    0.921561] orion-ehci f1058000.usb: USB 2.0 started, EHCI 1.00
[    0.927770] hub 1-0:1.0: USB hub found
[    0.931556] hub 1-0:1.0: 1 port detected
[    0.935828] xhci-hcd f10f0000.usb3: xHCI Host Controller
[    0.941161] xhci-hcd f10f0000.usb3: new USB bus registered, assigned bus number 2
[    0.948792] xhci-hcd f10f0000.usb3: hcc params 0x0a000990 hci version 0x100 quirks 0x00010010
[    0.957364] xhci-hcd f10f0000.usb3: irq 48, io mem 0xf10f0000
[    0.963384] hub 2-0:1.0: USB hub found
[    0.967156] hub 2-0:1.0: 1 port detected
[    0.971187] xhci-hcd f10f0000.usb3: xHCI Host Controller
[    0.976528] xhci-hcd f10f0000.usb3: new USB bus registered, assigned bus number 3
[    0.984069] usb usb3: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    0.992417] hub 3-0:1.0: USB hub found
[    0.996188] hub 3-0:1.0: 1 port detected
[    1.000264] xhci-hcd f10f8000.usb3: xHCI Host Controller
[    1.005614] xhci-hcd f10f8000.usb3: new USB bus registered, assigned bus number 4
[    1.013221] xhci-hcd f10f8000.usb3: hcc params 0x0a000990 hci version 0x100 quirks 0x00010010
[    1.021790] xhci-hcd f10f8000.usb3: irq 49, io mem 0xf10f8000
[    1.027794] hub 4-0:1.0: USB hub found
[    1.031596] hub 4-0:1.0: 1 port detected
[    1.035631] xhci-hcd f10f8000.usb3: xHCI Host Controller
[    1.040961] xhci-hcd f10f8000.usb3: new USB bus registered, assigned bus number 5
[    1.048522] usb usb5: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    1.056873] hub 5-0:1.0: USB hub found
[    1.060644] hub 5-0:1.0: 1 port detected
[    1.064817] usbcore: registered new interface driver usb-storage
[    1.071010] armada38x-rtc f10a3800.rtc: rtc core: registered f10a3800.rtc as rtc0
[    1.078680] i2c /dev entries driver
[    1.093211] orion_wdt: Initial timeout 171 sec
[    1.097845] sdhci: Secure Digital Host Controller Interface driver
[    1.104047] sdhci: Copyright(c) Pierre Ossman
[    1.108604] sdhci-pxav3 f10d8000.sdhci: Got CD GPIO
[    1.113548] sdhci-pxav3 f10d8000.sdhci: No vmmc regulator found
[    1.119482] sdhci-pxav3 f10d8000.sdhci: No vqmmc regulator found
[    1.131585] ata1: SATA link up 6.0 Gbps (SStatus 133 SControl 300)
[    1.137799] ata2: SATA link down (SStatus 0 SControl 300)
[    1.143277] ata1.00: ATA-9: TS128GMTS400, O1225G, max UDMA/133
[    1.149125] ata1.00: 250069680 sectors, multi 1: LBA48 NCQ (depth 31/32)
[    1.157041] ata1.00: configured for UDMA/133
[    1.161524] scsi 0:0:0:0: Direct-Access     ATA      TS128GMTS400     5G   PQ: 0 ANSI: 5
[    1.171576] ata4: SATA link down (SStatus 0 SControl 300)
[    1.177012] ata3: SATA link down (SStatus 0 SControl 300)
[    1.182506] mmc0: SDHCI controller on f10d8000.sdhci [f10d8000.sdhci] using ADMA
[    1.189961] sdhci-pltfm: SDHCI platform and OF driver helper
[    1.196504] marvell-cesa f1090000.crypto: CESA device successfully registered
[    1.204259] NET: Registered protocol family 10
[    1.210300] NET: Registered protocol family 17
[    1.214788] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.227438] 8021q: 802.1Q VLAN Support v1.8
[    1.231714] Registering SWP/SWPB emulation handler
[    1.237366] armada38x-rtc f10a3800.rtc: setting system clock to 2094-02-14 13:54:25 UTC (3916994065)
[    1.247473] Waiting for root device /dev/mmcblk0p1...
[    1.266586] mmc0: MAN_BKOPS_EN bit is not set
[    1.275670] mmc0: new high speed MMC card at address 0001
[    1.281315] mmcblk0: mmc0:0001 DF4064 58.2 GiB 
[    1.285951] mmcblk0boot0: mmc0:0001 DF4064 partition 1 4.00 MiB
[    1.291999] mmcblk0boot1: mmc0:0001 DF4064 partition 2 4.00 MiB
[    1.297998] mmcblk0rpmb: mmc0:0001 DF4064 partition 3 4.00 MiB
[    1.305212]  mmcblk0: p1
[    1.351564] usb 4-1: new high-speed USB device number 2 using xhci-hcd
[    1.365412] EXT4-fs (mmcblk0p1): couldn&#039;t mount as ext3 due to feature incompatibilities
[    1.373914] EXT4-fs (mmcblk0p1): couldn&#039;t mount as ext2 due to feature incompatibilities
[    1.403947] EXT4-fs (mmcblk0p1): mounted filesystem with ordered data mode. Opts: (null)
[    1.412089] VFS: Mounted root (ext4 filesystem) on device 179:1.
[    1.418281] Freeing unused kernel memory: 264K (c05f6000 - c0638000)
[    1.504817] usb 4-1: config 1 has an invalid interface number: 12 but max is 3
[    1.512077] usb 4-1: config 1 has an invalid interface number: 13 but max is 3
[    1.519325] usb 4-1: config 1 has an invalid interface number: 13 but max is 3
[    1.526576] usb 4-1: config 1 has no interface number 1
[    1.531836] usb 4-1: config 1 has no interface number 2
[    1.582494] init: Console is alive
[    1.585978] init: - watchdog -
[    1.599299] init: - preinit -
[    1.691037] random: jshn urandom read with 4 bits of entropy available
[    1.756995] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    3.751570] mvneta f1030000.ethernet eth0: Link is Up - 1Gbps/Full - flow control off
[    3.759437] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[    4.813104] mount_root: mounting /dev/root
[    4.817380] EXT4-fs (mmcblk0p1): re-mounted. Opts: (null)
[    4.822919] mount_root: loading kmods from internal overlay
[    4.831132] mount_root: failed to launch kmodloader from internal overlay
[    4.967665] block: attempting to load /etc/config/fstab
[    4.973655] block: unable to load configuration (fstab: Entry not found)
[    4.980390] block: no usable configuration
Failed to find the folder holding the modules
Failed to find the folder holding the modules
Failed to find the folder holding the modules
Failed to find the folder holding the modules
mount: /boot: unknown filesystem type &#039;vfat&#039;.
[    5.017411] urandom-seed: Seed file not found (/etc/urandom.seed)
[    5.038604] procd: - early -
[    5.041521] procd: - watchdog -
[    5.624816] procd: - watchdog -
[    5.628057] procd: - ubus -
[    5.682411] procd: - init -
Please press Enter to activate this console.
[    8.948802] device eth0 entered promiscuous mode
[    8.959932] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   10.941575] mvneta f1030000.ethernet eth0: Link is Up - 1Gbps/Full - flow control off
[   10.949452] br-lan: port 1(eth0) entered forwarding state
[   10.954897] br-lan: port 1(eth0) entered forwarding state
[   10.971566] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   12.951565] br-lan: port 1(eth0) entered forwarding state



BusyBox v1.27.2 () built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 OpenWrt SNAPSHOT, r5950-e6de92c
 -----------------------------------------------------
=== WARNING! =====================================
There is no root password defined on this device!
Use the &quot;passwd&quot; command to set up a new password
in order to prevent unauthorized SSH logins.
--------------------------------------------------
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# lspci
root@OpenWrt:/# cd /dev
root@OpenWrt:/dev# ls
bus                 mmcblk0boot0        rtc0
console             mmcblk0boot1        shm
cpu_dma_latency     mmcblk0p1           tty
full                mmcblk0rpmb         ttyS0
i2c-0               network_latency     ttyS1
i2c-1               network_throughput  ubi_ctrl
kmsg                null                urandom
log                 port                watchdog
mapper              ptmx                watchdog0
memory_bandwidth    pts                 zero
mmcblk0             random
root@OpenWrt:/dev# cd /etc/config
root@OpenWrt:/etc/config# ls
adblock        etherwake      meshwizard     rpcd           upnpd
chilli         firewall       mwan3          system         wifi_schedule
ddns           fstab          network        ubootenv
dhcp           hd-idle        ntpclient      ucitrack
dropbear       luci           qos            uhttpd</code></pre></div><p>Previously (and still on my previous initramfs image) you can find enabled ath10k driver for WiFi modules :<br /></p><div class="codebox"><pre><code>Starting kernel ...

[    0.000000] Booting Linux on physical CPU 0x0
[    0.000000] Linux version 4.4.14 (jcd@jcdserveri7b) (gcc version 5.3.0 (OpenWrt GCC 5.3.0 50108) ) #102 SMP Fri Dec 1 11:57:10 UTC 2017
[    0.000000] CPU: ARMv7 Processor [414fc091] revision 1 (ARMv7), cr=10c5387d
[    0.000000] CPU: PIPT / VIPT nonaliasing data cache, VIPT aliasing instruction cache
[    0.000000] Machine model: SolidRun Clearfog A1
[    0.000000] Malformed early option &#039;loglevel&#039;
[    0.000000] Memory policy: Data cache writealloc
[    0.000000] PERCPU: Embedded 12 pages/cpu @ef7ce000 s17984 r8192 d22976 u49152
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 260608
[    0.000000] Kernel command line: selinux=0 cgroup_disable=memory scandelay root=/dev/mmcblk0p1 rw rootfstype=ext4 console=ttyS0,115200 loglevel=${verbosity} rootwait
[    0.000000] PID hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Dentry cache hash table entries: 131072 (order: 7, 524288 bytes)
[    0.000000] Inode-cache hash table entries: 65536 (order: 6, 262144 bytes)
[    0.000000] Memory: 917420K/1048576K available (4458K kernel code, 174K rwdata, 1612K rodata, 115400K init, 296K bss, 131156K reserved, 0K cma-reserved, 262144K highmem)
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xffc00000 - 0xfff00000   (3072 kB)
[    0.000000]     vmalloc : 0xf0800000 - 0xff800000   ( 240 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xf0000000   ( 768 MB)
[    0.000000]     pkmap   : 0xbfe00000 - 0xc0000000   (   2 MB)
[    0.000000]     modules : 0xbf000000 - 0xbfe00000   (  14 MB)
[    0.000000]       .text : 0xc0008000 - 0xc05f5c44   (6072 kB)
[    0.000000]       .init : 0xc05f6000 - 0xc76a8000   (115400 kB)
[    0.000000]       .data : 0xc76a8000 - 0xc76d3a98   ( 175 kB)
[    0.000000]        .bss : 0xc76d3a98 - 0xc771de74   ( 297 kB)
[    0.000000] SLUB: HWalign=64, Order=0-3, MinObjects=0, CPUs=2, Nodes=1
[    0.000000] Hierarchical RCU implementation.
[    0.000000]  RCU restricting CPUs from NR_CPUS=4 to nr_cpu_ids=2.
[    0.000000] RCU: Adjusting geometry for rcu_fanout_leaf=16, nr_cpu_ids=2
[    0.000000] NR_IRQS:16 nr_irqs:16 16
[    0.000000] mvebu_mbus: [Firmware Warn]: deprecated mbus-mvebu Device Tree, suspend/resume will not work
[    0.000000] L2C-310 enabling early BRESP for Cortex-A9
[    0.000000] L2C-310 full line of zeros enabled for Cortex-A9
[    0.000000] L2C-310 D prefetch enabled, offset 1 lines
[    0.000000] L2C-310 dynamic clock gating enabled, standby mode enabled
[    0.000000] L2C-310 Coherent cache controller enabled, 16 ways, 1024 kB
[    0.000000] L2C-310 Coherent: CACHE_ID 0x410054c9, AUX_CTRL 0x56070001
[    0.000000] Switching to timer-based delay loop, resolution 40ns
[    0.000003] sched_clock: 32 bits at 25MHz, resolution 40ns, wraps every 85899345900ns
[    0.000011] clocksource: armada_370_xp_clocksource: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 76450417870 ns
[    0.000131] Calibrating delay loop (skipped), value calculated using timer frequency.. 50.00 BogoMIPS (lpj=250000)
[    0.000138] pid_max: default: 32768 minimum: 301
[    0.000178] Mount-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000184] Mountpoint-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000406] CPU: Testing write buffer coherency: ok
[    0.000523] CPU0: thread -1, cpu 0, socket 0, mpidr 80000000
[    0.000550] Setting up static identity map for 0x8280 - 0x82d8
[    0.000652] mvebu-soc-id: MVEBU SoC ID=0x6828, Rev=0x4
[    0.000755] mvebu-pmsu: Initializing Power Management Service Unit
[    0.001226] Booting CPU 1
[    0.001423] CPU1: thread -1, cpu 1, socket 0, mpidr 80000001
[    0.001453] Brought up 2 CPUs
[    0.001460] SMP: Total of 2 processors activated (100.00 BogoMIPS).
[    0.001463] CPU: All CPU(s) started in SVC mode.
[    0.003510] VFP support v0.3: implementor 41 architecture 3 part 30 variant 9 rev 4
[    0.003597] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.003646] pinctrl core: initialized pinctrl subsystem
[    0.004022] NET: Registered protocol family 16
[    0.004618] DMA: preallocated 256 KiB pool for atomic coherent allocations
[    0.029881] cpuidle: using governor ladder
[    0.033115] mvebu-pmsu: CPU hotplug support is currently broken on Armada 38x: disabling
[    0.033124] mvebu-pmsu: CPU idle is currently broken on Armada 38x: disabling
[    0.060679] SCSI subsystem initialized
[    0.060926] usbcore: registered new interface driver usbfs
[    0.060958] usbcore: registered new interface driver hub
[    0.060987] usbcore: registered new device driver usb
[    0.061577] clocksource: Switched to clocksource armada_370_xp_clocksource
[    0.062083] NET: Registered protocol family 2
[    0.062339] TCP established hash table entries: 8192 (order: 3, 32768 bytes)
[    0.062384] TCP bind hash table entries: 8192 (order: 4, 65536 bytes)
[    0.062459] TCP: Hash tables configured (established 8192 bind 8192)
[    0.062496] UDP hash table entries: 512 (order: 2, 16384 bytes)
[    0.062520] UDP-Lite hash table entries: 512 (order: 2, 16384 bytes)
[    0.062614] NET: Registered protocol family 1
[    0.387411] futex hash table entries: 512 (order: 3, 32768 bytes)
[    0.390496] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.390506] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.391142] bounce: pool size: 64 pages
[    0.391152] io scheduler noop registered
[    0.391159] io scheduler deadline registered (default)
[    0.391722] armada-38x-pinctrl f1018000.pinctrl: registered pinctrl driver
[    0.392122] irq: Cannot allocate irq_descs @ IRQ50, assuming pre-allocated
[    0.392289] irq: Cannot allocate irq_descs @ IRQ82, assuming pre-allocated
[    0.392587] mv_xor f1060800.xor: Marvell shared XOR driver
[    0.432096] mv_xor f1060800.xor: Marvell XOR (Descriptor Mode): ( xor cpy intr )
[    0.432194] mv_xor f1060900.xor: Marvell shared XOR driver
[    0.472089] mv_xor f1060900.xor: Marvell XOR (Descriptor Mode): ( xor cpy intr )
[    0.472251] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.472586] console [ttyS0] disabled
[    0.492663] f1012000.serial: ttyS0 at MMIO 0xf1012000 (irq = 23, base_baud = 15625000) is a 16550A
[    1.061286] console [ttyS0] enabled
[    1.085009] f1012100.serial: ttyS1 at MMIO 0xf1012100 (irq = 24, base_baud = 15625000) is a 16550A
[    1.094392] ahci-mvebu f10a8000.sata: AHCI 0001.0000 32 slots 2 ports 6 Gbps 0x3 impl platform mode
[    1.103473] ahci-mvebu f10a8000.sata: flags: 64bit ncq sntf led only pmp fbs pio slum part sxs 
[    1.112983] scsi host0: ahci-mvebu
[    1.116571] scsi host1: ahci-mvebu
[    1.120084] ata1: SATA max UDMA/133 mmio [mem 0xf10a8000-0xf10a9fff] port 0x100 irq 45
[    1.128037] ata2: SATA max UDMA/133 mmio [mem 0xf10a8000-0xf10a9fff] port 0x180 irq 45
[    1.136085] ahci-mvebu f10e0000.sata: AHCI 0001.0000 32 slots 2 ports 6 Gbps 0x3 impl platform mode
[    1.145165] ahci-mvebu f10e0000.sata: flags: 64bit ncq sntf led only pmp fbs pio slum part sxs 
[    1.154768] scsi host2: ahci-mvebu
[    1.158349] scsi host3: ahci-mvebu
[    1.161876] ata3: SATA max UDMA/133 mmio [mem 0xf10e0000-0xf10e1fff] port 0x100 irq 46
[    1.169813] ata4: SATA max UDMA/133 mmio [mem 0xf10e0000-0xf10e1fff] port 0x180 irq 46
[    1.178968] libphy: Fixed MDIO Bus: probed
[    1.183214] libphy: orion_mdio_bus: probed
[    1.191609] mvneta f1030000.ethernet eth0: Using random mac address 86:12:70:fa:eb:54
[    1.201519] mvneta f1034000.ethernet eth1: Using random mac address 66:30:dc:a0:4a:bd
[    1.210239] mvneta f1070000.ethernet eth2: Using hardware mac address 00:50:43:9e:dd:d5
[    1.218333] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    1.224885] ehci-pci: EHCI PCI platform driver
[    1.229370] ehci-platform: EHCI generic platform driver
[    1.234724] ehci-orion: EHCI orion driver
[    1.238828] orion-ehci f1058000.usb: EHCI Host Controller
[    1.244259] orion-ehci f1058000.usb: new USB bus registered, assigned bus number 1
[    1.251923] orion-ehci f1058000.usb: irq 40, io mem 0xf1058000
[    1.271580] orion-ehci f1058000.usb: USB 2.0 started, EHCI 1.00
[    1.277782] hub 1-0:1.0: USB hub found
[    1.281557] hub 1-0:1.0: 1 port detected
[    1.285830] xhci-hcd f10f0000.usb3: xHCI Host Controller
[    1.291163] xhci-hcd f10f0000.usb3: new USB bus registered, assigned bus number 2
[    1.298789] xhci-hcd f10f0000.usb3: hcc params 0x0a000990 hci version 0x100 quirks 0x00010010
[    1.307360] xhci-hcd f10f0000.usb3: irq 48, io mem 0xf10f0000
[    1.313382] hub 2-0:1.0: USB hub found
[    1.317154] hub 2-0:1.0: 1 port detected
[    1.321182] xhci-hcd f10f0000.usb3: xHCI Host Controller
[    1.326523] xhci-hcd f10f0000.usb3: new USB bus registered, assigned bus number 3
[    1.334063] usb usb3: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    1.342404] hub 3-0:1.0: USB hub found
[    1.346175] hub 3-0:1.0: 1 port detected
[    1.350251] xhci-hcd f10f8000.usb3: xHCI Host Controller
[    1.355595] xhci-hcd f10f8000.usb3: new USB bus registered, assigned bus number 4
[    1.363205] xhci-hcd f10f8000.usb3: hcc params 0x0a000990 hci version 0x100 quirks 0x00010010
[    1.371775] xhci-hcd f10f8000.usb3: irq 49, io mem 0xf10f8000
[    1.377781] hub 4-0:1.0: USB hub found
[    1.381551] hub 4-0:1.0: 1 port detected
[    1.385609] xhci-hcd f10f8000.usb3: xHCI Host Controller
[    1.390939] xhci-hcd f10f8000.usb3: new USB bus registered, assigned bus number 5
[    1.398485] usb usb5: We don&#039;t know the algorithms for LPM for this host, disabling LPM.
[    1.406828] hub 5-0:1.0: USB hub found
[    1.410598] hub 5-0:1.0: 1 port detected
[    1.414774] usbcore: registered new interface driver usb-storage
[    1.420965] armada38x-rtc f10a3800.rtc: rtc core: registered f10a3800.rtc as rtc0
[    1.428634] i2c /dev entries driver
[    1.443161] orion_wdt: Initial timeout 171 sec
[    1.447794] sdhci: Secure Digital Host Controller Interface driver
[    1.453996] sdhci: Copyright(c) Pierre Ossman
[    1.458550] sdhci-pxav3 f10d8000.sdhci: Got CD GPIO
[    1.463492] sdhci-pxav3 f10d8000.sdhci: No vmmc regulator found
[    1.469426] sdhci-pxav3 f10d8000.sdhci: No vqmmc regulator found
[    1.481595] ata1: SATA link up 6.0 Gbps (SStatus 133 SControl 300)
[    1.487809] ata2: SATA link down (SStatus 0 SControl 300)
[    1.494111] ata1.00: ATA-9: TS128GMTS400, O1225G, max UDMA/133
[    1.499959] ata1.00: 250069680 sectors, multi 1: LBA48 NCQ (depth 31/32)
[    1.507213] ata1.00: configured for UDMA/133
[    1.511603] ata4: SATA link down (SStatus 0 SControl 300)
[    1.511781] scsi 0:0:0:0: Direct-Access     ATA      TS128GMTS400     5G   PQ: 0 ANSI: 5
[    1.525150] ata3: SATA link down (SStatus 0 SControl 300)
[    1.530623] mmc0: SDHCI controller on f10d8000.sdhci [f10d8000.sdhci] using ADMA
[    1.538093] sdhci-pltfm: SDHCI platform and OF driver helper
[    1.544705] marvell-cesa f1090000.crypto: CESA device successfully registered
[    1.552480] NET: Registered protocol family 10
[    1.558537] NET: Registered protocol family 17
[    1.563037] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.575686] 8021q: 802.1Q VLAN Support v1.8
[    1.579964] Registering SWP/SWPB emulation handler
[    1.585665] armada38x-rtc f10a3800.rtc: setting system clock to 2094-02-14 13:54:25 UTC (3916994065)
[    1.625884] mmc0: MAN_BKOPS_EN bit is not set
[    1.635110] mmc0: new high speed MMC card at address 0001
[    1.641240] mmcblk0: mmc0:0001 DF4064 58.2 GiB 
[    1.646163] mmcblk0boot0: mmc0:0001 DF4064 partition 1 4.00 MiB
[    1.652255] mmcblk0boot1: mmc0:0001 DF4064 partition 2 4.00 MiB
[    1.658346] mmcblk0rpmb: mmc0:0001 DF4064 partition 3 4.00 MiB
[    1.663038] Freeing unused kernel memory: 115400K (c05f6000 - c76a8000)
[    1.671005] init: Console is alive
[    1.672317]  mmcblk0: p1
[    1.677098] init: - watchdog -
[    1.689067] pps_core: LinuxPPS API ver. 1 registered
[    1.694076] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;
[    1.703288] usb 4-1: new high-speed USB device number 2 using xhci-hcd
[    1.711184] sd 0:0:0:0: [sda] 250069680 512-byte logical blocks: (128 GB/119 GiB)
[    1.718896] sd 0:0:0:0: [sda] Write Protect is off
[    1.723778] sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn&#039;t support DPO or FUA
[    1.734462] sd 0:0:0:0: [sda] Attached SCSI removable disk
[    1.740573] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    1.747115] ohci-platform: OHCI generic platform driver
[    1.752964] uhci_hcd: USB Universal Host Controller Interface driver
[    1.759659] ohci-pci: OHCI PCI platform driver
[    1.774135] init: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    1.854817] usb 4-1: config 1 has an invalid interface number: 12 but max is 3
[    1.862077] usb 4-1: config 1 has an invalid interface number: 13 but max is 3
[    1.869316] usb 4-1: config 1 has an invalid interface number: 13 but max is 3
[    1.876562] usb 4-1: config 1 has no interface number 1
[    1.881803] usb 4-1: config 1 has no interface number 2
[    1.888331] random: procd urandom read with 1 bits of entropy available
[    4.831533] procd: - early -
[    4.834466] procd: - watchdog -
Failed to connect to ubus
[    5.400808] procd: - ubus -
[    5.453690] procd: - init -
Please press Enter to activate this console.
[    6.038374] aoe: AoE v85 initialised.
[    6.042916] NET: Registered protocol family 8
[    6.047284] NET: Registered protocol family 20
[    6.053756] device-mapper: ioctl: 4.34.0-ioctl (2015-10-28) initialised: dm-devel@redhat.com
[    6.064994] tun: Universal TUN/TAP device driver, 1.6
[    6.070060] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[    6.077601] ipip: IPv4 over IPv4 tunneling driver
[    6.083954] l2tp_core: L2TP core driver, V2.0
[    6.088843] l2tp_netlink: L2TP netlink interface
[    6.094496] Distributed Switch Architecture driver version 0.1
[    6.100385] mvneta f1030000.ethernet eth0: [0]: could not detect attached switch
[    6.107824] mvneta f1030000.ethernet eth0: [0]: couldn&#039;t create dsa switch instance (error -22)
[    6.118614] gre: GRE over IPv4 demultiplexor driver
[    6.124286] ip_gre: GRE over IPv4 tunneling driver
[    6.131204] PPP generic driver version 2.4.2
[    6.137420] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    6.149194] nf_conntrack version 0.5.0 (16137 buckets, 64548 max)
[    6.972016] Netfilter messages via NETLINK v0.30.
[    6.977537] ip_set: protocol 6



BusyBox v1.24.2 () built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 DESIGNATED DRIVER (Bleeding Edge, 50139)
 -----------------------------------------------------
  * 2 oz. Orange Juice         Combine all juices in a
  * 2 oz. Pineapple Juice      tall glass filled with
  * 2 oz. Grapefruit Juice     ice, stir well.
  * 2 oz. Cranberry Juice
 -----------------------------------------------------
root@(none):/# 
root@(none):/# [   10.042352] Loading modules backported from Linux version wt-2016-05-12-0-g7a54796
[   10.049943] Backport generated by backports.git backports-20160216-0-ge3c56e4

root@(none):/# 
root@(none):/# 
root@(none):/# [   10.563710] GPIO line 496 (pcie1.0-clkreq) hogged as input
[   10.569824] GPIO line 499 (pcie1.0-w-disable) hogged as output/low
[   10.576333] GPIO line 500 (pcie2.0-clkreq) hogged as input
[   10.582452] GPIO line 503 (pcie2.0-w-disable) hogged as output/low
[   10.588947] GPIO line 501 (usb3-current-limit) hogged as input
[   10.595418] GPIO line 502 (usb3-power) hogged as output/high
[   10.601703] GPIO line 507 (m.2 devslp) hogged as output/low
[   10.607588] GPIO line 508 (sfp-los) hogged as input
[   10.612785] GPIO line 509 (sfp-tx-fault) hogged as input
[   10.618720] GPIO line 510 (sfp-tx-disable) hogged as output/low
[   10.624959] GPIO line 511 (sfp-mod-def0) hogged as input
[   10.630336] pca953x 0-0020: interrupt support not compiled in
[   10.636183] mvebu-pcie soc:pcie-controller: /soc/pcie-controller/pcie@2,0: reset gpio is active low
[   10.646916] mvebu-pcie soc:pcie-controller: /soc/pcie-controller/pcie@3,0: reset gpio is active low
c[   10.711692] mvebu-pcie soc:pcie-controller: PCI host bridge to bus 0000:00
[   10.718591] pci_bus 0000:00: root bus resource [io  0x1000-0xfffff]
[   10.724886] pci_bus 0000:00: root bus resource [mem 0xe0000000-0xe7ffffff]
[   10.731791] pci_bus 0000:00: root bus resource [bus 00-ff]
d[   10.737543] PCI: bus0: Fast back to back transfers disabled
[   10.743140] pci 0000:00:02.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[   10.751165] pci 0000:00:03.0: bridge configuration invalid ([bus 00-00]), reconfiguring
[   10.759471] PCI: bus1: Fast back to back transfers disabled
[   10.765344] PCI: bus2: Fast back to back transfers disabled
[   10.770992] pci 0000:00:02.0: BAR 8: assigned [mem 0xe0000000-0xe02fffff]
[   10.777807] pci 0000:00:03.0: BAR 8: assigned [mem 0xe0400000-0xe06fffff]
[   10.784620] pci 0000:01:00.0: BAR 0: assigned [mem 0xe0000000-0xe01fffff 64bit]
[   10.791959] pci 0000:01:00.0: BAR 6: assigned [mem 0xe0200000-0xe020ffff pref]
[   10.799204] pci 0000:00:02.0: PCI bridge to [bus 01]
[   10.804191] pci 0000:00:02.0:   bridge window [mem 0xe0000000-0xe02fffff]
 [   10.811003] pci 0000:02:00.0: BAR 0: assigned [mem 0xe0400000-0xe05fffff 64bit]
[   10.818417] pci 0000:02:00.0: BAR 6: assigned [mem 0xe0600000-0xe060ffff pref]
[   10.825661] pci 0000:00:03.0: PCI bridge to [bus 02]
[   10.830638] pci 0000:00:03.0:   bridge window [mem 0xe0400000-0xe06fffff]
[   10.837893] pci 0000:00:02.0: enabling device (0140 -&gt; 0142)
[   10.843593] ath10k_pci 0000:01:00.0: enabling device (0140 -&gt; 0142)
[   10.850067] ath10k_pci 0000:01:00.0: pci irq msi oper_irq_mode 2 irq_mode 0 reset_mode 0
[   11.024219] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:01:00.0.bin failed with error -2
[   11.034956] ath10k_pci 0000:01:00.0: Falling back to user helper
[   11.045236] firmware ath10k!pre-cal-pci-0000:01:00.0.bin: firmware_loading_store: map pages failed
[   11.054380] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/cal-pci-0000:01:00.0.bin failed with error -2
[   11.064775] ath10k_pci 0000:01:00.0: Falling back to user helper
[   11.075313] firmware ath10k!cal-pci-0000:01:00.0.bin: firmware_loading_store: map pages failed
[   11.084460] ath10k_pci 0000:01:00.0: qca988x hw2.0 target 0x4100016c chip_id 0x043202ff sub 0000:0000
[   11.093732] ath10k_pci 0000:01:00.0: kconfig debug 1 debugfs 1 tracing 0 dfs 1 testmode 1
/[   11.103825] ath10k_pci 0000:01:00.0: firmware ver 10.2.4.97 api 5 features no-p2p crc32 f91e34f2
[   11.153451] ath10k_pci 0000:01:00.0: Direct firmware load for ath10k/QCA988X/hw2.0/board-2.bin failed with error -2
[   11.163922] ath10k_pci 0000:01:00.0: Falling back to user helper
[   11.174313] firmware ath10k!QCA988X!hw2.0!board-2.bin: firmware_loading_store: map pages failed
[   11.184784] ath10k_pci 0000:01:00.0: board_file api 1 bmi_id N/A crc32 bebc7c08
[   11.453543] hidraw: raw HID events driver (C) Jiri Kosina
[   12.324772] ath10k_pci 0000:01:00.0: htt-ver 2.1 wmi-op 5 htt-op 2 cal otp max-sta 128 raw 0 hwcrypto 1
[   12.416972] pci 0000:00:03.0: enabling device (0140 -&gt; 0142)
[   12.422701] ath10k_pci 0000:02:00.0: enabling device (0140 -&gt; 0142)
[   12.429207] ath10k_pci 0000:02:00.0: pci irq msi oper_irq_mode 2 irq_mode 0 reset_mode 0
[   12.604232] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:02:00.0.bin failed with error -2
[   12.614979] ath10k_pci 0000:02:00.0: Falling back to user helper
[   12.625273] firmware ath10k!pre-cal-pci-0000:02:00.0.bin: firmware_loading_store: map pages failed
[   12.634420] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/cal-pci-0000:02:00.0.bin failed with error -2
[   12.644813] ath10k_pci 0000:02:00.0: Falling back to user helper
[   12.655076] firmware ath10k!cal-pci-0000:02:00.0.bin: firmware_loading_store: map pages failed
[   12.663879] ath10k_pci 0000:02:00.0: qca988x hw2.0 target 0x4100016c chip_id 0x043202ff sub 0000:0000
[   12.673136] ath10k_pci 0000:02:00.0: kconfig debug 1 debugfs 1 tracing 0 dfs 1 testmode 1
[   12.683186] ath10k_pci 0000:02:00.0: firmware ver 10.2.4.97 api 5 features no-p2p crc32 f91e34f2
[   12.732380] ath10k_pci 0000:02:00.0: Direct firmware load for ath10k/QCA988X/hw2.0/board-2.bin failed with error -2
[   12.742859] ath10k_pci 0000:02:00.0: Falling back to user helper
[   12.753169] firmware ath10k!QCA988X!hw2.0!board-2.bin: firmware_loading_store: map pages failed
[   12.761983] ath10k_pci 0000:02:00.0: board_file api 1 bmi_id N/A crc32 bebc7c08
[   13.301971] u32 classifier
[   13.304687]     input device check on
[   13.308355]     Actions configured
[   13.801913] Mirror/redirect action on
[   13.902140] ath10k_pci 0000:02:00.0: htt-ver 2.1 wmi-op 5 htt-op 2 cal otp max-sta 128 raw 0 hwcrypto 1
[   13.996682] mdio_bus f1072004.mdio-mi: unknown revision 1, using base switch 0x1760
[   14.004391] mvneta f1030000.ethernet eth0: [0]: detected a Marvell 88E6176 switch
[   14.164503] libphy: dsa slave smi: probed
[   14.201174] dsa dsa@0 lan6 (uninitialized): attached PHY at address 2 [Generic PHY]
[   14.403195] fuse init (API version 7.23)
[   14.582776] usbcore: registered new interface driver cdc_wdm
[   14.590310] ip_tables: (C) 2000-2006 Netfilter Core Team
[   14.597803] ctnetlink v0.93: registering with nfnetlink.
[   14.783479] PPP MPPE Compression module registered
[   14.788703] NET: Registered protocol family 24
[   14.793650] PPTP driver version 0.8.5
[   14.800014] usbcore: registered new interface driver ums-alauda
[   14.806280] usbcore: registered new interface driver ums-cypress
[   14.812648] usbcore: registered new interface driver ums-datafab
[   14.818976] usbcore: registered new interface driver ums-freecom
[   14.825349] usbcore: registered new interface driver ums-isd200
[   14.831623] usbcore: registered new interface driver ums-jumpshot
[   14.838050] usbcore: registered new interface driver ums-karma
[   14.844332] usbcore: registered new interface driver ums-sddr09
[   14.850615] usbcore: registered new interface driver ums-sddr55
[   14.856988] usbcore: registered new interface driver ums-usbat
[   14.863682] usbcore: registered new interface driver usbhid
[   14.869269] usbhid: USB HID core driver
[   14.877041] usbcore: registered new interface driver usbserial
[   14.882939] usbcore: registered new interface driver usbserial_generic
[   14.889516] usbserial: USB Serial support registered for generic
[   14.905181] xt_time: kernel timezone is -0000
[   14.909933] usbcore: registered new interface driver cdc_eem
[   14.916210] usbcore: registered new interface driver cdc_ether
[   14.923069] usbcore: registered new interface driver cdc_ncm
[   14.929092] usbcore: registered new interface driver cdc_subset
[   14.936904] l2tp_ppp: PPPoL2TP kernel driver, V2.0
[   14.946603] usbcore: registered new interface driver qmi_wwan
[   14.953115] usbcore: registered new interface driver rndis_host
[   14.959487] usbcore: registered new interface driver sierra
[   14.965128] usbserial: USB Serial support registered for Sierra USB modem
[   14.972555] usbcore: registered new interface driver sierra_net
[   14.981611] cdc_mbim 4-1:1.12: cdc-wdm0: USB WDM device
[   14.987335] cdc_mbim 4-1:1.12 wwan0: register &#039;cdc_mbim&#039; at usb-f10f8000.usb3-1, CDC MBIM, 6e:27:5c:21:02:de
[   14.997301] usbcore: registered new interface driver cdc_mbim
[   15.006559] usbcore: registered new interface driver option
[   15.012227] usbserial: USB Serial support registered for GSM modem (1-port)
[   15.019965] usbcore: registered new interface driver qcserial
[   15.025786] usbserial: USB Serial support registered for Qualcomm USB modem
[   15.033103] qcserial 4-1:1.0: Qualcomm USB modem converter detected
[   15.039503] usb 4-1: Qualcomm USB modem converter now attached to ttyUSB0
[   15.046681] qcserial 4-1:1.3: Qualcomm USB modem converter detected
[   15.053153] usb 4-1: Qualcomm USB modem converter now attached to ttyUSB1

root@OpenWrt:/# [   17.850690] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371256">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						26 Jan 2018, 13:03					</div>
				</div>
				<div class="post-content content">
					<p>About your proposal, I found the part you describe but what should I use instead of &quot;$(1)/sbin&quot; ?<br /></p><div class="codebox"><pre><code>define Package/kmod/install
        $(INSTALL_DIR) $(1)/sbin
        $(CP) $(PKG_INSTALL_DIR)/usr/bin/kmod $(1)/sbin

        for b in $(LEGACY_BINARIES); do \
                ln -sf kmod $(1)/sbin/$$$$b ; \
        done
endef</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371340">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						28 Jan 2018, 15:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>Just to let you know, if I pick any kmod packages like &quot;kmod-ath10k&quot; in &quot;Kernel modules / Wireless Drivers&quot; here is what I&#039;ve got in return during compilation process</p></blockquote></div><p>This looks like a version conflict between the kernel version you have selected to build, and the kernel version which your modules are expecting.</p><p>Are you using the bleeding edge codebase (i.e. &#039;master&#039; branch)? If so, perhaps you should try building from a stable branch, such as LEDE-17.01?</p><div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>About dmesg after flashing the emmc, there&#039;s no trace about WiFi modules and &quot;/etc/config/wireless&quot; doesn&#039;t exists:</p></blockquote></div><p>We are talking about two different things here altogether. When I was referring to &#039;dmesg&#039; in my earlier post, I wanted you to try loading your Wi-Fi modules manually from the command line with the &#039;insmod&#039; command, and then observe the &#039;dmesg&#039; log to determine why your modules cannot load.</p><p>The &#039;kmod&#039; package only provides the &#039;insmod&#039;, &#039;rmmod&#039;, &#039;lsmod&#039; etc. tools. The &#039;ubox&#039; package provides the same tools. As such, you do not &quot;need&quot; &#039;kmod&#039; in order to build or load your modules, unless there&#039;s some special requirement for doing so.</p><p>Things being as they are, I recommend you build without the &#039;kmod&#039; package. I think you do not need it, and I believe the problem you are facing can be resolved in some other way.</p><p>I cannot find &quot;Armada A388 Solidrun Clearfog Pro&quot; as a target/subtarget from &#039;make menuconfig&#039;. If you would like me to attempt to reproduce your error, please give me the target/subtarget combo that you are trying to use.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371374">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						29 Jan 2018, 09:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi Antek,</p><p>Thank you, I will test with the 17.01 &quot;lede&quot; branch of OpenWRT :<br /><a href="https://github.com/openwrt/openwrt/tree/lede-17.01">https://github.com/openwrt/openwrt/tree/lede-17.01</a></p><p>Just one question : is LEDE and OpenWRT are now connected ? I thought LEDE was a fork of OpenWRT, not an &quot;official&quot; version of it.</p><p>About the combo here is what I pick :<br />- Target System: Marvell Armada 37x/38x/XP =&gt; A388 specifically<br />- Target Profile: SolidRun ClearFog A1 / Pro</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371376">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						29 Jan 2018, 09:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>LEDE and OpenWRT are now connected ? I thought LEDE was a fork of OpenWRT, not an &quot;official&quot; version of it.</p></blockquote></div><p>Practically all active developers forked off to LEDE in 2016. Now Openwrt and LEDE have merged, and in practice the LEDE source code was renamed as Openwrt (and the old Openwrt source was archived).</p><p>You can see the 17.01 as the current stable Openwrt (although it is branded LEDE).</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 29 Jan 2018, 09:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371546">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						1 Feb 2018, 10:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>So it works ! I can get the LEDE 17.01 branch and compile kmod modules again !</p><p>But... and there&#039;s still the problem, I still can&#039;t access to my mini-PCIe modules : WiFi or SSD. I&#039;m stuck with this problem. I try to get an even older version of LEDE, an archive from february, but it&#039;s the same.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371590">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">MarcAZ81</div>
					<div class="post-datetime">
						2 Feb 2018, 09:43					</div>
				</div>
				<div class="post-content content">
					<p>One big change I noticed is the files I&#039;ve got after compilation. Previously I got :<br /></p><div class="codebox"><pre><code>jcd@jcdserveri7b:~/openwrt-mainline/bin/mvebu$ ls -lsh
total 115M
4,0K -rw-r--r--  1 jcd jcd  327 juin   1 09:07 md5sums
 42M -rw-r--r--  1 jcd jcd  42M juin   1 09:07 openwrt-mvebu-armada-388-clearfog-initramfs
 71M -rw-r--r--  1 jcd jcd  71M juin   1 09:07 openwrt-mvebu-solidrun-clearfog-a1-rootfs.tar.gz
4,0K drwxr-xr-x 10 jcd jcd 4,0K mai   29 16:00 packages
4,0K -rw-r--r--  1 jcd jcd  527 juin   1 09:07 sha256sums
 20K -rw-r--r--  1 jcd jcd  19K juin   1 09:06 Solidrun-Clearfog-A1.dtb
4,0K drwxr-xr-x  2 jcd jcd 4,0K juin   1 08:59 u-boot-kwboot
4,0K drwxr-xr-x  2 jcd jcd 4,0K juin   1 08:59 uboot-mvebu-clearfog
2,2M -rwxr-xr-x  1 jcd jcd 2,2M juin   1 09:06 zImage-Solidrun-Clearfog-A1</code></pre></div><p>Notice the presence of zImage and .dtb files.<br />Now with LEDE 17.01 I got :<br /></p><div class="codebox"><pre><code>jcd@jcdserveri7b:~/Documents/Solidrun/openwrt-lede-17.01-20180130/bin/targets/mvebu/generic$ ll
total 96816
drwxr-xr-x 5 jcd jcd     4096 janv. 30 16:52 ./
drwxr-xr-x 3 jcd jcd     4096 janv. 30 16:27 ../
-rw-r--r-- 1 jcd jcd    33481 janv. 31 16:33 config.seed
-rwxr-xr-x 1 jcd jcd 23654992 janv. 31 16:33 lede-mvebu-armada-388-clearfog-initramfs-kernel.bin*
-rwxr-xr-x 1 jcd jcd  2322408 janv. 31 16:33 lede-mvebu-armada-388-clearfog-kernel.bin*
-rw-r--r-- 1 jcd jcd 37964619 janv. 31 16:33 lede-mvebu-armada-388-clearfog-sdcard.img.gz
-rw-r--r-- 1 jcd jcd    11321 janv. 31 16:33 lede-mvebu-device-armada-388-clearfog.manifest
-rw-r--r-- 1 jcd jcd 35098887 janv. 31 16:33 lede-mvebu-device-armada-388-clearfog-rootfs.tar.gz
drwxr-xr-x 2 jcd jcd    20480 janv. 31 16:31 packages/
-rw-r--r-- 1 jcd jcd      646 janv. 31 16:33 sha256sums
drwxr-xr-x 2 jcd jcd     4096 janv. 30 16:35 u-boot-kwboot/
drwxr-xr-x 2 jcd jcd     4096 janv. 30 16:35 uboot-mvebu-clearfog/</code></pre></div><p>How do you explain this change ? Why I don&#039;t get anymore zImage and .dtb ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371652">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						3 Feb 2018, 23:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>But... and there&#039;s still the problem, I still can&#039;t access to my mini-PCIe modules : WiFi or SSD. I&#039;m stuck with this problem. I try to get an even older version of LEDE, an archive from february, but it&#039;s the same.</p></blockquote></div><p>Am I correct in assuming that you can now select and compile the &#039;kmod-ath10k&#039; module? But once you build a firmware with these settings, the wireless card still refuses to function?</p><div class="quotebox"><cite>MarcAZ81 wrote:</cite><blockquote><p>How do you explain this change ? Why I don&#039;t get anymore zImage and .dtb ?</p></blockquote></div><p>You still have the compressed kernel image. It is just called &#039;kernel.bin*&#039; This is evident from comparing the file sizes between the aforementioned file and the old zImage file. As for the dtb file, it is very much possible that the dtb file is appended into the kernel image, so they are in fact one single binary file. Again, since the kernel.bin file is larger, this is a viable theory. Using &#039;make kernel_menuconfig&#039; and observing the kernel build parameters would probably reveal the truth regarding this.</p><p>I just chose the same target and profile as you, and additionally the &#039;kmod-ath10k&#039; module. It is now building, let&#039;s see what happens. Also note that &#039;kmod-ath10k&#039; is primary intended for PCI-connected cards. While I cannot provide proof this way or that, it is possible that this module just does not support mini-PCIe variants.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371669">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						4 Feb 2018, 09:05					</div>
				</div>
				<div class="post-content content">
					<p>I managed to build the target and profile using LEDE-17.01 branch, and I had the &#039;kmod-ath10k&#039; included. I ended up with just the kernel binary and an SD-card image. Apparently this target uses an SD-card to hold the root filesystem, much akin to Raspberry Pi.</p><p>I can&#039;t test the image, so I don&#039;t know if it works for your hardware or not, but at least I know that it builds correctly.</p><p>EDIT: I also checked the &#039;make kernel_menuconfig&#039; and indeed, the CONFIG_ARM_APPENDED_DTB is enabled. this means that the DTB file is appended to the zImage. You can find this setting from the &#039;boot options&#039; section in the kernel configuration.</p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 4 Feb 2018, 09:11)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>