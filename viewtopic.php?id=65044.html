<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openconnect unable to connect with anyconnect from windows</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p325395">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">powerst</div>
					<div class="post-datetime">
						23 May 2016, 03:54					</div>
				</div>
				<div class="post-content content">
					<p>Anyconnect 3.1.10010<br />OpenWrt Chaos Calmer 15.05.1<br />Openconnect (openwrt ocserv) 0.10.11-1</p><p>I recently flashed my router with OpenWRT and configured an openconnect server on it.</p><p>I am able to successfully connect from my android 6.0 device using AnyConnect 4.0.05034 downloaded from the google play store.</p><p>However, I am unable to establish a successful connection from windows 10 using Anyconnect 3.1.10010 downloaded from my work (Cisco wont let me download a newer 4.1/4.2).&nbsp; When i attempt a connection from windows, I am prompted for a username/password, it is accepted and I get the login banner.&nbsp; It then reconnects and checks for profile/product/customization updates.&nbsp; This is apparently unsuccessful and the connection fails.</p><p>Cisco anyconnect messages from failed connection attempt:<br />------------------------------------------<br />[5/21/2016 4:53:19 PM] Contacting &lt;Removed&gt;.<br />[5/21/2016 4:53:21 PM] Please enter your username.<br />[5/21/2016 4:53:24 PM] User credentials entered.<br />[5/21/2016 4:53:24 PM] Please enter your password.<br />[5/21/2016 4:53:27 PM] User credentials entered.<br />[5/21/2016 4:53:28 PM] Please respond to banner.<br />[5/21/2016 4:53:31 PM] User accepted banner.<br />[5/21/2016 4:53:31 PM] Establishing VPN session...<br />[5/21/2016 4:53:32 PM] Checking for profile updates...<br />[5/21/2016 4:53:32 PM] Checking for product updates...<br />[5/21/2016 4:53:34 PM] Checking for customization updates...<br />[5/21/2016 4:53:35 PM] Performing any required updates...<br />[5/21/2016 4:53:35 PM] Establishing VPN session...<br />[5/21/2016 4:53:35 PM] Establishing VPN - Initiating connection...<br />[5/21/2016 4:53:35 PM] Disconnect in progress, please wait...<br />[5/21/2016 4:53:38 PM] Connection attempt has failed.<br />[5/21/2016 4:53:42 PM] Ready to connect.<br />------------------------------------------</p><p>Openconnect config from /etc/config/ocserv:<br />------------------------------------------<br />config ocserv &#039;config&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dpd &#039;180&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_clients &#039;8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_same &#039;2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option zone &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.248&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _ca &lt;Removed&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; option auth &#039;plain&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option port &#039;7392&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enable &#039;1&#039;</p><p>config ocservusers<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &lt;Removed&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; option password &lt;Removed&gt;</p><p>config dns<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip &#039;192.168.1.1&#039;<br />------------------------------------------</p><p>Has this problem been experienced by anyone else and is there a config change I can apply to fix the issue?</p><p>I apologize if this has been answered before, I&#039;ve done some googling but haven&#039;t been able to find a resolution.</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325598">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">powerst</div>
					<div class="post-datetime">
						24 May 2016, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>Have tried from a couple different Windows machines with same result.&nbsp; Android seems to connect fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337548">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jjslegacy</div>
					<div class="post-datetime">
						8 Sep 2016, 04:33					</div>
				</div>
				<div class="post-content content">
					<p>Ever figure this out? I seem to have the same problem - works on IOS but not windows.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337568">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						8 Sep 2016, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>for me it&#039;s working on ocserv - 0.11.4-1 with:<br /></p><div class="codebox"><pre><code>config ocserv &#039;config&#039;
        option port &#039;4443&#039;
        option dpd &#039;180&#039;
        option max_clients &#039;8&#039;
        option max_same &#039;2&#039;
        option enable &#039;1&#039;
        option zone &#039;lan&#039;
        option netmask &#039;255.255.255.0&#039;
        option ipaddr &#039;10.1.1.250&#039;

config ocservusers
        option name myuser
        option password $1$mypass
config dns
        option ip &#039;10.1.1.1&#039;

#config routes
#       option ip &#039;10.1.1.0&#039;
#       option netmask &#039;255.255.255.0&#039;</code></pre></div><p>I&#039;ve also forced cipher on /etc/ocserv/ocserv.conf.template:<br /></p><div class="codebox"><pre><code>tls-priorities = &quot;NONE:+VERS-TLS-ALL:+MAC-ALL:+KX-ALL:+AES-128-CBC:+SIGN-ALL:+COMP-NULL&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>maurer</strong> on 8 Sep 2016, 12:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337793">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jjslegacy</div>
					<div class="post-datetime">
						10 Sep 2016, 05:55					</div>
				</div>
				<div class="post-content content">
					<p>what version of anyconnect are you running?</p><p>With your tls-priortiesi string I get an instant error connecting</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337808">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						10 Sep 2016, 09:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>for me it&#039;s working on ocserv - 0.11.4-1 ...</p></blockquote></div><p>and latest openconnect from download site<br />also tested anyconnect android from google play</p>											<p class="post-edited">(Last edited by <strong>maurer</strong> on 10 Sep 2016, 09:23)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>