<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hard disk problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p177553">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						9 Sep 2012, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve a Alix board with latest trunk he has 2 usb port and i connect a external hard drive formatted in ext4.</p><p>I use this board to download from torrent and ed2k.</p><p>It seems to work everithing well but after some times (1 hour or minutes) the board can&#039;t access to hard disk:</p><p>root@Alix:~# dmesg<br />1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.336630] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.348590] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.360578] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.372722] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.385273] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.397058] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.409018] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.421742] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.434119] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.446987] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.458951] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.471076] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.485505] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.497495] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.509627] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.521664] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.534631] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.546765] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.559096] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.570882] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.584320] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.596941] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.608882] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.621269] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.634772] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.646850] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.659250] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.671097] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.685370] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.700401] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.712816] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.725340] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.737696] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.749674] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.761834] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.773804] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.786292] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.798894] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.810863] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.822912] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.834877] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.847085] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.858898] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.871672] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.884163] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.896179] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.908351] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.921888] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.933952] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.948323] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.961660] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.973699] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2209.986031] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441797: comm transmission-da: reading directory lblock 0<br />[ 2211.702589] usb 1-2: new high-speed USB device number 4 using ehci_hcd<br />[ 2211.732079] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228225: comm amuled: reading directory lblock 0<br />[ 2211.858018] scsi3 : usb-storage 1-2:1.0<br />[ 2212.839585] scsi 3:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Hitachi&nbsp; HDP725025GLA380&nbsp; &nbsp; &nbsp; &nbsp;PQ: 0 ANSI: 2 CCS<br />[ 2212.852277] sd 3:0:0:0: [sdc] 488397168 512-byte logical blocks: (250 GB/232 GiB)<br />[ 2212.862661] sd 3:0:0:0: [sdc] Write Protect is off<br />[ 2212.867716] sd 3:0:0:0: [sdc] Mode Sense: 28 00 00 00<br />[ 2212.874908] sd 3:0:0:0: [sdc] No Caching mode page present<br />[ 2212.880414] sd 3:0:0:0: [sdc] Assuming drive cache: write through<br />[ 2212.890257] sd 3:0:0:0: [sdc] No Caching mode page present<br />[ 2212.896006] sd 3:0:0:0: [sdc] Assuming drive cache: write through<br />[ 2212.922312] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228225: comm amuled: reading directory lblock 0<br />[ 2212.934010]&nbsp; sdc: sdc1<br />[ 2212.941403] sd 3:0:0:0: [sdc] No Caching mode page present<br />[ 2212.947223] sd 3:0:0:0: [sdc] Assuming drive cache: write through<br />[ 2212.953533] sd 3:0:0:0: [sdc] Attached SCSI disk<br />[ 2213.005173] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441793: comm amuled: reading directory lblock 0<br />[ 2213.237275] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228225: comm amuled: reading directory lblock 0<br />[ 2213.480014] EXT4-fs (sdc1): couldn&#039;t mount as ext3 due to feature incompatibilities<br />[ 2213.499011] EXT4-fs (sdc1): couldn&#039;t mount as ext2 due to feature incompatibilities<br />[ 2215.359936] EXT4-fs (sdc1): recovery complete<br />[ 2215.379677] EXT4-fs (sdc1): mounted filesystem with ordered data mode. Opts: (null)<br />[ 2215.554079] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.566453] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.578865] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.590966] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.603504] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.615714] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.628680] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.642775] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.655245] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.666999] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.679044] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.691116] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.703636] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.715396] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.727700] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.740276] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.752318] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.764412] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.776506] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.788418] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.800564] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.813426] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.825283] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.837590] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.849522] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.863135] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.875209] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.887244] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.899049] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.910948] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.922735] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.934906] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228227: comm transmission-da: reading directory lblock 0<br />[ 2215.948342] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2215.961663] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2215.973538] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2215.986030] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2215.997868] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.009749] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.021534] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.033593] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.045559] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.058246] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.070119] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.082124] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.094024] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.106094] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.118307] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.130212] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.142068] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.154549] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.166534] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.178849] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228228: comm transmission-da: reading directory lblock 0<br />[ 2216.190843] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228226: comm transmission-da: reading directory lblock 0<br />[ 2216.203150] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #2228226: comm transmission-da: reading directory lblock 0<br />[ 2222.071600] amuleweb[2199]: segfault at 0 ip 0808f1cf sp bff35a60 error 4 in amuleweb[8048000+79000]<br />[ 2292.440699] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441793: comm amuled: reading directory lblock 0<br />[ 2306.842345] EXT4-fs error (device sdb1): ext4_find_entry:935: inode #1441793: comm amuled: reading directory lblock 0</p><br /><p>I dont know why happen this.</p><p>Thanks for your answers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177557">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						9 Sep 2012, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>Plug in to your computer and do the disk check.<br />Or you expect do it in your router ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177559">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						9 Sep 2012, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Yes I did it. fsck say that the volume is clean,<br />I also tried to format again the disk. But the problem persist.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177600">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						10 Sep 2012, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>Seems like the external hard drive is broken but i have tried another one and the problem persist.</p><p>I dont understand why.</p><br /><p>[ 2279.454678] usb 1-2: USB disconnect, device number 10<br />[ 2284.673540] usb 2-2: USB disconnect, device number 3<br />[ 2296.700140] usb 1-2: new high-speed USB device number 11 using ehci_hcd<br />[ 2296.856507] scsi13 : usb-storage 1-2:1.0<br />[ 2297.904016] scsi 13:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Hitachi&nbsp; HDP725025GLA380&nbsp; &nbsp; &nbsp; &nbsp;PQ: 0 ANSI: 2 CCS<br />[ 2297.916821] sd 13:0:0:0: [sdi] 488397168 512-byte logical blocks: (250 GB/232 GiB)<br />[ 2297.925988] sd 13:0:0:0: [sdi] Write Protect is off<br />[ 2297.930883] sd 13:0:0:0: [sdi] Mode Sense: 28 00 00 00<br />[ 2297.937181] sd 13:0:0:0: [sdi] No Caching mode page present<br />[ 2297.942771] sd 13:0:0:0: [sdi] Assuming drive cache: write through<br />[ 2297.952051] sd 13:0:0:0: [sdi] No Caching mode page present<br />[ 2297.957732] sd 13:0:0:0: [sdi] Assuming drive cache: write through<br />[ 2297.985258]&nbsp; sdi: sdi1<br />[ 2297.992198] sd 13:0:0:0: [sdi] No Caching mode page present<br />[ 2297.997898] sd 13:0:0:0: [sdi] Assuming drive cache: write through<br />[ 2298.004093] sd 13:0:0:0: [sdi] Attached SCSI disk<br />[ 2298.304858] EXT4-fs (sdi1): couldn&#039;t mount as ext3 due to feature incompatibilities<br />[ 2298.313971] EXT4-fs (sdi1): couldn&#039;t mount as ext2 due to feature incompatibilities<br />[ 2298.645684] EXT4-fs (sdi1): recovery complete<br />[ 2298.650756] EXT4-fs (sdi1): mounted filesystem with ordered data mode. Opts: (null)<br />[ 2600.304380] usb 1-2: reset high-speed USB device number 11 using ehci_hcd<br />[ 2606.098995] usb 1-2: USB disconnect, device number 11<br />[ 2606.107851] sd 13:0:0:0: Device offlined - not ready after error recovery<br />[ 2606.115273] sd 13:0:0:0: [sdi] Unhandled error code<br />[ 2606.120164] sd 13:0:0:0: [sdi]&nbsp; Result: hostbyte=0x01 driverbyte=0x00<br />[ 2606.126764] sd 13:0:0:0: [sdi] CDB: cdb[0]=0x2a: 2a 00 1b 00 69 00 00 00 f0 00<br />[ 2606.134279] end_request: I/O error, dev sdi, sector 453011712<br />[ 2606.140310] sd 13:0:0:0: [sdi] Unhandled error code<br />[ 2606.145200] sd 13:0:0:0: [sdi]&nbsp; Result: hostbyte=0x01 driverbyte=0x00<br />[ 2606.151779] sd 13:0:0:0: [sdi] CDB: cdb[0]=0x2a: 2a 00 1b 00 69 f0 00 00 f0 00<br />[ 2606.159291] end_request: I/O error, dev sdi, sector 453011952<br />[ 2606.166360] Aborting journal on device sdi1-8.<br />[ 2606.170835] JBD2: I/O error detected when updating journal superblock for sdi1-8.<br />[ 2606.178611] journal commit I/O error<br />[ 2618.122263] usb 1-2: new high-speed USB device number 12 using ehci_hcd<br />[ 2618.278631] scsi14 : usb-storage 1-2:1.0<br />[ 2619.326078] scsi 14:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Hitachi&nbsp; HDP725025GLA380&nbsp; &nbsp; &nbsp; &nbsp;PQ: 0 ANSI: 2 CCS<br />[ 2619.339009] sd 14:0:0:0: [sdj] 488397168 512-byte logical blocks: (250 GB/232 GiB)<br />[ 2619.348180] sd 14:0:0:0: [sdj] Write Protect is off<br />[ 2619.353085] sd 14:0:0:0: [sdj] Mode Sense: 28 00 00 00<br />[ 2619.359371] sd 14:0:0:0: [sdj] No Caching mode page present<br />[ 2619.364960] sd 14:0:0:0: [sdj] Assuming drive cache: write through<br />[ 2619.374242] sd 14:0:0:0: [sdj] No Caching mode page present<br />[ 2619.379832] sd 14:0:0:0: [sdj] Assuming drive cache: write through<br />[ 2619.408957]&nbsp; sdj: sdj1<br />[ 2619.416512] sd 14:0:0:0: [sdj] No Caching mode page present<br />[ 2619.422107] sd 14:0:0:0: [sdj] Assuming drive cache: write through<br />[ 2619.428419] sd 14:0:0:0: [sdj] Attached SCSI disk<br />[ 2619.728426] EXT4-fs (sdj1): couldn&#039;t mount as ext3 due to feature incompatibilities<br />[ 2619.737542] EXT4-fs (sdj1): couldn&#039;t mount as ext2 due to feature incompatibilities<br />[ 2620.076585] EXT4-fs (sdj1): recovery complete<br />[ 2620.081965] EXT4-fs (sdj1): mounted filesystem with ordered data mode. Opts: (null)<br />[ 2658.900489] usb 1-2: USB disconnect, device number 12<br />[ 2658.906025] sd 14:0:0:0: Device offlined - not ready after error recovery<br />[ 2658.922648] sd 14:0:0:0: [sdj] Unhandled error code<br />[ 2658.927542] sd 14:0:0:0: [sdj]&nbsp; Result: hostbyte=0x01 driverbyte=0x00<br />[ 2658.934103] sd 14:0:0:0: [sdj] CDB: cdb[0]=0x2a: 2a 00 1b 00 a9 00 00 00 f0 00<br />[ 2658.941564] end_request: I/O error, dev sdj, sector 453028096<br />[ 2658.947567] sd 14:0:0:0: [sdj] Unhandled error code<br />[ 2658.952456] sd 14:0:0:0: [sdj]&nbsp; Result: hostbyte=0x01 driverbyte=0x00<br />[ 2658.959032] sd 14:0:0:0: [sdj] CDB: cdb[0]=0x2a: 2a 00 1b 00 a9 f0 00 00 f0 00<br />[ 2658.966495] end_request: I/O error, dev sdj, sector 453028336<br />[ 2658.972718] Aborting journal on device sdj1-8.<br />[ 2658.977190] JBD2: I/O error detected when updating journal superblock for sdj1-8.<br />[ 2658.984858] journal commit I/O error<br />[ 2659.104078] usb 1-2: new high-speed USB device number 13 using ehci_hcd<br />[ 2659.260566] scsi15 : usb-storage 1-2:1.0<br />[ 2664.753882] usb 1-2: USB disconnect, device number 13<br />[ 2676.780944] usb 1-2: new high-speed USB device number 14 using ehci_hcd<br />[ 2676.937369] scsi16 : usb-storage 1-2:1.0<br />[ 2677.984652] scsi 16:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Hitachi&nbsp; HDP725025GLA380&nbsp; &nbsp; &nbsp; &nbsp;PQ: 0 ANSI: 2 CCS<br />[ 2677.997333] sd 16:0:0:0: [sdk] 488397168 512-byte logical blocks: (250 GB/232 GiB)<br />[ 2678.006506] sd 16:0:0:0: [sdk] Write Protect is off<br />[ 2678.011399] sd 16:0:0:0: [sdk] Mode Sense: 28 00 00 00<br />[ 2678.017569] sd 16:0:0:0: [sdk] No Caching mode page present<br />[ 2678.023156] sd 16:0:0:0: [sdk] Assuming drive cache: write through<br />[ 2678.032566] sd 16:0:0:0: [sdk] No Caching mode page present<br />[ 2678.038158] sd 16:0:0:0: [sdk] Assuming drive cache: write through<br />[ 2678.068147]&nbsp; sdk: sdk1<br />[ 2678.075343] sd 16:0:0:0: [sdk] No Caching mode page present<br />[ 2678.080934] sd 16:0:0:0: [sdk] Assuming drive cache: write through<br />[ 2678.087294] sd 16:0:0:0: [sdk] Attached SCSI disk<br />[ 2678.379373] EXT4-fs (sdk1): couldn&#039;t mount as ext3 due to feature incompatibilities<br />[ 2678.388612] EXT4-fs (sdk1): couldn&#039;t mount as ext2 due to feature incompatibilities<br />[ 2678.696967] EXT4-fs (sdk1): recovery complete<br />[ 2678.702408] EXT4-fs (sdk1): mounted filesystem with ordered data mode. Opts: (null)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177602">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Sep 2012, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know the original reasons why your device gets unmounted in the first place, but the other symptoms are effects of bug 12056 / 12043.</p><p>The unmount routine is currently broken, and the USB device name remains active and reserved after you have unplugged the device (or otherwise caused the unmount). On later reconnects, the USB disk will then get a new device name, sda--&gt;sdb--&gt;sdc etc. (upto sdk in your log)</p><p><a href="https://dev.openwrt.org/ticket/12043">https://dev.openwrt.org/ticket/12043</a><br /><a href="https://dev.openwrt.org/ticket/12056">https://dev.openwrt.org/ticket/12056</a></p><br /><br /><p>Patch the hotplug routine to unplug also with the mounted device path instead of only the device name.</p><p>In my own firmware, I am patching with:<br /></p><div class="codebox"><pre><code>--- trunk/package/block-mount/files/40-mount    (revision 33349)
+++ trunk/package/block-mount/files/40-mount    (working copy)
@@ -11,6 +11,7 @@
 if [ `basename $blkdev` != &quot;block&quot; ]; then
 
     device=`basename $DEVPATH`
+    dpath=`mount | grep $device | awk &#039;{print $3}&#039;`
 
     case &quot;$ACTION&quot; in
     add)
@@ -81,7 +82,9 @@
         reset_dev_section_cb
         ;;
     remove)
+        logger &quot;USB Hotplug action: umount /dev/$device&quot;
         umount /dev/$device
+        umount $dpath
         ;;
     esac</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 10 Sep 2012, 12:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177611">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Sep 2012, 13:08					</div>
				</div>
				<div class="post-content content">
					<p>Possibly fixed with r33357:<br /><a href="https://dev.openwrt.org/changeset/33357">https://dev.openwrt.org/changeset/33357</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177613">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						10 Sep 2012, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>Very thanks for your answer.</p><p>Well i have to apply this patch to my source and recompile everything and reinstall openwrt in my board or there is another simplified method?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177615">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Sep 2012, 13:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>meconiotronic wrote:</cite><blockquote><p>Very thanks for your answer.</p><p>Well i have to apply this patch to my source and recompile everything and reinstall openwrt in my board or there is another simplified method?</p></blockquote></div><p>After 33357 the patch will be applied automatically to source code, so updating sources and recompiling should fix it.</p><p>But you can also use a text editor (I prefer &quot;nano&quot;) in a running Openwrt to patch directly the hotplug script. You can add the two new lines directly to it. The changeset 33357 pretty clearly shows the lines 14 and 86 to add into the script file.</p><p>The hotplug script &quot;40-mount&quot; should be in your router as /etc/hotplug.d/block/40-mount</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177617">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						10 Sep 2012, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>hnyman Thanks I did what you said directly in the script.</p><p>I hope it is resolved. test it and will let you know</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177631">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						10 Sep 2012, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>Now the mount folder remain only one. But the problem that the hard disk stops working is not solved.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>