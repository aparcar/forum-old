<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb is not working, kamikaze rev 3794, se505</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p27477">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aeickho</div>
					<div class="post-datetime">
						19 May 2006, 02:43					</div>
				</div>
				<div class="post-content content">
					<p>hy<br />my usb port is not workig with R 3794 but with R2652<br />i use:<br />Linux version 2.4.32 (alex@robby) (gcc version 3.4.4 (OpenWrt-2.0)) #3 Fr Mai 19 00:42:49 CEST 2006, SVN Rev 3794<br />on se505 s30853-s1006-r107-3</p><div class="codebox"><pre><code>Linux version 2.4.32 (alex@robby) (gcc version 3.4.4 (OpenWrt-2.0)) #3 Fr Mai 19 00:42:49 CEST 2006
root@OpenWrt:~# dmesg 
CPU revision is: 00029007
Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 4kB, 2-way, linesize 16 bytes.
Linux version 2.4.32 (alex@robby) (gcc version 3.4.4 (OpenWrt-2.0)) #3 Fr Mai 19 00:42:49 CEST 2006
Determined physical RAM map:
 memory: 00800000 @ 00000000 (usable)
On node 0 totalpages: 2048
zone(0): 2048 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
CPU: BCM4712 rev 1 at 200 MHz
Using 100.000 MHz high precision timer.
Calibrating delay loop... 199.47 BogoMIPS
Memory: 6156k/8192k available (1418k kernel code, 2036k reserved, 100k data, 92k init, 0k highmem)
Dentry cache hash table entries: 1024 (order: 1, 8192 bytes)
Inode cache hash table entries: 512 (order: 0, 4096 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 2048 (order: 1, 8192 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: Initializing host
PCI: Fixing up bus 0
PCI: Fixing up bridge
PCI: Setting latency timer of device 01:00.0 to 64
PCI: Fixing up bus 1
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
b44.c:v0.93 (Mar, 2004)
PCI: Setting latency timer of device 00:02.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 00:01:e3:0e:dc:58
Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.0 at 0x0040
Physically mapped flash: JEDEC Device ID is 0xCB. Assuming broken CFI table.
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x400000 at 0x1c000000
bootloader size: 262144
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x003f0000 : &quot;linux&quot;
0x000c0000-0x003f0000 : &quot;rootfs&quot;
0x003f0000-0x00400000 : &quot;nvram&quot;
sflash: found no supported devices
Initializing Cryptographic API
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 512 bind 1024)
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 360 bytes per conntrack
ip_tables: (C) 2000-2002 Netfilter core team
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (jffs2 filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 92k freed
Algorithmics/MIPS FPU Emulator v1.5
jffs2.bbc: SIZE compression mode activated.
Probing device eth0: No Robo switch in managed mode found
Probing device eth1: No such device
Probing device eth2: No such device
Probing device eth3: No such device
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
vlan0: add 01:00:5e:00:00:01 mcast address to master interface
vlan0: dev_set_promiscuity(master, 1)
device eth0 entered promiscuous mode
device vlan0 entered promiscuous mode
vlan0: dev_set_allmulti(master, 1)
br0: port 1(vlan0) entering learning state
br0: port 1(vlan0) entering forwarding state
br0: topology change detected, propagating
vlan1: add 01:00:5e:00:00:01 mcast address to master interface
PCI: Setting latency timer of device 00:01.0 to 64
wl0: Broadcom BCM4320 802.11 Wireless Controller 4.80.9.1
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
PCI: Setting latency timer of device 00:04.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8004000, IRQ 12
usb-ohci.c: usb-00:04.0, PCI device 14e4:4716
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
usb.c: registered new driver serial
usbserial.c: USB Serial support registered for Generic
usbserial.c: USB Serial Driver core v1.4
SCSI subsystem driver Revision: 1.00
hub.c: new USB device 00:04.0-1, assigned address 2
Initializing USB Mass Storage driver...
usb.c: registered new driver usb-storage
USB Mass Storage support registered.
usbserial.c: USB Serial support registered for PL-2303
pl2303.c: Prolific PL2303 USB to serial adaptor driver v0.10.1
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=2 (error=-145)
hub.c: new USB device 00:04.0-1, assigned address 3
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=3 (error=-145)
hub.c: new USB device 00:04.0-2, assigned address 4
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=4 (error=-145)
hub.c: new USB device 00:04.0-2, assigned address 5
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=5 (error=-145)
usb.c: USB disconnect on device 00:04.0-0 address 1
usb.c: USB bus 1 deregistered
pci_pool_destroy 00:04.0/ohci_td, a02e6000 busy
pci_pool_destroy 00:04.0/ohci_dev, a06bf000 busy
pci_pool_destroy 00:04.0/ohci_dev, a0695000 busy
pci_pool_destroy 00:04.0/ohci_dev, a05fb000 busy
usb-ohci.c: USB OHCI at membase 0xb8004000, IRQ 12
usb-ohci.c: usb-00:04.0, PCI device 14e4:4716
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
hub.c: new USB device 00:04.0-2, assigned address 2
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=2 (error=-145)
hub.c: new USB device 00:04.0-2, assigned address 3
usb_control/bulk_msg: timeout
usb-ohci.c: unlink URB timeout
usb.c: USB device not accepting new address=3 (error=-145)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# cat /proc/pci 
PCI devices found:
  Bus  0, device   0, function  0:
    Class 0501: PCI device 14e4:0800 (rev 1).
      IRQ 3.
      Non-prefetchable 32 bit memory at 0x18000000 [0x18000fff].
      Non-prefetchable 32 bit memory at 0x1fc00000 [0x1fffffff].
      Non-prefetchable 32 bit memory at 0x1c000000 [0x1dffffff].
      Non-prefetchable 32 bit memory at 0x1a000000 [0x1bffffff].
  Bus  0, device   1, function  0:
    Class 0280: PCI device 14e4:4320 (rev 1).
      IRQ 4.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x18001000 [0x18001fff].
  Bus  0, device   2, function  0:
    Class 0200: PCI device 14e4:4713 (rev 1).
      IRQ 5.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x18002000 [0x18002fff].
  Bus  0, device   3, function  0:
    Class 0c03: PCI device 14e4:4717 (rev 1).
      IRQ 6.
      Non-prefetchable 32 bit memory at 0x18003000 [0x18003fff].
  Bus  0, device   4, function  0:
    Class 0c03: PCI device 14e4:4716 (rev 1).
      IRQ 12.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x18004000 [0x18004fff].
  Bus  0, device   5, function  0:
    Class 0b30: PCI device 14e4:0816 (rev 1).
      IRQ 13.
      Non-prefetchable 32 bit memory at 0x18005000 [0x18005fff].
  Bus  0, device   6, function  0:
    Class 0500: PCI device 14e4:080f (rev 1).
      IRQ 3.
      Non-prefetchable 32 bit memory at 0x18006000 [0x18006fff].
      Non-prefetchable 32 bit memory at 0x0 [0x7ffffff].
      Non-prefetchable 32 bit memory at 0x10000000 [0x17ffffff].
      Non-prefetchable 32 bit memory at 0x80000000 [0x9fffffff].
  Bus  0, device   7, function  0:
    Class 0604: PCI device 14e4:0804 (rev 1).
      IRQ 15.
      Non-prefetchable 32 bit memory at 0x18007000 [0x18007fff].
      Non-prefetchable 32 bit memory at 0x8000000 [0xfffffff].
  Bus  1, device   0, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x40000000 [0x40001fff].
      Prefetchable 32 bit memory at 0x0 [0x7ffffff].
  Bus  1, device   1, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x40002000 [0x40003fff].
      Prefetchable 32 bit memory at 0x48000000 [0x4fffffff].
  Bus  1, device   2, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x50000000 [0x50001fff].
      Prefetchable 32 bit memory at 0x58000000 [0x5fffffff].
  Bus  1, device   3, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x60000000 [0x60001fff].
      Prefetchable 32 bit memory at 0x68000000 [0x6fffffff].
  Bus  1, device   4, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
     IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x70000000 [0x70001fff].
      Prefetchable 32 bit memory at 0x78000000 [0x7fffffff].
  Bus  1, device   5, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x80000000 [0x80001fff].
      Prefetchable 32 bit memory at 0x88000000 [0x8fffffff].
  Bus  1, device   6, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x90000000 [0x90001fff].
      Prefetchable 32 bit memory at 0x98000000 [0x9fffffff].
  Bus  1, device   7, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xa0000000 [0xa0001fff].
      Prefetchable 32 bit memory at 0xa8000000 [0xafffffff].
  Bus  1, device   8, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xb0000000 [0xb0001fff].
      Prefetchable 32 bit memory at 0xb8000000 [0xbfffffff].
  Bus  1, device   9, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xc0000000 [0xc0001fff].
      Prefetchable 32 bit memory at 0xc8000000 [0xcfffffff].
  Bus  1, device  10, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xd0000000 [0xd0001fff].
      Prefetchable 32 bit memory at 0xd8000000 [0xdfffffff].
  Bus  1, device  11, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xe0000000 [0xe0001fff].
      Prefetchable 32 bit memory at 0xe8000000 [0xefffffff].
  Bus  1, device  12, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0xf0000000 [0xf0001fff].
      Prefetchable 32 bit memory at 0xf8000000 [0xffffffff].
  Bus  1, device  13, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x0 [0x1fff].
      Prefetchable 32 bit memory at 0x8000000 [0xfffffff].
  Bus  1, device  14, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x10000000 [0x10001fff].
      Prefetchable 32 bit memory at 0x18000000 [0x1fffffff].
  Bus  1, device  15, function  0:
    Class 0600: PCI device 14e4:4712 (rev 1).
      IRQ 15.
      Master Capable.  Latency=64.  
      Non-prefetchable 32 bit memory at 0x20000000 [0x20001fff].
      Prefetchable 32 bit memory at 0x28000000 [0x2fffffff].
root@OpenWrt:~#</code></pre></div><p>and usb is not working<br /></p><div class="codebox"><pre><code>cat of: root@OpenWrt:/lib/modules# cat /proc/interrupts 
           CPU0       
  3:         11            MIPS  serial
  4:      10781            MIPS  wl0
  5:       3782            MIPS  eth0
  7:     247003            MIPS  timer
 12:          0            MIPS  usb-ohci   &lt;&lt;----

ERR:          0</code></pre></div><p>....................................................................</p><p>And on my old buid with&nbsp; bleeding edge, SVN r2652 </p><br /><div class="codebox"><pre><code>PCI: Setting latency timer of device 00:04.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8004000, IRQ 2
usb-ohci.c: usb-00:04.0, PCI device 14e4:4716
usb.c: new USB bus registered, assigned bus number 1</code></pre></div><div class="codebox"><pre><code>root@OpenWrt_20:~# dmesg 
CPU revision is: 00029007
Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 4kB, 2-way, linesize 16 bytes.
Linux version 2.4.32 (alexander@db0smg) (gcc version 3.4.4) #1 Sa Nov 26 03:28:5
2 CET 2005
Determined physical RAM map:
 memory: 00800000 @ 00000000 (usable)
On node 0 totalpages: 2048
zone(0): 2048 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/pre
init noinitrd console=ttyS0,115200
CPU: BCM4712 rev 1 at 200 MHz
Using 100.000 MHz high precision timer.
Calibrating delay loop... 199.47 BogoMIPS
Memory: 6180k/8192k available (1403k kernel code, 2012k reserved, 100k data, 80k
 init, 0k highmem)
Dentry cache hash table entries: 1024 (order: 1, 8192 bytes)
Inode cache hash table entries: 512 (order: 0, 4096 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 2048 (order: 1, 8192 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: Fixing up bus 0
PCI: Fixing up bridge
PCI: Setting latency timer of device 01:00.0 to 64
PCI: Fixing up bus 1
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
Squashfs 2.2 (released 2005/07/03) (C) 2002-2004, 2005 Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI en
abled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
Software Watchdog Timer: 0.05, timer margin: 60 sec
Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.0 at 0x0040
Physically mapped flash: JEDEC Device ID is 0xCB. Assuming broken CFI table.
Physically mapped flash: Swapping erase regions for broken CFI table.
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x400000 at 0x1c000000
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;pmon&quot;
0x00040000-0x003f0000 : &quot;linux&quot;
0x000c0000-0x003f0000 : &quot;rootfs&quot;
0x003f0000-0x00400000 : &quot;nvram&quot;
Initializing Cryptographic API
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 512 bind 1024)
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 352 bytes per conntrack
ip_tables: (C) 2000-2002 Netfilter core team
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Welcome to PF_RING 3.0
(C) 2004 L.Deri &lt;deri@ntop.org&gt;
PF_RING: bucket length    128 bytes
PF_RING: ring slots       4096
PF_RING: sample rate      1 [1=no sampling]
PF_RING: capture TX       No [RX only]
PF_RING: transparent mode No
PF_RING initialized correctly.
VFS: Mounted root (jffs2 filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 80k freed
Algorithmics/MIPS FPU Emulator v1.5
diag boardtype: 00000101
jffs2.bbc: SIZE compression mode activated.
PCI: Setting latency timer of device 00:02.0 to 64
eth0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.130.20.0
No Broadcom devices found.
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
Linux video capture interface: v1.00
PCI: Setting latency timer of device 00:04.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8004000, IRQ 2
usb-ohci.c: usb-00:04.0, PCI device 14e4:4716
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
device eth0 entered promiscuous mode
hub.c: new USB device 00:04.0-2, assigned address 2
usb.c: USB device not accepting new address=2 (error=-145)
hub.c: new USB device 00:04.0-2, assigned address 3
usb.c: USB device not accepting new address=3 (error=-145)
vlan0: add 01:00:5e:00:00:01 mcast address to master interface
vlan0: dev_set_promiscuity(master, 1)
device vlan0 entered promiscuous mode
br0: port 1(vlan0) entering learning state
br0: port 1(vlan0) entering forwarding state
br0: topology change detected, propagating
hub.c: new USB device 00:04.0-1, assigned address 4
usb.c: USB device 4 (vend/prod 0xd8c/0xc) is not claimed by any active driver.</code></pre></div><p>and usb is working</p><p>thanks for help<br />-alex</p>											<p class="post-edited">(Last edited by <strong>aeickho</strong> on 19 May 2006, 18:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p27544">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">aeickho</div>
					<div class="post-datetime">
						20 May 2006, 00:46					</div>
				</div>
				<div class="post-content content">
					<p>brute workaround ;-)<br />===============</p><div class="codebox"><pre><code>alex@robby:~/openwrt_k_20060518/openwrt&gt; diff -u  build_mipsel/linux/drivers/usb/host/usb-ohci.c ~/usb-ohci_irq_2.c
--- build_mipsel/linux/drivers/usb/host/usb-ohci.c      2005-11-16 20:12:54.000000000 +0100
+++ /home/alex/usb-ohci_irq_2.c 2006-05-19 23:46:28.000000000 +0200
@@ -2697,7 +2697,7 @@
        /* controller writes into our memory */
        pci_set_master (dev);
 
-       status = hc_found_ohci (dev, dev-&gt;irq, mem_base, id);
+       status = hc_found_ohci (dev, 2, mem_base, id);
        if (status &lt; 0) {
                iounmap (mem_base);
                release_mem_region (mem_resource, mem_len);
alex@robby:~/openwrt_k_20060518/openwrt&gt;</code></pre></div><p>and usb is working</p>											<p class="post-edited">(Last edited by <strong>aeickho</strong> on 20 May 2006, 00:48)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>