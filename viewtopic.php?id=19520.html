<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NSLU2 and RTL8187 wlan stick</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p84506">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lostmind</div>
					<div class="post-datetime">
						25 Mar 2009, 10:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I&#039;m running 8.09 on a Linksys NSLU2. I want to add WLAN support through a Realtek RTL8187-based USB stick.</p><p>As 8.09 does not deliver an appropriate module, I have built the modules from <a href="http://rtl-wifi.sourceforge.net">rtl-wifi.sourceforge.net</a> using the toolchain. Building and installing worked out fine, but I get no interface like wlan* or something.</p><p>This is the dmesg output:</p><div class="codebox"><pre><code>ieee80211_crypt: registered algorithm &#039;NULL&#039;
ieee80211_crypt: registered algorithm &#039;WEP&#039;
ieee80211_crypt: registered algorithm &#039;TKIP&#039;
ieee80211_crypt: registered algorithm &#039;CCMP&#039;

Linux kernel driver for RTL8180 / RTL8185 based WLAN cards
Copyright (c) 2004-2005, Andrea Merello
rtl8180: Initializing module
rtl8180: Wireless extensions version 22
rtl8180: Initializing proc filesystem

Linux kernel driver for RTL8187 based WLAN cards
Copyright (c) 2004-2005, Andrea Merello
rtl8187: Initializing module
rtl8187: Wireless extensions version 22
rtl8187: Initializing proc filesystem
usbcore: registered new interface driver rtl8187

[...]

rtl8187: Reported EEPROM chip is a 93c46 (1Kbit)
rtl8187: Card MAC address is 00:e0:4c:00:f9:be
rtl8187: Card reports RF frontend Realtek 8225
rtl8187: WW:This driver has EXPERIMENTAL support for this chipset.
rtl8187: WW:use it with care and at your own risk and
rtl8187: WW:**PLEASE** REPORT SUCCESS/INSUCCESS TO andreamrl@tiscali.it
rtl8187: This seems a legacy 1st version radio
rtl8187: PAPE from CONFIG2: 0
rtl8187: Driver probe completed</code></pre></div><p>This is the ifconfig output:</p><div class="codebox"><pre><code>br-lan    Link encap:Ethernet  HWaddr 00:04:5A:0F:D3:F0  
          inet addr:192.168.10.30  Bcast:192.168.10.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:864 errors:0 dropped:0 overruns:0 frame:0
          TX packets:136 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:77305 (75.4 KiB)  TX bytes:19481 (19.0 KiB)

eth0      Link encap:Ethernet  HWaddr 00:04:5A:0F:D3:F0  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:868 errors:0 dropped:0 overruns:0 frame:0
          TX packets:135 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100 
          RX bytes:77792 (75.9 KiB)  TX bytes:19079 (18.6 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</code></pre></div><p>This is the output of lsmod | grep 8187:</p><div class="codebox"><pre><code>r8187                  28036  0 
ieee80211_rtl          39523  2 r8187,r8180
eeprom_93cx6            1024  2 r8187,r8180
usbcore                84468  6 ftdi_sio,usbserial,usbnet,ehci_hcd,r8187</code></pre></div><p>There is also some information located at /proc/2410/net/rtl8187/wlan0 (registers, stats-rx, stats-tx).</p><p>For me it looks like the modules were loaded successfully. But why is the interface missing?</p><p>Thanks in advance.</p><p>Best regards,<br />Mario</p>											<p class="post-edited">(Last edited by <strong>Lostmind</strong> on 25 Mar 2009, 10:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89593">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vinyols</div>
					<div class="post-datetime">
						10 Jun 2009, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>Please create post for installing driver.</p><p>Thanks !!!!!!!!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91834">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lostmind</div>
					<div class="post-datetime">
						24 Jul 2009, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi again!</p><p>Sorry for the long delay. I will provide you with a description to get the rtl8187 working until the point described above.</p><p>Follow these steps:</p><p>&nbsp; &nbsp;1. Download the file <em>kamikaze_8.09_source.tar.bz2</em> from <em>openwrt.org</em> and unpack it. This will create a new directory <em>kamikaze_8.09</em>.<br />&nbsp; &nbsp;2. Enter this directory and place the archive <em>rtl-wifi.tar.gz</em> (download below!) in the subdirectory <em>package</em>.<br />&nbsp; &nbsp;3. Now unpack the archive right there. Again, this will create a new directory <em>rtl-wifi</em> (it contains the Makefile). Inside you will find a directory <em>patches</em> (there are the needed patches).</p><p>That is all. After invoking <em>make menuconfig</em> the new module should appear under <em>Network Modules -&gt; Wireless Drivers -&gt; kmod-rtl-wifi</em>.</p><p>Download of <strong>rtl-wifi.tar.gz</strong> is located <strong><a href="http://www.lostmind.de/download/rtl-wifi.tar.gz">here</a></strong>.</p><p>I hope there is somebody with more luck than me - I have switched to a rt73-based wlan stick. At least <em>kmod-rt73-usb</em> creates an interface, but is not working either in client- or ap-mode.</p><p>Best regards,<br />Mario</p>											<p class="post-edited">(Last edited by <strong>Lostmind</strong> on 24 Jul 2009, 23:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91949">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dr.gonzo42</div>
					<div class="post-datetime">
						27 Jul 2009, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Lostmind for Posting your instructions to compile the driver for the RTL8187 chip set. The driver compiles without no errors, but I can`t load the driver <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>dmesg says:</p><div class="codebox"><pre><code>rtl8187: Reported EEPROM chip is a 93c46 (1Kbit)
rtl8187: Card MAC address is 00:1f:1f:3c:4b:68
rtl8187: WW:Unknown RF module 6
rtl8187: WW:Exiting...
rtl8187: Initialization failed
rtl8187: wlan driver load failed</code></pre></div><p>If anybody has the same problem und solved it, please post!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92131">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Lostmind</div>
					<div class="post-datetime">
						31 Jul 2009, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi dr.gonzo42!</p><p>Please install <em>usbutils</em> and post the output of <em>lsusb</em>. In addition you could try your wlan stick on a Linux-PC and post the dmesg-output. According to the &quot;unknown RF module&quot;-error I suspect a mismatch of USB id&#039;s.</p><p>Best regards,<br />Mario</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92248">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dr.gonzo42</div>
					<div class="post-datetime">
						3 Aug 2009, 16:14					</div>
				</div>
				<div class="post-content content">
					<p>Hallo Lostmind,</p><p>here is the dmesg-output on my notebook:</p><div class="codebox"><pre><code>rtl8187: 8187B chip detected. Support is EXPERIMENTAL, and could damage your
[   49.569621]          hardware, use at your own risk
[   49.569625] rtl8187: inconsistency between id with OEM info!
[   49.571394] phy0: Selected rate control algorithm &#039;pid&#039;
[   49.616513] phy0: hwaddr 00:1f:1f:3c:4b:68, RTL8187BvB(early) V0 + rtl8225z2</code></pre></div><p>And the lsusb-output (I post all of the information, but I think only the vendor-ID or product-ID is important):</p><div class="codebox"><pre><code>Bus 001 Device 006: ID 0bda:8187 Realtek Semiconductor Corp. RTL8187 Wireless Adapter
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x0bda Realtek Semiconductor Corp.
  idProduct          0x8187 RTL8187 Wireless Adapter
  bcdDevice            2.00
  iManufacturer           1 Manufacturer_Realtek
  iProduct                2 RTL8187B_WLAN_Adapter
  iSerial                 3 00e04c000001
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           81
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          4 Wireless Network Card
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           9
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass    255 Vendor Specific Subclass
      bInterfaceProtocol    255 Vendor Specific Protocol
      iInterface              2 RTL8187B_WLAN_Adapter
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x04  EP 4 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
       bDescriptorType         5
        bEndpointAddress     0x05  EP 5 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x06  EP 6 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x07  EP 7 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x89  EP 9 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x0a  EP 10 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x0b  EP 11 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x0c  EP 12 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  bNumConfigurations      1
Device Status:     0x0000
  (Bus Powered)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92433">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Lostmind</div>
					<div class="post-datetime">
						8 Aug 2009, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi again!</p><p>I could identify the problem: we are using an outdated version of the rtl-drivers. The driver was sometime ago merged in the mainline kernel and through this it is already included in the OpenWrt source package. Fortunately, OpenWrt is using compat-wireless which enables us to take advantage of modifications done to the rtl-drivers in newer kernel releases than OpenWrt is using. Ok, long story short solution: we modify the included mac80211-package.</p><p>1. This time I have used kamikaze_8.09<strong>.1</strong>_source.tar.bz2, so if you already used that last time, go into the <em>package</em>-directory and <span class="bbu">remove</span> the <em>rtl-wifi</em>-directory.<br />2. Call <em>make menuconfig</em> and check if the <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> is <span class="bbu">gone</span>.<br />5. Go into the <em>package</em>-directory and remove the <em>mac80211</em>-directory.<br />4. Now copy the <em>mac80211.tar.gz</em>-file (download below!) into the <em>package</em>-directory and unpack it there. A new <em>mac80211</em>-directory should appear.<br />5. Call <em>make menuconfig</em>. There should be a <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> - this time it is the new one. Make sure it is marked with &quot;M&quot;. Save and exit.<br />6. Invoke <em>make</em> and wait for the build process.</p><p>After the build process has finished, have a look inside the <em>bin/packages/armeb</em>-directory: the file you are looking for is <em>kmod-rtl-wifi_2.6.26.8+2008-08-06-ixp4xx-2_armeb.ipk</em> (at least that is the name at my side after all).</p><p>Download mac80211.tar.gz from <strong><a href="http://www.lostmind.de/download/mac80211.tar.gz">here</a></strong>.</p><p>Please consider that <strong>this is NOT tested</strong>! At the moment I have no Realtek wifi stick around. I will be able to test it next friday, but I put this here so you can try <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Good luck and please report.</p><p>Best regards,<br />Mario</p><p>Btw.: &gt; Hallo Lostmind,<br />Is that a typo or are you a German speaker?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92444">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">rdmitry</div>
					<div class="post-datetime">
						8 Aug 2009, 20:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lostmind wrote:</cite><blockquote><p>Hi again!</p><p>I could identify the problem: we are using an outdated version of the rtl-drivers. The driver was sometime ago merged in the mainline kernel and through this it is already included in the OpenWrt source package. Fortunately, OpenWrt is using compat-wireless which enables us to take advantage of modifications done to the rtl-drivers in newer kernel releases than OpenWrt is using. Ok, long story short solution: we modify the included mac80211-package.</p><p>1. This time I have used kamikaze_8.09<strong>.1</strong>_source.tar.bz2, so if you already used that last time, go into the <em>package</em>-directory and <span class="bbu">remove</span> the <em>rtl-wifi</em>-directory.<br />2. Call <em>make menuconfig</em> and check if the <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> is <span class="bbu">gone</span>.<br />5. Go into the <em>package</em>-directory and remove the <em>mac80211</em>-directory.<br />4. Now copy the <em>mac80211.tar.gz</em>-file (download below!) into the <em>package</em>-directory and unpack it there. A new <em>mac80211</em>-directory should appear.<br />5. Call <em>make menuconfig</em>. There should be a <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> - this time it is the new one. Make sure it is marked with &quot;M&quot;. Save and exit.<br />6. Invoke <em>make</em> and wait for the build process.</p><p>After the build process has finished, have a look inside the <em>bin/packages/armeb</em>-directory: the file you are looking for is <em>kmod-rtl-wifi_2.6.26.8+2008-08-06-ixp4xx-2_armeb.ipk</em> (at least that is the name at my side after all).</p><p>Download mac80211.tar.gz from <strong><a href="http://www.lostmind.de/download/mac80211.tar.gz">here</a></strong>.</p><p>Please consider that <strong>this is NOT tested</strong>! At the moment I have no Realtek wifi stick around. I will be able to test it next friday, but I put this here so you can try <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Good luck and please report.</p><p>Best regards,<br />Mario</p><p>Btw.: &gt; Hallo Lostmind,<br />Is that a typo or are you a German speaker?</p></blockquote></div><p>Hello, I tried to follow your recomendations and I finally has got a seem to be working driver for 8.09.1. At least I can see it thru iwconfig like this:<br />imq0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>imq1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>wmaster0&nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bg&nbsp; ESSID:&quot;OpenWrt&quot;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Managed&nbsp; Frequency:2.412 GHz&nbsp; Access Point: Not-Associated&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx-Power=27 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Retry min limit:7&nbsp; &nbsp;RTS thr:off&nbsp; &nbsp;Fragment thr=2352 B&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:0&nbsp; Signal level:0&nbsp; Noise level:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>br-lan&nbsp; &nbsp; no wireless extensions.</p><p>in dmesg I can see the following lines:<br />usb 2-1: configuration #1 chosen from 1 choice<br />phy0: Selected rate control algorithm &#039;pid&#039;<br />phy0: hwaddr 00:11:6b:1c:2c:bf, RTL8187vB (default) V1 + rtl8225z2</p><br /><p>However, when I tried to enable wifi thru x-wrt web interface, I get the following error:</p><p>Committing wireless ...<br />Waiting for the commit to finish...<br />Reloading wireless ...<br />Configuration file: /var/run/hostapd-wlan0.conf<br />Line 2: invalid/unknown driver &#039;nl80211&#039;<br />1 errors found in configuration file &#039;/var/run/hostapd-wlan0.conf&#039;<br />enable_mac80211(wlan0): Failed to set up wpa for interface wlan0</p><p>and wifi does not work .</p><p>What should I do to make my rtl8187 usb to work correctly as AP under 8.09.1?</p><p>Best Regards, Dmitry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92448">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ttsherpa</div>
					<div class="post-datetime">
						9 Aug 2009, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>i made it working using the trunk not 8.09.1 and the corresponding rtl8187 package, dont forget adding hostapd mini</p>											<p class="post-edited">(Last edited by <strong>ttsherpa</strong> on 9 Aug 2009, 01:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92480">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">rdmitry</div>
					<div class="post-datetime">
						10 Aug 2009, 00:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ttsherpa wrote:</cite><blockquote><p>i made it working using the trunk not 8.09.1 and the corresponding rtl8187 package, dont forget adding hostapd mini</p></blockquote></div><p>I built kamikaze from the latest trunk 17200 and still can&#039;t get my stick working. The build process went well. I only had to use the original mac80211 package, cause the above link doesn&#039;t work for the latest trunk. I&#039;m using wnc0305USB and it perfectly works under MAC OS X 10.5.7 with original driver from realtek as a client and as an ad-hoc and under backtrack as a client. What usb stick do you have and was able to get to work? What trunk version did you use?</p><p>Dmitry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92498">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ttsherpa</div>
					<div class="post-datetime">
						10 Aug 2009, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>I used version 171xx and included kmod-rtl8187 which i&#039;m not sure you did. I don&#039;t have the usb stick here but for sure it was rtl8187 based. You can find several already made packages at <a href="http://downloads.openwrt.org/snapshots/trunk/brcm47xx/packages/kmod-rtl8187_2.6.28.10+2009-06-25-brcm47xx-3_mipsel.ipk">http://downloads.openwrt.org/snapshots/ … mipsel.ipk</a> but I&#039; don&#039;t know what are the differences between them. As you can see Im using broadcom 2.6 on an Asus wl500gpv1 router.</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92564">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">dr.gonzo42</div>
					<div class="post-datetime">
						12 Aug 2009, 11:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lostmind wrote:</cite><blockquote><p>1. This time I have used kamikaze_8.09<strong>.1</strong>_source.tar.bz2, so if you already used that last time, go into the <em>package</em>-directory and <span class="bbu">remove</span> the <em>rtl-wifi</em>-directory.<br />2. Call <em>make menuconfig</em> and check if the <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> is <span class="bbu">gone</span>.<br />5. Go into the <em>package</em>-directory and remove the <em>mac80211</em>-directory.<br />4. Now copy the <em>mac80211.tar.gz</em>-file (download below!) into the <em>package</em>-directory and unpack it there. A new <em>mac80211</em>-directory should appear.<br />5. Call <em>make menuconfig</em>. There should be a <em>kmod-rtl-wifi</em>-entry under <em>Kernel modules -&gt; Wireless Drivers</em> - this time it is the new one. Make sure it is marked with &quot;M&quot;. Save and exit.<br />6. Invoke <em>make</em> and wait for the build process.</p><p>After the build process has finished, have a look inside the <em>bin/packages/armeb</em>-directory: the file you are looking for is <em>kmod-rtl-wifi_2.6.26.8+2008-08-06-ixp4xx-2_armeb.ipk</em> (at least that is the name at my side after all).</p><p>Download mac80211.tar.gz from <strong><a href="http://www.lostmind.de/download/mac80211.tar.gz">here</a></strong>.</p></blockquote></div><p>Great work! Thanks a lot. It seems to be working, I have a wlan0-device and can choose a channel, the bitrate, etc. I must do some precision work to get it running without problems and as access point, but I think this should possible.</p><div class="quotebox"><cite>Lostmind wrote:</cite><blockquote><p>Btw.: &gt; Hallo Lostmind,<br />Is that a typo or are you a German speaker?</p></blockquote></div><p>German speaker and a typo.. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> </p><div class="quotebox"><cite>rdmitry wrote:</cite><blockquote><p>Configuration file: /var/run/hostapd-wlan0.conf<br />Line 2: invalid/unknown driver &#039;nl80211&#039;<br />1 errors found in configuration file &#039;/var/run/hostapd-wlan0.conf&#039;<br />enable_mac80211(wlan0): Failed to set up wpa for interface wlan0</p></blockquote></div><p>I had a similar mistake yesterday evening, I am at work and can not look at my Thin Client but I can tell you how to solve the problem later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92602">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rdmitry</div>
					<div class="post-datetime">
						13 Aug 2009, 10:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ttsherpa wrote:</cite><blockquote><p>I used version 171xx and included kmod-rtl8187 which i&#039;m not sure you did. I don&#039;t have the usb stick here but for sure it was rtl8187 based. You can find several already made packages at <a href="http://downloads.openwrt.org/snapshots/trunk/brcm47xx/packages/kmod-rtl8187_2.6.28.10+2009-06-25-brcm47xx-3_mipsel.ipk">http://downloads.openwrt.org/snapshots/ … mipsel.ipk</a> but I&#039; don&#039;t know what are the differences between them. As you can see Im using broadcom 2.6 on an Asus wl500gpv1 router.</p><p>Regards</p></blockquote></div><p>Hi again, I also used included version of kmod-rtl8187, but I&#039;m trying to make it work on x86 platform. Finally, I&#039;ve found in the internet, that rtl8187 can not work in AP mode. Does anybody know if this is true?</p><p>Dmitry</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100316">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">danny1</div>
					<div class="post-datetime">
						13 Jan 2010, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>Interesting topic, this would make it real cheap to build enterprise level routers, with long range, using for example the gsky or alfa usb adapters out there, i think its RTL8187L they use.</p><p>rdmitry : Its partialy true, it dont think anyone have made it work with hostapd yet, if it is infact the RTL8187L device you have, then drop the mac80211 drivers, there is some patched drivers on the remote exploit dot org site that allow addjusting the tx-power.</p><p>But i know its posible, perhaps it just need the right driver modification, because programs like airbase-ng can create softap&#039;s on this chipset, with injection/monitor mode patches.</p><p>EDIT:</p><p>Did some investigation and :</p><p>1, The patched driver from remote exploit wont work, you can set iwconfig mode master, but it just works in adhoc mode then, and no hostapd support.</p><p>2, There is no ap/master mode support for the mac80211 drivers yet, but here is some intresting reading : <a href="http://article.gmane.org/gmane.linux.kernel.wireless.general/44486">http://article.gmane.org/gmane.linux.ke … eral/44486</a></p><p>3, Using the patched drivers from remote exploit and airbase-ng you can create wpa/wep/opn AP&#039;s, i dont know how well it works though i dont think its useable for a software ap, since its a tool for creating fake acces points mangling probes and such to encourage clients to connect and send handshake/keystream.</p><p>More to come <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>danny1</strong> on 14 Jan 2010, 04:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183325">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">vitaliy_86</div>
					<div class="post-datetime">
						15 Nov 2012, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps this method of solving the firmware embedded in the driver?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>