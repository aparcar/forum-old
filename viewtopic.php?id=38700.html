<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compile errors when compiling SDK (trunk 33188)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p174996">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">alphalt</div>
					<div class="post-datetime">
						15 Aug 2012, 23:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello all,</p><p>I&#039;m struggling with the OpenWRT compilation with SDK and toolchain enabled. I&#039;ve done lots of fresh compilations (~3 hours on my PC) until I&#039;ve found a problem - it&#039;s a SDK compilation. I can choose it in <em>&#039;make menuconfig&#039;</em> or do <em>&#039;make target/sdk/install&#039;</em> I still get same errors. The error is as follows:</p><div class="codebox"><pre><code>cat /home/darius/build/openwrt/trunk/feeds.conf.default \
        &gt;&gt; /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/feeds.conf.default
/home/darius/build/openwrt/trunk/staging_dir/host/bin/sed -i -e &#039;s,^# REVISION:=.*,REVISION:=r33188,g&#039; /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/include/version.mk
find /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2 -name .git | xargs -r rm -rf
find /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2 -name .svn | xargs -r rm -rf
find /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2 -name CVS | xargs -r rm -rf
(cd /home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2; \
        tar cfj /home/darius/build/openwrt/trunk/bin/ar71xx/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2 OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2; \
    )
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/host/share/quilt/compat/getopt: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/etc/modules-boot.d/20-nls-base: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/yes: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/cmp: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/expr: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/tr: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/clear: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/usr/bin/sort: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/sbin/logread: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/sbin/insmod: Cannot open: Permission denied
tar: OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2/staging_dir/target-mips_r2_uClibc-0.9.33.2/root-ar71xx/sbin/init: Cannot open: Permission denied
tar: Exiting with failure status due to previous errors
make[2]: *** [/home/darius/build/openwrt/trunk/bin/ar71xx/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2] Error 2
make[2]: Leaving directory `/home/darius/build/openwrt/trunk/target/sdk&#039;
make[1]: *** [target/sdk/install] Error 2
make[1]: Leaving directory `/home/darius/build/openwrt/trunk&#039;
make: *** [target/sdk/install] Error 2</code></pre></div><p>The problematic line is I think this:<br /></p><div class="codebox"><pre><code>tar cfj /home/darius/build/openwrt/trunk/bin/ar71xx/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2.tar.bz2 OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2;</code></pre></div><p>There is no such path as <em>/home/darius/build/openwrt/trunk/build_dir/target-mips_r2_uClibc-0.9.33.2/OpenWrt-SDK-ar71xx-for-Linux-x86_64-gcc-4.6-linaro_uClibc-0.9.33.2</em> so I think thats why I get <em>permission denied</em> error. I just can&#039;t understand how can I fix this error and successfuly compile SDK. Please help me with some advices.<br />By the way, despite the error, I still get firmware images produced.</p>											<p class="post-edited">(Last edited by <strong>alphalt</strong> on 15 Aug 2012, 23:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175082">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">alphalt</div>
					<div class="post-datetime">
						17 Aug 2012, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I&#039;ve made some investigation and found line in Makefile of SDK which causes problems:<br /></p><div class="codebox"><pre><code>$(TAR) -cf - -C $(TOPDIR) \
        $(foreach exclude,$(EXCLUDE_DIRS),--exclude=&quot;$(exclude)&quot;) \
        --exclude=&quot;staging_dir/$(ARCH)&quot; \
        staging_dir/host staging_dir/target-$(ARCH)$(ARCH_SUFFIX)_$(LIBC)-$(LIBCV)$(if $(CONFIG_arm),_eabi) \
        staging_dir/toolchain-$(ARCH)$(ARCH_SUFFIX)_gcc-$(GCCV)_$(LIBC)-$(LIBCV)$(if $(CONFIG_arm),_eabi) | \
        $(TAR) -xf - -C $(SDK_BUILD_DIR)</code></pre></div><p>This line compress some contents on the fly and then decompress to different folder. And the problem is that after decompression some of the files are 0 bytes size with permissions set to none. I&#039;ve done that command manually and surprisingly everytime different files are set to 0 size and permissions none.<br />Could anyone please do &#039;make target/sdk/install V=99&#039; and post result here. Also its interesting what is tar version in your case. Mine is 1.26. Now I&#039;m really lost, if this is caused by tar or by buildroot. I do not have any other problems when building. Only this one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175214">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alphalt</div>
					<div class="post-datetime">
						18 Aug 2012, 10:37					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve found the problem. It was TAR version 1.26 on my 64-bit machine which was causing the problems. Interesting thing is that there is no problems on 32-bit machine with TAR version 1.26. So my solution was to downgrade TAR to version 1.23 on 64-bit machine. Now everything is working fine.<br />Could anyone please report here the status on 64-bit system with TAR 1.26. Is anyone using that combination ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175216">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						18 Aug 2012, 11:01					</div>
				</div>
				<div class="post-content content">
					<p>Works for me.<br />64bit Ubuntu 12.04 in Virtualbox, tar 1.26<br />A 75 MB sized SDK file gets created with &#039;make target/sdk/install&#039; without any complaints.</p><p>perus@hnvb:/Openwrt/trunk/bin/ar71xx$ uname -a<br />Linux hnvb 3.2.0-29-generic #46-Ubuntu SMP Fri Jul 27 17:03:23 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux<br />perus@hnvb:/Openwrt/trunk/bin/ar71xx$ tar --version<br />tar (GNU tar) 1.26</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175217">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">alphalt</div>
					<div class="post-datetime">
						18 Aug 2012, 11:04					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much for information. Only difference I can see is linux kernel version:<br /><em>darius@hp6715b:~$ uname -a<br />Linux hp6715b 3.2.0-3-amd64 #1 SMP Thu Jun 28 09:07:26 UTC 2012 x86_64 GNU/Linux<br /></em></p><p>I have amd64 revision while yours is generic. Maybe this could be an issue ? It would be nice to hear from other users running amd64.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>