<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 15 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=14.html">14</a></li><li class="pagination-current"><span>15</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=17.html">17</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p185649">
				<div class="post-metadata">
					<div class="post-num">Post #351</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						9 Dec 2012, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>Ah - so the wiki is only suggesting initial settings then. (<a href="http://wiki.openwrt.org/doc/uci/network6">http://wiki.openwrt.org/doc/uci/network6</a>)</p><p>It shows ula_prefix==auto as the appropriate setting for native ipv6, and omits it for all other configurations. I guess it&#039;s safe to assume this can be ignored, unless I decide to actually use private addressing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185657">
				<div class="post-metadata">
					<div class="post-num">Post #352</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						10 Dec 2012, 06:36					</div>
				</div>
				<div class="post-content content">
					<p>Noticed an odd difference between my 3700v1 and 3700v2 after installing r34586 on both. The initial LuCI &quot;status&quot; page is fine on the 3700v1, but on the 3700v2, the local time, uptime, load average and all 4 memory values are empty and simply display &quot;-&quot;. Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185665">
				<div class="post-metadata">
					<div class="post-num">Post #353</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Dec 2012, 08:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tt wrote:</cite><blockquote><p>Noticed an odd difference between my 3700v1 and 3700v2 after installing r34586 on both. The initial LuCI &quot;status&quot; page is fine on the 3700v1, but on the 3700v2, the local time, uptime, load average and all 4 memory values are empty and simply display &quot;-&quot;. Any ideas?</p></blockquote></div><p>Browser cache? Ctrl-F5 to clear it or whatever is correct for your browser. I noticed something similar about 7-10 days ago. Probably related to jow&#039;s changes to Luci .js files at that time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185683">
				<div class="post-metadata">
					<div class="post-num">Post #354</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						10 Dec 2012, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>Right you are, a different machine displays it properly. Cleared the firefox cache and it&#039;s back to normal on both. Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185707">
				<div class="post-metadata">
					<div class="post-num">Post #355</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						10 Dec 2012, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>&lt;question moved as suggested&gt;</p>											<p class="post-edited">(Last edited by <strong>tt</strong> on 10 Dec 2012, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185708">
				<div class="post-metadata">
					<div class="post-num">Post #356</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Dec 2012, 20:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tt wrote:</cite><blockquote><p>I&#039;ve discovered that for my 6to4 interface, the ula_prefix setting needs to be <strong>removed</strong> from /etc/config/network6. Otherwise (at least with default settings) the ula_prefix private address is advertised as Global, and nodes on the network send via it.</p><p>Is this my configuration error, or a bug?</p></blockquote></div><p>You should maybe ask that in the thread dedicated for the support for the new ipv6-support module...<br /><a href="https://forum.openwrt.org/viewtopic.php?id=40853">https://forum.openwrt.org/viewtopic.php?id=40853</a></p><p>It is a brand new module, so the author (CyrusFF) needs more real-life feedback on the various functionalities and defaults.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 10 Dec 2012, 20:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185925">
				<div class="post-metadata">
					<div class="post-num">Post #357</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						13 Dec 2012, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello hnyman,<br />Does your build supports ftp access? I tried unsuccessfully.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185958">
				<div class="post-metadata">
					<div class="post-num">Post #358</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Dec 2012, 22:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Manani wrote:</cite><blockquote><p>Hello hnyman,<br />Does your build supports ftp access? I tried unsuccessfully.</p></blockquote></div><p>Yes, it has a FTP server (vsftpd), but as a security precaution I have disabled using local accounts by default. <br /></p><div class="codebox"><pre><code>--- trunk/feeds/packages/net/vsftpd/files/vsftpd.conf    (revision 34650)
+++ trunk/feeds/packages/net/vsftpd/files/vsftpd.conf    (working copy)
@@ -1,7 +1,7 @@
 background=YES
 listen=YES
 anonymous_enable=NO
-local_enable=YES
+local_enable=NO
 write_enable=YES
 local_umask=022
 check_shell=NO</code></pre></div><p>Revert that option in your system&#039;s vsftpd config file, and the ftp server should accept root login credentials. Change that back to &quot;local_enable=YES&quot;.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 13 Dec 2012, 22:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185965">
				<div class="post-metadata">
					<div class="post-num">Post #359</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						13 Dec 2012, 23:29					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. It&#039;s ok now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186066">
				<div class="post-metadata">
					<div class="post-num">Post #360</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Dec 2012, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>I was able to get WDS mode to run ok with the new ipv6-support modules. The basic advice in wiki is still valid: <a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a></p><p>In router1, the WDS master:<br />/etc/config/wireless:&nbsp; mode is normal ap&#039;, set option &#039;wds&#039; &#039;1&#039; for the existing wifi-iface section (I used the 5Ghz radio1)</p><p>In router2, the WDS slave: <br />/etc/config/dhcp: disable dhcp server (dnsmasq) by adding ignore 1 for LAN interface<br />/etc/config/network: change router&#039;s LAN IP for ipv4, make sure that there is option accept_ra &#039;1&#039;, delete all ipv6 tunnel interface definitions<br />/etc/config/wireless: set option &#039;wds&#039; &#039;1&#039; to the existing wifi-iface section, set mode to &#039;sta&#039; (instead of &#039;ap&#039;)<br />/etc/config/network6: comment out everything with #, no functionality needed in this router</p><p>Those were the only changes needed. My PC was connected to router2 and got ipv4 &amp; ipv6 addresses ok and the automatic routing through router1 to internet worked ok both for ipv4 &amp; ipv6.</p><p>diff output about the key differences in router2 (excluding the deleted tunnel interfaces and commented network6):<br /></p><div class="codebox"><pre><code>--- /mnt/trunk/etc/config/wireless
+++ /etc/config/wireless
@@ -39,8 +39,9 @@
 config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;radio1&#039;
        option &#039;network&#039; &#039;lan&#039;
-       option &#039;mode&#039; &#039;ap&#039;
+       option &#039;mode&#039; &#039;sta&#039;
        option &#039;ssid&#039; &#039;WLANID&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;key&#039; &#039;something&#039;
        option &#039;wps_pushbutton&#039; &#039;1&#039;
+        option &#039;wds&#039; &#039;1&#039;
--- /mnt/trunk/etc/config/network
+++ /etc/config/network
@@ -9,7 +9,7 @@
        option &#039;ifname&#039; &#039;eth0.1&#039;
        option &#039;type&#039; &#039;bridge&#039;
        option &#039;proto&#039; &#039;static&#039;
-       option &#039;ipaddr&#039; &#039;192.168.1.1&#039;
+       option &#039;ipaddr&#039; &#039;192.168.1.2&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option accept_ra &#039;1&#039;

--- /mnt/trunk/etc/config/dhcp
+++ /etc/config/dhcp
@@ -19,6 +19,7 @@
        option &#039;limit&#039; &#039;150&#039;
        option &#039;leasetime&#039; &#039;12h&#039;
        option &#039;force&#039; &#039;1&#039;
+       option &#039;ignore&#039; &#039;1&#039;

 config &#039;dhcp&#039; &#039;wan&#039;
        option &#039;interface&#039; &#039;wan&#039;</code></pre></div><p>EDIT: After ipv6.support configuration options changed in February 2013, the required syntax in /etc/config/network changed a bit, as accept_ra does not work any more. One needs to define a dhcpv6 interface for lan to make it work:<br /></p><div class="codebox"><pre><code>config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.2&#039;
        option netmask &#039;255.255.255.0&#039;
        option gateway &#039;192.168.1.1&#039;
        option dns &#039;192.168.1.1&#039;

config interface lan6
        option proto dhcpv6
        option ifname @lan
        option reqprefix no</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 3 May 2013, 12:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186117">
				<div class="post-metadata">
					<div class="post-num">Post #361</div>
					<div class="post-author">Etique</div>
					<div class="post-datetime">
						15 Dec 2012, 10:37					</div>
				</div>
				<div class="post-content content">
					<p>Hello Hnyman,</p><p>I&#039;m stuck with conntrack-rtsp (package kmod-ipt-nathelper-rtsp). There&#039;s a dependency error on the kernel, and forcing its installation doesn&#039;t make it work.</p><p>I would need to build this pakage against your build (used to do that with arokh&#039;s build), but... here I reach my limits (dunno how to use the buildscripts and *.patch).</p><p>I read through the files and I *assume* I would need to run the buildscript against the proper source revision, but what should be the file structure?</p><p>I would gladly take any piece of advice <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186123">
				<div class="post-metadata">
					<div class="post-num">Post #362</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Dec 2012, 11:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>I would need to build this pakage against your build (used to do that with arokh&#039;s build), but... here I reach my limits (dunno how to use the buildscripts and *.patch).</p><p>I read through the files and I *assume* I would need to run the buildscript against the proper source revision, but what should be the file structure?</p></blockquote></div><p>If you really want that module, I suggest that you build the whole firmware by yourself and modify my config to include that module. It is probably the easiest way.</p><p>If you check the buildscripts.txt file in my firmware archive, it contain all the scripts I use, including a script for re-creating the whole environment in Ubuntu 12.04 x64 environment.</p><p>Check the file: <a href="http://koti.welho.com/hnyman1/Openwrt/trunk-r34672-2012-12-13/WNDR3700-trunk-r34672-2012-12-13-2326-buildscripts.txt">http://koti.welho.com/hnyman1/Openwrt/t … cripts.txt</a><br />It is a text file containing several shell scripts, which are pretty well identified: copyPackages2tmp.sh, createbuildinfo.sh, kernelcompile.sh, mountNcopy.sh, newOpenwrtBuildroot.sh, singlecompile.sh, updateNmake.sh, versionT.sh </p><p>Open that file with a text editor and save the script files.</p><p>Of those scripts, updateNmake.sh and createbuildinfo.sh are used in the actual build process.</p><p>newOpenwrtBuildroot.sh will create the new environment, and it contains the needed patch commands at the end (commented out in the archive, as the patch files&#039; names will change along the version). </p><p>First manually create /Openwrt directory and make sure it is writable by your normal user account. Then run newOpenwrtBuildroot.sh. If needed, edit the patch commands in the end to use the correct version patches. The scripts generated both trunk and Attitude Adjustment envirnoments, as well as a local Luci repository, so it matches my full setup for creating both firmware versions (trunk &amp; Attitude).</p><p>After running that you go into /Openwrt/trunk and copy the file .config.init to .config to create the recipe for my config. After that you just run updateNmake.sh, which will do the actual make process.</p><p>newOpenwrtBuildroot.sh:<br /></p><div class="codebox"><pre><code>#!/bin/sh
#
# newOpenwrtBuildroot.sh
#
# Creates Openwrt build environment, with /Openwrt as the root. Create /Openwrt first manually
# subdirs trunk, attitude branch, local luci sources and dl for downloads
# sets up the svn repositories for trunk, attitude and luci
 
### Prerequisites installed for buildroot and buildscripts (lsdiff needs patchutils)
sudo apt-get install build-essential subversion libncurses5-dev zlib1g-dev gawk gcc-multilib flex git-core gettext
sudo apt-get install patchutils

### download directory
mkdir /Openwrt/dl

### trunk
mkdir /Openwrt/trunk
cd /Openwrt/trunk
ln -s ../dl dl
svn co svn://svn.openwrt.org/openwrt/trunk/ .

### attitude
mkdir /Openwrt/attitude
cd /Openwrt/attitude
ln -s ../dl dl
svn co svn://svn.openwrt.org/openwrt/branches/attitude_adjustment/ .

### luci local source repository
mkdir /Openwrt/luci
cd /Openwrt/luci
svn co http://svn.luci.subsignal.org/luci/ . --depth empty
svn up --set-depth infinity trunk 
svn up --set-depth empty branches
svn up --set-depth infinity branches/luci-0.11

### patch sources (main Openwrt, packages feed, local Luci)
### patch main Openwrt first to set feeds correctly, then update packages feed and patch it
cd /Openwrt
patch -p0 -i WNDR3700-trunk-r34636-2012-12-11-1937-openwrt.patch
/Openwrt/trunk/scripts/feeds update -a
patch -p0 -i WNDR3700-trunk-r34636-2012-12-11-1937-packages.patch
patch -p0 -i WNDR3700-trunk-r34636-2012-12-11-1937-luci-trunk.patch</code></pre></div><p>EDIT: alternatively, if you only want that module and you already have a build environment ready, you could try just taking my .config.init, copy it to .config, run make menuconfig to blow it out and add that one kmod you want to the config. Then a normal make should create a firmware (that you do not need) and the packages directory with the kmod you could then install. There should be no strange kernel config options and the build scripts do nothing strange for the actual make process.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Dec 2012, 12:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186129">
				<div class="post-metadata">
					<div class="post-num">Post #363</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Dec 2012, 13:51					</div>
				</div>
				<div class="post-content content">
					<p>I was going to compile an add-on&nbsp; .ipk for you, but looks like the changes between 34677-34685 have broken compilation for me :-(&nbsp; &nbsp; (I have got errors related to ppp etc.)</p><p>EDIT:<br /><a href="https://dev.openwrt.org/ticket/12620">https://dev.openwrt.org/ticket/12620</a><br />Fixed by r34715.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 16 Dec 2012, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186131">
				<div class="post-metadata">
					<div class="post-num">Post #364</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						15 Dec 2012, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>I notice that some luci settings are not included in the file <em>/etc/config/upnpd</em>.<br />This is perhaps why the miniupnpd is disabled after each sysupgrade.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186132">
				<div class="post-metadata">
					<div class="post-num">Post #365</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Dec 2012, 14:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Manani wrote:</cite><blockquote><p>I notice that some luci settings are not included in the file <em>/etc/config/upnpd</em>.<br />This is perhaps why the miniupnpd is disabled after each sysupgrade.</p></blockquote></div><p>I have not modified that package. It is just included in the original form. If you have identified something wrong with it, please report the details so that it can be fixed in the repository.</p><p>EDIT: <br />Read also this: <a href="https://forum.openwrt.org/viewtopic.php?pid=169922#p169922">https://forum.openwrt.org/viewtopic.php … 22#p169922</a><br />Based on jow&#039;s reply, the behaviour is intentional.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Dec 2012, 14:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186133">
				<div class="post-metadata">
					<div class="post-num">Post #366</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Dec 2012, 15:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Etique wrote:</cite><blockquote><p>I&#039;m stuck with conntrack-rtsp (package kmod-ipt-nathelper-rtsp). There&#039;s a dependency error on the kernel, and forcing its installation doesn&#039;t make it work.</p></blockquote></div><p>I compiled that extra package along r34676. Install the firmware, and then download and install the extra package.<br /><a href="http://koti.welho.com/hnyman1/Openwrt/trunk-r34676-2012-12-15/">http://koti.welho.com/hnyman1/Openwrt/t … 012-12-15/</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Dec 2012, 15:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186137">
				<div class="post-metadata">
					<div class="post-num">Post #367</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						15 Dec 2012, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>I read this on the <a href="http://miniupnp.free.fr/">miniupnp site</a>: The daemon is now also available for linux 2.4.x and 2.6.x <strong>using netfilter</strong>. It is possible to make it run on router devices running OpenWRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186299">
				<div class="post-metadata">
					<div class="post-num">Post #368</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Dec 2012, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>IPv6 functionality seems to be broken for me with r34739. Worked ok with yesterday&#039;s r34715.<br />Details at: <a href="https://forum.openwrt.org/viewtopic.php?pid=186296#p186296">https://forum.openwrt.org/viewtopic.php … 96#p186296</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186412">
				<div class="post-metadata">
					<div class="post-num">Post #369</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						18 Dec 2012, 22:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>IPv6 functionality seems to be broken for me with r34739. Worked ok with yesterday&#039;s r34715.<br />Details at: <a href="https://forum.openwrt.org/viewtopic.php?pid=186296#p186296">https://forum.openwrt.org/viewtopic.php … 96#p186296</a></p></blockquote></div><p>Fixed by r34746 (bug in libubox library), so r34769 build is again ok.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186647">
				<div class="post-metadata">
					<div class="post-num">Post #370</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						21 Dec 2012, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Looks like the trunk build r34807 from yesterday contained a buggy version of the sysupgrade script that fails to upgrade to the next firwmare version. Router gets left in half-disabled state needing a reboot. That bug has been fixed in today&#039;s version r34815. </p><p>If you have already installed the r34807 version, read the explanations below and manually edit the file /lib/upgrade/common.sh in the live Openwrt system. The fix is about renaming a function and the call to it.</p><p>Error caused by 34794: <a href="https://dev.openwrt.org/changeset/34794">https://dev.openwrt.org/changeset/34794</a><br />Fix in 34815: <a href="https://dev.openwrt.org/changeset/34815">https://dev.openwrt.org/changeset/34815</a><br />Ticket about the bug: <a href="https://dev.openwrt.org/ticket/12652">https://dev.openwrt.org/ticket/12652</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 21 Dec 2012, 15:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186696">
				<div class="post-metadata">
					<div class="post-num">Post #371</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						21 Dec 2012, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>I bumped my buildhost to Ubuntu 12.10 and utilized that change as an opportunity to polish the scripts to re-create my Openwrt build environment. The current script enables me to do that in a few minutes.</p><p>As a part of the firmware creation/documentation process, my buildscripts also generate a self-extracting archive script file of all the other scripts. Downloading and running that script generates the other scripts, one of which can recreate the whole buildroot svn structure etc. After that one has just to apply the patches included in the firmware directory and the buildroot is ready.</p><p>I edited the second message in this thread to contain step-by-step advice on this:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=127011#p127011">https://forum.openwrt.org/viewtopic.php … 11#p127011</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186700">
				<div class="post-metadata">
					<div class="post-num">Post #372</div>
					<div class="post-author">Manani</div>
					<div class="post-datetime">
						21 Dec 2012, 23:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>Looks like the trunk build r34807 from yesterday contained a buggy version of the sysupgrade script that fails to upgrade to the next firwmare version. Router gets left in half-disabled state needing a reboot. That bug has been fixed in today&#039;s version r34815. </p><p>If you have already installed the r34807 version, read the explanations below and manually edit the file /lib/upgrade/common.sh in the live Openwrt system. The fix is about renaming a function and the call to it.</p><p>Error caused by 34794: <a href="https://dev.openwrt.org/changeset/34794">https://dev.openwrt.org/changeset/34794</a><br />Fix in 34815: <a href="https://dev.openwrt.org/changeset/34815">https://dev.openwrt.org/changeset/34815</a><br />Ticket about the bug: <a href="https://dev.openwrt.org/ticket/12652">https://dev.openwrt.org/ticket/12652</a></p></blockquote></div><p>Thanks, upgrade ok for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186706">
				<div class="post-metadata">
					<div class="post-num">Post #373</div>
					<div class="post-author">johnthomas00</div>
					<div class="post-datetime">
						22 Dec 2012, 02:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>I bumped my buildhost to Ubuntu 12.10 and utilized that change as an opportunity to polish the scripts to<br />&lt;snip&gt;<br />I edited the second message in this thread to contain step-by-step advice on this:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=127011#p127011">https://forum.openwrt.org/viewtopic.php … 11#p127011</a></p></blockquote></div><p>AWESOME!&nbsp; Thank you!&nbsp; I was starting to do this out on my own, but appreciate the recipe.</p><p>Question:&nbsp; When I run updateNmake.sh the first time, I get a grey screen asking me to select the make and model (I will get screen shots and specifics if you want, but I suspect you know what I mean), which I answer (guestimate).&nbsp; Is that question screen normal?&nbsp; I am worried I did something wrong.</p><p>Someone earlier asked about build timing.&nbsp; My results were much faster.&nbsp; I added &quot;time (&quot; to the fourth line and &quot;)&quot; to the last line of updateNmake.sh.&nbsp; The results were as follows on a first clean build as instructed by hnyman.<br />real&nbsp; &nbsp; 36m54.731s<br />user&nbsp; &nbsp; 83m5.696s<br />sys&nbsp; &nbsp; &nbsp;8m17.903s</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186720">
				<div class="post-metadata">
					<div class="post-num">Post #374</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Dec 2012, 10:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johnthomas00 wrote:</cite><blockquote><p>Question:&nbsp; When I run updateNmake.sh the first time, I get a grey screen asking me to select the make and model ...&nbsp; Is that question screen normal?</p></blockquote></div><p>No, but it will happen if there is no existing .config. </p><p>To get everything right, it is probably easiest to just enter make menuconfig after updating &amp; installing the feeds first time. That should initialize the various config things. Save the config even though you are not even doing any changes. </p><p>After that, copy the &quot;.config.init&quot; to &quot;.config&quot;. That file contains all my package/option selections. Either &quot;make menuconfig&quot; or &quot;make defconfig&quot; will then explode it to the full size by filling in all the defaults &amp; non-selected package lines. That .config can then be modified normally with make menuconfig, if I want to test something. </p><p>updateNmake.sh includes a call to &quot;make defconfig&quot; to straighten up the possible new dependencies after the source update.</p><p>I usually use the same .config for a week and then&nbsp; initialize .config from the permanent .config.init to cleanup a bit. That will help to remove unneeded modules (e.g. due to removed dependencies).</p><p>----<br />Regarding build times, in a Windows 7 x64 running Virtualbox Ubuntu 12.04 x64 (with 2 CPU cores allocated to Ubuntu), the complete rebuild after a make dirclean (building tools, toolchain and firmware) takes maybe slightly over an hour. Building tools takes maybe 10 minutes, toolchain takes maybe 30-40 minutes and the firmware maybe 25 mins.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 22 Dec 2012, 10:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186972">
				<div class="post-metadata">
					<div class="post-num">Post #375</div>
					<div class="post-author">Tacoos</div>
					<div class="post-datetime">
						25 Dec 2012, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m having an issue with the usb on my wndr3700v2 and the attidude builts.<br />Whenever i connect a USB drive the system reboots and doesn&#039;t seem to come up completely. The router then refuses all network access and the power led starts blinking.<br />Wired clients still get an ip adress, but no access to the network or router interface; wireless clients can see SSID&#039;s but get no This happens with a 1 Tb Buffalo usb drive that has 3 partitions: a 256Mb ext4 fs primary, a 256&nbsp; Mb linux swap and the rest being a ext4 fs partition.<br />It also happens when i plug in a 16 Gb adata pen drive with ext2 fs or fat32<br />Is there something wrong in the usb config maybe?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 15 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=14.html">14</a></li><li class="pagination-current"><span>15</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=17.html">17</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>