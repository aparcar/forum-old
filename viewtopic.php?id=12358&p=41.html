<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 41 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=39.html">39</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=40.html">40</a></li><li class="pagination-current"><span>41</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=42.html">42</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=43.html">43</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p130607">
				<div class="post-metadata">
					<div class="post-num">Post #1001</div>
					<div class="post-author">mrk</div>
					<div class="post-datetime">
						13 Mar 2011, 01:27					</div>
				</div>
				<div class="post-content content">
					<p>With changeset <a href="https://dev.openwrt.org/changeset/25620">#25620</a> the kernel watchdog driver for marvell orion has been added.</p><p>kmod-wdt-orion can be found in Kernel modules/Other modules.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130609">
				<div class="post-metadata">
					<div class="post-num">Post #1002</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						13 Mar 2011, 03:43					</div>
				</div>
				<div class="post-content content">
					<p>yea, seems to load without problems <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> but i dunno how to configure it ... and what exactly this module do... i get in dmesg :</p><div class="codebox"><pre><code>Orion Watchdog Timer: Initial timeout 25 sec</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130610">
				<div class="post-metadata">
					<div class="post-num">Post #1003</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						13 Mar 2011, 04:24					</div>
				</div>
				<div class="post-content content">
					<p>If you don&#039;t &quot;kick the dog&quot; between 25 seconds the dog reboot the router. Only happens when already hung.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130611">
				<div class="post-metadata">
					<div class="post-num">Post #1004</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						13 Mar 2011, 04:49					</div>
				</div>
				<div class="post-content content">
					<p>nice, tx for the info <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> updated my release (r26044) : <a href="http://tanguy.wdscript.fr/?q=wnr854t">http://tanguy.wdscript.fr/?q=wnr854t</a></p><p>made as module to test it... i will add it as default in Makefile</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130903">
				<div class="post-metadata">
					<div class="post-num">Post #1005</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						16 Mar 2011, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>Looking at <a href="https://dev.openwrt.org/ticket/8325">#8325</a>, there is <a href="http://patchwork.ozlabs.org/patch/16578/">a patch</a> that mirror software bridge into hardware bridge: Faster switch speeds, CPU offload.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131006">
				<div class="post-metadata">
					<div class="post-num">Post #1006</div>
					<div class="post-author">mrk</div>
					<div class="post-datetime">
						18 Mar 2011, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>@Nilfred Does it work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131016">
				<div class="post-metadata">
					<div class="post-num">Post #1007</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						18 Mar 2011, 05:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mrk wrote:</cite><blockquote><p>@Nilfred Does it work?</p></blockquote></div><p>Short answer: No. Long answer:<br /></p><div class="quotebox"><cite>opkg install kmod-mvswitch wrote:</cite><blockquote><p>Installing kmod-mvswitch (2.6.37.1-1) to root...<br />Downloading http:// ... packages/kmod-mvswitch_2.6.37.1-1_orion.ipk.<br />Collected errors:<br /> * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-mvswitch:<br /> *&nbsp; &nbsp; &nbsp; kmod-libphy * <br /> * opkg_install_cmd: Cannot install package kmod-mvswitch.</p></blockquote></div><p>There is no spoon.</p><p>I move my focus to mwl8k AP (hack against 8366 instead of 8363). Will come back to this later, as some pieces are missing, but it should work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131019">
				<div class="post-metadata">
					<div class="post-num">Post #1008</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						18 Mar 2011, 06:09					</div>
				</div>
				<div class="post-content content">
					<p>you can try to untargz the package... you will have the module (data) and install script (control)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131020">
				<div class="post-metadata">
					<div class="post-num">Post #1009</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						18 Mar 2011, 06:25					</div>
				</div>
				<div class="post-content content">
					<p>I mislead, these aren&#039;t needed, so I modified the patch to work against current trunk r26185 as follow:</p><p>cd ~/build/openwrt/trunk<br />svn up -r 26185<br />cd feeds/packages<br />svn up -r 26185<br />cd ~/build/openwrt/trunk<br />make menuconfig<br />make world<br /><strong>cd build_dir/linux-orion_generic/linux-2.6.37.3<br />patch -p1 &lt; RFC-hardware-bridging-support-for-DSA-switches.patch</strong><br /></p><div class="codebox"><pre><code>--- a/include/linux/netdevice.h
+++ b/include/linux/netdevice.h
@@ -739,6 +739,12 @@ struct net_device_ops {
                              struct rtnl_link_stats64 *storage);
     struct net_device_stats* (*ndo_get_stats)(struct net_device *dev);
 
+    void            (*ndo_bridge_join)(struct net_device *dev,
+                           void *bridge);
+    void            (*ndo_bridge_set_stp_state)(struct net_device *dev,
+                            int state);
+    void            (*ndo_bridge_leave)(struct net_device *dev);
+
     void            (*ndo_vlan_rx_register)(struct net_device *dev,
                                 struct vlan_group *grp);
     void            (*ndo_vlan_rx_add_vid)(struct net_device *dev,
--- a/net/bridge/br_if.c
+++ b/net/bridge/br_if.c
@@ -138,6 +138,9 @@ static void del_nbp(struct net_bridge_po
     br_stp_disable_port(p);
     spin_unlock_bh(&amp;br-&gt;lock);
 
+    if (dev-&gt;netdev_ops-&gt;ndo_bridge_leave != NULL)
+        dev-&gt;netdev_ops-&gt;ndo_bridge_leave(dev);
+
     br_ifinfo_notify(RTM_DELLINK, p);
 
     br_fdb_delete_by_port(br, p, 1);
@@ -443,6 +446,9 @@ int br_add_if(struct net_bridge *br, str
     br_stp_recalculate_bridge_id(br);
     br_features_recompute(br);
 
+    if (dev-&gt;netdev_ops-&gt;ndo_bridge_join != NULL)
+        dev-&gt;netdev_ops-&gt;ndo_bridge_join(dev, (void *)br);
+
     if ((dev-&gt;flags &amp; IFF_UP) &amp;&amp; netif_carrier_ok(dev) &amp;&amp;
         (br-&gt;dev-&gt;flags &amp; IFF_UP))
         br_stp_enable_port(p);
--- a/net/bridge/br_stp.c
+++ b/net/bridge/br_stp.c
@@ -34,6 +34,8 @@ void br_log_state(const struct net_bridg
     br_info(p-&gt;br, &quot;port %u(%s) entering %s state\n&quot;,
         (unsigned) p-&gt;port_no, p-&gt;dev-&gt;name,
         br_port_state_names[p-&gt;state]);
+    if (p-&gt;dev-&gt;netdev_ops-&gt;ndo_bridge_set_stp_state != NULL)
+        p-&gt;dev-&gt;netdev_ops-&gt;ndo_bridge_set_stp_state(p-&gt;dev, p-&gt;state);
 }
 
 /* called under bridge lock */
--- a/net/bridge/br_stp_if.c
+++ b/net/bridge/br_stp_if.c
@@ -94,11 +94,10 @@ void br_stp_disable_port(struct net_brid
     struct net_bridge *br = p-&gt;br;
     int wasroot;
 
-    br_log_state(p);
-
     wasroot = br_is_root_bridge(br);
     br_become_designated_port(p);
     p-&gt;state = BR_STATE_DISABLED;
+    br_log_state(p);
     p-&gt;topology_change_ack = 0;
     p-&gt;config_pending = 0;
 
--- a/net/dsa/dsa_priv.h
+++ b/net/dsa/dsa_priv.h
@@ -155,6 +155,15 @@ struct dsa_switch_driver {
     void    (*get_ethtool_stats)(struct dsa_switch *ds,
                      int port, uint64_t *data);
     int    (*get_sset_count)(struct dsa_switch *ds);
+
+    /*
+     * Hardware bridging.
+     */
+    void    (*bridge_join)(struct dsa_switch *ds, int port,
+                   void *bridge);
+    void    (*bridge_set_stp_state)(struct dsa_switch *ds, int port,
+                    int state);
+    void    (*bridge_leave)(struct dsa_switch *ds, int port);
 };
 
 /* dsa.c */
--- a/net/dsa/mv88e6123_61_65.c
+++ b/net/dsa/mv88e6123_61_65.c
@@ -8,6 +8,7 @@
  * (at your option) any later version.
  */
 
+#include &lt;linux/if_bridge.h&gt;
 #include &lt;linux/list.h&gt;
 #include &lt;linux/netdevice.h&gt;
 #include &lt;linux/phy.h&gt;
@@ -232,10 +233,9 @@ static int mv88e6123_61_65_setup_port(st
     REG_WRITE(addr, 0x04, val);
 
     /*
-     * Port Control 1: disable trunking.  Also, if this is the
-     * CPU port, enable learn messages to be sent to this port.
+     * Port Control 1: disable trunking.
      */
-    REG_WRITE(addr, 0x05, dsa_is_cpu_port(ds, p) ? 0x8000 : 0x0000);
+    REG_WRITE(addr, 0x05, 0x0000);
 
     /*
      * Port based VLAN map: give each port its own address
@@ -316,6 +316,8 @@ static int mv88e6123_61_65_setup_port(st
     return 0;
 }
 
+static void mv88e6123_61_65_hw_bridge_sync_work(struct work_struct *ugly);
+
 static int mv88e6123_61_65_setup(struct dsa_switch *ds)
 {
     struct mv88e6xxx_priv_state *ps = (void *)(ds + 1);
@@ -324,6 +326,8 @@ static int mv88e6123_61_65_setup(struct 
 
     mutex_init(&amp;ps-&gt;smi_mutex);
     mutex_init(&amp;ps-&gt;stats_mutex);
+    spin_lock_init(&amp;ps-&gt;hw_bridge_state);
+    INIT_WORK(&amp;ps-&gt;hw_bridge_work, mv88e6123_61_65_hw_bridge_sync_work);
 
     ret = mv88e6123_61_65_switch_reset(ds);
     if (ret &lt; 0)
@@ -339,6 +343,10 @@ static int mv88e6123_61_65_setup(struct 
         ret = mv88e6123_61_65_setup_port(ds, i);
         if (ret &lt; 0)
             return ret;
+
+        // @@@
+        ps-&gt;fid[i] = i;
+        ps-&gt;stp_state[i] = 3;
     }
 
     return 0;
@@ -419,6 +427,159 @@ static int mv88e6123_61_65_get_sset_coun
     return ARRAY_SIZE(mv88e6123_61_65_hw_stats);
 }
 
+static void mv88e6123_61_65_hw_bridge_sync_work(struct work_struct *ugly)
+{
+    struct mv88e6xxx_priv_state *ps;
+    struct dsa_switch *ds;
+    int i;
+
+    ps = container_of(ugly, struct mv88e6xxx_priv_state, hw_bridge_work);
+    ds = ((struct dsa_switch *)ps) - 1;
+
+    spin_lock(&amp;ps-&gt;hw_bridge_state);
+    for (i = 0; i &lt; MV88E6XXX_MAX_PORTS; i++) {
+        if (ps-&gt;fid_dirty[i]) {
+            int reg;
+            int j;
+
+            reg = (ps-&gt;fid[i] &lt;&lt; 12) | (1 &lt;&lt; ds-&gt;cpu_port);
+            ps-&gt;fid_dirty[i] = 0;
+
+            for (j = 0; j &lt; MV88E6XXX_MAX_PORTS; j++) {
+                if (i != j &amp;&amp; ps-&gt;bridge[i] != NULL &amp;&amp;
+                    ps-&gt;bridge[i] == ps-&gt;bridge[j]) {
+                    reg |= 1 &lt;&lt; j;
+                }
+            }
+
+            spin_unlock(&amp;ps-&gt;hw_bridge_state);
+            mv88e6xxx_reg_write(ds, REG_PORT(i), 6, reg);
+            spin_lock(&amp;ps-&gt;hw_bridge_state);
+        }
+
+        if (ps-&gt;stp_state_dirty[i]) {
+            int new_state;
+            int reg;
+
+            new_state = ps-&gt;stp_state[i];
+            ps-&gt;stp_state_dirty[i] = 0;
+            spin_unlock(&amp;ps-&gt;hw_bridge_state);
+            reg = mv88e6xxx_reg_read(ds, REG_PORT(i), 4);
+            if (reg &gt;= 0) {
+                reg &amp;= ~0x0003;
+                reg |= new_state;
+                mv88e6xxx_reg_write(ds, REG_PORT(i), 4, reg);
+            }
+            spin_lock(&amp;ps-&gt;hw_bridge_state);
+        }
+    }
+    spin_unlock(&amp;ps-&gt;hw_bridge_state);
+}
+
+static void
+set_stp_state(struct dsa_switch *ds, int port, int state)
+{
+    struct mv88e6xxx_priv_state *ps = (void *)(ds + 1);
+    int hw_state = 0;
+
+    switch (state) {
+    case BR_STATE_DISABLED:
+        hw_state = 0;
+        break;
+    case BR_STATE_BLOCKING:
+    case BR_STATE_LISTENING:
+        hw_state = 1;
+        break;
+    case BR_STATE_LEARNING:
+        hw_state = 2;
+        break;
+    case BR_STATE_FORWARDING:
+        hw_state = 3;
+        break;
+    default:
+        BUG();
+    }
+
+    if (ps-&gt;stp_state[port] != hw_state) {
+        ps-&gt;stp_state_dirty[port] = 1;
+        ps-&gt;stp_state[port] = hw_state;
+    }
+}
+
+static void
+mv88e6123_61_65_bridge_join(struct dsa_switch *ds, int port, void *bridge)
+{
+    struct mv88e6xxx_priv_state *ps = (void *)(ds + 1);
+    int fid;
+    int i;
+
+    spin_lock(&amp;ps-&gt;hw_bridge_state);
+
+    fid = 65536;
+    for (i = 0; i &lt; MV88E6XXX_MAX_PORTS; i++) {
+        if (ps-&gt;bridge[i] == bridge) {
+            if (ps-&gt;fid[i] &lt; fid)
+                fid = ps-&gt;fid[i];
+            ps-&gt;fid_dirty[i] = 1;
+        }
+    }
+
+    ps-&gt;bridge[port] = bridge;
+
+    ps-&gt;fid_dirty[port] = 1;
+    if (fid != 65536)
+        ps-&gt;fid[port] = fid;
+
+    set_stp_state(ds, port, BR_STATE_DISABLED);
+
+    spin_unlock(&amp;ps-&gt;hw_bridge_state);
+
+    schedule_work(&amp;ps-&gt;hw_bridge_work);
+}
+
+static void
+mv88e6123_61_65_bridge_set_stp_state(struct dsa_switch *ds, int port, int state)
+{
+    struct mv88e6xxx_priv_state *ps = (void *)(ds + 1);
+
+    spin_lock(&amp;ps-&gt;hw_bridge_state);
+    set_stp_state(ds, port, state);
+    spin_unlock(&amp;ps-&gt;hw_bridge_state);
+
+    schedule_work(&amp;ps-&gt;hw_bridge_work);
+}
+
+static void mv88e6123_61_65_bridge_leave(struct dsa_switch *ds, int port)
+{
+    struct mv88e6xxx_priv_state *ps = (void *)(ds + 1);
+    u16 free_fids;
+    int i;
+    int fid;
+
+    spin_lock(&amp;ps-&gt;hw_bridge_state);
+
+    free_fids = 0xffff;
+    for (i = 0; i &lt; MV88E6XXX_MAX_PORTS; i++) {
+        if (i == ds-&gt;cpu_port || ds-&gt;valid_port_mask &amp; (1 &lt;&lt; i)) {
+            if (ps-&gt;bridge[i] == ps-&gt;bridge[port])
+                ps-&gt;fid_dirty[i] = 1;
+            if (i != port)
+                free_fids &amp;= ~(1 &lt;&lt; ps-&gt;fid[i]);
+        }
+    }
+
+    fid = ffs(free_fids) - 1;
+
+    ps-&gt;fid[port] = fid;
+    ps-&gt;bridge[port] = NULL;
+
+    set_stp_state(ds, port, BR_STATE_FORWARDING);
+
+    spin_unlock(&amp;ps-&gt;hw_bridge_state);
+
+    schedule_work(&amp;ps-&gt;hw_bridge_work);
+}
+
 static struct dsa_switch_driver mv88e6123_61_65_switch_driver = {
     .tag_protocol        = cpu_to_be16(ETH_P_EDSA),
     .priv_size        = sizeof(struct mv88e6xxx_priv_state),
@@ -431,6 +592,9 @@ static struct dsa_switch_driver mv88e612
     .get_strings        = mv88e6123_61_65_get_strings,
     .get_ethtool_stats    = mv88e6123_61_65_get_ethtool_stats,
     .get_sset_count        = mv88e6123_61_65_get_sset_count,
+    .bridge_join        = mv88e6123_61_65_bridge_join,
+    .bridge_set_stp_state    = mv88e6123_61_65_bridge_set_stp_state,
+    .bridge_leave        = mv88e6123_61_65_bridge_leave,
 };
 
 static int __init mv88e6123_61_65_init(void)
--- a/net/dsa/mv88e6xxx.h
+++ b/net/dsa/mv88e6xxx.h
@@ -15,6 +15,8 @@
 #define REG_GLOBAL        0x1b
 #define REG_GLOBAL2        0x1c
 
+#define MV88E6XXX_MAX_PORTS    11
+
 struct mv88e6xxx_priv_state {
     /*
      * When using multi-chip addressing, this mutex protects
@@ -39,6 +41,17 @@ struct mv88e6xxx_priv_state {
      * Hold this mutex over snapshot + dump sequences.
      */
     struct mutex    stats_mutex;
+
+    /*
+     * Hardware bridging state.
+     */
+    spinlock_t    hw_bridge_state;
+    struct work_struct    hw_bridge_work;
+    void        *bridge[MV88E6XXX_MAX_PORTS];
+    int        fid_dirty[MV88E6XXX_MAX_PORTS];
+    int        fid[MV88E6XXX_MAX_PORTS];
+    int        stp_state_dirty[MV88E6XXX_MAX_PORTS];
+    int        stp_state[MV88E6XXX_MAX_PORTS];
 };
 
 struct mv88e6xxx_hw_stat {
--- a/net/dsa/slave.c
+++ b/net/dsa/slave.c
@@ -171,6 +171,33 @@ static int dsa_slave_ioctl(struct net_de
     return -EOPNOTSUPP;
 }
 
+static void dsa_bridge_join(struct net_device *dev, void *bridge)
+{
+    struct dsa_slave_priv *p = netdev_priv(dev);
+    struct dsa_switch *ds = p-&gt;parent;
+
+    if (ds-&gt;drv-&gt;bridge_join != NULL)
+        ds-&gt;drv-&gt;bridge_join(ds, p-&gt;port, bridge);
+}
+
+static void dsa_bridge_set_stp_state(struct net_device *dev, int state)
+{
+    struct dsa_slave_priv *p = netdev_priv(dev);
+    struct dsa_switch *ds = p-&gt;parent;
+
+    if (ds-&gt;drv-&gt;bridge_set_stp_state != NULL)
+        ds-&gt;drv-&gt;bridge_set_stp_state(ds, p-&gt;port, state);
+}
+
+static void dsa_bridge_leave(struct net_device *dev)
+{
+    struct dsa_slave_priv *p = netdev_priv(dev);
+    struct dsa_switch *ds = p-&gt;parent;
+
+    if (ds-&gt;drv-&gt;bridge_leave != NULL)
+        ds-&gt;drv-&gt;bridge_leave(ds, p-&gt;port);
+}
+
 
 /* ethtool operations *******************************************************/
 static int
@@ -305,6 +332,9 @@ static const struct net_device_ops dsa_n
     .ndo_set_multicast_list = dsa_slave_set_rx_mode,
     .ndo_set_mac_address    = dsa_slave_set_mac_address,
     .ndo_do_ioctl        = dsa_slave_ioctl,
+    .ndo_bridge_join    = dsa_bridge_join,
+    .ndo_bridge_set_stp_state    = dsa_bridge_set_stp_state,
+    .ndo_bridge_leave    = dsa_bridge_leave,
 };
 #endif
 #ifdef CONFIG_NET_DSA_TAG_EDSA</code></pre></div><p>cd ~/build/openwrt/trunk<br />make V=99 target/install</p><p>The firmware start just as normal, uptime 07:53:20. How do I test the change? Which standard speed test?<br />Could someone double check if my code changes are OK? Just in case.</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 18 Mar 2011, 13:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131271">
				<div class="post-metadata">
					<div class="post-num">Post #1010</div>
					<div class="post-author">qhlive</div>
					<div class="post-datetime">
						21 Mar 2011, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />I have the router wrt350nv2. My router is working with the backfire 10.03. This firmware does not have the functionality macfilter.</p><p>How can I install macfilter?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132551">
				<div class="post-metadata">
					<div class="post-num">Post #1011</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						9 Apr 2011, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>@<strong>mrk</strong>: It works, I tested against r26185 and now against r26358, 2.6.37.4. Test You too, please:<br /><a href="http://www.mediafire.com/file/6dfsdlz89r8ds3f/RFC-hardware-bridging-support-for-DSA-switches.patch">RFC-hardware-bridging-support-for-DSA-switches.patch</a></p><p>@<strong>buytenh</strong>: It&#039;s your baby refreshed to 2.6.37.4: I would like if you can check code changes from your <a href="http://patchwork.ozlabs.org/patch/16578/">original patch</a> are OK to you.</p><p>@all: kmod-crypto-mv-cesa has support for hmac and sha1 from some time ago. To enable these too:<br /></p><div class="quotebox"><cite>make kernel_menuconfig wrote:</cite><blockquote><p>Cryptographic API&nbsp; ---&gt;<br />SHA1 digest algorithm<br />MD5 digest algorithm<br />HMAC support</p></blockquote></div><p>On your way:<br /></p><div class="quotebox"><cite>make kernel_menuconfig wrote:</cite><blockquote><p>Device Divers -&gt; Real Time Clock</p></blockquote></div><p>Mere cosmetic to:<br /></p><div class="quotebox"><cite>dmesg wrote:</cite><blockquote><p>drivers/rtc/hctosys.c: unable to open rtc device (rtc0)</p></blockquote></div><p>If You tempted to touch something else and all goes bad, use svn revert:<br /></p><div class="quotebox"><blockquote><p>cd target/linux/&lt;arch&gt;<br />svn revert config-2.6.37</p></blockquote></div><p>The XOR engine is also there, will make the compiler happy if I enable any raid, but I didn&#039;t. Should I?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132602">
				<div class="post-metadata">
					<div class="post-num">Post #1012</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						9 Apr 2011, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>the WNR854T SoC doesnt have MVCESA features, the wrt350nv2 has it, its not exactly the same SoC</p>											<p class="post-edited">(Last edited by <strong>Tanguy</strong> on 9 Apr 2011, 22:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132662">
				<div class="post-metadata">
					<div class="post-num">Post #1013</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						11 Apr 2011, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>I doubled my old <a href="http://wiki.openwrt.org/inbox/benchmark.openssl#old.benchmark.table">AES score</a> compiling <strong>libopenssl</strong> with hardware acceleration (<a href="http://wiki.openwrt.org/inbox/benchmark.openssl#enable.hardware.acceleration">same</a> and <a href="http://wiki.openwrt.org/doc/hardware/cryptographic.hardware.accelerators#soekris.vpn1411">here</a>)<br />So I think mv-cesa is there, despite what You say.</p><p>There are no ID traces of CESA in <strong>lsmod</strong> nor <strong>cat /proc/crypto</strong>. Are another way to probe it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132663">
				<div class="post-metadata">
					<div class="post-num">Post #1014</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						11 Apr 2011, 03:46					</div>
				</div>
				<div class="post-content content">
					<p>oh... weird, ive read that in marvell kernel sources, but maybe some algorythms are optimized by other ARM features ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132664">
				<div class="post-metadata">
					<div class="post-num">Post #1015</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						11 Apr 2011, 05:21					</div>
				</div>
				<div class="post-content content">
					<p>Ive made some tests with <a href="http://tanguy.tk/wnr854t/">my build, r26588</a> with openssl crypto acceleration selected :<br />My build is different from trunk, ive selected &quot;armv5te&quot; instead of default &quot;armv5t&quot; for kernel and all tools</p><p>only kmod-crypto-hash :<br />| 1.0.0d |&nbsp; 21976010 |&nbsp; 7905690 |&nbsp; 5491800 |&nbsp; 2373350 |&nbsp; 3337420 |&nbsp; 1188390 |&nbsp; 5577360 |&nbsp; 4867940 |&nbsp; 4359760 |&nbsp; 5.8 |&nbsp; 205.2 |&nbsp; 20.6 |&nbsp; 16.8 |<br />only kmod-crypto-hash, sha1, md5 kernel modules<br />| 1.0.0d |&nbsp; 22273550 |&nbsp; 7945620 |&nbsp; 5482870 |&nbsp; 2359650 |&nbsp; 3345180 |&nbsp; 1189280 |&nbsp; 5565680 |&nbsp; 4875680 |&nbsp; 4351140 |&nbsp; 5.8 |&nbsp; 204.6 |&nbsp; 20.6 |&nbsp; 16.7 |<br />all kmod crypto (kmod aes is 2x slower !) :<br />| 1.0.0d |&nbsp; 23025910 |&nbsp; 7937200 |&nbsp; 5468980 |&nbsp; 2371300 |&nbsp; 3304450 |&nbsp; 1188050 |&nbsp; 4118600 |&nbsp; 3218580 |&nbsp; 2857920 |&nbsp; 5.8 |&nbsp; 205.7 |&nbsp; 20.7 |&nbsp; 16.8 |<br />kmod aes + kmod mv_cesa (need kmod aes)<br />| 1.0.0d |&nbsp; 22025970 |&nbsp; 7871740 |&nbsp; 5465690 |&nbsp; 2359320 |&nbsp; 3299060 |&nbsp; 1191220 |&nbsp; 4608690 |&nbsp; 4000820 |&nbsp; 3556600 |&nbsp; 5.8 |&nbsp; 205.1 |&nbsp; 20.6 |&nbsp; 16.8 |</p>											<p class="post-edited">(Last edited by <strong>Tanguy</strong> on 11 Apr 2011, 07:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132671">
				<div class="post-metadata">
					<div class="post-num">Post #1016</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						11 Apr 2011, 10:23					</div>
				</div>
				<div class="post-content content">
					<p>I copied your results to <a href="http://wiki.openwrt.org/toh/netgear/wnr854t#openssl.benchmarks">Wiki</a> to clarify some interesting points:<br />Please use the <a href="http://wiki.openwrt.org/toh/netgear/wnr854t#codified.features.list">feature code</a> for best explanation of what exactly You enabled for the highest score. I already put what I figure out about.<br />Also note that cesa is default enabled in kernel_menuconfig.</p><p>While hunting down rtc error I found another obscure corner:<br /></p><div class="codebox"><pre><code>make kernel_menuconfig
Device Drivers
    Real Time Clock
        -Set system time from RTC on startup and resume
        -Intersil ISL1208
        -PC-style &#039;CMOS&#039;
    DMA Engine support
        +Marvell XOR engine support (NEW)
            +Network: TCP receive copy offload (NEW)
            +Async_tx: Offload support for the async_tx api</code></pre></div><p>Will make now, upload tomorrow, fingers crossed...<br />make success while typing this post. Anyway will upload later, now I have to sleep.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132675">
				<div class="post-metadata">
					<div class="post-num">Post #1017</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						11 Apr 2011, 11:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tanguy wrote:</cite><blockquote><p>My build is different from trunk, ive selected &quot;armv5te&quot; instead of default &quot;armv5t&quot; for kernel and all tools</p></blockquote></div><p>Why not &quot;armv5tej&quot;?<br />Where do I change that? Here?:<br /></p><div class="quotebox"><cite>make menuconfig wrote:</cite><blockquote><p>Advanced configuration options (for developers)<br />Target Options<br />-Os -pipe -march=armv5t -mtune=xscale -fno-caller-saves</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132677">
				<div class="post-metadata">
					<div class="post-num">Post #1018</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						11 Apr 2011, 11:46					</div>
				</div>
				<div class="post-content content">
					<p>yea here <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> -march=armv5te</p><p>the j is for java optimisation, nothing usefull for us... usefull for android</p><p>set it also in target/linux/orion/Makefile</p>											<p class="post-edited">(Last edited by <strong>Tanguy</strong> on 11 Apr 2011, 11:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134146">
				<div class="post-metadata">
					<div class="post-num">Post #1019</div>
					<div class="post-author">alexhulse</div>
					<div class="post-datetime">
						27 Apr 2011, 11:18					</div>
				</div>
				<div class="post-content content">
					<p>@tanguy</p><p>I&#039;ve flashed your r26588 build onto my WNR854T and it seems to work well - green LEDs make me happy.</p><p>I&#039;ve been able to install kmod-ipv6, but can&#039;t install kmod-ip6tables as it doesn&#039;t exist! Is there a good reason for this, or does it just need compiling?</p><p>@all - Thanks for all your input - reading the 41 pages has been informative if exhausting...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134163">
				<div class="post-metadata">
					<div class="post-num">Post #1020</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						27 Apr 2011, 15:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alexhulse wrote:</cite><blockquote><p>I&#039;ve been able to install kmod-ipv6, but can&#039;t install kmod-ip6tables as it doesn&#039;t exist! Is there a good reason for this, or does it just need compiling?</p></blockquote></div><p>no, its just i dont have really tested the ipv6... my ISP doesnt use it for the moment... thanks for the report, i will select it next time</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135343">
				<div class="post-metadata">
					<div class="post-num">Post #1021</div>
					<div class="post-author">martinpurdy</div>
					<div class="post-datetime">
						16 May 2011, 04:08					</div>
				</div>
				<div class="post-content content">
					<p>I have finally taken the step and installed OpenWRT on my WRT350N v2.1</p><p>I installed the webupgrade, and everything except Wifi seems to be running.</p><p>Do I need any further steps to get the Wifi working, or have I done something wrong in the config?</p><p>I have it set to 20Mhz to begin with... then when that works I will start playing with 40Mhz</p><p>I am not very familiar with Linux, but I am pretty good on windows.</p><p>If anyone can help me, I will be very thankfull</p><p>Martin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135397">
				<div class="post-metadata">
					<div class="post-num">Post #1022</div>
					<div class="post-author">martinpurdy</div>
					<div class="post-datetime">
						16 May 2011, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>Looks like I bricked the WRT350N when I tried to upgrade it to the latest beta in an attempt to get the wifi working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136155">
				<div class="post-metadata">
					<div class="post-num">Post #1023</div>
					<div class="post-author">alexhulse</div>
					<div class="post-datetime">
						29 May 2011, 12:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tanguy wrote:</cite><blockquote><div class="quotebox"><cite>alexhulse wrote:</cite><blockquote><p>I&#039;ve been able to install kmod-ipv6, but can&#039;t install kmod-ip6tables as it doesn&#039;t exist! Is there a good reason for this, or does it just need compiling?</p></blockquote></div><p>no, its just i dont have really tested the ipv6... my ISP doesnt use it for the moment... thanks for the report, i will select it next time</p></blockquote></div><p>I&#039;ve installed your r27011 build and it&#039;s working with IPv6 fine now - thanks!</p><p>On the previous build I had a little play with the built in wireless, but still had no joy. I assume the current advice is to swap out the wireless card inside the WNR854T with one of the ones mentioned on the wiki?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136159">
				<div class="post-metadata">
					<div class="post-num">Post #1024</div>
					<div class="post-author">Tanguy</div>
					<div class="post-datetime">
						29 May 2011, 13:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alexhulse wrote:</cite><blockquote><div class="quotebox"><cite>Tanguy wrote:</cite><blockquote><div class="quotebox"><cite>alexhulse wrote:</cite><blockquote><p>I&#039;ve been able to install kmod-ipv6, but can&#039;t install kmod-ip6tables as it doesn&#039;t exist! Is there a good reason for this, or does it just need compiling?</p></blockquote></div><p>no, its just i dont have really tested the ipv6... my ISP doesnt use it for the moment... thanks for the report, i will select it next time</p></blockquote></div><p>I&#039;ve installed your r27011 build and it&#039;s working with IPv6 fine now - thanks!</p><p>On the previous build I had a little play with the built in wireless, but still had no joy. I assume the current advice is to swap out the wireless card inside the WNR854T with one of the ones mentioned on the wiki?</p></blockquote></div><p>Yes, and you have some wireless config to do the first time...only one file</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140498">
				<div class="post-metadata">
					<div class="post-num">Post #1025</div>
					<div class="post-author">stevellion</div>
					<div class="post-datetime">
						3 Aug 2011, 01:09					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to ask this - as it might be answered somewhere but I can&#039;t find.</p><p>I&#039;ve just taken the plunge and gone from stock to OpenWRT on my WRT-350N.</p><p>All is working except Wireless - I can&#039;t get it to work at all, using Luci mostly.</p><p>If I change it to disabled and then enabled, the wireless light turns on for a moment, then stays off.</p><p>I&#039;m just trying to bridge LAN &amp; Wireless for now, just to get it into a stable (like stock) state, then may try other things.</p><p>my wireless config file is like this:</p><p>config &#039;wifi-device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:1a:73:27:97:38&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;auto&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;country&#039; &#039;GB&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;htmode&#039; &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;Stevellion&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;mycode&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;</p><p>I get these (and others) from lsusb<br />ath9k&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;76176&nbsp; 0 <br />ath9k_common&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1060&nbsp; 1 ath9k<br />ath9k_hw&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 295964&nbsp; 2 ath9k,ath9k_common<br />ath&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;13056&nbsp; 2 ath9k,ath9k_hw<br />mac80211&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 203532&nbsp; 1 ath9k<br />crc_ccitt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 928&nbsp; 1 ppp_async<br />cfg80211&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 127980&nbsp; 3 ath9k,ath,mac80211<br />compat_firmware_class&nbsp; &nbsp; &nbsp;4256&nbsp; 0 <br />compat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8868&nbsp; 3 ath9k,mac80211,cfg80211</p><p>Any suggestions (on what I&#039;m missing) - I&#039;m just struggling and can&#039;t get it to do much on the wireless side yet.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 41 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=39.html">39</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=40.html">40</a></li><li class="pagination-current"><span>41</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=42.html">42</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=43.html">43</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>