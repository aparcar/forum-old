<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> exroot: Better Configuration Workflow with git?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p371283">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">leeand00</div>
					<div class="post-datetime">
						26 Jan 2018, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>I have an OpenWRT router with an exroot, that I am configuring for OpenVPN, and since I store the configuration in git, my work flow goes like this:</p><p>1. Plugin the thumbdrive into the router.<br />2. Plugin / Boot up the router.<br />3. SSH into it<br />4. Make a change.<br />5. Test the change.<br />6. If it works, then poweroff the router <br />7. Plug my thumb drive into my computer.<br />8. Commit the changes with git.<br />9. Goto 1.</p><p>Is there a better way to do this?&nbsp; Since I can&#039;t install git on the router itself, I can&#039;t just make the changes on the router.&nbsp; Is it possible to use something like an nfs share to speed things up?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371287">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						27 Jan 2018, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>So you basically need to back up the config files from the router to the computer... can&#039;t you just transfer them using SCP or RSYNC, for example?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371291">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						27 Jan 2018, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>It isn&#039;t clear to me why you can&#039;t install git. Can you install a sftp server? It would allow you to mount the router&#039;s file system via sshfs on the computer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371293">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">leeand00</div>
					<div class="post-datetime">
						27 Jan 2018, 02:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>It isn&#039;t clear to me why you can&#039;t install git. Can you install a sftp server? It would allow you to mount the router&#039;s file system via sshfs on the computer.</p></blockquote></div><p>opkg doesn&#039;t list git;&nbsp; Are you saying I should cross-compile it and install it manually?</p><p>I never tried installing sftp on it no; that&#039;s a good idea, but I tried running git over sshfs between two other machines (faster machines than my 400MHz router) and it was pretty slow; but mind you that the repo was on the remote machine and the git client was running locally...so I guess that&#039;s misusing it since you&#039;re supposed to push changes to a remote repo.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371294">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">leeand00</div>
					<div class="post-datetime">
						27 Jan 2018, 02:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>So you basically need to back up the config files from the router to the computer... can&#039;t you just transfer them using SCP or RSYNC, for example?</p></blockquote></div><p>I suppose; I just wanted to have a nice versioning history when I make changes to the configuration.&nbsp; Ideally, I&#039;d use etckeeper instead of git by itself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371295">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						27 Jan 2018, 04:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>leeand00 wrote:</cite><blockquote><div class="quotebox"><blockquote><p>It isn&#039;t clear to me why you can&#039;t install git. Can you install a sftp server? It would allow you to mount the router&#039;s file system via sshfs on the computer.</p></blockquote></div><p>opkg doesn&#039;t list git;&nbsp; Are you saying I should cross-compile it and install it manually?</p></blockquote></div><p>Which version do you use? I found git in both 15.05.1 and 17.04.1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371309">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">leeand00</div>
					<div class="post-datetime">
						27 Jan 2018, 20:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mikma wrote:</cite><blockquote><div class="quotebox"><cite>leeand00 wrote:</cite><blockquote><div class="quotebox"><blockquote><p>It isn&#039;t clear to me why you can&#039;t install git. Can you install a sftp server? It would allow you to mount the router&#039;s file system via sshfs on the computer.</p></blockquote></div><p>opkg doesn&#039;t list git;&nbsp; Are you saying I should cross-compile it and install it manually?</p></blockquote></div><p>Which version do you use? I found git in both 15.05.1 and 17.04.1.</p></blockquote></div><br /><p>I use 15.05...</p><p>Oh there it is...that must be new....actually I didn&#039;t find it with opkg search, but I did find it with opkg list and grep:<br /></p><div class="codebox"><pre><code>git - 2.3.5-1 - Git is a free &amp; open source, distributed version control system designed to handle everything from small to very large projects with speed and efficiency.
git-http - 2.3.5-1 - Git is a free &amp; open source, distributed version control system designed to handle everything from small to very large projects with speed and efficiency.  This package allows git push/fetch over http(s) and ftp(s)</code></pre></div><p>Sorry about that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371310">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						27 Jan 2018, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>Guys,</p><p>1) If you don&#039;t want to reply to a specific portion of text, just hit the &quot;Post reply&quot; button instead of &quot;Quote&quot;. There is no need to fullquote the previous posting.</p><p>2) @leeand00: it is called ex<strong>t</strong>root. Please edit your first posting and correct it, in order to enable this posting to be found when searching for extroot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371318">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						27 Jan 2018, 23:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>leeand00 wrote:</cite><blockquote><p>Oh there it is...that must be new....actually I didn&#039;t find it with opkg search, but I did find it with opkg list and grep</p></blockquote></div><p>Actually the command you were looking for is &quot;opkg find&quot;. (opkg search expects a file path, such as /usr/bin/git.)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>