<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Freifunk-Firmware for WRT54g Ver 2.2 / gs Ver 1.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p4759">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						21 Feb 2005, 12:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>time to give back to the OpenWRT community. This weekend, one of our berlin community members changed one of my older wrt devices for a new g2.2 device. This gives me the opportunity to experiment a little bit. In&nbsp; short: Its easy to run OpenWRT on the Gver2.2/GSver1.1 devices, you need to change 2 things:</p><p>a) patch the addpattern utility as suggested by TheRoDent. addpattern should accept the &quot;-2&quot; parameter then to have the bin file compatible with all wrt54 versions.</p><p>b) grab the newer et.o file from the wrt54gs.3.37.2.tgz (download from linksys) and overwrite the older et.o from wrt54gs.2.07.1.tgz in buildroot/build_mipsel/root/lib/modules/2.4.20/ The newer et.o handles both the (old) admtek and the (new) broadcom etherchip automatically.</p><p>Thats all. The older wl.o is still working *with* wireless extensions - a lot more comfortable.</p><p>The above changes are included in the Freifunk-Firmware already. If you like to give it a shot refer to <a href="http://www.freifunk.net/wiki/FreifunkFirmwareEnglish">http://www.freifunk.net/wiki/FreifunkFirmwareEnglish</a></p><p>P.S: Who the heck has deleted several directories in the OpenWRT CVS repository!? At least the ./buildroot/sources/openwrt is still needed to compile! What&#039;s wrong here?</p><p>Regards, Sven-Ola</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4793">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">systim</div>
					<div class="post-datetime">
						22 Feb 2005, 05:25					</div>
				</div>
				<div class="post-content content">
					<p>i put ne V0.6.5 on my wrt54g V2.2 and everything works fine.<br />until i plug the power off.<br />if i plug the power on;&nbsp; <br />linksys go to the tftp wait state and dont boot.</p><p>are there any fixes for this problem?</p><p>g.<br />tim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4801">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						22 Feb 2005, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>you may run into the issue already posted by mtakahar in this forum. Check out the &quot;buildroot patch: Fix for CRC error after firstboot&quot; topic, see <a href="http://openwrt.org/forum/viewforum.php?f=2&amp;sid=cad821b2b330722dcb12e5ca45911385">http://openwrt.org/forum/viewforum.php? â€¦ ca45911385</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4802">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						22 Feb 2005, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>Ah - and I forget to mention that a new version of the freifunk-firmware 0.6.6 is ready with fixes applied in a couple of minutes...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4983">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						28 Feb 2005, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>As reminded with the sticky &quot;GPL binary&quot; topic at the top of this Forum, I published the Freifunk-Firmware Sources, Shell-Hacks and Patchfiles on SourceForge now.</p><p>:arrow: <a href="http://ff-firmware.sourceforge.net">http://ff-firmware.sourceforge.net</a>/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4989">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Freek</div>
					<div class="post-datetime">
						28 Feb 2005, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>I am having big troubles getting a WRT54G v2.2 to work properly. Can I use the Freifunk version of OpenWRT and delete all the stuff specific to Freifunk to get a clean and working OpenWRT? I like the way you made the v2.2 work with OpenWRT, because (if I understand it right) it stays compatible with the IPKG-packages for OpenWRT.<br />Thanks in advance.</p><p>Freek</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4992">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						28 Feb 2005, 23:29					</div>
				</div>
				<div class="post-content content">
					<p>Remove specific stuff? No big problem. You cannot remove the preinstalled packages, they will need some extra space in the squasfs (Read-Only) partition mounted in /rom. But the firmware is an openwrt nevertheless. I suggest removing these links:<br />/etc/init.d/S45firewall and /etc/init.d/S53olsrd. You may need to copy the standard S45firewall from openwrt or create your own if you need a firewall setup. After these just configure the nvram vars as needed. And of course: remove anything in /www to get rid of that web interface if you do not like it&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> <br />After these actions just do the nvram settings as usual and install packages with ipkg update/ipkg install...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p4994">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						28 Feb 2005, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>Oh - one more: In failsafe mode you connect by telnet without password as usual. In normal mode telnet is disabled and ssh (e.g. PuTTY) is needed to login with the root/admin default combination. In addition to openwrt the FFF has passwords, login and getty (serial) enabled by default.</p><p>Hope it helps, Sven-Ola</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5003">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						1 Mar 2005, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>And a last one: Just checked what you loose. FFF will need around 30% more in squasfs, so you will loose less than 10% in read/write jffs to install additional packets. One big preinstalled ipk is dropbear, needless to say you normally want this anyway...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5012">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Freek</div>
					<div class="post-datetime">
						2 Mar 2005, 08:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5181">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						9 Mar 2005, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>hmmm, i&#039;ve tried this with my own firmware, and a stock CVS build from yesterday, and they both have the same issue.</p><p>I can send out packets on the external interface, but cannot receive.</p><p>I&#039;ve completely flushed out the default firewall rules and just set INPUT &amp; OUTPUT to ACCEPT.&nbsp; No dice.</p><p>dmesg says the modules loads ok...&nbsp; though lsmod says the et module is unused (whereas on a WRT54GS1.0 it says it&#039;s used)</p><p>Any ideas on this?<br />I&#039;m tearing my hair out on this one, as i&#039;m so close.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5188">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						10 Mar 2005, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>BTW: what is an &quot;external Interface&quot;? You need to be a bit more specific on this topic. Attach &quot;iptables -L -n -v;iptables -t nat -L -n -v;iwconfig;ifconfig&quot; as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5210">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						10 Mar 2005, 23:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sven-ola wrote:</cite><blockquote><p>&quot;iptables -L -n -v;iptables -t nat -L -n -v;iwconfig;ifconfig&quot; as well.</p></blockquote></div><p>By external interface, I mean vlan1, or the external network connection.<br />This is a stock CVS version, with the addpattern patch and new et.o driver included.</p><p>I&#039;m using a WRT54GS1.1 (actually a few of them).</p><p>I&#039;ve tried setting it to use dhcp and a static address, with no luck.<br />If I run tcpdump on a remote host, and try to ping, run udhcpc, etc...&nbsp; &nbsp;I can see packets from my WRT, and responses are sent.&nbsp; But the WRT never seems to get them.</p><p>At first glance, this looks like a firewall issue, but based on the firewall config listed below, I don&#039;t think so.&nbsp; (i&#039;ve tried the default iptables config from cvs as well)</p><p>I&#039;ve even tried to explicitly allow connections from a particular remote host, to no avail.<br />I&#039;ve switched cables thinking that was it...&nbsp; nope.</p><p>Wireless always seems to be available, as thats how I access the box.&nbsp; </p><p>This is very confusing, since the exact same firmware (without the addpattern and new et driver) works just fine on a GS 1.0.</p><br /><p>iptables -nvL:</p><p>Chain INPUT (policy ACCEPT 1765 packets, 154K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain FORWARD (policy ACCEPT 1520 packets, 182K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain OUTPUT (policy ACCEPT 4331 packets, 583K bytes)<br /> pkts bytes target&nbsp; &nbsp; &nbsp;prot opt in&nbsp; &nbsp; &nbsp;out&nbsp; &nbsp; &nbsp;source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><br /><p>iptables -t nat -L:</p><p>Chain PREROUTING (policy ACCEPT)<br />target&nbsp; &nbsp; &nbsp;prot opt source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><p>Chain POSTROUTING (policy ACCEPT)<br />target&nbsp; &nbsp; &nbsp;prot opt source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />MASQUERADE&nbsp; all&nbsp; --&nbsp; anywhere&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;anywhere&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>Chain OUTPUT (policy ACCEPT)<br />target&nbsp; &nbsp; &nbsp;prot opt source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p><br /><br /><p>iwconfig:</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; IEEE 802.11-DSF&nbsp; ESSID:&quot;linksys&quot;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Master&nbsp; Channel:6&nbsp; Access Point: 00:12:17:BC:12:31&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bit Rate:24Mb/s&nbsp; &nbsp;Tx-Power=15 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Retry limit:0&nbsp; &nbsp;RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:0/5&nbsp; Signal level:-160 dBm&nbsp; Noise level:-256 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>br0&nbsp; &nbsp; &nbsp; &nbsp;no wireless extensions.</p><p>vlan0&nbsp; &nbsp; &nbsp;no wireless extensions.</p><p>vlan1&nbsp; &nbsp; &nbsp;no wireless extensions.</p><br /><br /><p>ifconfig: </p><br /><p>br0&nbsp; &nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:12:17:BC:12:2F&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:6525 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:3239 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:440563 (430.2 KiB)&nbsp; TX bytes:534163 (521.6 KiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:12:17:BC:12:2F&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING PROMISC MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:15748 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:5388 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3247848 (3.0 MiB)&nbsp; TX bytes:2092310 (1.9 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:5 Base address:0x2000 </p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:12:17:BC:12:31&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:6512 errors:0 dropped:0 overruns:0 frame:23337<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:4301 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:541077 (528.3 KiB)&nbsp; TX bytes:732295 (715.1 KiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 Base address:0x1000 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:996 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:996 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:88685 (86.6 KiB)&nbsp; TX bytes:88685 (86.6 KiB)</p><p>vlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:12:17:BC:12:2F&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1100 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:162286 (158.4 KiB)</p><p>vlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:12:17:BC:12:2F&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.2.34&nbsp; Bcast:192.168.2.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:4288 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:1930024 (1.8 MiB)</p><br /><br /><p>netstat -rn:</p><p>Kernel IP routing table<br />Destination&nbsp; &nbsp; &nbsp;Gateway&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Genmask&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Flags&nbsp; &nbsp;MSS Window&nbsp; irtt Iface<br />192.168.2.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp; &nbsp; 40 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 vlan1<br />192.168.1.0&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp; &nbsp; 40 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 br0<br />0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.2.1&nbsp; &nbsp; &nbsp;0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; &nbsp; &nbsp;40 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 vlan1</p><br /><p>lsmod:</p><p>Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by<br />wl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 348968&nbsp; &nbsp;1<br />et&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;22208&nbsp; &nbsp;0 (unused)<br />diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2224&nbsp; &nbsp;0 (unused)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5218">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						11 Mar 2005, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>this is really funny. Normally such situation can be traced down to a routing/firewall issue (e.g. eth1 and vlan1 are in same subnet). This seems to be a vlan issue. Try &quot;brctrl show&quot;. Is vlan1 not in bridge? Try ifconfig vlan1 down;rmmod et.o;ismod et.o. The newer et.o has to show it&#039;s special vlan programming setup. This look O.K?</p><p>P.S.: I personally have a G-2.2 device. The G-1.1 should have the same etherchip (boadcom instead of admtek) but you may need to open housing and verify.</p><p>Hope it helps, Sven-Ola</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5229">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						11 Mar 2005, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, i&#039;m stuck on this one...</p><p>Here&#039;s what I see from brctl on bootup:</p><p>br0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8000.001217bc122f&nbsp; &nbsp; &nbsp; &nbsp;no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vlan0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eth1</p><br /><p>And when I rmmod/insmod et, dmesg shows:</p><p>vlan1: add 01:00:5e:00:00:01 mcast address to master interface<br />vlan1: del 01:00:5e:00:00:01 mcast address from master interface<br />vlan1: del 01:00:5e:00:00:01 mcast address from vlan interface<br />eth0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.60.13.0</p><br /><p>After insmod et, I run ifup wan, and then brctl shows something slightly different:</p><p>br0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8000.001217bc1231&nbsp; &nbsp; &nbsp; &nbsp;no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eth1</p><br /><p>I admit, i&#039;m not too familiar with exactly how the vlan setup works, but it looks like i&#039;ll get my hands dirty with it now...</p><p>I have also confirmed the broadcom ethernet controller in the GS 1.1 is the BCM5325EKQM chip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5230">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						11 Mar 2005, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>Well, check the dmesg kernel log. I attach a snippet of my g-2.2 which shows the normal output for insmod et...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5231">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						11 Mar 2005, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>hmm... the only difference I see are these lines:</p><p>5325E&nbsp; &nbsp;phy=0<br />5325E&nbsp; &nbsp;VLAN programming for BCM5325E-MDIO I/F switch</p><p>plus all the 1: 2: lines.</p><p>I don&#039;t see any of this in my dmesg.<br />I&#039;ve attached my dmesg in case there&#039;s something weird i&#039;m not seeing...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5235">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						12 Mar 2005, 03:24					</div>
				</div>
				<div class="post-content content">
					<p>actually, I do see something strange in my dmesg, that I don&#039;t see anywhere else (other dmesg logs posted to this forum, or on my own older firmware).</p><p>This line:<br />ip_conntrack version 2.1 (5953 buckets, 5953 max) - 352 bytes per conntrack</p><br /><p>My older firmware shows this:<br />ip_conntrack version 2.1 (256 buckets, 2048 max) - 352 bytes per conntrack</p><p>which I would consider normal numbers.</p><br /><p>just taking a stab in the dark...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5267">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Kurgan</div>
					<div class="post-datetime">
						13 Mar 2005, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>I have tried compiling from the buildroot applying the two patches for addpattern and CRC error as suggested by Sven-ola. I have added the et.o driver from release 2.3.37.6, flashed a brand new WRT54GSv1.1 that had release 2.3.37.2 on it before, and I have issues with the wired interfaces. Wireless works, wired interfaces (both vlan1 and vlan0) seem to let packets out but incoming trafic gets lost. For example, if I ping from the WRT to a wire-connected host, I see the ARP requests from the WRT on the LAN,&nbsp; I also see the answers from the host I am trying to ping, but it seems that the WRT does not get the ARP answers back.</p><p>I will check my logs against the ones posted by Sven-ola and James as soon as I can, and post any differences found. </p><p>What I should really need to know is how do the vlans work with the new chipset and driver, so maybe I will find if I am missing some initialization. Does the new driver read configuration from nvram? Is it just enough to insmod it and everything should work as configured in nvram settings?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5554">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						24 Mar 2005, 14:38					</div>
				</div>
				<div class="post-content content">
					<p>In the meantime, we have a lot of gs-v1.1 devices here. They all run without furhter changes to the freifunk firmware (old buildroot, added trx patch and newer et.o).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5566">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">james</div>
					<div class="post-datetime">
						25 Mar 2005, 00:12					</div>
				</div>
				<div class="post-content content">
					<p>I never figured this one out...</p><p>I ended up just grabbing an experimental snapshot and modifying it.</p><p>It works without any issues, and I prefer the new buildroot layout (though it took a little time to find everything again&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5842">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">aLiEnTxC</div>
					<div class="post-datetime">
						3 Apr 2005, 16:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>I never figured this one out...</p><p>I ended up just grabbing an experimental snapshot and modifying it.</p><p>It works without any issues, and I prefer the new buildroot layout (though it took a little time to find everything again&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Can you post your firmware?</p><p>I search already a openwrt build witout the freifunk implemetations... (i tike the shell and i dont need olsr)</p><p>Grettings,<br />Thomas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5907">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">sven-ola</div>
					<div class="post-datetime">
						5 Apr 2005, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>no problem. RTFM on openwrt.org, then download <a href="http://openwrt.org/downloads/experimental/">http://openwrt.org/downloads/experimental/</a>.</p><p>P.S. The Freifunk firmware is not meant to be a YAOB (yet another openwrt binary). It&#039;s for ad-hoc meshing communities. And - I may stay with the old/normal buildroot a long time. Here are the arguments for that (that&#039;s with the upcoming next version):</p><p>root@OpenWrt:~# cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00040000 00010000 &quot;pmon&quot;<br />mtd1: 003b0000 00010000 &quot;linux&quot;<br />mtd2: 000e6c00 00010000 &quot;rootfs&quot;<br />mtd3: 00010000 00010000 &quot;nvram&quot;<br />mtd4: 00250000 00010000 &quot;OpenWrt&quot;</p><p>(Web-UI, olsr-daemon, dropbear, iproute2/full are included in the squashfs, iwconfig working fine).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>