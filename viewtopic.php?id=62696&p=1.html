<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> FXS support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 23 Apr 2018 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=62696&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=62696&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=62696&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p311160">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						12 Feb 2016, 18:29					</div>
				</div>
				<div class="post-content content">
					<p>I experiment with a O2-Box 6431.<br />This device have a:<br />&quot;Lantiq XWAY SLIC120 (PEF 42068 V V1.2), 3x FXS (TAE ports which provide POTS via a SIP gateway)&quot;</p><p>How can i Run it ?</p><p>1.) How can i find out that the Hardware is working well.<br />Exist a representing device file in /dev ?<br />1.1) what is the meaning of these devices files:<br />/dev/dsl_cpe_api0<br />/dev/ifx_mei<br />/dev/gptu<br />/dev/port<br />/dev/ptmx<br />/dev/ubi_ctrl</p><p>2.) How does the communication work beetween asterisk and FXS ?<br />(will be ATA commands used like a modem ?)</p><p>3.) What are the general method for FXS support on OpenWRT ?<br />(I was hoping i install luci-app-pbx and the rest follows by itself)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311163">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						12 Feb 2016, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>You will probably get much better responses to post on <a href="http://www.dslreports.com/forum/voip">DSLReports forum</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311873">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						17 Feb 2016, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>It is possible to run the FXS with asterisk... I have tested it. It works.</p><p>It is needed to patch the current trunk of OpenWRT.<br />I think that the OpenWRT trunk will support it in a few months out of the box.</p><p>There is one issue that WiFi does not work properly if VMMC is activated (because RAM size must be reduced). But that might be a problem with the Wifi driver.</p><p>See <a href="https://bugzilla.kernel.org/show_bug.cgi?id=110091">https://bugzilla.kernel.org/show_bug.cgi?id=110091</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311908">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						18 Feb 2016, 00:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for reply</p><p>can you say how ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311910">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Feb 2016, 00:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p>@Plonk34<br />If you need patching information, please activate the forum option that others can send emails to you.</p></blockquote></div><p>I am interesting in the patching information, but I don&#039;t know how to activate the forum option as you mentioned above so that others can send e-mails to me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311914">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						18 Feb 2016, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>AFAIK, sending email through the forum is not possible and can only be activated by the forum admin.<br />There might be good reasons why this functionality is not activated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311915">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 00:46					</div>
				</div>
				<div class="post-content content">
					<p><span style="color: #ff0000"><strong>See #24 for update</strong></span></p><p><strong>1. Download the following archive and unzip.</strong></p><p><a href="https://drive.google.com/file/d/0B9Z_KppE2R8sSmRzNzZBb1c4Vkk/view?usp=sharing">https://drive.google.com/file/d/0B9Z_Kp … sp=sharing</a></p><p><strong>2. Run</strong></p><p><em>./preparebuild.sh</em></p><p><strong>3. After a while a menuconfig dialog comes up</strong></p><p><strong>3.1. Select Lantiq, XRX200, o2 Box 6431 / Arcadyan VGV7510KW22 (NOR)</strong></p><p><strong>3.2. Advanced configuration options, Toolchain Options, C Library implementation</strong><br />--&gt; Select &quot;Use (e)glibc&quot;</p><p>This is because asterisk does not load modules with musl library</p><p><strong>3.3. Select the extra packages:</strong><br /></p><ul><li><p>kmod-fs-ext4</p></li><li><p>kmod-usb-storage</p></li><li><p>luci</p></li><li><p>asterisk18</p></li><li><p>asterisk18-app-stack</p></li><li><p>asterisk18-chan-lantiq</p></li><li><p>asterisk18-chan-local</p></li><li><p>asterisk18-codec-alaw</p></li></ul><p><strong>3.4. Exit menuconfig</strong></p><p><strong>4. Run make</strong><br /><em>cd openwrt</em><br /><em>make -jX</em> (X is the number of available cpu threads)</p><p><strong>5. Compiling fails</strong><br />You have to patch the DSL drivers Makefile.am for glibc toolchain.<br />See <a href="https://dev.openwrt.org/ticket/21343">https://dev.openwrt.org/ticket/21343</a><br />Replace all &quot;-Bstatic -dn -static&quot; entries in Makefile.am to &quot;-Bstatic -dn&quot;</p><p>Call <em>make -jX</em> again</p><p><strong>6. After this you will get</strong><br />bin/lantiq-glibc/openwrt-lantiq-xrx200-VGV7510KW22NOR-squashfs.image</p><p><strong>7. Copy this file to /tmp dir (with scp) on the box with running OpenWRT (NOR Version!)</strong><br />and call<br /><em>sysupgrade /tmp/openwrt-lantiq-xrx200-VGV7510KW22NOR-squashfs.image</em><br />on the box</p><p><strong>8. After rebooting you should hear a tone with a connected phone</strong></p><p><strong>9. You need a working extensions.conf to make calls, see #10, #12, #13</strong></p>											<p class="post-edited">(Last edited by <strong>stefan-koch</strong> on 11 Jan 2017, 00:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311916">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>The FXS patches are based on Eddi De Pieri&#039;s work for barrier breaker branch.<br />Especially the 0152...patch file inside of the archive.<br />See <a href="https://dev.openwrt.org/search?q=eddi">https://dev.openwrt.org/search?q=eddi</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311919">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Feb 2016, 01:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p>The FXS patches are based on Eddi De Pieri&#039;s work for barrier breaker branch.<br />Especially the 0152...patch file inside of the archive.<br />See <a href="https://dev.openwrt.org/search?q=eddi">https://dev.openwrt.org/search?q=eddi</a></p></blockquote></div><p>Which post?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311920">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 01:11					</div>
				</div>
				<div class="post-content content">
					<p>Here is a little example (only important parts) for the asterisk configuration with FXS...<br />Read this, too:<br /><a href="http://the-asterisk-book.com/1.6/">http://the-asterisk-book.com/1.6/</a></p><br /><p><strong>asterisk/sip.conf</strong><br />add to <em>[sipgate]</em> context<br /><em>context=in_sipgate</em></p><br /><p><strong>asterisk/extensions.conf</strong></p><div class="codebox"><pre><code>[out_sipgate]
exten =&gt; _[+0-9].,1,Set(CALLERID(num)=NUMBER)
exten =&gt; _[+0-9].,2,Dial(SIP/sipgate/${EXTEN},30,Trg)
exten =&gt; _[+0-9].,3,Hangup

[in_sipgate]
exten =&gt; SIPID,1,Goto(tel1_in,s,1)

[tel1_out]
exten =&gt; _Z,1,Goto(out_internal,${EXTEN},1)
exten =&gt; _[+0-9].,1,Gosub(out_sipgate,${EXTEN})

[tel2_out]
exten =&gt; _Z,1,Goto(out_internal,${EXTEN},1)
exten =&gt; _[+0-9].,1,Gosub(out_sipgate,${EXTEN})

[ltq1_out]
;exten =&gt; _[+0-9]!,1,Goto(tel1_out,${EXTEN},1)
exten =&gt; _[+0-9]!,1,Dial(local/${EXTEN}@tel1_out/n)

[ltq2_out]
;exten =&gt; _[+0-9]!,1,Goto(tel2_out,${EXTEN},1)
exten =&gt; _[+0-9]!,1,Dial(local/${EXTEN}@tel2_out/n)

[ltq1_in]
exten =&gt; s,1,Dial(TAPI/1,30,t)

[ltq2_in]
exten =&gt; s,1,Dial(TAPI/2,30,t)

[tel1_in]
;exten =&gt; s,1,Goto(ltq1_in,s,1)
exten =&gt; s,1,Dial(local/s@ltq1_in/n)

[tel2_in]
;exten =&gt; s,1,Goto(ltq2_in,s,1)
exten =&gt; s,1,Dial(local/s@ltq2_in/n)

[lantiq1]
include =&gt; ltq1_out

[lantiq2]
include =&gt; ltq2_out</code></pre></div>											<p class="post-edited">(Last edited by <strong>stefan-koch</strong> on 18 Feb 2016, 14:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311923">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 01:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p>The FXS patches are based on Eddi De Pieri&#039;s work for barrier breaker branch.<br />Especially the 0152...patch file inside of the archive.<br />See <a href="https://dev.openwrt.org/search?q=eddi">https://dev.openwrt.org/search?q=eddi</a></p></blockquote></div><p>Which post?</p></blockquote></div><p>Every posts of November 2014, especially</p><p><a href="https://dev.openwrt.org/changeset/43158">https://dev.openwrt.org/changeset/43158</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311954">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 10:52					</div>
				</div>
				<div class="post-content content">
					<p>You have change the interface section in <strong>asterisk/lantiq.conf</strong> as the following:</p><div class="codebox"><pre><code>[interfaces]
;
; Number of FXS ports (default: 2)
channels = 2
per_channel_context = on</code></pre></div>											<p class="post-edited">(Last edited by <strong>stefan-koch</strong> on 18 Feb 2016, 14:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311956">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						18 Feb 2016, 11:02					</div>
				</div>
				<div class="post-content content">
					<p>The following describes settings for <strong>asterisk/sip.conf</strong></p><p>you may want to set generally</p><div class="codebox"><pre><code>nat=yes
directmedia=no
qualify=yes</code></pre></div><p>if you don&#039;t want to open asterisk port in the firewall (default 5060, but you could change this port to another number)</p><p>But you should open the RTP (you could change the range, too) ports in the firewall.</p><br /><br /><p>The following configuration should work for sipgate VoIP:</p><div class="codebox"><pre><code>register =&gt; SIPID:PASSWORD@sipgate.de/SIPID</code></pre></div><div class="codebox"><pre><code>[sipgate]
type=peer
host=sipgate.de
fromdomain=sipgate.de
dtmfmode=rfc2833
insecure=port,invite
directmedia=no
transport=udp,tcp
context=in_sipgate
disallow=all
allow=alaw,ulaw
username=SIPID
fromuser=SIPID
secret=PASSWORD</code></pre></div>											<p class="post-edited">(Last edited by <strong>stefan-koch</strong> on 18 Feb 2016, 14:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312013">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						18 Feb 2016, 19:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p>The FXS patches are based on Eddi De Pieri&#039;s work for barrier breaker branch.<br />Especially the 0152...patch file inside of the archive.<br />See <a href="https://dev.openwrt.org/search?q=eddi">https://dev.openwrt.org/search?q=eddi</a></p></blockquote></div><p>Which post?</p></blockquote></div><p>Every posts of November 2014, especially</p><p><a href="https://dev.openwrt.org/changeset/43158">https://dev.openwrt.org/changeset/43158</a></p></blockquote></div><p>Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312080">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						19 Feb 2016, 02:25					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Juuhuu I hear a peep, I hear a peep <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>Thank you soo much,<br />I was searching a lot of afternoons for informations about FXS support.<br />I could not have done alone.</p><p>And Thank you too for so much details.<br />It is more than I hope.<br />I will learn more about asterisk in the next days, but in this momment i am really happy.</p><p>I think this thread a so usefull that everybody should link it in the table of hardware.</p><p>I have modifie your script and adding your howto for building a new image<br /><a href="https://yadi.sk/d/XK6RpH5Vp5se3">o26431-vmmc_v2-easypeasy.tar.gz</a> </p><p>I Love my 6 euro VDSL Router.<br />A lot of people grumble and mock about this Router and of course, the original firmware is only good enough for convicts on parole which should not go online.<br />But i think i will replace my FritzBox with it in Future.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328021">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Stefan L.</div>
					<div class="post-datetime">
						11 Jun 2016, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>Hello together,</p><p>I have build my Openwrt for 6431 from trunk according your descriptions.</p><p>I use Asterisk18 with chan_lantiq.<br />When Asterisk loads the lantiq_channel it fails with error while loading the voice firmware from /lib/firmware.<br />The files are in place.</p><p>has anybody an Idea why it fails.</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328660">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						16 Jun 2016, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Hmm it works fine for me, build mai 2016</p><p>The description will not work 1:1, <br />because the Asterisk 1.8 support was delete later telephony commit: 676188043d313cdfe2ced3299d2e0e10ffc383d3</p><p>here my commits that i have use:</p><p>openwrt:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cda52dcb329e02674175b60426be26cd813294a6<br />luci: &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 6415c04d1342162bad16874653189b3780cdbd04<br />management: de36f62549d8da3723c80182812dc89ead2959fd<br />packages:&nbsp; &nbsp; &nbsp; &nbsp;45840cf56d04e197e933de09c880d3fc4e33e324<br />routing:&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; d87fe599698c80ff192b48db4813b7a3b270f1e4<br />targets:&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; a977f6ab0f2f1cbdc8ee6bdca08ebc86980e4350<br />telephony:&nbsp; &nbsp; &nbsp; 676188043d313cdfe2ced3299d2e0e10ffc383d3</p><p>If you need i can share my build.</p><br /><p>Second:<br />I remember that the description in the table of Hardware was not working for me.<br />I have make a -sysupgrade.bin file.<br />With the OpenWrt-ImageBuilder: </p><div class="codebox"><pre><code>make image PROFILE=VGV7510KW22NOR FILES=my-extra-root/ PACKAGES=&quot;dsl-vrx200-firmware-xdsl-a-patch dsl-vrx200-firmware-xdsl-b-patch kmod-fs-ext4 kmod-usb-storage asterisk18-app-stack asterisk18-chan-lantiq asterisk18-chan-local asterisk18-codec-alaw luci&quot;</code></pre></div><p>(The -sysupgrade.bin from buildprocess shoult work to but i forget the modem-firmware.)<br />You have to make a sysupgrade after ready installation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328662">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						16 Jun 2016, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>sorry @Stefan L. <br />I thing i have wrong understands you.<br />Your Telephone have a beeb ?</p><p>try this in /etc/asterisk/modules.conf:<br /></p><div class="codebox"><pre><code>[modules]
load =&gt; res_agi.so
autoload=yes
; ... leafe the rest</code></pre></div><p>it is from my memorys.<br />It was working in the past but in the moment i do not have asterisk configured.<br />For this reason it is not tested.</p>											<p class="post-edited">(Last edited by <strong>Plonk34</strong> on 16 Jun 2016, 01:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328878">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">cynric</div>
					<div class="post-datetime">
						17 Jun 2016, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,<br />I have a similar problem as the OP.<br />For the last couple of evenings I&#039;ve been playing with my Arcaydyan ARV752DPW22&nbsp; (Easy Box 803A) and OpenWRT. So far after getting used to the system and Image Generator I managed to get most things working and I quite like it so far. The only thing that is missing is proper telephony support on the POTS / FXS ports.</p><p>I have now built an image with the following packages: &quot;luci luci-app-ddns luci-app-pbx asterisk18-app-stack asterisk18-chan-lantiq asterisk18-chan-local asterisk18-codec-alaw&quot;<br />However Asterisk does not accept the Lantiq channel. As soon as I start it up, it deletes the lantiq.conf and refuses all operation. Phone ports remain silent. No matter how I configure extensions or lantiq.conf, Asterisk does not want the channel.. Module show does not list lantiq.</p><p>I tried building the image from source as Stefan Koch suggested with his patches, but Asterisk 1.8 is now gone from OpenWRT and newer versions offer neither the lantiq channel nor the LuCI app. Also I tried building BB-based images to no success.. Also I played with Yate, but that does not offer any TAPI support at all..</p><p>Is there any way to get the phone ports up and running with reasonable efforts?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328931">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						18 Jun 2016, 12:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>but Asterisk 1.8 is now gone from OpenWRT</p></blockquote></div><p>I am interestested too what the future brings in relating to FXS support.</p><p>The only methode that i now is to use the old. Here is the fixed ./preparebuild.sh from <a href="https://drive.google.com/file/d/0B9Z_KppE2R8sSmRzNzZBb1c4Vkk/view?usp=sharing">stefan-koch</a>:<br /></p><div class="codebox"><pre><code>#!/bin/bash

git clone git://git.openwrt.org/openwrt.git
cd openwrt
git remote add bb git://git.openwrt.org/14.07/openwrt.git
git fetch bb
git cherry-pick ea9e61b8eb61a2e362a50541f03466dc7d087947
git cherry-pick 47b1ff965b0cb57013b40fbe2bcd7f3c6eb6b606
git cherry-pick 8d924d43c0ea6839a3a33e54982e8da48b736001
git cherry-pick 064f467264c5c9b6eca0bb96b587f9412b770cc5
git am ../0000-md5.patch
git am ../0001-include.patch
git am ../0002-tapivmmcmake.patch
git am ../0003-o26431.patch
cp ../0152-lantiq-vmmc.patch target/linux/lantiq/patches-4.4/0152-lantiq-vmmc.patch

# use the latest telephony commit with Asterisk 1.8
cat ./feeds.conf.default | sed s,&quot;.*[[:blank:]]telephony[[:blank:]].*&quot;,&quot;&amp;^676188043d313cdfe2ced3299d2e0e10ffc383d3&quot;,g &gt; ./feeds.conf

./scripts/feeds update -a
./scripts/feeds install -a
cd feeds/telephony
git am ../../../0004-astmake-chan_lantiq.patch
git am ../../../0005-astmake-agi.patch
git am ../../../0006-chan-lantiq-caller.patch
git am ../../../0007-chan-lantiq-flash.patch
cd ../..
make defconfig
make prereq
make menuconfig</code></pre></div><br /><p>Wee should differ the problems by general working FXS support (having a beep after installation) or not.</p>											<p class="post-edited">(Last edited by <strong>Plonk34</strong> on 18 Jun 2016, 12:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329152">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">cynric</div>
					<div class="post-datetime">
						20 Jun 2016, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the script! I was able to build OpenWRT with it, however it seems as either eglibc or the 4.4. kernel results in much bigger binaries. Even with -Os and only a minimal driverset I could not get a build with luci and asterisk that would fit in the tiny 8MB flash of the board. I have given up the Easybox and reflashed it to the original. Maybe I will try picking up a larger box (with ISDN support) somewhere and give that a try..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346911">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						17 Dec 2016, 10:21					</div>
				</div>
				<div class="post-content content">
					<p>@cynric<br />You could try this:<br /><a href="https://wiki.openwrt.org/doc/howto/extroot">https://wiki.openwrt.org/doc/howto/extroot</a></p><p>Compile memory intensive parts as packages.<br />And install after USB migration with extroot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346912">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						17 Dec 2016, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>For more information about chan_lantiq and FXS see also:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=68473">https://forum.openwrt.org/viewtopic.php?id=68473</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p348997">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">stefan-koch</div>
					<div class="post-datetime">
						11 Jan 2017, 00:40					</div>
				</div>
				<div class="post-content content">
					<p><span style="color: #ff0000"><em><strong>Updated #7</strong></em></span></p><div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p><strong>1. Download the following archive and unzip.</strong></p></blockquote></div><p><strong>Updated build script:</strong><br /><a href="https://drive.google.com/file/d/0B9Z_KppE2R8sMjhVSHRXWElLdE0/view?usp=sharing">https://drive.google.com/file/d/0B9Z_Kp … sp=sharing</a></p><p><em>Step 3.2 is not needed. Using MUSL or glibc is possible.</em></p><p><strong>Select packages:</strong><br />asterisk13-app-stack<br />asterisk13-chan-lantiq<br />asterisk13-chan-sip<br />asterisk13-codec-a-mu<br />asterisk13-codec-alaw<br />asterisk13-codec-ulaw<br />asterisk13-res-rtp-asterisk</p><p><em>Step 5 is not needed. Patchfile is included in archive.</em></p>											<p class="post-edited">(Last edited by <strong>stefan-koch</strong> on 11 Jan 2017, 00:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349546">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">fischle</div>
					<div class="post-datetime">
						17 Jan 2017, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>This is really awesome.<br />I have been looking for an OpenWrt supported DSL modem where telephony actually works. This seems to be exactly what I was looking for.</p><div class="quotebox"><cite>stefan-koch wrote:</cite><blockquote><p><span style="color: #ff0000"><em><strong>Updated #7</strong></em></span><br /><strong>Updated build script:</strong><br /><a href="https://drive.google.com/file/d/0B9Z_KppE2R8sMjhVSHRXWElLdE0/view?usp=sharing">https://drive.google.com/file/d/0B9Z_Kp … sp=sharing</a><br /><em>Patchfile is included in archive.</em></p></blockquote></div><p>May I ask you to upstream the asterisk patches and the glibc build fix?<br />Thanks!</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=62696&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=62696&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=62696&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>