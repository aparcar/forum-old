<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> backfire RC3 SSH security flaw on backfire 10.03.1-rc3?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p119917">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dromero</div>
					<div class="post-datetime">
						28 Oct 2010, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using key auth on my WRT160NL, my key is saved in /etc/dropbear/authorized_keys<br />&quot;ssh&nbsp; root@192.168.2.1 -i tmp/key_rsa&quot; works fine, no password promt...</p><p>the flaw is: </p><p>root can login without a key when PasswordAuth is off . <br />I just run &quot;ssh&nbsp; root@192.168.2.1&quot; and I loged in without a password prompt.</p><p>my /etc/config/dropbear:</p><p>config dropbear<br />&nbsp; &nbsp; option PasswordAuth &#039;off&#039;<br />&nbsp; &nbsp; option Port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;22&#039;</p><br /><p>any ideas?</p><p>*note: using svn at R22797</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119926">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Memphis</div>
					<div class="post-datetime">
						28 Oct 2010, 19:56					</div>
				</div>
				<div class="post-content content">
					<p>do you have a matching key under /root/.ssh on your client? this would be used as default then ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119927">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						28 Oct 2010, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>Well root is the only user, so blocking root from connecting, even if better for security, would render your router useless.<br />It is not that much more secure anyways. Nobody will guess your key.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119932">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dromero</div>
					<div class="post-datetime">
						28 Oct 2010, 20:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Memphis wrote:</cite><blockquote><p>do you have a matching key under /root/.ssh on your client? this would be used as default then ...</p></blockquote></div><p>no, there&#039;s no matching key unter /root/.ssh</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119933">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dromero</div>
					<div class="post-datetime">
						28 Oct 2010, 20:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zorxd wrote:</cite><blockquote><p>Well root is the only user, so blocking root from connecting, even if better for security, would render your router useless.<br />It is not that much more secure anyways. Nobody will guess your key.</p></blockquote></div><p>is mandatory for me to enable key auth ONLY</p><p>i dont want to block root, i want to disable password auth and only let users to login using some rsa key...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119962">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dromero</div>
					<div class="post-datetime">
						29 Oct 2010, 07:55					</div>
				</div>
				<div class="post-content content">
					<p>no luck yet... T_T</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120003">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">madsteer</div>
					<div class="post-datetime">
						29 Oct 2010, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>try ssh -o &#039;PubkeyAuthentication no&#039; -l root 192.168.2.1.&nbsp; If you don&#039;t get a password prompt, you&#039;re good.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120328">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dromero</div>
					<div class="post-datetime">
						3 Nov 2010, 23:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>madsteer wrote:</cite><blockquote><p>try ssh -o &#039;PubkeyAuthentication no&#039; -l root 192.168.2.1.&nbsp; If you don&#039;t get a password prompt, you&#039;re good.</p></blockquote></div><p>I blame ssh-agent...</p><p>PKI Auth was working well, I just errased my ssh-agent stored keys with &quot;ssh-add -D&quot; and all went OK. <br />After the first time you log using your key, ssh-agent will store the info for further use and will log you automatically in the future.</p><p>Ty a lot madsteer!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>