<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem mouting a USB key on a WL500gp</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p88655">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Kirby</div>
					<div class="post-datetime">
						25 May 2009, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone</p><p>I have a problem mounting a USB key on an ASUS wl500g premium running on Kamikaze 8.09. The device is recognized by the router as it is shown below :</p><div class="quotebox"><blockquote><p>hub.c: new USB device 01:03.2-1, assigned address 2<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />&nbsp; Vendor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Model: USB DISK Pro&nbsp; &nbsp; &nbsp; Rev: PMAP<br />&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />&nbsp; Vendor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Model: USB DISK Pro&nbsp; &nbsp; &nbsp; Rev: PMAP<br />&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0<br />Attached scsi removable disk sdb at scsi0, channel 0, id 0, lun 1<br />SCSI device sda: 2011136 512-byte hdwr sectors (1030 MB)<br />sda: Write Protect is off<br />Partition check:<br /> /dev/scsi/host0/bus0/target0/lun0: p1<br />SCSI device sdb: 4096 512-byte hdwr sectors (2 MB)<br />sdb: Write Protect is off<br /> /dev/scsi/host0/bus0/target0/lun1: p1<br />WARNING: USB Mass Storage data integrity not assured<br />USB Mass Storage device found at 2</p></blockquote></div><p>However, I cannot mount it since it doesn&#039;t seem to found the device it detected a few seconds ago :</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# mount -t vfat /dev/scsi/host0/bus0/target0/lun0/part1&nbsp; /mnt/<br />mount: mounting /dev/scsi/host0/bus0/target0/lun0/part1 on /mnt/ failed: No such device<br />root@OpenWrt:~# mount -t vfat /dev/scsi/host0/bus0/target0/lun1/part1&nbsp; /mnt/<br />mount: mounting /dev/scsi/host0/bus0/target0/lun1/part1 on /mnt/ failed: No such device</p></blockquote></div><p>Here are the packages installed. I checked them and I don&#039;t seem to miss an important one :</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# opkg list_installed<br />base-files-brcm-2.4 - 14-r14549 -<br />bridge - 1.0.6-1 -<br />busybox - 1.11.2-2 -<br />dnsmasq - 2.46-1 -<br />dropbear - 0.51-2 -<br />firewall - 1-1 -<br />glib1 - 1.2.10-1 -<br />haserl - 0.9.24-1 -<br />ip - 2.6.25-1 -<br />iptables - 1.3.8-4 -<br />iptables-mod-conntrack - 1.3.8-4 -<br />iptables-mod-extra - 1.3.8-4 -<br />iptables-mod-imq - 1.3.8-4 -<br />iptables-mod-nat - 1.3.8-4 -<br />iptables-utils - 1.3.8-4 -<br />kernel - 2.4.35.4-brcm-2.4-1 -<br />kmod-brcm-wl - 2.4.35.4+4.150.10.5.3-brcm-2.4-2 -<br />kmod-diag - 2.4.35.4-brcm-2.4-4 -<br />kmod-fs-ext2 - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-ext3 - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-msdos - 2.4.35.4-brcm-2.4-1 -<br />kmod-fs-vfat - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-conntrack - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-extra - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-imq - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-nat - 2.4.35.4-brcm-2.4-1 -<br />kmod-ipt-nathelper - 2.4.35.4-brcm-2.4-1 -<br />kmod-loop - 2.4.35.4-brcm-2.4-1 -<br />kmod-nls-cp850 - 2.4.35.4-brcm-2.4-1 -<br />kmod-nls-utf8 - 2.4.35.4-brcm-2.4-1 -<br />kmod-ppp - 2.4.35.4-brcm-2.4-1 -<br />kmod-pppoe - 2.4.35.4-brcm-2.4-1 -<br />kmod-scsi-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-switch - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-core - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-ohci - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-storage - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb-uhci - 2.4.35.4-brcm-2.4-1 -<br />kmod-usb2 - 2.4.35.4-brcm-2.4-1 -<br />kmod-wlcompat - 2.4.35.4+4.150.10.5.3-brcm-2.4-2 -<br />libelf - 0.8.10-1 -<br />libgcc - 3.4.6-14 -<br />libncurses - 5.6-1 -<br />libnetsnmp - 5.1.2-2.3 -<br />libpcap - 0.9.8-1 -<br />libpthread - 0.9.29-14 -<br />libuci - 0.7.3-1 -<br />mc - 4.6.1-2 -<br />mtd - 8 -<br />nas - 4.150.10.5.3-2 -<br />nvram - 1 -<br />opkg - 4564-3 -<br />ppp - 2.4.3-10 -<br />ppp-mod-pppoe - 2.4.3-10 -<br />snmpd - 5.1.2-2.3 -<br />tc - 2.6.25-1 -<br />uci - 0.7.3-1 -<br />uclibc - 0.9.29-14 -<br />webif - 0.3-4709 -<br />wireless-tools - 29-2 -<br />wlc - 4.150.10.5.3-2 -</p></blockquote></div><p>The usb key cannot be the cause of the problem, since I detect it on the same router running on White Russian 0.9. <br />I thought it could be the format type, but I can assure it has been formatted as fat, and it is confirmed when running with the white russian machine.</p><p>The re-installation of the firwmare on the asus didn&#039;t change anything. I&#039;m seriously out of solutions and I begin to fear it is just a small mistake I would have missed.<br />I didn&#039;t find anything related on the forum.<br />Does anybody have any idea?</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88677">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						25 May 2009, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>The magic for me came with <br />opkg install kmod-nls-cp437 kmod-nls-iso8859-1</p><p>If that doesn&#039;t work provide output from lsusb (opkg install usbutils).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88731">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Kirby</div>
					<div class="post-datetime">
						26 May 2009, 11:58					</div>
				</div>
				<div class="post-content content">
					<p>Than you for your answer. Unfortunately, installing those 2 packages didn&#039;t change anything, I get the same message when I try to mount the stick.</p><p>Lsusb provides me with this :<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:~# lsusb<br />Bus 004 Device 001: ID 0000:0000<br />Bus 004 Device 003: ID 13fe:1e21 Kingston Technology Company Inc.<br />Bus 003 Device 001: ID 0000:0000<br />Bus 002 Device 001: ID 0000:0000<br />Bus 001 Device 001: ID 0000:0000</p></blockquote></div><p>Which seems to prove the device is recognized by the router.</p><p>I also tried with other usb keys, but I got the same results.</p>											<p class="post-edited">(Last edited by <strong>Kirby</strong> on 26 May 2009, 11:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88740">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rjb</div>
					<div class="post-datetime">
						26 May 2009, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Kirby, check out my post at this thread: <a href="http://forum.openwrt.org/viewtopic.php?id=17886">http://forum.openwrt.org/viewtopic.php?id=17886</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88757">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						26 May 2009, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>This worked for me just now with an NSLU2 (ixp4xx).&nbsp; I flashed the stock image (dated 15 Feb) from here:</p><p><a href="http://downloads.openwrt.org/kamikaze/8.09/ixp4xx/openwrt-nslu2-squashfs.bin">http://downloads.openwrt.org/kamikaze/8 â€¦ uashfs.bin</a></p><p>I did &quot;opkg update&quot; and &quot;opkg install kmod-usb-storage kmod-fs-vfat kmod-usb2&quot;</p><p>I actually did those one at a time and only after the kmod-usb2 did I get an &quot;sda: sda1&quot; from dmesg.&nbsp; But no drive mounted.&nbsp; I rebooted and got the dmesg message, &quot;FAT: codepage cp437 not found&quot;.&nbsp; I did</p><p>opkg install kmod-nls-cp437</p><p>I got the dmesg message, &quot;FAT: codepage iso8859-1 not found&quot;.&nbsp; I did</p><p>opkg install kmod-nls-iso8859-1</p><p>There were then no dmesg errors, and df gave me </p><p>/dev/sda1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15642560&nbsp; &nbsp;2150432&nbsp; 13492128&nbsp; 14% /mnt/usbdrive</p><p>&quot;ls /mnt/usbdrive&quot; showed my files.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88831">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Kirby</div>
					<div class="post-datetime">
						27 May 2009, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your advices. As you can see in my log, there is no ask for any missing package. I tried to install the packages you mentionned (cp437 and kmod-nls-iso8859-1), but that didn&#039;t change anything. Am I suposed to load a module after installing those?</p><p>Anyway, mounting a usb key is not a priority as I can tranfer files through ftp. Thanks for your help though.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>