<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wireless interface won&#039;t start (Barrier Breaker)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p251462">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">1amer</div>
					<div class="post-datetime">
						21 Oct 2014, 19:01					</div>
				</div>
				<div class="post-content content">
					<p><strong>Device:</strong> RT-N16<br /><strong>OpenWRT version:</strong> 14.07 r42625<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm47xx/generic/openwrt-brcm47xx-generic-squashfs.trx">https://downloads.openwrt.org/barrier_b … uashfs.trx</a></p><p><strong>Packages:</strong> <br /><strong>1.</strong> kmod-brcm-wl_3.10.49+5.10.56.27.3-7<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm47xx/generic/packages/base/kmod-brcm-wl_3.10.49%2b5.10.56.27.3-7_brcm47xx.ipk">https://downloads.openwrt.org/barrier_b … cm47xx.ipk</a></p><p><strong>2.</strong> wireless-tools_29-5<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm47xx/generic/packages/base/wireless-tools_29-5_brcm47xx.ipk">https://downloads.openwrt.org/barrier_b … cm47xx.ipk</a></p><p><strong>3.</strong> wl_5.10.56.27.3-7<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm47xx/generic/packages/base/wl_5.10.56.27.3-7_brcm47xx.ipk">https://downloads.openwrt.org/barrier_b … cm47xx.ipk</a></p><p><strong>4.</strong> nas_5.10.56.27.3-7<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/brcm47xx/generic/packages/base/nas_5.10.56.27.3-7_brcm47xx.ipk">https://downloads.openwrt.org/barrier_b … cm47xx.ipk</a></p><br /><p><strong>My installation way:</strong><br />sysupgrade -n openwrt-brcm47xx-generic-squashfs.trx<br />opkg remove kmod-b43<br />opkg install wireless-tools_29-5_brcm47xx.ipk<br />opkg install kmod-brcm-wl_3.10.49%2b5.10.56.27.3-7_brcm47xx.ipk<br />opkg install wl_5.10.56.27.3-7_brcm47xx.ipk<br />opkg install nas_5.10.56.27.3-7_brcm47xx.ipk<br />rm /etc/config/wireless<br />reboot</p><p><strong>My wireless config (/etc/config/wireless):</strong><br /></p><div class="codebox"><pre><code>config wifi-device &#039;wl0&#039;
    option type &#039;mac80211&#039;
    option channel &#039;4&#039;
    option txpower &#039;24&#039;
    option hwmode &#039;11g&#039;
    option txantenna &#039;3&#039;
    option rxantenna &#039;3&#039;
    option htmode &#039;HT40&#039;

config wifi-iface
    option device &#039;wl0&#039;
    option network &#039;lan&#039;
    option mode &#039;ap&#039;
    option ssid &#039;qqq&#039;
    option encryption &#039;psk2+ccmp&#039;
    option key &#039;12345678&#039;</code></pre></div><p><strong>My problem:</strong> Wireless interface (<strong>wl0</strong>) won&#039;t start + <em>wifi detect &gt; bla-bla-bla</em> create empty config. What&#039;s my problem?</p><p>Thx)</p>											<p class="post-edited">(Last edited by <strong>1amer</strong> on 21 Oct 2014, 19:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251467">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">1amer</div>
					<div class="post-datetime">
						21 Oct 2014, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>WiFi won&#039;t start. Have any idea what&#039;s my problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251565">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rapis</div>
					<div class="post-datetime">
						22 Oct 2014, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>I tried to get broadcom-wl driver working on RT-N16, too.<br />I installed wlc utility however, not wl. You can install both just in case.<br />Check loaded modules with lsmod. Verify that b43 is unloaded and broadcom-wl is present.<br />wifi detect should work (it worked for me).</p><p>Also, about this line:<br />option type &#039;mac80211&#039;<br />should be type &#039;broadcom&#039;, I think</p><p>I still couldn&quot;t bring WLAN up, broadcom.sh also threw some error about leddc at me. This compatibility layer script might be broken.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251566">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rapis</div>
					<div class="post-datetime">
						22 Oct 2014, 10:43					</div>
				</div>
				<div class="post-content content">
					<p>By the way, &quot;wifi detect&quot; will not work until you delete or rename the old /etc/config/wireless, I think.</p><p>Some offtopic: did you try drivers b43 and brcmsmac? They work for me, but there are some problems with packet loss/congestion with some mobile devices. That&#039;s why I wanted to try broadcom-wl, too (given that it ran smooth on DD-WRT before)</p>											<p class="post-edited">(Last edited by <strong>rapis</strong> on 22 Oct 2014, 10:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251612">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">1amer</div>
					<div class="post-datetime">
						22 Oct 2014, 17:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rapis wrote:</cite><blockquote><p>I tried to get broadcom-wl driver working on RT-N16, too.<br />I installed wlc utility however, not wl. You can install both just in case.<br />Check loaded modules with lsmod. Verify that b43 is unloaded and broadcom-wl is present.<br />wifi detect should work (it worked for me).</p><p>Also, about this line:<br />option type &#039;mac80211&#039;<br />should be type &#039;broadcom&#039;, I think</p><p>I still couldn&quot;t bring WLAN up, broadcom.sh also threw some error about leddc at me. This compatibility layer script might be broken.</p></blockquote></div><p>I don&#039;t use wl or wlc utility. I changed the configuration (/etc/config/wireless) by hands. I tried use &#039;broadcom&#039; in config. Not work for me((( What&#039;s this a broadcom.sh?</p><div class="quotebox"><cite>rapis wrote:</cite><blockquote><p>Some offtopic: did you try drivers b43 and brcmsmac?</p></blockquote></div><p>b43 work for me, brcmsmac not work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251617">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rapis</div>
					<div class="post-datetime">
						22 Oct 2014, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>You may not use wlc directly but it&#039;s used by OpenWRT&#039;s tools itself. </p><p>See the wiki at <a href="http://wiki.openwrt.org/doc/hardware/soc/soc.broadcom.bcm47xx#wifi.drivers">http://wiki.openwrt.org/doc/hardware/so … fi.drivers</a></p><p>&quot;Note that broadcom-wl doesn&#039;t use a standard cfg80211 API, so it can&#039;t be configured using standard nl80211 tools. This is why OpenWrt has an extra package providing wlc (user space tool that uses Broadcom&#039;s proprietary API) and broadcom.sh (that translates UCI config into wlc calls). You can also install wl binary that is closed source version of wlc written by Broadcom that may be helpful for some debugging. Remember that broadcom.sh may not handle all UCI options, please see the UCI wireless configuration page for the details. Some advanced functionality can by configured with the wl utility only. Beware that running wifi (to activate your UCI WiFi configuration file) will however restart the driver and you will lose your settings made by the utility. &quot;</p><p>Install wlc, then run &quot;wifi down ; wifi&quot;.</p><p>If you see an error from broadcom.sh, &quot;2.4 GHz&quot; LED lights up and &quot;wifi status&quot; outputs nothing, you can scan for your SSID but cannot connect to it then you reached the point where I gave up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>rapis</strong> on 22 Oct 2014, 17:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253145">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fatcatfan</div>
					<div class="post-datetime">
						5 Nov 2014, 03:45					</div>
				</div>
				<div class="post-content content">
					<p>I unfortunately have nothing helpful to add, only came here to say that I&#039;m experiencing this same problem trying to use kmod-brcm-wl with an old Asus WL-500gP V2. My devices can see the SSID but can&#039;t connect. I feel better knowing it isn&#039;t only me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>