<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> allow only 1 mac address ssh access from wan? how...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p86889">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jourosis</div>
					<div class="post-datetime">
						29 Apr 2009, 07:08					</div>
				</div>
				<div class="post-content content">
					<p>Using the latest version of Kamikaze (8.09) on a WRT54G v.3 I&#039;m trying to allow only one mac address to ssh into the router from WAN. If possible, I&#039;d like to be able to do it over the webif, as I&#039;ve been using that. But if necessary, I can use CLI to do so. I just haven&#039;t really learned much on working with the /etc/config/firewall. </p><p>So to sum it up for my overall use of the router is: <br />a)standard lan/wlan usage for laptops/desktops;<br />b)ssh into the router as needed from LAN for config, etc;<br />c)ssh into the router from one individual laptop from any internet connection, block all other attempts(drop or reject, doesnt matter);<br />d)forward port xxx from the router to one of the desktops for ssh tunneling- need remote access to files/programs on that desktop.</p><p>c) is the only part I need to work on now.</p><p>So I think it&#039;s possible, but I&#039;m exactly sure how to go about it. Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>jourosis</strong> on 29 Apr 2009, 07:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86892">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						29 Apr 2009, 07:46					</div>
				</div>
				<div class="post-content content">
					<p>this is was public/private key pairs are for<br />look for the authorized_keys file in /etc/dropbear</p><p>and disable password auth</p>											<p class="post-edited">(Last edited by <strong>zorxd</strong> on 29 Apr 2009, 07:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86898">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						29 Apr 2009, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>jourosis,</p><p>The MAC address is something that can attributed to the local clients, as it works on the Data Link layer (2nd level) of OSI model. And routable behavoir of internetworking is archived starting only from Network layer (3rd level).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86954">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jourosis</div>
					<div class="post-datetime">
						29 Apr 2009, 21:07					</div>
				</div>
				<div class="post-content content">
					<p>zorxd:<br />Thanks for the info about ssh keys, but what I was aiming for was to only allow only one computer the chance of even using a key. </p><p>nas- I appreciate the info. Is there any possible way to rehash what you said in layman&#039;s terms? (I know if I can&#039;t understand that, I probably shouldn&#039;t be delving this deep into security, but I&#039;m curious). Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86956">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						29 Apr 2009, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Even if it worked, you can fake a mac address easily anyways so a key is more secure. Normally a random private key will be specific to only one host. If it&#039;s the only allowed key then only this host will be able to connect.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86965">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jourosis</div>
					<div class="post-datetime">
						29 Apr 2009, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>I understand how secure private keys would be. (using them currently). Most would call what I want to do very unnecessary, but it would just be another layer. It&#039;s in addition to using a non-standard port for SSH.</p>											<p class="post-edited">(Last edited by <strong>jourosis</strong> on 29 Apr 2009, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86966">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						29 Apr 2009, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>But do you understand that the MAC address that your router will see will always be the same : the address of your DSL or cable modem.</p><p>If you care about security you could install denyhost to ban people trying to connect to your router. But I think it&#039;s in perl so you would have to install perl as well.</p>											<p class="post-edited">(Last edited by <strong>zorxd</strong> on 29 Apr 2009, 22:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86967">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jourosis</div>
					<div class="post-datetime">
						29 Apr 2009, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>Which is what nas was telling me I think? Thanks for the rehash in simpletext. It was what I needed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Does this mean that the firewall rules that can involve source MAC addresses are only useable for LAN/outgoing connections?</p>											<p class="post-edited">(Last edited by <strong>jourosis</strong> on 29 Apr 2009, 22:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86969">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						29 Apr 2009, 22:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jourosis wrote:</cite><blockquote><p>Does this mean that the firewall rules that can involve source MAC addresses are only useable for LAN/outgoing connections?</p></blockquote></div><p>It only works for devices on the same ethernet network as your router, but in all directions. When a packet gets routed, it&#039;s made at the IP level (layer 3), and the MAC adress is replaced with the MAC address of the router.</p><p>So if you have</p><p>3 computers&lt;-&gt;router&lt;-&gt;modem</p><p>This is two ethernet networks (lan and wan on your router)</p><p>If you send an IP packet from computer A to computer B, or from a computer to your router, the source MAC will be the original one. But if you send a packet from a computer to your modem, your modem will see that the ethernet packet (layer 2) is coming from your router instead of your computer because it&#039;s on a different network.</p><p>So you can filter/shape internet traffic on the LAN side by looking at :</p><p>- the source MAC addr on your lan (for outgoing traffic). Destination MAC addr will always be your router</p><p>- the destination MAC addr (for incoming traffic). Source MAC addr will always be your router</p><br /><br /><p>On the WAN side, there is only two devices (router and modem) so MAC address filtering/shaping is useless.<br />I think that you can&#039;t even filter/shape local traffic on your LAN (from one computer to an other) because it pass trough the switch but not trough the router.</p>											<p class="post-edited">(Last edited by <strong>zorxd</strong> on 29 Apr 2009, 22:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86973">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jourosis</div>
					<div class="post-datetime">
						29 Apr 2009, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>Interesting...Thanks for all the info zorxd!.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>