<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Files and install instructions for HooToo HT-TM02 and HT-TM04(RT5350)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 27</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=27.html">27</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p248596">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						1 Oct 2014, 01:11					</div>
				</div>
				<div class="post-content content">
					<p><strong> Now in the trunk! - </strong></p><br /><p><strong>This is the main thread for installing OpenWRT HooToo HT-TM02 and HT-TM04 micro-routers. See other updates and notes at the bottom of this post before using these instructions....</strong></p><p>A little background on the device.</p><p>This is nice little unit with approximately the same functionality, about the same performance, and TWICE the amount of FLASH (8mb vs 4mb). It&#039;s also considerably smaller and a bit cheaper (I paid $18 free shipping Amazon prime. Some have seen it for $15 or less).&nbsp; Feature set is nearly identical to the 703..</p><p>- 8mb SPI Flash<br />- 32mb SDRAM<br />- USB host<br />- One ethernet<br />- 802.11n wifi<br />- reset button<br />- mode switch</p><p>Here&#039;s a view:</p><p><span class="postimg"><img src="http://i1377.photobucket.com/albums/ah78/wingspinner/f89b0804-e78e-4833-9621-d4ce8008efc9_zpsd0caa282.jpg" alt="http://i1377.photobucket.com/albums/ah78/wingspinner/f89b0804-e78e-4833-9621-d4ce8008efc9_zpsd0caa282.jpg" /></span></p><p>Here&#039;s the top of the board</p><p><span class="postimg"><img src="http://i1377.photobucket.com/albums/ah78/wingspinner/b1fdc3e1-82e8-4bdb-9bfd-135c1fc00790_zpscfd35d21.jpg" alt="http://i1377.photobucket.com/albums/ah78/wingspinner/b1fdc3e1-82e8-4bdb-9bfd-135c1fc00790_zpscfd35d21.jpg" /></span></p><p>.. and the bottom. The serial console connections are the 4 large pads on the bottom edge - they are marked..<br /><span class="postimg"><img src="http://i1377.photobucket.com/albums/ah78/wingspinner/478e0d09-5abf-4319-bcf5-2219ef9c48ef_zps90d7a9f6.jpg" alt="http://i1377.photobucket.com/albums/ah78/wingspinner/478e0d09-5abf-4319-bcf5-2219ef9c48ef_zps90d7a9f6.jpg" /></span></p><p>The wifi works amazingly well considering it only has a chip antenna. An external antenna is easily installed as it has both a proper impedance matching RF front-end as well as a stripline bandpass filter on the board. So far they&#039;ve all worked well for me with just the chip antenna so I&#039;ve found no need to modify them yet.</p><p>My patches (here and also in my github respository - link below) have support for both LEDs, the reset button and the slider switch. All works well including the USB port.</p><br /><p>After some bit of effort to learn how to add a new device to buildroot for trunk (all the wiki docs are for AA), discovering the gpio/led connections on the board, and understanding the HooToo upgrade image format so I could build a &quot;factory&quot; openwrt upgrade image, I&#039;ve developed a set of patches and images. I&#039;ve submitted the patches to OpenWRT powers that be and haven&#039;t heard anything yet. I hope they&#039;ll eventually accept them and make this part of the trunk.&nbsp; (UPDATE: My patchs are now part of the trunk except for the &quot;factory&quot; image which you can get from my github repository - link below). In the meantime, I want to share this with the community. All the files - patches, images, and board photos are over on github at <a href="https://github.com/wingspinner/HooToo-Tripmate-HT-TM02-OpenWRT">https://github.com/wingspinner/HooToo-T … 02-OpenWRT</a>. Below are my latest upgrade instructions&nbsp; and how it all works but you&#039;ll need to go to the repository to get some of the files. </p><p>Just a note, I&#039;m not affiliated with HooToo in any way and developed this independently. I have been lobbying HooToo to comply with the GPL for a couple of months. Recently they finally made available a sanitized and seemingly incomplete set of sources on their website (now apparently removed) which I thank them for however there isn&#039;t much useful in them. They did include the GPIO driver sources and includes though which allowed me to verify that I had got the LED and switch assignments correct. Unfortunately I received them only after I had already figured them out independently. Oh well!</p><p>To install OpenWRT on the TM02 I ended up replacing the UBoot bootloader with a version compatible with the OpenWRT partitioning scheme. There are several methods to replace UBoot:</p><p>1. If you have at least average soldering skills you can&nbsp; solder a 3v USB&lt;-&gt;Serial cable to the board, setup a tftp server and replace it using tftp, then reboot and use that to&nbsp; burn the OpenWRT sysupgrade image to the correct MTD partition using tftp. That&#039;s how I did it the first time. Also, having a serial console connection is very useful as a debug and recovery tool. If you plan on doing a lot of experimenting I recommending this as it&#039;s an invaluable tool for configuration, debug, and recover - as long as you can solder the connections without ruining the board. The connections are well marked and it&#039;s not difficult at all. Same goes for the TM04. Both devices can be gently pried apart with a very thin screwdriver. Remove the bottom cover on the TM02 and carefully remove the board. The pads or on the bottom of the board near the edge (see photos).&nbsp; The TM04 requires that you carefully remove the daughter board and then the three screws holding the base board in place. Again, the pads are on the edge of the board and marked.</p><p>2. I&#039;ve discovered that the board is compatible with in-circuit programming of the flash chip using an external FLASH programmer which makes for easy debricking or upgrading of uboot. I use the &quot;flashrom&quot; app along with the TIAO Tumpa (USB Multi-Protocol Adapter), and one of these: <a href="http://www.ebay.com/itm/141377097279?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT">http://www.ebay.com/itm/141377097279?_t … EBIDX%3AIT</a>&nbsp; . I&#039;ve found the in-circuit method to be much quicker and easier than TFTP most of the time. This is for more advanced users. More notes on this below.</p><p>3. Since my initial upgrade, I have studied and now understand the factory HooToo upgrade images and that knowledge has enabled me to create OpenWRT &quot;Factory&quot; images that are compatible with the HooToo factory GUI software. In OpenWRT parlance a &quot;Factory&quot; image is the one you use to load OpenWRT on to the device for the first time while it&#039;s still running the manufacturer&#039;s original software. In this case, you load the &quot;Factory&quot; image from the HooToo upgrade menu. With the Factory image it&#039;s easy to do the conversion/upgrade without soldering and it shouldn&#039;t take more than 10-15 minutes. The factory image I prepared will load the new UBoot along with OpentWRT so it&#039;s a one step painless process and the recommended method. I&#039;ve created a tool that enables advanced users to create their own factory images. More notes below.</p><br /><p>REQUIREMENTS</p><p>- A 1gb or larger USB Flash stick (preferably an empty, new one )<br />- PC - any OS and browser<br />- Ethernet cable</p><p>INSTRUCTIONS</p><br /><p>1. Connect the TM02 to power with it&#039;s mode switch in the AP mode. That&#039;s the switch selection that has the icon with an image of the world connected to a network. Wait for it to boot up as indicated by it showing up as an AP in your PC wifi scan. Connect to it. The passkey is &quot;11111111&quot; unless you&#039;ve changed it.</p><p>2. Once you are connected, open your browser and browse to the IP address 10.10.10.254 . The Hootoo GUI should appear. Bypass the setup wizard by closing it&#039;s popup window.</p><p>3. Insert a USB flash memory stick (preferably an empty one you can dedicate to this purpose and &gt; 1gb) into the TM02. Wait for the popup window confirming that the TM02 has recognized the stick. Make sure the stick is properly mounted by clicking on the &quot;Explore&quot; menu item and viewing the directory of the stick.</p><p>4. Now go to the &quot;System&quot; menu, select the firmware upgrade menu item, and then upgrade the TM02 using one of the following files from the &quot;ramips_openwrt&quot; directory of my repository<br />(<a href="https://github.com/wingspinner/HooToo-Tripmate-HT-TM02-OpenWRT">https://github.com/wingspinner/HooToo-T … 02-OpenWRT</a>):</p><p><strong>openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r44945-ws.bin</strong><br />This is a well configured image with Luci, USB storage, USB serial, relayd and some other packages intended to make a solid base for experimentation. It&#039;s based on the most recent trunk revision (at the time of this writing) r44945. This is recommended for those with more basic knowledge since Luci is already installed for you.</p><p><strong>openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r44945-basic.bin</strong><br />This image is based on the &quot;sysupgrade&quot; image from the trunk, revision r44945. It has only the most basic USB drivers and not much else. It&#039;s intended for more advanced users who want full control of what is in the image. Luci is not included. You&#039;ll need to log into this via telnet or using the serial console. Check the wiki for instructions.</p><p><strong>openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649.bin</strong><br />This is the original &quot;factory&quot; image I built and released. It&#039;s configured similar to the first image in this list but is based on a much older trunk revision. I&#039;ve included it here as reference and don&#039;t recommend using it for new installs.</p><p>5. WAIT until the timer popup times out (about 5 minutes) before disconnecting the TM02 power as it takes time to write and verify the entire on-board flash MTD. Do NOT interrupt the process in any way otherwise you&#039;ll brick your device and likely need to use an external FLASH programmer to recover) The loader issues a &quot;reboot&quot; command when it&#039;s done but apparently re-writing the entire flash crashes the HooToo Linux install and it doesn&#039;t reboot on it&#039;s own. After the timer times out remove power from the TM02.</p><p>6. Connect an ethernet cable between your PC and the TM02. Set your PC for DHCP and then power-on the TM02. If the upgrade worked, you&#039;ll see both LED&#039;s light up. That&#039;s the new UBoot. When it starts to boot the kernel they will go out. They may or may not come back on during the boot process. After about 30 seconds it should be booted into OpenWRT. It will issue an IP to your PC in the 192.168.1.xx range. Later, you can configure the LED&#039;s to do something more useful.</p><p>7. If you used the more fully configured factory image, uhttpd and LUCI should be up and running so browse to 192.168.1.1 and configure to your hearts content using LUCI. There are no requirements for any other upgrades - you&#039;re done! </p><br /><p>INITIAL CONFIGURATION</p><p>The network is configured with OpenWRT defaults. That means you can&#039;t do much with it until you&#039;ve done some reconfiguring. Default configuration is ethernet is set as &quot;lan&quot; and bridged to the wifi (&quot;wlan&quot;) with no firewall inbetween. There are plenty of examples as to how to configure the network any number of ways in the OpenWRT Wiki &quot;recipes&quot; and on this forum. Search is your friend - and so is the wiki table of contents. ;-) Relayd is also present as part of the richer build so you can create that interface if you wish and adjust the firewall to everything as &quot;accept&quot; (again, use the Wiki instructions). I&#039;m using a freshly upgraded TM02 as a client bridge with relayd as I write this.</p><br /><p>WHAT HAPPENS DURING THE UPGRADE AND WHY YOU NEED A USB FLASH STICK</p><p>The TM02 with the factory software doesn&#039;t have enough free RAM to untar/ungzip and assemble the complete TM02 flash MTD image for the upgrade so it requires a USB flash stick to use as workspace. Having a clean USB flash stick plugged in is required for this reason.</p><p>The first thing the loader does is shutdown various services that might interfere with the flashing process and perhaps free up some RAM. Then it writes a complete backup of the factory flash MTD device to your USB flash stick. It copys the entire TM02 MTD device as one file to your flash stick as well as each separate partition as individual files. The files are named using the partition labels from the flash chip and will be under the &quot;HT_FLASH&quot; directory on the stick. You can use these files to revert back to factory if you wish. Reloading the original HooToo firmware is not difficult for a well versed embedded hardware/software hacker but it&#039;s &quot;plug and play&quot; and there aren&#039;t any specific instructions. If you are convinced that you want to use the HooToo firmware I recommend spending another $20 and buying a second unit rather than hassle going back and forth. In any case, a full backup is provided for you on the USB flash stick and,&nbsp; if you feel you must go back, there are at least two methods to accomplish this: A. Using UBoot from the serial console. B. Use an external FLASH programmer such as the &quot;Flashrom&quot; app running on another Linux system, a hardware programmer ( I use the TIAO Tumpa USB Multi-Protocol Adapter), and one of these: <a href="http://www.ebay.com/itm/141377097279?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT">http://www.ebay.com/itm/141377097279?_t … EBIDX%3AIT</a> and simply reprogram the flash with the ALL.bin file in-circuit. You&#039;ll need to do some research and figure the details out. (Hint: Wiki, forum, search, google ;-) )</p><p>Next the loader extracts the OpenWRT sysupgrade image and the new UBoot image from the overall upgrade file and&nbsp; ungzips and untars them. Then it assembles a new MTD device flash image which includes the new UBoot, the original HooToo &quot;config&quot; and &quot;factory&quot; MTD partitions, and the new OpenWRT sysupgrade image. This is then written to the TM02 MTD using mtd_write. A copy of this image is also written to your flash stick as &quot;openwrt.bin&quot; in case you should need it. Once that&#039;s done it executes a &quot;reboot&quot; command. (Note: As mentioned previously this doesn&#039;t appear to happen.)</p><p>I&#039;ve found the HT-TM02 to be an extremely versatile little device with sufficient I/O and memory for many applications at a very low cost. I find myself using it as a replacement for many embedded applications where I might have, in the past, used a less capable dedicated embedded microcontroller that required much more software and hardware effort to get running. The biggest issue I&#039;ve had is getting over the mindset that it&#039;s overkill for some of my applications given the fact that it&#039;s a full and robust Linux machine. It seems odd having a full-blown computer monitoring I/O&#039;s or a serial port but I find I must keep the price in perspective. </p><p>One of my apps is as a wireless serial protocol converter between a diesel engine and a PC that monitors it. Previously, the PC had to be connected directly to the engine controller using a $20 TTL serial to USB cable. That&#039;s been replaced by a $15 HT-TM02 - and now it&#039;s wireless! If I had to do this application with Arduino, ARM Cortex-M boards, etc I&#039;d have a $100+ invested plus a substantial programming task by the time I assembled all the interfaces (WiFi, USB, serial, etc). Using the HT-TM02 and OpenWRT made this a 1 hour job (really!). OpenWRT helps make it possible - it&#039;s much more than a router OS.</p><p>Cheers,<br />Ron Curry<br />Wingspinner</p><br /><p><strong>ADDITIONAL NOTES, UPDATES, INSTRUCTIONS</strong></p><p><strong>10-2015 - To Upgrade Or Not To Upgrade</strong><br />Now that my patches are part of the main OpenWRT trunk you may want to download the latest sysupgrade image and upgrade your unit. This is not a requirement and, in fact, not recommended unless you have a specific reason to do so. I&#039;ve found the 42649 revision to work fine for most everything I&#039;m doing. If things are working as you wish I recommend not upgrading. </p><p>However, the OpenWRT trunk images benefit from constant improvements and bug fixes and there may be good reasons to upgrade to the latest revision. There are risks though. As with all bleeding edge trunk revisions there may be new bugs and incompatibilities with your existing packages injected since trunk images are automated builds and no testing is done (you are the tester!). Make sure you have the ability to deal with that. Here are some situations where upgrading may be desirable:</p><p>- You need a kernel module that&#039;s not already installed and don&#039;t have access to a repository with the older revision modules (kernel modules are specific to a kernel version and may fail to install if mismatched).</p><p>- You want or need one a new feature or bug fix present in the latest Trunk revision.</p><p>- A particular package you plan to install is not compatible with the older Trunk revision kernel and libraries.</p><p>If you do decide to upgrade using the latest trunk image I recommend that you do not retain configuration files and redo your configuration from scratch as some of the config files may have changed as well. </p><p>To upgrade to the latest trunk image, follow the &quot;Downloads&quot; link on the openwrt.org website and download and install the latest trunk sysupgrade image using LUCI (or the command line sysupgrade script). Note that the powers that be decided to make all the images in the trunk downloads basic images with only the most basic kernel modules and packages. It&#039;s likely that you&#039;ll need more than that. In my &quot;Factory&quot; image there are several more kernel modules&nbsp; to more fully support the built-in hardware and make for a more useful system so you may want to add those back in. Here is the original default configuration for reference. Use this list to add these back in via Luci or apt:</p><p>define Profile/HT-TM02<br />&nbsp; &nbsp; NAME:=HOOTOO HT-TM02<br />&nbsp; &nbsp; PACKAGES:=\<br />&nbsp; &nbsp; &nbsp; &nbsp; wpad-mini \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-ledtrig-netdev kmod-ledtrig-timer kmod-leds-gpio kmod-ledtrig-default-on \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-usb-core kmod-usb-ohci kmod-usb2 kmod-usb-net usbutils \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-scsi-core kmod-scsi-generic kmod-fs-ext4 \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-usb-storage kmod-usb-storage-extras block-mount \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-usb-serial kmod-usb-serial-ftdi kmod-gpio-button-hotplug \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-nls-cp437 kmod-nls-iso8859-1 kmod-nls-utf8 luci luci-mod-admin-full \<br />&nbsp; &nbsp; &nbsp; &nbsp; kmod-app-samba luci-theme-openwrt luci-proto-relay relayd nano \<br />&nbsp; &nbsp; &nbsp; &nbsp; fstools <br />endef</p><p>One last note on this. If you have a desire/need to use the latest trunk revisions I strongly recommend setting up the OpenWRT build environment and building your own images. If you follow the wiki instructions for installing it it&#039;s actually pretty easy and it will save you a lot of headaches and time. </p><br /><p><strong>01-01-2015 - In-Circuit FLASH Programming</strong><br />Note: This is an advanced topic and if you aren&#039;t familiar with FLASH programming and the associated tools it&#039;s probably best to skip this until you&#039;ve done some additional research.</p><p>- I&#039;ve discovered that the board is compatible with in-circuit programming of the flash chip which makes for easy debricking,&nbsp; upgrading of uboot, or reverting back to the HooToo firmware. I use the &quot;flashrom&quot; app along with the TIAO Tumpa (USB Multi-Protocol Adapter) <a href="http://www.diygadget.com/tiao-usb-multi-protocol-adapter-jtag-spi-i2c-serial.html">http://www.diygadget.com/tiao-usb-multi … erial.html</a>, and one of these: <a href="http://www.ebay.com/itm/141377097279?_trksid=p2059210.m2749.l2649&amp;ssPageName=STRK%3AMEBIDX%3AIT">http://www.ebay.com/itm/141377097279?_t … EBIDX%3AIT</a>&nbsp; &nbsp;I&#039;ve found this to be sometimes quicker and easier than TFTP unless one keeps a TFTP server setup and ready to go whenever it&#039;s needed.</p><p><strong>03-23-2015 - Repository Pathnames Have Changed</strong><br />For some reason the OpenWRT team has changed the pathnames for the package repositories. Most of the newer revision packages work just fine (some don&#039;t and I plan on releasing a new &quot;Factory&quot; image based on the latest Trunk revision soon). You can repair this via Luci or the command line here&#039;s what they should be:</p><p>src/gz chaos_calmer_base <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/base">http://downloads.openwrt.org/snapshots/ … kages/base</a><br />src/gz chaos_calmer_luci <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/luci">http://downloads.openwrt.org/snapshots/ … kages/luci</a><br />src/gz chaos_calmer_management <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/management">http://downloads.openwrt.org/snapshots/ … management</a><br />src/gz chaos_calmer_packages <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/packages">http://downloads.openwrt.org/snapshots/ … s/packages</a><br />src/gz chaos_calmer_routing <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/routing">http://downloads.openwrt.org/snapshots/ … es/routing</a><br />src/gz chaos_calmer_telephony <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/telephony">http://downloads.openwrt.org/snapshots/ … /telephony</a></p><p><strong>03-24-2015 - New &quot;Factory&quot; images available</strong><br />I&#039;ve generated new factory upgrade images based on the latest (as of this writing) trunk sources - revision 44945. Also, I&#039;ve provided a complete repository of packages so they&#039;ll available in the future. Please go to my github repository and read the readme files for more info: <a href="https://github.com/wingspinner/HooToo-Tripmate-HT-TM02-OpenWRT">https://github.com/wingspinner/HooToo-T … 02-OpenWRT</a></p><p><strong>03-24-2015 - Tool available to Create &quot;Factory&quot; Images</strong><br />Ideally, this would be integrated with the OpenWRT Buildroot tool however I haven&#039;t gotten around to that yet. In the mean time I&#039;ve created and released under the&nbsp; Creative Commons Attribution-ShareAlike 3.0 Unported License a tool that will created a new &quot;Factory&quot; image compatible with the HT-TM02 and HT-TM04 (it may work for other HooToo devices and possibly some other non-HooToo devices sold under different names but I haven&#039;t personally verified this).&nbsp; It&#039;s currently a somewhat complex shell script but if someone has the time to rewrite it in C I wouldn&#039;t mind. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> It requires as input a TM02/TM04 &quot;sysupgrade&quot; image and a UBoot image. More details are available on my GitHub site under the &quot;tools&quot; folder: <a href="https://github.com/wingspinner/HooToo-Tripmate-HT-TM02-OpenWRT">https://github.com/wingspinner/HooToo-T … 02-OpenWRT</a>. </p><p><strong>03-25-2015 - HT-TM04 Compatibility Verified</strong><br />I&#039;ve verified that the TM02 images work just fine on the TM04 with no modifications. LED and switches are mapped identically. I used the MMC and SD kernel modules and the SD card works fine as well. As far as I can tell it&#039;s fully compatible with the TM02 and everything works fine. Have at it!</p>											<p class="post-edited">(Last edited by <strong>wingspinner</strong> on 25 Mar 2015, 18:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248604">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						1 Oct 2014, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>Patches for r42649..</p><br /><p>These patches provide support for the Tripmate HT-TM02 personal router including LEDs and reset button. “Mode” switch is not supported. These patches install new buildroot profile a full set of packages (edit the patch prior to applying if you want a more basic initial config) required to enable LEDs, USB, and LUCI. Patches were applied against trunk snapshot r42649. Functionality has been tested in AP, basic wifi client, wifi router, and routed client &quot;bridge&quot; modes - all good so far..... Also, USB works great with storage devices as well as USB/Serial adapters. Lastly, even though it only uses a &quot;chip&quot; antenna they did a really nice job of putting a good front-end on the RF circuity and the receiver is very sensitive - i.e. WIFI works quite well. In fact, I&#039;m using one of them as an wifi client bridge as I write this.</p><p>Anyhow, here are the patches:</p><br /><br /><div class="codebox"><pre><code>diff --git a/target/linux/ramips/base-files/etc/board.d/01_leds b/target/linux/ramips/base-files/etc/board.d/01_leds
index bf646ed..4cf49b5 100755
--- a/target/linux/ramips/base-files/etc/board.d/01_leds
+++ b/target/linux/ramips/base-files/etc/board.d/01_leds
@@ -112,6 +112,10 @@ case $board in
    hlk-rm04)
        set_wifi_led &quot;rt2800pci-phy0::radio&quot;
        ;;
+        ht-tm02)
+        ucidef_set_led_netdev &quot;eth&quot; &quot;ETH&quot; &quot;ht-tm02:white:status&quot; &quot;eth0&quot;
+        set_wifi_led &quot;ht-tm02:blue:wifi&quot;
+                ;;
    all0239-3g|\
    hw550-3g)
        set_usb_led &quot;hw550-3g:green:usb&quot;
diff --git a/target/linux/ramips/base-files/etc/board.d/02_network b/target/linux/ramips/base-files/etc/board.d/02_network
index e027b3b..c462fd8 100755
--- a/target/linux/ramips/base-files/etc/board.d/02_network
+++ b/target/linux/ramips/base-files/etc/board.d/02_network
@@ -97,6 +97,12 @@ ramips_setup_interfaces()
        ucidef_add_switch_vlan &quot;switch0&quot; &quot;2&quot; &quot;4 9t&quot;
        ;;

+    ht-tm02)
+        ucidef_set_interface_lan &quot;eth0.1&quot;
+        ucidef_add_switch &quot;switch0&quot; &quot;1&quot; &quot;1&quot;
+        ucidef_add_switch_vlan &quot;switch0&quot; &quot;1&quot; &quot;4 6t&quot;
+        ;;
+
    3g-6200n | \
    dir-610-a1 | \
    dir-300-b7 | \
@@ -253,6 +259,7 @@ ramips_setup_macs()
    hlk-rm04 | \
    mpr-a1 | \
    mpr-a2 | \
+        ht-tm02 | \
    dir-300-b7 | \
    dir-320-b1 | \
    psr-680w |\
diff --git a/target/linux/ramips/base-files/etc/diag.sh b/target/linux/ramips/base-files/etc/diag.sh
index 9ad7ccb..9752eb2 100755
--- a/target/linux/ramips/base-files/etc/diag.sh
+++ b/target/linux/ramips/base-files/etc/diag.sh
@@ -63,6 +63,9 @@ get_status_led() {
    hlk-rm04)
        status_led=&quot;hlk-rm04:red:power&quot;
        ;;
+    ht-tm02)
+        status_led=&quot;ht-tm02:white:status&quot;
+        ;;
    all0239-3g|\
    hw550-3g)
        status_led=&quot;hw550-3g:green:status&quot;
diff --git a/target/linux/ramips/base-files/lib/ramips.sh b/target/linux/ramips/base-files/lib/ramips.sh
index bb42ace..68ff509 100755
--- a/target/linux/ramips/base-files/lib/ramips.sh
+++ b/target/linux/ramips/base-files/lib/ramips.sh
@@ -157,6 +157,9 @@ ramips_board_detect() {
    *&quot;HILINK HLK-RM04&quot;)
        name=&quot;hlk-rm04&quot;
        ;;
+    *&quot;HOOTOO HT-TM02&quot;)
+        name=&quot;ht-tm02&quot;
+        ;;
    *&quot;HAME MPR-A1&quot;)
         name=&quot;mpr-a1&quot;
         ;;
diff --git a/target/linux/ramips/base-files/lib/upgrade/platform.sh b/target/linux/ramips/base-files/lib/upgrade/platform.sh
index 407c218..4aec780 100755
--- a/target/linux/ramips/base-files/lib/upgrade/platform.sh
+++ b/target/linux/ramips/base-files/lib/upgrade/platform.sh
@@ -52,6 +52,7 @@ platform_check_image() {
    hw550-3g | \
    hg255d | \
    hlk-rm04 | \
+    ht-tm02 | \
    ip2202 | \
    m3 | \
    m4 | \
diff --git a/target/linux/ramips/dts/HT-TM02.dts b/target/linux/ramips/dts/HT-TM02.dts
new file mode 100644
index 0000000..1f456f0
--- /dev/null
+++ b/target/linux/ramips/dts/HT-TM02.dts
@@ -0,0 +1,104 @@
+/dts-v1/;
+
+/include/ &quot;rt5350.dtsi&quot;
+
+/ {
+    compatible = &quot;HT-TM02&quot;, &quot;ralink,rt5350-soc&quot;;
+    model = &quot;HOOTOO HT-TM02&quot;;
+
+    palmbus@10000000 {
+
+               gpio0: gpio@600 {
+            status = &quot;okay&quot;;
+               };
+               
+        spi@b00 {
+            status = &quot;okay&quot;;
+            m25p80@0 {
+                #address-cells = &lt;1&gt;;
+                #size-cells = &lt;1&gt;;
+                compatible = &quot;mx25l6405d&quot;;
+                reg = &lt;0 0&gt;;
+                linux,modalias = &quot;m25p80&quot;, &quot;mx25l6405d&quot;;
+                spi-max-frequency = &lt;10000000&gt;;
+
+                partition@0 {
+                    label = &quot;u-boot&quot;;
+                    reg = &lt;0x0 0x30000&gt;;
+                    read-only;
+                };
+
+                partition@30000 {
+                    label = &quot;u-boot-env&quot;;
+                    reg = &lt;0x30000 0x10000&gt;;
+                    read-only;
+                };
+
+                factory: partition@40000 {
+                    label = &quot;factory&quot;;
+                    reg = &lt;0x40000 0x10000&gt;;
+                    read-only;
+                };
+
+                partition@50000 {
+                    label = &quot;firmware&quot;;
+                    reg = &lt;0x50000 0x7b0000&gt;;
+                };
+            };
+        };
+    };
+
+    pinctrl {
+        state_default: pinctrl0 {
+            gpio {
+                ralink,group = &quot;i2c&quot;, &quot;jtag&quot;, &quot;uartf&quot;;
+                ralink,function = &quot;gpio&quot;;
+            };
+        };
+    };
+
+    ethernet@10100000 {
+        mtd-mac-address = &lt;&amp;factory 0x4&gt;;
+    };
+
+    esw@10110000 {
+        ralink,portmap = &lt;0x3f&gt;;
+    };
+
+    wmac@10180000 {
+        ralink,mtd-eeprom = &lt;&amp;factory 0&gt;;
+    };
+
+    ehci@101c0000 {
+        status = &quot;okay&quot;;
+    };
+
+    ohci@101c1000 {
+        status = &quot;okay&quot;;
+    };
+
+    gpio-leds {
+        compatible = &quot;gpio-leds&quot;;
+        wifi  {
+            label = &quot;ht-tm02:blue:wifi&quot;;
+            gpios = &lt;&amp;gpio0 7 1&gt;;
+        };
+        status  {
+            label = &quot;ht-tm02:yellow:status&quot;;
+            gpios = &lt;&amp;gpio0 12 1&gt;;
+        };
+
+    };
+
+    gpio-keys-polled {
+        compatible = &quot;gpio-keys-polled&quot;;
+        #address-cells = &lt;1&gt;;
+        #size-cells = &lt;0&gt;;
+        poll-interval = &lt;20&gt;;
+        wps {
+            label = &quot;reset&quot;;
+            gpios = &lt;&amp;gpio0 10 1&gt;;
+            linux,code = &lt;0x198&gt;;
+        };
+    };
+};
diff --git a/target/linux/ramips/image/Makefile b/target/linux/ramips/image/Makefile
index 35057e4..c365d9d 100644
--- a/target/linux/ramips/image/Makefile
+++ b/target/linux/ramips/image/Makefile
@@ -434,6 +434,8 @@ define BuildFirmware/HLKRM04/initramfs
endef
Image/Build/Profile/HLKRM04=$(call BuildFirmware/HLKRM04/$(1),$(1),hlk-rm04,HLKRM04,HLK-RM02)

+Image/Build/Profile/HT-TM02=$(call BuildFirmware/Default8M/$(1),$(1),ht-tm02,HT-TM02)
+
Image/Build/Profile/M3=$(call BuildFirmware/Poray4M/$(1),$(1),m3,M3)

Image/Build/Profile/M4=$(call BuildFirmware/PorayDualSize/$(1),$(1),m4,M4)
@@ -598,6 +600,7 @@ define Image/Build/Profile/Default
    $(call Image/Build/Profile/FREESTATION5,$(1))
#    $(call Image/Build/Profile/HG255D,$(1))
    $(call Image/Build/Profile/HLKRM04,$(1))
+    $(call Image/Build/Profile/HT-TM02,$(1))
    $(call Image/Build/Profile/HW550-3G,$(1))
    $(call Image/Build/Profile/IP2202,$(1))
    $(call Image/Build/Profile/M3,$(1))
diff --git a/target/linux/ramips/rt305x/profiles/hootoo.mk b/target/linux/ramips/rt305x/profiles/hootoo.mk
new file mode 100644
index 0000000..bbb8143
--- /dev/null
+++ b/target/linux/ramips/rt305x/profiles/hootoo.mk
@@ -0,0 +1,28 @@
+#
+# Copyright (C) 2013 OpenWrt.org
+#
+# This is free software, licensed under the GNU General Public License v2.
+# See /LICENSE for more information.
+#
+
+
+define Profile/HT-TM02
+    NAME:=HOOTOO HT-TM02
+    PACKAGES:=\
+        wpad-mini \
+        kmod-ledtrig-netdev kmod-ledtrig-timer kmod-leds-gpio kmod-ledtrig-default-on \
+        kmod-usb-core kmod-usb-ohci kmod-usb2 kmod-usb-net usbutils \
+        kmod-scsi-core kmod-scsi-generic kmod-fs-ext4 \
+        kmod-usb-storage kmod-usb-storage-extras block-mount \
+        kmod-usb-serial kmod-usb-serial-ftdi kmod-gpio-button-hotplug \
+        kmod-nls-cp437 kmod-nls-iso8859-1 kmod-nls-utf8 luci luci-mod-admin-full \
+        kmod-app-samba luci-theme-openwrt luci-proto-relay relayd nano \
+        fstools 
+endef
+
+define Profile/HT-TM02/Description
+    Package set for HOOTOO HT-TM02 board
+endef
+
+$(eval $(call Profile,HT-TM02))
+</code></pre></div><br /><p>INSTALLATION NOTES</p><p>Factory firmware update mechanism is not compatible with standard OpenWRT images. I’ve decoded the factory image format and have modified “factory” firmware upgrade images to enable telnet and change the root password as well as created a openwrt &quot;factory&quot; install image.&nbsp; </p><p>I&#039;ve tested various configurations but my primary use is as a routed/relayd client bridge and samba, ftp server using a 32gb USB memory stick. I&#039;ve submitted the patches to the dev group and am assuming I must wait for them to accept them into the trunk before authoring a wiki hardware/installation page so these instructions will have to do for the moment.</p><br /><p>Have at it!</p><p>Cheers,<br />Ron</p>											<p class="post-edited">(Last edited by <strong>wingspinner</strong> on 1 Oct 2014, 18:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249911">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">_DS_</div>
					<div class="post-datetime">
						10 Oct 2014, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>Well, no one else here using those routers, maybe.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250132">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">firebush</div>
					<div class="post-datetime">
						11 Oct 2014, 15:43					</div>
				</div>
				<div class="post-content content">
					<p>Your work is benefiting at least one other person.&nbsp; Last weekend I cloned your repository and replaced my HT-TM02 firmware with one of the binaries.&nbsp; As best as I can tell all seems to be working well.</p><p>I&#039;m not new to software development but this is my first adventure into OpenWrt.&nbsp; I&#039;m hoping to use the HT-TM02 to learn more.&nbsp; This weekend I&#039;d like to get to where I can build my own images.&nbsp; Along those lines, I have a question.&nbsp; If my image turns out to be bad, how do I recover?&nbsp; Before replacing the factory firmware, it looked like I could press the reset switch while powering up and the unit would hold in UBoot.&nbsp; As long as I continued pressing the switch the unit continued to hold.&nbsp; It appeared to be looking for an image to download via TFTP.&nbsp; Does your UBoot work the same way?&nbsp; If so, can I use one of your images at this point to recover?</p><br /><p>Thanks in advance for the info and thanks for making this work!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250177">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Curiouser</div>
					<div class="post-datetime">
						12 Oct 2014, 05:07					</div>
				</div>
				<div class="post-content content">
					<p>The price has fallen to $15 on amazon, for those interested</p><p><a href="http://www.amazon.com/gp/product/B00HZWOQZ6">http://www.amazon.com/gp/product/B00HZWOQZ6</a></p><p>Right now I am debating whether I&#039;ll have the time and drive to tinker with this in the foreseeable future, but your efforts are most certainly appreciated in principle.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250415">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">megahertzcoil</div>
					<div class="post-datetime">
						13 Oct 2014, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>I just wanted to chime in...&nbsp; I just ordered one of these and will certainly be replacing the stock firmware.&nbsp; So I will appreciate any updates!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250451">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">brownpaw</div>
					<div class="post-datetime">
						14 Oct 2014, 00:58					</div>
				</div>
				<div class="post-content content">
					<p>I wanted to say that I am also very interested in this.&nbsp; Mine just came in the mail.&nbsp; I haven&#039;t done much with openwrt in a long time -- how do I install the patch that you posted?</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250531">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">snutting</div>
					<div class="post-datetime">
						14 Oct 2014, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>I just ordered one of these, and I was thrilled to find this thread!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250532">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">vibrolax</div>
					<div class="post-datetime">
						14 Oct 2014, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>This is good work, especially figuring out how to make and install a factory image.&nbsp; Interest will pick up when your work shows up in the trunk, and a few more people have reported success.&nbsp; It&#039;s a chicken-and-egg problem.&nbsp; If you build it, they will come.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250554">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">baluvee</div>
					<div class="post-datetime">
						14 Oct 2014, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>is it possible to go back to Hootoo stock firmware after flashing with your firmware ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250627">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">citrusfizz</div>
					<div class="post-datetime">
						15 Oct 2014, 09:17					</div>
				</div>
				<div class="post-content content">
					<p>Very good work,&nbsp; thank you very much for taking the time to do this,&nbsp; i saw the original post and found your hard work as well.&nbsp; </p><p>I will be spending hours figuring out openwrt thanks to you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250704">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">ken218</div>
					<div class="post-datetime">
						15 Oct 2014, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>The work you did was the deciding factor for me to go for the HT-TM02 router (over MWR102, TL-WR702N, etc), and it is the highest ranking travel router on Amazon.com - I think it also have something to do with the work you have done on this device. </p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250733">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">baluvee</div>
					<div class="post-datetime">
						16 Oct 2014, 04:30					</div>
				</div>
				<div class="post-content content">
					<p>hootoo released their source as open source now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250907">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">megahertzcoil</div>
					<div class="post-datetime">
						17 Oct 2014, 07:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>baluvee wrote:</cite><blockquote><p>hootoo released their source as open source now.</p></blockquote></div><p>I am having trouble finding the source drop from HooToo.&nbsp; I don&#039;t see it on their download page: <a href="http://www.hootoo.com/downloads-HT-TM02.html">http://www.hootoo.com/downloads-HT-TM02.html</a></p><p>I see the source code for the TM01, is that same package?&nbsp; Also, I have been having problems downloading anything from hootoo&#039;s website, seems I am getting connection timeouts after a small (128K or less) segment has downloaded.&nbsp; Anyone else having more luck?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250985">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">brownpaw</div>
					<div class="post-datetime">
						17 Oct 2014, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>megahertzcoil wrote:</cite><blockquote><div class="quotebox"><cite>baluvee wrote:</cite><blockquote><p>hootoo released their source as open source now.</p></blockquote></div><p>I am having trouble finding the source drop from HooToo.&nbsp; I don&#039;t see it on their download page: <a href="http://www.hootoo.com/downloads-HT-TM02.html">http://www.hootoo.com/downloads-HT-TM02.html</a></p><p>I see the source code for the TM01, is that same package?&nbsp; Also, I have been having problems downloading anything from hootoo&#039;s website, seems I am getting connection timeouts after a small (128K or less) segment has downloaded.&nbsp; Anyone else having more luck?</p></blockquote></div><p>I emailed them yesterday about it because I was trying to download their newest firmware.&nbsp; Apparently they&#039;re having an issue with their servers and they&#039;re aware of it -- but support was glad to attach the file I asked for to an email.&nbsp; Maybe give them a try?&nbsp; (support@hootoo.com)&nbsp; They also win for fastest support turnaround.&nbsp; They&#039;ve replied to me on multiple occasions, during normal business hours, within like 15 minutes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250986">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">baluvee</div>
					<div class="post-datetime">
						17 Oct 2014, 18:11					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.hootoo.com/media/downloads/5350%20Source%20Code%20with%20DLNA.zip">http://www.hootoo.com/media/downloads/5 … 20DLNA.zip</a>&nbsp; source</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250988">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">megahertzcoil</div>
					<div class="post-datetime">
						17 Oct 2014, 18:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>baluvee wrote:</cite><blockquote><p><a href="http://www.hootoo.com/media/downloads/5350%20Source%20Code%20with%20DLNA.zip">http://www.hootoo.com/media/downloads/5 … 20DLNA.zip</a>&nbsp; source</p></blockquote></div><p>Thanks, this was the link I was trying yesterday and now appears to be working again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251036">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Preluder</div>
					<div class="post-datetime">
						18 Oct 2014, 05:00					</div>
				</div>
				<div class="post-content content">
					<p>can someone help me with reverting the stock firmware back on the TM02?&nbsp; I have all the files from the USB drive. Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251340">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">megahertzcoil</div>
					<div class="post-datetime">
						20 Oct 2014, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>I started playing around with this more today, only to find that the patches already appear in master as of 2 weeks ago.&nbsp; That will certainly make things easier.&nbsp; </p><p>I am in the process of setting up the device as an OpenVPN client that can create a private wifi network using a public ethernet or wifi network.&nbsp; And a bonus if I can use USB tethering from my phone as the WAN.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251692">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Saqqara</div>
					<div class="post-datetime">
						23 Oct 2014, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Just a note to say I appreciate the work you did on this and the writeup, wingspinner. I&#039;ve just placed an order for one of these for a boat project, If it isn&#039;t the cheapest device with a USB port, it&#039;s surely among the smallest. I may have my work cut out for me as I hope to multiplex some data from serial instruments using kplex code. <a href="https://github.com/CaesarSchinas/kplex-openwrt">https://github.com/CaesarSchinas/kplex-openwrt</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252323">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">iainmg</div>
					<div class="post-datetime">
						28 Oct 2014, 17:19					</div>
				</div>
				<div class="post-content content">
					<p>I certainly congratulate you on your efforts to install more functional software on this excellent piece of hardware. I bought the TM02 several months ago when looking for a replacement for a bulky Netgear solution to bridge public wifi at various caravan sites. The supplied software was not able to cope with the majority of sites - however OpenWRT does.  Only one problem - I haven&#039;t found a way of configuring the box over Wifi if the bridged network is not available (or deleted first) - I have had to resort to connecting to a PC via Ethernet. <br />Any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252650">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						31 Oct 2014, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>firebush wrote:</cite><blockquote><p>Your work is benefiting at least one other person.&nbsp; Last weekend I cloned your repository and replaced my HT-TM02 firmware with one of the binaries.&nbsp; As best as I can tell all seems to be working well.</p><p>I&#039;m not new to software development but this is my first adventure into OpenWrt.&nbsp; I&#039;m hoping to use the HT-TM02 to learn more.&nbsp; This weekend I&#039;d like to get to where I can build my own images.&nbsp; Along those lines, I have a question.&nbsp; If my image turns out to be bad, how do I recover?&nbsp; Before replacing the factory firmware, it looked like I could press the reset switch while powering up and the unit would hold in UBoot.&nbsp; As long as I continued pressing the switch the unit continued to hold.&nbsp; It appeared to be looking for an image to download via TFTP.&nbsp; Does your UBoot work the same way?&nbsp; If so, can I use one of your images at this point to recover?</p><br /><p>Thanks in advance for the info and thanks for making this work!</p></blockquote></div><br /><p>Glad to hear you got it working! </p><p>WRT to UBoot, I didn&#039;t build the UBoot image. It&#039;s the same UBoot image that&#039;s being passed around for use on several of the RAMIPS platforms and it&#039;s just a basic, standard UBoot configuration (which is why I found no reason to generate my own). The stock booter is a combination of UBoot and some additional customized scripts that have an incompatible MTD partitioning coded in which cannot be changed without some reverse engineering. As far as the button is concerned I don&#039;t know if it works that way but that sounds handy and I wasn&#039;t aware the stock booter worked that way but I&#039;ll try it (as you may want to do as well). </p><p>BTW, once you get in to UBoot you can change the boot delay to something longer if you wish. I changed my to 10 seconds because the default 3 secondes is just too short.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252651">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						31 Oct 2014, 17:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brownpaw wrote:</cite><blockquote><p>I wanted to say that I am also very interested in this.&nbsp; Mine just came in the mail.&nbsp; I haven&#039;t done much with openwrt in a long time -- how do I install the patch that you posted?</p><p>Thank you!</p></blockquote></div><br /><p>It&#039;s in the trunk now!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252652">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						31 Oct 2014, 17:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>megahertzcoil wrote:</cite><blockquote><p>I started playing around with this more today, only to find that the patches already appear in master as of 2 weeks ago.&nbsp; That will certainly make things easier.&nbsp; </p><p>I am in the process of setting up the device as an OpenVPN client that can create a private wifi network using a public ethernet or wifi network.&nbsp; And a bonus if I can use USB tethering from my phone as the WAN.</p></blockquote></div><br /><p>Yes, I just saw that the OpenWRT team accepted my patches and it&#039;s now officially part of the trunk. Awesome!</p><p>You&#039;ll need to install the appropriate kernel modules and other packages to do tethering. The trunk image is basic functionality.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252655">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						31 Oct 2014, 17:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Saqqara wrote:</cite><blockquote><p>Just a note to say I appreciate the work you did on this and the writeup, wingspinner. I&#039;ve just placed an order for one of these for a boat project, If it isn&#039;t the cheapest device with a USB port, it&#039;s surely among the smallest. I may have my work cut out for me as I hope to multiplex some data from serial instruments using kplex code. <a href="https://github.com/CaesarSchinas/kplex-openwrt">https://github.com/CaesarSchinas/kplex-openwrt</a></p></blockquote></div><p>Thanks for the info. Can you provide a link to something less expensive with the same (or better!) functionality? At $15 including the case we haven&#039;t found anything but are eager to know about it if there is! As with many of these small routers, the FLASH and RAM sizes can be a restriction. We have already bumped up against the 8mb flash size for one application (using ffmpg).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 27</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=27.html">27</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>