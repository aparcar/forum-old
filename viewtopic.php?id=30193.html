<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> backfire and opkg upgrade</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p136055">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">shakle</div>
					<div class="post-datetime">
						26 May 2011, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>I need to update all packages. how can I do? There is a command like apt-get upgrade or dist-upgrade in opkg ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136095">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">shakle</div>
					<div class="post-datetime">
						27 May 2011, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>anyone can help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p136096">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						27 May 2011, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>No there ain&#039;t. Search wiki for &quot;opkg&quot; and for &quot;flash layout&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139967">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wavesailor</div>
					<div class="post-datetime">
						26 Jul 2011, 11:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shakle wrote:</cite><blockquote><p>I need to update all packages. how can I do? There is a command like apt-get upgrade or dist-upgrade in opkg ?</p></blockquote></div><p>Try this <a href="http://wiki.openwrt.org/doc/howto/generic.sysupgrade">http://wiki.openwrt.org/doc/howto/generic.sysupgrade</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139981">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">scruffy</div>
					<div class="post-datetime">
						26 Jul 2011, 14:02					</div>
				</div>
				<div class="post-content content">
					<p>Yes yes theres is: Read this: <a href="http://wiki.openwrt.org/doc/techref/opkg">http://wiki.openwrt.org/doc/techref/opkg</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208436">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						29 Jul 2013, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>So I get that the reason that there&#039;s no &quot;upgrade all&quot; functionality is that the JFFS2 partition will get full. It is even adviced against using upgrade at all. But what if I use virtually unlimited USB storage? </p><p>I used to have an Optware installation on DD-WRT and regularly upgraded all packages using </p><div class="codebox"><pre><code>ipkg-opt upgrade</code></pre></div><p>Granted, DD-WRT doesn&#039;t have new recommended firmwares available regularly, so upgrading packages is called for more often. But still, I think it&#039;d be nice to have &quot;upgrade all&quot; functionality in opkg. Or a subset of the installed packages (e.g. don&#039;t include kernel modules).</p><p>Any thoughts?</p>											<p class="post-edited">(Last edited by <strong>Flint</strong> on 29 Jul 2013, 22:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208636">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						31 Jul 2013, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>I now read this: <a href="http://wiki.openwrt.org/doc/howto/extroot#system.upgrade">http://wiki.openwrt.org/doc/howto/extro … em.upgrade</a> , which is pretty straightforward, saying that very bad things can happen if you upgrade kernel modules and the like. But normal programs like samba, asterisk, text editors etc etc... those can be safely upgraded, can&#039;t they?</p>											<p class="post-edited">(Last edited by <strong>Flint</strong> on 31 Jul 2013, 15:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208642">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						31 Jul 2013, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>If you don&#039;t run out of flash halfway then yes, they probably can - unless the uclibc abi changed, then stuff is going to break down completely.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208678">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						31 Jul 2013, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>But I use extroot <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Another question: How often, if at all,&nbsp; do people update packages in the repository for a &#039;release&#039; version of Openwrt, like 12.09 Attitude Adjustment, e.g. here: <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/brcm47xx/generic/packages/">http://downloads.openwrt.org/attitude_a … /packages/</a> ? </p><p>Is this just a stale repository of packages which is not changed anymore? Otherwise, if there are some regular updates in there you could just upgrade everything I guess.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209046">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						5 Aug 2013, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>Can somebody answer the above questions? How often are the different repositories updated? And how should the user cope with them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209344">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						9 Aug 2013, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>I thought about updating the wiki with this stuff. I think there should be a well defined line between packages that are allowed to be upgraded and are not. Does anyone agree? </p><p>And still the question remains... in released stable versions, do the build bots also sometimes update the corresponding repositories or are they only working on trunk packages? I guess not, because in here <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/brcm47xx/generic/packages/">http://downloads.openwrt.org/attitude_a … /packages/</a> all the modified dates are 03-Apr-2013. </p><p>So I though maybe we could mention in the wiki that if someone wants a newer version of&nbsp; a package they could look in the trunk repository? Should I go ahead and put that in?</p>											<p class="post-edited">(Last edited by <strong>Flint</strong> on 9 Aug 2013, 14:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209347">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						9 Aug 2013, 14:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Flint wrote:</cite><blockquote><p>So I though maybe we could mention in the wiki that if someone wants a newer version of&nbsp; a package they could look in the trunk repository? Should I go ahead and put that in?</p></blockquote></div><p>Please remember that the updated packages may be kernel-version dependent. So trying to install a package that has been modified for a new kernel (it trunk) may brick your router with </p><p>Trunk packages are meant to be used with the whole trunk version, AA packages with the AA base system. So, I wouldn&#039;t put in the wiki that use trunk packages with old releases. Like jow said, most programs probably will work, but some will not (those with any kernel dependencies that will be automatically installed) and they may briock the router.</p><p>And buildbots only build trunk. Old releases may have maintenance releases (like BF 10.03.1), and then all the packages are built at the same time. But otherwise the release repository of the AA packages is &quot;stable&quot;, not &quot;stale&quot;... ;-)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 9 Aug 2013, 14:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209349">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						9 Aug 2013, 14:54					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for clearing that up. We don&#039;t want bricked routers, but isn&#039;t there a safety build-in: for example I got the other day:</p><div class="codebox"><pre><code>Multiple packages (kmod-nls-base and kmod-nls-base) providing same name marked HOLD or PREFER. Using latest.
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-nls-utf8:
 *      kernel (= 3.10.4-1-5d295f6cc53dba0771c396587bdee1c9) *
 * opkg_install_cmd: Cannot install package kmod-nls-utf8.</code></pre></div><p>it seems my trunk kernel is too old for the most current kmod-nls-utf8 package. So doesn&#039;t this automatically guard against incompatible packages?</p><p>I&#039;m asking this because many people don&#039;t upgrade their OpenWRT installation every month, or even every year. But they still want upgraded packages sometimes, which may in some cases even be required to use them. At least there could be a remark that the stable packages are guaranteed to work with the latest OpenWRT release and that if an upgraded package is required you can (maybe with a certain risk involved) get the trunk one.</p><p>I used Optware before, where there is only one repository for each target system/CPU. Also I believe there are no kernel packages in it. It seems Optware is now obsolete so I&#039;m now using opkg (which is called &#039;Entware&#039; also isn&#039;t it?)</p>											<p class="post-edited">(Last edited by <strong>Flint</strong> on 9 Aug 2013, 14:55)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>