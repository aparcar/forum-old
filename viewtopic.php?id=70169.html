<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Valgrind + MIPS 24KEc + Kernel 3.18.21 + MUSL</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p353864">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">PatchyFog</div>
					<div class="post-datetime">
						9 Mar 2017, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>Hello.</p><p>I can&#039;t seem to get the Valgrind + MIPS 24KEc + Kernel 3.18.21 + MUSL combination to work on our embedded system. 3.10.1 and 3.11 just sit there hung when running a dead simple &quot;hello world&quot; program:</p><p>&nbsp; </p><div class="codebox"><pre><code> valgrind --leak_check=yes ./hello</code></pre></div><p>And if I take 3.12 and apply the 3.11 patches to it, I get output, but everything sefaults.</p><div class="codebox"><pre><code>root@DA-FE:/usr/local/bin# valgrind --leak-check=yes ./hello 
==3915== Memcheck, a memory error detector
==3915== Copyright (C) 2002-2015, and GNU GPL&#039;d, by Julian Seward et al.
==3915== Using Valgrind-3.12.0 and LibVEX; rerun with -h for copyright info
==3915== Command: ./hello
==3915== 
==3915== Invalid read of size 4
==3915==    at 0x48C3154: free (in /usr/lib/valgrind/vgpreload_memcheck-mips32-linux.so)
==3915==    by 0x4088C04: ??? (in /lib/libc.so)
==3915==  Address 0x1e0d8 is not stack&#039;d, malloc&#039;d or (recently) free&#039;d
==3915== 
==3915== 
==3915== Process terminating with default action of signal 11 (SIGSEGV)
==3915==  Access not within mapped region at address 0x1E0D8
==3915==    at 0x48C3154: free (in /usr/lib/valgrind/vgpreload_memcheck-mips32-linux.so)
==3915==    by 0x4088C04: ??? (in /lib/libc.so)
==3915==  If you believe this happened as a result of a stack
==3915==  overflow in your program&#039;s main thread (unlikely but
==3915==  possible), you can try to increase the size of the
==3915==  main thread stack using the --main-stacksize= flag.
==3915==  The main thread stack size used in this run was 8388608.
==3915== 
==3915== HEAP SUMMARY:
==3915==     in use at exit: 0 bytes in 0 blocks
==3915==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated
==3915== 
==3915== All heap blocks were freed -- no leaks are possible
==3915== 
==3915== For counts of detected and suppressed errors, rerun with: -v
==3915== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
Segmentation fault</code></pre></div><p>What dark magic must I do to access Valgrind power on MUSL/MIPS ?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353865">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">PatchyFog</div>
					<div class="post-datetime">
						9 Mar 2017, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Oh, we&#039;re using a version of Designated Driver we snapped about a year ago -- with the odd mods and updates, but MUSL is at 1.1.12.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>