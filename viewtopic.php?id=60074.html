<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is this a bug about ethernet loopback checking?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p294499">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">evilroach</div>
					<div class="post-datetime">
						3 Oct 2015, 21:40					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using a OpenWRT(Chaos Calmer r45323) on a hardware platform that is named &quot;HuaWei HG255D&quot;, while my optical modem supplys one ethernet port(ETH1) for Internet traffic, and another one ethernet port(ETH2) for IPTV.<br />Due to there is only one physical ethernet line from my optical fiber modem to my TV and another OpenWRT device that is named &quot;Tp-Link WR843N&quot;, I used two VLANs to carry both of two kinds of traffic on single physical Ethernet link.<br />The VLAN1 is used for LAN whose VLAN ID is &quot;1&quot;, as well as the VLAN43 is used for IPTV whose ID is &quot;43&quot;.<br />The port0 of HG255d is used for WAN link,&nbsp; Which belongs to VLAN2 with a VLAN ID of &quot;2&quot;.</p><p>In HG255d:<br />VLAN1 includes the port3(untagged), port4(untagged), port1(tagged), and the CPU port(tagged);<br />VLAN2 includes the port0(untagged) and the CPU port(tagged);<br />VLAN43 includes the port2(untagged), port1(tagged).</p><br /><p>So you can see that the port1 is my VLAN trunk port to the WR843N, the port2 is my TV data link to ETH2 of my optical moden, as well as the port0 is my WAN link to EHT1 of same optical modem.<br />Meanwhile, there is a corresponding configuration on the WR843N, it branches the traffic into TV and LAN.<br />The trouble I met is that the port0 and port2 can not be pluged at the same time.<br />I guess some job had been done in HG255d about so called &quot;ethernet loopback checking&quot;?<br />Although these are two physical links from the HG255d to my optical modem,<br />but I did not agree this is a right checking behavior, because the port0 and the port2 logically belong to different VLANs separately.<br />Is this a bug, or I am wrong ?</p>											<p class="post-edited">(Last edited by <strong>evilroach</strong> on 3 Oct 2015, 22:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294504">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">evilroach</div>
					<div class="post-datetime">
						3 Oct 2015, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>In my WR843N which loading older OpenWRT(Attitude Adjustment), no similar trouble had been met.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>