<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> rb532 problem flashing image to nand</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p95658">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">newguy</div>
					<div class="post-datetime">
						10 Oct 2009, 06:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,<br />I am not having any success in flashing 8.09 to NAND on this unit. It loads the .bin file to CF and works OK, but I get kernel panic when I try to netboot (openwrt-rb532-vmlinux). I have tried more than one snapshot fileas well as&nbsp; 8.09.1 and 8.09.2-RC2.&nbsp; I have even compiled it myself and I keep getting<br /> &quot;Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.&quot;</p><p>Am I doing something wrong?? </p><p>See my output below.</p><br /><p> RouterBoard 532A</p><p>CPU frequency: 399 MHz<br />&nbsp; Memory size:&nbsp; 64 MB</p><p>Press any key within 5 seconds to enter setup.....<br />kernel not found<br />trying dhcp protocol... OK<br />resolved mac address 00:08:A1:A5:3C:F2<br />Gateway: 10.10.200.254<br />transfer started ....... transfer ok, time=0.18s<br />setting up elf image... OK<br />jumping to kernel code<br />Linux version 2.6.30.8 (buildbot@localhost.localdomain) (gcc version 4.1.2) #1 Wed Oct 7 12:51:26 CDT 2009<br />CPU revision is: 0001800a (MIPS 4Kc)<br />Determined physical RAM map:<br /> memory: 47fe79fc @ b8018400 (usable)<br />User-defined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: console=ttyS0,115200 gpio=16383 mem=64M kmac=00:0C:42:0F:A0:8C board=500r5 boot=1 root=/dev/mtdblock1 rootfstype=yaffs <br />korina mac = 00:0C:42:0F:A0:8C<br />Primary instruction cache 8kB, VIPT, 4-way, linesize 16 bytes.<br />Primary data cache 8kB, 4-way, VIPT, no aliases, linesize 16 bytes<br />NR_IRQS:256<br />Initializing IRQ&#039;s: 168 out of 256<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />calculating r4koff... 000c34f8(799992)<br />CPU frequency 400.00 MHz<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 60956k/65536k available (2192k kernel code, 4508k reserved, 476k data, 136k init, 0k highmem)<br />Calibrating delay loop... 398.33 BogoMIPS (lpj=796672)<br />Mount-cache hash table entries: 512<br />net_namespace: 1008 bytes<br />NET: Registered protocol family 16<br />PCI: Initializing PCI<br />bio: create slab &lt;bio-0&gt; at 0<br />SCSI subsystem initialized<br />pci 0000:00:02.0: PME# supported from D1 D2 D3hot D3cold<br />pci 0000:00:02.0: PME# disabled<br />pci 0000:00:03.0: PME# supported from D1 D2 D3hot D3cold<br />pci 0000:00:03.0: PME# disabled<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ?Â© 2001-2006 Red Hat, Inc.<br />yaffs Oct&nbsp; 7 2009 12:45:42 Installing. <br />msgmni has been set to 119<br />alg: No test for lzma (lzma-generic)<br />alg: No test for stdrng (krng)<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 104) is a 16550A<br />console [ttyS0] enabled<br />serial8250.0: ttyS0 at MMIO 0x0 (irq = 104) is a 16550A<br />Driver &#039;sd&#039; needs updating - please use bus_type methods<br />PATA driver for RouterBOARD 532 Compact Flash version 0.1.0<br />scsi0 : pata-rb532-cf<br />ata1: PATA max PIO4 irq 149<br />via-rhine.c:v1.10-LK1.4.3 2007-03-06 Written by Donald Becker<br />PCI: Enabling device 0000:00:02.0 (0080 -&gt; 0083)<br />eth0: VIA Rhine III at 0x50010000, 00:0c:42:0f:a0:8d, IRQ 142.<br />eth0: MII PHY found at address 1, status 0x7849 advertising 05e1 Link 0000.<br />PCI: Enabling device 0000:00:03.0 (0080 -&gt; 0083)<br />eth1: VIA Rhine III at 0x50010100, 00:0c:42:0f:a0:8e, IRQ 143.<br />eth1: MII PHY found at address 1, status 0x7849 advertising 05e1 Link 0000.<br />eth2 (korina): not using net_device_ops yet<br />NAND device: Manufacturer ID: 0xad, Chip ID: 0xf1 (Hynix NAND 128MiB 3,3V 8-bit)<br />Scanning device for bad blocks<br />Creating 2 MTD partitions on &quot;gen_nand&quot;:<br />0x000000000000-0x000000400000 : &quot;Routerboard NAND boot&quot;<br />ata1.00: CFA: SanDisk SDCFH-256, FhDA0145, max PIO4<br />ata1.00: 501760 sectors, multi 0: LBA <br />ata1.00: configured for PIO4<br />scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;ATA&nbsp; &nbsp; &nbsp; SanDisk SDCFH-25 FhDA PQ: 0 ANSI: 5<br />sd 0:0:0:0: [sda] 501760 512-byte hardware sectors: (256 MB/245 MiB)<br />sd 0:0:0:0: [sda] Write Protect is off<br />sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA<br /> sda:&lt;5&gt;0x000000400000-0x000008000000 : &quot;rootfs&quot;<br /> sda1 sda2<br />rc32434_wdt: Stopped watchdog timer.<br />rc32434_wdt: Watchdog Timer version 1.0, timer margin: 20 sec<br />Registered led device: uled<br />sd 0:0:0:0: [sda] Attached SCSI removable disk<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />yaffs: dev is 32505857 name is &quot;mtdblock1&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 31.1, &quot;mtdblock1&quot;<br />yaffs_read_super: isCheckpointed 0<br />VFS: Mounted root (yaffs2 filesystem) readonly on device 31:1.<br />Freeing unused kernel memory: 136k freed<br />Please be patient, while OpenWrt loads ...<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p><br /><p> Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96215">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">newguy</div>
					<div class="post-datetime">
						22 Oct 2009, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>I have been compiling my own images and can now load the new image. However when I try to boot the image, here is what I get,&nbsp; &quot;FPU emulator disabled, make sure your toolchain was compiled with software floating point support (soft-float)&quot;.</p><p>Has anyone else tried this before? I am tying to figure out what adjustments to make but no luck so far. Any ideas??</p><p>Thanks</p><br /><p>See the full output below.</p><br /><br /><p>RouterBOOT booter 2.18</p><p>RouterBoard 532A</p><p>CPU frequency: 399 MHz<br />&nbsp; Memory size:&nbsp; 64 MB</p><p>Press any key within 5 seconds to enter setup.....<br />loading kernel from nand... OK<br />setting up elf image... OK<br />jumping to kernel code<br />Linux version 2.6.30.8 (root@debian1) (gcc version 4.1.2) #8 Thu Oct 22 00:47:42 EST 2009<br />CPU revision is: 0001800a (MIPS 4Kc)<br />Determined physical RAM map:<br /> memory: 47fe79fc @ b8018400 (usable)<br />User-defined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: console=ttyS0,115200 gpio=16383 mem=64M kmac=00:0C:42:0F:A0:8C board=500r5 boot=1 block2mtd.block2mtd=/dev/sda2,131072 <br />korina mac = 00:0C:42:0F:A0:8C<br />Primary instruction cache 8kB, VIPT, 4-way, linesize 16 bytes.<br />Primary data cache 8kB, 4-way, VIPT, no aliases, linesize 16 bytes<br />NR_IRQS:256<br />Initializing IRQ&#039;s: 168 out of 256<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />calculating r4koff... 000c34f8(799992)<br />CPU frequency 400.00 MHz<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 61156k/65536k available (2080k kernel code, 4308k reserved, 397k data, 132k init, 0k highmem)<br />Calibrating delay loop... 398.33 BogoMIPS (lpj=796672)<br />Mount-cache hash table entries: 512<br />net_namespace: 528 bytes<br />NET: Registered protocol family 16<br />PCI: Initializing PCI<br />bio: create slab &lt;bio-0&gt; at 0<br />SCSI subsystem initialized<br />pci 0000:00:02.0: PME# supported from D1 D2 D3hot D3cold<br />pci 0000:00:02.0: PME# disabled<br />pci 0000:00:03.0: PME# supported from D1 D2 D3hot D3cold<br />pci 0000:00:03.0: PME# disabled<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ?Â© 2001-2006 Red Hat, Inc.<br />yaffs Oct&nbsp; 2 2009 16:05:01 Installing. <br />msgmni has been set to 119<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 104) is a 16550A<br />console [ttyS0] enabled<br />serial8250.0: ttyS0 at MMIO 0x0 (irq = 104) is a 16550A<br />Driver &#039;sd&#039; needs updating - please use bus_type methods<br />PATA driver for RouterBOARD 532 Compact Flash version 0.1.0<br />scsi0 : pata-rb532-cf<br />ata1: PATA max PIO4 irq 149<br />via-rhine.c:v1.10-LK1.4.3 2007-03-06 Written by Donald Becker<br />PCI: Enabling device 0000:00:02.0 (0080 -&gt; 0083)<br />eth0: VIA Rhine III at 0x50010000, 00:0c:42:0f:a0:8d, IRQ 142.<br />eth0: MII PHY found at address 1, status 0x7849 advertising 05e1 Link 0000.<br />PCI: Enabling device 0000:00:03.0 (0080 -&gt; 0083)<br />eth1: VIA Rhine III at 0x50010100, 00:0c:42:0f:a0:8e, IRQ 143.<br />eth1: MII PHY found at address 1, status 0x7849 advertising 05e1 Link 0000.<br />eth2 (korina): not using net_device_ops yet<br />ata1.00: CFA: SanDisk SDCFH-256, FhDA0145, max PIO4<br />ata1.00: 501760 sectors, multi 0: LBA <br />ata1.00: configured for PIO4<br />scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;ATA&nbsp; &nbsp; &nbsp; SanDisk SDCFH-25 FhDA PQ: 0 ANSI: 5<br />sd 0:0:0:0: [sda] 501760 512-byte hardware sectors: (256 MB/245 MiB)<br />sd 0:0:0:0: [sda] Write Protect is off<br />sd 0:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&#039;t support DPO or FUA<br /> sda: sda1 sda2<br />sd 0:0:0:0: [sda] Attached SCSI removable disk<br />Creating 1 MTD partitions on &quot;/dev/sda2&quot;:<br />0x000000000000-0x000003020000 : &quot;/dev/sda2&quot;<br />block2mtd: mtd0: [/dev/sda2] erase_size = 128KiB [131072]<br />NAND device: Manufacturer ID: 0xad, Chip ID: 0xf1 (Hynix NAND 128MiB 3,3V 8-bit)<br />Scanning device for bad blocks<br />Creating 2 MTD partitions on &quot;gen_nand&quot;:<br />0x000000000000-0x000000400000 : &quot;Routerboard NAND boot&quot;<br />0x000000400000-0x000008000000 : &quot;rootfs&quot;<br />rc32434_wdt: Stopped watchdog timer.<br />rc32434_wdt: Watchdog Timer version 1.0, timer margin: 20 sec<br />Registered led device: uled<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (jffs2 filesystem) readonly on device 31:0.<br />Freeing unused kernel memory: 132k freed<br />Please be patient, while OpenWrt loads ...<br />FPU emulator disabled, make sure your toolchainwas compiled with software floating point support (soft-float)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102675">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MVV</div>
					<div class="post-datetime">
						10 Feb 2010, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>I have exactly the same error on a RB411 compiling my image from trunk. The message repeats itself every time i alter the status of one of the wifi interfaces.</p><p>Could anyone direct us to the relevan menu option ?</p><p>Edit : <br />Digging into the developers menu , i found this , already marked as yes</p><p>CONFIG_SOFT_FLOAT:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />If your target CPU does not have a Floating Point Unit (FPU) or a kernel FPU emulator, but you still wish to support floating point&nbsp; functions, then everything will need to be compiled with soft floating point support (-msoft-float).<br />Most people will answer N. <br />Symbol: SOFT_FLOAT [=y]<br />Prompt: Use software floating point by default<br />Defined at Config.in:332<br />Depends on: (arm || armeb || powerpc || mipsel || mips) &amp;&amp; !HAS_FPU &amp;&amp; TARGET_OPTIONS <br />Location:<br />&nbsp; &nbsp; &nbsp;-&gt; Advanced configuration options (for developers) (DEVEL [=y])</p>											<p class="post-edited">(Last edited by <strong>MVV</strong> on 10 Feb 2010, 23:07)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>