<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Asterisk 1.4.1 and 1.2.16</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 Sep 2015 and 22 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=9704&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=9704&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=9704&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p53739">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">dynamic</div>
					<div class="post-datetime">
						11 Aug 2007, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>@zandbelt<br/>Thanks a lot :-)</p><p>Would it be possible that you also share the Makefiles to get libtiff and spandsp compiled under OpenWRT for other platforms ?</p><p>Regards<br/>dynamic</p>											<p class="post-edited">(Last edited by <strong>dynamic</strong> on 11 Aug 2007, 17:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55018">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">lschweiss</div>
					<div class="post-datetime">
						4 Sep 2007, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Why is Asterisk 1.4 not being put in the OpenWRT trunk for kamikaze?&nbsp; Digium has deprecated the 1.2 line now,&nbsp; Zandbelt has submitted patches several times, but they never seemed to be touched.&nbsp; </p><p>While zandbelt has been good about posting new updates to his build, the OpenWRT package sources have been for the most part not included.&nbsp; &nbsp;Please respect the GPL and post your sources!&nbsp; I&#039;d like to participate in getting this working on the several of the platforms I work with (Gateworks Avila, Routerboard 133, Meraki-mini, Ubiquiti LS5 to name a few), but the ball keeps getting dropped.</p><p>I just spent the better part of my weekend reproducing the work that zandbelt has already done for Asterisk 1.4.9, but still haven&#039;t caught him.&nbsp; This is all unnecessary if his patches would have been accepted 5 months ago when he submitted them or his sources would have been posted.</p><p>Keeping it as a separate package besides the Asterisk 1.2 package currently in kamikaze until stabilized is probably the best idea, but it appears that is how zandbelt has designed it anyway.&nbsp; </p><p>Who do we need to nudge to get this ball rolling?&nbsp; There seems to be plenty of interest in Asterisk on OpenWRT, just not with those in control of the SVN.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55025">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						4 Sep 2007, 02:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>While zandbelt has been good about posting new updates to his build, the OpenWRT package sources have been for the most part not included.&nbsp; Please respect the GPL and post your sources!</p></blockquote></div><p>you must be joking or deliberately trying to upset me: read the posts, visit the links and build it yourself using the available patches + full build script for 1.4.9, as I did for earlier releases; please do some decent research before making statements like this, sigh</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>I just spent the better part of my weekend reproducing the work that zandbelt has already done for Asterisk 1.4.9, but still haven&#039;t caught him.</p></blockquote></div><p>&quot;openwrt -&gt; forum -&gt; search&quot; would have been your friend...</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>Keeping it as a separate package besides the Asterisk 1.2 package currently in kamikaze until stabilized is probably the best idea, but it appears that is how zandbelt has designed it anyway.</p></blockquote></div><p>yap; although I&#039;m now in favor of actually dropping 1.2 for 1.4 altogether</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>Who do we need to nudge to get this ball rolling?&nbsp; There seems to be plenty of interest in Asterisk on OpenWRT, just not with those in control of the SVN.</p></blockquote></div><p>that part I do agree on</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55028">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">lschweiss</div>
					<div class="post-datetime">
						4 Sep 2007, 04:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>you must be joking or deliberately trying to upset me: read the posts, visit the links and build it yourself using the available patches + full build script for 1.4.9, as I did for earlier releases; please do some decent research before making statements like this, sigh</p></blockquote></div><p>At least your attention to this problem has been received.&nbsp; You have posted no sources for <strong>kamikaze</strong> builds, only <strong>whiterussian</strong>.&nbsp; &nbsp;</p><p>There are some patches for older versions of 1.4 in Trac tickets.&nbsp; &nbsp;All your sources seem to be hosted on <a href="http://zandbelt.dyndns.org/">http://zandbelt.dyndns.org</a> which is not browsable.&nbsp; Without a public link the sources are effectively unavailable.&nbsp; The binaries all seem to be at <a href="http://members.home.nl/hans.zandbelt/">http://members.home.nl/hans.zandbelt/</a>.&nbsp; This is browsable, but no sources are there. </p><p>This thread is where all the current announcements of your new builds have been and seems to be the most appropriate place to also link to the sources.</p><div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>&quot;openwrt -&gt; forum -&gt; search&quot; would have been your friend...</p></blockquote></div><p>See statements above...</p><p>My intention is not upset, but to get this ongoing problem brought to attention.&nbsp; </p><p>Asterisk is very usable tool on OpenWRT.&nbsp; I have been running an old trunk version of 1.2 on one of my Linksys routers since Jan 2006 for basic iax2 to sip call routing with great results.&nbsp; &nbsp;</p><p>More than a few times I have revisited Asterisk on OpenWRT and there have been new binaries published by you without links to the sources.&nbsp; Intentional or not, it creates problems for anyone wanting to experiment with building the packages you posted.&nbsp; </p><p>Simply posting a patch file to your open tickets or a tar.gz of the Makefiles and patches for buildroot-ng along side the binaries will avoid people repeatedly asking for them.&nbsp; Besides, if one of the official OpenWRT developers actually decides to update Asterisk in trunk, no one wants them to have to look far for your sources either.&nbsp; </p><p>Frankly, you&#039;ve brought Asterisk along more than anyone lately, I don&#039;t know why you haven&#039;t been given access to check it in SVN yourself.&nbsp; Or have you even asked to?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55045">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						4 Sep 2007, 11:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>You have posted no sources for <strong>kamikaze</strong> builds, only <strong>whiterussian</strong>.</p></blockquote></div><p>the patches are for the packages branch, which means they are for both kamikaze and whiterussian; some investigation would have taught you that</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>My intention is not upset, but to get this ongoing problem brought to attention.</p></blockquote></div><p>there is no problem: this is open source software being delivered in an open source community; anyone trying to deduct rights from that apart from the right to be able to obtain GPL-ed sources is wrong; not being able to find the sources by yourself, you could have just asked where to download the sources instead of assuming that it is not possible</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>More than a few times I have revisited Asterisk on OpenWRT and there have been new binaries published by you without links to the sources.&nbsp; Intentional or not, it creates problems for anyone wanting to experiment with building the packages you posted.</p></blockquote></div><p>I did not ask you to use my stuff, I am not obliged nor inclined to support your experiments</p><div class="quotebox"><cite>lschweiss wrote:</cite><blockquote><p>Frankly, you&#039;ve brought Asterisk along more than anyone lately, I don&#039;t know why you haven&#039;t been given access to check it in SVN yourself.&nbsp; Or have you even asked to?</p></blockquote></div><p>there have been discussions on opening up the packages branch for developers, but no results yet</p><p>what you could do:<br/>- being unable to find the sources by yourself you should ask others for it in a polite way (here you go: <a href="http://zandbelt.dyndns.org/asterisk/asterisk-build.sh)">http://zandbelt.dyndns.org/asterisk/asterisk-build.sh)</a><br/>- take those patches and upload/transform them into multiple smaller tickets<br/>- convince the OpenWRT developers to commit those patches<br/>- convince the OpenWRT developers that you can be the package maintainer for Asterisk 1.4 and get commit rights to do that<br/>- forward patch upcoming new releases</p><p>This is the way that open source works, not by complaining about support.</p><p>Good luck,</p><p>Hans</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55116">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">databus23</div>
					<div class="post-datetime">
						5 Sep 2007, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m currently trying to get a brisftuff enabled asterisk 1.4 to work on an 2.6-x86 openwrt.<br/>I tried starting with zandbelt&#039;s zaptel-1.4.4 BuildRoot Package but could&#039;t get it to build the kmod-zaptel package fÃ¼r that target.<br/>The problem seems that the original zaptel Makefile seems to get confused about the architecture for which to build the kernel modules and mixes in the architecture of the build machine (e.g. I get make errors like &quot;sorry, 64Bit not supported&quot; on a amd64 machine).</p><p>There is also a note on his website that the &quot;zaptel/ztdummy kernel module is not yet available&quot; on a 2.6 build. <br/>Any enlighting thoughts why this is not possible for now or even better how to get this done.</p><p>Thanks<br/>Fabian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55872">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						17 Sep 2007, 17:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>databus23 wrote:</cite><blockquote><p>I&#039;m currently trying to get a brisftuff enabled asterisk 1.4 to work on an 2.6-x86 openwrt.<br/>I tried starting with zandbelt&#039;s zaptel-1.4.4 BuildRoot Package but could&#039;t get it to build the kmod-zaptel package fÃ¼r that target.<br/>The problem seems that the original zaptel Makefile seems to get confused about the architecture for which to build the kernel modules and mixes in the architecture of the build machine (e.g. I get make errors like &quot;sorry, 64Bit not supported&quot; on a amd64 machine).</p><p>There is also a note on his website that the &quot;zaptel/ztdummy kernel module is not yet available&quot; on a 2.6 build. <br/>Any enlighting thoughts why this is not possible for now or even better how to get this done.</p></blockquote></div><p>the 2.4/2.6 build of kmod-zaptel was not yet done for buildroot-ng; I don&#039;t see any serious problems doing so, it is just the fact that somebody to spend some time on it</p><p>since the asterisk 1.4.x package is in the OpenWRT packages SVN repository now, patches can be provided against that</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60451">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						15 Dec 2007, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi Zandbelt,</p><p>Would you have any Asterisk compiled built ipk package on your web site for kamikaze 7.09 2.6 kernel?<br/>I got a WGT634U with USB port which would run 2.6 kernel I think.<br/>Thank you for your support and wonderful package depot for Asterisk on Openwrt! Noticed the new 1.4.13 available for 2.4 kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60478">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						15 Dec 2007, 22:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>Would you have any Asterisk compiled built ipk package on your web site for kamikaze 7.09 2.6 kernel?<br/>I got a WGT634U with USB port which would run 2.6 kernel I think.</p></blockquote></div><p>I updated the repository over here:</p><p>&nbsp; &nbsp;<a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a></p><p>The new thing to test is:</p><p>&nbsp; kmod-zaptel14_2.6.22-1.4.6-brcm47xx-1_mipsel.ipk</p><p>if that loads on your router and creates a dummy timer device, I&#039;ll also re-enable building zaptel modules in the Asterisk 1.4 build for the OpenWRT package repository for app_meetme and iax2 trunking. (I&#039;m not sure why it was removed in the first place)</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60483">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						16 Dec 2007, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>Thank you so much!<br/>Just found out it was already updated with 2.6 kernel Kamikaze.<br/>That was super quick.<br/>I will test that dummy timer module, but I read it somewhere that WGT634U is using ohci/ehci, that zaptel needs uhci. But I will try it anyway...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60572">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						18 Dec 2007, 06:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>I updated the repository over here:</p><p>&nbsp; &nbsp;<a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a></p><p>The new thing to test is:</p><p>&nbsp; kmod-zaptel14_2.6.22-1.4.6-brcm47xx-1_mipsel.ipk</p><p>if that loads on your router and creates a dummy timer device, I&#039;ll also re-enable building zaptel modules in the Asterisk 1.4 build for the OpenWRT package repository for app_meetme and iax2 trunking. (I&#039;m not sure why it was removed in the first place)</p><p>Hans.</p></blockquote></div><p>It seems loaded, but not sure if it really works with ohci. How to test it?</p><p>dmesg<br/>...<br/>Zapata Telephony Interface Registered on major 196<br/>Zaptel Version: 1.4.6<br/>Zaptel Echo Canceller: MG2</p><p>dev tree<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 254 Dec 17 22:47 /dev/zapchannel<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196,&nbsp; &nbsp;0 Dec 17 22:47 /dev/zapctl<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 255 Dec 17 22:47 /dev/zappseudo<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 253 Dec 17 22:47 /dev/zaptimer<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 250 Dec 17 22:47 /dev/zaptranscode</p><br/><p>And lsmod</p><p>Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by&nbsp; &nbsp; Tainted: P<br/>ztdummy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1440&nbsp; 0<br/>zaptel&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 187824&nbsp; 1 ztdummy<br/>snd_pcm_oss&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 40320&nbsp; 0<br/>snd_mixer_oss&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13792&nbsp; 1 snd_pcm_oss<br/>snd_pcm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 58400&nbsp; 1 snd_pcm_oss<br/>snd_timer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 16272&nbsp; 1 snd_pcm<br/>snd_rawmidi&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 15904&nbsp; 0<br/>snd_hwdep&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4784&nbsp; 0<br/>snd_page_alloc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5232&nbsp; 1 snd_pcm<br/>snd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 35632&nbsp; 6 snd_pcm_oss,snd_mixer_oss,snd_pcm,snd_timer,snd_<br/>rawmidi,snd_hwdep<br/>soundcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3664&nbsp; 1 snd<br/>fuse&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;37520&nbsp; 0<br/>usb_storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 27664&nbsp; 1<br/>sd_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;18416&nbsp; 2<br/>scsi_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;71968&nbsp; 2 usb_storage,sd_mod<br/>ehci_hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28016&nbsp; 0<br/>ohci_hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14064&nbsp; 0<br/>ath_pci&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 94384&nbsp; 0<br/>wlan_xauth&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;480&nbsp; 0<br/>wlan_wep&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4000&nbsp; 0<br/>wlan_tkip&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9664&nbsp; 0<br/>wlan_ccmp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5408&nbsp; 3<br/>wlan_acl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1888&nbsp; 0<br/>ath_rate_minstrel&nbsp; &nbsp; &nbsp; &nbsp;7840&nbsp; 1<br/>ath_hal&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;271168&nbsp; 3 ath_pci,ath_rate_minstrel<br/>wlan_scan_sta&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8736&nbsp; 1<br/>wlan_scan_ap&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2624&nbsp; 0<br/>wlan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 146400&nbsp; 10 ath_pci,wlan_xauth,wlan_wep,wlan_tkip,wlan_ccmp<br/>,wlan_acl,ath_rate_minstrel,wlan_scan_sta,wlan_scan_ap<br/>ppp_async&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9664&nbsp; 0<br/>ppp_generic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20000&nbsp; 1 ppp_async<br/>slhc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5408&nbsp; 1 ppp_generic<br/>crc_ccitt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1024&nbsp; 2 zaptel,ppp_async<br/>nbd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 17296&nbsp; 0<br/>vfat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8512&nbsp; 0<br/>fat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 42448&nbsp; 1 vfat<br/>ext3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;97040&nbsp; 1<br/>jbd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 54672&nbsp; 1 ext3<br/>nls_iso8859_1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2880&nbsp; 0<br/>nls_cp437&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4416&nbsp; 0<br/>usbcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;102032&nbsp; 4 usb_storage,ehci_hcd,ohci_hcd<br/>nls_base&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4416&nbsp; 4 vfat,fat,nls_iso8859_1,nls_cp437<br/>switch_robo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4048&nbsp; 0<br/>switch_core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5056&nbsp; 1 switch_robo<br/>diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8272&nbsp; 0</p>											<p class="post-edited">(Last edited by <strong>Fall</strong> on 18 Dec 2007, 06:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60579">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						18 Dec 2007, 09:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>t seems loaded, but not sure if it really works with ohci. How to test it?</p></blockquote></div><p>The 2.6 ztdummy version is quite different from the 2.4 code: the 2.6 version does no longer need a usb device.<br/>I compiled the zttest utility for mipsel; it is available over here:</p><p>&nbsp; <a href="http://zandbelt.dyndns.org/asterisk/zttest">http://zandbelt.dyndns.org/asterisk/zttest</a></p><p>copy it onto your device and run it as:</p><p>&nbsp; ./zttest -v</p><p>I&#039;m also curious about the output of:</p><p>&nbsp; cat /proc/zaptel</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60596">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						18 Dec 2007, 18:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>The 2.6 ztdummy version is quite different from the 2.4 code: the 2.6 version does no longer need a usb device.</p></blockquote></div><p>Good stuff. So kernel has timmer built in, read it somewhere.</p><p>Here is the result and thank you for your help.</p><p>root@NetGear:~# ./zttest -v<br/>Unable to open zap interface: No such file or directory<br/>root@NetGear:~# cat /proc/zaptel<br/>cat: read error: Is a directory<br/>root@NetGear:~# ls -al /dev/zap*<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 254 Dec 17 22:47 /dev/zapchannel<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196,&nbsp; &nbsp;0 Dec 17 22:47 /dev/zapctl<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 255 Dec 17 22:47 /dev/zappseudo<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 253 Dec 17 22:47 /dev/zaptimer<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 250 Dec 17 22:47 /dev/zaptranscode<br/>root@NetGear:~# cd /proc<br/>root@NetGear:/proc# cd zaptel<br/>root@NetGear:/proc/zaptel# ls -al<br/>dr-xr-xr-x&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 18 11:37 .<br/>dr-xr-xr-x&nbsp; &nbsp;46 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 31&nbsp; 1999 ..<br/>-r--r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Dec 18 11:37 1<br/>root@NetGear:/proc/zaptel# cat 1<br/>Span 1: ZTDUMMY/1 &quot;ZTDUMMY/1 (source: Linux26) 1&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60598">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						18 Dec 2007, 18:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>root@NetGear:~# ./zttest -v<br/>Unable to open zap interface: No such file or directory<br/>root@NetGear:~# cat /proc/zaptel<br/>cat: read error: Is a directory</p></blockquote></div><p>hmm. some dev system mixups: I adapted zttest.c and recompiled; please download and try again...</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60601">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						18 Dec 2007, 19:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>root@NetGear:~# ./zttest -v<br/>Unable to open zap interface: No such file or directory<br/>root@NetGear:~# cat /proc/zaptel<br/>cat: read error: Is a directory</p></blockquote></div><p>hmm. some dev system mixups: I adapted zttest.c and recompiled; please download and try again...</p><p>Hans.</p></blockquote></div><p>It works now! So guess the zdummy module should work for Asterisk as well.</p><p>root@NetGear:~# ./zttest -v<br/>Opened pseudo zap interface, measuring accuracy...</p><p>8192 zaptel samples in 8183.104 system clock sample intervals (99.891%)<br/>8192 zaptel samples in 8166.672 system clock sample intervals (99.691%)<br/>8192 zaptel samples in 8168.496 system clock sample intervals (99.713%)<br/>8192 zaptel samples in 8168.607 system clock sample intervals (99.714%)<br/>8192 zaptel samples in 8168.328 system clock sample intervals (99.711%)<br/>8192 zaptel samples in 8168.527 system clock sample intervals (99.713%)<br/>8192 zaptel samples in 8168.688 system clock sample intervals (99.715%)<br/>8192 zaptel samples in 8168.289 system clock sample intervals (99.711%)<br/>8192 zaptel samples in 8168.408 system clock sample intervals (99.712%)<br/>8192 zaptel samples in 8168.624 system clock sample intervals (99.715%)<br/>8192 zaptel samples in 8168.280 system clock sample intervals (99.710%)<br/>8192 zaptel samples in 8168.440 system clock sample intervals (99.712%)<br/>8192 zaptel samples in 8168.656 system clock sample intervals (99.715%)<br/>8192 zaptel samples in 8168.600 system clock sample intervals (99.714%)<br/>8192 zaptel samples in 8168.520 system clock sample intervals (99.713%)<br/>8192 zaptel samples in 8168.592 system clock sample intervals (99.714%)<br/>8192 zaptel samples in 8168.296 system clock sample intervals (99.711%)<br/>8192 zaptel samples in 8168.416 system clock sample intervals (99.712%)<br/>8192 zaptel samples in 8168.600 system clock sample intervals (99.714%)<br/>8192 zaptel samples in 8168.448 system clock sample intervals (99.713%)<br/>--- Results after 20 passes ---<br/>Best: 99.891 -- Worst: 99.691 -- Average: 99.720820, Difference: 99.720820</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60615">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						19 Dec 2007, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>I updated the repository over here:</p><p>&nbsp; <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a></p><p>to the latest Asterisk 1.4.15, including ztdummy and app_meetme for mipsel, kernel 2.6</p><p>let me know how things work out</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60617">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						19 Dec 2007, 01:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>I updated the repository over here:</p><p>&nbsp; <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a></p><p>to the latest Asterisk 1.4.15, including ztdummy and app_meetme for mipsel, kernel 2.6</p><p>let me know how things work out</p><p>Hans.</p></blockquote></div><p>Sure. I&#039;m trying to wget each ipk to local then install them, since the package info is still pointing to 1.4.13, so ipk refuse to upgrade.</p><p>zaptel package seems corrupted, I unpack it and loaded the modules manually under place.</p><p>Collected errors:<br/>Package kmod-zaptel14 md5sum mismatch. Either the ipkg or the package index are<br/>zaptel</p><p>Same for the lib<br/>Package zaptel14-libtonezone md5sum mismatch. Either the ipkg or the package ind<br/>ex are corrupt. Try &#039;ipkg update&#039;.</p><br/><p>I will post the result once I figure out how to get it setup, it will take a while.<br/>Thanks!</p>											<p class="post-edited">(Last edited by <strong>Fall</strong> on 19 Dec 2007, 01:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60621">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						19 Dec 2007, 06:29					</div>
				</div>
				<div class="post-content content">
					<p>Good news. It works!<br/>The only problem other than the checksum not match in package that had to manually copy files into place, was the device files for zaptel are all created under /dev, not /dev/zap.</p><p>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 254 Dec 17 22:47 /dev/zapchannel<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196,&nbsp; &nbsp;0 Dec 17 22:47 /dev/zapctl<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 255 Dec 17 22:47 /dev/zappseudo<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 253 Dec 17 22:47 /dev/zaptimer<br/>crw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp;196, 250 Dec 17 22:47 /dev/zaptranscode</p><p>* complains about can&#039;t open pseudo file, I figured there was a &#039;/&#039; missing when module created those device files, so I did a softlink from /dev/zappseudo to /dev/zap/pseudo.</p><p>Could you please help to check the source, where this &#039;/&#039; got missed between zap and pseudo. The same for the rest files listed above, which should be created under /dev/zap/*, not /dev/zap*.</p><p>Thanks again for the great work!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60622">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						19 Dec 2007, 10:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>The only problem other than the checksum not match in package that had to manually copy files into place, was the device files for zaptel are all created under /dev, not /dev/zap.</p></blockquote></div><p>I updated the Packages file so the repository should be fine now.<br/>I&#039;ll look into the device naming issue: when fixed (I suspect it is caused by wrongly detected module compile flags), I&#039;ll submit an Asterisk 1.4.15 +zaptel/ztdummy + app_meetme patch ticket.</p><p>Thanks for testing,</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60640">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						19 Dec 2007, 16:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>I updated the Packages file so the repository should be fine now.<br/>I&#039;ll look into the device naming issue: when fixed (I suspect it is caused by wrongly detected module compile flags), I&#039;ll submit an Asterisk 1.4.15 +zaptel/ztdummy + app_meetme patch ticket.</p><p>Thanks for testing,</p><p>Hans.</p></blockquote></div><p>My pleasure and thank you for your continuing support of * on openwrt. Your repository is the only place where we can get the latest * for whiterussian and Kamikaze, and now for both 2.4 and 2.6 kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60656">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">ericw12</div>
					<div class="post-datetime">
						19 Dec 2007, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>hi guys, </p><p>if I understand correctly it means the WGT634U running 2.6 kernnel is another option to get the timing working for Asterisk besides WL-500G Deluxe running 2..4, right?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60660">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						19 Dec 2007, 21:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ericw12 wrote:</cite><blockquote><p>hi guys, </p><p>if I understand correctly it means the WGT634U running 2.6 kernnel is another option to get the timing working for Asterisk besides WL-500G Deluxe running 2..4, right?</p><p>Thanks!</p></blockquote></div><p>Yes, that&#039;s right. 2.6 Kernel has built in timing function but you will still need ztdummy module. For 2.4, ztdummy would need uhci USB driver.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60697">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						20 Dec 2007, 17:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>My pleasure and thank you for your continuing support of * on openwrt. Your repository is the only place where we can get the latest * for whiterussian and Kamikaze, and now for both 2.4 and 2.6 kernel.</p></blockquote></div><p>I updated the repository <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a> to:</p><p>&nbsp; asterisk-1.4.16 (including app_meetme/zaptel-libtonezone)<br/>&nbsp; zaptel-1.4.7.1 kernel module for both mipsel 2.4 (usb-uhci-required) and 2.6 (no-usb-required)</p><p>Even with the most recent ztdummy module, my guess is that the device naming issue remains, but let me know. It looks to me like an upstream issue.</p><p>Hans.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60699">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">Fall</div>
					<div class="post-datetime">
						20 Dec 2007, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zandbelt wrote:</cite><blockquote><p>I updated the repository <a href="http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/">http://members.home.nl/hans.zandbelt/openwrt/kamikaze/7.09/</a> to:</p><p>&nbsp; asterisk-1.4.16 (including app_meetme/zaptel-libtonezone)<br/>&nbsp; zaptel-1.4.7.1 kernel module for both mipsel 2.4 (usb-uhci-required) and 2.6 (no-usb-required)</p><p>Even with the most recent ztdummy module, my guess is that the device naming issue remains, but let me know. It looks to me like an upstream issue.</p><p>Hans.</p></blockquote></div><p>I think it&#039;s somewhere in the source code of zaptel or header files that the device names changed. From strings and grep for these device names from zaptel.ko</p><p>zaptranscode<br/>zaptimer<br/>zapchannel<br/>zappseudo<br/>zapctl</p><p>I think they should be defined like these, so I dont have to manually link them into the right place for *.<br/>zap/transcode<br/>zap/timer<br/>zap/channel<br/>zap/pseudo<br/>zap/ctl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60700">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">zandbelt</div>
					<div class="post-datetime">
						20 Dec 2007, 18:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fall wrote:</cite><blockquote><p>I think it&#039;s somewhere in the source code of zaptel or header files that the device names changed. From strings and grep for these device names from zaptel.ko</p></blockquote></div><p>sure; but the thing is that zaptel.h mentions that for 2.6 kernels devfs /dev/zaptel/* naming is not supported, but only udev /dev/zap* naming<br/>it just looks like applications are not prepared to deal with that; we&#039;ll have to look upstream, I guess</p><p>Hans.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=9704&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=9704&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=9704&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>