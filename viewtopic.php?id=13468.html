<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> X100P and Openwrt x86</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p59285">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						20 Nov 2007, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to install a x100p analog card on a Openwrt x86 to use with Asterisk</p><p>Can someone help me?</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125817">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						18 Jan 2011, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>I want to use a x100p pci card with asterisk on my OpenWRT x86.<br />So i have compiled and installed asterisk and zaptel Zaptel module was correctly loaded but it does not create correct devices in /dev</p><p>It creates:<br />/dev/zapchannel<br />/dev/zapctl<br />/dev/zappseudo</p><p>not<br />/dev/zap/channel<br />/dev/zap/ctl<br />/dev/zap/pseudo </p><p>I have also tried to compile dahdi (dahdi replace zaptel in new asterisk version) but the result was similar.<br />It creates:<br />/dev/dahdi!channel<br />/dev/dahdi!ctl<br />/dev/dahdi!pseudo</p><p>not <br />/dev/dahdi/channel<br />/dev/dahdi/ctl<br />/dev/dahdi/pseudo </p><p>If someone want to help/try i have attached the makefile for dahdi in this ticket</p><p><a href="https://dev.openwrt.org/ticket/8675">https://dev.openwrt.org/ticket/8675</a></p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 18 Jan 2011, 16:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125818">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jan 2011, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>I suppose you have to patch the sources to use the device nodes you expect to see. I bet other distros patched them too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125820">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						18 Jan 2011, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>Yes, i agree, but can you help me?</p><p>I found this</p><p><a href="http://kb.digium.com/entry/142/">http://kb.digium.com/entry/142/</a></p><p>What do you think about?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125825">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Jan 2011, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>So they use udev to assign names to the device files but openwrt has no udev, thus they are created with their canonical name. I suppose you can create a hotplug2 rule to fixup the name.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125826">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						18 Jan 2011, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>Can you post me an example?</p><p>Thank you</p><p>Can this be usefull?</p><p><a href="http://svn.dd-wrt.com:8000/dd-wrt/browser/src/router/udev/etc/udev/gentoo/udev.rules">http://svn.dd-wrt.com:8000/dd-wrt/brows â€¦ udev.rules</a></p><p>See at line 188</p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 18 Jan 2011, 18:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144279">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jike</div>
					<div class="post-datetime">
						23 Sep 2011, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>I also want add dahdi into OpenWRT, but I cann&#039;t even compile success from your file from that ticket. Could you please give me a guidence? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144630">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ademartoe</div>
					<div class="post-datetime">
						27 Sep 2011, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>what file do you want to compile?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144668">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						28 Sep 2011, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>It works <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I have compiled asterisk 1.4.20 with zaptel to run a x100p</p><p>You have to install:</p><p>zaptel14-libtonezone<br />zaptel14-util <br />asterisk 1.4.20</p><p>You can download them from here (compiled and tested for Atom cpu):</p><p><a href="http://www.megaupload.com/?d=4ZY9CMVV">http://www.megaupload.com/?d=4ZY9CMVV</a></p><p>Edit /etc/init.d/asterisk</p><p>adding command &quot;ztcfg&quot; to set the x100p before starting asterisk</p><p>like this...</p><div class="codebox"><pre><code>start() {
    ztcfg
    [ -f $DEFAULT ] &amp;&amp; . $DEFAULT
    [ -d $DEST/var/run ] || mkdir -p $DEST/var/run
...</code></pre></div><p>You have to add these lines to /etc/hotplug2.rules</p><div class="codebox"><pre><code>DEVICENAME ~~ (zappseudo) {
        nothrottle
        makedev /dev/zap/pseudo 0644
        next
}

DEVICENAME ~~ (zapctl) {
        nothrottle
        makedev /dev/zap/ctl 0644
        next
}

DEVICENAME ~~ (zapchannel) {
        nothrottle
        makedev /dev/zap/channel 0644
        next
}

DEVICENAME ~~ (zap1) {
        nothrottle
        makedev /dev/zap/1 0644
        next
}

DEVICENAME ~~ (zaptimer) {
        nothrottle
        makedev /dev/zap/timer 0644
        next
}</code></pre></div><p>Reboot and then you have to configure asterisk...</p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 28 Sep 2011, 11:37)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>