<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to open &amp; read a file?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p221528">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">MyAngelLYC</div>
					<div class="post-datetime">
						3 Jan 2014, 04:25					</div>
				</div>
				<div class="post-content content">
					<p>Now, I have written a LuCI module to control a config file &#039;/etc/config/mymodule_config&#039;.I can use the LuCI webpage to change the configuration in the file.But I want to open the file and read the configuration from the file in my C program.How can I do that? The function &quot;fopen&quot; is perhaps undefined in the OpenWRT. Is there anybody can help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221542">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						3 Jan 2014, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>Well fopen is just part of stdio.h and can be used if desired, as far as I know</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 3 Jan 2014, 11:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221547">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						3 Jan 2014, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>if /etc/config/mymodule_config is a UCI config file, there is a UCI C API.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221774">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">MyAngelLYC</div>
					<div class="post-datetime">
						6 Jan 2014, 04:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>written_direcon wrote:</cite><blockquote><p>if /etc/config/mymodule_config is a UCI config file, there is a UCI C API.</p></blockquote></div><p>My config /etc/config/mymodule_config file is like this:<br />config BeaconConfig &#039;Beacon_Config&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp;option beacon_intval &#039;10&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp;option interupt_string &#039;Beacon Interupt!&#039;</p><p>I think it&#039;s a UCI config file format.So i should can use the UCI C API to read it.</p><p>So I include the head file uci.h in the driver file build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c.<br />I do this &quot;#include &lt;uci.h&gt;&quot; in this main.c.<br />But when I make the OpenWRT there is error like this:</p><p>CC [M]&nbsp; /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.o<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/sched.h:32:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/pthread.h:25,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_mutex.h:15,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_stdio.h:107,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/stdio.h:72,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:35,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/time.h:121:8: error: redefinition of &#039;struct timespec&#039;<br />include/linux/thread_info.h:12:8: note: originally defined here<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/sched.h:35:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/pthread.h:25,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_mutex.h:15,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_stdio.h:107,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/stdio.h:72,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:35,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/sched.h:72:8: error: redefinition of &#039;struct sched_param&#039;<br />include/linux/sched.h:47:8: note: originally defined here<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/pthread.h:25:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_mutex.h:15,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_stdio.h:107,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/stdio.h:72,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:35,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/sched.h:50:12: error: conflicting types for &#039;sched_setscheduler&#039;<br />include/linux/sched.h:2083:12: note: previous declaration of &#039;sched_setscheduler&#039; was here<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/pthread.h:26:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_mutex.h:15,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_stdio.h:107,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/stdio.h:72,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:35,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/time.h:105:19: error: conflicting types for &#039;timer_t&#039;<br />include/linux/types.h:34:26: note: previous declaration of &#039;timer_t&#039; was here<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/time.h:134:8: error: redefinition of &#039;struct tm&#039;<br />include/linux/time.h:181:8: note: originally defined here<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/time.h:164:8: error: redefinition of &#039;struct itimerspec&#039;<br />include/linux/time.h:277:8: note: originally defined here<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/time.h:200:15: error: conflicting types for &#039;mktime&#039;<br />include/linux/time.h:74:22: note: previous declaration of &#039;mktime&#039; was here<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/pthread.h:29:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_mutex.h:15,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/bits/uClibc_stdio.h:107,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/stdio.h:72,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:35,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/../../../../mips-openwrt-linux-uclibc/sys-include/signal.h:50:20: error: conflicting types for &#039;sigset_t&#039;<br />/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/linux-3.3.8/arch/mips/include/asm/signal.h:20:3: note: previous declaration of &#039;sigset_t&#039; was here<br />In file included from /var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/include/stdint.h:5:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/usr/include/uci.h:36,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from /var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.c:21:<br />/var/OpenWRT/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/lib/gcc/mips-openwrt-linux-uclibc/4.6.3/include/stdint-gcc.h:86:26: error: conflicting types for &#039;uintptr_t&#039;<br />include/linux/types.h:45:24: note: previous declaration of &#039;uintptr_t&#039; was here<br />make[11]: *** [/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k/main.o] Error 1<br />make[10]: *** [/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath/ath9k] Error 2<br />make[9]: *** [/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless/ath] Error 2<br />make[8]: *** [/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/drivers/net/wireless] Error 2<br />make[7]: *** [_module_/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27] Error 2<br />make[6]: *** [modules] Error 2<br />make[5]: *** [modules] Error 2<br />make[4]: *** [modules] Error 2<br />make[4]: Leaving directory `/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27&#039;<br />make[3]: *** [/var/OpenWRT/attitude_adjustment/build_dir/linux-ar71xx_generic/compat-wireless-2013-06-27/.built] Error 2<br />make[3]: Leaving directory `/var/OpenWRT/attitude_adjustment/package/mac80211&#039;<br />make[2]: *** [package/mac80211/compile] Error 2<br />make[2]: Leaving directory `/var/OpenWRT/attitude_adjustment&#039;<br />make[1]: *** [/var/OpenWRT/attitude_adjustment/staging_dir/target-mips_r2_uClibc-0.9.33.2/stamp/.package_compile] Error 2<br />make[1]: Leaving directory `/var/OpenWRT/attitude_adjustment&#039;<br />make: *** [world] 错误 2</p><p>seems like that after I include the uci.h,some date type or structure is redefined.<br />How should I fix it?</p>											<p class="post-edited">(Last edited by <strong>MyAngelLYC</strong> on 6 Jan 2014, 04:21)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>