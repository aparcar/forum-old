<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> syn flood protection</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p142270">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						27 Aug 2011, 11:52					</div>
				</div>
				<div class="post-content content">
					<p>I had a problem with internet connection recently which I described here <a href="http://pastebin.com/WDtMGv6U">http://pastebin.com/WDtMGv6U</a><br />After several days of fighting with it I figured out that the problem should be with the router. Looking closely I&#039;ve found that syn-flood protection is activated. Disabling it solved the problem.</p><p>So if this setting is activated by default it shall work properly. If if doesn&#039;t work correctly it shall not be activated at ALL! Because it wasn&#039;t obvious that there is a correlation between this setting and described problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142283">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						27 Aug 2011, 13:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Proxy Lion wrote:</cite><blockquote><p>I think syn flood protection will be activated.</p></blockquote></div><p>but it shouldn&#039;t be if it breaks router functionality.<br />anyway who needs syn flood protection on a home router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142292">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						27 Aug 2011, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>Sounds nasty. And I haven&#039;t encountered this problem so far. And others neither, or the forum would contain serious complains.</p><p>Thus I don&#039;t think it is synflood alone. =&gt; To quote you: &quot;A wireless linux computer is not affected and works fine!&quot;</p><p>Try a wired linux computer, to convince yourself, it is a windows problem. And it&#039;s got to be a specific one, since there are no other complains.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142308">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						27 Aug 2011, 18:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>Sounds nasty. And I haven&#039;t encountered this problem so far. And others neither, or the forum would contain serious complains.</p><p>Thus I don&#039;t think it is synflood alone. =&gt; To quote you: &quot;A wireless linux computer is not affected and works fine!&quot;</p><p>Try a wired linux computer, to convince yourself, it is a windows problem. And it&#039;s got to be a specific one, since there are no other complains.</p></blockquote></div><p>I&#039;ve never changed any firewall settings. But I&#039;m keeping a copy of the /etc/config/firewall for the next upgrade. So any changes made into this file will be overwritten by an older copy.&nbsp; <a href="https://dev.openwrt.org/changeset?old=26962%40branches%2Fbackfire%2Fpackage%2Ffirewall%2Ffiles%2Ffirewall.config&amp;new=26962%40branches%2Fbackfire%2Fpackage%2Ffirewall%2Ffiles%2Ffirewall.config">This change for instance</a> was overwritten by an older version so I do not have the network section in my current config file.</p><p><a href="http://pastebin.com/v6c6sWm1">here is my /etc/config/firewall</a></p><p>Now another question to ask - is it legal AT ALL to save older config files. Because devs are constantly changing interfaces without a warning and older config files may be easily drawn obsolete that could lead to such a problem.<br />(The first question was about syn flood protection be activated at all by default on a home router. I see no reason doing so)</p><p>bwt I&#039;ve got r27199 installed on my router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142618">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						31 Aug 2011, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>Did you try what I told you to? Plug the linux host into the wired port of the windows host? If this works, this would be another windows only problem.</p><p>I use OpenWrt because I can set things up as I want, the way I already learned when using Linux back in the day. The very first thing I set up was the firewall. If you do not like the pre-configured firewall, you should simply setup your own. I hope you do not need a permission for that.</p><p>While I do not mind welcoming and addressing beginners, there is no way around learning. That is the point in operating an OpenWrt-<strong>powered</strong> device, to learn and move on, instead of staying dumb with the crowd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142639">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						31 Aug 2011, 21:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>Did you try what I told you to? Plug the linux host into the wired port of the windows host? If this works, this would be another windows only problem.</p></blockquote></div><p>No I didn&#039;t try it because I don&#039;t give a shit if it works for a linux client. Even if it is windows only problem it is STILL a problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142645">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						31 Aug 2011, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>If it is a windows problem then it got nothing to do with OpenWrt and you (and others...) do not need to waste time with chasing this problem on OpenWrt.</p><p>BTW, I use Windows XP, and some friends do so as well. I have no problems, they do, but they got nothing to do with OpenWrt. Or else I would have addressed them already. Or confirmed your findings. I can do neither.</p><p>I also believe, that people are fed up with tip toeing around the IE6-shit. (The IE6 did not adhere to standards, and instead of ignoring this piece of shit software, people started changing they web-pages to adhere to the non-standard IE6).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142696">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						1 Sep 2011, 13:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>If it is a windows problem then it got nothing to do with OpenWrt and you (and others...) do not need to waste time with chasing this problem on OpenWrt.</p></blockquote></div><p>you haven&#039;t been reading carefully what I&#039;m saying. The problem is definitely on the router side. Most probably it is related to the firewall config file that has been extended with additional settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142698">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						1 Sep 2011, 14:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flux wrote:</cite><blockquote><p>I&#039;ve never changed any firewall settings. But I&#039;m keeping a copy of the /etc/config/firewall for the next upgrade. So any changes made into this file will be overwritten by an older copy.&nbsp; <a href="https://dev.openwrt.org/changeset?old=26962%40branches%2Fbackfire%2Fpackage%2Ffirewall%2Ffiles%2Ffirewall.config&amp;new=26962%40branches%2Fbackfire%2Fpackage%2Ffirewall%2Ffiles%2Ffirewall.config">This change for instance</a> was overwritten by an older version so I do not have the network section in my current config file.</p><p><a href="http://pastebin.com/v6c6sWm1">here is my /etc/config/firewall</a></p><p>Now another question to ask - is it legal AT ALL to save older config files. Because devs are constantly changing interfaces without a warning and older config files may be easily drawn obsolete that could lead to such a problem.</p></blockquote></div><p>You may have ran into just that. Preserving old config files can be dangerous, when the underlying software modules and default settings change. You may well use either obsolete settings, or your config may miss essential parts.</p><p>I am comparing my own settings to the current defaults every now and then, and then modifying the config files, if necessary.</p><p>I would recommed to you that you start from scratch default settings for firewall, especially &quot;if you have never changed any firewall settings&quot;. The firewall package has gone through major changes in the past year and some defaults have changed. (Especially if you are using Backfire, the whole firewall was changed from v1 to v2 dual stack firewall a few months ago, and all older firewall configs got pretty stale.)</p><p>EDIT: And the same goes also for other config files. I am flashing my own firmware version with default config files, and then I copy from USB stick just 5-6 files ( /etc/network, firewall, radvd, qos, wireless, ...). So, I am not even trying to think that all the automatically copied config files would stay valid for a very long time.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 1 Sep 2011, 14:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142703">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						1 Sep 2011, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>@flux: I misunderstood your posting. You should have written:</p><div class="codebox"><pre><code>1. I encountered this and that problem.
2. but only on Windows host connected so and so, but not on Linux host connected so and so
3. I suspect an issue with MY PERSONAL firewall settings AND syn flood protection (and maybe a Windows quirk, but I do not want to exclude that from the list of possible causes)

Would you check my configurations and solve my problem for me?</code></pre></div><p>Instead you write:<br />1. that syn flood protection should be <span class="bbu">generally</span> deactivated<br />2. that you dislike the fact that the UCI firewall is being developed (that includes changes in its configuration)</p><p>Yet we didn&#039;t ignore you, but pointed out how to solve your problem. Do it and be done with it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142710">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						1 Sep 2011, 16:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>Instead you write:<br />1. that syn flood protection should be <span class="bbu">generally</span> deactivated<br />2. that you dislike the fact that the UCI firewall is being developed (that includes changes in its configuration)</p><p>Yet we didn&#039;t ignore you, but pointed out how to solve your problem. Do it and be done with it.</p></blockquote></div><p>1. I&#039;ve written - &quot;it shall be deactivated by default if it doesn&#039;t work correctly&quot;. Feel the difference. Additionally I wondered why this setting is even activated by default. Because in my opinion having it activated would only result in increasing cpu resources consumption for 99.999999999999999% firmware users.<br />2. I wouldn&#039;t care if it wouldn&#039;t break old interfaces.<br />3. you pointed out how to solve my problem? I didn&#039;t ask for that. I knew how to solve it creating the posting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142712">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						1 Sep 2011, 17:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flux wrote:</cite><blockquote><div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>Instead you write:<br />1. that syn flood protection should be <span class="bbu">generally</span> deactivated<br />2. that you dislike the fact that the UCI firewall is being developed (that includes changes in its configuration)</p><p>Yet we didn&#039;t ignore you, but pointed out how to solve your problem. Do it and be done with it.</p></blockquote></div><p>1. I&#039;ve written - &quot;it shall be deactivated by default if it doesn&#039;t work correctly&quot;. Feel the difference. Additionally I wondered why this setting is even activated by default. Because in my opinion having it activated would only result in increasing cpu resources consumption for 99.999999999999999% firmware users.<br />2. I wouldn&#039;t care if it wouldn&#039;t break old interfaces.<br />3. you pointed out how to solve my problem? I didn&#039;t ask for that. I knew how to solve it creating the posting.</p></blockquote></div><p>Sigh, well, FYI: Jow&#039;s last or penultimate posting here was: <a href="https://forum.openwrt.org/viewtopic.php?pid=141237#p141237">https://forum.openwrt.org/viewtopic.php … 37#p141237</a></p><p>So you should avoid to much criticism, and I should avoid &quot;pushing&quot; (=presenting) alternatives. (=flush everything and set up own configuration exactly how YOU want it to be = no more asking where to insert new rules which do not apply, no more syn flood bla, no more breaking, = no more complains!).</p><p>I really just tried to assist in solving a problem instead of opening old ones, but obviously sometimes I do misunderstand the intent of a posting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142748">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						2 Sep 2011, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve made additional tests. I&#039;ve added missing network setting into my firewall config file. Then I deactivated the &#039;Drop invalid packets&#039; option and restarted the firewall. The problem is back. So the only working combination is - &#039;syn flood protection&#039; is off, &#039;drop invalid packets&#039; is on. All other combinations results in the described problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142752">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						2 Sep 2011, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>1. I didn&#039;t search for this, just noticed it en passant:</p><p><a href="https://dev.openwrt.org/browser/trunk/package/firewall/files/lib/core_init.sh?rev=28148">https://dev.openwrt.org/browser/trunk/p … ?rev=28148</a></p><p>fw_load_defaults() {<br />boolean syn_flood 0<br />boolean tcp_syncookies 1<br />}</p><p>2. The wiki article seems to be groomed by a couple of people:&nbsp; <a href="http://wiki.openwrt.org/doc/uci/firewall?do=revisions">http://wiki.openwrt.org/doc/uci/firewall?do=revisions</a></p><p>3. In Ticket <a href="https://dev.openwrt.org/ticket/10038">https://dev.openwrt.org/ticket/10038</a> somebody made sane suggestions, and 2 hours later, they were applied. One could call this a prompt reaction. Unpaid work and so..</p><p>4. Now if anybody wants to discuss the pros and cons of this and that, you&#039;re welcome to do it on a technical level, but stop COMPLAINING.</p><p>Also keep in mind, that there are MANY MANY MANY Linux-Forums where questions and discussions find more audience than in this abandoned-looking forum full of spam. I wouldn&#039;t wonder, if somebody would discuss stuff regarding syn_protection in generic forums like <a href="http://www.linuxforums.org/forum/networking/">http://www.linuxforums.org/forum/networking/</a> or <a href="http://www.linuxquestions.org/questions/linux-networking-3/">http://www.linuxquestions.org/questions … working-3/</a> or .. and at the same time would refuse to do the same in a distribution specific forum. Who knows, right?</p><p>So if you do not like the answers you get here, feel free to try somewhere else.</p><p>5. I did bother to read this <a href="http://pastebin.com/WDtMGv6U">http://pastebin.com/WDtMGv6U</a> (although for some people this may be already to much wild guessing) and you contradict yourself:<br />&quot;I could think of:<br />- a router problem - working linux computer shows that it is not the router problem.&quot;</p><p>&quot;3. you pointed out how to solve my problem? I didn&#039;t ask for that. I knew how to solve it creating the posting.&quot;</p><p>I further do not understand why you do not make any changes to the default firewall settings (you claimed that somewhere), and yet do not want to update it.</p><p>For various reasons I do not use the UCI firewall, and that&#039;s it. I do not COMPLAIN about it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142756">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						2 Sep 2011, 17:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>For various reasons I do not use the UCI firewall, and that&#039;s it. I do not COMPLAIN about it.</p></blockquote></div><p>dude, your ventilator is brrrrrr all the time. Please stop it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142778">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						3 Sep 2011, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>Dude, that is not my ventilator, it&#039;s my tongue, and the chicks love it.</p><p>In germany we say: Bärensex - Steht vor dem Loch und brummt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p150113">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Edgar Shenix</div>
					<div class="post-datetime">
						2 Dec 2011, 07:22					</div>
				</div>
				<div class="post-content content">
					<p>have you checked your firewall settings and also your anti virus program?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245873">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">jmschu02</div>
					<div class="post-datetime">
						3 Sep 2014, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>default settings are meant for the majority of users, i&#039;m sorry to hear that you experienced issues.&nbsp; However, SYN Flood protection is to help DDOS attacks to users homes (this is a real threat).&nbsp; </p><p>There are risks involved in using it which you unfortunately ran into, this is why the &quot;Drop invalid packets&quot; is disabled by default.&nbsp; However, I personally use this as well to avoid DDoS attacks.&nbsp; You are correct that it will use a large amount of router CPU to keep up with this but with a dual core processor router i&#039;m okay with that.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>