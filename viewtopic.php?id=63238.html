<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-WDR4300 back to Firmware - Bricked now?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p314051">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I had to flash back to the original firmware on my router . Unfortunately I could not find matching firmware or cut the original (.bin) with WinSCP to get the &quot; boot &quot; out . Then I was so stupid and have loaded from&nbsp; DD - WRT the WDR4300 - Webrevert and tried to flash it . With the bad result that now only the left Power lamp is lit and quite right arrows . <br />The router is no longer reachable , ipconfig spits only 169.254.71.128 from me . <br />Can i do know anythink for the router to get him back in life?? If yes how? Thank you very much !</p><p>P.s. sorry for my englisch, i still try to teach it <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314053">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						9 Mar 2016, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I hope these will help (do you speak Russian?):</p><p><a href="https://wiki.openwrt.org/toh/tp-link/tl-wdr4300#de-brick_or_oem_installation_using_the_tftp_recovery">https://wiki.openwrt.org/toh/tp-link/tl … p_recovery</a></p><p><a href="https://wiki.openwrt.org/ru/toh/tp-link/tl-wdr4300#прошивка_через_tftp">https://wiki.openwrt.org/ru/toh/tp-link … через_tftp</a></p><p>Unless low-level firmware has been corrupted, it&#039;s hopeful you will be able to recover via TFTP using the above info.&nbsp; HTH <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314088">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>Hello and thanks.<br />Unfortunately I do not speak Russian or significantly worse than English . : D<br />How do I know at all whether the router is bricked ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314107">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						9 Mar 2016, 11:41					</div>
				</div>
				<div class="post-content content">
					<p>- set IP Your PC 192.168.1.2<br />- Your router go to safefaile mode (Failsafe mode</p><p>Power up your router. When the &#039;SYS&#039; light (asterisk symbol right of the power light) starts to blink, immediately push the WPS/Reset button on the back-left of the router for a short time (&gt;1 sec). The &#039;SYS&#039; light should now start to blink very fast.</p><p>On a TL-WDR4300 Ver 1.6 and Barrier Breaker Bleeding Edge, r39211, the above instructions were not terribly successful. The only way that I was able to get the router into failsafe mode was to quickly and repeatedly press the WPS/Reset button starting before the front panel &quot;star&quot; LED started flashing. When that LED finally lit, it appeared to go directly into the rapid-flashing &quot;failsafe&quot; indication. If the WPS LED lights (rightmost, &quot;yin-yang arrows&quot;), it may be that you started clicking the button a little early in the boot sequence.), use cmd command ping 192.168.1.1 if response is OK.<br />-SSH to your router, and use mini-web or mongoose for web download then copy your firmware Openwrt...sysgrade.bin file to /tmp/ directory in router.<br />- run mtd -r write /tmp/yourfirmware.bin firmware<br />link help: <a href="https://forum.openwrt.org/viewtopic.php?pid=182356#p182356">https://forum.openwrt.org/viewtopic.php … 56#p182356</a><br />and <a href="https://wiki.openwrt.org/toh/tp-link/tl-wdr4300.">https://wiki.openwrt.org/toh/tp-link/tl-wdr4300.</a></p>											<p class="post-edited">(Last edited by <strong>dktn</strong> on 9 Mar 2016, 11:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314126">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>Ok, i will try your Information.<br />Yesterday i didn´t get a ping on 192.168.1.1 (only 169.254.71.128)</p><p>I think my &quot;sys&quot; light didn´t blink or lit, only Power (Left) and YingYang on the right. <br />When i plug in an Lan kabel, this Symbol lit even.</p>											<p class="post-edited">(Last edited by <strong>rukain</strong> on 10 Mar 2016, 09:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314148">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						9 Mar 2016, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>run cmd command: ping 192.168.1.1 -t, goto network set IP of your PC: 192.168.1.2&nbsp; subnet mask:255.255.255.0, gateway 192.168.1.1<br />seeing on &#039;cmd&#039; windows does router response when you setting router back to safefail.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314169">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>It seems that i cant got back to safefail...</p><p>Set the Ip to 192.168.1.2 and ping 192.168.1.1 can not connect to the host.</p><p>The &quot;Sys&quot; light doesnt blink, when i start my router for one second all lights blink up, then only the power light lit, if i plugin a patch cabel the light for Lan 1 starts to blink. </p><p>When i start the router with holding the reset button for 3 seconds (to go in the safefail) the YingYang light is on...</p><p>I think now it is a expensive doorstop.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314170">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						9 Mar 2016, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried TFTP as linked in the first response post?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314173">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>i try it in this way:<br /><a href="https://www.youtube.com/watch?v=1hWT35w6sVI">https://www.youtube.com/watch?v=1hWT35w6sVI</a></p><p>The TFTP LogViewer shows me this message:<br /></p><div class="codebox"><pre><code>Connection received from 192.168.0.86 on port 2406 [09/03 20:37:16.183]
Error : connect returns 10061: &lt;Es konnte keine Verbindung hergestellt werden, da der Zielcomputer die Verbindung verweigerte.&gt; [09/03 20:37:16.184]
Connection received from 192.168.0.86 on port 2406 [09/03 20:37:21.183]
Error : connect returns 10061: &lt;Es konnte keine Verbindung hergestellt werden, da der Zielcomputer die Verbindung verweigerte.&gt; [09/03 20:37:21.184]
Connection received from 192.168.0.86 on port 2406 [09/03 20:37:26.182]
Error : connect returns 10061: &lt;Es konnte keine Verbindung hergestellt werden, da der Zielcomputer die Verbindung verweigerte.&gt; [09/03 20:37:26.183]</code></pre></div><p>translate:<br />&lt; There could be no connection Made Will , because the target machine die connection refused . &gt;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314177">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						9 Mar 2016, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>So the device is requesting to connect and your tftp/server machine is refusing the connection? Firewall?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314185">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>i shut all firewall (Windows) down, but it still doesnt work.<br />here Screenshot from windump:<br /><span class="postimg"><img src="http://fs5.directupload.net/images/160309/rgm4np8w.jpg" alt="http://fs5.directupload.net/images/160309/rgm4np8w.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314187">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						9 Mar 2016, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>IP of tftp/server machine? 192.168.0.66</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314189">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						9 Mar 2016, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br /></p><div class="codebox"><pre><code>IP 192.168.0.86.1540 &gt; Sandra-PC.69: 44 RRQ &quot;wdr4300v1_tp_recovery.bin&quot; octet timeout 5</code></pre></div><p>That&#039;s your bricked router!&nbsp; It&#039;s alive!&nbsp; It&#039;s on IP address 192.168.0.86 connecting from port 1540 (isn&#039;t that right?).</p><p>It&#039;s trying to connect to the tftp port (69) on your PC to request a file named wdr4300v1_tp_recovery.bin, but it&#039;s failing with a timeout.</p><p>1.) Have you set your laptop Ethernet IP address to 192.168.0.66?&nbsp; I think you have because, if I understand, it wouldn&#039;t request the file with that name unless it found that exact IP address.&nbsp; In other words, the static IP address of the router is always 192.168.0.86 and your laptop&#039;s static IP address must always be 192.168.0.66.</p><p>2.) Have you downloaded and installed a TFTP server program like tftpd32 or tftpd64?&nbsp; You need to download and install such a server, then put the firmware file to restore in the folder where the TFTP server is installed (its root directory).&nbsp; The file needs to be renamed to wdr4300v1_tp_recovery.bin.&nbsp; Then start the TFTP server program on your laptop.</p><p>3.) Then fire up the router the same way you did to get this screen dump which you just posted.&nbsp; It will take a little while to upload the firmware, flash it, reinitialize and zero out NVRAM, then reboot.&nbsp; This may take 3 or 4 or 5 minutes.&nbsp; <span class="bbu">Please be patient.</span>.</p><p>Once it reboots it should have the stock firmware on it that you uploaded.&nbsp; If you go to the device&#039;s webpage (either 192.168.0.1 or 192.168.1.1) and don&#039;t see this restored firmware, be sure to clear your browser&#039;s cache completely.&nbsp; Sometimes stuff is left over and doesn&#039;t show you the real router webpage.</p><p>Again, HTH.&nbsp; Seeing these requests means you should be able to succeed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314190">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 23:19					</div>
				</div>
				<div class="post-content content">
					<p>Yes, network setting of PC is 192.168.0.66...<br />in TFTP this service interface is selected, but after some time it will <br />automatically change to 127.0.0.1... but until then nothing happened</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314198">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						9 Mar 2016, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>@ cmsigler, here some pictures i think i anwsers your questions at all...</p><p>Network<br /><span class="postimg"><img src="http://fs5.directupload.net/images/160309/7o4l2ska.jpg" alt="http://fs5.directupload.net/images/160309/7o4l2ska.jpg" /></span></p><p>File<br /><span class="postimg"><img src="http://fs5.directupload.net/images/160309/3934j8sd.jpg" alt="http://fs5.directupload.net/images/160309/3934j8sd.jpg" /></span></p><p>TFTP32<br /><span class="postimg"><img src="http://fs5.directupload.net/images/160309/5obnnhbu.jpg" alt="http://fs5.directupload.net/images/160309/5obnnhbu.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>rukain</strong> on 9 Mar 2016, 23:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314202">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						10 Mar 2016, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>As best I can tell, you have things set up correctly.&nbsp; But I could be wrong and there could be a minor problem on your end.</p><p>Are you sure the tftpd32 server is running?&nbsp; Is there a &quot;Start service&quot; button you have to click?&nbsp; I&#039;ve never used it....</p><p>If it doesn&#039;t work the first time, you may have to try the procedure many times for it to connect and upload the firmware.&nbsp; Wish I could be of more assistance... <img src="https://forum.openwrt.org/img/smilies/neutral.png" width="15" height="15" alt="neutral" /></p><p>Clemmitt</p>											<p class="post-edited">(Last edited by <strong>cmsigler</strong> on 10 Mar 2016, 00:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314203">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						10 Mar 2016, 00:33					</div>
				</div>
				<div class="post-content content">
					<p>From your windump the device is doing a RRQ to Sandra-PC? What is the IP of this machine and where did the device get that name? What is meant by your comment that the PC goes from an assigned IP to loopback? Are you able to prove your TFTP server in any way; another machine perhaps?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314230">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						10 Mar 2016, 09:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Sandra-PC is my machine and the IP is set to 192.168.0.66....<br />If TFTP (32 bit Version) runs correctly or not, i cant check this because i only had one PC at this times.<br />Is there any way to check it?</p><p>@ cmsigler, did you think my router isn´t dead because i get this feedback:<br /></p><div class="codebox"><pre><code>IP 192.168.0.86.1540 &gt; Sandra-PC.69: 44 RRQ &quot;wdr4300v1_tp_recovery.bin&quot; octet timeout 5</code></pre></div><p>whence come this number: 192.168.0.<strong>86</strong></p>											<p class="post-edited">(Last edited by <strong>rukain</strong> on 10 Mar 2016, 09:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314231">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">dktn</div>
					<div class="post-datetime">
						10 Mar 2016, 10:14					</div>
				</div>
				<div class="post-content content">
					<p>what is router IP ? use Angry IP Scanner program to find it.<br />set IP on your getway, then ping to your router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314252">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						10 Mar 2016, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br /></p><div class="quotebox"><cite>rukain wrote:</cite><blockquote><p>@ cmsigler, did you think my router isn´t dead because i get this feedback:<br />whence come this number: 192.168.0.<strong>86</strong></p></blockquote></div><p>The address ending in .86 is the address of your router, which is sending connection requests to your PC.&nbsp; As you said, the address of the PC is the one ending in .66.</p><p>The router is sending requests to the TFTP program asking to upload the file with name wdr4300v1_tp_recovery.bin.&nbsp; This means the router is doing what it is supposed to.&nbsp; Assuming the TFTP server program is working correctly, I&#039;m not sure why it&#039;s not flashing because I&#039;m not right there with you to see.&nbsp; Sorry I can&#039;t be of more help <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314282">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						10 Mar 2016, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>The file is named incorrectly? Look at the name in RRQ line, and what is in your directory.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314301">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						10 Mar 2016, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>@ anomeome, i think the name is correct. </p><p>i gues the problem is, that the router (192.168.0.86) can not connect, that is the message from TFTP Server Log View...</p><p>@ dktn, Angry IP Scan brings no result. it is to bad...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314309">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">rukain</div>
					<div class="post-datetime">
						10 Mar 2016, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>Does it make sense, to try it with a serial cable? <br />Or meaningless since this trial here not works...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314313">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						10 Mar 2016, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Makes perfect sense!&nbsp; If TFTP refuses to work serial recovery will work, many do so successfully on these forum boards -- provided you solder very carefully and hook it up with a USB to TTL cable correctly (or directly to an old-fashioned serial port).&nbsp; I hope from the device page for the TL-WDR4300 it&#039;s easy to figure out how to solder pins or a pad for serial connection.</p><p>I&#039;ve recovered via TFTP but never soldered a serial port connection.&nbsp; That&#039;s the final frontier for me <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />&nbsp; Good luck!</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314315">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">slh</div>
					<div class="post-datetime">
						10 Mar 2016, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>Keep in mind that there is a very good chance (probably close to 100%) that your initial flashing with an oversized (including u-boot) vendor firmware has overwritten your router&#039;s ART partition (which contains the calibration data for your router&#039;s wlan cards), without ART (and ART is specific to each individual device) you&#039;ll lose wlan/ AP support (even if you can restore wired functionality).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>