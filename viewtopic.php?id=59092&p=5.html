<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [MT7621A]WiTi Board is coming. Do you want to hack it?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Feb 2018 and 3 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=59092&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=59092&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=59092&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=16.html">16</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p301061">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						24 Nov 2015, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody. I&#039;m a new forum user. I have a WiTi board and I have some problems. I would like to install WPA for the WiFi interfaces and p910nd for plug in a printer and get a printer server but the only I get are errors.</p><p>opkg install kmod-usb-printer p910nd<br />Installing kmod-usb-printer (3.18.23-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/base/kmod-usb-printer_3.18.23-1_ramips_24kec.ipk.">http://downloads.openwrt.org/snapshots/ … 24kec.ipk.</a><br />Multiple packages (kmod-usb-core and kmod-usb-core) providing same name marked HOLD or PREFER. Using latest.<br />Installing p910nd (0.97-4) to root...<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ramips/generic/packages/packages/p910nd_0.97-4_ramips_24kec.ipk.">http://downloads.openwrt.org/snapshots/ … 24kec.ipk.</a><br />Configuring p910nd.<br />//usr/lib/opkg/info/p910nd.postinst: line 4: default_postinst: not found<br />Configuring block-mount.<br />//usr/lib/opkg/info/block-mount.postinst: line 4: default_postinst: not found<br />Configuring hostapd-common.<br />//usr/lib/opkg/info/hostapd-common.postinst: line 4: default_postinst: not found<br />Configuring wpad-mini.<br />//usr/lib/opkg/info/wpad-mini.postinst: line 4: default_postinst: not found<br />Collected errors:<br /> * satisfy_dependencies_for: Cannot satisfy the following dependencies for kmod-usb-printer:<br /> * &nbsp; &nbsp; kernel (= 3.18.23-1-fe3e4217de4d8dbd15006ba7779d8780) * <br /> * opkg_install_cmd: Cannot install package kmod-usb-printer.<br /> * pkg_run_script: package &quot;p910nd&quot; postinst script returned status 127.<br /> * opkg_configure: p910nd.postinst returned 127.<br /> * pkg_run_script: package &quot;block-mount&quot; postinst script returned status 127.<br /> * opkg_configure: block-mount.postinst returned 127.<br /> * pkg_run_script: package &quot;hostapd-common&quot; postinst script returned status 127.<br /> * opkg_configure: hostapd-common.postinst returned 127.<br /> * pkg_run_script: package &quot;wpad-mini&quot; postinst script returned status 127.<br /> * opkg_configure: wpad-mini.postinst returned 127.</p><br /><p>Can anybody help me? What do I need to do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301078">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">risk</div>
					<div class="post-datetime">
						24 Nov 2015, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>@whatdemocracy</p><p>This is one of the problems of building and using trunk images, buildbot keeps building new kernels, packages and images automatically but the kernel on the image you&#039;ve flashed stands still.</p><p>You have two options going forward, </p><p>1st is okg install --force-depends to ignore the fact kernel module and kernel you flashed are different.</p><p>2nd option is to build your own image with the stuff you want and need built in based on openwrt + a few small changes so the WiTi board option shows up.</p><p>Should you pick option 2 today, you can grab nitroshift&#039;s repository that has those small patches preapplied and build an image for yourself. Going forward, as those changes land in trunk, should you continue to use trunk builds, you&#039;ll likely be using the trunk imagebuilder which is less work. Eventually, come 16.01 release or whatever the number for the next major release, you could use that and not care about building anything.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301142">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						25 Nov 2015, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>hi again,<br /> you probably have the same issue as i have - sd card is mounted every time read-only.<br />you need to patch the patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch">https://github.com/openwrt/openwrt/blob … -SoC.patch</a> <br />to<br /><a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a><br />if you just want a compiled fw until you get a proper fix grab my compiled image:<br /><a href="https://www.dropbox.com/s/l6y5busryffaira/openwrt-ramips-mt7621-witi-squashfs-sysupgrade.bin?dl=1">https://www.dropbox.com/s/l6y5busryffai … e.bin?dl=1</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301173">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						25 Nov 2015, 14:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>hi again,<br /> you probably have the same issue as i have - sd card is mounted every time read-only.<br />you need to patch the patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch">https://github.com/openwrt/openwrt/blob … -SoC.patch</a> <br />to<br /><a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a><br />if you just want a compiled fw until you get a proper fix grab my compiled image:<br /><a href="https://www.dropbox.com/s/l6y5busryffaira/openwrt-ramips-mt7621-witi-squashfs-sysupgrade.bin?dl=1">https://www.dropbox.com/s/l6y5busryffai … e.bin?dl=1</a></p></blockquote></div><p>Can I use that firmware? Do I need to istall luci after aply it? Does the firmware come with the patches applyed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301181">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						25 Nov 2015, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>it has luci and the patch for sd write - it&#039;s your decision to use it or not <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301184">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						25 Nov 2015, 15:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>it has luci and the patch for sd write - it&#039;s your decision to use it or not <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Thanks.</p><p>Is ther any possibility to upgrade the firmware once I have installed it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301208">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">risk</div>
					<div class="post-datetime">
						25 Nov 2015, 20:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whatdemocracy wrote:</cite><blockquote><p>Thanks.</p><p>Is ther any possibility to upgrade the firmware once I have installed it?</p></blockquote></div><p>Yes; like with any other openwrt device.</p><div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>... <a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a> ...</p></blockquote></div><p>Seems to remove ..WP.. (write-protect) option from some bitmask.<br />Any idea what that amounts to in practice and why wouldn&#039;t it be in the default kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301232">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">risk</div>
					<div class="post-datetime">
						25 Nov 2015, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>Seems like there&#039;re some issues with the mt76 driver that persist at head and cause wifi to stop working.</p><div class="codebox"><pre><code>[   75.190000] br-lan: port 2(wlan0) entered forwarding state
[18326.710000] ------------[ cut here ]------------
[18326.720000] WARNING: CPU: 0 PID: 0 at /home/risk/projects/openwrt/build_dir/target-mipsel_1004kc+dsp_musl-1.1.11/linux-ramips_mt7621/mt76
-2015-10-30/mac.c:67 mt76_mac_process_rx+0x19c/0x248 [mt76pci]()
[18326.760000] Modules linked in: pppoe ppp_async iptable_nat pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 ipt_REJECT i
pt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_
LOG xt_CT usbhid slhc rtc_pcf8563 nf_reject_ipv4 nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcach
e nf_conntrack iptable_raw iptable_mangle iptable_filter ip_tables hid_generic crc_ccitt hid evdev input_core i2c_dev i2c_core mt76pci mac80
211 cfg80211 compat ledtrig_usbdev ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_raw ip6table_mangle ip6table_filter ip6_tab
les x_tables mmc_block sdhci_pltfm sdhci mtk_sd mmc_core leds_gpio xhci_plat_hcd xhci_hcd ahci libahci libata sd_mod scsi_mod gpio_button_ho
tplug usbcore nls_base usb_common
[18326.910000] CPU: 0 PID: 0 Comm: swapper/0 Not tainted 3.18.23 #1
[18326.920000] Stack : 00000000 00000004 00000006 80057e90 00000000 00000000 00000000 00000000
[18326.920000]    804456da 00000034 00000000 00000001 803f0000 80460000 803ef043 803ef3e8
[18326.920000]    80374898 00000000 00000000 8044445c 8ea94800 00000040 8eeb957c 800589f4
[18326.920000]    803f35b4 800279c8 803f35b8 803f0000 8037839c 803ddbfc 8ea94800 003ddbfc
[18326.920000]    00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[18326.920000]    ...
[18326.990000] Call Trace:
[18327.000000] [&lt;80016690&gt;] show_stack+0x50/0x84
[18327.010000] [&lt;801920d8&gt;] dump_stack+0x64/0x88
[18327.020000] [&lt;80027ad0&gt;] warn_slowpath_common+0x84/0xb4
[18327.030000] [&lt;80027b84&gt;] warn_slowpath_null+0x18/0x24
[18327.040000] [&lt;8ecd51d8&gt;] mt76_mac_process_rx+0x19c/0x248 [mt76pci]
[18327.050000] [&lt;8ecd0ebc&gt;] mt76_kick_queue+0x478/0x590 [mt76pci]
[18327.060000] 
[18327.060000] ---[ end trace 35c6055006a4e40e ]---
[18327.070000] ------------[ cut here ]------------
[18327.080000] WARNING: CPU: 0 PID: 0 at /home/risk/projects/openwrt/build_dir/target-mipsel_1004kc+dsp_musl-1.1.11/linux-ramips_mt7621/comp
at-wireless-2015-10-26/net/mac80211/rx.c:3617 ieee80211_rx_napi+0x2f8/0x860 [mac80211]()
[18327.120000] Rate marked as a VHT rate but data is invalid: MCS: 10, NSS: 3
[18327.140000] Modules linked in: pppoe ppp_async iptable_nat pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 ipt_REJECT i
pt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_
LOG xt_CT usbhid slhc rtc_pcf8563 nf_reject_ipv4 nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcach
e nf_conntrack iptable_raw iptable_mangle iptable_filter ip_tables hid_generic crc_ccitt hid evdev input_core i2c_dev i2c_core mt76pci mac80
211 cfg80211 compat ledtrig_usbdev ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_raw ip6table_mangle ip6table_filter ip6_tab
les x_tables mmc_block sdhci_pltfm sdhci mtk_sd mmc_core leds_gpio xhci_plat_hcd xhci_hcd ahci libahci libata sd_mod scsi_mod gpio_button_ho
tplug usbcore nls_base usb_common
[18327.290000] CPU: 0 PID: 0 Comm: swapper/0 Tainted: G        W      3.18.23 #1
[18327.300000] Stack : 00000000 00000004 00000006 80057e90 00000000 00000000 00000000 00000000
[18327.300000]    804456da 00000041 00000000 00000001 803f0000 80460000 803ef043 803ef3e8
[18327.300000]    80374898 00000000 00000000 8044445c 00000000 00000040 8eeb957c 800589f4
[18327.300000]    803f35b4 80027954 803f35b8 803f0000 8037839c 803ddbac 00000000 003ddbac
[18327.300000]    00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[18327.300000]    ...
[18327.370000] Call Trace:
[18327.380000] [&lt;80016690&gt;] show_stack+0x50/0x84
[18327.390000] [&lt;801920d8&gt;] dump_stack+0x64/0x88
[18327.390000] [&lt;80027ad0&gt;] warn_slowpath_common+0x84/0xb4
[18327.400000] [&lt;80027b2c&gt;] warn_slowpath_fmt+0x2c/0x38
[18327.410000] [&lt;8ef22aa8&gt;] ieee80211_rx_napi+0x2f8/0x860 [mac80211]
[18327.430000] [&lt;8ecd0edc&gt;] mt76_kick_queue+0x498/0x590 [mt76pci]
[18327.440000] 
[18327.440000] ---[ end trace 35c6055006a4e40f ]---
[18327.450000] ------------[ cut here ]------------
[18327.460000] WARNING: CPU: 0 PID: 0 at /home/risk/projects/openwrt/build_dir/target-mipsel_1004kc+dsp_musl-1.1.11/linux-ramips_mt7621/mt76
-2015-10-30/mac.c:67 mt76_mac_process_rx+0x19c/0x248 [mt76pci]()
[18327.500000] Modules linked in: pppoe ppp_async iptable_nat pppox ppp_generic nf_nat_ipv4 nf_conntrack_ipv6 nf_conntrack_ipv4 ipt_REJECT i
pt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_id xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_
LOG xt_CT usbhid slhc rtc_pcf8563 nf_reject_ipv4 nf_nat_masquerade_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcach
e nf_conntrack iptable_raw iptable_mangle iptable_filter ip_tables hid_generic crc_ccitt hid evdev input_core i2c_dev i2c_core mt76pci mac80
211 cfg80211 compat ledtrig_usbdev ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_raw ip6table_mangle ip6table_filter ip6_tab
les x_tables mmc_block sdhci_pltfm sdhci mtk_sd mmc_core leds_gpio xhci_plat_hcd xhci_hcd ahci libahci libata sd_mod scsi_mod gpio_button_ho
tplug usbcore nls_base usb_common
[18327.650000] CPU: 0 PID: 0 Comm: swapper/0 Tainted: G        W      3.18.23 #1
[18327.660000] Stack : 00000000 00000004 00000006 80057e90 00000000 00000000 00000000 00000000
[18327.660000]    804456da 00000041 00000000 00000001 803f0000 80460000 803ef043 803ef3e8
[18327.660000]    80374898 00000000 00000000 8044445c 8ea92800 00000040 8eeb957c 800589f4
[18327.660000]    803f35b4 80027954 803f35b8 803f0000 8037839c 803ddbfc 8ea92800 003ddbfc
[18327.660000]    00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
[18327.660000]    ...
[18327.730000] Call Trace:
[18327.740000] [&lt;80016690&gt;] show_stack+0x50/0x84
[18327.750000] [&lt;801920d8&gt;] dump_stack+0x64/0x88
[18327.750000] [&lt;80027ad0&gt;] warn_slowpath_common+0x84/0xb4
[18327.760000] [&lt;80027b84&gt;] warn_slowpath_null+0x18/0x24
[18327.770000] [&lt;8ecd51d8&gt;] mt76_mac_process_rx+0x19c/0x248 [mt76pci]
[18327.790000] [&lt;8ecd0ebc&gt;] mt76_kick_queue+0x478/0x590 [mt76pci]
[18327.800000] 
[18327.800000] ---[ end trace 35c6055006a4e410 ]---</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301255">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						26 Nov 2015, 02:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>hi again,<br /> you probably have the same issue as i have - sd card is mounted every time read-only.<br />you need to patch the patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch">https://github.com/openwrt/openwrt/blob … -SoC.patch</a> <br />to<br /><a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a></p></blockquote></div><p>Can you please explain what you mean by &quot;patch the patch&quot;? Can you provide command line commands to do this? I am using nitroshift&#039;s repo, will it work on that? I ask because I am wary of trying to use the mqmaker patch on it. Thanks!</p><p>EDIT: I think I figured it out. </p><div class="codebox"><pre><code>nano target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch</code></pre></div><p>Change line 1961 to </p><div class="codebox"><pre><code> +    .flags          = MSDC_SYS_SUSPEND | MSDC_CD_PIN_EN | MSDC_REMOVABLE | MSDC_HIGHSPEED,</code></pre></div><p>Trying it now. We&#039;ll see if it works!</p>											<p class="post-edited">(Last edited by <strong>shutin</strong> on 26 Nov 2015, 07:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301261">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						26 Nov 2015, 03:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>risk wrote:</cite><blockquote><p>re: 512 vs. 256 .. do you see a practical difference for your use case?<br />I&#039;ve been meaning to take a look at how exactly the kernel figures out how much memory the board has, but I&#039;d rather try to spend time trying to help shepherd nitroshift&#039;s changes in first, and take on the 256 vs 512 challenge</p></blockquote></div><p>I don&#039;t care at all about the 512m memory feature. I don&#039;t think those versions have even shipped yet. I only mentioned that the 512m patch wasn&#039;t working because the mqmaker openwrt repo was failing to build because of a bad patch. Forget the 512m memory thing, I want a clean way to get the sdcard to mount as writable!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301263">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">build000</div>
					<div class="post-datetime">
						26 Nov 2015, 04:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shutin wrote:</cite><blockquote><p>I don&#039;t care at all about the 512m memory feature. I don&#039;t think those versions have even shipped yet. I only mentioned that the 512m patch wasn&#039;t working because the mqmaker openwrt repo was failing to build because of a bad patch. Forget the 512m memory thing, I want a clean way to get the sdcard to mount as writable!</p></blockquote></div><p><a href="https://github.com/mqmaker/witi-openwrt/commit/3ba8797b3f6535c8439350dbee9816dec5d368cd">https://github.com/mqmaker/witi-openwrt … dec5d368cd</a><br />The last amendment results in the fact that it manages to build a this firmware (use virtual machine ubuntu-15.10-i386-server) - another thing that I do not know how it works - has not yet reached me WiTi Board 512 MB purchased ...<br />I found yet another repo test mentioned at the forum mqmaker and described here:<br /><a href="https://k0st.wordpress.com/2015/11/25/witi-board-and-openwrt/">https://k0st.wordpress.com/2015/11/25/w … d-openwrt/</a><br /><a href="https://forum.mqmaker.com/t/mainline-openwrt-trunk-designated-driver/143/35">https://forum.mqmaker.com/t/mainline-op … ver/143/35</a></p>											<p class="post-edited">(Last edited by <strong>build000</strong> on 26 Nov 2015, 07:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301331">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						26 Nov 2015, 20:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whatdemocracy wrote:</cite><blockquote><div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>hi again,<br /> you probably have the same issue as i have - sd card is mounted every time read-only.<br />you need to patch the patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch">https://github.com/openwrt/openwrt/blob … -SoC.patch</a> <br />to<br /><a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a><br />if you just want a compiled fw until you get a proper fix grab my compiled image:<br /><a href="https://www.dropbox.com/s/l6y5busryffaira/openwrt-ramips-mt7621-witi-squashfs-sysupgrade.bin?dl=1">https://www.dropbox.com/s/l6y5busryffai … e.bin?dl=1</a></p></blockquote></div><p>Can I use that firmware? Do I need to istall luci after aply it? Does the firmware come with the patches applyed?</p></blockquote></div><p>Can you explain me how I must use the patches to have sd card mounted rw? I&#039;m using nitroshift git and my sd is mounted every time ro.</p>											<p class="post-edited">(Last edited by <strong>whatdemocracy</strong> on 26 Nov 2015, 20:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301394">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						27 Nov 2015, 08:42					</div>
				</div>
				<div class="post-content content">
					<p>I was having a terrible time recently trying to flash a new firmware through luci. It kept giving me this error in the UI:</p><p>&quot;The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&quot;</p><p>I tried a test t the command line:</p><div class="codebox"><pre><code>sysupgrade -d 60 -v -T /tmp/path_to_my_bin.bin</code></pre></div><p>That gave me a slightly different error:</p><p>&quot;Sysupgrade is not yet supported on generic<br />Image check &#039;platform_check_image&#039; failed.&quot;</p><p>That led me to this support ticket with the answer. <a href="https://dev.openwrt.org/ticket/10554">https://dev.openwrt.org/ticket/10554</a></p><div class="codebox"><pre><code> cat /tmp/sysinfo/board_name </code></pre></div><p>was set to &#039;generic&#039;. change it to &#039;witi&#039;.</p><p>I flashed a newer firmware, which would kernel panic on boot. tftpflashed another, which sits there with 192.168.1.1, but i cannot ping anything from it (via a UART console, hit enter a bunch after boot), nor can i ping it from my pc. gonna attempt some more. this kind of stuff is the fun that i bought it for, right? <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301395">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						27 Nov 2015, 08:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whatdemocracy wrote:</cite><blockquote><p>Can you explain me how I must use the patches to have sd card mounted rw? I&#039;m using nitroshift git and my sd is mounted every time ro.</p></blockquote></div><p>This issue isn&#039;t solved yet. nitroshift said they want to focus on getting initial support in main openwrt first, then focus on that stuff, which i can appreciate. </p><p>if you are feeling adventurous, see my post #109. mqmaker supposedly solved the sdcard problem awhile ago. you can try applying their fix by modifying a file in nitroshifts repo. i&#039;ve been trying to do this but have run into lots of other unrelated issues.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301403">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">risk</div>
					<div class="post-datetime">
						27 Nov 2015, 10:47					</div>
				</div>
				<div class="post-content content">
					<p>WiTi/witi/MQmaker WiTi naming conventions were kind of tricky to get right, which I guess is now causing sysupgrade troubles depending on what you ended up using, and what you&#039;re trying to use sysupgrade on. AFAIK, in the images produced by openwrt uImage starts at the beginning of the file, and uboot kernel is being loaded at the start of firmware as well, so writing the sysupgrade image directly to the firmware partition should result in kernel being loaded correctly on reboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301494">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						27 Nov 2015, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m happy to report that the SD card write-protect fix works. See post 109. I&#039;ve been able to mount a 16gig SD card as my overlay and swap partition. Finally. </p><p>One huge problem I had with the recent nitroshift builds was the network after flash. It would set 192.168.1.1 as the ip in br-lan, but you could not ping the router or ping out from that. I was pretty lost until I flashed the one image that has always worked for me, risk&#039;s post #90. I copied the /etc/config/network settings from that and wrote them into the newer image via UART console. Presto, that worked. </p><p>I don&#039;t know where I would add these settings in the source code, but they need to make it in there. This goes in /etc/network/config at the bottom. </p><div class="codebox"><pre><code>config switch
        option name &#039;switch0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;1&#039;
        option ports &#039;0 1 2 3 6t&#039;

config switch_vlan
        option device &#039;switch0&#039;
        option vlan &#039;2&#039;
        option ports &#039;4 6t&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301509">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">risk</div>
					<div class="post-datetime">
						27 Nov 2015, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s in 02_network, recent nitroshift sources get it right, settings that get generated are subject to machine name -&gt; board name detection working properly (e.g. matching is case sensitive there)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301572">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						28 Nov 2015, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>Build tree address has changed to <a href="https://github.com/nitroshift/openwrt/tree/witi-initial-support">https://github.com/nitroshift/openwrt/t … al-support</a></p><p>nitroshift</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301597">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">filipescu.cristian</div>
					<div class="post-datetime">
						29 Nov 2015, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>@nitroshift</p><p>Are there any extra steps to get the image build?<br />I was able to build successfully (from your branch) however the at boot time I get kernel panic.<br />It seems it can&#039;t detect the spi flash and gets stuck creating the partitions. </p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301618">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">nitroshift</div>
					<div class="post-datetime">
						29 Nov 2015, 09:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>filipescu.cristian wrote:</cite><blockquote><p>@nitroshift</p><p>Are there any extra steps to get the image build?<br />I was able to build successfully (from your branch) however the at boot time I get kernel panic.<br />It seems it can&#039;t detect the spi flash and gets stuck creating the partitions. </p><p>Thanks</p></blockquote></div><p>Which tree did you build from? Also, please use pastebin to post your boot log.</p><p>nitroshift</p>											<p class="post-edited">(Last edited by <strong>nitroshift</strong> on 29 Nov 2015, 09:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301628">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">gsustek</div>
					<div class="post-datetime">
						29 Nov 2015, 12:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>it has luci and the patch for sd write - it&#039;s your decision to use it or not <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi, for what purpose do you need sdcard(write)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301632">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						29 Nov 2015, 13:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>hi again,<br /> you probably have the same issue as i have - sd card is mounted every time read-only.<br />you need to patch the patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://github.com/openwrt/openwrt/blob/master/target/linux/ramips/patches-3.18/0053-mmc-MIPS-ralink-add-sdhci-for-mt7620a-SoC.patch">https://github.com/openwrt/openwrt/blob … -SoC.patch</a> <br />to<br /><a href="https://github.com/mqmaker/witi-openwrt/blob/master/target/linux/ramips/patches/3007-MQ-disable-SDC-write-protection.patch">https://github.com/mqmaker/witi-openwrt … tion.patch</a><br />if you just want a compiled fw until you get a proper fix grab my compiled image:<br /><a href="https://www.dropbox.com/s/l6y5busryffaira/openwrt-ramips-mt7621-witi-squashfs-sysupgrade.bin?dl=1">https://www.dropbox.com/s/l6y5busryffai … e.bin?dl=1</a></p></blockquote></div><p>I&#039;ve install your compiled fw and have some questions:</p><p>Have you try to get rw permissions on a mmc formatted as ext3 or ext4? I&nbsp; haven&#039;t got it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301691">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">whatdemocracy</div>
					<div class="post-datetime">
						29 Nov 2015, 19:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>gsustek wrote:</cite><blockquote><div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>it has luci and the patch for sd write - it&#039;s your decision to use it or not <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi, for what purpose do you need sdcard(write)?</p></blockquote></div><p>For example:</p><p><a href="http://foro.seguridadwireless.net/openwrt/ejecutando-openwrt-desde-una-memoria-o-disco-usb-%28extroot%29/">http://foro.seguridadwireless.net/openw … xtroot%29/</a></p><p>MicroSD as extroot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301707">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						29 Nov 2015, 21:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whatdemocracy wrote:</cite><blockquote><div class="quotebox"><cite>gsustek wrote:</cite><blockquote><div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>it has luci and the patch for sd write - it&#039;s your decision to use it or not <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi, for what purpose do you need sdcard(write)?</p></blockquote></div><p>For example:</p><p><a href="http://foro.seguridadwireless.net/openwrt/ejecutando-openwrt-desde-una-memoria-o-disco-usb-%28extroot%29/">http://foro.seguridadwireless.net/openw … xtroot%29/</a></p><p>MicroSD as extroot.</p></blockquote></div><p>Yes! You may have noticed there is only about 11 megs of space free after you flash the firmware with luci. By using extroot and extending the root partition using /overlay onto the sd card, you can have plenty of space to install additional packages. Here are the steps that worked for me: <a href="https://wiki.openwrt.org/doc/howto/extroot">https://wiki.openwrt.org/doc/howto/extroot</a></p><p>You will need to install packages block-mount and kmod-fs-ext4. don&#039;t be fooled by the &quot;ext4&quot;, it also adds support for ext2 and ext3.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301708">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						29 Nov 2015, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nitroshift wrote:</cite><blockquote><div class="quotebox"><cite>filipescu.cristian wrote:</cite><blockquote><p>@nitroshift</p><p>Are there any extra steps to get the image build?<br />I was able to build successfully (from your branch) however the at boot time I get kernel panic.<br />It seems it can&#039;t detect the spi flash and gets stuck creating the partitions. </p><p>Thanks</p></blockquote></div><p>Which tree did you build from? Also, please use pastebin to post your boot log.</p><p>nitroshift</p></blockquote></div><p>I also had this issue (kernel panic), using&nbsp; <a href="https://github.com/nitroshift/openwrt/tree/witi-initial-support">https://github.com/nitroshift/openwrt/t … al-support</a><br />Sorry I don&#039;t have a log, but sounds like the error he got. So something happened between your nitroshift/witi and nitroshift/openwrt repos because I am running the former but the latter panics.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 126 to 125 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=59092&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=59092&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=59092&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59092&amp;p=16.html">16</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>