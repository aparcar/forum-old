<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WA901ND v3</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 2 Sep 2014 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 8</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=46990&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=46990&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46990&amp;p=8.html">8</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p215760">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Jmeier</div>
					<div class="post-datetime">
						27 Oct 2013, 02:51					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys,</p><p>TP-Link has released a v3 with different hardware than v2. </p><br /><div class="codebox"><pre><code>U-Boot 1.1.4 (May  3 2013 - 11:32:12)

U-boot AP123


DRAM:  32 MB
Flash Manuf Id 0x1, DeviceId0 0x2, DeviceId1 0x15
flash size 4MB, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
 wasp  reset mask:c03300
WASP ----&gt; S27 PHY
GMAC: cfg1 0x80000000 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init
athrs27_phy_setup ATHR_PHY_CONTROL 4 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :0x10
eth0 up
WASP ----&gt; S27 PHY
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

Booting Atheros AR934x
Linux version 2.6.31--LSDK-9.2.0_U10.5_dsa.7 (root@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #18 Fri May 3 11:35:32 CST 2013
flash_size passed from bootloader = 4
Ram size passed from bootloader =33554432
CPU revision is: 0001974c (MIPS 74Kc)
ath_sys_frequency: cpu srif ddr srif cpu 535 ddr 400 ahb 200
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,115200 root=31:2 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art) mem=32M
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 30080k/32768k available (1769k kernel code, 2688k reserved, 431k data, 112k init, 0k highmem)
NR_IRQS:128
plat_time_init: plat time init done
Calibrating delay loop... 267.26 BogoMIPS (lpj=534528)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
ATH GPIOC major 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A
console [ttyS0] enabled
PPP generic driver version 2.4.2
NET: Registered protocol family 24
5 cmdlinepart partitions found on MTD device ath-nor0
Creating 5 MTD partitions on &quot;ath-nor0&quot;:
0x000000000000-0x000000020000 : &quot;u-boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
-&gt;Oops: flash id 0x10215 .
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
Port Status 1c000004
ath-ehci ath-ehci.0: ATH EHCI
ath-ehci ath-ehci.0: new USB bus registered, assigned bus number 1
ehci_reset Intialize USB CONTROLLER in host mode: 13
ehci_reset Port Status 1c000000
ath-ehci ath-ehci.0: irq 3, io mem 0x1b000000
ehci_reset Intialize USB CONTROLLER in host mode: 13
ehci_reset Port Status 1c000000
ath-ehci ath-ehci.0: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
athwdt_init: Registering WDT success
ath_otp_init: Registering OTP success
ath_clksw_init: Registering Clock Switch Interface success
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 112k freed
init started:  BusyBox v1.01 (2013.03.13-10:01+0000) multi-call binary
This Board use 2.6.31
xt_time: kernel timezone is -0000
nf_conntrack version 0.5.0 (512 buckets, 5120 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
insmod: cannot open module `/lib/modules/2.6.31/kernel/iptable_raw.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/flashid.ko&#039;: No such file or directory
PPPoL2TP kernel driver, V1.0
PPTP driver version 0.8.3
insmod: cannot open module `/lib/modules/2.6.31/kernel/harmony.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/af_key.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/xfrm_user.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/xt_mark.ko&#039;: No such file or directory

Now flash open!
Now flash open!
 (none) mips #18 Fri May 3 11:35:32 CST 2013 (none)
(none) login: ATHR_GMAC: Length per segment 1536
ATHR_GMAC: fifo cfg 3 01f00140
ATHR_GMAC: RX TASKLET - Pkts per Intr:32
mac:1 Registering S27....
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   128
ATHR_GMAC: Mac capability flags    :   2D82
ATHR_GMAC: RX TASKLET - Pkts per Intr:32
mac:0 Registering S27....
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   128
ATHR_GMAC: Mac capability flags    :   2582
athr_gmac_ring_alloc Allocated 640 at 0x81e97c00
athr_gmac_ring_alloc Allocated 2048 at 0x81ccc000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
athr_gmac_ring_alloc Allocated 640 at 0x81e97800
athr_gmac_ring_alloc Allocated 2048 at 0x81e99800
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames
ATHRS27: resetting s27
ATHRS27: s27 reset done
Setting PHY...
device eth1 entered promiscuous mode
Now flash open!
athr_gmac_ring_free Freeing at 0x81e97c00
athr_gmac_ring_free Freeing at 0x81ccc000
athr_gmac_ring_alloc Allocated 640 at 0x81e97c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e28800
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
asf: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 0.9.17.1 (AR5416, AR9380, REGOPS_FUNC, WRITE_EEPROM, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 9.2.0_U10.5_dsa.7 (Atheros/multi-bss)
__ath_attach: Set global_scn[0]
ACBKMinfree = 48
ACBEMinfree = 32
ACVIMinfree = 16
ACVOMinfree = 0
CABMinfree = 48
UAPSDMinfree = 0
Wasp Enterprise mode: 0x00000000
Restoring Cal data from Flash
ath_get_caps[5134] rx chainmask mismatch actual 3 sc_chainmak 0
ath_get_caps[5109] tx chainmask mismatch actual 3 sc_chainmak 0
wifi0: Atheros 9340: mem=0xb8100000, irq=2
====&gt;&gt;&gt;&gt;SystemMode : Standard AP
wlan_vap_create : enter. devhandle=0x815402c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x815402c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created
====&gt;&gt;&gt;&gt;wlan: rand channel 5


 DES SSID SET=TP-LINK_AP_6437CD
 ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1
athr_gmac_ring_free Freeing at 0x81e97c00
athr_gmac_ring_free Freeing at 0x81e28800
br0: port 1(eth1) entering disabled state
athr_gmac_ring_alloc Allocated 640 at 0x81e97c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e28000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames
Setting PHY...
device ath0 entered promiscuous mode
br0: port 2(ath0) entering forwarding state
 ieee80211_ioctl_siwmode: imr.ifm_active=918144, new mode=3, valid=1
br0: port 2(ath0) entering disabled state

 DES SSID SET=TP-LINK_AP_6437CD
br0: port 2(ath0) entering forwarding state
====&gt;&gt;&gt;&gt;cmdCtrl open success
====&gt;&gt;&gt;&gt;eventCtrl open success
====&gt;&gt;&gt;&gt;eventCtrl attach success
====&gt;&gt;&gt;&gt;linkStatus = 0

====&gt;&gt;&gt;&gt;create smartDhcp thread success, pid:6151

ATHR_GMAC: GE0 RX DMA ENABLE
br0: port 2(ath0) entering disabled state
br0: port 2(ath0) entering forwarding state

 TL-WA901ND mips #18 Fri May 3 11:35:32 CST 2013 (none)
TL-WA901ND login:</code></pre></div><p>AR9341, 4MB Flash.</p><p>How would I begin to get this supported?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215763">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						27 Oct 2013, 06:33					</div>
				</div>
				<div class="post-content content">
					<p>try to flash this and see if it works ok:</p><p> <a href="https://forum.openwrt.org/viewtopic.php?pid=215434#p215434">https://forum.openwrt.org/viewtopic.php … 34#p215434</a> </p><p>flash via uboot:</p><p> <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr841nd#tftp.install">http://wiki.openwrt.org/toh/tp-link/tl- … tp.install</a></p><p>follow notes for V8</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215768">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Jmeier</div>
					<div class="post-datetime">
						27 Oct 2013, 08:49					</div>
				</div>
				<div class="post-content content">
					<p>Up and running 100%</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215803">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						27 Oct 2013, 17:08					</div>
				</div>
				<div class="post-content content">
					<p>great, now i&#039;m going to ask you a huge favour, since it seems you&#039;re the only around here with this model AND a serial console attached.</p><p>first of all backup your config from Luci-&gt;System-&gt;Backup/Flash-&gt;Generate archive</p><p>then, download this to the /tmp folder of your router, it&#039;s an OLD tplink firmware without the uboot part, so it can be flashed to the &quot;firmware&quot; partition:</p><p><a href="https://www.dropbox.com/s/xd2pgg04n8r7g6i/wa901ndv3_en_3_13_31_up%28130503%29">https://www.dropbox.com/s/xd2pgg04n8r7g … 8130503%29</a></p><p>then ssh your router and flash with mtd:</p><div class="codebox"><pre><code>cd /tmp
mv wa901* tplink.bin
mtd -r write tplink.bin firmware</code></pre></div><p>now you should have the tplink firmware back on your AP. login to the usual <a href="http://192.168.0.254">http://192.168.0.254</a> or whatever is it&#039;s default ip, then try to flash this from the stock WEB GUI:</p><p><a href="https://www.dropbox.com/s/dyjxbohh85na0qs/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin">https://www.dropbox.com/s/dyjxbohh85na0 … -12.09.bin</a></p><p>let me know how it goes <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 28 Oct 2013, 19:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215918">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Jmeier</div>
					<div class="post-datetime">
						28 Oct 2013, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not able to get it back to the stock image for some reason. All it does is say LZMA error and restarts. Your firmware is working great though!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215923">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						28 Oct 2013, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>oh I&#039;m sorry, i was too confident...</p><p>I&#039;ve edited my previous post with an OLDER tplink firmware, i saw that they are upgrading uboot in every FW upgrade, so there could have been a change in FW image format.<br />see if you can go back to stock by flashing that older fw, it&#039;s an important info to write in wiki for other users <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>thanks for testing!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215963">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zeroe</div>
					<div class="post-datetime">
						29 Oct 2013, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys!</p><p>I&#039;m reporting that it is possible to re-flash this unit with the older stock firmware you posted. It&#039;s also possible to re-flash it with the newest stock firmware:</p><p><a href="http://www.tp-link.com/resources/software/TL-WA901ND_V3_130828.zip">http://www.tp-link.com/resources/softwa … 130828.zip</a></p><p>after 0×20200 bytes is stripped from the beginning of this file.</p><p>And it is also possible to replace stock firmware with your openwrt binary via stock web ui.</p><p>Great job! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216339">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Lenny</div>
					<div class="post-datetime">
						31 Oct 2013, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>I just tried to flash your image trough original TP-link interface (original firmware was in latest version from their website)</p><p>Working well, device seems stable. </p><p>Attaching dmesg and kernel log for further development<br />(It will be great if you can mark this device as officially supported)</p><p><strong>System log</strong><br /></p><div class="codebox"><pre><code>Oct 31 13:06:04 OpenWrt kern.warn kernel: [    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Oct 31 13:06:04 OpenWrt kern.warn kernel: [    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] Writing ErrCtl register=00000000
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] Readback ErrCtl register=00000000
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] Memory: 29120k/32768k available (2107k kernel code, 3648k reserved, 407k data, 212k init, 0k highmem)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] NR_IRQS:51
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.080000] pid_max: default: 32768 minimum: 301
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.080000] Mount-cache hash table entries: 512
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.090000] NET: Registered protocol family 16
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.090000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.100000] MIPS: machine is TP-LINK TL-WA801N/ND v2
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.310000] bio: create slab &lt;bio-0&gt; at 0
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.320000] Switching to clocksource MIPS
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.330000] NET: Registered protocol family 2
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.330000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.330000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.340000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.340000] TCP: Hash tables configured (established 1024 bind 1024)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.350000] TCP reno registered
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.350000] UDP hash table entries: 256 (order: 0, 4096 bytes)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.360000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.360000] NET: Registered protocol family 1
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    0.370000] PCI: CLS 0 bytes, default 32
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.380000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.390000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.400000] msgmni has been set to 56
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.400000] io scheduler noop registered
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.410000] io scheduler deadline registered (default)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.410000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.440000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.450000] console [ttyS0] enabled, bootconsole disabled
Oct 31 13:06:04 OpenWrt kern.warn kernel: [    0.460000] m25p80 spi0.0: found s25sl032a, expected m25p80
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.470000] m25p80 spi0.0: s25sl032a (4096 Kbytes)
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.470000] 5 tp-link partitions found on MTD device spi0.0
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.480000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.480000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.490000] 0x000000020000-0x00000010080c : &quot;kernel&quot;
Oct 31 13:06:04 OpenWrt kern.warn kernel: [    0.500000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.510000] 0x00000010080c-0x0000003f0000 : &quot;rootfs&quot;
Oct 31 13:06:04 OpenWrt kern.warn kernel: [    0.520000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.530000] mtd: partition &quot;rootfs&quot; set to be root filesystem
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.540000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=350000, len=A0000 
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.540000] 0x000000350000-0x0000003f0000 : &quot;rootfs_data&quot;
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.550000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    0.560000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.580000] ag71xx_mdio: probed
Oct 31 13:06:04 OpenWrt kern.info kernel: [    0.590000] eth0: Atheros AG71xx at 0xb9000000, irq 4
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.140000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:00 [uid=004dd042, driver=Generic PHY]
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.160000] TCP cubic registered
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.160000] NET: Registered protocol family 17
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.160000] 8021q: 802.1Q VLAN Support v1.8
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.170000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Oct 31 13:06:04 OpenWrt kern.info kernel: [    1.180000] Freeing unused kernel memory: 212k freed
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    2.950000] Registered led device: tp-link:green:qss
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    2.960000] Registered led device: tp-link:green:system
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    2.960000] Registered led device: tp-link:green:lan
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    2.960000] Registered led device: tp-link:green:wlan
Oct 31 13:06:04 OpenWrt kern.info kernel: [    5.180000] eth0: link up (100Mbps/Full duplex)
Oct 31 13:06:04 OpenWrt kern.notice kernel: [    6.230000] JFFS2 notice: (402) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 12 of xref (0 dead, 2 orphan) found.
Oct 31 13:06:04 OpenWrt kern.info kernel: [    6.410000] eth0: link down
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.800000] Compat-drivers backport release: compat-drivers-2013-01-21-1
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.810000] Backport based on wireless-testing.git master-2013-02-22
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.810000] compat.git: wireless-testing.git
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.960000] cfg80211: Calling CRDA to update world regulatory domain
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.960000] cfg80211: World regulatory domain updated:
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.970000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.980000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.990000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    7.990000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.000000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.010000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.320000] usbcore: registered new interface driver usbfs
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.330000] usbcore: registered new interface driver hub
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.330000] usbcore: registered new device driver usb
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: EEPROM regdomain: 0x0
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: EEPROM indicates default country code should be used
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: doing EEPROM country-&gt;regdmn map search
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: country maps to regdmn code: 0x3a
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: Country alpha2 being used: US
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.910000] ath: Regpair used: 0x3a
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.920000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
Oct 31 13:06:04 OpenWrt kern.debug kernel: [    8.920000] Registered led device: ath9k-phy0
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.920000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.930000] cfg80211: Calling CRDA for country: US
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.940000] cfg80211: Regulatory domain changed to country: US
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.940000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.950000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.960000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
Oct 31 13:06:04 OpenWrt kern.info kernel: [    8.970000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Oct 31 13:06:05 OpenWrt kern.info kernel: [   13.110000] device eth0 entered promiscuous mode
Oct 31 13:06:05 OpenWrt daemon.notice netifd: Interface &#039;loopback&#039; is now up
Oct 31 13:06:05 OpenWrt kern.info kernel: [   13.380000] eth0: link up (100Mbps/Full duplex)
Oct 31 13:06:05 OpenWrt kern.info kernel: [   13.380000] br-lan: port 1(eth0) entered forwarding state
Oct 31 13:06:05 OpenWrt kern.info kernel: [   13.390000] br-lan: port 1(eth0) entered forwarding state
Oct 31 13:06:06 OpenWrt daemon.notice netifd: lan (623): udhcpc (v1.19.4) started
Oct 31 13:06:06 OpenWrt daemon.notice netifd: lan (623): Sending discover...
Oct 31 13:06:06 OpenWrt daemon.notice netifd: lan (623): Sending select for 192.168.0.201...
Oct 31 13:06:06 OpenWrt daemon.notice netifd: lan (623): Lease of 192.168.0.201 obtained, lease time 86400
Oct 31 13:06:06 OpenWrt daemon.notice netifd: Interface &#039;lan&#039; is now up
Oct 31 13:06:06 OpenWrt user.notice ifup: Enabling Router Solicitations on loopback (lo)
Oct 31 13:06:07 OpenWrt user.notice ifup: Allowing Router Advertisements on lan (br-lan)
Oct 31 13:06:07 OpenWrt kern.info kernel: [   15.390000] br-lan: port 1(eth0) entered forwarding state
Oct 31 13:06:10 OpenWrt user.info sysinit: &#039;radio0&#039; is disabled
Oct 31 13:06:10 OpenWrt user.info sysinit: &#039;radio0&#039; is disabled
Oct 31 13:06:10 OpenWrt user.info sysinit: &#039;radio0&#039; is disabled
Oct 31 13:06:11 OpenWrt user.info sysinit: Loading defaults
Oct 31 13:06:11 OpenWrt user.info sysinit: Loading synflood protection
Oct 31 13:06:11 OpenWrt user.info sysinit: Adding custom chains
Oct 31 13:06:12 OpenWrt user.info sysinit: Loading zones
Oct 31 13:06:12 OpenWrt user.info sysinit: Loading forwardings
Oct 31 13:06:12 OpenWrt user.info sysinit: Loading rules
Oct 31 13:06:13 OpenWrt user.info sysinit: Loading redirects
Oct 31 13:06:13 OpenWrt user.info sysinit: Loading includes
Oct 31 13:06:13 OpenWrt user.info sysinit: Optimizing conntrack
Oct 31 13:06:13 OpenWrt user.info sysinit: Loading interfaces
Oct 31 13:06:13 OpenWrt user.info firewall: adding lan (br-lan) to zone lan
Oct 31 13:06:14 OpenWrt authpriv.info dropbear[1007]: Running in background
Oct 31 13:06:15 OpenWrt authpriv.info dropbear[1098]: Child connection from 192.168.0.1:59990
Oct 31 13:06:18 OpenWrt user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!
Oct 31 13:06:18 OpenWrt user.notice dnsmasq: Allowing 127.0.0.0/8 responses
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: started, version 2.62 cachesize 150
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: using local addresses only for domain lan
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: reading /tmp/resolv.conf.auto
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: using nameserver 192.168.0.1#53
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: using local addresses only for domain lan
Oct 31 13:06:18 OpenWrt daemon.info dnsmasq[1141]: read /etc/hosts - 1 addresses
Oct 31 13:06:18 OpenWrt user.info sysinit: setting up led WLAN
Oct 31 13:06:18 OpenWrt user.info sysinit: setting up led LAN
Oct 31 13:06:23 OpenWrt authpriv.notice dropbear[1098]: Password auth succeeded for &#039;root&#039; from 192.168.0.1:59990
Oct 31 13:08:40 OpenWrt daemon.info dnsmasq[1141]: reading /tmp/resolv.conf.auto
Oct 31 13:08:40 OpenWrt daemon.info dnsmasq[1141]: using nameserver 192.168.0.1#53
Oct 31 13:08:40 OpenWrt daemon.info dnsmasq[1141]: using local addresses only for domain lan
Oct 31 13:08:40 OpenWrt daemon.info dnsmasq[1141]: exiting on receipt of SIGTERM
Oct 31 13:08:41 OpenWrt user.notice dnsmasq: DNS rebinding protection is active, will discard upstream RFC1918 responses!
Oct 31 13:08:41 OpenWrt user.notice dnsmasq: Allowing 127.0.0.0/8 responses
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: started, version 2.62 cachesize 150
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: using local addresses only for domain lan
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: reading /tmp/resolv.conf.auto
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: using nameserver 192.168.0.1#53
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: using local addresses only for domain lan
Oct 31 13:08:41 OpenWrt daemon.info dnsmasq[1787]: read /etc/hosts - 1 addresses
Oct 31 13:08:46 OpenWrt user.info firewall: adding lan (br-lan) to zone lan
Oct 31 13:08:50 OpenWrt kern.info kernel: [  119.500000] device wlan0 entered promiscuous mode
Oct 31 13:08:50 OpenWrt kern.info kernel: [  119.780000] br-lan: port 2(wlan0) entered forwarding state
Oct 31 13:08:50 OpenWrt kern.info kernel: [  119.780000] br-lan: port 2(wlan0) entered forwarding state
Oct 31 13:08:52 OpenWrt kern.info kernel: [  121.780000] br-lan: port 2(wlan0) entered forwarding state
Oct 31 13:09:39 OpenWrt local0.notice udpxy[3107]: udpxy 1.0-21.2 (prod) standard [Linux 3.3.8 mips] is starting
Oct 31 13:10:17 OpenWrt daemon.info hostapd: wlan0: STA c8:d1:5e:a3:76:10 IEEE 802.11: authenticated
Oct 31 13:10:17 OpenWrt daemon.info hostapd: wlan0: STA c8:d1:5e:a3:76:10 IEEE 802.11: associated (aid 1)
Oct 31 13:10:17 OpenWrt daemon.info hostapd: wlan0: STA c8:d1:5e:a3:76:10 WPA: pairwise key handshake completed (RSN)
Oct 31 14:11:21 OpenWrt authpriv.info dropbear[1007]: Premature exit: Terminated by signal
Oct 31 14:11:22 OpenWrt authpriv.info dropbear[3780]: Running in background
Oct 31 14:15:12 OpenWrt authpriv.info dropbear[1098]: Exit (root): Disconnect received
Oct 31 14:15:52 OpenWrt authpriv.info dropbear[4934]: Child connection from 192.168.0.1:60305
Oct 31 14:15:54 OpenWrt authpriv.notice dropbear[4934]: Pubkey auth succeeded for &#039;root&#039; with key md5 86:db:ef:fc:98:6c:f1:d7:ce:35:2b:1d:cd:7c:f5:18 from 192.168.0.1:60305
Oct 31 14:17:07 OpenWrt local0.err udpxy[4933]: write_buf: write: Broken pipe
Oct 31 14:18:51 OpenWrt daemon.info hostapd: wlan0: STA c8:d1:5e:a3:76:10 WPA: group key handshake completed (RSN)</code></pre></div><p><strong>Kernel log</strong><br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.3.8 (openwrt@localhost.home.org) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #4 Tue Jul 16 09:25:21 CEST 2013
[    0.000000] MyLoader: sysp=0a04a111, boardp=84fc88f2, parts=0a2f1d7d
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9341 rev 1
[    0.000000] Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 802d41d0, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8128 pages, LIFO batch:0
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-WA801ND-v2 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29120k/32768k available (2107k kernel code, 3648k reserved, 407k data, 212k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79
[    0.100000] MIPS: machine is TP-LINK TL-WA801N/ND v2
[    0.310000] bio: create slab &lt;bio-0&gt; at 0
[    0.320000] Switching to clocksource MIPS
[    0.330000] NET: Registered protocol family 2
[    0.330000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.330000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.340000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.340000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.350000] TCP reno registered
[    0.350000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.360000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.360000] NET: Registered protocol family 1
[    0.370000] PCI: CLS 0 bytes, default 32
[    0.380000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.390000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.400000] msgmni has been set to 56
[    0.400000] io scheduler noop registered
[    0.410000] io scheduler deadline registered (default)
[    0.410000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.440000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.450000] console [ttyS0] enabled, bootconsole disabled
[    0.460000] m25p80 spi0.0: found s25sl032a, expected m25p80
[    0.470000] m25p80 spi0.0: s25sl032a (4096 Kbytes)
[    0.470000] 5 tp-link partitions found on MTD device spi0.0
[    0.480000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.480000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.490000] 0x000000020000-0x00000010080c : &quot;kernel&quot;
[    0.500000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.510000] 0x00000010080c-0x0000003f0000 : &quot;rootfs&quot;
[    0.520000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.530000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.540000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=350000, len=A0000 
[    0.540000] 0x000000350000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.550000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.560000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    0.580000] ag71xx_mdio: probed
[    0.590000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    1.140000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:00 [uid=004dd042, driver=Generic PHY]
[    1.160000] TCP cubic registered
[    1.160000] NET: Registered protocol family 17
[    1.160000] 8021q: 802.1Q VLAN Support v1.8
[    1.170000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.180000] Freeing unused kernel memory: 212k freed
[    2.950000] Registered led device: tp-link:green:qss
[    2.960000] Registered led device: tp-link:green:system
[    2.960000] Registered led device: tp-link:green:lan
[    2.960000] Registered led device: tp-link:green:wlan
[    5.180000] eth0: link up (100Mbps/Full duplex)
[    6.230000] JFFS2 notice: (402) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 12 of xref (0 dead, 2 orphan) found.
[    6.410000] eth0: link down
[    7.800000] Compat-drivers backport release: compat-drivers-2013-01-21-1
[    7.810000] Backport based on wireless-testing.git master-2013-02-22
[    7.810000] compat.git: wireless-testing.git
[    7.960000] cfg80211: Calling CRDA to update world regulatory domain
[    7.960000] cfg80211: World regulatory domain updated:
[    7.970000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    7.980000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.990000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    7.990000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    8.000000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.010000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.320000] usbcore: registered new interface driver usbfs
[    8.330000] usbcore: registered new interface driver hub
[    8.330000] usbcore: registered new device driver usb
[    8.910000] ath: EEPROM regdomain: 0x0
[    8.910000] ath: EEPROM indicates default country code should be used
[    8.910000] ath: doing EEPROM country-&gt;regdmn map search
[    8.910000] ath: country maps to regdmn code: 0x3a
[    8.910000] ath: Country alpha2 being used: US
[    8.910000] ath: Regpair used: 0x3a
[    8.920000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[    8.920000] Registered led device: ath9k-phy0
[    8.920000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47
[    8.930000] cfg80211: Calling CRDA for country: US
[    8.940000] cfg80211: Regulatory domain changed to country: US
[    8.940000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    8.950000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[    8.960000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[    8.970000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.970000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.980000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.990000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[    9.100000] PPP generic driver version 2.4.2
[    9.320000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    9.430000] NET: Registered protocol family 24
[    9.450000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    9.470000] nf_conntrack version 0.5.0 (458 buckets, 1832 max)
[    9.820000] xt_time: kernel timezone is -0000
[   10.110000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   13.110000] device eth0 entered promiscuous mode
[   13.380000] eth0: link up (100Mbps/Full duplex)
[   13.380000] br-lan: port 1(eth0) entered forwarding state
[   13.390000] br-lan: port 1(eth0) entered forwarding state
[   15.390000] br-lan: port 1(eth0) entered forwarding state
[  119.500000] device wlan0 entered promiscuous mode
[  119.780000] br-lan: port 2(wlan0) entered forwarding state
[  119.780000] br-lan: port 2(wlan0) entered forwarding state
[  121.780000] br-lan: port 2(wlan0) entered forwarding state</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216619">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">elherr</div>
					<div class="post-datetime">
						3 Nov 2013, 19:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>...then try to flash this from the stock WEB GUI:</p><p><a href="https://www.dropbox.com/s/dyjxbohh85na0qs/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin">https://www.dropbox.com/s/dyjxbohh85na0 … -12.09.bin</a></p><p>let me know how it goes <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Sweet!&nbsp; It works for me with no issues so far.&nbsp; 11n with 40 MHz channel. Thanks!</p><p>From Debian laptop throughput looks decent.&nbsp; &#039;iwconfig&#039; and &#039;iperf&#039; test to server on copper network....<br /></p><div class="codebox"><pre><code>eherr@singularity:~$ iwconfig wlan0
wlan0     IEEE 802.11bgn  ESSID:&quot;Hefeweizen&quot;  
          Mode:Managed  Frequency:2.462 GHz  Access Point: 64:66:B3:94:4B:08   
          Bit Rate=135 Mb/s   Tx-Power=16 dBm   
          Retry  long limit:7   RTS thr:off   Fragment thr:off
          Power Management:off
          Link Quality=58/70  Signal level=-52 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:125   Missed beacon:0

eherr@singularity:~$ iperf -c saturn -r -t 10
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
------------------------------------------------------------
Client connecting to saturn, TCP port 5001
TCP window size: 22.1 KByte (default)
------------------------------------------------------------
[  4] local 10.10.10.32 port 57538 connected with 10.10.10.3 port 5001
[  4]  0.0-10.0 sec    102 MBytes  85.7 Mbits/sec
[  5] local 10.10.10.32 port 5001 connected with 10.10.10.3 port 50079
[  5]  0.0-10.4 sec    110 MBytes  88.9 Mbits/sec</code></pre></div>											<p class="post-edited">(Last edited by <strong>elherr</strong> on 4 Nov 2013, 01:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217817">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">SomebodE</div>
					<div class="post-datetime">
						18 Nov 2013, 00:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>great, now i&#039;m going to ask you a huge favour, since it seems you&#039;re the only around here with this model AND a serial console attached.</p><p>first of all backup your config from Luci-&gt;System-&gt;Backup/Flash-&gt;Generate archive</p><p>then, download this to the /tmp folder of your router, it&#039;s an OLD tplink firmware without the uboot part, so it can be flashed to the &quot;firmware&quot; partition:</p><p><a href="https://www.dropbox.com/s/xd2pgg04n8r7g6i/wa901ndv3_en_3_13_31_up%28130503%29">https://www.dropbox.com/s/xd2pgg04n8r7g … 8130503%29</a></p><p>then ssh your router and flash with mtd:</p><div class="codebox"><pre><code>cd /tmp
mv wa901* tplink.bin
mtd -r write tplink.bin firmware</code></pre></div><p>now you should have the tplink firmware back on your AP. login to the usual <a href="http://192.168.0.254">http://192.168.0.254</a> or whatever is it&#039;s default ip, then try to flash this from the stock WEB GUI:</p><p><a href="https://www.dropbox.com/s/dyjxbohh85na0qs/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin">https://www.dropbox.com/s/dyjxbohh85na0 … -12.09.bin</a></p><p>let me know how it goes <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi,</p><p>I&#039;m new to OpenWRT but wanted to try it on my WA901ND v3.</p><p>I flashed openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin via the Web gui and now my AP does not boot correctly.</p><p>I get 3 out of 5 lights come up. Whilst the LAN LED is on, it doesn&#039;t look like it&#039;s picking up a DHCP address or defaulted to it&#039;s factory address of 192.168.0.254.</p><p>Have I bricked it? Is there any ideas on recovery?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217821">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">SomebodE</div>
					<div class="post-datetime">
						18 Nov 2013, 01:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SomebodE wrote:</cite><blockquote><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>great, now i&#039;m going to ask you a huge favour, since it seems you&#039;re the only around here with this model AND a serial console attached.</p><p>first of all backup your config from Luci-&gt;System-&gt;Backup/Flash-&gt;Generate archive</p><p>then, download this to the /tmp folder of your router, it&#039;s an OLD tplink firmware without the uboot part, so it can be flashed to the &quot;firmware&quot; partition:</p><p><a href="https://www.dropbox.com/s/xd2pgg04n8r7g6i/wa901ndv3_en_3_13_31_up%28130503%29">https://www.dropbox.com/s/xd2pgg04n8r7g … 8130503%29</a></p><p>then ssh your router and flash with mtd:</p><div class="codebox"><pre><code>cd /tmp
mv wa901* tplink.bin
mtd -r write tplink.bin firmware</code></pre></div><p>now you should have the tplink firmware back on your AP. login to the usual <a href="http://192.168.0.254">http://192.168.0.254</a> or whatever is it&#039;s default ip, then try to flash this from the stock WEB GUI:</p><p><a href="https://www.dropbox.com/s/dyjxbohh85na0qs/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin">https://www.dropbox.com/s/dyjxbohh85na0 … -12.09.bin</a></p><p>let me know how it goes <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi,</p><p>I&#039;m new to OpenWRT but wanted to try it on my WA901ND v3.</p><p>I flashed openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin via the Web gui and now my AP does not boot correctly.</p><p>I get 3 out of 5 lights come up. Whilst the LAN LED is on, it doesn&#039;t look like it&#039;s picking up a DHCP address or defaulted to it&#039;s factory address of 192.168.0.254.</p><p>Have I bricked it? Is there any ideas on recovery?</p><p>Thanks</p></blockquote></div><p>I&#039;ve tried the failsafe from <a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">http://wiki.openwrt.org/doc/howto/generic.failsafe</a> with the following resulting notes:<br />- I cannot ping 192.168.0.1<br />- I put the AP into failsafe mode with the fash flashing LED but nothing appears on the windows executable provided.</p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217829">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						18 Nov 2013, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>ip is 192.168.1.1</p><p>and you must set a static ip to your ethernet card, like 192.168.1.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218582">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Jmeier</div>
					<div class="post-datetime">
						26 Nov 2013, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Can you post the patches for this? I need to start burning some firmware.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219170">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">finas</div>
					<div class="post-datetime">
						4 Dec 2013, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Having this supported would rule. I have two v3 sitting in my desk that were shipped by mistake ( I wanted v2 ) and they are pretty useless without OpenWRT.</p><p>I build my own firmware versions from source so I would really welcome a patch to make this work.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219240">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						5 Dec 2013, 05:31					</div>
				</div>
				<div class="post-content content">
					<p>Just submitted the needed patches</p><p><strong>edit:</strong>Patches are now included in the trunk release as of revision 39075</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 16 Dec 2013, 08:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219254">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">finas</div>
					<div class="post-datetime">
						5 Dec 2013, 11:44					</div>
				</div>
				<div class="post-content content">
					<p>Spectacular! thanks!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219292">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Jmeier</div>
					<div class="post-datetime">
						6 Dec 2013, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>Very awesome! Thanks!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219618">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">pwilson411</div>
					<div class="post-datetime">
						10 Dec 2013, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am new to OpenWRT but have a couple of 901ND v3 devices I would like to flash as I find the manufacturer firmware buggy. Can someone please answer the following:</p><p>1) Once I have flashed openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin firmware using the web interface do I then need to apply the patches as per FriedZombie posts?</p><p>2) What problems do the patches fix?</p><p>3) Will a single download be available which will include the patches?</p><p>4) Is a web interface automatically installed as part of the openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory-12.09.bin firmware or do you have to install it as part of package?</p><p>I appreciate your help in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219621">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						10 Dec 2013, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>1) no</p><p>2) they are needed to build the fw at 1) (kind of...)</p><p>3) if the patch is accepted, really soon in the snapshot dir of openwrt download server.</p><p>4) GUI is included.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219622">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">pwilson411</div>
					<div class="post-datetime">
						10 Dec 2013, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>Fantastic, thanks for your very quick response!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219947">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Gonzakpo</div>
					<div class="post-datetime">
						14 Dec 2013, 01:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just registered to thank all the people trying to make openwrt work on the wa901 v3</p><p>I&#039;m really hoping for the patches to be accepted and download the firmware from the official download server.</p><p>I&#039;ve never used OpenWRT, but the stock firmware sucks big time. It&#039;s completely unstable. I have to reboot the ap every two days.</p><p>Just one question. If I flash this firmware, can I return to stock if I want to claim the warranty and change it for another ap?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219955">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">pwilson411</div>
					<div class="post-datetime">
						14 Dec 2013, 05:13					</div>
				</div>
				<div class="post-content content">
					<p>I apologize if this is the wrong place to ask but here goes...I&#039;ve installed OpenWrt firmware on my version 3 901ND and I am trying to replicate the setup I had using the TP Link firmware.</p><p>The LAN port on AP is connected to an L3 switch. The port on the switch is configured to be an untagged member of the management VLAN and a tagged member of various departmental production VLAN&#039;s. </p><p>Using the TP Link firmware I can assign an IP address to the LAN port which is from the 172.x.x.x network, I then create multiple SSID&#039;s using the web interface and assign each SSID a different VLAN tag.</p><p>Can something similar be achieved using OpenWrt?</p><p>I see that I can create multiple wireless networks and I can assign the address I need to the LAN interface and by default this does not seem to be tagged which is what I require.</p><p>The bit I am struggling with trying to assign VLAN tags to the various wireless networks I have created. Apparently a Switch tab should appear under the Network tab but this is not visible in the LuCI interface.</p><p>I appreciate any help in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219966">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						14 Dec 2013, 10:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jmeier wrote:</cite><blockquote><p>Up and running 100%</p><p>Thank you!</p></blockquote></div><p>What are the models of dedicated PA &amp; LNA?<br />Thx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219980">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						14 Dec 2013, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>Thank you all for the great responses <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Also I have stuck together some images based on trunk r39025 + patches, this image contains the webgui (Luci) and zram_swap</p><p><a href="http://ooxion.com/openwrt/wax50re/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-factory.bin</a> (to flash trough the tp-link default webgui)<br /><a href="http://ooxion.com/openwrt/wax50re/openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-sysupgrade.bin">openwrt-ar71xx-generic-tl-wa901nd-v3-squashfs-sysupgrade.bin</a> (to upgrade an existing openwrt installation)</p><p>Also the wireless is enabled by default on this image.</p><p>@pwilson411<br />Yes it is possible to do the setup that you want under openWrt, only the switch tab doesn&#039;t show up because the switch isn&#039;t used/connected on the wa901nd. But you can simply create new interfaces for example eth0.3 means that I have a tagged vlan on eth0 tagged vlan3.</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 15 Dec 2013, 02:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220271">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Philippeldm</div>
					<div class="post-datetime">
						18 Dec 2013, 06:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>Just to say thanks for this work. <br />It&#039;s working well</p><p>Philippe</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 8</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=46990&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=46990&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=46990&amp;p=8.html">8</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>