<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to format and mount external hard drive?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p282312">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Renik</div>
					<div class="post-datetime">
						3 Jul 2015, 19:42					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I have a problem. I have TP-Link TL-WR1043ND (v1) and external hard drive WD My Book 2TB. What I want?<br />I want to have 3 partitions:<br />1. hfs+ (for MAC backups)<br />2. hfs+ (for another mac backups)<br />3. ext?? (for movies - I will watch movies on my TV via DLNA) - maybe ext4</p><p>I&#039;m totally noob in this, can you help me please?</p><p>I have clean firmware of OpenWRT with installed these modules:</p><div class="quotebox"><blockquote><p>block-mount<br />cfdisk<br />kmod-usb-storage<br />kmod-usb-storage-extras</p><p>kmod-fs-ext4<br />kmod-fs-hfs<br />kmod-fs-hfsplus<br />kmod-fs-ntfs<br />kmod-fs-vfat</p></blockquote></div><p>I know I must run cfdisk via terminal and I know how to create partitions (thank you GUI).<br />But what next? How to mount all three partitions please?</p><p>Thank you so much.</p>											<p class="post-edited">(Last edited by <strong>Renik</strong> on 3 Jul 2015, 19:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282342">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Renik</div>
					<div class="post-datetime">
						3 Jul 2015, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>ok so I tried to delete partition and create new from fdisk.<br />fdisk -l<br /></p><div class="quotebox"><blockquote><p>Device&nbsp; &nbsp; Boot Start&nbsp; &nbsp; &nbsp; &nbsp; End&nbsp; &nbsp; &nbsp;Blocks&nbsp; Id System<br />/dev/sda1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63 3906963455 1953481696+ 83 Linux</p></blockquote></div><p>If I try to mount it (mount /dev/sda1 /mnt) I get this error<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:/# mount /dev/sda1 /mnt<br />mount: mounting /dev/sda1 on /mnt failed: Invalid argument</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282345">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						3 Jul 2015, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>Once you created the partition, have you formatted the newly created partition?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282354">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						4 Jul 2015, 00:37					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>mkfs -t ext4 /dev/sda1
mount /dev/sda1 /mnt</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282386">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Renik</div>
					<div class="post-datetime">
						4 Jul 2015, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, I followed this tutorial and it works fine now<br /><a href="https://www.youtube.com/watch?v=XVzp30nt97A">https://www.youtube.com/watch?v=XVzp30nt97A</a></p><p>But: currently I have mounted only /dev/sda4, how can I mount sda2, sda3? I need to format it but I don&#039;t know how coz hfs+ partitions..</p><div class="quotebox"><blockquote><p>Disk /dev/sda: 1.8 TiB, 2000365289472 bytes, 3906963456 sectors<br />Units: sectors of 1 * 512 = 512 bytes<br />Sector size (logical/physical): 512 bytes / 512 bytes<br />I/O size (minimum/optimal): 512 bytes / 512 bytes<br />Disklabel type: dos<br />Disk identifier: 0x00000000</p><p>Device&nbsp; &nbsp; Boot&nbsp; &nbsp; &nbsp;Start&nbsp; &nbsp; &nbsp; &nbsp; End&nbsp; &nbsp; &nbsp;Blocks&nbsp; Id System<br />/dev/sda1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;63&nbsp; &nbsp; 1953125&nbsp; &nbsp; &nbsp;976531+ 82 Linux swap / Solaris<br />/dev/sda2&nbsp; &nbsp; &nbsp; &nbsp; 1953792&nbsp; 379441151&nbsp; 188743680&nbsp; af HFS / HFS+<br />/dev/sda3&nbsp; &nbsp; &nbsp; 379441152&nbsp; 756928511&nbsp; 188743680&nbsp; af HFS / HFS+<br />/dev/sda4&nbsp; &nbsp; &nbsp; 756928512 3906963455 1575017472&nbsp; 83 Linux</p></blockquote></div><p>Thank you.</p>											<p class="post-edited">(Last edited by <strong>Renik</strong> on 4 Jul 2015, 19:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282417">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						5 Jul 2015, 05:44					</div>
				</div>
				<div class="post-content content">
					<p>This is what i use <a href="http://gparted.org/">http://gparted.org/</a>&nbsp; ,they got it for linux,windows and mac OS.you can make as many partitions you want and format them to anything you want.I switch from MSDOS to GPT partitioning scheme and formated to ext4 works great.</p><p>hey i found one of my old builds with all support for ext2.ext3,ext4 and a working samba you want need to opkg donwload anything.Let me know if you want to give it a try.</p>											<p class="post-edited">(Last edited by <strong>ckm</strong> on 5 Jul 2015, 05:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282446">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						5 Jul 2015, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Probably your best way to format a partition to HFS to connect the drive to your Mac and use MacOS directly.&nbsp; Linux support for HFS is limited.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>