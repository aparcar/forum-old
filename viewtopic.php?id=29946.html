<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link wr1043nd and USB download speed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p134988">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">anx</div>
					<div class="post-datetime">
						10 May 2011, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>I need to setup TP-Link wr1043nd router as small NAS wit WiFi-n and w/o wan connection (I have another router for internet access). I&#039;ve tried DD-WRT first, but it can support one USB storage device (i need support of two). Next was Backfire 10.03.1-RC4 - all works perfectly, except for one - download speed from attached USB drive was only 2-2,5 MBbyte/s (CPU load ~ 25%), but upload speed (to router) was great - 7-8 MB/s (CPU load ~ 95%). Next - Altitude Adjustment (X-WRT Trunk) and i&#039;ve saw the same situation - download speed didn&#039;t exceed 2,5 MB/s with fast upload speed ~ 6MB/s. I&#039;ve returned to DD-WRT to try download and upload speeds and i&#039;ve saw speed about 5 MB/s in both directions. At factory firmware with USB stick (FAT32 only, factory firmware don&#039;t support ext3-ext4) did even more - about&nbsp; 6,5 MB/s in both direction.</p><p>At last I&#039;ve installed OpenWRT 10.3 (backfire) and I&#039;ve sow the same picture.</p><p>1) As You can see from stock firmware results - hardware can send more data from USB to LAN than can offer OpenWrt.<br />2) I&#039;ve tried upload through Samba and ftp - situation was the same. This problem is not on so high level<br />3) I&#039;ve tried copy by mc from one USB storage to another (under backfire). I&#039;ve got ~ 6-9MB/s in both direction - This is not USB layer problem</p><p>ie this is problem of low level network layer (may be kernel options).</p><p>I likes Openwrt, but how can i resolve problem with download speed? Any idea?</p><p>I forgot - another one small problem with backfire - USB led don&#039;t light with USB attached. Have someone got appropriate gpio script for correct this small disadvantage?</p><p>PS. Sorry for my English - this is non-native language for me</p>											<p class="post-edited">(Last edited by <strong>anx</strong> on 10 May 2011, 02:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134991">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">alkalinelito</div>
					<div class="post-datetime">
						10 May 2011, 08:03					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried the iptables rules mentioned here:<br /><a href="http://wiki.openwrt.org/doc/howto/cifs.client">http://wiki.openwrt.org/doc/howto/cifs.client</a><br />&quot;Throughput Issues&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135000">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">anx</div>
					<div class="post-datetime">
						10 May 2011, 11:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alkalinelito wrote:</cite><blockquote><p>Have you tried the iptables rules mentioned here:<br /><a href="http://wiki.openwrt.org/doc/howto/cifs.client">http://wiki.openwrt.org/doc/howto/cifs.client</a><br />&quot;Throughput Issues&quot;</p></blockquote></div><p>Thank You for reply, but this is not Samba problem - FTP has the same transfer speed. In addition, I&#039;ve tried completely turn off firewall.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135005">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						10 May 2011, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>Thanks to OpenWrt you can setup pretty much any &quot;router&quot; as &quot;small NAS&quot;, but do not expect performance!&nbsp; The dockstar has better performance, but is not really available any more. And i would not pay more than 25bucks for it!</p><p>Check this:&nbsp; <a href="http://www.raspberrypi.org">http://www.raspberrypi.org</a>/&nbsp; but this is not yet available.</p><p>or go x86:&nbsp; <a href="http://geizhals.at/deutschland/?cat=mb1ppga_ddr&amp;xf=1123_AMD+E-350&amp;sort=p">http://geizhals.at/deutschland/?cat=mb1 … amp;sort=p</a><br />you get DDR3-1066 at a 6,275 Euros/GiB!</p><p>The assholes probably won&#039;t put &quot;Ontario&quot; <a href="http://en.wikipedia.org/wiki/AMD_Fusion#Roadmap">http://en.wikipedia.org/wiki/AMD_Fusion#Roadmap</a> on desktop/nettop devices, since it is intended for &quot;mobile stuff&quot;, but we need some benchmark for Bobcat as NAS anyway.</p><p><a href="http://www.pandaboard.org">http://www.pandaboard.org</a>/ and such, are intended to serve for developers, so as of price/performance they cannot compete with Atom/Bobcat!!!</p><br /><p>If performance of WR-1043ND is not enough, go Seagate Dockstar, if this is not enough, go Atom/Bobcat!</p><p>Also, there could be some ARM/MIPS based devices for this purpose out there, links to available products around 100Euros would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135012">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						10 May 2011, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not aware of any router platform available currently that is performant enough to serve as a nas. One need to have a specialized hardware to serve as a nas (unfortunately). Take a look at the nas chart table <a href="http://www.smallnetbuilder.com/nas/nas-charts/view">http://www.smallnetbuilder.com/nas/nas-charts/view</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135021">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">anx</div>
					<div class="post-datetime">
						10 May 2011, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks for replies.</p><p>As you can see, the same hardware under DD-WRT or factory firmware shows significantly better performance in file transfer, then under openwrt.</p><p>5-6 MByte/s by network from attached USB drive is enough for almost any ?urrent home&#039;s purposes, including HD video. As i see, this equipment can provide such speed, but needs some correction in firmware. At last, if this can be done by one box, why do I need one more?</p><p>So, I ask for advice and help in firmware correction, but not buying another device nor recommendation to accept the fact that there are.</p><p>Thank You</p>											<p class="post-edited">(Last edited by <strong>anx</strong> on 10 May 2011, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135022">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						10 May 2011, 16:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flux wrote:</cite><blockquote><p>I&#039;m not aware of any router platform available currently that is performant enough to serve as a nas. One need to have a specialized hardware to serve as a nas (unfortunately). Take a look at the nas chart table <a href="http://www.smallnetbuilder.com/nas/nas-charts/view">http://www.smallnetbuilder.com/nas/nas-charts/view</a></p></blockquote></div><p>You don&#039;t need &quot;specialized hardware&quot; don&#039;t talk bullshit here. You simply need more computing power. Do it yourself, and you can get this at a reasonable price. You could use an old Pentium3 or something similar. You also buy some new hardware. Since most x86 still have a BIOS it needs to have some sort of GPU, and though this is unnecessary, it&#039;s not such a big deal.</p><p>Simply avoid buying some 350Watt power unit with efficiency of 70%. Try to get a 50Watt power unit with ?&gt;80%, if possible. These are hard to get at all, then even harder at a fair price. The reason for that is, that all sorts of idiots pay a lot of money for 750W power units. It&#039;s hard to get anything below 300W and then quality and fair price... PITA.</p><br /><p>Look at this shit:&nbsp; <a href="http://geizhals.at/deutschland/?cat=gehps&amp;sort=p&amp;xf=360_sonstige~364_aktiv~365_80#xf_top">http://geizhals.at/deutschland/?cat=geh … _80#xf_top</a></p><p>Does anybody know where to get some power units for low power computers (ATX/ITX/DTX) with 50W, aktive PFC and &gt;80% or is it necessary to solder this at home? Buy apple? What should one do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135028">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">JaromirN</div>
					<div class="post-datetime">
						10 May 2011, 17:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><div class="quotebox"><cite>flux wrote:</cite><blockquote><p>I&#039;m not aware of any router platform available currently that is performant enough to serve as a nas. One need to have a specialized hardware to serve as a nas (unfortunately). Take a look at the nas chart table <a href="http://www.smallnetbuilder.com/nas/nas-charts/view">http://www.smallnetbuilder.com/nas/nas-charts/view</a></p></blockquote></div><p>You don&#039;t need &quot;specialized hardware&quot; don&#039;t talk bullshit here. You simply need more computing power. Do it yourself, and you can get this at a reasonable price. You could use an old Pentium3 or something similar. You also buy some new hardware. Since most x86 still have a BIOS it needs to have some sort of GPU, and though this is unnecessary, it&#039;s not such a big deal.</p><p>Simply avoid buying some 350Watt power unit with efficiency of 70%. Try to get a 50Watt power unit with ?&gt;80%, if possible. These are hard to get at all, then even harder at a fair price. The reason for that is, that all sorts of idiots pay a lot of money for 750W power units. It&#039;s hard to get anything below 300W and then quality and fair price... PITA.</p><br /><p>Look at this shit:&nbsp; <a href="http://geizhals.at/deutschland/?cat=gehps&amp;sort=p&amp;xf=360_sonstige~364_aktiv~365_80#xf_top">http://geizhals.at/deutschland/?cat=geh … _80#xf_top</a></p><p>Does anybody know where to get some power units for low power computers (ATX/ITX/DTX) with 50W, aktive PFC and &gt;80% or is it necessary to solder this at home? Buy apple? What should one do?</p></blockquote></div><p>Theoretically true. reality different. The cost of solution versus year power fee.. hmm <br />- Common router (incl. HDD etc) needs cca 12-15W = 131KWyear and small power units has efficiency also horrible..&nbsp; &nbsp;Transfer rate? no comment, but single client is ok, also two NAS samba clients were able to play movies..<br />- ATOM single core low consuming.. cca 5-6W but whole board cca 20-25W.. good PSU cca 30Euro (50W passive) and external PSU brick additional 30Euro.. Total price cca 3-4 times higher - but stable and enough powerful (1G Eth, fullspeed SATA) - Year fee? cca 2 times more than router case.&nbsp; &nbsp;But more secure solution with higher performance (could be used as backup server also etc..)</p><p>So requirements are key, for everyday home usage&nbsp; by more than single user - Atom wins.. If you are looking for shared functionality for not so much dens usage (like in cottage, second flat etc..) ~ router could be nice solution..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135033">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">flux</div>
					<div class="post-datetime">
						10 May 2011, 19:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anx wrote:</cite><blockquote><p>5-6 MByte/s by network from attached USB drive is enough for almost any ?urrent home&#039;s purposes, including HD video.</p></blockquote></div><p>really? How long would it take to transfer a 40Gig blue-ray rip to your nas server with these speeds? I&#039;m restricted by the 100Mbit lan currently and I&#039;m not satisfied with the speeds even to transfer sd content (dvd rips 4-7Gig)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135047">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">anx</div>
					<div class="post-datetime">
						10 May 2011, 21:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>flux wrote:</cite><blockquote><p>really?</p></blockquote></div><p>Really.</p><div class="quotebox"><cite>flux wrote:</cite><blockquote><p>How long would it take to transfer a 40Gig blue-ray rip to your nas server with these speeds?</p></blockquote></div><p>I sad ALMOST ALL purposes. </p><p>At real speed around 6MByte/s even 40 GB file will be copied in 1h 53min. And if we are talking about the movie this time less than average movie&#039;s duration. Please note that the file has an excess information (additional audio tracks, for example) which the playback device must ignore (ie the bandwidth is reduced). Of course, it will be hard (if ever possible) use fast rewind and surely there will be times with very high bitrate in which even playback device&#039;s buffer will not be able to help. But 40GB rip - really extreem situation. In this case you can use player&#039;s internal (or external) drive. Up ?? 20GB, even 30GB rip you can see w/o any problem</p><div class="quotebox"><cite>flux wrote:</cite><blockquote><p>I&#039;m not satisfied with the speeds even to transfer sd content (dvd rips 4-7Gig)</p></blockquote></div><p>100Mbites/s not enough? Bitrate of BlueRay disk up to 40 MBites/s (I see that speed only on demo disks). Average commercial&nbsp; BlueRay disk gives 15-24 MBites/s. DVD up to 12 Mbites. Your 100 Mbite/s network should be more than sufficient for dvd-rip. Pls check cables, jacks and mediaplayer&#039;s hardware/firmware. </p><p>And, please, no more flood. I ask only for help with network and openwrt and do not ask for your worries about the network bandwidth</p><p>Thank You.</p>											<p class="post-edited">(Last edited by <strong>anx</strong> on 10 May 2011, 21:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141654">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">anx</div>
					<div class="post-datetime">
						18 Aug 2011, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks to OpenWrt team!</p><p>After installing trunk r27832 i&#039;ve got transfer speed from/to USB disk drive 9 MByte/s for download and about 5MByte/s for upload (by Samba or FTP). Small NAS is fully functional!</p><p>All rest function also work fin? for me. Up to 93 Mbite/s download from Inet, up to 65 to...<br />Uptime 10 days.</p><p>Thanks a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156216">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						4 Feb 2012, 11:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anx wrote:</cite><blockquote><p>After installing trunk r27832 i&#039;ve got transfer speed from/to USB disk drive 9 MByte/s for download and about 5MByte/s for upload (by Samba or FTP). Small NAS is fully functional!</p></blockquote></div><p>hi, thanks for the info!</p><p>can you try different file system and do a small comparision? <br />at least NTFS, FAT32, EXTsomething...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185504">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nappi</div>
					<div class="post-datetime">
						7 Dec 2012, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>my usb speed is max 2 MB and is very poor speed, if a solution or a fix in coming ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>