<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Serial port on TP-LINK MR11U</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p153289">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cyker</div>
					<div class="post-datetime">
						6 Jan 2012, 08:31					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone tested the serial port on TP-LINK MR11U? What are the pinouts (VCC/GND/TX/RX)?</p><p>Are there any pins on the board that need to be short-circuited to use the serial port? </p><p>I don&#039;t have a multimeter or USB-TTL wire at hand now, but I&#039;m planning to follow the guide at <a href="http://wiki.openwrt.org/doc/hardware/port.serial">http://wiki.openwrt.org/doc/hardware/port.serial</a>. So I&#039;d appreciate it if anyone could point out a &#039;known ground point&#039; for me. I see there is some pin labeled &#039;GND&#039;, but I don&#039;t know whether it&#039;s safe to treat that as the &#039;known ground point&#039;.</p><p>Here are the pics:</p><p><span class="postimg"><img src="http://www.cykerway.com/images/mr11u_front.png" alt="http://www.cykerway.com/images/mr11u_front.png" /></span></p><p><span class="postimg"><img src="http://www.cykerway.com/images/mr11u_back.png" alt="http://www.cykerway.com/images/mr11u_back.png" /></span></p><p>BTW, it seems many TP-LINK routers follow the (TX, RX, GND, VCC) style, but I&#039;m still not sure whether that applies to MR11U.</p><p>Update. After testing it with a multimeter, here&#039;s the result (but use at your own risk!) that may be helpful:</p><p><span class="postimg"><img src="http://www.cykerway.com/images/mr11u_pins.png" alt="http://www.cykerway.com/images/mr11u_pins.png" /></span></p>											<p class="post-edited">(Last edited by <strong>cyker</strong> on 6 Sep 2012, 03:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153290">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kocoman</div>
					<div class="post-datetime">
						6 Jan 2012, 09:02					</div>
				</div>
				<div class="post-content content">
					<p>I was told in another message in this forum that its the P1 at the TP-Link letter in your first pic in the upper right corner</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153291">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cyker</div>
					<div class="post-datetime">
						6 Jan 2012, 09:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kocoman wrote:</cite><blockquote><p>I was told in another message in this forum that its the P1 at the TP-Link letter in your first pic in the upper right corner</p></blockquote></div><p>Thanks, I guess so as well. But what is the pin order?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153383">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">staylo</div>
					<div class="post-datetime">
						6 Jan 2012, 20:52					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d work on the assumption that it&#039;s the same as other TP-LINK devices such as the WR1043ND<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd?s#serial">http://wiki.openwrt.org/toh/tp-link/tl- … d?s#serial</a></p><p>The GND test point should be usable.</p>											<p class="post-edited">(Last edited by <strong>staylo</strong> on 6 Jan 2012, 20:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153534">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cyker</div>
					<div class="post-datetime">
						8 Jan 2012, 00:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>staylo wrote:</cite><blockquote><p>I&#039;d work on the assumption that it&#039;s the same as other TP-LINK devices such as the WR1043ND<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd?s#serial">http://wiki.openwrt.org/toh/tp-link/tl- … d?s#serial</a></p><p>The GND test point should be usable.</p></blockquote></div><p>Yeah, this&#039;s confirmed. I successfully debricked my MR11U using the serial port according to the order (TX, RX, GND, VCC) (only the first 3 are used). The point marked as GND is really GND, because when I looked at it from the back side, I suddenly realized it&#039;s the negative pole of the battery.</p><p>BTW, what&#039;s the VCC for? I hardly see it&#039;s used in any tutorial.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155882">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kocoman</div>
					<div class="post-datetime">
						31 Jan 2012, 06:58					</div>
				</div>
				<div class="post-content content">
					<p>This looks like the serial log<br />&nbsp; &nbsp; </p><div class="codebox"><pre><code>U-Boot 1.1.4 (Nov  3 2011 - 16:50:11)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

Booting AR9330(Hornet)...
Linux version 2.6.31--LSDK-9.2.0.312 (root@bogon) (gcc version 4.3.3 (GCC) ) #202 Thu Nov 3 16:50:24 CST 2011
flash_size passed from bootloader = 4
CPU revision is: 00019374 (MIPS 24Kc)
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:128k(u-boot),1024k(kernel),2816(rootfs),64k(conM
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29864k/32768k available (1889k kernel code, 2904k reserved, 524k data, 116k init, 0k highmem)
Hierarchical RCU implementation.
NR_IRQS:128
plat_time_init: plat time init done
Calibrating delay loop... 266.24 BogoMIPS (lpj=532480)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
===== ar7240_platform_init: 0
bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
AR7240 GPIOC major 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
NTFS driver 2.1.29 [Flags: R/O].
msgmni has been set to 58
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler anticipatory registered
io scheduler deadline registered
io scheduler cfq registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
ttyS0: detected caps 00000000 should be 00000100
serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A
console [ttyS0] enabled
PPP generic driver version 2.4.2
NET: Registered protocol family 24
cmdlinepart partition parsing not available
set partition boot 
set partition kernel 
set partition rootfs 
set partition config 
set partition art 
set partition ï¿½ 
Searching for RedBoot partition table
5 RedBoot partitions found on MTD device ar7240-nor0
Creating 5 MTD partitions on &quot;ar7240-nor0&quot;:
0x000000000000-0x000000020000 : &quot;boot&quot;
0x000000020000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
-&gt;Oops: flash id 0x10215 . 
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
Port Status 1c000004 
ar7240-ehci ar7240-ehci.0: ATH EHCI
ar7240-ehci ar7240-ehci.0: new USB bus registered, assigned bus number 1
ehci_reset Intialize USB CONTROLLER in host mode: 3
ehci_reset Port Status 1c000000 
ar7240-ehci ar7240-ehci.0: irq 3, io mem 0x1b000000
ehci_reset Intialize USB CONTROLLER in host mode: 3
ehci_reset Port Status 1c000000 
ar7240-ehci ar7240-ehci.0: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
TCP cubic registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
ar7240wdt_init: Registering WDT success
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 116k freed
init started:  BusyBox v1.01 (2011.04.01-07:49+0000) multi-call binary
This Board use 2.6.31
xt_time: kernel timezone is -0000
nf_conntrack version 0.5.0 (512 buckets, 5120 max)
ip_tables: (C) 2000-2006 Netfilter Core Team
insmod: cannot open module `/lib/modules/2.6.31/kernel/iptable_raw.ko&#039;: No such file or directory
insmod: cannot open module `/lib/modules/2.6.31/kernel/flashid.ko&#039;: No such file or directory
PPPoL2TP kernel driver, V1.0
PPTP driver version 0.8.3
insmod: cannot open module `/lib/modules/2.6.31/kernel/harmony.ko&#039;: No such file or directory

Now flash open!
 (none) mips #202 Thu Nov 3 16:50:24 CST 2011 (none)
(none) login: Now flash open!
ATHR_GMAC: Length per segment 1536
ATHR_GMAC: fifo cfg 3 01f00140
ATHR_GMAC: Mac address for unit 1:bf1f0006
ATHR_GMAC: 63:e4:1a:56:1f:a8 
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   96
ATHR_GMAC: Mac capability flags    :   4D83
ATHR_GMAC: Mac address for unit 0:bf1f0000
ATHR_GMAC: 02:92:85:0d:de:cb 
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   252
ATHR_GMAC: Mac capability flags    :   4403
athr_gmac_ring_alloc Allocated 640 at 0x81e7d800
athr_gmac_ring_alloc Allocated 4032 at 0x81d63000
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...mac 0
athr_gmac_ring_alloc Allocated 640 at 0x81e7d400
athr_gmac_ring_alloc Allocated 1536 at 0x81f21000
Setting Drop CRC Errors, Pause Frames and Length Error frames 
ATHRS26: resetting s26
ATHRS26: s26 reset done
Setting PHY...mac 1
device eth0 entered promiscuous mode
Now flash open!
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
asf: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 0.9.17.1 (AR9380, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
ath_ahb: 9.2.0_U5.508 (Atheros/multi-bss)
Boostrap clock 25MHz
ar9300RadioAttach: Need analog access recipe!!
Restoring Cal data from Flash
ath_get_caps[4735] rx chainmask mismatch actual 1 sc_chainmak 0
ath_get_caps[4710] tx chainmask mismatch actual 1 sc_chainmak 0
wifi0: Atheros 9380: mem=0xb8100000, irq=2
wlan_vap_create : enter. devhandle=0x80d182c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x80d182c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created 
 
 DES SSID SET=TP-LINK_XXXXXX 
ieee80211_scan_unregister_event_handler: Failed to unregister evhandler=c0aea840 arg=81f642c0
wlan_vap_delete : enter. vaphandle=0x81e9c000
wlan_vap_delete : exit. vaphandle=0x81e9c000
wlan_vap_create : enter. devhandle=0x80d182c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x80d182c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created 
 
 DES SSID SET=TP-LINK_XXXXXX 
 ieee80211_ioctl_siwmode: imr.ifm_active=393856, new mode=3, valid=1 
WARNING: Fragmentation with HT mode NOT ALLOWED!!
device ath0 entered promiscuous mode
br0: port 2(ath0) entering forwarding state
 ieee80211_ioctl_siwmode: imr.ifm_active=1442432, new mode=3, valid=1 
br0: port 2(ath0) entering disabled state
 
 DES SSID SET=TP-LINK_XXXXXX 
br0: port 2(ath0) entering forwarding state
ath_bstuck_tasklet: stuck beacon; resetting (bmiss count 9)
ath_bstuck_tasklet: stuck beacon; resetting (bmiss count 9)

 TL-MR11U mips #202 Thu Nov 3 16:50:24 CST 2011 (none)
TL-MR11U login: root
Password: 
Jan  1 00:01:13 login[150]: root login  on `ttyS0&#039;



BusyBox v1.01 (2011.04.01-07:49+0000) Built-in shell (msh)
Enter &#039;help&#039; for a list of built-in commands.

# cat /proc/mtd 
dev:    size   erasesize  name
mtd0: 00020000 00010000 &quot;boot&quot;
mtd1: 00100000 00010000 &quot;kernel&quot;
mtd2: 002c0000 00010000 &quot;rootfs&quot;
mtd3: 00010000 00010000 &quot;config&quot;
mtd4: 00010000 00010000 &quot;art&quot;
# cat /proc/meminfo 
MemTotal:          29980 kB
MemFree:           12536 kB
Buffers:            1944 kB
Cached:             6360 kB
SwapCached:            0 kB
Active:             3776 kB
Inactive:           6520 kB
Active(anon):       1992 kB
Inactive(anon):        0 kB
Active(file):       1784 kB
Inactive(file):     6520 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:          2016 kB
Mapped:             1752 kB
Slab:               4488 kB
SReclaimable:        328 kB
SUnreclaim:         4160 kB
PageTables:          172 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:       14988 kB
Committed_AS:       4320 kB
VmallocTotal:    1048404 kB
VmallocUsed:        2132 kB
VmallocChunk:    1036936 kB
# iwconfig 
lo        no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br0       no wireless extensions.

wifi0     no wireless extensions.

ath0      IEEE 802.11ng  ESSID:&quot;TP-LINK_XXXXXX&quot;  
          Mode:Master  Frequency:2.462 GHz  Access Point: 38:83:45:XX:XX:XX   
          Bit Rate:150 Mb/s   Tx-Power:7 dBm   
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=94/94  Signal level=-96 dBm  Noise level=-95 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

# ifconfig 
ath0      Link encap:Ethernet  HWaddr 38:83:45:XX:XX:XX  
          UP BROADCAST RUNNING MULTICAST  MTU:2290  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2 errors:0 dropped:41 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:752 (752.0 B)

br0       Link encap:Ethernet  HWaddr 38:83:45:XX:XX:XX  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1                                                     
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0                                                     
          TX packets:41 errors:0 dropped:0 overruns:0 carrier:0                                                  
          collisions:0 txqueuelen:0                                                                              
          RX bytes:0 (0.0 B)  TX bytes:14218 (13.8 KiB)                                                          
                                                                                                                 
eth0      Link encap:Ethernet  HWaddr 38:83:45:XX:XX:XX                                                          
          UP BROADCAST MULTICAST  MTU:1500  Metric:1                                                             
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0                                                     
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0                                                   
          collisions:0 txqueuelen:1000                                                                           
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)                                                                 
                                                                                                                 
eth1      Link encap:Ethernet  HWaddr 38:83:45:XX:XX:XX                                                          
          inet addr:1.0.182.244  Bcast:1.255.255.255  Mask:255.0.0.0                                             
          UP BROADCAST MULTICAST  MTU:1500  Metric:1                                                             
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0                                                     
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0                                                   
          collisions:0 txqueuelen:1000                                                                           
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)                                                                 
                                                                                                                 
lo        Link encap:Local Loopback                                                                              
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:63 errors:0 dropped:0 overruns:0 frame:0
          TX packets:63 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:5928 (5.7 KiB)  TX bytes:5928 (5.7 KiB)

wifi0     Link encap:Ethernet  HWaddr 38:83:45:XX:XX:XX  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:1 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:2 Memory:b8100000-b811ffff 

# 
# cat /proc/version 
Linux version 2.6.31--LSDK-9.2.0.312 (root@bogon) (gcc version 4.3.3 (GCC) ) #202 Thu Nov 3 16:50:24 CST 2011</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>