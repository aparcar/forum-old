<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Repeater to improve a drone wifi connection</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p267180">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">almarma</div>
					<div class="post-datetime">
						28 Feb 2015, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi people,</p><p>I&#039;m new here, and I have a bit special requirement:<br />I have a DJI drone and I&#039;m using another drone (ArDrone v1) electronics to have live video while flying. I want to improve the range as much as possible, so I bought a TP-Link WR841ND v9.1 because it&#039;s DD-WRT and OpenWRT compatible, and because I can change antennas if needed (and also comes with two 5dBi). The idea is to use this router in the field, powered by a battery pack, as a repeater to improve the range. I&#039;ve done already 3 things with the router:</p><p>I used the stock firmware, and it wasn&#039;t bad, but I had stability problems, specially to reconnect when the signal is lost and I return home (it should reconnect by itself).</p><p>I used DD-WRT, and it was relatively easy to setup, but it works flawlessly. The problem here is the range: it&#039;s worse.</p><p>I also tried with OpenWRT. It looks nice, and some people in the DD-WRT forum say that OpenWRT has better range, but it&#039;s really difficult to me to understand and setup. I didn&#039;t manage to configure it properly to get it working. I&#039;m using the web browser to try to set it up following the tabs and menus, but it doesn&#039;t work. I&#039;ve tried to follow the instructions I found in the wiki, but they are meant for the command line, and seem to be difficult to understand/follow. Am I missing anything? Is there somewhere else where I can get help to get this working with OpenWRT?</p><p>I&#039;ve also bought one 8dBi antenna and a small panel antenna, and I&#039;ve tried all combinations (2x5dBi, 1x5dBi+1x8dBi, 1x5dBi+panel, 1x8dBi+panel), all with similar results, whichs seems to me that the antennas are being underused or not enough powered (maybe some energy saving feature). Any tips?</p><p>Thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267230">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">speedyb0y.rev0ltz</div>
					<div class="post-datetime">
						1 Mar 2015, 03:58					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have any direct help to your questions...</p><p>But have you thought about using a RaspberryPI with a good USB wireless adapter (and a good and BIG detachable antenna)? </p><p>There is also an Arduino with a MIPS processor capable of running OpenWRT...</p><p>I&#039;m still going to put my hands on an Arduino, it&#039;s the easiest thing to program and project things.</p><br /><p>I don&#039;t know if you are a programmer or are just trying to acomplish a simple thing with some urgency...</p><br /><br /><p>Sorry for my bad english <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267238">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						1 Mar 2015, 07:12					</div>
				</div>
				<div class="post-content content">
					<p>Does your drone have 2 antennas? I don&#039;t think so.<br />Both antennas should be identical, there are 2 different streams coming from them and both streams are required.<br />Play with diversity, you can disable diversity and disable an antennae.<br />Put that BIG ASS antennae to your drone, the communication is bidirectional, WiFi 1.0.1.</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 1 Mar 2015, 07:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267524">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">almarma</div>
					<div class="post-datetime">
						3 Mar 2015, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Thanks both for your answers. In the drone side, I&#039;m using the mainboard from the ArDrone, which includes the antennas printed on the board. That makes it very difficult to upgrade that side.</p><p>So my only way is to improve the ground side as much as I can <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />. I tried with DDWRT to change the antenna mode from 1+2 to 1, for each antenna, and the results where even worse. Now I installed again OpenWRT to give it another chance, and see if this time I could manage to make it work. No luck <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />. I don&#039;t consider right now the Raspberry option because it complexity right now. I&#039;ll only take that way if I see no other solution, but I would like to be able to use OpenWRT at least one time <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>The ArDrone is on 192.168.1.1, and it acts as an AP, without password, with DHCP server, so it assigns a dynamic IP to the clients that connect to it.<br />I usually set the repeater router using Lucy as:</p><p>IP 192.168.1.2<br />subnet 255.255.255.0<br />Router: 192.168.1.1<br />DNS: 192.168.1.1</p><p>Then, I go to Network -&gt; Interfaces, and delete the two WAN interfaces, just to minimize chances of weird things, but I&#039;ve also tried letting them there.</p><p>Then, I go to Network -&gt; WIFI, and there, I use Scan button, and I join the ArDrone network, so it automatically replaces the setup with the drone&#039;s one, as client. When I go to the setup screen, it&#039;s also called (wlan0) in the title.</p><p>Then, I create a second WIFI network as master called Ardrone_EXTENDER, so I&#039;m sure that my phone connects through the router, and not directly to the drone. This one is called (wlan0-1) inside the setup menu title.</p><p>As OpenWRT creates a second Network interface called WWAN, I check the boxes in the setup screen for both WIFI networks, to be part of WWAN interface. I&#039;ve tried also checking LAN, without success.</p><p>Then, back to Network -&gt; Interfaces, I edit LAN, and check &#039;Disable DHCP for this interface.&#039;, because if it works, I have a double DHCP server, and is not the Ardrone who assigns it.</p><p>Also, in the same window, in the Physical settings tab, within Interfaces, I check the boxes for Ethernet Adapter: &quot;eth0&quot; (lan) and the two WIFI Networks, so they can see each other, right?</p><p>And for Firewall, I set everything in LAN firewall-zone, so that minimized the chances of the firewall blocking communications.</p><br /><br /><p>Am I missing anything?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>