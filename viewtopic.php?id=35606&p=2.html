<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> BT HomeHub 3 A</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 17 Apr 2018 and 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=35606&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p167899">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Tormal</div>
					<div class="post-datetime">
						22 May 2012, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have success to full build it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167926">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						22 May 2012, 20:56					</div>
				</div>
				<div class="post-content content">
					<p>Here is my attempt to boot OpenWRT on a Business Hub 3.0 Type A using u-boot.asc:</p><div class="codebox"><pre><code>BT3HHA =&gt; tftpboot 81000000 openwrt-lantiq-ar9-BT3HHA-uImage
Using lq_cpe_eth device
TFTP from server 192.168.1.10; our IP address is 192.168.1.1
Filename &#039;openwrt-lantiq-ar9-BT3HHA-uImage&#039;.
Load address: 0x81000000
Loading: #################################################################
         #################################################################
         #################################################################
         #############################################
done
Bytes transferred = 3521873 (35bd51 hex)
BT3HHA =&gt; bootm 81000000
## Booting kernel from Legacy Image at 81000000 ...
   Image Name:   MIPS OpenWrt Linux-3.2.12
   Created:      2012-05-22  16:20:20 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    3521809 Bytes =  3.4 MB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 3.2.12 (devel@fides) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #2 Tue May 22 17:20:07 BST 2012
[    0.000000] SoC: AR9 rev 1.2
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001954c (MIPS 34Kc)
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00004000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyLTQ1,115200 rootfstype=squashfs,jffs2 machtype=BT3HHA
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=0007e27f
[    0.000000] Readback ErrCtl register=0007e27f
[    0.000000] Memory: 53392k/65536k available (2302k kernel code, 12144k reserved, 562k data, 8564k init, 0k highmem)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 333MHz
[    0.000000] Calibrating delay loop... 221.18 BogoMIPS (lpj=442368)
[    0.040000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.048000] NET: Registered protocol family 16
[    0.056000] MIPS: machine is BT3HHA
[    0.056000] Regisitering leds
[    0.056000] Registering nand
[    0.060000] Registering pci
[    0.060000] Registering etop
[    0.060000] Registering ath9k
[    0.076000] bio: create slab &lt;bio-0&gt; at 0
[    0.080000] pci 0000:00:0e.0: fixup device configuration
[    0.084000] pci 0000:00:0e.0: fixup info: [168c:002d] revision 01 class 0x028000
[    0.088000] pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
[    0.088000] pci 0000:00:0e.0: BAR 0: set to [mem 0x18000000-0x1800ffff] (PCI address [0x18000000-0x1800ffff])
[    0.092000] pci 0000:00:0e.0: SLOT:14 PIN:1 IRQ:30
[    0.092000] Switching to clocksource MIPS
[    0.100000] NET: Registered protocol family 2
[    0.100000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.104000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.104000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.108000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.108000] TCP reno registered
[    0.112000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.112000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.116000] NET: Registered protocol family 1
[    0.840000] gptu: totally 6 16-bit timers/counters
[    0.844000] gptu: misc_register on minor 63
[    0.844000] gptu: succeeded to request irq 126
[    0.844000] gptu: succeeded to request irq 127
[    0.848000] gptu: succeeded to request irq 128
[    0.848000] gptu: succeeded to request irq 129
[    0.852000] gptu: succeeded to request irq 130
[    0.852000] gptu: succeeded to request irq 131
[    0.856000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.860000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.864000] msgmni has been set to 104
[    0.864000] io scheduler noop registered
[    0.864000] io scheduler deadline registered (default)
}àüààààààüààààüàüàüüüüààüüüàààüàüüàààüüüüüàüüüüàààààüààüàüààààààüààààüàüàüüüüààüüüàààüàüüàààüüüüüàüüüüàààààüààüàüàààààààüàààüàüààüüààüààüààààüàüüàààààüüàüàààüüàààüàüàààààààààààüàààààüàüààüüüàüààààüàààààüüààüàààüüààüüààààààààüààààüàààüààüààüàüààààààààüàààüààüàüüàüüàààüàààüààààüüüüàüàüàààààààüàààüààüàüüààààüààüàüàüàüüàüàüàààüüàüüààüàüàüààààààüààààüààààààààààààààüàààààààààààààààüààààüüüüàüàüààààààüàà</code></pre></div><p>The OpenWRT image is 31084 + patches. It boots fine on a Home Hub 3.0 Type A.</p><p>Any idea why the serial is failing like that on the Business Hub?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167935">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						22 May 2012, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Tormal, have you tested USB?</p><p>I tried two memory sticks but neither work with OpenWRT. The Sandisk LED flashes once then nothing. They both work fine with the BT firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167936">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Tormal</div>
					<div class="post-datetime">
						22 May 2012, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>j8root, according falling terminal: I have the same problem. But it is problem with serial-usb convertor. after start kernel simple try down speed of serial to 38400</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167937">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						22 May 2012, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>I tried to boot the Business Hub&#039;s section 3 image on a Home Hub but it didn&#039;t work:</p><div class="codebox"><pre><code>ROM VER: 1.1.3
CFG 06
NAND
NAND Read OK

ROM VER: 1.1.3
CFG 06
NAND
NAND Read OK
MC_DC15 0x0000014a
MC_DC21 0x00001542
MC_DC22 0x00001717
MC_DC24 0x00000068
DDR Access auto data-eye tuning Rev 0.3a
DDR size from 0xa0000000 - 0xa3ffffff
DDR check ok... start booting...



U-Boot 1.1.5-LANTIQ-v-1.8.14 (Jan 24 2011 - 02:38:15)

Boot from NAND flash
AR9 BOARD
CLOCK CPU 333M RAM 166M
DRAM:  64 MB

 relocate_code start
 relocate_code finish.
32 MiB
In:    serial
Out:   serial
Err:   serial
Net:
switch chip id=00002599
amazon_s Switch

Type &quot;run flash_nfs&quot; to mount root filesystem over NFS

Hit any key to stop autoboot:  0

Looking for active section/image:
  0. section: type:10 not an image
  1. section: type:8 not an image
  2. section: type:9 not an image
  3. section: type:2 image. reading section header @0xaf3f6c...
Reading data from 0xaf7f6c -- 100% complete.
     counter:0x3
  4. section: type:2 image. reading section header @0x15e3f6c...
Reading data from 0x15e3f6c -- 100% complete.
     counter:0x2
  5. section: type:7 not an image
  6. section: type:3 not an image
  7. section: type:3 not an image
  8. section: type:1 not an image
  9. section: type:11 not an image

Verifying image(s):
  3. section: image. reading image content 0x92f55d@0x74000...
Reading data from 0x9a3400 -- 100% complete.
     checking ... failed
  Image signature does not match!
corrupted
  4. section: image. reading image content 0x92e9e9@0xb64000...
Reading data from 0x1492800 -- 100% complete.
     checking ... ok: &#039;Image downloaded from: http://pbthdm.bt.motive.com/firmware/4.7.5.1.83.8.57.1.3_PROD.rms&#039; 0x92e9e9@0xa1000000 count:0x2</code></pre></div><p>Tormal, do you know if there is a way to make it work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167938">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						22 May 2012, 22:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tormal wrote:</cite><blockquote><p>j8root, according falling terminal: I have the same problem. But it is problem with serial-usb convertor. after start kernel simple try down speed of serial to 38400</p></blockquote></div><p>Thanks, I&#039;ll do that.</p><p>I got around with telnet so I could backup the flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167952">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">j8soot</div>
					<div class="post-datetime">
						23 May 2012, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>I finally managed to flash and run the Business Hub firmware on a Home Hub but it didn&#039;t help with breaking into it.</p><p>I also managed to save a bthub3.conf for the 4.7.5.1.83.8.57.1.3 firmware which has ssh enabled and has bootldr silent set to 0. I would like to make one for the Business Hub but so far no luck.</p><p>Do you have a way to break into the Business Hub&#039;s OpenRG?</p><p>Also I was looking at the BT source code and tried to find the original flash layout so I could understand the layout beyond the second firmware image. I have the layout from 0 to 15DFFFF but the rest of the layout from 15E0000 to 1FFFFFF is unknown.</p><p>Do you have the full flash layout?</p>											<p class="post-edited">(Last edited by <strong>j8soot</strong> on 23 May 2012, 03:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170279">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">lxusr</div>
					<div class="post-datetime">
						18 Jun 2012, 15:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tormal wrote:</cite><blockquote><p>I have tried add support of BT Home Hub 3 version A to openWRT. I have modified uboot-lantiq package to add compilation u-boot.asc for that router with nand memory and able upload via com port to that router. After that I can upload openwrt image via tftp and tried to start. But I have some problems with kernel:</p><p>I still have problem described above, but I am avoid it but kernel command line: bootargs=keep_bootcon ignore_loglevel. </p><p>Currently I have another problem with init process start up. Kernel entering into free_initmem which execute platform depended code. And under that code kernel have a hangs. I have modified that routine to print memory addresses: </p><div class="codebox"><pre><code>void free_init_pages(const char *what, unsigned long begin, unsigned long end)
{
&lt;------&gt;unsigned long pfn;
&lt;------&gt;
&lt;------&gt;printk(KERN_INFO &quot;Freeing %s:  %x - %x\n&quot;, what, (int)phys_to_virt(PFN_PHYS(PFN_UP(begin))), (int)phys_to_virt(PFN_PHYS(PFN_DOWN(end))));
&lt;------&gt;
&lt;------&gt;for (pfn = PFN_UP(begin); pfn &lt; PFN_DOWN(end); pfn++) {
&lt;------&gt;&lt;------&gt;struct page *page = pfn_to_page(pfn);
&lt;------&gt;&lt;------&gt;void *addr = phys_to_virt(PFN_PHYS(pfn));
&lt;------&gt;&lt;------&gt;printk(KERN_INFO &quot;Freeing %s:  %x page\n&quot;, what, (int)phys_to_virt(PFN_PHYS(pfn)));
&lt;------&gt;&lt;------&gt;ClearPageReserved(page);
&lt;------&gt;&lt;------&gt;init_page_count(page);
&lt;------&gt;&lt;------&gt;memset(addr, POISON_FREE_INITMEM, PAGE_SIZE);
&lt;------&gt;&lt;------&gt;__free_page(page);
&lt;------&gt;&lt;------&gt;totalram_pages++;
&lt;------&gt;}
&lt;------&gt;printk(KERN_INFO &quot;Freeing %s: %ldk freed\n&quot;, what, (end - begin) &gt;&gt; 10);
}</code></pre></div><p>I have added printk(KERN_INFO in cycle and before it.&nbsp; And I have follow result now:<br /></p><div class="codebox"><pre><code>[    0.972000] Call free_initmem function
[    0.972000] Freeing unused kernel memory:  802eb000 - 808b4000
[    0.976000] Freeing unused kernel memory:  802eb000 page
[    0.976000] Freeing unused kernel memory:  802ec000 page
[    0.976000] Freeing unused kernel memory:  802ed000 page
[    0.980000] Freeing unused kernel memory:  802ee000 page
[    0.980000] Freeing unused kernel memory:  802ef000 page
[    0.984000] Freeing unused kernel memory:  802f0000 page
[    0.984000] Freeing unused kernel memory:  802f1000 page
[    0.988000] Freeing unused kernel memory:  802f2000 page
[    0.988000] Freeing unused kernel memory:  802f3000 page
early</code></pre></div><p>After&nbsp; 802f3000 kernel print &quot;early&quot; and hangs.</p><p>Do you have any ideas about that ?</p></blockquote></div><p>Is the above issue resolved ? I am facing similar issue in one of my platform ? Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170356">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Tormal</div>
					<div class="post-datetime">
						19 Jun 2012, 08:49					</div>
				</div>
				<div class="post-content content">
					<p>In last svn version that bug is not affected.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172209">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">flipside</div>
					<div class="post-datetime">
						13 Jul 2012, 18:02					</div>
				</div>
				<div class="post-content content">
					<p>&quot;Even if you don&#039;t care about this thread - say hi or something!!!!&quot;</p><p>HI just got my HH3A and was looking to see if anything had been done wrt wise</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190506">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">routerj</div>
					<div class="post-datetime">
						31 Jan 2013, 11:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Has support for this router been abandoned?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229109">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">JAU</div>
					<div class="post-datetime">
						3 Apr 2014, 12:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>routerj wrote:</cite><blockquote><p>Hi.</p><p>Has support for this router been abandoned?</p></blockquote></div><br /><p>im guessing the answer to that is yes?<br />anyone about to say other wise ?&nbsp; i have been here <a href="http://openwrt.ebilan.co.uk">http://openwrt.ebilan.co.uk</a> after reading this <a href="http://wiki.openwrt.org/toh/bt/homehub.3.0">http://wiki.openwrt.org/toh/bt/homehub.3.0</a> but things are slow... im looking to add if able openwrt to both my vdsl modem and BTHub3a&nbsp; router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229136">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">dmcdonnell</div>
					<div class="post-datetime">
						3 Apr 2014, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>Just for Information: The BT Home Home Hub 2B, not 3A, is now supported in trunk as of a couple of hours ago. ADSL has been supported for some time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230627">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">benm</div>
					<div class="post-datetime">
						18 Apr 2014, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>@dmcdonnell:<br />Not quite. Two of the patches I submitted for the HH2B have not been merged. As things stand, if you select the HH2B profile and build, you will get two images. The jffs2 image will not boot, and whilst the squashfs image will appear to work, you will soon discover that changes to the configuration are lost when you reboot.<br />What still has to be done to get everything working properly is to build an image making use of the newly added support for an overlay file system on top of ubi. I&#039;m planning to have a go at that as soon as I can find time, but if someone else gets there first so much the better!</p><p>P.S. Thanks for the work you did on the device tree last year by the way. That was my starting point.</p>											<p class="post-edited">(Last edited by <strong>benm</strong> on 18 Apr 2014, 16:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264298">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">shanicoolest</div>
					<div class="post-datetime">
						5 Feb 2015, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>I have successfully unlocked, rooted/ssh and backed up flash of my HomeHub 3.0A<br />I have access to ssh.<br />How can I update to OpenWrt without jtag/serial connection ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264387">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">shanicoolest</div>
					<div class="post-datetime">
						6 Feb 2015, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>????????????</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=35606&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>