<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Trunk Kernel 2.6: nvram set clkfreq</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p131018">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						18 Mar 2011, 06:03					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve set my ram up correctly with nvram:</p><p>nvram set memc_config=0x00048008<br />nvram set sdram_init=0x0008</p><p>About 64mb is detected.</p><p>but when I set </p><p>nvram set clkfreq=216</p><p>The router boots at 200mhz only. I&#039;ve tested even higher speeds with dd-wrt and they stay during reboots.<br />Is there a flag to set this writeable somewhere?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131034">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						18 Mar 2011, 13:54					</div>
				</div>
				<div class="post-content content">
					<p>OpenWrt does not use NVRAM. Though maybe the bootloader does. To manipulate NVRAM you could rewrite the partition.<br />Read it, manipulate with HexEditor and write it again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131063">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						18 Mar 2011, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>Is there a checksum? I tried setting variables at the CFE prompt. I set clock to correct values and the box reboots and starts up at 200mhz again. I will try with the jtag. I hope I don&#039;t have to modify the cfe because that is very inconvenient.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131065">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						18 Mar 2011, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>I have no idea, if there is, Broadcom Chipsets are an even greater PITA then I thought until now! I hope Broacom provides some support for this odd behavior.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131068">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						18 Mar 2011, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Some Broadcom SoCs have a fixed speed that can&#039;t be changed by software (e.g. the BCM5354).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131072">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						18 Mar 2011, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>I found </p><p><a href="http://www.bitsum.com/openwiking/owbase/ow.asp?WRT54G5_CFE#h22">http://www.bitsum.com/openwiking/owbase … G5_CFE#h22</a></p><p>I&#039;m flashing a modified CFE back to the router. I&#039;ll see where this gets me. If it bricks I can always reflash with jtag.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131078">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						19 Mar 2011, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>I tried CFE but I edited mac address too and router bricked. I&#039;m trying another one with just clkfreq changed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131082">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						19 Mar 2011, 02:59					</div>
				</div>
				<div class="post-content content">
					<p>No luck, I get this and router reboots over and over:</p><br /><p>CFE version 1.0.37-1.07 for BCM947XX (32bit,SP,LE)<br />Build Date: 2005Ç¯ 10·î 17Æü ·îÍËÆü 04:38:11 JST (root@ifedora)<br />Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.</p><p>Initializing Arena<br />Initializing Devices.<br />* cmdset: AMD Standard<br />* Insaner_1 = (0xa8)<br />* flashutl_cmd: type (0004), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0003), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0002), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* Flash Info. -&gt; manufacturer (00), device (FF)<br />* Flash Info. -&gt; manufacturer2 (0000), device2 (0000)<br />* Insaner_2 = (0xa8)<br />* cmdset: AMD Standard<br />* Insaner_1 = (0xa8)<br />* flashutl_cmd: type (0004), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0003), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0002), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* Flash Info. -&gt; manufacturer (00), device (FF)<br />* Flash Info. -&gt; manufacturer2 (0000), device2 (0000)<br />* Insaner_2 = (0xa8)<br />* cmdset: AMD Standard<br />* Insaner_1 = (0xa8)<br />* flashutl_cmd: type (0004), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0003), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* flashutl_cmd: type (0002), read_id (0090)<br /> -&gt; vendid (00C2), devid (22A8), devid2 (0000)<br />* Flash Info. -&gt; manufacturer (00), device (FF)<br />* Flash Info. -&gt; manufacturer2 (0000), device2 (0000)<br />* Insaner_2 = (0xa8)<br />* memc_config: [00048000]<br />pmon_nvram_get:[sdram_init]=[0]<br />pmon_nvram_get:[sdram_config]=[0x22]<br />pmon_nvram_get:[sdram_refresh]=[0]<br />pmon_nvram_get:[sdram_ncdl]=[0x120]<br />#### pmon_sdram_init is [0]<br />#### pmon_sdram_config is [0x22]<br />#### pmon_sdram_refresh is [0]<br />#### pmon_sdram_ncdl is [0x120]<br />#### NVRAM warning sdram parameter is unset!!<br />#### sdram_init is [NULL]<br />#### sdram_config is [NULL]<br />#### sdram_refresh is [NULL]<br />#### sdram_ncdl is [NULL]<br />#### sdram parameter: reset (CFE default)<br />CPU type 0x29008: 200MHz<br />Total memory: 32768 KBytes</p><p>Total memory used by CFE:&nbsp; 0x80400000 - 0x804A29A0 (666016)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80438650 - 0x8043B1F0 (11168)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x8043B1F0 - 0x8043C9A0 (6064)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x8043C9A0 - 0x804A09A0 (409600)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x804A09A0 - 0x804A29A0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x80400000 - 0x80438650 (230992)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x004A3000 - 0x004E3000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:00000000 - D:00000000</p><p>Erasing NVRAM...done</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131088">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nodoze</div>
					<div class="post-datetime">
						19 Mar 2011, 04:52					</div>
				</div>
				<div class="post-content content">
					<p>Old CFE flashed back. Editing tool does not work correctly. Dumping NVRAM through jtag gives all f&#039;s. Looks like you can&#039;t change anything. How did people brick these overclocking again?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131094">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						19 Mar 2011, 09:34					</div>
				</div>
				<div class="post-content content">
					<p>You should NOT overclock a router...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>