<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Free space on TP-LINK MR3040</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p204366">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ReverZ</div>
					<div class="post-datetime">
						12 Jun 2013, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I have installed an OpenWrt image on the mini mobile MR3040 router.<br />It has 32 MB RAM and 4 MB Flash Memory.</p><p>I could see in LUCI that there are of course some packages pre-installed but I wanted to install some modules for USB and smb support.</p><p>1st problem:<br />When I tried to install kmod-usb-storage, I got error messages regarding unsatisfied dependencies (kernel 3.3.1 xyz....) .</p><p>2nd problem:<br /> I´m running out of installation space. There seems to be just about 92 kB left. As I´m far away from beeing an expert for OpenWrt I´m wondering if it is possible to enlarge the partition for additional packages&nbsp; or am I already at the limits of the internal memory of this router?</p><p>This is the file system on the router:</p><p>Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Available&nbsp; &nbsp; &nbsp; &nbsp;Use%&nbsp; &nbsp; &nbsp;Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;448&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;356&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 92&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 79&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2560&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2560&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14680&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 900&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13780&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;448&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 356&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;92&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;79&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;448&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 356&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;92&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;79&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/</p><p>Thanks for you help,<br />ReverZ</p>											<p class="post-edited">(Last edited by <strong>ReverZ</strong> on 12 Jun 2013, 12:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204369">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						12 Jun 2013, 13:25					</div>
				</div>
				<div class="post-content content">
					<p>Have you checked out extroot already? Setup extroot, install whatever package you like, be happy. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204374">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						12 Jun 2013, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>also, use AA instead of trunk, you wont see those errors about missing dependencies..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205729">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ReverZ</div>
					<div class="post-datetime">
						26 Jun 2013, 13:02					</div>
				</div>
				<div class="post-content content">
					<p>extroot is not an option as I need the USB port for something different.<br />As I don´t really understand the openWrt filesystem: Is there a any usable space left or am I able to free memory somewhere?</p><p>Thanks for the AA hint but I guess it is the Attitude Adjustment version.</p>											<p class="post-edited">(Last edited by <strong>ReverZ</strong> on 26 Jun 2013, 13:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205769">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						26 Jun 2013, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>Get a hub: then you can have extroot and other usb stuff. There are some really small hubs that may even fit inside the router if you are willing to do some soldering.<br />As to space: no, there is none left (the big empty bit is RAM, ie not permanent storage).<br />Are you sure you are on AA final release? What does dmesg say?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205781">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						27 Jun 2013, 00:05					</div>
				</div>
				<div class="post-content content">
					<p>Best way to avoid the kmod-* dependency errors is to compile firmware yourself and include them in the image (which will save you space thanks to compression). It is also a good idea to compile your own firmware without luci, it is a flash space and free mem killer.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 27 Jun 2013, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216485">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Lazee486</div>
					<div class="post-datetime">
						2 Nov 2013, 01:09					</div>
				</div>
				<div class="post-content content">
					<p>im doing exact same project with similiar problems, found a premade image on the piratebox forums with usb etc already loaded, so that fixed the dependencies, im trying to set up extroot now but im a complete newb to linux lol</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216486">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Lazee486</div>
					<div class="post-datetime">
						2 Nov 2013, 01:11					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://stable.openwrt.piratebox.de/trunk/openwrt-ar71xx-generic-tl-mr3040-v2-squashfs-factory.bin">http://stable.openwrt.piratebox.de/trun … actory.bin</a></p><p>working image with usb built in</p><br /><p>cd /tmp<br />wget <a href="http://stable.openwrt.piratebox.de/trunk/openwrt-ar71xx-generic-tl-mr3040-v2-squashfs-factory.bin">http://stable.openwrt.piratebox.de/trun … actory.bin</a> <br />mtd -r write openwrt-ar71xx-generic-tl-mr3040-v2-squashfs-factory.bin firmware</p><br /><p>commands i used to flash it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> good luck</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>