<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need Help on VPNC of CC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291493">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">LiX</div>
					<div class="post-datetime">
						12 Sep 2015, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I am an user form China behind the Great Wall, so vpnc is an important function for me, and it works smoothly on BB until yesterday since I upgrade my WZR-HP-AG300H ro CC.</p><p>Since vpnc&#039;s config shifted from config file to uci interface, my scripts could not working anymore. I configured an vpnc interface in network, but found it dose not work and I need your help:</p><p>* After &#039;ipup VPN, &#039;the default route is replace with the tun device, then the vpn gateway is unreachable, the connection will die in few seconds, left no default gw any more and my LAN has no internet access then. To make it work, I must manually add the host route for the gateway.&nbsp; Is this a bug in netifd scripts/vpnc-scripts or I made mistakes in configuration?</p><p>* I got many &quot;daemon.notice netifd: vpnso (19193): vpnc: esp sendto: Message too long&quot; in log after the connection is (manually) set up and during working. I think this can be fixed by certain option, need help.</p><p>* Need help on firewall rules to make vpnc connection. Currently I have to stop the firewall to make/test connections, otherwise it will exit with &quot;vpnc: can&#039;t send packet: Operation not permitted&quot;.</p><br /><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291495">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">LiX</div>
					<div class="post-datetime">
						12 Sep 2015, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>Something more FYI:<br />* I am a dial-up user, and the default gw is &#039;pppow-wan&#039; at first.<br />* Currently I kept the config of vpnc interface as minimal:<br /></p><div class="quotebox"><blockquote><p>config interface &#039;vpn&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;vpnc&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option server &#039;gateway&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option username &#039;foo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option password &#039;bar&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option authgroup &#039;vpnfoo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option passgroup &#039;vpnbar&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option auth_mode &#039;psk&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option target_network &#039;192.168.6.0/255.255.255.0&#039;</p></blockquote></div><p>and I think the last option is useless since the gateway may push different sub-net every time.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>