<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Axotec, Uboot, ARM (ARM920Tid, ARMv4T), Uboot-Parameter-Problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p52646">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Fries43</div>
					<div class="post-datetime">
						22 Jul 2007, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>We are experimenting with an Axotec Spider III, which uses an own (commercial) build system, which is very bad. We want to use Kamikaze, because of the very good menu-config-system. The compiling runs fine, but we need the uboot-parameters (are we?). How can we explain the bootloader were is kernel and rootfs. In the trunk/build-Dir is an file with uboot-parameters - is this the needed one? If I take these ones,<br />the kernel starts and then the box hangs. The second problem is: we want to use the Flash, the original system does use the ramfs. Does anyone have solved a problem like this? Thanks in advance...</p><p>bye,Bastian&nbsp; / weimarnetz.de</p><p>Here the Original-Boots-Sequence:<br />----------------------------------------------<br />boot 1.0 (May 28 2004 - 14:44:06)</p><p>Uncompressing image...</p><br /><br /><p>U-Boot 1.1.2 SpiderIII<br />(c) Axotec Technologies GmbH, 2005</p><p>U-Boot code: 21F00000 -&gt; 21F1560C&nbsp; BSS: -&gt; 21F218D4<br />DRAM Configuration:<br />Bank #0: 20000000 32 MB<br />Intel 28F128J3A (128Mbit) 16-Bit<br />Size: 16 MB in 128 Sectors<br />Flash: 16 MB<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Hit any key to stop autoboot:&nbsp; 0<br />Copy ramdisk to memory<br />## Booting image at 10040000 ...<br />&nbsp; &nbsp;Image Name:<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;ARM Linux Kernel Image (uncompressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 2533296 Bytes =&nbsp; 2.4 MB<br />&nbsp; &nbsp;Load Address: 20008000<br />&nbsp; &nbsp;Entry Point:&nbsp; 20008000<br />OK<br />## Loading Ramdisk Image at 20800000 ...<br />&nbsp; &nbsp;Image Name:<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;ARM Linux Kernel Image (uncompressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 10485760 Bytes = 10 MB<br />&nbsp; &nbsp;Load Address: 21000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 21000000<br />No Linux ARM Ramdisk Image</p><p>Starting kernel ...</p><p>Linux version 2.6.17.3axo-sp02 (root@linux) (gcc version 3.4.1) #321 Thu Aug <br />176<br />CPU: ARM920Tid(wb) [41129200] revision 0 (ARMv4T)<br />Machine: Axotec Embedded Server<br />Memory policy: ECC disabled, Data cache writeback<br />Clocks: CPU 179 MHz, master 59 MHz, main 18.432 MHz<br />CPU0: D VIVT write-back cache<br />CPU0: I cache: 16384 bytes, associativity 64, 32 byte lines, 8 sets<br />CPU0: D cache: 16384 bytes, associativity 64, 32 byte lines, 8 sets<br />Built 1 zonelists<br />Kernel command line: root=/dev/ram rw ramdisk_size=10280 console=ttyS0,115200 <br />mM<br />AT91: 128 gpio irqs in 4 banks<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Console: colour dummy device 80x30<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 32MB = 32MB total<br />Memory: 19608KB available (2053K code, 417K data, 92K init)<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />checking if image is initramfs...it isn&#039;t (bad gzip magic numbers); looks like <br />d<br />Freeing initrd memory: 10240K<br />NET: Registered protocol family 16<br />Generic PHY: Registered new driver<br />SCSI subsystem initialized<br />usbcore: registered new driver usbfs<br />usbcore: registered new driver hub<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 256 (order: -2, 1024 bytes)<br />TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 1024 bind 512)<br />TCP reno registered<br />NetWinder Floating Point Emulator V0.97 (extended precision)<br />JFFS version 1.0, (C) 1999, 2000&nbsp; Axis Communications AB<br />JFFS2 version 2.2. (NAND) (C) 2001-2003 Red Hat, Inc.<br />io scheduler noop registered (default)<br />at91_usart.0: ttyS0 at MMIO 0xfefff200 (irq = 1) is a AT91_SERIAL<br />at91_usart.1: ttyS1 at MMIO 0xfffcc000 (irq = 9) is a AT91_SERIAL<br />at91_usart.2: ttyS2 at MMIO 0xfffc8000 (irq = 8) is a AT91_SERIAL<br />at91_usart.3: ttyS3 at MMIO 0xfffc4000 (irq = 7) is a AT91_SERIAL<br />at91_usart.4: ttyS4 at MMIO 0xfffc0000 (irq = 6) is a AT91_SERIAL<br />RAMDISK driver initialized: 1 RAM disks of 10280K size 1024 blocksize<br />loop: loaded (max 8 devices)<br />nbd: registered device at major 43<br />Davicom DM9161E: Registered new driver<br />Davicom DM9131: Registered new driver<br />eth0: Link down.<br />eth0: AT91 ethernet at 0xfefbc000 int=24 10-HalfDuplex (00:50:c2:1a:92:34)<br />eth0: Broadcom BCM5221 PHY<br />SCSI Media Changer driver v0.25<br />Axotec Embedded Server MTD mappings:<br />&nbsp; Flash 0x1000000 at 0x10000000<br />Axotec FLASH space reserved<br />Axotec FLASH space ioremaped<br />flash: Found 1 x16 devices at 0x0 in 16-bit bank<br />flash: Found 1 x16 devices at 0x800000 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Doing CFI-Probe<br />Axotec FLASH probe ok<br />Creating 1 MTD partitions on &quot;flash&quot;:<br />0x00e00000-0x01000000 : &quot;Axotec flash application partition&quot;<br />FLASH device added<br />usbmon: debugfs is not available<br />at91_ohci at91_ohci: AT91 OHCI<br />at91_ohci at91_ohci: new USB bus registered, assigned bus number 1<br />at91_ohci at91_ohci: irq 23, io mem 0x00300000<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 2 ports detected<br />Initializing USB Mass Storage driver...<br />usbcore: registered new driver usb-storage<br />USB Mass Storage support registered.<br />usbcore: registered new driver libusual<br />mice: PS/2 mouse device common for all mice<br />MMC: 4 wire bus mode not supported by this driver - using 1 wire<br />TCP bic registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />RAMDISK: ext2 filesystem found at block 0<br />RAMDISK: Loading 10240KiB [1 disk] into ram disk... done.<br />VFS: Mounted root (ext2 filesystem).<br />Freeing init memory: 92K<br />init started:&nbsp; BusyBox v1.00 (2006.01.24-15:42+0000) multi-call binary<br />mount: RPC: Unable to send; errno = Network is unreachable<br />mount: nfsmount failed: Bad file descriptor<br />mount: Mounting 192.168.100.100:/axoteclinux/nfs2target on /host failed: <br />Invalit<br />Starting ifconfigscript...<br />eth0: Link down.<br />Starting httpd...<br />Starting xinetd...<br />usb 1-2: new low speed USB device using at91_ohci and address 2<br />usb 1-2: device descriptor read/64, error -110<br />usb 1-2: device descriptor read/64, error -110<br />usb 1-2: new low speed USB device using at91_ohci and address 3<br />usb 1-2: device descriptor read/64, error -110<br />usb 1-2: device descriptor read/64, error -110<br />usb 1-2: new low speed USB device using at91_ohci and address 4<br />usb 1-2: device not accepting address 4, error -110<br />usb 1-2: new low speed USB device using at91_ohci and address 5<br />usb 1-2: device not accepting address 5, error -110<br />Axotec LED driver (Spider-III Rev.1.2) loaded<br />(C) Copyright 2006 by Axotec Technologies GmbH, all rights reserved<br />Axotec RTC driver (Rev 1.2.1) loaded<br />(C) Copyright 2006 by Axotec Technologies GmbH, all rights reserved</p><br /><p> Axotec Embedded Linux is up!</p><p>Spider-III login: root<br />Password:<br />Jun 10 16:10:01 login[734]: root login&nbsp; on `ttyS0&#039;</p><br /><br /><p>BusyBox v1.00 (2006.01.24-15:42+0000) Built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>~ # mount<br />/dev/ram0 on / type ext2 (rw)<br />none on /proc type proc (rw)<br />sysfs on /sys type sysfs (rw)<br />~ #&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />----------------------------------------------------------------------</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p52658">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						23 Jul 2007, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>You don&#039;t have to rebuild/modify the bootloader. For both questions, following the way how we do it on <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Magicbox">Magicbox</a> should work if you are creating the image the same way. Just make sure to erase/write the right locations to not brick the board. If you need more help, just let me know - and of course, patches are welcomed <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>