<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Howto](AAP) Automated Wifi network change if the current fails</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Sep 2014 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=43352&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43352&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=43352&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p311483">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						15 Feb 2016, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>Admittedly I was dumbfounded after reading <a href="https://forum.openwrt.org/viewtopic.php?pid=311281#p311281">this petulant post</a> a good 3X.</p><p>Following instructions appears not to be a prerequiste for admission to this forum.</p><p><strong>Nowhere</strong> in the clearly documented 7 steps is it given to &#039;name&#039; a section - wifi-iface, yet there is proof -</p><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><div class="codebox"><pre><code>config wifi-iface &#039;STA_name&#039;
    option network &#039;wwan&#039;
    option encryption &#039;psk2&#039;
    ...</code></pre></div></blockquote></div><p>Which results in the documented initialisation failure of the section - wifi-iface network <strong>wwan</strong> -</p><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><div class="codebox"><pre><code>...
Thu Feb 11 20:56:29 2016 user.notice DEBUG: hotplug (iface): action=&#039;ifup&#039; devicename=&#039;&#039; devname=&#039;&#039; devpath=&#039;&#039; product=&#039;&#039; type=&#039;&#039; interface=&#039;lan&#039; 
Thu Feb 11 20:56:30 2016 user.notice DEBUG: hotplug (iface): action=&#039;ifup&#039; devicename=&#039;&#039; devname=&#039;&#039; devpath=&#039;&#039; product=&#039;&#039; type=&#039;&#039; interface=&#039;loopback&#039;</code></pre></div></blockquote></div><p>Contrasted with -</p><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><div class="codebox"><pre><code>...
Thu Feb 11 21:14:55 2016 user.notice DEBUG: hotplug (iface): action=&#039;ifup&#039; devicename=&#039;&#039; devname=&#039;&#039; devpath=&#039;&#039; product=&#039;&#039; type=&#039;&#039; interface=&#039;lan&#039; 
Thu Feb 11 21:14:55 2016 user.notice DEBUG: hotplug (iface): action=&#039;ifup&#039; devicename=&#039;&#039; devname=&#039;&#039; devpath=&#039;&#039; product=&#039;&#039; type=&#039;&#039; interface=&#039;loopback&#039; 
Thu Feb 11 21:16:08 2016 user.notice DEBUG: hotplug (iface): action=&#039;ifup&#039; devicename=&#039;&#039; devname=&#039;&#039; devpath=&#039;&#039; product=&#039;&#039; type=&#039;&#039; interface=&#039;wwan&#039; </code></pre></div></blockquote></div><p>where the section - wifi-iface network <strong>wwan</strong> is anonymous.</p><p>Here, remedial *nix is required -</p><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>after a few minutes i reran the log read</p><div class="codebox"><pre><code>/etc/config$ /etc/config$ logread -e DEBUG
-ash: /etc/config$: not found</code></pre></div></blockquote></div><p><strong>N.B.</strong> - </p><div class="quotebox"><cite>ash wrote:</cite><blockquote><p>/etc/config$: not found</p></blockquote></div><p><em>/etc/config</em> is a directory, not a command.</p><p>In all situations where placement of the <strong>hotplug</strong> filter scripts is adhered to, <em>logger</em> commands will write messages to the log buffer which are available to extract with <em>logread</em>.</p><p>HTH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320838">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">Jay_74</div>
					<div class="post-datetime">
						22 Apr 2016, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I&#039;d like to try the script but I can&#039;t get the code from dropbox (it says too much activities on the account so no more download).<br />Is there anyone who can upload the latest release somewhere ?<br />Thank you !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320916">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						22 Apr 2016, 22:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jay_74 wrote:</cite><blockquote><p>Hi all,<br />I&#039;d like to try the script but I can&#039;t get the code from dropbox (it says too much activities on the account so no more download).<br />Is there anyone who can upload the latest release somewhere ?<br />Thank you !</p></blockquote></div><p>No problem, updated links, now uploaded to Mega. The excessive openwrt firmware downloads from other thread blocked my account temporary...<br />There are two versions:<br />WifiMgr 1.0 switches the wifi network ONLY when the network fails<br />WifiMgr 1.0b also checks every few seconds if the preferred network is available, and switches to it if it&#039;s not connected to it already. This behaviour will cause constant drops if the preferred network fails often, as it will be switching constantly!</p><p><a href="https://mega.nz/#F!KUcVSb6L!UvNxZlm1VsiyFAW3n6wAzA">https://mega.nz/#F!KUcVSb6L!UvNxZlm1VsiyFAW3n6wAzA</a></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 22 Apr 2016, 22:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328271">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">perdi</div>
					<div class="post-datetime">
						13 Jun 2016, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Daby64, the mega account is not working.<br />Can you uoload your script again, pls?<br />Thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335421">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						22 Aug 2016, 03:21					</div>
				</div>
				<div class="post-content content">
					<p>I have a WISP that I am trying to connect to that I have configured in wifiMgr.&nbsp; The password is an obscure string starting with a $.&nbsp; It is not properly parsed and the connection fails.&nbsp; </p><p>I am wondering it there is a character restriction of some type or some other issue.</p><div class="codebox"><pre><code>net7_key=&quot;$y6L&amp;Aiz&quot;</code></pre></div><p>In Luci it returns just the last 4 characters (&amp;Aiz).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335467">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						22 Aug 2016, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>Escape the special characters.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335480">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						22 Aug 2016, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>+1 Escape special characters, example yours:<br />net7_key=&quot;\$y6L&amp;Aiz&quot;<br /><span class="postimg"><img src="https://s19.postimg.org/5t7r5ua8j/Sin_t_tulo.png" alt="https://s19.postimg.org/5t7r5ua8j/Sin_t_tulo.png" /></span></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 22 Aug 2016, 16:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335516">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						22 Aug 2016, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>Thank you!</p><p>Are there any other special characters that one needs to be aware of?&nbsp; I have tested most if not all of the other non-alpha\numeric characters and not found any.&nbsp; The double quote (&quot;) and apostrophe (`) put me into some other mode that I am not familiar with</p><div class="codebox"><pre><code>root@MLWG2:~# net7_key=&quot;`6L&amp;Aiz&quot;;echo $net7_key
&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336123">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">bkil</div>
					<div class="post-datetime">
						27 Aug 2016, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>There are lots of special cases in sh that you need to be aware of. It&#039;s best to experiment on a case by case basis or use hexadecimal. I&#039;m not familiar with the script in question, so it could also impose additional restrictions on top of what is mentioned here if quoting is not used with due diligence in the implementation.</p><div class="codebox"><pre><code>key1=&quot;what&#039;s up?&quot;
key2=&#039;what&quot;s up?&#039;
key3=&quot;what\&quot;s up?&quot;
key4=&quot;back\`tick&quot;
key5=`printf &quot;\x21hi\22there\x23&quot;`</code></pre></div><p>You could find many guides if you are interested, though I&#039;m not sure which one to recommend:<br /></p><ul><li><p><a href="https://bash.cyberciti.biz/bash-reference-manual/Double-Quotes.html">https://bash.cyberciti.biz/bash-referen … uotes.html</a></p></li><li><p><a href="http://www.tldp.org/LDP/abs/html/special-chars.html">http://www.tldp.org/LDP/abs/html/special-chars.html</a></p></li><li><p><a href="http://wiki.bash-hackers.org/syntax/quoting">http://wiki.bash-hackers.org/syntax/quoting</a></p></li></ul><div class="quotebox"><blockquote><p>From BASH reference manual:<br />Enclosing characters in double quotes (‘&quot;’) preserves the literal value of all characters within the quotes, with the exception of ‘$’, ‘`’, ‘\’,</p></blockquote></div><div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>Thank you!</p><p>Are there any other special characters that one needs to be aware of?&nbsp; I have tested most if not all of the other non-alpha\numeric characters and not found any.&nbsp; The double quote (&quot;) and apostrophe (`) put me into some other mode that I am not familiar with</p><div class="codebox"><pre><code>root@MLWG2:~# net7_key=&quot;`6L&amp;Aiz&quot;;echo $net7_key
&gt;</code></pre></div></blockquote></div>											<p class="post-edited">(Last edited by <strong>bkil</strong> on 27 Aug 2016, 15:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336172">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						27 Aug 2016, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the links.&nbsp; Good for reference.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338459">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">idefixx2</div>
					<div class="post-datetime">
						17 Sep 2016, 02:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I&#039;m very interested in your tool, but the link to mega.nz/... does not work anymore. Could you upload it again?<br />Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347759">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">urmitnick</div>
					<div class="post-datetime">
						27 Dec 2016, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br />Can you please re-upload the files? because the given links are not working.<br />Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349225">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">sheen17861</div>
					<div class="post-datetime">
						13 Jan 2017, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>hey! </p><p>when i followed the steps specified by RangerZ&#039;s version of the package, i got a message which said that &quot;your hardware does not support multiple ssid&quot;</p><p>does this mean that i will not be able to use this package or that i cannot connect to more than one wifi?</p><p>im a beginner at this, please let me know.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349272">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						14 Jan 2017, 02:01					</div>
				</div>
				<div class="post-content content">
					<p>It means that the HW is not capable of hosting more than one wireless connection.&nbsp; It should not be related to the package.</p><p>Worth noting your device\radio for others to be aware of.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354506">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						18 Mar 2017, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>Not sure if someone else suggested this, but why not submit this as a package on GitHub?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363494">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						10 Aug 2017, 23:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jay_74 wrote:</cite><blockquote><p>Hi all,<br />I&#039;d like to try the script but I can&#039;t get the code from dropbox (it says too much activities on the account so no more download).<br />Is there anyone who can upload the latest release somewhere ?<br />Thank you !</p></blockquote></div><br /><div class="quotebox"><cite>idefixx2 wrote:</cite><blockquote><p>Hi! I&#039;m very interested in your tool, but the link to mega.nz/... does not work anymore. Could you upload it again?<br />Thanks!</p></blockquote></div><div class="quotebox"><cite>urmitnick wrote:</cite><blockquote><p>Hi!<br />Can you please re-upload the files? because the given links are not working.<br />Thank you</p></blockquote></div><p>Hi guys, my bad, I&#039;ve been out for too long. Updated, new working links <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><a href="https://mega.nz/#!JpMRUTrT!O5y4AYNIlWPZxqXKNvW0ppADi2a63-yvQj_mVwS0yH0">WifiMgr</a><br /><a href="https://mega.nz/#!QxlDHJBK!3saVpnHHkA4HVoToSVm8zRLFJsn2Kj9QWR6KxPnl5Uw">WifiMgr 1.0b</a><br /><a href="https://mega.nz/#!V5tm3K7S!mHeIFFojjJ3S3Ssvh84DfKsDxBMiXc-fCRk-H97mB50">ApScan 1.0b</a></p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 10 Aug 2017, 23:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363848">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">TracieDLeon</div>
					<div class="post-datetime">
						17 Aug 2017, 06:53					</div>
				</div>
				<div class="post-content content">
					<p>good job. Keep it on. I wish you will upload and sort all file on GitHub.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363944">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">jack338c</div>
					<div class="post-datetime">
						19 Aug 2017, 11:01					</div>
				</div>
				<div class="post-content content">
					<p>Place this filter script in <em>/etc/hotplug.d/iface/99-recover-STA</em> -<br /></p><div class="codebox"><pre><code>#!/bin/sh
logger -t DEBUG &quot;hotplug (iface): action=&#039;$ACTION&#039; devicename=&#039;$DEVICENAME&#039; devname=&#039;$DEVNAME&#039; devpath=&#039;$DEVPATH&#039; product=&#039;$PRODUCT&#039; type=&#039;$TYPE&#039; interface=&#039;$INTERFACE&#039;&quot;

local _wwan _wait
_wwan=$(uci -q get wireless.STA_name.interface)
[ -z &quot;$_wwan&quot; ] &amp;&amp; _wwan=wwan # &lt;-- a popular name for &#039;repeater STAs&#039;
_wait=$(uci -q get wireless.STA_name.wait)
[ -z &quot;$_wait&quot; ] &amp;&amp; _wait=15
if [ &quot;$ACTION&quot; = ifdown -a &quot;$INTERFACE&quot; = &quot;$_wwan&quot; ]; then
    /bin/sh /usr/local/bin/revert_to_AP.sh $_wait $_wwan
fi</code></pre></div><p>N.B. the <em>logger</em> commands in the filter scripts can safely be removed but are useful with</p><div class="codebox"><pre><code>logread -e DEBUG</code></pre></div><br /><p>Dear Max Hopper<br />thanks for your share this awesome script to our planet !</p><p>this is what exactly I&#039;m looking for .</p><p>two questoin: <br />1 Can this project remember over 1 remote ssid?&nbsp; for example: I bind ssid1 as wwan,ssid2 as wwan2..</p><p>,then I go to place from A ssid1 to B ssid2. so I need not rebind it again.</p><p>Currently I found it can only work with 1 wwan</p><p>2 once remote router get down and reboot,the repeater router will not autoreconnet again,you have to reboot it to reconnect,could you fix it?</p><br /><br /><p>thank you Max</p>											<p class="post-edited">(Last edited by <strong>jack338c</strong> on 19 Aug 2017, 14:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364056">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">jack338c</div>
					<div class="post-datetime">
						21 Aug 2017, 04:33					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d like to try the script but I can&#039;t get the code from dropbox (it says too much activities on the account so no more download).<br />Is there anyone who can upload the latest release somewhere ?</p><br /><p>Hi! I&#039;m very interested in your tool, but the link to mega.nz/... does not work anymore. Could you upload it again?</p><br /><br /><p>Can you please re-upload the files? because the given links are not working.</p><br /><p>Hi guys, my bad, I&#039;ve been out for too long. Updated, new working links <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>Dear dabyd</p><p>Could you make a luci for this awesome stuff,that&#039;s will be more convenient</p><p>thank you</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=43352&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43352&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=43352&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>