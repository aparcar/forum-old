<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wireless Client mode doesn&#039;t work with Tplink WR741ND</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p141076">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">raghupv30</div>
					<div class="post-datetime">
						11 Aug 2011, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello Everyone,</p><p>I am trying to configure TPLINK WR741ND to act as a wireless client(sta).<br />I have modified the config files to bridge wifi to WAN instead of LAN.<br />This config doesn&#039;t work for WR741ND but the same changes worked on Linksys WR160NL<br />Please help me to arrive at the right config or spot the error with the below config for Tplink WR741ND</p><p>cat /etc/config/network<br />config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0 eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;dhcp&#039;</p><p>config &#039;switch_vlan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;vlan&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ports&#039; &#039;0 1 2 3 4&#039;</p><p>config &#039;switch&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;enable_vlan&#039; &#039;1&#039;</p><p>config &#039;interface&#039; &#039;wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;dhcp&#039;</p><br /><p>-------------------------------------------<br /> cat /etc/config/wireless</p><p>config wifi-device&nbsp; radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;mac80211<br />&nbsp; &nbsp; &nbsp; &nbsp; #option channel&nbsp; 11<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 1-14<br />&nbsp; &nbsp; &nbsp; &nbsp; option country&nbsp; DE<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr&nbsp; 74:EA:3A:CB:5D:4A<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &nbsp;11ng<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode&nbsp; &nbsp;HT20<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab&nbsp; &nbsp;SHORT-GI-40<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab&nbsp; &nbsp;DSSS_CCK-40<br />&nbsp; &nbsp; &nbsp; &nbsp; #option disabled 1</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wifi<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;SKsd<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption psk2<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; xxxxx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141085">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">philchetcuti</div>
					<div class="post-datetime">
						11 Aug 2011, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>what does iwconfig say ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141139">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">raghupv30</div>
					<div class="post-datetime">
						12 Aug 2011, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi philchetcuti,</p><p>I see the wlan0 not assoicated with the Access Point. I have double checked the authentication details to AP.<br />I am just wondering why this config is not working on Tplink WR741ND but works perfectly on Linksys WR160NL<br />Any help highly appreciated.</p><p>Thanks in Advance.</p><p>root@OpenWrt:~# iwconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>br-lan&nbsp; &nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bgn&nbsp; ESSID:off/any<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Managed&nbsp; Access Point: Not-Associated&nbsp; &nbsp;Tx-Power=20 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141140">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Aug 2011, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>&quot;1-14&quot; is no valid channel, besides that is your AP really 11n? If not, change the hwmode to 11g. Finally is it indeed psk2? Maybe its psk1 with aes instead or some other unusual combination.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141143">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">raghupv30</div>
					<div class="post-datetime">
						12 Aug 2011, 15:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi Jow,</p><p>I have checked the AP configuration details and found it to be 802.11b/g interface with WPA-PSK encryption with version WPA+WPA2.<br />I did modify the wireless config file to reflect the correct channel number and hwmode to 11g with both encryption modes psk &amp; psk2, but still doesn&#039;t work.<br />AP is the same even when I used the Linksys WR160NL which works very well out there.<br />Below are the scan results seen by wr741nd using iwlist scan command.<br />Also executing the command wifi manually reveals errors during bind() which is unable to recognize the device.</p><p>-------------------------------------------------------<br />wifi<br />Read error: Network is down, reopening socket<br />udhcpc: bind: No such device<br />udhcpc (v1.18.4) started<br />root@OpenWrt:~# Sending discover...<br />Sending discover...<br />Sending discover...</p><p>--------------------------------------------------------<br />iwlist scan</p><p>Cell 04 - Address: 00:24:17:84:58:0B<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Channel:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequency:2.412 GHz (Channel 1)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Quality=65/70&nbsp; Signal level=-45 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:on<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ESSID:&quot;SKsd&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 18 Mb/s<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 24 Mb/s; 36 Mb/s; 54 Mb/s<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bit Rates:6 Mb/s; 9 Mb/s; 12 Mb/s; 48 Mb/s<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Master<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Extra:tsf=00000000b3620226<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Extra: Last beacon: 700ms ago<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 0003534B31<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 010882848B962430486C<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 030101<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 2A0106<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 2F0106<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: IEEE 802.11i/WPA2 Version 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Group Cipher : TKIP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Pairwise Ciphers (2) : CCMP TKIP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Authentication Suites (1) : PSK<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 32040C121860<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: 32040C121860<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: Unknown: DD060010180205F0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IE: WPA Version 1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Group Cipher : TKIP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Pairwise Ciphers (2) : CCMP TKIP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141146">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						12 Aug 2011, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>/etc/config/network<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;proto&#039; &#039;dhcp&#039;</code></pre></div><p>/etc/config/wireless<br /></p><div class="codebox"><pre><code>config wifi-iface
        option device   radio0
        option network  wan
        option mode     sta
        option ssid     SKsd
        option encryption psk2
        option key  xxxxx</code></pre></div><p><a href="http://wiki.openwrt.org/doc/recipes/routedclient#using.masquerade">Routed Client - OpenWrt Wiki</a> - Using MASQUERADE</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141150">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">raghupv30</div>
					<div class="post-datetime">
						12 Aug 2011, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi fyi,&nbsp; </p><p>Thanks for the reply. As recommended, i have tried changing the configuration with MASQUERADE option as mentioned in the wiki<br />But the client device WR741ND is still unable to connect to AP<br />I believe there should be something additional configuration required for WR741ND.<br />Have you or anyone had tried previously configured MASQUERADE&nbsp; on WR741ND?<br />Any help is highly appreciated.</p><p>Code:</p><p>cat /etc/config/network<br />config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0 eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;dhcp&#039;</p><p>config &#039;switch_vlan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;vlan&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ports&#039; &#039;0 1 2 3 4&#039;</p><p>config &#039;switch&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;enable_vlan&#039; &#039;1&#039;</p><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;dhcp&#039;</p><p>Code:</p><p>cat /etc/config/wireless</p><p>config wifi-device&nbsp; radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;mac80211<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option country&nbsp; DE<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr&nbsp; 74:EA:3A:CB:5D:4A<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &nbsp;11bg<br />&nbsp; &nbsp; &nbsp; &nbsp; #option htmode&nbsp; &nbsp;HT20<br />&nbsp; &nbsp; &nbsp; &nbsp; #list ht_capab&nbsp; &nbsp;SHORT-GI-40<br />&nbsp; &nbsp; &nbsp; &nbsp; #list ht_capab&nbsp; &nbsp;DSSS_CCK-40<br />&nbsp; &nbsp; &nbsp; &nbsp; #option disabled 1</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;SKsd<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption psk2<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; xxxxxxx</p><br /><p>Code:</p><p> ifup wan<br />Received SIGTERM<br />Entering released state<br />root@OpenWrt:~#<br />root@OpenWrt:~# wifi<br />udhcpc (v1.18.4) started<br />root@OpenWrt:~# Sending discover...<br />Sending discover...<br />Sending discover...</p><p>root@OpenWrt:~#<br />root@OpenWrt:~# iwconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>br-lan&nbsp; &nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bgn&nbsp; ESSID:off/any<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Managed&nbsp; Access Point: Not-Associated&nbsp; &nbsp;Tx-Power=20 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141170">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						12 Aug 2011, 22:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>raghupv30 wrote:</cite><blockquote><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11<strong>bgn</strong>&nbsp; ESSID:<strong>off/any</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Managed&nbsp; Access Point: <strong>Not-Associated</strong>&nbsp; &nbsp;Tx-Power=20 dBm</p></blockquote></div><p>Double check if you had installed &quot;wpad-mini&quot;.</p><p>Install Backfire 10.03.1-rc4 or rc5 and try again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141413">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">raghupv30</div>
					<div class="post-datetime">
						15 Aug 2011, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi fyi,</p><p>wpad-mini wasn&#039;t installed on Tplink wr741-nd. After installing wpad-mini, the wireless client mode works!!!<br />Many Thanks for helping me out to get this work.</p><p>Thanks,<br />Raghu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142365">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">test1</div>
					<div class="post-datetime">
						28 Aug 2011, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>hello</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>