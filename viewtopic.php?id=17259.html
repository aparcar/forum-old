<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Forwarding between tagged and untagged ports - poor performance</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p74471">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Speedster</div>
					<div class="post-datetime">
						9 Oct 2008, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried searching for something similar to this but nothing came up, I _was_ running my WRT54GS v1 with this network config:</p><div class="codebox"><pre><code>#### VLAN configuration 
config switch eth0
    option vlan1    &quot;0 5&quot;
    option vlan2    &quot;1t 2 3 4 5*&quot;
    option vlan4    &quot;1t 5&quot;


#### Loopback configuration
config interface loopback
    option ifname    &quot;lo&quot;
    option proto    static
    option ipaddr    127.0.0.1
    option netmask    255.0.0.0


#### LAN configuration
config interface lan
    option type     bridge
    option ifname    &quot;eth0.2&quot;
    option proto    static
    option ipaddr    192.168.200.254
    option netmask    255.255.255.0
    option gateway    192.168.200.1

config interface public
    option type    bridge
    option ifname    &quot;eth0.4&quot;</code></pre></div><p>and two SSIDs bound to the separate bridges. I haven&#039;t included /etc/config/wireless as they&#039;re not the problem. The issue is when I transfer any data from the Linux server plugged into port 1 (which has VLAN tagging enabled) to a computer plugged into port 4 (untagged) the speed is only about 3-5Mbps. Another Linux host connected to the server via crossover has no throughput issues (to confirm it was the router), and when I remove tagging from the WRT throughput jumps back up to near 80Mbps. What&#039;s strange though is top shows no load when in the tagged configuration.</p><p>Understanding how the network is implemented, is it possible I&#039;ve reached the limit of what the ADM6996L is capable of handling? Considering the tagged frame has to go to the CPU and then return back to the switch untagged could there be a bottleneck? Is the BCM53xx switch any improvement over the ADM?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>