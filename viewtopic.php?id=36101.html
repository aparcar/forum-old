<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDR3800 and OPENWRT routing not working.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p164058">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						10 Apr 2012, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>I am using netgear units and i have setup static routes with the netgear builds and the routing works fine. one i moved to openwrt all static routing configurations do not work and i have configured them the exact same. anyone have a clue how to fix this? I wanted to move to openwrt for the vlans but unless i can get static routes working it is not possible. any help would be great.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164059">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						10 Apr 2012, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>What is the routing table?<br />What does not work?<br />Whats the ICMP response if you try reach such a failing subnet?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164083">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						11 Apr 2012, 03:06					</div>
				</div>
				<div class="post-content content">
					<p>ok so in open WRT the route table looks like this</p><p>192.168.2.0&nbsp; &nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 255.255.255.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />192.168.3.0&nbsp; &nbsp; &nbsp;192.168.2.5&nbsp; &nbsp; &nbsp; &nbsp; 255.255.255.0&nbsp; &nbsp;UG&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />192.168.4.0&nbsp; &nbsp; &nbsp;192.168.2.5&nbsp; &nbsp; &nbsp; &nbsp; 255.255.255.0&nbsp; &nbsp;UG&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />xxx.xxx.xxx.xxx&nbsp; &nbsp; *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;255.255.252.0&nbsp; &nbsp;U&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1<br />default&nbsp; &nbsp; &nbsp; &nbsp;xxx.xxx.xxx.xxx&nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UG&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 eth1</p><br /><p>what is not working is i have a router on the 192.168.2.5 address and 192.168.3.5, 192.168.4.5 with netgear&#039;s firmaware it works fine with openwrt&#039;s it fails to work</p><p>in openwrt when i try to tracert to 192.168.3.5 it tries to go out over the WAN instead of the 192.168.2.5 which is set in the static route.</p><p>in netgear it goes to the correct static route. I notice the netgear firmware has way more stuff installed like RIP and ip route that the openwrt does not have.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164086">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Apr 2012, 03:21					</div>
				</div>
				<div class="post-content content">
					<p>How do you do the tracert? Is 192.168.2.5 using your openwrt lan ip as default gateway?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164087">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						11 Apr 2012, 03:26					</div>
				</div>
				<div class="post-content content">
					<p>tracert has been done from my PC and also from the router in the SSH terminal and on both the default routes are set as the wndr3800 router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164128">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						11 Apr 2012, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>and behind which router is the PC? Can you draw a diagram of your topology?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164131">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						11 Apr 2012, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>is 192.168.2.5 bind to the WAN-interface of the router? or did you make a dedicated interface for that?<br />and 192.168.3.0/24 and 192.168.4.0/24 are behind the same gateway? how is this set up? two vlans on this router? </p><p>So as long you don&#039;t post more about your actual network-config it&#039;s just a guess, but if it&#039;s a routing problem betwenn LAN and WAN of the openwrt-device, it&#039;s most likely a firewall issue. you have to enable forwarding between LAN and WAN in both directions and disable masquerading.&nbsp; </p><p>So check it yourself, or post /etc/config/network and /etc/config/firewall of the openwrt-device here</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164173">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						11 Apr 2012, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>no this is all using the LAN side no WAN side routing except for the DSL out. here is how i have them connected</p><p>Router 1<br />DSL&nbsp; LAN1</p><p>Router 2<br />DSL&nbsp; LAN2</p><p>Router 3<br />DSL&nbsp; LAN3</p><br /><p>LAN Router is connected to Route 1,2,3 on LAN ports LAN1 192.168.2.5 LAN2 192.168.3.5 LAN3 192.168.4.5. the LAN router uses RIP routing</p><p>Each router has static routes that point to the IP of the interface on the LAN router<br />192.168.3.0&nbsp; &nbsp; &nbsp;192.168.2.5&nbsp; &nbsp; &nbsp; &nbsp; 255.255.255.0&nbsp; &nbsp;UG&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan<br />192.168.4.0&nbsp; &nbsp; &nbsp;192.168.2.5&nbsp; &nbsp; &nbsp; &nbsp; 255.255.255.0&nbsp; &nbsp;UG&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan</p><p>with netgear&#039;s factory firmware and static routes set this works with openWRT I can not get it to work, what is odd is the netgear&#039;s firmware uses openWRT so there must be something netgear is doing that makes it work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200365">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">crazy4nothing</div>
					<div class="post-datetime">
						2 May 2013, 00:59					</div>
				</div>
				<div class="post-content content">
					<p>Dear wesleyhey, </p><p>could you help me please read:</p><p><a href="http://forums.smallnetbuilder.com/showthread.php?t=11074">http://forums.smallnetbuilder.com/showt â€¦ hp?t=11074</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200379">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						2 May 2013, 02:55					</div>
				</div>
				<div class="post-content content">
					<p>Try this</p><p>The best way I found to get this to work is to get a 3rd PC based Windows, or Linux Router or a Cisco Router run between the networks. Windows server 2008r2 is the fastest just enable routing and it builds the route tables for you.</p><p>so for example you setup a static route on router1 to say anything that is 192.168.2.0 goes to 192,168.2.10 (ip of 3rd router port 1) and on router2 to say anything that is 192.168.3.0 goes to 192,168.3.10 (ip of 3rd router port 2)</p><p>Router1 non-wan port to port1 on router3<br />Router2 non-wan port to port2 on router3</p><p>the switch based router does not work as the switch is not able to turn off DHCP and allow Routing over Switch Ports.</p><p>The Firewall is the biggest issue as the WAN is locked down for routing if you turned all firewalls off on router 2 that may also help.</p><p>I have this working with 3 DSL&#039;s and 3 Networks 192.168.1,2,3 and it works great.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200382">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						2 May 2013, 03:34					</div>
				</div>
				<div class="post-content content">
					<p>@Wesleyhey, you don&#039;t actually need static routes, you can simply yust do with zone forwards within the firewall.</p><p>Also 2008r2 isn&#039;t necessarily simpler, but my guess is that you have worked with windows servers a lot <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />(also the license isn&#039;t that cheap).</p><p>@crazy4nothing<br />you can setup up easilliy with just the routers, does the first router have openwrt on it?<br />because it is the openwrt forum, and the setup would be a bit simpler <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> and you can work with vlan tagging.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200383">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">crazy4nothing</div>
					<div class="post-datetime">
						2 May 2013, 03:43					</div>
				</div>
				<div class="post-content content">
					<p>@FriedZombie ler me work on get a openwrt firmware, and test other routers.</p><p>@Wesleyhey What about, that insted of a server i go for a bridge on a simple pc? could that work to connect two networks?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200384">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						2 May 2013, 03:49					</div>
				</div>
				<div class="post-content content">
					<p>@FriedZombie<br />When I first set this up the Zone Routing, and I even tried static routing, but it did not work when using 3 DSL lines and 3 WNDR3800 Routers with DHCP, different buildings over fiber and allowing them to route correctly and all 2 talk without going through the WAN port. If you have seen it work please go ahead and post the setup but none of the openwrt versions have worked correctly in that situation.</p><p>yes the license was expensive but most folks and businesses have that at least and with 2008r2 it is as simple now to enable routing and set ip of the network card and it starts to auto route. That is what I call simple no Cisco Routing configuration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200385">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">wesleyhey</div>
					<div class="post-datetime">
						2 May 2013, 04:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crazy4nothing wrote:</cite><blockquote><p>@Wesleyhey What about, that insted of a server i go for a bridge on a simple pc? could that work to connect two networks?</p></blockquote></div><p>-------------------<br />Bridge most likely will not work as it does not provide any routing. the server/router can be a simple pc with the windows server OS which I have used an OptiPlex 745, or Linux Free will work if you setup that as a router.</p><p>There may be other methods, like maybe VLAN and Zones and Routes but that was overly complicated then just a static route on each router and then a router/pc that passed the routes between the networks. I got mine up and running in minutes without a lot of complicated settings.</p><p>The Switch ports on the WNDR&#039;s can not be turned into an isolated/standalone port that is why the RIP methods did not work.</p><p>Also Netgear&#039;s firmware is openwrt based.</p><p>here is a quick layout of what mine looks like.<br />Router1<br />WAN---------DSL<br />LAN port-----Port1 PC based router(Linux or windows)</p><p>Router2<br />WAN---------DSL<br />LAN port-----Port2 PC based router(Linux or windows)</p><p>Router3<br />WAN---------DSL<br />LAN port-----Port3 PC based router(Linux or windows)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200386">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						2 May 2013, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>Well to answer your earlier question ( I overlooked ), you can install the packages quagga-ripd and ip.</p><p>Also have a look at the package mwan or multi wan<br />I will type a longer message tomorrow, it&#039;s a bit late here now <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200387">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">crazy4nothing</div>
					<div class="post-datetime">
						2 May 2013, 04:21					</div>
				</div>
				<div class="post-content content">
					<p>Guys, i have just turn on a bridge connection on my laptop.</p><p>Where Wireless is connected to the ISP router1 network 1.<br />Ethernet connected to the Router 2 network 2.</p><p>Make the bridge with the two connections.</p><p>Seems to work i can see PC and devices from one network to the other.</p><p>But one issue.</p><p>For some reason when my laptop get the ethernet cable hooked up. it seems that it gooes for that connection first. ( so losing the internet) therefore no device on net 2 has internet.</p><p>how do i switch or change that the computer use the wireless first, or for the internet, or to share with net 2.?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200388">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">crazy4nothing</div>
					<div class="post-datetime">
						2 May 2013, 04:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crazy4nothing wrote:</cite><blockquote><p>Guys, i have just turn on a bridge connection on my laptop.</p><p>Where Wireless is connected to the ISP router1 network 1.<br />Ethernet connected to the Router 2 network 2.</p><p>Make the bridge with the two connections.</p><p>Seems to work i can see PC and devices from one network to the other.</p><p>But one issue.</p><p>For some reason when my laptop get the ethernet cable hooked up. it seems that it gooes for that connection first. ( so losing the internet) therefore no device on net 2 has internet.</p><p>how do i switch or change that the computer use the wireless first, or for the internet, or to share with net 2.?</p></blockquote></div><p>One thing, on Network connections f10 and then Advance menu advance settings .. then moving the wireless connection to the top does not help.</p><p>By the way Windows 7 Pro. on the laptop.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200491">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">crazy4nothing</div>
					<div class="post-datetime">
						3 May 2013, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>Guys what bout this.</p><p><a href="http://www.youtube.com/watch?v=4ci5y4t9f0Q">http://www.youtube.com/watch?v=4ci5y4t9f0Q</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>