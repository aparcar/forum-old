<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ssh from WAN into OpenWRT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p308804">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">srd</div>
					<div class="post-datetime">
						24 Jan 2016, 05:53					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT Chaos Calmer 15.05/LuCI Master (git-15.233.47308-791ca8b)</p><p>Trying to login to the external WAN interface on OpenWRT via:<br />&nbsp; &nbsp; $ ssh -l root 192.168.3.10 -p 2222</p><p>Getting no response. Here&#039;s some info.</p><p>Network --&gt; Interfaces<br />WAN (eth1)&nbsp; &nbsp;192.168.3.10/24<br />LAN (br-lan) 192.168.30.1/24</p><p>Added to System -&gt; Administration<br />Dropbear Instance<br />&nbsp; &nbsp; interface WAN<br />&nbsp; &nbsp; port 2222<br />&nbsp; &nbsp; allow root user to login</p><p>Add to /etc/conf/firewall ...<br />config rule<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;tcp&#039;<br />&nbsp; &nbsp; option dest_port &#039;2222&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>Here is my network:<br />internet &lt;--&gt; modem +<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; +--- (1.1) --+-- (3.1) -------+ 192.168.3.10 (WAN)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Router&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| OpenWRT<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + 192.168.30.1 (LAN)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + 192.168.1.10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;workstation&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+ 192.168.30.100 (laptop)</p><br /><p>&nbsp; &nbsp; Any help much appreciated.</p>											<p class="post-edited">(Last edited by <strong>srd</strong> on 24 Jan 2016, 05:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309169">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						27 Jan 2016, 10:44					</div>
				</div>
				<div class="post-content content">
					<p>From the diagram presumably the login attempt is from workstation.</p><p>The dnsmasq instance on the OpenWrt device responds to requests from <em>br-lan</em>, not <em>wan</em>.</p><p>Try hard-coding a 192.168.30.0/24 address on the workstation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309296">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						28 Jan 2016, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Are you trying to login via ssh from a local machine into your router, and it times out? You&#039;ll need use your wan ip from a source outside your network. Have you tried to use your smartphone with JuiceSSH to test remotely logging in? </p><p>I use free <a href="http://www.noip.com/">http://www.noip.com/</a> for host redirect to avoid having to type in my remote ip also.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>