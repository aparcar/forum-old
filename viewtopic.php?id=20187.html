<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wget not working (and hence opkg not working also)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p87305">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lenhamey</div>
					<div class="post-datetime">
						5 May 2009, 05:12					</div>
				</div>
				<div class="post-content content">
					<p>I installed kamikaze 8.09 + x-wrt for atheros from x-wrt.org.</p><p>I want to add packages (specifically, bandwidthd).</p><p>Problem: opkg times out on connecting.<br />I can ping downloads.openwrt.org from the router; I can access downloads.openwrt.org from <br />a web browser connected to the router - but the router is acting as a switch (it&#039;s a DIR-300) so that does not tell me a whole lot.<br />Could it be firewall?&nbsp; Not sure what to look at next...</p><p>Here is ping and wget output from ssh on the router.<br />------------------------------------------------------------------------------------<br />root@OpenWrt:~# ping downloads.openwrt.org<br />PING downloads.openwrt.org (195.56.146.238): 56 data bytes<br />64 bytes from 195.56.146.238: seq=0 ttl=53 time=341.412 ms<br />64 bytes from 195.56.146.238: seq=1 ttl=53 time=339.293 ms<br />^C<br />--- downloads.openwrt.org ping statistics ---<br />2 packets transmitted, 2 packets received, 0% packet loss<br />round-trip min/avg/max = 339.293/340.352/341.412 ms<br />root@OpenWrt:~# wget -O myfile -Y off <a href="http://downloads.openwrt.org/kamikaze/8.09">http://downloads.openwrt.org/kamikaze/8.09</a><br />/atheros/packages/Packages.gz<br />Connecting to downloads.openwrt.org (195.56.146.238:80)<br />wget: cannot connect to remote host (195.56.146.238): Connection timed out<br />root@OpenWrt:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87307">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lenhamey</div>
					<div class="post-datetime">
						5 May 2009, 05:21					</div>
				</div>
				<div class="post-content content">
					<p>Further to the above:</p><p>I am currently using the router inside a private network.&nbsp; The main router logs all traffic; it logs DNS lookup caused by wget but does not log an outgoing port 80 connection, which is further evidence that the connection to port 80 being established by wget is being blocked before it leaves the router.</p><p>Since this is a DIR-300, it only has one interface eth0 and all external ports appear to be a switch together.</p><p>I hope to install bandwidthd and be able to use the router to obtain graphs of bandwidth usage by placing the router as a switch in my network.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87351">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">slx</div>
					<div class="post-datetime">
						5 May 2009, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>Try this: <a href="http://forum.openwrt.org/viewtopic.php?id=19548">http://forum.openwrt.org/viewtopic.php?id=19548</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87484">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lenhamey</div>
					<div class="post-datetime">
						7 May 2009, 03:47					</div>
				</div>
				<div class="post-content content">
					<p>The link above solved the problem:</p><p>If you want to use opkg on a router that is behind another NAT router, use the command</p><p>sysctl -w net.ipv4.tcp_ecn=0</p><p>and opkg will work.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>