<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Memory mod on Dlink DIR-825</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Mar 2018 and 29 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=26416&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=26416&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p116429">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						4 Sep 2010, 10:47					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody! <br />Yesterday I resolder two memory chip on my D-link DIR-825. The chips which I used are Samsung K4H511638D-UCB3 from Samsung DDR SODIMM 512MB. <br /><a href="http://images.4m.net.ua/images/43227162731589091754.jpg">http://images.4m.net.ua/images/43227162731589091754.jpg</a> </p><p>Old chips was MOSEL VITELIC V58C2256164SC15. <br /><a href="http://images.4m.net.ua/images/40186886087248680668.jpg">http://images.4m.net.ua/images/40186886087248680668.jpg</a> </p><p>Router booting U-Boot and shows 128 MB RAM.&nbsp; <br />But linux kernel not starting without any error messages!&nbsp; <br />Have you any ideas about starting linux kernel, what reason of this U-Boot or/and Firmware (DD-WRT, OPENWRT, Original firmware)? <br />This mod will be very intrested for many users who want to get small and fast home server. </p><p>Below U-boot logs with 128M and 64M: </p><p>U-Boout log with 128M: <br />--------------------------- </p><p>U-Boot 1.1.4 (Apr 9 2009 - 12:01:01) </p><p>AP94 (ar7100) U-boot 0.0.12 <br />HTTP-UID AP94: DRAM: b8050000: 0xc0140180 <br />128 MB <br />Top of RAM usable for U-Boot at: 88000000 <br />Reserving 214k for U-Boot at: 87fc8000 <br />Reserving 192k for malloc() at: 87f98000 <br />Reserving 44 Bytes for Board Info at: 87f97fd4 <br />Reserving 36 Bytes for Global Data at: 87f97fb0 <br />Reserving 128k for boot params() at: 87f77fb0 <br />Stack Pointer at: 87f77f98 <br />Now running in RAM - U-Boot at: 87fc8000 <br />ar7100 flash_init: start <br />ar7100_spi_flash_unblock: start <br />ar7100_flash: id read: start <br />flash size 8MB, sector count = 128 <br />Flash: 8 MB <br />Using default environment </p><p>In: serial <br />Out: serial <br />Err: serial <br />Net: eth_initialize: ag7100_enet_initialize <br />rtl8366sr_phy_setup ethUnit=0 <br />ar7100.c: eth0 using default MAC: 00:26:5a:c7:71:2c <br />eth0 up <br />ar7100.c: eth1 using default MAC: 00:26:5a:c7:71:2d <br />eth1 up <br />eth0, eth1 <br />### main_loop entered: bootdelay=1 </p><p>### main_loop: bootcmd=&quot;bootm 0xbf050000&quot; <br />Hit any key to stop autoboot: 0 <br />### main_loop: no key string, allow autoboot <br />### main_loop: abortboot </p><br /><p>Original U-Boot log with 64M: <br />--------------------------------- <br />U-Boot 1.1.4 (Apr 9 2009 - 12:01:01) </p><p>AP94 (ar7100) U-boot 0.0.12 <br />HTTP-UID AP94: DRAM: b8050000: 0xc0140180 <br />64 MB <br />Top of RAM usable for U-Boot at: 84000000 <br />Reserving 214k for U-Boot at: 83fc8000 <br />Reserving 192k for malloc() at: 83f98000 <br />Reserving 44 Bytes for Board Info at: 83f97fd4 <br />Reserving 36 Bytes for Global Data at: 83f97fb0 <br />Reserving 128k for boot params() at: 83f77fb0 <br />Stack Pointer at: 83f77f98 <br />Now running in RAM - U-Boot at: 83fc8000 <br />ar7100 flash_init: start <br />ar7100_spi_flash_unblock: start <br />ar7100_flash: id read: start <br />flash size 8MB, sector count = 128 <br />Flash: 8 MB <br />Using default environment </p><p>In: serial <br />Out: serial <br />Err: serial <br />Net: eth_initialize: ag7100_enet_initialize <br />rtl8366sr_phy_setup ethUnit=0 <br />ar7100.c: eth0 using default MAC: 00:26:5a:c7:71:2c <br />eth0 up <br />ar7100.c: eth1 using default MAC: 00:26:5a:c7:71:2d <br />eth1 up <br />eth0, eth1 <br />### main_loop entered: bootdelay=1 </p><p>### main_loop: bootcmd=&quot;bootm 0xbf050000&quot; <br />Hit any key to stop autoboot: 1  0 <br />### main_loop: no key string, allow autoboot <br />### main_loop: abortboot <br />## Booting image at bf050000 ... <br />checksum:84d8de18 <br />Image Name: MIPS OpenWrt Linux-2.6.32.10 <br />Image Type: MIPS Linux Kernel Image (lzma compressed) <br />Data Size: 883790 Bytes = 863.1 kB <br />Load Address: 80060000 <br />Entry Point: 80060000 <br />Verifying Checksum ... OK <br />LZMA Umcompressing Kernel Image ... Image loaded from 80060000-802f6a88 <br />OK <br />Boot image os 5=IH_OS_LINUX <br />## do_bootm_linux start.... <br />No initrd <br />## Transferring control to Linux (at address 80060000) ... <br />## Giving linux memsize in bytes, 67108864 </p><p>Starting kernel ...</p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 6 Sep 2010, 14:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116564">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">vargalex</div>
					<div class="post-datetime">
						6 Sep 2010, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Sorry for the question, but how have you soldered the second USB? Need some resistors too? And work OK?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116566">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						6 Sep 2010, 15:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vargalex wrote:</cite><blockquote><p>Hi!</p><p>Sorry for the question, but how have you soldered the second USB? Need some resistors too? And work OK?</p></blockquote></div><p>Hi!</p><p>Resistors not needed. You just short 2 contacts fields as on foto below</p><p>This foto from my router all working fine</p><p><a href="http://images.4m.net.ua/images/85919404236736847070.jpg">http://images.4m.net.ua/images/85919404236736847070.jpg</a></p><p>More fotos here:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=116224#p116224">https://forum.openwrt.org/viewtopic.php … 24#p116224</a></p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 6 Sep 2010, 15:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116568">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vargalex</div>
					<div class="post-datetime">
						6 Sep 2010, 16:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vavasik wrote:</cite><blockquote><div class="quotebox"><cite>vargalex wrote:</cite><blockquote><p>Hi!</p><p>Sorry for the question, but how have you soldered the second USB? Need some resistors too? And work OK?</p></blockquote></div><p>Hi!</p><p>Resistors not needed. You just short 2 contacts fields as on foto below</p><p>This foto from my router all working fine</p><p><a href="http://images.4m.net.ua/images/85919404236736847070.jpg">http://images.4m.net.ua/images/85919404236736847070.jpg</a></p><p>More fotos here:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=116224#p116224">https://forum.openwrt.org/viewtopic.php … 24#p116224</a></p></blockquote></div><p>Hi!</p><p>Thanks for your help!</p><p>vargalex</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116752">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tournet1</div>
					<div class="post-datetime">
						9 Sep 2010, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>vavasik, have you solved?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116753">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						9 Sep 2010, 16:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tournet1 wrote:</cite><blockquote><p>vavasik, have you solved?</p></blockquote></div><p>Hi, I&#039;m in progress and working on it in my free time.<br />One of the main problem to find U-boot source for DIR-825 B1 because<br />on vendor site U-boot source is unavailable just only Linux source, not U-boot.<br />And main problem with U-boot, I think I need to recompile it with new memory settings.</p><p>Recently I receive from good people link for U-boot source and binary file for<br />Netgear WNDR3700 which use the same hardware (flash, ram, CPU, etc...)</p><p>Now I trying do something with it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117134">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						14 Sep 2010, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Here is full flash image of DIR-825 B1, (bootloader is working with WEB rescue console),&nbsp; <a href="http://upload.com.ua/get/901919492/">http://upload.com.ua/get/901919492/</a><br />Made with SPIPGM <a href="http://rayer.ic.cz/programm/programm.htm#SPIPGM">http://rayer.ic.cz/programm/programm.htm#SPIPGM</a><br />Interface via LPT here <a href="http://rayer.ic.cz/elektro/spipgm.htm">http://rayer.ic.cz/elektro/spipgm.htm</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117487">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						19 Sep 2010, 13:17					</div>
				</div>
				<div class="post-content content">
					<p>FINISHED!!!<br />Memory mod is working....It was U-boot problem, I replace Standart U-boot from D-link on U-boot from Netgear WNDR3700 and recover Caldata partition, after this all working OK, but my DIR-825 now is WNDR3700 from Netgear ;-)</p><p>Here is FullFlash Netgear WNDR3700 <a href="http://upload.com.ua/get/901949950/128M-dir-825-to-Netgear-WNDR3700.zip">http://upload.com.ua/get/901949950/128M … DR3700.zip</a></p><p>Just only resolder memory chips and flash Fullflash firmware from WNDR3700 in to DIR-825</p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 23 Sep 2010, 10:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118730">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						8 Oct 2010, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>Good work vavasik!<br />With the netgear uboot, does the serial input works?</p><p>I&#039;m not able to download it from <a href="http://upload.com.ua">http://upload.com.ua</a>/<br />Can you upload it to an other service?</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118738">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						8 Oct 2010, 22:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ramponis wrote:</cite><blockquote><p>Good work vavasik!<br />With the netgear uboot, does the serial input works?</p></blockquote></div><p>Yes, serial console input is working in U-boot from WNDR3700 flashed into DIR-825</p><p>Other Link on full flash <a href="http://rapidshare.com/files/423899949/128M-dir-825-Netgear-WNDR3700-caldata.rar">http://rapidshare.com/files/423899949/1 … aldata.rar</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118816">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">xiaoxiaoca</div>
					<div class="post-datetime">
						10 Oct 2010, 21:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi, Vavasik!<br />Will you pls give a detail tutorial with pics when you are free,<br />that be greatly appreciated by all the dir-825 users.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118886">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						12 Oct 2010, 00:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xiaoxiaoca wrote:</cite><blockquote><p>Will you pls give a detail tutorial with pics when you are free,<br />that be greatly appreciated by all the dir-825 users.</p></blockquote></div><p>WELCOME</p><p>Sorry for my bad English ;-(</p><p>Objective: Increase the amount of RAM from 64 MB to 128 MB by soldering memory chips in a router.<br />Reason: I&#039;m using a router as a small NAS server with P2P download/upload station. I have internet connection at my home via twisted pair with static addressing at 100 Mbps rate. <br />Router was flashed under OpenWRT, installed Transmission Daemon, Samba 3.<br />At speeds under 100Mbit and 64MB of RAM on the router speed of download/upload of Transmission varies from 512K to 4MB, and I can see that the router does not have enough memory and it starts to swap to an USB stick which mounted as swap partition.</p><p>Attention: If you want this mod you necessary open a router that has a loss of warranty!<br />If you want make this mod yourself you must have good soldering skills!<br />Whatever you do with the router, YOU DO AT YOUR OWN RISK!</p><br /><p>This article - a compilation of my posts from the IXBT forum (<a href="http://forum.ixbt.com/topic.cgi?id=14:49819">http://forum.ixbt.com/topic.cgi?id=14:49819</a>) with some modifications.</p><p>Main steps:<br />1. Flashing full flash from a router Netgear WNDR3700 to a DIR-825 Rev:B2. Because standard DIR-825 U-boot can’t load Linux kernel of the firmware and abort firmware loading process without any error messages when 128MB RAM installed.<br />2. Soldering ICs.</p><p>Flashing<br />Re-flash I performed by the method of direct programming SPI Flash via LPT port.</p><p>Steps:<br />1. Disassemble router</p><p>2. Install and solder in the empty holes JP1 connector pins for Serial console (you can use the pins from the old motherboard, etc.), in order to monitor the boot process after flashing full flash. <br />Pinout connector JP1 is: PIN1-&gt; 3.3V; PIN2-&gt; RX; PIN3-&gt; TX; PIN4-&gt; GND.</p><p>3. Use a serial cable on MAX232 to connect to serial console, or another cable which can be made from old cable for mobile phone, I used a USB cable from an old mobile phone Siemens M55 assembled on the PL-2303 chip.<br />4. Check the work of serial console. Connect cable to your PC and router and run terminal client, I used PuTTy <a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a>&nbsp; <br />COM port settings: 115200/8/1/0/none</p><p>After turning on the router with connected serial cable you should see a messages in terminal client during boot the router like this:</p><p>U-Boot 1.1.4 (Apr September 2009 - 12:01:01)</p><p>AP94 (ar7100) U-boot 0.0.12<br />HTTP-UID AP94: DRAM: b8050000: 0xc0140180<br />64 MB<br />Top of RAM usable for U-Boot at: 84000000<br />Reserving 214k for U-Boot at: 83fc8000<br />Reserving 192k for malloc () at: 83f98000<br />********</p><p>If you do not see these messages, then something is wrong with your cable, port, etc .... locate the errors and correct it.</p><p>5. Find a IC&nbsp; SPI Flash Spansion S25FL064A (Package SO3 016 wide), it is located on the backside of the router PCB. <br />Datasheet for flash chip here: <a href="http://www.spansion.com/Support/Datasheets/S25FL064A_00_C4_e.pdf">http://www.spansion.com/Support/Datashe … 0_C4_e.pdf</a> </p><p>6. You can use various ways to flashing SPI chip, I use self-made simple LPT adapter.<br />Make adapter for LPT port, the circuit here <a href="http://rayer.ic.cz/elektro/spipgm.htm">http://rayer.ic.cz/elektro/spipgm.htm</a> , but these article for another type of chip (thanks for the links user lprot from IXBT forum).<br />In our case, pins connections are follows:<br />DB25 # PIN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IC S25FL064A # PIN<br />7 -----------[ 150R ]----------- 7<br />10--------- [150R ]----------- 8<br />8 -----------[ 150R ]---------- 16<br />9 -----------[ 150R ]---------- 15<br />18----------- ----------------- 10 GND or &quot;GND&quot; on JTAG pads.</p><p>I used a ribbon cable with stranded wire from the old 40 pin ATA cable, alternating signal wires with the ground for better noise immunity and DB25 connector from standard LPT cable.<br />It should be noted that the cable should be as short as possible, I got about 10-12 cm<br />Photos of the cable: <a href="http://images.4m.net.ua/images/86098268307367770773.jpg">http://images.4m.net.ua/images/86098268307367770773.jpg</a> </p><p>7. Connection to the flash chip:<br />If there is no external power supply for +3,3 V then necessary carefully lift the IC’s pins listed above over PCB.<br />WARNING: Beware of lifting the pins of flash IC, they are very fragile and are more likely to snap off at the body.</p><p>In order not to break off IC’s pins, I made an external power supply for +3,3 V, using the integrated voltage regulator for +3,3 V from the old motherboard and power supply from the external HDD with +5V and +12V. «+3,3V» power supply should be connected to the pin “2” of IC S25FL064A. Perhaps you can use two large size batteries type «D» 1,5V instead of the power supply, but with the batteries I have not tried ...</p><p>9. Connect the LPT adapter to the chip and computer and connect +3,3V external power supply, or batteries you must see light of some LEDs on the board.<br />10. So, if everything is done properly download the program software from the link <a href="http://rayer.ic.cz/programm/programm.htm#SPIPGM">http://rayer.ic.cz/programm/programm.htm#SPIPGM</a> </p><p>Run DOS session, I use a FAR manager under Win XP SP3 and try determine the chip with the key “i”<br />SPIPGMW.EXE /i</p><p>Program should show:<br />SPI connected to LPT port at I / O base address: 378h, SCK pulse width: t 0us FlashROM JEDEC ID, type: 010216h Spansion S25FL064A (8MB)</p><p>If you see “unknown chip” there is a problem with LPT cable connection, check connections and try again.</p><p>Dump content of the chip twice in to files and compare it between each other. <br />(for example: fc / b test_1 test_2) if no differences, then you can read/write the chip’s content without errors. If you see differences then shorten the LPT cable.</p><p>11. Download and save the full flash Netgear WNDR3700 from here: <a href="http://upload.com.ua/get/901949950/128M-dir-825-to-N">http://upload.com.ua/get/901949950/128M-dir-825-to-N</a> ... gear-WNDR3700.zip <br />or <a href="http://rapidshare.com/files/423899949/128M-dir-825-Netgear-WNDR3700-caldata.rar">http://rapidshare.com/files/423899949/1 … aldata.rar</a> <br />This is a firmware with bootloader from Netgear WNDR3700 with default password.<br />12. Before flashing the firmware allow record in chip with the key “u”<br />SPIPGMW.EXE /u<br />13. Erase chip with the key “e”<br />SPIPGMW.EXE /e<br />14. Program chip with key “p”<br />SPIPGMW.EXE /p file_name <br />15. Dump chip content to a file with key file “d”<br />SPIPGMW.EXE /d filename_1<br />16. Check the programming, by comparing recorded file and recently dumped file<br />fc / b filename_1 filename_2. <br />Files must be equal.<br />17. Disconnect LPT cable and external power supply, try to boot. Look at the serial console terminal program you will see a standard boot log of Netgear WNDR3700</p><p>(Below is the log with the already soldered 128MB memory)</p><p>U-Boot 1.1.4DNI1.6 (May 22 2009 - 16:37:44)</p><p>WNDR3700U (ar7100) U-boot 0.0.12<br />DRAM: b8050000: 0xc0140180<br />128 MB<br />Top of RAM usable for U-Boot at: 88000000<br />Reserving 315k for U-Boot at: 87fb0000<br />Reserving 192k for malloc () at: 87f80000<br />Reserving 44 Bytes for Board Info at: 87f7ffd4<br />Reserving 36 Bytes for Global Data at: 87f7ffb0<br />Reserving 128k for boot params () at: 87f5ffb0<br />Stack Pointer at: 87f5ff98<br />Now running in RAM - U-Boot at: 87fb0000<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash: 8 MB<br />*** Warning - bad CRC, using default environment</p><p>In: serial<br />Out: serial<br />Err: serial<br />Net: ag7100_enet_initialize ...<br />CHH: mac: 0 if: 2<br />CHH: mac: verify: 0 if: 00,000,002<br />: Cfg1 0xf cfg2 0x7014<br />eth0: c0: 3f: 0e: 7f: 26:1 f<br />eth0 up<br />CHH: mac: 1 if: 1<br />CHH: mac: verify: 1 if: 00,000,001<br />: Cfg1 0xf cfg2 0x7014<br />eth1: c0: 3f: 0e: 7f: 26:20<br />eth1 up<br />eth0, eth1<br />Trying eth0<br />: Unit 0 phy is up ... RGMii 1000Mbps full duplex<br /># 259: ag7100_set_mac_from_link<br />: Pll reg 0x18050010: 0x11110000<br />: Cfg_1: 0x1ff0000<br />: Cfg_2: 0x3ff<br />: Cfg_3: 0x8001ff<br />: Cfg_4: 0xffff<br />: Cfg_5: 0xfffef<br />: Done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22</p><p> Client starts ... [Listening] for ADVERTISE ... TTT<br />Retry count exceeded; boot the image as usual</p><p> nmrp server is stopped or failed!<br />Hit any key to stop autoboot: 1 0<br />&nbsp; &nbsp;Verifying Checksum ... OK<br /># # # SQUASHFS loading &#039;image / uImage&#039; to 0x80800000<br /># # # SQUASHFS load complete: 886690 bytes loaded to 0x80800000<br /># # Booting image at 80800000 ...<br />&nbsp; &nbsp;Image Name: MIPS OpenWrt Linux-2.6.32.16<br />&nbsp; &nbsp;Created: 2010-08-25 22:27:19 UTC<br />&nbsp; &nbsp;Image Type: MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size: 886626 Bytes = 865.8 kB<br />&nbsp; &nbsp;Load Address: 80060000<br />&nbsp; &nbsp;Entry Point: 80060000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br /># # Transferring control to Linux (at address 80060000) ...<br /># # Giving linux memsize in bytes, 134217728</p><p>At this stage we have received from the WNDR3700 Netgear instead of DIR-825.</p><p>Then you can start resoldering memory chips if you have a good soldering skills:</p><p>In the DIR-825 rev.: B2 uses two DDR chips in TSOP 66 with 16Mx16 organization for a total of 64MB, MOSEL VITELIC V58C2256164SC15 Datasheet for them here: <a href="http://pdf1.alldatasheet.net/datasheet-pdf/view/2414/MOSEL/V58C2256164S.html">http://pdf1.alldatasheet.net/datasheet- … 6164S.html</a> </p><p>Original memory chip on the PCB DIR-825<br /><a href="http://images.4m.net.ua/images/40186886087248680668.jpg">http://images.4m.net.ua/images/40186886087248680668.jpg</a> </p><p>I used for mod chips from the Samsung DDR SO-DIMM 512MB with 32Mx16 organization IC type K4H511638D-UCB3 photo: <a href="http://images.4m.net.ua/images/43227162731589091754.jpg">http://images.4m.net.ua/images/43227162731589091754.jpg</a> </p><p>Possible to use chips from other manufacturers only organization must be 32Mx16, chips with another organization, such as 64Mx8 not suitable.</p><p>If both chips normally resolder the router must wake up as the Netgear WNDR3700 with 128MB of memory, You need only install OpenWRT in order to use all 128MB.<br />TIP: Firmware from Netgear cannot use 128MB, just only 64M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118989">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">vargalex</div>
					<div class="post-datetime">
						13 Oct 2010, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>And what are the dowload/upload speeds in transmission with 128MB RAM?</p><p>vargalex</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119000">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						13 Oct 2010, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>Good guide vavasik.</p><p>Can you tell me the correct serial pin-out?<br />and the serial settings?</p><p>Is it possible to flash the firmware without remove the flash from the device.<br />Can i make some connection from the lpt to the flash with the device turned off?<br />I don&#039;t wont to remove the flash from device because i&#039;m not sure to do this without break the device</p><p>Thank you</p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 13 Oct 2010, 18:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119002">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						13 Oct 2010, 18:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vargalex wrote:</cite><blockquote><p>Hi!</p><p>And what are the dowload/upload speeds in transmission with 128MB RAM?</p><p>vargalex</p></blockquote></div><p>approximately dowload/upload is 4-5MB/sec on USB HDD drive connected to DIR-825 with EXT3</p><p>Samba3 speed rate on big non fragmented MKV 13GB file size is 160Mbit/sec</p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 13 Oct 2010, 18:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119003">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						13 Oct 2010, 18:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ramponis wrote:</cite><blockquote><p>Good guide vavasik.</p><p>Can you tell me the correct serial pin-out?<br />and the serial settings?</p><p>Is it possible to flash the firmware without remove the flash from the device.<br />Can i make some connection from the lpt to the flash with the device off?<br />I don&#039;t wont to remove the flash from device because i&#039;m not sure to do this without break the device</p><p>Thank you</p></blockquote></div><p>Hello, you can find serial pinout in my post above and here <a href="http://wiki.openwrt.org/toh/d-link/dir-825#serial">http://wiki.openwrt.org/toh/d-link/dir-825#serial</a><br />Serial settings are: Speed - 115200 other by default ;-)</p><p>Yes, it&#039;s possible. If you don&#039;t want remove chip and lift up chip pins over PCB you need use external power supply +3.3V directly connected to SPI flash chip. For chip programming I disconnect original power supply unit, soldered wires to chip, connect LPT self-made interface to my old notebook, connect&nbsp; +3.3V external power to chip and programming chip as I describe above.</p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 13 Oct 2010, 18:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119005">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						13 Oct 2010, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>Thank you vavasik</p><p>But wich is the first pin of the serial interface?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119009">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						13 Oct 2010, 20:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ramponis wrote:</cite><blockquote><p>Thank you vavasik</p><p>But wich is the first pin of the serial interface?</p></blockquote></div><p>first pin is closest to RAM chip and the labeled as square box</p><p>Foto of my serial cable wich was made from old Siemens M55 USB cable<br /><a href="http://images.4m.net.ua/images/88583142651379753991.jpg">http://images.4m.net.ua/images/88583142651379753991.jpg</a></p><p>My COM port settings<br />Speed:115200, Data bits:8, Stop bits:1, Parity:none, Flow control:none</p>											<p class="post-edited">(Last edited by <strong>vavasik</strong> on 13 Oct 2010, 20:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119058">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						14 Oct 2010, 17:56					</div>
				</div>
				<div class="post-content content">
					<p>ok!</p><p>Thank you vavasik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119145">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">xiaoxiaoca</div>
					<div class="post-datetime">
						16 Oct 2010, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>Great! </p><p>a great job!</p><p>thanks a million!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119361">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">linuxpro</div>
					<div class="post-datetime">
						20 Oct 2010, 06:03					</div>
				</div>
				<div class="post-content content">
					<p>hi,vavasik. good job!<br />thank you.</p><p>i upgrade ram to 128MB.</p><p>flash your&nbsp; bin. ( FullFlash)<br />but can&#039;t boot.</p><p>i think your hardware flash is S25FL064A, but my flash is ST25P64V6P.<br />so can&#039;t boot. (can&#039;t display any information )</p><br /><br /><p>can your tell me how to Modify 128 MB code? (WNDR3700_bootloader_v1.6_uBoot_v1.1.4.tar.bz2)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119362">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">vavasik</div>
					<div class="post-datetime">
						20 Oct 2010, 07:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>linuxpro wrote:</cite><blockquote><p>hi,vavasik. good job!<br />thank you.</p><p>i upgrade ram to 128MB.</p><p>flash your&nbsp; bin. ( FullFlash)<br />but can&#039;t boot.</p><p>i think your hardware flash is S25FL064A, but my flash is ST25P64V6P.<br />so can&#039;t boot. (can&#039;t display any information )</p><br /><br /><p>can your tell me how to Modify 128 MB code? (WNDR3700_bootloader_v1.6_uBoot_v1.1.4.tar.bz2)</p></blockquote></div><p>Hi,<br />First reason it&#039;s incorrect RAM organisation or soldering problem with memory RAM chips.</p><p>I don&#039;t recompile bootloader source code from wndr3700 I just flash binary image to chip</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119367">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">linuxpro</div>
					<div class="post-datetime">
						20 Oct 2010, 08:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vavasik wrote:</cite><blockquote><div class="quotebox"><cite>linuxpro wrote:</cite><blockquote><p>hi,vavasik. good job!<br />thank you.</p><p>i upgrade ram to 128MB.</p><p>flash your&nbsp; bin. ( FullFlash)<br />but can&#039;t boot.</p><p>i think your hardware flash is S25FL064A, but my flash is ST25P64V6P.<br />so can&#039;t boot. (can&#039;t display any information )</p><br /><br /><p>can your tell me how to Modify 128 MB code? (WNDR3700_bootloader_v1.6_uBoot_v1.1.4.tar.bz2)</p></blockquote></div><p>Hi,<br />First reason it&#039;s incorrect RAM organisation or soldering problem with memory RAM chips.</p><p>I don&#039;t recompile bootloader source code from wndr3700 I just flash binary image to chip</p></blockquote></div><p>i reflash D-LINK fullflash.bin to my 825.</p><p>i see my ram is 128MB....</p><p>thanks you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119371">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">linuxpro</div>
					<div class="post-datetime">
						20 Oct 2010, 09:54					</div>
				</div>
				<div class="post-content content">
					<p>i recompile 3700 u-boot.<br />but display stop over here.</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...TTT
Abort

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
ar7100&gt; help
?

U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...TTT
Retry count exceeded; boot the image as usual

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
   Bad Magic Number
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

The Router is in TFTP Server Firmware Recovery mode NOW!
Listening on Port : 69, IP Address: 192.168.1.1...
checksum bad
checksum bad
?

U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...TTT
Retry count exceeded; boot the image as usual

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
   Bad Magic Number
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

The Router is in TFTP Server Firmware Recovery mode NOW!
Listening on Port : 69, IP Address: 192.168.1.1...
checksum bad
checksum bad
checksum bad
checksum bad
checksum bad
checksum bad
checksum bad
checksum bad
checksum bad

Rcv:
        .................................................................
        .................................................................
        .................................................................
        .................................................................
        .................................................................
        .................................................................
        .................................................................
        ...................
Done!
Bytes transferred = 2424965 (250085 hex)
Erase 7 - 120 sectors...
First 0x7 last 0x78 sector size 0x10000                                      120
Copy image to Flash... write addr: bf070000
Done
Rebooting...

Resetting...?

U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...TTT
Retry count exceeded; boot the image as usual

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
   Verifying Checksum ... OK
?

U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...TTT
Retry count exceeded; boot the image as usual

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
   Verifying Checksum ... OK
?

U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
128 MB
Top of RAM usable for U-Boot at: 88000000
Reserving 253k for U-Boot at: 87fc0000
Reserving 192k for malloc() at: 87f90000
Reserving 44 Bytes for Board Info at: 87f8ffd4
Reserving 36 Bytes for Global Data at: 87f8ffb0
Reserving 128k for boot params() at: 87f6ffb0
Stack Pointer at: 87f6ff98
Now running in RAM - U-Boot at: 87fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476787404
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1476786924
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...
Abort

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
ar7100&gt; &lt;INTERRUPT&gt;
ar7100&gt; &lt;INTERRUPT&gt;
ar7100&gt; memtest</code></pre></div><p>input any command, No response.<br />use D-LINK U-BOOT, is same.</p><p>all on the 128RAM.</p><p>i think i must test 64M RAM work status.</p>											<p class="post-edited">(Last edited by <strong>linuxpro</strong> on 20 Oct 2010, 09:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119383">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">linuxpro</div>
					<div class="post-datetime">
						20 Oct 2010, 12:29					</div>
				</div>
				<div class="post-content content">
					<p>i confirm. my memory problem</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Oct 20 2010 - 14:16:41)

WNDR3700U (ar7100) U-boot 0.0.12 dni6 V1.7
DRAM:  b8050000: 0xc0140180
64 MB
Top of RAM usable for U-Boot at: 84000000
Reserving 253k for U-Boot at: 83fc0000
Reserving 192k for malloc() at: 83f90000
Reserving 44 Bytes for Board Info at: 83f8ffd4
Reserving 36 Bytes for Global Data at: 83f8ffb0
Reserving 128k for boot params() at: 83f6ffb0
Stack Pointer at: 83f6ff98
Now running in RAM - U-Boot at: 83fc0000
id read 0x100000ff
flash size 8MB, sector count = 128
Flash:  8 MB
*** Warning - bad CRC, using default environment

BOARD IS NOT CALIBRATED!!!
In:    serial
Out:   serial
Err:   serial
Net:   ag7100_enet_initialize...
No valid address in Flash. Using fixed address
CHH:mac: 0 if: 2
CHH:mac:verify: 0 if: 00000002
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1543896268
after rtl8366s_initChip ret=0
eth0: 00:03:7f:09:0b:ad
eth0 up
No valid address in Flash. Using fixed address
CHH:mac: 1 if: 1
CHH:mac:verify: 1 if: 00000001
: cfg1 0xf cfg2 0x7014
in rtl8366s_phy_setup mac=-1543895788
eth1: 00:03:7f:09:0b:ad
eth1 up
eth0, eth1
Trying eth0
: unit 0 phy is up...RGMii 1000Mbps full duplex
#259:ag7100_set_mac_from_link
: pll reg 0x18050010: 0x11110000
: cfg_1: 0x1ff0000
: cfg_2: 0x3ff
: cfg_3: 0x8001ff
: cfg_4: 0xffff
: cfg_5: 0xfffef
: done cfg2 0x7215 ifctl 0x40605060 miictrl 0x22

 Client starts...[Listening] for ADVERTISE...T
Abort

 nmrp server is stopped or failed !
Hit any key to stop autoboot:  0
ar7100&gt; help
autoscr - run script from memory
?       - alias for &#039;help&#039;
base    - print or set address offset
boot    - boot default, i.e., run &#039;bootcmd&#039;
bootd   - boot default, i.e., run &#039;bootcmd&#039;
bootelf - Boot from an ELF image in memory
bootm   - boot application image from memory
bootp   - boot image via network using BootP/TFTP protocol
bootvx  - Boot vxWorks from an ELF image
cmp     - memory compare
coninfo - print console devices and information
cp      - memory copy
crc32   - checksum calculation
dnishow - display dni write info include mac address,wpspin and serial number
echo    - echo args to console
erase   - erase FLASH memory
exit    - exit script
flinfo  - print FLASH memory information
fsinfo  - print information about filesystems
fsload  - load binary file from a filesystem image
go      - start application at address &#039;addr&#039;
help    - print online help
iminfo  - print header information for application image
imls    - list all images found in flash
itest   - return true/false on integer compare
loadb   - load binary file over serial line (kermit mode)
loads   - load S-Record file over serial line
loady   - load binary file over serial line (ymodem mode)
loop    - infinite loop on address range
ls      - list files in a directory (default /)
macset - Set ethernet MAC address
macshow - Show ethernet MAC addresses
md      - memory display
mii     - MII utility commands
mm      - memory modify (auto-incrementing)
mtest   - simple RAM test
mw      - memory write (fill)
nfs     - boot image via network using NFS protocol
nm      - memory modify (constant address)
pci     - list and access PCI Configuration Space
ping    - send ICMP ECHO_REQUEST to network host
printenv- print environment variables
progmac - Set ethernet MAC addresses
protect - enable or disable FLASH write protection
rarpboot- boot image via network using RARP/TFTP protocol
reset   - Perform RESET of the CPU
run     - run commands in an environment variable
saveenv - save environment variables to persistent storage
setenv  - set environment variables
sleep   - delay execution for some time
snset   - set serial number
test    - minimal test like /bin/sh
tftpboot- boot image via network using TFTP protocol
version - print monitor version
wpspinset - set wpspin number
ar7100&gt; boot
### SQUASHFS loading &#039;image/uImage&#039; to 0x80800000
### SQUASHFS load complete: 883658 bytes loaded to 0x80800000
## Booting image at 80800000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.32.10
   Created:      2010-04-06  13:03:37 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    883594 Bytes = 862.9 kB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.32.10 (openwrt@wrt1.marcant.net) (gcc version 4.3.3 (GCC) ) #20 Tue Apr 6 15:01:26 CEST 2010
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobil
...............</code></pre></div>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=26416&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=26416&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>