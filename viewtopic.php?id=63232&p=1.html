<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Do I really need IPv6 support on my router?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2018 and 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=63232&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p314041">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						8 Mar 2016, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Do I need IPv6 support on my router (Asus WL-330N3G with Huawei E3131 USB-modem)?</p><p>How much disk space could I get back if I build my own CC 15.05 - without IPv6?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314117">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						9 Mar 2016, 13:18					</div>
				</div>
				<div class="post-content content">
					<p>(russian)&nbsp; у нас мобильные операторы не дают ipv6 насколько я знаю. сэкономишь 300-500 кб<br />только нафига это надо, когда на роутере есть USB ? extroot включай и забывай про место на диске.<br />USB хаб подключи</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 9 Mar 2016, 13:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314121">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						9 Mar 2016, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Pishite na Angliskom, payalushta. Americanzev sdec :-)</p>											<p class="post-edited">(Last edited by <strong>augustus_meyer</strong> on 9 Mar 2016, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314124">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						9 Mar 2016, 14:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>augustus_meyer wrote:</cite><blockquote><p>Pishite na Angliskom, payalushta. Americanzev sdec :-)</p></blockquote></div><p>OK. I suggested not to invent wheel trying to put everything to 4 mb flash. Better go buy usb hub for 4$ and flash for another 4$ and have extroot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314129">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						9 Mar 2016, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the answers.</p><p>It is exactly the opposite to &quot;<em>trying to put everything onto a 4MB flash</em>&quot; - I&#039;m trying to put only the essentials there.<br />For example, this particular device has USB-dongle as its primary WAN interface. The same time - the official image does not include any modem-related utilities.<br />If I remove IPv6 and include the proper set of modules - this would be the Good Thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314131">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						9 Mar 2016, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>At the moment, most places that you may want to visit on the internet will have an IPv4 address, many will have both IPv4 and IPv6 addresses. However this is changing and I have come across some sites that are IPv6 only.</p><p>In the immediate future the answer is, probably no.&nbsp; However, the longer term the answer is definitely YES.</p><p>So removing IPv6 support is definitely NOT a good thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314132">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						9 Mar 2016, 15:15					</div>
				</div>
				<div class="post-content content">
					<p>I *think* you need to build a custom image for your device, which lets you skip all the IPv6 and related packages to save room, then install other modules and packages:</p><p><a href="https://wiki.openwrt.org/about/toolchain">https://wiki.openwrt.org/about/toolchain</a></p><p><a href="https://wiki.openwrt.org/doc/howto/build">https://wiki.openwrt.org/doc/howto/build</a></p><p>Is your USB dongle cellular 3G/4G, or wifi?&nbsp; If cellular, I remember reading it uses IPv6 out-of-the-box, in case that makes a difference.&nbsp; HTH.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314149">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						9 Mar 2016, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>I forgot to translate from russian : ISPs in Russia are very conservative about ipv6. Only few of them offer it and I havent heard of any mobile ops offering ipv6. They also do not give external ISP and the only option to have IPV6 would be teredo which was abandoned in openwrt and it also does not give any possibility to have delegated prefix.</p>											<p class="post-edited">(Last edited by <strong>bolvan</strong> on 9 Mar 2016, 17:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314153">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						9 Mar 2016, 18:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><p>Thanks for the answers.</p><p>It is exactly the opposite to &quot;<em>trying to put everything onto a 4MB flash</em>&quot; - I&#039;m trying to put only the essentials there.<br />snip<br />If I remove IPv6 and include the proper set of modules - this would be the Good Thing.</p></blockquote></div><p>I guess it depends on what you consider essential. As mentioned elsewhere, all future growth in the internet will be via IPv6, since IPv4 address space has been exhausted.</p><p>I am curious why you want to do this with a router that only has 4mb of storage? We don&#039;t use PCs with only 640MB of RAM any more. There are plenty of routers out there with much more flash and memory available. Why limit yourself to 4MB?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314227">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						10 Mar 2016, 08:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cvmiller wrote:</cite><blockquote><p> Why limit yourself to 4MB?</p></blockquote></div><p>There&#039;s no reason to pay if it can be avoided.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314264">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						10 Mar 2016, 16:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cvmiller wrote:</cite><blockquote><p>I am curious why you want to do this with a router that only has 4MB of storage?</p></blockquote></div><p>Because Asus WL-330N3G is small enough to fit my demands. I do not want to clutter my space with huge boxes.</p><p>As of extra storage volume: my 3G+ USB-dongle has a microSDHC slot which I hope to use for OpenVPN, FreeRADIUS and Asterisk later.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314298">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						10 Mar 2016, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>This is THE reason to remove all the UNNECESSARY stuff from the image: to be able to mount external USB-storages I must have <a href="http://wiki.openwrt.org/doc/howto/usb.storage">these</a> modules.</p><p><strong>And it is impossible to do! <span class="bbu">Not enough space left!</span></strong><br />I can&#039;t install the <strong>kmod-fs-ext4</strong>, after I have had all 3G-dongle-related modules installed - only ~few kilobytes remain free.<br /><img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Now I <span class="bbu">must</span> build my own image.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 10 Mar 2016, 20:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314321">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						11 Mar 2016, 00:00					</div>
				</div>
				<div class="post-content content">
					<p>Well, since no one here can provide you with the specific answer, there&#039;s only one thing left to do. Install the default CC image, take note of opkg list-installed and start building your own images removing packages one by one until the router is no longer functional.</p><p>If build takes a minute and flashing/booting up/testing another 5, in one hour you can test 10 configs. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Even if you kill your router&#039;s flash doing that -- it wasn&#039;t working like you wanted in a first place.</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 11 Mar 2016, 06:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314329">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						11 Mar 2016, 00:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>...note of opkg list-installed...</p></blockquote></div><p>Thanks a lot!<br />I was about to ask if the build process provides me with a known-to-work set of options (i.e. - just to build an image identical to the provided in the OpenWrt official download area without me messing with the config menu).<br />You gave me an idea of what to do if there is no such bootstrap configuration.<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 11 Mar 2016, 00:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314342">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						11 Mar 2016, 06:28					</div>
				</div>
				<div class="post-content content">
					<p>ImageBuilder may be faster than compiling everything from scratch, it may work well for you if you can figure out dependencies to make sure unwanted packages are not included.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314366">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						11 Mar 2016, 10:37					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, <strong>stangri</strong>.</p><p>Hope <em>opkg list-installed</em> will help me with that too.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 11 Mar 2016, 10:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314547">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						12 Mar 2016, 17:59					</div>
				</div>
				<div class="post-content content">
					<p>Here is my <strong><em>opkg list-installed</em></strong> (IPv6-related modules and modules I will never use are shown, at least I hope so):<br /></p><ul><li><p><strong>ip6tables</strong>, 918</p></li><li><p><strong>kmod-ip6tables</strong>, 8900</p></li><li><p><strong>kmod-ipv6</strong>, 162020</p></li><li><p><strong>kmod-nf-conntrac6</strong>, 10032</p></li><li><p><strong>kmod-nf-ipt6</strong>, 8356</p></li><li><p><strong>kmod-pppoe</strong>, 7373</p></li><li><p><strong>kmod-pppox</strong>, 2354</p></li><li><p><strong>libip6tc</strong>, 17393</p></li><li><p><strong>luci-proto-ipv6</strong>, 5088</p></li><li><p><strong>odhcp6c</strong>, 24353</p></li><li><p><strong>ppp-mod-pppoe</strong>, 10513</p></li></ul><p> I suspect those with the &quot;<strong>6</strong>&quot; are IPv6-related, also I do not need <a href="https://wiki.openwrt.org/doc/devel/packages/kmod-pppoe">PPPoE</a> and <a href="https://wiki.openwrt.org/doc/devel/packages/kmod-pppox">PPPoX</a>.<br />So, in theory, it&#039;s possible to free <strong>257300 bytes</strong> in RO partition.</p><p>Could someone please comment.<br />Thank you in advance.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 12 Mar 2016, 18:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314552">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						12 Mar 2016, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Just happened to find an outstanding ticket:</p><p><a href="https://dev.openwrt.org/ticket/18283">https://dev.openwrt.org/ticket/18283</a></p><p>HTH.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314564">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						12 Mar 2016, 21:19					</div>
				</div>
				<div class="post-content content">
					<p>OK, seems, I&#039;ve locked myself out...</p><p>From the all-default configuration of the Image Generator I did:<br /><strong>make image PACKAGES=&quot;chat comgt ppp usb-modeswitch libusb-1.0 kmod-usb-core kmod-usb-dwc2 kmod-usb-serial kmod-usb-serial-option kmod-usb-serial-wwan kmod-usb-storage kmod-fs-ext4 block-mount kmod-scsi-core -ip6tables -kmod-ip6tables -kmod-ipv6 -kmod-nf-conntrack6 -kmod-nf-ipt6 -kmod-pppoe -kmod-pppox -libip6tc -luci-proto-ipv6 -odhcp6c -ppp-mod-pppoe&quot;</strong></p><p>Then the image was seemingly successfully flashed into the Asus WL-330N3G via LuCI.</p><p>WL-330N3G rebooted, and since then it only responds to <strong>ping 192.168.1.1</strong>.</p><p>I can see the &quot;Press a button for fail-safe mode&quot; message in a sniffer. I do so - the POWER LED starts blinking faster but TFTPing a known-good image (either the stock or the official OpenWrt&#039;s ) fails: the traffic sniffer shows the &quot;ICMP port unavailable&quot; for the port number 69.</p><p>If I power-up WL-330N3G with WPS button depressed - the POWER LED starts blinking sloooow and the device becomes detectable by Asus&#039;s Firmware Restoration utility - but it too fails at ~34% of upload.</p><p>Apart from that - the device seems to recognise the USB-modem, brings the WAN up, lits the <strong>3G</strong> LED properly, etc - but I can&#039;t connect to it neither via Ethernet nor via WiFi.</p><p>Anything I can do now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314589">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						13 Mar 2016, 01:03					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm...</p><p>I can <strong>telnet</strong> into the failsafe mode.</p><p>How do I force it to fetch an image file off my laptop?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314604">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						13 Mar 2016, 02:45					</div>
				</div>
				<div class="post-content content">
					<p>I used netcat (helps to have Linux/Mac) in failsafe on my router (TP-Link), I hope Asus is the same. It&#039;s in wiki.<br />Удачи!</p>											<p class="post-edited">(Last edited by <strong>stangri</strong> on 13 Mar 2016, 02:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314639">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						13 Mar 2016, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Yes, <strong>stangri</strong>, the <strong><em>nc</em></strong> did the trick for me too!<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;m back to the official OpenWrt image again.</p><p>On the router in the failsafe mode via Telnet:<br /></p><div class="codebox"><pre><code>mount_root
nc 192.168.1.3 3333 &gt; /tmp/image.bin
sysupgrade /tmp/image.bin</code></pre></div><p>Now I must find a clean way to uninstall (or to NOT install) IPv6.<br />I guess my brute and dirty way is breaking some configuration data and locks me out of the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315066">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">norman25</div>
					<div class="post-datetime">
						16 Mar 2016, 06:57					</div>
				</div>
				<div class="post-content content">
					<p>at some point I required to remove the ipv6 on my old router dir-600b2 (4mb) to free more space<br />i&#039;m try the image builder several times and always was bad images.<br />then i decided to use the method to create the image from scratch, it worked at first try.<br />the process is very slow and painfull (you have to set up many things and download a big data to your linux box) but it creates a working image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315080">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						16 Mar 2016, 10:30					</div>
				</div>
				<div class="post-content content">
					<p>Yes, <strong>norman25</strong>, that&#039;s my impression too: the <strong><em>menuconfig</em></strong> is the only clean way.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 16 Mar 2016, 10:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p320420">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						19 Apr 2016, 18:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>norman25 wrote:</cite><blockquote><p>at some point I required to remove the ipv6 on my old router dir-600b2 (4mb) to free more space<br />i&#039;m try the image builder several times and always was bad images.<br />then i decided to use the method to create the image from scratch, it worked at first try.<br />the process is very slow and painfull (you have to set up many things and download a big data to your linux box) but it creates a working image.</p></blockquote></div><p>Can say what you disabled in menuconfig? I&#039;ve tried everything I can find, including in &quot;Global Build Settings&quot; and in Busybox and in Kernel modules-&gt;Netfilter extensions, and still have kmod-ipv6 and it can&#039;t be deselected.</p><p>I also deselected, among others, odhcp6c and libip6tc.</p><p>It seems possible that kmod-ipv6 is selected by iptables.</p>											<p class="post-edited">(Last edited by <strong>lizby</strong> on 19 Apr 2016, 18:47)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=63232&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>