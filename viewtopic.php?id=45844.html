<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> HFS+ FSCK in Attitude Adjustment</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p210058">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">4sb8</div>
					<div class="post-datetime">
						18 Aug 2013, 07:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />I have just cleanly installed final release of AA (36088 I believe). I have also followed instructions to enable Time Capsule capability as provided in <a href="http://wiki.openwrt.org/timemachine.">http://wiki.openwrt.org/timemachine.</a> Everything works fine except that I cannot mount HFS+ in R/W due to &quot;hfs: Filesystem was not cleanly unmounted, running fsck.hfsplus is recommended.&nbsp; mounting read-only&quot;. </p><p>Does anyone know if OpenWRT supports FSCK of HFS+.</p><p>I read <a href="https://dev.openwrt.org/ticket/7407,">https://dev.openwrt.org/ticket/7407,</a> and my understanding is that FSCK capability was supposed to be included with AA.</p><p>Any guidance is greatly appreciated.</p><p>Thank you,</p><p>Stevan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210069">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Henk Poley</div>
					<div class="post-datetime">
						18 Aug 2013, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>You should be able to fsck the HFS+ drive and also the HFS+ sparse disk bundle on it with Disk Utility on your Mac.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210077">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kirschwasser</div>
					<div class="post-datetime">
						18 Aug 2013, 13:44					</div>
				</div>
				<div class="post-content content">
					<p>Unqualified answer: <a href="http://en.wikipedia.org/wiki/HFS%2B#Other_operating_systems">HFS+ and Linux</a></p><p>Instead of supporting HFS+ on en embedded operating system how about supporting ext2,ext3,ext4,btrfs on Windows, MacOS, etc.?<br />I am asking myself what is easier to achieve?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214369">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">santibacat</div>
					<div class="post-datetime">
						9 Oct 2013, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi! <br />Thank you all for your job here with openwrt, you are really great!</p><br /><p>I&#039;ve set a transmission torrent client in my openwrt, and as NTFS was too slow i decided (by looking the different filesystem speeds in the other post) to use HFS+, as I have several macs, instead of any EXT3/4 (because I almost never use linux).</p><p>Anyway, I&#039;ve had the same problem as other newbies. When you disconnect it, as fsck.hfsplus is not still present (or not working) on AA (openwrt), it doesn&#039;t let you repair it (the same that is said by <a href="https://dev.openwrt.org/ticket/7407,">https://dev.openwrt.org/ticket/7407,</a> who made the patch).</p><p>I am a medical student, so I don&#039;t really now very well how to compile/write code/program... and I was just trying to find out how to compile this and make it work. After maany reading, this is what I did:</p><p>1- I downloaded diskdev_cmds-332.14 for gentoo from this tutorial<br /><a href="http://atv-bootloader.googlecode.com/svn/trunk/initramfs/apps/hfs_support/mk_diskdev_cmds.sh">http://atv-bootloader.googlecode.com/sv â€¦ ev_cmds.sh</a></p><p>2- I downloaded the patch from the ticket below for openwrt (which is in diff format)</p><p>3- Using an ubuntu 13.04 with built-essential installed, I try to follow the steps from 1 (changing the patch they give say with the one I use of openwrt, changing name and compressing it to match every name).<br />santi@ubuntu:~$ bunzip2 -c diskdev_cmds-332.14.patch.bz2 | patch -p0<br />patching file utils/diskdev_cmds/patches/001_diskdev_cmds-332.14.patch<br />patching file utils/diskdev_cmds/patches/002_diskdev_cmds-respect-cflags.patch<br />patching file utils/diskdev_cmds/Makefile</p><br /><p>OK, to this point i think it&#039;s working. But now I have problems and I can&#039;t continue.<br />I can&#039;t use make to compile the package or anything I tried to use<br />make -f Makefile.lnx</p><p>And also something from here <a href="http://wiki.openwrt.org/doc/devel/patches">http://wiki.openwrt.org/doc/devel/patches</a></p><p>But it always says it can&#039;t find /pb_makefiles/platform.make, or aggregate.make and I don&#039;t know what to do, and my knowledge is limited, so I can&#039;t find out how to do it.</p><p>Can anyone give me some piece of advice?</p><p>Thank you very much</p><p>Santi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214383">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">maivorbim</div>
					<div class="post-datetime">
						9 Oct 2013, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>Why dont you just use EXT4 and use Samba/FTP to move files around?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214398">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">santibacat</div>
					<div class="post-datetime">
						9 Oct 2013, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>Because I have several Macs, and when I am on vacation/holiday/traveling I&#039;d like to be able to simply disconnect the hard disk from the router and use it</p><p>ps: I actually use samba/ftp, but as i said for compatibility reasons I prefer HFS+ rather than ext3/4</p>											<p class="post-edited">(Last edited by <strong>santibacat</strong> on 10 Oct 2013, 00:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221457">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">TorAllex</div>
					<div class="post-datetime">
						2 Jan 2014, 02:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>4sb8 wrote:</cite><blockquote><p>Hi all,<br />I have just cleanly installed final release of AA (36088 I believe). I have also followed instructions to enable Time Capsule capability as provided in <a href="http://wiki.openwrt.org/timemachine.">http://wiki.openwrt.org/timemachine.</a> Everything works fine except that I cannot mount HFS+ in R/W due to &quot;hfs: Filesystem was not cleanly unmounted, running fsck.hfsplus is recommended.&nbsp; mounting read-only&quot;.</p></blockquote></div><p>Hi, Stevan!<br />This guide is the best, all work fine - only one forgotten thing:<br />root@OpenWrt:~# cat /etc/config/fstab<br />config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target &#039;/mnt/TimeMachine&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;/dev/sda1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype &#039;hfsplus&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option options &#039;<span style="color: #FF0000"><strong>force</strong></span>,rw,sync,suid&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;1&#039;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>