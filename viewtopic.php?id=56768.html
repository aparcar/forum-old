<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> openwrt on TPLINK WR 740n Version 5. Error code: 18005</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p271929">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vrdvaibhav</div>
					<div class="post-datetime">
						10 Apr 2015, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>My router is TPLINK WR 740n V5 <br />I am trying to install openwrt factory firmware v4.28 on it using web interface (Though it is V5 router. )<br />(experimenting that if it works on v5, Because most of the thing are similar in v4.28 and v5)<br />when I do it I get ,</p><p>Error code: 18005<br />Upgrade unsuccessfully because the version of the upgraded file was incorrect. Please check the file name.</p><p>I tried changing firmware name to TPLINK firmware names , but it is not helping, in previous 740n version 4.28 this issue was not there .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273267">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						21 Apr 2015, 13:16					</div>
				</div>
				<div class="post-content content">
					<p>DD-WRT make progress in that direction I belive we need to modify image headers, to match routers version</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274734">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vrdvaibhav</div>
					<div class="post-datetime">
						1 May 2015, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nedoskiv wrote:</cite><blockquote><p>DD-WRT make progress in that direction I belive we need to modify image headers, to match routers version</p></blockquote></div><p>So I have to install DD-WRT<br /> and then install Openwrt with <a href="http://wiki.openwrt.org/doc/howto/generic.uninstall#via_openwrt_cli">DD-WRT to OPEN-WRT</a></p><p>or there is some other way in which i can modify headers of openwrt image , where to do that changes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274762">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						1 May 2015, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Read their post need to log to see the file <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=279582">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=279582</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274764">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">vrdvaibhav</div>
					<div class="post-datetime">
						1 May 2015, 17:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>danymarc wrote:</cite><blockquote><p>Read their post need to log to see the file <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=279582">http://www.dd-wrt.com/phpBB2/viewtopic.php?t=279582</a></p></blockquote></div><p>I referred that link and did this , </p><p>I installed ddwrt <a href="http://www.dd-wrt.com/site/support/other-downloads?path=betas%2F2015%2F04-09-2015-r26653%2Ftplink_tl-wr740nv5%2F">beta image</a> available for TP Link 740n version 5 </p><p>then I installed openwrt with following command<br /><span style="color: #FF0000">Don&#039;t know why but this command is not working now and my one router got bricked <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></span><br /><span style="color: #FF0000"><strong>I don&#039;t recommend doing this </strong></span><br /></p><div class="codebox"><pre><code>mtd -r write openwrt_squashfs_sysupgrade.bin linux</code></pre></div><p>It will work for now, but there must be way to directly install openwrt on TP-LINK 740n</p>											<p class="post-edited">(Last edited by <strong>vrdvaibhav</strong> on 27 Oct 2015, 14:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277699">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						27 May 2015, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>I wonder if OpenWrt development team, notice that there is version 5 for supporting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281666">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">irwan6179</div>
					<div class="post-datetime">
						28 Jun 2015, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys, here&#039;s the FW for 740N/ND v5 (non-chinese) with Luci:</p><p>Factory:<br /><a href="https://www.dropbox.com/s/qil9yq35n127ugw/openwrt-ar71xx-generic-tl-wr740n-v5-squashfs-factory.bin?dl=0">https://www.dropbox.com/s/qil9yq35n127u … y.bin?dl=0</a></p><p>Sysupgrade:<br /><a href="https://www.dropbox.com/s/l2l853k32d1d2mf/openwrt-ar71xx-generic-tl-wr740n-v5-squashfs-sysupgrade.bin?dl=0">https://www.dropbox.com/s/l2l853k32d1d2 … e.bin?dl=0</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p281989">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">void_runner</div>
					<div class="post-datetime">
						1 Jul 2015, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>TP-Link WR740N v4 Int and v5 int are different in 3 aspects:<br /> - Missing the on/off switch in V5. The construction of the PCB is much lighter, and much more intolerant to high/low voltages<br /> - The LAN ports are turned upside down, with the RJ clip up.<br /> - The reset button is no longer a pin hole</p><p>Apart from this everything else is the same.</p><p>Now about the firmware. <br />V5 have some more pluses over the V4. It have a page showing username/password fields, and dropbear running on port 22. However having dropbear does not mean that one is able to login to console session.<br />The username and the password are the same as the one which the user should input on the login page (default is admin/admin), however the PTYs are mistaken:<br />The reply from the dropbear is as follows:<br /></p><div class="codebox"><pre><code>PTY allocation request failed on channel 0
shell request failed on channel 0</code></pre></div><p>If you modify the firmware and add telnet server, you&#039;ll be able to gain shell access by using username root and password sohoadmin. No worries about the free space. the original firmware is around 2MB large.</p><p>Flashing from Stock V5 to Stock V4 and vice versa could be made from the console, or from the httpd application.<br />If you&#039;re using the httpd app, then the header of the firmware you want to write should contains 3 fields:<br /> - hardware version, found on offset 0x40 and contains 07400005 for V5 and 07400004 for V4<br /> - firmware version, found on offset 0x44 and contains 00000001 aways<br /> - firmware checksum, found on offset 0x4C checked by httpd and by bootloader.</p><p>As you can see if you are running the stock bootloader you&#039;re no go without a correct checksum. <br />This issue is resolved by two means:<br /> - custom bootloader - try pepe2k one&#039;s. I am using it since a long time and it is very good peace of software<br /> - checksum calculator</p><p>In order to gain access to the bootloader you might try to flash DD-WRT and then to rewrite the mtd0 with the pepe2k one&#039;s. However do not forget to make a backup.</p><p>If you&#039;re using checksum calculator, it is straight forward process. Change the HW version and you&#039;ll have a new strings inside the firmware file and a new checksum as well.<br />Then you might proceed with the flashing via httpd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297603">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">vrdvaibhav</div>
					<div class="post-datetime">
						27 Oct 2015, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>irwan6179 wrote:</cite><blockquote><p>Hello guys, here&#039;s the FW for 740N/ND v5 (non-chinese) with Luci:</p><p>Factory:<br /><a href="https://www.dropbox.com/s/qil9yq35n127ugw/openwrt-ar71xx-generic-tl-wr740n-v5-squashfs-factory.bin?dl=0">https://www.dropbox.com/s/qil9yq35n127u … y.bin?dl=0</a></p><p>Sysupgrade:<br /><a href="https://www.dropbox.com/s/l2l853k32d1d2mf/openwrt-ar71xx-generic-tl-wr740n-v5-squashfs-sysupgrade.bin?dl=0">https://www.dropbox.com/s/l2l853k32d1d2 … e.bin?dl=0</a></p></blockquote></div><p>can you please tell us how did you generated those images, <br />I think we need to change headers but don&#039;t know much about it. <br />your images are OpenWRT 14.07, and I want to generate images for 12.09 version.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>