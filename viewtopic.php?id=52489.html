<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Applying a patch</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p245430">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Ephisray</div>
					<div class="post-datetime">
						31 Aug 2014, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>It seems I&#039;m really a noob, I tried following this tutorial:<br /><a href="http://wiki.openwrt.org/doc/devel/patches">http://wiki.openwrt.org/doc/devel/patches</a><br />But I just dont get it to work to add a new patch. I would really appreciate some help.</p><p>So for downloading OpenWRT I do as described here:<br /><a href="http://wiki.openwrt.org/toh/mikrotik/rb91xg_5hpnd">http://wiki.openwrt.org/toh/mikrotik/rb91xg_5hpnd</a></p><div class="codebox"><pre><code>$ mkdir /home/$USER/mikrotik/
$ cd /home/$USER/mikrotik/
$ svn co svn://svn.openwrt.org/openwrt/trunk/
$ cd /home/$USER/mikrotik/trunk</code></pre></div><p>Then I type</p><div class="codebox"><pre><code>cat &gt; ~/.quiltrc &lt;&lt;EOF
QUILT_DIFF_ARGS=&quot;--no-timestamps --no-index -pab --color=auto&quot;
QUILT_REFRESH_ARGS=&quot;--no-timestamps --no-index -pab&quot;
QUILT_PATCH_OPTS=&quot;--unified&quot;
QUILT_DIFF_OPTS=&quot;-p&quot;
EDITOR=&quot;nano&quot;
EOF</code></pre></div><p>I want to edit the file tx.c in the package kernel/mac80211 so I type</p><div class="codebox"><pre><code>make package/kernel/mac80211/{clean,prepare} V=s QUILT=1</code></pre></div><p>In the gui I set the values which are described at the wiki page of my routerboard. Then I save the .config. </p><p>Then I go into built_dir/target-mips_34kc_uClibc-0.9.33.2/linux-ar71xx_mikrotik/compat-wireless-2014-05-22/net/mac80211 folder and edit the tx.c and insert the code I want to have in there.</p><p>In the Wiki there is written I should do the quilt stuff, but it seems it this is just for getting a .patch file which automatically edits a file... Is manually editing the file like I did enough so I dont have to do the quilt stuff? <br />if not, in the Wiki is written I should go into &quot;cd build_dir/target-*/example-*&quot; and type &quot;quilt push -a&quot; there. But which folder is this &quot;example&quot; folder? I dont find a folder where &quot;quilt push -a&quot; works.</p><p>If I now go into the trunk folder and type make, does it automatically use the changed tx.c file while its compiling?</p>											<p class="post-edited">(Last edited by <strong>Ephisray</strong> on 31 Aug 2014, 01:01)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>