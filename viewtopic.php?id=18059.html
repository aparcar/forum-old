<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb on 8.09, r13118</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78074">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						14 Dec 2008, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>Errr, sorry for being stupid but is their something I&#039;m missing after going from 7 to 8</p><p>I used to follow <a href="http://wiki.openwrt.org/UsbStorageHowto">http://wiki.openwrt.org/UsbStorageHowto</a> and the printer how to to get my usb and usb printer to work<br />- but now I don&#039;t know how to get it working as, for example, no kmod-usb2 are available to opkg ...</p><p>Any quick answers as to if there is a &quot;new way&quot; to get usb working ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78095">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">recyclebin</div>
					<div class="post-datetime">
						15 Dec 2008, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>I believe the &quot;opkg&quot; database is no longer stored in flash, so you need to do an &quot;opkg update&quot; after every reboot.&nbsp; Otherwise it will only know about the installed packages, not all available.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78114">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						15 Dec 2008, 07:08					</div>
				</div>
				<div class="post-content content">
					<p>Yep: but still no lovly usb ...</p><div class="codebox"><pre><code>root@oxo-t:/etc/asterisk# opkg update

Downloading http://downloads.openwrt.org/snapshots/brcm-2.4/packages/Packages.gz
Connecting to downloads.openwrt.org (195.56.146.238:80)
Packages.gz          100% |*******************************|   117k 00:00:00 ETA
Inflating http://downloads.openwrt.org/snapshots/brcm-2.4/packages/Packages.gz
Updated list of available packages in /var/opkg-lists/snapshots


root@oxo-t:/etc/asterisk# opkg list | grep usb

avrusbboot - 2006-06-25-1 - AVRUSBBoot is a bootloader for the Atmel AVR controllers.
kmod-ide-core - 2.4.35.4-brcm-2.4-1 - Kernel support for IDE, useful for usb mass storage devices (e.g. on WL-HDD)
kmod-rt2570 - 2.4.35.4+1.1.0-b2-brcm-2.4-1 - This package contains a driver for Ralink RT2570 usb chipsets.
libusb - 0.1.12-1 - A library for accessing Linux USB devices
qc-usb-utils - 0.6.6-1 - Utilities to tweak parameters of your QuickCam Express or similar webcam.
usb-modeswitch - 0.9.5-1 - A mode switching tool for controlling
usbutils - 0.73-1 - USB devices listing utilities</code></pre></div>											<p class="post-edited">(Last edited by <strong>oxo</strong> on 15 Dec 2008, 07:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78133">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						15 Dec 2008, 13:49					</div>
				</div>
				<div class="post-content content">
					<p>may be stupid but, have you look at /lib/modules/2.xx/ directory if it exist?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78140">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						15 Dec 2008, 14:43					</div>
				</div>
				<div class="post-content content">
					<p>OK 2.4.35...insmod gav problemmer med insmod: unresolved symbol usb_match_id</p><p>root@oxo-t:/lib/modules/2.4.35.4# ls<br />bluez.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_CONNMARK.o&nbsp; &nbsp; &nbsp; &nbsp;ipt_mark.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sch_csz.o<br />bnep.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_DSCP.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_multiport.o&nbsp; &nbsp; &nbsp; sch_dsmark.o<br />cls_api.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_ECN.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_recent.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sch_esfq.o<br />cls_fw.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_IMQ.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_state.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_fifo.o<br />cls_route.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_LOG.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_string.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sch_generic.o<br />cls_rsvp.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_MARK.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_tcpmss.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sch_gred.o<br />cls_rsvp6.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_MASQUERADE.o&nbsp; &nbsp; &nbsp;ipt_time.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sch_hfsc.o<br />cls_tcindex.o&nbsp; &nbsp; &nbsp; &nbsp; ipt_REJECT.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_tos.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_htb.o<br />cls_u32.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_TCPMSS.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_ttl.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_ingress.o<br />diag.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_TOS.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_unclean.o&nbsp; &nbsp; &nbsp; &nbsp; sch_prio.o<br />estimator.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_TTL.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; iptable_filter.o&nbsp; &nbsp; &nbsp;sch_red.o<br />hci_uart.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_connbytes.o&nbsp; &nbsp; &nbsp; iptable_mangle.o&nbsp; &nbsp; &nbsp;sch_sfq.o<br />hci_usb.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_connmark.o&nbsp; &nbsp; &nbsp; &nbsp;iptable_nat.o&nbsp; &nbsp; &nbsp; &nbsp; sch_tbf.o<br />imq.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_conntrack.o&nbsp; &nbsp; &nbsp; l2cap.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_teql.o<br />ip_conntrack.o&nbsp; &nbsp; &nbsp; &nbsp;ipt_dscp.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;police.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sched.o<br />ip_conntrack_ftp.o&nbsp; &nbsp;ipt_ecn.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ppp_async.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sco.o<br />ip_conntrack_irc.o&nbsp; &nbsp;ipt_helper.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ppp_generic.o&nbsp; &nbsp; &nbsp; &nbsp; slhc.o<br />ip_conntrack_tftp.o&nbsp; ipt_ipp2p.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pppoe.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch-adm.o<br />ip_nat_ftp.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_layer7.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pppox.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; switch-core.o<br />ip_nat_irc.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ipt_length.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rfcomm.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;switch-robo.o<br />ip_tables.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ipt_limit.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_api.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wl.o<br />ipt_CLASSIFY.o&nbsp; &nbsp; &nbsp; &nbsp;ipt_mac.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sch_cbq.o&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wlcompat.o</p><p>root@oxo-t:/lib/modules/2.4.35.4# ls|grep usb<br />hci_usb.o</p><p>root@oxo-t:/lib/modules/2.4.35.4# insmod hci_usb<br />insmod: unresolved symbol usb_match_id</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78151">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">recyclebin</div>
					<div class="post-datetime">
						15 Dec 2008, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Here is what I get from opkg:</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /proc/version
Linux version 2.6.25.17 (nbd@baustelle) (gcc version 4.1.2) #2 Tue Nov 4 01:37:43 UTC 2008

root@OpenWrt:~# opkg update
Downloading http://downloads.openwrt.org/kamikaze/8.09_RC1/brcm47xx/packages/Packages.gz
Connecting to downloads.openwrt.org (195.56.146.238:80)
Packages.gz          100% |*******************************************|   119k 00:00:00 ETA
Inflating http://downloads.openwrt.org/kamikaze/8.09_RC1/brcm47xx/packages/Packages.gz
Updated list of available packages in /var/opkg-lists/snapshots

root@OpenWrt:~# opkg list | grep usb
avrusbboot - 2006-06-25-1 - AVRUSBBoot is a bootloader for the Atmel AVR controllers.
kmod-ide-core - 2.6.25.17-brcm47xx-1 - Kernel support for IDE, useful for usb mass storage devices (e.g. on WL-HDD)
kmod-rt2500-usb - 2.6.25.17+2008-08-06-brcm47xx-1 - Ralink Drivers for RT2x00 cards (RT2500 USB)
kmod-rt2x00-usb - 2.6.25.17+2008-08-06-brcm47xx-1 - Ralink Drivers for RT2x00 cards (USB)
kmod-rt73-usb - 2.6.25.17+2008-08-06-brcm47xx-1 - Ralink Drivers for RT2x00 cards (RT73 USB)
kmod-usb-acm - 2.6.25.17-brcm47xx-1 - Kernel support for USB ACM devices (modems/isdn controllers)
kmod-usb-atm - 2.6.25.17-brcm47xx-1 - Kernel support for USB DSL modems
kmod-usb-atm-cxacru - 2.6.25.17-brcm47xx-1 - Kernel support for cxacru based USB ADSL modems
kmod-usb-atm-speedtouch - 2.6.25.17-brcm47xx-1 - Kernel support for SpeedTouch USB ADSL modems
kmod-usb-atm-ueagle - 2.6.25.17-brcm47xx-1 - Kernel support for Eagle 8051 based USB ADSL modems
kmod-usb-audio - 2.6.25.17-brcm47xx-1 - Kernel support for USB audio devices
kmod-usb-core - 2.6.25.17-brcm47xx-1 - Kernel support for USB
kmod-usb-hid - 2.6.25.17-brcm47xx-1 - Kernel support for USB HID devices such as keyboards and mice
kmod-usb-net - 2.6.25.17-brcm47xx-1 - Kernel modules for USB-to-Ethernet convertors
kmod-usb-net-asix - 2.6.25.17-brcm47xx-1 - Kernel module for USB-to-Ethernet Asix convertors
kmod-usb-net-cdc-ether - 2.6.25.17-brcm47xx-1 - Kernel support for USB CDC Ethernet devices
kmod-usb-net-kaweth - 2.6.25.17-brcm47xx-1 - Kernel module for USB-to-Ethernet Kaweth convertors
kmod-usb-net-pegasus - 2.6.25.17-brcm47xx-1 - Kernel module for USB-to-Ethernet Pegasus convertors
kmod-usb-ohci - 2.6.25.17-brcm47xx-1 - Kernel support for USB OHCI controllers
kmod-usb-printer - 2.6.25.17-brcm47xx-1 - Kernel support for USB printers
kmod-usb-serial - 2.6.25.17-brcm47xx-1 - Kernel support for USB-to-Serial converters
kmod-usb-serial-airprime - 2.6.25.17-brcm47xx-1 - Kernel support for Airprime (EVDO)
kmod-usb-serial-ark3116 - 2.6.25.17-brcm47xx-1 - Kernel support for ArkMicroChips ARK3116 USB-to-Serial converters
kmod-usb-serial-belkin - 2.6.25.17-brcm47xx-1 - Kernel support for Belkin USB-to-Serial converters
kmod-usb-serial-ch341 - 2.6.25.17-brcm47xx-1 - Support for CH341 devices
kmod-usb-serial-cp2101 - 2.6.25.17-brcm47xx-1 - Kernel support for Silicon Labs cp2101 USB-to-Serial converters
kmod-usb-serial-ftdi - 2.6.25.17-brcm47xx-1 - Kernel support for FTDI USB-to-Serial converters
kmod-usb-serial-keyspan - 2.6.25.17-brcm47xx-1 - Kernel support for Keyspan USB-to-Serial devices
kmod-usb-serial-mct - 2.6.25.17-brcm47xx-1 - Kernel support for Magic Control Technology USB-to-Serial converters
kmod-usb-serial-option - 2.6.25.17-brcm47xx-1 - Kernel support for Option HSDPA modems
kmod-usb-serial-oti6858 - 2.6.25.17-brcm47xx-1 - Kernel support for Ours Technology OTI6858 USB-to-Serial converters
kmod-usb-serial-pl2303 - 2.6.25.17-brcm47xx-1 - Kernel support for Prolific PL2303 USB-to-Serial converters
kmod-usb-serial-sierrawireless - 2.6.25.17-brcm47xx-1 - Kernel support for Sierra Wireless devices
kmod-usb-serial-visor - 2.6.25.17-brcm47xx-1 - Kernel support for Handspring Visor PDAs
kmod-usb-storage - 2.6.25.17-brcm47xx-1 - Kernel support for USB Mass Storage devices
kmod-usb-uhci - 2.6.25.17-brcm47xx-1 - Kernel support for USB UHCI controllers
kmod-usb-video - 2.6.25.17-brcm47xx-1 - Kernel support for USB video devices
kmod-usb-yealink - 2.6.25.17-brcm47xx-1 - Kernel support for Yealink VOIP phone
kmod-usb2 - 2.6.25.17-brcm47xx-1 - Kernel support for USB2 (EHCI) controllers
libusb - 0.1.12-1 - A library for accessing Linux USB devices
qc-usb-utils - 0.6.6-1 - Utilities to tweak parameters of your QuickCam Express or similar webcam.
speedtouch-usb-firmware - 3-012 - This package add the firmware for SpeedTouch330 ADSL USB modem.
usbutils - 0.73-1 - USB devices listing utilities</code></pre></div><p>I&#039;ve been able to get USB 2.0 flash working (both an old 64MB key and a 16GB SDHC card through a USB card reader), but haven&#039;t tried any other USB devices.&nbsp; This is on an ASUS WL500gp (V1) with a fresh install of 8.09 RC1 using this file: <a href="http://downloads.openwrt.org/kamikaze/8.09_RC1/brcm47xx/openwrt-brcm47xx-squashfs.trx">http://downloads.openwrt.org/kamikaze/8 … uashfs.trx</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78152">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						15 Dec 2008, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>I am using the same hardware, but 2.4 kernal at the same level as the one you are using<br />I&#039;ll try and upgrade to the same as you are using</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78166">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						15 Dec 2008, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>after update and a crash course in how to get the wireless to work:usb is available</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78195">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						16 Dec 2008, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunatly, the wifi seems to be unstable <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />- on for a while then stops: gotta debug</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78305">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						17 Dec 2008, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>dmesg show the following when wifi goes dead</p><p>b43-phy0 debug: Set beacon interval to 100<br />b43-phy0 debug: Updated beacon template at 0x68<br />b43-phy0 debug: Removing Interface type 1<br />br-lan: port 2(wlan0) entering disabled state<br />b43-phy0 debug: Adding Interface type 1<br />br-lan: port 2(wlan0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 2(wlan0) entering forwarding state<br />b43-phy0 debug: Set beacon interval to 100<br />device wlan0 left promiscuous mode<br />br-lan: port 2(wlan0) entering disabled state<br />device wlan0 entered promiscuous mode<br />br-lan: port 2(wlan0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 2(wlan0) entering forwarding state<br />b43-phy0 debug: Removing Interface type 1<br />br-lan: port 2(wlan0) entering disabled state</p><br /><p>Keeping the system alive with a little cron :<br />root@oxo-t:~# crontab -l<br />0,10,20.30.40.50 * * * * /root/checkit</p><p>root@oxo-t:~# cat checkit <br />ping -c 3 192.168.1.2&gt;/dev/null||reboot</p>											<p class="post-edited">(Last edited by <strong>oxo</strong> on 17 Dec 2008, 20:57)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>