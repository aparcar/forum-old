<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> IPSEC configuration with UCI</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p267718">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kumarvikas0</div>
					<div class="post-datetime">
						5 Mar 2015, 10:34					</div>
				</div>
				<div class="post-content content">
					<p>Anyone </p><p>need configuration help step by step on strongswan with UCI on Openwrt 14.07.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267832">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						6 Mar 2015, 03:51					</div>
				</div>
				<div class="post-content content">
					<p>This doesn&#039;t exist. You can&#039;t configure strongswan through UCI without making your own custom config file (eg /etc/config/ipsec) and making your own init script (eg /etc/init.d/ipsec) to parse the configuration and create the strongswan configuration file (/etc/ipsec.conf)</p><p><a href="http://wiki.openwrt.org/doc/techref/uci">http://wiki.openwrt.org/doc/techref/uci</a><br /><a href="http://wiki.openwrt.org/doc/devel/config-scripting">http://wiki.openwrt.org/doc/devel/config-scripting</a><br /><a href="http://wiki.openwrt.org/doc/techref/initscripts">http://wiki.openwrt.org/doc/techref/initscripts</a></p><br /><p>I have done this twice in the past but don&#039;t have the code any more so you&#039;re going to just have to make it yourself. It&#039;s not that difficult.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 6 Mar 2015, 03:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267859">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rossini</div>
					<div class="post-datetime">
						6 Mar 2015, 10:02					</div>
				</div>
				<div class="post-content content">
					<p>whats about <a href="https://wiki.strongswan.org/projects/1/wiki/OpenWrtUCI">https://wiki.strongswan.org/projects/1/wiki/OpenWrtUCI</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267906">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						6 Mar 2015, 19:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rossini wrote:</cite><blockquote><p>whats about <a href="https://wiki.strongswan.org/projects/1/wiki/OpenWrtUCI">https://wiki.strongswan.org/projects/1/wiki/OpenWrtUCI</a></p></blockquote></div><p>Interesting I was not aware of this plugin. I&#039;ve always just done what I needed manually.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267969">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kumarvikas0</div>
					<div class="post-datetime">
						7 Mar 2015, 07:31					</div>
				</div>
				<div class="post-content content">
					<p>I checked this plugin. but i have no idea how to implement this. can you suggest me configuration with example.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267975">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">birnenschnitzel</div>
					<div class="post-datetime">
						7 Mar 2015, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>I advise to follow the guide at <a href="http://wiki.openwrt.org/doc/howto/vpn.ipsec.basics.">http://wiki.openwrt.org/doc/howto/vpn.ipsec.basics.</a> I&#039;m currently reworking it for 14.07 but it is not 100% complete. Maybe we two can get them up and running.</p><p>Please start with installing the packages and the ipsec starter script. I will push some additional patches to the firewall script this weekend.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268001">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kumarvikas0</div>
					<div class="post-datetime">
						7 Mar 2015, 15:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>root@OpenWrt:/# /etc/init.d/ipsec start<br />no files found matching &#039;/etc/strongswan.conf&#039;<br />Starting strongSwan 5.2.2 IPsec [starter]...<br />kmod: failed to find a module named af_key<br />no netkey IPsec stack detected<br />kmod: Usage:<br />&nbsp; &nbsp; &nbsp; &nbsp; modprobe module<br />no KLIPS IPsec stack detected<br />no known IPsec stack detected, ignoring!</p></blockquote></div><p>getting this error</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268005">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">birnenschnitzel</div>
					<div class="post-datetime">
						7 Mar 2015, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>You should at least install strongswan-default package as described in the wiki. Its dependencies will install the required kernel modules. Afterwards you can start with the /etc/config/ipsec. See sample at <a href="http://wiki.openwrt.org/doc/howto/vpn.ipsec.site2site">http://wiki.openwrt.org/doc/howto/vpn.ipsec.site2site</a> </p><p>Don&#039;t forget that ipsec starter script is only a translater of /etc/config/ipsec to /etc/strongswan.conf. Afterwards it will start strongswan deamon. Always take the full path as calling ipsec only from the command line will launch strongswan directly.</p>											<p class="post-edited">(Last edited by <strong>birnenschnitzel</strong> on 7 Mar 2015, 16:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268074">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kumarvikas0</div>
					<div class="post-datetime">
						8 Mar 2015, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks mate.... Strongswan client with UCI configuration is working with Latest OWRT snapshot trunk.</p><p>Secondly, now i want to integrate this with luci. But i have no idea how to do that.......</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>