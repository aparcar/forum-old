<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Linksys WRT300Nv1.1 - A learning Journey - Help Still Needed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p169204">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">boblfoot</div>
					<div class="post-datetime">
						6 Jun 2012, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>This will be a long post and for that I apologize, but the end result is I am trying to get OpenWRT Attitude Adjustment {kernel 3.3} and/or Backfire {kernel 2.6} to successfully recognize and work with my Linksys WRT300Nv1.1.</p><p>You can find here about the first attempt to install OpenWRT and my final success with the 2.4 kernel version of Backfire.<br /><a href="https://forum.openwrt.org/viewtopic.php?id=33937">https://forum.openwrt.org/viewtopic.php?id=33937</a></p><p>My build environment is a Centos 6 minimal install, upgraded to 6.2 with group &quot;Development tools&quot; and packages ncurses-devel, zlib-devel, wget, mlocate and wget added to complete the environment.</p><p>As std user I entered the OpenWrt folder and ran the following commands:<br />svn co svn://svn.openwrt.org/openwrt/trunk/<br />cd trunk<br />./scripts/feeds update -a<br />./scripts/feeds install -a</p><p>also from the OpenWRT Folder I ran<br />svn co svn://svn.openwrt.org/openwrt/branches/backfire/<br />cd backfire<br />./scripts/feeds update -a<br />./scripts/feeds install -a</p><p>This give me an ~/Openwrt/trunk and a ~/OpenWrt/backfire building environment for testing.</p><p>I ran make defconfig on each environment followed by make menuconfig.</p><p>Build #1 - I chose the brcm47xx with broadcom-tg3 kernel module -- this fails to work when installed</p><p>Build #2 - I chose the brcm47xx with broadcom-ssb kernel module -- this fails to work when installed</p><p>I have now returned to the original factory firmware and am gather hacking information according to the wiki -- <a href="http://wiki.openwrt.org/doc/devel/hw.hacking.first.steps">http://wiki.openwrt.org/doc/devel/hw.ha … irst.steps</a></p><p># cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00040000 00010000 &quot;pmon&quot;<br />mtd1: 00760000 00010000 &quot;linux&quot;<br />mtd2: 006de920 00010000 &quot;rootfs&quot;<br />mtd3: 00050000 00010000 &quot;lang&quot;<br />mtd4: 00010000 00010000 &quot;nvram&quot;</p><p>The minicom serial capture of the factory bootup sequence is as follows:<br />øôStart to blink diag led ...</p><br /><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: Tue Feb 27 19:35:53 CST 2007 (root@localhost.localdomain)<br />Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.</p><p>Initializing Arena<br />Initializing PCI. [normal]<br />PCI bus 0 slot 0/0: vendor 0x14e4 product 0x0800 (flash memory, rev 0x02)<br />PCI bus 0 slot 1/0: vendor 0x14e4 product 0x471f (ethernet network, rev 0x02)<br />PCI bus 0 slot 2/0: vendor 0x14e4 product 0x471a (USB serial bus, interface 0x10, rev 0x02)<br />PCI bus 0 slot 2/1: vendor 0x14e4 product 0x471a (USB serial bus, interface 0x20, rev 0x02)<br />PCI bus 0 slot 3/0: vendor 0x14e4 product 0x471b (USB serial bus, rev 0x02)<br />PCI bus 0 slot 4/0: vendor 0x14e4 product 0x0804 (PCI bridge, rev 0x02)<br />PCI bus 0 slot 5/0: vendor 0x14e4 product 0x0816 (MIPS processor, rev 0x02)<br />PCI bus 0 slot 6/0: vendor 0x14e4 product 0x471d (IDE mass storage, rev 0x02)<br />PCI bus 0 slot 7/0: vendor 0x14e4 product 0x4718 (network/computing crypto, rev 0x02)<br />PCI bus 0 slot 8/0: vendor 0x14e4 product 0x080f (RAM memory, rev 0x02)<br />PCI bus 0 slot 9/0: vendor 0x14e4 product 0x471e (class 0xfe, subclass 0x00, rev 0x02)<br />Initializing Devices.</p><p>No DPN<br />This is a Parallel Flash<br />Partition information:<br />boot&nbsp; &nbsp; #00&nbsp; &nbsp;00000000 -&gt; 0003FFFF&nbsp; (262144)<br />trx&nbsp; &nbsp; &nbsp;#01&nbsp; &nbsp;00040000 -&gt; 0004001B&nbsp; (28)<br />os&nbsp; &nbsp; &nbsp; #02&nbsp; &nbsp;0004001C -&gt; 007F7FFF&nbsp; (8093668)<br />nvram&nbsp; &nbsp;#03&nbsp; &nbsp;007F8000 -&gt; 007FFFFF&nbsp; (32768)<br />Partition information:<br />boot&nbsp; &nbsp; #00&nbsp; &nbsp;00000000 -&gt; 0003FFFF&nbsp; (262144)<br />trx&nbsp; &nbsp; &nbsp;#01&nbsp; &nbsp;00040000 -&gt; 007F7FFF&nbsp; (8093696)<br />nvram&nbsp; &nbsp;#02&nbsp; &nbsp;007F8000 -&gt; 007FFFFF&nbsp; (32768)<br />Reset switch via GPIO 8 ...<br />PCI bus 0 slot 1/0: pci_map_mem: attempt to map 64-bit region tag=0x800 @ addr=18010004<br />PCI bus 0 slot 1/0: pci_map_mem: addr=0x18010004 pa=0x18010000<br />ge0: BCM5750 Ethernet at 0x18010000<br />CPU type 0x2901A: 300MHz<br />Total memory: 32768 KBytes</p><p>Total memory used by CFE:&nbsp; 0x80600000 - 0x806A1900 (661760)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80636C40 - 0x80639BE0 (12192)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80639BE0 - 0x8063B900 (7456)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x8063B900 - 0x8069F900 (409600)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x8069F900 - 0x806A1900 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x80600000 - 0x80636C40 (224320)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x006A2000 - 0x006E2000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:00000000 - D:00000000</p><p>Boot version: v4.4<br />The boot is CFE<br />mac_init(): Find mac [00:1d:7e:1c:38:9a] in location 0<br />Nothing...<br />CMD: [ifconfig eth0 -addr=192.168.1.1 -mask=255.255.255.0]<br />eth0: Link speed: 100BaseT FDX<br />Device eth0:&nbsp; hwaddr 00-1D-7E-1C-38-9A, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />CMD: [go;]<br />Check CRC of image1<br />&nbsp; Len:&nbsp; &nbsp; &nbsp;0x388000&nbsp; &nbsp; &nbsp;(3702784)&nbsp; &nbsp; &nbsp; &nbsp;(0xBC040000)<br />&nbsp; Offset0: 0x1C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(28)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (0xBC04001C)<br />&nbsp; Offset1: 0x8A4&nbsp; &nbsp; &nbsp; &nbsp; (2212)&nbsp; (0xBC0408A4)<br />&nbsp; Offset2: 0x816E0&nbsp; &nbsp; &nbsp; (530144)&nbsp; &nbsp; &nbsp; &nbsp; (0xBC0C16E0)<br />&nbsp; Header CRC:&nbsp; &nbsp; 0x50C99081<br />&nbsp; Calculate CRC: 0x50C99081<br />Image 1 is OK<br />Try to load image 1.<br />CMD: [boot -raw -z -addr=0x80001000 -max=0xf70000 flash0.os:]<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3560 bytes read<br />Entry at 0x80001000<br />Closing network.<br />eth0: cannot clear 1400/00000002<br />Starting program at 0x80001000<br />CPU revision is: 0002901a<br />Primary instruction cache 32kb, linesize 16 bytes (4 ways)<br />Primary data cache 32kb, linesize 16 bytes (2 ways)<br />Linux version 2.4.20 (root@localhost.localdomain) (gcc version 3.2.3 with Broadcom modifications) #2 Tue Feb 27 12:13:54 CST 2007<br />Setting the PFC to its default value<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />On node 0 totalpages: 8192<br />zone(0): 8192 pages.<br />zone(1): 0 pages.<br />zone(2): 0 pages.<br />Kernel command line: root=/dev/mtdblock2 noinitrd console=ttyS0,115200<br />CPU: BCM4785 rev 2 at 300 MHz<br />Calibrating delay loop... 299.82 BogoMIPS<br />Memory: 30564k/32768k available (1431k kernel code, 2204k reserved, 108k data, 68k init, 0k highmem)<br />Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)<br />Inode cache hash table entries: 2048 (order: 2, 16384 bytes)<br />Mount-cache hash table entries: 512 (order: 0, 4096 bytes)<br />Buffer-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Page-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />POSIX conformance testing by UNIFIX<br />PCI: Initializing host<br />PCI: Enabling CardBus<br />PCI: Fixing up bus 0<br />PCI: Fixing up bridge<br />PCI: Fixing up bus 1<br />Linux NET4.0 for Linux 2.4<br />Based upon Swansea University Computer Society NET3.039<br />Initializing RT netlink socket<br />Starting kswapd<br />devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />pty: 256 Unix98 ptys configured<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 8) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 0) is a 16550A<br />HDLC line discipline: version $Revision: 1.1.1.4 $, maxframe=4096<br />N_HDLC line discipline registered.<br />Register DIAG LED in /proc/sys/diag_blink.<br />The DIAG LED GPIO is 1.<br />PPP generic driver version 2.4.2<br /> Amd/Fujitsu Extended Query Table v0.0 at 0x0040<br />cfi_cmdset_0002(): cfi-&gt;mfr=ec, cfi-&gt;id=e2<br />cfi_cmdset_0002(): bootloc=2<br />cfi_cmdset_0002(): Region=0 BlockSize 0x2000 bytes, 8 blocks<br />cfi_cmdset_0002(): Region=1 BlockSize 0x10000 bytes, 127 blocks<br />number of CFI chips: 1<br />Flash device: 0x800000 at 0x1c000000<br />Physically mapped flash: squashfs filesystem found at block 773<br />(Not Found Lang Block)off=0xc16e0 off1=0x7a0000 size=0x800000<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;pmon&quot;<br />0x00040000-0x007a0000 : &quot;linux&quot;<br />0x000c16e0-0x007a0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x007a0000-0x007f0000 : &quot;lang&quot;<br />0x007f0000-0x00800000 : &quot;nvram&quot;<br />sflash: found no supported devices<br />NET4: Linux TCP/IP 1.0 for NET4.0<br />IP Protocols: ICMP, UDP, TCP, IGMP<br />IP: routing cache hash table of 512 buckets, 4Kbytes<br />TCP: Hash tables configured (established 2048 bind 4096)<br />Linux IP multicast router 0.06 plus PIM-SM<br />ip_conntrack version 2.1 (256 buckets, 2048 max) - 368 bytes per conntrack<br />Register conntrack protocol helper for ESP...<br />init IP_nat_proto_esp register.<br />ip_conntrack_pptp version 1.9 loaded<br />ip_conntrack_rtsp v0.01 loading<br />ip_nat_pptp version 1.5 loaded<br />ip_nat_rtsp v0.01 loading<br />ip_tables: (C) 2000-2002 Netfilter core team<br />ipt_time loading<br />NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.<br />NET4: Ethernet Bridge 008 for NET4.0<br />802.1Q VLAN Support v1.7 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 68k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />find &quot;lang&quot; in MTD 3 (/dev/mtdblSQUASHFS error: Can&#039;t find a SQUASHFS superblock on mtdblock(31,3)<br />ock/3)<br />ret = -1<br />www -&gt; /www<br />mount: Invalid argument<br />Language Package: EN<br />modules[0]=bcm57xx buf=[bcm57xx ]<br />modules[1]=ctmisc buf=[bcm57xx ctmisc ]<br />modules[2]=wl buf=[bcm57xx ctmisc wl ]<br />Needed modules: bcm57xx ctmisc wl<br />cmd=[insmod bcm57xx ]<br />Using /lib/modules/2.4.20/kernel/drivers/net/bcm57xx/bcm57xx.o<br />cmd=[insmod ctmisc ]<br />Using /lib/modules/2.4.20/kernel/drivers/net/ctmisc/ctmisc.o<br />cmd=[insmod wl ]<br />Using /lib/modules/2.4.20/kernel/drivers/net/wl/wl.o<br />Hit enter to continue...The chipset is BCM4705L + BCM5325E<br />cmd=[misc -t get_mac -w 3 ]<br />type = [get_mac]<br />get_data(): cmd=0x11 count=8 len=18<br />get_data(): Get MAC count is [1]<br />get_data(): MAC 0: [00:1d:7e:1c:38:9a]<br />get_data(): done<br />cmd=[misc -t get_sn -w 3 ]<br />type = [get_sn]<br />get_data(): cmd=0x15 count=8 len=20<br />get_data(): Get SN count is [1]<br />get_data(): SN 0: [CNP11G905418ÿÿÿÿÿÿÿÿ]<br />get_data(): done<br />cmd=[misc -t get_flash_type -w 1 ]<br />type = [get_flash_type]<br />get_flash_type(): cmd=0x17 count=0 len=0<br />Get FLASH TYPE is [Samsung K8D6316UBM 4Mx16 BotB]<br />cmd=[misc -t get_pa0 -w 3 ]<br />type = [get_pa0]<br />get_data(): cmd=0x20 count=100 len=4<br />get_data(): Get PA0 count is [1]<br />get_data(): PA0 0: [83ÿÿ]<br />get_data(): done<br />cmd=[misc -t get_pa1 -w 3 ]<br />type = [get_pa1]<br />get_data(): cmd=0x21 count=100 len=4<br />get_data(): Get PA1 count is [1]<br />get_data(): PA1 0: [74ÿÿ]<br />get_data(): done<br />cmd=[misc -t get_pa0_old -w 3 ]<br />type = [get_pa0_old]<br />get_data(): cmd=0x24 count=8 len=4<br />get_data(): Get PA0 count is [0]<br />get_data(): done<br />cmd=[misc -t get_pa1_old -w 3 ]<br />type = [get_pa1_old]<br />get_data(): cmd=0x25 count=8 len=4<br />get_data(): Get PA1 count is [0]<br />get_data(): done<br />The boot is CFE<br />cmd=[killall httpd ]<br />killall: httpd: no process killed<br />cmd=[resetbutton ]<br />cmd=[vconfig set_name_type VLAN_PLUS_VID_NO_PAD ]<br />cmd=[vconfig add eth0 0 ]<br />cmd=[vconfig set_ingress_map vlan0 0 0 ]<br />cmd=[vconfig set_ingress_map vlan0 1 1 ]<br />cmd=[vconfig set_ingress_map vlan0 2 2 ]<br />cmd=[vconfig set_ingress_map vlan0 3 3 ]<br />cmd=[vconfig set_ingress_map vlan0 4 4 ]<br />cmd=[vconfig set_ingress_map vlan0 5 5 ]<br />cmd=[vconfig set_ingress_map vlan0 6 6 ]<br />cmd=[vconfig set_ingress_map vlan0 7 7 ]<br />cmd=[vconfig add eth0 1 ]<br />cmd=[vconfig set_ingress_map vlan1 0 0 ]<br />cmd=[vconfig set_ingress_map vlan1 1 1 ]<br />cmd=[vconfig set_ingress_map vlan1 2 2 ]<br />cmd=[vconfig set_ingress_map vlan1 3 3 ]<br />cmd=[vconfig set_ingress_map vlan1 4 4 ]<br />cmd=[vconfig set_ingress_map vlan1 5 5 ]<br />cmd=[vconfig set_ingress_map vlan1 6 6 ]<br />cmd=[vconfig set_ingress_map vlan1 7 7 ]<br />cmd=[insmod wl ]<br />Using /lib/modules/2.4.20/kernel/drivers/net/wl/wl.o<br />insmod: A module named wl already exists<br />cmd=[brctl addbr br0 ]<br />cmd=[brctl setfd br0 0 ]<br />cmd=[brctl stp br0 dis ]<br />name=[vlan0] lan_ifname=[br0]<br />=====&gt; set br0 hwaddr to vlan0<br />cmd=[wlconf vlan0 up ]<br />vlan0: Operation not supported<br />cmd=[brctl addif br0 vlan0 ]<br />name=[eth1] lan_ifname=[br0]<br />Write wireless mac successfully<br />br0: No such file or directory<br />cmd=[wlconf eth1 up ]<br />eth1: Numerical result out of range<br />eth1: Operation not supported<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Operation not supported<br />eth1: Operation not supported<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />eth1: Invalid argument<br />cmd=[brctl addif br0 eth1 ]<br />name=[eth2] lan_ifname=[br0]<br />eth2: No such device<br />name=[eth3] lan_ifname=[br0]<br />eth3: No such device<br />wl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 634208&nbsp; &nbsp;0 (unused)<br />cmd=[wl gpiotimerval 0x640000 ]<br />cmd=[wl vlan_mode 0 ]<br />lo: File exists<br />cmd=[tftpd -s /tmp -c -l -P EWC2 ]<br />cmd=[cron ]<br />[HTTPD Starting on /www]<br />The boot is CFE<br />tftp server started<br />tftpd: standalone socket<br />cmd=[httpd ]<br />br0 192.168.1.100&nbsp; 86400<br />cmd=[udhcpd /tmp/udhcpd.conf ]<br />info, udhcp server (v0.9.8) started<br />zebra disabled.<br />cmd=[nas /tmp/nas.lan.conf /tmp/nas.lan.pid lan ]<br />cmd=[upnp -D -L br0 -W&nbsp; -S 0 -I 60 -A 180 ]<br />calling upnp_main<br />No interface specified. Quitting...<br />LLTD: wireless interface argument is eth1.<br />tallest:=====( wan_or_lan=wan )=====<br />tallest:=====( wan_or_lan=wan is wan !!)=====<br />cmd=[udhcpc -i vlan1 -l br0 -p /var/run/wan_udhcpc.pid -s /tmp/udhcpc ]<br />info, udhcp client (v0.9.8) started<br />Hit enter to continue...cmd=[nas /tmp/nas.wan.conf /tmp/nas.wan.pid wan ]<br />No interface specified. Quitting...<br />Hit enter to continue...</p><p>BusyBox v0.60.0 (2007.02.27-03:13+0000) Built-in shell (msh)<br />Enter &#039;help&#039; for a list of built-in commands.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>