<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Network Printer on 2 Zones and Subnets</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p159277">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Illidan Pornrage</div>
					<div class="post-datetime">
						2 Mar 2012, 09:11					</div>
				</div>
				<div class="post-content content">
					<p>I have set up 2 VLANs with each another subnet and Firewall Zone. Both to do not connect between each other but on their own to the same ISP.<br />TL-WR1043ND with OpenWRT Trunk r30728</p><p>But now I have Printer with just one network interface (Canon MX885) which:<br /> - Printers main protocol: xijnet<br /> - broadcasts its existance to its subnet via Microsoft WDS (with LLTD) and Apple Bonjour.<br /> - Runs a LPR Service without announcements.<br /> - Has a webinterface with little to no more options than on the device display.<br /> - Shares memory cards plugged into it over SMB.</p><p>Can you advise me how to make the printer work on both subnets?<br />So it can be connected to and it connects to computers in the other Subnet.<br />So it sends all its broadcasts to both subnets.</p><p>My attempts:<br />(Trying to connect from a Windows 7 box)<br />With DNAT I was able to connect in one direction, but after setup the Printer was not answering.<br />(every Device in Zone WLAN may be forwarded to Zone LAN on Printers IP only and the Printer may be forwarded to any device in Zone WLAN)<br />With SNAT it did not work either but it was the first time I used SNAT and I am not sure I have done it right.<br />(Printers IP and MAC from Zone LAN gets rewritten to an IP in the other subnet (this IP has no interface of the router).&nbsp; The made up address gets rewritten to a free IP on zone LAN. ) &lt;- I know now this cant work because I would communicate with two different adresses for the same cause. But cant imagine it working with the madeup IP be rewritten to the Printers real IP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159323">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Mar 2012, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>What i would do is place the printer in its own network and zone and configure firewall rules so it can be accessed. Then use avahi and samba to advertise your printer on the other subnets.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159336">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Illidan Pornrage</div>
					<div class="post-datetime">
						2 Mar 2012, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>What should I say? It just worked on a try with its own network and zone. No broadcast yet. How can I broadcast from a 192.168.1.x device to all 192.168.*.* (255.255.255.0) devices?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159367">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						2 Mar 2012, 20:30					</div>
				</div>
				<div class="post-content content">
					<p>Again, i would use avahi and samba to advertise your printer on the other subnets. It&#039;s generally a bad idea to relay broadcast to other subnets.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p159378">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Illidan Pornrage</div>
					<div class="post-datetime">
						2 Mar 2012, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Avahi seems interesting but for now I will stick with DNS Name Printer.lan, which is simple to tell people.<br />Also there seem to be autoconfig files hosted on the printers webserver (but I cant list its folders -.-). The one I know did work for setting up WDS connections, so the windows machines have it easy.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>