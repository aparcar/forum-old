<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR941ND v5.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=44319&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=44319&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p202402">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">madmax</div>
					<div class="post-datetime">
						21 May 2013, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />today I tryed to install backfire/trunk/snapshot on a new device WR941ND v5.0,<br />but when I tryed to flash obtain always the same error :</p><p>Error code: 18005<br />Upgrade unsuccessfully because the version of the upgraded file was incorrect. Please check the file name.</p><p>I also tryed to rename the file like the original tp-link but no luck.<br />Tryed also DD-WRT with the same error.</p><p>On firmware page :</p><p>Firmware Version: &nbsp; &nbsp; 3.13.31 Build 130105 Rel.66489n<br />Hardware Version: &nbsp; &nbsp; WR941ND v5 00000000</p><p>Any Ideas ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202446">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						21 May 2013, 22:37					</div>
				</div>
				<div class="post-content content">
					<p>obviously the fw you tried are not for v5!</p><p>can you open it to attach serial console and/or post pictures with all the markings on the chips well readable?</p><p>i am not a dev but i hope these infos could be useful to support your version..</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 21 May 2013, 22:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202492">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">madmax</div>
					<div class="post-datetime">
						22 May 2013, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>obviously the fw you tried are not for v5!</p><p>can you open it to attach serial console and/or post pictures with all the markings on the chips well readable?</p><p>i am not a dev but i hope these infos could be useful to support your version..</p></blockquote></div><p>Man,</p><p>on&nbsp; hardware support talking about 5.1 support&nbsp; : <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr941nd">http://wiki.openwrt.org/toh/tp-link/tl-wr941nd</a></p><p>v5.1 &nbsp; &nbsp; - &nbsp; &nbsp; Backfire 10.03.1 &nbsp; &nbsp; Similar to v4</p><p>But now 5.0 is newer!!! Also ddwrt support v.5.x but this is a new device with a prior version. </p><p>However installing serail port :<br />----------------------------------------------------------------------------------------------------------------------<br />Restarting kernel ...</p><p>Bonting Atheros @R924x<br />Linux version 2.6.31--LSDK-9.2.0_U10.5_dsa.7 (root@localhost.localdomain) (gcc v<br />ersion 4.3.3 (GCC) ) #29 Sat Jan 5 18:21:11 CST 2013<br />flash_size passed from bootloader = 4<br />Ram size passed from bootloader =33554432<br />CPU revision is: 0001974c (MIPS 74Kc)<br />ath_sys_frequency: cpu srif ddr srif cpu 535 ddr 400 ahb 200<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS0,115200 root=31:2 rootfstype=squashfs init=/sb<br />in/init mtdparts=ath-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),6<br />4k(art) mem=32M<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 30060k/32768k available (1775k kernel code, 2708k reserved, 441k data, 1<br />16k init, 0k highmem)<br />NR_IRQS:128<br />plat_time_init: plat time init done<br />Calibrating delay loop... 267.26 BogoMIPS (lpj=534528)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />bio: create slab &lt;bio-0&gt; at 0<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />ATH GPIOC major 0<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />msgmni has been set to 58<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A<br />console [ttyS0] enabled<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />5 cmdlinepart partitions found on MTD device ath-nor0<br />Creating 5 MTD partitions on &quot;ath-nor0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000120000 : &quot;kernel&quot;<br />0x000000120000-0x0000003e0000 : &quot;rootfs&quot;<br />0x0000003e0000-0x0000003f0000 : &quot;config&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />-&gt;Oops: flash id 0x1c3016 .<br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />Port Status 1c000004<br />ath-ehci ath-ehci.0: ATH EHCI<br />ath-ehci ath-ehci.0: new USB bus registered, assigned bus number 1<br />ehci_reset Intialize USB CONTROLLER in host mode: 13<br />ehci_reset Port Status 1c000000<br />ath-ehci ath-ehci.0: irq 3, io mem 0x1b000000<br />ehci_reset Intialize USB CONTROLLER in host mode: 13<br />ehci_reset Port Status 1c000000<br />ath-ehci ath-ehci.0: USB 2.0 started, EHCI 1.00<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />Ooops, why the devices couldn&#039;t been initialed?<br />TCP cubic registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />athwdt_init: Registering WDT success<br />ath_otp_init: Registering OTP success<br />ath_clksw_init: Registering Clock Switch Interface success<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 116k freed<br />usb 1-1: new full speed USB device using ath-ehci and address 2<br />usb 1-1: device descriptor read/64, error -71<br />usb 1-1: device descriptor read/64, error -71<br />init started:&nbsp; BusyBox v1.01 (2012.11.28-02:55+0000) multi-call binary<br />usb 1-1: new full speed USB device using ath-ehci and address 3<br />This Board use 2.6.31<br />usb 1-1: device descriptor read/64, error -71<br />xt_time: kernel timezone is -0000<br />usb 1-1: device descriptor read/64, error -71<br />nf_conntrack version 0.5.0 (512 buckets, 5120 max)<br />usb 1-1: new full speed USB device using ath-ehci and address 4<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/iptable_raw.ko&#039;: No such<br />file or directory<br />usb 1-1: device not accepting address 4, error -71<br />usb 1-1: new full speed USB device using ath-ehci and address 5<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/flashid.ko&#039;: No such file<br /> or directory<br />PPPoL2TP kernel driver, V1.0<br />PPTP driver version 0.8.3<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/harmony.ko&#039;: No such file<br /> or directory<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/af_key.ko&#039;: No such file<br />or directory<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/xfrm_user.ko&#039;: No such fi<br />le or directory<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/xt_mark.ko&#039;: No such file<br /> or directory<br />usb 1-1: device not accepting address 5, error -71<br />hub 1-0:1.0: unable to enumerate USB device on port 1</p><p>Now flash open!<br />Now flash open!<br /> (none) mips #29 Sat Jan 5 18:21:11 CST 2013 (none)<br />(none) login: ATHR_GMAC: Length per segment 1536<br />ATHR_GMAC: fifo cfg 3 01f00140<br />ATHR_GMAC: RX TASKLET - Pkts per Intr:32<br />mac:1 Registering S27....<br />ATHR_GMAC: Max segments per packet :&nbsp; &nbsp;1<br />ATHR_GMAC: Max tx descriptor count :&nbsp; &nbsp;40<br />ATHR_GMAC: Max rx descriptor count :&nbsp; &nbsp;128<br />ATHR_GMAC: Mac capability flags&nbsp; &nbsp; :&nbsp; &nbsp;2D82<br />ATHR_GMAC: RX TASKLET - Pkts per Intr:32<br />mac:0 Registering S27....<br />ATHR_GMAC: Max segments per packet :&nbsp; &nbsp;1<br />ATHR_GMAC: Max tx descriptor count :&nbsp; &nbsp;40<br />ATHR_GMAC: Max rx descriptor count :&nbsp; &nbsp;128<br />ATHR_GMAC: Mac capability flags&nbsp; &nbsp; :&nbsp; &nbsp;2582<br />athr_gmac_ring_alloc Allocated 640 at 0x81e80c00<br />athr_gmac_ring_alloc Allocated 2048 at 0x81ccc000<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames<br />Setting PHY...<br />athr_gmac_ring_alloc Allocated 640 at 0x81e80800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81e99800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames<br />ATHRS27: resetting s27<br />ATHRS27: s27 reset done<br />++++ athrs27_igmp_setup once<br />port0 vid is 0xb000b<br />port1 vid is 0x30003<br />port2 vid is 0x50005<br />port3 vid is 0x70007<br />port4 vid is 0x90009<br />++ PVID: 0x0000000b, bitmap: 0x0000001f<br />++ PVID: 0x00000003, bitmap: 0x0000001f<br />++ PVID: 0x00000005, bitmap: 0x0000001f<br />++ PVID: 0x00000007, bitmap: 0x0000001f<br />++ PVID: 0x00000009, bitmap: 0x0000001f<br />vtable vid: 0x00000002, bitmap 0x00000003<br />vtable vid: 0x00000004, bitmap 0x00000005<br />vtable vid: 0x00000006, bitmap 0x00000007<br />vtable vid: 0x00000008, bitmap 0x00000009<br />vtable vid: 0x0000000a, bitmap 0x0000000b<br />vtable vid: 0x0000000c, bitmap 0x0000000d<br />vtable vid: 0x0000000e, bitmap 0x0000000f<br />vtable vid: 0x00000010, bitmap 0x00000011<br />vtable vid: 0x00000012, bitmap 0x00000013<br />vtable vid: 0x00000014, bitmap 0x00000015<br />vtable vid: 0x00000016, bitmap 0x00000017<br />vtable vid: 0x00000018, bitmap 0x00000019<br />vtable vid: 0x0000001a, bitmap 0x0000001b<br />vtable vid: 0x0000001c, bitmap 0x0000001d<br />vtable vid: 0x0000001e, bitmap 0x0000001f<br />vtable vid: 0x00000020, bitmap 0x00000021<br />Setting PHY...<br />device eth0 entered promiscuous mode<br />athr_gmac_ring_free Freeing at 0x81e80c00<br />athr_gmac_ring_free Freeing at 0x81ccc000<br />athr_gmac_ring_alloc Allocated 640 at 0x81e80c00<br />athr_gmac_ring_alloc Allocated 2048 at 0x81ea0800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames<br />Setting PHY...<br />Now flash open!<br />athr_gmac_ring_free Freeing at 0x81e80800<br />athr_gmac_ring_free Freeing at 0x81e99800<br />athr_gmac_ring_alloc Allocated 640 at 0x81e80800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81e99000<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames<br />Setting PHY...<br />====&gt;&gt;&gt;&gt;DHCP start.dhcpc.c,dhcpcStart,772<br />====&gt;&gt;&gt;&gt;DHCP end.dhcpc.c,dhcpcStart,836<br />nf_conntrack_rtsp v0.6.21 loading<br />nf_nat_rtsp v0.6.21 loading<br />asf: module license &#039;Proprietary&#039; taints kernel.<br />Disabling lock debugging due to kernel taint<br />ath_hal: 0.9.17.1 (AR5416, AR9380, REGOPS_FUNC, WRITE_EEPROM, 11D)<br />ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Right<br />s Reserved<br />ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserve<br />d<br />ath_ahb: 9.2.0_U10.5_dsa.7 (Atheros/multi-bss)<br />__ath_attach: Set global_scn[0]<br />ACBKMinfree = 48<br />ACBEMinfree = 32<br />ACVIMinfree = 16<br />ACVOMinfree = 0<br />CABMinfree = 48<br />UAPSDMinfree = 0<br />Wasp Enterprise mode: 0x00000000<br />Restoring Cal data from Flash<br />ath_get_caps[5134] rx chainmask mismatch actual 3 sc_chainmak 0<br />ath_get_caps[5109] tx chainmask mismatch actual 3 sc_chainmak 0<br />wifi0: Atheros 9340: mem=0xb8100000, irq=2<br />====&gt;&gt;&gt;&gt;SystemMode : Normal Router<br />wlan_vap_create : enter. devhandle=0x81fa82c0, opmode=IEEE80211_M_HOSTAP, flags=<br />0x1<br />wlan_vap_create : exit. devhandle=0x81fa82c0, opmode=IEEE80211_M_HOSTAP, flags=0<br />x1.<br />VAP device ath0 created<br />====&gt;&gt;&gt;&gt;wlan: rand channel 5</p><br /><p> DES SSID SET=TP-LINK_5D8DFA<br /> ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1<br /> Free buffer count 256</p><p>sc_txq[0] :<br />sc_txq[0] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[1] :<br />sc_txq[1] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[2] :<br />sc_txq[2] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[3] :<br />sc_txq[3] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[6] :<br />sc_txq[6] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[7] :<br />sc_txq[7] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[8] :<br />sc_txq[8] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><br /><p> ***********************************<br />athr_gmac_ring_free Freeing at 0x81e80800<br />athr_gmac_ring_free Freeing at 0x81e99000<br />br0: port 1(eth0) entering disabled state<br />athr_gmac_ring_alloc Allocated 640 at 0x81e80800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81efb800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames<br />Setting PHY...<br /> Free buffer count 256</p><p>sc_txq[0] :<br />sc_txq[0] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[1] :<br />sc_txq[1] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[2] :<br />sc_txq[2] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[3] :<br />sc_txq[3] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[6] :<br />sc_txq[6] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[7] :<br />sc_txq[7] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[8] :<br />sc_txq[8] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><br /><p> ***********************************<br />device ath0 entered promiscuous mode<br />br0: port 2(ath0) entering forwarding state<br /> ieee80211_ioctl_siwmode: imr.ifm_active=918144, new mode=3, valid=1<br />br0: port 2(ath0) entering disabled state</p><p> DES SSID SET=TP-LINK_5D8DFA<br /> Free buffer count 256</p><p>sc_txq[0] :<br />sc_txq[0] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[1] :<br />sc_txq[1] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[2] :<br />sc_txq[2] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[3] :<br />sc_txq[3] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[6] :<br />sc_txq[6] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[7] :<br />sc_txq[7] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><p>sc_txq[8] :<br />sc_txq[8] : depth&nbsp; is 0<br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0</p><br /><p> ***********************************<br />br0: port 2(ath0) entering forwarding state<br />====&gt;&gt;&gt;&gt;cmdCtrl open success<br />====&gt;&gt;&gt;&gt;eventCtrl open success<br />====&gt;&gt;&gt;&gt;eventCtrl attach success<br />ATHR_GMAC: GE0 RX DMA ENABLE<br />ath_paprd_cal PAPRD excessive failure disabling PAPRD now</p><p>TL-WR941ND mips #29 Sat Jan 5 18:21:11 CST 2013 (none)<br />TL-WR941ND login:<br />---------------------------------------------------------------------------------------------------------</p><p><span class="postimg"><img src="http://imageshack.us/a/img826/1586/img00000023.jpg" alt="PunBB bbcode test" /></span></p><p><span class="postimg"><img src="http://imageshack.us/a/img442/5995/img00000021h.jpg" alt="PunBB bbcode test" /></span></p><p><span class="postimg"><img src="http://imageshack.us/a/img811/6330/img00000020w.jpg" alt="PunBB bbcode test" /></span></p>											<p class="post-edited">(Last edited by <strong>madmax</strong> on 22 May 2013, 12:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202516">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jaceq</div>
					<div class="post-datetime">
						22 May 2013, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>Your CPU is AR9341 according to pictures, none of other revisions of this router has that CPU (according to wiki).<br />You need to investigate your device, how much flash and memory does it have?<br />What is flash layout?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202517">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">madmax</div>
					<div class="post-datetime">
						22 May 2013, 19:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jaceq wrote:</cite><blockquote><p>Your CPU is AR9341 according to pictures, none of other revisions of this router has that CPU (according to wiki).<br />You need to investigate your device, how much flash and memory does it have?<br />What is flash layout?</p></blockquote></div><p>Are you stoned ? Read the log <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>madmax</strong> on 22 May 2013, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202520">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 May 2013, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s similar to wr841nd v8</p><p>you can try to flash that image from uboot console..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202521">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						22 May 2013, 20:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>madmax wrote:</cite><blockquote><div class="quotebox"><cite>jaceq wrote:</cite><blockquote><p>Your CPU is AR9341 according to pictures, none of other revisions of this router has that CPU (according to wiki).<br />You need to investigate your device, how much flash and memory does it have?<br />What is flash layout?</p></blockquote></div><p>Are you stoned ? Read the log <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>lolz. The chip is AR9341. I guess I must be stoned too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202522">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 May 2013, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>i think madmax was referring to the other 2 questions about ram and flash size..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202526">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">madmax</div>
					<div class="post-datetime">
						22 May 2013, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>i think madmax was referring to the other 2 questions about ram and flash size..</p></blockquote></div><br /><p>Italian Style <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I notice also that wr841 v8 is similar, I&#039;ll try to flash tomorrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202527">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 May 2013, 22:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>madmax wrote:</cite><blockquote><p>Italian Style <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>what do you mean??? XD</p><p>anyway you should have a mail <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202537">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">madmax</div>
					<div class="post-datetime">
						23 May 2013, 00:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><div class="quotebox"><cite>madmax wrote:</cite><blockquote><p>Italian Style <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>anyway you should have a mail <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>I removed the old mail account, resend please</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203232">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">cmsandrigo</div>
					<div class="post-datetime">
						30 May 2013, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I have the same device and I get the same error (18005...) when I try to install OpenWrt. Are there some news about this issue?</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206667">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						8 Jul 2013, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207132">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">kral_ales</div>
					<div class="post-datetime">
						14 Jul 2013, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>i flashed succesfully my TL-WR941ND v5.0 with &quot;thotypous&quot; modified firmware and it works. :-)<br />But my problem is that there is any free space to install any packages.<br />Any ideas why?<br />Thanks in advance</p><p>Ales</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207134">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						14 Jul 2013, 21:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kral_ales wrote:</cite><blockquote><p>But my problem is that there is any free space to install any packages.</p></blockquote></div><p>Hmm, that is strange, I am pretty sure those devices have the same amount of flash memory. Here is mine after installing some packages (ddns-scripts, qos-scripts, etc.):</p><div class="codebox"><pre><code>root@OpenWrt:~# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                    1.1M    848.0K    240.0K  78% /
/dev/root                 2.0M      2.0M         0 100% /rom
tmpfs                    14.3M    768.0K     13.5M   5% /tmp
tmpfs                   512.0K         0    512.0K   0% /dev
/dev/mtdblock3            1.1M    848.0K    240.0K  78% /overlay
overlayfs:/overlay        1.1M    848.0K    240.0K  78% /
root@OpenWrt:~# cat /proc/partitions 
major minor  #blocks  name

  31        0        128 mtdblock0
  31        1        935 mtdblock1
  31        2       2968 mtdblock2
  31        3       1088 mtdblock3
  31        4         64 mtdblock4
  31        5       3904 mtdblock5</code></pre></div><p>Can you run the same commands in your device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207182">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">kral_ales</div>
					<div class="post-datetime">
						15 Jul 2013, 14:22					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your response. :-)<br />When I run command cat /proc/partitions I have the same numbers as you. <br />root@OpenWrt:~# cat /proc/partitions<br />major minor&nbsp; #blocks&nbsp; name</p><p>&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 128 mtdblock0<br />&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; 935 mtdblock1<br />&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp;2968 mtdblock2<br />&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp;1088 mtdblock3<br />&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;64 mtdblock4<br />&nbsp; 31&nbsp; &nbsp; &nbsp; &nbsp; 5&nbsp; &nbsp; &nbsp; &nbsp;3904 mtdblock5</p><p>and after clean flash of firmware my device show in LuCI on page&nbsp; System/Software - Free space: 81% (876.00 KB)<br />but after trying install any package (i.e. openvpn) it show this:</p><p>&quot;<br />Installing openvpn (2.2.2-2) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/openvpn_2.2.2-2_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing kmod-tun (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/kmod-tun_3.3.8-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing libopenssl (1.0.1e-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libopenssl_1.0.1e-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing zlib (1.2.7-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/zlib_1.2.7-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing liblzo (2.06-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/liblzo_2.06-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Configuring kmod-tun.<br />Configuring liblzo.<br />Configuring zlib.<br />Configuring libopenssl.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Collected errors:<br /> * extract_archive: Cannot make dir /etc/openvpn/: No space left on device.<br /> * wfopen: /etc/config/openvpn: No space left on device.<br /> * wfopen: /etc/init.d/openvpn: No space left on device.<br /> * wfopen: /lib/upgrade/keep.d/openvpn: No space left on device.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/openvpn.list: No space left on device.<br /> * opkg_install_pkg: Failed to extract data files for openvpn. Package debris may remain!<br /> * opkg_install_cmd: Cannot install package openvpn.<br /> * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/kmod-tun.list: No space left on device.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/liblzo.list: No space left on device.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/zlib.list: No space left on device.<br /> * pkg_write_filelist: Failed to open //usr/lib/opkg/info/libopenssl.list: No space left on device.<br />&quot;<br />and then show in LuCI on page&nbsp; System/Software - Free space: 1% (8.00 KB)</p><br /><p>Thank for your help. :-)</p><p>Ales</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207187">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						15 Jul 2013, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi kral_ales,</p><p>I think the reason is just that this device does not have enough space for installing OpenVPN. The OpenVPN package and all of its dependencies have around 2MB when unpacked, but the TL-WR941ND, like most TP-Link devices, has only 4MB of <em>total flash memory</em> (that needs to hold u-boot, the kernel and all the system). Even if you removed LuCI and other non-essential software from OpenWRT, you probably would not be able to get enough free space for OpenVPN.</p><p>If you want to buy another router for running OpenVPN, I would recommend you to look for a device with at least 8MB of flash at the <a href="http://wiki.openwrt.org/toh/start">Table of Hardware</a>. I personally would recommend Mikrotik or Ubiquiti devices, which are relatively cheap and usually easy to find in the market, and have plenty of flash memory.</p><p>Regarding your TL-WR941ND, to get the free flash memory space back after trying to install OpenVPN, just uninstall its half-installed package and dependencies.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207191">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">kral_ales</div>
					<div class="post-datetime">
						15 Jul 2013, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi thotypous,</p><p>yes, of course that must be the reason, sorry. :-) I am stupid. :-)<br />Unfortunately openvpn is mandatory for me so I have to lookround&nbsp; the new device. Thank you for your recommends and your help. :-) </p><p>Ales</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207214">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						15 Jul 2013, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>i remember that it was possible to have openvpn included in a 4mb image.. maybe was the no-ssl version?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207247">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						16 Jul 2013, 04:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>i remember that it was possible to have openvpn included in a 4mb image.. maybe was the no-ssl version?</p></blockquote></div><p>Just did a quick search and found a discussion about this in <a href="https://forum.openwrt.org/viewtopic.php?id=32911">another thread</a>. Some people say it is still possible to fit OpenVPN if you build your own customized image. The EXTROOT suggestion is also interesting if one wants to have some fun, as an USB connector can probably be soldered to this device. The SoC supports USB, and people already <a href="https://forum.openwrt.org/viewtopic.php?pid=199334#p199334">do those hacks</a> in WR841ND v8 units.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209430">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">sbiomed</div>
					<div class="post-datetime">
						10 Aug 2013, 16:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><br /><br /><br /><p>I can confirm the firmware works on TL-wr941ND v 5.0000. With the following defects:-<br />1)PPPOE connection drops at regular interval.<br />2)Coverage is significantly dropped in comparision to TP-LINK firmware.<br />So, can&#039;t use the most of router. Hence<br />I reverted back to the original firmware. sad<br />I hope the firmware appears soon.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209431">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						10 Aug 2013, 16:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi sbiomed,</p><p>1)</p><p>How much time is that regular interval? I am also using PPPoE and I did not perceive any drop in connection stability after changing the router (before that, I had a TL-WR740N also running OpenWRT). My PPPoE uptime is currently 8h 30m. Maybe the unstability also depends on some ISP configuration or behavior which I did not experience.</p><p>2)</p><p>I did not compare the coverage with stock firmware, but I have been able to cover 3 floors of a building with stable connection using this router. Devices in the second floor were able to lock into the faster bitrates, but those in the third floor could only use slower bitrates. Anyway, I think this coverage is pretty good compared to my previous router.</p><p>Please note that almost all TP-Link routers, including WR941ND, come with the regulatory domain locked to a default one (which is very limited) in the EEPROM. The stock firmware ignores this EEPROM setting, altough OpenWRT does not. Try unlocking the regulatory domain as explained in <a href="http://wiki.openwrt.org/toh/netgear/wndr3700?s#attitude.adjustment,">http://wiki.openwrt.org/toh/netgear/wnd … djustment,</a> and setting it to your country then adjusting some wireless settings (such as txpower) using LuCI.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209553">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">sbiomed</div>
					<div class="post-datetime">
						12 Aug 2013, 04:43					</div>
				</div>
				<div class="post-content content">
					<p>Thank you thotypous for the support.<br />1. Regular interval&nbsp; varies from 1min to 10mins. If I changed any settings in the router eg; TX power , then connection drops. At first I thought It was ISP problem, and I changed the next router ie wr741nd which has open wrt(gargoyle) on it, and it was smooth.</p><p>2. Isn&#039;t it possible that by using firmware of wr841nd v8; only 2 antenna gets activated and 3rd doesn&#039;t which causes drop in signal?</p><p>Now I am running DD-WRT for WR841nd v 8.<br />The Tx power is as shown in image:-<br /><span class="postimg"><img src="http://lookpic.com/O/i2/1095/eflEPHSC.jpeg" alt="http://lookpic.com/O/i2/1095/eflEPHSC.jpeg" /></span></p>											<p class="post-edited">(Last edited by <strong>sbiomed</strong> on 12 Aug 2013, 04:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209556">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						12 Aug 2013, 05:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sbiomed wrote:</cite><blockquote><p>1. Regular interval&nbsp; varies from 1min to 10mins. If I changed any settings in the router eg; TX power , then connection drops. At first I thought It was ISP problem, and I changed the next router ie wr741nd which has open wrt(gargoyle) on it, and it was smooth.</p></blockquote></div><p>Hm, that is strange, I am using exactly the same firmware image. Maybe next time try checking the System Log to see if it outputs anything related.</p><div class="quotebox"><cite>sbiomed wrote:</cite><blockquote><p>2. Isn&#039;t it possible that by using firmware of wr841nd v8; only 2 antenna gets activated and 3rd doesn&#039;t which causes drop in signal?</p></blockquote></div><p>The SoC used by WR941NDv5 is the same SoC used by WR841NDv8, whose radio is only 2x2 MIMO, unlike other WR941 hardware revisions which have a 3x3 MIMO radio. Maybe TP-Link ran out of stock on some components and started printing a slightly modified WR841NDv8 and selling it as WR941ND. Technically it is not unethical nor anything, because if you check at their website, WR841ND and WR941ND have <strong>exactly</strong> the same specifications regarding the radio (they literally copy-pasted the &quot;technical specifications&quot; from one model to the other).</p><p>Also, taking a look at the pictures of the WR941NDv5 circuit boards at the first posts of this thread (I did not open my device yet, so I cannot be sure about this one), it appears that two of the three antennas are connected to the same LNA. So it is almost the same thing as taking a WR841NDv8, and putting two antennas in one of the connectors (with correct impedance matching etc.)</p><p>In TP-Link website, you can also find the GPL sourcecodes of their official firmware. I took a diff between WR841NDv8 and WR941NDv5 and I did not see any significant changes in kernel sourcecode. The wireless driver is the same. So I doubt the firmware does anything different because of the third antenna, further supporting my hypothesis.</p><div class="quotebox"><cite>sbiomed wrote:</cite><blockquote><p>Now I am running DD-WRT for WR841nd v 8.<br />The Tx power is as shown in image:-</p></blockquote></div><p>You have a pretty good SNR! I do not know why it is calculating signal quality as being only 63%... 18dBm of txpower is good. I believe it could be increased with some tweaking (but need to check if summing the antenna gain it would not exceed maximum e.i.r.p. on most countries), however in your case you already appear to have good signal figures (SNR and sustained MCS rate).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210882">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">neoke007</div>
					<div class="post-datetime">
						26 Aug 2013, 18:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><p>I installed this firmware to my device (941ND ver 5.0). I found the problem:<br />- Failsafe not working: Lan interface not working (light&#039;s lan or wan not turn on), so I can not connect to device via Ethernet port (lan or wan).</p><p>Do anyone else have same problem ?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=44319&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=44319&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>