<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hi-Link wireless module HLK-RM04</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Jan 2018 and 26 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 9 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p274562">
				<div class="post-metadata">
					<div class="post-num">Post #201</div>
					<div class="post-author">Faren</div>
					<div class="post-datetime">
						30 Apr 2015, 09:09					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><p>Does anybody ever made the 1-wire bus work ?</p><p>I searched and did a bunch of tests to setup 1-wire on gpio0 (using kmod-w1, kmod-w1-gpio-custom, kmod-w1-slave-therm), but always got errors like:</p><div class="codebox"><pre><code>unable to select pin group</code></pre></div><p>or </p><div class="codebox"><pre><code>[   23.250000] w1-gpio w1-gpio.0: no of_node; not parsing pinctrl DT
[   23.250000] w1-gpio w1-gpio.0: Failed to parse gpio property for data pin (-2)
[   23.250000] w1-gpio: probe of w1-gpio.0 failed with error -2</code></pre></div><p>I think the HLKRM04.dts have the wrong parameters and I don&#039;t know what to do ... I tried with the default .dts file, by freeing gpio or by adding the following section</p><div class="codebox"><pre><code>w1-gpio {
        compatible = &quot;w1-gpio&quot;;
        gpios = &lt;&amp;gpio0 0 1&gt;;
};</code></pre></div><p>I tried with Barrier Breaker (revision 42625) and nightly builds Chaos Calmer rev 45xxx</p><p>If someone succeeded on setting up the 1-wire bus, could he explain how he have done it !</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>Faren</strong> on 30 Apr 2015, 09:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274570">
				<div class="post-metadata">
					<div class="post-num">Post #202</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						30 Apr 2015, 10:27					</div>
				</div>
				<div class="post-content content">
					<p>I got 1-wire bus running but not on that device. THis looks like a bug.I would suggest you come to IRC and talk to devs about this issue. If it turns out to be a bug then open a new bug ticket.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277958">
				<div class="post-metadata">
					<div class="post-num">Post #203</div>
					<div class="post-author">berta_viktor</div>
					<div class="post-datetime">
						29 May 2015, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>Dear OpenWrt Community!</p><p>I want to use these nice little modul in my network, but first I need to bridge their two network interface (LAN+WAN) together. I have two methods to make it.</p><p>See below my /etc/config/network config file:</p><p><span class="bbu">1. method</span></p><div class="quotebox"><blockquote><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;0&#039;<br />&nbsp; &nbsp; option ports &#039;0 1 2 3 4 6&#039;</p></blockquote></div><p><span style="color: #FF0000">Result:</span></p><div class="codebox"><pre><code>root@OpenWrt:~# swconfig dev switch0 show
Global attributes:
        enable_vlan: 1
        alternate_vlan_disable: 0
        bc_storm_protect: 0
        led_frequency: 0
Port 0:
        disable: 0
        doubletag: 0
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:0 link:down
Port 1:
        disable: 0
        doubletag: 0
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:1 link:down
Port 2:
        disable: 0
        doubletag: 0
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:2 link:down
Port 3:
        disable: 0
        doubletag: 0
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:3 link:down
Port 4:
        disable: 0
        doubletag: 0
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 262
        tr_bad: 0
        tr_good: 121
        pvid: 0
        link: port:4 link:up speed:100baseT full-duplex
Port 5:
        disable: 1
        doubletag: 0
        untag: 0
        led: ???
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:5 link:down
Port 6:
        disable: 0
        doubletag: 0
        untag: 1
        led: ???
        lan: ???
        recv_bad: ???
        recv_good: ???
        tr_bad: ???
        tr_good: ???
        pvid: 0
        link: port:6 link:up speed:1000baseT full-duplex
VLAN 0:
        ports: 0 1 2 3 4 6


root@OpenWrt:~# ifconfig
eth0      Link encap:Ethernet  HWaddr 44:33:4C:C9:AC:00
          inet addr:192.168.0.13  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:279 errors:0 dropped:0 overruns:0 frame:0
          TX packets:141 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:53596 (52.3 KiB)  TX bytes:17581 (17.1 KiB)
          Interrupt:5

eth0.1    Link encap:Ethernet  HWaddr 44:33:4C:C9:AC:00
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:1043 (1.0 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:24 errors:0 dropped:0 overruns:0 frame:0
          TX packets:24 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1968 (1.9 KiB)  TX bytes:1968 (1.9 KiB)</code></pre></div><p><span class="bbu">2. method</span></p><div class="quotebox"><blockquote><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;0&#039;</p></blockquote></div><p><span style="color: #FF0000">Result:</span></p><div class="codebox"><pre><code>root@OpenWrt:/# swconfig dev switch0 show
Global attributes:
        enable_vlan: 0
        alternate_vlan_disable: 0
        bc_storm_protect: 0
        led_frequency: 0
Port 0:
        disable: 0
        doubletag: 1
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:0 link:down
Port 1:
        disable: 0
        doubletag: 1
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:1 link:down
Port 2:
        disable: 0
        doubletag: 1
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:2 link:down
Port 3:
        disable: 0
        doubletag: 1
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:3 link:down
Port 4:
        disable: 0
        doubletag: 1
        untag: 1
        led: 5
        lan: 1
        recv_bad: 0
        recv_good: 4000
        tr_bad: 0
        tr_good: 711
        pvid: 0
        link: port:4 link:up speed:100baseT full-duplex
Port 5:
        disable: 1
        doubletag: 1
        untag: 1
        led: ???
        lan: 1
        recv_bad: 0
        recv_good: 0
        tr_bad: 0
        tr_good: 0
        pvid: 0
        link: port:5 link:down
Port 6:
        disable: 0
        doubletag: 1
        untag: 1
        led: ???
        lan: ???
        recv_bad: ???
        recv_good: ???
        tr_bad: ???
        tr_good: ???
        pvid: 0
        link: port:6 link:up speed:1000baseT full-duplex
VLAN 0:
        ports: 0 1 2 3 4 5 6


root@OpenWrt:/# ifconfig
eth0      Link encap:Ethernet  HWaddr 44:33:4C:C9:AC:00
          inet addr:192.168.0.13  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3633 errors:0 dropped:0 overruns:0 frame:0
          TX packets:726 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:971390 (948.6 KiB)  TX bytes:88656 (86.5 KiB)
          Interrupt:5

eth0.1    Link encap:Ethernet  HWaddr 44:33:4C:C9:AC:00
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:1043 (1.0 KiB)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:474 (474.0 B)  TX bytes:474 (474.0 B)</code></pre></div><p>The two result is almost the same.<br />I don&#039;t know why the eth0.1 interface appears in the interface list. In the first method I use VLAN0, but in the second method I disable the VLAN. I don&#039;t use other tagged VLAN, especially not VLAN1. I think maybe it is a bug. Can somebody confirm that, or tell me why is there <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />?</p><p>My OpenWrt version is r45707</p><p>Sorry for my bad English!<br />Thank You!</p><p>Viktor</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279889">
				<div class="post-metadata">
					<div class="post-num">Post #204</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						13 Jun 2015, 20:09					</div>
				</div>
				<div class="post-content content">
					<p>I am not an expert, but you forgot to the define the bridge, didn&#039;t you?</p><p>Some like this in /etc/config/network:</p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;lan&#039;
    option &#039;type&#039; &#039;bridge&#039;
    option &#039;ifname&#039; &#039;eth0.1 eth0.2&#039;</code></pre></div><p>Something similar worked for me on a <a href="http://wiki.openwrt.org/toh/inventel/dv4210">livebox</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280192">
				<div class="post-metadata">
					<div class="post-num">Post #205</div>
					<div class="post-author">berta_viktor</div>
					<div class="post-datetime">
						15 Jun 2015, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>Thank You for your answer suso!</p><p>I know these method, but my goal was, to bridge the two LAN port without VLAN (software bridge eth0.1 + eth0.2). Because RT5350 have built in switch it can make it in the hardware layer. My problem was that the eth0.1 virtual ethernet interface appears, but I disable the VLAN support in the config file (2. method).</p><p>At the time, I solved the problem by disabled the VLAN support in the kernel_menuconfig, and use the second config file. So the result is full hardware bridge, and the ifconfig show only one ethernet interface (eth0).</p><p>I think these is a bug in the VLAN support, because eth0.1 have to disappear when the VLAN is disabled.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p280217">
				<div class="post-metadata">
					<div class="post-num">Post #206</div>
					<div class="post-author">berta_viktor</div>
					<div class="post-datetime">
						16 Jun 2015, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Dear OpenWrt Community!</p><p>I am interested in that does someone have experiance with the mixed uartf (gpio uartf) node config in the dts file? I try almost everything, but no succes. It is registering always as full uart. Does the newest trunk support it? I use 45707 version.</p><p>My <strong> <span class="bbu">dts file:</span></strong></p><div class="codebox"><pre><code>/dts-v1/;

/include/ &quot;rt5350.dtsi&quot;

/ {
    compatible = &quot;HLKRM04&quot;, &quot;ralink,rt5350-soc&quot;;
    model = &quot;HILINK HLK-RM04&quot;;

    memory@0 {
        device_type = &quot;memory&quot;;
        reg = &lt;0x0 0x1000000&gt;;
    };

    palmbus@10000000 {
        spi@b00 {
            status = &quot;okay&quot;;
            m25p80@0 {
                #address-cells = &lt;1&gt;;
                #size-cells = &lt;1&gt;;
                compatible = &quot;gd25q64&quot;;
                reg = &lt;0 0&gt;;
                linux,modalias = &quot;m25p80&quot;, &quot;s25fl064k&quot;;
                spi-max-frequency = &lt;10000000&gt;;

                partition@0 {
                    label = &quot;u-boot&quot;;
                    reg = &lt;0x0 0x30000&gt;;
                    read-only;
                };

                partition@30000 {
                    label = &quot;u-boot-env&quot;;
                    reg = &lt;0x30000 0x10000&gt;;
                    read-only;
                };

                factory: partition@40000 {
                    label = &quot;factory&quot;;
                    reg = &lt;0x40000 0x10000&gt;;
                    read-only;
                };

                partition@50000 {
                    label = &quot;firmware&quot;;
                    reg = &lt;0x50000 0x3b0000&gt;;
                };
            };
        };

        uart@500 {
            status = &quot;okay&quot;;
        };
    };

    pinctrl {
        state_default: pinctrl0 {
            gpio {
                ralink,group = &quot;i2c&quot;, &quot;jtag&quot;;
                ralink,function = &quot;gpio&quot;;
            };
        };

        uartf_pins: uartf {
            uartf {
                ralink,group = &quot;uartf&quot;;
                ralink,function = &quot;gpio uartf&quot;;
            };
        };
    };

    ethernet@10100000 {
        mtd-mac-address = &lt;&amp;factory 0x4&gt;;
    };

    wmac@10180000 {
        ralink,mtd-eeprom = &lt;&amp;factory 0&gt;;
    };

    ehci@101c0000 {
        status = &quot;okay&quot;;
    };

    ohci@101c1000 {
        status = &quot;okay&quot;;
    };

    gpio-keys-polled {
        compatible = &quot;gpio-keys-polled&quot;;
        #address-cells = &lt;1&gt;;
        #size-cells = &lt;0&gt;;
        poll-interval = &lt;20&gt;;

        exit {
            label = &quot;reset&quot;;
            gpios = &lt;&amp;gpio0 0 1&gt;;
            linux,code = &lt;0x198&gt;;
        };

        wps {
            label = &quot;wps&quot;;
            gpios = &lt;&amp;gpio0 14 1&gt;;
            linux,code = &lt;0x211&gt;;
        };
    };
};</code></pre></div><p>Thank You!</p><p>Viktor</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p283606">
				<div class="post-metadata">
					<div class="post-num">Post #207</div>
					<div class="post-author">desay14</div>
					<div class="post-datetime">
						15 Jul 2015, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>Hello, guys.</p><p>Who can&#039;t see GPIO in /sys/class/gpio - use this link: <a href="http://wiki.openwrt.org/doc/hardware/port.gpio">http://wiki.openwrt.org/doc/hardware/port.gpio</a> , &quot;Finding GPIO pins on the PCB&quot;.</p><p>I have a little questions. How do you use GPIO on this device? I want to connect DHT22 and can&#039;t find driver. Will you help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298800">
				<div class="post-metadata">
					<div class="post-num">Post #208</div>
					<div class="post-author">freekepange</div>
					<div class="post-datetime">
						6 Nov 2015, 08:58					</div>
				</div>
				<div class="post-content content">
					<p>Does any body had used USB host on RM04 successfully.<br />When I was trying to use it as USB host<br />it did not register I just wanted to verify the hardware is perfect</p><p>Thnaks In advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298801">
				<div class="post-metadata">
					<div class="post-num">Post #209</div>
					<div class="post-author">freekepange</div>
					<div class="post-datetime">
						6 Nov 2015, 09:03					</div>
				</div>
				<div class="post-content content">
					<p>uboot128.img is for 16MB version<br />uboot256.img is for 32MB version</p><div class="quotebox"><cite>wpagnon wrote:</cite><blockquote><p>Hi Guys,</p><p>same thing,</p><p>I&#039;m trying to install openWRT without success, I&#039;ve bricked 3 modules already.</p><p>I&#039;ve followed those instructions too</p><p><a href="http://wiki.openwrt.org/toh/hilink/hlk-rm04">http://wiki.openwrt.org/toh/hilink/hlk-rm04</a></p><p>I&#039;m using the dev board Kit-V2.3 of the HLK-RM04. any help would be greatfull. My main aim is to get it to work as Wi-Fi client with a device connected to the HLK-RM04 ethernet port, ATM it seem that the client Wi-Fi workes only for RS232 connection</p><p>as well, a question, I&#039;ve used the bootloader uboot128.img but there is as well uboot256.img.... is this an updated one or is it for diferent memory setup?</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301743">
				<div class="post-metadata">
					<div class="post-num">Post #210</div>
					<div class="post-author">mcr</div>
					<div class="post-datetime">
						30 Nov 2015, 00:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have successfully build CC++ (DESIGNATED DRIVER (Bleeding Edge, r47199)) and flashed it using the uboot.<br />I&#039;m unclear if I have a 16M or 32M device: is there a way to tell without removing the RF shield?&nbsp; <br />What happens if I put the uboot256.img on the device and I don&#039;t have 32M?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301818">
				<div class="post-metadata">
					<div class="post-num">Post #211</div>
					<div class="post-author">cjmcx</div>
					<div class="post-datetime">
						30 Nov 2015, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>Itry to flash my hlk-rm04<br />but when enter in ftpf mode it&#039;s freeze with that<br />System Load Linux Kernel then write to Flash via TFTP. </p><br /><p> Warning!! Erase Linux in Flash then burn new one. Are you sure?(Y/N)</p><br /><p> Please Input new ones /or Ctrl-C to discard</p><br /><p>&nbsp; &nbsp; Input device IP (10.10.10.123) ==:10.10.10.123</p><br /><br /><p>btw what kind of serial I must use on windows xp sp3?</p><br /><p>can anybody help me ?</p>											<p class="post-edited">(Last edited by <strong>cjmcx</strong> on 30 Nov 2015, 18:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302009">
				<div class="post-metadata">
					<div class="post-num">Post #212</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						1 Dec 2015, 22:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cjmcx wrote:</cite><blockquote><p>Itry to flash my hlk-rm04<br />but when enter in ftpf mode it&#039;s freeze with that<br />System Load Linux Kernel then write to Flash via TFTP. </p><br /><p> Warning!! Erase Linux in Flash then burn new one. Are you sure?(Y/N)</p><br /><p> Please Input new ones /or Ctrl-C to discard</p><br /><p>&nbsp; &nbsp; Input device IP (10.10.10.123) ==:10.10.10.123</p><br /><br /><p>btw what kind of serial I must use on windows xp sp3?</p><br /><p>can anybody help me ?</p></blockquote></div><p>Any FTDI or PL2303 serial adapters. If you have a Raspberry Pi, it has already one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302068">
				<div class="post-metadata">
					<div class="post-num">Post #213</div>
					<div class="post-author">cjmcx</div>
					<div class="post-datetime">
						2 Dec 2015, 10:12					</div>
				</div>
				<div class="post-content content">
					<p>I just flash it<br />but when I go in web ui and try to setup anything the router is gone in reset<br />in serial window write <br />&quot;[&nbsp; 585.150000] Out of memory: Kill process 992 (luci) score 70 or sacrifice child<br />[&nbsp; 585.160000] Killed process 992 (luci) total-vm:3068kB, anon-rss:1284kB, file-rss:0kB&quot;<br />If I try to reload original firmware a got error mesage<br />&quot;Booting image at bc050000 ...</p><p>raspi_read: from:50000 len:40 </p><p>.Bad Magic Number,9FF792FB &quot;</p><p>know anyone what is that number?<br />if I try to flash via web ui an&nbsp; hlk ro04 whit original firmware, whit any openwrt I got same error<br />can i edit u-boot.img&nbsp; for that magic number ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302072">
				<div class="post-metadata">
					<div class="post-num">Post #214</div>
					<div class="post-author">cjmcx</div>
					<div class="post-datetime">
						2 Dec 2015, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>anoder stupid question<br />can I change winbond flash memory 25q32 whit an sd card 1G ?</p>											<p class="post-edited">(Last edited by <strong>cjmcx</strong> on 2 Dec 2015, 11:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310685">
				<div class="post-metadata">
					<div class="post-num">Post #215</div>
					<div class="post-author">accacca</div>
					<div class="post-datetime">
						8 Feb 2016, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>Newbie with Openwrt<br />i have flashed my Hi-Link board successfully Openwrt start I have tested serial and ssh connection<br />but I am not able to config wifi</p><p>The command &quot;wifi detect&quot; return nothing</p><p>I have also configure manually the /etc/config/wireless file but nothing happen</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;auto&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled &#039;0&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;openwrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hidden &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;none&#039;</p><p>Thanks to all for help or suggestions</p><p>I have dowloaded this image<br />openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin</p>											<p class="post-edited">(Last edited by <strong>accacca</strong> on 8 Feb 2016, 02:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310738">
				<div class="post-metadata">
					<div class="post-num">Post #216</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						8 Feb 2016, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>I use &quot;iwinfo wlan0 scan&quot; to find wireless networks. However I built my own image.</p><p>You are trying to setup AP, I don&#039;t know if that&#039;s compatible with scanning.</p><p>I have:</p><div class="codebox"><pre><code>config wifi-device  radio0
    option type     mac80211
    option channel  11
    option hwmode    11g
    option path    &#039;10180000.wmac&#039;
    option htmode    HT20
    # REMOVE THIS LINE TO ENABLE WIFI:
    option disabled 0</code></pre></div><p>Do you have a proper &quot;config interface lan&quot; in /etc/config/network? Is &quot;hostapd&quot; up and running?</p>											<p class="post-edited">(Last edited by <strong>suso</strong> on 8 Feb 2016, 15:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310917">
				<div class="post-metadata">
					<div class="post-num">Post #217</div>
					<div class="post-author">accacca</div>
					<div class="post-datetime">
						10 Feb 2016, 16:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for reply suso <br />Sorry for delay but sometime I can&#039;t access forum (The page is not available)</p><p>The command &quot;iwinfo wlan0 scan&quot; return <br />No such wireless device:&nbsp; wlan0</p><p>I don&#039;t know hostapd config (I must study!) <br />I have also changed the wireless config from ap to sta but nothing happen sob...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310950">
				<div class="post-metadata">
					<div class="post-num">Post #218</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						10 Feb 2016, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>Did you have a look at the output of dmesg?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310964">
				<div class="post-metadata">
					<div class="post-num">Post #219</div>
					<div class="post-author">accacca</div>
					<div class="post-datetime">
						10 Feb 2016, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>after <br />wifi down<br />wifi up<br />dmesg end with these lines:</p><div class="codebox"><pre><code>0.996699] rt3050-esw 10110000.esw: link changed 0x00
[   22.586531] rt3050-esw 10110000.esw: link changed 0x08
[   28.530723] device eth0.1 entered promiscuous mode
[   28.540425] device eth0 entered promiscuous mode
[   28.568229] br-lan: port 1(eth0.1) entered forwarding state
[   28.579571] br-lan: port 1(eth0.1) entered forwarding state
[   30.577447] br-lan: port 1(eth0.1) entered forwarding state
[   68.027466] random: nonblocking pool is initialized</code></pre></div><p>I have also installed a minimal image (link in message 153 pg7 by sskriblo)<br />the wlan ap seem start but I dont see the ap</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311704">
				<div class="post-metadata">
					<div class="post-num">Post #220</div>
					<div class="post-author">suso</div>
					<div class="post-datetime">
						16 Feb 2016, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Sorry. I missed your reply. I meant dmesg after boot, i.e.:</p><div class="codebox"><pre><code>dmesg | grep 80211</code></pre></div><p>BTW, did you check the modules?</p><div class="codebox"><pre><code>lsmod | grep 80211</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314860">
				<div class="post-metadata">
					<div class="post-num">Post #221</div>
					<div class="post-author">Lightsword</div>
					<div class="post-datetime">
						15 Mar 2016, 06:42					</div>
				</div>
				<div class="post-content content">
					<p>I have a device that is similar to the HLK-RM04, it&#039;s the <a href="http://www.hlktech.net/product_detail.php?ProId=48">HLK-SW16</a> and I&#039;m trying to integrate with some automation infrastructure. I managed to get some SDK&#039;s, serial apps, a firmware image and Docs from the manufacturer <a href="https://mega.nz/#F!ONt3lJTL!OHfYhb0DrLDc25aDllby9w">here</a> but they don&#039;t seem to be interested in giving out the actual firmware source code like they are supposed to even though I&#039;m making it the condition of a bulk purchase. I found out by default the device uses a service at nat.vveye.net to punch a hole through NAT and establish a connection with the controller app using a simplistic user/password authentication scheme which is obviously a huge security risk, the binary on the device that appears to be making the external connection is &quot;T2uSvr&quot; which establishes a connection with the library in the client side SDK&#039;s. Any idea if I can use the HLK-RM04 OpenWRT firmware with this device and if I&#039;ll be able to control the relay switches with it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328769">
				<div class="post-metadata">
					<div class="post-num">Post #222</div>
					<div class="post-author">Robrother</div>
					<div class="post-datetime">
						16 Jun 2016, 22:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sancho wrote:</cite><blockquote><p>Can anyone advice, how can I build a custom system for this device?<br />I&#039;d like to have mjpg-streamer, kmod-video-uvc, kmod-video-core, kmod-video-videobuf2, kmod-usb2, some i2c driver for the i2c interface and i2c-tools.<br />Of course, I&#039;d like to remove as much &quot;crap&quot; from the kernel and the core system as possible - e.g. I do not need IPv6, no firewall, ...<br />Whenever I try to compile the trunk version, I end up with error on Curl :(<br />I tried to use the trunk build, but even opkg list kill the device - I run out of memory :(</p></blockquote></div><br /><p>Hello Sancho, I&#039;m trying to do the same, but I have not enough memory, How did you resolve this? I can&#039;t install packages, because when I used opkg the process is killed by the same reason.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336045">
				<div class="post-metadata">
					<div class="post-num">Post #223</div>
					<div class="post-author">kawk</div>
					<div class="post-datetime">
						26 Aug 2016, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>In case anyone is interested in starting the <strong>original</strong> firmware (HLK_RM04_v1.78.img) from flash after programming uboot128/256, with output on its ttyS1 (the interface with Sub-D9 on the devkit), use the following commands from U-Boot command line (and &quot;saveenv&quot; if you want the functionality permanently):</p><div class="codebox"><pre><code># setenv ramargs
# setenv bootargs console=ttyS1,57600 mem=16M root=/dev/mtdblock5
# bootm bc050000
...
Image Name:   HLK-RM02
   Created:      2013-07-23  12:01:07 UTC
...
Starting kernel ...
Linux version 2.6.21 (tim@debian6) (gcc version 3.4.2) #103 Tue Jun 18 22:27:43 HKT 2013</code></pre></div><p>Any HLK firmware image intended to be uploaded via Web UI first has be decrypted, using the <strong>mkhilinkfw</strong> tool, before it can be flashed using the bootloader&#039;s option 2.</p><div class="codebox"><pre><code>mkhilinkfw -d -i HLK_RM04_v1.78.img -o bootable.img</code></pre></div><p>The tool now comes with the OpenWRT toolchain.</p>											<p class="post-edited">(Last edited by <strong>kawk</strong> on 26 Aug 2016, 21:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342412">
				<div class="post-metadata">
					<div class="post-num">Post #224</div>
					<div class="post-author">BarryP</div>
					<div class="post-datetime">
						29 Oct 2016, 01:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />I have an rm04 (4MB flash , 16MB ram)<br />it has uboot128 on it <br />and openwrt-ramips-rt305x-hlk-rm04-squashfs-sysupgrade.bin<br />From -- downloads.openwrt.org/snapshots/trunk/ramips/generic/ --<br />It works as a basic router , but I can&#039;t load the web interface@192.168.1.1<br />I presume this is a memory constraint ?<br />I would like to load HLK_RM04_v1.83.img onto it but it appears it needs to be decrypted .<br />is there a method to do this in a windows enviroment or perhaps someone has a copy I can download ?</p><p>Thanks <br />Barry</p>											<p class="post-edited">(Last edited by <strong>BarryP</strong> on 29 Oct 2016, 01:45)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 9 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=42142&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42142&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=42142&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>