<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Noob in need of help with webserver behind router</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p55725">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mordrin</div>
					<div class="post-datetime">
						14 Sep 2007, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>Ok so I&#039;m relatively new to linux, about 2 weeks into it, I got my router setup the way I want it for my personal machine, bit torrent, battlenet.&nbsp; I am able to ssh via WAN to both my linux box and my router, everything is great till I installed apache on my linux box! </p><p>LAN it works fine I see my test page @ 192.168.1.10 however via WAN I get a 404 error. I finally fiqured out that the router has a httpd service running, I disabled it (/etc/init.d/httpd disable) and started the script over and even rebooted the router.&nbsp; I&#039;m using updatedd to configure my dyndds account. I know my port 80 is open because I scanned it via an online tool and when I had httpd running router side I can access via WAN (ssh&#039;d into a buddies box typing links http://****.ath.cx/test.htm) on a test page I wrote for it. </p><p>I&#039;m using /etc/config/firewall</p><p>#Webserver<br />forward:dport=80:192.168.1.10</p><p>I&#039;ve tried also<br />accept:proto=tcp dport=80<br />forward:dport=80:192.168.1.10</p><p>and...<br />forward:proto=tcp dport=80:192.168.1.10</p><p>I know it is route side because I hooked up my old dlink router forward port 80 to my linux box running apache and boom WAN working like that. Please, please help me!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55736">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">silvaran</div>
					<div class="post-datetime">
						15 Sep 2007, 02:13					</div>
				</div>
				<div class="post-content content">
					<p>This may not be a router problem... couple more things you can try:</p><p>- Check for virtual host configurations on your Linux box.&nbsp; It may be treating LAN access (when it gets requests for <a href="http://192.168.1.10">http://192.168.1.10</a>) different than WAN access (when it gets requests for <a href="http://222.222.222.222">http://222.222.222.222</a>, for example).<br />- Check with tcpdump.&nbsp; tcpdump will get to the nitty gritty of network communication and let you know if it gets ANYTHING on port 80.&nbsp; On your Linux box, get the name of the interface you use to connect to the Internet.&nbsp; It&#039;s likely &quot;eth0&quot; for wired, or &quot;wlan0&quot; for wireless.&nbsp; Run /sbin/ifconfig and look for the interface name that has the 192.168.1.10 IP address.&nbsp; Then try something similar to the following from the command line:</p><p>&nbsp; tcpdump -i eth0 tcp port 80</p><p>I&#039;ve only spent a lifetime total of a few hours with tcpdump but it&#039;s saved my sanity more than a few times. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><p>Anyways, while tcpdump is running, try accessing your web server from the WAN.&nbsp; If tcpdump is SILENT, it&#039;s probably a router problem.&nbsp; If it prints stuff, then the router&#039;s probably routing all the packets properly and it&#039;s likely something to do with your LAN machine.</p><p>- Silvaran</p><p>EDIT: Heh what kind of interface name is www0? It&#039;s wlan0 I think (d&#039;oh)... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>silvaran</strong> on 15 Sep 2007, 02:14)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>