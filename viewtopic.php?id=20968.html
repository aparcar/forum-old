<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> plz help to identify JTAG port on RV042</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p91043">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nopoles</div>
					<div class="post-datetime">
						8 Jul 2009, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve recently got a new Linksys RV042 that I intended to use for my office, but the stock firmware from Linksys is so limiting I could not use it.&nbsp; I&#039;ve decided instead to install OpenWRT (I realize the RV042 is not yet supported hardware, but it does use the IXP425 platform which seems well supported).&nbsp; I used &quot;jungo-image.py&quot; script to create an export of the old firmware image, so I can begin to experiment with OpenWRT/DDwrt/OpenIXP, etc... </p><p>My first attempt was to upload the the OpenWRT image for the IXP4xx series &quot;<a href="http://downloads.openwrt.org/kamikaze/8.09.1/ixp4xx/openwrt-ixp4xx-zImage">http://downloads.openwrt.org/kamikaze/8 … 4xx-zImage</a>&quot;.&nbsp; I did so using the Jungo script, and I bricked the unit good. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; </p><p>So now I have a dead RV042 that I must recover.&nbsp; &nbsp;<img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />&nbsp; The trick with TFTP during bootup did not work like on the WRT54G, since the unit won&#039;t power up the ethernet ports anymore. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />&nbsp; Also, the factory reset button on the back simply does nothing. It seems like my final option is to use JTAG, which I am comfortable with and have used before (and have done plenty of soldering).</p><p>But, I&#039;d like some feedback on which JTAG cable I should try using, and suggestions as to which port on the board is likely the JTAG interface <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Here is an image of the RV042 circuit board, it&#039;s not mine, but looks identical: </p><p><a href="http://www.mobiltex.com/~tdacosta/images/rv042a-new.jpg">http://www.mobiltex.com/~tdacosta/images/rv042a-new.jpg</a></p><p>You can see at the top there is a 10 pin port named COM1, and a 20 pin port labeled JP2.&nbsp; COM1 is obviously a serial port, which leaves JP2 as the only viable JTAG interface. I believe it&#039;s this one:</p><p><a href="http://microcontrollershop.com/Images/arm_jtag_connector.gif">http://microcontrollershop.com/Images/a … nector.gif</a></p><p>Does this seem right?&nbsp; And if so, which type of JTAG interface cable should I try using on this device?&nbsp; &nbsp;(<a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Customizing%282f%29Hardware%282f%29JTAG_Cable.html">http://oldwiki.openwrt.org/OpenWrtDocs% … Cable.html</a>)</p><p>I look forward to any feedback. Thanks for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91048">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nopoles</div>
					<div class="post-datetime">
						8 Jul 2009, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>Oh, I found this page on the openWRT site which speculates that JP2 is the JTAG port:</p><p><a href="http://oldwiki.openwrt.org/OpenWrtDocs%282f%29Hardware%282f%29Linksys%282f%29RT042.html?highlight=%28OpenWrtDocs/Hardware%29">http://oldwiki.openwrt.org/OpenWrtDocs% … ardware%29</a></p><p>I&#039;ll try adding the necessary headers to the circuit board and see if I can restore the original image through JTAG.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91739">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						23 Jul 2009, 00:34					</div>
				</div>
				<div class="post-content content">
					<p>Have a look onto the WRV54G page at<br /><a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)Hardware(2f)Linksys(2f)WRV54G.html">http://oldwiki.openwrt.org/OpenWrtDocs( … RV54G.html</a>.<br />This device is IXP425 based, too. The page describes the layout of the standard ARM JTAG head used there and from your picture I guess that pins 4,6,8,..20 and 11 are connected to GND, which would match that page. Pin2 seems to be at 3.3V.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94179">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">s_dorin</div>
					<div class="post-datetime">
						13 Sep 2009, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>Recovery procedure on RV042 firmware:<br />1 download firmware <a href="http://www.cisco.com/en/US/prod/routers/ps9923/ps9925/RV042_Firmware.zip">http://www.cisco.com/en/US/prod/routers … rmware.zip</a><br />2 disconnect the power cable on router<br />3 press and hold reset button, apply the power connector and waiting one minute, release reset button<br />4 settings network on your computer:<br />-IP:192.168.1.2<br />-Mask:255.255.255.0<br />-Gateway:192.168.1.1<br />5 connect network cable to the router and open web browser <a href="http://192.168.1.1">http://192.168.1.1</a><br />6 select the firmware and upgrade<br />7 wait few minute until upgrade is completely<br />8 ready</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116518">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cherry31459</div>
					<div class="post-datetime">
						5 Sep 2010, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>The recovery procedure stated by s_dorin won&#039;t work as the raw image burned by nopoles clobbered the bootloader. Only solution is to reinstall the original image via JTAG.</p><p>It is never a good idea to install firmware on unsupported boards!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211208">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Wbm</div>
					<div class="post-datetime">
						30 Aug 2013, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p> While playing with console I bricked RV042, anyone have an idea how to recover after this set of commands:</p><p> SME boot&gt; flash_layout<br /> Flash layout:<br /> Section 00 Type BOOT Range 0x00000000-0x000F0000 MaxSize 0x000F0000<br /> No more information.</p><p> Section 01 Type BOOTCONF Range 0x000F0000-0x00100000 MaxSize 0x0000FEEC<br /> Uninitialized.</p><p> Section 02 Type IMAGE Range 0x00100000-0x00640000 MaxSize 0x0053FEEC<br /> Size 0x004F1900 Name &#039;Downloaded at: Wed Jan 1 00:03:03 2003&#039; Version &#039;1.3.9&#039;<br /> Checksum 0x285A960A Counter 0x00002998 Start Offset 0x00000000</p><p> Section 03 Type CONF Range 0x00640000-0x007C0000 MaxSize 0x0017FEEC<br /> Size 0x00004AA3 Name &#039;rg_conf&#039;<br /> Checksum 0x002473EE Counter 0x000043C2 Start Offset 0x00000000</p><p> Section 04 Type FACTORY Range 0x007C0000-0x007E0000 MaxSize 0x0001FEECSize 0x0000017C Name &#039;Image downloaded from: tftp://192.168.1.101/RV042/rg_factory3&#039;<br /> Checksum 0x00006B03 Counter 0x0000001C Start Offset 0x00000000</p><p> SME boot&gt; flash_erase -d 03<br /> Returned 0</p><p> SME boot&gt; flash_commit</p><p> Returned 0</p><p> SME boot&gt; restore_default -dopen DHCP Server for dev ixp0</p><p> Restore default completed successfully.</p><p> Returned 0</p><p> SME boot&gt; reboot<br /> Going to reboot!<br /> Restarting system.</p><p> and after this it&#039;s not booting...</p><p> br.<br /> --<br /> Wbm.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>