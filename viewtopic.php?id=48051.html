<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Hame MPR A1/A2 clone</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p221052">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">andreasb</div>
					<div class="post-datetime">
						28 Dec 2013, 10:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />just I buy here <br /><a href="http://www.ebay.com/itm/3G-Wireless-MiFi-WiFi-USB-Broadband-Hotspot-Router-Power-Charger-/360760089405?">http://www.ebay.com/itm/3G-Wireless-MiF â€¦ 760089405?</a><br />a Hame MPR A1/A2 clone. The device have only a 1200mA battery.<br />The problemfor me is, I can&#039;t found the serial interface. The 4 connectors what I found seems any GPIO outputs but not a serial port. I did check the connectors (wired in the picture) by a oszilloscope. Three of this 3 connectors have constant 3V Output (still if the router is switch off), one of them is GND. <br />The other 4 blanc connectors close to the network plug are direct connectet with them.</p><p>The Hardware:<br />RT3553F (Soc)<br />STM8S003K3 (8-bit controller) !<br />MX25L3206E (4MB flash)<br />EM63A165TS-60 (16Mx16 sram)</p><p>The manufacturer is unknown.</p><p>For me is interesting for what is the additional 8-bit controller and where are the RX/TX connectors for the console. Without a direct console I want not to flash this device.</p><p>I can reach telnet, but it will be deactivated if any storage device is connected via USB:</p><p>BusyBox v1.12.1 (2012-12-17 05:16:22 CST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p># ls&nbsp; &nbsp;<br />bin&nbsp; &nbsp; &nbsp;sbin&nbsp; &nbsp; init&nbsp; &nbsp; lib&nbsp; &nbsp; &nbsp;usr&nbsp; &nbsp; &nbsp;tmp&nbsp; &nbsp; &nbsp;sys&nbsp; &nbsp; &nbsp;etc_ro<br />dev&nbsp; &nbsp; &nbsp;mnt&nbsp; &nbsp; &nbsp;media&nbsp; &nbsp;proc&nbsp; &nbsp; home&nbsp; &nbsp; var&nbsp; &nbsp; &nbsp;etc<br /># cat /proc/mtd<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00400000 00010000 &quot;ALL&quot;<br />mtd1: 00030000 00010000 &quot;Bootloader&quot;<br />mtd2: 00010000 00010000 &quot;Config&quot;<br />mtd3: 00010000 00010000 &quot;Factory&quot;<br />mtd4: 003b0000 00010000 &quot;Kernel&quot;<br /># <br /># cat proc/cpuinfo<br />system type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Ralink SoC<br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 24K V4.12<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 239.61<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : yes<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />tlb_entries&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 32<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes<br />ASEs implemented&nbsp; &nbsp; &nbsp; &nbsp; : mips16 dsp<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p><p># cat /proc/meminfo<br />MemTotal:&nbsp; &nbsp; &nbsp; &nbsp; 28400 kB<br />MemFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8400 kB<br />Buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Cached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 11788 kB<br />SwapCached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Active:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3836 kB<br />Inactive:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9024 kB<br />SwapTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />SwapFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Dirty:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Writeback:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />AnonPages:&nbsp; &nbsp; &nbsp; &nbsp; 1104 kB<br />Mapped:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1116 kB<br />Slab:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5784 kB<br />SReclaimable:&nbsp; &nbsp; &nbsp;1776 kB<br />SUnreclaim:&nbsp; &nbsp; &nbsp; &nbsp;4008 kB<br />PageTables:&nbsp; &nbsp; &nbsp; &nbsp; 224 kB<br />NFS_Unstable:&nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Bounce:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />CommitLimit:&nbsp; &nbsp; &nbsp;14200 kB<br />Committed_AS:&nbsp; &nbsp; &nbsp;3048 kB<br />VmallocTotal:&nbsp; 1048404 kB<br />VmallocUsed:&nbsp; &nbsp; &nbsp; &nbsp;768 kB<br />VmallocChunk:&nbsp; 1047636 kB</p><p>Unfortunately I can&#039;t attach any pictures of the board in the forum.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221056">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">andreasb</div>
					<div class="post-datetime">
						28 Dec 2013, 13:19					</div>
				</div>
				<div class="post-content content">
					<p>Additional information:<br />The 4 connectors in the area where normally are the serial connectors have connections like below:<br />1: Vcc 3V<br />2: NRST of STM8 micro controller (reset line)<br />3: SWIM of STM8 (a one wire programming interface of this controller)<br />4: GND</p><p>Any idea for what is this STM8 controller?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221084">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">probono</div>
					<div class="post-datetime">
						28 Dec 2013, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Can you trace on the board what is connected to the STM8S003K3? Perhaps it is used for power management (charging the battery?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221150">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">andreasb</div>
					<div class="post-datetime">
						29 Dec 2013, 08:41					</div>
				</div>
				<div class="post-content content">
					<p>That was my suspicion, too. Because this microcontoller is on the side of the Ram where is the charging electronic. <br />But the board contains a EMC5755 for that. <br />Additional small chips are (on the side of the charging electronic):<br />CD2PA (6 pin) may be, a switch regulator for 5V USB<br />2x 13aQ2 (5 pin)<br />3 transistors</p><p>Sorry, is too much heavy to trace this connections. All connections of the STM8 goes to vias soon. I don&#039;t know how many layers have this board.</p><p>I have to correct myself:<br />The 4 pins which go to the STM8 controller is not on the place where normally is the serial port. It&#039;s on opposite side of the board, 23mm center to center distance to the mini USB plug (battery side).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221234">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						30 Dec 2013, 12:50					</div>
				</div>
				<div class="post-content content">
					<p>Maybe the MCU is used for monitoring the charge level of the battery?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>