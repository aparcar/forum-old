<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NetGear WNDR3700 above 17 dBm ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p191365">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">povlhp</div>
					<div class="post-datetime">
						8 Feb 2013, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>I have a couple NetGear WNDR3700, which I would like to bump to 20 dBm on 2.4GHz to increase quality of my bridged link.</p><p>Is it possible to increase power ? Seems like some regional versions will do the 20dBm.</p><p>I have looked at the wireless stuff, made my own firmware with ATH9K_USER_REGD=y. Does not seem to work. I can change country as I want, and iw reg will show me whatever I changed it to. But iw list still shows only 17 dBm. I want to get the German 20 dBm.</p><p>I have looked at the crda, and have the feeling it is not needed for the latest trunk ? I installed it with a hacked database, and it did not help.</p><p>Where is the limit imposed ? Guess it is not crda, since it is not installed per default -&nbsp; in the new 80211 layer ? <br />Or do I need to find and flash another EEPROM ?</p><p>If I can get a hint, I can dig a bit deeper into the driver source and see if I can hack something that way around.</p><p>I am in Europe where modifying things are not illegal.</p><p>If the WNDR3700 can&#039;t go above 17dBm in Europe, what other APs can be recommended with more power ? (I know they will be locked down with stock kernel)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191371">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dums</div>
					<div class="post-datetime">
						8 Feb 2013, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>I have wndr3800 (should be identical with wndr3700v2 but with more falsh/ram)<br />I&#039;ve purchased 3800 in europe, bet set it to &#039;US&#039;:</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;4&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr &#039;74:44:01:84:b0:18&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;TX-STBC&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;US&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;23&#039;</p><p>&quot;iw phy&quot; output claims capabilities up to 27 dBm:</p><p>Wiphy phy0<br />&nbsp; &nbsp; &nbsp; &nbsp; Band 1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Capabilities: 0x11ce<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT20/HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SM Power Save disabled<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX HT40 SGI<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX STBC<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX STBC 1-stream<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Max AMSDU length: 3839 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DSSS/CCK HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Maximum RX AMPDU length 65535 bytes (exponent: 0x003)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Minimum RX AMPDU time spacing: 8 usec (0x06)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT TX/RX MCS rate indexes supported: 0-15<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (27.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191377">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">povlhp</div>
					<div class="post-datetime">
						8 Feb 2013, 10:39					</div>
				</div>
				<div class="post-content content">
					<p>Think there are differences in eeprom, or something else. My WNDR3700 is the one with printed antennas, so it might be one reason it is limited. The dd-wrt page says it is limited to 17 dBm, yet I see others saying it is 20 or 23 dBm max.</p><p>My patched kernel says:<br />root@OpenWrt /root# iw reg get<br />country DE:<br />&nbsp; &nbsp; &nbsp; &nbsp; (2400 - 2483 @ 40), (N/A, 20)<br />&nbsp; &nbsp; &nbsp; &nbsp; (5150 - 5250 @ 40), (N/A, 20), NO-OUTDOOR<br />&nbsp; &nbsp; &nbsp; &nbsp; (5250 - 5350 @ 40), (N/A, 20), NO-OUTDOOR, DFS<br />&nbsp; &nbsp; &nbsp; &nbsp; (5470 - 5725 @ 40), (N/A, 27), DFS</p><p># iw list<br />....<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)</p><p>If I change to country JP, I get this from iw list - so it seems like 20 dBm iw possible, but only on channel 14. So something is limiting me to 17 dBm. And I think it is the eeprom.</p><p>iw reg set JP<br />iw list</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (17.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (20.0 dBm)</p><br /><p>As a father, I don&#039;t have too much hacking time. This is why I am looking for info on where to start the hacking. Maybe the eeprom read routine, and faking the values there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191383">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						8 Feb 2013, 11:30					</div>
				</div>
				<div class="post-content content">
					<p>The values you are seeing indeed come from the eeprom, which resides in the &#039;art&#039; partition. I don&#039;t know how feasible flashing another eeprom is; there can be some checks in the bootloader which prevent booting with a modified eeprom.</p><p>Regarding the actual values, there can be a power amplifier in the router, which the driver doesn&#039;t know about, and the actual transmit powers could be higher. Moreover, the number and type of antennae affect the transmit power.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191404">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">povlhp</div>
					<div class="post-datetime">
						8 Feb 2013, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>So conclusion is, driver hack and fake EEPROM from file is best bet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191511">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gulikoza</div>
					<div class="post-datetime">
						9 Feb 2013, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>ATH9K_USER_REGD=y will limit output to 17dBm. It was said before this is a bug or maybe intentional to limit power output when regdomain is not respected.<br />Your best bet is to set ATH9K_USER_REGD=n and use a modified regdomain or use a driver hack posted by jow: <a href="http://luci.subsignal.org/~jow/reghack/README.txt">http://luci.subsignal.org/~jow/reghack/README.txt</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191563">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">povlhp</div>
					<div class="post-datetime">
						10 Feb 2013, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>Back to latest kernel&nbsp; (nightly build) so REGD=n, did the reghack stuff, used US settings (the one he hacked) no luck. Still 17dBm in 2.4GHz.<br />Then installed crda + regulatory.bin - iw list still says 17 dBm. <br />No improvement when I use iw dev wlan0 set txpower fixed 2300.</p><p>Not sure what the next step is, doing driver debugging takes time I don&#039;t have.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191577">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Bigstick80</div>
					<div class="post-datetime">
						10 Feb 2013, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m interested in this too.&nbsp; Does anyone know where the datasheet is for this chip so we can see what it is supposed to be able to output?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191646">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">povlhp</div>
					<div class="post-datetime">
						11 Feb 2013, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>The chip will go to 27dBm. But the antennas printed on PCB might be a limiting factor. <br />I think there are 2 ways to go. One is to flash the EEPROM. There are tools for this as some users had a zapped EEPROM after upgrade. <br />Usually this requires EEPROM from a working device. But people can still change MAC address. Guess you can from another device which is not locked down. </p><p>The amplifier does not check power but maybe firmware in chip? Or maybe we still suffer from driver respecting EEPROM.&nbsp; That is why looking at driver is still a possible solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191735">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						12 Feb 2013, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>CRDA and ATH9K_USER_REGD=y have no effect in recent builds. </p><p>You will need to disable mac80211&#039;s built-in regdomain settings to be able to override them with user settings.</p><p>Doing so may or may not break the law. I wouldn&#039;t condone it but it is described in the existing WNDR3700 thread: <a href="https://forum.openwrt.org/viewtopic.php?id=27722">https://forum.openwrt.org/viewtopic.php?id=27722</a></p><p>There are some, however that are indeed calibrated with lower limits in the EEPROM. I do not know if these also come with weaker amplifier chips that necessitate it (take it apart and look) or if it was just for EU compliance.</p>											<p class="post-edited">(Last edited by <strong>qasdfdsaq</strong> on 12 Feb 2013, 01:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191747">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">jeffster</div>
					<div class="post-datetime">
						12 Feb 2013, 07:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>povlhp wrote:</cite><blockquote><p>The chip will go to 27dBm. But the antennas printed on PCB might be a limiting factor.</p></blockquote></div><p>I would hope that a PCB can support 27 dBm as easily as it can support 17 dBm. After all, 27 dBm is only 1/2 W output, and the only way the PCB would be seeing any heating is if some meaningful fraction of that power wasn&#039;t getting radiated. I would assume that there aren&#039;t any significant resistive losses in either the feedlines or the patches (or the router&#039;s performance would totally suck both on receive as well as transmit).</p>											<p class="post-edited">(Last edited by <strong>jeffster</strong> on 12 Feb 2013, 07:50)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>