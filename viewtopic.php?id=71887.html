<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> UMTS -&gt; router -&gt; analog phone ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p364378">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						26 Aug 2017, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>So far I have used my OpenWRT boxes only as routers and IoT gateways.<br />I am new to telephony, but I need to get my head around it now.</p><p>The problem:<br />This oh so progressive country has decided that analog phone lines are legacy technology and will be taken down. <br />Unfortunately the future has not quite arrived yet... So I am about to lose my phone line, but there is no fiber line to my house (and there probably never will be, unless someone digs a 15km trench just for me).<br />All there is is UMTS.</p><p>The solution:<br />Would the following work?<br />- UMTS dongle on a router with OpenWRT + Asterisk/chan dongle or FreeSwitch + GSMOpen to convert UMTS voice calls to/from VOIP<br />- A Lantuq based OpenWRT router with <a href="https://github.com/olivluca/danube-voip">https://github.com/olivluca/danube-voip</a> to convert VOIP to analog FXS<br />- hook up the existing analog base station to the FXS port of the router, continue to use the old DECT devices in the house.</p><p>Am I on the right track?<br />Is this feasible?<br />Or will I lose too much of the audio quality?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364392">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						26 Aug 2017, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>Usually a separate ATA (Analog Telephone Adapter) box is used for VOIP calling.&nbsp; This box has an Ethernet input which issues ordinary IP packets and one or more analog phone outputs.&nbsp; The CPU in the ATA box handles the VOIP protocols usually with a proprietary firmware. </p><p>Analog hardware that can be driven directly by OpenWrt is not common.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364416">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						27 Aug 2017, 00:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Analog hardware that can be driven directly by OpenWrt is not common.</p></blockquote></div><p>on LEDE it is possible</p><p>On all lantiq xway and xrx200 router with SLIC-120 chipsets for the FXS ports is telephone support general possible.<br />(other lantiq FXS chips like SLIC-121 i think too).</p><p>I know it is possible to use the FXS-ports on a Arcor EasyBox 803A Astoria ARV752DPW22<br />see:<br /><a href="https://forum.lede-project.org/t/use-umts-stick-for-phone-calls/5158">https://forum.lede-project.org/t/use-um … calls/5158</a></p>											<p class="post-edited">(Last edited by <strong>Plonk34</strong> on 27 Aug 2017, 00:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364425">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Samweis</div>
					<div class="post-datetime">
						27 Aug 2017, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi Plonk34,</p><p>Thank you for your answer.<br />In the LEDE forum thread you linked to you wrote that you have done this already:<br />&quot;The Lantiq xrx200 device O2-Box 6431 with an UMTS-Stick as an POTS-VoIP-Mobilphone-gateway is possible too.&quot;</p><p>This would be exactly what I need!</p><p>How was sound quality, when you did this? You wrote about echos - have you been able to fix them?</p><p>Is it wise to run Asterisk or FreeSwitch with the UMTS-&gt;VOIP conversion and the VOIP-&gt;LXS conversion all on the same box? Or would it be better to split these tasks across two boxes? I think UMTS to VOIP is digital to digital, and VOIP-&gt;FXS is hardware driven, so this cannot be too hungry with respect to computing power?<br />And an Easybox 904xDSL would even have more horsepower than the ARV752DPW22....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364428">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Plonk34</div>
					<div class="post-datetime">
						27 Aug 2017, 15:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>How was sound quality, when you did this? You wrote about echos - have you been able to fix them?</p></blockquote></div><p>Like a mobilephone, no HD but clear enough.<br />It is more depend on the Telefon, or better the combination of <a href="https://de.wikipedia.org/wiki/Gabelschaltung">fork-circuit-values</a> and hear- and speaking-capsules.<br />Modern FeTAp from the 80&#039;s have no problem older have a smaller sidetone (Rückhördämpfung).<br />But it is possible to supress the echo:<br />/etc/asterisk/lantiq.conf<br /></p><div class="codebox"><pre><code>...
echocancel = nfees
echocancelnlp = on
...</code></pre></div><p>The result was satisfactory</p><p>and you can play with the volume:<br /></p><div class="codebox"><pre><code>...
; The value is given in dB within the range (-24dB to +12dB), in 1 dB steps.
rxgain = 1
txgain = 3
...</code></pre></div><p>Never tested but possible that will help too, is the AGC (=Auto-Gain-Control) command from Asterisk.</p><div class="quotebox"><blockquote><p>Is it wise to run Asterisk or FreeSwitch with the UMTS-&gt;VOIP conversion and the VOIP-&gt;LXS conversion all on the same box? Or would it be better to split these tasks across two boxes? I think UMTS to VOIP is digital to digital, and VOIP-&gt;FXS is hardware driven, so this cannot be too hungry with respect to computing power?</p></blockquote></div><p>Yes it is wise to use it on the same box, for this reason one of the two VPE (= Virtual Processing Elements) and a littlebit RAM will reserve for the Voice process VMMC only.<br />If you want to separate processes it more wise to use one device as an ATA or better Telephon Central, and an other device like a pure Router with SMP support.<br />It is not possible to use SMP and VMMC (required for FXS) together, but it is only a problem on higher VDSL speeds &lt; 50Mbit/s.</p><p>The delay will not better if sending the talk from station to station.</p><div class="quotebox"><blockquote><p>And an Easybox 904xDSL would even have more horsepower than the ARV752DPW22....</p></blockquote></div><p>And more power consumtion.<br />The O2-Box 6431 have only one USB-port.<br />The EB-803A have an older processor but i think the only difference are the 333MHz instead 500MHz, because the software for the xrx200 devices <br />will compile with same parameter like the xway.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>