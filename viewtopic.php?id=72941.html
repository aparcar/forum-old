<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bridged repeater - no public IPv6 address on LAN</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p370511">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">taxidriver</div>
					<div class="post-datetime">
						5 Jan 2018, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>Hiya,<br />this has kept me busy for days now and I still haven&#039;t found a way to resolve it:</p><p>Installed OpenWrt on an ASUS RT-N56U and configured it to work as a repeater following this description: <br /><a href="https://geeklabor.de/archives/198-OpenWRT-bridged-Repeater-mit-relayd.html">https://geeklabor.de/archives/198-OpenW â€¦ elayd.html</a></p><p>Got everything working fine, but then there is one issue that I can&#039;t cope with: Any device being connected to the LAN ports only gets a local IPv6 address. When in contrast to that I use the wireless connection everything is fine. Both laptop and cell phone receive a public IPv6 address and everything works like a charm.</p><p>Why doesn&#039;t that work for the LAN ports as well? The main router is a Fritz!Box 7490 by the way.<br />Thanks for any kind of help in advance</p>											<p class="post-edited">(Last edited by <strong>taxidriver</strong> on 6 Jan 2018, 12:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370520">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						5 Jan 2018, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>And when you set IP on the lan device as static, everything works, right? I recall I had this problem with relayd too, but it was the only solution I came up with.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370536">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">taxidriver</div>
					<div class="post-datetime">
						6 Jan 2018, 12:52					</div>
				</div>
				<div class="post-content content">
					<p>No - actually I had not checked that before receiving your reply, but meanwhile I&#039;ve given it a try and that way it doesn&#039;t work eitherl. Additionally I have even given the device on the repeater&#039;s LAN socket a fixed IPv6 address (guessed from the prefix delegation)...still IPv6 did not work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370715">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						10 Jan 2018, 04:34					</div>
				</div>
				<div class="post-content content">
					<p>You might want to try v6brouter, rather than relayd. Of course the real answer is to get your ISP to support prefix-delegation (or switch to one that does).</p><p><a href="https://github.com/cvmiller/v6brouter">https://github.com/cvmiller/v6brouter</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370758">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">taxidriver</div>
					<div class="post-datetime">
						10 Jan 2018, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I might go a different path and try v6brouter once in a while, but before that I&#039;d like to understand why my configuration of OpenWrt isn&#039;t doing the job.</p><div class="quotebox"><blockquote><p>get your ISP to support prefix-delegation (or switch to one that does).</p></blockquote></div><p>I have recently set up a new interface WWAN6 and when I list my interfaces now that WWAN6 has an IPv6 line plus a line IPv6-PD, so I guess that my ISP does support prefix delegation. Connecting to the WLAN on the repeater lets me use IPv6 to the full extent but it&#039;s not working with the LAN ports.<br />That&#039;s the issue that keeps me busy, understand?</p>											<p class="post-edited">(Last edited by <strong>taxidriver</strong> on 10 Jan 2018, 22:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370894">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						15 Jan 2018, 03:28					</div>
				</div>
				<div class="post-content content">
					<p>Having PD support is great. Not sure what is wrong with your config that your LAN connected devices don&#039;t work.</p><p>You _may_ want to back up your config, then default it, and see if the default works. I have had good success with OpenWrt and IPv6 right out of the box (read: with the defaults).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370981">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">taxidriver</div>
					<div class="post-datetime">
						17 Jan 2018, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Ok, but you&#039;re not using your OpenWrt device in repeater mode, I think. That&#039;s why I can&#039;t go back to the default values, you see?</p><p>My guess is that the main router (FritzBox 7490) and its dhcp service might cause this issue. At least I read about this problem on some other forum boards. Unfortunately no one ever posted a solution.</p><p>Maybe I&#039;ll replace the main router with a device running OpenWrt as well, hoping that this will make a difference.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371166">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						24 Jan 2018, 01:19					</div>
				</div>
				<div class="post-content content">
					<p>Ah, your OpenWrt router is down stream of another router (that is connected to the ISP).</p><p>You will need 2 things for this to work:<br />1) You ISP needs to give you more than a /64 prefix delegation (preferably something like a /56), so you can sub-divide the block<br />2) You router connected to the ISP needs to be able to do prefix delegation to downstream routers (OpenWrt can do this).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371210">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">taxidriver</div>
					<div class="post-datetime">
						24 Jan 2018, 22:37					</div>
				</div>
				<div class="post-content content">
					<p>Thanks,</p><p>and can you be a little more specific on how this can be done in detail?<br />I discovered that the main router (Fritzbox 7490) is getting a /56 prefix delegation.<br />When I set the OpenWrt GUI of my new device WWAN6 to <br />&quot;Request IPv6-prefix of length&quot; : Automatic<br />I can see this: IPv6-PD: XXXX:XXXX:112d:50fc::/62<br />What would I have to do to subdivide the block as you say?<br />Does it make sense to have identical IPv6 ULA-Prefix for both the ISP router and the OpenWrt router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p371279">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">cvmiller</div>
					<div class="post-datetime">
						26 Jan 2018, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>I believe the Fritzbox will not do DHCP-PD downstream. When running an OpenWrt router, and another OpenWrt router downstream, it will automagically happen (odhcpd supports downstream DHCPv6-PD). So there really is nothing to configure, as long as the router connected to the ISP has more than a /64.</p><p>As to the ULA, I would suggest configuring the /48 at the ISP connected router, and let the downstream routers get addresses via DHCPv6-PD. </p><p>DO NOT put in the same ULA/48 on both routers. Routers work by routing between different networks. If you make them the same the routers will not route the ULA packets.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>