<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Transcend WifiSD / PQI AirCard / FluCard Pro</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 10</div><nav><ul><li><a href="viewtopic.php%3Fid=45820&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=10.html">10</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p216463">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">dankrause</div>
					<div class="post-datetime">
						1 Nov 2013, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>ucplay: I&#039;ve looked into that ez Share card a bit, and it seems to require a windows application to update the firmware. I can find the update application, but not the firmware itself. Still, that seems to suggest that, like the FlashAir, it&#039;s probably not KeyASIC-based. If you do pick one up, let us know what you find.</p><p>Also, the PQI AirCard (when writing from a host device) seems to be limited only by the microSD card you put in it. I was able to reliably get about 11.5MB/s with the PQI-branded class 10 16GB microSD card that came with the device, and 5.1MB/s with a SanDisk class 4 8GB microSD card I have lying around. This is consistent with using a normal microSD card adapter. These were all done with large sequential writes (which is typical of the load imposed by a camera writing photos or video).</p><p>From within the card, the rates are pretty abysmal, regardless of what kind of microSD card you have inserted. With large sequential writes, I get around 1.3MB/s.</p><p>Writing to the internal NAND is similar to internal SD - less than 1.5MB/s, though my testing in NAND was not too rigorous.</p><p>Take these benchmarks with a grain of salt - I only tested large sequential writes, and I made sure only one thing was writing at a time (host or internal). If you are really concerned about performance for a particular workload, you&#039;ll want to simulate that workload and benchmark it yourself.</p><p>Xylosis: it&#039;s possible to use these as stand-alone devices, but I understand that unless you initialize the SD card from the host side, the internal device can&#039;t access SD storage. NAND and WiFi still work though. I think someone is working on a driver to deal with this, but nothing has materialized. I think cnlohr would know more than I about this though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216464">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">pixelk</div>
					<div class="post-datetime">
						1 Nov 2013, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>I know that&#039;s not what you asked for, but as I did them, I&#039;ll post those results so they don&#039;t go to waste :</p><p>(All tests performed on a Transcend USB3 SDCard reader in a USB3 port, with the cards previously formated usinfg SDFormat)</p><p>WifiSD 16Go Class 10<br /><span class="postimg"><img src="http://stuff.knackes.com/dld/201311/WifiSD-C10_6D2A4F93.png" alt="http://stuff.knackes.com/dld/201311/WifiSD-C10_6D2A4F93.png" /></span></p><p>FluCard 8Go Class 6<br /><span class="postimg"><img src="http://stuff.knackes.com/dld/201311/FluCard-C6_BB8484AD.png" alt="http://stuff.knackes.com/dld/201311/FluCard-C6_BB8484AD.png" /></span></p><p>AirCard with a Kingston 16GO Class 10 µSD<br /><span class="postimg"><img src="http://stuff.knackes.com/dld/201311/AirCard-C10_44054441.png" alt="http://stuff.knackes.com/dld/201311/AirCard-C10_44054441.png" /></span></p><p>The same µSD directly in the reader<br /><span class="postimg"><img src="http://stuff.knackes.com/dld/201311/Kingston-C10_621B0354.png" alt="http://stuff.knackes.com/dld/201311/Kingston-C10_621B0354.png" /></span></p><p>A Sandisk 16Go U1 µSD, that sadly the Aircard can&#039;t read<br /><span class="postimg"><img src="http://stuff.knackes.com/dld/201311/Sandisk-U1_2715EC5A.png" alt="http://stuff.knackes.com/dld/201311/Sandisk-U1_2715EC5A.png" /></span></p>											<p class="post-edited">(Last edited by <strong>pixelk</strong> on 1 Nov 2013, 18:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216820">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">hskorbi</div>
					<div class="post-datetime">
						5 Nov 2013, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Here are my results of looking at the debug pads on the PQI AirCard:</p><p>TP6&nbsp; &nbsp;- constant 1.8v, it&#039;s connected to a thick track to the wifi, so I think it&#039;s the power of the Wifi chip<br />TP8&nbsp; &nbsp;- unknown (constant 1.8v, it might has something to do with the wifi)<br />TP9&nbsp; &nbsp;- unknown (constant gnd, again, it might has something to do with the wifi)<br />Any idea on TP 8 and 9?</p><p>TP10&nbsp; &nbsp;- HOST D3<br />TP11&nbsp; &nbsp;- HOST CMD<br />TP12&nbsp; &nbsp;- HOST CLK<br />TP13&nbsp; &nbsp;- HOST D0<br />TP14&nbsp; &nbsp;- HOST D1<br />TP15&nbsp; &nbsp;- HOST D2</p><p>TP16&nbsp; &nbsp;- SD D3<br />TP17&nbsp; &nbsp;- SD CMD<br />TP18&nbsp; &nbsp;- SD CLK<br />TP19&nbsp; &nbsp;- SD D0<br />TP20&nbsp; &nbsp;- SD D1<br />TP21&nbsp; &nbsp;- SD D2<br />TP22&nbsp; &nbsp;- SD VCC (it&#039;s just vcc actually) (name of TP20 and TP22 is a guess, based on the visible parts)</p><p>So nothing particularly interesting here.</p><p>Unlabelled pads:<br /><span class="postimg"><img src="http://i.imgur.com/WBOshXv.jpg" alt="http://i.imgur.com/WBOshXv.jpg" /></span><br />PWM0 and PWM1 (i just made up the names): by their looks, here would be connected the tiny buzzer (it even has its place in the case, and also painted on the pcb), but i might be wrong. One of them is 0v, the other is 3.3v. The dmesg says at boot &quot;pwm set 0 \ pwm set 33685506&quot;, so I guess 33685506 is 100% duty cycle. I tried to play with the &quot;buzzer&quot; applet, which generated differend sets of values in dmesg, but no difference on the pads, so it might be that it&#039;s not properly implemented in software, or that these pads serve some other purpuse. Do we have the source code responsible for /dev/pwm and /dev/pwm1?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216821">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">dankrause</div>
					<div class="post-datetime">
						5 Nov 2013, 22:01					</div>
				</div>
				<div class="post-content content">
					<p>Grab <a href="http://www.pqigroup.com/download.aspx?dlfn=20130201103451001.zip">PQI Firmware v1.47</a> and look in Linux_KA_2_6/arch/arm/mach-ka2000/ka2000-pwm.c for the source to /dev/ka-pwm, which I believe is the device you&#039;re looking for.</p>											<p class="post-edited">(Last edited by <strong>dankrause</strong> on 5 Nov 2013, 22:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216824">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">pixelk</div>
					<div class="post-datetime">
						5 Nov 2013, 22:19					</div>
				</div>
				<div class="post-content content">
					<p>Nice work hskorbi !<br />Maybe there&#039;s also some capacitors that aren&#039;t populated between the GND and PWM0/PWM1, even if there isn&#039;t one in the FluCard that has a working buzzer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217536">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">hybridmetta</div>
					<div class="post-datetime">
						14 Nov 2013, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone.<br />Been following this thread since the beginning and i have to say the work everyone is making is amazing. Who would think that such a tiny card could be capable of so much !? Can&#039;t wait to have openwrt on it one day!</p><p>Anyway, i&#039;ve been experimenting with dankrause firmware release 0.2 for a few days on a PQI Aircard. After setting up a chrooted debian filesystem, i realized that the card felt slower then with the original firmware. Is it because the PLL is turned off to lower the power consumption? If so, is there any way to turn it on &#039;on-the-fly&#039;?</p><p>The main difference i could see on dmesg was<br /></p><div class="codebox"><pre><code>[    0.000000] (192-192-1)pclk rate 96000000</code></pre></div><div class="codebox"><pre><code>[    0.030000] Calibrating delay loop... 421.06 BogoMIPS (lpj=2105344)</code></pre></div><p>on the original firmware<br /></p><div class="codebox"><pre><code>[    0.000000] (192-96-1)pclk rate 96000000</code></pre></div><div class="codebox"><pre><code>[    0.030000] Calibrating delay loop... 50.68 BogoMIPS (lpj=253440)</code></pre></div><p>on dankrause firmware 0.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217964">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">dankrause</div>
					<div class="post-datetime">
						19 Nov 2013, 17:37					</div>
				</div>
				<div class="post-content content">
					<p>hybridmetta: As far as I can tell, that&#039;s caused by the kernel. The kernel included in my release was built by Dmitry Grinberg <a href="http://dmitry.gr/index.php?r=05.Projects&amp;proj=15.%20Transcend%20WiFiSD">here</a>. I&#039;m guessing that if we want to change that setting on boot, we&#039;ll need to change it in the kernel config. I haven&#039;t had time to dig into a way to configure it at runtime though. I&#039;ll check it out when I have a moment.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217987">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">cnlohr</div>
					<div class="post-datetime">
						20 Nov 2013, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>I just got my boards in today and soldered one up.&nbsp; (This is still for the Transcend card)</p><p><a href="http://imgur.com/a/OnEm3">http://imgur.com/a/OnEm3</a></p><p>I am still trying to find alternative mechanisms to communicate from Linux inside the card, via the SD interface to my AVR outside.&nbsp; </p><p>I have tried CMD56, but have been getting some very confusing results.&nbsp; Whenever I try to do a CMD56 read, it fails, and I can&#039;t seem to abord.&nbsp; Same to writing.&nbsp; It doesn&#039;t look like I can use any other general registers to communicate back and forth.&nbsp; Does anyone know if you can read back from the password area in CMD42?</p><p>Any other ideas for a mechanism to communicate back and forth over the SD interface?</p>											<p class="post-edited">(Last edited by <strong>cnlohr</strong> on 20 Nov 2013, 00:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218057">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">dankrause</div>
					<div class="post-datetime">
						20 Nov 2013, 18:11					</div>
				</div>
				<div class="post-content content">
					<p>cnlohr: I&#039;m not to familiar with the SD SPI protocol, but I&#039;m going over some docs right now. Have you attempted using CMD55? Is it fair to assume you&#039;re patching (or temporarily replacing) the ka2000-sdio driver to handle communication from that side? There&#039;s a reasonable chance you&#039;ll run into problems with the keyasic chipset not passing commands into the bus that the kernel uses to talk to the SD host.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218869">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						30 Nov 2013, 13:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Xylosis wrote:</cite><blockquote><p>@moroboshi can you be linked to the ranma here?<br /><a href="https://www.mikrocontroller.net/topic/303547#3313014">https://www.mikrocontroller.net/topic/303547#3313014</a></p></blockquote></div><p>Eeeyup.</p><div class="quotebox"><blockquote><p>And with all the nice hq pictures at the first page where would be the place to add an external antenna (e.g. 5-8 dbi gain) to the transcend card? On each end of the copper bars?</p></blockquote></div><p>Nope.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219062">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">hybridmetta</div>
					<div class="post-datetime">
						3 Dec 2013, 02:45					</div>
				</div>
				<div class="post-content content">
					<p>@dankrause Thanks for the clarification.</p><p>Has anyone successfully used the PQI Aircard in SPI mode? I gave it a shot myself but i don&#039;t seem to get any valid response from CMD0. All the other regular SD cards i tested responded correctly with 0x01 but the PQI always responds with 0x80 for the first try and 0xFF for the retries. That looks weird because the start bit should be 0 but it always comes back as 1. Did PQI decide not to implement SPI or am i missing something?</p><p>@cnlohr Did you try CMD53 (IO_RW_EXTENDED)? I skimmed though the SDIO specification in <a href="https://www.sdcard.org/developers/overview/sdio/sdio_spec/Simplified_SDIO_Card_Spec.pdf">https://www.sdcard.org/developers/overv … d_Spec.pdf</a> and it looks like there might be some usable registers for special functions. For what i could tell, SDIO devices <em>should</em> be available though SPI. If the card exposes an SDIO interface then maybe we can send something like 0x75 (command) 0x04 0x00 0x00 0x00 (argument) 0x01 (assuming CRC is off) and receive 512 bytes containing the functions available?</p><p>EDIT: <a href="https://www.sdcard.org/downloads/pls/simplified_specs/archive/partE1_300.pdf">https://www.sdcard.org/downloads/pls/si … E1_300.pdf</a> is the file with more up to date specs</p>											<p class="post-edited">(Last edited by <strong>hybridmetta</strong> on 3 Dec 2013, 03:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219419">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">Filin</div>
					<div class="post-datetime">
						8 Dec 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys.<br />I wonder, is it possible to add WebRadioReciever ability to this SD card?</p><p>Just insert such card in your car stereo and listen TuneIn. Great feature, is not it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222197">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">rkordmaa</div>
					<div class="post-datetime">
						9 Jan 2014, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>Okey - so an awsome hack on its own, but not terribly useful without proper IO capabilities. And I don&#039;t count doing IO over sd card very proper (great hack, but still). So i was thinking...</p><p>Only built in and accessible IO capability is the slave SD card on PQI Air.<br />So if one does something like so:<br />[PQI Air card]--&gt;[FPGA]--&gt;[uSD card]</p><p>You make the FPGA just pass through the SD interface - except when PQI Air card attempts to read/write block X, doesnt have to be in a partitioned section of the card at all.<br />In such a case you read/write the data to FPGA internal or external ram instead of passing it to uSD.<br />By this point you already have full IO capability.<br />To make it &quot;proper&quot; one could make a task in Linux that periodically syncs a memory region to said &quot;disk block&quot;.<br />And hey presto - you have a memory link between card RAM and external RAM (or registers of hardware interface x - whatever you want on the FPGA). So your programs see any interfaces you put on fpga as local memory space.</p><p>While I can do FPGA programming (so-so) my Linux-fu approaches zero. <br />So im not 100% sure this approach would work - thus I would appreciate some feedback on the idea.</p><p>Meanwhile im waiting for a PQI card and Transcend card I bought, so it will be quite a while before I get around to testing the idea on my own. Anyone else interested and capable of testing the idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222218">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						9 Jan 2014, 22:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rkordmaa wrote:</cite><blockquote><p>Okey - so an awsome hack on its own, but not terribly useful without proper IO capabilities. And I don&#039;t count doing IO over sd card very proper (great hack, but still). So i was thinking...</p><p>Only built in and accessible IO capability is the slave SD card on PQI Air.<br />So if one does something like so:<br />[PQI Air card]--&gt;[FPGA]--&gt;[uSD card]</p><p>You make the FPGA just pass through the SD interface - except when PQI Air card attempts to read/write block X, doesnt have to be in a partitioned section of the card at all.<br />In such a case you read/write the data to FPGA internal or external ram instead of passing it to uSD.<br />By this point you already have full IO capability.<br />To make it &quot;proper&quot; one could make a task in Linux that periodically syncs a memory region to said &quot;disk block&quot;.<br />And hey presto - you have a memory link between card RAM and external RAM (or registers of hardware interface x - whatever you want on the FPGA). So your programs see any interfaces you put on fpga as local memory space.</p><p>While I can do FPGA programming (so-so) my Linux-fu approaches zero. <br />So im not 100% sure this approach would work - thus I would appreciate some feedback on the idea.</p><p>Meanwhile im waiting for a PQI card and Transcend card I bought, so it will be quite a while before I get around to testing the idea on my own. Anyone else interested and capable of testing the idea?</p></blockquote></div><p>I think this would work just fine, however at the point where you involve an FPGA to do it you&#039;re probably better off to go for a better SoC to begin with. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>A different possible angle:<br />At the recent 30C3 conference there was a talk about running your own code on the microcontroller in normal SD cards (8051 in that case):<br /><a href="http://bunniefoo.com/bunnie/sdcard-30c3-pub.pdf">http://bunniefoo.com/bunnie/sdcard-30c3-pub.pdf</a></p><p>If you could program the uSD or SD controller behind the PQI or Transcend card you could implement special SD commands for a host to host communication channel in a mailbox manner.<br />e.g. implement 4 custom SD commands:<br />cmd1) poll data for hosta<br />cmd2) poll data for hostb<br />cmd3) send data to hosta<br />cmd4) send data to hostb</p><p>Then communication could go</p><p>[PC]--&gt;uSD card--&gt;[PQI SoC]</p><p>and vice versa without resorting to abusing the filesystem.<br />OTOH if you do this you could just implement the same on raw disk blocks.<br />e.g. make sure it&#039;s partitioned with a parititon table and use the unused blocks between partition table and first filesystem to<br />implement this even without custom commands (but at the expense of increased flash wear).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222227">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">pixelk</div>
					<div class="post-datetime">
						9 Jan 2014, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I agree with moroboshi, a FPGA is just overkill.</p><p>The work talked about at 30C3 by bunny is very dependent on the memory microcontroller and would only work with very few cards. If it targets SD cards with embeded memory, we have no guarantee the vendor won&#039;t change the chip the next day.<br />Those both sound like a lot of work to solve a problem that doesn&#039;t really exist.</p><p>GPIO are nice but are not a main feature of an OpenWRT setup. If you&#039;re so desperate for IO in a small package there&#039;s a ton of cheaper and simpler solution (I won&#039;t even try to list them).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222293">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">generatorglukoff</div>
					<div class="post-datetime">
						10 Jan 2014, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve done small research and found out that there are register definitions for sdio switch in Linux_KA_2_6/arch/arm/mach-ka2000/include/mach/ka2000_define.h (everything that starts with SDSW_). Not many information, but at least a hopefully meaningful names.</p><p>Also, there is u-boot-gpl/arch/arm/cpu/arm926ejs/keyasic/sdctrl-m2.c &quot;library&quot; for controlling M2, that seems to be statically compiled or copy-pasted into ka2000-sdhc module (same functions present).</p><p>Furthermore, it seems that ka2000-sdhc module setups and receives interrupts on some (every? predefined? --- don&#039;t know yet) commands been sent from host.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222335">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">rkordmaa</div>
					<div class="post-datetime">
						10 Jan 2014, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>Meh, FPGA-s are much easier than many people think. Easier than hacking SD cards to do something its not meant for.<br />By IO I didnt really mean GPIO specifically, just general device IO-s. SPI-s, UART-s, I2C-s, adc, MII, whatever you need or want.<br />Sure every MCU does much of that all that and more(rarely all of that at the same time), but what is not easy to do on your own hardware is Linux and wifi.<br />And wifi is an awesome way to get debug access.</p><p>With this SD card hack I can get MPU, Memory, Storage, Wifi all in one small package already running a full opsys.<br />Thats a huge amount of work i dont have to spend on making the base system and can instead spend on designing and programming the application (and that is 100X easier to do because you are running your code on Linux not opsys-less)</p><p>I will deffinitely attempt this hack, potential benefits are just too awesome to pass by.<br />IO capability of a FPGA (if its digital you can do it)<br />Programming capabilities of Linux<br />And wifi as cherry on top.<br />All that in a damn small package.</p><p>Intel didn&#039;t announce Edison for nothing, this kind of approach will become very common in near future (my humble prediction).<br />May not be a SD card format, but this kind of plug and play entire computer to your application - this will become very common.<br />These wifi sd manufacturers are idiots to market the products for end user. Open it up and market for hardware devs and everyone will want to use one in their product, because it makes development and prototyping cycle so much easier and shorter.</p><p>Sure you could go with some off the shelf SoC solution, like say xilinx zynq, but these are not exactly cheap, some 59$ for cheapest ic of the range alone, not something you can afford to stuff into your volume consumer product. And if you dont have volumes to justify making a custom SoC... well tough luck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222336">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">zerg</div>
					<div class="post-datetime">
						10 Jan 2014, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>i wish to use wifi sd card as ordinary sd card in windows with drag &amp; drop operations with files/folders.<br />is it possible to get operate with wifi sd card by this method and access to it like ordinary net share by \\ip_address path name?</p><p>//im sorry if i miss answer of my question.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222766">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">generatorglukoff</div>
					<div class="post-datetime">
						15 Jan 2014, 00:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve removed ka2000_sdhc.ko from firmware and did a few experiments with sd switch interrupts.<br />First of all, removal of that module leaves device completely operational, yet sd storage is inaccessible. You can connect via wifi and so on.</p><p>It seems possible to catch at least read accesses to sd, proof-of-concept here: <a href="https://bitbucket.org/generatorglukoff/wifisd/src/tip/01_interrupts/?at=default">https://bitbucket.org/generatorglukoff/ … at=default</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222803">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						15 Jan 2014, 13:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>generatorglukoff wrote:</cite><blockquote><p>Also, there is u-boot-gpl/arch/arm/cpu/arm926ejs/keyasic/sdctrl-m2.c &quot;library&quot; for controlling M2, that seems to be statically compiled or copy-pasted into ka2000-sdhc module (same functions present).</p></blockquote></div><p>Nice find, seems I didn&#039;t download the GPL release that included that one.</p><div class="quotebox"><cite>generatorglukoff wrote:</cite><blockquote><p>Furthermore, it seems that ka2000-sdhc module setups and receives interrupts on some (every? predefined? --- don&#039;t know yet) commands been sent from host.</p></blockquote></div><p>Yeah, I know that some things are possible with the switch module, but haven&#039;t had time to play with it much at all yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222804">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">moroboshi</div>
					<div class="post-datetime">
						15 Jan 2014, 13:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rkordmaa wrote:</cite><blockquote><p>Meh, FPGA-s are much easier than many people think. Easier than hacking SD cards to do something its not meant for.</p></blockquote></div><p>Well, my main thinking is that if you go with an FPGA and all the supporting bits then you&#039;ll end up much bigger than the SD card form factor and could have gone with a beablebone or RasPi to begin with. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Would still be a very cool hack of course.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222867">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						16 Jan 2014, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi. I know I am a bit late to this party, but I really got interested in those hackable devices.<br />I&#039;ve bought cheaply the 16GB transcend on eBay from some guy who didn&#039;t have a use for it...<br />I am following instructions from here to make it usable and everything going fine so far.</p><p>The other thread is looking at alternative SD WiFi cards. I wanted to find more information about ez share cards.<br />I&#039;ve found <a href="http://www.dealwinwin.com/Consumer-Electronics/ez-Share-Wi-Fi-SD-Card-16-GB-Red--ID46456/">http://www.dealwinwin.com/Consumer-Elec … --ID46456/</a> and my helpful wife helped me read the FCC id. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />So I got here: <a href="https://apps.fcc.gov/oetcf/eas/reports/ViewExhibitReport.cfm?mode=Exhibits&amp;calledFromFrame=Y&amp;application_id=756112&amp;fcc_id=A7JEZS126">https://apps.fcc.gov/oetcf/eas/reports/ … =A7JEZS126</a></p><p>Especially interesting part is internal photos document. Do you more experienced SD Wifi hackers recognize these internals? Does it look like KA2000?</p>											<p class="post-edited">(Last edited by <strong>sjachim</strong> on 16 Jan 2014, 03:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222951">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">generatorglukoff</div>
					<div class="post-datetime">
						17 Jan 2014, 02:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moroboshi wrote:</cite><blockquote><p>Yeah, I know that some things are possible with the switch module, but haven&#039;t had time to play with it much at all yet.</p></blockquote></div><p>I personally dream of having sd storage + wifi + accelerator of whatever (e.g. crypto) in such small package and actually use it in RPi.</p><p>Anyway, right now I&#039;m working with disassembly of ka2000_sdhc.ko from transcend&#039;s firmware v1.6+. I seems found dma regs for sd switch, but I haven&#039;t yet luck to correctly implement transfers.</p><p>It seems, that stock wifi sd card has some vendor specific sd/mmc commands --- cmd 48 &amp; cmd 49. One is for reading and other is for writing a block of 0x200 (512) bytes into ka2000_sdhc.ko memory. I haven&#039;t yet found any usage for that memory address, except they are been accessible via ioctl to /dev/sdsw device file.</p><p>Also, it strongly seems, that dma for switch implementation are equal to other ka2000 dma implementations (e.g. for sd card and for sdio). They are following:<br />#define SDSW_BUF_TRAN_CTRL_REG&nbsp; &nbsp; &nbsp;SDSW_BASE + 0x22C<br />#define SDSW_DMA_SACH0_REG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SDSW_BASE + 0x230<br />#define SDSW_DMA_TCCH0_REG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SDSW_BASE + 0x234<br />#define SDSW_DMA_CTRCH0_REG&nbsp; &nbsp; &nbsp; &nbsp; SDSW_BASE + 0x238<br />#define SDSW_DMA_DACH1_REG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SDSW_BASE + 0x240<br />#define SDSW_DMA_TCCH1_REG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;SDSW_BASE + 0x244<br />#define SDSW_DMA_CTRCH1_REG&nbsp; &nbsp; &nbsp; &nbsp; SDSW_BASE + 0x248<br />#define SDSW_DMA_INTS_REG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SDSW_BASE + 0x24C</p><p>These are explicitly used in the module and their usage is consistent with usage of other dmas.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223404">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">ttytt</div>
					<div class="post-datetime">
						21 Jan 2014, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Is there anyone experiencing stability issue with the Transcend 16Gb V1.8? Everything connects fine, I am doing my thing on a telnet connection and boom for no reason after a while (could be after 1 or 10 min), the card is no longer responding. Then I need to unplug the card to restart the system. I tried to figure out a pattern why the card crash but I don&#039;t have any answer right now.&nbsp; </p><p>So I was wondering how is the stability in general with the Transcend card? What&#039;s your experience out there?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223450">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">sjachim</div>
					<div class="post-datetime">
						22 Jan 2014, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>ttytt, What are you using as host/power supply for your card? My card doesn&#039;t work at all when inserted into laptops SD card slot, but when I use cheap external USB multi card reader it works no problems.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 10</div><nav><ul><li><a href="viewtopic.php%3Fid=45820&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=45820&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=45820&amp;p=10.html">10</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>