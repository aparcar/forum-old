<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to take advantage my hardware resource of x86 with openwrt ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p202380">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						21 May 2013, 12:15					</div>
				</div>
				<div class="post-content content">
					<p>below are part of my x86 resource:<br />&nbsp; &nbsp; memory&nbsp; &nbsp;:&nbsp; &nbsp;4GB DDR3 1600MHz<br />&nbsp; &nbsp; hard disk :&nbsp; &nbsp;250 GB SATA3</p><p>when I runed openwrt on x86 and use commandline tool,such as &#039;top&#039; and &#039;df&#039;<br />to wathch the state of it, I found that the virtual memory is &lt;1GB and the rootfs<br />total size is 50MB,thus my question is how to use my hardware resource sufficiently?</p><p>I make and install my openwrt on x86 follow the below steps like these:<br />1. make a usb linux system, I use slitaz here.<br />2. and build the specific image of openwrt for my x86 device.I use xxx-ext4.img here.<br />&nbsp; &nbsp; enter make menuconfig-&gt; target image-&gt; ....<br />&nbsp; &nbsp; then copy the image file to usb storage.<br />3. booting my x86 via usb, and use dd tools to write my image.<br />&nbsp; &nbsp; &nbsp;3.1&nbsp; &nbsp;use mkfs.ext4 tools to format whole space of my 250GB hard disk.&lt;!!!!!&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mkfs.ext4 /dev/sda<br />&nbsp; &nbsp; &nbsp;3.2&nbsp; &nbsp;dd if=/xx/xx-ext4.img of=/dev/sda<br />4. then my x86 device can run, and I use the &#039;df&#039; and &#039;top&#039; to check my device&#039;s basic state.<br />&nbsp; &nbsp; thus I found that my space available size is only 50MB, and the virtual memory size is &lt;1GB.</p><br /><p><span class="postimg"><img src="http://www.right.com.cn/forum/forum.php?mod=attachment&amp;aid=NzM0NDl8NWFjMzY4ZTB8MTM2OTIxNTgzMHwxOTgwMzF8MTIzMzkz&amp;noupdate=yes" alt="PunBB bbcode test" /></span></p>											<p class="post-edited">(Last edited by <strong>banglang.huang</strong> on 22 May 2013, 12:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202381">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						21 May 2013, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>How have you partitioned the had drive?<br />Take a look here:<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202424">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						21 May 2013, 17:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>How have you partitioned the had drive?<br />Take a look here:<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p></blockquote></div><p>I think I should explain my target for more detail.</p><p>I make and install my openwrt on x86 follow the below steps like these:</p><p>1. make a usb linux system, I use slitaz here.</p><p>2. and build the specific image of openwrt for my x86 device.I use xxx-ext4.img here.</p><p>&nbsp; &nbsp; enter make menuconfig-&gt; target image-&gt; ....</p><p>&nbsp; &nbsp; then copy the image file to usb storage.</p><p>3. booting my x86 via usb, and use dd tools to write my image.</p><p>&nbsp; &nbsp; &nbsp;3.1&nbsp; &nbsp;use mkfs.ext4 tools to format whole space of my 250GB hard disk.&lt;!!!!!&gt;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mkfs.ext4 /dev/sda</p><p>&nbsp; &nbsp; &nbsp;3.2&nbsp; &nbsp;dd if=/xx/xx-ext4.img of=/dev/sda</p><p>4. then my x86 device can run, and I use the &#039;df&#039; and &#039;top&#039; to check my device&#039;s basic state.<br />&nbsp; &nbsp; thus I found that my space available size is only 50MB, and the virtual memory size is &lt;1GB.</p><p><span class="postimg"><img src="http://www.right.com.cn/forum/forum.php?mod=attachment&amp;aid=NzM0MDR8ODljZGE1MjB8MTM2OTE0NTYwM3wxOTgwMzF8MTIzMzkz&amp;noupdate=yes" alt="p1" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202432">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 May 2013, 20:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>banglang.huang wrote:</cite><blockquote><p>&nbsp; &nbsp; &nbsp;3.2&nbsp; &nbsp;dd if=/xx/xx-ext4.img of=/dev/sda</p></blockquote></div><p>This will cause your /dev/sda to have an exact image of /xx/xx-ext4.img. If the image is 1KB and the /dev/sda ia 1TB, then it will become a 1KB partition, IIRC.</p><p>What you want is to mount the /xx/xx-ext4.img some where and then use <em>cp</em> utility to copy all the files on the mounted partition to your /dev/sdaX (where X is the partition of your sda device).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202466">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						22 May 2013, 04:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>banglang.huang wrote:</cite><blockquote><p>&nbsp; &nbsp; &nbsp;3.2&nbsp; &nbsp;dd if=/xx/xx-ext4.img of=/dev/sda</p></blockquote></div><p>This will cause your /dev/sda to have an exact image of /xx/xx-ext4.img. If the image is 1KB and the /dev/sda ia 1TB, then it will become a 1KB partition, IIRC.</p><p>What you want is to mount the /xx/xx-ext4.img some where and then use <em>cp</em> utility to copy all the files on the mounted partition to your /dev/sdaX (where X is the partition of your sda device).</p></blockquote></div><p>may be there exist other better solution.</p><p>here is my screen shot .<br /><span class="postimg"><img src="http://www.right.com.cn/forum/forum.php?mod=attachment&amp;aid=NzM0MDN8M2U0NWRlOTN8MTM2OTE4NjU1NnwxOTgwMzF8MTIzMzkz&amp;noupdate=yes" alt="P3" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202467">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 May 2013, 04:41					</div>
				</div>
				<div class="post-content content">
					<p>I hope so.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202468">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						22 May 2013, 04:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>I hope so.</p></blockquote></div><p>I want to use the rest of hard-disk spare space,and enlarge my tmpfs partition.</p>											<p class="post-edited">(Last edited by <strong>banglang.huang</strong> on 22 May 2013, 04:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202494">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						22 May 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>banglang.huang wrote:</cite><blockquote><p>&nbsp; &nbsp; &nbsp;3.2&nbsp; &nbsp;dd if=/xx/xx-ext4.img of=/dev/sda</p></blockquote></div><p>This will cause your /dev/sda to have an exact image of /xx/xx-ext4.img. If the image is 1KB and the /dev/sda ia 1TB, then it will become a 1KB partition, IIRC.</p><p>What you want is to mount the /xx/xx-ext4.img some where and then use <em>cp</em> utility to copy all the files on the mounted partition to your /dev/sdaX (where X is the partition of your sda device).</p></blockquote></div><br /><p>please have a look at the topic picture, I upload it in recent.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202495">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						22 May 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>How have you partitioned the had drive?<br />Take a look here:<br /><a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p></blockquote></div><p>please have a look at the topic picture, I upload it in recent.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205909">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">aircraft</div>
					<div class="post-datetime">
						28 Jun 2013, 07:29					</div>
				</div>
				<div class="post-content content">
					<p>I have the same question as banglang.huang.&nbsp; Already solved ? PLS let me know ,thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205910">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						28 Jun 2013, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>One solution is do as mazilo says and cp the files over.<br />Another is to create a partition of the same size as the img file you want to dd on to it. That will leave another partition for other use.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p205922">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						28 Jun 2013, 12:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>One solution is do as mazilo says and cp the files over.<br />Another is to create a partition of the same size as the img file you want to dd on to it. That will leave another partition for other use.</p></blockquote></div><p>OK , I have made a better solution, just format the reset space( as ext4 or jffs2) and mount it when the system boot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222677">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">banglang.huang</div>
					<div class="post-datetime">
						14 Jan 2014, 11:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>One solution is do as mazilo says and cp the files over.<br />Another is to create a partition of the same size as the img file you want to dd on to it. That will leave another partition for other use.</p></blockquote></div><br /><p>Hi robthebrew,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; I used &quot;top&quot; tool to check my physic memory usage, but found that , the totoal size is only more than 1GBytes while it is running with a 4GBytes DDR3 memory. Is the linux using the default value ? I want to enlarge the totoal physic memory show in the &quot;top&quot; menu. how can I make it?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>