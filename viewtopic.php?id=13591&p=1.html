<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Fonera: setting up AP and STD</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 20 Apr 2018 and 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=13591&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p59817">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						1 Dec 2007, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>hi all!</p><br /><p>i want to set up a wireless access point, with one fonera, and i want to connect to it with some others foneras (setted up in std mode).</p><p>it is possible?</p><p>i already red <a href="http://downloads.openwrt.org/kamikaze/docs/openwrt.html">this</a> documentation, but i don&#039;t understand how to do that i want..</p><br /><p>well:</p><br /><p><strong>fonera AP:</strong></p><p>#vi /etc/confic/<strong>network</strong> <br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1 <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.1&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0&nbsp; </p><p>config route&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 192.168.1.100 </p><p>#vi /etc/config/<strong>wireless</strong> <br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><br /><p><strong>fonera STD:</strong></p><p>#vi /etc/confic/<strong>network</strong> <br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1 <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.2&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0&nbsp; </p><p>config route&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp;default&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 0.0.0.0&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 10.10.10.1 </p><p>#vi /etc/config/<strong>wireless</strong> <br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;std<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><br /><p>what is the right configuration of the Fonera.AP and the Fonera.STD for working properly ?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 1 Dec 2007, 18:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59825">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kevin</div>
					<div class="post-datetime">
						1 Dec 2007, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s sta, not std<br />you only need option network when using a bridge (you also have a configuration specified for the interface already)<br />you have the same ip address (and range) on two different networks. it could work if your using nat, though.<br />you can specify a (default) gateway address in the configuration for the interface, like this, but if config route works I don&#039;t see a problem with it:<br />config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;&quot;eth0.1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.182.10<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 192.168.182.3</p><p>to be clear, there&#039;s no technical reason why you couldn&#039;t make this all the same network and bridge it, but I don&#039;t know anything about your setup or reasons, and there&#039;s good reasons for splitting things up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59828">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						1 Dec 2007, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>i wanna do smething like this: <a href="http://img213.imageshack.us/img213/8692/apstaln6.jpg">http://img213.imageshack.us/img213/8692/apstaln6.jpg</a></p><p>but i don&#039;t understand which are the correctly configuration of each foneras (wireless and network files): can you show me how configure its?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 15 Dec 2007, 10:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59883">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						3 Dec 2007, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>(i&#039;ve a set of 5 static IP (77.113.158.153/29), give me by my provider)</p><br /><p>so, i understand that, the AP, want to be set with these parameters:<br />(with this AP configuration, i can connect to it with my portable pc, so, i think it&#039;s functionally)</p><p><strong>fonera AP:</strong></p><p>#vi /etc/confic/<strong>network</strong> <br />config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.154<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.153<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><br /><p>#vi /etc/config/<strong>wireless</strong> <br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><br /><p>but i don&#039;t understand which is the correctly configuration of the STA:</p><p><strong>fonera STA:</strong></p><p>#vi /etc/confic/<strong>network</strong> <br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;bridge&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.155<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.154<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#vi /etc/config/<strong>wireless</strong> <br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><br /><br /><p>anyone can help me please?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 4 Dec 2007, 13:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p59946">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						4 Dec 2007, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>i try to connect to the Fonera AP, using a pc, with a wireless card, and it&#039;s connect immediately..!</p><p>but, if i want to connect with the Fonera STA, how do i do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60022">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						6 Dec 2007, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>is there anything to setup?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60038">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						6 Dec 2007, 09:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I used a fonera in station-mode a few months ago, and a bridge between the wifi- and ethernet-interface never worked for me in stationmode, but I had a working configuration with routing between them. </p><p>and even if you get a bridged setup working, I guess you will run out of ip-addresses. so all your foneras will have an address but there will be no addresses left for clients which connects to them. <br />and your routing is also kind of messed up. if everything is bridged, the standardgateway of the foneras in stationmode should be 77.113.158.153 (if this is your real gateway) too, and not the ip of the AP.</p><p>Your AP configuration seems fine, but for the station-mode you should configure routing not bridging. try an configuration like that: </p><p><strong>fonera STA:</strong></p><p>#vi /etc/confic/network<br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.155<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.153<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.10.1 # or some other private ip-subnet <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#vi /etc/config/wireless<br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan&nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><p>so your wifi-device is the wan-interface, the ethernet port is the lan interface and dhcp, masquarading and dns-forwarding will work for the clients connected to the foneras in station modes out of the box.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60041">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						6 Dec 2007, 10:42					</div>
				</div>
				<div class="post-content content">
					<p>yes, ok, but in STA Fonera, i&#039;m less of the route that send to client (eth0) the packages received (ath0) from the AP Fonera.. is it correct?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 6 Dec 2007, 10:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60051">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						6 Dec 2007, 14:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Trew wrote:</cite><blockquote><p>yes, ok, but in STA Fonera, i&#039;m less of the route that send to client (eth0) the packages received (ath0) from the AP Fonera.. is it correct?</p></blockquote></div><p>sorry, maybe I can help, but I really have no idea what you are asking</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60069">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						6 Dec 2007, 19:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>sorry, maybe I can help, but I really have no idea what you are asking</p></blockquote></div><p>sorry for my worst topic..</p><p>i wanna do smething like this: <a href="http://img213.imageshack.us/img213/8692/apstaln6.jpg">http://img213.imageshack.us/img213/8692/apstaln6.jpg</a></p><p>can you give me the correct configuration files (dhcp, network, wireless) of each Foneras ?</p><p>Fonera AP:<br />wireless: ?<br />network: ?<br />dhcp: ?<br />ruote: ?</p><p>Fonera STA:<br />wireless: ?<br />network: ?<br />dhcp: ?<br />route: ?</p><br /><p>thanks so much,<br />Trew</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 15 Dec 2007, 10:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60075">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						6 Dec 2007, 21:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>you wrote that you get 5 public ip-addresses. do you want to to use public-addresses for the foneras of jack and sahra then you need to bridge the wifi and ethernet of the AP, if you want it like in your example then you need configure nat between them. and should shara an jack be able to &quot;talk&quot; to each other? because then you should configure a routed setup without nat on both sta-foneras.</p><p>but a working configuration which will be like your diagram could look like this: </p><p>AP:</p><p>/etc/config/network</p><p>config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.101<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway 77.113.158.100</p><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><p>/etc/config/wireless:</p><p>config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><br /><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><p>Jacks and Saras fonera STA-mode:</p><p>#vi /etc/confic/network<br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.2 # and for the other sta-fonera 10.10.10.3<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 10.10.10.1</p><p>config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1 <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#vi /etc/config/wireless<br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><br /><p>this config&nbsp; worked for me but you can also try to get a wds-connection working. This wasnÂ´t a posibillity for my because I had only limited access to the AP, but you have full access to all devices so maybe you should have a look at <a href="http://forum.openwrt.org/viewtopic.php?id=11849">http://forum.openwrt.org/viewtopic.php?id=11849</a> with this setup you can bridge everything together and it should be easy to interconnect between all pcs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60090">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						7 Dec 2007, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>hi eleon!<br /></p><div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>do you want to to use public-addresses for the foneras of jack and sahra then you need to bridge the wifi and ethernet of the AP. if you want it like in your example then you need configure nat between them. and should shara an jack be able to &quot;talk&quot; to each other? because then you should configure a routed setup without nat on both sta-foneras.</p></blockquote></div><p>so and so.. i want only that Sara (fonera STA) and Jack (fonera STA) able to go on internet by passing through Trew (fonera AP).<br />nothing other.</p><div class="quotebox"><blockquote><p>but a working configuration which will be like your diagram could look like this:</p></blockquote></div><p>i&#039;ve setup my Fonera access point, like this (your) configuration:</p><p>Fonera AP (Trew):</p><p># vi /etc/config/network </p><p>config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.101&nbsp; &nbsp; &nbsp; # forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248&nbsp; &nbsp; &nbsp; &nbsp; # forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>config interface wlan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><br /><p># vi /etc/config/wireless </p><p>config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wlan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><br /><p>now, i want to test it, so, i take a PC (with a wireless card) and i connect to Fonera AP, for test it..</p><p>so, i&#039;ve this results:</p><p>- form openwrt console, i&#039;m able to ping some host over internet.<br />- from the PC, i cannot ping internet.<br />- from the PC i can only ping the Fonera ath0 (192.168.1.1) and the fonera eth0 (77.113.158.101).<br />- from the PC, if i traceroute the real gateway (77.113.158.100), i have this results:</p><p>1&nbsp; 4ms&nbsp; 2ms&nbsp; 3ms&nbsp; 192.168.1.1<br />2&nbsp; *&nbsp; *&nbsp; *&nbsp; Richiesta scaduta.</p><p>so, i understand that the packages non able to route from 192.168.1.1 to 77.113.158.101, and so to 77.213.158.100.</p><p>how can i correct this?</p><br /><div class="quotebox"><blockquote><p>this config&nbsp; worked for me but you can also try to get a wds-connection working.</p></blockquote></div><p>ok, after this AP-STA networking, i will test WDS too..!</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 7 Dec 2007, 02:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60101">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						7 Dec 2007, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>Ok you ISP force the ipaddress and the subnetmask, but I donÂ´t think you are forced to name the interface &quot;lan&quot;, or are you? It cannot work if you change the interface names! masquarading (NAT), dns forwarding and so on is working from the lan-interface to the wan-interface, and the firewall settings also works with the wan-interface.<br />so the ethernet-port (eth0) of the fonera-AP needs to be named &quot;wan&quot;-interface and the wifi needs to be the &quot;lan&quot;-interface. it is not relavant if it is connected to something what you call &quot;lan&quot;. so if you use my config (ok, exept the wrong subnetmask and the missing dns-servers) you should be able to access the internet from a client connected to the wifi of your accesspoint. </p><p>your config could work too, but then you need to configure the routing and firewall-rules yourself, and I donÂ´t think you want to do this <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>so once again the config for the ap:</p><p># vi /etc/config/network </p><p>config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.101&nbsp; &nbsp; &nbsp; # forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248&nbsp; &nbsp; &nbsp; &nbsp; # forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.100&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;# forced by my isp<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><br /><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1 <br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><br /><p># vi /etc/config/wireless </p><p>config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><br /><p>and to your config of your wifi-network (lan): keep in mind that the ip-subnet of the wan- and lan- side of the sta-foneras need to be different so donÂ´t use 192.168.1.0/24 for both. or just use the config from my last posting</p>											<p class="post-edited">(Last edited by <strong>eleon216</strong> on 7 Dec 2007, 11:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60108">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						7 Dec 2007, 13:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>It cannot work if you change the interface names!</p></blockquote></div><p>sorry..!<br /></p><div class="quotebox"><blockquote><p>your config could work too, but then you need to configure the routing and firewall-rules yourself, and I donÂ´t think you want to do this</p></blockquote></div><p>exactly <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>so, i config my Fonera AP (Trew), like your configuration:</p><p># vi /etc/config/dhcp <br />config dhcp<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface&nbsp; &nbsp; &nbsp; &nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option start&nbsp; &nbsp; 100<br />&nbsp; &nbsp; &nbsp; &nbsp; option limit&nbsp; &nbsp; 150<br />&nbsp; &nbsp; &nbsp; &nbsp; option leasetime&nbsp; &nbsp; &nbsp; &nbsp; 12h</p><p>config dhcp<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface&nbsp; &nbsp; &nbsp; &nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option start&nbsp; &nbsp; 100<br />&nbsp; &nbsp; &nbsp; &nbsp; option limit&nbsp; &nbsp; 150<br />&nbsp; &nbsp; &nbsp; &nbsp; option leasetime&nbsp; &nbsp; &nbsp; &nbsp; 12h</p><p># vi /etc/config/wireless <br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><p># vi /etc/config/network <br />config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;77.113.158.101<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.248<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 77.113.158.100<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><p>and all works perfectly!!<br />i can connect with my PC (with wireless card), and i&#039;m able to browse internet!!<br />i can also browse files of all computer connected to the foneraAP!<br />wow!! thanks very, very, very much!!</p><br /><div class="quotebox"><blockquote><p>and to your config of your wifi-network (lan): keep in mind that the ip-subnet of the wan- and lan- side of the sta-foneras need to be different so donÂ´t use 192.168.1.0/24 for both. or just use the config from my last posting</p></blockquote></div><p>so, for the configuration of the Foneras STA (Jack and Sara), you say that:</p><p># vi /etc/config/dhcp <br />config dhcp<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface&nbsp; &nbsp; &nbsp; &nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option start&nbsp; &nbsp; 100<br />&nbsp; &nbsp; &nbsp; &nbsp; option limit&nbsp; &nbsp; 150<br />&nbsp; &nbsp; &nbsp; &nbsp; option leasetime&nbsp; &nbsp; &nbsp; &nbsp; 12h</p><p>config dhcp<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface&nbsp; &nbsp; &nbsp; &nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option start&nbsp; &nbsp; 100<br />&nbsp; &nbsp; &nbsp; &nbsp; option limit&nbsp; &nbsp; 150<br />&nbsp; &nbsp; &nbsp; &nbsp; option leasetime&nbsp; &nbsp; &nbsp; &nbsp; 12h</p><p>#vi /etc/config/wireless<br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 11</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;myssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption&nbsp; &nbsp; none</p><p>#vi /etc/confic/network<br />config interface loopback&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config interface wan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;ath0&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;10.10.10.2&nbsp; &nbsp; &nbsp;# and, for the other sta-fonera: 10.10.10.3<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 10.10.10.1</p><p>config interface lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1&nbsp; &nbsp; &nbsp; # and, for the other sta-fonera: 192.168.2.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0</p><p>and all works perfectly!!<br />using a PC, i can connect with FoneraSTA to FoneraAP, and i&#039;m able to browse internet form PC!!<br />spectacular!! thanks very much, too!!</p><br /><p>thanks thanks thanks ELEON,<br />Trew</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 9 Dec 2007, 11:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60227">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						10 Dec 2007, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>now, my configuration, is like this: <a href="http://img213.imageshack.us/img213/8692/apstaln6.jpg">http://img213.imageshack.us/img213/8692/apstaln6.jpg</a><br />and all conputer can browse internet very well!</p><br /><p>so, if i want to communicate through them (broswe files) ?<br />example:</p><p>TrewPC----cable----FoneraAP))))wireless((((FoneraSTA----cable----JackPC</p><p>simple: i wanna that TrewPC can talk to JackPC, and JackPC can talk to TrewPC</p><br /><p>have i to configure any route? which?</p><p>is it possible? or i have to setup an adhoc mode?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 15 Dec 2007, 10:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60243">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">j0inty</div>
					<div class="post-datetime">
						11 Dec 2007, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I think that isn&#039;t really easy to configure a way through all this nat routers (fonera).</p><p>I think you should configure it to 1 network with 3 bridges. But this need a NAT Router for your provider that is configured to LAN 192.168.0.1/24 and WAN: 77.113.158.101/255.255.255.248 gw 77.113.158.100 dns &lt;the ips&gt;</p><br /><br /><p>/////////////////////// CONFIGURATION /////////////////////////////////////////////////</p><p>Trew<br />PC:<br />IP: 192.168.0.10/24<br />GW/DNS: 192.168.0.1</p><p>Fonera:<br />/etc/config/network<br />## Ethernet<br />config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; option type&nbsp; &nbsp; bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.0.2<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; ## This option are optional. This options are not really needed by the bridge but for updates and soon<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 192.168.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>/etc/config/wireless<br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; option channel&nbsp; 1<br />&nbsp; &nbsp; option mode 11bg<br />&nbsp; &nbsp; option diversity 0<br />&nbsp; &nbsp; option txantenna 1<br />&nbsp; &nbsp; option rxantenna 1</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;ap<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;wssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option hidden&nbsp; &nbsp;0<br />&nbsp; &nbsp; &nbsp; &nbsp; option bgscan&nbsp; &nbsp;0<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><br /><p>The other PCs and Foneras configure like this:</p><p>PCs:<br />192.168.0.20/24&nbsp; # and 30&nbsp; &nbsp;// or something else<br />GW/DNS: 192.168.0.1</p><p>/etc/config/network<br />## Ethernet<br />config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; option type&nbsp; &nbsp; bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.0.3&nbsp; # and 4 for the third fonera<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; ## This option are optional. This options are not really needed by the bridge but for updates and soon<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 192.168.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>/etc/config/wireless<br />config wifi-device&nbsp; wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros<br />&nbsp; &nbsp; option channel&nbsp; 1<br />&nbsp; &nbsp; option mode 11bg<br />&nbsp; &nbsp; option diversity 0<br />&nbsp; &nbsp; option txantenna 1<br />&nbsp; &nbsp; option rxantenna 1</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;wssid<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption none</p><br /><br /><p>I have never test this configuration before because I don&#039;t have a second fonera. The Bridge should running well.</p><p>Little Tip (But can&#039;t garuanteded that this will work, but it may be.)</p><p>If you don&#039;t have a NAT Router then you can open your provider network over your bridges. Let the bridges how they are configured and only configure your client to your provider settings.</p><p>example PC Trew<br />ipaddr&nbsp; &nbsp;77.113.158.101<br />netmask&nbsp; 255.255.255.248<br />gateway&nbsp; 77.113.158.100<br />dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>and PC Trew get another IP to configure the fonares, too<br />ipaddr 192.168.0.10/24</p><p>and soon for the other PC.</p><br /><p>Hope it helps.<br />regards<br />j0inty.sL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60246">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						11 Dec 2007, 01:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j0inty wrote:</cite><blockquote><p>But this need a NAT Router for your provider<br />If you don&#039;t have a NAT Router then you can open your provider network over your bridges<br />Hope it helps.<br />regards<br />j0inty.sL</p></blockquote></div><p>yes, but i haven&#039;t any router.. and i can&#039;t apply your configuration..</p><p>i think that an access point may be not properly used for this my configuration request..!</p><p>Access Point is only a point of internet access, isn&#039;t it?!</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 11 Dec 2007, 01:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60250">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">j0inty</div>
					<div class="post-datetime">
						11 Dec 2007, 01:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Trew wrote:</cite><blockquote><p>yes, but i haven&#039;t any router.. and i can&#039;t apply your configuration..</p></blockquote></div><p>Thats why i give you the tip. For that soluition you don&#039;t need a seperate NAT Router.</p><div class="quotebox"><cite>j0inty wrote:</cite><blockquote><p>Little Tip (But can&#039;t garuanteded that this will work, but it may be.)</p><p>If you don&#039;t have a NAT Router then you can open your provider network over your bridges. Let the bridges how they are configured and only configure your clients to your provider settings.</p><p>example PC Trew<br />ipaddr&nbsp; &nbsp;77.113.158.101<br />netmask&nbsp; 255.255.255.248<br />gateway&nbsp; 77.113.158.100<br />dns&nbsp; &nbsp; &nbsp; 208.67.222.222 208.67.220.220</p><p>and PC Trew get another IP to configure the fonares, too<br />ipaddr 192.168.0.10/24</p><p>and soon for the other PC.</p></blockquote></div><div class="quotebox"><blockquote><p>Access Point is only a point of internet access, isn&#039;t it?!</p></blockquote></div><p>No an Access Point (at WLAN) is the endpoint for a WLAN Client to the network where the AP is in.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60251">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						11 Dec 2007, 01:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>j0inty wrote:</cite><blockquote><p>Thats why i give you the tip. For that soluition you don&#039;t need a seperate NAT Router</p></blockquote></div><p>mmmh.. <br />then, i don&#039;t understand how i have to configure all pc and fonera..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60252">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">j0inty</div>
					<div class="post-datetime">
						11 Dec 2007, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>that means that you setup the fonera so I had posted it. But the clients get your provider Config and the FoneraConfigPC get a second ip that is in the same network like the foneras.</p><p>Bridges work on Layer2 (MAC-Address) and not Layer3 (IP-Address)...so it ist possible to run more than one network over a bridge.</p><p>regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60267">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						11 Dec 2007, 10:53					</div>
				</div>
				<div class="post-content content">
					<p>how can i do it practically?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 11 Dec 2007, 10:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60270">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">j0inty</div>
					<div class="post-datetime">
						11 Dec 2007, 13:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Trew wrote:</cite><blockquote><p>how can i do it practically?</p></blockquote></div><p>Hi,</p><p>that was only one way to configure your network. I think this is the easiest and better way for your problem.</p><p>Because If you use brigdes you don&#039;t need ip/port forwarding rules and soon for the internal communication.</p><p>I would configure it how I said above.</p><p>Trew Fonera like this:<br /></p><div class="codebox"><pre><code>vi /etc/config/network
## Ethernet
config interface lan
        option ifname   eth0
    option type    bridge
        option proto    static
        option ipaddr   192.168.0.2
        option netmask  255.255.255.0

/etc/config/wireless
config wifi-device  wifi0
        option type     atheros
    option channel  1
    option mode 11bg
    option diversity 0
    option txantenna 1
    option rxantenna 1

config wifi-iface
        option device   wifi0
        option network  lan
        option mode     ap
        option ssid     wssid
        option hidden   0
        option bgscan   0
        option encryption none</code></pre></div><p>Other both Foneras<br /></p><div class="codebox"><pre><code>/etc/config/network
## Ethernet
config interface lan
        option ifname   eth0
    option type    bridge
        option proto    static
        option ipaddr   192.168.0.3  # and 4 for the third fonera
        option netmask  255.255.255.0

/etc/config/wireless
config wifi-device  wifi0
        option type     atheros
    option channel  1
    option mode 11bg
    option diversity 0
    option txantenna 1
    option rxantenna 1

config wifi-iface
        option device   wifi0
        option network  lan
        option mode     sta
        option ssid     wssid
        option encryption none</code></pre></div><p>Now you restart all foneras (Trew his fonera at first), then you configure the PCs with static provider IP like this:<br /></p><div class="codebox"><pre><code>Trew PC&#039;s
ipaddr   77.113.158.101
netmask  255.255.255.248
gateway  77.113.158.100
dns      208.67.222.222 208.67.220.220

and Trew PC get a second IP to be able to connect to the foneras to configure it.
ipaddr   192.168.0.1
netmask  255.255.255.0</code></pre></div><p>The other PC get an IP like this</p><div class="codebox"><pre><code>Other PC&#039;s
ipaddr   77.113.158.102  # and 103 for the third PC
netmask  255.255.255.248
gateway  77.113.158.100
dns      208.67.222.222 208.67.220.220</code></pre></div><p>But becarefull and have always in mind that all tree PC are now connected directly to the Internet so they need a Firewall and Antivirus protection. And you should use a WLAN Encryption like wpa or wpa2. But this needs some configurations settings more. Lets try to get it stable without encryption at first.</p><p>Troubleshooting:<br />1.<br />It may be that the default iptables rules (firewall in the fonera) can block traffic from the network. Have you straight problems you can connect to the foneras and disable the firewall. !!! BUT THIS ISN&#039;T A GOOD CHOICE !!!</p><p>2.<br />The bridge on Trew Fonera didn&#039;t run ??? Check the /etc/hostapd.conf<br /></p><div class="codebox"><pre><code># In case of madwifi driver, an additional configuration parameter, bridge,
# must be used to notify hostapd if the interface is included in a bridge. This
# parameter is not used with Host AP driver.
bridge=br-lan

# Driver interface type (hostap/wired/madwifi; default: hostap)
driver=madwifi</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60272">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						11 Dec 2007, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>you say that: &quot;and Trew PC get a second IP to be able to connect to the foneras to configure it.&quot;<br />yes but, how?<br />if i set an ip (77.113.158.101), on the ethernet protocol, how can i set another ip (192.168.1.1) ?</p>											<p class="post-edited">(Last edited by <strong>Trew</strong> on 11 Dec 2007, 17:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60278">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">j0inty</div>
					<div class="post-datetime">
						11 Dec 2007, 19:25					</div>
				</div>
				<div class="post-content content">
					<p>Are you a windows user ???</p><p>Then you have to go to the NetworkConnection -&gt; Properties --&gt; IP-Protokoll -&gt; Properties --&gt; more (or so)<br />I don&#039;t know it exactly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60282">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Trew</div>
					<div class="post-datetime">
						11 Dec 2007, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>ehm.. sorry, i&#039;m a mac user..!<br />muahahahaha, is there problems?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=13591&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>