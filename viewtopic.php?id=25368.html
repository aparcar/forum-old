<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt Backfire on Router with brcm47xx and 2MB ROM/8MB RAM (USR5461)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p111706">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						22 Jun 2010, 05:35					</div>
				</div>
				<div class="post-content content">
					<p>Hello, i own an U.S.Robotics USR5461 router running with dd-wrt micro on it for longer time. The router have USB-Port so i thought it would be nice to get the device working as a UMTS-Router.</p><p>I would like to know if it were possible to get that working with Backfire. I can add external strorage over usb-port (usb-hub together with 3g umts usb device) that can maybe also be used als swap. I never used Openwrt till now.</p><p>It is funny, that there is a firmware with over 2MB already: <a href="http://downloads.openwrt.org/backfire/10.03/brcm47xx/openwrt-usr5461-squashfs.bin">http://downloads.openwrt.org/backfire/1 … uashfs.bin</a>&nbsp; </p><p>When i build a smal firmware, how do i know what i must put inside and what not?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111895">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						25 Jun 2010, 12:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi ...</p><p>i once made an internet radio out of an usr5461 using a usb soundcard and a atmel atmega8 with software RC5 decoding and serial connection to switch channels via standard ir remote control. all resources of the router (flash, ram, cpu) are pretty much used up, but it works really great <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>now i got another usr5461 and i also own a huawei e122 usb utms modem. first i fokused on getting a umts connection and used a 512mb micro sd within the umts modem for additional disk space. so i dont need a usb hub and extra usb flash memory ... i got a working ppp connection and wifi hotspot but i messed around with iptables while compiling backfire and the kernel wasnt able to do correct NAT ... maybe i will try again this weekend ...</p><p>the biggest problem on this board is the small amount of ram ... booting is very slow because its constantly reading and writing swapspace on the micro sd .... therefor i&#039;m searching for a compatible ram module and a ram upgrade howto ... it would be nice if i dont have to desolder the existing ram and only add another chip to the additional free pads on the board ...</p><p>what umts modem do you have?</p><p>Best regards <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />NoOne</p>											<p class="post-edited">(Last edited by <strong>No0ne</strong> on 25 Jun 2010, 12:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111921">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Dogge</div>
					<div class="post-datetime">
						25 Jun 2010, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>Minimum for OpenWrt Backfire is 4MB flash and 16MB RAM....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111939">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						26 Jun 2010, 04:45					</div>
				</div>
				<div class="post-content content">
					<p>Was there not a possibility to make a minimal version that can be installed and then the packages you install get into the ram?<br />No0ne, how did you made that? I will use an Huawei E1762 (7,2 down, 5,76 up). That also have an internal micro sd card slot and i have an 8gb there inside.<br />Did you use the AT^U2DIAG=256 modus? For my E1762 it enable only the modem interface and the sd card. AT^U2DIAG=0 enables on all huawei devices just the modem interface to be able to use the device as a basic modem without any live images and so on.<br />I would maybe put an 30mb read/write usb stick. Is the USB port USB1.1 or 2.0?</p><p>Thanks so far No0ne</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111945">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						26 Jun 2010, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>to get a small image i compiled openwrt on my own and left out stuff i didn&#039;t need<br />the usb port is 1.1 but i think this is fast enough ...</p><p>modem usb mode switch command<br /></p><div class="codebox"><pre><code>usb_modeswitch -v 12d1 -p 1446 -M 55534243000000000000000000000011060000000000000000000000000000</code></pre></div><p>usbserial kernel module<br /></p><div class="codebox"><pre><code>insmod usbserial vendor=0x12d1 product=0×1001</code></pre></div><p>/etc/ppp/peers/umts<br /></p><div class="codebox"><pre><code>/dev/usb/tts/0
460800
lock
crtscts
modem
noauth
replacedefaultroute
defaultroute
connect “/usr/sbin/chat -V -f /etc/ppp/chat“
noipdefault 
usepeerdns 
persist</code></pre></div><p>/etc/ppp/chat<br /></p><div class="codebox"><pre><code>ABORT BUSY
ABORT &#039;NO CARRIER&#039;
ABORT ERROR
REPORT CONNECT
TIMEOUT 30

““ „AT“
„OK“ „ATE1“
„OK“ „AT+CPIN?“
“+CPIN: READY“
„AT+CGREG?“
““ „ATD*99***1#“

CONNECT \c</code></pre></div><p>that gave me a working ppp connection</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p113872">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						28 Jul 2010, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>I now have a working USR5461 as 3G Wifi Router ...<br />It takes about 2 min. from powering until a working internet connection.<br />Anybody interessted in image and config files ??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115577">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kdrptr</div>
					<div class="post-datetime">
						20 Aug 2010, 11:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>No0ne wrote:</cite><blockquote><p>I now have a working USR5461 as 3G Wifi Router ...<br />It takes about 2 min. from powering until a working internet connection.<br />Anybody interessted in image and config files ??</p></blockquote></div><p>Yes I am interested.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115620">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">pflatlyne</div>
					<div class="post-datetime">
						21 Aug 2010, 10:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Dogge wrote:</cite><blockquote><p>Minimum for OpenWrt Backfire is 4MB flash and 16MB RAM....</p></blockquote></div><p>If this were a one of those software products made in Redmond Washington,then that might be a show stopper. ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115629">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 Aug 2010, 14:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>No0ne wrote:</cite><blockquote><p>Anybody interessted in image and config files ??</p></blockquote></div><p>I definitely am interested in the .config (for OpenWRT) and defaul-config (for Linux kernel source) files. These two files are big and not wise to post them here unless they can be attached to a post. I would recommend if you can ZIP them into a file and upload it somewhere for anyone to download. If not, I will be more than happy if you can email them to me to USR5461_OpenWRT_configs@slickdeals.endjunk.com (yes and this is a working and disposable e-mail address). Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p116677">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						8 Sep 2010, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>sorry for the delay .. i&#039;m posting all files as soon as i&#039;m at home again ....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117062">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						13 Sep 2010, 21:38					</div>
				</div>
				<div class="post-content content">
					<p>So ... here are my files</p><p><a href="http://noone.at/usr5461/config">http://noone.at/usr5461/config</a><br />the config i used to compile the internal flash image<br />i selected jffs2 to be able to modify it afterwards</p><p><a href="http://noone.at/usr5461/openwrt-brcm-2.4-jffs2-64k.trx">http://noone.at/usr5461/openwrt-brcm-2.4-jffs2-64k.trx</a><br />the unmodified internal flash image</p><p><a href="http://noone.at/usr5461/usr5461/usr5461-modified-rootfs.tar">http://noone.at/usr5461/usr5461/usr5461 … rootfs.tar</a><br />a copy made with cp of the modified flash filesystem<br />two main modifications are in /etc/init.d/boot and a copy of<br />the binary usb_modeswitch to turn of cdrom mode of the huawei e122</p><p><a href="http://noone.at/usr5461/usr5461/usr5461/usr5461-modified-rootfs-mtddumps.zip">http://noone.at/usr5461/usr5461/usr5461 … ddumps.zip</a><br />same as above ... made with cp from /dev/mtd/...</p><p><a href="http://noone.at/usr5461/sd.fdisk">http://noone.at/usr5461/sd.fdisk</a><br />partition table of the 512mb sd card used in the e122<br />the sdcard contains another modified rootfs (ext3) which is getting overlayed after sucessfully mounted</p><p><a href="http://noone.at/usr5461/openwrt-brcm-2.4-rootfs.tar.gz">http://noone.at/usr5461/openwrt-brcm-2.4-rootfs.tar.gz</a><br />the unmodified rootfs on the sd card</p><p><a href="http://noone.at/usr5461/sd.tar.gz">http://noone.at/usr5461/sd.tar.gz</a><br />the modified (current) rootfs on the sd card</p><br /><p>there is also some work left to improve all scripts .. sometimes it fails to load the wifi kernel module<br />and linux panics because its out of memory</p><p>i did not yet produce a flashable version for the internal flash combined with the modifications <br />so you have to copy them manually ... RS232 connection is mandatory for this and for debugging</p><p>Have fun<br />NoOne</p>											<p class="post-edited">(Last edited by <strong>No0ne</strong> on 13 Sep 2010, 21:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117938">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Lubomir</div>
					<div class="post-datetime">
						26 Sep 2010, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>Hm, i did not have RS232 connection to the device and would not like to make one. It would take to much time. Is it not possible to get this working without rs232? Just make an 2mb image and when some other packages are needed, then they could be put on the sd-card/usb-stick?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255081">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">gismo</div>
					<div class="post-datetime">
						21 Nov 2014, 04:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />Hi No0ne,</p><p>If you are still somewhere around please reply. I would really like to make a similar Wifi radio which you made already. I have a USR5146 and I would like to make the project based on this device.<br />I am talking about a similar project like these:<br />mightyohm.com/blog/2008/10/building-a-wifi-radio-part-1-introduction/<br /><a href="http://lifehacker.com/5631984/how-to-make-an-inexpensive-wi-fi-radio-with-an-asus-router-and-usb-sound-card">http://lifehacker.com/5631984/how-to-ma … sound-card</a><br />hackedgadgets.com/2009/06/01/diy-wifi-radio/<br />... and so on.</p><p>Unfortunately I was not able to buy any ASUS WL-500 or 520 devices nowadays for a reasonable price but I&#039;ve found this beast really cheap. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />I see you were here a long time ago but I hope you will see this.<br />I would like to ask you for the firmware you were using for your USR5461 please.<br />Or ask for some help related to making my own stripped down firmware which is the smallest as possible but still can handle USB soundcard + MPD stream playback.<br />Please help me.</p><p>Best Regards,<br />gismo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255384">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">No0ne</div>
					<div class="post-datetime">
						24 Nov 2014, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>The bad things about the USR5461 are 2mb flash and 8mb ram which are really really low for Linux.<br />I struggled over a week getting anything usefull to run, so its not worth the time I think.</p><p>I recommend you to use a Raspberry Pi A+ with a usb wifi (<a href="http://www.raspberrypi.org/raspberry-pi-model-a-plus-on-sale/">http://www.raspberrypi.org/raspberry-pi … s-on-sale/</a>) for your project.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>