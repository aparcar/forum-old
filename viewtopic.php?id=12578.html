<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> After removing packages, space not freeing...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p55897">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Radiohead-79</div>
					<div class="post-datetime">
						17 Sep 2007, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I tried to install openvpn on my router running Kamikaze. I had not enogh space available so the install did not finish. Not I removed the openvpn package and also the two dependencies kmod-tun and some ssl package are not installed, my space is &quot;lost&quot;. I had about 200k free space but now my df -h shows me this:</p><p>Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7.0M&nbsp; &nbsp; &nbsp;56.0k&nbsp; &nbsp; &nbsp; 6.9M&nbsp; &nbsp;1% /tmp<br />/dev/mtdblock/4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.1M&nbsp; &nbsp; &nbsp; 2.1M&nbsp; &nbsp; &nbsp; 8.0k 100% /jffs<br />/jffs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.2M&nbsp; &nbsp; &nbsp; 1.2M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /</p><br /><p>Also if I search for tun I get the following:</p><p>find / -name *tun*</p><p>/etc/modules.d/30-tun<br />/lib/modules/2.4.34/tun.o<br />/usr/lib/ipkg/info/kmod-tun.list<br />/usr/lib/ipkg/info/kmod-tun.control<br />/usr/lib/ipkg/info/kmod-tun.postinst<br />/dev/net/tun<br />/jffs/etc/modules.d/30-tun<br />/jffs/lib/modules/2.4.34/tun.o<br />/jffs/usr/lib/ipkg/info/kmod-tun.list<br />/jffs/usr/lib/ipkg/info/kmod-tun.control<br />/jffs/usr/lib/ipkg/info/kmod-tun.postinst<br />/proc/sys/net/ipsec/debug_tunnel</p><p>lsmod says that my tun module is not used:</p><p>tun&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4504&nbsp; &nbsp;0 (unused)</p><p>Can I manually delete the tun.o file and related stuff? Or why is my space not freeing up anymore? I have installed the following packages:</p><p>base-files-brcm-2.4 - 9-8182 -<br />bridge - 1.0.6-1 -<br />busybox - 1.4.2-2 -<br />dnsmasq - 2.38-1 -<br />dropbear - 0.49-2 -<br />ip - 2.6.20-070313-1 -<br />iptables - 1.3.7-1 -<br />kernel - 2.4.34-brcm-1 -<br />kmod-brcm-wl - 2.4.34+4.80.53.0-1 -<br />kmod-diag - 1+2.4.34-brcm-1 -<br />kmod-ipt-nathelper - 2.4.34-brcm-1 -<br />kmod-openswan - 2.4.34+2.4.8-brcm-1 -<br />kmod-ppp - 2.4.34-brcm-1 -<br />kmod-pppoe - 2.4.34-brcm-1 -<br />kmod-switch - 2.4.34-brcm-1 -<br />kmod-wlcompat - 2.4.34+brcm-5 -<br />libgcc - 3.4.6-9 -<br />libgmp - 4.2.1-1 -<br />libpcap - 0.9.4-1 -<br />mtd - 5 -<br />nas - 4.80.53.0-1 -<br />ntpclient - 2003_194-4 -<br />nvram - 1 -<br />openswan - 2.4.8-1 -<br />ppp - 2.4.3-7 -<br />ppp-mod-pppoe - 2.4.3-7 -<br />tcpdump - 3.9.4-1 -<br />uclibc - 0.9.28-9 -<br />wireless-tools - 29-1 -<br />wlc - 4.80.53.0-1 -</p><p>Thx in advance guys!</p>											<p class="post-edited">(Last edited by <strong>Radiohead-79</strong> on 18 Sep 2007, 12:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55931">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MMCM</div>
					<div class="post-datetime">
						18 Sep 2007, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d reflash the router.</p><p>If you want to install as many packages as possible, you should build your own squashfs image, because squashfs compresses files better than jffs2. <br />Packages compiled into the squashfs firmware image will take less space than installing the same package into the free jffs2 flash partition or even using a jffs2 firmware image.<br />Drawback: squashfs is read-only, and you cannot gain free space by uninstalling packages contained in the firmware image.<br />So you should first think what packages you really need, and then build you own custom firmware image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55933">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Radiohead-79</div>
					<div class="post-datetime">
						18 Sep 2007, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. I will have a look at the docs and try to build my own image with my packages...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>