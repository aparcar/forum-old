<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wireless configuration on Linksys WRT54GS (BCM47xx) running 8.09 RC1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p79997">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">theviper</div>
					<div class="post-datetime">
						20 Jan 2009, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Hey all !</p><p>I&#039;m running:</p><div class="codebox"><pre><code>Firmware               OpenWrt Kamikaze - With X-Wrt Extensions 8.09
Kernel          Linux 2.6.25.17 #2 Fri Nov 7 02:51:51 CST 2008
MAC                  &lt;removed&gt;
Device         Linksys WRT54G/GS/GL
Board         Broadcom BCM47XX
Username          root

Web mgt. console          WebifÂ²
Version        r4574</code></pre></div><p>Configuring WiFi using the webinterface didn&#039;t work at all. Apparently things like the channel id were not correctly set using the web interface.<br />I managed to manually configure the /etc/config/wireless file to this state:</p><br /><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;wlan0&#039;
        option &#039;type&#039; &#039;mac80211&#039;
        option &#039;disabled&#039; &#039;0&#039;
        option &#039;agmode&#039; &#039;&#039;
        option &#039;channel&#039; &#039;5&#039;
        option &#039;maxassoc&#039; &#039;&#039;
        option &#039;distance&#039; &#039;&#039;
        option &#039;diversity&#039; &#039;&#039;
        option &#039;txantenna&#039; &#039;&#039;
        option &#039;rxantenna&#039; &#039;&#039;
        option &#039;antenna&#039; &#039;&#039;

config &#039;wifi-iface&#039;
        option &#039;device&#039; &#039;wlan0&#039;
        option &#039;mode&#039; &#039;ap&#039;
        option &#039;network&#039; &#039;lan&#039;
        option &#039;ssid&#039; &#039;&lt;removed_ssid&gt;&#039;
        option &#039;bssid&#039; &#039;&#039;
        option &#039;encryption&#039; &#039;psk2&#039;
        option &#039;server&#039; &#039;&#039;
        option &#039;port&#039; &#039;&#039;
        option &#039;hidden&#039; &#039;0&#039;
        option &#039;isolate&#039; &#039;0&#039;
        option &#039;txpower&#039; &#039;&#039;
        option &#039;bgscan&#039; &#039;0&#039;
        option &#039;frag&#039; &#039;&#039;
        option &#039;rts&#039; &#039;&#039;
        option &#039;wds&#039; &#039;0&#039;
        option &#039;key&#039; &#039;&lt;removed_plaintext_key&gt;&#039;
        option &#039;key1&#039; &#039;&#039;
        option &#039;key2&#039; &#039;&#039;
        option &#039;key3&#039; &#039;&#039;
        option &#039;key4&#039; &#039;&#039;
        option &#039;80211h&#039; &#039;&#039;
        option &#039;compression&#039; &#039;&#039;
        option &#039;bursting&#039; &#039;&#039;
        option &#039;ff&#039; &#039;&#039;
        option &#039;wmm&#039; &#039;&#039;
        option &#039;xr&#039; &#039;&#039;
        option &#039;ar&#039; &#039;&#039;
        option &#039;turbo&#039; &#039;&#039;
        option &#039;macpolicy&#039; &#039;none&#039;</code></pre></div><p>An now the wireless works, with WPA2 even. <br />Only gltich is tha the led is NOT on. It actually flickers for a fraction of a second and then stays off. Am I missing something or is Kamikaze still &quot;buggy&quot; with the newly functioning broadcom on 2.6 kernels?</p><br /><br /><br /><p>Another thing is the cluttered kernel log:</p><br /><div class="codebox"><pre><code>eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:0f:66:d3:92:ac
flash init: 0x1c000000 0x02000000
Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
 Intel/Sharp Extended Query Table at 0x0031
Using buffer write method
cfi_cmdset_0001: Erase suspend on write enabled
erase region 0: offset=0x0,size=0x20000,blocks=64
Flash device: 0x800000 at 0x1fc00000
bootloader size: 262144
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007e0000 : &quot;linux&quot;
0x000f7800-0x007e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=240000, len=5A0000
0x00240000-0x007e0000 : &quot;rootfs_data&quot;
0x007e0000-0x00800000 : &quot;nvram&quot;
TCP vegas registered
NET: Registered protocol family 1
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 128k freed
Please be patient, while OpenWrt loads ...
Algorithmics/MIPS FPU Emulator v1.5
diag: Detected &#039;Linksys WRT54G/GS/GL&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: No Robo switch in managed mode found
roboswitch: Probing device eth1: No such device
roboswitch: Probing device eth2: No such device
roboswitch: Probing device eth3: No such device
b44: eth0: powering down PHY
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.
device eth0.0 entered promiscuous mode
device eth0 entered promiscuous mode
br-lan: port 1(eth0.0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0.0) entering forwarding state
ieee80211_crypt: registered algorithm &#039;NULL&#039;
ieee80211: 802.11 data/management/control stack, git-1.1.13
ieee80211: Copyright (C) 2004-2005 Intel Corporation &lt;jketreno@linux.intel.com&gt;
ieee80211_crypt: registered algorithm &#039;WEP&#039;
ieee80211_crypt: registered algorithm &#039;TKIP&#039;
ieee80211_crypt: registered algorithm &#039;CCMP&#039;
There is already a switch registered on the device &#039;eth0&#039;
roboswitch: Probing device eth1: No such device
roboswitch: Probing device eth2: No such device
roboswitch: Probing device eth3: No such device
b43-phy0: Broadcom 4712 WLAN found
b43-phy0 debug: Found PHY: Analog 2, Type 2, Revision 2
b43-phy0 debug: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2
b43-phy0 debug: DebugFS (CONFIG_DEBUG_FS) not enabled in kernel config
phy0: Selected rate control algorithm &#039;pid&#039;
Broadcom 43xx driver loaded [ Features: NLR, Firmware-ID: FW13 ]
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
input: b43-phy0 as /devices/virtual/input/input0
b43-phy0: Loading firmware version 410.2160 (2007-05-26 15:32:10)
b43-phy0 debug: Chip initialized
b43-phy0 debug: 30-bit DMA initialized
Registered led device: b43-phy0::radio
b43-phy0 debug: Wireless interface started
b43-phy0 debug: Adding Interface type 2
device wlan0 entered promiscuous mode
b43-phy0 debug: Removing Interface type 2
b43-phy0 debug: Wireless interface stopped
b43-phy0 debug: DMA-30 rx_ring: Used slots 2/64, Failed frames 0/0 = 0.0%, Average tries 0.00
b43-phy0 debug: DMA-30 tx_ring_AC_BK: Used slots 0/128, Failed frames 0/0 = 0.0%, Average tries 0.00
b43-phy0 debug: DMA-30 tx_ring_AC_BE: Used slots 0/128, Failed frames 0/0 = 0.0%, Average tries 0.00
b43-phy0 debug: DMA-30 tx_ring_AC_VI: Used slots 0/128, Failed frames 0/0 = 0.0%, Average tries 0.00
b43-phy0 debug: DMA-30 tx_ring_AC_VO: Used slots 2/128, Failed frames 0/7 = 0.0%, Average tries 1.00
b43-phy0 debug: DMA-30 tx_ring_mcast: Used slots 0/128, Failed frames 0/0 = 0.0%, Average tries 0.00
br-lan: port 2(wlan0) entering disabled state
input: b43-phy0 as /devices/virtual/input/input1
b43-phy0: Loading firmware version 410.2160 (2007-05-26 15:32:10)
b43-phy0 debug: Chip initialized
b43-phy0 debug: 30-bit DMA initialized
Registered led device: b43-phy0::radio
b43-phy0 debug: Wireless interface started
b43-phy0 debug: Adding Interface type 1
br-lan: port 2(wlan0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 2(wlan0) entering forwarding state
b43-phy0 debug: Set beacon interval to 100
b43-phy0 debug: Set beacon interval to 100
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Set beacon interval to 100
b43-phy0 debug: Using hardware based encryption for keyidx: 1, mac: 00:00:00:00:00:00
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Set beacon interval to 100
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Using hardware based encryption for keyidx: 0, mac: 00:19:d2:29:a7:63
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
printk: 11 messages suppressed.
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
printk: 3 messages suppressed.
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68
b43-phy0 ERROR: PHY transmission error
b43-phy0 debug: Updated beacon template at 0x468
b43-phy0 debug: Updated beacon template at 0x68</code></pre></div><p>Is that supposed to log that much &quot;garbage&quot; ?</p><br /><br /><p>If any1 needs anymore information ... just let me know.</p>											<p class="post-edited">(Last edited by <strong>theviper</strong> on 20 Jan 2009, 22:27)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>