<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Redirecting Guest Wifi network</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p214376">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">countcobolt</div>
					<div class="post-datetime">
						9 Oct 2013, 14:43					</div>
				</div>
				<div class="post-content content">
					<p>Dear all</p><p>I have created a guest network on my openwrt router. The purpose of this would be to redirect my guests to a single server. </p><p>I can setup the redirect rule and my clients are properly forwarded to the external server. Yet I have a few hickups with this solution.</p><p>A) I cannot forward https requests to that server. My browsers are giving out an error when I try to redirect 443 to ext_ip:80. Can/should I setup a seconday rule to forward 443 to ext_ip 443?</p><p>B) All my requests as expected are redirect now to exp_ip port 80. Yet, In this &#039;landing&#039; page I can have users to to e.g. paypal.com. But, the moment my clients are trying to surf to <a href="http://www.paypal.com">www.paypal.com</a> they get redirected again to ext_ip (obviously due to the firewall rule redirect all port 80 requests to ext_ip.</p><p>Now, I tried setting up a proxy server on the ext_ip and redirect all port 80 traffic to 3128 port on the server. When I used the documentation online, I got an error reloading my rules saying there is a problme with the SNAT rule (using these instruction <a href="http://wiki.openwrt.org/doc/uci/firewall#transparent.proxy.rule.external).">http://wiki.openwrt.org/doc/uci/firewal â€¦ external).</a> Notice: my proxy does not sit on my lan. It is external in a DC.</p><p>I tried using tinyproxy with filtering just to allow sites that I accept, but end up with the problem that I cannot proxy SSL (and e.g. <a href="https://www.paypal.com">https://www.paypal.com</a>,&nbsp; won&#039;t work).</p><p>Is there any other one to whitelist some sites and redirect all other sites to an external page without using a proxy server. I looked at e.g. nodogsplash, but I don&#039;t see a sites_allowed.</p><p>- As a background: chillispot solution is not an option as I am using hostapd with radius 802.1X as auth method. We had a chillispot/coovachilli solution, but there was way too much overhead, loss of speed using this solution. The purpose is to step away from such a solution.</p><p>- I don&#039;t have a gui installed on&nbsp; my system. </p><p>Kind regards</p><p>Steve</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214392">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">countcobolt</div>
					<div class="post-datetime">
						9 Oct 2013, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Dear all</p><p>I am looking into nocatsplash to solve this problem. I can see that it runs the default splash screen from a local location on the router. Can I use an external location to for the splash screen? I would like to (ab)use this and not have an accept button on my splash. My users on this guest network will not be able to log in to the system or go to other sites using the guest network</p><p>Kind regards</p><p>Steve</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214419">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">countcobolt</div>
					<div class="post-datetime">
						9 Oct 2013, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Please follow <br /><a href="https://forum.openwrt.org/viewtopic.php?id=46699">https://forum.openwrt.org/viewtopic.php?id=46699</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>