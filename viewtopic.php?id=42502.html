<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> compiling kmod-b43 for a7 target?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192989">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">figless</div>
					<div class="post-datetime">
						24 Feb 2013, 10:26					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have an old DSL-G604T router&nbsp; that I want to repurpose and give some new life to. As mentioned in the wiki [<a href="http://wiki.openwrt.org/inbox/dsl-g604t">http://wiki.openwrt.org/inbox/dsl-g604t</a>] the kernel module for the stock wireless card (TI-ACX111) is not really usable. I do have a spare Broadcom 94318 card that I wish to use, however I am experiencing problems compiling support for this card with the TI AR7 target.</p><p>Firstly I am using trunk. I can compile the stock image as per the steps documented on the dsl-g604t openwrt wiki page. The kmod-b43 module does not show in menuconfig by default. I have edited the Makefile in the mac80211 package directory to include the target &#039;ar7_generic&#039; in the KernelModule/b43 section. This allows me to select the kernel module from menuconfig</p><p>When compiling I get errors related to the declaration of ssb functions? Can anyone assist on how I can get this module to compile cleanly?</p><div class="codebox"><pre><code>make[4]: Entering directory `/home/ben/openwrt/trunk/build_dir/target-mipsel_uCl
ibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07&#039;
make -C /home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar
7_generic/linux-3.3.8 M=/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0
.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07 modules
make[5]: Entering directory `/home/ben/openwrt/trunk/build_dir/target-mipsel_uCl
ibc-0.9.33.2/linux-ar7_generic/linux-3.3.8&#039;
  CC [M]  /home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-
ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.o
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generi
c/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c: In function &#039;b43_bu
s_bcma_block_read&#039;:
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generi
c/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c:75:2: error: implici
t declaration of function &#039;bcma_block_read&#039; [-Werror=implicit-function-declarati
on]
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generi
c/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c: In function &#039;b43_bu
s_bcma_block_write&#039;:
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generi
c/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c:81:2: error: implici
t declaration of function &#039;bcma_block_write&#039; [-Werror=implicit-function-declarat
it declaration of function &#039;ssb_block_read&#039; [-Werror=implicit-function-declaration]
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c: In function &#039;b43_bus_ssb_block_write&#039;:
/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.c:178:2: error: implicit declaration of function &#039;ssb_block_write&#039; [-Werror=implicit-function-declaration]
cc1: some warnings being treated as errors
make[8]: *** [/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless/b43/bus.o] Error 1
make[7]: *** [/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless/b43] Error 2
make[6]: *** [/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07/drivers/net/wireless] Error 2
make[5]: *** [_module_/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07] Error 2
make[5]: Leaving directory `/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/linux-3.3.8&#039;
make[4]: *** [modules] Error 2
make[4]: Leaving directory `/home/ben/openwrt/trunk/build_dir/target-mipsel_uClibc-0.9.33.2/linux-ar7_generic/compat-wireless-2013-01-07&#039;</code></pre></div><p>Any assistance is greatly appreciated!</p>											<p class="post-edited">(Last edited by <strong>figless</strong> on 24 Feb 2013, 10:27)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>