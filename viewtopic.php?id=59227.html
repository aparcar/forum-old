<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dlink DWR-111</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p289260">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">clayteau</div>
					<div class="post-datetime">
						26 Aug 2015, 14:41					</div>
				</div>
				<div class="post-content content">
					<h5>Router Image:</h5><p><span class="postimg"><img src="http://115.124.123.225/new/products/DWR-111/DWR-111_front.png" alt="http://115.124.123.225/new/products/DWR-111/DWR-111_front.png" /></span></p><h5>Router Innards:</h5><p><span class="postimg"><img src="http://i62.tinypic.com/hssx88.jpg" alt="http://i62.tinypic.com/hssx88.jpg" /></span></p><p>Processor: Ralink RT5350F</p><p>Specifications:<br />CPU architecture: MIPS 24KEc, 360 MHz<br />802.11n 1T/1R (1x1:1) 2.4 GHz 150Mbps MAC/BB/PA/RF<br />5-port 10/100 Mbps Ethernet switch w/ 5 10/100 PHYs<br />USB 2.0 host/client</p><p>Ram: EM63A165TS-6G - 16Mega x 16 Synchronous DRAM (SDRAM)</p><p>Flash: MXIC MX 25L3206E M2I-12G, SOIC-8, 32MBit, 4Mb SPI Flash</p><p>Preinstalled firmware has a way to load custom firmwares.</p><p>I found the router on this thread to have almost identical hardware except the flash</p><p><a href="http://my-embedded.blogspot.in/2013/12/mini-4g-router-rt5350f.html">http://my-embedded.blogspot.in/2013/12/ â€¦ 5350f.html</a></p><p>Another link with exact same hardware:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=42471">https://forum.openwrt.org/viewtopic.php?id=42471</a></p><h5>Serial console wiring:</h5><p><span class="postimg"><img src="http://i57.tinypic.com/esrn1w.jpg" alt="http://i57.tinypic.com/esrn1w.jpg" /></span></p><h5>Serial console output(Set speed to 57600):</h5><p>JRecovery Version R1.2 2013/09/03 13:05</p><p>SPI FLASH: MX25l3205d 4M</p><p>................<br />Starting kernel @80000000...</p><p>LINUX started...</p><p> THIS IS ASIC<br />Linux version 2.6.21 (tja@dot7) (gcc version 3.4.2) #2 Fri Nov 29 09:59:34 CST 2013</p><p> The CPU feqenuce set to 360 MHz<br />CPU revision is: 0001964c<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock3<br />Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.<br />Primary data cache 16kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />Cache parity protection disabled<br />cause = d0808000, status = 11000000<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />calculating r4koff... 0015f900(1440000)<br />CPU frequency 360.00 MHz<br />Using 180.000 MHz high precision timer.<br />Console: colour dummy device 80x25<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 29372k/32768k available (2297k kernel code, 3396k reserved, 567k data, 124k init, 0k highmem)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />NET: Registered protocol family 2<br />Time: MIPS clocksource has been installed.<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />RT3xxx EHCI/OHCI init.<br />squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher<br />squashfs: LZMA suppport for slax.org by jro<br />io scheduler noop registered (default)<br />arch_mem_init check 0xb000001c: 00000000</p><p>------------------GPIO--------------------------<br /> GPIOMODE:2df<br />SLIC INTR ==&gt; gpio 1<br />Ralink gpio driver initialized<br />HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096<br />N_HDLC line discipline registered.<br />Serial: 8250/16550 driver $Revision: 1.7 $ 4 ports, IRQ sharing disabled<br />serial8250: ttyS0 at I/O 0xb0000500 (irq = 37) is a 16550A<br />serial8250: ttyS1 at I/O 0xb0000c00 (irq = 12) is a 16550A<br />loop: loaded (max 8 devices)<br />rdm_major = 254<br />net_speed proc file Create <br />MAC_ADRH -- : 0x00000000<br />MAC_ADRL -- : 0x00000000</p><p>eth2 mii.o query= phy_id:0, address:1 retval:7849<br />Ralink APSoC Ethernet Driver Initilization. v2.0&nbsp; 256 rx/tx descriptors allocated, mtu = 1500!<br />MAC_ADRH -- : 0x0000000c<br />MAC_ADRL -- : 0x432880bd<br />PROC INIT OK!<br />=== 0xB0100004 = 00000000 <br />Insmod eth_ping skb_diy module.<br />PPP generic driver version 2.4.2<br />PPP Deflate Compression module registered<br />PPP BSD Compression module registered<br />MPPE/MPPC encryption/compression module registered<br />NET: Registered protocol family 24<br />tun: Universal TUN/TAP device driver, 1.6<br />tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />physmap platform flash device: 00400000 at bf000000<br />physmap-flash physmap-flash.0: map_probe failed<br />block2mtd: version $Revision: 1.1.1.1 $<br />deice id : c2 20 16 c2 20 (2016c220)<br />MX25L3205D(c2 2016c220) (4096 Kbytes)<br />mtd .name = raspi, .size = 0x00400000 (4M) .erasesize = 0x00001000 (4K) .numeraseregions = 0<br />Creating 6 MTD partitions on &quot;raspi&quot;:<br />0x00000000-0x00400000 : &quot;Whole&quot;<br />0x00000000-0x00010000 : &quot;Bootloader&quot;<br />0x00010000-0x00110000 : &quot;Kernel&quot;<br />0x00110000-0x003a0000 : &quot;RootFS&quot;<br />0x003a0010-0x003f0000 : &quot;UI&quot;<br />mtd: partition &quot;UI&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x003f0000-0x00400000 : &quot;Config&quot;<br />rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller<br />rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1<br />rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000<br />rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00, driver 10 Dec 2004<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller<br />rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2<br />rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000<br />usb usb2: configuration #1 chosen from 1 choice<br />hub 2-0:1.0: USB hub found<br />hub 2-0:1.0: 1 port detected<br />drivers/usb/net/rtl8150.c: rtl8150 based usb-ethernet driver v0.6.2 (2004/08/27)<br />usbcore: registered new interface driver rtl8150<br />u32 classifier<br />Netfilter messages via NETLINK v0.30.<br />nf_conntrack version 0.5.0 (256 buckets, 2048 max)<br />Register conntrack protocol helper for ESP...<br />IPv4 over IPv4 tunneling driver<br />GRE over IPv4 tunneling driver<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 184 bytes per conntrack<br />nf_sock overlap: 0-0/80-81 v 0-0/80-81<br />Unable to register netfilter socket option<br />Init IP_nat_proto_esp register. <br />ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone<br />arp_tables: (C) 2002 David S. Miller<br />TCP cubic registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 124k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />Inter-|&nbsp; &nbsp;Receive&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />phy_tx_ring = 0x01c29000, tx_ring = 0xa1c29000</p><p>phy_rx_ring0 = 0x01c2a000, rx_ring0 = 0xa1c2a000<br /> |&nbsp; Transmit<br /> face |bytes&nbsp; &nbsp; packets errs drop fifo frame compressed multicast|bytes&nbsp; &nbsp; packets errs drop fifo colls carrier compressed<br />&nbsp; eth2:&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />&nbsp; &nbsp; lo:&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br /> tunl0:&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />&nbsp; gre0:&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />modprobe: module ehci-hcd not found<br />modprobe: failed to load module ehci-hcd<br />modprobe: module ohci-hcd not found<br />modprobe: failed to load module ohci-hcd<br />ipt_webstr: module license &#039;unspecified&#039; taints kernel.<br /> flash_open: flash_fd=3<br />Mount D Section.<br />mount: /dev/mtdblock4 is write-protected, mounting read-only<br /> flash_open: flash_fd=9<br />phy 4, reg 0, val 0x3900<br />Set: phy[4].reg[0] = 3900<br />phy 0, reg 0, val 0x3900<br />Set: phy[0].reg[0] = 3900<br />phy 1, reg 0, val 0x3900<br />Set: phy[1].reg[0] = 3900<br />phy 2, reg 0, val 0x3900<br />Set: phy[2].reg[0] = 3900<br />phy 3, reg 0, val 0x3900<br />Set: phy[3].reg[0] = 3900<br />Set gpio_range = gpio2300, dir = 301<br />switch reg write offset=168, value=17<br />switch reg write offset=14, value=405555<br />switch reg write offset=50, value=2001<br />switch reg write offset=98, value=7f3f<br />switch reg write offset=e4, value=3f<br />switch reg write offset=40, value=1001<br />switch reg write offset=44, value=1001<br />switch reg write offset=48, value=1002<br />switch reg write offset=70, value=ffff506f<br />phy 4, reg 0, val 0x3300<br />Set: phy[4].reg[0] = 3300<br />phy 0, reg 30, val 0x58<br />Set: phy[0].reg[30] = 0058<br />phy 1, reg 30, val 0x58<br />Set: phy[1].reg[30] = 0058<br />phy 2, reg 30, val 0x58<br />Set: phy[2].reg[30] = 0058<br />phy 3, reg 30, val 0x58<br />Set: phy[3].reg[30] = 0058<br />phy 4, reg 30, val 0x58<br />Set: phy[4].reg[30] = 0058<br />phy 0, reg 29, val 0x7005<br />Set: phy[0].reg[29] = 7005<br />phy 1, reg 29, val 0x7005<br />Set: phy[1].reg[29] = 7005<br />phy 2, reg 29, val 0x7005<br />Set: phy[2].reg[29] = 7005<br />phy 3, reg 29, val 0x7005<br />Set: phy[3].reg[29] = 7005<br />phy 4, reg 29, val 0x7005<br />Set: phy[4].reg[29] = 7005<br />phy 4, reg 0, val 0x3100<br />Set: phy[4].reg[0] = 3100<br />phy 0, reg 0, val 0x3100<br />Set: phy[0].reg[0] = 3100<br />phy 1, reg 0, val 0x3100<br />Set: phy[1].reg[0] = 3100<br />phy 2, reg 0, val 0x3100<br />Set: phy[2].reg[0] = 3100<br />phy 3, reg 0, val 0x3100<br />Set: phy[3].reg[0] = 3100<br />eth2.1: Setting MAC address to&nbsp; :::::.<br />device eth2 entered promiscuous mode<br />VLAN (eth2.1):&nbsp; Setting underlying device (eth2) to promiscious mode.</p><p>eth2 mii.o query= phy_id:1, address:4 retval:5e1</p><p>eth2 mii.o query= phy_id:1, address:0 retval:3100</p><p>eth2 mii.o query= phy_id:1, address:5 retval:0<br />eth2.1: dev_set_promiscuity(master, 1)<br />device eth2.1 entered promiscuous mode<br />eth2.2: Setting MAC address to&nbsp; 6c 19 8f d4 ce 22.<br />Init handler: lan<br />br0: port 1(eth2.1) entering learning state<br />Init handler: dhcpsrv<br />br0: topology change detected, propagating<br />br0: port 1(eth2.1) entering forwarding state<br />Failure parsing line 12 of /etc/udhcpd.conf<br />server_config.pool_check = 1</p><p>server_config.pool_check = 1</p><p> start = 192.168.0, end = 192.168.0, lan_ip = 192.168.0, interface=br0, ifindex=0</p><p> start = 192.168.0, end = 192.168.0, lan_ip = 192.168.0, interface=br0, ifindex=0</p><p>0</p><p>Unable to open /var/run/udhcpd.leases for reading<br />udhcpd (v0.9.9-pre) started<br />Unable to open /var/run/udhcpd.leases for reading<br />Init handler: stp<br />Init handler: reset_btn<br />Init handler: watchdog<br />Init handler: wlanap<br />Length of MAC:6<br /> mac:::::::<br />----</p><br /><p>=== pAd = c007d000, size = 620440 ===</p><p>&lt;-- RTMPAllocAdapterBlock, Status=0<br />RX DESC a1912000&nbsp; size = 2048<br />&lt;-- RTMPAllocTxRxRingMemory, Status=0<br />1. Phy Mode = 9<br />2. Phy Mode = 9<br />3. Phy Mode = 9<br />RTMPSetPhyMode: channel is out of range, use first channel=0 <br />MCS Set = ff 00 00 00 01<br />SYNC - BBP R4 to 20MHz.l<br />Main bssid = 6c:19:8f:d4:ce:24<br />&lt;==== rt28xx_init, Status=0<br />0x1300 = 00064380<br />device ra0 entered promiscuous mode<br />br0: port 2(ra0) entering learning state<br />Ralink DOT1X daemon, version = &#039;2.4.0.0&#039; <br />prefix_name = &#039;ra, argv[1] = (null)&#039;<br />killall: check_status: no process killed<br />br0: topology change detected, propagating<br />br0: port 2(ra0) entering forwarding state<br />ra0&nbsp; &nbsp; &nbsp; &nbsp;ledstart:<br />WLAN Station Log ALive<br />Init handler: wan<br />Init handler: ondemand<br />Init handler: nat<br />==== NAT START (WAN:ALL Func:ALL) ====<br />wscd: SSDP UDP PORT = 1900<br />/var/nat//nat-draft.uyg: /var/nat//nat-draft.uyg: 193: cannot create /proc/sys/net/ipv4/rt_cache_rebuild_count: Directory nonexistent<br />/var/nat//nat-draft.uyg: /var/nat//nat-draft.uyg: 193: cannot create /proc/sys/net/netfilter/nf_conntrack_expect_max: Directory nonexistent<br />/var/nat//nat-draft.uyg: /var/nat//nat-draft.uyg: 193: cannot create /proc/sys/net/netfilter/nf_conntrack_tcp_timeout_unacknowledged: Directory nonexistent<br />Bad argument `0.0.0.0&#039;<br />Try `iptables -h&#039; or &#039;iptables --help&#039; for more information.<br />Init handler: dnsrelay<br />Init handler: time<br />timezone:480<br />dsttime:0<br />Init handler: schedule<br />Init handler: telnet<br />Init handler: wps_btn<br />Init handler: ddns<br />Init handler: routing<br />Init handler: autobak<br />Init handler: keepalive<br />Init handler: upnp<br />============= AMIT UPNP Start =============<br />WAN_IF=eth2.2,LAN_IF=br0<br />Init handler: pptp<br />Init handler: l2tp<br />Init handler: failover<br />Init handler: loadsharingctrl<br />Init handler: pwr_saving<br />Init handler: rbydom<br />Init handler: rbyip<br />Init handler: qos<br />Init handler: snmp<br />Init handler: spap<br />Init handler: ftp_alg<br />Init handler: sip_alg<br />Init handler: ate<br />eth2.2 br0<br />iptables: Chain already exists<br />Init handler: recent<br />Init handler: wps_status<br />Init handler: reboot<br />sh: lltd-action: not found<br /> flash_open: flash_fd=7<br />iptables: Chain already exists<br />/usr/bin/telnetd-action: Starting telnetd...</p><p> flash_open: flash_fd=7<br />/usr/bin/telnetd-action start ok<br /> flash_open: flash_fd=7<br />sh: cannot create /proc/sys/net/bridge/bridge-nf-call-iptables: Directory non# Ralink APSoC Hardware Watchdog Timer<br />Started WatchDog Timer. LoadVlaue: 36600 sysclk: 120000000 TIMEOUT: 60<br />Stopped WatchDog Timer.<br />Disable Kernel Mode Watchdog<br />Started WatchDog Timer. LoadVlaue: 36600 sysclk: 120000000 TIMEOUT: 60</p>											<p class="post-edited">(Last edited by <strong>clayteau</strong> on 2 Sep 2015, 20:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290218">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">clayteau</div>
					<div class="post-datetime">
						2 Sep 2015, 20:42					</div>
				</div>
				<div class="post-content content">
					<p>Any help to further document this router would be helpful. So if you know something please help out.. Also if any mod or admin passes by, please create a openwrt page for this router. This thing is available in the asia pacific region i dont know about the states..!!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>