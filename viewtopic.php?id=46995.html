<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Please help 3G</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p215786">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ryandekock1988</div>
					<div class="post-datetime">
						27 Oct 2013, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have attitude adjustment running and trying to use a vodaphone K3772 as a 3G connection.</p><p>I have installed use_modeswitch and I believe the unit has switches. however when I activate the 3G connection, the modem gets connected, then hang ups and then seems to restart? Has anyone get advice?</p><div class="codebox"><pre><code>Oct 27 10:06:08 OpenWrt local2.info chat[1149]: expect (OK)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: AT&amp;F^M^M
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: OK
Oct 27 10:06:08 OpenWrt local2.info chat[1149]:  -- got it
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: send (ATE1^M)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: expect (OK)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: ^M
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: ATE1^M^M
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: OK
Oct 27 10:06:08 OpenWrt local2.info chat[1149]:  -- got it
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: timeout set to 30 seconds
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: expect (OK)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: ^M
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M^M
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: OK
Oct 27 10:06:08 OpenWrt local2.info chat[1149]:  -- got it
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: send (ATD*99***1#^M)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: expect (CONNECT)
Oct 27 10:06:08 OpenWrt local2.info chat[1149]: ^M
Oct 27 10:06:19 OpenWrt local2.info chat[1149]: ATD*99***1#^M^M
Oct 27 10:06:19 OpenWrt local2.info chat[1149]: CONNECT
Oct 27 10:06:19 OpenWrt local2.info chat[1149]:  -- got it
Oct 27 10:06:19 OpenWrt local2.info chat[1149]: send ( ^M)
Oct 27 10:06:19 OpenWrt daemon.info pppd[1145]: Serial connection established.
Oct 27 10:06:19 OpenWrt daemon.info pppd[1145]: Using interface 3g-Internet
Oct 27 10:06:19 OpenWrt daemon.notice pppd[1145]: Connect: 3g-Internet &lt;--&gt; /dev/ttyACM0
Oct 27 10:06:20 OpenWrt daemon.info pppd[1145]: Remote message: Icera PPP - Password Verified OK
Oct 27 10:06:20 OpenWrt daemon.notice pppd[1145]: PAP authentication succeeded
Oct 27 10:06:26 OpenWrt daemon.notice pppd[1145]: local  IP address 41.192.147.244
Oct 27 10:06:26 OpenWrt daemon.notice pppd[1145]: remote IP address 10.0.0.1
Oct 27 10:06:26 OpenWrt daemon.notice pppd[1145]: primary   DNS address 196.207.40.167
Oct 27 10:06:26 OpenWrt daemon.notice pppd[1145]: secondary DNS address 196.207.40.165
Oct 27 10:06:26 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; is now up
Oct 27 10:06:26 OpenWrt user.notice ifup: Enabling Router Solicitations on Internet (3g-Internet)
Oct 27 10:06:30 OpenWrt kern.info kernel: [40255.910000] usb 1-1: USB disconnect, device number 105
Oct 27 10:06:30 OpenWrt daemon.notice pppd[1145]: Modem hangup
Oct 27 10:06:30 OpenWrt daemon.info pppd[1145]: Connect time 0.1 minutes.
Oct 27 10:06:30 OpenWrt daemon.info pppd[1145]: Sent 304 bytes, received 0 bytes.
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: reading /tmp/resolv.conf.auto
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: using nameserver 192.168.1.254#53
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: using nameserver 192.168.1.254#53
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: using nameserver 196.207.40.167#53
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: using nameserver 196.207.40.165#53
Oct 27 10:06:30 OpenWrt daemon.info dnsmasq[2339]: using local addresses only for domain lan
Oct 27 10:06:30 OpenWrt daemon.notice pppd[1145]: Connection terminated.
Oct 27 10:06:30 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; has lost the connection
Oct 27 10:06:32 OpenWrt daemon.info pppd[1145]: Terminating on signal 15
Oct 27 10:06:32 OpenWrt daemon.info pppd[1145]: Exit.
Oct 27 10:06:32 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; is now down
Oct 27 10:06:37 OpenWrt kern.info kernel: [40262.250000] usb 1-1: new high-speed USB device number 106 using ehci-platform
Oct 27 10:06:37 OpenWrt kern.info kernel: [40262.490000] scsi1238 : usb-storage 1-1:1.0
Oct 27 10:06:37 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:06:37 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Selecting /etc/usb_modeswitch.d/19d2:1179 for mode switching
Oct 27 10:06:37 OpenWrt syslog.notice usb_modeswitch: switching device 19d2:1179 on 001/106
Oct 27 10:06:37 OpenWrt kern.info kernel: [40262.750000] usb 1-1: USB disconnect, device number 106
Oct 27 10:06:47 OpenWrt kern.info kernel: [40273.000000] usb 1-1: new high-speed USB device number 107 using ehci-platform
Oct 27 10:06:48 OpenWrt kern.info kernel: [40273.230000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
Oct 27 10:06:48 OpenWrt kern.info kernel: [40273.290000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
Oct 27 10:06:48 OpenWrt kern.info kernel: [40273.360000] scsi1239 : usb-storage 1-1:1.7
Oct 27 10:06:49 OpenWrt kern.notice kernel: [40274.410000] scsi 1239:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
Oct 27 10:07:08 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:08 OpenWrt user.notice usb-modeswitch: 1-1:1.1: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.2: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.3: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.4: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.5: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.6: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.7: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:09 OpenWrt user.notice usb-modeswitch: 1-1:1.8: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:10 OpenWrt user.notice usb-modeswitch: 1-1:1.9: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:10 OpenWrt daemon.notice pppd[1558]: pppd 2.4.5 started by root, uid 0
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: abort on (BUSY)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: abort on (NO CARRIER)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: abort on (ERROR)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: report (CONNECT)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: timeout set to 20 seconds
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: send (AT&amp;F^M)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: expect (OK)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: AT&amp;F^M^M
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: OK
Oct 27 10:07:11 OpenWrt local2.info chat[1562]:  -- got it
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: send (ATE1^M)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: expect (OK)
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: ^M
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: ATE1^M^M
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: OK
Oct 27 10:07:11 OpenWrt local2.info chat[1562]:  -- got it
Oct 27 10:07:11 OpenWrt local2.info chat[1562]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M)
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: timeout set to 30 seconds
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: expect (OK)
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: ^M
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M^M
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: OK
Oct 27 10:07:12 OpenWrt local2.info chat[1562]:  -- got it
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: send (ATD*99***1#^M)
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: expect (CONNECT)
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: ^M
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: ATD*99***1#^M^M
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: CONNECT
Oct 27 10:07:12 OpenWrt local2.info chat[1562]:  -- got it
Oct 27 10:07:12 OpenWrt local2.info chat[1562]: send ( ^M)
Oct 27 10:07:12 OpenWrt daemon.info pppd[1558]: Serial connection established.
Oct 27 10:07:12 OpenWrt daemon.info pppd[1558]: Using interface 3g-Internet
Oct 27 10:07:12 OpenWrt daemon.notice pppd[1558]: Connect: 3g-Internet &lt;--&gt; /dev/ttyACM0
Oct 27 10:07:13 OpenWrt daemon.info pppd[1558]: Remote message: Icera PPP - Password Verified OK
Oct 27 10:07:13 OpenWrt daemon.notice pppd[1558]: PAP authentication succeeded
Oct 27 10:07:16 OpenWrt daemon.notice pppd[1558]: local  IP address 41.192.132.125
Oct 27 10:07:16 OpenWrt daemon.notice pppd[1558]: remote IP address 10.0.0.1
Oct 27 10:07:16 OpenWrt daemon.notice pppd[1558]: primary   DNS address 196.207.40.167
Oct 27 10:07:16 OpenWrt daemon.notice pppd[1558]: secondary DNS address 196.207.40.165
Oct 27 10:07:16 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; is now up
Oct 27 10:07:17 OpenWrt user.notice ifup: Enabling Router Solicitations on Internet (3g-Internet)
Oct 27 10:07:44 OpenWrt daemon.notice pppd[1558]: Modem hangup
Oct 27 10:07:44 OpenWrt daemon.info pppd[1558]: Connect time 0.5 minutes.
Oct 27 10:07:44 OpenWrt daemon.info pppd[1558]: Sent 608 bytes, received 0 bytes.
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: reading /tmp/resolv.conf.auto
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: using nameserver 192.168.1.254#53
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: using nameserver 192.168.1.254#53
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: using nameserver 196.207.40.167#53
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: using nameserver 196.207.40.165#53
Oct 27 10:07:44 OpenWrt daemon.info dnsmasq[2339]: using local addresses only for domain lan
Oct 27 10:07:44 OpenWrt daemon.notice pppd[1558]: Connection terminated.
Oct 27 10:07:44 OpenWrt kern.info kernel: [40329.380000] usb 1-1: USB disconnect, device number 107
Oct 27 10:07:44 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; has lost the connection
Oct 27 10:07:45 OpenWrt daemon.info pppd[1558]: Terminating on signal 15
Oct 27 10:07:45 OpenWrt daemon.info pppd[1558]: Exit.
Oct 27 10:07:45 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; is now down
Oct 27 10:07:50 OpenWrt kern.info kernel: [40335.910000] usb 1-1: new high-speed USB device number 108 using ehci-platform
Oct 27 10:07:50 OpenWrt kern.info kernel: [40336.150000] scsi1240 : usb-storage 1-1:1.0
Oct 27 10:07:51 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:07:51 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Selecting /etc/usb_modeswitch.d/19d2:1179 for mode switching
Oct 27 10:07:51 OpenWrt syslog.notice usb_modeswitch: switching device 19d2:1179 on 001/108
Oct 27 10:07:51 OpenWrt kern.info kernel: [40336.410000] usb 1-1: USB disconnect, device number 108
Oct 27 10:08:01 OpenWrt authpriv.info dropbear[1795]: Child connection from 192.168.1.72:49081
Oct 27 10:08:01 OpenWrt kern.info kernel: [40346.650000] usb 1-1: new high-speed USB device number 109 using ehci-platform
Oct 27 10:08:01 OpenWrt kern.info kernel: [40346.960000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
Oct 27 10:08:01 OpenWrt kern.info kernel: [40347.080000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
Oct 27 10:08:01 OpenWrt kern.info kernel: [40347.140000] scsi1241 : usb-storage 1-1:1.7
Oct 27 10:08:03 OpenWrt kern.notice kernel: [40348.190000] scsi 1241:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
Oct 27 10:08:05 OpenWrt authpriv.notice dropbear[1795]: Password auth succeeded for &#039;root&#039; from 192.168.1.72:49081
Oct 27 10:08:22 OpenWrt user.notice usb-modeswitch: 1-1:1.0: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:22 OpenWrt user.notice usb-modeswitch: 1-1:1.1: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:22 OpenWrt user.notice usb-modeswitch: 1-1:1.2: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.3: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.4: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.5: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.6: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.7: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.8: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:23 OpenWrt user.notice usb-modeswitch: 1-1:1.9: Manufacturer=Vodafone Product=K3772-Z Serial=2B6971F99C854B01DD831A403D8B3DBF06B25232
Oct 27 10:08:24 OpenWrt daemon.notice pppd[1977]: pppd 2.4.5 started by root, uid 0
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: abort on (BUSY)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: abort on (NO CARRIER)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: abort on (ERROR)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: report (CONNECT)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: timeout set to 20 seconds
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: send (AT&amp;F^M)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: expect (OK)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: AT&amp;F^M^M
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: OK
Oct 27 10:08:25 OpenWrt local2.info chat[1981]:  -- got it
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: send (ATE1^M)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: expect (OK)
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: ^M
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: ATE1^M^M
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: OK
Oct 27 10:08:25 OpenWrt local2.info chat[1981]:  -- got it
Oct 27 10:08:25 OpenWrt local2.info chat[1981]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M)
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: timeout set to 30 seconds
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: expect (OK)
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: ^M
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M^M
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: OK
Oct 27 10:08:26 OpenWrt local2.info chat[1981]:  -- got it
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: send (ATD*99***1#^M)
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: expect (CONNECT)
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: ^M
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: ATD*99***1#^M^M
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: CONNECT
Oct 27 10:08:26 OpenWrt local2.info chat[1981]:  -- got it
Oct 27 10:08:26 OpenWrt local2.info chat[1981]: send ( ^M)
Oct 27 10:08:26 OpenWrt daemon.info pppd[1977]: Serial connection established.
Oct 27 10:08:26 OpenWrt daemon.info pppd[1977]: Using interface 3g-Internet
Oct 27 10:08:26 OpenWrt daemon.notice pppd[1977]: Connect: 3g-Internet &lt;--&gt; /dev/ttyACM0
Oct 27 10:08:27 OpenWrt daemon.info pppd[1977]: Remote message: Icera PPP - Password Verified OK
Oct 27 10:08:27 OpenWrt daemon.notice pppd[1977]: PAP authentication succeeded
Oct 27 10:08:30 OpenWrt daemon.notice pppd[1977]: local  IP address 41.192.151.240
Oct 27 10:08:30 OpenWrt daemon.notice pppd[1977]: remote IP address 10.0.0.1
Oct 27 10:08:30 OpenWrt daemon.notice pppd[1977]: primary   DNS address 196.207.40.167
Oct 27 10:08:30 OpenWrt daemon.notice pppd[1977]: secondary DNS address 196.207.40.165
Oct 27 10:08:30 OpenWrt daemon.notice netifd: Interface &#039;Internet&#039; is now up
Oct 27 10:08:30 OpenWrt user.notice ifup: Enabling Router Solicitations on Internet (3g-Internet)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# lsusb
Bus 001 Device 113: ID 19d2:1181 ZTE WCDMA Technologies MSM 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# dmesg 
...
[40137.670000] scsi1235 : usb-storage 1-1:1.7
[40138.720000] scsi 1235:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
[40192.200000] usb 1-1: USB disconnect, device number 103
[40198.660000] usb 1-1: new high-speed USB device number 104 using ehci-platform
[40198.900000] scsi1236 : usb-storage 1-1:1.0
[40199.160000] usb 1-1: USB disconnect, device number 104
[40209.410000] usb 1-1: new high-speed USB device number 105 using ehci-platform
[40209.640000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
[40209.700000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
[40209.770000] scsi1237 : usb-storage 1-1:1.7
[40210.820000] scsi 1237:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
[40255.910000] usb 1-1: USB disconnect, device number 105
[40262.250000] usb 1-1: new high-speed USB device number 106 using ehci-platform
[40262.490000] scsi1238 : usb-storage 1-1:1.0
[40262.750000] usb 1-1: USB disconnect, device number 106
[40273.000000] usb 1-1: new high-speed USB device number 107 using ehci-platform
[40273.230000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
[40273.290000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
[40273.360000] scsi1239 : usb-storage 1-1:1.7
[40274.410000] scsi 1239:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
[40329.380000] usb 1-1: USB disconnect, device number 107
[40335.910000] usb 1-1: new high-speed USB device number 108 using ehci-platform
[40336.150000] scsi1240 : usb-storage 1-1:1.0
[40336.410000] usb 1-1: USB disconnect, device number 108
[40346.650000] usb 1-1: new high-speed USB device number 109 using ehci-platform
[40346.960000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
[40347.080000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
[40347.140000] scsi1241 : usb-storage 1-1:1.7
[40348.190000] scsi 1241:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
[40402.250000] usb 1-1: USB disconnect, device number 109
[40408.510000] usb 1-1: new high-speed USB device number 110 using ehci-platform
[40408.750000] scsi1242 : usb-storage 1-1:1.0
[40409.010000] usb 1-1: USB disconnect, device number 110
[40419.010000] usb 1-1: new high-speed USB device number 111 using ehci-platform
[40419.240000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
[40419.300000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
[40419.370000] scsi1243 : usb-storage 1-1:1.7
[40420.420000] scsi 1243:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
[40475.350000] usb 1-1: USB disconnect, device number 111
[40481.380000] usb 1-1: new high-speed USB device number 112 using ehci-platform
[40481.620000] scsi1244 : usb-storage 1-1:1.0
[40481.880000] usb 1-1: USB disconnect, device number 112
[40491.880000] usb 1-1: new high-speed USB device number 113 using ehci-platform
[40492.110000] cdc_acm 1-1:1.1: ttyACM0: USB ACM device
[40492.170000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
[40492.240000] scsi1245 : usb-storage 1-1:1.7
[40493.290000] scsi 1245:0:0:0: CD-ROM            Vodafone USB SCSI CD-ROM  0001 PQ: 0 ANSI: 0
root@OpenWrt:~# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215787">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						27 Oct 2013, 12:25					</div>
				</div>
				<div class="post-content content">
					<p>I had this kind of issues with my 3G connection too in AA 12.09.<br />I would suggest to flash a trunk release, at least that was the solution in my case...</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 27 Oct 2013, 12:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215843">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						28 Oct 2013, 02:08					</div>
				</div>
				<div class="post-content content">
					<p>Insufficient power from the routers usb port,&nbsp; connect the ZTE dongle via a separately powered usb hub.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215882">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ryandekock1988</div>
					<div class="post-datetime">
						28 Oct 2013, 12:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><p>Insufficient power from the routers usb port,&nbsp; connect the ZTE dongle via a separately powered usb hub.</p></blockquote></div><br /><p>I can&#039;t image that is the problem, this is a routerboard 750 and works fine with RouterOS.</p><p>Trying to build from trunk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215886">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						28 Oct 2013, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>maybe another /dev/ttyACMX works better?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215911">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						28 Oct 2013, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>Insufficient usb power is the most common reason for a 3G dongle to loop on the usb bus, the dongle draws too much current when connecting to the tower causing usb supply voltage drop.<br />The voltage drop makes the dongle reset and then reappear again on the bus, getting mode switched , new connection attempt, and again voltage drop with reset. <br />Test with a powered usb hub, it will most likely fix it. If it doesn&#039;t then you have at least crossed out the most likely reason and can start search elsewhere for the reason.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215946">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ryandekock1988</div>
					<div class="post-datetime">
						28 Oct 2013, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>OK, well i have built from the latest trunk and problem still persists. I however don&#039;t have an external usb plug to test with.</p><p>Is it possible to see the current draw of power the usb is using to confirm that its the problem? Is there anyway to debug and know that this is the issue?</p><p>EDIT:</p><p>Another thing thats pretty strange.</p><p>The modem comes up and gets connected</p><div class="codebox"><pre><code>Mon Oct 28 21:40:50 2013 kern.info kernel: [ 2542.160000] cdc_acm 1-1:1.3: ttyACM1: USB ACM device
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: abort on (BUSY)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: abort on (NO CARRIER)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: abort on (ERROR)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: report (CONNECT)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: timeout set to 10 seconds
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: send (AT&amp;F^M)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: expect (OK)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: AT&amp;F^M^M
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: OK
Mon Oct 28 21:41:03 2013 local2.info chat[11821]:  -- got it
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: send (ATE1^M)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: expect (OK)
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: ^M
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: ATE1^M^M
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: OK
Mon Oct 28 21:41:03 2013 local2.info chat[11821]:  -- got it
Mon Oct 28 21:41:03 2013 local2.info chat[11821]: send (AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M)
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: timeout set to 30 seconds
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: expect (OK)
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: ^M
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: AT+CGDCONT=1,&quot;IP&quot;,&quot;unrestricted&quot;^M^M
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: OK
Mon Oct 28 21:41:04 2013 local2.info chat[11821]:  -- got it
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: send (ATD*99***1#^M)
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: expect (CONNECT)
Mon Oct 28 21:41:04 2013 local2.info chat[11821]: ^M
Mon Oct 28 21:41:05 2013 local2.info chat[11821]: ATD*99***1#^M^M
Mon Oct 28 21:41:05 2013 local2.info chat[11821]: CONNECT
Mon Oct 28 21:41:05 2013 local2.info chat[11821]:  -- got it
Mon Oct 28 21:41:05 2013 local2.info chat[11821]: send ( ^M)
Mon Oct 28 21:41:05 2013 daemon.info pppd[11149]: Serial connection established.
Mon Oct 28 21:41:05 2013 daemon.info pppd[11149]: Using interface 3g-Internet
Mon Oct 28 21:41:05 2013 daemon.notice pppd[11149]: Connect: 3g-Internet &lt;--&gt; /dev/ttyACM1
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: local  IP address 41.192.144.124
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: remote IP address 10.0.0.1
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: primary   DNS address 196.207.40.167
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: secondary DNS address 196.207.40.165</code></pre></div><p>but as soon&nbsp; as I try move traffic (from that host or via the internet) the modem shutsdow completely?</p><div class="codebox"><pre><code>user@admin:~$ ping 41.192.144.124
PING 41.192.144.124 (41.192.144.124) 56(84) bytes of data.</code></pre></div><div class="codebox"><pre><code>Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: local  IP address 41.192.144.124
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: remote IP address 10.0.0.1
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: primary   DNS address 196.207.40.167
Mon Oct 28 21:41:09 2013 daemon.notice pppd[11149]: secondary DNS address 196.207.40.165
Mon Oct 28 21:43:01 2013 kern.info kernel: [ 2673.160000] usb 1-1: USB disconnect, device number 68
Mon Oct 28 21:43:01 2013 daemon.notice pppd[11149]: Modem hangup
Mon Oct 28 21:43:01 2013 daemon.info pppd[11149]: Connect time 1.9 minutes.
Mon Oct 28 21:43:01 2013 daemon.info pppd[11149]: Sent 0 bytes, received 0 bytes.
Mon Oct 28 21:43:01 2013 daemon.notice pppd[11149]: Connection terminated.</code></pre></div><br /><p>to make matters even more strange. when the modem is connected I can ping DNS and it doesn&#039;t hangup, its only when it tries to use &quot;the internet&quot;</p><p>Is there not something wrong in my network section? that default gateway looks off?</p><div class="codebox"><pre><code>config interface &#039;Internet&#039;
    option proto &#039;3g&#039;
    option device &#039;/dev/ttyACM1&#039;
    option service &#039;umts&#039;
    option apn &#039;unrestricted&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>ryandekock1988</strong> on 28 Oct 2013, 23:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215986">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						29 Oct 2013, 09:21					</div>
				</div>
				<div class="post-content content">
					<p>maybe on another ttyACMx interface works better? Also can you print results from &quot;dmesg | grep usb&quot; and from &quot; cat /sys/bus/usb/devices/1-1/speed&quot;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>