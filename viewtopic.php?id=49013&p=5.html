<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [HowTo] Openwrt cheap Digital Stereo WiFi Internet Radio &amp; MP3 Player</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=49013&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p311566">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">omiez</div>
					<div class="post-datetime">
						15 Feb 2016, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>Pilovis i want to thank you for your effort here and for helping.</p><p>Pilovis voglio ringraziarti per il tuo sforzo e per aver aiutato.</p><p>Sarebbe bello sapere in quale forum parlerai dei progetti pi.</p><p>Grazie</p>											<p class="post-edited">(Last edited by <strong>omiez</strong> on 15 Feb 2016, 21:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311801">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						17 Feb 2016, 10:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311815">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						17 Feb 2016, 12:31					</div>
				</div>
				<div class="post-content content">
					<p>omiez,</p><p>I&#039;ve just finished a very sofisticated Home Burglar Alarm (release 2.0) with video motion detection, with the following features:</p><p>- on motion detection automatic picture/video recording, <br />- on motion detection audio(local)/mail/SMS alerts,<br />- on motion detection automatic phone call (ambient speakerphone mode)<br />- on motion detection external relay activation (light or other device) <br />- Infrared/Android/Web browser/SMS remote control.</p><p>This project mainly uses USB support, Motion, Gnokii, Alsa, msmtp, CGI &amp; PHP languages and a lot of cgi/php/bash programming. </p><p>The original project was developped with OpenWRT Barrier Breaker on Tp-LINK TL-WDR3600 router (I choosed it because of its 128 Mbytes ram and 560 Mhz CPU).<br />I was thinking to put the complete How-To here, but after intensive testing I discovering some criticity and instability of the Openwrt system (not related to this specific router), I&#039;m now thinking to move the entire project to Raspberry.<br />I will eventually put the new How-To in a Raspberry dedicated forum.</p><p>I will let you know.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 17 Feb 2016, 17:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311821">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						17 Feb 2016, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>But moving to Raspberry Pi means only moving to another device. The RPI is also supported by Openwrt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p311835">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						17 Feb 2016, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>I won&#039;t use OpenWRT on Raspberry but Raspbian.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 17 Feb 2016, 17:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319616">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						14 Apr 2016, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>I performed many tests on Raspberry PI Wheezy and changed my idea, I found it extremely slow compared to a router with OpenWRT and very instable too.<br />Also I tested Rasperry PI with OpenWRT Barrier Breaker, worst than before, too many packages missing!</p><p>I think I will go back to my TP-link TL-WRD3600 with OpenWRT Barrier Breaker, the best solution I&#039;ve found up to now.</p><p>I will soon post a new project <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 14 Apr 2016, 13:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331545">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						14 Jul 2016, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Nice web interface for MPD server that can be easily installed to openWRT (see below):</p><p><span class="postimg"><img src="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" alt="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" /></span></p><p>Project page: <a href="https://github.com/tompreston/MPD-Web-Remote">https://github.com/tompreston/MPD-Web-Remote</a></p><br /><p>NOTE: this interface needs <span style="color: red">Chrome browser </span>to be correctly displayed.<br />The advantage of this web interface is that you don&#039;t need to install anything from the client side and it works on any system: Windows, Mac, Linux, Android, Iphone <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><br /><p><strong>*** Instructions how to install it on OpenWRT</strong></p><br /><p><span class="bbu">1) Install packages for PHP support</span></p><p><strong>opkg update<br />opkg install php5 php5-cgi</strong></p><br /><p><span class="bbu">2) Configure uhttpd web server for PHP</span></p><p>edit file&nbsp; &quot;/etc/config/uhttpd&quot; (add two lines to enable PHP):</p><p><em>config uhttpd &#039;main&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_http &#039;0.0.0.0:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_http &#039;[::]:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_https &#039;0.0.0.0:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_https &#039;[::]:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option home &#039;/www&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rfc1918_filter &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_requests &#039;3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_connections &#039;100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cert &#039;/etc/uhttpd.crt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;/etc/uhttpd.key&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cgi_prefix &#039;/cgi-bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option script_timeout &#039;60&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network_timeout &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option http_keepalive &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcp_keepalive &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ubus_prefix &#039;/ubus&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option config &#039;/etc/httpd.conf&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <span style="color: red">option interpreter &#039;.php=/usr/bin/php-cgi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option index_page &#039;index.php index.html&#039;</span></em></p><p><em>config cert &#039;px5g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option days &#039;730&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bits &#039;1024&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;DE&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option state &#039;Berlin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option location &#039;Berlin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option commonname &#039;OpenWrt&#039;</em></p><br /><p><span class="bbu">3) create working directory:</span></p><p><strong>mkdir /www/music</strong></p><br /><p><span class="bbu">4) download and copy files:</span></p><p><a href="https://github.com/tompreston/MPD-Web-Remote/archive/master.zip">https://github.com/tompreston/MPD-Web-R … master.zip</a></p><p>extract all the files you&#039;ll find inside of the directory &quot;MPD-Web-Remote-master&quot; (on the zip) and copy them to the directory &quot;/www/music&quot; of your router</p><p>Note: do not copy the &quot;MPD-Web-Remote-master&quot; directly to /www/music, just copy all files from inside this directory to /www/music.</p><br /><p><span class="bbu">5) restart system</span><br />restart your router</p><br /><p><span class="bbu">6) adding radio stations</span></p><p>To add internet radio stations use the following command:</p><p><strong>mpc add </strong>(sreaming-url)</p><p>example: <strong>mpc add <a href="http://144.76.106.52:7000/chillout.mp3">http://144.76.106.52:7000/chillout.mp3</a></strong></p><p>Now you can access the web interface from<span style="color: red"> <em>http://ip-of-your-router/music</em></span><br />example: <a href="http://192.168.1.1/music">http://192.168.1.1/music</a></p><p>Obviously you need to have mpd and mpc installed and active <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p><span style="color: red">Addendum: it seems there is a bug in mpd/mpc for OpenWRT:<br />the &quot;mpc add&quot; command does not update the database file, so at the reboot you won&#039;t find any station to play, see below for a workaround, also the &quot;volume&quot; command of MPC does not work (they did a bad job!)</span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 6 Sep 2016, 21:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332158">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						19 Jul 2016, 13:16					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu"><strong>WiFi stereo Internet Digital Radio with embedded web interface, all in 8 Mbytes of Flash! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></strong></span></p><p>following the previous post, after some tries, I was finally able to install a fully Wi-FI Internet Radio Player into a cheap router with a single usb port, 32 Mbytes of ram and 8 Mbytes of Flash plus a cheap USB Audio card and ... nothing else <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I choosed the TP-Link TL-WR710N router because of its integrated power supply, I don&#039;t want to have any power cord laying around!</p><p><span class="postimg"><img src="http://www.tp-link.it/res/images/products/gallery/TL-WR710N-02.jpg" alt="http://www.tp-link.it/res/images/products/gallery/TL-WR710N-02.jpg" /></span> <span class="postimg"><img src="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" alt="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" /></span></p><br /><p><span class="bbu">These are the instructions to configure and install it on a TP-Link TL-WR710N Router:</span></p><p>Install Barrier Breaker 14.04 firmware for TL-WR710N router: <br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr710n-v1-squashfs-factory.bin">https://downloads.openwrt.org/barrier_b … actory.bin</a></p><p><span style="color: red">configure your router as usual: system, ssh access, network, dhcp and WiFi</span> (we&#039;ll keep these configurations), </p><p>test it but do not install any package.</p><p><span style="color: red"><strong>Update the firmware with my custom firmware (see below) using Luci interface but do not forget to enable the option to keep settings! (current configuration files)</strong></span></p><p>this is my <span class="bbu">custom firmware</span> for TL-WR710N without luci, ppp and IPv6 to save precious space:<br /><a href="http://www.lovisolo.com/asterisk/software/openwrt/firmware/TP-Link_TL-WR710/Barrier_Breaker_14.07/ar71xx_senza_luci_ppp_ipv6/openwrt-ar71xx-generic-tl-wr710n-v1-squashfs-sysupgrade.bin">http://www.lovisolo.com/asterisk/softwa … pgrade.bin</a><br />(you may also use it for any other project, if you want to use a different router you need to build your custom specific&nbsp; firmware)</p><p>After the firmware update (a few minutes) the router reboots<br />then you can access it as usual (by ssh access because there is no more luci interface)<br />then give the following commands:</p><p><strong>opkg update<br />opkg install kmod-sound-core <br />opkg install kmod-usb-audio<br />opkg install alsa-utils<br />opkg install mpd-mini<br />opkg install mpc<br />mkdir /root/music<br />mkdir /root/playlist<br />touch /root/mpd.db</strong></p><p>edit mpd configuration file to match the following </p><p><strong>vi /etc/mpd.conf</strong></p><p><span style="color: blue"><em>#<br />music_directory&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;/root//music&quot;<br />playlist_directory&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;/root/playlist&quot;<br />db_file&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;/root/mpd.db&quot;<br /></em></span></p><p><span style="color: blue"><em>bind_to_address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;0.0.0.0&quot;<br />port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;6600&quot;</em></span></p><p><span style="color: blue"><em>input {<br />&nbsp; &nbsp; &nbsp; &nbsp; plugin &quot;curl&quot;<br />}</em></span></p><p><span style="color: blue"><em>audio_output {<br />&nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;oss&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;My OSS Device&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;/dev/dsp&quot;&nbsp; &nbsp; &nbsp; # optional<br />}</em></span><br /><span style="color: blue"><em><br />audio_output_format&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;44100:16:2&quot;<br />replaygain&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;auto&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />volume_normalization&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;yes&quot;<br />samplerate_converter&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;internal&quot;<br />audio_buffer_size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;6144&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />buffer_before_play&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;40%&quot; </em></span></p><p><span style="color: blue"><em># eof</em></span></p><p><em>Note: vi commands <br />&quot;I&quot; to edit file<br />press &quot;Esc&quot; and &quot;:&quot; and &quot;wq&quot; to save</em></p><br /><p>launch mpd for the first time (ignore errors)</p><p><strong>mpd</strong></p><p>then reboot</p><p><strong>reboot</strong></p><p>Install PHP support</p><p><strong>opkg update<br />opkg install php5 php5-cgi</strong></p><p>Configure uhttpd web server for PHP</p><p><strong>vi /etc/config/uhttpd</strong></p><p><span style="color: blue"><em>config uhttpd &#039;main&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_http &#039;0.0.0.0:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_http &#039;[::]:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_https &#039;0.0.0.0:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_https &#039;[::]:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option home &#039;/www&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rfc1918_filter &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_requests &#039;3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_connections &#039;100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cert &#039;/etc/uhttpd.crt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;/etc/uhttpd.key&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cgi_prefix &#039;/cgi-bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option script_timeout &#039;60&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network_timeout &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option http_keepalive &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcp_keepalive &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ubus_prefix &#039;/ubus&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option config &#039;/etc/httpd.conf&#039;</em></span><em><br />&nbsp; &nbsp; &nbsp; <span style="color: red">&nbsp; option interpreter &#039;.php=/usr/bin/php-cgi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option index_page &#039;index.php index.html&#039;</span></em></p><p><span style="color: blue"><em>config cert &#039;px5g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option days &#039;730&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bits &#039;1024&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;DE&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option state &#039;Berlin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option location &#039;Berlin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option commonname &#039;OpenWrt&#039;<br /></em></span><br />create working directory</p><p><strong>mkdir /www/music</strong></p><p>install and launch ftp server to load files form your pc to the router</p><p><strong>opkg install vsftpd<br />/etc/init.d/vsftpd start</strong></p><p>transfer with a ftp client (user = root) from your pc all the files you&#039;ll find inside the &quot;www&quot; directory of the following zip file: <br /><a href="http://www.lovisolo.com/asterisk/software/openwrt/radio-mp3/www.zip">http://www.lovisolo.com/asterisk/softwa … p3/www.zip</a><br />into the router &quot;/www/music&quot; directory</p><p>enable mpd to autostart at boot</p><p><strong>/etc/init.d/mpd enable</strong></p><p>then reboot</p><p><strong>reboot</strong></p><p>adding radio stations</p><p>To add internet radio stations use the following command:<br /><strong><br />mpc add</strong> (sreaming-url)</p><p>some stations to add: <br />mpc add <a href="http://144.76.106.52:7000/chillout.mp3">http://144.76.106.52:7000/chillout.mp3</a><br />mpc add <a href="http://icestreaming.rai.it/4.mp3">http://icestreaming.rai.it/4.mp3</a><br />mpc add <a href="http://205.164.62.15:9010/">http://205.164.62.15:9010/</a><br />mpc add <a href="http://streaming.radionomy.com/PassionLoveRadio">http://streaming.radionomy.com/PassionLoveRadio</a><br />mpc add <a href="http://176.31.240.87:8025">http://176.31.240.87:8025</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsj/mp3_128">http://stream.srg-ssr.ch/m/rsj/mp3_128</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsc_it/mp3_128">http://stream.srg-ssr.ch/m/rsc_it/mp3_128</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsp/mp3_128">http://stream.srg-ssr.ch/m/rsp/mp3_128</a><br />mpc add <a href="http://streaming.radionomy.com/CristalRelax">http://streaming.radionomy.com/CristalRelax</a><br />mpc add <a href="http://streaming.radionomy.com/Radio-Quelit">http://streaming.radionomy.com/Radio-Quelit</a><br />mpc add <a href="http://streaming.radionomy.com/GOLDEN-SIXTIES-SEVENTIES-EIGHTIES-RADIO">http://streaming.radionomy.com/GOLDEN-S … TIES-RADIO</a><br />mpc add <a href="http://streaming.radionomy.com/R-E-T-R-OF-M">http://streaming.radionomy.com/R-E-T-R-OF-M</a><br />mpc add <a href="http://streaming.radionomy.com/radio-accordeon">http://streaming.radionomy.com/radio-accordeon</a><br />mpc add <a href="http://streaming.radionomy.com/100-HIT-ra">http://streaming.radionomy.com/100-HIT-ra</a><br />mpc add <a href="http://streaming.radionomy.com/colombiaromantica">http://streaming.radionomy.com/colombiaromantica</a><br />mpc add <a href="http://streaming.radionomy.com/Ambiance-Reggae">http://streaming.radionomy.com/Ambiance-Reggae</a><br />mpc add <a href="http://streaming.hotmix-radio.net/hotmixradio-lounge-128.mp3">http://streaming.hotmix-radio.net/hotmi … ge-128.mp3</a><br />mpc add <a href="http://streaming.radionomy.com/always-80s">http://streaming.radionomy.com/always-80s</a><br />mpc add <a href="http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock">http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock</a><br />mpc add <a href="http://streaming.radionomy.com/Cafe-Romantico-Radio">http://streaming.radionomy.com/Cafe-Romantico-Radio</a><br />mpc add <a href="http://streaming.radionomy.com/1000-HITS-Sweet-Radio">http://streaming.radionomy.com/1000-HITS-Sweet-Radio</a><br />mpc add <a href="http://46.37.20.205:8000/rdsmp3">http://46.37.20.205:8000/rdsmp3</a><br />ecc.</p><p><span style="color: red">Addendum: it seems there is a bug in mpd/mpc for OpenWRT:<br />the &quot;mpc add&quot; command does not update the database file, so at the reboot you won&#039;t find any station to play, see below for a workaround</span></p><p>Enable &quot;repeat mode&quot;</p><p><strong>mpc repeat on</strong></p><p>Now you can access the web interface from http://ip-of-your-router/music<br />example: <a href="http://192.168.1.1/music">http://192.168.1.1/music</a></p><p>NOTE: this interface needs <span style="color: red">Chrome browser</span> to be correctly displayed.</p><p>----------------------------------------------------------</p><p><span class="bbu">Extra stuffs</span></p><p>To save anytime your current audio volume level, launch the following command:</p><p><strong>/usr/sbin/alsactl -f /etc/alsa0.state store 0 </strong></p><p>and then to restore it on boot, insert the following line in &quot;/etc/rc.local&quot; file, right before the &quot;exit 0&quot; line</p><p><strong>vi /etc/rc.local</strong></p><p><span style="color: blue"><em>/usr/sbin/alsactl -f /etc/alsa0.state restore 0</em></span><br /><span class="bbu"><br />Basic Authentication on uhttpd</span></p><p>To add a password to uhttpd (web page access) to avoid that anyone can control your radio, use the following commands:</p><p><strong>uci set uhttpd.main.config=/etc/httpd.conf<br />uci commit uhttpd<br />echo &quot;/:user:<em><span style="color: #FF0000">password</span></em>&quot; &gt; $(uci get uhttpd.main.config)<br />/etc/init.d/uhttpd restart</strong></p><p>note: change user:<span style="color: #FF0000">password</span> with your desidered user/password (for Web access)</p><p>-------------------------------------------------------------<br />Web interface as seen from an Android/iPhone smartphone:</p><p><span class="postimg"><img src="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" alt="https://camo.githubusercontent.com/4bdec174b19a659485dfb3f64207a4ed1b0fa0b8/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f313031353730322f6c696e6b65645f746f2f6d70642d7765622d636c69656e742e6a7067" /></span></p><p>NOTE: this interface needs <span style="color: red">Chrome browser</span> to be correctly displayed.<br />Volume up and volume down MPD commands do not seem to work on Barrier Breaker, but work on Chaos Calmer.<br />----------------------------------------------------------------</p><p><span style="color: red">*** Alternatively if you don&#039;t like or don&#039;t want to use this web control interface you can use any MPC client available for your device.</span><br />In that case disable web server to save precious RAM:</p><p><strong>/etc/init.d/uhttpd disable<br />/etc/init.d/uhttpd stop</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 18 Jan 2018, 18:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332180">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						19 Jul 2016, 17:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>To add internet radio stations use the following command:<br /><strong><br />mpc add</strong> (sreaming-url)</p><p>some stations to add: <br />mpc add <a href="http://144.76.106.52:7000/chillout.mp3">http://144.76.106.52:7000/chillout.mp3</a><br />mpc add <a href="http://icestreaming.rai.it/4.mp3">http://icestreaming.rai.it/4.mp3</a><br />mpc add <a href="http://205.164.62.15:9010/">http://205.164.62.15:9010/</a><br />mpc add <a href="http://streaming.radionomy.com/PassionLoveRadio">http://streaming.radionomy.com/PassionLoveRadio</a><br />mpc add <a href="http://176.31.240.87:8025">http://176.31.240.87:8025</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsj/mp3_128">http://stream.srg-ssr.ch/m/rsj/mp3_128</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsc_it/mp3_128">http://stream.srg-ssr.ch/m/rsc_it/mp3_128</a><br />mpc add <a href="http://stream.srg-ssr.ch/m/rsp/mp3_128">http://stream.srg-ssr.ch/m/rsp/mp3_128</a><br />mpc add <a href="http://streaming.radionomy.com/CristalRelax">http://streaming.radionomy.com/CristalRelax</a><br />mpc add <a href="http://streaming.radionomy.com/Radio-Quelit">http://streaming.radionomy.com/Radio-Quelit</a><br />mpc add <a href="http://streaming.radionomy.com/GOLDEN-SIXTIES-SEVENTIES-EIGHTIES-RADIO">http://streaming.radionomy.com/GOLDEN-S … TIES-RADIO</a><br />mpc add <a href="http://streaming.radionomy.com/R-E-T-R-OF-M">http://streaming.radionomy.com/R-E-T-R-OF-M</a><br />mpc add <a href="http://streaming.radionomy.com/radio-accordeon">http://streaming.radionomy.com/radio-accordeon</a><br />mpc add <a href="http://streaming.radionomy.com/100-HIT-ra">http://streaming.radionomy.com/100-HIT-ra</a><br />mpc add <a href="http://streaming.radionomy.com/colombiaromantica">http://streaming.radionomy.com/colombiaromantica</a><br />mpc add <a href="http://streaming.radionomy.com/Ambiance-Reggae">http://streaming.radionomy.com/Ambiance-Reggae</a><br />mpc add <a href="http://streaming.hotmix-radio.net/hotmixradio-lounge-128.mp3">http://streaming.hotmix-radio.net/hotmi … ge-128.mp3</a><br />mpc add <a href="http://streaming.radionomy.com/always-80s">http://streaming.radionomy.com/always-80s</a><br />mpc add <a href="http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock">http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock</a><br />mpc add <a href="http://streaming.radionomy.com/Cafe-Romantico-Radio">http://streaming.radionomy.com/Cafe-Romantico-Radio</a><br />mpc add <a href="http://streaming.radionomy.com/1000-HITS-Sweet-Radio">http://streaming.radionomy.com/1000-HITS-Sweet-Radio</a><br />mpc add <a href="http://46.37.20.205:8000/rdsmp3">http://46.37.20.205:8000/rdsmp3</a><br />ecc.</p></blockquote></div><p>It seems there is a bug in mpd/mpc for OpenWRT: <br />the &quot;<strong>mpc add</strong>&quot; command does not update the database file, so at the reboot you won&#039;t find any station to play <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>but I found a workaround <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />it is the following:</p><p>edit the &quot;/etc/rc.local&quot; file as the following:<br /><strong><br />vi /etc/rc.local</strong></p><p><span style="color: blue"><em># Put your custom commands here that should be executed once<br /># the system init finished. By default this file does nothing.</em></span></p><p><span style="color: blue"><em>#<br /># restore audio volume<br />/usr/sbin/alsactl -f /etc/alsa0.state restore 0<br />#<br /># add new URLs starting from here:</em></span></p><p><span style="color: blue"><em>/usr/bin/mpc add <a href="http://144.76.106.52:7000/chillout.mp3">http://144.76.106.52:7000/chillout.mp3</a><br />/usr/bin/mpc add <a href="http://icestreaming.rai.it/4.mp3">http://icestreaming.rai.it/4.mp3</a><br />/usr/bin/mpc add <a href="http://205.164.62.15:9010/">http://205.164.62.15:9010/</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/PassionLoveRadio">http://streaming.radionomy.com/PassionLoveRadio</a><br />/usr/bin/mpc add <a href="http://176.31.240.87:8025">http://176.31.240.87:8025</a><br />/usr/bin/mpc add <a href="http://stream.srg-ssr.ch/m/rsj/mp3_128">http://stream.srg-ssr.ch/m/rsj/mp3_128</a><br />/usr/bin/mpc add <a href="http://stream.srg-ssr.ch/m/rsc_it/mp3_128">http://stream.srg-ssr.ch/m/rsc_it/mp3_128</a><br />/usr/bin/mpc add <a href="http://stream.srg-ssr.ch/m/rsp/mp3_128">http://stream.srg-ssr.ch/m/rsp/mp3_128</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/CristalRelax">http://streaming.radionomy.com/CristalRelax</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/Radio-Quelit">http://streaming.radionomy.com/Radio-Quelit</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/GOLDEN-SIXTIES-SEVENTIES-EIGHTIES-RADIO">http://streaming.radionomy.com/GOLDEN-S … TIES-RADIO</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/R-E-T-R-OF-M">http://streaming.radionomy.com/R-E-T-R-OF-M</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/radio-accordeon">http://streaming.radionomy.com/radio-accordeon</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/100-HIT-ra">http://streaming.radionomy.com/100-HIT-ra</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/colombiaromantica">http://streaming.radionomy.com/colombiaromantica</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/Ambiance-Reggae">http://streaming.radionomy.com/Ambiance-Reggae</a><br />/usr/bin/mpc add <a href="http://streaming.hotmix-radio.net/hotmixradio-lounge-128.mp3">http://streaming.hotmix-radio.net/hotmi … ge-128.mp3</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/always-80s">http://streaming.radionomy.com/always-80s</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock">http://streaming.radionomy.com/Hit-s-My-Music-Pop-Rock</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/Cafe-Romantico-Radio">http://streaming.radionomy.com/Cafe-Romantico-Radio</a><br />/usr/bin/mpc add <a href="http://streaming.radionomy.com/1000-HITS-Sweet-Radio">http://streaming.radionomy.com/1000-HITS-Sweet-Radio</a><br />/usr/bin/mpc add <a href="http://46.37.20.205:8000/rdsmp3">http://46.37.20.205:8000/rdsmp3</a></em></span></p><p><span style="color: blue"><em># do not remove or modify the two lines below<br />/usr/bin/mpc repeat on<br />exit 0<br /></em></span></p><p>with this workaround, at the startup, the radio stations will be added to the MPD daemon.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 22 Jul 2016, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332182">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						19 Jul 2016, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>To use the led of the TL-WR710 as a WiFi indicator (wifi connection and network activity), this is the piece of configuration to put in the &quot;/etc/config/system&quot; file:</p><p><span style="color: blue"><em>config led<br />&nbsp; &nbsp; &nbsp; &nbsp; option default &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option sysfs &#039;tp-link:blue:system&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dev &#039;wlan0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;link tx rx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;WiFI</em></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 19 Jul 2016, 18:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332199">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						19 Jul 2016, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>I put this OpenWRT Digital Internet Radio inside an old and beautiful stereo radio receiver from 1964 (all with vacuum tubes).<br />The original FM section is defective (I&#039;m able but too lazy to repair it) but the stereo amplifier is still superb with strong bass and brilliant high frequencies.</p><p>Now I have one of the very few (maybe the only one) &quot;Vacuum Tubes WiFi Digital Stereo Internet Radio&quot; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/radio-mp3/20160723_105131.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/radio-mp3/20160723_105131.jpg" /></span></p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/radio-mp3/20160723_104014.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/radio-mp3/20160723_104014.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 24 Jul 2016, 10:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332267">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						20 Jul 2016, 15:32					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu">addendum:</span></p><p>there is enough remaining space on the OpenWRT Radio described above to also install Triggerhappy to use the buttons (if any) on your USB audio device to control MPD: play, next radio station, prev radio station, volume up,&nbsp; volume down and mute.</p><p>Install triggerhappy: </p><p><strong>opkg update<br />opkg install kmod-usb-hid<br />opkg install&nbsp; kmod-hid kmod-hid-generic<br />opkg install kmod-usb-uhci<br />opkg install kmod-button-hotplug<br />opkg install kmod-gpio-button-hotplug<br />opkg install kmod-usb-ohci<br />opkg install triggerhappy</strong></p><p>edit the config file of triggerhappy &quot;/etc/triggerhappy/triggers.d/example.conf&quot;:</p><p><strong>vi /etc/triggerhappy/triggers.d/example.conf</strong></p><p><span style="color: blue"><em><br />#<br /># To view a list of supported event codes, use &quot;thd --listevents&quot; or<br /># &quot;thd --dump /dev/input/event*&quot;<br />#<br /># Format:<br /># &lt;eventcode&gt; &lt;value&gt; &lt;command&gt;<br />#<br /># values for key events are 1 (pressed), 0 (released) or 2 (held)<br />#<br />## control mpd<br /># start playing<br />KEY_PLAYPAUSE 1 /usr/bin/mpc play<br /># next station<br />KEY_NEXTSONG 1 /usr/bin/mpc next<br /># prev station<br />KEY_PREVIOUSSONG 1 /usr/bin/mpc prev<br />#&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />## control audio volume&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />#&nbsp; increase volume +2%:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />KEY_VOLUMEUP 1 /usr/bin/amixer -q set Speaker 2%+&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#&nbsp; set the volume at the minimum audible level (MUTE mode)<br />KEY_MIN_INTERESTING 1 amixer -q set Speaker 4&nbsp; &nbsp; &nbsp; <br /># decrease volume -2%:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />KEY_VOLUMEDOWN 1 /usr/bin/amixer -q set Speaker 2%-<br />#<br /># Notes:<br /># &quot;Speaker&quot; may need to be changed to &quot;PCM&quot;, it depends on your audio hardware,<br /># discover the right name by giving the command &quot; alsamixer &quot;<br /># also the name of the keys (KEY_xyxz) may need to be changed,<br /># discover their name by giving the following command: &quot; thd --dump /dev/input/event* &quot;<br /></em></span></p><p>then enable triggerhappy to be launched at the startup:</p><p><strong>/etc/init.d/triggerhappy enable</strong></p><p>reboot and enjoy <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>-------------------------------------------------</p><p>This is the one i used:</p><p><span class="postimg"><img src="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" alt="http://g04.a.alicdn.com/kf/HTB1IBg1KVXXXXaeXVXXq6xXFXXXy/For-Win-XP-7-8-10-font-b-Android-b-font-Linux-MacOS-External-USB-to.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 7 Jan 2018, 18:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332296">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						20 Jul 2016, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>... and some tweakings to improve radio functionality.</p><p>32 Megabytes of Ram are just the bare minimum for this internet radio to run, every extra kilobyte available is important.</p><p>Here are some tips to stop some useless (for this application) services to save some RAM and CPU usage:</p><p>Stop <strong>ntpd</strong> service by editing &quot;/etc/config/system&quot; and disable it:</p><p><span style="color: blue"><em>config timeserver &#039;ntp&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;0&#039;</em></span></p><p>Disable <strong>console on serial port</strong> (UART) by editing &quot;/etc/inittab&quot; and comment out the line like the following:</p><p><span style="color: blue"><em>#::askconsole:/bin/ash --login</em></span></p><p>edit &quot;/etc/php.ini&quot; and change the memory limit = 8 Mbytes to 4 Mbytes</p><p>Disable logging:</p><p><strong>/etc/init.d/log disable</strong></p><p>Disable sysfixtime:</p><p><strong>/etc/init.d/sysfixtime disable</strong></p><p>Disable dnsmasq:</p><p><strong>/etc/init.d/dnsmasq disable</strong></p><p>Disable cron (if you don&#039;t plan to use it)</p><p><strong>/etc/init.d/cron disable</strong></p><p>then reboot to apply.</p><p>Now if you run the <strong>top</strong> command you should see something like this:</p><p><em>Mem: 26016K used, 2844K free, 0K shrd, 468K buff, 2172K cached<br />CPU:&nbsp; 19% usr&nbsp; &nbsp;4% sys&nbsp; &nbsp;0% nic&nbsp; 75% idle&nbsp; &nbsp;0% io&nbsp; &nbsp;0% irq&nbsp; &nbsp;0% sirq<br />Load average: 0.23 0.22 0.11 1/37 1547<br />&nbsp; PID&nbsp; PPID USER&nbsp; &nbsp; &nbsp;STAT&nbsp; &nbsp;VSZ %VSZ %CPU COMMAND<br />&nbsp; 990&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; 20976&nbsp; 73%&nbsp; 21% /usr/bin/mpd<br />&nbsp; 945&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1552&nbsp; &nbsp;5%&nbsp; &nbsp;2% /usr/sbin/wpa_supplicant -B -P /var/r<br /> 1449&nbsp; 1284 root&nbsp; &nbsp; &nbsp;R&nbsp; &nbsp; &nbsp;1364&nbsp; &nbsp;5%&nbsp; &nbsp;1% top<br />&nbsp; &nbsp; 6&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kworker/u2:0]<br />&nbsp; 341&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kworker/u2:2]<br />&nbsp; 678&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1544&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/netifd<br />&nbsp; 786&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1512&nbsp; &nbsp;5%&nbsp; &nbsp;0% /usr/sbin/uhttpd -f -h /www -r OpenWr<br />&nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;0 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1388&nbsp; &nbsp;5%&nbsp; &nbsp;0% /sbin/procd<br /> 1284&nbsp; 1274 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1364&nbsp; &nbsp;5%&nbsp; &nbsp;0% -ash<br /> 1134&nbsp; &nbsp;678 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1360&nbsp; &nbsp;5%&nbsp; &nbsp;0% udhcpc -p /var/run/udhcpc-eth0.pid -s<br /> 1274&nbsp; &nbsp;732 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1220&nbsp; &nbsp;4%&nbsp; &nbsp;0% /usr/sbin/dropbear -F -P /var/run/dro<br />&nbsp; 732&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1152&nbsp; &nbsp;4%&nbsp; &nbsp;0% /usr/sbin/dropbear -F -P /var/run/dro<br />&nbsp; 464&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 884&nbsp; &nbsp;3%&nbsp; &nbsp;0% /sbin/ubusd<br />&nbsp; 996&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 804&nbsp; &nbsp;3%&nbsp; &nbsp;0% /usr/sbin/thd --socket /tmp/triggerha<br />&nbsp; &nbsp; 8&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kworker/u2:1]<br />&nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kworker/0:0]<br />&nbsp; 257&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kworker/0:2]<br />&nbsp; 338&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SWN&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [jffs2_gcd_mtd3]<br />&nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [ksoftirqd/0]<br />&nbsp; &nbsp;97&nbsp; &nbsp; &nbsp;2 root&nbsp; &nbsp; &nbsp;SW&nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;0%&nbsp; &nbsp;0% [kswapd0]</em></p><p>Without the &quot;top&quot; process we have just 3 megabytes of Ram available, not too much but enough <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If you want to use a MPD client instead of the integrated web page, disable uhttpd (/etc/init.d/uhttpd disable), this will save other 2 megabytes of Ram.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 18 Jan 2018, 18:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332360">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">omiez</div>
					<div class="post-datetime">
						21 Jul 2016, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Hello Pilovis<br />Glad to see that you returned to this project. I have a mr3220 that i could use to setup a new reciever.</p><br /><p>I think it is the same installation like in first page with 14.04, and also i would use usb Hub to use an external drive to increase space for installation. </p><p>What aboout of ram i n this Router, seems to be 4mb only too?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332363">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						21 Jul 2016, 15:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>omiez wrote:</cite><blockquote><p>Hello Pilovis<br />Glad to see that you returned to this project. I have a mr3220 that i could use to setup a new reciever.</p><br /><p>I think it is the same installation like in first page with 14.04, and also i would use usb Hub to use an external drive to increase space for installation. </p><p>What aboout of ram i n this Router, seems to be 4mb only too?</p></blockquote></div><p>Yes, this is an Energy Saving (Max 5 W) and Mini-version of the Internet Radio you see on the first page of this thread, the only difference is that this one fits on just 8 Megabytes of Flash and doesn&#039;t need anything else that a mini USB audio adapter (or a USB headset), I also added an embedded web server to let you remotely control the radio by a browser and also to see what station and song it is currently playing.<br />The usb audio adapter can be fitted into the router case with a little hardware hacking.</p><p>The RAM of mr3220 is 32 Mbytes, that&#039;s OK.<br />The Flash is only 4 Mbytes, but If you install external USB Overlay to increase flash space, I think there won&#039;t be any problem to install this internet radio.<br />Eventually, install and enable a Swap space on the external USB drive (64 Mbytes will be enough), this will improve performances in terms of speed of controlling and changing radio stations.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 21 Jul 2016, 16:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332372">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						21 Jul 2016, 17:00					</div>
				</div>
				<div class="post-content content">
					<p>By using a USB headset instead of the USB audio adapter, and four AAA rechargeable batteries or a small 5v power bank (to be connected inside the router) you can use this as a portable WiFi Digital Internet Radio <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> <br />[the main power socket of this router is detachable]<br />When connected to the main supply voltage the batteries or power bank are recharged (a recharging circuit is needed).<br />You may also use a traditional stereo headset (3.5 mm jack), but in this case you have to use the USB audio adapter, it might be fitted inside the router case as well.</p><p>It could be also solar powered since the total power consumption is no more than 1W for the router itself and about 1W for the USB audio interface.</p><p><span class="postimg"><img src="http://www.technikaffe.de/anleitung/test_tp-link_tl-wr710n_w-lan_3.jpg" alt="http://www.technikaffe.de/anleitung/test_tp-link_tl-wr710n_w-lan_3.jpg" /></span></p><p><span class="postimg"><img src="http://1.bp.blogspot.com/-NQVz9eJDvig/Uw8mJ9Q41TI/AAAAAAAAAP4/sNIT1dFWzRU/s1600/WP_20140223_009.jpg" alt="http://1.bp.blogspot.com/-NQVz9eJDvig/Uw8mJ9Q41TI/AAAAAAAAAP4/sNIT1dFWzRU/s1600/WP_20140223_009.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 26 Jul 2016, 16:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332462">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						22 Jul 2016, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just created a very simple and light web page to let control the radio by Firefox browser without using PHP (too much memory comsumption).<br />The page is configured to be easily used by a smartphone bowser, there are no frills, just the bare essentials <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />The audio volume control is not implemented yet, mostly because the &quot;mpc volume&quot; command does not function in this Openwrt version <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />, anyway you can use other solutions to control the audio volume by a cgi script (eg. <em>/usr/bin/amixer -q set device value</em>)</p><br /><p>The idea is to use cgi.</p><p>This is just an example of the<strong> /www/cgi-bin/play.cgi</strong> script:</p><p><span style="color: blue"><em>#!/bin/ash<br />/usr/bin/mpc </em></span><em><span style="color: red">play</span><span style="color: blue"> &gt; /dev/null 2&gt;&amp;1<br />/bin/echo &quot;&quot;<br />/bin/echo &#039;&lt;FORM&gt;&lt;INPUT Type=&quot;button&quot; VALUE=&quot;buffering ... press to go back&quot; onClick=&quot;history.go(-1);return true;&quot;&nbsp; &nbsp;style=&quot;font-family: sans-serif; font-size: 60px;&quot;&gt;&lt;/FORM&gt;&#039;</span></em></p><p>in the others scripts (called by the index.html) just change the mpc command:<span style="color: red"> next, prev, stop</span>, ecc</p><br /><p>this is the<strong> /www/index.html</strong> example:</p><p><span style="color: blue"><em>&lt;html&gt;<br />&lt;head&gt;<br />&lt;title&gt;Internet digital radio&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br />&lt;meta http-equiv=&quot;refresh&quot; content=&quot;5&quot; &gt;<br />&lt;p&gt;<br />&lt;iframe<br />style=&quot;background: #AAFFFF&quot;<br />src =&quot;/cgi-bin/test.cgi&quot;<br />width=&quot;640px&quot;<br />height=&quot;80px&quot;&gt;<br />&lt;/iframe&gt;<br />&lt;hr&gt;<br />&lt;FORM ACTION=&quot;/cgi-bin/next.cgi&quot;&gt;<br />&lt;INPUT TYPE=SUBMIT VALUE=&quot;Next &gt;&gt;&quot;&nbsp; style=&quot;font-family: sans-serif; font-size: 90px;&quot;&gt;<br />&lt;/FORM&gt;<br />&lt;FORM ACTION=&quot;/cgi-bin/play.cgi&quot;&gt;<br />&lt;INPUT TYPE=SUBMIT VALUE=&quot;Play&nbsp; &nbsp; &gt;&quot;&nbsp; style=&quot;font-family: sans-serif; font-size: 90px;&quot;&gt;<br />&lt;/FORM&gt;<br />&lt;FORM ACTION=&quot;/cgi-bin/stop.cgi&quot;&gt;<br />&lt;INPUT TYPE=SUBMIT VALUE=&quot;Stop&nbsp; &nbsp;|| &quot;&nbsp; style=&quot;font-family: sans-serif; font-size: 90px;&quot;&gt;<br />&lt;/FORM&gt;<br />&lt;FORM ACTION=&quot;/cgi-bin/prev.cgi&quot;&gt;<br />&lt;INPUT TYPE=SUBMIT VALUE=&quot;Prev &lt;&lt;&quot;&nbsp; style=&quot;font-family: sans-serif; font-size: 90px;&quot;&gt;<br />&lt;/FORM&gt;<br />&lt;hr&gt;<br />by P.M. Lovisolo 2016 - parknat12@yahoo.com<br />&lt;/body&gt;<br />&lt;/html&gt;</em></span></p><br /><p>This is the<strong> /www/cgi-bin/test.cgi </strong> called by index.html to display into the &lt;iframe&gt; the current song and other system informations:</p><p><span style="color: blue"><em>#!/bin/ash<br />#<br />#now=$(date)<br />/bin/echo &#039;&#039;<br />#/bin/echo $now<br />cpu=$(grep &#039;cpu &#039; /proc/stat | awk &#039;{usage=($2+$4)*100/($2+$4+$5)} END {print usage &quot;%&quot;}&#039;)<br />uptime=$(/usr/bin/uptime)<br />/bin/echo &#039;Uptime:&#039; $uptime<br />/bin/echo &quot;CPU usage:&quot; $cpu<br />/bin/echo &#039;---------------------------------------------------------------------------------&#039;<br />song=$(/usr/bin/mpc current)<br />/bin/echo &quot;Now playing:&quot; $song<br /># eof<br /></em></span></p><br /><p>Note: don&#039;t forget to give &quot;<strong>chmod 755</strong>&quot; permisisons to all cgi scripts!</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 22 Jul 2016, 21:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332476">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						22 Jul 2016, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>... a simple page to edit (add, modify or remove) the radio stations URLs (<span style="color: red">as per my workaround above</span>) directly from the browser, it uses PHP but it consumes only a few kilobytes of RAM:</p><p><strong>vi /www/addurl.php</strong><br /><span style="color: blue"><em><br />&lt;?php</em></span></p><p><span style="color: blue"><em>// configuration<br />$url = &#039;addurl.php&#039;;<br />$file = &#039;/etc/rc.local&#039;;</em></span></p><p><span style="color: blue"><em>// check if form has been submitted<br />if (isset($_POST[&#039;text&#039;]))<br />{<br />&nbsp; &nbsp; // save the text contents<br />&nbsp; &nbsp; file_put_contents($file, $_POST[&#039;text&#039;]);</em></span></p><p><span style="color: blue"><em>&nbsp; &nbsp; // redirect to form again<br />&nbsp; &nbsp; header(sprintf(&#039;Location: %s&#039;, $url));<br />&nbsp; &nbsp; printf(&#039;&lt;a href=&quot;%s&quot;&gt;Moved&lt;/a&gt;.&#039;, htmlspecialchars($url));<br />&nbsp; &nbsp; exit();<br />}</em></span></p><p><span style="color: blue"><em>// read the textfile<br />$text = file_get_contents($file);</em></span></p><p><span style="color: blue"><em>?&gt;<br />&lt;body bgcolor=&quot;#84b0fd&quot; text=&quot;#030303&quot; link=&quot;#9abcde&quot;&gt;<br />This form permits you to add/modify/remove radio stations to MPD,<br />&lt;br&gt;<br />don&#039;t forget to insert &lt;b&gt;&quot;/usr/bin/mpc add &quot;&lt;/b&gt; before the streaming URL.<br />&lt;br&gt;<br />&lt;b&gt;&lt;/b&gt;<br />&lt;p&gt;<br />&lt;i&gt;Note: do not remove the &quot;exit 0&quot; line!&lt;/i&gt;<br />&lt;p&gt;<br />&lt;!-- HTML form --&gt;<br />&lt;form action=&quot;&quot; method=&quot;post&quot;&gt;<br />&lt;textarea rows=&quot;22&quot; cols=&quot;80&quot; name=&quot;text&quot;&gt;<br />&lt;?php echo htmlspecialchars($text) ?&gt;&lt;/textarea&gt;<br />&lt;br&gt;<br />&lt;input type=&quot;submit&quot; /&gt;<br />&lt;input type=&quot;reset&quot; /&gt;<br />&lt;p&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&lt;td&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot; bgcolor=&quot;#ffffff&quot; align=&quot;center&quot;&gt;<br />&lt;td bgcolor=&quot;#000000&quot; align=&quot;left&quot;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&lt;a href=&quot;index.html&quot;&gt;Return to the radio control page&lt;/a&gt;&lt;/td&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&lt;/td&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&lt;/form&gt; </em></span></p><p>then add a link to this page into the index.html file by adding the following code at the end of the file just before &lt;/body&gt; line:</p><p><span style="color: blue"><em>&lt;td&gt;<br />&lt;table border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;3&quot; width=&quot;100%&quot; bgcolor=&quot;#ffffff&quot; align=&quot;center&quot;&gt;<br />&lt;td bgcolor=&quot;#FFFFFF&quot; align=&quot;left&quot;&gt;<br />&lt;a href=&quot;addurl.php&quot;&gt;Click here to add new radio stations&lt;/a&gt;&lt;/td&gt;<br />&lt;/td&gt;<br />&lt;/form&gt;<br /></em></span></p><p>or else:</p><p><span style="color: blue"><em>&lt;hr&gt;<br />&lt;button onclick=&quot;location.href = &#039;addurl.php&#039;;&quot; id=&quot;myButton&quot; class=&quot;float-left submit-button&quot; &gt;click here to add new Radio Stations&lt;/button&gt;</em></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 22 Jul 2016, 22:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332694">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						26 Jul 2016, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>in case something went wrong (eg. you have mistakenly edited some configuration file) and you cannot connect to your router, to gain access to it follow this&nbsp; procedure:</p><p>&nbsp; &nbsp; Disconnect WAN cable<br />&nbsp; &nbsp; Unplug power to router<br />&nbsp; &nbsp; Set your computers IP address to:<br />&nbsp; &nbsp; IPv4 Address: 192.168.1.2<br />&nbsp; &nbsp; Netmask: 255.255.255.0<br />&nbsp; &nbsp; &nbsp;Gateway: 192.168.1.1</p><p>Re-power your router, press the ‘reset’ button as soon as the led start blinking, then when you release the reset button the led should start blinking much faster.</p><p>Using PuTTY (or your favourite *TELNET* client), connect to 192.168.1.1 and you should see the OpenWrt prompt. Type the command below (in red):</p><p>-----------------------------------------------------<br />root@(none):/# <span style="color: red"><strong>mount_root</strong></span><br /><em>jffs2 is ready<br />jffs2 is ready<br />switching to overlay</em></p><p>then you can edit any file on your router:</p><p><strong>vi /etc/file...</strong></p><p>when done, save and reboot.</p><p>In case you want to inizialize openwrt to default and remove all configurations and all files you have added/modified, give instead the following commands:</p><p><strong>&nbsp; &nbsp; mount_root<br />&nbsp; &nbsp; mtd -r erase rootfs_data<br />&nbsp; &nbsp; reboot -f</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 6 Sep 2016, 22:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332722">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						26 Jul 2016, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>I will <strong>regularly</strong> post here more radio station URis to be added to the Internet Radio:</p><p><a href="http://89.16.185.174:8003/stream">http://89.16.185.174:8003/stream</a><br /><a href="http://89.16.185.174:8000/stream">http://89.16.185.174:8000/stream</a><br /><a href="http://89.16.185.174:8004/stream">http://89.16.185.174:8004/stream</a><br /> <a href="http://streaming.radionomy.com/Fm-Tropical-Shad-972">http://streaming.radionomy.com/Fm-Tropical-Shad-972</a><br /><a href="http://streaming.radionomy.com/NashvilleEdge">http://streaming.radionomy.com/NashvilleEdge</a><br /><a href="http://streaming.radionomy.com/Abacusfm-Nature">http://streaming.radionomy.com/Abacusfm-Nature</a><br /><a href="http://streaming.radionomy.com/chd--radio-country">http://streaming.radionomy.com/chd--radio-country</a><br /><a href="http://streaming.radionomy.com/1-Radio-Dance">http://streaming.radionomy.com/1-Radio-Dance</a><br /><a href="http://streaming.radionomy.com/Acoustic-FM">http://streaming.radionomy.com/Acoustic-FM</a><br /><a href="http://streaming.radionomy.com/ABC-Love">http://streaming.radionomy.com/ABC-Love</a><br /><a href="http://streaming.radionomy.com/Radio-Nostalgia">http://streaming.radionomy.com/Radio-Nostalgia</a><br /><a href="http://andromeda.shoutca.st:8634/stream">http://andromeda.shoutca.st:8634/stream</a><br /><a href="http://streaming.radionomy.com/Tsjechische-Blaasmuziek">http://streaming.radionomy.com/Tsjechische-Blaasmuziek</a><br /><a href="http://streaming.radionomy.com/DanceRO">http://streaming.radionomy.com/DanceRO</a><br /><a href="http://streaming.radionomy.com/BobFamilyandfriends">http://streaming.radionomy.com/BobFamilyandfriends</a><br /><a href="http://streaming.radionomy.com/radio-oldies-and-rock--n--roll">http://streaming.radionomy.com/radio-ol … k--n--roll</a><br /><a href="http://streaming.radionomy.com/The-Buffalo">http://streaming.radionomy.com/The-Buffalo</a><br /><a href="http://streaming.radionomy.com/VWClassicRock">http://streaming.radionomy.com/VWClassicRock</a><br /><a href="http://icecast2.rte.ie/ieradio1">http://icecast2.rte.ie/ieradio1</a><br /><a href="http://listen.radionomy.com/the-smooth-lounge">http://listen.radionomy.com/the-smooth-lounge</a><br /><a href="http://hr-mp3-m-h3.akacast.akamaistream.net/7/785/142133/v1/gnl.akacast.akamaistream.net/hr-mp3-m-h3">http://hr-mp3-m-h3.akacast.akamaistream … r-mp3-m-h3</a></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 26 Jul 2016, 22:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332848">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						28 Jul 2016, 06:52					</div>
				</div>
				<div class="post-content content">
					<p>thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333133">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						2 Aug 2016, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>Once you have configured everything and tested that the internet radio works well, , to get the best performances you can disable &quot;dropbear&quot; to gain another megabytes of free ram, but the downside is that you won&#039;t be able to access the router anymore (ssh access).<br />Anyway, if you choose to disable dropbear you can eventually gain access to the router following the procedure above.</p><p>To disable dropbear give the following command and then reboot:</p><p><strong>/etc/init.d/dropbear disable</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 2 Aug 2016, 15:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333534">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						7 Aug 2016, 09:47					</div>
				</div>
				<div class="post-content content">
					<p><strong>Enabling Wifi 2.4 Ghz channel 12 and 13 on ar71xx (TL-WR710N, TL-WDR3600/4300. etc.),&nbsp; enable all channels from 36 to 165 on 5 GHz (TL-WDR3600/4300), and higher power on both bands.</strong></p><p>There is a law in the US or an FCC regulation that requires all Wifi devices shipped to determine on the hardware level (in this case, in the driver) whether the desired frequency and power level is allowed.<br />Unfortunately, TP-Link simply sets the bit to US mode on all devices shipped worldwide. The stock firmware ignores it and offers frequency and power choice based on the selected country code. OpenWRT however (as would a stock Linux kernel) respects the bit and applies a logic AND over the selected regulatory domain and the US regulatory domain.<br />Luckily, someone created a binary patch called reghack that replaces the in-driver US regulations with unrestricted ones. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>All informations here: <a href="http://blog.michael.kuron-germany.de/2013/08/openwrt-on-tp-link-tl-wdr3600-uncapping-wifi/comment-page-1/">http://blog.michael.kuron-germany.de/20 … nt-page-1/</a></p><p>The reghack utility<span style="color: red"> (tested on Barrier Breaker and Chaos Calmer for TL-WR710N and TL-WDR3600/TL-WDR4300, it does not work on A.A. firmware)</span> replaces the regulatory domain rules in the driver binaries with less restrictive ones. The current version also lifts the 5GHz radar<br />channel restrictions in ath9k.</p><p>- basically:</p><p><strong>cd /tmp/<br />wget <a href="http://luci.subsignal.org/~jow/reghack/reghack.mips.elf">http://luci.subsignal.org/~jow/reghack/reghack.mips.elf</a><br />chmod +x reghack.mips.elf<br />./reghack.mips.elf /lib/modules/*/ath.ko<br />./reghack.mips.elf /lib/modules/*/cfg80211.ko<br />reboot</strong></p><p>before on TL-WR710N and TL-WDR3600:</p><p><strong>iw phy phy0 info</strong></p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)</p><p>After applying the patch:</p><p><strong>iw phy phy0 info</strong></p><p>Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)</p><p>Note: to check the 5 Ghz channels on TL-WDR3600&nbsp; use the following command:</p><p><strong>iw phy phy1 info</strong></p><p>After applying the patch on TL-WDR3600:</p><p>Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5180 MHz [36] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5200 MHz [40] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5220 MHz [44] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5240 MHz [48] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5260 MHz [52] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5280 MHz [56] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5300 MHz [60] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5320 MHz [64] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5500 MHz [100] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5520 MHz [104] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5540 MHz [108] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5560 MHz [112] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5580 MHz [116] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5600 MHz [120] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5620 MHz [124] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5640 MHz [128] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5660 MHz [132] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5680 MHz [136] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5700 MHz [140] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5745 MHz [149] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5765 MHz [153] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5785 MHz [157] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5805 MHz [161] (30.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5825 MHz [165] (30.0 dBm)<br /><strong><br />Note: TP-Link saved a few cents on the 2.4 and 5 GHz power amplifier, which doesn’t even do more than 100 mW ( 20 dBm) on 2.4 Ghz and 63 mW (18 dBm) on 5 Ghz.</strong></p><p><span style="color: red"><strong>Warning: Before you change channels and transmission power on your Wifi devices, check with the regulation authority what is legally allowed in your location. The hardware is capable of things that can interfere with radar etc. and you should never set it to a country code other than your current location. Even then, you might be able to choose options that are not legal to operate.</strong></span></p><p>-------------------------------------------------------------------------------------------------------<br />Almost all countries defines power limitations for Wi-Fi devices (EIRP max). <br />The key to applying these rules is to understand EIRP (Equivalent Isotropically Radiated Power), which represents the total effective transmit power of the radio, including gains that the antenna provides (and losses from the antenna cable and connectors).</p><p>The EIRP is calculated using this formula:</p><p>EIRP = Effective Isotropic Radiated Power</p><p>Pout = transmitter power output (dBm)</p><p>Ct = signal loss in cable (dB)</p><p>Gt = gain of the antenna (dBi)</p><p>Pout - Ct + Gt = EIRP</p><p>When installing a wireless system with external (or internal) antenna, your EIRP calculation should not exceed the class license limit. Other wise you must adjust either the transmitter power output, the length of cable and/or the choice of antenna.<br />You may find the gain of a router antenna in the specification manual, this value generally includes signal loss in cable (the cable from the router board to the antenna).<br />The RP-SMA antenna connector (female+male) present in many routers, also has a little signal loss, but you can ignore it in the EIRP calculation.</p><p>Generally the internal antenna gain (antenna printed on PCB) of a router like the TL-WR710N is about 2 dBi.<br />The TL-WDR3600 has two external antennas with 2 dBi @ 2.4 Ghz and 3 dBi @ 5 Ghz gain each.<br />The small external antennas of many router, like D-Link 600, have 2 dBi gain, <br />just a few high power routers have 4-5 dBi antennas.</p><p><strong>Most of the time you get better results (coverage and signal improvements) by increasing the gain of the antenna than increasing the output power, more power means also more EMF noise and disturbances.</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 27 Dec 2017, 21:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337493">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">luis.azpiazu</div>
					<div class="post-datetime">
						7 Sep 2016, 12:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi Pilovis,</p><p>I am looking for some help with a project, and I do not know hoe to contact you privately. I&#039;ve created a WiFi sensor with a Raspberry pi, and I would like to do it with a more stable product (and cheaper).</p><p>My goal is to use a TP-Link TL-WR710N as WiFi sniffer, and to use a WiFi dongle connected to the USB (such as TP-LINK TL-WN725N) to connect the device to the internet. </p><p>Would you be interested on doing something like this? </p><p>If so, please contact me somehow (you do not have twitter or facebook, so I left my Skype on my profile. If you want any other info, please tell me.</p><p>I am creating a start-up at the moment, so I do not have a lot of ressources, but (of course) I would pay yoy for your help.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337509">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						7 Sep 2016, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>My email is parknat12@yahoo.com <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 7</div><nav><ul><li><a href="viewtopic.php%3Fid=49013&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=49013&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=49013&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>