<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WDR3600 Youview Multicast?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p244977">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SONiQz</div>
					<div class="post-datetime">
						26 Aug 2014, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am a bit green when it comes to the configuration of OpenWRT and could really use some help. I have got a TP Link TL-WDR3600 which I have installed OpenWRT Barrier Breaker 14.07 RC3.</p><p>For the most part it seems OK, but I am trying to get my Humax Youview internet channels working. I understand it uses Multicasting, and it appeared to work fine with the Stock TP-Link Firmware. However the stock firmware didn&#039;t have proper DNS support for local devices, which was why I swapped it out.</p><p>I know I am being a bit vague, but I am really not sure as to what I need to configure. I have seen that kmod-bridge should be installed and igmpproxy but then it seems to vary a lot as to the actual configuration.</p><p>Anyone with experience into this kind of configuration would be appreciated.</p><p>Regards</p><p>SONiQz</p>											<p class="post-edited">(Last edited by <strong>SONiQz</strong> on 26 Aug 2014, 17:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245033">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fgimenez</div>
					<div class="post-datetime">
						27 Aug 2014, 03:07					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m just guessing here, but maybe this can help: <a href="http://wiki.openwrt.org/doc/howto/udp_multicast">http://wiki.openwrt.org/doc/howto/udp_multicast</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245048">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">SONiQz</div>
					<div class="post-datetime">
						27 Aug 2014, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />Thanks for that, I should have said I had looked through that previously. Unfortunately I can&#039;t seem to get it to work using the&nbsp; kmod-bridge and igmp proxy method given. I really could use the help of someone who has it setup and running with either BT Vision or similar.</p><p>Thanks</p><p>SONiQz</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245139">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">SONiQz</div>
					<div class="post-datetime">
						28 Aug 2014, 09:53					</div>
				</div>
				<div class="post-content content">
					<p>So no-one here uses UK based Youview/BT Vision/Talk Talk TV/similar service with an OpenWRT router?!</p><p>Any help would be appreciated!</p><p>-SONiQz</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246046">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Droolio</div>
					<div class="post-datetime">
						5 Sep 2014, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>I too am struggling to get my YouView box working with BT&#039;s multicast internet channels. Just bought a TP-Link Archer C7 and immediately updated the firmware to OpenWrt.</p><p>Followed the instructions at <a href="http://wiki.openwrt.org/doc/howto/udp_multicast">http://wiki.openwrt.org/doc/howto/udp_multicast</a> (excluding the udpxy section, because from my understanding, the YouView box doesn&#039;t do that and I don&#039;t need multicast over wireless). The main stumbling block is in revealing the source address as used by my ISP (BT). All I&#039;m getting is different LAN-range IP&#039;s e.g.:</p><p>The source address 192.168.3.7 for group 239.255.255.250, is not in any valid net for upstream VIF.</p><p>Have read in a couple places that these sorts of IPTV implementations involve broadcasting TV outside of the PPPoE layer and that a secondary WAN interface should be added. Unfortunately, I don&#039;t know enough about OpenWrt to try this.</p><p>Anyone shed some light on how we might get this working? Cheers!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246080">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Middling</div>
					<div class="post-datetime">
						5 Sep 2014, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>Edit: Combined my previous posts into one and tweaked things a bit.</p><p>This is for Barrier Breaker and i&#039;ve no idea if it&#039;ll work for Attitude Adjustment.</p><p>I don&#039;t have a BT Vision/Youview/TV box and don&#039;t use BT as my ISP, but i&#039;ve got this working in that i can access the BT multicast test channel using VLC ( rtp://234.81.130.4:5802 ), so it should also work for the Youview box.</p><p>Here&#039;s how i did this on my TP-Link WDR4900, but the process should be the same on the WDR3600 (and maybe Archer C7).</p><p>Because the IPTV traffic isn&#039;t sent across your ISP&#039;s PPPoE connection (it&#039;s injected from the fibre cabinet) you need to add an IP address to your WAN port underneath the PPP connection.</p><p>Edit /etc/config/network and add a new interface:</p><div class="codebox"><pre><code>config interface &#039;iptv&#039;
    option ifname &#039;eth0.2&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;10.22.22.1&#039;
    option netmask &#039;255.255.255.0&#039;</code></pre></div><p>While you&#039;re editing /etc/config/network enable IGMP Snooping for your &quot;lan&quot; interface:</p><div class="codebox"><pre><code>config interface &#039;lan&#039;
    ...
    option igmp_snooping &#039;1&#039;</code></pre></div><p>Install the igmpproxy package and edit /etc/config/igmpproxy:</p><div class="codebox"><pre><code>config igmpproxy
    option quickleave 1

config phyint
    option network iptv
    option direction upstream
    list altnet 109.159.247.0/24

config phyint
    option network lan
    option direction downstream</code></pre></div><p>Edit /etc/config/firewall and add the new &quot;iptv&quot; interface to your existing &quot;wan&quot; zone:</p><div class="codebox"><pre><code>config zone
    option name &#039;wan&#039;
    ...
    option network &#039;wan wan6 iptv&#039;</code></pre></div><p>Also add new firewall rules to the end of /etc/config/firewall to allow the multicast traffic:</p><div class="codebox"><pre><code>config rule
    option src &#039;wan&#039;
    option proto &#039;igmp&#039;
    option target &#039;ACCEPT&#039;
    option name &#039;IGMP (IPTV)&#039;
    option enabled &#039;1&#039;

config rule
    option src &#039;wan&#039;
    option proto &#039;udp&#039;
    option dest &#039;lan&#039;
    option dest_ip &#039;224.0.0.0/4&#039;
    option target &#039;ACCEPT&#039;
    option family &#039;ipv4&#039;
    option name &#039;Multicast&#039;
    option enabled &#039;1&#039;</code></pre></div><p>Run:<br /></p><div class="codebox"><pre><code>/etc/init.d/network restart
/etc/init.d/igmpproxy start
/etc/init.d/igmpproxy enable</code></pre></div><p>Try opening a network stream to rtp://234.81.130.4:5802 in VLC or using your Youview box.</p><p>If you have the capability of capturing the multicast addresses of the various Youview channels i&#039;d appreciate a list.&nbsp; I haven&#039;t found a list anywhere and they&#039;re probably all encrypted anyway but a list would be nice to have.</p>											<p class="post-edited">(Last edited by <strong>Middling</strong> on 5 Sep 2014, 13:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246161">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Droolio</div>
					<div class="post-datetime">
						5 Sep 2014, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Excellent, that did the trick for me! A massive thank you.</p><p>For reference, there were some minor differences in my config on the Archer C7 v2 with Barrier Break 14.07-rc3. i.e. Instead of eth0.2 for the physical wan port, I used eth0. And for the &#039;iptv&#039; zone in /etc/config/firewall it looked like this:<br /></p><div class="codebox"><pre><code>config zone
    option name &#039;wan&#039;
    list network &#039;wan&#039;
    list network &#039;wan6&#039;
    list network &#039;iptv&#039;
...</code></pre></div><p>Finally, I had to remove the existing altnet 192.168.3.0/24 line in /etc/config/igmpproxy and just use 109.159.247.0/24, which is key for BT&#039;s YouView it seems.</p><p>Hopefully this will help OP as well!</p><br /><p>Regarding the multicast addresses...</p><p>Sadly I didn&#039;t keep note but did attempt to connect VLC to a few, only showing a blob of green (likely that encryption you mentioned). The test stream worked fine, though.</p><p>Can&#039;t be 100% certain, but I don&#039;t think the IP&#039;s correspond to channels on a one-to-one basis - sometimes it didn&#039;t change on channel switch and the same IP was seen for different channels. One thing I did notice was the (Humax) YouView+ box connecting to port 80 on 213.120.177.227. I wonder if it&#039;s issuing commands to the cabinet to change channels that way.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254396">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">wtfrank</div>
					<div class="post-datetime">
						15 Nov 2014, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>This worked for me as well with Barrier Breaker. I had to restart the router before the changes took hold - merely running the 3 /etc/init.d commands wasn&#039;t enough. I wonder if doing something with /etc/init.d/firewall would have helped.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>