<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> outside ssh access to WAN only</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p289116">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						25 Aug 2015, 09:05					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>This is my first post although I have been using OpenWrt for many years. I use it for SSH reverse tunneling. Downside is that I can access from the Internet to my LAN also. Is it possible to configure firewall rules in a way, that outside user is able to use WAN interface only - internet service provided from my ISP and has no access to local LAN?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289657">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						29 Aug 2015, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t understand your question. An example will be great.</p><br /><p>best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289663">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						29 Aug 2015, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your response, I thought that did not express myself correct enough.</p><p>At the moment I have limited user account created for dropbear which I use to log in over ssh from WAN. This user is able to also access my LAN from WAN - I do not want that. He should be able to access WAN interface only and not LAN.</p><p>Is it technically possible? Reverse proxy user access to WAN interface only form the Internet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289665">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						29 Aug 2015, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>When you reach the box you have full access to both networks - LAN/WAN - </p><p>I think there is no way to do what you wan&#039;t</p><p>Please put an example about why you want&nbsp; do that. Maybe your example show us another way to do what you want.</p><p>Best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289669">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						29 Aug 2015, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>I use public computers for ssh access and I want this ssh user to be non-exploitable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289671">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						29 Aug 2015, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>You can use best practices for this!</p><p>* change ssh port to another than 22<br />* use a strong password<br />* limit access from specific IP Address (more secure but if you use public computers this is not a good method).</p><p>Sorry, but i don&#039; t know another way to do this.</p><p>Here are some links about this theme. But OpenWRT is not a fully Linux Distribution.</p><p><a href="http://www.cyberciti.biz/tips/linux-unix-bsd-openssh-server-best-practices.html">http://www.cyberciti.biz/tips/linux-uni … tices.html</a><br /><a href="http://askubuntu.com/questions/2271/how-to-harden-an-ssh-server">http://askubuntu.com/questions/2271/how … ssh-server</a><br /><a href="https://wiki.centos.org/HowTos/Network/SecuringSSH">https://wiki.centos.org/HowTos/Network/SecuringSSH</a></p><p>Some of those links can&#039;t be done inside OpenWRT.</p><p>Best regards.<br />gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289673">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						29 Aug 2015, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>Thx. But isn&#039;t there something like lshell (limited shell) for openwrt, so that ssh user would not able to execute any commands?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289674">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						29 Aug 2015, 23:50					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://unix.stackexchange.com/questions/9853/restricting-an-ssh-scp-sftp-user-to-a-directory">http://unix.stackexchange.com/questions … -directory</a><br />rssh seems ok</p><p>pls provide an example of command to be blocked</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289675">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						30 Aug 2015, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>vi /etc/config/wireless</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289679">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						30 Aug 2015, 01:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thefox wrote:</cite><blockquote><p>vi /etc/config/wireless</p></blockquote></div><p>yea mostly all files/foders are o+r but all processes are runed as root( AA; except dnsmasq=nobody)<br />you could try set ../config to o-r .. and other files to see where it goes</p><p>another question.. why you need ssh if you cant change config files? you could use a ftp server.. vsftp...</p><p>ps: be shure you can safemode or ttl before</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 30 Aug 2015, 01:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289684">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						30 Aug 2015, 02:27					</div>
				</div>
				<div class="post-content content">
					<p>I use SSH for reverse proxy. But I guess it cannot be done, I just have to accept it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289736">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">gamba47</div>
					<div class="post-datetime">
						30 Aug 2015, 19:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thefox wrote:</cite><blockquote><p>I use SSH for reverse proxy. But I guess it cannot be done, I just have to accept it.</p></blockquote></div><p>Yo can use a virtual machine inside your network and then access over ssh to this. You will have the same solution.</p><p>OpenWRT is not a regular distribution. Have a lot of features but have a lot of limits to.</p><p>Best regards.</p><p>gamba47</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289748">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">thefox</div>
					<div class="post-datetime">
						30 Aug 2015, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your help.</p><p>Regards!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>