<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> self-inflicted ipkg upgrade problems</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p17676">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">festus77</div>
					<div class="post-datetime">
						22 Dec 2005, 17:13					</div>
				</div>
				<div class="post-content content">
					<p>Good morning,</p><p>Last night I mistakenly typed</p><p>ipkg upgrade<br />&nbsp; &nbsp;instead of<br />ipkg update</p><p>and got an upgrade of 7 or 8 packages. I&#039;m not sure which one&#039;s.</p><p>After fighting through a couple iptables and dropbear issues, everything seems to be working fine again, EXCEPT the firewall is no longer logging. I use fwbuilder on my Gentoo box to generate the rules and have re-installed them. They are functioning properly, I believe, but can&#039;t tell for sure because nothing shows up in the logs.</p><p>iptables -nL looks right.</p><p>Does anyone have any ideas what I may have missed?</p><p>Thanks,<br />John</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17722">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">florian_</div>
					<div class="post-datetime">
						23 Dec 2005, 13:12					</div>
				</div>
				<div class="post-content content">
					<p>Maybe, while upgrading, if you did not had enough space to both upgrade iptables, and kmod-iptables (the kernel iptables stuff), there was a version difference between the iptables command and the kernel modules. But I am not sure of that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17724">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						23 Dec 2005, 13:31					</div>
				</div>
				<div class="post-content content">
					<p>Seems you messed up your OpenWrt installation. To make sure everything works normal reflash the OpenWrt distribution with mtd or TFTP.</p><p>For the future: <strong>Don&#039;t</strong> use &quot;ipkg upgrade&quot;. The best way to upgrade to a new version is to reflash OpenWrt.</p><p>See mistake #7 in the <a href="http://forum.openwrt.org/viewtopic.php?id=3474">PLEASE READ - Common mistakes</a> thread too.</p>											<p class="post-edited">(Last edited by <strong>olli</strong> on 23 Dec 2005, 13:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17729">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">festus77</div>
					<div class="post-datetime">
						23 Dec 2005, 17:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>olli wrote:</cite><blockquote><p>Seems you messed up your OpenWrt installation. To make sure everything works normal reflash the OpenWrt distribution with mtd or TFTP.</p><p>For the future: <strong>Don&#039;t</strong> use &quot;ipkg upgrade&quot;. The best way to upgrade to a new version is to reflash OpenWrt.</p><p>See mistake #7 in the <a href="http://forum.openwrt.org/viewtopic.php?id=3474">PLEASE READ - Common mistakes</a> thread too.</p></blockquote></div><p>No, no, no. I _meant_ to update package list. Happy fingers screwed up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17780">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">festus77</div>
					<div class="post-datetime">
						25 Dec 2005, 02:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>festus77 wrote:</cite><blockquote><p>Good morning,</p><p>Last night I mistakenly typed</p><p>ipkg upgrade<br />&nbsp; &nbsp;instead of<br />ipkg update</p><p>and got an upgrade of 7 or 8 packages. I&#039;m not sure which one&#039;s.</p><p>After fighting through a couple iptables and dropbear issues, everything seems to be working fine again, EXCEPT the firewall is no longer logging. I use fwbuilder on my Gentoo box to generate the rules and have re-installed them. They are functioning properly, I believe, but can&#039;t tell for sure because nothing shows up in the logs.</p><p>iptables -nL looks right.</p><p>Does anyone have any ideas what I may have missed?</p><p>Thanks,<br />John</p></blockquote></div><p>Looking at the log with logread, I note the following line</p><p>user.info : iptables v1.3.3:&nbsp; Unknown arg `--log-level&#039;</p><p>So, did iptables get upgraded? Right now iptables -h doesn&#039;t even show --log-level as an option, and I&#039;ve been logging since I installed openWRT a couple months ago.</p><p>Thanks,<br />John</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17836">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mpot</div>
					<div class="post-datetime">
						27 Dec 2005, 06:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>festus77 wrote:</cite><blockquote><p>Looking at the log with logread, I note the following line</p><p>user.info : iptables v1.3.3:&nbsp; Unknown arg `--log-level&#039;</p><p>So, did iptables get upgraded? Right now iptables -h doesn&#039;t even show --log-level as an option, and I&#039;ve been logging since I installed openWRT a couple months ago.</p></blockquote></div><p>The current iptables ipkg doesn&#039;t have log support compiled in.<br />You&#039;ll probably need to install the iptables-mod-extra ipkg to get log support.</p><p>Cheers,<br />Martin.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p17851">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">festus77</div>
					<div class="post-datetime">
						27 Dec 2005, 14:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mpot wrote:</cite><blockquote><p>The current iptables ipkg doesn&#039;t have log support compiled in.<br />You&#039;ll probably need to install the iptables-mod-extra ipkg to get log support.</p><p>Cheers,<br />Martin.</p></blockquote></div><p>Thank you, thank you, thank you !!!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>