<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDRv4 fit for openwrt - english</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Feb 2018 and 2 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 17</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=17.html">17</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p186028">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">staar</div>
					<div class="post-datetime">
						14 Dec 2012, 13:12					</div>
				</div>
				<div class="post-content content">
					<p>hi there,</p><p>i&#039;d like to create a buildroot for the brand new WNDR3700v4</p><p>i connected via jtag - rs232 - usb to the boot console, here some parts from the output:</p><p>grep &#039;AR&#039;</p><p>Booting Atheros AR934x (ToH -&gt; o.k.)&nbsp; &nbsp;</p><p>Atheros on-chip NAND FLash Controller Driver, Version 0.1 (c) 2010 Atheros Communications, Ltd.<br />Ath Nand ID[878555a0]: 2c:f1:80:95:02<br />ONFI MICRON&nbsp; &nbsp; &nbsp; MT29F1G08ABADAWP&nbsp; &nbsp;<br />Micron NAND 128MiB 3,3V 8-bit [128MB]<br />12 cmdlinepart partitions found on MTD device ath-nand<br />Creating 12 MTD partitions on &quot;ath-nand&quot;:<br />0x000000000000-0x000000040000 : &quot;u-boot&quot;<br />0x000000040000-0x000000080000 : &quot;u-boot-env&quot;<br />0x000000080000-0x0000000c0000 : &quot;caldata&quot;<br />0x0000000c0000-0x000000140000 : &quot;pot&quot;<br />0x000000140000-0x000000340000 : &quot;language&quot;<br />0x000000340000-0x0000003c0000 : &quot;config&quot;<br />0x0000003c0000-0x0000006c0000 : &quot;traffic_meter&quot;<br />0x0000006c0000-0x0000007e0000 : &quot;kernel&quot;<br />0x0000007e0000-0x000001fc0000 : &quot;rootfs&quot; </p><p>What will be the next step ?</p><p>There is allready an openwrt running on the machine - netgear didn&#039;t respond to my quest for making there buldroot available to the community, yet.</p><p>sunshine !</p><p>flo</p>											<p class="post-edited">(Last edited by <strong>staar</strong> on 14 Dec 2012, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186781">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dlang</div>
					<div class="post-datetime">
						23 Dec 2012, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>I also have purchased a 3700v4 to experiment with.</p><p>I&#039;ve build custom openwrt images for my 3700v2 and 3800 routers, and I&#039;ve been using Linux since the 0.99 kernel days, so I have a lot of experience building and troubleshooting custom kernels on the x86 and Sparc, but I don&#039;t know the bootloader and firmware signatures needed for this.</p><p>If someone can point out the next steps, it looks like there are two of us willing to experiment with our hardware</p><p>In a post on the cerowrt list the following information has appeared.</p><p>&gt; I took a look at their GPL source distribution. And yea! it&#039;s openwrt. And boo! it&#039;s ancient openwrt, for example dnsmasq is 2.39 (current is 2.64), and their kernel is 2.6.31.<br />&gt;<br />&gt; I think the cpu and ethernet chips tho look a lot better: Atheros AR9344+ AR9580(5GHz)+AR9344(2.4GHz). It&#039;s my hope these do ipv6 better.</p><p>So this seems like it should not be _too_ hard to make work (and it&#039;s not a broadcom like the v3 version)</p><p>Can someone suggest, either here or in e-mail (a similar post went to the -devel mailing list) how to move forward?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186846">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">RussellSenior</div>
					<div class="post-datetime">
						23 Dec 2012, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>Have you connected a serial console and captured a complete boot log? (and posted it somewhere, maybe even the wiki)</p><p>You might have a look at target/linux/ar71xx/image/Makefile, where all these image tweaks seem to be configured.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186850">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dlang</div>
					<div class="post-datetime">
						23 Dec 2012, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>I have not done so yet, I&#039;ll try to do so today.</p><p>Staar has pulled the bootlog, but I haven&#039;t seen it posted anywhere yet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186855">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">RussellSenior</div>
					<div class="post-datetime">
						23 Dec 2012, 22:01					</div>
				</div>
				<div class="post-content content">
					<p>Also, check out this:</p><p>&nbsp; <a href="http://www.downloads.netgear.com/files/GPL/WNDR3700v4-V1.0.1.32_gpl_src.zip">http://www.downloads.netgear.com/files/ … pl_src.zip</a></p><p>There is a file WNDR3700v4-V1.0.1.32_build_instructions.txt which claims to tell you how to generate an image.&nbsp; If you carefully investigate what it&#039;s doing with signing/checksumming, it ought to be possible to determine what (if anything) is necessary to fix it.</p><p>Because I&#039;m lazy, I guess I might start out by just trying one of the images for 3700 or 3800 and seeing if they work.&nbsp; A serial console (with logging turned on, so you can review what flew past) is always a good idea.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186859">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">RussellSenior</div>
					<div class="post-datetime">
						23 Dec 2012, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>Comparing target/linux/ar71xx/image/Makefile between the vendor&#039;s tree and the stock OpenWrt tree might be informative as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186862">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">RussellSenior</div>
					<div class="post-datetime">
						23 Dec 2012, 22:46					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.wikidevi.com/wiki/Netgear_WNDR3700v4">http://www.wikidevi.com/wiki/Netgear_WNDR3700v4</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186913">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dgi</div>
					<div class="post-datetime">
						24 Dec 2012, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>Netgear&#039;s tarball has &quot;wndr3700v4&quot; as a separate target from &quot;ar71xx&quot; and the checksumming tool source is there at <em>tools/firmware-utils/src/mkdniimg.c</em>, where the header is:</p><div class="codebox"><pre><code>/*
 *  Copyright (C) 2009 Gabor Juhos &lt;juhosg@openwrt.org&gt;
 *
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License version 2 as published
 *  by the Free Software Foundation.
 *
 */</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186914">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dgi</div>
					<div class="post-datetime">
						24 Dec 2012, 16:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RussellSenior wrote:</cite><blockquote><p>Comparing target/linux/ar71xx/image/Makefile between the vendor&#039;s tree and the stock OpenWrt tree might be informative as well.</p></blockquote></div><p>In this case, target/linux/wndr3700v4/image/Makefile is the right file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187654">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						2 Jan 2013, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>Any progress on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188946">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">liucougar</div>
					<div class="post-datetime">
						15 Jan 2013, 00:50					</div>
				</div>
				<div class="post-content content">
					<p>i successfully compiled the gpl source</p><p>I had to <br />1. fix ZLib.cpp to make it compile with my gentoo<br />2. modify busybox makefiles<br />3. commend out acl/libacl.h from fsio.c in proftpd<br />4. my gentoo does not have ipv6 enabled, so have to modify my host /usr/include/netinet/in.h to make zebra compile</p><p>haven&#039;t tried to flash the built image yet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189058">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">RussellSenior</div>
					<div class="post-datetime">
						16 Jan 2013, 00:05					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone tried the NAND subtarget and flashing like a mikrotik board?&nbsp; The bootloader is different, it seems.&nbsp; I am still curious about the boot log (from power on).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189588">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">liucougar</div>
					<div class="post-datetime">
						22 Jan 2013, 02:50					</div>
				</div>
				<div class="post-content content">
					<p>boot log is available here: <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=723928">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=723928</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190500">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">staar</div>
					<div class="post-datetime">
						31 Jan 2013, 09:53					</div>
				</div>
				<div class="post-content content">
					<p>Anyone who has build the firmware image for 3700v4 with the data extracted from this zip file:</p><p><a href="http://www.downloads.netgear.com/files/GPL/WNDR3700v4-V1.0.1.32_gpl_src.zip">http://www.downloads.netgear.com/files/ … pl_src.zip</a></p><p>where do i put the dir &#039;u-boot &#039; ? </p><p>I succeeded with building the toolchain and fw image, but maybe the process did not compile the u-boot into the fw ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190596">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">staar</div>
					<div class="post-datetime">
						1 Feb 2013, 11:41					</div>
				</div>
				<div class="post-content content">
					<p>Well, on my Ubuntu Server 10.04.3 with gcc 4.4.3 i build the fw &amp; flashed it now successfully. But selecting packages &amp; make doesn&#039;t work. Maybe it&#039;s because i installed the feeds (same revision as in .config -&gt; r18571) with subversion but should use git ??</p><p>Or could it be a problem to use a newer gcc version as required, maybe ?</p>											<p class="post-edited">(Last edited by <strong>staar</strong> on 7 Feb 2013, 13:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191717">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">stedly</div>
					<div class="post-datetime">
						11 Feb 2013, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>Are we still looking for more help on this, I would like to contribute I happen to have a WNDR3700v4 at the current moment.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192578">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						20 Feb 2013, 06:07					</div>
				</div>
				<div class="post-content content">
					<p>There is profile &amp; kernel support for WNDR4300, which is essentially the same hardware as WNDR3700v4 (see wiki). I haven&#039;t seen any downloads for the 4300 available though. I submitted a ticket requesting support for the 3700v4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192579">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						20 Feb 2013, 06:13					</div>
				</div>
				<div class="post-content content">
					<p>Any comments on the implications of NAND flash? I know this changeset adding WNDR4300 support says only initramfs can be used with NAND flash for now:</p><p><a href="https://dev.openwrt.org/changeset/34650/trunk/target/linux/ar71xx/generic/profiles/netgear.mk">https://dev.openwrt.org/changeset/34650 … netgear.mk</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192859">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						23 Feb 2013, 05:22					</div>
				</div>
				<div class="post-content content">
					<p>Early support in DD-WRT now...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p193373">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Mantene</div>
					<div class="post-datetime">
						27 Feb 2013, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>Any chance this will have OpenWRT support soon? I mean, other than Netgear&#039;s version of it...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198875">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">earnoldy</div>
					<div class="post-datetime">
						19 Apr 2013, 08:32					</div>
				</div>
				<div class="post-content content">
					<p>Lets hope so Mantene...We finally have a decent router one can purchase off the shelf at a BB.&nbsp; Sure wish I had a few more of the 3700v2&#039;s around, its been a rockstar.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200062">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">dlang</div>
					<div class="post-datetime">
						29 Apr 2013, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>I compiled the openwrt trunk this weekend and it create an initramfs image</p><p>But when I attempted to follow the standard netgear tftp install process, I couldn&#039;t get it to work.</p><p>Anyone have any suggestions on what I may need to do to get an image on to the 3700v4/4300 routers?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201254">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">alexwhittemore</div>
					<div class="post-datetime">
						9 May 2013, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>This is killing me. The WNDR4300 is supported in dd-wrt, but they don&#039;t support port-specific vlans for atheros chips (which I&#039;d like, but will survive without if need be). The real killer is, for whatever reason, wifi performance is TRAGIC.</p><p>Subscribed, so that hopefully I can get me some openwrt goodness soon <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201858">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">beacon450</div>
					<div class="post-datetime">
						15 May 2013, 12:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>liucougar wrote:</cite><blockquote><p>i successfully compiled the gpl source</p><p>I had to <br />1. fix ZLib.cpp to make it compile with my gentoo<br />2. modify busybox makefiles<br />3. commend out acl/libacl.h from fsio.c in proftpd<br />4. my gentoo does not have ipv6 enabled, so have to modify my host /usr/include/netinet/in.h to make zebra compile</p><p>haven&#039;t tried to flash the built image yet</p></blockquote></div><br /><br /><br /><p>I am glad to see this post, great to know about such a nice details that I really need..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203742">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">ronluna</div>
					<div class="post-datetime">
						5 Jun 2013, 01:44					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone been able to successfully compile openwrt on WNDR3700v4?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 17</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=17.html">17</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>