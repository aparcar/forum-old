<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Change default kernel version</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p178150">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						14 Sep 2012, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have an x86 system (Alix board)</p><p>I try to install a webcam&nbsp; but due to a bug in kernel i&#039;ve tryed to change default trunk kernel to another version:</p><p>According to this post: <a href="https://forum.openwrt.org/viewtopic.php?id=26921">https://forum.openwrt.org/viewtopic.php?id=26921</a></p><p>I have try to change x86 makefile to version 3.2.16.</p><p>Cleanded and distcleaned the source, reconfigure it and make... But:</p><br /><br /><p>make V=99<br />make[1]: Entering directory `/home/dany/src/x86/trunk&#039;<br />make[2]: Entering directory `/home/dany/src/x86/trunk&#039;<br />make[3]: Entering directory `/home/dany/src/x86/trunk/target/linux&#039;<br />make[4]: Entering directory `/home/dany/src/x86/trunk/target/linux/x86&#039;<br />/home/dany/src/x86/trunk/scripts/kconfig.pl&nbsp; &nbsp; &gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />Parse error at /home/dany/src/x86/trunk/scripts/kconfig.pl line 137.<br />make[4]: *** [/home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.configured] Error 255<br />make[4]: Leaving directory `/home/dany/src/x86/trunk/target/linux/x86&#039;<br />make[3]: *** [compile] Error 2<br />make[3]: Leaving directory `/home/dany/src/x86/trunk/target/linux&#039;<br />make[2]: *** [target/linux/compile] Error 2<br />make[2]: Leaving directory `/home/dany/src/x86/trunk&#039;<br />make[1]: *** [/home/dany/src/x86/trunk/staging_dir/target-i386_uClibc-0.9.33.2/stamp/.target_compile] Error 2<br />make[1]: Leaving directory `/home/dany/src/x86/trunk&#039;<br />make: *** [world] Errore 2</p><br /><br /><p>someone might know something about it?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178151">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						14 Sep 2012, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>You need to provide a target/linux/x86/config-3.2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178152">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">meconiotronic</div>
					<div class="post-datetime">
						14 Sep 2012, 13:57					</div>
				</div>
				<div class="post-content content">
					<p>Ah i understand. ive tryed to copy config-3.3 in config-3.2 but when i try to make the sources it ask me all kernel option...</p><p>trunk$ make V=99<br />make[1]: Entering directory `/home/dany/src/x86/trunk&#039;<br />make[2]: Entering directory `/home/dany/src/x86/trunk&#039;<br />make[3]: Entering directory `/home/dany/src/x86/trunk/target/linux&#039;<br />make[4]: Entering directory `/home/dany/src/x86/trunk/target/linux/x86&#039;<br />/home/dany/src/x86/trunk/scripts/kconfig.pl&nbsp; &nbsp;/home/dany/src/x86/trunk/target/linux/x86/config-3.2 &gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />awk &#039;/^(#[[:space:]]+)?CONFIG_KERNEL/{sub(&quot;CONFIG_KERNEL_&quot;,&quot;CONFIG_&quot;);print}&#039; /home/dany/src/x86/trunk/.config &gt;&gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />echo &quot;# CONFIG_KALLSYMS_EXTRA_PASS is not set&quot; &gt;&gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />echo &quot;# CONFIG_KALLSYMS_ALL is not set&quot; &gt;&gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />echo &quot;# CONFIG_KPROBES is not set&quot; &gt;&gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target<br />/home/dany/src/x86/trunk/scripts/metadata.pl kconfig /home/dany/src/x86/trunk/tmp/.packageinfo /home/dany/src/x86/trunk/.config &gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.override<br />/home/dany/src/x86/trunk/scripts/kconfig.pl &#039;m+&#039; &#039;+&#039; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.target /dev/null /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.override &gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config<br />mv /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.old<br />grep -v INITRAMFS /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config.old &gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config<br />echo &#039;CONFIG_INITRAMFS_SOURCE=&quot;&quot;&#039; &gt;&gt; /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16/.config<br />export MAKEFLAGS= ;make -C /home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16 HOSTCFLAGS=&quot;-O2 -I/home/dany/src/x86/trunk/staging_dir/host/include -Wall -Wmissing-prototypes -Wstrict-prototypes&quot; CROSS_COMPILE=&quot;i486-openwrt-linux-uclibc-&quot; ARCH=&quot;x86&quot; KBUILD_HAVE_NLS=no CONFIG_SHELL=&quot;/bin/bash&quot; V=&#039;&#039; CC=&quot;i486-openwrt-linux-uclibc-gcc&quot; oldconfig prepare scripts<br />make[5]: Entering directory `/home/dany/src/x86/trunk/build_dir/linux-x86_alix2/linux-3.2.16&#039;<br />scripts/kconfig/conf --oldconfig Kconfig<br />*<br />* Restart config...<br />*<br />*<br />* General setup<br />*<br />Prompt for development and/or incomplete code/drivers (EXPERIMENTAL) [N/y/?] (NEW) </p><br /><br /><p>etc...</p><br /><br /><p>There is a simple way to copy an existing config?</p><br /><div class="quotebox"><cite>jow wrote:</cite><blockquote><p>You need to provide a target/linux/x86/config-3.2</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178156">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Sep 2012, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>You have done the simple part, but as the available kernel option themselves have changed between 3.2 and 3.3, you have to provide the needed ones for 3.2...</p><p>You might read also this thread: <a href="https://forum.openwrt.org/viewtopic.php?pid=177686#p177686">https://forum.openwrt.org/viewtopic.php … 86#p177686</a></p><p>and maybe copy on old 3.2 config as the basis...<br />31804 removed the x86 support for 3.2 kernels: <a href="https://dev.openwrt.org/changeset/31804/trunk/target/linux/x86">https://dev.openwrt.org/changeset/31804 … /linux/x86</a><br />So, use the last config before that: <a href="https://dev.openwrt.org/browser/trunk/target/linux/x86/config-3.2?rev=31750">https://dev.openwrt.org/browser/trunk/t … ?rev=31750</a></p><p>...and same copy for generic from the last existing generic 3.2 config...</p><p>You have to browse the historical source tree to find the relevant files.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 14 Sep 2012, 14:19)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>