<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WTR54G (v2.2) ... JTAG PinOut ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p5263">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						13 Mar 2005, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I&#039;ve got a WTR54G v2.2 (WT54GV22).</p><p>I soldired the JTAG Pins, build a JTAG Cable but the jtag prgramms tells me:</p><p>&nbsp; CHIP ID: 11111111111111111111111111111111 (FFFFFFFF)</p><p>and when reversing the plug:</p><p>CHIP ID: 00000000000000000000000000000000 (00000000)</p><p>I belive that my cable is okay ... I checked all the pins several times for correct connectivity.</p><p>Hmmm...</p><p>Anybody knows if the WRT54G v2.2 has a different JTAG-Pin-Layout?</p><p>Thanx<br />Kianusch</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5269">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mtakahar</div>
					<div class="post-datetime">
						13 Mar 2005, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>Try the following settings for the .ini file if you are using the Windows XP version of the software with the cable built based on hairydairymaid&#039;s instructions.<br /></p><div class="codebox"><pre><code>TDI = 0;
TCK = 1;
TMS = 2;
TDO = 4;</code></pre></div><p>You shouldn&#039;t have to make changes if you are using the Linux version that comes with the cable instructions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5281">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						13 Mar 2005, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>I am using the linux version.&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Maybe I&#039;m using the wrong Parallel port cable?</p><p>Mine has pins on both ends.&nbsp; My JTAG-Cable has plugs ... so still e.g. pin-2 on the jtag ends up&nbsp; on pin-2 on the computer side...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5284">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mtakahar</div>
					<div class="post-datetime">
						13 Mar 2005, 23:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>I am using the linux version.&nbsp; <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Maybe I&#039;m using the wrong Parallel port cable?</p><p>Mine has pins on both ends.&nbsp; My JTAG-Cable has plugs ... so still e.g. pin-2 on the jtag ends up&nbsp; on pin-2 on the computer side...</p></blockquote></div><p>Some extention cables don&#039;t have all pins wired straight.&nbsp; (I hope you are not using a corss-over cable...)&nbsp; Check the continuity end-to-end with a voltage meter.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5287">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						14 Mar 2005, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s what I did ... all the way from JTAG-end to the Parallel Port Plug ... to the (assumed) 1:1 Cabel End - I do get my 100R on the four cables.</p><p>And if I understood (and soldired) everything right, the red colored ribbon cabel side is plugged towards the wrt54g jtag end marked 1 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>when reversing the ribbon cable i do get a differen (inverted) ID - but still an unuseable one.</p><p>Should the JTAG Cable work no matter how bad my WRT is bricked?<br />Even if not - do I at least get a &quot;recognized&quot; ID?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5293">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mtakahar</div>
					<div class="post-datetime">
						14 Mar 2005, 18:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Should the JTAG Cable work no matter how bad my WRT is bricked?<br />Even if not - do I at least get a &quot;recognized&quot; ID?</p></blockquote></div><p>Yes.&nbsp; You should get a valid chip ID as long as the flash chip is alive.&nbsp; The contents of the chip doesn&#039;t matter at all.&nbsp; You&#039;ll need a good copy of CFE if it is damaged, but you should still be able to communicate with the flash chip.</p><p>Have you checked your prallel port is working in Linux?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5296">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						14 Mar 2005, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>prallel port works fine with linux ... &quot;Normaly&quot; a printer is hoocked up to it ... yes I did stop all printing-daemons beforhand :-)</p><p>So maybe I did &quot;crash&quot; my flash-chip :-(</p><p>I could try building a serial cable - but are the tty&#039;s enabled by default?</p><p>My WRT54G still boots, and the power-light goes steady.&nbsp; Also when starting with FailSafe - I do get my 3-flashes/secocnd DMZ-LED sequence ... but no ping or tftp on 192.168.1.1 <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Kianusch</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5298">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mtakahar</div>
					<div class="post-datetime">
						14 Mar 2005, 20:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>prallel port works fine with linux ... &quot;Normaly&quot; a printer is hoocked up to it ... yes I did stop all printing-daemons beforhand :-)</p></blockquote></div><p>Did you also rmmod&#039;ed lp and whatever else that might be using parport?</p><p>Edit: You can add some puts, etc. to wrt54g.c or run it on the debugger and verify if it successfully opened the parallel port with exclusive access.</p><div class="quotebox"><blockquote><p>So maybe I did &quot;crash&quot; my flash-chip :-(</p><p>I could try building a serial cable - but are the tty&#039;s enabled by default?</p><p>My WRT54G still boots, and the power-light goes steady.&nbsp; Also when starting with FailSafe - I do get my 3-flashes/secocnd DMZ-LED sequence ... but no ping or tftp on 192.168.1.1 <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>It wouldn&#039;t make that far if the chip was really fried.&nbsp; Also, the CFE is most likely still intact, so you would just need to erase nvram and linux partitions that can be done either by the serial console or JTAG.</p><p>Serial console (shell) is enabled out-of-the-box in the experimental builds (and very recent stable builds, too.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5312">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						15 Mar 2005, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>It did take me some time to figure out that ppdev is needed.&nbsp; (Documentation for Linux parallel-port is nearly zero when not related to printing <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>So right now folowing modules are loaded:</p><p>&nbsp; parport_pc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; ppdev<br />&nbsp; parport</p><p>Anyway ... the communication has to be working, cause I&#039;m getting different beheaviours when plugging in the jtag connector reversed.</p><p>Also when using w54g I get</p><p>&nbsp; ppdev0: registered pardevice<br />&nbsp; ppdev0: unregistered pardevice</p><p>in dmesg.</p><p>So I&#039;ll end up building a serial-connector.&nbsp; This will we on saturday, since right now I&#039;m 600km away from the disassabled router :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5471">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kianusch</div>
					<div class="post-datetime">
						21 Mar 2005, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>So it seems that I fried my router completely <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Serial Connector doesn&#039;t return anything.&nbsp; (Interface (MAX232) works - because I tried it on a different Box...)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5472">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">wbx</div>
					<div class="post-datetime">
						21 Mar 2005, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>yesterday i fixed my wrt54gs 1.0 with a selfmade jtag cable.</p><p>you can find a picture at <a href="http://www.openbsd-geek.de">www.openbsd-geek.de</a> ..</p><p>The cable should not be longer than 15 cm. (to be sure)</p><p>Pins:<br />JTAG - Parallel<br />3&nbsp; &nbsp; - 2<br />5&nbsp; &nbsp; - 13<br />7&nbsp; &nbsp; - 4<br />9&nbsp; &nbsp; - 3<br />10&nbsp; &nbsp;- 20 and 25 (ground)</p><p>Under ubuntu linux i needed to rmmod ppdev and lp and only<br />load parport and parport_pc. I needed to manually create /dev/parport0 (mknod /dev/parport0 c 99 0)</p><p>After that my router was recognized. (use root permissions)</p><p>If you need a CFE.BIN from wrt54g v2.2 , send me an email.</p><p>Same symptom, nothing on serial, only power led blinking.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5523">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bray</div>
					<div class="post-datetime">
						23 Mar 2005, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>Could someone please send me a working CFE.BIN file for WRT54G or point me where to find/download it.</p><p>braypp(at)gmail(dot)com</p><p>thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p5524">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">disq</div>
					<div class="post-datetime">
						23 Mar 2005, 09:31					</div>
				</div>
				<div class="post-content content">
					<p>get one from <a href="http://lonewolf.hacker-nin.com/wrt/cfe/cfe.php">http://lonewolf.hacker-nin.com/wrt/cfe/cfe.php</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>