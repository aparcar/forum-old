<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Attitude Adjustment and rp-pppoe-server</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p147231">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">drkhosla</div>
					<div class="post-datetime">
						1 Nov 2011, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to configure rp-pppoe-server in current version i.e. r28500. The options file /etc/ppp/options is</p><div class="quotebox"><blockquote><p>debug<br />logfile /tmp/pppd.log<br />noauth<br />+chap<br />+pap<br />mtu 1400<br />mru 1400<br />noaccomp<br />nopcomp<br />nocrtscts<br />noipdefault<br />lock<br />maxfail 0<br />lcp-echo-failure 5<br />lcp-echo-interval 1</p></blockquote></div><p>and /etc/ppp/pppoe-server-options is</p><div class="quotebox"><blockquote><p># PPP options for the PPPoE server<br /># LIC: GPL<br />require-pap<br />#require-chap<br />login<br />lcp-echo-interval 10<br />lcp-echo-failure 2<br />logfile /tmp/pppd.log<br />plugin /etc/ppp/plugins/rp-pppoe.so</p></blockquote></div><p>I also created /etc/ppp/pap-secrets</p><div class="quotebox"><blockquote><p>#USERNAME&nbsp; PROVIDER&nbsp; PASSWORD&nbsp; IPADDRESS<br />admin&nbsp; &nbsp;*&nbsp; &nbsp; &nbsp; &nbsp;admin&nbsp; &nbsp;*</p></blockquote></div><p>When I trying to connect router using windows 7 pppoe. I get error 691 of authentication failure. The debug log is</p><div class="quotebox"><blockquote><p>Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppoe-server[1104]: Session 3 created for client 00:1b:24:64:ec:04 (10.67.15.3) on eth1.3 using Service-Name &#039;Admin-Test&#039;<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppd[1104]: Plugin /etc/ppp/plugins/rp-pppoe.so loaded.<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppd[1104]: RP-PPPoE plugin version 3.10 compiled against pppd 2.4.5<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppd[1104]: Plugin /etc/ppp/plugins/rp-pppoe.so loaded.<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppd[1104]: RP-PPPoE plugin version 3.10 compiled against pppd 2.4.5<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.notice pppd[1104]: pppd 2.4.5 started by root, uid 0<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.warn pppd[1104]: Connected to 00:1b:24:64:ec:04 via interface eth1.3<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: using channel 22<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.info pppd[1104]: Using interface ppp0<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.notice pppd[1104]: Connect: ppp0 &lt;--&gt; eth1.3<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.warn pppd[1104]: Couldn&#039;t increase MTU to 1500<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.warn pppd[1104]: Couldn&#039;t increase MRU to 1500<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: sent [LCP ConfReq id=0x1 &lt;mru 1400&gt; &lt;auth chap MD5&gt; &lt;magic 0x29a97484&gt;]<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: rcvd [LCP ConfReq id=0x0 &lt;mru 1480&gt; &lt;magic 0x3f37865&gt; &lt;pcomp&gt; &lt;accomp&gt; &lt;callback CBCP&gt;]<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: sent [LCP ConfRej id=0x0 &lt;pcomp&gt; &lt;accomp&gt; &lt;callback CBCP&gt;]<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: rcvd [LCP ConfReq id=0x1 &lt;mru 1480&gt; &lt;magic 0x3f37865&gt;]<br />Nov&nbsp; 1 20:15:21 Admin-Test daemon.debug pppd[1104]: sent [LCP ConfAck id=0x1 &lt;mru 1480&gt; &lt;magic 0x3f37865&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: sent [LCP ConfReq id=0x1 &lt;mru 1400&gt; &lt;auth chap MD5&gt; &lt;magic 0x29a97484&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP ConfNak id=0x1 &lt;auth pap&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: sent [LCP ConfReq id=0x2 &lt;mru 1400&gt; &lt;auth pap&gt; &lt;magic 0x29a97484&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP ConfAck id=0x2 &lt;mru 1400&gt; &lt;auth pap&gt; &lt;magic 0x29a97484&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: sent [LCP EchoReq id=0x0 magic=0x29a97484]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP Ident id=0x2 magic=0x3f37865 &quot;MSRASV5.20&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP Ident id=0x3 magic=0x3f37865 &quot;MSRAS-0-ET-PC&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP Ident id=0x4 magic=0x3f37865 &quot;\37777777666\017f\37777777753mi\017C\37777777622\37777777776Q&amp;x\020\37777777767G&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [PAP AuthReq id=0x63 user=&quot;admin&quot; password=&lt;hidden&gt;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: sent [PAP AuthNak id=0x63 &quot;Session started successfully&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.warn pppd[1104]: PAP peer authentication failed for admin<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.warn pppd[1104]: Couldn&#039;t increase MTU to 1500<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.warn pppd[1104]: Couldn&#039;t increase MRU to 1500<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: sent [LCP TermReq id=0x3 &quot;Authentication failed&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP EchoRep id=0x0 magic=0x3f37865]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.debug pppd[1104]: rcvd [LCP TermAck id=0x3 &quot;Authentication failed&quot;]<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.notice pppd[1104]: Connection terminated.<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.info pppoe-server[14119]: Sent PADT<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.info pppd[1104]: Exit.<br />Nov&nbsp; 1 20:15:24 Admin-Test daemon.info pppoe-server[14119]: Session 3 closed for client 00:1b:24:64:ec:04 (10.67.15.3) on eth1.3</p></blockquote></div><p>This is very simple configuration. I am not able to find the reason of pap authentication failure. I tried chap and radius also, but all fail.</p><p>Can anybody help me in this</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>