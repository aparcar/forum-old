<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DDNS update with public IP</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p336688">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mrcutts</div>
					<div class="post-datetime">
						31 Aug 2016, 15:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I have a wireless router that has its WAN port connected to a LAN port on my internet router. I would like the wireless router to use NO-IP&nbsp; DDNS to resolve domain to&nbsp; the public IP. Currently this isn’t working because the WAN side of the wireless router is getting a private IP address. How can I get it to work?</p><p>Thanks for your help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336692">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						31 Aug 2016, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>DDNS will not work under that condition.</p><p>Be so kind to <a href="https://forum.openwrt.org/viewtopic.php?id=66377">search</a> <strong>before</strong> posting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336707">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						31 Aug 2016, 16:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mrcutts wrote:</cite><blockquote><p>Hi, </p><p>I have a wireless router that has its WAN port connected to a LAN port on my internet router. I would like the wireless router to use NO-IP&nbsp; DDNS to resolve domain to&nbsp; the public IP. Currently this isn’t working because the WAN side of the wireless router is getting a private IP address. How can I get it to work?</p><p>Thanks for your help</p></blockquote></div><p>Well, openwrt&#039;s/lede&#039;s DDNS package allows you to specify the source of the IP address to update at the dynamic DNS provider. One of the methods is called web or url, that should work even for your double NAT configuration, here is an edited excerpt from my /etc/config/ddns (for duckdns.org via https):</p><p>config service &#039;myddns_ipv4&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option service_name &#039;duckdns.org&#039;<br />&nbsp; &nbsp; option lookup_host &#039;router.duckdns.org&#039;<br />&nbsp; &nbsp; option username &#039;router&#039;<br />&nbsp; &nbsp; option use_https &#039;1&#039;<br />&nbsp; &nbsp; option cacert &#039;/etc/ssl/certs/ca-bundle.pem&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; option ip_source &#039;web&#039;<br />&nbsp; &nbsp; option ip_url &#039;<a href="http://ipv4.wtfismyip.com/text">http://ipv4.wtfismyip.com/text</a>&#039;<br />&nbsp; &nbsp; option password &#039;my-secret-token&#039;</p><p>That should, if called on a timed basis register your external visible IPv4 address at the DDNS provider. Now without configuring port redirection/dmz/exposed host on your primary router that ddns entry will by itself not allow you to reach your router over the internet, but you did not ask for that <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp;M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354001">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">chef</div>
					<div class="post-datetime">
						12 Mar 2017, 06:11					</div>
				</div>
				<div class="post-content content">
					<p>Thanks moeller0, this works great.&nbsp; Glad you shared a solution unlike the guy above who thew up his hands and said it&#039;s not possible.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>