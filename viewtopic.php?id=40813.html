<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Change the TTL of /etc/hosts entries</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p184687">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">exvance</div>
					<div class="post-datetime">
						29 Nov 2012, 20:26					</div>
				</div>
				<div class="post-content content">
					<p>Is there a way to tell client machines to not cache IP addresses resolved using the /etc/hosts file?<br />I have setup a script that modifies my hosts file on a regular basis (every few minutes). </p><p>So, one minute I might have a line like this:</p><p>192.168.1.34&nbsp; &nbsp; &nbsp; fileserver</p><p>then the next minute it might be like this:</p><p>192.168.1.35&nbsp; &nbsp; &nbsp; fileserver</p><p>How can I force my clients to get the new ip address without making changes on their end (such as dns flush)?</p><p>Will I have to setup a true dns server to accomplish this?</p><p>Thanks any help!</p><p>EV</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184752">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Nov 2012, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>Quote from the dnsmasq manpage:<br /></p><div class="quotebox"><blockquote><p><strong>-T, --local-ttl=&lt;time&gt;</strong><br />When replying with information from /etc/hosts or the DHCP leases file dnsmasq by default sets the time-to-live field to zero, meaning that the requester should not itself cache the information. This is the correct thing to do in almost all situations. This option allows a time-to-live (in seconds) to be given for these replies. This will reduce the load on the server at the expense of clients using stale data under some circumstances.</p></blockquote></div><p>So it seems it is already &quot;uncached&quot;. However you can force a specific ttl with &quot;echo local-ttl=60 &gt;&gt; /etc/dnsmasq.conf&quot;, then it will tag responses for hosts entries with a TTL of 60 seconds.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>