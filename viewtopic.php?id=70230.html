<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> QoS - help</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p354278">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						15 Mar 2017, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I need some help to implement qos <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> In fact I am a newbie about QoS.<br />I have a LTE Internet connection which is very unstable, sometimes I only reach 15Mbits... I tried to use SQM but the connection speed is changing a lot, so if i set the value to 15Mbits I will never reach 30Mbits again. Thats not my prefered solution.</p><p>But I need your help to slow down windows updates. I want to slow down them by using QoS. Any ideas? They are using the whole bandwith and I can&#039;t even browse in the Internet because of bufferbloat. SQM is not a solution because sometimes I reach 40Mbits, but in the evening only about 15 Mbits...</p><p>Thx in advance!</p><p>so long</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354323">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						16 Mar 2017, 11:17					</div>
				</div>
				<div class="post-content content">
					<p>mmmh, try sqm-scripts with piece_of_cake as script and cake as qdisc, then in the queueing discipline tab check both the advanced and the dangerous option and add &quot;autorate_ingress&quot; to the field named &quot;Advanced option string to pass to the ingress queueing disciplines; no error checking, use very carefully.&quot; After you do this and hit save and apply please run the following on a ssh login to the router: &quot;tc -s qdisc&quot; to see wether that option actually made it into cakes invocation. Olease note that the rate estimator is not that well tested (smaller user base) but cake&#039;s principle author, AFAIK actually uses it on a mobile network so this might help with your issue. The real solution would be to debloat the LTE base station and modem, but that seems rather out of your control <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p354436">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						17 Mar 2017, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>thx for your answer, but I don&#039;t understand it at all <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> if you have some screenshots I would be very appreciated about that.<br />thx so far!</p><p>so long</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361301">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						1 Jul 2017, 17:38					</div>
				</div>
				<div class="post-content content">
					<p>@moeller: can you help me a little bit? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> maybe moeller = m√∂ller = u are from germany? my german is much better^^</p><p>i can&#039;t find that qdisc cake option... <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>thx so long</p>											<p class="post-edited">(Last edited by <strong>trustno1foxm</strong> on 1 Jul 2017, 17:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361317">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						2 Jul 2017, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi what router do you have and what build of openwrt/LEDE?<br />You need to use Smart Queue Management<br />The package you need to install is called SQM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361319">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						2 Jul 2017, 00:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>mmmh, try sqm-scripts with piece_of_cake as script and cake as qdisc, then in the queueing discipline tab check both the advanced and the dangerous option and add &quot;autorate_ingress&quot; to the field named &quot;Advanced option string to pass to the ingress queueing disciplines; no error checking, use very carefully.&quot; After you do this and hit save and apply please run the following on a ssh login to the router: &quot;tc -s qdisc&quot; to see wether that option actually made it into cakes invocation. Olease note that the rate estimator is not that well tested (smaller user base) but cake&#039;s principle author, AFAIK actually uses it on a mobile network so this might help with your issue. The real solution would be to debloat the LTE base station and modem, but that seems rather out of your control <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi after you have added &quot;autorate_ingress&quot;&nbsp; what do you have to set in your up and down fields?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361341">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						2 Jul 2017, 09:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tapper wrote:</cite><blockquote><p>Hi what router do you have and what build of openwrt/LEDE?<br />You need to use Smart Queue Management<br />The package you need to install is called SQM.</p></blockquote></div><p>Linksys WRT1200AC installed with openwrt CC 15.05.1, SQM is installed (1.0.6-1).</p><p>thx in advance!</p><div class="quotebox"><cite>tapper wrote:</cite><blockquote><p>Hi after you have added &quot;autorate_ingress&quot;&nbsp; what do you have to set in your up and down fields?</p></blockquote></div><p>I tried both without success, but I think because of the missing cake qdisc option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361343">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						2 Jul 2017, 10:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi mate I think you should update to LEDE 17.1.2.<br /><a href="https://lede-project.org/downloads">https://lede-project.org/downloads</a><br />I cant remember if cake is in 15.1 but it has to be built in with the kernel as far as I know.<br />Don&#039;t save settings when upgrading. The LEDE is just a newer ver of OpenWRT. To read more about the split and then them getting back together just google lede openwrt. The lede 17 build has newer WIFI drivers in for the wrt routers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361345">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						2 Jul 2017, 10:19					</div>
				</div>
				<div class="post-content content">
					<p>thx! lede is a fork, so is it save to restore the openwrt settings?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361349">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						2 Jul 2017, 11:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tapper wrote:</cite><blockquote><div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>mmmh, try sqm-scripts with piece_of_cake as script and cake as qdisc, then in the queueing discipline tab check both the advanced and the dangerous option and add &quot;autorate_ingress&quot; to the field named &quot;Advanced option string to pass to the ingress queueing disciplines; no error checking, use very carefully.&quot; After you do this and hit save and apply please run the following on a ssh login to the router: &quot;tc -s qdisc&quot; to see wether that option actually made it into cakes invocation. Olease note that the rate estimator is not that well tested (smaller user base) but cake&#039;s principle author, AFAIK actually uses it on a mobile network so this might help with your issue. The real solution would be to debloat the LTE base station and modem, but that seems rather out of your control <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Hi after you have added &quot;autorate_ingress&quot;&nbsp; what do you have to set in your up and down fields?</p></blockquote></div><p>Good question, I guess I need to test this myself, I would not be amazed if this would not work with the GUI at all, but would require to either edit /etc/config/sqm directly or worse would require to call tc manually after sqm has started (and every time on hotplug, so not a long term option, but might be good enough for initial testing).</p><p>Best Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361350">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						2 Jul 2017, 11:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>thx! lede is a fork, so is it save to restore the openwrt settings?</p></blockquote></div><br /><p>In theory yes, but occasionally it is advisable to start from scratch, switching from openwrt to LEDE might justify a manual reinstallation and re-configration. You should be able to look inside the old openwrt configuration files for reference. I typically first make a copy of the whole /overlay directory from the old router to my laptop, before starting the update, that way I can a) look at my old settings and b) if unhappy with the new version all I need to do is re-flash the old firmware and simply copy the contents of the saved /overlay (drive into the overlay directory and copy the contined directories like ./etc onto the /etc directory of the re-installed old firmware...).</p><p>Best Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361351">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						2 Jul 2017, 11:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>@moeller: can you help me a little bit? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> maybe moeller = m√∂ller = u are from germany? my german is much better^^</p><p>i can&#039;t find that qdisc cake option... <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>thx so long</p></blockquote></div><p>Switching to German is possible, I would prefer to stick to english though, so this thread can be helpful to more other people wondering about the same question. That said, if you switch over to LEDE, I would like to ask you to open a new topic on the LEDE forum (<a href="https://forum.lede-project.org">https://forum.lede-project.org</a>).</p><p>Best Regards</p>											<p class="post-edited">(Last edited by <strong>moeller0</strong> on 2 Jul 2017, 11:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361352">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						2 Jul 2017, 11:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>thx! lede is a fork, so is it save to restore the openwrt settings?</p></blockquote></div><p>Fork, that is what it looked like for some time, but the lede and openwrt projects agrred to re-unite using current lede as base....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361353">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						2 Jul 2017, 12:57					</div>
				</div>
				<div class="post-content content">
					<p>Yeah I cant wait for LEDE and OpenWRT to re-unite using current lede as base. I have bin a OpenWRT user for a long time now, but LEDE has come a long way and evrry time I am saying to people to flash LEDE i feel like a bit of a trater! lol Most of the time it is the best thing for the user to do.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361355">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">tapper</div>
					<div class="post-datetime">
						2 Jul 2017, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>My package is 70 Mbps but, some times my download can boost up to 90 Mbps. As my speed can go up and down if there is a way to take advantage of the speed boost i get some times it would be cool. I set my download in SQM to 70000 rite now and it keeps it nice and steady. If i go any hire pings go to shit! after like the first 10 15 seconds&nbsp; or so. I am going to have to talk to vergin UK as the 70 Mbps package i am on is a old one now all the new people get 100 Mbps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361370">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">adri</div>
					<div class="post-datetime">
						2 Jul 2017, 17:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tapper wrote:</cite><blockquote><p>Hi mate I think you should update to LEDE 17.1.2.<br /><a href="https://lede-project.org/downloads">https://lede-project.org/downloads</a><br />I cant remember if cake is in 15.1 but it has to be built in with the kernel as far as I know.<br />Don&#039;t save settings when upgrading. The LEDE is just a newer ver of OpenWRT. To read more about the split and then them getting back together just google lede openwrt. The lede 17 build has newer WIFI drivers in for the wrt routers.</p></blockquote></div><p>Cake doesn&#039;t have to be build in to the kernel.<br />If it isn&#039;t try installing the <strong>kmod-sched-cake</strong> package.<br />If OpenWRt 15.1 doens&#039;t have this package, I guess it&#039;s time to switch to LEDE.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361371">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">adri</div>
					<div class="post-datetime">
						2 Jul 2017, 17:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tapper wrote:</cite><blockquote><p>My package is 70 Mbps but, some times my download can boost up to 90 Mbps. As my speed can go up and down if there is a way to take advantage of the speed boost i get some times it would be cool. I set my download in SQM to 70000 rite now and it keeps it nice and steady. If i go any hire pings go to shit! after like the first 10 15 seconds&nbsp; or so. I am going to have to talk to vergin UK as the 70 Mbps package i am on is a old one now all the new people get 100 Mbps.</p></blockquote></div><p>SQM doesn&#039;t really handle varying line speeds very well.<br />If this is important for you, you might want to try Gargoyle, which has a different QOS system and throttles based on average ping times.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361448">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						3 Jul 2017, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>Thx guys! I switched to Lede (latest stable version), for now I activated cake and piece of cake, without success!<br /></p><div class="codebox"><pre><code>tc -s qdisc</code></pre></div><p> shows me the cake qdisc for my eth2 interface, so in fact its working? but the bufferbloat test shows me it isn&#039;t working at all. ideas?</p><p>my sqm config looks like this:</p><div class="codebox"><pre><code>config queue &#039;eth1&#039;
        option linklayer &#039;none&#039;
        option interface &#039;eth2&#039;
        option download &#039;48640&#039;
        option upload &#039;19456&#039;
        option debug_logging &#039;0&#039;
        option verbosity &#039;5&#039;
        option qdisc &#039;cake&#039;
        option script &#039;piece_of_cake.qos&#039;
        option qdisc_advanced &#039;1&#039;
        option squash_dscp &#039;1&#039;
        option squash_ingress &#039;1&#039;
        option ingress_ecn &#039;ECN&#039;
        option egress_ecn &#039;NOECN&#039;
        option qdisc_really_really_advanced &#039;1&#039;
        option iqdisc_opts &#039;autorate_ingress&#039;
        option enabled &#039;1&#039;</code></pre></div><p>updated to real download/upload values from the provider</p>											<p class="post-edited">(Last edited by <strong>trustno1foxm</strong> on 3 Jul 2017, 19:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361450">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						3 Jul 2017, 18:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>cake qdisc for my eth2 interface, so in fact its working? but the bufferbloat test shows me it isn&#039;t working at all. ideas?</p><p>my sqm config looks like this:</p><div class="codebox"><pre><code>option download 29184&#039;</code></pre></div></blockquote></div><p>I wonder if it works at all, as your have malformed config file. Note the missing quote on this line.</p><p>And are you really using eth2 for your WAN??</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 3 Jul 2017, 18:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361451">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						3 Jul 2017, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>Thx, fixed it. Yes eth2 because of my LTE dongle. So therefore the SQM with autorate_ingress.</p><p>update: after reboot the qdisc switched to fq_codel...</p>											<p class="post-edited">(Last edited by <strong>trustno1foxm</strong> on 3 Jul 2017, 19:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361452">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						3 Jul 2017, 18:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>Thx guys! I switched to Lede (latest stable version), for now I activated cake and piece of cake, without success!<br /></p><div class="codebox"><pre><code>tc -s qdisc</code></pre></div><p> shows me the cake qdisc for my eth2 interface, so in fact its working? but the bufferbloat test shows me it isn&#039;t working at all. ideas?</p><p>my sqm config looks like this:</p><div class="codebox"><pre><code>config queue &#039;eth1&#039;
        option linklayer &#039;none&#039;
        option interface &#039;eth2&#039;
        option download 29184&#039;
        option upload &#039;9728&#039;
        option debug_logging &#039;0&#039;
        option verbosity &#039;5&#039;
        option qdisc &#039;cake&#039;
        option script &#039;piece_of_cake.qos&#039;
        option qdisc_advanced &#039;1&#039;
        option squash_dscp &#039;1&#039;
        option squash_ingress &#039;1&#039;
        option ingress_ecn &#039;ECN&#039;
        option egress_ecn &#039;NOECN&#039;
        option qdisc_really_really_advanced &#039;1&#039;
        option iqdisc_opts &#039;autorate_ingress&#039;
        option enabled &#039;1&#039;</code></pre></div></blockquote></div><p>Have a look at <a href="https://lede-project.org/docs/howto/sqm">https://lede-project.org/docs/howto/sqm</a> on how to get the most mileage out of cake (&quot;sing and dance without a safety net)). And <a href="https://forum.lede-project.org/t/sqm-qos-recommended-settings-for-the-dslreports-speedtest-bufferbloat-testing/2803">https://forum.lede-project.org/t/sqm-qo ‚Ä¶ sting/2803</a> for how to configure the dslreport&#039;s speedtest fior maximum bufferbloat testing and how to share the results in the forum (though I would recommend to switch over to the LEDE forum).</p><p>And please post the output of:<br />tc -s qdisc<br />tc -d qdisc</p><p>in one of the forums as well...</p><p>Best Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361454">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						3 Jul 2017, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>tc -s qdisc:</p><div class="codebox"><pre><code>qdisc noqueue 0: dev lo root refcnt 2
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc fq_codel 0: dev eth0 root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 147799 bytes 448 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev eth1 root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 79535275 bytes 110224 pkt (dropped 0, overlimits 0 requeues 9)
 backlog 0b 0p requeues 9
  maxpacket 1514 drop_overlimit 0 new_flow_count 3044 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc cake 8009: dev eth2 root refcnt 2 bandwidth 19456Kbit besteffort triple-isolate rtt 100.0ms raw
 Sent 41744806 bytes 38095 pkt (dropped 56, overlimits 35038 requeues 0)
 backlog 0b 0p requeues 0
 memory used: 517440b of 4Mb
 capacity estimate: 19456Kbit
                 Tin 0
  thresh     19456Kbit
  target         5.0ms
  interval     100.0ms
  pk_delay       7.7ms
  av_delay       3.9ms
  sp_delay         6us
  pkts           38151
  bytes       41827350
  way_inds           0
  way_miss         114
  way_cols           0
  drops             56
  marks              0
  sp_flows           1
  bk_flows           2
  un_flows           0
  max_len        47168

qdisc ingress ffff: dev eth2 parent ffff:fff1 ----------------
 Sent 28904527 bytes 34282 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc noqueue 0: dev br-lan root refcnt 2
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc noqueue 0: dev eth1.1 root refcnt 2
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc noqueue 0: dev eth1.10 root refcnt 2
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc noqueue 0: dev br-guest_wifi root refcnt 2
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc mq 0: dev wlan1 root
 Sent 434858 bytes 5386 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc fq_codel 0: dev wlan1 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 5648 bytes 40 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 429210 bytes 5346 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc mq 0: dev wlan0 root
 Sent 433021 bytes 5373 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc fq_codel 0: dev wlan0 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 3811 bytes 27 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan0 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan0 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 429210 bytes 5346 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 216 drop_overlimit 0 new_flow_count 2 ecn_mark 0
  new_flows_len 1 old_flows_len 0
qdisc fq_codel 0: dev wlan0 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc mq 0: dev wlan1-1 root
 Sent 515951 bytes 5248 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc fq_codel 0: dev wlan1-1 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 175510 bytes 1597 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1-1 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1-1 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 340441 bytes 3651 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 95 drop_overlimit 0 new_flow_count 5 ecn_mark 0
  new_flows_len 1 old_flows_len 0
qdisc fq_codel 0: dev wlan1-1 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc mq 0: dev wlan1-2 root
 Sent 429140 bytes 5345 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
qdisc fq_codel 0: dev wlan1-2 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1-2 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc fq_codel 0: dev wlan1-2 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 429140 bytes 5345 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 60 drop_overlimit 0 new_flow_count 2 ecn_mark 0
  new_flows_len 1 old_flows_len 0
qdisc fq_codel 0: dev wlan1-2 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
 Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
  maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
  new_flows_len 0 old_flows_len 0
qdisc cake 800a: dev ifb4eth2 root refcnt 2 bandwidth 6604Kbit autorate_ingress besteffort triple-isolate wash rtt 100.0ms raw
 Sent 29374157 bytes 34275 pkt (dropped 7, overlimits 24354 requeues 0)
 backlog 0b 0p requeues 0
 memory used: 202368b of 4Mb
 capacity estimate: 7044Kbit
                 Tin 0
  thresh      6604Kbit
  target         5.0ms
  interval     100.0ms
  pk_delay       2.9ms
  av_delay       308us
  sp_delay        57us
  pkts           34282
  bytes       29384475
  way_inds           0
  way_miss         114
  way_cols           0
  drops              7
  marks              0
  sp_flows           3
  bk_flows           1
  un_flows           0
  max_len         1474</code></pre></div><p>tc -d qdisc<br /></p><div class="codebox"><pre><code>qdisc noqueue 0: dev lo root refcnt 2
qdisc fq_codel 0: dev eth0 root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev eth1 root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc cake 8009: dev eth2 root refcnt 2 bandwidth 19456Kbit besteffort triple-isolate rtt 100.0ms raw
qdisc ingress ffff: dev eth2 parent ffff:fff1 ----------------
qdisc noqueue 0: dev br-lan root refcnt 2
qdisc noqueue 0: dev eth1.1 root refcnt 2
qdisc noqueue 0: dev eth1.10 root refcnt 2
qdisc noqueue 0: dev br-guest_wifi root refcnt 2
qdisc mq 0: dev wlan1 root
qdisc fq_codel 0: dev wlan1 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc mq 0: dev wlan0 root
qdisc fq_codel 0: dev wlan0 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan0 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan0 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan0 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc mq 0: dev wlan1-1 root
qdisc fq_codel 0: dev wlan1-1 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-1 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-1 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-1 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc mq 0: dev wlan1-2 root
qdisc fq_codel 0: dev wlan1-2 parent :1 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-2 parent :2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-2 parent :3 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc fq_codel 0: dev wlan1-2 parent :4 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms ecn
qdisc cake 800a: dev ifb4eth2 root refcnt 2 bandwidth 6375Kbit autorate_ingress besteffort triple-isolate wash rtt 100.0ms raw</code></pre></div><p>thx in advance!</p><p>ps: I will open a thread there too, I need some time^^ still trying to get up all services on my router, but could not wait for the bufferbloat test <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361455">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">trustno1foxm</div>
					<div class="post-datetime">
						3 Jul 2017, 19:30					</div>
				</div>
				<div class="post-content content">
					<p>So just created a thread @lede</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361469">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						3 Jul 2017, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>trustno1foxm wrote:</cite><blockquote><p>So just created a thread @lede</p></blockquote></div><p>Excellent, let&#039;s carry the conversation there. Sorry for my impatience in the other thread the tx output seems innocuous...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>