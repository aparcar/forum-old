<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ZyXEL P-2812HNU-F1 Unbranding Process</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Apr 2018 and 19 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=47957&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=47957&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p255965">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">cianyika</div>
					<div class="post-datetime">
						29 Nov 2014, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>I try all posible move but ...... not take cfg 06<br />R15+r20+r24<br />ROM VER: 1.0.5<br />CFG 04<br />UART</p><p>r20+r24<br />Board: ZyXEL P-2812HNU-Fx<br />SoC:&nbsp; &nbsp;Lantiq VRX288 v1.1<br />CPU:&nbsp; &nbsp;500 MHz<br />IO:&nbsp; &nbsp; 250 MHz<br />BUS:&nbsp; &nbsp;250 MHz<br />BOOT:&nbsp; NOR w/o BootROM<br />DRAM:&nbsp; 128 MiB<br />Flash: 8 MiB<br />NAND:&nbsp; 128 MiB<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ltq-eth</p><br /><br /><p>ZHAL&gt; ATSH<br />TLV_TYPE_CHKSUM is missing<br />TLV_TYPE_CHKSUM is missing</p><p>If not take cfg06 bl from f1 will not boot in any configuration and you were right with wifi.<br />I use BL &quot;openwrt-lantiq-p2812hnufx_nor-u-boot.img&quot; for F3 and image from f1 and work all led-s ,lan ,wan , ppoe , usb ,etc except wifi, but cpu it`s very hot<br />With OpenWRT for F3 all lights do not work, memori stick do not go usb, IP6 disconnects often, and wifi does not go to 300 only 130</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260517">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">Aquatica</div>
					<div class="post-datetime">
						8 Jan 2015, 07:32					</div>
				</div>
				<div class="post-content content">
					<p>Had to register just to thank you guys!</p><p>Finally got my own FTDI serial cable. I did exactly as in the tutorial, however I came across with the EXACT same issues as Mijzelf.</p><p>My fix for the failing ATUR? Power Cycle and ATUR again. This time it didn&#039;t complain about wrong FW, however httpd couldn&#039;t start because it wasn&#039;t found. On that I used Mijzelfs config fix. Now, the router works <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>And if anyone cares, I unbranded Finnish ISP&#039;s, Elisa&#039;s crippled version to factory.<br />I thought I might go around and take the newest bootbase etc, but then I thought - what for? I mean I only really need a couple of LAN ports and WLAN + DHCP/NAT, since this router is acting upon and as a router, not modem/router (I have another modem that has one port bridged for the router).</p><p>Thank you for the great guide and ton of help on the discussion about all the issues people have had!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260885">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">Verner</div>
					<div class="post-datetime">
						11 Jan 2015, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>I have Zyxel WMG3326-D20A and Zyxel 2812HNU-F1.<br />Both was Finnish ISP locked. Thanks for Asmartin I succesfully unbranded both devices.<br />3326 is same I think but no phone sockets.<br />V1.00(AACC.3) runs fine in both.<br />Good hardware specs, very stable, but no NFS file sharing and other software weakness.</p>											<p class="post-edited">(Last edited by <strong>Verner</strong> on 11 Jan 2015, 00:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260890">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">Aquatica</div>
					<div class="post-datetime">
						11 Jan 2015, 00:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Verner wrote:</cite><blockquote><p>I have Zyxel WMG3326-D20A and Zyxel 2812HNU-F1.<br />Both was Finnish ISP locked. Thanks for Asmartin I succesfully unbranded both devices.<br />3326 is same I think but no phone sockets.<br />V1.00(AACC.3) runs fine in both.<br />Good hardware specs, very stable, but no NFS file sharing and other software weakness.</p></blockquote></div><p>Hmm, intriguing. Since I (again) have some issues with connectivity.<br />Or rather, the stability of connection. Both boxes drop&#039;s IRC connections, for example, at random intervals. VMG-box won&#039;t do that at friends place, but at my place it does. P-2812 does that at my place, not tested elsewhere...</p><p>I&#039;ve flown back to the older version of FW on P-2812HNU-F1 and noticed it working way, way better than V1.00(AACC.3) - however V3.11(TUJ.0) works pretty nicely, only quite very random connection drops. Blaah, I wish I get OpenWRT running asap to counter all these issues...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262496">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">helpneeded</div>
					<div class="post-datetime">
						22 Jan 2015, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Verner or Aquatica, are you interested in writing a guide for a noobie?-) I also live in Finland and I have this Elisa P-2812hnu but I&#039;m not clever enough to do this by myself. And also if either of you is interested in selling the cable needed for the unbranding process?</p><p>Kiitoksia kovasti jos jaksatte auttaa. Ehkä Elisan laitteisiin sorvatulle ohjeelle olisi tarvetta muutenkin Suomessa.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262532">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">Aquatica</div>
					<div class="post-datetime">
						23 Jan 2015, 03:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>helpneeded wrote:</cite><blockquote><p>Verner or Aquatica, are you interested in writing a guide for a noobie?-) I also live in Finland and I have this Elisa P-2812hnu but I&#039;m not clever enough to do this by myself. And also if either of you is interested in selling the cable needed for the unbranding process?</p><p>Kiitoksia kovasti jos jaksatte auttaa. Ehkä Elisan laitteisiin sorvatulle ohjeelle olisi tarvetta muutenkin Suomessa.</p></blockquote></div><p>The guide is actually quite simple: Get that cable as linked in the first post (I bought one with 1meter length), get the drivers, plug it in as shown, (notice the colors, GND for black etc) and do as it says. I don&#039;t think I can make it any easier no matter how many guides I would write...</p><p>PS.<br />There&#039;s OpenWRT working on these boxes and that&#039;s discussed on other thread, I suggest you go read it through. Doesn&#039;t seem too easy but should be doable; luckily I have 2 routers to work on it so I can spare a brick if that were to happen...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262542">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">Verner</div>
					<div class="post-datetime">
						23 Jan 2015, 06:19					</div>
				</div>
				<div class="post-content content">
					<p>This guide is easy to follow and is hard to write better.<br />Every Elisa box is different, there is no one way to unbrand all and anly few of them is original or alternative firmware available.<br />But in this box Elisa firmware was allmost full featured? I unbranded mine, because I like to tune things like this and it wasn&#039;t my last router. If you have usb&nbsp; continuation cable, you can order jtag dongle, which is cheaper and easier to store than longer cable version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262683">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">tommis</div>
					<div class="post-datetime">
						24 Jan 2015, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>I wen through this, but I get this:</p><div class="codebox"><pre><code>VR9 # bootm 0x80800000

## Booting image at 80800000 ...
   Image Name:   MIPS OpenWrt Linux-3.14.28
   Created:      2015-01-23  23:08:57 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    4425029 Bytes =  4.2 MB
   Load Address: 80002000
   Entry Point:  80002000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... ERROR: LzmaDecode.c, 545

Decoding error = 1
LZMA ERROR 1 - must RESET board to recover</code></pre></div><p>In the step 15 it rebooted after the command succesfully completed. Is that normal? Shoudn&#039;t there be a mention of it?</p><p>For me I had set my ip to 192.168.10.33 or otherwise I would only get checksum bad error and retry loop.</p><p>EDIT: This was installing openwrt like in the wiki. Might be related to this though.</p>											<p class="post-edited">(Last edited by <strong>tommis</strong> on 24 Jan 2015, 20:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262696">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						24 Jan 2015, 21:30					</div>
				</div>
				<div class="post-content content">
					<p><strong>tommis</strong>, I guess you mix up 2 installations, ZyXEL or openWRT (on which HW)?<br />This topic is about restoring factory ZyXEL firmware on a P-2812HNU(L)-F1, NOT the installation of openWRT <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>You probably did use <em>ATUR &lt;filename&gt;</em> @ step 14 of this topic, and not tftp, as your log is showing a start-up of openWRT, which does NOT have a step 15. </p><p>And i am pretty sure you can NOT run openWRT firmware on ZyXEL (VR9) z-bootbase, or ZyXEL firmware on openWRT u-bootbase. So be sure to use correct firmware files on your current active bootbase.</p><p>You can read <a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48">here</a> how i did run openWRT on a P-2812HNU-F1.<br />Furthermore is the installing of openWRT on a P-2812HNU-Fx mentioned here: <a href="https://forum.openwrt.org/viewtopic.php?id=53511">https://forum.openwrt.org/viewtopic.php?id=53511</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262698">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">tommis</div>
					<div class="post-datetime">
						24 Jan 2015, 22:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p><strong>tommis</strong>, I guess you mix up 2 installations, ZyXEL or openWRT (on which HW)?<br />This topic is about restoring factory ZyXEL firmware on a P-2812HNU(L)-F1, NOT the installation of openWRT <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>You probably did use <em>ATUR &lt;filename&gt;</em> @ step 14 of this topic, and not tftp, as your log is showing a start-up of openWRT, which does NOT have a step 15. </p><p>And i am pretty sure you can NOT run openWRT firmware on ZyXEL (VR9) z-bootbase, or ZyXEL firmware on openWRT u-bootbase. So be sure to use correct firmware files on your current active bootbase.</p><p>You can read <a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48">here</a> how i did run openWRT on a P-2812HNU-F1.<br />Furthermore is the installing of openWRT on a P-2812HNU-Fx mentioned here: <a href="https://forum.openwrt.org/viewtopic.php?id=53511">https://forum.openwrt.org/viewtopic.php?id=53511</a></p></blockquote></div><p>Yeah I was trying to run F3 software on F1 hardware. After I uploaded correct firmware it almost booted. I know I didn&#039;t need to do this because I&#039;m going to need to install u-boot anyways. I will posting there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264532">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">fedor</div>
					<div class="post-datetime">
						7 Feb 2015, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys.</p><p>I flashed OpenWRT on my ZyXEL P-2812HNU-F1, it works nice. But VDSL2(sonera, finland) doesn&#039;t work. </p><p>And I want to back to stock firmware 311TUJ0C0.bin. How i can do this? How to flash stock u-boot?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264537">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">Aquatica</div>
					<div class="post-datetime">
						7 Feb 2015, 19:25					</div>
				</div>
				<div class="post-content content">
					<p>fedor, wrong thread I&#039;d say. You need the proper ADSL/VDSL Firmware that was on the OpenWRT-thread, I think</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264558">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">fedor</div>
					<div class="post-datetime">
						7 Feb 2015, 21:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Aquatica wrote:</cite><blockquote><p>fedor, wrong thread I&#039;d say. You need the proper ADSL/VDSL Firmware that was on the OpenWRT-thread, I think</p></blockquote></div><p>Maybe op help, because vdsl2 doesn&#039;t work in openwrt with our ISP, it&#039;s fact.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264562">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">Verner</div>
					<div class="post-datetime">
						7 Feb 2015, 22:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fedor wrote:</cite><blockquote><p>Hi guys.</p><p>I flashed OpenWRT on my ZyXEL P-2812HNU-F1, it works nice. But VDSL2(sonera, finland) doesn&#039;t work. </p><p>And I want to back to stock firmware 311TUJ0C0.bin. How i can do this? How to flash stock u-boot?</p></blockquote></div><p>I thinkit it is a same procedure than for unbranding (#1 post)</p>											<p class="post-edited">(Last edited by <strong>Verner</strong> on 7 Feb 2015, 22:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264644">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">fedor</div>
					<div class="post-datetime">
						8 Feb 2015, 14:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Verner wrote:</cite><blockquote><div class="quotebox"><cite>fedor wrote:</cite><blockquote><p>Hi guys.</p><p>I flashed OpenWRT on my ZyXEL P-2812HNU-F1, it works nice. But VDSL2(sonera, finland) doesn&#039;t work. </p><p>And I want to back to stock firmware 311TUJ0C0.bin. How i can do this? How to flash stock u-boot?</p></blockquote></div><p>I thinkit it is a same procedure than for unbranding (#1 post)</p></blockquote></div><p>Ok, tell me how to return original bootloader?<br />I tried:<br /></p><div class="codebox"><pre><code>tftp 0x80700000 304TUJ.bin (without ecc sections)
nand write 0x80700000 0x0 0x20000</code></pre></div><p>then reboot and got:<br /></p><div class="codebox"><pre><code>ROM VER: 1.1.4
CFG 06
NAND
NAND Read OK</code></pre></div><p>And halting.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264649">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						8 Feb 2015, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Here is how i re-flashed original ZyXEL bootloader:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=262197#p262197">https://forum.openwrt.org/viewtopic.php … 97#p262197</a><br />It even shows my logging</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277246">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">drsnuggels</div>
					<div class="post-datetime">
						23 May 2015, 00:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p>Here is how i re-flashed original ZyXEL bootloader:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=262197#p262197">https://forum.openwrt.org/viewtopic.php … 97#p262197</a><br />It even shows my logging</p></blockquote></div><p>Doing this just show me:</p><p>ROM VER: 1.0.05<br />CFG 06<br />NAND<br />NAND Read OK</p><p>Thats it, its not booting the Z-boot i just downloaded and flashed? Please help me restore the zyxel firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277308">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						23 May 2015, 16:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drsnuggels wrote:</cite><blockquote><p>i just downloaded and flashed?</p></blockquote></div><p>How did you flash it? any logs?<br />As i did it from UART-boot with openWRT asc file, then re-flash with the &#039;100AACC309.bin&#039; file.</p><p>commands used:<br /></p><div class="codebox"><pre><code>tftp 0x80700000 100AACC309.bin
nand write 0x80700000 0x0 0x20000</code></pre></div><p>(Make sure all other parameters are set for Z-Boot instead of U-boot.)<br />Power off and on again.</p><p>Should do the job, although you need to flash firmware too, as this ONLY does the z-Boot...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278772">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">drsnuggels</div>
					<div class="post-datetime">
						3 Jun 2015, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, i did that but it did not work. I took the original rom and cut out all the&quot;ff ff ff ff ff ff&quot; data with a hex editor and repeated the same steps. Now it is working. Only no root access <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>And i see the writer above me: Fedor has: ROM VER: 1.1.4 instead of ours: 1.0.5</p><p>atsh<br />ZLD&nbsp; &nbsp;Version&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : V1.00(AACC.3)<br />Bootbase Version&nbsp; &nbsp; &nbsp; &nbsp;: V3.09|01/24|2013(AACC)<br />Vender Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : ZyXEL Communications Corp.<br />Product Model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : P-2812HNU-F1<br />Serial Number&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : S120Y08521062<br />First MAC Address&nbsp; &nbsp; &nbsp; : CC5D4EA9CDF8<br />Last MAC Address&nbsp; &nbsp; &nbsp; &nbsp;: CC5D4EA9CDFF<br />MAC Address Quantity&nbsp; &nbsp;: 08<br />Default Country Code&nbsp; &nbsp;: FD<br />Boot Module Debug Flag : 01<br />RootFS&nbsp; &nbsp; &nbsp; Checksum&nbsp; &nbsp;: 0000cd41<br />Kernel&nbsp; &nbsp; &nbsp; Checksum&nbsp; &nbsp;: 00006789<br />RomFile&nbsp; &nbsp; &nbsp;Checksum&nbsp; &nbsp;: 000054c8<br />Main Feature Bits&nbsp; &nbsp; &nbsp; : 00<br />Other Feature Bits&nbsp; &nbsp; &nbsp;:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 06 00 00 04 19 01 00 ff-f8 00 01 00 01 00 00 00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00</p><br /><p>ROM VER: 1.0.5<br />CFG 06<br />NAND<br />NAND Read OK</p><p>DDR autotuning Rev 0.3d<br />DDR size from 0xa0000000 - 0xa7ffffff<br />DDR check ok... start booting...</p><br /><br /><p>ZyU-F02-300-20AA003-V3.09|01/24|2013(AACC)</p><p>CLOCK CPU 500M RAM 250M<br />DRAM:&nbsp; 128 MB</p><p> relocate_code start<br /> relocate_code finish.<br />128 MiB<br />*** Warning - bad CRC or NAND, using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;fw_addr=0xa0200000<br />Internal phy(GE) firmware version: 0x0405<br />setup MDIO for new GPHY<br />vr9 Switch<br />Hit any key to stop autoboot:&nbsp; 0</p><p>NAND read: device 0 offset 116736, size 65536 ...&nbsp; 65536 bytes read: OK<br />## Starting application at 0x86A80000 ...</p><br /><p>Z-LOADER 3.0(Feb 14 2014)</p><p>NAND flash block size: 0x20000<br />Dual image: Both OK! upgcnt1=0 upgcnt2=1<br />Select 2nd zboot image...<br />go 0x86a90000<br />## Starting application at 0x86A90000 ...</p><br /><p>Z-Boot 3.0.0(Feb 14 2014)</p><p>we get zloader version: 3.0<br />Hit any key to stop autoboot: 0<br />ROM-D check=0<br />MRD_CERT_1 check=0<br />MRD_CERT_2 check=0</p><br /><p> Read Kernel to RAM from 2f00000<br />bootargs=root=/dev/mtdblock1 rootfstype=yaffs2 console=ttyS0,115200 phym=128M mem=126M panic=1 vpe1_load_addr=0x87e00000M vpe1_mem=2M vpe1_wired_tlb_entries=0<br />## Booting image at 80800000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS Linux-2.6.32<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2014-02-14&nbsp; &nbsp;3:33:18 UTC<br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 1544334 Bytes =&nbsp; 1.5 MB<br />&nbsp; &nbsp;Load Address: 80002000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80006f30<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80006f30) ...<br />## Giving linux memsize in MB, 128</p><p>Starting kernel ...</p>											<p class="post-edited">(Last edited by <strong>drsnuggels</strong> on 3 Jun 2015, 21:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298753">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">binaryx</div>
					<div class="post-datetime">
						5 Nov 2015, 22:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tridy wrote:</cite><blockquote><p>Could someone help me with&nbsp; me an idea how to unbrand my Swedish Bredbandsbolaget P-2812HNUL-F1 router. I cannot get through ATSE invalid argument part. I tried the following with no luck:</p><p>ATSE P-2812HNUL-F1<br />ATSE P2812HNUL-F1<br />ATSE P-2812HNULF1<br />ATSE P2812HNULF1<br />ATSE P-2812HNU-F1<br />ATSE P2812HNU-F1<br />ATSE P-2812HNUF1<br />ATSE P2812HNUF1</p><p>Thanks!</p></blockquote></div><p>Same thing, I tried all of this arguments on P-2812HNU-F1 vT (Telenor), and no one was working.</p><p>ZLD&nbsp; &nbsp;Version: V3.10(TUL.4)<br />Bootbase Version: V3.03|11/19/2012(TUL)</p>											<p class="post-edited">(Last edited by <strong>binaryx</strong> on 5 Nov 2015, 22:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298904">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">binaryx</div>
					<div class="post-datetime">
						7 Nov 2015, 14:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johved wrote:</cite><blockquote><p>I&#039;m actually sort of a newbie when it comes to this, so I was just wondering; <br />1. does this process enable the development for third party firmware on the p2812 ? - if so, will this happen?</p><p>2. does the unbranding of this device give me any features that i dont already have with the firmware that is on it? (is the&nbsp; 3.11(TUJ.0)C0 firmware &quot;better&quot; than the &#039;telenor&#039;-one i have now?)</p></blockquote></div><p>I think unbranding only makes sense if your branded firmware limits the access to all that features that have regular firmware. For example, Telenor firmware have a few levels of access and a few passwords. For customers they give user level of access, with limited features. If you have admin pass and full access to all features, then unbranding makes no sense to me.<br />Also, branded firmware does not allow to upgrade to regular Zyxel firmware, it don&#039;t accept regular firmware, only Telenor.</p>											<p class="post-edited">(Last edited by <strong>binaryx</strong> on 7 Nov 2015, 14:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298907">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">binaryx</div>
					<div class="post-datetime">
						7 Nov 2015, 14:38					</div>
				</div>
				<div class="post-content content">
					<p>@asmartin where exactly is stored the ATSE parameter?<br />It definitely have more variations than was found in this forum. None of the ATSE argument versions I tried are worked on Telenor firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349959">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">badflasher</div>
					<div class="post-datetime">
						22 Jan 2017, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>I have the same problem as fedor i got only</p><p>ROM VER: 1.1.4<br />CFG 02<br />UART<br />after R17 shortcut</p><p>and <br />ROM VER: 1.1.4<br />CFG 06<br />NAND<br />NAND Read OK</p><p>with normal start</p><p>I can send file but i can&#039;t write any command.<br />Any one can tell me whay should i do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351068">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">gwillem</div>
					<div class="post-datetime">
						4 Feb 2017, 14:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks for sharing all this useful information. I managed to get root on a locked P-2812HNU-F1 with the latest Telfort firmware, will share a howto later. I&#039;d rather keep this firmware bc of vectoring support, but I would like to store local settings (ssh keys, dnsmasq &amp; iptables config). However, everything is mounted as readonly or tmpfs so changes are lost upon reboot. Now, I don&#039;t understand how the Zyxel writes configuration to its persistent memory. It is clearly able to do so with webgui config changes.</p><p>All webgui changes appear to pass through /usr/bin/ccctest, which (I assume) modify and write config.rom to the NAND flash. However, I can&#039;t find how it does so. Curiously, it seems to have been build using the openwrt toolchain (from `strings`):</p><div class="codebox"><pre><code>/opt/lantiq/UGW-5.4-SW/toolchain-mips_r2_gcc-4.3.3+cs_uClibc-0.9.30.1/usr/bin/../lib/gcc/mips-openwrt-linux-uclibc/4.3.3/../../../../mips-openwrt-linux-uclibc/sys-include
/home/cjalee/vr9/KPN/311TUE8b1/build/sysapps/libccc/core/include</code></pre></div><p>In /etc/init.d/rcS, it mounts /mnt/preNAND/extfs.img as /mnt/NAND, then copies /mnt/NAND/etc/* to /etc.</p><p>I&#039;ll probably manage to rebuild a modified squashfs extfs.img, but how to write it to preNAND ? </p><p>Output from `mount`:</p><div class="codebox"><pre><code>rootfs on / type rootfs (rw)
/dev/root on / type yaffs2 (ro,relatime)
/proc on /proc type proc (rw,relatime)
/sys on /sys type sysfs (rw,relatime)
/proc/bus/usb on /proc/bus/usb type usbfs (rw,relatime)
tmpfs on /etc type tmpfs (rw,relatime)
none on /tmp type tmpfs (rw,relatime)
tmpfs on /var type tmpfs (rw,relatime)
tmpfs on /e-data type tmpfs (rw,relatime)
tmpfs on /i-data type tmpfs (rw,relatime)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
mdev on /dev/mdev type tmpfs (rw,relatime)
/dev/mtdblock4 on /mnt/Config type yaffs2 (rw,relatime)
/dev/mtdblock3 on /mnt/firmware type yaffs2 (rw,relatime)
/dev/loop0 on /mnt/NAND type squashfs (ro,relatime)
/dev/loop0 on /usr type squashfs (ro,relatime)
/dev/loop0 on /root type squashfs (ro,relatime)
/dev/loop0 on /home type squashfs (ro,relatime)
/dev/sda1 on /var/mnt/usb/sda1 type vfat (rw,relatime,uid=99,gid=99,fmask=0000,dmask=0000,allow_utime=0022,codepage=cp437,iocharset=utf8,shortname=mixed,errors=remount-ro)
/dev/sda1 on /e-data/USB_USB_DISK_20_PMAP3A506489_1 type vfat (rw,relatime,uid=99,gid=99,fmask=0000,dmask=0000,allow_utime=0022,codepage=cp437,iocharset=utf8,shortname=mixed,errors=remount-ro)</code></pre></div><p>Now, I have mounted /dev/mtdblock1 (auto using rw/yaffs) and it seems to be the partition where the preNAND/extfs.img is stored. </p><p>So my questions:</p><p>1. Could I just overwrite this img file on /dev/mtdblock1?<br />2. Do I need to mount it as yaffs or yaffs2? (both seem to work)<br />3. Is there a way to make a backup of the current firmware so that I can restore it if I brick it? Highly likely ;)<br />4. How can I block firmware pushes by my ISP? How are they distributed? See below for open ports.</p><p>TIA!</p><div class="codebox"><pre><code># netstat -len
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 0.0.0.0:18888           0.0.0.0:*               LISTEN      
tcp        0      0 192.168.1.1:139         0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:10000           0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:2000            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:10001           0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:2001            0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:21              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:53              0.0.0.0:*               LISTEN      
tcp        0      0 0.0.0.0:7676            0.0.0.0:*               LISTEN      
tcp        0      0 192.168.1.1:445         0.0.0.0:*               LISTEN      
tcp        0      0 :::37964                :::*                    LISTEN      
tcp        0      0 :::9999                 :::*                    LISTEN      
tcp        0      0 :::80                   :::*                    LISTEN      
tcp        0      0 :::53                   :::*                    LISTEN      
tcp        0      0 :::22                   :::*                    LISTEN      
tcp        0      0 :::23                   :::*                    LISTEN      
tcp        0      0 :::443                  :::*                    LISTEN      
udp        0      0 0.0.0.0:2709            0.0.0.0:*                           
udp        0      0 0.0.0.0:2710            0.0.0.0:*                           
udp        0      0 0.0.0.0:161             0.0.0.0:*                           
udp        0      0 0.0.0.0:53              0.0.0.0:*                           
udp        0      0 0.0.0.0:67              0.0.0.0:*                           
udp   115240      0 0.0.0.0:1900            0.0.0.0:*                           
udp        0      0 0.0.0.0:7677            0.0.0.0:*                           
udp        0      0 :::53                   :::*                                
raw        0      0 0.0.0.0:2               0.0.0.0:*               7           
Active UNIX domain sockets (only servers)
Proto RefCnt Flags       Type       State         I-Node Path
unix  2      [ ACC ]     STREAM     LISTENING       1792 /var/syslog
unix  2      [ ACC ]     STREAM     LISTENING       1636 /var/run/celld.sock</code></pre></div>											<p class="post-edited">(Last edited by <strong>gwillem</strong> on 4 Feb 2017, 14:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351420">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						8 Feb 2017, 12:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>which (I assume) modify and write config.rom to the NAND flash. However, I can&#039;t find how it does so.</p></blockquote></div><p>I wrote something on that in post #36<br /></p><div class="quotebox"><blockquote><p>1. Could I just overwrite this img file on /dev/mtdblock1?</p></blockquote></div><p>Theoretically, yes. But if you make a mistake your router will be bricked. (Not a very big deal, the box can boot from the serial port, so this way you can always install OpenWRT, or rewrite the mtdblock)<br /></p><div class="quotebox"><blockquote><p>2. Do I need to mount it as yaffs or yaffs2? (both seem to work)</p></blockquote></div><p>Use yaffs2. The difference is in the way the NAND is treated. <a href="https://en.wikipedia.org/wiki/YAFFS#YAFFS2">Wiki</a>. While yaffs1 if fine for reading, writing might (partitally) kill the NAND.<br /></p><div class="quotebox"><blockquote><p>3. Is there a way to make a backup of the current firmware so that I can restore it if I brick it? Highly likely <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>As I wrote in port #36, you can dump /dev/hnand. I never tried to restore it.<br /></p><div class="quotebox"><blockquote><p>4. How can I block firmware pushes by my ISP? How are they distributed? See below for open ports.</p></blockquote></div><p>They probably use the <a href="https://en.wikipedia.org/wiki/TR-069">TR-069</a> protocol, which normally use port 7547. Don&#039;t see that in your list. You can use &#039;netstat -lnp&#039; to see the deamon names either. I&#039;d simply kill everything which has an unknown purpose.</p><p>BTW, instead of changing the rootfs, you can also install add-ons. I managed to install optware on an usb stick. (At least, I *think* it was optware. It&#039;s some time ago, my box is running OpenWRT now). The trick is in /mnt/Config/user_startup_parameters.sh, which is called at boot, by rcS. At that stage USB is not yet up, but there is some script in /etc/&lt;hotplug?&gt;/ responsible for mounting the stick. You can inject code to call a script on the stick.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=47957&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=47957&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>