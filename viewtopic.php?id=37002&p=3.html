<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> HAME MPR-A1 - Small and cheap router with built-in battery</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 May 2015 and 2 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 28</div><nav><ul><li><a href="viewtopic.php%3Fid=37002&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=37002&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=37002&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=37002&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37002&amp;p=28.html">28</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p186329">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">arpunk</div>
					<div class="post-datetime">
						17 Dec 2012, 23:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>I also used mac80211 patch from <a href="http://heffer.fedorapeople.org/openwrt/packages/mac80211/patches/630-rt2x00-support-rt5350.patch">http://heffer.fedorapeople.org/openwrt/ … 5350.patch</a></p></blockquote></div><p>Can you test with this patch (<a href="http://pastebin.com/hc8NxHbL">http://pastebin.com/hc8NxHbL</a>) and r34270 and see if wireless works for you?</p><p>I got wireless working in that revision and with that patch. Newer revision upgraded compat-wireless package and the patch didn&#039;t work anymore.</p><p>The only difference in our working boards is the flash and the ram. I checked your pcb layout (MPR-L8) with mine (a1 v1.4 so it seems) and they are the same.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186333">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						18 Dec 2012, 00:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arpunk wrote:</cite><blockquote><div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>I also used mac80211 patch from <a href="http://heffer.fedorapeople.org/openwrt/packages/mac80211/patches/630-rt2x00-support-rt5350.patch">http://heffer.fedorapeople.org/openwrt/ … 5350.patch</a></p></blockquote></div><p>Can you test with this patch (<a href="http://pastebin.com/hc8NxHbL">http://pastebin.com/hc8NxHbL</a>) and r34270 and see if wireless works for you?</p><p>I got wireless working in that revision and with that patch. Newer revision upgraded compat-wireless package and the patch didn&#039;t work anymore.</p><p>The only difference in our working boards is the flash and the ram. I checked your pcb layout (MPR-L8) with mine (a1 v1.4 so it seems) and they are the same.</p></blockquote></div><p>Ok, please allow me some time for that, I will checkout this rev aside from current trunk, and I have a slow machine...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186334">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">arpunk</div>
					<div class="post-datetime">
						18 Dec 2012, 00:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>Ok, please allow me some time for that, I will checkout this rev aside from current trunk, and I have a slow machine...</p></blockquote></div><p>Sure, in the meantime I&#039;ll try to get my board working with the AT25DF321 flash I have using this patch:</p><div class="codebox"><pre><code>--- a/drivers/mtd/devices/m25p80.c
+++ b/drivers/mtd/devices/m25p80.c
@@ -633,6 +633,7 @@ static const struct spi_device_id m25p_i
     { &quot;at25fs040&quot;,  INFO(0x1f6604, 0, 64 * 1024,   8, SECT_4K) },
 
     { &quot;at25df041a&quot;, INFO(0x1f4401, 0, 64 * 1024,   8, SECT_4K) },
+    { &quot;at25df321&quot;,  INFO(0x1f4700, 0, 64 * 1024,  64, SECT_4K) },
     { &quot;at25df321a&quot;, INFO(0x1f4701, 0, 64 * 1024,  64, SECT_4K) },
     { &quot;at25df641&quot;,  INFO(0x1f4800, 0, 64 * 1024, 128, SECT_4K) },
 </code></pre></div><p>Give me a few minutes and I&#039;ll tell you how it went.</p><p>Edit: No luck, log says:</p><div class="codebox"><pre><code>[    0.390000] ramips-spi ramips-spi.0: master is unqueued, this is deprecated
[    0.410000] m25p80 spi0.0: unrecognized JEDEC id 7f9d46
...
[    0.470000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(0,0): error -6
[    0.490000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    0.500000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></pre></div>											<p class="post-edited">(Last edited by <strong>arpunk</strong> on 18 Dec 2012, 00:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186357">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						18 Dec 2012, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>I tried the patched r34270: no luck, no wireless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I have a wlan0 interface, but no IP assigned to it. If I do, then I don&#039;t see any incoming data, though it accepts pings, and the OpenWrt SSID doesn&#039;t show on my PC:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# ifconfig wlan0
wlan0     Link encap:Ethernet  HWaddr 00:20:0C:06:35:A0  
          inet addr:192.168.0.1  Bcast:192.168.0.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:33 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32 
          RX bytes:0 (0.0 B)  TX bytes:6417 (6.2 KiB)</code></pre></div><p>As for your Flash problem, are you sure it is an Atmel chip? What is written onto the package? They may well have patched an entry in the JEDEC table... I see nothing wrong with your code and by looking at the AT25DF321 datasheet.</p>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 18 Dec 2012, 09:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186360">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						18 Dec 2012, 11:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>I tried the patched r34270: no luck, no wireless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I have a wlan0 interface, but no IP assigned to it. If I do, then I don&#039;t see any incoming data, though it accepts pings, and the OpenWrt SSID doesn&#039;t show on my PC:</p></blockquote></div><p>Same here. Maybe we need someone more knowledgable than me (like Daniel Golle) look over the patch for the latest revision <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>As for your Flash problem, are you sure it is an Atmel chip? What is written onto the package? They may well have patched an entry in the JEDEC table... I see nothing wrong with your code and by looking at the AT25DF321 datasheet.</p></blockquote></div><p>Well the JEDEC ID of his chip is<br /></p><div class="codebox"><pre><code>spi device id: 7f 9d 46 7f 9d (9d467f9d)</code></pre></div><p>So basically it&#039;s not 0x1f4700 (like in your patch) but 0x7f9d46. I have no idea what chip this actually is. So you&#039;d definitely need to look what&#039;s written on the package. The OEM firmware however does seem to identify the chip as AT25DF321 and I guess that your chip is either that or is compatible to it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186363">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						18 Dec 2012, 11:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heffer wrote:</cite><blockquote><div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>I tried the patched r34270: no luck, no wireless <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I have a wlan0 interface, but no IP assigned to it. If I do, then I don&#039;t see any incoming data, though it accepts pings, and the OpenWrt SSID doesn&#039;t show on my PC:</p></blockquote></div><p>Same here. Maybe we need someone more knowledgable than me (like Daniel Golle) look over the patch for the latest revision <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>I tried to take a working wireless config from some other TP-Link TL-WR703N routers I have, to no avail <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Wireless was working with the stock firmware, but not without any of the OpenWrt-based firmware I tried, including p1vo&#039;s.</p><p>Maybe there is an &quot;RF power-switch&quot; we are missing?</p><br /><br /><div class="quotebox"><cite>Heffer wrote:</cite><blockquote><div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>As for your Flash problem, are you sure it is an Atmel chip? What is written onto the package? They may well have patched an entry in the JEDEC table... I see nothing wrong with your code and by looking at the AT25DF321 datasheet.</p></blockquote></div><p>Well the JEDEC ID of his chip is<br /></p><div class="codebox"><pre><code>spi device id: 7f 9d 46 7f 9d (9d467f9d)</code></pre></div><p>So basically it&#039;s not 0x1f4700 (like in your patch) but 0x7f9d46. I have no idea what chip this actually is. So you&#039;d definitely need to look what&#039;s written on the package. The OEM firmware however does seem to identify the chip as AT25DF321 and I guess that your chip is either that or is compatible to it.</p></blockquote></div><p>As the AT25DF321 is the default chip used in Ralink&#039;s SDK, they may well have applied a dirty patch to the JEDEC table, see the typo in the bootlog <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />:<br /></p><div class="codebox"><pre><code>deice id : 7f 9d 46 7f 9d (9d467f9d)
Warning: un-recognized chip ID, please update SPI driver!
AT25DF321(1f 47000000) (4096 Kbytes)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186392">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">123serge123</div>
					<div class="post-datetime">
						18 Dec 2012, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arpunk wrote:</cite><blockquote><p>Could you share at least what bits did you add for WLAN to work?</p></blockquote></div><p>rt5350 use different rf_vals table for 20MHz/40MHz external clock generator. For details see last patches for rt3352 support. And keep in mind that 20MHz/40MHz external clock generator have no direct relation to HT20/HT40 channel.I&#039;ve added support for rt3352 &amp; rt5350 by myself so my current soure tree differs too much from trunk to create clear patch quickly.<br /></p><div class="quotebox"><cite>arpunk wrote:</cite><blockquote><p> How did you corrected reset_fe?</p></blockquote></div><p>As I said it looks like:</p><div class="codebox"><pre><code>--- devices.c.orig      2012-12-18 20:32:27.000000000 +0600
+++ devices.c   2012-12-18 20:33:53.000000000 +0600
@@ -116,7 +116,7 @@
 
 static void rt305x_fe_reset(void)
 {
-       rt305x_sysc_wr(RT305X_RESET_FE, SYSC_REG_RESET_CTRL);
+       rt305x_sysc_wr(RT305X_RESET_FE | (soc_is_rt5350() ? RT305X_RESET_ESW : 0), SYSC_REG_RESET_CTRL);
        rt305x_sysc_wr(0, SYSC_REG_RESET_CTRL);
 }</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186399">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						18 Dec 2012, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>I am using latest trunk (r34763), so I am using compat-wireless-2012-12-06 and the mac80211 package already contains these 2 patches:<br /><a href="http://patchwork.openwrt.org/patch/2883/">http://patchwork.openwrt.org/patch/2883/</a> =&gt; 610-rt2x00-fix-rt3352-ext-pa.patch<br /><a href="http://patchwork.openwrt.org/patch/2901/">http://patchwork.openwrt.org/patch/2901/</a> =&gt;&nbsp; 611-rt2x00-rf_vals-rt3352-xtal20.patch</p><p>I also applied &quot;630-rt2x00-support-rt5350.patch&quot; from <a href="http://heffer.fedorapeople.org/openwrt/packages/mac80211/patches/630-rt2x00-support-rt5350.patch.">http://heffer.fedorapeople.org/openwrt/ … 350.patch.</a></p><div class="codebox"><pre><code>root@OpenWrt:/lib/firmware# hexdump /dev/mtdblock2                              
0000000 5350 0100 2000 060c a035 ffff ffff ffff                                 
0000010 ffff ffff ffff ffff ffff ffff ffff ffff                                 
0000020 ffff ffff ffff ffff 419c 267c 954e 419c                                 
0000030 267c 974e ff11 0020 ffff 011d 7755 aaa8                                 
0000040 888c ffff 000c 0000 0000 0000 0000 ffff                                 
0000050 ffff 0d0d 0c0c 0b0c 0b0b 0b0b 0b0b 0b0b                                 
0000060 ffff ffff ffff ffff ffff ffff ffff ffff                                 
0000070 ffff ffff ffff 8003 ffff ffff ffff ffff                                 
0000080 ffff ffff ffff ffff ffff ffff ffff ffff                                 
*                                                                               
00000d0 ffff ffff ffff ffff ffff ffff ffff 6666                                 
00000e0 aacc 6688 aacc 6688 aacc 6688 aacc 6688                                 
00000f0 ffff ffff ffff ffff ffff ffff ffff ffff                                 
*                                                                               
0000120 0981 131c 154f 154f 1d03 1d07 ffff ffff                                 
0000130 ffff ffff ffff ffff ffff ffff ffff ffff                                 
*                                                                               
0010000</code></pre></div><p>From what I can see, my physical crystal is a 40MHz, but I am not sure if this is the one that the software is detecting or not.</p><p>I removed the definition for the red LED in my &quot;mach-mpr-a1.c&quot;&nbsp; file and at least I don&#039;t have the -16 (-EBUSY) error any more, but LED are still not working <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I need to find an easy way to test the reset button (how to do it using debugfs?).</p><p>Switch is now working with your patch, thank you Serge!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186434">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">p1vo</div>
					<div class="post-datetime">
						19 Dec 2012, 01:52					</div>
				</div>
				<div class="post-content content">
					<p>So here there is Guys.. i dont have much time to polish it so hopefully we will do it together.</p><p><a href="http://www.pivo.neostrada.pl/hame-mpr-a1.patch">http://www.pivo.neostrada.pl/hame-mpr-a1.patch</a></p><br /><p>Regards and Marry Christmas <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186491">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">boyarshinov</div>
					<div class="post-datetime">
						19 Dec 2012, 15:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>123serge123 wrote:</cite><blockquote><p>rt5350 use different rf_vals table for 20MHz/40MHz external clock generator.</p></blockquote></div><p>thanks for the tip!</p><br /><p>with trunk(r34739) and these patches:</p><p><a href="http://heffer.fedorapeople.org/openwrt/packages/mac80211/patches/630-rt2x00-support-rt5350.patch">http://heffer.fedorapeople.org/openwrt/ … 5350.patch</a></p><p>631-rt2x00-rt5350-rf_vals.patch</p><div class="codebox"><pre><code>diff -urN a/drivers/net/wireless/rt2x00/rt2800lib.c b/drivers/net/wireless/rt2x00/rt2800lib.c
--- compat-wireless-2012-12-06/drivers/net/wireless/rt2x00/rt2800lib.c
+++ compat-wireless-2012-12-06.new/drivers/net/wireless/rt2x00/rt2800lib.c
@@ -5363,7 +5363,6 @@
            rt2x00_rf(rt2x00dev, RF3022) ||
            rt2x00_rf(rt2x00dev, RF3290) ||
            rt2x00_rf(rt2x00dev, RF3320) ||
-           rt2x00_rf(rt2x00dev, RF5350) ||
            rt2x00_rf(rt2x00dev, RF5360) ||
            rt2x00_rf(rt2x00dev, RF5370) ||
            rt2x00_rf(rt2x00dev, RF5372) ||
@@ -5371,7 +5370,8 @@
            rt2x00_rf(rt2x00dev, RF5392)) {
         spec-&gt;num_channels = 14;
         spec-&gt;channels = rf_vals_3x;
-    } else if (rt2x00_rf(rt2x00dev, RF3322)) {
+    } else if (rt2x00_rf(rt2x00dev, RF3322) ||
+           rt2x00_rf(rt2x00dev, RF5350)) {
         spec-&gt;num_channels = 14;
         if (spec-&gt;clk_is_20mhz)
             spec-&gt;channels = rf_vals_xtal20mhz_3x;</code></pre></div><p>wifi now works on my dir320nru/revb1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186493">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">123serge123</div>
					<div class="post-datetime">
						19 Dec 2012, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Please pay attention that register rf13 = 0x1f/0x9f for 20MHz/40MHz clock generator. My dir320b1 works too but it have 20MHz <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Full patch looks like<br /><a href="http://pastebin.com/q5hbehXv">http://pastebin.com/q5hbehXv</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186501">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						19 Dec 2012, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks serge! With that patch my WiFi finally works too!<br />I have adapted your patch to the current trunk and put it on my website at the usual location: <a href="http://heffer.fedorapeople.org/openwrt/packages/mac80211/patches/630-rt2x00-support-rt5350.patch">http://heffer.fedorapeople.org/openwrt/ … 5350.patch</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186506">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						19 Dec 2012, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>I confirm RT5350 radio now works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186563">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						20 Dec 2012, 13:29					</div>
				</div>
				<div class="post-content content">
					<p>serge, would you mind submitting the RT5350 patch for inclusion in trunk? You can take the patch I adapted from yours, no need to credit me (as you did all the work anyway <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186564">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						20 Dec 2012, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>I confirm that WiFi is working now with latest trunk and Heffer&#039;s last patch on my HAME MPR-A1-compatible MPR-L8 board.</p><p>I found out that the &quot;RT305X_GPIO_MODE_JTAG&quot; flag in the&nbsp; rt305x_gpio_init() call is required to have LEDs working, so now II have both blue and red LED working, as well as the reset button and the Ethernet switch.</p><p>However, USB is not working any more, despite that I have both GPIO 7 and 12 set to 1: the attached devices is powered, but I don&#039;t see any attach/detach messages in log any more <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>BTW, can someone explain the role of GPIO12?</p><p><span class="bbu"><strong>EDIT:</strong></span> Never mind, I was missing kmod-usb2 <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /><br />I added it to the profile dependencies with kmod-usb-core and kmod-ledtrig-usbdev.</p><p>As for the GPIOs usage regarding USB:<br /></p><ul><li><p>GPIO7 controls USB power: when toggling, the device power toggles accordingly</p></li><li><p>it looks like GPIO12 is controlling the USB root hub power: when toggling, the device power is not modified, but you see connect/disconnect events in the kernel logs accordingly</p></li></ul>											<p class="post-edited">(Last edited by <strong>Squonk</strong> on 20 Dec 2012, 20:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186583">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">123serge123</div>
					<div class="post-datetime">
						20 Dec 2012, 17:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heffer wrote:</cite><blockquote><p>serge, would you mind submitting the RT5350 patch for inclusion in trunk? You can take the patch I adapted from yours, no need to credit me (as you did all the work anyway <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />).</p></blockquote></div><p>Thx, <a href="http://patchwork.openwrt.org/patch/3055/">WLAN</a> and <a href="http://patchwork.openwrt.org/patch/3056/">switch</a> patches are sent. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186628">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">Squonk</div>
					<div class="post-datetime">
						21 Dec 2012, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>@arpunk: IIRC, you have an MPR1-compatible board with 8MB Flash / 32 MB SDRAM... Could you post a link where to find it, please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186639">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">monotube</div>
					<div class="post-datetime">
						21 Dec 2012, 12:49					</div>
				</div>
				<div class="post-content content">
					<p>This seems to be sold under the brand Sanoxy WR-M3GU12 also, for example on Amazon for 4x the price. Manual: <a href="http://sanoxy.com/manuals/WR-M3GU12.pdf">http://sanoxy.com/manuals/WR-M3GU12.pdf</a></p><p>I would also be interested in a link for the 8MB Flash / 32 MB SDRAM version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186675">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">arteqw</div>
					<div class="post-datetime">
						21 Dec 2012, 19:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arpunk wrote:</cite><blockquote><p>There are different models for that same RT5350F 3G modem. I currently have one from Embedsys (EBS-PMA-W1) and another from other factory (it isn&#039;t labeled at all, assuming a prototype).</p></blockquote></div><p>I hame EBS-PMA-W1 too. Could you post serial pinouts ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186677">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">arpunk</div>
					<div class="post-datetime">
						21 Dec 2012, 20:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arteqw wrote:</cite><blockquote><div class="quotebox"><cite>arpunk wrote:</cite><blockquote><p>There are different models for that same RT5350F 3G modem. I currently have one from Embedsys (EBS-PMA-W1) and another from other factory (it isn&#039;t labeled at all, assuming a prototype).</p></blockquote></div><p>I hame EBS-PMA-W1 too. Could you post serial pinouts ?</p></blockquote></div><p>Sure, the pinouts are (ethernet facing left):</p><p>1. ground<br />2. rx<br />3. tx<br />4. vcc</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186678">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">arpunk</div>
					<div class="post-datetime">
						21 Dec 2012, 20:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Squonk wrote:</cite><blockquote><p>@arpunk: IIRC, you have an MPR1-compatible board with 8MB Flash / 32 MB SDRAM... Could you post a link where to find it, please?</p></blockquote></div><p>Of course, I haven&#039;t got enought time but so far the switch does not work on those boards (Embedsys ESB-PMA-M1) but wireless *does* work, however I get random resets on those boards.</p><p>I managed to change the flash chip of my working board (a1-v1.4) but OpenWRT runs very very slow with the flash I changed (I changed the pm25lq032 flash with a en25q32b flash).</p><p>I&#039;ll post my findings later today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186744">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						22 Dec 2012, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been following this thread with interest, and have just ordered my device.&nbsp; In the 703N board layout thread, Squonk suggested that some manufacturer of this board might be willing to produce a custom, hacker-friendly version.&nbsp; I, too, would like to see a 2nd usb port, 8mb flash, 32mb ram, and gpios brought out (micro-sd desireable but less important to me).</p><p>I would like to see something like this for a gpio header:<br /></p><div class="codebox"><pre><code>  1 = 3V3    2 = 5V
  3 = GPIO0  4 = GPIO4
  5 = GPIO1  6 = GND
  7 = GPIO2  8 = TX
  9 = GPIO3  10= RX
 11 = GND    12= GND
 13 = i2cSCL 14= TX2
 15 = i2cSDA 16= RX2</code></pre></div><p>This is similar to the Raspberry Pi header, with fewer pins, and no N/Cs.&nbsp; Pins 1, 2, 3, 5, 6, 8, 9 are the same.&nbsp; A second serial TX and RX would be helpful, and I2C.&nbsp; There are three 0V pins to make specific 3-pin connections easy for TX/RX, TX2/RX2, I2C.</p>											<p class="post-edited">(Last edited by <strong>lizby</strong> on 22 Dec 2012, 18:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186748">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">swatfa</div>
					<div class="post-datetime">
						22 Dec 2012, 20:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lizby wrote:</cite><blockquote><p>I&#039;ve been following this thread with interest, and have just ordered my device.&nbsp; In the 703N board layout thread, Squonk suggested that some manufacturer of this board might be willing to produce a custom, hacker-friendly version.&nbsp; I, too, would like to see a 2nd usb port, 8mb flash, 32mb ram, and gpios brought out (micro-sd desireable but less important to me).</p><p>I would like to see something like this for a gpio header:<br /></p><div class="codebox"><pre><code>  1 = 3V3    2 = 5V
  3 = GPIO0  4 = GPIO4
  5 = GPIO1  6 = GND
  7 = GPIO2  8 = TX
  9 = GPIO3  10= RX
 11 = GND    12= GND
 13 = i2cSCL 14= TX2
 15 = i2cSDA 16= RX2</code></pre></div><p>This is similar to the Raspberry Pi header, with fewer pins, and no N/Cs.&nbsp; Pins 1, 2, 3, 5, 6, 8, 9 are the same.&nbsp; A second serial TX and RX would be helpful, and I2C.&nbsp; There are three 0V pins to make specific 3-pin connections easy for TX/RX, TX2/RX2, I2C.</p></blockquote></div><p>My Company is producing the 32mb/8mb version of this device. We will start shipping them in February. With Openwrt built in.<br />This is our own prototype Image shown below. <br /><span class="postimg"><img src="http://i48.tinypic.com/5kob2b.png" alt="PunBB bbcode test" /></span><br /><span class="postimg"><img src="http://i48.tinypic.com/22g8dc.jpg" alt="PunBB bbcode test" /></span><br /><span class="postimg"><img src="http://i48.tinypic.com/347fadj.jpg" alt="PunBB bbcode test" /></span></p><p>We have not made any changes to GPIO. But i might consider it. What advantages from an openwrt perspective would there be in having additional GPIOs besides sd flash?</p>											<p class="post-edited">(Last edited by <strong>swatfa</strong> on 22 Dec 2012, 21:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186749">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">denovo</div>
					<div class="post-datetime">
						22 Dec 2012, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>swatfa wrote:</cite><blockquote><p>My Company is producing the 32mb/8mb version of this device. We will start shipping them in February. With Openwrt built in.</p></blockquote></div><p>Does this mean there is (or soon will be) a working OpenWRT image available?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186750">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">swatfa</div>
					<div class="post-datetime">
						22 Dec 2012, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>denovo wrote:</cite><blockquote><div class="quotebox"><cite>swatfa wrote:</cite><blockquote><p>My Company is producing the 32mb/8mb version of this device. We will start shipping them in February. With Openwrt built in.</p></blockquote></div><p>Does this mean there is (or soon will be) a working OpenWRT image available?</p></blockquote></div><p>There is a &quot;somewhat&quot; working image available, at this stage the developer is ironing out any bugs and making sure that everything runs smoothly. Than they need to load some popular packages e.g. cloud sharing, webcam support, airplay support, etc than we would be ready for mass production and shipment</p>											<p class="post-edited">(Last edited by <strong>swatfa</strong> on 22 Dec 2012, 21:08)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 28</div><nav><ul><li><a href="viewtopic.php%3Fid=37002&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=37002&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=37002&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=37002&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37002&amp;p=28.html">28</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>