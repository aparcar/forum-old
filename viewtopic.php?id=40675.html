<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How do I restart wireless interface from command line?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p184010">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ymhee_bcex</div>
					<div class="post-datetime">
						22 Nov 2012, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Wifi on my router dies every few days. Apparently, it&#039;s a known problem - at least many people complain about it. The simple solution is to disable WiFi, and then enable it again - keeps it going for another few days. So, I want to put this in cron and do it every night, rather than wait until it dies and do it manually. ifconfig shows me that there is wlan0 interface:<br /></p><div class="codebox"><pre><code>wlan0     Link encap:Ethernet  HWaddr 10:xx:xx
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:3352 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4858 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:32
          RX bytes:509676 (497.7 KiB)  TX bytes:4598806 (4.3 MiB)</code></pre></div><p>However, running ifdown wlan0 returns an error:<br /></p><div class="codebox"><pre><code># ifdown wlan0
Interface wlan0 not found</code></pre></div><p>Is there a different name that I should use?</p><p>Router Model is Buffalo WZR-HP-G300NH2 and I am running the latest Firmware (Attitude Adjustment 12.09-beta2 / LuCI 0.11 Branch (0.11+svn9402)</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>ymhee_bcex</strong> on 22 Nov 2012, 21:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184011">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						22 Nov 2012, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>just &quot;wifi&quot;</p><p>easy hah !XDD</p><br /><p>Guys, take some times to read the documents in wiki.<br /><a href="http://wiki.openwrt.org/doc/uci/wireless">http://wiki.openwrt.org/doc/uci/wireless</a></p>											<p class="post-edited">(Last edited by <strong>johan666</strong> on 22 Nov 2012, 21:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184013">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ymhee_bcex</div>
					<div class="post-datetime">
						22 Nov 2012, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>Tried that...<br /></p><div class="codebox"><pre><code># ifdown wifi
Interface wifi not found</code></pre></div><p>Also tried radio0.network1 (I gleaned that from tracing what LuCi sends to the server), radio0 (which is the wifi-device value in /etc/config/wireless), and buffalo (which is my SSID).</p><p>I wish it were easy... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />And of course, I read wiki before I asked...</p>											<p class="post-edited">(Last edited by <strong>ymhee_bcex</strong> on 22 Nov 2012, 21:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184016">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Nov 2012, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>Just &quot;wifi&quot; command!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184018">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ymhee_bcex</div>
					<div class="post-datetime">
						22 Nov 2012, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. And yes, I missed the section on start/stop in wiki (actually - I saw it but I thought it applied to UCI and now obsolete).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184294">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ymhee_bcex</div>
					<div class="post-datetime">
						25 Nov 2012, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>At the risk of looking complete idiot... how do I redirect wifi&#039;s output? When I run it from command line, I get<br /></p><div class="codebox"><pre><code>Configuration file: /var/run/hostapd-phy0.conf
Using interface wlan0 with hwaddr 10:6f:xx:xx and ssid &quot;myssid&quot;</code></pre></div><p>However, if I redirect </p><div class="codebox"><pre><code>wifi &gt;wifi.txt</code></pre></div><p> I get an empty file wifi.txt and nothing on the screen, either.</p><p>I <em>do</em> see a line in syslog </p><div class="codebox"><pre><code>crond[4799]: crond: USER root pid 32110 cmd wifi</code></pre></div><p> but would be great to see some confirmation that the program completed successfully</p>											<p class="post-edited">(Last edited by <strong>ymhee_bcex</strong> on 25 Nov 2012, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184748">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">R1D2</div>
					<div class="post-datetime">
						30 Nov 2012, 12:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ymhee_bcex wrote:</cite><blockquote><p>I <em>do</em> see a line in syslog </p><div class="codebox"><pre><code>crond[4799]: crond: USER root pid 32110 cmd wifi</code></pre></div><p> but would be great to see some confirmation that the program completed successfully</p></blockquote></div><p>Reason for the empty file is that the startup msg comes from a script or program triggered by switching the IF up, not from the &#039;wifi&#039; script itself. But you could use uci to check for the IF state afterwards:</p><div class="codebox"><pre><code>uci -p /tmp/state get wireless.@wifi-iface[0].up</code></pre></div><p>returns 1 if the IF is up and running.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>