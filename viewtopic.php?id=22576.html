<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wish List : Buffolo WHR-G300N</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p97468">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ipiranha</div>
					<div class="post-datetime">
						16 Nov 2009, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>Buffolo WHR-G300N </p><p>CPU : Ralink RT3052F , 384 MHZ<br />RAM : 32MB<br />FLASH : 4MB<br />Price : Low price (High Perfomance CPU ,&nbsp; Mass memory ^^ )</p><br /><p><span class="postimg"><img src="http://114.141.255.46/openwrt/whr-g300n.jpg" alt="http://114.141.255.46/openwrt/whr-g300n.jpg" /></span><br />serial speed : 57600 , 8, 1, n </p><br /><p>Buffolo GPL Infomation : <a href="http://114.141.255.46/openwrt/WHR-G300N_Manual_web.pdf">http://114.141.255.46/openwrt/WHR-G300N_Manual_web.pdf</a>&nbsp; / Page : 46</p><p>######################################################<br />&quot;For each individual product and revision, please send one individually packaged self addressed padded CD<br />shipping envelope, containing a blank CD-R to the following address:<br />Buffalo Technology USA Inc.<br />11100 Metric Blvd, Suite 750<br />Austin, TX 78758<br />Attn. GPL Department<br />Within the envelope containing the self addressed padded CD shipping envelope, please include a bank draft<br />or money order for $20 (USD) (Made out to: Buffalo Technology) to cover our handling fee, postage and CD<br />preparation. The CD-R should have the name of the product and revision number clearly written on the<br />actual CD-R (not on the insert).&quot;<br />######################################################</p><p>~ ORZ ... (I live in South Korea.)</p><br /><p>OpenWRT : not yet support<br />DD-WRT&nbsp; &nbsp;: support </p><p>=============================<br />OpenWRT trunk svn source has ramips_rt305x code.. <br />( *but, Ethernet Not recognized. )</p><p>My Work list.</p><p>###########################################<br />1. How to Kernel Build<br />###########################################<br /># svn co svn://svn.openwrt.org/openwrt/trunk/ -r18229</p><p> ( copy my .config file to trunk root directory.)</p><p># cd trunk<br /># wget <a href="http://114.141.255.46/.config">http://114.141.255.46/.config</a><br /># make<br /># cd bin <br /># ls -al openwrt-ramips-uImage-initramfs.bin</p><p>1. firmware : <a href="http://114.141.255.46/openwrt/openwrt-ramips-uImage-initramfs.bin">http://114.141.255.46/openwrt/openwrt-r â€¦ tramfs.bin</a><br />2. tftp server : <a href="http://114.141.255.46/openwrt/tftpsrv.exe">http://114.141.255.46/openwrt/tftpsrv.exe</a></p><br /><p>###########################################<br />2. Boot WHR-G300N : use OpenWRT firmware.<br />###########################################<br />2.1) connect serial cable&nbsp; <br />2.2) ctrl + c&nbsp; , and press&nbsp; &#039;1&#039; </p><br /><p>Please choose the operation: <br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP. <br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP. <br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP. </p><p>You choosed 1<br /> Please Input new ones /or Ctrl-C to discard<br />&nbsp; &nbsp; Input device IP (192.168.11.1) ==: 192.168.11.1 (enter)<br />&nbsp; &nbsp; Input server IP (192.168.11.2) ==: 192.168.11.2 (enter)<br />&nbsp; &nbsp; Input Linux Kernel filename (firmware.ram) ==: openwrt-ramips-uImage-initramfs.bin (enter)</p><br /><br /><p>###########################################<br />3. Boot messages<br />###########################################</p><br /><p>============================================ <br />Ralink UBoot Version: 3.1<br />-------------------------------------------- <br />ASIC 3052_MP2 (MAC to GigaMAC Mode)<br />DRAM COMPONENT: 256Mbits <br />DRAM BUS: 32BIT <br />Total memory: 64 MBytes<br />Date:Aug 26 2008&nbsp; Time:13:08:44<br />============================================ <br />icache: sets:256, ways:4, linesz:32 ,total:32768<br />dcache: sets:128, ways:4, linesz:32 ,total:16384 </p><p> ##### The CPU freq = 384 MHZ #### </p><p> SDRAM bus set to 32 bit <br /> SDRAM size =32 Mbytes</p><p>Please choose the operation: <br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP. <br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP. <br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP. </p><p>You choosed 1<br />Net:&nbsp; &nbsp;<br /> eth_register&nbsp; <br />Eth0 (10/100-M)<br /> enetvar=ethaddr,Eth addr:00:AA:BB:CC:DD:19<br /> 00:AA:BB:CC:DD:19:<br /> eth_current-&gt;name = Eth0 (10/100-M)<br />&nbsp; <br />1: System Load Linux to SDRAM via TFTP. <br /> Please Input new ones /or Ctrl-C to discard<br />&nbsp; &nbsp; Input device IP (192.168.11.1) ==:<br />&nbsp; &nbsp; Input server IP (192.168.11.2) ==:<br />&nbsp; &nbsp; Input Linux Kernel filename (firmware.ram) ==:<br /> netboot_common, argc= 3 <br /> *************buf = 0x81fcb9e0<br /> **********NexTxPacket = 81fe3ac0<br /> NetTxPacket = 0x81FE3AC0 <br /> NetRxPackets[0] = 0x81FE40C0<br /> NetRxPackets[1] = 0x81FE46C0<br /> NetRxPackets[2] = 0x81FE4CC0<br /> NetRxPackets[3] = 0x81FE52C0<br /> NetRxPackets[4] = 0x81FE58C0<br /> NetRxPackets[5] = 0x81FE5EC0<br /> NetRxPackets[6] = 0x81FE64C0<br /> NetRxPackets[7] = 0x81FE6AC0<br /> NetRxPackets[8] = 0x81FE70C0<br /> NetRxPackets[9] = 0x81FE76C0<br /> NetRxPackets[10] = 0x81FE7CC0<br /> NetRxPackets[11] = 0x81FE82C0<br /> NetRxPackets[12] = 0x81FE88C0<br /> NetRxPackets[13] = 0x81FE8EC0<br /> NetRxPackets[14] = 0x81FE94C0<br /> NetRxPackets[15] = 0x81FE9AC0<br /> NetRxPackets[16] = 0x81FEA0C0<br /> NetRxPackets[17] = 0x81FEA6C0<br /> NetRxPackets[18] = 0x81FEACC0<br /> NetRxPackets[19] = 0x81FEB2C0<br /> KSEG1ADDR(NetTxPacket) = 0xA1FE3AC0 <br /> NetLoop,call eth_halt ! <br /> NetLoop,call eth_init ! <br />Trying Eth0 (10/100-M)<br /> Waitting for RX_DMA_BUSY status Start... done<br /> Mac to giga Mac mode&nbsp; <br /> rx_ring = A1FCBE00, tx_ring0 = A1FCBCC0<br /> Header Payload scatter function is Disable !! <br /> RT2880_PDMA_GLO_CFG=00000020 <br /> ************************************************* <br /> RX_CALC_IDX0=19 <br /> RX_DRX_IDX0 = 0 <br /> ************************************************* <br /> ETH_STATE_ACTIVE!! <br />Using Eth0 (10/100-M) device<br />TFTP from server 192.168.11.2; our IP address is 192.168.11.1<br />Filename &#039;firmware.ram&#039;.<br /> TIMEOUT_COUNT=10,Load address: 0x80800000<br />Loading: Got ARP REPLY, set server/gtwy eth addr (00:1a:80:d2:d8:36)<br />Got it<br />#<br /> first block received&nbsp; <br />################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #############################<br />done<br />Bytes transferred = 2141351 (20aca7 hex)<br />NetBootFileXferSize= 0020aca7<br />Automatic boot of image at addr 0x80800000 ...<br />## Booting image at 80800000 ...<br />&nbsp; &nbsp;Image Name:&nbsp; &nbsp;MIPS OpenWrt Linux-2.6.30.9<br />&nbsp; &nbsp;Created:&nbsp; &nbsp; &nbsp; 2009-11-16&nbsp; 14:25:46 UTC</p><p> System Control Status = 0x20440000 <br />&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)<br />&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 2141287 Bytes =&nbsp; 2 MB<br />&nbsp; &nbsp;Load Address: 80000000<br />&nbsp; &nbsp;Entry Point:&nbsp; 80000000<br />&nbsp; &nbsp;Verifying Checksum ... OK<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80000000) ...<br />## Giving linux memsize in MB, 32</p><p>Starting kernel ...</p><p>Linux version 2.6.30.9 (dev@localhost) (gcc version 4.1.2) #1 Mon Nov 16 23:25:41 KST 2009<br />console [early0] enabled<br />CPU revision is: 0001964c (MIPS 24Kc)<br />Ralink RT3052&nbsp; &nbsp;id:1 rev:2 running at 384.00 MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS1,57600 rootfstype=squashfs,jffs2<br />Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes<br />Writing ErrCtl register=000781cf<br />Readback ErrCtl register=000781cf<br />NR_IRQS:48<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />console handover: boot [early0] -&gt; real [ttyS1]<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 28872k/32768k available (1702k kernel code, 3896k reserved, 360k data, 1460k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Calibrating delay loop... 255.59 BogoMIPS (lpj=1277952)<br />Mount-cache hash table entries: 512<br />net_namespace: 528 bytes<br />NET: Registered protocol family 16<br />MIPS: machine is Generic Ralink board<br />bio: create slab &lt;bio-0&gt; at 0<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ? 2001-2006 Red Hat, Inc.<br />msgmni has been set to 56<br />alg: No test for lzma (lzma-generic)<br />alg: No test for stdrng (krng)<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A<br />serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 1460k freed<br />- preinit -<br />Press CTRL-C for failsafe</p><p>Please press Enter to activate this console. PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />NET: Registered protocol family 24<br />nf_conntrack version 0.5.0 (512 buckets, 2048 max)</p><p>BusyBox v1.14.4 (2009-11-16 23:04:06 KST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r18229) ------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/# </p><br /><p>root@OpenWrt:/# cat /proc/cpuinfo <br />system type&nbsp; &nbsp; &nbsp; &nbsp; : Ralink RT3052&nbsp; &nbsp;id:1 rev:2<br />machine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Generic Ralink board<br />processor&nbsp; &nbsp; &nbsp; &nbsp; : 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; : MIPS 24Kc V4.12<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; : 255.59<br />wait instruction&nbsp; &nbsp; : yes<br />microsecond timers&nbsp; &nbsp; : yes<br />tlb_entries&nbsp; &nbsp; &nbsp; &nbsp; : 32<br />extra interrupt vector&nbsp; &nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; : yes, count: 4, address/irw mask: [0x0ffc, 0x0ffc, 0x0cb8, 0x0ffb]<br />ASEs implemented&nbsp; &nbsp; : mips16<br />shadow register sets&nbsp; &nbsp; : 1<br />core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; : not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; : not available</p><p>root@OpenWrt:/# cat /proc/meminfo <br />MemTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 30332 kB<br />MemFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;21336 kB<br />Buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Cached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5952 kB<br />SwapCached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Active:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3112 kB<br />Inactive:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3524 kB<br />Active(anon):&nbsp; &nbsp; &nbsp; &nbsp; 732 kB<br />Inactive(anon):&nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Active(file):&nbsp; &nbsp; &nbsp; &nbsp;2380 kB<br />Inactive(file):&nbsp; &nbsp; &nbsp;3524 kB<br />SwapTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />SwapFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Dirty:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Writeback:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />AnonPages:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;700 kB<br />Mapped:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 764 kB<br />Slab:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1356 kB<br />SReclaimable:&nbsp; &nbsp; &nbsp; &nbsp; 340 kB<br />SUnreclaim:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1016 kB<br />PageTables:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 132 kB<br />NFS_Unstable:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Bounce:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />WritebackTmp:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />CommitLimit:&nbsp; &nbsp; &nbsp; &nbsp;15164 kB<br />Committed_AS:&nbsp; &nbsp; &nbsp; &nbsp;2384 kB<br />VmallocTotal:&nbsp; &nbsp; 1048404 kB<br />VmallocUsed:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;336 kB<br />VmallocChunk:&nbsp; &nbsp; 1042232 kB<br />root@OpenWrt:/# </p><p>root@OpenWrt:/# ifconfig -a<br />lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>root@OpenWrt:/#<br />root@OpenWrt:/# df -kh<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.8M&nbsp; &nbsp; &nbsp;32.0K&nbsp; &nbsp; &nbsp;14.8M&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />root@OpenWrt:/#</p>											<p class="post-edited">(Last edited by <strong>ipiranha</strong> on 16 Nov 2009, 18:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97470">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ipiranha</div>
					<div class="post-datetime">
						16 Nov 2009, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>DIR-600 Vs WHR-G300N </p><p>Chipset : RT3050F Vs RT3052F<br />CPU Clock : 320 mhz Vs 384 mhz<br />Bogomips : 212.99&nbsp; Vs 255.59</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99844">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nuno.bett</div>
					<div class="post-datetime">
						5 Jan 2010, 19:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ipiranha wrote:</cite><blockquote><p>###########################################<br />2. Boot WHR-G300N : use OpenWRT firmware.<br />###########################################<br />2.1) connect serial cable&nbsp; <br />2.2) ctrl + c&nbsp; , and press&nbsp; &#039;1&#039;</p></blockquote></div><p>Hi, how did you connect serial cable?</p><p>Bests,</p><p>Nuno</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99845">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nuno.bett</div>
					<div class="post-datetime">
						5 Jan 2010, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>Again, if one just changes the filename from openwrt-ramips-uImage-initramfs.bin to&nbsp; firmware.ram is it still necessary to access the router serial console?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100439">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">anajavi</div>
					<div class="post-datetime">
						14 Jan 2010, 14:09					</div>
				</div>
				<div class="post-content content">
					<p>It seems to me that the ethernet registration in target/linux/ramips/files/arch/mips/ralink/rt305x/mach-whr-g300n.c is never run.</p><p>The platform setup in target/linux/ramips/files/arch/mips/ralink/common/setup.c is always running the generic setup:<br />enum ramips_mach_type ramips_mach = RAMIPS_MACH_GENERIC;</p><p>&nbsp; &nbsp; static int __init ramips_machine_setup(void)<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mips_machine_setup(ramips_mach);<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;return 0;<br />&nbsp; &nbsp; }</p><p>I&#039;m trying with hard coding the following in setup.c:<br />enum ramips_mach_type ramips_mach = RAMIPS_MACH_WHR_G300N;<br />That should make the machine specific initialization to run.</p><p>However I have yet to solder serial cable in order to see what happens.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100526">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">vware</div>
					<div class="post-datetime">
						15 Jan 2010, 03:46					</div>
				</div>
				<div class="post-content content">
					<p>Yes, you are right, it is not going into that routine.&nbsp; I ran into this problem a couple weeks ago with a different RaLink board but it still used the RT3052 chip.&nbsp; &nbsp;Here is a solution for testing....</p><p>In u-boot, hit option # 4</p><p>Then enter</p><p>setenv bootargs &#039;board=WHR-G300N&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm</p><p>by the way, if you have a different board, you might want to use a different board name.&nbsp; Here are a few other examples of valid boot sequences:</p><p>setenv bootargs &#039;board=WHR-G300N&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm<br />setenv bootargs &#039;board=FONERA20N&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm<br />setenv bootargs &#039;board=V22RW-2X2&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm<br />setenv bootargs &#039;board=DIR-300-revB&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm</p><p>If you do this, it will boot properly, and ethernet will start working using the stock OpenWrt.</p><p>Now, my big problem is that I am trying to get USB working on my RT3052 board.&nbsp; There is no code currently there to support it.</p><p>The RT3052 is USB OTG compatible.&nbsp; &nbsp;I tried compiling and installing the DWC_OTG driver for it. However, on installation, it gives a bunch of symbols not found for symbols like: &quot;usb_create_ncd&quot;.&nbsp; &nbsp;So apparently UsbCore is not being loaded (even tho it is checked in the kernel config).&nbsp; I am not sure how to get USBCORE to load or how to fix things from this point.&nbsp; &nbsp;I think this USB subsystem might require some modification by the OpenWrt porting experts....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100568">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						15 Jan 2010, 13:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vware wrote:</cite><blockquote><p>Yes, you are right, it is not going into that routine.&nbsp; I ran into this problem a couple weeks ago with a different RaLink board but it still used the RT3052 chip.&nbsp; &nbsp;Here is a solution for testing....</p><p>In u-boot, hit option # 4<br />Then enter<br />setenv bootargs &#039;board=WHR-G300N&#039;; tftpboot 0x80800000&nbsp; openwrt-ramips-uImage-initramfs.bin; bootm</p></blockquote></div><p>That has done the trick (based on the instructions at the beginning of this thread). <br />I&#039;m compiling an image with <br /></p><div class="quotebox"><cite>anajavi wrote:</cite><blockquote><p>in target/linux/ramips/files/arch/mips/ralink/common/setup.c<br />enum ramips_mach_type ramips_mach = RAMIPS_MACH_WHR_G300N;<br />That should make the machine specific initialization to run.</p></blockquote></div><p>Tried that and it didn&#039;t work.</p><p>Currently the board is being detected (during bootup) as<br />MIPS: machine is Generic Ralink board</p><p>If we use option 4 and pass &#039;board=WHR-G300N&#039;; then the board is detected and seems to be good.<br />MIPS: machine is Buffalo WHR-G300N</p><p>Swapping<br />enum ramips_mach_type ramips_mach = RAMIPS_MACH_GENERIC;<br />for<br />enum ramips_mach_type ramips_mach = RAMIPS_MACH_WHR_G300N;<br />in target/linux/ramips/files/arch/mips/ralink/common/setup.c didn&#039;t help.</p><br /><p>As I&#039;m not fully up to speed on this, can someone tell me how the board is detected (the process and more specifically which files / functions are involved)</p><p>I see there is a mention in target/linux/ramips/files/arch/mips/include/asm/mach-ralink/machine.h<br />I tried swapping the order in there to have RAMIPS_MACH_WHR_G300N, at the start, but to no avail.</p><p>As a &quot;quick hack&quot; for those who want to see openwrt running on these (Note it may cause other kernel issues, I haven&#039;t yet looked at what other kernel customizations this does, or breaks)</p><p>make kernel_menuconfig<br />Kernel Hacking ---&gt;<br />Default kernel command string append board=WHR-G300N<br />The entire line would then be<br />&quot;console=ttyS1,57600 rootfstype=squashfs,jffs2 board=WHR-G300N&quot;</p><p>Note without the &quot;</p><p>Then the normal make world</p><p>So to get something working, build as above,<br />Plug the WHR-G300N =&gt; switch =&gt; PC<br />Set the PC to use the ip address 192.168.11.2 netmask 255.255.255.0<br />run a tftp server on the pc<br />save / rename openwrt-ramips-uImage-initramfs.bin to firmware.ram and power the WHR-G300N.</p><p>Currently the image isn&#039;t written to flash when it&#039;s booted, the default is to copy time image to ram and execute.<br />If someone wants to look at <a href="http://www.denx.de/wiki/DULG/UBootScripts">http://www.denx.de/wiki/DULG/UBootScripts</a> or <a href="http://www.denx.de/wiki/DULG/Manual">http://www.denx.de/wiki/DULG/Manual</a> in general about the boot time scipts. Other projects have written an image that loads the image AND writes it to memory.</p><p>We can use mtd to write the above image (copy it to /tmp on the WHR-G300N and then write it)<br />mtd -r write openwrt-ramips-uImage-initramfs.bin openwrt</p>											<p class="post-edited">(Last edited by <strong>Timothy</strong> on 18 Jan 2010, 17:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100890">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						19 Jan 2010, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>Now the only problem is the wireless<br />Should be RT2860 which is in the staging drivers. I can&#039;t yet see how to select it. It seems commented out (or similar) in openwrt.<br />The drivers are there build_dir/linux-ramips_rt305x/linux-2.6.30.9/drivers/staging/rt2860<br />Normally (regular linux kernel)<br />Device Drivers ---&gt;<br />&nbsp; Staging Drivers ---&gt;<br />&nbsp; &nbsp; &lt;M&gt; Ralink 2870/3070 wireless support</p><br /><br /><p>Edit: There looks to be the wireless in a later version of trunk.&nbsp; Lets see if that will compile a stable image.</p>											<p class="post-edited">(Last edited by <strong>Timothy</strong> on 19 Jan 2010, 22:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100932">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						20 Jan 2010, 04:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi, Timothy.</p><p>buildroot -&gt; make menuconfig -&gt; &quot;Kernel modules&quot; -&gt; &quot;Wireless Drivers&quot; -&gt; &quot;kmod-rt2800-pci............. Ralink Drivers for RT2x00 cards (RT2860 PCI)&quot;<br />Is this?</p><p>bye<br />zukky</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p100954">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						20 Jan 2010, 12:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yapoo wrote:</cite><blockquote><p>Hi, Timothy.</p><p>buildroot -&gt; make menuconfig -&gt; &quot;Kernel modules&quot; -&gt; &quot;Wireless Drivers&quot; -&gt; &quot;kmod-rt2800-pci............. Ralink Drivers for RT2x00 cards (RT2860 PCI)&quot;<br />Is this?</p><p>bye<br />zukky</p></blockquote></div><p>Yes I think that is it.<br />However in trunk I downloaded yesterday, Busybox has some problems, that can be worked around, but the kernel module isn&#039;t compiling.</p><p>SVN info gives<br />Last Changed Rev: 19227<br />Last Changed Date: 2010-01-19 13:26:03 +0000 (Tue, 19 Jan 2010)</p><p>&nbsp; CC [M]&nbsp; path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.o</p><p>path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.c: In function &#039;rt2x00pci_probe&#039;:</p><p>path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.c:291: error: implicit declaration of function &#039;pci_set_mwi&#039;</p><p>make[8]: *** [path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.o] Error 1</p><p>Patching that <br />--- build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.c&nbsp; &nbsp; <br />+++ build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00pci.c&nbsp; &nbsp; <br />@@ -288,8 +288,10 @@</p><p>&nbsp; &nbsp; &nbsp; &nbsp; pci_set_master(pci_dev);</p><p>+/*<br />&nbsp; &nbsp; &nbsp; &nbsp; if (pci_set_mwi(pci_dev))<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ERROR_PROBE(&quot;MWI not available.\n&quot;);<br />+*/</p><p>&nbsp; &nbsp; &nbsp; &nbsp; if (dma_set_mask(&amp;pci_dev-&gt;dev, DMA_BIT_MASK(32))) {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ERROR_PROBE(&quot;PCI DMA not supported.\n&quot;);</p><br /><p>Just gives a later error for rt2x00lib.ko</p><p>(cd path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/ipkg-ramips/kmod-rt2x00-lib/CONTROL; var2file &quot;V_Package_kmod_rt2x00_lib_conffiles&quot; conffiles; var2file &quot;V_Package_kmod_rt2x00_lib_preinst&quot; preinst; var2file &quot;V_Package_kmod_rt2x00_lib_postinst&quot; postinst; var2file &quot;V_Package_kmod_rt2x00_lib_prerm&quot; prerm; var2file &quot;V_Package_kmod_rt2x00_lib_postrm&quot; postrm; )</p><p>mkdir -p path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/ipkg-ramips/kmod-rt2x00-lib/lib/modules/2.6.30.10<br />cp -fpR -L path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00lib.ko path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/ipkg-ramips/kmod-rt2x00-lib/lib/modules/2.6.30.10/</p><p>cp: cannot stat `path/whr-g300n/build_dir/linux-ramips_rt305x/compat-wireless-2010-01-15/drivers/net/wireless/rt2x00/rt2x00lib.ko&#039;: No such file or directory</p><br /><p>Now how do I edit / change that lot, more to the point, where does it come from as I need to change CONFIG_RT2X00=m CONFIG_RT2X00_LIB_PCI=m to CONFIG_RT2X00=y CONFIG_RT2X00_LIB_PCI=y</p><p>Looks like there is something in package/mac80211/Makefile which changed the above options (ONFIG_RT2X00=m CONFIG_RT2X00_LIB_PCI=m to CONFIG_RT2X00=y CONFIG_RT2X00_LIB_PCI=y)</p><p>But rt2x00lib.ko is still not being build.</p><p>I&#039;m going to try revision 17175 as 17176 has compat-wireless 2010-01-15 which is the package that isn&#039;t compiling<br />Maybe compat-wireless 2010-01-13 works</p><p>Note busybox seems to have a problem with it&#039;s module tools (you need to use the simplified one rather than the defaults)</p><p>compat-wireless-2010-01-13 doesn&#039;t work either.<br />Raised a ticket for someone to look at it.<br />I&#039;ll probably look again tomorrow</p>											<p class="post-edited">(Last edited by <strong>Timothy</strong> on 20 Jan 2010, 18:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101511">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						27 Jan 2010, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>With a bunch of fiddling I managed to get a compiled image, but the wifi is still an issue</p><p>rt2x00lib: Unknown symbol rt2x00crypto_key_to_cipher<br />rt2x00lib: Unknown symbol rt2x00crypto_create_tx_descriptor<br />rt2x00lib: Unknown symbol rt2x00leds_unregister<br />rt2x00lib: Unknown symbol rt2x00leds_led_radio<br />rt2x00lib: Unknown symbol rt2x00crypto_tx_insert_iv<br />rt2x00lib: Unknown symbol rt2x00ht_create_tx_descriptor<br />rt2x00lib: Unknown symbol rt2x00lib_load_firmware<br />rt2x00lib: Unknown symbol rt2x00crypto_tx_overhead<br />rt2x00lib: Unknown symbol rt2x00led_led_activity<br />rt2x00lib: Unknown symbol rt2x00leds_led_quality<br />rt2x00lib: Unknown symbol rt2x00crypto_tx_remove_iv<br />rt2x00lib: Unknown symbol rt2x00leds_led_assoc<br />rt2x00lib: Unknown symbol rt2x00lib_free_firmware<br />rt2x00lib: Unknown symbol rt2x00crypto_rx_insert_iv<br />rt2x00lib: Unknown symbol rt2x00leds_register<br />rt2x00lib: Unknown symbol rt2x00crypto_tx_copy_iv<br />rt2x00pci: Unknown symbol rt2x00lib_rxdone<br />rt2x00pci: Unknown symbol rt2x00queue_get_entry<br />rt2x00pci: Unknown symbol rt2x00lib_remove_dev<br />rt2800pci: Unknown symbol rt2800_config_shared_key<br />rt2800pci: Unknown symbol rt2800_reset_tuner<br />rt2800pci: Unknown symbol rt2800_validate_eeprom<br />rt2800pci: Unknown symbol rt2800_link_stats<br />rt2800pci: Unknown symbol rt2800_rfkill_poll<br />rt2800pci: Unknown symbol rt2800_probe_hw_mode<br />rt2800pci: Unknown symbol rt2800_read_eeprom_efuse<br />rt2800pci: Unknown symbol rt2x00pci_initialize<br />rt2800pci: Unknown symbol rt2800_efuse_detect<br />rt2800pci: Unknown symbol rt2800_config_filter<br />rt2800pci: Unknown symbol rt2800_mcu_request<br />rt2800pci: Unknown symbol rt2800_init_eeprom<br />rt2800pci: Unknown symbol rt2800_config_pairwise_key<br />rt2800pci: Unknown symbol rt2x00pci_uninitialize<br />rt2800pci: Unknown symbol rt2x00queue_get_entry<br />rt2800pci: Unknown symbol rt2800_init_bbp<br />rt2800pci: Unknown symbol rt2800_init_rfcsr<br />rt2800pci: Unknown symbol rt2x00lib_txdone<br />rt2800pci: Unknown symbol rt2x00queue_get_queue<br />rt2800pci: Unknown symbol rt2800_link_tuner<br />rt2800pci: Unknown symbol rt2x00pci_regbusy_read<br />rt2800pci: Unknown symbol rt2800_config_intf<br />rt2800pci: Unknown symbol rt2800_wait_wpdma_ready<br />rt2800pci: Unknown symbol rt2800_init_registers<br />rt2800pci: Unknown symbol rt2800_config_ant<br />rt2800pci: Unknown symbol rt2800_mac80211_ops<br />rt2800pci: Unknown symbol rt2800_config<br />rt2800pci: Unknown symbol rt2x00pci_rxdone<br />rt2800pci: Unknown symbol rt2800_config_erp<br />rt2800pci: Unknown symbol rt2x00pci_write_tx_data<br />Registered led device: whr-g300n:red:diag<br />Registered led device: whr-g300n:green:router<br />Registered led device: whr-g300n:amber:security</p><p>I&#039;ve tried compiling the other parts of the rt2x00 friver (led / firmware etc) with other unknown symbol issues</p><p>Also jffs2 and squashfs seem to have issues on boot so I&#039;m having to do lzma compressed ramdisk.<br />the module utils were complaining at compile so I was using the simple one in busybox</p>											<p class="post-edited">(Last edited by <strong>Timothy</strong> on 27 Jan 2010, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101513">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">foxtroop11</div>
					<div class="post-datetime">
						27 Jan 2010, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>Can you check and see what happens if you compile with usb-core. On my kernel/build I found that the new compat.ko requires usb-core in the new compat-wireless. I have no idea if that is the case for what you are doing, but in my case it resolved the problem. I also had to rename /etc/modules.d/20-usb-core to something prior to 20-mac80211. </p><p>rt2x00lib: Unknown symbol rt2x00crypto_key_to_cipher<br />rt2x00lib: Unknown symbol rt2x00crypto_create_tx_descriptor</p><p>I had the same output as you above, except mine said ath9k and mac80211 unknown blah blah.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101520">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">THG</div>
					<div class="post-datetime">
						27 Jan 2010, 17:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Timothy wrote:</cite><blockquote><p>With a bunch of fiddling I managed to get a compiled image, but the wifi is still an issue</p></blockquote></div><p>I posted Ralink AP SoC SDK in another thread. I managed to compile a firmware from it and wireless works very well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101583">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						28 Jan 2010, 14:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>foxtroop11 wrote:</cite><blockquote><p>Can you check and see what happens if you compile with usb-core. On my kernel/build I found that the new compat.ko requires usb-core in the new compat-wireless. I have no idea if that is the case for what you are doing, but in my case it resolved the problem. I also had to rename /etc/modules.d/20-usb-core to something prior to 20-mac80211. </p><p>rt2x00lib: Unknown symbol rt2x00crypto_key_to_cipher<br />rt2x00lib: Unknown symbol rt2x00crypto_create_tx_descriptor</p><p>I had the same output as you above, except mine said ath9k and mac80211 unknown blah blah.</p></blockquote></div><p>That may hit one of the other issues with the current state of this.</p><p>I can only currently build ramdisk images. If I do squashfs or jffs2 I get ALOT of jffs2 errors as it tries to boot, then it does before I can open a console.</p><p>Using physmap partition information<br />Creating 7 MTD partitions on &quot;physmap-flash.0&quot;:<br />0x000000000000-0x000000030000 : &quot;u-boot&quot;<br />0x000000030000-0x000000040000 : &quot;u-boot-env&quot;<br />0x000000040000-0x000000050000 : &quot;factory&quot;<br />0x000000050000-0x0000000e0000 : &quot;kernel&quot;<br />0x000000140000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />split_squashfs: no squashfs found in &quot;physmap-flash.0&quot;<br />0x0000003f0000-0x000000400000 : &quot;user&quot;<br />0x000000050000-0x0000003f0000 : &quot;openwrt&quot;<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010000: 0x7368 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010004: 0x037d instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010008: 0x6e1d instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010010: 0x001c instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010014: 0x0002 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010018: 0x00c0 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001001c: 0x0004 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010020: 0x1520 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010028: 0x1981 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010030: 0x1979 instead<br />Further such events for this erase block will not be printed<br />Empty flash at 0x00010038 ends at 0x00010040<br />Old JFFS2 bitmask found at 0x000197dc</p><p>etc until</p><p>jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00250020: 0x1141 instead<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00250024: 0xa204 instead<br />Further such events for this erase block will not be printed<br />Old JFFS2 bitmask found at 0x00254048<br />You cannot use older JFFS2 filesystems with newer kernels<br />jffs2_scan_eraseblock(): End of filesystem marker found at 0x260000<br />Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes<br />empty_blocks 5, bad_blocks 0, c-&gt;nr_blocks 43<br />VFS: Cannot open root device &quot;&lt;NULL&gt;&quot; or unknown-block(31,4)<br />Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192 mtdblock0 driver: physmap-flash<br />1f01&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock1 driver: physmap-flash<br />1f02&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock2 driver: physmap-flash<br />1f03&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;576 mtdblock3 driver: physmap-flash<br />1f04&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2752 mtdblock4 driver: physmap-flash<br />1f05&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock5 driver: physmap-flash<br />1f06&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3712 mtdblock6 driver: physmap-flash<br />Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,4)</p><p>Note I&#039;ve been able to boot the ramdisk image, then write the squashfs image and I get the above message.</p><p>Do I need to reformat the flash, I thought that&#039;s what &quot;mtd write openwrt-ramips-squashfs.img openwrt&quot;</p>											<p class="post-edited">(Last edited by <strong>Timothy</strong> on 28 Jan 2010, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110233">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Kcolyhs</div>
					<div class="post-datetime">
						30 May 2010, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to intrude on this fascinating thread, but It seems that you have explored this Buffalo router extensively.</p><p>We are a group of users who have flashed DD-WRT on the Buffalo WHR-G300N.<br />This group is desperately trying to revert to the original Buffalo firmware for a variety of reasons.</p><p>We have tried:</p><p>1)GUI flashing. Does not work. <br />2)TFTP. Transfer occurs, but the firmware does not flash or install.<br />3)Telnet commands:</p><p>cd /tmp<br />wget ftp://xxx/firmwarexxx</p><p>then</p><p>write firmwarexxx linux</p><p>or</p><p>wget -O /var/firmware ftp://xxx/firmwarexxx</p><p>then</p><p>mtd write /var/firmware linux</p><br /><p>Are also unsuccessful.</p><p>Is there any advice you can give to successfully revert to Buffalo firmware?<br />TFTP technique, specific Telnet commands or serial cable?</p><p>Many thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>