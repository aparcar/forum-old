<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Possible eudev bug</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p313807">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pma61</div>
					<div class="post-datetime">
						6 Mar 2016, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i have a problem with eudev package.</p><p>Today I have freshly compiled openwrt from git and selected eudev package.</p><p>I wrote this rule in /etc/udev/rules.d/90-xx-yy-zz.rules:<br /></p><div class="codebox"><pre><code>SUBSYSTEM==&quot;usb&quot;, ACTION==&quot;add&quot;, ATTR{bInterfaceClass}==&quot;06&quot;, ATTR{bInterfaceSubClass}==&quot;01&quot;, ATTR{bInterfaceProtocol}==&quot;01&quot;, RUN{program}+=&quot;/bin/sh /usr/bin/xxyyzz-add&quot;
SUBSYSTEM==&quot;usb&quot;, ACTION==&quot;remove&quot;, ATTR{bInterfaceClass}==&quot;06&quot;, ATTR{bInterfaceSubClass}==&quot;01&quot;, ATTR{bInterfaceProtocol}==&quot;01&quot;, RUN{program}+=&quot;/bin/sh /usr/bin/xxyyzz-remove&quot;</code></pre></div><p>where xxyyzz-{add,remove} are sh scripts.</p><p>running udevadm test it seams that the rule is ok, but (e)udev is never running commands<br /></p><div class="codebox"><pre><code>udevadm test /sys/devices/platform/ehci-platform/usb1/1-1/1-1\:1.0
calling: test
version 3.1.5
This program is for debugging only, it does not run any program
specified by a RUN key. It may show incorrect results, because
some values may be different, or not available at a simulation run.

/etc/udev/hwdb.bin does not exist, please run udevadm hwdb --update
timestamp of &#039;/etc/udev/rules.d&#039; changed
Reading rules file: /lib/udev/rules.d/50-udev-default.rules
specified group &#039;tty&#039; unknown
specified group &#039;dialout&#039; unknown
specified group &#039;kmem&#039; unknown
specified group &#039;input&#039; unknown
specified group &#039;video&#039; unknown
specified group &#039;lp&#039; unknown
specified group &#039;disk&#039; unknown
specified group &#039;cdrom&#039; unknown
specified group &#039;tape&#039; unknown
Reading rules file: /lib/udev/rules.d/60-block.rules
Reading rules file: /lib/udev/rules.d/60-cdrom_id.rules
Reading rules file: /lib/udev/rules.d/60-drm.rules
Reading rules file: /lib/udev/rules.d/60-evdev.rules
Reading rules file: /lib/udev/rules.d/60-persistent-alsa.rules
Reading rules file: /lib/udev/rules.d/60-persistent-input.rules
Reading rules file: /lib/udev/rules.d/60-persistent-storage-tape.rules
Reading rules file: /lib/udev/rules.d/60-persistent-storage.rules
Reading rules file: /lib/udev/rules.d/60-persistent-v4l.rules
Reading rules file: /lib/udev/rules.d/60-serial.rules
Reading rules file: /lib/udev/rules.d/64-btrfs.rules
Reading rules file: /lib/udev/rules.d/70-mouse.rules
Reading rules file: /lib/udev/rules.d/75-net-description.rules
Reading rules file: /lib/udev/rules.d/75-probe_mtd.rules
Reading rules file: /lib/udev/rules.d/78-sound-card.rules
Reading rules file: /lib/udev/rules.d/80-net-name-slot.rules
Reading rules file: /etc/udev/rules.d/90-xx-yy-zz.rules
rules contain 24576 bytes tokens (2048 * 12 bytes), 6699 bytes strings
891 strings (11376 bytes), 550 de-duplicated (5019 bytes), 342 trie nodes used
no db file to read /run/udev/data/+usb:1-1:1.0: No such file or directory
IMPORT builtin &#039;hwdb&#039; /lib/udev/rules.d/50-udev-default.rules:15
IMPORT builtin &#039;hwdb&#039; returned non-zero
RUN &#039;/usr/bin/xxyyzz-add&#039; /etc/udev/rules.d/90-xx-yy-zz.rules:1
ACTION=add
DEVPATH=/devices/platform/ehci-platform/usb1/1-1/1-1:1.0
DEVTYPE=usb_interface
INTERFACE=6/1/1
MODALIAS=usb:v04B0p0433d0100dc00dsc00dp00ic06isc01ip01in00
PRODUCT=4b0/433/100
SUBSYSTEM=usb
TYPE=0/0/0
USEC_INITIALIZED=3045847270
run: &#039;/usr/bin/xxyyzz-add&#039;</code></pre></div><p>Any possible solutions, also for debugging? Thanks a lot</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>