<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Using watchdog timers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p47439">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">karl</div>
					<div class="post-datetime">
						1 May 2007, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>I searched but did not find much relevant discussion of watchdog usage.&nbsp; I have been using the AR7 port on my DSL-G604t (without wireless) and have seen eventual hangs after a few days of uptime.&nbsp; So, I thought I should try to make use of the hardware watchdog that is reported (as disabled) in the dmesg output...</p><p>I made sure the watchdog applet in busybox was enabled in my image, and then I manually ran &quot;watchdog /dev/watchdog&quot; and it seems happy, reporting that the watchdog was reenabled and putting a watchdog process into the background.&nbsp; I still await the first hang/crash to see if it actually reboots itself automatically now.&nbsp; If it works, I will worry about integrating this into the boot somehow.</p><p>I am surprised that there isn&#039;t a lot of interest on the list and a built-in feature to support the use of the watchdog in the standard images, e.g. in the configuration and boot process... It makes me wonder whether there are known problems with this, or whether most devices do not have hardware watchdogs?</p><p>The one thing that seems a little tricky is determining the right watchdog frequency to use, as the busybox applet help is not clear on whether it sets the watchdog grace period or not.&nbsp; It said it defaults to 30 second updates, and I saw that the hardware driver reported a 60 second grace period, so I figured the default was OK in my situation.&nbsp; Ideally, I imagine you would want to configure both the grace period and update rates for the right level of response time for your needs, but I haven&#039;t really much experience with these watchdog timers...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61599">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">colchaodemola</div>
					<div class="post-datetime">
						11 Jan 2008, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>have you succeed with this?<br />I am using DG834 ar7 and i eventually get hangs&nbsp; too. <br />How is it working ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208677">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Flint</div>
					<div class="post-datetime">
						31 Jul 2013, 20:40					</div>
				</div>
				<div class="post-content content">
					<p>For OpenWRT, watchdog functionality will be provided by procd, from the Barrier Breaker (current trunk) release. See <a href="http://wiki.openwrt.org/doc/techref/procd">http://wiki.openwrt.org/doc/techref/procd</a></p>											<p class="post-edited">(Last edited by <strong>Flint</strong> on 9 Aug 2013, 21:44)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>