<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Cloning running OpenWrt to &gt;10 other routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p214868">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DerBasser</div>
					<div class="post-datetime">
						15 Oct 2013, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, </p><p>i have following situation:</p><p>I setup one router with all changes and modification i needed. Also own scripts etc...</p><p>Is there an easy way to clone&nbsp; the whole syste, without any big efforts to other routers ( exact same vendor and model) ?</p><p>I&#039;m using ATTITUDE ADJUSTMENT (12.09, r36088)<br />JTAG seems to be an option but I heard it&#039;s fu**** slow</p><p>Thanks a lot<br />DerBasser</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214876">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						15 Oct 2013, 19:53					</div>
				</div>
				<div class="post-content content">
					<p>Can&#039;t you just backup the settings and restore them to other routers?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214878">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						15 Oct 2013, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>For ten routers I&#039;d recommend to use the build-system to build your preconfigured images. Then you can flash them with the preinstalled features/settings to as many routers as you like :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214879">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">DerBasser</div>
					<div class="post-datetime">
						15 Oct 2013, 20:42					</div>
				</div>
				<div class="post-content content">
					<p>Thank for the Tip with the build-system. I will have a detailed look at it!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214880">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						15 Oct 2013, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>No problem!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214935">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tomine</div>
					<div class="post-datetime">
						16 Oct 2013, 16:37					</div>
				</div>
				<div class="post-content content">
					<p>you can use &quot;dd&quot; command to dump the firmware partion to a file, the web flash the file to other routers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214936">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						16 Oct 2013, 16:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tomine wrote:</cite><blockquote><p>you can use &quot;dd&quot; command to dump the firmware partion to a file, the web flash the file to other routers.</p></blockquote></div><p>Not that smart, not all settings should be cloned, (mac addresses etc). Building a custom firmware is a better solution.<br />Also because he mentions potential different routers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214938">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">DerBasser</div>
					<div class="post-datetime">
						16 Oct 2013, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>So dd could be used for a full backup option.<br />Copying the img to the RAM and dding to the flash?</p><p>=&gt; Is this also with the squashfs possible??</p><p>For the initial setup dd isn&#039;t so good as you already said because of the unique settings.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214939">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						16 Oct 2013, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>dd could be used for a full backup, but it is a pain. (also there is a nice backup function in openwrt anyway).<br />Also the image dump can&#039;t be flashed with web flash<br />But I recommend compiling your own firmware:<br />see: </p><p><a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a><br /><a href="http://wiki.openwrt.org/doc/howto/build#custom.files">http://wiki.openwrt.org/doc/howto/build#custom.files</a></p><p>edit:<br />I agree with written_direcon, don&#039;t use it, it creates more trouble then it solves <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> (should have put it that way)</p>											<p class="post-edited">(Last edited by <strong>FriedZombie</strong> on 16 Oct 2013, 18:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214942">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">DerBasser</div>
					<div class="post-datetime">
						16 Oct 2013, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot for the help!!!</p><p>openwrt is quite cool but it needs time to get into it <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214945">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						16 Oct 2013, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>Yes, but OpenWrt is a powerfull/flexible router distribution.</p><p>But you&#039;ll love it.</p><p>Btw. do not use the dd command!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214951">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						16 Oct 2013, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>You are probably using a squashfs build, like most users.<br />Then all you modifications (add-on packages and settings) are located in /overlay directory. E.g. all your modified settings in /etc/config are actually in /overlay/etc/config.</p><p>The advice regarding building an own version with the needed add-on packages is sound. You can also include the &quot;common&quot; settings following the already given advice regarding &quot;custom files&quot;. I am doing that for my own build for several routers.</p><p>You could copy the settings of that one configured router from /overlay/etc/config and include them as custom files to your build, along all the needed add-on packages. If you then flash the routers with that personal firmware, you would only need to set/edit the differing settings to the other routers.</p><p>Some hints about automating settings for other routers:<br />- you could pack into firmware special script files to be run in other routers. Those scripts would then e.g. unpack a tar archive, where your settings for router X are. I use that way to pack my perssonal settings in encrypted form to my community build: <a href="https://forum.openwrt.org/viewtopic.php?pid=142896#p142896">https://forum.openwrt.org/viewtopic.php … 96#p142896</a><br />-wifi: you can avoid specifying MAC, if you use phy0 and phy1 approach. then the same wifi settings are valid for all routers. See discussion near <a href="https://forum.openwrt.org/viewtopic.php?pid=185424#p185424">https://forum.openwrt.org/viewtopic.php … 24#p185424</a><br />- you could write an uci script to set the other different settings. Example below, how I change a router to be a dummier repeater:<br /></p><div class="codebox"><pre><code>+#!/bin/sh
+uci set system.@system[0].hostname=OpenWrt2
+uci set network.lan.ipaddr=192.168.1.2
+uci set network.lan.gateway=192.168.1.1
+uci set network.lan.dns=192.168.1.1
+uci set network.henet.auto=0
+uci set network.sixxs.auto=0
+uci set network.lan6=interface
+uci set network.lan6.ifname=@lan
+uci set network.lan6.proto=dhcpv6
+uci set network.lan6.reqprefix=no
+uci set wireless.@wifi-device[0].channel=9
+uci set wireless.@wifi-device[1].channel=44
+uci set wireless.@wifi-iface[1].mode=ap
+uci set dhcp.lan.ignore=1
+uci set dhcp.lan.force=0
+uci delete 6relayd.default.dhcpv6
+uci delete 6relayd.default.rd
+uci commit dhcp
+uci commit network
+uci commit wireless
+uci commit system
+uci commit 6relayd
+/etc/init.d/dnsmasq disable
+# /etc/init.d/6relayd disable</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 16 Oct 2013, 18:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>