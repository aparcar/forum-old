<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wrt54gx AP+STA situation...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p88078">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">exelsus</div>
					<div class="post-datetime">
						16 May 2009, 09:24					</div>
				</div>
				<div class="post-content content">
					<p>Okay, i&#039;ve been trying to set up a repeater in the typical scenario, this is what i have so far</p><p>Router with internet wrt54gl 1.1:</p><div class="codebox"><pre><code>cat /etc/config/wireless
config wifi-device wl0
        option type             broadcom
        option channel          11
        option disabled         0

config wifi-iface
        option device           wl0
        option network          lan
        option mode             ap
        option ssid               downstairs
        option encryption       psk+psk2
        option key              &lt;wlanpass&gt;
        option hidden           0

config wifi-iface
        option device           wl0
        option network          lan
        option mode             ap
        option wds              1
        option ssid             wds
        option bssid            00:14:bf:41:d1:c1
        option encryption       psk
        option key              &lt;wdspass&gt;
        option hidden           1</code></pre></div><p>Router in the 2nd floor, wrt54gs 2.1:<br /></p><div class="codebox"><pre><code>cat /etc/config/wireless
config wifi-device wl0
        option type             broadcom
        option channel          11
        option disabled         0

config wifi-iface
        option device           wl0
        option network          lan
        option mode             sta
        option wds              1
        option ssid             wds
        option bssid            02:25:69:2a:e4:d1
        option encryption       psk
        option key              &lt;wdspass&gt;
        option hidden           1

config wifi-iface
        option device           wl0
        option network          lan
        option mode             ap
        option wds              1
        option ssid             upstairs
        option encryption       psk+psk2
        option key              &lt;wlanpass&gt;
        option hidden           0</code></pre></div><p>the whole things works okay, now the problem...</p><p>it seems like the wrt54gs doesn&#039;t support multiple ssid so, only the first config is the one that works. The wireless link between the two routers works perfectly, but the router upstairs can&#039;t act as an access point at the same time. so it is either an AP or a client but not both :@... the wrt54gl in the other hand, can do it without any problem.</p><p>This is what wifi shows:</p><p>wifi<br />Command &#039;set mssid&#039; failed: -1<br />can&#039;t add wl0.1 to bridge br-lan: Cannot assign requested address</p><p>i haven&#039;t found any information about how to fix this, can you throw me some light? this is the only thing that keeps my setup from working as i want...</p><p>thanks in advance</p><p>PD: This config absolutely WORKS for any of you who is looking forward to. BUT you need to have capable routers (2x wrt54gl v1.1 will do)</p>											<p class="post-edited">(Last edited by <strong>exelsus</strong> on 16 May 2009, 17:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95459">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">frederikv</div>
					<div class="post-datetime">
						6 Oct 2009, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>I am encountering the same problem on a WRT54GS. It works either as an AP or as a STA, but not AP+STA together. Did you have any success in resolving this yet?</p><p>(I tried with the 2.4 and the 2.6 kernel on 8.09.1 and 2.4 latest trunk.)</p><p>Should I try an older OpenWRT version (whiterussian even??) to get a wireless repeater working on this router?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>