<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> kmod-ipx4xx-npe does not get build</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p72560">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						22 Aug 2008, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi <br />I have an Avila IXP425 board on which I am trying to run OpenWrt. So far my builds load and run fine, expect that the Ethernet hardware addresses are 00:00:00:00:00:00.&nbsp; <br />I then noticed that from the menuconfig, whenever or however I select (either * or M) kmod-ixp4xx-npe, it does not get built. The other two selections (kmod-tg3 and kmod-via-velocity) to get built!</p><p>Below is the selection from menuconfig that I am referring to:</p><p>&nbsp; â”‚ â”‚ &lt;M&gt; kmod-ixp4xx-npe......................... Intel(R) IXP4xx ethernet support&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;â”‚ â”‚&nbsp; <br />&nbsp; â”‚ â”‚ &lt;M&gt; kmod-tg3................................ Broadcom Tigon3 Gigabit Ethernet&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; â”‚ â”‚&nbsp; <br />&nbsp; â”‚ â”‚ &lt;M&gt; kmod-via-velocity... VIA Velocity Gigabit Ethernet Adapter kernel support â”‚ â”‚ </p><br /><p>One more thing, when I run &quot;$make V=99&quot; I noticed this message &quot;WARNING: kmod-ixp4xx-npe is not available in the kernel config&quot; <br />This message appears regardless of whether the selection for kmod-ixp4xx-npe is: &lt; &gt;, &lt;*&gt;&nbsp; or &lt;M&gt;. </p><p>This &quot;problem&quot; happens when building on either kamikaze or the trunk.</p><p>I&#039;d really appreciate your pointers as to how to go about building this module.</p><p>Kind regards;<br />Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72566">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						22 Aug 2008, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s a stub, the driver is compiled into the kernel now. If there&#039;s no MAC set on the avila, that means you don&#039;t have the eeprom set up right. What RedBoot version are you using?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72587">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						23 Aug 2008, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>What are you referring to as the stub? <br />In any case, why is it that the other options listed with kmod-ipx4xx-npe can be successfully compiled into the kernel or as separate kernel modules?</p><p>RedBoot&gt; version</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Gateworks certified release, version 2.02 - built 05:22:19, Mar&nbsp; 3 2006</p><p>Platform: Gateworks Avila GW234X (IXP42X 533MHz) BE<br />Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.<br />Copyright (C) 2004, 2005 Gateworks Corporation</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.</p><p>Thanks for the response.</p><p>Regards;<br />Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72594">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						24 Aug 2008, 04:04					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s compiled into the kernel by default, you don&#039;t have to enable anything. 2.02 should work, but 2.04 works for sure.. What is the output of &quot;fc -n -l&quot; in RedBoot?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72600">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						24 Aug 2008, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz<br />As I understand it, if it&#039;s compiled into the kernel, then it should be in &quot; /lib/modules/2.6.26.2/&quot; but it is not. Am I correct in my understanding?</p><p>RedBoot&gt; fc -n -l<br />boot_script: true<br />boot_script_data: <br />.. fis load linux<br />.. exec</p><p>boot_script_timeout: 25<br />bootp: false<br />bootp_my_gateway_ip: 0.0.0.0<br />bootp_my_ip: 192.168.3.2<br />bootp_my_ip_mask: 255.255.255.0<br />bootp_server_ip: 192.168.3.1<br />console_baud_rate: 115200<br />gdb_port: 9000<br />info_console_force: false<br />net_debug: false<br />net_device: npe_eth0</p><p>Kind regards;<br />//Socreates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72601">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						24 Aug 2008, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>If it&#039;s compiled into the kernel then it&#039;s compiled into the kernel -&gt; no separate modules.</p><p>Your RedBoot environment doesn&#039;t show mac addresses -- is your board a retail Avila or some OEM board?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72604">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						24 Aug 2008, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>My board is retail. <br />As for the MAC address, it does show during normal boot of the Linux&nbsp; as can been seen from the line &quot;Ethernet eth0: MAC address 00:d0:12:03:24:67&quot; below:<br />It is, among other reason,&nbsp; this message that convince me that the drivers are not compiled into the kernel. <br />...here a shot *dump*<br />RedBoot&gt; reset<br />... Resetting.<br />+<br />Trying NPE-B...success. Using NPE-B with PHY 0.<br />Ethernet eth0: MAC address 00:d0:12:03:24:67<br />IP: 192.168.3.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.3.1</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Gateworks certified release, version 2.02 - built 05:22:19, Mar&nbsp; 3 2006</p><p>Platform: Gateworks Avila GW234X (IXP42X 533MHz) BE<br />Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.<br />Copyright (C) 2004, 2005 Gateworks Corporation</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.<br />== Executing boot script in 2.500 seconds - enter ^C to abort<br />RedBoot&gt; fis load linux<br />RedBoot&gt; exec<br />Using base address 0x00800000 and length 0x0031d030<br />Uncompressing Linux.......................................................................................................................................... done, booting the kernel.<br />Linux version 2.6.26.2 (lawrence@bluesky) (gcc version 4.1.2) #1 Fri Aug 22 12:44:15 SAST 2008<br />CPU: XScale-IXP42x Family [690541c1] revision 1 (ARMv5TE), cr=000039ff</p><p>Kaloz, you&#039;ve been kind thanks.</p><p>Kind regards<br />//Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72611">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						24 Aug 2008, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Please paste the full bootlog. Did you modify the kernel config?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72612">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						24 Aug 2008, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>HI Kaloz</p><p>root@OpenWrt:/etc/config# reboot <br />WATCHDOG: Device closed unexpectedly - timer will not stop<br />root@OpenWrt:/etc/config# Restarting system.<br />+<br />Trying NPE-B...success. Using NPE-B with PHY 0.<br />Ethernet eth0: MAC address 00:d0:12:03:24:67<br />IP: 192.168.3.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.3.1</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Gateworks certified release, version 2.02 - built 05:22:19, Mar&nbsp; 3 2006</p><p>Platform: Gateworks Avila GW234X (IXP42X 533MHz) BE<br />Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.<br />Copyright (C) 2004, 2005 Gateworks Corporation</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.<br />== Executing boot script in 2.500 seconds - enter ^C to abort<br />RedBoot&gt; fis load linux<br />RedBoot&gt; exec<br />Using base address 0x00800000 and length 0x0031d030<br />Uncompressing Linux.......................................................................................................................................... done, booting the kernel.<br />Linux version 2.6.26.2 (lawrence@bluesky) (gcc version 4.1.2) #1 Fri Aug 22 12:44:15 SAST 2008<br />CPU: XScale-IXP42x Family [690541c1] revision 1 (ARMv5TE), cr=000039ff<br />Machine: Intel IXDP425 Development Platform<br />Memory policy: ECC disabled, Data cache writeback<br />CPU0: D VIVT undefined 5 cache<br />CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 64MB = 64MB total<br />Memory: 60544KB available (1916K code, 182K data, 2284K init)<br />SLUB: Genslabs=12, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />net_namespace: 640 bytes<br />NET: Registered protocol family 16<br />IXP4xx: Using 16MiB expansion bus window size<br />PCI: IXP4xx is host<br />PCI: IXP4xx Using direct access for memory space<br />PCI: bus0: Fast back to back transfers enabled<br />dmabounce: registered device 0000:00:01.0 on pci bus<br />dmabounce: registered device 0000:00:02.0 on pci bus<br />dmabounce: registered device 0000:00:03.0 on pci bus<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />IXP4xx Queue Manager initialized.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ï¿½Â© 2001-2006 Red Hat, Inc.<br />msgmni has been set to 118<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale<br />console [ttyS0] enabled<br />serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale<br />eth0: MII PHY 0 on NPE-B<br />eth1: MII PHY 1 on NPE-C<br />IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000<br />4 RedBoot partitions found on MTD device IXP4XX-Flash.0<br />Creating 4 MTD partitions on &quot;IXP4XX-Flash.0&quot;:<br />0x00000000-0x00080000 : &quot;RedBoot&quot;<br />0x00080000-0x003a0000 : &quot;linux&quot;<br />0x00fe0000-0x00fff000 : &quot;FIS directory&quot;<br />0x00fff000-0x01000000 : &quot;RedBoot config&quot;<br />i2c /dev entries driver<br />ds1672 0-0068: chip found, driver version 0.4<br />ds1672 0-0068: rtc core: registered ds1672 as rtc0<br />i2c-gpio i2c-gpio.0: using pins 7 (SDA) and 6 (SCL)<br />ad7418 0-0028: ad7418 chip found<br />ad7418 0-0028: configuring for mode 1<br />IXP4xx Watchdog Timer: heartbeat 60 sec<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />XScale DSP coprocessor detected.<br />ds1672 0-0068: setting system clock to 2009-08-24 14:39:51 UTC (1251124791)<br />Freeing init memory: 2284K<br />[sighandler]: No more events to be processed, quitting.<br />[cleanup]: Waiting for children.<br />[cleanup]: All children terminated.<br />- preinit -<br />Press CTRL-C for failsafe</p><p>Please press Enter to activate this console. br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.<br />NET: Registered protocol family 10<br />lo: Disabled Privacy Extensions<br />ath9k: 0.1<br />PPP generic driver version 2.4.2<br />arp_tables: (C) 2002 David S. Miller<br />ip6_tables: (C) 2000-2006 Netfilter Core Team<br />ipt_time loading<br />wlan: trunk<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.10.5.6 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, RF2417, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: trunk<br />PCI: enabling device 0000:00:01.0 (0340 -&gt; 0342)<br />wifi0: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi0: Atheros 5413: mem=0x48000000, irq=28<br />PCI: enabling device 0000:00:02.0 (0340 -&gt; 0342)<br />wifi1: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi1: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi1: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi1: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi1: Atheros 5413: mem=0x48010000, irq=27<br />PCI: enabling device 0000:00:03.0 (0340 -&gt; 0342)<br />wifi2: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi2: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi2: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi2: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi2: Atheros 5413: mem=0x48020000, irq=26</p><br /><br /><p>BusyBox v1.8.2 (2008-08-22 12:18:35 SAST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r12293) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72614">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						25 Aug 2008, 02:10					</div>
				</div>
				<div class="post-content content">
					<p>It seems you are running from ramdisk - wha happens when you try to actually flash openwrt and run from there?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72616">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						25 Aug 2008, 09:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>Please be patient with this post is quite long as I decided to provide more information:</p><p>At the start I went to <a href="http://ftp.iasi.roedu.net/mirrors/openwrt.org/snapshots/ixp4xx/">http://ftp.iasi.roedu.net/mirrors/openw … ts/ixp4xx/</a> and downloaded files openwrt-ixp4xx-squashfs.img and openwrt-ixp4xx-zImage<br />RedBoot&gt;fis init<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-ixp4xx-zImage<br />RedBoot&gt; fis create linux<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-ixp4xx-squashfs.img<br />RedBoot&gt; fis create -l 0xe60000 rootfs<br />RedBoot&gt; fconfig<br />RedBoot&gt; fconfig<br />Run script at boot: true<br />Boot script: <br />Enter script, terminate with empty line<br />&gt;&gt; fis load linux<br />&gt;&gt; exec<br />&gt;&gt; <br />Boot script timeout (100ms resolution): 25<br />Use BOOTP for network configuration: false<br />Gateway IP address: <br />Local IP address: 192.168.3.2<br />Local IP address mask: 255.255.255.0<br />Default server IP address: 192.168.3.1<br />Console baud rate: 115200<br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false<br />Default network device: npe_eth0<br />Update RedBoot non-volatile configuration - continue (y/n)? y<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; <br />RedBoot&gt; reset<br />.<br />.<br />.<br />BusyBox v1.8.2 (2008-08-06 07:33:12 PDT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands. </p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r12194) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/#<br />root@OpenWrt:~# ifconfig -a<br />eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:00:00:00:00:00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:00:00:00:00:00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><br /><p>After the seeing that the hardware addresses&nbsp; 00:00:00:00:00:00. I searched for the the drivers but could not find any.<br />So then downloaded the source by doing:<br />svn co <a href="https://svn.openwrt.org/openwrt/tags/kamikaze_7.09">https://svn.openwrt.org/openwrt/tags/kamikaze_7.09</a> </p><p>I did the make menuconfig and then make. After the build I had the same files in bin/ directory as I had downloaded. I re-flashed the board but the result was the same.</p><p>I then did<br />svn co <a href="https://svn.openwrt.org/openwrt/trunk/">https://svn.openwrt.org/openwrt/trunk/</a></p><p>I did the make menuconfig and then make. After the build I had the same files in bin/ directory as I had downloaded. I re-flashed the board but the result was the same.</p><p>So during the building and flashing of the board, I got tired of flashing two files ( openwrt-ixp4xx-squashfs.img and openwrt-ixp4xx-zImage), so I sort to find a way to have the kernel and the root filesystem in one file. That&#039;s when I selected &quot;ramdisk&quot; from the &quot;Target Images&quot; submenu of menuconfig.<br />But still even when flashing the board with this one file, the results were the same.</p><p>Some quite odd is that everything else except the Ethernet seem to be working fine. E.g. I have plugged in three Atheros cards and they all work fine.</p><p>Kaloz, as a test: What can I use to check in the images if the drivers are compiled in?</p><p>Kind regards;<br />//Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72622">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						25 Aug 2008, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>Below is EXACTLY what I&#039;ve just done. So this is a copy and paste of my flashing of the board. <br />First re-downloaded downloaded files openwrt-ixp4xx-squashfs.img and openwrt-ixp4xx-zImage from <a href="http://ftp.iasi.roedu.net/mirrors/openwrt.org/snapshots/ixp4xx/">http://ftp.iasi.roedu.net/mirrors/openw … ts/ixp4xx/</a>.</p><br /><p>root@OpenWrt:/# <br />root@OpenWrt:/# <br />root@OpenWrt:/# reboot<br />WATCHDOG: Device closed unexpectedly - timer will not stop<br />root@OpenWrt:/# Restarting system.<br />+<br />Trying NPE-B...success. Using NPE-B with PHY 0.<br />Ethernet eth0: MAC address 00:d0:12:03:24:67<br />IP: 192.168.3.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.3.1</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Gateworks certified release, version 2.02 - built 05:22:19, Mar&nbsp; 3 2006</p><p>Platform: Gateworks Avila GW234X (IXP42X 533MHz) BE<br />Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.<br />Copyright (C) 2004, 2005 Gateworks Corporation</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.<br />== Executing boot script in 2.500 seconds - enter ^C to abort<br />^C<br />RedBoot&gt; ^C<br />RedBoot&gt; ^C<br />RedBoot&gt; fis init<br />About to initialize [format] FLASH image system - continue (y/n)? y<br />*** Initialize FLASH Image System<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-ixp4xx-zImage<br />Using default protocol (TFTP)<br />/<br />Raw file loaded 0x00800000-0x008fc7a7, assumed entry at 0x00800000<br />RedBoot&gt; fis create linux<br />... Erase from 0x50080000-0x50180000: ........<br />... Program from 0x00800000-0x008fc7a8 at 0x50080000: ........<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-ixp4xx-squashfs.img<br />Using default protocol (TFTP)<br />\<br />Raw file loaded 0x00800000-0x0093ffff, assumed entry at 0x00800000<br />RedBoot&gt; fis free<br />&nbsp; 0x50180000 .. 0x50FE0000<br />RedBoot&gt; fis create -l 0xe60000 rootfs<br />... Erase from 0x50180000-0x50fe0000: ...................................................................................................................<br />... Program from 0x00800000-0x00940000 at 0x50180000: ..........<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; fconfig<br />Run script at boot: true<br />Boot script: <br />.. fis load linux<br />.. exec<br />Enter script, terminate with empty line<br />&gt;&gt; fis load linux<br />&gt;&gt; exec<br />&gt;&gt; <br />Boot script timeout (100ms resolution): 25<br />Use BOOTP for network configuration: false<br />Gateway IP address: <br />Local IP address: 192.168.3.2<br />Local IP address mask: 255.255.255.0<br />Default server IP address: 192.168.3.1<br />Console baud rate: 115200<br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false<br />Default network device: npe_eth0<br />Update RedBoot non-volatile configuration - continue (y/n)? y<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; reset<br />... Resetting.<br />+<br />Trying NPE-B...success. Using NPE-B with PHY 0.<br />Ethernet eth0: MAC address 00:d0:12:03:24:67<br />IP: 192.168.3.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.3.1</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Gateworks certified release, version 2.02 - built 05:22:19, Mar&nbsp; 3 2006</p><p>Platform: Gateworks Avila GW234X (IXP42X 533MHz) BE<br />Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.<br />Copyright (C) 2004, 2005 Gateworks Corporation</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.<br />== Executing boot script in 2.500 seconds - enter ^C to abort<br />RedBoot&gt; fis load linux<br />RedBoot&gt; exec<br />Using base address 0x00800000 and length 0x000fc7a8<br />Uncompressing Linux...................................................................... done, booting the kernel.<br />Linux version 2.6.26.2 (andy@devsandbox.padded-cell.net) (gcc version 4.1.2) #1 Thu Aug 21 08:05:12 PDT 2008<br />CPU: XScale-IXP42x Family [690541c1] revision 1 (ARMv5TE), cr=000039ff<br />Machine: Intel IXDP425 Development Platform<br />Memory policy: ECC disabled, Data cache writeback<br />CPU0: D VIVT undefined 5 cache<br />CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200 init=/etc/preinit<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 64MB = 64MB total<br />Memory: 62720KB available (1920K code, 182K data, 100K init)<br />SLUB: Genslabs=12, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />net_namespace: 640 bytes<br />NET: Registered protocol family 16<br />IXP4xx: Using 16MiB expansion bus window size<br />PCI: IXP4xx is host<br />PCI: IXP4xx Using direct access for memory space<br />PCI: bus0: Fast back to back transfers enabled<br />dmabounce: registered device 0000:00:01.0 on pci bus<br />dmabounce: registered device 0000:00:02.0 on pci bus<br />dmabounce: registered device 0000:00:03.0 on pci bus<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />IXP4xx Queue Manager initialized.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ï¿½Â© 2001-2006 Red Hat, Inc.<br />msgmni has been set to 122<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale<br />console [ttyS0] enabled<br />serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale<br />eth0: MII PHY 0 on NPE-B<br />eth1: MII PHY 1 on NPE-C<br />IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000<br />5 RedBoot partitions found on MTD device IXP4XX-Flash.0<br />Creating 5 MTD partitions on &quot;IXP4XX-Flash.0&quot;:<br />0x00000000-0x00080000 : &quot;RedBoot&quot;<br />0x00080000-0x00180000 : &quot;linux&quot;<br />0x00180000-0x00fe0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2A0000, len=D40000 <br />0x002a0000-0x00fe0000 : &quot;rootfs_data&quot;<br />0x00fe0000-0x00fff000 : &quot;FIS directory&quot;<br />0x00fff000-0x01000000 : &quot;RedBoot config&quot;<br />i2c /dev entries driver<br />ds1672 0-0068: chip found, driver version 0.4<br />ds1672 0-0068: rtc core: registered ds1672 as rtc0<br />i2c-gpio i2c-gpio.0: using pins 7 (SDA) and 6 (SCL)<br />ad7418 0-0028: ad7418 chip found<br />ad7418 0-0028: configuring for mode 1<br />IXP4xx Watchdog Timer: heartbeat 60 sec<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />XScale DSP coprocessor detected.<br />ds1672 0-0068: setting system clock to 2009-08-25 08:37:12 UTC (1251189432)<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing init memory: 100K<br />Please be patient, while OpenWrt loads ...<br />- preinit -<br />Press CTRL-C for failsafe<br />jffs2 not ready yet; using ramdisk<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /tmp/root<br />- init -</p><p>Please press Enter to activate this console. br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.<br />PPP generic driver version 2.4.2<br />ipt_time loading<br />wlan: trunk<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.10.5.6 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, RF2417, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: trunk<br />PCI: enabling device 0000:00:01.0 (0340 -&gt; 0342)<br />wifi0: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi0: Atheros 5413: mem=0x48000000, irq=28<br />PCI: enabling device 0000:00:02.0 (0340 -&gt; 0342)<br />wifi1: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi1: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi1: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi1: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi1: Atheros 5413: mem=0x48010000, irq=27<br />PCI: enabling device 0000:00:03.0 (0340 -&gt; 0342)<br />wifi2: 11a rates: 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi2: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi2: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi2: H/W encryption support: WEP AES AES_CCM TKIP<br />ath_pci: wifi2: Atheros 5413: mem=0x48020000, irq=26<br />jffs2_scan_eraseblock(): End of filesystem marker found at 0x0<br />jffs2_build_filesystem(): unlocking the mtd device... done.<br />jffs2_build_filesystem(): erasing all blocks after the end marker... done.<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs</p><br /><br /><p>BusyBox v1.11.1 (2008-08-21 06:06:00 PDT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r12359) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/# ifconfig -a<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 22:1C:41:0A:7A:45&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:402 (402.0 B)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:00:00:00:00:00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:00:00:00:00:00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>wifi0&nbsp; &nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-80-48-4F-24-EA-00-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:195 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:28 </p><p>wifi1&nbsp; &nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-80-48-4F-24-D4-00-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:195 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:27 </p><p>wifi2&nbsp; &nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-80-48-4F-24-DA-00-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:195 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:26 </p><p>root@OpenWrt:/# </p><br /><br /><br /><p>Kind regards;<br />//Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72623">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						25 Aug 2008, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Just noticed you were using openwrt-ixp4xx-zImage as the kernel. Your avila has an old RedBoot binary, which passes a wrong machine id to the linux kernel. Please use the kernel named openwrt-avila-zImage, and everything should be fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72624">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						25 Aug 2008, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>Oh well, you great&nbsp; Kaloz!!! It works.</p><p>Just some nagging questions: <br />1. How should I have picked this up? What did I miss?<br />2. Why is openwrt-ixp4xx-zImage is being created? What is it used for?</p><p>For these next questions please advice if I need to open a new thread.<br />I&#039;d like to embed the roofs into the kernel so that I have only one file. How can I do this? Reason: We&#039;ll be deploying 100s of these boards and want to make the firmware upgrade easy.<br />Avila does not have NVRAM to store my configuration to be persistent across upgrades. My initial idea is to first load (using Redboot) a dummy/config file of fixed length (say, 1 Meg), and then load the kernel and roofs later. Will this config file be accessible (say, as a partition) from within the Linux file system so that all config is stored there?.<br />Any ideas will be highly appreciated.</p><p>Kaloz, thank you very much for your patience.</p><p>Kind regards<br />//Socrates</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72625">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						25 Aug 2008, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>1. The line &quot;Machine: Intel IXDP425 Development Platform&quot; clearly says it didn&#039;t identify your system as an Avila <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />2. It&#039;s the same kernel as openwrt-ixp4xx-zImage, just with an arm instruction prepended which sets the machine id register to the right value.</p><p>A single image won&#039;t work due to how RedBoot works, and having a ramdisk isn&#039;t too comfortable. The method you&#039;ve mentioned wouldn&#039;t really work that way, but the good news is that we are working on a method to upgrade without losing changes. I&#039;ll ask the others about the status and get back to you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72627">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">socrates</div>
					<div class="post-datetime">
						25 Aug 2008, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi Kaloz</p><p>Much appreciated. Thanks a lot Kaloz.</p><p>Will hear from you on the upgrade process.</p><p>Regards;<br />//Socrates</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>