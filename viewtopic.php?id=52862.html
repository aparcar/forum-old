<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Status 127 when opkg configures packages (TP-Link WDR4300)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p247732">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">keranoz</div>
					<div class="post-datetime">
						22 Sep 2014, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Lately I&#039;m getting a lot of errors from opkg:</p><p>[spoiler]<br /></p><div class="codebox"><pre><code>Configuring libpthread.
//usr/lib/opkg/info/libpthread.postinst: line 3: default_postinst: not found
Configuring luci-theme-freifunk-bno.
//usr/lib/opkg/info/luci-theme-freifunk-bno.postinst: line 4: default_postinst: not found
Configuring luci-theme-openwrt.
//usr/lib/opkg/info/luci-theme-openwrt.postinst: line 4: default_postinst: not found
Configuring shadow-su.
//usr/lib/opkg/info/shadow-su.postinst: line 4: default_postinst: not found
Configuring unzip.
//usr/lib/opkg/info/unzip.postinst: line 4: default_postinst: not found
Configuring luci-theme-freifunk-generic.
//usr/lib/opkg/info/luci-theme-freifunk-generic.postinst: line 4: default_postinst: not found
Configuring bind-libs.
//usr/lib/opkg/info/bind-libs.postinst: line 4: default_postinst: not found
Configuring uclibcxx.
//usr/lib/opkg/info/uclibcxx.postinst: line 4: default_postinst: not found
Configuring unrar.
//usr/lib/opkg/info/unrar.postinst: line 4: default_postinst: not found
Configuring ca-certificates.
Configuring bind-dig.
//usr/lib/opkg/info/bind-dig.postinst: line 4: default_postinst: not found
Configuring zip.
//usr/lib/opkg/info/zip.postinst: line 4: default_postinst: not found
Collected errors:
 * pkg_run_script: package &quot;libpthread&quot; postinst script returned status 127.
 * opkg_configure: libpthread.postinst returned 127.
 * pkg_run_script: package &quot;luci-theme-freifunk-bno&quot; postinst script returned status 127.
 * opkg_configure: luci-theme-freifunk-bno.postinst returned 127.
 * pkg_run_script: package &quot;luci-theme-openwrt&quot; postinst script returned status 127.
 * opkg_configure: luci-theme-openwrt.postinst returned 127.
 * pkg_run_script: package &quot;shadow-su&quot; postinst script returned status 127.
 * opkg_configure: shadow-su.postinst returned 127.
 * pkg_run_script: package &quot;unzip&quot; postinst script returned status 127.
 * opkg_configure: unzip.postinst returned 127.
 * pkg_run_script: package &quot;luci-theme-freifunk-generic&quot; postinst script returned status 127.
 * opkg_configure: luci-theme-freifunk-generic.postinst returned 127.
 * pkg_run_script: package &quot;bind-libs&quot; postinst script returned status 127.
 * opkg_configure: bind-libs.postinst returned 127.
 * pkg_run_script: package &quot;uclibcxx&quot; postinst script returned status 127.
 * opkg_configure: uclibcxx.postinst returned 127.
 * pkg_run_script: package &quot;unrar&quot; postinst script returned status 127.
 * opkg_configure: unrar.postinst returned 127.
 * pkg_run_script: package &quot;bind-dig&quot; postinst script returned status 127.
 * opkg_configure: bind-dig.postinst returned 127.
 * pkg_run_script: package &quot;zip&quot; postinst script returned status 127.
 * opkg_configure: zip.postinst returned 127.</code></pre></div><p>[/spoiler]</p><p>When I install a package I get all these errors, doesn&#039;t what I install. I don&#039;t know what is causing them.<br />Running opkg configure does not work, it presents me with this same list of errors.<br />Can it be because I installed packages from the trunk folder?</p><p>I have read this: <a href="https://forum.openwrt.org/viewtopic.php?id=44881">https://forum.openwrt.org/viewtopic.php?id=44881</a> But the solution did not work.<br />I&#039;ve also read this ticket: <a href="https://dev.openwrt.org/ticket/13735">https://dev.openwrt.org/ticket/13735</a> But there&#039;s no solution there as far as I can see.</p><p>Does anybody know what is causing this and how to fix it?</p><p>Thanks in advance!</p><p>Edit: Even tho I see errors here, some packages, if not all, do function!</p><p>Edit2: I think I should mention what router I have ;p It&#039;s a TP-Link TL-WDR4300 (ar71xx)</p>											<p class="post-edited">(Last edited by <strong>keranoz</strong> on 22 Sep 2014, 13:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247767">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">spencer</div>
					<div class="post-datetime">
						22 Sep 2014, 19:40					</div>
				</div>
				<div class="post-content content">
					<p>If you figure out a solution before someone replies, I&#039;d like to know as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247942">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wingspinner</div>
					<div class="post-datetime">
						24 Sep 2014, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>You didn&#039;t say what version and snapshot you are using but I&#039;ll assume you are using a trunk snapshot because that&#039;s where I also saw the problem. Somehow this got broken in one of the trunk revisions awhile back. It was just fixed in a revision a couple of weeks ago. Use the latest version of trunk and problem solved.</p><p>Cheers...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248251">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						27 Sep 2014, 10:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>keranoz wrote:</cite><blockquote><p>Can it be because I installed packages from the trunk folder?</p></blockquote></div><p>Probably.</p><p>Error 127 occurs:<br /><a href="https://www.mail-archive.com/openwrt-tickets@lists.openwrt.org/msg04149.html">https://www.mail-archive.com/openwrt-ti … 04149.html</a></p><p>Solution:<br /><a href="https://www.mail-archive.com/openwrt-tickets@lists.openwrt.org/msg04153.html">https://www.mail-archive.com/openwrt-ti … 04153.html</a></p><p>-&gt; change your opkg.conf, so it points to BB i/o trunk.</p><p>Did that, now it works for me (after I force removed and re-installed the packages that produced the errors).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249145">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">xciton</div>
					<div class="post-datetime">
						4 Oct 2014, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Same problem, fresh git checkout of BB 14.07 from yesterday.</p><p>Edit:</p><p>Replacing the URLs path with: <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/packages">http://downloads.openwrt.org/barrier_br … c/packages</a> fixes the issue.</p>											<p class="post-edited">(Last edited by <strong>xciton</strong> on 5 Oct 2014, 06:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253851">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ppj</div>
					<div class="post-datetime">
						10 Nov 2014, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>Same problem here with CC</p><div class="codebox"><pre><code>root@openwrt:/tmp# opkg install libpopt_1.7-5_ramips_24kec.ipk
Installing libpopt (1.7-5) to root...
Configuring libpopt.
//usr/lib/opkg/info/libpopt.postinst: line 4: default_postinst: not found
Collected errors:
 * pkg_run_script: package &quot;libpopt&quot; postinst script returned status 127.
 * opkg_configure: libpopt.postinst returned 127.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259922">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">craigcrawford</div>
					<div class="post-datetime">
						4 Jan 2015, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>I had this problem upgrading from a trunk 14.07. I fixed it like so:<br /></p><ol class="decimal"><li><p>Login to your router and navigate to System -&gt; Backup / Flash Firmware.</p></li><li><p>Click Generate archive and open it up in 7-Zip.</p></li><li><p>Navigate through the folders and files and DELETE everything that you DON&#039;T need or haven&#039;t changed. For example, I deleted everything except the likes of /etc/config/firewall, wireless, etc.</p></li><li><p>Flash the system upgrade and make sure you tell Luci to delete config files so you have a fresh install.</p></li><li><p>After reboot, restore the backup you edited.</p></li></ol>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>