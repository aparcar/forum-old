<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> backup firmware ; possible ??</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p195150">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">thierry69</div>
					<div class="post-datetime">
						17 Mar 2013, 15:02					</div>
				</div>
				<div class="post-content content">
					<p>hello ,</p><p>after a lot of time working on my tplink (wr703n), is it possible to make a. bin of my router?</p><p>to&nbsp; flash again it if i make a mistake.</p><p>thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195152">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DB1</div>
					<div class="post-datetime">
						17 Mar 2013, 15:20					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know but it would be quite useful to be able to do that. Someone will be along to say yes or no.</p><p>Other than the possibility of a bin,&nbsp; the GUI will save the config files from /etc and etc/config but it uses a list so if you have a &quot;foo&quot; in there it won&#039;t get saved. You are supposed to be able to re-flash and it keep the config I think. In any case you can put it back with the GUI and I have doen that several times. </p><p>As for the rest of the system I have always had a problem in how to backup *nix systems. What you could do is keep a shell script on your PC and every time you opkg install something add the install command line to the script so if you have start again you can run that once re-flashed. You would also need to save any of those package&#039;s configs too.</p><p>HTH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195155">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">thierry69</div>
					<div class="post-datetime">
						17 Mar 2013, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>thank you,,</p><p>using&nbsp; the luci interface backup files ,&nbsp; this is better than nothing&nbsp; &nbsp;thanks a lot ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195157">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						17 Mar 2013, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>dd should do it.<br />Take a look here: <a href="http://wiki.openwrt.org/doc/howto/generic.backup">http://wiki.openwrt.org/doc/howto/generic.backup</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195191">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dabyd64</div>
					<div class="post-datetime">
						17 Mar 2013, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>The fast and simple way: In wr703: copy the whole mtd5.<br />I mean:<br />cat /dev/mtd5 &gt;/tmp/backup.bin<br />Download that file to your computer.</p><p>That&#039;s it. You got the full backup of the firmware (root+rootfs_data).<br />To restore? Transfer it to /tmp in router.<br />sysupgrade -v -n backup.bin<br />(the -n is to not preserve the current config in the router, as you will overwrite it)</p><p>I did this 10&#039;s of times, always worked.<br />TIP: Always reboot the router before upgrading, to ensure a clean system.<br />I got some bricks due the router crashing in the middle of the upgrade, I think it was caused due it had been running for days or weeks and tried to upgrade without rebooting first.</p>											<p class="post-edited">(Last edited by <strong>dabyd64</strong> on 17 Mar 2013, 20:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195464">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">thierry69</div>
					<div class="post-datetime">
						20 Mar 2013, 07:30					</div>
				</div>
				<div class="post-content content">
					<p>Ok..thank you for your reply.&nbsp; I try it</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195912">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">thierry69</div>
					<div class="post-datetime">
						24 Mar 2013, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>ok i copied the file by http</p><p>opkg update <br />opkg install uhttpd<br />uhttpd start</p><p>ln -s /tmp/backup.bin /www/backup.bin</p><p>and access to via my browser </p><p>thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195922">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						24 Mar 2013, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>/tmp does not survive a reboot (it is RAM).</p><div class="codebox"><pre><code>ln -s /tmp/backup.bin /www/backup.bin</code></pre></div><p>makes a link, it doesn&#039;t copy the backup.<br />Or am I missing something here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195927">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						24 Mar 2013, 16:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>Or am I missing something here?</p></blockquote></div><p>thierry69 was using uhttpd to copy backup.bin out of the router, instead of using scp or something similar.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195929">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						24 Mar 2013, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>In general it makes no sense to backup the whole firmware if you are using the &quot;normal&quot; squashfs version. You can easily re-flash the same binary firmware that you used originally (as long as you keep a copy of that binary safe), and all your later changes are in /overlay, which is much smaller to backup. Backuping /overlay should be enough for most users.</p><p>Personally I am using a self-compiled firmware, so all the packages are already there, and backuping only a few config files from /etc and /etc/config is enough for me.</p><p>There is also a handy script to reinstall all the packages after a re-flash, in case you need to do that. The script stores the install list in /etc/config so that it gets included in the config file backup... Read <a href="https://forum.openwrt.org/viewtopic.php?pid=194478#p194478">https://forum.openwrt.org/viewtopic.php â€¦ 78#p194478</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 24 Mar 2013, 17:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p195939">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">thierry69</div>
					<div class="post-datetime">
						24 Mar 2013, 18:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>phuque99 wrote:</cite><blockquote><div class="quotebox"><cite>robthebrew wrote:</cite><blockquote><p>Or am I missing something here?</p></blockquote></div><p>thierry69 was using uhttpd to copy backup.bin out of the router, instead of using scp or something similar.</p></blockquote></div><p>yes it&#039;s the easy way for me to backup my installation , because i am not a specialist of linux and i do lot of&nbsp; crach system&nbsp; <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>