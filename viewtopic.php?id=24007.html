<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Multiple pppoe sessions over same link</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p105169">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vma</div>
					<div class="post-datetime">
						24 Mar 2010, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I am trying to configure 2 pppoe accounts over the same wire with linksys wrt54gl and kamikaze 8.09.2 (brcm-2.4.) My provider gave me 2 pppoe accounts to be used with the same vpi but different vci (35 for the first and 50 for the second.)</p><p>I have defined 2 wan sections in /etc/config/network:</p><p>config &#039;interface&#039; &#039;wan1&#039;<br />&nbsp; option &#039;ifname&#039; &#039;eth0.1&#039;<br />&nbsp; option &#039;proto&#039; &#039;pppoe&#039;<br />&nbsp; option &#039;username&#039; &#039;wan1user&#039;<br />&nbsp; option &#039;password&#039; &#039;wan1passwd&#039;<br />&nbsp; option &#039;vpi&#039; &#039;8&#039;<br />&nbsp; option &#039;vci&#039; &#039;35&#039;<br />&nbsp; option &#039;defaultroute&#039; &#039;1&#039;</p><p>config &#039;interface&#039; &#039;wan2&#039;<br />&nbsp; option &#039;ifname&#039; &#039;eth0.1&#039;<br />&nbsp; option &#039;proto&#039; &#039;pppoe&#039;<br />&nbsp; option &#039;username&#039; &#039;wan2user&#039;<br />&nbsp; option &#039;password&#039; &#039;wan2passwd&#039;<br />&nbsp; option &#039;vpi&#039; &#039;8&#039;<br />&nbsp; option &#039;vci&#039; &#039;50&#039;<br />&nbsp; option &#039;defaultroute&#039; &#039;0&#039;</p><p>When I do &#039;ifup wan1&#039;, it works fine: I am connected with the IP address affected to the first account. Bt then, if I do &#039;ifup wan2&#039;, the router kills the first session before starting the second one and I have the following on the syslog:</p><p>Mar 24 13:23:31 OpenWrt daemon.info pppd[12315]: Terminating on signal 15<br />Mar 24 13:23:31 OpenWrt daemon.info pppd[12315]: Connect time 2.7 minutes.<br />Mar 24 13:23:31 OpenWrt daemon.info pppd[12315]: Sent 0 bytes, received 0 bytes.<br />Mar 24 13:23:31 OpenWrt daemon.notice pppd[12315]: Connection terminated.<br />Mar 24 13:23:32 kernel: eth0.1: del 01:00:5e:00:00:01 mcast address from vlan interface<br />Mar 24 13:23:32 kernel: eth0.1: del 01:00:5e:00:00:01 mcast address from master interface<br />Mar 24 13:23:33 kernel: eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />Mar 24 13:23:34 OpenWrt daemon.info pppd[12482]: Plugin rp-pppoe.so loaded.<br />Mar 24 13:23:34 OpenWrt daemon.notice pppd[12483]: pppd 2.4.3 started by root, uid 0<br />Mar 24 13:23:40 OpenWrt daemon.info pppd[12483]: PPP session is 6528<br />Mar 24 13:23:40 OpenWrt daemon.info pppd[12483]: Using interface ppp0<br />Mar 24 13:23:40 OpenWrt daemon.notice pppd[12483]: Connect: ppp0 &lt;--&gt; eth0.1<br />Mar 24 13:23:40 OpenWrt daemon.info pppd[12483]: CHAP authentication succeeded</p><p>Any help on how to make this work ? I am really out of idea...<br />Thank you !<br />- vma</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364112">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Inc0</div>
					<div class="post-datetime">
						22 Aug 2017, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>&nbsp; i know this message is quite old but i&#039;m having the same problem.<br />Did you manage to fix it? How?</p><br /><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364115">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mikma</div>
					<div class="post-datetime">
						22 Aug 2017, 13:46					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t use pppoe myself, but I guess you may need to use two mac addresses, one for each pppoe instance.</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=65025">https://forum.openwrt.org/viewtopic.php?id=65025</a></p>											<p class="post-edited">(Last edited by <strong>mikma</strong> on 22 Aug 2017, 13:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364123">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Inc0</div>
					<div class="post-datetime">
						22 Aug 2017, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks. I&#039;ll give it a try.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>