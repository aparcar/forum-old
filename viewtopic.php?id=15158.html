<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Installing CDMA modem on OpenWrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p66264">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">radu</div>
					<div class="post-datetime">
						3 Apr 2008, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody!</p><p>I have a ASUS WL-500G Premium router and I recently installed Kamikaze 7.09 on it. I have the following packages installed:</p><p>base-files-brcm47xx-2.6 10-9078&nbsp; <br />bridge 1.0.6-1&nbsp; <br />busybox 1.4.2-2&nbsp; <br />deco 39-1&nbsp; <br />dnsmasq 2.39-1&nbsp; <br />dropbear 0.50-2&nbsp; <br />fdisk 2.12r-2&nbsp; <br />haserl 0.8.0-2&nbsp; <br />hotplug2 0.9+r102-2&nbsp; <br />iptables 1.3.7-1&nbsp; <br />kernel 2.6.22-brcm47xx-1&nbsp; <br />kmod-diag 2+2.6.22-brcm47xx-1&nbsp; <br />kmod-fs-vfat 2.6.22-brcm47xx-1&nbsp; <br />kmod-madwifi 2.6.22+r2568-20070710-brcm47xx-2&nbsp; <br />kmod-nls-base 2.6.22-brcm47xx-1&nbsp; <br />kmod-ppp 2.6.22-brcm47xx-1&nbsp; <br />kmod-pppoe 2.6.22-brcm47xx-1&nbsp; <br />kmod-scsi-core 2.6.22-brcm47xx-1&nbsp; <br />kmod-switch 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-acm 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-core 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-ohci 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-serial 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-serial-airprime 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb-storage 2.6.22-brcm47xx-1&nbsp; <br />kmod-usb2 2.6.22-brcm47xx-1&nbsp; <br />libgcc 4.1.2-10&nbsp; <br />libncurses 5.6-1&nbsp; <br />libusb 0.1.12-1&nbsp; <br />mtd 5&nbsp; <br />ppp 2.4.3-8&nbsp; <br />ppp-mod-pppoe 2.4.3-8&nbsp; <br />uclibc 0.9.28-10&nbsp; <br />udevtrigger 106-1&nbsp; <br />usbutils 0.72-1&nbsp; <br />webif 0.3-8&nbsp; <br />wireless-tools 29-1&nbsp; </p><p>I&#039;m trying to install a ZAPP 010 CDMA modem and connect to the internet using EVDO. The problem is that I don&#039;t see the modem with lsusb. On the other hand, if I put a USB memory stick I see it immediately.</p><p>Could you please help me with this matter?</p><p>Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66285">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">snowyowlster</div>
					<div class="post-datetime">
						4 Apr 2008, 00:45					</div>
				</div>
				<div class="post-content content">
					<p>CDMA or GSM modems should behave somewhat similar. You can find useful links if you google for openwrt and UMTS. <br />Please tell us what dmesg reports. </p><p>One useful link is <br /><a href="http://josefsson.org/grisslan/internet.html">http://josefsson.org/grisslan/internet.html</a></p><p>It mentions the following which may have some connection to your issue</p><p>--Snip</p><p>With Kamikaze 7.06, you may get an error in the kernel log since the Huawei USB ID is not recognized. Note that this has been fixed in both 7.07 and 7.09.</p><p>usb.c: USB device 2 (vend/prod 0x12d1/0x1001) is not claimed by any active driver.To fix this in 7.06 (although I suggest upgrading to 7.07 or 7.09 instead), you&#039;ll need to load the â€œusbserialâ€&nbsp; kernel module with the â€œvendor=0x12d1 product=0x1001â€&nbsp; parameters. To make this be loaded automatically every time the box starts, modify â€œ/etc/modules.d/60-usb-serialâ€&nbsp; into:</p><p>usbserial vendor=0x12d1 product=0x1001 # Huawei E600</p><p>---End snip</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66454">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">radu</div>
					<div class="post-datetime">
						7 Apr 2008, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried that solution and I still didn&#039;t see the CDMA modem. </p><p>Here is my dmesg:</p><p>root@OpenWrt:~# dmesg<br />Linux version 2.6.22 (nbd@ds10) (gcc version 4.1.2) #2 Sun Sep 30 20:38:47 CEST 2007<br />CPU revision is: 00029006<br />ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x03, vendor 0x4243)<br />ssb: Core 1 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)<br />ssb: Core 2 found: Fast Ethernet (cc 0x806, rev 0x06, vendor 0x4243)<br />ssb: Core 3 found: USB 1.1 Hostdev (cc 0x808, rev 0x03, vendor 0x4243)<br />ssb: Core 4 found: PCI (cc 0x804, rev 0x08, vendor 0x4243)<br />ssb: Core 5 found: MIPS 3302 (cc 0x816, rev 0x03, vendor 0x4243)<br />ssb: Core 6 found: V90 (cc 0x807, rev 0x02, vendor 0x4243)<br />ssb: Core 7 found: IPSEC (cc 0x80B, rev 0x00, vendor 0x4243)<br />ssb: Core 8 found: MEMC SDRAM (cc 0x80F, rev 0x02, vendor 0x4243)<br />ssb: Initializing MIPS core...<br />ssb: set_irq: core 0x0806, irq 2 =&gt; 2<br />ssb: set_irq: core 0x0806, irq 3 =&gt; 3<br />ssb: set_irq: core 0x0804, irq 0 =&gt; 4<br />ssb: Sonics Silicon Backplane found at address 0x18000000<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />On node 0 totalpages: 8192<br />&nbsp; Normal zone: 64 pages used for memmap<br />&nbsp; Normal zone: 0 pages reserved<br />&nbsp; Normal zone: 8128 pages, LIFO batch:0<br />Built 1 zonelists.&nbsp; Total pages: 8128<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 16kB, 2-way, linesize 16 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (31 instructions).<br />Synthesized TLB modify handler fastpath (30 instructions).<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Using 132.000 MHz high precision timer.<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 29872k/32768k available (2030k kernel code, 2896k reserved, 297k data, 120k init, 0k highmem)<br />Calibrating delay loop... 263.16 BogoMIPS (lpj=526336)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />ssb: PCIcore in host mode found<br />registering PCI controller with io_map_base unset<br />PCI: fixing up bridge<br />PCI: Setting latency timer of device 0000:00:00.0 to 64<br />PCI: Fixing up device 0000:00:00.0<br />Time: MIPS clocksource has been installed.<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) Â© 2001-2006 Red Hat, Inc.<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing enabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />b44.c:v1.01 (Jun 16, 2006)<br />eth0: Broadcom 10/100BaseT Ethernet 00:1d:60:52:53:d0<br />eth1: Broadcom 10/100BaseT Ethernet 40:10:18:00:00:2d<br />flash init: 0x1c000000 0x02000000<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />Physically mapped flash: CFI does not contain boot bank location. Assuming top.<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Flash device: 0x800000 at 0x1fc00000<br />bootloader size: 262144<br />Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;cfe&quot;<br />0x00040000-0x007f0000 : &quot;linux&quot;<br />0x000f8000-0x007f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x00200000-0x007f0000 : &quot;rootfs_data&quot;<br />0x007f0000-0x00800000 : &quot;nvram&quot;<br />nf_conntrack version 0.5.0 (256 buckets, 2048 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP vegas registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 120k freed<br />Warning: unable to open an initial console.<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;ASUS WL-500g Premium&#039;<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />Probing device eth0: found!<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />BFL_ENETADM not set in boardflags. Use force=1 to ignore.<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />device eth0.0 entered promiscuous mode<br />usbcore: registered new device driver usb<br />eth0.0: dev_set_promiscuity(master, 1)<br />device eth0 entered promiscuous mode<br />eth0.0: add 01:00:5e:00:00:01 mcast address to master interface<br />br-lan: port 1(eth0.0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0.0) entering forwarding state<br />PPP generic driver version 2.4.2<br />wlan: 0.8.4.2 (svn r2568)<br />eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: 0.9.4.5 (svn r2568)<br />ohci_hcd: 2006 August 04 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />PCI: Enabling device 0000:00:03.2 (0000 -&gt; 0002)<br />PCI: Fixing up device 0000:00:03.2<br />ehci_hcd 0000:00:03.2: EHCI Host Controller<br />ehci_hcd 0000:00:03.2: new USB bus registered, assigned bus number 1<br />ehci_hcd 0000:00:03.2: irq 6, io mem 0x40000000<br />ehci_hcd 0000:00:03.2: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 4 ports detected<br />usbcore: registered new interface driver cdc_acm<br />drivers/usb/class/cdc-acm.c: v0.25:USB Abstract Control Model driver for USB modems and ISDN adapters<br />usbcore: registered new interface driver usbserial<br />drivers/usb/serial/usb-serial.c: USB Serial support registered for generic<br />usbcore: registered new interface driver usbserial_generic<br />drivers/usb/serial/usb-serial.c: USB Serial Driver core<br />SCSI subsystem initialized<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />drivers/usb/serial/usb-serial.c: USB Serial support registered for airprime<br />usbcore: registered new interface driver airprime</p><p>Here is my lsmod:</p><p>root@OpenWrt:~# lsmod<br />Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by&nbsp; &nbsp; Tainted: P<br />airprime&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4752&nbsp; 0<br />usb_storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 27664&nbsp; 0<br />sd_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;18416&nbsp; 0<br />scsi_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;71968&nbsp; 2 usb_storage,sd_mod<br />usbserial&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 24032&nbsp; 1 airprime<br />cdc_acm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 10896&nbsp; 0<br />ehci_hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;28016&nbsp; 0<br />ohci_hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14064&nbsp; 0<br />ath_pci&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 94384&nbsp; 0<br />wlan_xauth&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;480&nbsp; 0<br />wlan_wep&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4000&nbsp; 0<br />wlan_tkip&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9664&nbsp; 0<br />wlan_ccmp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5408&nbsp; 0<br />wlan_acl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1888&nbsp; 0<br />ath_rate_minstrel&nbsp; &nbsp; &nbsp; &nbsp;7840&nbsp; 0<br />ath_hal&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;271168&nbsp; 2 ath_pci,ath_rate_minstrel<br />wlan_scan_sta&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8736&nbsp; 0<br />wlan_scan_ap&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2624&nbsp; 0<br />wlan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 146400&nbsp; 9 ath_pci,wlan_xauth,wlan_wep,wlan_tkip,wlan_ccmp,wlan_acl,ath_rate_minstrel,wlan_scan_sta,wlan_scan_ap<br />ppp_async&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9664&nbsp; 0<br />ppp_generic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20000&nbsp; 1 ppp_async<br />slhc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 5408&nbsp; 1 ppp_generic<br />crc_ccitt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1024&nbsp; 1 ppp_async<br />vfat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8512&nbsp; 0<br />fat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 42448&nbsp; 1 vfat<br />usbcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;102032&nbsp; 7 airprime,usb_storage,usbserial,cdc_acm,ehci_hcd,ohci_hcd<br />nls_base&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 4416&nbsp; 2 vfat,fat<br />switch_robo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4048&nbsp; 0<br />switch_core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5056&nbsp; 1 switch_robo<br />diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8272&nbsp; 0</p><p>Here is my lsusb:</p><p>root@OpenWrt:~# lsusb<br />Bus 001 Device 001: ID 0000:0000</p><p>I put the modem in a PC on linux and it has been recognized immediatly.</p><p>Any ideas?</p><p>Thank you, <br />Radu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66461">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">snowyowlster</div>
					<div class="post-datetime">
						7 Apr 2008, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>From the wiki<br /><a href="http://wiki.openwrt.org/MobileAPHowTo2">http://wiki.openwrt.org/MobileAPHowTo2</a><br />It appears that usb-ohci should be running as a module. I don&#039;t see it in your lsmod output<br />So try insmod usb-ohci&nbsp; and see if that makes a difference</p><p>Also try to compare the dmesg output from your linux PC&nbsp; with that from the Asus wl500gp and<br />see if you can see what is missing. </p><p>Since you are working with a linux 2.6.x kernel - this should eventually work - you will just need to continue persevering and google aroud a bit. You might want to also post the question in the Zapp forums and in other linux groups in your country.</p><p>You can also try the openwrt IRC&nbsp; and you might get lucky and find someone who is willing to help.&nbsp; <br />Since I haven&#039;t used this modem myself, I&#039;m sorry I don&#039;t have more specific suggestions for you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p66481">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">yellowbug</div>
					<div class="post-datetime">
						7 Apr 2008, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>You should blame the weeny power supply, I experienced the similar problem before, My wl-500gp box cannt find my 2.5&quot; usb disk, I guess it should be a power supply problem, So I Change the 5V-2.5A supply with a 5V-3A one, It works like a charm. The usb disk works ok now.<br />As my experience, Atheros wifi seems need more power consumption than Broadcom&#039;s, Since it never happened when I use the Broadcom&#039;s before.<br />And, As I notice, More RJ-45 cable connected devices will cause more power consumption, So cut down some cable connected devices or shutdown the atheros wifi first if possible, Obviously,Change the power supply is&nbsp; a more direct path.</p>											<p class="post-edited">(Last edited by <strong>yellowbug</strong> on 8 Apr 2008, 10:27)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>