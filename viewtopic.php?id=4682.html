<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> gpio package source code</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p22138">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ALuedtke</div>
					<div class="post-datetime">
						5 Mar 2006, 16:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi developers,</p><p>could someone please tell me where I could find the source code for the <strong>gpio</strong> package? I&#039;ve been told that probably <strong>mbm</strong> is the developer and I wrote him an e-mail last week, but he didn&#039;t answer yet. Maybe he&#039;s not the original author.</p><p>I&#039;m also new in &quot;package writing&quot;, so any hint is much appreciated.</p><p>Thanks</p><p>Andreas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22139">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">wtzm</div>
					<div class="post-datetime">
						5 Mar 2006, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>Just google for gpio.tar.gz.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22141">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						5 Mar 2006, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>If you look in utils directory on download site you will find gpio.tar.gz.</p><p>However last time I tried it, it contained only this statement:</p><p>What happened to the GPIO utility?</p><p>GPIO is a &#039;general purpose io&#039;, which depending on your point of view<br />is either a register that controls a hardware io or vice versa. The<br />gpio util was a diagnostic tool for controlling the GPIO pins, it was<br />never an intended as abstraction. Each device has the GPIO pins wired<br />slightly different, which is why we have abstractions like the ones in<br />/proc/sys/reset and /proc/sys/diag; using the gpio util to hardcode<br />GPIO numbers into scripts is just ignorant and stupid.</p><p>- mbm</p><p>So looks like you should use the /proc/sys/* interfaces.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22149">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wtzm</div>
					<div class="post-datetime">
						5 Mar 2006, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>The correct gpio.tar.gz is still available. Google will find it. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><div class="quotebox"><cite>vincentfox wrote:</cite><blockquote><p>However last time I tried it, it contained only this statement:</p><p>(...)<br />which is why we have abstractions like the ones in<br />/proc/sys/reset and /proc/sys/diag; using the gpio util to hardcode<br />GPIO numbers into scripts is just ignorant and stupid.</p><p>- mbm</p></blockquote></div><p>Well, the problem is that currently the diag interface let&#039;s you control at most the DMZ and DIAG leds (on some models). Although I agree that controlling leds should probably be done via the diag interface rather than through the gpio utility, this is currently not possible.<br />IMHO removing the gpio utility altogether isn&#039;t a wise move, as it is a useful diagnostic-utility and also referenced in the wiki so ALuedtke won&#039;t be the last one to ask why it has disappeared.<br />Just my two cent...</p>											<p class="post-edited">(Last edited by <strong>wtzm</strong> on 5 Mar 2006, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22151">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">flyashi</div>
					<div class="post-datetime">
						5 Mar 2006, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>The binary is still up in people/inh , and I have the source code saved.</p><p>[removed per request]</p><p>[mbm] must have had good reason to take it down, so his warning still applies. If you mess up your router by using this code, don&#039;t sue me (or [mbm] for that matter). [mbm] please dont sue me either. Thanks.</p><p> - Yasha</p><p>&quot;&lt;[olli]&gt; Flyashi, why the hell do you think [mbm] removed it?&quot;</p>											<p class="post-edited">(Last edited by <strong>flyashi</strong> on 5 Mar 2006, 19:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22152">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ALuedtke</div>
					<div class="post-datetime">
						5 Mar 2006, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for all your replies.</p><p>I wanted to modify the gpio package that is needed for the cisco-button package. The gpio &quot;poll&quot; mode is eating nearly all cpu cycles and I want to reduce this. </p><p>So, maybe there is a little difference between the polling gpio package and the gpio.tar.gz mentioned earlier in this thread?</p><p>I could also use the modified diag.o mentioned in this thread (<a href="http://forum.openwrt.org/viewtopic.php?pid=21112#p21112">http://forum.openwrt.org/viewtopic.php?pid=21112#p21112</a>). But as eatnumber1 said, he had problems using it. Is it advisible to use that diag.o on a WRT54GSv4 with RC4?</p><p>Andreas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22159">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wtzm</div>
					<div class="post-datetime">
						5 Mar 2006, 21:14					</div>
				</div>
				<div class="post-content content">
					<p>gpio.tar.gz is an archive, containing the gpio binary (most probably the same one you are using) and the sourcecode. If you want less cpu-usage, write your own program which usleep()s for some time between reading again from /dev/gpio/in.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22166">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						6 Mar 2006, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>I know that you can still download the utility; hell you can even get the utility directly from me if you ask nicely. You&#039;re missing the point entirely; I removed the sources for a reason, and I&#039;m getting rather sick of people trying to post links to the sources without understanding the reason they were removed in the first place.</p><p>Yes the gpio util can be used to toggle the gpio pins or to poll them, you can even do it directly with manipulation of the /dev/gpio files. The point is that you shouldn&#039;t do it directly; you should not just blindly flip a bit in memory and hope that it was the right gpio pin .. that&#039;s a horrible programming technique. There needs to be a validation of &quot;am I running on ____?&quot; before you can say for certain which gpio pin is mapped to what. This is why we have the /proc/sys/diag and /proc/sys/reset .. these will always be mapped to the correct gpio pins regardless of what device openwrt is running on; it&#039;s a concept known as a hardware abstraction. That&#039;s the whole point of this.</p><p>Yes, I&#039;m fully aware of the fact that you can&#039;t access every gpio device via /proc/sys and that not all platforms are properly supported. That&#039;s why I wrote the gpio utility; people could check which gpio pins their device used and could send in patches to fix the diag module. I never intended the gpio utility as a generic way of accessing the gpio.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22170">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						6 Mar 2006, 04:11					</div>
				</div>
				<div class="post-content content">
					<p>Wiki house-cleaning time then? Tons of references to gpio in there. Example:</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Customizing#head-551219d9df69d860bb3dbe9498eaab681c50cbb5">http://wiki.openwrt.org/OpenWrtDocs/Cus â€¦ 681c50cbb5</a></p><p>I am new here, so not sure it&#039;s appropriate for me to edit main-area documentation willy-nilly.</p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 6 Mar 2006, 04:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22188">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">wtzm</div>
					<div class="post-datetime">
						6 Mar 2006, 11:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>you should not just blindly flip a bit in memory and hope that it was the right gpio pin .. that&#039;s a horrible programming technique.</p></blockquote></div><p>Well, I certainly agree with your opinion; nevertheless the gpio util is useful and if someone uses it, it&#039;s their own responsibility - so if they screw up it&#039;s their own fault.</p><div class="quotebox"><blockquote><p>(...)send in patches to fix the diag module.</p></blockquote></div><p>Ticket #349. I only have one wl-500g and one wl-500g deluxe, so that&#039;s all I can do.</p>											<p class="post-edited">(Last edited by <strong>wtzm</strong> on 6 Mar 2006, 11:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23222">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">wtzm</div>
					<div class="post-datetime">
						20 Mar 2006, 10:58					</div>
				</div>
				<div class="post-content content">
					<p>Well I have to confess I&#039;m a little bit puzzled - on the one hand we were asked to provide patches for the diag module to get our hardware supported - on the other hand no one seems to care if such patches are provided.<br />Ticket #349 is still &quot;new&quot;. Could someone please take a look at it?<br />I have noticed that diag_led.c in whiterussian is newer than the kamikaze version (support for SES and AOSS leds); will this changes be ported over to kamikaze and/or should I provide a patch which applies to the whiterussian diag_led.c?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>