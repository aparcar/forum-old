<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> building openwrt for tl-wr1043nd, no .bin files</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p182826">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dreyk</div>
					<div class="post-datetime">
						9 Nov 2012, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Hello. Got a TP-Link TL-WR1043ND router, wanted openwrt installed. As I want some things as torrents, samba etc decided to build from source.<br />I&#039;ve checled ar71xx target and wr1043nd platform, the build succeeded, but i can&#039;t see the ...squashfs.bin image in the bin folder, all I can see is this</p><div class="codebox"><pre><code>total 54664
drwxr-xr-x 3 ubuntu ubuntu     4096 Nov  9 14:36 ./
drwxr-xr-x 4 ubuntu ubuntu     4096 Nov  9 15:09 ../
-rw-r--r-- 1 ubuntu ubuntu      695 Nov  9 14:36 md5sums
-rw-r--r-- 1 ubuntu ubuntu  8996995 Nov  9 14:30 openwrt-ar71xx-rootfs.tar.gz
-rw-r--r-- 1 ubuntu ubuntu 11534336 Nov  9 14:30 openwrt-ar71xx-root.jffs2-128k
-rw-r--r-- 1 ubuntu ubuntu 11534336 Nov  9 14:30 openwrt-ar71xx-root.jffs2-64k
-rw-r--r-- 1 ubuntu ubuntu  7077888 Nov  9 14:35 openwrt-ar71xx-root.squashfs
-rw-r--r-- 1 ubuntu ubuntu  7020548 Nov  9 14:35 openwrt-ar71xx-root.squashfs-4k
-rw-r--r-- 1 ubuntu ubuntu  1219078 Nov  9 14:30 openwrt-ar71xx-uImage-gzip.bin
-rw-r--r-- 1 ubuntu ubuntu   877316 Nov  9 14:30 openwrt-ar71xx-uImage-lzma.bin
-rwxr-xr-x 1 ubuntu ubuntu  2705668 Nov  9 14:28 openwrt-ar71xx-vmlinux.bin*
-rwxr-xr-x 1 ubuntu ubuntu  2772060 Nov  9 14:28 openwrt-ar71xx-vmlinux.elf*
-rw-r--r-- 1 ubuntu ubuntu  1245184 Nov  9 14:30 openwrt-ar71xx-vmlinux.gz
-rw-r--r-- 1 ubuntu ubuntu   917504 Nov  9 14:30 openwrt-ar71xx-vmlinux.lzma
drwxr-xr-x 2 ubuntu ubuntu    12288 Nov  9 14:39 packages/</code></pre></div><p>can anybody point out, what have I done wrong?</p><p>Thx in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182828">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						9 Nov 2012, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>In your &lt;topdir&gt; directory of the build-system run<br /></p><div class="codebox"><pre><code>./scripts/diffconfig.sh</code></pre></div><p>and post the output here.</p><p>Probably your resulting image is to big.</p>											<p class="post-edited">(Last edited by <strong>written_direcon</strong> on 9 Nov 2012, 18:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182829">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						9 Nov 2012, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>...</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 10 Nov 2012, 13:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182835">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">phuque99</div>
					<div class="post-datetime">
						9 Nov 2012, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>If the total size of packages that you selected has exceeded the flash MB size of your device, the bin images will not be generated. Try de-selecting some packages. In general, the router model bin images are approximately 1MB larger than the &quot;openwrt-ar71xx-generic-root.squashfs&quot; file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182883">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dreyk</div>
					<div class="post-datetime">
						10 Nov 2012, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanks everyone. I think it&#039;s really the size problem. I&#039;ve stuffed to much in there)<br />The next question is, how do I know which packages are of what size before making an image? The </p><div class="codebox"><pre><code>./scripts/diffconfig.sh</code></pre></div><p> outputs a big list) probably won&#039;t post it here, as i found no spoiler tag) Here&#039;s a link <a href="http://pastebin.com/rYFaSddx">http://pastebin.com/rYFaSddx</a></p>											<p class="post-edited">(Last edited by <strong>dreyk</strong> on 10 Nov 2012, 12:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182885">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Nov 2012, 13:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dreyk wrote:</cite><blockquote><p>The next question is, how do I know which packages are of what size before making an image?</p></blockquote></div><p>Many of the package wiki pages in Openwrt wiki&nbsp; (wiki.openwrt.org) do list the package sizes.</p><p>Alternative approach is to go into your build systems dir bin/ar71xx/packages, and check the filesizes there. Each of the packages has an *.ipk file there:<br /></p><div class="codebox"><pre><code>perus@hnvb:/Openwrt/trunk$ ls -l bin/ar71xx/packages/
total 6276
-rw-r--r-- 1 perus perus   1810 Nov 10 13:10 6in4_12-1_all.ipk
-rw-r--r-- 1 perus perus   3475 Nov 10 13:10 6rd_2-1_all.ipk
-rw-r--r-- 1 perus perus   2555 Nov 10 13:10 6to4_11-1_all.ipk
-rw-r--r-- 1 perus perus  24749 Nov 10 13:10 aiccu_20070115-10_ar71xx.ipk
-rw-r--r-- 1 perus perus  42915 Nov 10 13:18 base-files_118-r34135_ar71xx.ipk
-rw-r--r-- 1 perus perus  13138 Nov 10 13:10 blkid_2.21.2-1_ar71xx.ipk
-rw-r--r-- 1 perus perus   6904 Nov 10 13:10 block-mount_0.2.0-9_ar71xx.ipk
-rw-r--r-- 1 perus perus 242571 Nov 10 13:10 busybox_1.19.4-5_ar71xx.ipk
-rw-r--r-- 1 perus perus  22278 Nov 10 13:10 ccrypt_1.9-2_ar71xx.ipk
-rw-r--r-- 1 perus perus   9403 Nov 10 13:10 chat_2.4.5-6_ar71xx.ipk
-rw-r--r-- 1 perus perus  58312 Nov 10 13:10 collectd_4.10.7-3_ar71xx.ipk</code></pre></div><p>That gives you a rough estimate how much space gets consumed by each package. (As they get compressed in the squashfs partition, the sizes shown here are not quite exact.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182886">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dreyk</div>
					<div class="post-datetime">
						10 Nov 2012, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>Got it. Thanks a lot</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>