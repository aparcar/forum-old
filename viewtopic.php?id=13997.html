<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> udhcpc is bugged</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p61278">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">insolit</div>
					<div class="post-datetime">
						5 Jan 2008, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi all! <br />Recently because of the 600 seconds lease time from my ISP, I&#039;ve found out an ugly bug in udhcpc. Each time the IP is about to renew, the wan interface is deconfigurated and then configurated again with the IP he got from the ISP. This happens even if the IP is the same.<br />This constant deconfigurations of the wan interface, causes disconnects. nbd developer tried to make a fix for dhcpc, but it was not enough.<br />I&#039;m also trying to fix this just by changing the code in the /usr/share/udhcpc/default.script but as I&#039;m not sure I&#039;ll be able to do it, I would kindly ask a developer if he could try to get a fix to this.</p><p>Thanks a lot for your time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61381">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">buildster</div>
					<div class="post-datetime">
						7 Jan 2008, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>And, if you watch file /var/state/network, its size keeps growing because it&#039;s filled with repetitive entries of ipaddr, netmask, dnsdomain, dns, gateway, up....</p><p>At least, do you like to submit a bug to track the problem? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61397">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">insolit</div>
					<div class="post-datetime">
						8 Jan 2008, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>Well I believe i have solved the first problem. I&#039;ll post my changes, if I&#039;m sure I did not affect other things. <br />Also could you please paste me here the contents of your file /tmp/state/network?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61617">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">iqt</div>
					<div class="post-datetime">
						12 Jan 2008, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>Any news? </p><p>/var/state/network has more than 200k already.</p><p>The following lines are repeating:<br /></p><div class="codebox"><pre><code>config_set &#039;wan&#039; &#039;ipaddr&#039; &#039;91.89.xyz.abc&#039;
config_set &#039;wan&#039; &#039;netmask&#039; &#039;255.255.252.0&#039;
config_set &#039;wan&#039; &#039;dnsdomain&#039; &#039;&#039;
config_set &#039;wan&#039; &#039;dns&#039; &#039;85.216.127.130 82.212.63.118&#039;
config_set &#039;wan&#039; &#039;gateway&#039; &#039;91.89.xyz.abc&#039;
config_set &#039;wan&#039; &#039;up&#039; &#039;1&#039;</code></pre></div><p>edit: <a href="https://dev.openwrt.org/ticket/3022">Ticket #3022</a></p>											<p class="post-edited">(Last edited by <strong>iqt</strong> on 13 Jan 2008, 11:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70486">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kadettgte</div>
					<div class="post-datetime">
						4 Jul 2008, 19:01					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://forum.openwrt.org/viewtopic.php?pid=68819#p68819">http://forum.openwrt.org/viewtopic.php?pid=68819#p68819</a> i solved it this way... it&#039;s working ever since</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>