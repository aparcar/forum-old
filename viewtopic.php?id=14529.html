<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WPA2 and PSP problems</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p63458">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cjk32</div>
					<div class="post-datetime">
						15 Feb 2008, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m trying to get a PSP to connect to my WLAN.&nbsp; Its a WRT64G v2.0, running WhiteRussian, and using WPA2+AES (wl0_akm=psk2, wl0_crypto=AES).</p><p>The PSP gets as far as &#039;Exchaning key information&#039; but then times out.&nbsp; Various other devices manage to connect just fine.</p><p>In order to try to trace the problem, I equipped myself with another WRT54G, and using kismet-drone and a bit of perl was able to capture and analyse the exchange of authentication packets.</p><p>During a successful connections, say from a laptop, there are two Association packets, followed by the four EAPOL Key packets,</p><p>Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; Access Point&nbsp; &nbsp; -&nbsp; &nbsp;Association Request<br />Access Point -&gt; Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;Association Response<br />Access Point -&gt; Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 1<br />Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; Access Point&nbsp; &nbsp; -&nbsp; &nbsp;EAPOL Key 2<br />Access Point -&gt; Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 3<br />Laptop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; Access Point&nbsp; &nbsp; -&nbsp; &nbsp;EAPOL Key 4</p><br /><p>However, when the PSP tries to connect, things are different.&nbsp; The association packets are the same, but the EAPOL packets differ.&nbsp; The Access Point still sends out its first key packet, however the PSP doesn&#039;t respond to this, but instead sends out an EAPOL Start packet instead.&nbsp; Not having had a response, the Access Point repeats its key packets a few times, and then the whole thing times out,</p><p>PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; Access Point&nbsp; &nbsp; -&nbsp; &nbsp;Association Request<br />Access Point -&gt; PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;Association Response<br />Access Point -&gt; PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 1<br />PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -&gt; Access Point&nbsp; &nbsp; -&nbsp; &nbsp;EAPOL Start<br />Access Point -&gt; PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 1 (Repeat)<br />Access Point -&gt; PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 1 (Repeat)<br />Access Point -&gt; PSP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-&nbsp; &nbsp;EAPOL Key 1 (Repeat)</p><br /><p>What I&#039;m trying to understand is which device at fault.&nbsp; Is the PSP at fault for failing to the first EAPOL Key packet from the access point, or, is it quite justifiably waiting for some response to its EAPOL Start packet, and the access point is at fault for not supplying it.</p><p>As an aside, the I also tried to get it to connect via the second WRT54G (which is running Kamikaze, but configured identically as far as I could manage), but got the same results.</p><p>Can anyone offer any advice on where to look next to try to get this working?</p><p>Regards,</p><p>Chris Key</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>