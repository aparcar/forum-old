<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RTL8191S wifi dongle problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p315615">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">andybhm</div>
					<div class="post-datetime">
						19 Mar 2016, 01:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I&#039;ve a strange behaviour with Realtek 8191S wireless usb dongle on Raspberry and Chaos Calmer 15.05.</p><p>At boot dmesg report correctly:</p><div class="codebox"><pre><code>[    2.964826] usb 1-1.3: new high-speed USB device number 4 using dwc_otg
[    3.087478] usb 1-1.3: New USB device found, idVendor=0bda, idProduct=8172
[    3.096188] usb 1-1.3: New USB device strings: Mfr=1, Product=2, SerialNumber=3
[    3.105277] usb 1-1.3: Product: RTL8191S WLAN Adapter 
[    3.112115] usb 1-1.3: Manufacturer: Manufacturer Realtek 
[    3.119288] usb 1-1.3: SerialNumber: xxxxxxxxxxxx</code></pre></div><br /><p>and after installed the necessary package:</p><div class="codebox"><pre><code>kmod-rtl8187    3.18.20+2015-03-09-3    Realtek Drivers for RTL818x devices (RTL8187 USB)
kmod-rtlwifi-usb    3.18.20+2015-03-09-3    Realtek common driver part (USB support)</code></pre></div><br /><p>the wifi dongle was recognized by kernel:</p><div class="codebox"><pre><code>[    9.483225] r8712u: Staging version
[    9.488472] r8712u: register rtl8712_netdev_ops to netdev_ops
[    9.495926] usb 1-1.3: r8712u: USB_SPEED_HIGH with 4 endpoints
[    9.504124] usb 1-1.3: r8712u: Boot from EFUSE: Autoload OK
[    9.707258] random: nonblocking pool is initialized
[   10.023540] usb 1-1.3: r8712u: CustomerID = 0x000a
[   10.029959] usb 1-1.3: r8712u: MAC Address from efuse = 24:05:0f:xx:xx:xx
[   10.038307] usb 1-1.3: r8712u: Loading firmware from &quot;rtlwifi/rtl8712u.bin&quot;
[   10.047059] usbcore: registered new interface driver r8712u
[   10.058507] usbcore: registered new interface driver usbhid
[   10.065806] usbhid: USB HID core driver
[   10.084691] xt_time: kernel timezone is -0000
[   10.120617] cfg80211: Calling CRDA to update world regulatory domain
[   10.135029] cfg80211: World regulatory domain updated:
[   10.141881] cfg80211:  DFS Master region: unset
[   10.146377] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   10.160762] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.171885] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.183131] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   10.194508] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.206047] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   10.219236] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   10.231143] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.243169] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   10.341042] PPP generic driver version 2.4.2</code></pre></div><br /><p>and realtek wifi modules was loaded:</p><div class="codebox"><pre><code>root@OpenWrt:/# lsmod
arc4                    1204  0 
cfg80211              225624  2 rtlwifi
compat                  1228  3 rtlwifi
crc_ccitt                920  1 ppp_async
crypto_blkcipher        9168  1 arc4
evdev                   7636  0 
hid                    81544  2 usbhid
hid_generic              524  0 
ip6_tables              8436  3 ip6table_raw
ip6t_REJECT             1056  2 
ip6table_filter          568  1 
ip6table_mangle          900  1 
ip6table_raw             540  1 
ip_tables               8576  4 iptable_nat
ipt_MASQUERADE           556  1 
ipt_REJECT               872  2 
iptable_filter           624  1 
iptable_mangle           776  1 
iptable_nat              752  1 
iptable_raw              596  1 
ipv6                  244593 24 nf_conntrack_ipv6
mac80211              357552  2 rtl_usb
nf_conntrack           43308 11 nf_nat_ipv4
nf_conntrack_ftp        5148  1 nf_nat_ftp
nf_conntrack_ipv4       4984  8 
nf_conntrack_ipv6       5380  3 
nf_conntrack_rtcache    2144  0 
nf_defrag_ipv4           776  1 nf_conntrack_ipv4
nf_defrag_ipv6          8656  1 nf_conntrack_ipv6
nf_log_common           2184  2 nf_log_ipv4
nf_log_ipv4             3028  0 
nf_log_ipv6             3436  0 
nf_nat                  8652  5 nf_nat_ipv4
nf_nat_ftp              1132  0 
nf_nat_ipv4             3434  1 iptable_nat
nf_nat_masquerade_ipv4    1188  1 ipt_MASQUERADE
nf_reject_ipv4          1484  1 ipt_REJECT
nf_reject_ipv6          1676  1 ip6t_REJECT
ppp_async               6112  0 
ppp_generic            20228  3 pppoe
pppoe                   8516  0 
pppox                   1000  1 pppoe
r8712u                126924  0 
rtl_usb                 7476  0 
rtlwifi                44400  1 rtl_usb
slhc                    4136  1 ppp_generic
snd                    33296  9 snd_bcm2835
snd_bcm2835            13688  0 
snd_compress            5896  0 
snd_hwdep               4264  0 
snd_mixer_oss          11184  1 snd_pcm_oss
snd_pcm                54180  2 snd_bcm2835
snd_pcm_oss            30180  0 
snd_rawmidi            13372  0 
snd_seq_device          3624  1 snd_rawmidi
snd_timer              13328  1 snd_pcm
soundcore               3236  1 snd
usbhid                 21912  0 
x_tables                8216 26 ipt_REJECT
xt_CT                   2128  0 
xt_LOG                   700  0 
xt_REDIRECT             1212  0 
xt_TCPMSS               2396  2 
xt_comment               420 62 
xt_conntrack            2140 10 
xt_id                    420  0 
xt_limit                1028 20 
xt_mac                   544  0 
xt_mark                  604  0 
xt_multiport            1116  0 
xt_nat                  1020  0 
xt_state                 636  0 
xt_tcpudp               1608 10 
xt_time                 1540  0</code></pre></div><br /><p>but neither ifconfig or iw shows wlan0 interface:</p><div class="codebox"><pre><code>root@OpenWrt:/# 
root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr B8:27:EB:xx:xx:xx  
          inet addr:10.0.0.50  Bcast:10.0.0.255  Mask:255.255.255.0
          inet6 addr: fe80::ba27:ebff:fexx:xxxx/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2073 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2226 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:739666 (722.3 KiB)  TX bytes:657220 (641.8 KiB)

eth0      Link encap:Ethernet  HWaddr B8:27:EB:xx:xx:xx  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:2073 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2214 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:739666 (722.3 KiB)  TX bytes:681892 (665.9 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:48 errors:0 dropped:0 overruns:0 frame:0
          TX packets:48 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:3471 (3.3 KiB)  TX bytes:3471 (3.3 KiB)

root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# iw list
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/#</code></pre></div><br /><p>and wireless interface doesn&#039;t appear under network menu, so I can&#039;t configure wifi interface:<br /><span class="postimg"><img src="http://i.imgur.com/szsJBVK.jpg" alt="http://i.imgur.com/szsJBVK.jpg" /></span></p><br /><p>Strangely, if I add<em> wlan0</em> at the end of the ifconfig command, this was listed:</p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig wlan0
wlan0     Link encap:Ethernet  HWaddr 24:05:0F:xx:xx:xx  
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/# 
root@OpenWrt:/#</code></pre></div><br /><p>and was listed too from <em>/proc/net/wireless</em>:</p><div class="codebox"><pre><code>root@OpenWrt:/# 
root@OpenWrt:/# cat /proc/net/wireless 
Inter-| sta-|   Quality        |   Discarded packets               | Missed | WE
 face | tus | link level noise |  nwid  crypt   frag  retry   misc | beacon | 22
 wlan0: 0000    0.    0.    0.       0      0      0      0      0        0
root@OpenWrt:/# 
root@OpenWrt:/#</code></pre></div><br /><p>Any ideas? On Raspbian the dongle work well so isn&#039;t hw related problem.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315655">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						19 Mar 2016, 10:46					</div>
				</div>
				<div class="post-content content">
					<p>have you tried <strong>wifi detect</strong>?</p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 19 Mar 2016, 10:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315688">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">andybhm</div>
					<div class="post-datetime">
						19 Mar 2016, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the answer, unfortunately the command <strong>wifi detect</strong> doesn&#039;t return any message:</p><div class="codebox"><pre><code>root@OpenWrt:/# wifi detect
root@OpenWrt:/# 
root@OpenWrt:/# 
root@OpenWrt:/# wifi status
{

}
root@OpenWrt:/# 
root@OpenWrt:/# </code></pre></div>											<p class="post-edited">(Last edited by <strong>andybhm</strong> on 19 Mar 2016, 15:51)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>