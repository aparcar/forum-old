<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with crocc-compiling for openWrt gcj</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p151866">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">steq22</div>
					<div class="post-datetime">
						23 Dec 2011, 11:17					</div>
				</div>
				<div class="post-content content">
					<p>Hello, guys, i`ve got some problems with cross-compile my prog for OpenWrt Asus WL-500GPv2. I builded BackFire with adding such options: &quot;Build/install java compiler and GNU classpath&quot;, &quot;Build the OpenWrt based Toolchain&quot;. Then I, of course, added my bin directory to PATH and trying to compile my simple test &quot;Hello World&quot; java program with mipsel-openwrt-linux-gcj with such command:</p><p>mipsel-openwrt-linux-gcj -v -o HelloWorld HelloWorld.java --main=HelloWorld</p><p>And taking this:</p><div class="codebox"><pre><code>Reading specs from /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/specs
Reading specs from /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/libgcj.spec
rename spec lib to liborig
Configured with: /home/sergey/backfire/build_dir/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/gcc-3.4.6/configure --prefix=/home/sergey/backfire/staging_dir/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=mipsel-openwrt-linux-uclibc --with-gnu-ld --enable-target-optspace --disable-libgomp --disable-libmudflap --disable-multilib --disable-nls --with-float=soft --disable-libssp --disable-__cxa_atexit --enable-languages=c,c++,java --enable-shared --enable-threads --with-slibdir=/home/sergey/backfire/staging_dir/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/lib --disable-tls
Thread model: posix
gcc version 3.4.6 (OpenWrt-2.0)
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../libexec/gcc/mipsel-openwrt-linux-uclibc/3.4.6/jc1 HelloWorld.java -fhash-synchronization -fuse-divide-subroutine -fuse-boehm-gc -fnon-call-exceptions -fkeep-inline-functions -quiet -dumpbase HelloWorld.java -msoft-float -auxbase HelloWorld -g1 -version -o /tmp/ccdYB6pD.s
GNU Java version 3.4.6 (OpenWrt-2.0) (mipsel-openwrt-linux-uclibc)
        compiled by GNU C version 4.5.2.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Class path starts here:
    ./
    /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/../../share/java/libgcj-3.4.6.jar/ (system) (zip)
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/bin/as -EL -g1 -no-mdebug -32 -v -KPIC -o /tmp/cc3yPr4h.o /tmp/ccdYB6pD.s
GNU assembler version 2.19.1 (mipsel-openwrt-linux-uclibc) using BFD version (GNU Binutils) 2.19.1
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../libexec/gcc/mipsel-openwrt-linux-uclibc/3.4.6/jvgenmain HelloWorldmain /tmp/ccNeDMJW.i
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../libexec/gcc/mipsel-openwrt-linux-uclibc/3.4.6/cc1 /tmp/ccNeDMJW.i -quiet -dumpbase HelloWorldmain.c -msoft-float -g1 -version -fdollars-in-identifiers -o /tmp/ccdYB6pD.s
GNU C version 3.4.6 (OpenWrt-2.0) (mipsel-openwrt-linux-uclibc)
        compiled by GNU C version 4.5.2.
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/bin/as -EL -g1 -no-mdebug -32 -v -KPIC -o /tmp/ccrxkhrB.o /tmp/ccdYB6pD.s
GNU assembler version 2.19.1 (mipsel-openwrt-linux-uclibc) using BFD version (GNU Binutils) 2.19.1
 /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../libexec/gcc/mipsel-openwrt-linux-uclibc/3.4.6/collect2 --eh-frame-hdr -EL -dynamic-linker /lib/ld-uClibc.so.0 -o HelloWorld /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/crt1.o /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/crti.o /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/crtbegin.o -L/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6 -L/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc -L/home/sergey/backfire/staging_dir/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6 -L/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib -L/home/sergey/backfire/staging_dir/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib /tmp/ccrxkhrB.o /tmp/cc3yPr4h.o -lgcc_s -lgcc -lgcj -lm -lpthread -ldl -lgcc_s -lgcc -rpath-link /lib:/usr/lib -lc -lgcc_s -lgcc /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/crtend.o /home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/crtn.o
/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/libgcj.so: undefined reference to `isnan&#039;
/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/libgcj.so: undefined reference to `finite&#039;
collect2: ld returned 1 exit status</code></pre></div><p>without -v key:</p><div class="codebox"><pre><code>/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/libgcj.so: undefined reference to `isnan&#039;
/home/sergey/backfire/build_dir/target-mipsel_uClibc-0.9.30.1/OpenWrt-Toolchain-brcm-2.4-for-mipsel-gcc-3.4.6_uClibc-0.9.30.1/toolchain-mipsel_gcc-3.4.6_uClibc-0.9.30.1/usr/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/3.4.6/../../../../mipsel-openwrt-linux-uclibc/lib/libgcj.so: undefined reference to `finite&#039;
collect2: ld returned 1 exit status</code></pre></div><p>any suggestions?</p>											<p class="post-edited">(Last edited by <strong>steq22</strong> on 23 Dec 2011, 11:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p151934">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">steq22</div>
					<div class="post-datetime">
						24 Dec 2011, 08:17					</div>
				</div>
				<div class="post-content content">
					<p>up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152418">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">steq22</div>
					<div class="post-datetime">
						30 Dec 2011, 09:39					</div>
				</div>
				<div class="post-content content">
					<p>up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152431">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">khim</div>
					<div class="post-datetime">
						30 Dec 2011, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>This is &quot;if you have to ask then the answer will be useless to you&quot; question. <a href="http://pubs.opengroup.org/onlinepubs/009604499/functions/isnan.html">isnan</a> and <a href="http://pubs.opengroup.org/onlinepubs/009604499/functions/isfinite.html">isfinite</a> are supposed to be macro defines (<a href="http://linux.die.net/man/3/finite">finite</a> is BSD variant).</p><p>If libgcj tries to call them as functions then obviously something went wrong in compilation of libgcj. It should be relatively easy to find object files which refer these functions (using objdump and grep) and fix that problem, but there probably other problems ahead till libgcj can be declared usable - and if you can not even do first simple step without outside help then how can you be sure that you&#039;ll be able to find, debug, and fix other problems?</p><p>And, really, I don&#039;t see the point: it&#039;s probably possible to port Java to OpenWRT in some form (people reported various degrees of success with Sable and JamVM), but why do you need that? This is a lot of work - and what you&#039;ll get in return? It&#039;s not so hard to reach the state where &quot;Hello, world!&quot; runs, but then you&#039;ll hit various corner cases in untested code and will need to debug and fix them.</p><p>It looks like various people regularly try to port Java to OpenWRT, but usually drop it after very short time because it&#039;s too much effort for too small gain...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>