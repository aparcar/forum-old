<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SOLVED: Update leads to: make[2]: *** [package_index] Error 126</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p364141">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						22 Aug 2017, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>I maintain an old version of firmware for a router I use and accidentally updated the OS which is Debian Linux 7.<br />Since then, I can no longer build the firmware and after searching and trying things for two days, it&#039;s time to ask for leads here. </p><p>Based on what I&#039;ve read, it could be related to libc* but I&#039;ve tried downgrading and other things I&#039;ve found and nothing works. Can someone please help me figure this out.</p><div class="codebox"><pre><code># make image profile=GL-MT300N
make[1]: Entering directory `/clients/cc-15.05-ramips-gl-net-mt300n&#039;
echo &#039;Building images for ramips - Default Profile&#039;
Building images for ramips - Default Profile
echo &#039;Packages: base-files busybox dnsmasq dropbear firewall fstools ip6tables iptables kernel kmod-gpio-button-hotplug kmod-leds-gpio kmod-ledtrig-usbdev kmod-nf-nathelper kmod-rt2800-pci kmod-rt2800-soc kmod-usb-core kmod-usb-ohci kmod-usb2 libc libgcc mtd netifd odhcp6c odhcpd opkg ppp ppp-mod-pppoe swconfig uci wpad-mini&#039;
Packages: base-files busybox dnsmasq dropbear firewall fstools ip6tables iptables kernel kmod-gpio-button-hotplug kmod-leds-gpio kmod-ledtrig-usbdev kmod-nf-nathelper kmod-rt2800-pci kmod-rt2800-soc kmod-usb-core kmod-usb-ohci kmod-usb2 libc libgcc mtd netifd odhcp6c odhcpd opkg ppp ppp-mod-pppoe swconfig uci wpad-mini
echo

rm -rf /clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips
mkdir -p /clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips /clients/cc-15.05-ramips-gl-net-mt300n/bin/ramips /clients/cc-15.05-ramips-gl-net-mt300n/tmp /clients/cc-15.05-ramips-gl-net-mt300n/dl
if [ ! -f &quot;/clients/cc-15.05-ramips-gl-net-mt300n/packages/Packages&quot; ] || [ ! -f &quot;/clients/cc-15.05-ramips-gl-net-mt300n/packages/Packages.gz&quot; ] || [ &quot;`find /clients/cc-15.05-ramips-gl-net-mt300n/packages -cnewer /clients/cc-15.05-ramips-gl-net-mt300n/packages/Packages.gz`&quot; ]; then \
                echo &quot;Package list missing or not up-to-date, generating it.&quot;;\
                make package_index; \
        else \
                mkdir -p /clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips/tmp; \
                IPKG_NO_SCRIPT=1 IPKG_TMP=&quot;/clients/cc-15.05-ramips-gl-net-mt300n/tmp/ipkgtmp&quot; IPKG_INSTROOT=&quot;/clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips&quot; IPKG_CONF_DIR=&quot;/clients/cc-15.05-ramips-gl-net-mt300n/tmp&quot; IPKG_OFFLINE_ROOT=&quot;/clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips&quot; /clients/cc-15.05-ramips-gl-net-mt300n/staging_dir/host/bin/opkg -f /clients/cc-15.05-ramips-gl-net-mt300n/repositories.conf --force-depends --force-overwrite --force-postinstall --cache /clients/cc-15.05-ramips-gl-net-mt300n/dl --offline-root /clients/cc-15.05-ramips-gl-net-mt300n/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/root-ramips --add-dest root:/ --add-arch all:100 --add-arch ramips_24kec:200 update || true; \
        fi
Package list missing or not up-to-date, generating it.
make[2]: Entering directory `/clients/cc-15.05-ramips-gl-net-mt300n&#039;

Building package index...
(cd /clients/cc-15.05-ramips-gl-net-mt300n/packages; /clients/cc-15.05-ramips-gl-net-mt300n/scripts/ipkg-make-index.sh . &gt; Packages &amp;&amp; \
                gzip -9c Packages &gt; Packages.gz \
        ) &gt;/dev/null 2&gt;/dev/null
make[2]: *** [package_index] Error 126
make[2]: Leaving directory `/clients/cc-15.05-ramips-gl-net-mt300n&#039;
make[1]: *** [_call_image] Error 2
make[1]: Leaving directory `/clients/cc-15.05-ramips-gl-net-mt300n&#039;
make: *** [image] Error 2</code></pre></div>											<p class="post-edited">(Last edited by <strong>projects</strong> on 26 Aug 2017, 18:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364146">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						22 Aug 2017, 22:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>projects wrote:</cite><blockquote><p>accidentally updated the OS which is Debian Linux 7.</p></blockquote></div><p>You updated to or from Debian 7?<br />32 or 64bit?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364147">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						22 Aug 2017, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>The OS was Debian Linux 7, I just ran apt-get update/upgrade. <br />It is a vm dedicated to one version of my build, nothing else and I completely forgot and updated.<br />Since then, the build no longer works.</p>											<p class="post-edited">(Last edited by <strong>projects</strong> on 23 Aug 2017, 02:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364175">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						23 Aug 2017, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, yes, it was always 64bit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364344">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						25 Aug 2017, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>Are these forums no longer active or are people simply not interested in helping others anymore?<br />I could use help from someone in the community on this, I&#039;ve not been able to find a solution so posting is all I have left.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364355">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						25 Aug 2017, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>There&#039;s always the possibility that none of the readers knows the answer. Keep trying.</p><p>In case you don&#039;t get an answer, try to go a different way, e.g. setup a fresh system to compile the firmware, or even setup a different system (Ubuntu i/o Debian). This might be tedious work, but in the absence of other solutions, it might be your last resort, and eventually lead to a working image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364356">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						25 Aug 2017, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>True, I was hoping not to have to do that as I would like to know what happened first but as you say, if no one knows. </p><p>Thanks I&#039;ll get on that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364365">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						26 Aug 2017, 04:03					</div>
				</div>
				<div class="post-content content">
					<p>Oddly enough, the build does exactly the same thing on a centos7 vm I built to test this. <br />I&#039;ll have to download the latest image builder I guess and see if it still happens.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364367">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						26 Aug 2017, 05:14					</div>
				</div>
				<div class="post-content content">
					<p>I think I found the problem.</p><p>During the build, the script cannot download the files so there are errors. Glinet doesn&#039;t seem to maintain all of the versions. I know there is a way to bypass downloading the files but I cannot find the info on how to do that.</p><p>wget <a href="http://www.gl-inet.com/openwrt/ramips/2.20/packages/base/Packages.gz">http://www.gl-inet.com/openwrt/ramips/2 … ackages.gz</a><br />--2017-08-25 19:09:10--&nbsp; <a href="http://www.gl-inet.com/openwrt/ramips/2.20/packages/base/Packages.gz">http://www.gl-inet.com/openwrt/ramips/2 … ackages.gz</a><br />Resolving <a href="http://www.gl-inet.com">www.gl-inet.com</a> (<a href="http://www.gl-inet.com">www.gl-inet.com</a>)... 52.68.43.214<br />Connecting to <a href="http://www.gl-inet.com">www.gl-inet.com</a> (<a href="http://www.gl-inet.com">www.gl-inet.com</a>)|52.68.43.214|:80... connected.<br />HTTP request sent, awaiting response... 404 Not Found<br />2017-08-25 19:09:10 ERROR 404: Not Found.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364370">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						26 Aug 2017, 07:31					</div>
				</div>
				<div class="post-content content">
					<p>Hmmm... Just guessing: What about adjusting your repositories?</p><p>2.20 doesn&#039;t exist, but 2.25 and 2.261 do: <a href="http://www.gl-inet.com/openwrt/ramips/">http://www.gl-inet.com/openwrt/ramips/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364398">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						26 Aug 2017, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>I was going to delete this topic as useless since the answer is not that interesting but it could prove useful to someone else. </p><p>Yes, you are right, they no longer support 2.20 and simply removed it which does not seem like the best way to handle code if you are going to be offering it. </p><p>I ended up downloading the 2.261 builder and testing it now. So far, this seems to work. </p><p>Thanks for the help on this, it is appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364651">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						31 Aug 2017, 06:31					</div>
				</div>
				<div class="post-content content">
					<p>I came back to an old tp-link build and am seeing the exact same problem again.<br />I maintain an older build bb.14.07 and I can see that the files are on openwrt but getting the same errors.</p><p>Building package index...<br />(cd /clients/bb-14.07-ar71xx-tp-link-703/packages; /clients/bb-14.07-ar71xx-tp-link-703/scripts/ipkg-make-index.sh . &gt; Packages &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; gzip -9c Packages &gt; Packages.gz \<br />) &gt;/dev/null 2&gt;/dev/null<br />make[2]: *** [package_index] Error 126<br />make[2]: Leaving directory `/clients/bb-14.07-ar71xx-tp-link-703&#039;<br />make[1]: *** [_call_image] Error 2<br />make[1]: Leaving directory `/clients/bb-14.07-ar71xx-tp-link-703&#039;<br />make: *** [image] Error 2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364684">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">projects</div>
					<div class="post-datetime">
						31 Aug 2017, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>I guess I&#039;m learning that I cannot maintain older versions because some things in the builder seem to need external files or something. In this case I updated image builder to cc 15.05 and now it builds. </p><p>Why, what is causing this so that I can understand the reasons.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>