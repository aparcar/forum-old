<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ImageMagick configuration files missing while installing into ram</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p214778">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lordmonkey</div>
					<div class="post-datetime">
						14 Oct 2013, 17:54					</div>
				</div>
				<div class="post-content content">
					<p>I have installed Open Wrt on my TP-Link TL-WR740N/ND v4. Everything works fine but the Imagemagick. I have installed it into ram (no enough space on rom ) with `opkg`</p><div class="codebox"><pre><code>    # opkg install imagemagick imagemagick-png imagemagick-jpeg imagemagick-tools -d ram
    ...
    ...
    # opkg list-installed | grep imagema
    imagemagick - 6.7.8-1
    imagemagick-jpeg - 6.7.8-1
    imagemagick-png - 6.7.8-1
    imagemagick-tools - 6.7.8-1</code></pre></div><p>but not I am getting </p><div class="quotebox"><blockquote><p>UnableToOpenConfigureFile</p></blockquote></div><p> as there is no configuration files. Anyone knows how to omit that ?</p><div class="codebox"><pre><code>    # convert -debug configure picture.jpeg picture.jpeg 
    2013-10-14T14:45:24+00:00 0:00.010 0.010u 6.7.8 Configure convert[2677]: utility.c/ExpandFilenames/939/Configure
      Command line: convert {-debug} {configure} {picture.jpeg} {picture.jpeg}
    2013-10-14T14:45:24+00:00 0:00.020 0.020u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/coder.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.020 0.020u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/coder.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.030 0.030u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/etc/ImageMagick/coder.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.030 0.030u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/coder.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.030 0.030u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/root/.magick/coder.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.060 0.060u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/magic.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.070 0.070u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/magic.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.070 0.070u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/etc/ImageMagick/magic.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.070 0.070u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/magic.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.070 0.070u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/root/.magick/magic.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.090 0.090u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/delegates.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.090 0.090u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/delegates.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.090 0.090u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/etc/ImageMagick/delegates.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.090 0.090u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/delegates.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.100 0.090u 6.7.8 Configure convert[2677]: configure.c/GetConfigureOptions/564/Configure
      Searching for configure file: &quot;/root/.magick/delegates.xml&quot;
    2013-10-14T14:45:24+00:00 0:00.100 0.090u 6.7.8 Configure convert[2677]: delegate.c/LoadDelegateList/1228/Configure
      Loading delegate configuration file &quot;built-in&quot; ...
    convert: UnableToOpenConfigureFile `delegates.xml&#039; @ warning/configure.c/GetConfigureOptions/591.
    convert: NoDecodeDelegateForThisImageFormat `picture.jpeg&#039; @ error/constitute.c/ReadImage/544.
    convert: NoImagesDefined `picture.jpeg&#039; @ error/convert.c/ConvertImageCommand/3044.</code></pre></div><br /><p>mogrify won&#039;t work either</p><div class="codebox"><pre><code># mogrify -flip picture.jpeg 
mogrify: UnableToOpenConfigureFile `delegates.xml&#039; @ warning/configure.c/GetConfigureOptions/591.
mogrify: NoDecodeDelegateForThisImageFormat `picture.jpeg&#039; @ error/constitute.c/ReadImage/544.</code></pre></div><br /><p><strong>EDIT</strong><br />I have now tried to copy my delegates from ubuntu box to router but no luck. </p><p>Now I just got rid of UnableToOpenConfigureFile</p><div class="codebox"><pre><code># convert -debug configure picture.jpeg picture.jpeg 
2013-10-14T15:14:34+00:00 0:00.000 0.000u 6.7.8 Configure convert[2789]: utility.c/ExpandFilenames/939/Configure
  Command line: convert {-debug} {configure} {picture.jpeg} {picture.jpeg}
2013-10-14T15:14:34+00:00 0:00.010 0.000u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/coder.xml&quot;
2013-10-14T15:14:34+00:00 0:00.010 0.000u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/coder.xml&quot;
2013-10-14T15:14:34+00:00 0:00.020 0.000u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/etc/ImageMagick/coder.xml&quot;
2013-10-14T15:14:34+00:00 0:00.020 0.000u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/coder.xml&quot;
2013-10-14T15:14:34+00:00 0:00.020 0.000u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/root/.magick/coder.xml&quot;
2013-10-14T15:14:34+00:00 0:00.020 0.000u 6.7.8 Configure convert[2789]: coder.c/LoadCoderList/693/Configure
  Loading coder configuration file &quot;/usr/share/ImageMagick-6.7.8/coder.xml&quot; ...
2013-10-14T15:14:34+00:00 0:00.050 0.030u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/magic.xml&quot;
2013-10-14T15:14:34+00:00 0:00.060 0.040u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/magic.xml&quot;
2013-10-14T15:14:34+00:00 0:00.060 0.040u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/etc/ImageMagick/magic.xml&quot;
2013-10-14T15:14:34+00:00 0:00.060 0.040u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/magic.xml&quot;
2013-10-14T15:14:34+00:00 0:00.060 0.040u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/root/.magick/magic.xml&quot;
2013-10-14T15:14:34+00:00 0:00.080 0.060u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/ImageMagick-6.7.8/delegates.xml&quot;
2013-10-14T15:14:34+00:00 0:00.080 0.060u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/lib/ImageMagick-6.7.8/config/delegates.xml&quot;
2013-10-14T15:14:34+00:00 0:00.080 0.060u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/etc/ImageMagick/delegates.xml&quot;
2013-10-14T15:14:34+00:00 0:00.080 0.060u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/usr/share/doc/ImageMagick-6.7.8/delegates.xml&quot;
2013-10-14T15:14:34+00:00 0:00.090 0.060u 6.7.8 Configure convert[2789]: configure.c/GetConfigureOptions/564/Configure
  Searching for configure file: &quot;/root/.magick/delegates.xml&quot;
2013-10-14T15:14:34+00:00 0:00.090 0.060u 6.7.8 Configure convert[2789]: delegate.c/LoadDelegateList/1228/Configure
  Loading delegate configuration file &quot;/usr/share/ImageMagick-6.7.8/delegates.xml&quot; ...
convert: NoDecodeDelegateForThisImageFormat `picture.jpeg&#039; @ error/constitute.c/ReadImage/544.
convert: NoImagesDefined `picture.jpeg&#039; @ error/convert.c/ConvertImageCommand/3044.</code></pre></div>											<p class="post-edited">(Last edited by <strong>lordmonkey</strong> on 14 Oct 2013, 18:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214786">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						14 Oct 2013, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>Well it will look for stuff in /usr/share, /etc while -d ram installs to /tmp/usr/share, /tmp/etc so you need to symlink accordingly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214787">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lordmonkey</div>
					<div class="post-datetime">
						14 Oct 2013, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>I have searched for those files in / but I couldn&#039;t find them. I don&#039;t have them at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230981">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Beef Eater</div>
					<div class="post-datetime">
						22 Apr 2014, 06:56					</div>
				</div>
				<div class="post-content content">
					<p>imagemagick ipk package appears to be missing some important files:</p><p>/etc/ImageMagick/*<br />/usr/lib/libMagickCore*<br />/usr/lib/libMagickWand*<br />/usr/lib/ImageMagick-6.7.8/config/*</p><p>Downloading and compiling OpenWRT and imagemagick as an individual package builds all these missing files in build_dir. However, no ipk is created for imagemagick. I could not figure out exactly why an ipk package is not created, but the absence of a CONTROL file in imagemagick&#039;s build_dir stands out as one possible reason for it.</p><p>Copying all imagemagick package files from build_dir into respective directories on my Buffalo WZR-HP-AG300H solved the problem completely.</p><p>Is anyone from the development team watching this forum? Should I file a bug report?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236882">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">OpenTobbse</div>
					<div class="post-datetime">
						15 Jun 2014, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi there!</p><p>came across the same Problem. Installed imagemagick a week ago and also get the same Errors as you do. Unfortunately I did not learn yet how to build packages, so I couldn&#039;t figure out how to get the missing files.</p><p>Could someone who got it working please upload these files? Maybe Beef Eater? That would be really great!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236934">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Beef Eater</div>
					<div class="post-datetime">
						16 Jun 2014, 07:20					</div>
				</div>
				<div class="post-content content">
					<p>@OpenTobbse: building OpenWRT with necessary packages is not that difficult if you follow the recommended procedure. However, I can share my imagemagick ar7xxx/ar9xxx binaries with you if you have the same architecture (send me a forum email).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236940">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 Jun 2014, 08:13					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d be interested in a solution, too.<br />Rather than getting some precompiled packages, I&#039;d like to compile IM myself. I&#039;m already doing that, but I&#039;m stumbling upon the missing files.</p><p>Could you describe more detailed, which files from where in your buildroot shall be placed where?<br />I tried to find them, but found multiple places with imagemagick files, thus I&#039;m unsure what to copy where and unsure, if I copied all files that are needed...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236999">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Beef Eater</div>
					<div class="post-datetime">
						16 Jun 2014, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>@tmo26: make sure you follow the <a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence">buildroot install procedure</a>. At step 3, execute:</p><div class="codebox"><pre><code>./scripts/feeds update -a
./scripts/feeds install imagemagick</code></pre></div><p>When you run &quot;make menuconfig&quot; at step 4, go to Multimedia section and select all imagemagick packages as &quot;M&quot; (modularized). Proceed with build by executing &quot;make&quot;. Once the build process is complete, your imagemagick ipk&#039;s should be located in &quot;/bin/&lt;architecture&gt;/packages/&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237013">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 Jun 2014, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>@Beef Eater: Did that already before writing my above posting, yet I&#039;m still getting error messages like </p><div class="codebox"><pre><code>root@DIR-505-3:~# convert -size 100x100 xc:wheat  canvas_wheat.gif
convert: UnableToOpenConfigureFile `delegates.xml&#039; @ warning/configure.c/GetConfigureOptions/591.</code></pre></div><p>Indeed, there&#039;s no such file on my router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237020">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 Jun 2014, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>OK, found out by myself: In my case, the complete directory /usr/lib/ImageMagick-6.7.8/config/ was missing.</p><p>copied all *.xml files from build_dir/target-mips_34kc_uClibc-0.9.33.2/ImageMagick-6.7.8-10/config/*.xml</p><p>to my routers /usr/lib/ImageMagick-6.7.8/config/ directory.</p><p>That way I got rid of the error</p><div class="codebox"><pre><code>convert: UnableToOpenConfigureFile `delegates.xml&#039; @ warning/configure.c/GetConfigureOptions/591.</code></pre></div><p>since the file now exists. Small improvement, yeah! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>However, there are more errors:<br /></p><div class="codebox"><pre><code>root@DIR-505-3:~# convert -size 100x100 xc:wheat  canvas_wheat.jpg
convert: unable to open image `wheat&#039;: No such file or directory @ error/blob.c/OpenBlob/2642.
convert: no decode delegate for this image format `wheat&#039; @ error/constitute.c/ReadImage/544.
convert: no images defined `canvas_wheat.jpg&#039; @ error/convert.c/ConvertImageCommand/3044.</code></pre></div><p>I&#039;m stuck at this point...</p><p>Edit: Forgot to ask: what files should be in /etc/Imagemagick/ ?<br />I&#039;m missing this directory completely...</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 16 Jun 2014, 20:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237021">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Beef Eater</div>
					<div class="post-datetime">
						16 Jun 2014, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>@tmo26: try running this from your buildroot directory:</p><div class="codebox"><pre><code>find . -print | grep &#039;etc/Image&#039;</code></pre></div><p>If etc/ImageMagick is not found or is empty, try running this from your buildroot directory:<br /></p><div class="codebox"><pre><code>make package/imagemagick/download
make package/imagemagick/compile
make package/imagemagick/install</code></pre></div><p>In my particular case, I have the following in etc/ImageMagick/:<br /></p><div class="codebox"><pre><code>$ ls -ln ./build_dir/target-mips_34kc_uClibc-0.9.33.2/ImageMagick-6.7.8-10/ipkg-install/etc/ImageMagick/
total 224
-rw-r--r-- 1 1000 1000    842 Jun 16 00:24 coder.xml
-rw-r--r-- 1 1000 1000   1383 Jun 16 00:24 colors.xml
-rw-r--r-- 1 1000 1000  11427 Jun 16 00:24 delegates.xml
-rw-r--r-- 1 1000 1000    956 Jun 16 00:24 log.xml
-rw-r--r-- 1 1000 1000    888 Jun 16 00:24 magic.xml
-rw-r--r-- 1 1000 1000 134036 Jun 16 00:24 mime.xml
-rw-r--r-- 1 1000 1000   2277 Jun 16 00:24 policy.xml
-rw-r--r-- 1 1000 1000   1462 Jun 16 00:24 quantization-table.xml
-rw-r--r-- 1 1000 1000  11302 Jun 16 00:24 thresholds.xml
-rw-r--r-- 1 1000 1000   8554 Jun 16 00:24 type-dejavu.xml
-rw-r--r-- 1 1000 1000   9727 Jun 16 00:24 type-ghostscript.xml
-rw-r--r-- 1 1000 1000  13655 Jun 16 00:24 type-windows.xml
-rw-r--r-- 1 1000 1000    671 Jun 16 00:24 type.xml</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237028">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 Jun 2014, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>Did as you advised, ended with the exact same result as you (means: same files, same filesizes).</p><p>But... the contents of /build_dir/target-mips_34kc_uClibc-0.9.33.2/ImageMagick-6.7.8-10/ipkg-install/etc/ImageMagick/ are the same as in /usr/lib/ImageMagick-6.7.8/config/ (if restricted to *.xml).</p><p>Having no knowledge about these specific linux interna, I&#039;m wondering: Is this correct?</p><p>In case the above is alright: Where does this error come from?</p><div class="codebox"><pre><code>root@DIR-505-3:~# convert -size 100x100 xc:wheat  canvas_wheat.jpg
convert: unable to open image `wheat&#039;: No such file or directory @ error/blob.c/OpenBlob/2642.
convert: no decode delegate for this image format `wheat&#039; @ error/constitute.c/ReadImage/544.
convert: no images defined `canvas_wheat.jpg&#039; @ error/convert.c/ConvertImageCommand/3044.</code></pre></div><p>Does this work for you?<br />I&#039;m unsure, if it&#039;s from missing files, some other mis-configuration or simply user-dumbness ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237034">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						16 Jun 2014, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Found it by myself <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>copy </p><div class="codebox"><pre><code>build_dir/target-mips_34kc_uClibc-0.9.33.2/ImageMagick-6.7.8-10/ipkg-install/usr/lib/ImageMagick-6.7.8/modules-Q16/coders/xc.*</code></pre></div><p> to your routers </p><div class="codebox"><pre><code>/usr/lib/ImageMagick-6.7.8/modules-Q16/coders/</code></pre></div><p>ét voilà: canvas creation works! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Would be great if someone could implement this in the Makefile, along with the missing *.xml files mentioned further above. I certainly don&#039;t know how to do it...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237039">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">OpenTobbse</div>
					<div class="post-datetime">
						17 Jun 2014, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>Although Beef Eater helped me alot getting the missing files - THANK YOU AGAIN - I cannot get imagemagick to work properly.</p><p>Does convert -annotate work for anyone? In my case some basic features of imagemagick work, e.g. convert -flip does. But what I need is something like:</p><p>convert image.jpg -fill white -box &#039;#00770080&#039; -gravity South -pointsize 20 -annotate +0+5 &#039;&nbsp; &nbsp;LABEL&nbsp; &#039; image2.jpg</p><p>However, what i get then is still:</p><p>convert: DelegateLibrarySupportNotBuiltIn `/usr/share/fonts/type1/gsfonts/n019003l.pfb&#039; (Freetype) @ warning/annotate.c/RenderFreetype/1527.<br />convert: NoDecodeDelegateForThisImageFormat `/tmp/magick-3hfPgZr5&#039; @ error/constitute.c/ReadImage/544.<br />convert: DelegateLibrarySupportNotBuiltIn `/usr/share/fonts/type1/gsfonts/n019003l.pfb&#039; (Freetype) @ warning/annotate.c/RenderFreetype/1527.<br />convert: NoDecodeDelegateForThisImageFormat `/tmp/magick-v3GhgcXr&#039; @ error/constitute.c/ReadImage/544.</p><p>which is not surprising as the folder /usr/share/fonts/ doesn&#039;t exist.</p><p>And:<br />convert image.jpg image2.jpg -fill white -box &#039;#00770080&#039; -gravity South -pointsize 20 -annotate +0+5 &#039;&nbsp; &nbsp;LABEL&nbsp; &#039;</p><p>produces:<br />convert: MissingArgument `-annotate&#039; @ error/convert.c/ConvertImageCommand/679.</p>											<p class="post-edited">(Last edited by <strong>OpenTobbse</strong> on 17 Jun 2014, 00:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237043">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Beef Eater</div>
					<div class="post-datetime">
						17 Jun 2014, 01:29					</div>
				</div>
				<div class="post-content content">
					<p>@OpenTobbse: OpenWRT&#039;s version of ImageMagick comes without Freetype support. You can try to enable it and have a lot of fun trying to compile it by editing ImageMagick&#039;s Makefile in feeds/packages/multimedia/imagemagick/Makefile. You will need to change &quot;--without-freetype&quot; to something like &quot;--with-freetype&quot; or possibly just eliminate &quot;--without-freetype&quot; completely at line 92 in Makefile. I cannot tell exactly what needs to be done with Makefile, I have not studied it well enough. Also, you will likely need to do &quot;opkg install libfreetype&quot; to install Freetype libraries.</p><p>In addition, it appears that you will need to install gsfonts package in order for ImageMagick to have access to some fonts. &quot;gsfonts&quot; is not available from OpenWRT&#039;s trunk but it appears that some people out there were able to make it work on OpenWRT by simple copying of files from &quot;gsfonts&quot; package from Debian distribution. You will need to google for it to see what other people tried. Finally, I am not sure if installing &quot;gsfonts&quot; will be sufficient to make your ImageMagick work with Freetype fonts. There might be some other dependencies as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237054">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						17 Jun 2014, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>Beef Eater is right, you need to compile ImageMagick with freetype support.</p><p>Edit ../feeds/packages/multimedia/imagemagick/Makefile:<br />1) remove --without-freetype<br />2) add +libfreetype to DEPENDS section</p><p>Works with -draw &quot;text 0,14 &#039;testtext&#039;&quot;, havn&#039;t tested with annotate though.<br />With that, you don&#039;t need gsfonts, but you should have some fonts in /usr/share/fonts/ (create that directory by yourself and populate it with some fonts).</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 17 Jun 2014, 08:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237098">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						17 Jun 2014, 20:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>OpenTobbse wrote:</cite><blockquote><p>Does convert -annotate work for anyone?</p><div class="codebox"><pre><code>convert image.jpg -fill white -box &#039;#00770080&#039; -gravity South -pointsize 20 -annotate +0+5 &#039;   LABEL  &#039; image2.jpg</code></pre></div><p>However, what i get then is still:</p><div class="codebox"><pre><code>convert: DelegateLibrarySupportNotBuiltIn `/usr/share/fonts/type1/gsfonts/n019003l.pfb&#039; (Freetype) @ warning/annotate.c/RenderFreetype/1527.
convert: NoDecodeDelegateForThisImageFormat `/tmp/magick-3hfPgZr5&#039; @ error/constitute.c/ReadImage/544.
convert: DelegateLibrarySupportNotBuiltIn `/usr/share/fonts/type1/gsfonts/n019003l.pfb&#039; (Freetype) @ warning/annotate.c/RenderFreetype/1527.
convert: NoDecodeDelegateForThisImageFormat `/tmp/magick-v3GhgcXr&#039; @ error/constitute.c/ReadImage/544.</code></pre></div><p>which is not surprising as the folder /usr/share/fonts/ doesn&#039;t exist.</p></blockquote></div><p>It&#039;s not only the missing directory. I have it and there are some fonts in it, however, no gs-fonts, since gs is not installed on my router.</p><p>That&#039;s what I get:<br /></p><div class="codebox"><pre><code>convert backgrnd_1920x120.png -fill white -box &#039;#00770080&#039; -gravity S
outh -pointsize 20 -annotate +0+5 &#039;   LABEL  &#039; background_test_delete_me.jpg
convert: unable to read font `/usr/share/fonts/type1/gsfonts/n019003l.pfb&#039; @ error/annotate.c/RenderFreetype/1124.</code></pre></div><br /><p>-&gt; create the directory, fill it with some fonts (ttf, see below, or pfb, see above) and use the &#039;-font&#039; option, see example below. </p><br /><p>Working for me (please note the &#039;-font&#039; option and usage of ttf):<br /></p><div class="codebox"><pre><code>convert -monitor bergkapelle_static_text.png \
-font /usr/share/fonts/truetype/TypoLatinserif-Bold.ttf \
-gravity NorthEast -pointsize 32 -fill &#039;#D9D9D9&#039; -stroke grey35 -strokewidth 1 \
-draw &quot;text 15,3 &#039;$datentime&#039;&quot; \
bergkapelle_text.png</code></pre></div><div class="quotebox"><cite>OpenTobbse wrote:</cite><blockquote><p>Does convert -annotate work for anyone?</p></blockquote></div><p>Yes. This works for me:</p><div class="codebox"><pre><code>convert backgrnd_1920x120.png -fill white -box &#039;#00770080&#039; -gravity South -font /usr/share/fonts/truetype/TypoLatinserif-Bold.ttf -pointsize 20 -annotate +0+5 &#039;   LABEL  &#039; background_test_delete_me.jpg</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p237316">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">OpenTobbse</div>
					<div class="post-datetime">
						19 Jun 2014, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you guys, you rock!</p><p>Unfortunately I hadn&#039;t time to try yet, but tonight I have and this gonna work! I&#039;ll let you know how it did work out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263176">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">satraf.ckar</div>
					<div class="post-datetime">
						27 Jan 2015, 23:58					</div>
				</div>
				<div class="post-content content">
					<p>hello everyone!</p><p>I&#039;m not a linux expert. (better said I&#039;m a beginner beginner.)</p><p>I managed to make network scanning working with sane (I also wrote a howto/guide on that, as I did not find any working/complete/detailed enough, see here: <a href="https://docs.google.com/document/d/1vWjiXK7OjjUIRXjl8z-7GQdEpzUqoUqrJOC0XcuDv6k/edit?usp=sharing">https://docs.google.com/document/d/1vWj … sp=sharing</a> or <a href="http://goo.gl/7NNmTA">http://goo.gl/7NNmTA</a> )</p><p>My next challenge is to get local scanning to PDF working on the router (Tp-Link WR1043ND). To achieve this, I need these commands: scanimage ...,&nbsp; convert -density 200 *.tif output.ps, ps2pdf output.ps output.pdf). For this I would need ImagaMagick.</p><p>And of course, I came across the problem, that after install with ipkg it is not working.<br />So could anyone please summarize how I can compile it for myself (as I read thats what I need to do?!). Or does anyone have a package that one can just install and it actually works?</p><p>I would not like to rebuild the whole openwrt and then change the complete firmware just for this.</p><p>Many thanks!</p>											<p class="post-edited">(Last edited by <strong>satraf.ckar</strong> on 28 Jan 2015, 00:02)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>