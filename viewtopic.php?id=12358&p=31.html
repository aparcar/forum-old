<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Support for Marvell 88F5xx81 based routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Jan 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 31 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=29.html">29</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=30.html">30</a></li><li class="pagination-current"><span>31</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=32.html">32</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=33.html">33</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p102856">
				<div class="post-metadata">
					<div class="post-num">Post #751</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						13 Feb 2010, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>If restarting wireless is sufficient, then you can do this via a simple nightly cron job:<br /></p><div class="codebox"><pre><code># file: /etc/crontabs/root

# Restarts router, interrupts LAN for a longer period (1+ minute)
#0 5     * * *     reboot

# Restarts network only, interrupts LAN for a long period (~1 minute)
#0 5     * * *     /etc/init.d/network restart

# Restarts only Wireless/WLAN/Wifi plus Internet connection, does not interrupt LAN (good for backups, etc.)
0 5     * * *     /sbin/wifi up
0 5     * * *     /sbin/ifup wan</code></pre></div><p>Could you also update your previous posts with the OpenWrt revisions you are currently running with. Thanks.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 6 Apr 2010, 00:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102857">
				<div class="post-metadata">
					<div class="post-num">Post #752</div>
					<div class="post-author">strale</div>
					<div class="post-datetime">
						13 Feb 2010, 16:49					</div>
				</div>
				<div class="post-content content">
					<p>Thanks! I&#039;ll try that next time it happens. I plan to power off the router and modem with usb, if network restart doesn&#039;t work. But I need a build environment first <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I&#039;m running build 19562, everything seems to work as expected (except luci, can&#039;t access a few modules, but I&#039;ll deinstall luci anyway)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102869">
				<div class="post-metadata">
					<div class="post-num">Post #753</div>
					<div class="post-author">PeePi</div>
					<div class="post-datetime">
						13 Feb 2010, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve installed the new build 19562(the upgrade removed my ftp issues) and I&#039;m having issues with qos-scripts and iptables throwing segmentation faults when I invoke the mark module </p><p>so for instance <br /></p><div class="codebox"><pre><code>iptables -t mangle -A FORWARD -p UDP</code></pre></div><p>functions fine</p><p>but<br /></p><div class="codebox"><pre><code>iptables -t mangle -A FORWARD -p UDP -j MARK</code></pre></div><p>throws a segmentation fault</p><p>I&#039;d like to check if it&#039;s just me or if others are experiencing the same problems or if I&#039;ve messed up the installation and broken something strange though I&#039;ve been trying reinstalling the relevant packages.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102870">
				<div class="post-metadata">
					<div class="post-num">Post #754</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						13 Feb 2010, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Can you please check the linux kernel version with &quot;uname -a&quot;?<br />If it says 2.6.32.x instead of 2.6.30.x, then I accidentially uploaded a test build of 19562.</p><p>Executed both commands without issues on my system, but I do not have qos-sccripts installed, so I just get a normal iptables error message.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102871">
				<div class="post-metadata">
					<div class="post-num">Post #755</div>
					<div class="post-author">PeePi</div>
					<div class="post-datetime">
						13 Feb 2010, 20:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>Can you please check the linux kernel version with &quot;uname -a&quot;?<br />If it says 2.6.32.x instead of 2.6.30.x, then I accidentially uploaded a test build of 19562.</p><p>Executed both commands without issues on my system, but I do not have qos-sccripts installed, so I just get a normal iptables error message.</p></blockquote></div><p>Linux OpenWrt 2.6.30.10 #1 Tue Feb 9 18:31:15 CET 2010 armv5tel GNU/Linux</p><p>if qos-scripts aren&#039;t installed you might not have the mark module installed for iptables, I believe the relevant module is iptables-mod-ipopt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102872">
				<div class="post-metadata">
					<div class="post-num">Post #756</div>
					<div class="post-author">strale</div>
					<div class="post-datetime">
						13 Feb 2010, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Could reproduce the problem, the 2nd command results in a segmentation fault (2.6.30.10). Although without gdb, it&#039;s quite hard to debug <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (not enough space free for gdb)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102874">
				<div class="post-metadata">
					<div class="post-num">Post #757</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						13 Feb 2010, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>You can install additional huge packages onto usb storage. This was also discussed in this thread and several others, the wiki contains some information too.<br />If I remember correctly you specify a different dest root in opkg.conf plus some more.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p102887">
				<div class="post-metadata">
					<div class="post-num">Post #758</div>
					<div class="post-author">strale</div>
					<div class="post-datetime">
						14 Feb 2010, 00:18					</div>
				</div>
				<div class="post-content content">
					<p>I only have a vfat usb hdd at the moment. I need a build environment anyway and with debug symbols it might be a bit easier to debug (I haven&#039;t done debugging on anything busybox, so I have no idea if it&#039;ll work. ulimit -c unlimited didn&#039;t produce a core file, as I would have expected)<br />network restart resolved my connection problem, so I&#039;ll add a cron job for that. My repeater shows 130MBit/s - I had that with the stock firmware as well until I changed some wifi settings, so I&#039;ll play with the settings a bit too <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Update:<br />changed htmode to HT40+ / HT40- ... my repeater shows 300MBit/s - need to do a few performance tests, but it looks good</p><p>Update2:<br />HT40 is way way to unstable to be usefull. Wouldn&#039;t recommend it.</p><p>Update3:<br />Doesn&#039;t seem to be HT40 related, needed to restart the network a few times today because wifi wasn&#039;t working properly. (was connected, but couldn&#039;t ping the router)</p>											<p class="post-edited">(Last edited by <strong>strale</strong> on 14 Feb 2010, 21:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103041">
				<div class="post-metadata">
					<div class="post-num">Post #759</div>
					<div class="post-author">jammers</div>
					<div class="post-datetime">
						16 Feb 2010, 12:57					</div>
				</div>
				<div class="post-content content">
					<p>@maddes.b</p><p>After reading this lengthy thread &lt;whew&gt; I hope I&#039;ve got this question right...&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I have an WNR845T with a very old Xwrt flash. (r13021).&nbsp; no wan support&nbsp; &nbsp;&lt;been a nice paperweight for over a year!&gt;<br />Lan and webif are working so to upgrade I just need your updated sysupgrade, mtd, and platform.sh&nbsp; etc...<br />I don&#039;t have means to compile at present, and no jtag/serial tools.</p><p>Is there an ipk or tarball the needed binaries/scripts?&nbsp; (or did I miss that one elusive post)</p><p>This would be an awesome tool to point many at on this thread at that had similar issues,<br />as well as a possible quick-fix to apply to the official builds until they integrate your patches.</p><p>Thanks so much for moving this platform along !&nbsp; <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>JL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103043">
				<div class="post-metadata">
					<div class="post-num">Post #760</div>
					<div class="post-author">StrikerNL</div>
					<div class="post-datetime">
						16 Feb 2010, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>I believe maddes is out of the country, he&#039;s not likely to respond anytime soon.</p><p>I don&#039;t think there is an easy way to upgrade from non openwrt firmware other than the original linksys firmware. Your only bet may be getting an mtd image and dd&#039;ing it to mtdblock, but that&#039;s a shaky procedure at best (me and DirkNL bricked a WRT350n once using that exact procedure -- had to unbrick using JTAG).</p><p>I might be wrong though.</p>											<p class="post-edited">(Last edited by <strong>StrikerNL</strong> on 16 Feb 2010, 13:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103044">
				<div class="post-metadata">
					<div class="post-num">Post #761</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						16 Feb 2010, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>Striker is right I&#039;m &quot;out of the country&quot; (not at home), fortunately not out of this world.<br />Will have access to the forum from time to time.</p><p>@jammers:<br />You can not implement a new mtd partitioning into an existing old installation.<br />But you can update by flashing via &quot;dd&quot; or &quot;mtd write&quot;.</p><p>First check your current mtd partitioning with &quot;cat /proc/mtd&quot;.<br />For WNR845T it should be:<br />dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00100000 000x0000 &quot;kernel&quot;<br />mtd1: 00660000 000x0000 &quot;rootfs&quot;<br />...</p><p>Then use the info from <a href="https://forum.openwrt.org/viewtopic.php?pid=89744#p89744">post #340</a>, paragraph &quot;Flashing in Linux / with same kernel mtd size&quot;.<br />Using &quot;mtd write&quot; would even be better than &quot;dd&quot;, because I do not provide padded images anymore.<br />But if you want to use &quot;dd&quot; with a padded image, than above that paragraph is the code for &quot;create_images_WRT350Nv2.sh&quot; which shows how to create a padded image.<br />And at the beginning of that post is an example how to split a squashfs release image (&quot;openwrt-wnr854t-squashfs.img&quot;).</p><p>Read the mentioned posts, play around a little bit in linux with the images and &quot;dd&quot; (or in your router&#039;s /tmp dir).<br />If you feel comfortable you may decide to flash in linux via &quot;dd&quot; or &quot;mtd write&quot;.<br />And I always recommend to document your steps, helps to find your own bugs and create good bug reports (what file, md5sum check, what commands, error messages, file sizes, file compares, etc.).<br />Process sequence:&nbsp; download, md5 check, upload, md5 check, split, flash</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 16 Feb 2010, 23:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103049">
				<div class="post-metadata">
					<div class="post-num">Post #762</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						16 Feb 2010, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>I want to warn people for using dd for upgrading, i&#039;ve been using it since the beginning of this project to flash my upgraded kernel and rootfs. However it seems as if it is no longer a solid option. 99% of the time the kernel flashes without problems, but the rootfs almost everytime now fails. You don&#039;t get an error message while flashing, but you do get a big hint that it hasn&#039;t done what it should. The dd command for flashing rootfs (approx 1mb) should take about 30 secs to complete. When you see the command finish after just 2 to 10 seconds, you know it is wrong. One way to recover from this is booting into a ramimage and flashing from within there. </p><p>The other way should be in recovery mode, but i have yet to work with that <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> serial console is your friend.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103060">
				<div class="post-metadata">
					<div class="post-num">Post #763</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						16 Feb 2010, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>X-Wrt <strong>IS</strong> OpenWrt with Webif² web interface. It can be downloaded from <a href="http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/orion/">here</a>. Currently at r19550.<br />So you must have ssh access to your router to fetch some info:<br />From Linux console: <strong>ssh root@192.168.1.1</strong><br />From Windows must use <strong>Putty</strong>.<br /></p><div class="quotebox"><cite>sed -n &#039;s,^H.*: ,,p&#039; /proc/cpuinfo wrote:</cite><blockquote><p>Netgear WNR854T</p></blockquote></div><div class="quotebox"><cite>opkg list_installed base-files wrote:</cite><blockquote><p>base-files - 26-r17427 -</p></blockquote></div><div class="quotebox"><cite>cat /proc/mtd wrote:</cite><blockquote><p>dev:&nbsp; &nbsp; size&nbsp; &nbsp;erasesize&nbsp; name<br />mtd0: 00100000 00020000 &quot;kernel&quot;<br />mtd1: 00660000 00020000 &quot;rootfs&quot;<br />mtd2: 00460000 00020000 &quot;rootfs_data&quot;<br />mtd3: 00040000 00020000 &quot;uboot&quot;</p></blockquote></div><div class="quotebox"><cite>ls -la /dev/mtdblock* wrote:</cite><blockquote><p>brw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 31,&nbsp; &nbsp;0 Dec 31&nbsp; 1969 <span style="color: magenta">/dev/mtdblock0</span><br />brw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 31,&nbsp; &nbsp;1 Dec 31&nbsp; 1969 <span style="color: magenta">/dev/mtdblock1</span><br />brw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 31,&nbsp; &nbsp;2 Dec 31&nbsp; 1969 <span style="color: magenta">/dev/mtdblock2</span><br />brw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 31,&nbsp; &nbsp;3 Dec 31&nbsp; 1969 <span style="color: magenta">/dev/mtdblock3</span></p></blockquote></div><p>Step 1: Download<br /></p><div class="codebox"><pre><code>cd /tmp
wget http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/orion/openvpn/md5sums
wget http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/orion/openvpn/openwrt-wnr854t-squashfs.img</code></pre></div><p>Step 2: md5 check<br /></p><div class="quotebox"><cite>md5sum -c md5sums wrote:</cite><blockquote><p>md5sum: can&#039;t open &#039;openwrt-wrt350nv2-squashfs-webupgrade.img&#039;: No such file or directory<br />openwrt-wrt350nv2-squashfs-webupgrade.img: FAILED<br />md5sum: can&#039;t open &#039;openwrt-wrt350nv2-uImage&#039;: No such file or directory<br />openwrt-wrt350nv2-uImage: FAILED<br />md5sum: can&#039;t open &#039;openwrt-wnr854t-uImage&#039;: No such file or directory<br />openwrt-wnr854t-uImage: FAILED<br />md5sum: can&#039;t open &#039;openwrt-dt2-squashfs-webupgrade.img&#039;: No such file or directory<br />openwrt-dt2-squashfs-webupgrade.img: FAILED<br />md5sum: can&#039;t open &#039;openwrt-dt2-squashfs.img&#039;: No such file or directory<br />openwrt-dt2-squashfs.img: FAILED<br />md5sum: can&#039;t open &#039;openwrt-wrt350nv2-squashfs-recovery.bin&#039;: No such file or directory<br />openwrt-wrt350nv2-squashfs-recovery.bin: FAILED<br />md5sum: can&#039;t open &#039;openwrt-wrt350nv2-squashfs.img&#039;: No such file or directory<br />openwrt-wrt350nv2-squashfs.img: FAILED<br /><strong>openwrt-wnr854t-squashfs.img: OK</strong><br />md5sum: can&#039;t open &#039;openwrt-wnr854t-squashfs-webupgrade.img&#039;: No such file or directory<br />openwrt-wnr854t-squashfs-webupgrade.img: FAILED<br />md5sum: can&#039;t open &#039;openwrt-orion-squashfs.img&#039;: No such file or directory<br />openwrt-orion-squashfs.img: FAILED<br />md5sum: can&#039;t open &#039;openwrt-dt2-uImage&#039;: No such file or directory<br />openwrt-dt2-uImage: FAILED<br />md5sum: WARNING: 10 of 11 computed checksums did NOT match</p></blockquote></div><p>Step 3: File size<br /></p><div class="quotebox"><cite>ls -la openwrt* wrote:</cite><blockquote><p>-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; 3276800 Feb 16 15:17 openwrt-wnr854t-squashfs.img</p></blockquote></div><p>Step 4: Split<br />Reading <a href="https://forum.openwrt.org/viewtopic.php?pid=89744#p89744">#340</a>... Will edit later</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 16 Feb 2010, 20:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103114">
				<div class="post-metadata">
					<div class="post-num">Post #764</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						17 Feb 2010, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Nilfred, for the start.</p><p>Step 4: Split<br />a) kernel uImage<br /></p><div class="codebox"><pre><code>dd if=openwrt-wnr854t-squashfs.img of=openwrt-wnr854t-uImage bs=1024k count=1</code></pre></div><p>b) rootfs<br /></p><div class="codebox"><pre><code>dd if=openwrt-wnr854t-squashfs.img of=root.squashfs.wnr854t bs=1024k skip=1</code></pre></div><p>Step 5: Flash<br />a) sync<br /></p><div class="codebox"><pre><code>sync</code></pre></div><p>b) kernel uImage<br /></p><div class="codebox"><pre><code>mtd write openwrt-wnr854t-uImage &quot;kernel&quot;</code></pre></div><p>c) rootfs<br /></p><div class="codebox"><pre><code>mtd write root.squashfs.wnr854t &quot;rootfs&quot;</code></pre></div><p>d) reboot<br /></p><div class="codebox"><pre><code>reboot</code></pre></div><p>Use at your own risk.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 17 Feb 2010, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103116">
				<div class="post-metadata">
					<div class="post-num">Post #765</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						17 Feb 2010, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Got access to my development machine.<br />Rebuild r17264 and r17456 to include the latest sysupgrade patch and the leds patch for WRT350Nv2.<br />Additionally build current <a href="https://dev.openwrt.org/changeset/19684">r19684</a>, only difference to OpenWrt snapshot is the leds patch for WRT350Nv2.</p><p>If there are no complaints about the led patch after I get back home, then I will submit it to the developer list to be put into trunk.<br />After that <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/">my ftp space</a> will be deleted except for the r17xxx builds.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 7 Apr 2010, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103225">
				<div class="post-metadata">
					<div class="post-num">Post #766</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						19 Feb 2010, 02:17					</div>
				</div>
				<div class="post-content content">
					<p>Who <a href="http://marc.info/?l=linux-wireless&amp;m=126540674419330&amp;w=2">believe in magic</a>?<br />So add this to the mwl8k driver for it to pick up the card:</p><p>+&nbsp; &nbsp; { PCI_VDEVICE(MARVELL, 0x2a02), .driver_data = MWL8363, },</p><p>From:<br />a813c8c0dd58deab9472d8e3e7c0fb5b&nbsp; netmw145.sys<br />Extract:<br />07fcb3fc7f2b4c7fbc78575796ea984b&nbsp; fmimage_8XX1.fw<br />ccbbe74ebfae9daecbd329cc818faaa3&nbsp; helper_8XX1.fw<br />Rename (not so) obviusly to:<br />fmimage_8363.fw<br />helper_8363.fw</p><p>Hope this work for Netgear WNR854T. I&#039;m not a magician.</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 15 Apr 2010, 08:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103240">
				<div class="post-metadata">
					<div class="post-num">Post #767</div>
					<div class="post-author">plastinka</div>
					<div class="post-datetime">
						19 Feb 2010, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>I could use some magic too!</p><p>I try to get an MP-6421 Mini PCI controller working with my WRT350nv2.<br />Unfortunately the controller doesn&#039;t show up on the PCI-bus. So I&#039;m stuck right at the beginning:((<br />I would really like to see that card working.</p><p>PS: I did some testing (r19643) using iperf: Switching performance is nearly 300 Mbit/s. Not that bad. Jumboframe support seems to be broken, though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103243">
				<div class="post-metadata">
					<div class="post-num">Post #768</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						19 Feb 2010, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>To extract the firmware for the mwl8k driver, open your Ubuntu terminal:<br /></p><div class="codebox"><pre><code>sudo apt-get install cabextract unshield
mkdir mwl8k
cd mwl8k
wget -O mrv8k_extract_fw.c &#039;http://marc.info/?l=linux-wireless&amp;m=126540674419330&amp;q=p3&#039;
wget ftp://downloads.netgear.com/files/wn311t_4_2_setup.exe
mkdir mess
cabextract -F Disk1/data*.* -d mess wn311t_4_2_setup.exe
unshield -g Driver -d mess x mess/Disk1/data1.cab
gcc -o mrv8k_extract_fw mrv8k_extract_fw.c
./mrv8k_extract_fw mess/Driver/netmw145.sys
rm -r mess
md5sum -b *.fw
mv fmimage_8XX1.fw fmimage_8363.fw
mv helper_8XX1.fw helper_8363.fw</code></pre></div><p>Some outputs:<br /></p><div class="quotebox"><cite>md5sum -b *.fw wrote:</cite><blockquote><p>48c79b085f7f5a590d3dbc15647e519f *fmimage_8XX0.fw<br />07fcb3fc7f2b4c7fbc78575796ea984b *fmimage_8XX1.fw<br />f22c7bf04808480422770b4a2b9c08ab *fmimage_8XX2.fw<br />941d3f9f88b78fe38f4bf8bd9d24a728 *fmimage_8XX3.fw<br />0fe11f415adbbd5e8ca03641705c4a6c *helper_8XX0.fw<br />ccbbe74ebfae9daecbd329cc818faaa3 *helper_8XX1.fw<br />561e43b20532ae19e8bdea9e8f296ff0 *helper_8XX2.fw</p></blockquote></div><div class="quotebox"><cite>gcc -o mrv8k_extract_fw mrv8k_extract_fw.c -DUSE_OPENSSL -lcrypto wrote:</cite><blockquote><p>mrv8k_extract_fw.c:44:25: error: openssl/sha.h: File or directory does not exist<br />mrv8k_extract_fw.c: In function ‘main’:<br />mrv8k_extract_fw.c:84: warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘long int’<br />mrv8k_extract_fw.c:94: warning: format ‘%x’ expects type ‘unsigned int’, but argument 2 has type ‘long int’<br />mrv8k_extract_fw.c: In function ‘export_to_bin’:<br />mrv8k_extract_fw.c:132: error: ‘SHA_DIGEST_LENGTH’ undeclared (first use in this function)<br />mrv8k_extract_fw.c:132: error: (Each undeclared identifier is reported only once<br />mrv8k_extract_fw.c:132: error: for each function it appears in.)</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 15 Apr 2010, 08:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103431">
				<div class="post-metadata">
					<div class="post-num">Post #769</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						21 Feb 2010, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Good morning everybody (time zone is CET).</p><p>Found a way to apply the WRT350Nv2 LED uci settings without disturbing other hardware.<br />Mainly by using a script in /etc/uci-defaults that checks for the hardware (similar to the sysupgrade), then applies the necessary uci settings for that hardware.<br />Also updated the USB script to work with different hardware and /sys/class/leds paths.<br />Updated patches are available at <a href="ftp://ftp.maddes.net/openwrt/trunk/orion/patches/kernel/">ftp://ftp.maddes.net/openwrt/trunk/orio … es/kernel/</a></p><p>New builds when time allows.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 7 Apr 2010, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103441">
				<div class="post-metadata">
					<div class="post-num">Post #770</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						21 Feb 2010, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maddes.b wrote:</cite><blockquote><p>Currently rebuilding 17264 with sysupgrade support for WRT350 and WNR854T. Will take <strong>12-14 hours</strong>.</p></blockquote></div><p>I did my first build in roughly <strong>3 hours</strong> on Ubuntu 9.10 amd64:<br /></p><div class="quotebox"><blockquote><p>sudo apt-get install subversion ncurses-term flex gettext zlib1g-dev libncurses5-dev gawk<br />cd ~<br />mkdir openwrt<br />cd openwrt<br />svn co svn://svn.openwrt.org/openwrt/trunk/<br />cd ~/openwrt/trunk<br />make menuconfig<br />make package/symlinks<br />make -j6 V=99 download<br />make -j2<br />ls -la ~/openwrt/trunk/bin/orion/</p></blockquote></div><p>As you can see, I use 6 threads for simultaneous download source code and 2 threads/cores to compile. I&#039;m aware that &quot;make -j2&quot; breaks things (openssl documented)<br />Did I take too many shortcuts?<br />Where mwl8k.c, fmimage_8361.fw and helper_8361.fw should go?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103450">
				<div class="post-metadata">
					<div class="post-num">Post #771</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						21 Feb 2010, 20:08					</div>
				</div>
				<div class="post-content content">
					<p>Build time depends at first on the range of packages you select, and second if you start from scratch or if the tools were already build before.<br />Here are my values (all after a distclean), if the tools were already compiled then you can reduce these times by roughly 45 minutes:<br />* Mini build = 1.5h (nothing extra selected)<br />* Release build = 2.5h (all packages of trunk selected, and no extra feeds)<br />* Package build = 12h (all packages from trunk, package feed, luci feed, x-wrt feed)</p><p>Btw I&#039;m compiling with Debian 5.0 &quot;Lenny&quot; x86 inside a <a href="http://www.virtualbox.org/">VirtualBox</a> VM with just 1 CPU of my Intel Quad 9650 (3GHz) on a Win XP x86 host.</p><p>Right now, I can not help with the mwl8k backport.<br />But after you have created your own build, just check if there are alreay mwl8k files inside your build tree (use find).<br />Then create a patch for mwl8k.c and put it in target/linux/orion/patches, see the existing patches to have a clue how your patch should look like, e.g. it must be a -p1 patch.<br />For the firmware files find out where they are typically located inside the build tree, then put them there.</p><p>Also I suggest to contact nbd of the OpenWrt team after you got most of that done.<br />He is normally very busy, but if you provide good prepared information (patch + firmware files), then he is normally helping or even committing WLAN/Wifi stuff to trunk.<br />Catch him on IRC or via mail nbd@openwrt.org.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 21 Feb 2010, 20:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103672">
				<div class="post-metadata">
					<div class="post-num">Post #772</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						24 Feb 2010, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>jow posted a fix for seg faults in <a href="https://dev.openwrt.org/changeset/19827">r19827</a>.<br />Maybe this will fix the issues with kernel 2.6.32.</p><p><span class="bbu">Update:</span><br />Another trunk change to fix this is in <a href="https://dev.openwrt.org/changeset/19851">r19851</a>.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 25 Feb 2010, 02:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103683">
				<div class="post-metadata">
					<div class="post-num">Post #773</div>
					<div class="post-author">domadm</div>
					<div class="post-datetime">
						24 Feb 2010, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>My WRT350Nv2.1 still encounters wifi problems (wifi network is visible but cannot connect to) every few days. Power recycle helps (haven&#039;t tried soft reboot).<br />KAMIKAZE r19544 from maddes.b, only luci added.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103694">
				<div class="post-metadata">
					<div class="post-num">Post #774</div>
					<div class="post-author">dirkNL</div>
					<div class="post-datetime">
						25 Feb 2010, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>Instead of Striker&#039;s mentioned scheduled reboot we now have a cron running &#039;wifi&#039; daily at 7am. AFAIK this is a good enough workaround for the unstable wifi. The instability here always came after a few days.</p>											<p class="post-edited">(Last edited by <strong>dirkNL</strong> on 25 Feb 2010, 00:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103842">
				<div class="post-metadata">
					<div class="post-num">Post #775</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						27 Feb 2010, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>I compiled <a href="ftp://ftp.maddes.net/openwrt/kamikaze/">r19875</a> with kernel 2.6.32.8 and got no seg faults with my setup so far.</p><p>USB and WLAN/Wifi LED are working fine for me.</p><p>Would be great if also WNR845T users could check out that build.</p><p><span class="bbu">Update:</span><br />Recognized that kernel 2.6.32.9 is available. So rebuild and re-uploaded.</p>											<p class="post-edited">(Last edited by <strong>maddes.b</strong> on 27 Feb 2010, 11:28)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 31 of 46</div><nav><ul><li><a href="viewtopic.php%3Fid=12358&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=29.html">29</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=30.html">30</a></li><li class="pagination-current"><span>31</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=32.html">32</a></li><li><a href="viewtopic.php%3Fid=12358&amp;p=33.html">33</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=12358&amp;p=46.html">46</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>