<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ZyXEL P-870HN-51b - whats next vlans?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p219128">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">broadcom</div>
					<div class="post-datetime">
						3 Dec 2013, 19:06					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/toh/zyxel/p-870hn-51b">http://wiki.openwrt.org/toh/zyxel/p-870hn-51b</a></p><br /><div class="codebox"><pre><code>root@OpenWrt:/# swconfig list
Found: switch0 - eth0
root@OpenWrt:/# swconfig dev switch0 show
Global attributes:
        enable_vlan: 1
        ports: 0x0136
        reset_mib: ???
        enable_jumbo: 0
        allow_vid_4095: 0
Port 0:
        mib: ???
        pvid: 0
        link: port:0 link:down
Port 1:
        mib: TxOctets            : 0
TxDropPkts          : 0
TxQoSPkts           : 0
TxBroadcastPkts     : 0
TxMulticastPkts     : 0
TxUnicastPkts       : 0
TxCollisions        : 0
TxSingleCollision   : 0
TxMultipleCollision : 0
TxDeferredTransmit  : 0
TxLateCollision     : 0
TxExcessiveCollision: 0
TxPausePkts         : 0
TxQoSOctets         : 0
RxOctets            : 0
RxUndersizePkts     : 0
RxPausePkts         : 0
Pkts64Octets        : 0
Pkts65to127Octets   : 0
Pkts128to255Octets  : 0
Pkts256to511Octets  : 0
Pkts512to1023Octets : 0
Pkts1024to1522Octets: 0
RxOversizePkts      : 0
RxJabbers           : 0
RxAlignmentErrors   : 0
RxFCSErrors         : 0
RxGoodOctets        : 0
RxDropPkts          : 0
RxUnicastPkts       : 0
RxMulticastPkts     : 0
RxBroadcastPkts     : 0
RxSAChanges         : 0
RxFragments         : 0
RxSymbolErrors      : 0
RxQoSPkts           : 0
RxQoSOctets         : 0
Pkts1523to2047Octets: 0
Pkts2048to4095Octets: 0
Pkts4096to8191Octets: 0
Pkts8192to9728Octets: 0
RxDiscarded         : 0

        pvid: 1
        link: port:1 link:down
Port 2:
        mib: TxOctets            : 0
TxDropPkts          : 0
TxQoSPkts           : 0
TxBroadcastPkts     : 0
TxMulticastPkts     : 0
TxUnicastPkts       : 0
TxCollisions        : 0
TxSingleCollision   : 0
TxMultipleCollision : 0
TxDeferredTransmit  : 0
TxLateCollision     : 0
TxExcessiveCollision: 0
TxPausePkts         : 0
TxQoSOctets         : 0
RxOctets            : 0
RxUndersizePkts     : 0
RxPausePkts         : 0
Pkts64Octets        : 0
Pkts65to127Octets   : 0
Pkts128to255Octets  : 0
Pkts256to511Octets  : 0
Pkts512to1023Octets : 0
Pkts1024to1522Octets: 0
RxOversizePkts      : 0
RxJabbers           : 0
RxAlignmentErrors   : 0
RxFCSErrors         : 0
RxGoodOctets        : 0
RxDropPkts          : 0
RxUnicastPkts       : 0
RxMulticastPkts     : 0
RxBroadcastPkts     : 0
RxSAChanges         : 0
RxFragments         : 0
RxSymbolErrors      : 0
RxQoSPkts           : 0
RxQoSOctets         : 0
Pkts1523to2047Octets: 0
Pkts2048to4095Octets: 0
Pkts4096to8191Octets: 0
Pkts8192to9728Octets: 0
RxDiscarded         : 0

        pvid: 1
        link: port:2 link:down
Port 3:
        mib: ???
        pvid: 0
        link: port:3 link:down
Port 4:
        mib: TxOctets            : 0
TxDropPkts          : 0
TxQoSPkts           : 0
TxBroadcastPkts     : 0
TxMulticastPkts     : 0
TxUnicastPkts       : 0
TxCollisions        : 0
TxSingleCollision   : 0
TxMultipleCollision : 0
TxDeferredTransmit  : 0
TxLateCollision     : 0
TxExcessiveCollision: 0
TxPausePkts         : 0
TxQoSOctets         : 0
RxOctets            : 0
RxUndersizePkts     : 0
RxPausePkts         : 0
Pkts64Octets        : 0
Pkts65to127Octets   : 0
Pkts128to255Octets  : 0
Pkts256to511Octets  : 0
Pkts512to1023Octets : 0
Pkts1024to1522Octets: 0
RxOversizePkts      : 0
RxJabbers           : 0
RxAlignmentErrors   : 0
RxFCSErrors         : 0
RxGoodOctets        : 0
RxDropPkts          : 0
RxUnicastPkts       : 0
RxMulticastPkts     : 0
RxBroadcastPkts     : 0
RxSAChanges         : 0
RxFragments         : 0
RxSymbolErrors      : 0
RxQoSPkts           : 0
RxQoSOctets         : 0
Pkts1523to2047Octets: 0
Pkts2048to4095Octets: 0
Pkts4096to8191Octets: 0
Pkts8192to9728Octets: 0
RxDiscarded         : 0

        pvid: 1
        link: port:4 link:down
Port 5:
        mib: TxOctets            : 0
TxDropPkts          : 0
TxQoSPkts           : 0
TxBroadcastPkts     : 0
TxMulticastPkts     : 0
TxUnicastPkts       : 0
TxCollisions        : 0
TxSingleCollision   : 0
TxMultipleCollision : 0
TxDeferredTransmit  : 0
TxLateCollision     : 0
TxExcessiveCollision: 0
TxPausePkts         : 0
TxQoSOctets         : 0
RxOctets            : 0
RxUndersizePkts     : 0
RxPausePkts         : 0
Pkts64Octets        : 0
Pkts65to127Octets   : 0
Pkts128to255Octets  : 0
Pkts256to511Octets  : 0
Pkts512to1023Octets : 0
Pkts1024to1522Octets: 0
RxOversizePkts      : 0
RxJabbers           : 0
RxAlignmentErrors   : 0
RxFCSErrors         : 0
RxGoodOctets        : 0
RxDropPkts          : 0
RxUnicastPkts       : 0
RxMulticastPkts     : 0
RxBroadcastPkts     : 0
RxSAChanges         : 0
RxFragments         : 0
RxSymbolErrors      : 0
RxQoSPkts           : 0
RxQoSOctets         : 0
Pkts1523to2047Octets: 0
Pkts2048to4095Octets: 0
Pkts4096to8191Octets: 0
Pkts8192to9728Octets: 0
RxDiscarded         : 0

        pvid: 1
        link: port:5 link:down
Port 6:
        mib: ???
        pvid: 0
        link: port:6 link:down
Port 7:
        mib: ???
        pvid: 0
        link: port:7 link:down
Port 8:
        mib: TxOctets            : 0
TxDropPkts          : 0
TxQoSPkts           : 0
TxBroadcastPkts     : 0
TxMulticastPkts     : 0
TxUnicastPkts       : 0
TxCollisions        : 0
TxSingleCollision   : 0
TxMultipleCollision : 0
TxDeferredTransmit  : 0
TxLateCollision     : 0
TxExcessiveCollision: 0
TxPausePkts         : 0
TxQoSOctets         : 0
RxOctets            : 1764
RxUndersizePkts     : 0
RxPausePkts         : 0
Pkts64Octets        : 0
Pkts65to127Octets   : 10
Pkts128to255Octets  : 6
Pkts256to511Octets  : 0
Pkts512to1023Octets : 0
Pkts1024to1522Octets: 0
RxOversizePkts      : 0
RxJabbers           : 0
RxAlignmentErrors   : 0
RxFCSErrors         : 0
RxGoodOctets        : 1764
RxDropPkts          : 0
RxUnicastPkts       : 0
RxMulticastPkts     : 16
RxBroadcastPkts     : 0
RxSAChanges         : 0
RxFragments         : 0
RxSymbolErrors      : 0
RxQoSPkts           : 0
RxQoSOctets         : 0
Pkts1523to2047Octets: 0
Pkts2048to4095Octets: 0
Pkts4096to8191Octets: 0
Pkts8192to9728Octets: 0
RxDiscarded         : 0

        pvid: 0
        link: port:8 link:up speed:1000baseT full-duplex
VLAN 1:
        ports: 1 2 4 5 8t
root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# uci show network
network.loopback=interface
network.loopback.ifname=lo
network.loopback.proto=static
network.loopback.ipaddr=127.0.0.1
network.loopback.netmask=255.0.0.0
network.globals=globals
network.globals.ula_prefix=fd7d:92d9:4183::/48
network.lan=interface
network.lan.ifname=eth0.1
network.lan.type=bridge
network.lan.proto=static
network.lan.ipaddr=192.168.1.1
network.lan.netmask=255.255.255.0
network.lan.ip6assign=60
network.@switch[0]=switch
network.@switch[0].name=eth0
network.@switch[0].reset=1
network.@switch[0].enable_vlan=1
network.@switch_vlan[0]=switch_vlan
network.@switch_vlan[0].device=eth0
network.@switch_vlan[0].vlan=1
network.@switch_vlan[0].ports=1 2 4 5 8t
root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr C8:6C:87:5C:11:A9
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::ca6c:87ff:fe5c:11a9/64 Scope:Link
          inet6 addr: fd7d:92d9:4183::1/60 Scope:Global
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:706 (706.0 B)

eth0      Link encap:Ethernet  HWaddr C8:6C:87:5C:11:A9
          inet6 addr: fe80::ca6c:87ff:fe5c:11a9/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:14 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:1540 (1.5 KiB)

eth0.1    Link encap:Ethernet  HWaddr C8:6C:87:5C:11:A9
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:7 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:706 (706.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:216 errors:0 dropped:0 overruns:0 frame:0
          TX packets:216 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:14688 (14.3 KiB)  TX bytes:14688 (14.3 KiB)

wlan0     Link encap:Ethernet  HWaddr C8:6C:87:5C:11:AA
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:224 (224.0 B)

root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# cat /etc/config/network

config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
        option ula_prefix &#039;fd7d:92d9:4183::/48&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0.1&#039;
        option type &#039;bridge&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;192.168.1.1&#039;
        option netmask &#039;255.255.255.0&#039;
        option ip6assign &#039;60&#039;

config switch
        option name &#039;eth0&#039;
        option reset &#039;1&#039;
        option enable_vlan &#039;1&#039;

config switch_vlan
        option device &#039;eth0&#039;
        option vlan &#039;1&#039;
        option ports &#039;1 2 4 5 8t&#039;

root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/etc/config# wifi
root@OpenWrt:/etc/config# [ 1027.460000] device wlan0 left promiscuous mode
[ 1027.464000] br-lan: port 2(wlan0) entered disabled state
[ 1028.280000] b43-phy0: Loading firmware version 666.2 (2011-02-23 01:15:07)
[ 1028.388000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[ 1028.396000] device wlan0 entered promiscuous mode
[ 1028.400000] br-lan: port 2(wlan0) entered forwarding state
[ 1028.404000] br-lan: port 2(wlan0) entered forwarding state
[ 1028.416000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[ 1030.408000] br-lan: port 2(wlan0) entered forwarding state</code></pre></div><p>I did what i can do. I dont know how to configure these vlans, can anybody give a tip?<br />Dhcp not giving ip to computer, wifi not working. Openwrt found switch.</p><p>-edit-<br />Sory its my fault didnt push enough plug to socket previous time , and didnt any led light this cheat me</p><div class="codebox"><pre><code>[ 1266.172000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port2, 100Mbps, full-duplex
[ 1387.180000] bcm63xx_enetsw bcm63xx_enetsw.0: link DOWN on port2
[ 1394.184000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port2, 100Mbps, full-duplex
[ 1439.192000] bcm63xx_enetsw bcm63xx_enetsw.0: link DOWN on port2
[ 1441.196000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port1, 100Mbps, full-duplex
[ 1460.204000] bcm63xx_enetsw bcm63xx_enetsw.0: link DOWN on port1
[ 1510.208000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port1, 100Mbps, full-duplex
[ 1516.216000] bcm63xx_enetsw bcm63xx_enetsw.0: link DOWN on port1
[ 1519.220000] bcm63xx_enetsw bcm63xx_enetsw.0: link UP on port2, 100Mbps, full-duplex
[ 1527.228000] bcm63xx_enetsw bcm63xx_enetsw.0: link DOWN on port2</code></pre></div><p>------------<br />To order things : doesnt matter to which port i plug rj-45 cable it always says port1/port2 - (shoulnt it find 1,2,3,4?)<br />Second wifi is not working even if it is saying &quot;entered x state) my phone cannot detect signal even from 1 cm - wtf?<br />Third need to use one of this four ports as WAN port - how to configure that?</p>											<p class="post-edited">(Last edited by <strong>broadcom</strong> on 4 Dec 2013, 00:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226155">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zero13wifi</div>
					<div class="post-datetime">
						24 Feb 2014, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>Hello!, </p><p>I just checked the information for connecting to Zyxel P-870HN-51b (serial port) and PINS are erroneous: </p><p>The correct order and tested is: </p><p>GND </p><p>RxD <br />TxD <br />+3.3 v </p><p>A greeting!<br />Zero13</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>