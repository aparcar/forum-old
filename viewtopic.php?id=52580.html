<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Can&#039;t install LUCI on my TP-Link TL-WR941ND v3.6 (4Mb Flash)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p246036">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">RafaelRS</div>
					<div class="post-datetime">
						4 Sep 2014, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>Tried to upgrade OpenWRT on device and got this:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# opkg update
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_base.
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_luci.
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/management/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_management.
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/packages/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_packages.
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/routing/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_routing.
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/telephony/Packages.gz.
Updated list of available packages in /var/opkg-lists/chaos_calmer_telephony.
root@OpenWrt:/# opkg install luci
Installing luci (svn-r10521-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/luci_svn-r10521-1_ar71xx.ipk.
Installing uhttpd (2014-08-25-dabd7dea6445aaa0e5b8d9add1872fa7393b3a85) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/uhttpd_2014-08-25-dabd7dea6445aaa0e5b8d9add1872fa7393b3a85_ar71xx.ipk.
Installing uhttpd-mod-ubus (2014-08-25-dabd7dea6445aaa0e5b8d9add1872fa7393b3a85) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/uhttpd-mod-ubus_2014-08-25-dabd7dea6445aaa0e5b8d9add1872fa7393b3a85_ar71xx.ipk.
Installing luci-mod-admin-full (svn-r10521-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/luci-mod-admin-full_svn-r10521-1_ar71xx.ipk.
Installing luci-base (svn-r10521-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/luci-base_svn-r10521-1_ar71xx.ipk.
Installing lua (5.1.5-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/lua_5.1.5-1_ar71xx.ipk.
Installing liblua (5.1.5-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/liblua_5.1.5-1_ar71xx.ipk.
Installing libuci-lua (2014-04-11.1-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/libuci-lua_2014-04-11.1-1_ar71xx.ipk.
Installing libubus-lua (2014-07-03-f688c7ad0b2435a89bfd13f5496cabf596b54c8f) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/base/libubus-lua_2014-07-03-f688c7ad0b2435a89bfd13f5496cabf596b54c8f_ar71xx.ipk.
Installing luci-theme-bootstrap (svn-r10521-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/luci-theme-bootstrap_svn-r10521-1_ar71xx.ipk.
Installing luci-app-firewall (svn-r10521-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/luci/luci-app-firewall_svn-r10521-1_ar71xx.ipk.
Configuring liblua.
Configuring libuci-lua.
Configuring libubus-lua.
Configuring luci-theme-bootstrap.
uci: I/O error
Configuring lua.
Configuring luci-base.
Configuring luci-mod-admin-full.
Configuring uhttpd.
Configuring uhttpd-mod-ubus.
Collected errors:
 * wfopen: /usr/lib/lua/luci/controller/firewall.lua: No space left on device.
 * wfopen: /usr/lib/lua/luci/tools/firewall.lua: No space left on device.
 * extract_archive: Cannot make dir /usr/lib/lua/luci/view/firewall/: No space left on device.
 * wfopen: /usr/lib/lua/luci/view/firewall/cbi_addforward.htm: No such file or directory.
 * wfopen: /usr/lib/lua/luci/view/firewall/cbi_addrule.htm: No such file or directory.
 * wfopen: /usr/lib/lua/luci/view/firewall/cbi_addsnat.htm: No such file or directory.
 * extract_archive: Cannot make dir /usr/lib/lua/luci/model/cbi/firewall/: No space left on device.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/zones.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/forwards.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/zone-details.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/rule-details.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/custom.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/forward-details.lua: No such file or directory.
 * wfopen: /usr/lib/lua/luci/model/cbi/firewall/rules.lua: No such file or directory.
 * pkg_write_filelist: Failed to open //usr/lib/opkg/info/luci-app-firewall.list: No space left on device.
 * opkg_install_pkg: Failed to extract data files for luci-app-firewall. Package debris may remain!
 * opkg_install_cmd: Cannot install package luci.
 * opkg_conf_write_status_files: Can&#039;t open status file //usr/lib/opkg/status: No space left on device.
root@OpenWrt:/# df
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                     832       772        60  93% /
/dev/root                 2048      2048         0 100% /rom
tmpfs                    14428       420     14008   3% /tmp
/dev/mtdblock3             832       772        60  93% /overlay
overlayfs:/overlay         832       772        60  93% /
tmpfs                      512         0       512   0% /dev</code></pre></div><p>Before this update luci worked fine</p><p>Is there solution or luci become very big for 4Mb????</p>											<p class="post-edited">(Last edited by <strong>RafaelRS</strong> on 4 Sep 2014, 22:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246037">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RafaelRS</div>
					<div class="post-datetime">
						4 Sep 2014, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>This is DF before install:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# df
Filesystem           1K-blocks      Used Available Use% Mounted on
rootfs                     832       208       624  25% /
/dev/root                 2048      2048         0 100% /rom
tmpfs                    14428        68     14360   0% /tmp
tmpfs                    14428        24     14404   0% /tmp/root
tmpfs                      512         0       512   0% /dev
/dev/mtdblock3             832       208       624  25% /overlay
overlayfs:/overlay         832       208       624  25% /</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246042">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						5 Sep 2014, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>extroot is your friend -&gt; <a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p><p>Edit: D&#039;oh! That device doesn&#039;t seem to have USB, so forget about extroot.</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 5 Sep 2014, 00:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246103">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RafaelRS</div>
					<div class="post-datetime">
						5 Sep 2014, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>OpenWrt-ImageBuilder is my friend now <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262091">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						20 Jan 2015, 01:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RafaelRS wrote:</cite><blockquote><p>OpenWrt-ImageBuilder is my friend now <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>RafaelRS: <br />I have the same problem but don&#039;t know which packages to choose. <br />Could you show a mini tutorial how do you generated the image, and what is the packagelist you chose? I don&#039;t have any particular requirement, but want to have the gui to configure it easily </p><p>Thanks a lot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262123">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 Jan 2015, 05:52					</div>
				</div>
				<div class="post-content content">
					<p>FTR, in the meantime, Barrier Breaker was released. Just use a stock Barrier Breaker image, it comes prepackaged with LuCI.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262168">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						20 Jan 2015, 15:15					</div>
				</div>
				<div class="post-content content">
					<p>Hello, so you mean that if I make the image from the default Barrier Breaker image (<a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/OpenWrt-ImageBuilder-ar71xx_generic-for-linux-x86_64.tar.bz2">http://downloads.openwrt.org/barrier_br … 64.tar.bz2</a>) and use my router profile (TLWR941) it should include the LuCi package?</p><p>Something like:</p><p>$&gt; make image PROFILE=TLWR94</p><p>But, when I see the list of packages&nbsp; with the command</p><p>$&gt; make info</p><p>I see that the default package list is:<br />Default Packages: base-files libc libgcc busybox dropbear mtd uci opkg netifd fstools kmod-gpio-button-hotplug swconfig kmod-ath9k wpad-mini uboot-envtools dnsmasq iptables ip6tables ppp ppp-mod-pppoe kmod-ipt-nathelper firewall odhcpd odhcp6c</p><p>and the profile configuration does not include or exclude any package:</p><p>TLWR941:<br />&nbsp; &nbsp; TP-LINK TL-WR941N/ND<br />&nbsp; &nbsp; Packages: </p><p>So, are you sure it includes the LuCi package?<br />Unless I&#039;m doing something wrong (which is quite possible) I need to explicit include the LuCi packages, but don&#039;t know what are those packages.</p><p>thanks a lot for your time</p><p>PD.:<br />1) when I generate the image with the default configuration for my profile ( make image PROFILE=TLWR94) the result image ( openwrt-ar71xx-generic-tl-wr941nd-v3-squashfs-factory.bin) is 3,9 MB (3.932.160 bytes) and my router has 4MB Flash)<br />2) I don&#039;t have USB so I suppose I can remove some USB packages (again I&#039;m not sure what are those)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262174">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 Jan 2015, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>If all you want is LuCI (seems like it), you can just use the pre-built Barrier Breaker 14.07 image for your router, no need to build your own.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262176">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						20 Jan 2015, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>But I already installed the BarrierBreaker 14.07 for my router and it didn&#039;t come with LuCi. At least that&#039;s what I think, maybe I need to enable something.</p><p>I burn this image: <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr941nd-v3-squashfs-factory.bin">http://downloads.openwrt.org/barrier_br … actory.bin</a></p><p>And I read that LuCi didn&#039;t come any more in the image. Could you show me the link to the image you said I have to install please?</p><p>thanks.</p>											<p class="post-edited">(Last edited by <strong>mscalone</strong> on 20 Jan 2015, 16:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262184">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						20 Jan 2015, 17:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mscalone wrote:</cite><blockquote><p>I burn this image: <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr941nd-v3-squashfs-factory.bin">http://downloads.openwrt.org/barrier_br … actory.bin</a><br />And I read that LuCi didn&#039;t come any more in the image.</p></blockquote></div><p>Luci isn&#039;t included with trunk builds and some RC builds. However, in final builds, like the one in that URL, it <em>does</em> come with the image. If you flashed this image, LuCI should work.</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 20 Jan 2015, 17:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262208">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						20 Jan 2015, 21:24					</div>
				</div>
				<div class="post-content content">
					<p>Maybe try cleaning browser cache/cookies..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262305">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						21 Jan 2015, 13:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>metai wrote:</cite><blockquote><p>Luci isn&#039;t included with trunk builds and some RC builds. However, in final builds, like the one in that URL, it <em>does</em> come with the image. If you flashed this image, LuCI should work.</p></blockquote></div><br /><p>@matai&nbsp; I re-checked the image version I installed and you was right, it was the one from trunk (so it is not supposed to had LuCi as you said). I will install the&nbsp; BarrierBreaker 14.07 release tonight and see what happens. </p><p>I guess I have to do a sysupgrade ( <a href="http://wiki.openwrt.org/doc/howto/generic.sysupgrade">http://wiki.openwrt.org/doc/howto/generic.sysupgrade</a> ) because I already installed OpenWRT. <br />But in fact it is a &quot;sysDOWNgrade&quot; because I installed form trunk and will downgrade to the last release 14.07. <br />So do yo think I can have any problem doing that?</p><p>thanks <br />Marco</p>											<p class="post-edited">(Last edited by <strong>mscalone</strong> on 21 Jan 2015, 14:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262324">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						21 Jan 2015, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>You can sysupgrade with any version <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Maybe use the -n flag to clean config files..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262356">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						21 Jan 2015, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>I downloaded and upgraded the router with the BarrierBreaker 14.07 image. But the LuCi gui is not present. </p><p>The hardware support page <a href="http://wiki.openwrt.org/toh/start">http://wiki.openwrt.org/toh/start</a> says version 10.03.1 for my router (TL-WR941ND) maybe this last version 14.07 didn&#039;t include all the features (like LuCi) </p><p>is this possible?</p><p>I will try installing 10.03.1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262358">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						21 Jan 2015, 23:01					</div>
				</div>
				<div class="post-content content">
					<p>no... not possible. it IS included.</p><p>I would NOT install an old version, may have problems..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262359">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						21 Jan 2015, 23:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mscalone wrote:</cite><blockquote><p>I downloaded and upgraded the router with the BarrierBreaker 14.07 image. But the LuCi gui is not present.</p></blockquote></div><p>How did you check this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262388">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mscalone</div>
					<div class="post-datetime">
						22 Jan 2015, 04:00					</div>
				</div>
				<div class="post-content content">
					<p>I did it! thanks a lot for your help.</p><p>The problem was that I was not installing the already compiled image for my router <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/openwrt-ar71xx-generic-tl-wr941nd-v3-squashfs-sysupgrade.bin">TL-WR941ND</a>. Instead I was installing a generated image with the &quot;make image&quot; command:</p><p>$&gt; make image PROFILE=TLWR941 FILES=files/</p><p>It was my mistake, I thought that the default profile for my router in the development environment <a href="http://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/OpenWrt-ImageBuilder-ar71xx_generic-for-linux-x86_64.tar.bz2">OpenWrt-ImageBuilder-ar71xx_generic-for-linux-x86_64.tar.bz2</a> was going to generate the same &quot;already build image&quot;. but it did not happens.</p><p>In conclusion: I was installing the release version 14.07 but an image I build myself with the default profile. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I think it wold be useful if the default profile (in de development tar.bz2) has the configuration needed to generate exactly the same pre-build image for that profile. For example. I would like to generate the same image I installed, with LuCi in spanish and without USB support (ie. add one package and remove others)</p><p>Thanks again.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>