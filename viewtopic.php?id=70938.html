<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> tty device disappearing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p358530">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">supergeen</div>
					<div class="post-datetime">
						17 May 2017, 21:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><p>I am having an issue where a tty device plugging into my router through USB randomly disappears. OpenWrt stops seeing the device, it does not show up from &quot;lsusb&quot; or checking &quot;/dev/tty*&quot; devices. Furthermore, using the &quot;reboot&quot; command does not cause the USB device to appear, I have to manually do a power cycle. I am not sure how to reproduce this bug, but any ideas as to what could be causing this issue? The fact that I have to do a power cycle instead of simply issuing a reboot command makes me think it&#039;s an hardware issue, but I am new to this stuff so I really have no clue what&#039;s going on. </p><p>Any guidance would be appreciated!</p><p>Here are some of the packages I have in regards to usb:</p><div class="codebox"><pre><code>kmod-ledtrig-usbdev - 3.10.49-1
kmod-usb-acm - 3.10.49-1
kmod-usb-core - 3.10.49-1
kmod-usb-ohci - 3.10.49-1
kmod-usb-serial - 3.10.49-1
kmod-usb-serial-ftdi - 3.10.49-1
kmod-usb-serial-option - 3.10.49-1
kmod-usb-serial-wwan - 3.10.49-1
kmod-usb-storage - 3.10.49-1
kmod-usb2 - 3.10.49-1
libusb-1.0 - 1.0.9-1
libusb-compat - 0.1.4-1
usb-modeswitch - 2014-07-18-01ecc3b9764d1dd89cf36ede0a2d98f9adb0cd33
usbutils - 007-1</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p358535">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						17 May 2017, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>A few preliminary diagnostics:</p><p>1) What device is this? <br />2) What router hardware are you using? What version of OpenWRT are you using?<br />3) Does this affect all USB devices in general, or just this specific device?<br />4) If the device &#039;disappears&#039; and you unplug it from the USB port, does &#039;dmesg&#039; show any information about the departure of the device at this point?<br />5) If you do a power cycle with the device detached, and then plug in the device, does &#039;dmesg&#039; show any information about the arrival of the device? After the device has appeared, is there any pattern or a specific time interval leading to the disappearance?</p><p>If the device disappears while plugged in, it may mean a number of things:<br /></p><ul><li><p>A hardware failure on either end. This is generally easy to determine by testing other USB devices</p></li><li><p>A software bug on either end</p></li><li><p>OpenWRT&#039;s USB bus, or the device itself goes to power-save mode after a specific period of inactivity</p></li><li><p>An application or a daemon on OpenWRT tries to use the USB device somehow, and the device doesn&#039;t support it</p></li></ul>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>