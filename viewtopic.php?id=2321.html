<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDS</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p10868">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mottie</div>
					<div class="post-datetime">
						16 Aug 2005, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m stumped.. I&#039;ve spent all night trying to get WDS to work on OpenWRT and have been unable to get it working.</p><p>My first thought is that its my boardflags which defaulted to 0x0188. All the documentation says 0x188 is this the same thing? I have kept my config VERY basic (factory defaults + wds + network config). I have not even touched WPA etc yet..</p><p>The config for each of my WRT54G V2 are available at </p><p><a href="http://www.mottie.com/tmp/config1.txt">www.mottie.com/tmp/config1.txt</a> <br /><a href="http://www.mottie.com/tmp/config2.txt">www.mottie.com/tmp/config2.txt</a> </p><p>I have tried this with both WhiteRussian RC2 and the experimental firmware</p><p>I do have a WDS device:</p><p>wds0.4915 Link encap:Ethernet&nbsp; HWaddr 00:12:17:29:C5:9E<br />UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />collisions:0 txqueuelen:1000<br />RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10871">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zanolla</div>
					<div class="post-datetime">
						16 Aug 2005, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>It doesn&#039;t seem your config is that basic.<br />Please do a &quot;nvram show | sort | grep wl&quot; and post it back as there is too much info on your config files...<br />Also, It would be nice if you reset your nvram. It will save you a lot of trouble...<br />I&#039;ve tried to do a WDS(aes) w RC2 it and it didnt work. But it sure works with experimental 25052005 and Sbinger&#039;s nas hotplug and S45wpa...<br />regards,<br />Zanolla.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10875">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mottie</div>
					<div class="post-datetime">
						16 Aug 2005, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>here is the info you requested..&nbsp; I just read about the nvram reset this morning. Sounds like it should help. I&#039;m guessing that because the settings aren&#039;t loaded until a reboot as long as I configure my interfaces, ip address, etc i shouldn&#039;t have any worries about bricking the unit?</p><p>you&#039;ll notice that wl_radio = 0 because I&#039;m not home right now, and the idea of having my wireless on, and open doesn&#039;t appeal to me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>web_wl_filter=0<br />wl0_active_mac=<br />wl0_afterburner=off<br />wl0_antdiv=-1<br />wl0_ap_ip=<br />wl0_ap_isolate=0<br />wl0_ap_ssid=<br />wl0_auth=0<br />wl0_auth_mode=open<br />wl0_bcn=100<br />wl0_channel=1<br />wl0_closed=0<br />wl0_corerev=7<br />wl0_country=Worldwide<br />wl0_country_code=AU<br />wl0_crypto=tkip<br />wl0_dtim=1<br />wl0_frag=2346<br />wl0_frameburst=off<br />wl0_gmode=1<br />wl0_gmode_protection=off<br />wl0_hwaddr=00:12:17:29:C5:A6<br />wl0_ifname=eth1<br />wl0_infra=1<br />wl0_key1=<br />wl0_key2=<br />wl0_key3=<br />wl0_key4=<br />wl0_key=1<br />wl0_lazywds=0<br />wl0_mac_deny=<br />wl0_mac_list=<br />wl0_maclist=<br />wl0_macmode1=disabled<br />wl0_macmode=disabled<br />wl0_mode=ap<br />wl0_mrate=0<br />wl0_net_mode=mixed<br />wl0_passphrase=<br />wl0_phytype=g<br />wl0_phytypes=g<br />wl0_plcphdr=long<br />wl0_radio=0<br />wl0_radioids=BCM2050<br />wl0_radius_ipaddr=<br />wl0_radius_key=<br />wl0_radius_port=1812<br />wl0_rate=0<br />wl0_rateset=default<br />wl0_rts=2347<br />wl0_ssid=COMMIE<br />wl0_unit=0<br />wl0_wds=00:12:17:29:C5:A0<br />wl0_wep=disabled<br />wl0_wep_bit=64<br />wl0_wep_buf=<br />wl0_wep_gen=<br />wl0_wep_last=<br />wl0_wpa_gtk_rekey=3600<br />wl0_wpa_psk=<br />wl0gpio2=0<br />wl0gpio3=0<br />wl0id=0x4320<br />wl_active_add_mac=0<br />wl_active_mac=<br />wl_afterburner=off<br />wl_antdiv=-1<br />wl_ap_ip=<br />wl_ap_isolate=0<br />wl_ap_ssid=<br />wl_auth=0<br />wl_auth_mode=open<br />wl_bcn=100<br />wl_channel=6<br />wl_closed=0<br />wl_corerev=<br />wl_country=Worldwide<br />wl_country_code=AU<br />wl_crypto=tkip<br />wl_dtim=1<br />wl_frag=2346<br />wl_frameburst=off<br />wl_gmode=1<br />wl_gmode_protection=off<br />wl_hwaddr=<br />wl_ifname=<br />wl_infra=1<br />wl_key1=<br />wl_key2=<br />wl_key3=<br />wl_key4=<br />wl_key=1<br />wl_lazywds=1<br />wl_mac_deny=<br />wl_mac_list=<br />wl_maclist=<br />wl_macmode1=disabled<br />wl_macmode=disabled<br />wl_mode=ap<br />wl_mrate=0<br />wl_net_mode=mixed<br />wl_passphrase=<br />wl_phytype=g<br />wl_phytypes=<br />wl_plcphdr=long<br />wl_radio=1<br />wl_radioids=<br />wl_radius_ipaddr=<br />wl_radius_key=<br />wl_radius_port=1812<br />wl_rate=0<br />wl_rateset=default<br />wl_rts=2347<br />wl_ssid=linksys<br />wl_unit=0<br />wl_wds=<br />wl_wep=disabled<br />wl_wep_bit=64<br />wl_wep_buf=<br />wl_wep_gen=<br />wl_wep_last=<br />wl_wpa_gtk_rekey=3600<br />wl_wpa_psk=</p>											<p class="post-edited">(Last edited by <strong>mottie</strong> on 16 Aug 2005, 21:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10879">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zanolla</div>
					<div class="post-datetime">
						16 Aug 2005, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>these must be the same for both routers</p><p>wl0_afterburner=off<br />wl0_auth_mode=psk<br />wl0_channel=mustbethesameforboth<br />wl0_closed=0<br />wl0_crypto=aes<br />wl0_frameburst=off<br />wl0_ifname=eth1<br />wl0_infra=1<br />wl0_lazywds=0<br />wl0_mode=ap<br />wl0_ssid=mustbethesameforboth<br />wl0_wds_auth_mode=psk<br />wl0_wds_crypto=aes<br />wl0_wds_wpa_psk=xxxxxxxxxxxxxxxxxx<br />wl0_wep=disabled<br />wl0_wpa_gtk_rekey=3600<br />wl0_wpa_psk=xxxxxxxxxxxxxxxxxxx</p><p>these must reflect eachother eth1 address</p><p>wl0_hwaddr=xx:xx:xx:xx:xx self<br />wl0_wds=xx:xx:xx:xx:xx other</p><p>and remember, these are the settings for wds on experimental build using&nbsp; <a href="http://www.bingner.com/openwrt/">Sbingner&#039;s</a> files. It will NOT work on RC2 (at least for me). Follow exactly <a href="http://www.jean.nu/view.php/page/openwrt">these</a> instructions and you&#039;ll be fine...</p>											<p class="post-edited">(Last edited by <strong>zanolla</strong> on 16 Aug 2005, 22:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10880">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mottie</div>
					<div class="post-datetime">
						16 Aug 2005, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>those are the instructions i followed in the first place, and it&#039;s not working <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I have used both the experimental and RC2. Still no word on my boardflags.. does that mean they are correct?&nbsp; I will try nvram reset tonight. </p><p>What do I need to configure to not brick my router on reboot? Do i need to go as far as configuring the VLANs or do I only need IP address?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10881">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zanolla</div>
					<div class="post-datetime">
						16 Aug 2005, 22:37					</div>
				</div>
				<div class="post-content content">
					<p>follow these instructions to reset the router, dont be afraid, you wont brick it...</p><p>root@OpenWrt:~#mtd erase nvram | reboot<br />root@OpenWrt:~#nvram set boot_wait=on | nvram commit | reboot<br />root@OpenWrt:~#mtd erase OpenWrt<br />*unplug router*<br />root@OpenWrt:~#firstboot | reboot</p><p>take a look at your nvram settings... looks nice doesnt it? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>now, set your boardflags according to sbingner&#039;s instructions...</p>											<p class="post-edited">(Last edited by <strong>zanolla</strong> on 16 Aug 2005, 22:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10882">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mrmoj</div>
					<div class="post-datetime">
						16 Aug 2005, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>Maybe I&#039;m not realizing something, but shouldn&#039;t those pipes be ampersands, zanolla?<br />I thought that &quot;mtd erase nvram | reboot&quot; , when used with double pipes, (||), means literally &quot;mtd erase nvram OR reboot if that fails&quot; (which will never happen in the case of mtd, I think)</p><p>I think you might have been trying to tell mottie &quot;mtd erase nvram AND THEN reboot if that was successful&quot;&nbsp; </p><p>If you agree, zanolla, try these, mottie:</p><div class="codebox"><pre><code>root@OpenWrt:~#mtd erase nvram &amp;&amp; reboot
root@OpenWrt:~#nvram set boot_wait=on &amp;&amp; nvram commit &amp;&amp; reboot
root@OpenWrt:~#mtd erase OpenWrt
*unplug router*
root@OpenWrt:~#firstboot &amp;&amp; reboot</code></pre></div><p>Of course my mind could be in the clouds and I could be wrong.&nbsp; Let me know if that&#039;s the case.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10883">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Vincent Bernat</div>
					<div class="post-datetime">
						16 Aug 2005, 23:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zanolla wrote:</cite><blockquote><p>now, set your boardflags according to sbingner&#039;s instructions...</p></blockquote></div><p>What do you mean ? Do your instructions apply for box using PMON (and not CFE ?) ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10884">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">zanolla</div>
					<div class="post-datetime">
						16 Aug 2005, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Yes, thats it Mrmoj... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>example:</p><p>nvram set blabla | nvram commit | reboot</p><p>equals</p><p>nvram set blabla [enter]<br />nvram commit [enter]<br />reboot [enter]</p><p>regards,<br />Zanolla</p>											<p class="post-edited">(Last edited by <strong>zanolla</strong> on 16 Aug 2005, 23:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10885">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zanolla</div>
					<div class="post-datetime">
						16 Aug 2005, 23:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Vincent Bernat wrote:</cite><blockquote><div class="quotebox"><cite>zanolla wrote:</cite><blockquote><p>now, set your boardflags according to sbingner&#039;s instructions...</p></blockquote></div><p>What do you mean ? Do your instructions apply for box using PMON (and not CFE ?) ?</p></blockquote></div><p>actually, I dont have a clue of what this boardflags thing does <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> (its got something to do w disabling afterburner), but ppl say it is a must for the wds link to work...</p><p>regards,<br />Zanolla</p>											<p class="post-edited">(Last edited by <strong>zanolla</strong> on 16 Aug 2005, 23:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10903">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mottie</div>
					<div class="post-datetime">
						17 Aug 2005, 08:25					</div>
				</div>
				<div class="post-content content">
					<p>it&#039;s working.. after erasing nvram it was a breeze. </p><p>The documentation states that you should NOT nvram set boot_wait=on before rebooting..</p><br /><br /><div class="quotebox"><blockquote><p>From <a href="http://openwrt.org/OpenWrtDocs/Troubleshooting#head-8587d9bd6e28a789c3552d1e4589b138476c1ec4">http://openwrt.org/OpenWrtDocs/Troubles … 38476c1ec4</a></p><p>mtd erase nvram<br />reboot</p><p>This will clear out the NVRAM partition and reboot the router, the bootloader will create a new NVRAM partition with default settings after the reboot. Remember to set boot_wait back on after you reboot your router -- trying to do it before rebooting will just write your old settings (cached in memory) back to the flash.</p></blockquote></div><p>I&#039;ve never seen | used as &lt;enter&gt; I&#039;ve only seen &amp; and &amp;&amp;</p><p>Either way thanks for your help.. apparently 0x0188 works for my router as I had one that was set at 0x0388 and one at 0x0188 and they both are working with 0x0188</p><p>Lately, are there any settings to increase distance? Anything outside 15 feet or so and WDS will not connect.. quite strange (only 1 wall seperating). If I run a ping I will receive no replies, but the ARP table of the router shows my mac.. </p><p>What utilities are available that will show signal strength and connection speed?</p>											<p class="post-edited">(Last edited by <strong>mottie</strong> on 17 Aug 2005, 19:11)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>