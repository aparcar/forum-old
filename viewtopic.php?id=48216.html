<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> MPD + Backfire 10.03.1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p221736">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">oksota</div>
					<div class="post-datetime">
						5 Jan 2014, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>Hello all.</p><p>I installed&nbsp; Backfire 10.03.1 (brcm-2.4) to my ASUS WL500W.&nbsp; I installed couple of programs (samba, subversion, ftp ... ) everything works fine. I was very pleased because I am new in linux and openwert. </p><p>I have started to thing if it is possible to play music using usb sound card. I read some articles about that. I installed kmod-usb-audio, kmod-sound-core and madpaly. I played mp3 files and internet radio ( using wget ) and it worked perfectly. It was something amazing for me.</p><p>After all successes i found out that there is MPD. I like that idea so I decided to try it and here my troubles started. I configured alsa audio output in /etc/mpd.conf but when a want to play some music i always have message error: &quot;ERROR: problems opening audio device&quot;. I have already tried couple thing and i have read a lot of discussions but nothing helped so far. I am not able to solved it.</p><p>Here are some information which could help to find out where is the problem.</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /proc/version
Linux version 2.4.37.9 (jow@nd-build-02.linux-appliance.net) (gcc version 3.4.6 (OpenWrt-2.0)) #12 Wed Dec 21 03:33:39 CET 2011</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# opkg list-installed
alsa-lib - 1.0.24.1-1
alsa-utils - 1.0.24.2-1
alsa-utils-tests - 1.0.24.2-1
base-files - 43.32-r29592
block-extroot - 0.0.1-2.1
block-hotplug - 0.1.0-2.2
block-mount - 0.1.0-2.2
busybox - 1.15.3-3.4
collectd - 4.10.2-2.1
collectd-mod-contextswitch - 4.10.2-2.1
collectd-mod-cpu - 4.10.2-2.1
collectd-mod-interface - 4.10.2-2.1
collectd-mod-iwinfo - 4.10.2-2.1
collectd-mod-load - 4.10.2-2.1
collectd-mod-memory - 4.10.2-2.1
collectd-mod-ping - 4.10.2-2.1
collectd-mod-rrdtool - 4.10.2-2.1
collectd-mod-users - 4.10.2-2.1
collectd-mod-wireless - 4.10.2-2.1
curlftpfs - 0.9.2-2
directfb - 1.4.2-1
dnsmasq - 2.55-6.1
dropbear - 0.53.1-5
e2fsprogs - 1.41.11-1
elinks - 0.11.7-1
etherwake - 1.09-2
fdisk - 2.13.0.1-4
firewall - 2-34.8
freeswitch - 1.0.7-1
glib2 - 2.26.1-2
hotplug2 - 1.0-beta-3
htop - 0.9-1
httping - 1.4.4-1
iptables - 1.4.6-3.1
iptables-mod-conntrack - 1.4.6-3.1
iptables-mod-conntrack-extra - 1.4.6-3.1
iptables-mod-extra - 1.4.6-3.1
iptables-mod-filter - 1.4.6-3.1
iptables-mod-imq - 1.4.6-3.1
iptables-mod-ipopt - 1.4.6-3.1
iptables-mod-iprange - 1.4.6-3.1
iptables-mod-ipsec - 1.4.6-3.1
iptables-mod-nat - 1.4.6-3.1
iptables-mod-nat-extra - 1.4.6-3.1
iptables-utils - 1.4.6-3.1
iptraf - 3.0.1-2
jamvm - 1.5.4-2
kernel - 2.4.37.9-1
kmod-alsa - 2.4.37.9+1.0.14rc1-1
kmod-brcm-wl - 2.4.37.9+4.150.10.5.3-9
kmod-brcm-wl-mimo - 2.4.37.9+4.150.10.5.3-9
kmod-diag - 2.4.37.9-7.1
kmod-fs-ext2 - 2.4.37.9-1
kmod-fs-ext3 - 2.4.37.9-1
kmod-fs-ntfs - 2.4.37.9-1
kmod-fs-vfat - 2.4.37.9-1
kmod-fuse - 2.4.37.9+2.5.3-1
kmod-input-core - 2.4.37.9-1
kmod-ipt-conntrack - 2.4.37.9-1
kmod-ipt-conntrack-extra - 2.4.37.9-1
kmod-ipt-core - 2.4.37.9-1
kmod-ipt-extra - 2.4.37.9-1
kmod-ipt-filter - 2.4.37.9-1
kmod-ipt-imq - 2.4.37.9-1
kmod-ipt-ipopt - 2.4.37.9-1
kmod-ipt-iprange - 2.4.37.9-1
kmod-ipt-ipsec - 2.4.37.9-1
kmod-ipt-nat - 2.4.37.9-1
kmod-ipt-nat-extra - 2.4.37.9-1
kmod-ipt-nathelper - 2.4.37.9-1
kmod-ppp - 2.4.37.9-1
kmod-pppoe - 2.4.37.9-1
kmod-sched - 2.4.37.9-1
kmod-scsi-core - 2.4.37.9-1
kmod-sound-core - 2.4.37.9-1
kmod-switch - 2.4.37.9-4
kmod-usb-audio - 2.4.37.9-1
kmod-usb-core - 2.4.37.9-1
kmod-usb-ohci - 2.4.37.9-1
kmod-usb-storage - 2.4.37.9-1
kmod-usb-uhci - 2.4.37.9-1
kmod-usb2 - 2.4.37.9-1
kmod-video-core - 2.4.37.9-1
kmod-wlcompat - 2.4.37.9+4.150.10.5.3-9
libapr - 1.4.5-2
libaprutil - 1.3.12-2
libaudiofile - 0.2.7-1
libblkid - 1.41.11-1
libc - 0.9.30.1-43.32
libcurl - 7.21.7-1
libevent2 - 2.0.12-1
libexpat - 2.0.1-1
libext2fs - 1.41.11-1
libfaad2 - 2.7-1
libffi - 3.0.9-1
libflac - 1.2.1-1
libfreetype - 2.3.12-1
libfuse - 2.8.3-1
libgcc - 3.4.6-43.32
libiconv - 5
libiconv-full - 1.11.1-1
libid3tag - 0.15.1b-3
libip4tc - 1.4.6-3.1
libiwinfo - 18
libiwinfo-lua - 18
libjpeg - 6b-1
libltdl - 2.4-1
liblua - 5.1.4-7
libmad - 0.15.1b-3
libmms - 0.6-1
libmpdclient - 2.4-1
libncurses - 5.7-2
libneon - 0.29.6-2
libnet1 - 1.1.2.1-2
libogg - 1.1.4-2
libopenssl - 0.9.8r-1
liboping - 1.6.1-1
libpcap - 1.0.0-2
libpng - 1.2.46-1
libpthread - 0.9.30.1-43.32
libreadline - 5.2-2
librrd1 - 1.0.50-1
librt - 0.9.30.1-43.32
libshout - 2.2.2-2
libsndfile - 1.0.21-1
libspeex - 1.2rc1-1
libsqlite3 - 3070701-1
libstdcpp - 3.4.6-43.32
libtheora - 1.0-3
libuci - 12012009.7-4
libuci-lua - 12012009.7-4
libusb-1.0 - 1.0.8-1
libuuid - 1.41.11-1
libvorbis - 1.2.3-1
libvorbisidec - 1.0.2+svn14261-1
libxtables - 1.4.6-3.1
lua - 5.1.4-7
luci - 0.10.0-1
luci-app-diag-core - 0.10.0-1
luci-app-diag-devinfo - 0.10.0-1
luci-app-firewall - 0.10.0-1
luci-app-qos - 0.10.0-1
luci-app-samba - 0.10.0-1
luci-app-statistics - 0.10.0-1
luci-app-wol - 0.10.0-1
luci-i18n-english - 0.10.0-1
luci-lib-core - 0.10.0-1
luci-lib-ipkg - 0.10.0-1
luci-lib-lmo - 0.10.0-1
luci-lib-lucid - 0.10.0-1
luci-lib-lucid-http - 0.10.0-1
luci-lib-nixio - 0.10.0-1
luci-lib-px5g - 0.10.0-1
luci-lib-sys - 0.10.0-1
luci-lib-web - 0.10.0-1
luci-mod-admin-core - 0.10.0-1
luci-mod-admin-full - 0.10.0-1
luci-proto-core - 0.10.0-1
luci-proto-ppp - 0.10.0-1
luci-sgi-cgi - 0.10.0-1
luci-sgi-uhttpd - 0.10.0-1
luci-theme-base - 0.10.0-1
luci-theme-openwrt - 0.10.0-1
mac-to-devinfo - 1.0.0-2
madplay - 0.15.2b-3
mc - 4.7.5.2-1
mpc - 0.20-1
mpd - 0.16.1-1
mtd - 13
nano - 2.2.6-1
nas - 4.150.10.5.3-9
netdiscover - 0.3-beta6-3
netdiscover-to-devinfo - 1.0.0-2
ntfs-3g - 2011.4.12-1-fuseint
nvram - 7
openssh-sftp-server - 5.8p2-2
openssl-util - 0.9.8r-1
opkg - 576-2
ppp - 2.4.4-16.1
ppp-mod-pppoe - 2.4.4-16.1
qos-scripts - 1.2.1-3.2
rrdtool1 - 1.0.50-1
samba3 - 3.0.24-8
smap - 0.6.0-2
smap-to-devinfo - 1.0.0-2
subversion-libs - 1.6.17-2
subversion-server - 1.6.17-2
tc - 2.6.29-1-2
transmission-cli - 2.32-2
transmission-daemon - 2.32-2
transmission-web - 2.32-2
uci - 12012009.7-4
uhttpd - 28
uhttpd-mod-lua - 28
usbutils - 003-1
vnstat - 1.11-2
vsftpd - 2.3.4-2
wireless-tools - 29-4
wlc - 4.150.10.5.3-9
zlib - 1.2.3-5</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# dmesg
CPU revision is: 00029006
Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Linux version 2.4.37.9 (jow@nd-build-02.linux-appliance.net) (gcc version 3.4.6 (OpenWrt-2.0)) #12 Wed Dec 21 03:33:39 CET 2011
Setting the PFC to its default value
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
On node 0 totalpages: 8192
zone(0): 8192 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
CPU: BCM4704 rev 9 at 264 MHz
Using 132.000 MHz high precision timer.
Calibrating delay loop... 263.78 BogoMIPS
Memory: 30440k/32768k available (1457k kernel code, 2328k reserved, 100k data, 84k init, 0k highmem)
Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)
Inode cache hash table entries: 2048 (order: 2, 16384 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 8192 (order: 3, 32768 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: Initializing host
PCI: Fixing up bus 0
PCI: Fixing up bridge
PCI: Setting latency timer of device 01:00.0 to 64
PCI: Fixing up bus 1
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
Registering mini_fo version $Id$
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
b44.c:v0.93 (Mar, 2004)
PCI: Setting latency timer of device 00:01.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 90:e6:ba:43:66:80
PCI: Setting latency timer of device 00:02.0 to 64
eth1: Broadcom 47xx 10/100BaseT Ethernet 90:e6:ba:43:66:80
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.3 at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x800000 at 0x1c000000
bootloader size: 262144
Physically mapped flash: Filesystem type: squashfs, size=0x1a99ba
Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007f0000 : &quot;linux&quot;
0x000bd400-0x00270000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x007f0000-0x00800000 : &quot;nvram&quot;
0x00270000-0x007f0000 : &quot;rootfs_data&quot;
sflash: found no supported devices
Initializing Cryptographic API
IEEE 802.2 LLC for Linux 2.1 (c) 1996 Tim Alpaerts
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 2048 bind 4096)
Linux IP multicast router 0.06 plus PIM-SM
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 84k freed
diag: Detected &#039;ASUS WL-500W&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found a 5325! It&#039;s a 5350.
SCSI subsystem driver Revision: 1.00
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
Journalled Block Device driver loaded
PCI: Enabling device 01:03.2 (0000 -&gt; 0002)
ehci_hcd 01:03.2: PCI device 1106:3104
ehci_hcd 01:03.2: irq 2, pci mem c0107000
usb.c: new USB bus registered, assigned bus number 1
EHCI: Enabling VIA 6212 workarounds
ehci_hcd 01:03.2: USB 2.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4
hub.c: USB hub found
hub.c: 2 ports detected
SB USB 1.1 init
PCI: Setting latency timer of device 00:03.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6
usb-ohci.c: usb-00:03.0, PCI device 14e4:4715
usb.c: new USB bus registered, assigned bus number 2
hub.c: USB hub found
hub.c: 2 ports detected
uhci.c: USB Universal Host Controller Interface driver v1.1
PCI: Enabling device 01:03.0 (0000 -&gt; 0001)
uhci.c: USB UHCI at I/O 0x100, IRQ 2
usb.c: new USB bus registered, assigned bus number 3
hub.c: USB hub found
hub.c: 2 ports detected
Initializing USB Mass Storage driver...
usb.c: registered new driver usb-storage
USB Mass Storage support registered.
hub.c: new USB device 01:03.2-1, assigned address 2
scsi0 : SCSI emulation for USB Mass Storage devices
  Vendor:           Model: Patriot Memory    Rev: PMAP
  Type:   Direct-Access                      ANSI SCSI revision: 02
Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0
SCSI device sda: 2015232 512-byte hdwr sectors (1032 MB)
sda: Write Protect is off
Partition check:
 /dev/scsi/host0/bus0/target0/lun0: p1 p2
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 2
hub.c: new USB device 01:03.0-2, assigned address 2
usb.c: USB device 2 (vend/prod 0x40d/0x3400) is not claimed by any active driver.
kjournald starting.  Commit interval 5 seconds
EXT3-fs warning: maximal mount count reached, running e2fsck is recommended
EXT3 FS 2.4-0.9.19, 19 August 2002 on sd(8,1), internal journal
EXT3-fs: recovery complete.
EXT3-fs: mounted filesystem with ordered data mode.
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay
jffs2.bbc: SIZE compression mode activated.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: port 1(eth0) entering forwarding state
br-lan: topology change detected, propagating
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
PCI: Setting latency timer of device 01:02.0 to 64
PCI: Enabling device 01:02.0 (0004 -&gt; 0006)
PCI/DMA
wl0: wlc_attach: failed with err 13
wl%d: 4.150.10.5 driver failed with code 13
unregister_netdevice: device wl%d/81c11e20 never was registered
Memory leak of bytes -2323
PCI/DMA
wl0: wlc_attach: chiprev 1 coreunit 0 corerev 11 cccap 0x864000d maccap 0x0 band 2.4G, phy_type 4 phy_rev 1 ana_rev 5
wl0: Broadcom BCM4329 802.11 Wireless Controller 4.150.10.5
NTFS driver v1.1.22 [Flags: R/O MODULE]
CSLIP: code copyright 1989 Regents of the University of California
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2002 Netfilter core team
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 352 bytes per conntrack
ipt_recent v0.3.1: Stephen Frost &lt;sfrost@snowman.net&gt;.  http://snowman.net/projects/ipt_recent/
imq driver loaded.
usb.c: registered new driver audio
usbaudio: device 2 audiocontrol interface 0 has 1 input and 1 output AudioStreaming interfaces
usbaudio: device 2 interface 2 altsetting 1 channels 2 framesize 2 configured
usbaudio: valid input sample rate 48000
usbaudio: valid input sample rate 44100
usbaudio: device 2 interface 2 altsetting 1: format 0x01000010 sratelo 44100 sratehi 48000 attributes 0x01
usbaudio: device 2 interface 2 altsetting 2 channels 2 framesize 3 configured
usbaudio: valid input sample rate 48000
usbaudio: valid input sample rate 44100
usbaudio: device 2 interface 2 altsetting 2: format 0x01000800 sratelo 44100 sratehi 48000 attributes 0x01
usbaudio: device 2 interface 2 altsetting 3 channels 2 framesize 2 configured
usbaudio: valid input sample rate 96000
usbaudio: device 2 interface 2 altsetting 3: format 0x01000010 sratelo 96000 sratehi 96000 attributes 0x00
usbaudio: device 2 interface 2 altsetting 4 channels 2 framesize 3 configured
usbaudio: valid input sample rate 96000
usbaudio: device 2 interface 2 altsetting 4: format 0x01000800 sratelo 96000 sratehi 96000 attributes 0x00
usbaudio: device 2 interface 1 altsetting 0 does not have an endpoint
usbaudio: device 2 interface 1 altsetting 1 channels 2 framesize 2 configured
usbaudio: valid output sample rate 48000
usbaudio: valid output sample rate 44100
usbaudio: device 2 interface 1 altsetting 1: format 0x01000010 sratelo 44100 sratehi 48000 attributes 0x01
usbaudio: device 2 interface 1 altsetting 2 channels 2 framesize 3 configured
usbaudio: valid output sample rate 48000
usbaudio: valid output sample rate 44100
usbaudio: device 2 interface 1 altsetting 2: format 0x01000800 sratelo 44100 sratehi 48000 attributes 0x01
usbaudio: device 2 interface 1 altsetting 3 channels 2 framesize 2 configured
usbaudio: valid output sample rate 96000
usbaudio: device 2 interface 1 altsetting 3: format 0x01000010 sratelo 96000 sratehi 96000 attributes 0x00
usbaudio: device 2 interface 1 altsetting 4 channels 2 framesize 3 configured
usbaudio: valid output sample rate 96000
usbaudio: device 2 interface 1 altsetting 4: format 0x01000800 sratelo 96000 sratehi 96000 attributes 0x00
usbaudio: device 2 interface 1 altsetting 5 channels 2 framesize 2 configured
usbaudio: valid output sample rate 192000
usbaudio: device 2 interface 1 altsetting 5: format 0x01000010 sratelo 192000 sratehi 192000 attributes 0x00
usbaudio: registered dsp 14,3
usbaudio: constructing mixer for Terminal 3 type 0x0301
usbaudio: registered mixer 14,0
usbaudio: constructing mixer for Terminal 4 type 0x0101
usbaudio: registered mixer 14,16
usb_audio_parsecontrol: usb_audio_state at 81665240
audio.c: v1.0.0:USB Audio Class driver
Linux video capture interface: v1.00
usb.c: registered new driver snd-usb-audio
fuse init (API version 7.5)
fuse distribution version: 2.5.3
fuse init: DCACHE_BUG enabled
Adding Swap: 120476k swap-space (priority -1)
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# cat /etc/mpd.conf
# An example configuration file for MPD
# See the mpd.conf man page for a more detailed description of each parameter.

music_directory         &quot;~/music&quot;
playlist_directory              &quot;~/.mpd/playlists&quot;
db_file                 &quot;~/.mpd/database&quot;
log_file                        &quot;~/.mpd/log&quot;
pid_file                        &quot;~/.mpd/pid&quot;
state_file                      &quot;~/.mpd/state&quot;
sticker_file                    &quot;~/.mpd/sticker.sql&quot;
user                            &quot;root&quot;
bind_to_address         &quot;any&quot;
#
# And for Unix Socket
#bind_to_address                &quot;~/.mpd/socket&quot;
port                            &quot;6600&quot;
#

input {
        plugin &quot;curl&quot;
#       proxy &quot;proxy.isp.com:8080&quot;
#       proxy_user &quot;user&quot;
#       proxy_password &quot;password&quot;
}

audio_output {
        type            &quot;alsa&quot;
        name            &quot;My ALSA Device&quot;
        device          &quot;hw:0,0&quot;        # optional
##      format          &quot;44100:16:2&quot;    # optional
##      mixer_type      &quot;hardware&quot;      # optional
##      mixer_device    &quot;default&quot;       # optional
##      mixer_control   &quot;PCM&quot;           # optional
##      mixer_index     &quot;0&quot;             # optional
}
#
# An example of an OSS output:
#
#audio_output {
#       type            &quot;oss&quot;
#       name            &quot;My OSS Device&quot;
#       device          &quot;/dev/sound/dsp&quot;        # optional
##      format          &quot;44100:16:2&quot;    # optional
##      mixer_type      &quot;hardware&quot;      # optional
##      mixer_device    &quot;default&quot;       # optional
##      mixer_control   &quot;PCM&quot;           # optional
#}
#

#
# An example of a pulseaudio output (streaming to a remote pulseaudio server)
#
#audio_output {
#       type            &quot;pulse&quot;
#       name            &quot;My Pulse Output&quot;
##      server          &quot;remote_server&quot;         # optional
##      sink            &quot;remote_server_sink&quot;    # optional
#}
#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# mpc play
Klingande---Jubel-(Original-Mix)-[HQ].mp3
[paused]  #1/1   0:00/4:44 (0%)
volume: n/a   repeat: off   random: off   single: off   consume: off
ERROR: problems opening audio device</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# cat log
Jan 05 16:53 : mixer: Failed to read mixer for &#039;My ALSA Device&#039;: failed to attach to default: No such file or directory
ALSA lib pcm_hw.c:1401:(_snd_pcm_hw_open) Invalid value for card
Jan 05 16:53 : output: Failed to open &quot;My ALSA Device&quot; [alsa]: Failed to open ALSA device &quot;hw:0,0&quot;: No such file or directory</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# alsamixer
cannot open mixer: No such file or directory</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# cat /etc/modules.d/70-alsa
snd-page-alloc
snd
snd-timer
snd-pcm
snd-rawmidi
snd-usb-lib
snd-hwdep
snd-usb-audio
snd-mixer-oss
snd-pcm-oss
snd-seq-oss
snd-usb-audio
snd-sound-core</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# ls -l /dev/sound/
crw-------    1 root     root      14,   3 Jan  1  1970 dsp
crw-------    1 root     root      14,   0 Jan  1  1970 mixer
crw-------    1 root     root      14,  16 Jan  1  1970 mixer1</code></pre></div><p>i have tried to change permissions but it did not help</p><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# chmod 777 /dev/sound/
root@OpenWrt:~/.mpd# chmod 777 /dev/sound
root@OpenWrt:~/.mpd# chmod 777 /dev/sound/*
root@OpenWrt:~/.mpd# chmod 777 /dev/
root@OpenWrt:~/.mpd# ls -l /dev/sound/
crwxrwxrwx    1 root     root      14,   3 Jan  1  1970 dsp
crwxrwxrwx    1 root     root      14,   0 Jan  1  1970 mixer
crwxrwxrwx    1 root     root      14,  16 Jan  1  1970 mixer1</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# lsusb
Bus 003 Device 001: ID 0000:0000
Bus 003 Device 002: ID 040d:3400 VIA Technologies, Inc.
Bus 002 Device 001: ID 0000:0000
Bus 001 Device 001: ID 0000:0000
Bus 001 Device 002: ID 13fe:1e00 Kingston Technology Company Inc.</code></pre></div><p>i changed device and mixer in /etc/mpd.conf:<br /> device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;/dev/sound/dsp&quot;<br /> mixer_device&nbsp; &nbsp; &quot;/dev/sound/mixer&quot;</p><p>log of mpd:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# cat log
ALSA lib pcm.c:2212:(snd_pcm_open_noupdate) Unknown PCM /dev/sound/dsp
Jan 05 17:12 : output: Failed to open &quot;My ALSA Device&quot; [alsa]: Failed to open ALSA device &quot;/dev/sound/dsp&quot;: No such file or directory
ALSA lib control.c:882:(snd_ctl_open_noupdate) Invalid CTL /dev/sound/mixer
Jan 05 17:12 : mixer: Failed to read mixer for &#039;My ALSA Device&#039;: failed to attach to /dev/sound/mixer: No such file or directory</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# arecord -l
arecord: device_list:240: no soundcards found...</code></pre></div><p>but madplay works.</p><p>My sound card: SWEEX SC010 with VIA VT1620A chipset.</p><p>As I said I am new in linux. Maybe my problem has easy and straightforward solution. If some information is missing please let me know. I am not native speaker so sorry for my english.</p><p>Any help is more than welcomed.&nbsp; <br />Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221766">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						6 Jan 2014, 00:57					</div>
				</div>
				<div class="post-content content">
					<p>Modify your output in your mpd.conf. Use this configuration:<br /></p><div class="codebox"><pre><code>audio_output {
        type            &quot;alsa&quot;
        name            &quot;My ALSA Device&quot;
        device          &quot;plughw:0,0&quot;        # optional
##      format          &quot;44100:16:2&quot;    # optional
##      mixer_type      &quot;hardware&quot;      # optional
##      mixer_device    &quot;default&quot;       # optional
##      mixer_control   &quot;PCM&quot;           # optional
##      mixer_index     &quot;0&quot;             # optional
}</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221767">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">oksota</div>
					<div class="post-datetime">
						6 Jan 2014, 01:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi danitool. I have changed the config file but result is the same.</p><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# cat log
Jan 06 00:09 : mixer: Failed to read mixer for &#039;My ALSA Device&#039;: failed to attach to default: No such file or directory
ALSA lib pcm_hw.c:1401:(_snd_pcm_hw_open) Invalid value for card
Jan 06 00:09 : output: Failed to open &quot;My ALSA Device&quot; [alsa]: Failed to open ALSA device &quot;plughw:0,0&quot;: No such file or directory</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221768">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						6 Jan 2014, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Looks like you don&#039;t have alsa support, but oss instead. No idea if this is supported in Backfire (kernel2.4) and mpd.</p><p>You should use oss, since that&#039;s what your installation currently supports.<br /></p><div class="codebox"><pre><code>audio_output {
        type            &quot;oss&quot;
        name            &quot;My ALSA Device&quot;
        device          &quot;/dev/dsp&quot;        # optional
##      format          &quot;44100:16:2&quot;    # optional
##      mixer_type      &quot;hardware&quot;      # optional
##      mixer_device    &quot;default&quot;       # optional
##      mixer_control   &quot;PCM&quot;           # optional
##      mixer_index     &quot;0&quot;             # optional
}</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221769">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">oksota</div>
					<div class="post-datetime">
						6 Jan 2014, 01:26					</div>
				</div>
				<div class="post-content content">
					<p>I have already used oss. When a run mpd i get error message as well.</p><div class="codebox"><pre><code>root@OpenWrt:~/.mpd# mpd
output: line 212: No such audio output plugin: oss</code></pre></div><p>With alsa mpd start at least.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221770">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						6 Jan 2014, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>This is because mpd is built without oss output support. </p><p>Maybe you need to need to build a custom mpd with oss support, or a kernel with alsa support.</p><p>I have no idea if there are packages to solve this in Backfire with the kernel 2.4.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>