<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PCenginges APU1c with mSATA</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p239263">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">monkey</div>
					<div class="post-datetime">
						4 Jul 2014, 11:28					</div>
				</div>
				<div class="post-content content">
					<p>I can boot my APU-Board with a self compiled image (x86 generic with SMP enabled) from SD card. </p><p>The only thing Im missing is that Im not able to access my internal mSATA device.</p><p>I just want to boot from SD card to be able to dd the image to the internal mSATA SSD. Can anyone tell me what I need to enable in the kernel-/openwrt config to be able to use mSATA?</p><p>Thanks!<br />Monkey</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239264">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mar-co0711</div>
					<div class="post-datetime">
						4 Jul 2014, 11:58					</div>
				</div>
				<div class="post-content content">
					<p>I also enabled SMP but my APU1c-Board stopped at the position:</p><p>[&nbsp; &nbsp; 4.054259] Waiting for root device /dev/sda2...<br />[&nbsp; &nbsp; 4.682087] Switching to clocksource tsc</p><p>then stopped.</p><p>Is there in additional an other special configuration to do?</p><p>Thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239277">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">monkey</div>
					<div class="post-datetime">
						4 Jul 2014, 15:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi mar-co0711,</p><p>I already read your post befor I posted mine. I know this behaviour from my workstation. There, I had to enable&nbsp; CONFIG_DEVTMPFS and&nbsp; CONFIG_DEVTMPFS_MOUNT in the kernel. But I don&#039;t know if this will solve your problem since I don&#039;t have these options set in my (openwrt)kernelconfig and I don&#039;t have this problem. But you can give it a try.</p><p>Monkey</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239282">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						4 Jul 2014, 15:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi, monkey.<br />I also am interested in apu1c with msata.<br />Can&#039;t apu1c detect msata storage?<br />ls /dev/sd* ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239283">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">monkey</div>
					<div class="post-datetime">
						4 Jul 2014, 15:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi yapoo,</p><p>at the moment I get an kernel panic when I boot openwrt with the msata-device plugged in:</p><div class="quotebox"><blockquote><p>[&nbsp; &nbsp; 2.909809] VFS: Cannot open root device &quot;sda2&quot; or unknown-block(8,2)<br />[&nbsp; &nbsp; 2.916330] Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />[&nbsp; &nbsp; 2.924704] 0800&nbsp; &nbsp; &nbsp; &nbsp; 15624352 sda&nbsp; driver: sd<br />[&nbsp; &nbsp; 2.929357]&nbsp; &nbsp;0801&nbsp; &nbsp; &nbsp; &nbsp; 15623968 sda1 00000000-0000-0000-0000-000000000000<br />[&nbsp; &nbsp; 2.936447] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(8,2)<br />[&nbsp; &nbsp; 2.944320] scsi8 : usb-storage 3-1:1.0</p></blockquote></div><p>When I remove the card the system boots up fine.&nbsp; I had it booting with the card plugged in this morning, but I can&#039;t get it back to this state :-(<br />So at the moment Im not able to boot openwrt from SDcard with access to the msata device...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239298">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						4 Jul 2014, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>According to <a href="http://www.pcengines.ch/pdf/apu1.pdf">http://www.pcengines.ch/pdf/apu1.pdf</a><br />You should select booting device.<br />Have you select msata?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239299">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						4 Jul 2014, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>One more question.<br />You select x86_64 ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239376">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">monkey</div>
					<div class="post-datetime">
						5 Jul 2014, 14:59					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for ansering so late but Im not at home this weekend. I will<br />continue my tests on monday.</p><p>I know that I can choose mSTATA as boot-device, but befor I have to<br />put an bootable image on it. </p><p>My plan is to first create an OpenWrt-Image from which I can access the<br />msata device. I then can boot this image from SD-Card, and use it to<br />flash the img-file itself to the msata device by using dd.</p><p>The Image I built on friday was a x86 image because I was using attitude<br />adjustment. I started to compile an x86_64 version using the latest<br />trunk but have not tested it yet. I&#039;ll do this on monday..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239383">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">yapoo</div>
					<div class="post-datetime">
						5 Jul 2014, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>basic information.<br /><a href="https://forum.openwrt.org/viewtopic.php?id=50198">https://forum.openwrt.org/viewtopic.php?id=50198</a></p><p>good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239526">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mar-co0711</div>
					<div class="post-datetime">
						7 Jul 2014, 10:03					</div>
				</div>
				<div class="post-content content">
					<p>@monkey<br />problem is fixed. <br />When I set the settings in TARGET PROFILE to genieric and not to PCengine, the result image works fine.<br />thx all</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p239531">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">monkey</div>
					<div class="post-datetime">
						7 Jul 2014, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>My problem seems to be fixed, too. I realized that booting from my sd-card failed, because he was looking for the root-fs on /dev/sda, which was at this moment the empty mSATA device. Changing grub to boot from /dev/sdb made it possible to boot up my device with acces to mSATA on sda. I flashed the image and now Im able to boot from mSATA.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255240">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mirko_47</div>
					<div class="post-datetime">
						23 Nov 2014, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>Soon I will open a new thread to ask for an hand with the APU1c, but meanwhile can I kindly ask you to pass me the .config file of your build?</p><p>Thank you very much in andvance.</p><p>ps. I&#039;m quite noob with OpenWRT, so if possible can you also tell me where I can inform better abuot compiling openwrt for APU1d?<br />Obviously I don&#039;t expect to find a guide about compilig openwrt for APU1d but didn&#039;t find to many information...</p><p>Thank you very much again</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>