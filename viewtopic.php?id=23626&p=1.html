<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DIR-600 A1 or Frys FR-54RTR</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Feb 2018 and 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=23626&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p103005">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						15 Feb 2010, 23:45					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m new to OpenWRT.</p><p>I spent the last couple days playing with it, and I want to share my findings<br />about the Frys Wireless G Router (FR-54RTR) which is a rebadged D-Link<br />DIR-600 A1.&nbsp; (The FCC ID is KA2DIR600A1.)</p><p>I started by upgrading the firmware to the 1.01 version released by D-Link.<br />(I&#039;m not sure if this step can be skipped.)</p><p><a href="ftp://ftp.dlink.com/Gateway/dir600/Firmware/dir600_firmware_101NA.zip">ftp://ftp.dlink.com/Gateway/dir600/Firm … _101NA.zip</a></p><p>To install the D-Link firmware, I performed the 30-30-30 reset which<br />exposed the &quot;D-LINK Firmware Upgrade System&quot; on <a href="http://192.168.0.1">http://192.168.0.1</a>/</p><p>After uploading the 1.01 firmware via the firmware upgrade pages,<br />I was able to update the firmware to a snapshot of OpenWRT from<br /><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a></p><p>I used the snapshot from &quot;09-Feb-2010 11:37&quot;:<br />openwrt-ar71xx-dir-600-a1-squashfs-universal.bin</p><p>The one problem I couldn&#039;t get past is that the driver for eth1 (ag71xx) kept<br />crashing on me when I tried to upload more than a few KBytes of data to the<br />WAN.&nbsp; I&#039;m hoping this is the same issue being diagnosed on the Mikrotik<br />RB450G.</p><p>This crash would require a reboot to clear.</p><div class="codebox"><pre><code>ar71xx-wdt: enabling watchdog timer
------------[ cut here ]------------
WARNING: at net/sched/sch_generic.c:261 0x801f8674()
NETDEV WATCHDOG: eth1 (ag71xx): transmit queue 0 timed out
Modules linked in: nf_nat_tftp nf_conntrack_tftp nf_nat_irc nf_conntrack_irc nf_nat_ftp nf_conntrack_ftp ipt_MASQUERADE iptable_nat nf_nat xt_NOTRACK iptable_raw xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack pppoe pppox ipt_REJECT xt_TCPMSS ipt_LOG xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tcpudp x_tables ppp_async ppp_generic slhc crc_ccitt leds_gpio button_hotplug gpio_buttons input_polldev input_core
Call Trace:[&lt;80068304&gt;] 0x80068304
[&lt;80068304&gt;] 0x80068304
[&lt;8007cc98&gt;] 0x8007cc98
[&lt;801f8674&gt;] 0x801f8674
[&lt;8007cd18&gt;] 0x8007cd18
[&lt;801e3dbc&gt;] 0x801e3dbc
[&lt;801f8674&gt;] 0x801f8674
[&lt;8009549c&gt;] 0x8009549c
[&lt;8007a3a4&gt;] 0x8007a3a4
[&lt;801f8510&gt;] 0x801f8510
[&lt;80087380&gt;] 0x80087380
[&lt;80070b24&gt;] 0x80070b24
[&lt;800824bc&gt;] 0x800824bc
[&lt;8008259c&gt;] 0x8008259c
[&lt;8006082c&gt;] 0x8006082c
[&lt;80091b00&gt;] 0x80091b00
[&lt;80060a00&gt;] 0x80060a00
[&lt;8006b59c&gt;] 0x8006b59c
[&lt;8006c8fc&gt;] 0x8006c8fc
[&lt;80060a20&gt;] 0x80060a20
[&lt;802cda48&gt;] 0x802cda48
[&lt;802cd3a8&gt;] 0x802cd3a8</code></pre></div><p>When running the D-Link firmware, I would have file transfers<br />to the WAN stall after a couple hundred meg.&nbsp; The transfer would<br />die, but I didn&#039;t need to reboot the router for new connections<br />to work.</p><p>Otherwise, the performance of OpenWRT seemed to be on par with<br />the D-Link.</p><p>================================================================================<br />Performance numbers</p><p>For each test I transferred about 100-200 MB at a time with SCP.<br />Numbers are just to show that other than uploads to WAN, <br />performance was comparable.</p><p>OpenWRT firmware KAMIKAZE (bleeding edge, r19557)</p><p>1.9 MB/s download (from wan) wireless 11ng (g) - 40-50% util<br />2.7 MB/s download (from lan) wireless 11ng (g) - 40-50% util<br />2.7 MB/s upload (to lan) wireless 11ng (g) - 30-40% util</p><p>6.1 MB/s&nbsp; switch (port 1 to 3)<br />10.5 MB/s download (from wan) (80% CPU utilization)</p><p>D-Link firmware 1.01NA</p><p>1.9 MB/s download (from wan) wireless 11ng (g)<br />2.6 MB/s upload (to wan) wireless 11ng (g)<br />&nbsp; &nbsp; transferred 1635MB in 10:35; didn&#039;t stall</p><p>2.7 MB/s download (from lan) wireless 11ng (g)<br />2.5 MB/s upload (to lan) wireless 11ng (g)</p><p>2.7 MB/s download (from lan) wireless 11ng (g) WPA2-AES<br />2.5 MB/s upload (to lan) wireless 11ng (g) WPA2-AES</p><p>5.4 MB/s&nbsp; switch (port 1 to 4)<br />5.7 MB/s&nbsp; switch (port 1 to 3)<br />8.6 MB/s download (from wan)<br />11 MB/s [until it stalls] upload (to wan)<br />================================================================================</p><div class="codebox"><pre><code>Linux version 2.6.32.7 (buildbot@faraday) (gcc version 4.3.3 (GCC) ) #1 Tue Feb 9 11:34:20 UTC 2010
prom: fw_arg0=00000007, fw_arg1=a1f6ffb0, fw_arg2=a1f70460, fw_arg3=00000004
MyLoader: sysp=bf005e00, boardp=df00d700, parts=b007700f
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7240 rev 2, CPU:350.000 MHz, AHB:175.000 MHz, DDR:350.000 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 802cba80, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=DIR-600-A1 mtdparts=spi0.0:192k(u-boot)ro,64k(nvram)ro,896k(kernel),2816k(rootfs),64k(mac)ro,64k(art)ro,3712k@0x40000(firmware)
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29348k/32768k available (2090k kernel code, 3420k reserved, 390k data, 152k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:56
Calibrating delay loop... 232.65 BogoMIPS (lpj=1163264)
Mount-cache hash table entries: 512
devtmpfs: initialized
NET: Registered protocol family 16
MIPS: machine is D-Link DIR-600 rev. A1
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
PCI: fixup device 0000:00:00.0
pci 0000:00:00.0: reg 10 64bit mmio: [0x000000-0x00ffff]
pci 0000:00:00.0: supports D1
pci 0000:00:00.0: PME# supported from D0 D1 D3hot
pci 0000:00:00.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:00.0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
yaffs Feb  9 2010 11:29:43 Installing. 
msgmni has been set to 57
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: w25x32 (4096 Kbytes)
7 cmdlinepart partitions found on MTD device spi0.0
Creating 7 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000030000 : &quot;u-boot&quot;
0x000000030000-0x000000040000 : &quot;nvram&quot;
0x000000040000-0x000000120000 : &quot;kernel&quot;
0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=249000, len=197000 
0x000000249000-0x0000003e0000 : &quot;rootfs_data&quot;
0x0000003e0000-0x0000003f0000 : &quot;mac&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
0x000000040000-0x0000003e0000 : &quot;firmware&quot;
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xba000000, irq 5
eth1: Atheros AG71xx at 0xb9000000, irq 4
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=24)
TCP westwood registered
NET: Registered protocol family 17
Bridge firewalling registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
devtmpfs: mounted
Freeing unused kernel memory: 152k freed
gpio-buttons driver version 0.1.2
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
eth0: link up (1000Mbps/Full duplex)
Registered led device: dir-600-a1:green:power
Registered led device: dir-600-a1:amber:power
Registered led device: dir-600-a1:blue:wps
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
eth0: link down
eth0: link up (1000Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
eth1: link up (100Mbps/Full duplex)
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (460 buckets, 1840 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
ar71xx-wdt: enabling watchdog timer</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/cpuinfo 
system type             : Atheros AR7240 rev 2
machine                 : D-Link DIR-600 rev. A1
processor               : 0
cpu model               : MIPS 24Kc V7.4
BogoMIPS                : 232.65
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0168, 0x0af0, 0x09c8]
ASEs implemented        : mips16
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available

root@OpenWrt:/# cat /proc/meminfo 
MemTotal:          29500 kB
MemFree:           18484 kB
Buffers:            1032 kB
Cached:             3644 kB
SwapCached:            0 kB
Active:             3680 kB
Inactive:           2432 kB
Active(anon):       1496 kB
Inactive(anon):        0 kB
Active(file):       2184 kB
Inactive(file):     2432 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:             0 kB
SwapFree:              0 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:          1448 kB
Mapped:              876 kB
Shmem:                60 kB
Slab:               3248 kB
SReclaimable:        764 kB
SUnreclaim:         2484 kB
KernelStack:         240 kB
PageTables:          184 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:       14748 kB
Committed_AS:       3744 kB
VmallocTotal:    1048372 kB
VmallocUsed:         612 kB
VmallocChunk:    1041148 kB
root@OpenWrt:/# 

root@OpenWrt:/tmp# lspci 
00:00.0 Network controller: Atheros Communications Inc. AR9285 Wireless Network Adapter (PCI-Express) (rev 01)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103396">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						20 Feb 2010, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>I upgraded to 2/17/2010&#039;s snapshot and was still seeing the same problems. (r19655)</p><p>On the DD-WRT board, chirho mentioned that he wasn&#039;t having problems with<br />the WAN port, so I started playing around with different settings.<br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=410466#410466">http://www.dd-wrt.com/phpBB2/viewtopic. … 466#410466</a></p><p>First, because my router was between 2 machines that do GigE, I put<br />10/100 switches on both sides, but that didn&#039;t fix anything.</p><p>Then I tried playing with a simple tc htb setup and was able to constrain<br />traffic to 50Kbps (with an rsync backup over ssh) for hours.</p><p>Finally, I started playing with MTU.&nbsp; I found that if I set MTU between 1440<br />and 1500, I could crash the wan interface with a ping flood where packet data<br />== MTU.&nbsp; I have seen it crash under a ping flood between 1410 and 1440.</p><p>I have not yet seen it crash due to a ping flood at 1400, but I did just<br />crash it with an scp session.&nbsp; With scp I&#039;m stressing it by copying a 1.5 GB<br />file repeatedly at about 10.5 MB/s.&nbsp; This seems to put the cpu at about 95%<br />utilization; most of it in &quot;sirq&quot;.</p><p>If I then rate limit it to 5 MB/s with a simple tc htb setup like below,<br />processor utilization hovers around 60% (nearly all &quot;sirq&quot;).</p><div class="codebox"><pre><code>opkg install tc_2.6.29-1-1_ar71xx.ipk 
opkg install kmod-sched_2.6.32.8-1_ar71xx.ipk 

# the rest of this would work well in /etc/rc.local
insmod /lib/modules/2.6.32.8/sch_htb.ko
INTERFACE=eth1
RATE=5MBps
tc qdisc del dev $INTERFACE root
tc qdisc add dev $INTERFACE root handle 1: htb default 1
tc class add dev $INTERFACE parent 1: classid 1:1 htb rate $RATE ceil $RATE</code></pre></div><p>To set MTU, edit /etc/config/network, add the line, &quot;option mtu&nbsp; &nbsp; &nbsp; 1400&quot;<br />under &quot;config interface wan&quot;.&nbsp; </p><p>Then reboot.&nbsp; The wan interface just seems to hang if you change the MTU on<br />the WAN and just by issue &quot;/etc/init.d/network restart&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109101">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						14 May 2010, 17:37					</div>
				</div>
				<div class="post-content content">
					<p>Currently (05/14/2010 - 05/18/2010), Fry&#039;s Electronics is celbrating its 25th Anniversary and has this <a href="http://www.frys.com/product/5978994">FR-54RTR</a> router onsale for $12. Hopefully, more people will get this device to hack with OpenWRT to resolve the issue faster.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109252">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						17 May 2010, 19:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><p>After uploading the 1.01 firmware via the firmware upgrade pages,<br />I was able to update the firmware to a snapshot of OpenWRT from<br /><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/">http://downloads.openwrt.org/snapshots/trunk/ar71xx/</a></p><p>I used the snapshot from &quot;09-Feb-2010 11:37&quot;:<br />openwrt-ar71xx-dir-600-a1-squashfs-universal.bin</p></blockquote></div><p>Hmmm ..., interestingly I could not locate the openwrt-ar71xx-dir-600-a1-squashfs-<strong>universal</strong>.bin firmware from the above link. Can you please confirm this?</p><p>OTOH, I compiled my own AR7 firmware and here is the list of generated firmware with no openwrt-ar71xx-dir-600-a1-squashfs-<strong>universal</strong>.bin firmware:<br /></p><div class="codebox"><pre><code>openwrt-ar71xx-generic-dir-600-a1-jffs2-factory.bin
openwrt-ar71xx-generic-dir-600-a1-jffs2-sysupgrade.bin
openwrt-ar71xx-generic-dir-600-a1-squashfs-factory.bin
openwrt-ar71xx-generic-dir-600-a1-squashfs-sysupgrade.bin
openwrt-ar71xx-generic-rootfs.tar.gz
openwrt-ar71xx-generic-root.jffs2-128k
openwrt-ar71xx-generic-root.jffs2-64k
openwrt-ar71xx-generic-root.squashfs
openwrt-ar71xx-generic-root.squashfs-4k
openwrt-ar71xx-generic-uImage-gzip.bin
openwrt-ar71xx-generic-uImage-lzma.bin
openwrt-ar71xx-generic-vmlinux.bin
openwrt-ar71xx-generic-vmlinux.elf
openwrt-ar71xx-generic-vmlinux.gz
openwrt-ar71xx-generic-vmlinux.lzma</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109280">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						18 May 2010, 02:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>Hmmm ..., interestingly I could not locate the openwrt-ar71xx-dir-600-a1-squashfs-<strong>universal</strong>.bin firmware from the above link. Can you please confirm this?</p></blockquote></div><p>If you are loading via the emergency D-Link boot loader (30-30-30 reset) you should use this one:<br />openwrt-ar71xx-generic-dir-600-a1-squashfs-factory.bin</p><p>I&#039;m not sure when they changed names.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109525">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						20 May 2010, 20:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>Hmmm ..., interestingly I could not locate the openwrt-ar71xx-dir-600-a1-squashfs-<strong>universal</strong>.bin firmware from the above link. Can you please confirm this?</p></blockquote></div><p>If you are loading via the emergency D-Link boot loader (30-30-30 reset) you should use this one:<br />openwrt-ar71xx-generic-dir-600-a1-squashfs-factory.bin</p></blockquote></div><p>Thanks. I tried that firmware and looks like it bricked my device. OTOH, when I flashed my unit with a self-built OpenWRT from SVN trunk, the device didn&#039;t behave very stable and traffics through WAN got blocked after an hour or so up running. Also, I have noticed no httpd daemon through the <em>ps</em> utility. Looks like there is much need be done before this device will run OpenWRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109535">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cls</div>
					<div class="post-datetime">
						20 May 2010, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>I used the built-in web interface on the FR-54RTR to update it to <a href="http://downloads.openwrt.org/backfire/10.03/ar71xx/openwrt-ar71xx-fr-54rtr-squashfs-factory.bin">http://downloads.openwrt.org/backfire/1 … actory.bin</a></p><p>it rebooted and passes traffic just fine.&nbsp; the LEDs do not work, but that&#039;s OK.</p><p>the FR-54RTR rocks!&nbsp; on sale for $12, it has 32MB RAM, 4MB flash, a serial port, and maybe I can use the GPIOs on the LEDs for something else.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109550">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">unsuported</div>
					<div class="post-datetime">
						21 May 2010, 03:22					</div>
				</div>
				<div class="post-content content">
					<p>there is a wqy to flash the W25x32vf?, got it brick too</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109552">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 May 2010, 04:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cls wrote:</cite><blockquote><p>I used the built-in web interface on the FR-54RTR to update it to <a href="http://downloads.openwrt.org/backfire/10.03/ar71xx/openwrt-ar71xx-fr-54rtr-squashfs-factory.bin">http://downloads.openwrt.org/backfire/1 … actory.bin</a></p></blockquote></div><p>An interesting about this FR-54RTR firmware is there is nowhere to be found on OpenWRT SVN trunk, yet. Perhaps, developers have not updated the SVN trunk to include a support for FR-54RTR router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109593">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">koolcho</div>
					<div class="post-datetime">
						21 May 2010, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>The problem with &quot;NETDEV WATCHDOG: eth1 (ag71xx): transmit queue 0 timed out&quot; can be fixed by setting MTU to 1400 on wan port:</p><p>vi /etc/config/network</p><p>in the &quot;config interface wan&quot; add &nbsp; &nbsp; <br />option mtu&nbsp; &nbsp; 1400</p><p>I&#039;ve found this solution from <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr941nd">http://wiki.openwrt.org/toh/tp-link/tl-wr941nd</a> and it worked perfectly for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109638">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						22 May 2010, 06:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>koolcho wrote:</cite><blockquote><p>The problem with &quot;NETDEV WATCHDOG: eth1 (ag71xx): transmit queue 0 timed out&quot; can be fixed by setting MTU to 1400 on wan port:<br />.</p></blockquote></div><p>It doesn&#039;t make the problem go away; it just makes it much less likely to occur.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109712">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						23 May 2010, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>Today, I did an SVN update to r21517 to my local OpenWRT SVN source. I did a <em>make menuconfig</em> to include <em>uhttp</em> + <em>LuCI</em> packages. Then, I successfully compiled/installed the OpenWRT SVN firmware to my FR-54RTR WiFi router. Now, my FR-54RTR WiFi router is up running with a LuCI GUI. The reason I included GUI is I want to configure this WiFi router as a client so that it can be used by my friend to connect to a WiFi server provided by the apartment complex where she currently is a tenant. If anyone out here knows how to configure a WiFi router do achieve this task, I sure will appreciate some helps on this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109768">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						24 May 2010, 16:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>The reason I included GUI is I want to configure this WiFi router as a client so that it can be used by my friend to connect to a WiFi server provided by the apartment complex where she currently is a tenant. If anyone out here knows how to configure a WiFi router do achieve this task, I sure will appreciate some helps on this.</p></blockquote></div><p>I posted notes on how to do this on dd-wrt.com&#039;s forums a while back (using OpenWrt).</p><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=57377&amp;postdays=0&amp;postorder=asc&amp;start=30">http://www.dd-wrt.com/phpBB2/viewtopic. … p;start=30</a></p><p>I haven&#039;t checked to see if the dhcp issue mentioned in the post has been fixed.</p><div class="quotebox"><blockquote><p>I wanted to try this out myself...</p><p>opkg update<br />opkg install wpa-supplicant</p><br /><p>/etc/config/wireless:<br /></p><div class="quotebox"><blockquote><p>config wifi-device&nbsp; radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;mac80211<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; auto<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr&nbsp; 00:26:5a:ce:6c:63<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode&nbsp; &nbsp;11g<br />#&nbsp; &nbsp; &nbsp; &nbsp;option htmode&nbsp; &nbsp;HT20<br />#&nbsp; &nbsp; &nbsp; &nbsp;list ht_capab&nbsp; &nbsp;SHORT-GI-40<br />#&nbsp; &nbsp; &nbsp; &nbsp;list ht_capab&nbsp; &nbsp;DSSS_CCK-40<br />&nbsp; &nbsp; &nbsp; &nbsp; # REMOVE THIS LINE TO ENABLE WIFI:<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled 0</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;radio0<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;AccessPointSSID<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption psk<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; &nbsp; &nbsp; &#039;example password&#039;</p></blockquote></div><p>I set channel to &quot;auto&quot;, but you can probably hardcode it.<br />Change network to &quot;wan&quot;.<br />Change mode to &quot;sta&quot;. (It&#039;s short for &quot;station&quot;.)<br />Change ssid to the ssid of the access point you wish to talk to.</p><p>I noticed problems with wireless coming up (as a client)<br />when using dhcp; I found no problems when I set it to static.</p><p>If you do this, you need to set ifname to wlan0, otherwise<br />routing will be messed up. The DNS server I chose is one<br />of Google&#039;s open DNS servers.</p><p>/etc/config/network:<br /></p><div class="quotebox"><blockquote><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;wlan0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00265ACE6C64&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mtu&#039; &#039;1400&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.7.10&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;gateway&#039; &#039;192.168.7.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dns&#039; &#039;8.8.4.4&#039;</p></blockquote></div></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109786">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						24 May 2010, 22:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><p>I haven&#039;t checked to see if the dhcp issue mentioned in the post has been fixed.</p><p>I wanted to try this out myself...</p><p>opkg update<br />opkg install wpa-supplicant</p><br /><p>/etc/config/wireless:<br /></p><div class="codebox"><pre><code>config wifi-device  radio0
        option type     mac80211
        option channel  auto
        option macaddr  00:26:5a:ce:6c:63
        option hwmode   11g
#       option htmode   HT20
#       list ht_capab   SHORT-GI-40
#       list ht_capab   DSSS_CCK-40
        # REMOVE THIS LINE TO ENABLE WIFI:
        option disabled 0

config wifi-iface
        option device   radio0
        option network  wan
        option mode     sta
        option ssid     AccessPointSSID
        option encryption psk
        option key      &#039;example password&#039;</code></pre></div><p>I set channel to &quot;auto&quot;, but you can probably hardcode it.<br />Change network to &quot;wan&quot;.<br />Change mode to &quot;sta&quot;. (It&#039;s short for &quot;station&quot;.)<br />Change ssid to the ssid of the access point you wish to talk to.</p><p>I noticed problems with wireless coming up (as a client)<br />when using dhcp; I found no problems when I set it to static.</p><p>If you do this, you need to set ifname to wlan0, otherwise<br />routing will be messed up. The DNS server I chose is one<br />of Google&#039;s open DNS servers.</p><p>/etc/config/network:<br /></p><div class="codebox"><pre><code>config &#039;interface&#039; &#039;wan&#039;
        option &#039;ifname&#039; &#039;wlan0&#039;
        option &#039;macaddr&#039; &#039;00265ACE6C64&#039;
        option &#039;proto&#039; &#039;static&#039;
        option &#039;mtu&#039; &#039;1400&#039;
        option &#039;ipaddr&#039; &#039;192.168.7.10&#039;
        option &#039;netmask&#039; &#039;255.255.255.0&#039;
        option &#039;gateway&#039; &#039;192.168.7.1&#039;
        option &#039;dns&#039; &#039;8.8.4.4&#039;</code></pre></div></blockquote></div><p>I have no idea how you managed to get the above scripts working on an FR-54RTR WiFi router flashed with an OpenWRT BackFire firmware. When I tried it, there is no WiFi as shown below ( the output from <em>ifconfig</em> showed no wlan0 device):<br /></p><div class="codebox"><pre><code>Connected to 192.168.1.1.
Escape character is &#039;^]&#039;.
 === IMPORTANT ============================
  Use &#039;passwd&#039; to set your login password
  this will disable telnet and enable SSH
 ------------------------------------------


BusyBox v1.15.3 (2010-04-06 03:14:11 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03, r20728) --------------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:86 errors:0 dropped:0 overruns:0 frame:0
          TX packets:40 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:5193 (5.0 KiB)  TX bytes:4412 (4.3 KiB)

eth0      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:96 errors:0 dropped:0 overruns:0 frame:0
          TX packets:41 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:7417 (7.2 KiB)  TX bytes:5615 (5.4 KiB)
          Interrupt:5 

lan1      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:96 errors:0 dropped:0 overruns:0 frame:0
          TX packets:40 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:5689 (5.5 KiB)  TX bytes:4572 (4.4 KiB)

lan2      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lan3      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lan4      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/#</code></pre></div><p>Here is the output from <em>opkg list</em> that shows all packages installed on my FT-54RTR WiFi router:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# opkg list
base-files - 42-r20728
busybox - 1.15.3-2
crda - 1.1.0-2
dnsmasq - 2.52-2
dropbear - 0.52-4
firewall - 1-10
hotplug2 - 1.0-beta-1
iptables - 1.4.6-2
iptables-mod-conntrack - 1.4.6-2
iptables-mod-nat - 1.4.6-2
iw - 0.9.19-1
kernel - 2.6.32.10-1
kmod-button-hotplug - 2.6.32.10-1
kmod-cfg80211 - 2.6.32.10+2010-03-24-5
kmod-crc-ccitt - 2.6.32.10-1
kmod-crypto-aes - 2.6.32.10-1
kmod-crypto-arc4 - 2.6.32.10-1
kmod-crypto-core - 2.6.32.10-1
kmod-input-core - 2.6.32.10-1
kmod-input-gpio-buttons - 2.6.32.10-1
kmod-input-polldev - 2.6.32.10-1
kmod-ipt-conntrack - 2.6.32.10-1
kmod-ipt-core - 2.6.32.10-1
kmod-ipt-nat - 2.6.32.10-1
kmod-ipt-nathelper - 2.6.32.10-1
kmod-leds-gpio - 2.6.32.10-1
kmod-mac80211 - 2.6.32.10+2010-03-24-5
kmod-ppp - 2.6.32.10-1
kmod-pppoe - 2.6.32.10-1
libc - 0.9.30.1-42
libgcc - 4.3.3+cs-42
libiptc - 1.4.6-2
liblua - 5.1.4-6
libnl-tiny - 0.1-1
libuci - 12012009.5-1
libuci-lua - 12012009.5-1
libxtables - 1.4.6-2
lua - 5.1.4-6
luci - 0.9.0-1
luci-admin-core - 0.9.0-1
luci-admin-full - 0.9.0-1
luci-admin-mini - 0.9.0-1
luci-app-firewall - 0.9.0-1
luci-app-initmgr - 0.9.0-1
luci-cbi - 0.9.0-1
luci-core - 0.9.0-1
luci-http - 0.9.0-1
luci-i18n-english - 0.9.0-1
luci-ipkg - 0.9.0-1
luci-lmo - 0.9.0-1
luci-nixio - 0.9.0-1
luci-sgi-cgi - 0.9.0-1
luci-sys - 0.9.0-1
luci-theme-base - 0.9.0-1
luci-theme-openwrt - 0.9.0-1
luci-uci - 0.9.0-1
luci-uvl - 0.9.0-1
luci-web - 0.9.0-1
mtd - 12
opkg - 513-2
ppp - 2.4.4-5
ppp-mod-pppoe - 2.4.4-5
swconfig - 5
uci - 12012009.5-1
udevtrigger - 106-1
uhttpd - 7
wireless-tools - 29-4
wpa-supplicant - 20100309-1
root@OpenWrt:/#</code></pre></div><p>Failing that, I compiled my own and flashed the OpenWRT SVN firmware to my FR-54RTR WiFi router to find out the same problem.</p>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 25 May 2010, 02:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109801">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 May 2010, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>Now that I reflashed my FR-54RTR unit with a self-built OpenWRT SVN firmware + the /etc/config/network + /etc/config/wireless files from you, the output of <em>ifconfig</em> has shown the <em>wlan0</em> hardware; however, my device still can&#039;t find out any WiFi signals, even it is sitting on the same table next to a WiFi router source. At the moment, I am completely clueless. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><div class="codebox"><pre><code>Connected to 192.168.1.1.
Escape character is &#039;^]&#039;.
 === IMPORTANT ============================
  Use &#039;passwd&#039; to set your login password
  this will disable telnet and enable SSH
 ------------------------------------------


BusyBox v1.16.1 (2010-05-20 21:09:28 EDT) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r21517) ------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/# df
Filesystem           1K-blocks      Used Available Use% Mounted on
/dev/root                 2048      2048         0 100% /rom
tmpfs                    14772        52     14720   0% /tmp
tmpfs                      512         0       512   0% /dev
root                      2048      2048         0 100% /tmp/root
mini_fo:/tmp/root         2048      2048         0 100% /tmp/root
/dev/mtdblock4             852        64       788   8% /overlay
mini_fo:/overlay          2048      2048         0 100% /
root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:10164 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6310 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:632622 (617.7 KiB)  TX bytes:633386 (618.5 KiB)

eth0      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:10176 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6311 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:816432 (797.2 KiB)  TX bytes:659669 (644.2 KiB)
          Interrupt:5 

lan1      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:10176 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6310 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:633264 (618.4 KiB)  TX bytes:658626 (643.1 KiB)

lan2      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lan3      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lan4      Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 00:26:5A:F4:6C:14  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/#</code></pre></div>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 25 May 2010, 03:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109859">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						25 May 2010, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>Now that I reflashed my FR-54RTR unit with a self-built OpenWRT SVN firmware + the /etc/config/network + /etc/config/wireless files from you, the output of <em>ifconfig</em> has shown the <em>wlan0</em> hardware; however, my device still can&#039;t find out any WiFi signals, even it is sitting on the same table next to a WiFi router source. At the moment, I am completely clueless. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Sorry, I&#039;m not really setup to troubleshoot at the moment.</p><p>Is there anything in the output from logread?</p><p>Also, what happens if you issue &quot;wifi down&quot;, then &quot;wifi up&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109863">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 May 2010, 18:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>Now that I reflashed my FR-54RTR unit with a self-built OpenWRT SVN firmware + the /etc/config/network + /etc/config/wireless files from you, the output of <em>ifconfig</em> has shown the <em>wlan0</em> hardware; however, my device still can&#039;t find out any WiFi signals, even it is sitting on the same table next to a WiFi router source. At the moment, I am completely clueless. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Sorry, I&#039;m not really setup to troubleshoot at the moment.</p></blockquote></div><p>At least, you are doing better than me. I don&#039;t use any WiFi. So, my knowledge on WiFi is 0.</p><div class="quotebox"><blockquote><p>Is there anything in the output from logread?</p></blockquote></div><p>The following is the excerpt from logread.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# logread
May 24 17:25:00 OpenWrt syslog.info syslogd started: BusyBox v1.16.1
May 24 17:25:00 OpenWrt user.info kernel: squashfs: version 4.0 (2009/01/31) Phillip Lougher
May 24 17:25:00 OpenWrt user.warn kernel: Registering mini_fo version $Id$
May 24 17:25:00 OpenWrt user.info kernel: JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
May 24 17:25:00 OpenWrt user.info kernel: msgmni has been set to 57
May 24 17:25:00 OpenWrt user.info kernel: io scheduler noop registered
May 24 17:25:00 OpenWrt user.info kernel: io scheduler deadline registered (default)
May 24 17:25:00 OpenWrt user.info kernel: Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
May 24 17:25:00 OpenWrt user.info kernel: serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
May 24 17:25:00 OpenWrt user.info kernel: console [ttyS0] enabled, bootconsole disabled
May 24 17:25:00 OpenWrt user.info kernel: loop: module loaded
May 24 17:25:00 OpenWrt user.info kernel: Atheros AR71xx SPI Controller driver version 0.2.4
May 24 17:25:00 OpenWrt user.info kernel: m25p80 spi0.0: w25x32 (4096 Kbytes)
May 24 17:25:00 OpenWrt user.notice kernel: 7 cmdlinepart partitions found on MTD device spi0.0
May 24 17:25:00 OpenWrt user.notice kernel: Creating 7 MTD partitions on &quot;spi0.0&quot;:
May 24 17:25:00 OpenWrt user.notice kernel: 0x000000000000-0x000000030000 : &quot;u-boot&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x000000030000-0x000000040000 : &quot;nvram&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x000000040000-0x000000120000 : &quot;kernel&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x000000120000-0x0000003e0000 : &quot;rootfs&quot;
May 24 17:25:00 OpenWrt user.notice kernel: mtd: partition &quot;rootfs&quot; set to be root filesystem
May 24 17:25:00 OpenWrt user.info kernel: mtd: partition &quot;rootfs_data&quot; created automatically, ofs=30B000, len=D5000 
May 24 17:25:00 OpenWrt user.notice kernel: 0x00000030b000-0x0000003e0000 : &quot;rootfs_data&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x0000003e0000-0x0000003f0000 : &quot;mac&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x0000003f0000-0x000000400000 : &quot;art&quot;
May 24 17:25:00 OpenWrt user.notice kernel: 0x000000040000-0x0000003e0000 : &quot;firmware&quot;
May 24 17:25:00 OpenWrt user.info kernel: Atheros(R) L2 Ethernet Driver - version 2.2.3
May 24 17:25:00 OpenWrt user.info kernel: Copyright (c) 2007 Atheros Corporation.
May 24 17:25:00 OpenWrt user.info kernel: ag71xx_mdio: probed
May 24 17:25:00 OpenWrt user.info kernel: eth0: Atheros AG71xx at 0xba000000, irq 5
May 24 17:25:00 OpenWrt user.debug kernel: eth0: using fixed link parameters
May 24 17:25:00 OpenWrt user.info kernel: eth1: Atheros AG71xx at 0xb9000000, irq 4
May 24 17:25:00 OpenWrt user.debug kernel: eth1: using fixed link parameters
May 24 17:25:00 OpenWrt user.info kernel: Atheros AR71xx hardware watchdog driver version 0.1.0
May 24 17:25:00 OpenWrt user.debug kernel: ar71xx-wdt: timeout=15 secs (max=24)
May 24 17:25:00 OpenWrt user.info kernel: Registered led device: dir-600-a1:green:power
May 24 17:25:00 OpenWrt user.info kernel: Registered led device: dir-600-a1:amber:power
May 24 17:25:00 OpenWrt user.info kernel: Registered led device: dir-600-a1:blue:wps
May 24 17:25:00 OpenWrt user.info kernel: IPv4 over IPv4 tunneling driver
May 24 17:25:00 OpenWrt user.info kernel: GRE over IPv4 tunneling driver
May 24 17:25:00 OpenWrt user.info kernel: TCP westwood registered
May 24 17:25:00 OpenWrt user.info kernel: NET: Registered protocol family 17
May 24 17:25:00 OpenWrt user.notice kernel: Distributed Switch Architecture driver version 0.1
May 24 17:25:00 OpenWrt user.info kernel: eth0[0]: detected a Atheros AR7240 built-in switch
May 24 17:25:00 OpenWrt user.info kernel: dsa slave smi: probed
May 24 17:25:00 OpenWrt user.info kernel: 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
May 24 17:25:00 OpenWrt user.info kernel: All bugs added by David S. Miller &lt;davem@redhat.com&gt;
May 24 17:25:00 OpenWrt user.info kernel: lib80211: common routines for IEEE802.11 drivers
May 24 17:25:00 OpenWrt user.debug kernel: lib80211_crypt: registered algorithm &#039;NULL&#039;
May 24 17:25:00 OpenWrt user.debug kernel: lib80211_crypt: registered algorithm &#039;WEP&#039;
May 24 17:25:00 OpenWrt user.debug kernel: lib80211_crypt: registered algorithm &#039;CCMP&#039;
May 24 17:25:00 OpenWrt user.debug kernel: lib80211_crypt: registered algorithm &#039;TKIP&#039;
May 24 17:25:00 OpenWrt user.warn kernel: VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
May 24 17:25:00 OpenWrt user.info kernel: Freeing unused kernel memory: 152k freed
May 24 17:25:00 OpenWrt user.warn kernel: Please be patient, while OpenWrt loads ...
May 24 17:25:00 OpenWrt user.info kernel: gpio-buttons driver version 0.1.2
May 24 17:25:00 OpenWrt user.info kernel: input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
May 24 17:25:00 OpenWrt user.info kernel: Button Hotplug driver version 0.4.0
May 24 17:25:00 OpenWrt user.info kernel: eth0: link up (1000Mbps/Full duplex)
May 24 17:25:00 OpenWrt user.warn kernel: jffs2_scan_eraseblock(): End of filesystem marker found at 0x2000
May 24 17:25:00 OpenWrt user.warn kernel: jffs2_build_filesystem(): unlocking the mtd device... done.
May 24 17:25:00 OpenWrt user.warn kernel: jffs2_build_filesystem(): erasing all blocks after the end marker... done.
May 24 17:25:00 OpenWrt user.info kernel: mini_fo: using base directory: /
May 24 17:25:00 OpenWrt user.info kernel: mini_fo: using storage directory: /overlay
May 24 17:25:00 OpenWrt user.info kernel: eth0: link down
May 24 17:25:01 OpenWrt user.info kernel: eth0: link up (1000Mbps/Full duplex)
May 24 17:25:02 OpenWrt user.notice rdate: No usable time server for loopback found
May 24 17:25:03 OpenWrt user.info kernel: device lan1 entered promiscuous mode
May 24 17:25:03 OpenWrt user.info kernel: device eth0 entered promiscuous mode
May 24 17:25:03 OpenWrt user.notice rdate: No usable time server for eth found
May 24 17:25:03 OpenWrt user.info kernel: lan1: link up, 100Mb/s, full duplex
May 24 17:25:03 OpenWrt user.info kernel: device lan2 entered promiscuous mode
May 24 17:25:03 OpenWrt user.info kernel: br-lan: port 1(lan1) entering forwarding state
May 24 17:25:04 OpenWrt user.info kernel: device lan3 entered promiscuous mode
May 24 17:25:04 OpenWrt user.info kernel: device lan4 entered promiscuous mode
May 24 17:25:04 OpenWrt user.info kernel: Generic kernel compatibility enabled based on linux-next next-20100113
May 24 17:25:05 OpenWrt user.info kernel: cfg80211: Calling CRDA to update world regulatory domain
May 24 17:25:06 OpenWrt user.notice rdate: No usable time server for lan found
May 24 17:25:06 OpenWrt user.info kernel: cfg80211: World regulatory domain updated:
May 24 17:25:06 OpenWrt user.info kernel:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
May 24 17:25:06 OpenWrt user.info kernel:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:06 OpenWrt user.info kernel:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:06 OpenWrt user.info kernel:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:06 OpenWrt user.info kernel:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:06 OpenWrt user.info kernel:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:07 OpenWrt user.debug kernel: PCI: Setting latency timer of device 0000:00:00.0 to 64
May 24 17:25:07 OpenWrt user.debug kernel: ath: EEPROM regdomain: 0x0
May 24 17:25:07 OpenWrt user.debug kernel: ath: EEPROM indicates default country code should be used
May 24 17:25:07 OpenWrt user.debug kernel: ath: doing EEPROM country-&gt;regdmn map search
May 24 17:25:07 OpenWrt user.debug kernel: ath: country maps to regdmn code: 0x3a
May 24 17:25:07 OpenWrt user.debug kernel: ath: Country alpha2 being used: US
May 24 17:25:07 OpenWrt user.debug kernel: ath: Regpair used: 0x3a
May 24 17:25:07 OpenWrt user.debug kernel: phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
May 24 17:25:07 OpenWrt user.info kernel: Registered led device: ath9k-phy0::radio
May 24 17:25:07 OpenWrt user.info kernel: Registered led device: ath9k-phy0::assoc
May 24 17:25:07 OpenWrt user.info kernel: Registered led device: ath9k-phy0::tx
May 24 17:25:07 OpenWrt user.info kernel: Registered led device: ath9k-phy0::rx
May 24 17:25:07 OpenWrt user.info kernel: phy0: Atheros AR9285 Rev:2 mem=0xb0000000, irq=48
May 24 17:25:07 OpenWrt user.info kernel: cfg80211: Calling CRDA for country: US
May 24 17:25:08 OpenWrt user.info kernel: cfg80211: Regulatory domain changed to country: US
May 24 17:25:08 OpenWrt user.info kernel:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
May 24 17:25:08 OpenWrt user.info kernel:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
May 24 17:25:08 OpenWrt user.info kernel:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
May 24 17:25:08 OpenWrt user.info kernel:     (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:08 OpenWrt user.info kernel:     (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:08 OpenWrt user.info kernel:     (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
May 24 17:25:08 OpenWrt user.info kernel:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
May 24 17:25:08 OpenWrt user.err kernel: loop: exports duplicate symbol loop_unregister_transfer (owned by kernel)
May 24 17:25:08 OpenWrt user.info kernel: PPP generic driver version 2.4.2
May 24 17:25:08 OpenWrt user.info kernel: ip_tables: (C) 2000-2006 Netfilter Core Team
May 24 17:25:08 OpenWrt user.info kernel: NET: Registered protocol family 24
May 24 17:25:09 OpenWrt user.warn kernel: nf_conntrack version 0.5.0 (461 buckets, 1844 max)
May 24 17:25:09 OpenWrt user.warn kernel: CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
May 24 17:25:09 OpenWrt user.warn kernel: nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
May 24 17:25:09 OpenWrt user.warn kernel: sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
May 24 17:25:09 OpenWrt user.info kernel: IMQ driver loaded successfully.
May 24 17:25:09 OpenWrt user.info kernel:       Hooking IMQ before NAT on PREROUTING.
May 24 17:25:09 OpenWrt user.info kernel:       Hooking IMQ after NAT on POSTROUTING.
May 24 17:25:10 OpenWrt user.info kernel: xt_time: kernel timezone is -0000
May 24 17:25:13 OpenWrt user.info sysinit: udhcpc (v1.16.1) started
May 24 17:25:14 OpenWrt user.info sysinit: Sending discover...
May 24 17:25:14 OpenWrt user.info sysinit: Loading defaults
May 24 17:25:14 OpenWrt user.info sysinit: Loading synflood protection
May 24 17:25:15 OpenWrt user.info sysinit: Adding custom chains
May 24 17:25:15 OpenWrt user.info sysinit: Loading zones
May 24 17:25:17 OpenWrt user.info sysinit: Sending discover...
May 24 17:25:17 OpenWrt user.info sysinit: Loading forwardings
May 24 17:25:17 OpenWrt user.info sysinit: Loading redirects
May 24 17:25:17 OpenWrt user.info sysinit: Loading rules
May 24 17:25:17 OpenWrt user.info sysinit: Loading includes
May 24 17:25:17 OpenWrt user.info sysinit: Loading interfaces
May 24 17:25:17 OpenWrt user.info firewall: info adding lan (br-lan) to zone lan
May 24 17:25:19 OpenWrt authpriv.info dropbear[1598]: Running in background
May 24 17:25:20 OpenWrt user.info sysinit: Sending discover...
May 24 17:25:20 OpenWrt user.info sysinit: WARNING: the specified certificate and key files do not exist and the px5g generator is not available, skipping SSL setup.
May 24 17:25:23 OpenWrt daemon.info dnsmasq[1746]: started, version 2.52 cachesize 150
May 24 17:25:23 OpenWrt daemon.info dnsmasq[1746]: compile time options: IPv6 GNU-getopt no-DBus no-I18N DHCP TFTP
May 24 17:25:23 OpenWrt daemon.info dnsmasq-dhcp[1746]: DHCP, IP range 192.168.1.100 -- 192.168.1.250, lease time 12h
May 24 17:25:23 OpenWrt daemon.info dnsmasq[1746]: using local addresses only for domain lan
May 24 17:25:23 OpenWrt daemon.warn dnsmasq[1746]: no servers found in /tmp/resolv.conf.auto, will retry
May 24 17:25:23 OpenWrt daemon.info dnsmasq[1746]: read /etc/hosts - 1 addresses
May 24 17:25:23 OpenWrt daemon.info dnsmasq-dhcp[1746]: read /etc/ethers - 0 addresses
May 24 17:25:24 OpenWrt user.debug kernel: ar71xx-wdt: enabling watchdog timer
root@OpenWrt:/#</code></pre></div><div class="quotebox"><blockquote><p>Also, what happens if you issue &quot;wifi down&quot;, then &quot;wifi up&quot;?</p></blockquote></div><p>Here is what I got from the screen when I executed <em>wifi up</em>:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# wifi up
udhcpc (v1.16.1) started
Sending discover...
Sending discover...
Sending discover...</code></pre></div><p>Then, logread shows additional lines (after the above):<br /></p><div class="codebox"><pre><code>May 24 17:26:34 OpenWrt user.info sysinit: Read error: Network is down, reopening socket
May 24 17:26:37 OpenWrt user.info sysinit: udhcpc: bind: No such device</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109889">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						26 May 2010, 06:30					</div>
				</div>
				<div class="post-content content">
					<p>It looks like you don&#039;t have kmod-ath9k installed.</p><div class="codebox"><pre><code>opkg update
opkg kmod-ath9k</code></pre></div><p>I also assume you have changed these 3 lines to match your main wireless router.<br /></p><div class="codebox"><pre><code>        option ssid     AccessPointSSID
        option encryption psk
        option key      &#039;example password&#039;</code></pre></div><p>You may want to erase /etc/config/wireless and run wifi detect after you install kmod-ath9k,<br />to make sure that the system can see your wireless interface.</p><p>You also may need to reboot after you install kmod-ath9k, before all the networking<br />scripts will work perfectly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109987">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						27 May 2010, 21:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><p>It looks like you don&#039;t have kmod-ath9k installed.</p><div class="codebox"><pre><code>opkg update
opkg kmod-ath9k</code></pre></div></blockquote></div><p>I noticed that. Then, I reflashed my FR-54RTR with my own built OpenWRT SVN firmware&nbsp; and with the ath9k module built into the kernel as seen below. Yet, no WiFi signals.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# lsmod
Module                  Size  Used by    Not tainted
nf_nat_tftp              432  0 
nf_conntrack_tftp       2400  1 nf_nat_tftp
nf_nat_irc               816  0 
nf_conntrack_irc        2512  1 nf_nat_irc
nf_nat_ftp              1328  0 
nf_conntrack_ftp        4624  1 nf_nat_ftp
xt_HL                   1280  0 
xt_hl                    896  0 
xt_MARK                  496 15 
ipt_ECN                 1312  0 
xt_CLASSIFY              496  0 
xt_time                 1552  0 
xt_tcpmss                992  0 
xt_statistic             816  0 
xt_mark                  512 15 
xt_length                672  5 
ipt_ecn                  976  0 
xt_DSCP                 1392  0 
xt_dscp                 1008  0 
xt_IMQ                   704  1 
imq                     2544  0 
xt_string                880  0 
xt_layer7              10368  2 
ipt_MASQUERADE           992  1 
iptable_nat             2768  1 
nf_nat                 10064  5 nf_nat_tftp,nf_nat_irc,nf_nat_ftp,ipt_MASQUERADE,iptable_nat
xt_CONNMARK              768  2 
xt_recent               5520  0 
xt_helper                816  0 
xt_conntrack            2016  0 
xt_connmark              656  0 
xt_connbytes            1232  0 
xt_NOTRACK               544  0 
iptable_raw              656  1 
xt_state                 768  3 
nf_conntrack_ipv4       7376 10 iptable_nat,nf_nat
nf_defrag_ipv4           624  1 nf_conntrack_ipv4
nf_conntrack           37488 18 nf_nat_tftp,nf_conntrack_tftp,nf_nat_irc,nf_conntrack_irc,nf_nat_ftp,nf_conntrack_ftp,xt_layer7,ipt_MASQUERADE,iptable_nat,nf_nat,xt_CONNMARK,xt_helper,xt_conntrack,xt_connmark,xt_connbytes,xt_NOTRACK,xt_state,nf_conntrack_ipv4
pppoe                   7984  0 
pppox                   1216  1 pppoe
ipt_REJECT              1680  2 
xt_TCPMSS               1856  1 
ipt_LOG                 4176  0 
xt_comment               464  0 
xt_multiport            1792  5 
xt_mac                   576  0 
xt_limit                1008  1 
iptable_mangle           992  1 
iptable_filter           768  1 
ip_tables               8544  4 iptable_nat,iptable_raw,iptable_mangle,iptable_filter
xt_tcpudp               1760 13 
x_tables                9312 35 xt_HL,xt_hl,xt_MARK,ipt_ECN,xt_CLASSIFY,xt_time,xt_tcpmss,xt_statistic,xt_mark,xt_length,ipt_ecn,xt_DSCP,xt_dscp,xt_IMQ,xt_string,xt_layer7,ipt_MASQUERADE,iptable_nat,xt_CONNMARK,xt_recent,xt_helper,xt_conntrack,xt_connmark,xt_connbytes,xt_NOTRACK,xt_state,ipt_REJECT,xt_TCPMSS,ipt_LOG,xt_comment,xt_multiport,xt_mac,xt_limit,ip_tables,xt_tcpudp
ppp_async               6400  0 
ppp_generic            18608  3 pppoe,pppox,ppp_async
slhc                    4160  1 ppp_generic
ath9k                  79280  0 
ath9k_common            4640  1 ath9k
ath9k_hw              269712  2 ath9k,ath9k_common
ath                     6880  2 ath9k,ath9k_hw
mac80211              190128  2 ath9k,ath9k_common
ts_fsm                  2608  0 
ts_bm                   1456  0 
ts_kmp                  1344  0 
nls_base                4800  0 
crc_ccitt                976  1 ppp_async
cfg80211              110912  4 ath9k,ath9k_common,ath,mac80211
compat_firmware_class     4672  0 
compat                   432  0 
arc4                     816  2 
aes_generic            30256  0 
ecb                     1328  2 
button_hotplug          2624  0 
gpio_buttons            1968  0 
input_polldev           1360  1 gpio_buttons
input_core             16816  4 button_hotplug,gpio_buttons,input_polldev</code></pre></div><div class="quotebox"><blockquote><p>I also assume you have changed these 3 lines to match your main wireless router since the WiFi from the apartment complex requires no encryption, but a login through a web browser.<br /></p><div class="codebox"><pre><code>        option ssid     AccessPointSSID
        option encryption psk
        option key      &#039;example password&#039;</code></pre></div></blockquote></div><p>I used the default values as follows:<br /></p><div class="codebox"><pre><code>        option ssid     OpenWRT
        option encryption none</code></pre></div><div class="quotebox"><blockquote><p>You may want to erase /etc/config/wireless and run wifi detect after you install kmod-ath9k,<br />to make sure that the system can see your wireless interface.</p></blockquote></div><p>I executed <em>wifi detect</em> and it prints out the following on the shell that looks like the content of a <em>/etc/config/wireless</em> default file which I deleted earlier before executing the <em>wifi detect</em> :<br /></p><div class="codebox"><pre><code>config wifi-device  radio0
        option type     mac80211
        option channel  5
        option macaddr  00:26:5a:f4:6c:14
        option hwmode   11ng
        option htmode   HT20
        list ht_capab   SHORT-GI-40
        list ht_capab   TX-STBC
        list ht_capab   RX-STBC1
        list ht_capab   DSSS_CCK-40
        # REMOVE THIS LINE TO ENABLE WIFI:
        option disabled 1

config wifi-iface
        option device   radio0
        option network  lan
        option mode     ap
        option ssid     OpenWrt
        option encryption none</code></pre></div><div class="quotebox"><blockquote><p>You also may need to reboot after you install kmod-ath9k, before all the networking<br />scripts will work perfectly.</p></blockquote></div><p>Done that and still the same problem: no WiFi signals. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>											<p class="post-edited">(Last edited by <strong>mazilo</strong> on 28 May 2010, 17:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110069">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						28 May 2010, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>How are you measuring WiFi signals?</p><p>What are the wireless settings of the router you are trying to connect to?</p><p>The ssid, encryption parameters, and channel need to match the wireless router you wish to connect to.<br />I&#039;m assuming the other router is doing 802.11g; is it?</p><p>Note that after you did wifi detect, it switched the mode back to &quot;ap&quot; (Access Point)<br />and disabled wireless by default.</p><p>If you want to be an access point, you need to install hostapd or hostapd-mini.<br />If you want to be a station (client to a wireless AP), you&#039;ll need wpa-supplicant.</p><p>I&#039;m going to refer you to the documentation because it&#039;s not clear to me what&#039;s wrong.</p><p><a href="http://kamikaze.openwrt.org/docs/openwrt.html#x1-120001.2.2">http://kamikaze.openwrt.org/docs/openwr … 120001.2.2</a><br /><a href="http://wiki.openwrt.org/doc/uci/wireless">http://wiki.openwrt.org/doc/uci/wireless</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110077">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						28 May 2010, 17:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>monte wrote:</cite><blockquote><p>How are you measuring WiFi signals?</p></blockquote></div><p>First, I booted the device using a default (AP mode) configuration from OpenWRT SVN firmware. Then, I configured my Linksys WRT54GS (flashed with a DD-WRT firmware) as a client. The WRT54GS could not find the signals from my FR-54RTR even they both were put next to each other. Secondly, I reversed the configurations, i.e. FR-54RTR as client and WRT54GS as AP, and the FR-54RTR could not find the signals from WRT54GS. Also, a WiFi scan on my FR-54RTR through its GUI shows no WiFi spots. Finally, I flashed my FR-54RTR back to the DLink firmware and it works, i.e. my WRT54GS device sees the WiFi signals from my FR-54RTR device, even they are put in different rooms that are 50&#039; apart. So, this proves the WiFi modules on both devices are not malfunction.</p><div class="quotebox"><blockquote><p>What are the wireless settings of the router you are trying to connect to?</p></blockquote></div><p>The device is a Linksys WRT54GS flashed with a DD-WRT firmware and is configured as an AP mode with no encryption.</p><div class="quotebox"><blockquote><p>The ssid, encryption parameters, and channel need to match the wireless router you wish to connect to.</p></blockquote></div><p>Yes and they all matched. For my FR-54RTR unit, I configured it with <strong>auto</strong> for channel. Here is the /etc/config/wireless file for my FR-54RTR:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# cat wireless
config wifi-device  radio0
        option  type            mac80211
        option  channel         auto
        option  macaddr         00:26:5a:f4:6c:14
        option  hwmode          11ng
        #option htmode          HT20
        #list   ht_capab        SHORT-GI-40
        list    ht_capab        TX-STBC
        list    ht_capab        RX-STBC1
        #list   ht_capab        DSSS_CCK-40
        option  disabled        0

config wifi-iface
        option  device          radio0
        option  network         wan
        option  mode            sta
        option  ssid            OpenWrt
        option  encryption      none</code></pre></div><p>And, here is the /etc/config/network file:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# cat network

config &#039;interface&#039; &#039;loopback&#039;
        option  &#039;ifname&#039;        &#039;lo&#039;
        option  &#039;proto&#039;         &#039;static&#039;
        option  &#039;ipaddr&#039;        &#039;127.0.0.1&#039;
        option  &#039;netmask&#039;       &#039;255.0.0.0&#039;

config &#039;interface&#039; &#039;eth&#039;
        option  &#039;ifname&#039;        &#039;eth0&#039;
        option  &#039;proto&#039;         &#039;none&#039;

config &#039;interface&#039; &#039;lan&#039;
        option  &#039;ifname&#039;        &#039;lan1 lan2 lan3 lan4&#039;
        option  &#039;type&#039;          &#039;bridge&#039;
        option  &#039;proto&#039;         &#039;static&#039;
        option  &#039;netmask&#039;       &#039;255.255.255.0&#039;
        option  &#039;ipaddr&#039;        &#039;192.168.1.1&#039;

config &#039;interface&#039; &#039;wan&#039;
        option  &#039;ifname&#039;        &#039;wlan0&#039;
        option  &#039;macaddr&#039;       &#039;00265af46c14&#039;
        option  &#039;proto&#039;         &#039;dhcp&#039;
        #option &#039;mtu&#039;           &#039;1500&#039;
        #option &#039;ipaddr&#039;        &#039;192.168.1.1&#039;
        #option &#039;netmask&#039;       &#039;255.255.255.0&#039;
        #option &#039;gateway&#039;       &#039;192.168.1.1&#039;
        #option &#039;dns&#039;           &#039;8.8.4.4&#039;

root@OpenWrt:/etc/config#</code></pre></div><div class="quotebox"><blockquote><p>I&#039;m assuming the other router is doing 802.11g; is it?</p></blockquote></div><p>Yes. I even tried 802.11b mode to no avail.</p><div class="quotebox"><blockquote><p>Note that after you did wifi detect, it switched the mode back to &quot;ap&quot; (Access Point)<br />and disabled wireless by default.</p></blockquote></div><p>yes.</p><div class="quotebox"><blockquote><p>If you want to be an access point, you need to install hostapd or hostapd-mini.<br />If you want to be a station (client to a wireless AP), you&#039;ll need wpa-supplicant.</p></blockquote></div><p>I believe hostapd and wpa-supplicant packages are compiled into my self-built OpenWRT SVN firmware as shown below:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# opkg list
base-files - 44-r21517
busybox - 1.16.1-7
crda - 1.1.0-2
ddns-scripts - 1.0.0-8
dnsmasq - 2.52-5
dropbear - 0.52-5
firewall - 2-4
hostapd - 20100418-1
hotplug2 - 1.0-beta-2
iptables - 1.4.7-1
iptables-mod-conntrack - 1.4.7-1
iptables-mod-conntrack-extra - 1.4.7-1
iptables-mod-filter - 1.4.7-1
iptables-mod-imq - 1.4.7-1
iptables-mod-ipopt - 1.4.7-1
iptables-mod-nat - 1.4.7-1
iw - 0.9.19-1
kernel - 2.6.32.14-1
kmod-ath - 2.6.32.14+2010-05-24-1
kmod-ath9k - 2.6.32.14+2010-05-24-1
kmod-button-hotplug - 2.6.32.14-2
kmod-cfg80211 - 2.6.32.14+2010-05-24-1
kmod-crc-ccitt - 2.6.32.14-1
kmod-crypto-aes - 2.6.32.14-1
kmod-crypto-arc4 - 2.6.32.14-1
kmod-crypto-core - 2.6.32.14-1
kmod-input-core - 2.6.32.14-1
kmod-input-gpio-buttons - 2.6.32.14-1
kmod-input-polldev - 2.6.32.14-1
kmod-ipt-conntrack - 2.6.32.14-1
kmod-ipt-conntrack-extra - 2.6.32.14-1
kmod-ipt-core - 2.6.32.14-1
kmod-ipt-filter - 2.6.32.14-1
kmod-ipt-imq - 2.6.32.14-1
kmod-ipt-ipopt - 2.6.32.14-1
kmod-ipt-nat - 2.6.32.14-1
kmod-ipt-nathelper - 2.6.32.14-1
kmod-loop-aes - 2.6.32.14+3.2h-1
kmod-mac80211 - 2.6.32.14+2010-05-24-1
kmod-nls-base - 2.6.32.14-1
kmod-ppp - 2.6.32.14-1
kmod-pppoe - 2.6.32.14-1
kmod-sched - 2.6.32.14-1
kmod-textsearch - 2.6.32.14-1
libc - 0.9.30.1-44
libgcc - 4.3.3+cs-44
libiptc - 1.4.7-1
liblua - 5.1.4-6
libnl-tiny - 0.1-1
librt - 0.9.30.1-44
libuci - 12012009.5-2
libuci-lua - 12012009.5-2
libxtables - 1.4.7-1
lua - 5.1.4-6
luci-admin-core - 0.9+svn6183-1
luci-admin-full - 0.9+svn6183-1
luci-cbi - 0.9+svn6183-1
luci-core - 0.9+svn6183-1
luci-fastindex - 0.9+svn6183-1
luci-http - 0.9+svn6183-1
luci-i18n-english - 0.9+svn6183-1
luci-ipkg - 0.9+svn6183-1
luci-lmo - 0.9+svn6183-1
luci-nixio - 0.9+svn6183-1
luci-sgi-cgi - 0.9+svn6183-1
luci-sys - 0.9+svn6183-1
luci-theme-base - 0.9+svn6183-1
luci-theme-openwrt - 0.9+svn6183-1
luci-uci - 0.9+svn6183-1
luci-uvl - 0.9+svn6183-1
luci-web - 0.9+svn6183-1
miniupnpd - 1.4-1
mtd - 12
ntpclient - 2007_365-4
opkg - 528-1
ppp - 2.4.4-7
ppp-mod-pppoe - 2.4.4-7
qos-scripts - 1.2.1-2
swconfig - 6
tc - 2.6.31-2
uci - 12012009.5-2
ucitrigger - 12012009.5-2
udev - 142-1
udevtrigger - 106-1
uhttpd - 10
vsc7385-ucode-ap83 - 1
vsc7385-ucode-pb44 - 1
vsc7395-ucode-ap83 - 1
vsc7395-ucode-pb44 - 1
wireless-tools - 29-4
wpa-supplicant - 20100418-1
wpad-mini - 20100418-1</code></pre></div><p>Below is the output from <em>lsmod</em> that shows the ath9k module if that matters.<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# lsmod
Module                  Size  Used by    Not tainted
nf_nat_tftp              432  0 
nf_conntrack_tftp       2400  1 nf_nat_tftp
nf_nat_irc               816  0 
nf_conntrack_irc        2512  1 nf_nat_irc
nf_nat_ftp              1328  0 
nf_conntrack_ftp        4624  1 nf_nat_ftp
xt_HL                   1280  0 
xt_hl                    896  0 
xt_MARK                  496 15 
ipt_ECN                 1312  0 
xt_CLASSIFY              496  0 
xt_time                 1552  0 
xt_tcpmss                992  0 
xt_statistic             816  0 
xt_mark                  512 15 
xt_length                672  5 
ipt_ecn                  976  0 
xt_DSCP                 1392  0 
xt_dscp                 1008  0 
xt_IMQ                   704  1 
imq                     2544  0 
xt_string                880  0 
xt_layer7              10368  2 
ipt_MASQUERADE           992  1 
iptable_nat             2768  1 
nf_nat                 10064  5 nf_nat_tftp,nf_nat_irc,nf_nat_ftp,ipt_MASQUERADE,iptable_nat
xt_CONNMARK              768  2 
xt_recent               5520  0 
xt_helper                816  0 
xt_conntrack            2016  0 
xt_connmark              656  0 
xt_connbytes            1232  0 
xt_NOTRACK               544  0 
iptable_raw              656  1 
xt_state                 768  3 
nf_conntrack_ipv4       7376 10 iptable_nat,nf_nat
nf_defrag_ipv4           624  1 nf_conntrack_ipv4
nf_conntrack           37488 18 nf_nat_tftp,nf_conntrack_tftp,nf_nat_irc,nf_conntrack_irc,nf_nat_ftp,nf_conntrack_ftp,xt_layer7,ipt_MASQUERADE,iptable_nat,nf_nat,xt_CONNMARK,xt_helper,xt_conntrack,xt_connmark,xt_connbytes,xt_NOTRACK,xt_state,nf_conntrack_ipv4
pppoe                   7984  0 
pppox                   1216  1 pppoe
ipt_REJECT              1680  2 
xt_TCPMSS               1856  1 
ipt_LOG                 4176  0 
xt_comment               464  0 
xt_multiport            1792  5 
xt_mac                   576  0 
xt_limit                1008  1 
iptable_mangle           992  1 
iptable_filter           768  1 
ip_tables               8544  4 iptable_nat,iptable_raw,iptable_mangle,iptable_filter
xt_tcpudp               1760 13 
x_tables                9312 35 xt_HL,xt_hl,xt_MARK,ipt_ECN,xt_CLASSIFY,xt_time,xt_tcpmss,xt_statistic,xt_mark,xt_length,ipt_ecn,xt_DSCP,xt_dscp,xt_IMQ,xt_string,xt_layer7,ipt_MASQUERADE,iptable_nat,xt_CONNMARK,xt_recent,xt_helper,xt_conntrack,xt_connmark,xt_connbytes,xt_NOTRACK,xt_state,ipt_REJECT,xt_TCPMSS,ipt_LOG,xt_comment,xt_multiport,xt_mac,xt_limit,ip_tables,xt_tcpudp
ppp_async               6400  0 
ppp_generic            18608  3 pppoe,pppox,ppp_async
slhc                    4160  1 ppp_generic
ath9k                  77344  0 
ath9k_common            3312  1 ath9k
ath9k_hw              270512  2 ath9k,ath9k_common
ath                     6880  2 ath9k,ath9k_hw
mac80211              174432  1 ath9k
ts_fsm                  2608  0 
ts_bm                   1456  0 
ts_kmp                  1344  0 
nls_base                4800  0 
crc_ccitt                976  1 ppp_async
cfg80211              110736  3 ath9k,ath,mac80211
compat_firmware_class     4672  0 
compat                   736  0 
arc4                     816  2 
aes_generic            30256  0 
ecb                     1328  2 
button_hotplug          2624  0 
gpio_buttons            1968  0 
input_polldev           1360  1 gpio_buttons
input_core             16816  4 button_hotplug,gpio_buttons,input_polldev</code></pre></div><p>At this point, I have run out of ideas to make my FR-54RTR unit as a WiFi client and am hoping anyone can help.</p><div class="quotebox"><blockquote><p>I&#039;m going to refer you to the documentation because it&#039;s not clear to me what&#039;s wrong.</p><p><a href="http://kamikaze.openwrt.org/docs/openwrt.html#x1-120001.2.2">http://kamikaze.openwrt.org/docs/openwr … 120001.2.2</a><br /><a href="http://wiki.openwrt.org/doc/uci/wireless">http://wiki.openwrt.org/doc/uci/wireless</a></p></blockquote></div><p>Many thanks and I will check them out later on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110206">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						30 May 2010, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Here is some updates:</p><p>I flashed back the BackFire to my FR-54RTR and did an <em>opkg update</em> that automatically added a lot of kernel modules as well as the necessary packages. Now, it is able to detect WiFi spots in my neighborhood even after a reboot. I pressed the Scan button (on the WiFi -&gt; Overview GUI page) and sometimes it returned some WiFi signals while other times no WiFi signals found. Ironically, some WiFi sources are open with no encryption and are using <strong>Default</strong> SSID. So, I manually configured /etc/config/wireless file with a <strong>Default</strong> SSID, but my FR-54RTR seemed to be unable to connect to the WiFi sources with the <strong>Default</strong> SSID and returned with several attempted messages until finally with a <em>time out</em> message.</p><p>Now that I know my FR-54RTR unit is able to pick up WiFi signals, I did an <em>opkg list-installed</em> to show what packages were installed on my FR-54RTR device. Using this information, I reconfigured/recompiled my local OpenWRT SVN trunk using <em>make menuconfig</em> to select the needed packages as well as using <em>make kernel_menuconfig</em> to select kernel drivers as built-in modules and flash the firmware to my FR-54RTR device. After the device finished booting up, I was able to see the same problem (several attemps failed to the WiFi sources with the <strong>Default</strong> SSID and a <em>time out</em> message). OTOH, when I pressed the Scan button (on the WiFi -&gt; Radio0 -&gt; Overview GUI page), it returned with no WiFi signals. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117704">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">AWD_Guy</div>
					<div class="post-datetime">
						22 Sep 2010, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Anybody ever get one of these up and stable?</p><p>If so, what build(s)? GUI working?</p><p>I tried a while back and it would either brick or the one time i got it working it would crash quite regularly.</p><p>I am back on the D-Link Firmware for now.</p><p>Would actually like to go back to the Fry&#039;s firmware to see what it looks like, but can&#039;t find the Bin for it, just the source.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117967">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">monte</div>
					<div class="post-datetime">
						27 Sep 2010, 17:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AWD_Guy wrote:</cite><blockquote><p>Anybody ever get one of these up and stable?</p></blockquote></div><p>I haven&#039;t been playing with OpenWrt for a while, but<br />if you set mtu to 1400 on the wan it&#039;s fairly stable.</p><div class="quotebox"><cite>AWD_Guy wrote:</cite><blockquote><p>I am back on the D-Link Firmware for now.</p><p>Would actually like to go back to the Fry&#039;s firmware to see what it looks like, but can&#039;t find the Bin for it, just the source.</p></blockquote></div><p>The D-Link firmware is more full featured than the Fry&#039;s one.<br />The D-Link firmware includes IPv6 support.&nbsp; I don&#039;t remember what else it had.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p117973">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">AWD_Guy</div>
					<div class="post-datetime">
						27 Sep 2010, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>Thanks.</p><p>Actually tried the backfire RC-3 code over the weekend. Appeared much more stable. Will try MTU if needed.</p><p>I did appear to have a problem passing broadcast traffic too/from wireless &lt;&gt; LAN port daisy chained to my primary router.</p><p>Basically, the 54RTR was just acting as an AP. No DHCP, etc. Hosts have no problem talking routed to Internet off BEFSR81, but can&#039;t pass broadcast traffic and thus can&#039;t find each other over netbios &quot;browser&quot; name resolution. Need to do more testing, but the same configuration works fine on the D-link firmware. Do I have to define an uplink or trunk port in OpenWRT or something to pass broadcasts or support multiple MAC addresses coming in on a LAN port?</p><p>Host &lt;wire&gt; BEFSR81 &lt;wire&gt; FR-54RTR &lt;wireless&gt; Host</p><p>The other potential use I have for these is as range extenders like the WRE54G type to routers not supporting WDS. Anybody got OpenWRT working as a extender/repeater to a non WDS router like the 2Wire ones?</p><p>All the guides/posts I found are for OpenWRT-OpenWRT WDS configs.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=23626&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>