<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> USB reset issues again (ZTE MF831+Genesys Hub+TL-WR842ND)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346011">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						7 Dec 2016, 19:29					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I just wanted to ask, if anyone has some USB hardware related advise for my problem.<br />I am using a TP-Link TL-WR842ND (or a TL-WR1043ND) router with 15.05.1.<br />There is an externally power USB Hub (usually a 05e3:0608 Genesys Logic, Inc. USB-2.0 4-Port HUB or 7-port HUB) connected to it. A ZTE MF831 USB LTE Stick in rndis/cdc_ether-mode will be the WWAN device connected there.</p><p>If I&#039;d don&#039;t use the hub, I seem to have sporadic minor USB resets - the ZTE device goes up an down erratically.<br />On the hub it works well, but sometimes the MF831 looses its 4G-Connection and therefore needs a reset of some kind, which works only well, when not using a hub.</p><p>Sometimes the ZTE Stick will fall back to its &quot;real&quot; download mode (19d2:0076). In that case I need to disconnect it.</p><p>While it is plugged directly into the router, I can power down USB using echo 0 | tee /sys/class/gpio/gpio6/value; sleep 3; echo 1 | tee /sys/class/gpio/gpio6/value to do that.</p><p>That won&#039;t work with an externally powered hub for some reason. (The hub does not seem to reset its ports on host power loss.).</p><p>I&#039;ve tried usbreset from 15.05, but that will only result in the hub or device not being found any longer until a reboot is performed (incompatible with 15.05.1?)<br />Unbind/rebinding or using /sys/bus/usb ... authorized does not effectively reset the usb device, but only reloads drivers, when the modem is plugged into the hub.&nbsp; </p><p>Is there any (simple) way to achieve a full reset/shutdown of the hub/hub ports in software or do I have to modify an usb cable with either diodes or usb cable an hub power cable with transitors? Or are there different types of USB Hubs, that will do a full shutdown/reset on host power loss?</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>epek</strong> on 7 Dec 2016, 19:33)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>