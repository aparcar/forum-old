<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> JFFS2 image not working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 9 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p207015">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fr4nk</div>
					<div class="post-datetime">
						12 Jul 2013, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve compile a recent version of Barrier Breaker but JFFS2 image fails at boot.</p><p>Router is wr741nd v4, squashfs is working but i want to use only jffs2.</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.8.13 (rambo@acer) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2012.12 r37206) ) #26 Fri Jul 12 04:43:53 CEST 2013
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR9330 rev 1
[    0.000000] Clocks: CPU:475.000MHz, DDR:475.000MHz, AHB:237.500MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=TL-WR741ND-v4 console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] __ex_table already sorted, skipping sort
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 61728k/65536k available (2023k kernel code, 3808k reserved, 348k data, 248k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 314.57 BogoMIPS (lpj=1572864)
[    0.060000] pid_max: default: 32768 minimum: 301
[    0.060000] Mount-cache hash table entries: 512
[    0.070000] NET: Registered protocol family 16
[    0.070000] MIPS: machine is TP-LINK TL-WR741ND v4
[    0.520000] bio: create slab &lt;bio-0&gt; at 0
[    0.530000] Switching to clocksource MIPS
[    0.530000] NET: Registered protocol family 2
[    0.540000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.540000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.540000] TCP: Hash tables configured (established 512 bind 512)
[    0.550000] TCP: reno registered
[    0.550000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] NET: Registered protocol family 1
[    0.580000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.590000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.600000] msgmni has been set to 120
[    0.600000] io scheduler noop registered
[    0.600000] io scheduler deadline registered (default)
[    0.610000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.620000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART
[    0.620000] console [ttyATH0] enabled, bootconsole disabled
[    0.620000] console [ttyATH0] enabled, bootconsole disabled
[    0.630000] ath79-spi ath79-spi: master is unqueued, this is deprecated
[    0.640000] m25p80 spi0.0: found w25q128, expected m25p80
[    0.650000] m25p80 spi0.0: w25q128 (16384 Kbytes)
[    0.650000] 5 tp-link partitions found on MTD device spi0.0
[    0.660000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.660000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.670000] 0x000000020000-0x000000120000 : &quot;kernel&quot;
[    0.670000] 0x000000120000-0x000000ff0000 : &quot;rootfs&quot;
[    0.680000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.680000] split_squashfs: no squashfs found in &quot;spi0.0&quot;
[    0.690000] 0x000000ff0000-0x000001000000 : &quot;art&quot;
[    0.690000] 0x000000020000-0x000000ff0000 : &quot;firmware&quot;
[    0.710000] libphy: ag71xx_mdio: probed
[    0.720000] eth0: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
[    1.270000] eth0: Found an AR7240/AR9330 built-in switch
[    2.300000] eth1: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    2.850000] ag71xx ag71xx.0 eth1: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
[    2.860000] TCP: cubic registered
[    2.860000] NET: Registered protocol family 17
[    2.870000] 8021q: 802.1Q VLAN Support v1.8
[    2.870000] jffs2: Magic bitmask is backwards at offset 0x00000000. Wrong endian filesystem?
[    2.880000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000004: 0x0c00 instead
[    2.890000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000008: 0xb1b0 instead
[    2.900000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000000c: 0x8519 instead
[    2.910000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000010: 0x9104 instead
[    2.920000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000014: 0x6a1a instead
[    2.930000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000018: 0x1200 instead
.........
[    7.920000] jffs2: jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00250028: 0x18aa instead
[    7.930000] jffs2: Further such events for this erase block will not be printed
[    7.960000] jffs2_scan_eraseblock(): End of filesystem marker found at 0x260000
[    7.970000] jffs2: Cowardly refusing to erase blocks on filesystem with no valid JFFS2 nodes
[    7.980000] jffs2: empty_blocks 199, bad_blocks 0, c-&gt;nr_blocks 237
[    7.980000] VFS: Cannot open root device &quot;(null)&quot; or unknown-block(31,2): error -5
[    7.990000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    8.000000] 1f00             128 mtdblock0  (driver?)
[    8.000000] 1f01            1024 mtdblock1  (driver?)
[    8.010000] 1f02           15168 mtdblock2  (driver?)
[    8.010000] 1f03              64 mtdblock3  (driver?)
[    8.020000] 1f04           16192 mtdblock4  (driver?)
[    8.020000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)</code></pre></div>											<p class="post-edited">(Last edited by <strong>fr4nk</strong> on 12 Jul 2013, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207036">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						13 Jul 2013, 06:13					</div>
				</div>
				<div class="post-content content">
					<p>Eraseblock size unsupported/unaligned.<br /><a href="https://dev.openwrt.org/ticket/13659">https://dev.openwrt.org/ticket/13659</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>