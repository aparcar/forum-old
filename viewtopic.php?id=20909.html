<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> problems with the WAN side of life</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p90835">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">udotirol</div>
					<div class="post-datetime">
						4 Jul 2009, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve been trying to solve this riddle for too long now and so I decided to drop a help request here:</p><p>After running my Asus WL-500GP with FreeWRT for many months I decided to give OpenWRT another try (mostly because of the much more up2date packages in OpenWRT).</p><p>However, I don&#039;t seem to be able to access the WAN port from the lan side or even from the router itself.</p><p>If I ssh into the router, I see that it has received an IP address and both routing and resolving information is correct. My ISP uses DHCP, so the setup it quite trivial.</p><p>As things did not work out, I decided to completely wipe all changes I have tried so far and to reflush the router with a fresh image, changing only the address assignment on the WAN side to use DHCP. I tried both 8.09.1 from the brcm-2.4 and the brcm47xx series, but no luck.</p><p>Connecting the Asus to our internal router, I see this when I ssh into the Asus:</p><div class="codebox"><pre><code>% ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:1B:FC:6B:7E:35  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:79 errors:0 dropped:0 overruns:0 frame:0
          TX packets:48 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:12056 (11.7 KiB)  TX bytes:8591 (8.3 KiB)

eth0      Link encap:Ethernet  HWaddr 00:1B:FC:6B:7E:35  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1081 errors:0 dropped:0 overruns:0 frame:0
          TX packets:59 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:94346 (92.1 KiB)  TX bytes:11135 (10.8 KiB)
          Interrupt:4 

eth0.0    Link encap:Ethernet  HWaddr 00:1B:FC:6B:7E:35  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:97 errors:0 dropped:0 overruns:0 frame:0
          TX packets:48 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:18416 (17.9 KiB)  TX bytes:8783 (8.5 KiB)

eth0.1    Link encap:Ethernet  HWaddr 00:1B:FC:6B:7E:35  
          inet addr:172.41.3.19  Bcast:172.41.3.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:995 errors:0 dropped:0 overruns:0 frame:0
          TX packets:12 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:57106 (55.7 KiB)  TX bytes:2158 (2.1 KiB)
[...]
% route -n
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan
172.41.3.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0.1
0.0.0.0         172.41.3.1    0.0.0.0         UG    0      0        0 eth0.1
%
% ping 172.41.3.1
... nothing happens, so Ctrl-C
%
% cat /proc/sys/net/ipv4/ip_forward
1</code></pre></div><p>I also tried to completely disable the firewall or allow any kind of forwarding, but no luck either.</p><p>So either I am missing something extremely trivial or something is broken.</p><p>Any help appreciated <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90836">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Dogge</div>
					<div class="post-datetime">
						4 Jul 2009, 13:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>udotirol wrote:</cite><blockquote><div class="codebox"><pre><code>% ifconfig</code></pre></div></blockquote></div><p>But the percent sign isn&#039;t the OpenWrt Kamikaze prompt. Are You shure You&#039;re running OpenWrt Kamikaze at lease version 8.09.1?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90837">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">udotirol</div>
					<div class="post-datetime">
						4 Jul 2009, 13:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Dogge wrote:</cite><blockquote><div class="quotebox"><cite>udotirol wrote:</cite><blockquote><div class="codebox"><pre><code>% ifconfig</code></pre></div></blockquote></div><p>But the percent sign isn&#039;t the OpenWrt Kamikaze prompt. Are You shure You&#039;re running OpenWrt Kamikaze at lease version 8.09.1?</p></blockquote></div><p>yes, sure, being a tcsh user for too many years now, it is just my usual way of marking shell commands. By default busybox wont use the percent sign <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90838">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						4 Jul 2009, 14:48					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s normal that you can&#039;t reach portforwarding on the WAN-Side from inside the LAN (behind the router). the destination of the firewallrules is the WAN-interface not the WAN-IP. if you try to reach the WAN-IP from inside the LAN the package enters the router through the LAN-interface, so the WAN-Firewall-Rules don&#039;t apply. This config has the advantage, that you don&#039;t need to reload the firewall-rules if the WAN-IP changes.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>