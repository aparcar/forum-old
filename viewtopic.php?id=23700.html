<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> b43, STA mode. scanning problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p103414">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						21 Feb 2010, 03:47					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running the Feb 16th snapshot on a Linksys WRTSL54GS. From reading this forum, the b43 support should be fairly stable.&nbsp; dmesg sees the adapter.&nbsp; When I try to scan for available APs I get</p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# iwlist wlan0 scan 
wlan0     Interface doesn&#039;t support scanning : Device or resource busy

root@OpenWrt:/etc/config#</code></pre></div><p>Is scanning broken? (I know it&#039;s a work in progress, and I&#039;m not complaining.&nbsp; I&#039;m asking for information to see if I need to go back to the 2.4 kernel.)</p><div class="codebox"><pre><code>b44.c:v2.0
eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:14:bf:e5:2c:50
b44: eth1: PHY Reset would not complete.
eth1: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:90:4c:60:00:2b
BCM47xx Watchdog Timer enabled (30 seconds, nowayout)
TCP westwood registered
NET: Registered protocol family 17
Bridge firewalling registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
diag: Detected &#039;Linksys WRTSL54GS&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found a 5325! It&#039;s a 5350.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth0: powering down PHY
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
b44: eth1: powering down PHY
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
Generic kernel compatibility enabled based on linux-next next-20100113
cfg80211: Calling CRDA to update world regulatory domain
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
usbcore: Unknown symbol utf16s_to_utf8s
b43-phy0: Broadcom 4318 WLAN found (core revision 9)
phy0: Selected rate control algorithm &#039;minstrel&#039;
Registered led device: b43-phy0::tx
Registered led device: b43-phy0::rx
Registered led device: b43-phy0::radio
Broadcom 43xx driver loaded [ Features: PNL, Firmware-ID: FW13 ]
Broadcom 43xx-legacy driver loaded [ Features: PLID, Firmware-ID: FW10 ]
b43 ssb1:0: firmware: requesting b43/ucode5.fw
b43 ssb1:0: firmware: requesting b43/pcm5.fw
b43 ssb1:0: firmware: requesting b43/b0g0initvals5.fw
b43 ssb1:0: firmware: requesting b43/b0g0bsinitvals5.fw
b43-phy0: Loading firmware version 478.104 (2008-07-01 00:50:23)
b43-phy0: Loading firmware version 478.104 (2008-07-01 00:50:23)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# iwconfig
lo        no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

wlan0     IEEE 802.11bg  Mode:Managed  Access Point: Not-Associated   
          Tx-Power=20 dBm   
          RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/etc/config# cat network
#### VLAN configuration 
config switch eth0
    option enable   1

config switch_vlan eth0_0
    option device   &quot;eth0&quot;
    option vlan     0
    option ports    &quot;0 1 2 3 4 5u&quot;

#### Loopback configuration
config interface loopback
    option ifname    &quot;lo&quot;
    option proto    static
    option ipaddr    127.0.0.1
    option netmask    255.0.0.0


#### LAN configuration
config interface lan
#    option type     bridge
    option ifname    &quot;eth0&quot;
    option macaddr    &quot;00:14:BF:E5:2C:50&quot;
    option proto    static
    option ipaddr    192.168.1.1
    option netmask    255.255.255.0


#### WAN configuration
config interface    wan
    option ifname    &quot;eth1&quot;
    option macaddr    &quot;00:14:bf:e5:2c:51&quot;
    option proto    dhcp
    
#### WiFi configuration
config interface wifi
#    option ifname   &quot;wlan0&quot;
    option proto    dhcp
    option defaultroute 1</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/etc/config# cat  wireless
config wifi-device  radio0
    option type     mac80211
    option channel  5
    option macaddr    00:10:18:90:20:db
#    option hwmode    11g

    # REMOVE THIS LINE TO ENABLE WIFI:
#    option disabled 1

config wifi-iface
    option device   radio0
    option network  wifi
    option mode     sta
    option ssid     xxx
    option encryption psk2
    option key    xxx</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103469">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						22 Feb 2010, 03:47					</div>
				</div>
				<div class="post-content content">
					<p>OK, I got it figured out. In order for it to scan, wifi must be up, but it must not be running wpa_supplicant - no WPA encryption.&nbsp; Then scanning works.</p><p>Which brings me to my next problem:&nbsp; I can&#039;t get WPA2 to work. Here&#039;s my home AP, which worked fine with 2.4 + evil binary blob.</p><div class="codebox"><pre><code>          Cell 04 - Address: xx:xx:xx
                    Channel:5
                    Frequency:2.432 GHz (Channel 5)
                    Quality=37/70  Signal level=-73 dBm  
                    Encryption key:on
                    ESSID:&quot;EluOnHea2&quot;
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s
                    Bit Rates:24 Mb/s; 36 Mb/s; 48 Mb/s; 54 Mb/s
                    Mode:Master
                    Extra:tsf=00000029b6f006f3
                    Extra: Last beacon: 776ms ago
                    (Unknown Wireless Token 0x8C05)</code></pre></div><p>Note the Unknown Wireless Token part.&nbsp; I have no idea what that&#039;s about, other than the fact that the scan is not picking up the WPA2 encryption on the AP.&nbsp; Does b43 work?&nbsp; Or should I cut my losses and revert back to 2.4?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104118">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						2 Mar 2010, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi I have the same problem on tp-link tl-wr941nd V4. How did you off wpa_supplicant?</p><div class="quotebox"><blockquote><p>cat /etc/config/wireless </p><p>config &#039;wifi-device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:27:19:1b:cc:62&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;htmode&#039; &#039;HT20&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;&nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;country&#039; &#039;ru&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11bg&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;6&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;none&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;bssid&#039; &#039;&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hidden&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;isolate&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;bgscan&#039; &#039;0&#039;</p></blockquote></div><div class="quotebox"><blockquote><p>cat /etc/config/network<br />config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0<br />config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth0<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.1.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />config interface wan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;eth1<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; dhcp</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>alif</strong> on 2 Mar 2010, 21:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104119">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						2 Mar 2010, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>This is the code I use - look in the /tmp/broken if statement.&nbsp; I use a couple of ports on my home server to test for connectivity; one on 13999 returns the date and the other on port 13998 just returns a known string.</p><div class="codebox"><pre><code>#!/bin/ash

aap_connect () {
        echo connecting $2 $3
        mkdir -p /tmp/cell
        rm -f /tmp/cell/*

        if [ -f /tmp/broken ] ; then
                for p in /var/run/*$3.pid ; do
                        echo killing $p
                        kill -9 `cat $p`
                        rm $p
                        done
                sleep 1
                echo bringing up $3
                ifconfig $3 up
#               wifi up
                sleep 1
        fi

        sleep 3

        iwlist $3 scan &gt; /tmp/scan.out

        awk &#039;BEGIN{IGNORECASE=1}/^ *cell [0-9]/{close(&quot;/tmp/cell/0&quot;f);f++}{print $0 &gt; &quot;/tmp/cell/0&quot;f}&#039; /tmp/scan.out
        echo &quot;trying to connect 2 &quot; $if $dev $ifn

        for ap in /tmp/cell/0[0-9]* ; do
                echo &quot;Trying cell $ap&quot;
                grep -i essid $ap
#                wifi down $2
                echo 0 &gt; /proc/diag/led/power
                if [ -f /tmp/ap ] ; then rm /tmp/ap ; fi
                if [ -f /tmp/script ] ; then rm /tmp/script ; fi
                sleep 3

                cat $ap | /usr/sbin/scan2.awk -v ifd=$if -v dev=$dev -v ifn=$ifn
                if [ -e /tmp/ap ] ; then cat /tmp/ap ; fi

                if [ -f /tmp/script ] ; then
                        . /tmp/script
                        echo restarting $2
                        wifi up $dev
                        sleep 15
                        echo 1 &gt; /proc/diag/led/power
                        if [ &quot;`nc xxxxx.com 13998`&quot; = &quot;EluOnHea&quot; ] ; then
                                date -s `nc xxxxx.com 13999`
                                openvpn --config /etc/openvpn/client.conf
                        fi
                        if [ &quot;`nc selene.xxxxx.lan 13998`&quot; = &quot;EluOnHea&quot; ] ; then
                                date -s `nc selene.xxxxx.lan 13999`
                                openvpn --config /etc/openvpn/local.conf
                        fi
                fi
                done
        conn=0
        }

touch /tmp/broken

while [ 1 ] ; do
        # do this every time in case our user hotplugged an if
        wif=`uci show wireless | grep &quot;mode=sta&quot; | cut -f2 -d.`
        for if in $wif ; do
                echo &quot;Using $if&quot;
                dev=`uci show wireless.$if.device | cut -f2 -d=`
                wifi up $dev
                net=`uci show wireless.$if.network | cut -f2 -d=`
                ifn=`uci -P /var/state show wireless.$if.ifname | cut -f2 -d=`
                echo &quot;trying to connect&quot; $if $dev $ifn
                aap_connect $if $dev $ifn
                sleep 15
                done
        done</code></pre></div><p>It needs a &quot;helper app&quot;, /usr/sbin/scan2.awk:</p><div class="codebox"><pre><code>#!/usr/bin/awk -f

BEGIN{
        IGNORECASE=1
        }

/[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]/ {
        m=match($0,/[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]:[0-9,a-f][0-9,a-f]/);
        if (RSTART &gt; 0) {
                bssid=substr($0,m,RLENGTH);
                next;
                }
        }

/^ *ESSID/ {
        m=match($0,&quot;\&quot;.*\&quot;&quot;);
        if (RSTART &gt; 0) essid=substr($0,m+1,RLENGTH-2);
        next;
        }

/Channel.+[0-9]/ {
        m=match($0,&quot;Channel&quot;);
        if (RSTART &gt; 0) {
                s=substr($0,m);
                n=match(s,/[0-9]+/);
                channel=substr(s,n,RLENGTH)}
        }

/^ *Quality/ {
        m=match($0,/[0-9]+\/[0-9]+/);
        if (RSTART &gt; 0) {
                s=substr($0,m);
                split(s,t,&quot;/&quot;);
                if (t[2] &gt; 0) {quality=t[1]*100/t[2];}
                else quality = 50;
                next;
                }
        }

/^ *Encryption Key/ {
        m=match($0, /on$/);
        if (RSTART &gt; 0) encr=1;
        next;
        }

/^ *IE. *IEEE/ {
        m=match($0, /wpa/);
        if (RSTART &gt; 0) psk2=1;
        next;
        }

/^ *IE. *WPA/ {
        m=match($0, /wpa/);
        if (RSTART &gt; 0) psk=1;
        next;
        }

END {
        if(psk2 == 1) crypt = &quot;psk2&quot;;
        else if (psk == 1) crypt =&quot;psk&quot;;
        else if (encr == 1) crypt = &quot;wep&quot;;
        else crypt = &quot;none&quot;;

        # first we see if we&#039;re in blacklist
        while ( ( getline &lt; &quot;/etc/aap.d/blacklist&quot; ) &gt; 0) {
                if (bssid == $0) exit;
                match($0, (&quot;^\&quot;&quot; essid &quot;\&quot;&quot;) );
                if (RSTART &gt; 0) exit;
                }

        # now we get key if we&#039;re encrypted
        if ( crypt != &quot;none&quot; ) {
                rkey = &quot;&quot;;
                while ( ( getline &lt; &quot;/etc/aap.d/whitelist&quot; ) &gt; 0 ) {
                        if ($1 == bssid) {
                                m=match($0,&quot;\&quot;.*\&quot;&quot;);
                                if (RSTART &gt; 0) rkey=substr($0,m+1,RLENGTH-2);
                                }
                        else {
                                match($0, (&quot;^\&quot;&quot; essid &quot;\&quot;&quot;) );
                                if (RSTART &gt; 0) {
                                        r=RSTART+RLENGTH+1;
                                        s=substr($0, r);
                                        m=match(s,&quot;\&quot;[^ ]*\&quot;&quot;);
                                        if (RSTART &gt; 0) {
                                                rkey=substr(s,m+1,RLENGTH-2);
                                                r=RSTART+RLENGTH+1;
                                                s=substr($0, r);
                                                m=match(s,&quot;\&quot;.*\&quot;&quot;);
                                                if (RSTART &gt; 0) crypt = substr(s,m+3,RLENGTH-4);
                                                }
                                        }
                                }
                        }
                if ( rkey == &quot;&quot; ) {
                        print essid &quot; is encrypted and key not in whitelist&quot;;
                        exit;
                        }
                }

        print quality &quot;\n&quot; bssid &quot;\n&quot; essid &quot;\n&quot; channel &quot;\n&quot; crypt &quot;\n&quot; rkey &gt; &quot;/tmp/ap&quot;;

        print &quot;uci set wireless.&quot; dev &quot;.channel=&quot; channel &gt; &quot;/tmp/script&quot;;
        print &quot;uci set wireless.&quot; ifd &quot;.ssid=&quot; essid &gt;&gt; &quot;/tmp/script&quot;;
        print &quot;uci set wireless.&quot; ifd &quot;.bssid=&quot; bssid &gt;&gt; &quot;/tmp/script&quot;;
        if (crypt == &quot;none&quot;) {
                print &quot;uci set wireless.&quot; ifd &quot;.encryption=none&quot; &gt;&gt; &quot;/tmp/script&quot;;
                }
        else {
                print &quot;uci set wireless.&quot; ifd &quot;.key=&quot; rkey &gt;&gt; &quot;/tmp/script&quot;;
                print &quot;uci set wireless.&quot; ifd &quot;.encryption=&quot; crypt &gt;&gt; &quot;/tmp/script&quot;;
                }
        }</code></pre></div><p>This works with the latest Kamikaze.</p><p>root@OpenWrt:~# uname&nbsp; -a<br />Linux OpenWrt 2.6.32.8 #1 Sun Feb 28 06:22:57 UTC 2010 mips GNU/Linux</p><p>With a working iwlist, aap2 can parse the encryption used from the iwlist output; as this is broken, you have to specify it in /etc/aap.2/whitelist:</p><div class="codebox"><pre><code>root@OpenWrt:/etc/aap.d# cat whitelist
&quot;EluOnHea2&quot; &quot;xxxx&quot; &quot;psk2&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>cptdondo</strong> on 2 Mar 2010, 21:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104178">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						3 Mar 2010, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>I changed the last line in the /lib/wifi/wpa_supplicant.sh on a wpa_supplicant -B -Dwext -i&quot;$ifname&quot; -c /etc/config/wpa_supplicant.conf. And &quot;iwlist wlan0 sacn&quot; work) But wlan light does not light up ...</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 3 Mar 2010, 21:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104184">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						3 Mar 2010, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>You have to bring up wifi, kill udhcpc and wpa_supplicant, then ifconfig wlan0 up .&nbsp; Don&#039;t ask me why; I don&#039;t pretend to understand but it works.</p><p>Once it associates it scans just fine.&nbsp; It&#039;s only when it is unassociated that it fails to scan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107840">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">michaelmet</div>
					<div class="post-datetime">
						25 Apr 2010, 19:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>You have to bring up wifi, kill udhcpc and wpa_supplicant, then ifconfig wlan0 up</p></blockquote></div><p>I confirm the scanning not working on backfire 10.3 kernel 2.6 on wrt54gl and wl-500gp.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p107848">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						25 Apr 2010, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>The b43 driver seems to have a general problem with scanning, when I scan with madwifi at home I get around ~20 networks while b43 always returns just one or two cells. It has been this way like forever, I guess we can only wait for the linux-wireless guys to improve that.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>