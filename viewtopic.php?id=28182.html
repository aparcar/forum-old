<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dynamically extracting downloaded file for patching</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p125742">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						17 Jan 2011, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>I am hoping OpenWRT developers here can help me out.</p><p>In a normal situation, if I find some bugs on a package, it is as simple as using <a href="http://wiki.openwrt.org/doc/devel/patches">quilt to create patches</a>, recompiling the package, and installing on the target to test. In a rare situation, however, one may encounter a package that dynamically downloads additional source packages to add to the package during the compilation process. Of course, creating patches for a package like this is more involving, nevertheless is doable. However, applying the patches has become trickier. For instance, take a look at the OpenWRT <a href="http://pastebin.com/LsptiDF1">Makefile</a> for the net/freeswitch package, where there are some packages, i.e. mod-celt, json-c (for mod-curl), mod-flite, etc., whose source packages are dynamically downloaded when the net/freeswitch package is compiled. This is done through line# 274-276 on the OpenWRT <a href="http://pastebin.com/LsptiDF1">Makefile</a> for the net/freeswitch package during the <em>Build/Prepare</em> stage as shown on line# 358 of the same OpenWRT Makefile. However, this only downloads the flite source package and the process to extract it won&#039;t be done way after the process of applying the patches. As you can see, unless there is a way to instruct the process to extract the downloaded file right after it is downloaded and/or before the process of applying patches is called, this has become a nightmare because the compilation will crash during the process of applying patches (flite package source hasn&#039;t been extracted).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>