<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR7100</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p68813">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						28 May 2008, 01:10					</div>
				</div>
				<div class="post-content content">
					<p>@bitbucket</p><p>Had a quick look thru the datasheet of the KSZ8041NL:</p><p>Reset pin is pin32, low active. Bit 0,1,2&nbsp; of the PHY address are set by pin 13,14,15, while the upper two bits are always 0, i.e. the PHY address is 1,..,7 . Default address is 1, if these three pins are open.<br />Maybe you could check the config with a voltmeter ...</p>											<p class="post-edited">(Last edited by <strong>jal2</strong> on 28 May 2008, 01:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68825">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						28 May 2008, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>MikroTik send me their Atheros Eth GPL driver that though don&#039;t use in their RouterOS. You may get this driver <a href="http://wifi.ozo.com/airo/mirror/ar7100/mikrotik/ag7100.zip">here</a></p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 28 May 2008, 10:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68837">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						28 May 2008, 12:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jal2 wrote:</cite><blockquote><p>a driver usally probes all addresses from 0 to 0x1f by reading register 2 and 3 (PHY ID, ID2) until something != 0xffff is read. If this fails, maybe the clock on MDC isn&#039;t enabled or the PHY isn&#039;t released from reset (some GPIO?).</p></blockquote></div><p>Yes, at 0x0 there is something not like 0xffff, but there are some questions about autonegotiation process and so on. I&#039;m working on this.</p><p>upd: Right value is 0. Link detection works, speed too. </p><p>Wireless (ath5k) works too, but it is not stable at high loads.</p>											<p class="post-edited">(Last edited by <strong>bitbucket</strong> on 28 May 2008, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68838">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						28 May 2008, 12:43					</div>
				</div>
				<div class="post-content content">
					<p>As non developer,<br />I wonder why Mikrotik doesn&#039;t release their patches to the public (and rather send them to single developers)... while such practice won&#039;t be strictly a GPL violation wouldn&#039;t be much better to make a public release?<br />And why do they not release as soon as their RouterOS? Why do developers accept to receive the Mikrotik patches after months?<br />I don&#039;t want to be polemic, I&#039;m just wondering, because searching in the forum I found many complains about this issue that comes back each time openwrt has to support&nbsp; a new Mikrotik card.<br />Can anyone please shed some light of this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68886">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">studioideasw@gmail.com</div>
					<div class="post-datetime">
						29 May 2008, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>Compex find an easyer solution than to write a new driver for atheros ar7130 ethernet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>I have in my hands the new model of compex board, the wp-543 <br />It mounts a atheros ar7130&nbsp; (no cooler over the cpu.. mikrotik has it..) <br />It offers two minipci cards<br />It has nand flash as hard disk like mikrotik boards, from 4 to 32mb depending from the model. <br />There are seven GPIO pin usable ! <br />May be they haven&#039;t the driver for the internal ethernet, but they solved the problem using a realtek rtl8201 external ethernet chip. <br />The result seem good and the price is around the same that mikrotik. <br />At what i can see the board boot.. (for now i didn&#039;t connect it because i&#039;m mounting the serial connector and i haven&#039;t pinout informatios, and no level shifter.. just the time to connect it and i&#039;ll tell you more). <br />Normally compex ship his boards with an openwrt inside. So i think they allready have an openwrt patched for this architecture. </p><p>Note: this are pre-production boards and you can see it because the master is patched manually adding wires to correct erros. <br />The only problem: i thimk they are ever using compex bootloader, that require the system packet as trx.. This is ever boring, also because i don&#039;t know if the trx format will be the same or will be changed for BE mips. </p><p>Sorry.. I have only one so i can&#039;t send it to openwrt group, but if you need to test it we can find a way to give you remote access to the system i use to develop it, then we can work on it together. I&#039; m really interested on having an openwrt booting on ar7130. Now it seem to be the better architecture for unexpensives CPE. </p><br /><p>FOUND THE LEVEL SHIFTER. <br />Something tell me that as i connect the serial cable to the correct computer and not the one that is off i can see a bit more.. <br />(115200, 7n1) </p><p>MyLoader vesion 2.44.0124<br />System memory: 32MB</p><p>Probing for Serial flash ...<br />Found SPI serial flash<br />Flash memory: 4MB</p><p>DIO PHY scan:<br />PHY ID [3] = 0000-8201<br />ink Up, Full Duplex, 100 Mbps</p><p>Load Firmware</p><p>Loading Firmware&nbsp; Done.</p><p>Linux version 2.6.17 (leihui@rdserver.localdomain) (gcc version 3.4.6) #6 Tue Apr 15 14:32:31 SGT 2008<br />CPU revision is: 00019374<br />Determined physical RAM map:<br /> memory: 02000000 @ 0000000 (usable)<br />Built 1 zonelists<br />Kernel command line: console=ttyS0,115200 rootfs=squashfs root=/dev/mtdblock3<br />Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 byes.<br />Primary data cache 32kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />Cache parity protection disabled<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Using 150.000 MHz high precision timer.<br />Console: colour dummy device 80x25<br />Dentry cache ash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 30304k/32768k available (1599k kernel code, 2448k reserved, 260k data, 140k init, 0k highmem)<br />Mount-cache hash table entries: 512<br />Checking for &#039;wait&#039; instruction...&nbsp; available.<br />NET: Registered protocolfamily 16<br />calling simple_config callback..<br />TC classifier action (bugs to netdev@vger.kernel.org cc hadi@cyberus.ca)<br />NET: Registered protocol family 2<br />IP route cache hash table entres: 256 (order: -2, 1024 bytes)<br />TCP established hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 1024 bind 512)<br />TCP reno registered<br />AR7100 GPIOC major 0<br />squashfs: version 3.1 (2006/08/19) Phillip Lougher<br />Initializing Cryptographic API<br />io scheduler noop registeredo scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A<br />RAMDISKdriver initialized: 1 RAM disks of 4096K size 1024 blocksize<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />ar7100_flash_init : using MyLoader flash mpping<br />Searching for MyLoader partition table in ar7100-nor0 at offset 0x10000<br />Creating 5 MTD partitions on &quot;ar7100-nor0&quot;:<br />0x00000000-0x00010000 : &quot;MyLoader&quot;<br />0x00010000-0x0020000 : &quot;Partition Table&quot;<br />0x00020000-0x000f0000 : &quot;kernel&quot;<br />0x00100000-0x003d0000 : &quot;rootfs&quot;<br />0x003f0000-0x00400000 : &quot;data&quot;<br />u32 classifier<br />&nbsp; &nbsp; Actions configured <br />IPv4 oer IPv4 tunneling driver<br />GRE over IPv4 tunneling driver<br />ip_conntrack version 2.4 (256 buckets, 2048 max) - 204 bytes per conntrack<br />p_conntrack_pptp version 3.1 loaded<br />ip_nat_pptp version 3.0 loaded<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />CP bic registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />FS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 140k freed<br />lgorithmics/MIPS FPU Emulator v1.5<br />More product id needs to be defined?<br />--------config_sys_get errr--------<br />g7100_mod: module license &#039;unspecified&#039; taints kernel.<br />AG7100: Length per segment 1536<br />AG7100: Max segments per packet2<br />AG7100: Max tx descriptor count&nbsp; &nbsp; 200<br />AG7100: Max rx descriptor count&nbsp; &nbsp; 252<br />AG7100: fifo cfg 3 008001ff<br />tart watchdog:<br />watchdog: No such devic<br />Start button:<br />tart switch:<br />Start localtime:<br />tart netif:<br />failed to open dev/button<br />tart account:<br />tart network:<br />lan load.<br />lan: 0.8.4.2 (Atheros/multi-bss)<br />lan: mac acl policy registered<br />lan: client bridge registered<br />th_hal: 0.9.17.1 (AR5212, RF5112, RF2413, RF5413, REGOPS_FUNC)<br />th_rate_sample: 1.2<br />th_pci: 0.9.4.5 (Atheros/multi-bss)<br />PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)<br />PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)<br />ifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/Wencryption support: WEP AES AES_CCM TKIP<br />wifi0: mac 7.8 phy 4.5 radio 5.6<br />wifi0: Use hw queue 1 for WME_AC_BE traffic<br />wifi0: Use hw queue 0 for WME_AC_BK traffic<br />wifi0: Use hw queue 2 for WME_AC_VI traffic<br />wifi0: Use hw queue 3 for WME_AC_VO traffic<br />wifi0: Use hw quee 8 for CAB traffic<br />wifi0: Use hw queue 9 for beacons<br />wifi0: Atheros 5212: mem=0x10000000, irq=48<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />ifi1: unable to attach hardware; HAL status 13<br />lan 0 init.<br />lan 1 init.<br />wifi1 doesn&#039;t exist <br />wla 2 init.<br />wifi2 doesn&#039;t exist <br />wlan 0 config.<br />lan 1 config.<br />lan 2 config.<br />tart wlan:<br />wlan 0 create.<br />th0<br />unc ieee80211_ioctl_siwessid, line 853<br />et.ath0.maxaid = 33<br />nvalid command : tx_chainmask<br />Invalid command: rx_chainmask<br />lan 1 create.<br />wlan_applet_create: radio 1 does not exist<br />lan 2 create.<br />wlan_applet_create: radio 2 does not exist<br />tart vaps:<br />Error: service wlan1 not found!<br />Error: service wlan1 not found!<br />Error: service wlan1 not found!<br />Start wlan1:<br />Error: servie wlan1 not found!<br />Error: service wlan2 not found!<br />Error: service wlan2 not found!<br />Error: service wlan2 not found!<br />Start wlan2:<br />Error: service wlan2 not found!<br />Start bridge:<br />G7100: cfg1 0xf cfg2 0x7014<br />G7100: unit 0 phy is up...Mii 100Mbps full duplex<br />AG7100: pll reg 0x18050010: 0x1099&nbsp; AG7100: cfg_1: 0x1ff0000<br />AG7100: cfg_2: 0x3ff<br />AG7100: cg_3: 0x8001ff<br />AG7100: cfg_4: 0x3ffff<br />AG7100: cfg_5: 0x3ffff<br />AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x11 <br />Writing 4<br />evice eth0 entered promiscuous mode<br />evice ath0 entered promiscuous mode<br />tart wds:<br />br0: port 1(eth0) entering learning state<br />br0: topology change detected, propagating<br />br0: port 1(eth0) entering forwarding state<br />r0: port 2(ath0) entering learning state<br />br0: topology change detected, propagating<br />br0: port 2(ath0) entering forwarding state<br />tart stp:<br />tart duplex:<br />pen device error!<br />Start loop:<br />tart apencrypt:<br />wlan&nbsp; start.<br />lan 1 start.<br />wlan_applet_start: radio 1 does not exist.<br />lan 2 start.<br />wlan_applet_start: radio 2 does not exist.<br />tart lan:<br />tart execd:<br />tart uconfig:<br />tart ntpdate:<br />tart mem_management:<br />tpdate: time.nist.gov - unknown host.<br />tart inetd:<br />tart snmpd:<br />tart webs:<br />tart monitorps:</p><p>Note that i put two wireless cards, and the compex firmware see only one. <br />Another note: the two minipci connectors are too near to put two new compex 26db minipci cards.There is barely the space for two normal minipci. </p><br /><br /><p>Enrico.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68895">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						29 May 2008, 14:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>studioideasw@gmail.com wrote:</cite><blockquote><p>Compex find an easyer solution than to write a new driver for atheros ar7130 ethernet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>g7100_mod: module license &#039;unspecified&#039; taints kernel.<br />AG7100: Length per segment 1536<br />AG7100: Max segments per packet2<br />AG7100: Max tx descriptor count&nbsp; &nbsp; 200<br />AG7100: Max rx descriptor count&nbsp; &nbsp; 252<br />AG7100: fifo cfg 3 008001ff</p><p>G7100: cfg1 0xf cfg2 0x7014<br />G7100: unit 0 phy is up...Mii 100Mbps full duplex<br />AG7100: pll reg 0x18050010: 0x1099&nbsp; AG7100: cfg_1: 0x1ff0000<br />AG7100: cfg_2: 0x3ff<br />AG7100: cg_3: 0x8001ff<br />AG7100: cfg_4: 0x3ffff<br />AG7100: cfg_5: 0x3ffff<br />AG7100: done cfg2 0x7115 ifctl 0x10000 miictrl 0x11 <br />Writing 4</p></blockquote></div><p>Nothing new. The same driver, like in mikrotik.</p><p>Wireless driver is madwifi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68951">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						30 May 2008, 21:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>As non developer,<br />I wonder why Mikrotik doesn&#039;t release their patches to the public (and rather send them to single developers)... while such practice won&#039;t be strictly a GPL violation wouldn&#039;t be much better to make a public release?<br />And why do they not release as soon as their RouterOS? Why do developers accept to receive the Mikrotik patches after months?<br />I don&#039;t want to be polemic, I&#039;m just wondering, because searching in the forum I found many complains about this issue that comes back each time openwrt has to support&nbsp; a new Mikrotik card.<br />Can anyone please shed some light of this?</p></blockquote></div><p>It&#039;s quite simple, really. Selling hardware is a low margin business. Selling services, on the other hand...</p><p>The longer they can delay sending out patches, the more customers will flock to use RouterOS instead. In other words, they will be less than cooperative in providing patches. This is a bit of a shame of course, as they are bound to do so by GPL. Send in the lawyers! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68957">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						31 May 2008, 00:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rbiz wrote:</cite><blockquote><p>The longer they can delay sending out patches, the more customers will flock to use RouterOS instead. In other words, they will be less than cooperative in providing patches.</p></blockquote></div><p>actually this is not true.&nbsp; the market sector that will use RouterOS will do so no matter what the open source alternative has to offer.&nbsp; similarly the open source market share will also use only open source software no matter what the RouterOS has to offer.&nbsp; Not helping the open source development alternative will only hurt hardware sales, and hardware sales while having a lower profit margin it does sport a larger market share.&nbsp; the funny thing is that RouterOS cost is included on the RouterBord hardware therof delaying driver patches for the open source community does not make any sense at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68964">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						31 May 2008, 03:24					</div>
				</div>
				<div class="post-content content">
					<p>Alright, so explain why those &#039;malakas&#039; at MT are being so obstructive? There must be more to it than them just being evil. </p><p>I can see a number of reasons:<br />* people will need to upgrade their RouterOS license for more concurrent connections<br />* the creation of a captive market and customer binding<br />* competitive reasons: releasing patches means their competition (other hardware manufacturers) won&#039;t have to write them and they would then benefit from their work</p><p>According to the wiki on mikrotik, their biggest customers are small isp&#039;s. these are clients who will need to upgrade their routeros for sure. if they could opt for a stable and tested solution from openwrt, they would not shell out the cash for the routeros instead.</p><p>Speaking of which, why is RouterOS not GPL? As it&#039;s based on it, should its sources not have been released a long long time ago... They shield with their license agreement when you ask, but that agreement is not relevant on this occasion, if a judge were to decide.</p><p>I&#039;m not telling you how things should be, I&#039;m telling you how they are. I know they should behave such and such. In this world, being right and getting what you deserve are two different things. You can get more with a gun and a kind word, than with just a a kind word. In this case, the law needs to be exercised. Or stop complaining.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69002">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">Slammer</div>
					<div class="post-datetime">
						1 Jun 2008, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>rbiz, I think that situation about ar7100 and mikrotik is simple.<br />It seems that the other manifacturers have problems with ar7100 boards for various reasons. Ubiquity is delayed with PStationX and Compex has not released anything yet. <br />Mikrotik has the advantage to sell a very good board with very good price without competition in this price tag (for now). We have to admit that mikrotik developers are very good and they achived to make this chipset to work. Is very logical to keep their work private as long as they can. I am sure that they will release the code later, if they dont, all these that you are thinking will be correct.</p>											<p class="post-edited">(Last edited by <strong>Slammer</strong> on 1 Jun 2008, 02:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69005">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						1 Jun 2008, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>the issue here is not MikroTik but Atheros.&nbsp; As with their 802.11 products, their view for the open source community is not clear yet otherwise a linux SDK for the ar7100 family would have been released a long time ago.&nbsp; Usually competition is a good factor&nbsp; to convince hardware companies to be more supportive to open source development.&nbsp; thereof the new Intel products based on atom CPU will provide some good reconsideration to Atheros about open source driver support :-)</p><p>open source is a trend so it&#039;s just a matter of time :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69011">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">lorenzo.allegrucci</div>
					<div class="post-datetime">
						1 Jun 2008, 12:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Slammer wrote:</cite><blockquote><p>... Is very logical to keep their work private as long as they can. I am sure that they will release the code later, if they dont, all these that you are thinking will be correct.</p></blockquote></div><p>I fully agree, this is logical, but is it also legal? In other words, are they violating the GPL?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69013">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">Slammer</div>
					<div class="post-datetime">
						1 Jun 2008, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>I dont know if it is legal or not. I think that is common to have restricted kernel modules in linux world (for example nvidia and ati). <br />Always there is a solution. It is possible for mikrotik to give us an object module (with no source code) to make a full operating kernel. If mikrotik wants openwrt customers will do it.</p><p>I buy only boards with openwrt support for my applications (not a lot of them, about 50-100 per year). It is very clear for me that I can&#039;t buy RB4xx boards for now (I prefer to pay something more and to buy alix boards) , and many of us are thinking the same.</p>											<p class="post-edited">(Last edited by <strong>Slammer</strong> on 1 Jun 2008, 15:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69154">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						4 Jun 2008, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Is anyone toying with the new RB4xx&#039;s? </p><p>Once OpenWRT runs to an acceptable standard on the RB433AH, I&#039;ll get about 60 of these over the next few years. If MikroTik is reading this: I don&#039;t want your RouterOS, but thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69164">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						4 Jun 2008, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Ethernet working, but not so stable (it hangs on high pps load), wireless - ath5k driver works (ap client), but also not so stable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69208">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						5 Jun 2008, 11:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><p>Ethernet working, but not so stable (it hangs on high pps load), wireless - ath5k driver works (ap client), but also not so stable.</p></blockquote></div><p>have you tried with the <a href="http://wifi.ozo.com/airo/mirror/ar7100/mikrotik/">Mikrotik GPL ethernet driver</a>?&nbsp; it has some differences from the Chinese one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69209">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						5 Jun 2008, 11:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>acoul wrote:</cite><blockquote><div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><p>Ethernet working, but not so stable (it hangs on high pps load), wireless - ath5k driver works (ap client), but also not so stable.</p></blockquote></div><p>have you tried with the <a href="http://wifi.ozo.com/airo/mirror/ar7100/mikrotik/">Mikrotik GPL ethernet driver</a>?&nbsp; it has some differences from the Chinese one.</p></blockquote></div><p>No, I have not. I found problem with ethernet: too short receive rings. I changed <br />#define CONFIG_AG7100_NUMBER_TX_PKTS 32 -&gt; 128<br />#define CONFIG_AG7100_NUMBER_RX_PKTS 32 -&gt; 128<br />now it works stable: 100Mbps by 64byte packets received without any problems. But RB411 reacts on commands very sloooow. </p><p>Now I trying to get a wireless card working.</p><p>add: at high load via wireless kernel hangs here:<br />arch/mips/rb/rb400/irq.c:<br /></p><div class="codebox"><pre><code>static inline void rb400_flush_pci_to_memory(void)
{
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1)); &lt;----------- this loop forever
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1));
}</code></pre></div><p>if I comment out this function at irq handler, the kernel complains on a PCI error.</p>											<p class="post-edited">(Last edited by <strong>bitbucket</strong> on 5 Jun 2008, 16:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69446">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">number6</div>
					<div class="post-datetime">
						11 Jun 2008, 16:02					</div>
				</div>
				<div class="post-content content">
					<p>Is the available code for the AR7100 (Mikrotik patches and Ethernet driver) ready to be integrated into the standard OpenWRT build system? Has anyone attempted to do so?&nbsp; In particular I am wanting&nbsp; support for the RouterBoard 450. </p><p>If no one has done this work yet and the code is ready, then I will be attempting to do so this week but I don&#039;t want to duplicate effort.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69466">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						11 Jun 2008, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>I think the main problem is the pci/irq issue that bitbucket has reported.&nbsp; You may find some code for this hardware <a href="http://wifi.ozo.com/airo/mirror/ar7100/">here</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69474">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						12 Jun 2008, 01:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><p>add: at high load via wireless kernel hangs here:<br />arch/mips/rb/rb400/irq.c:<br /></p><div class="codebox"><pre><code>static inline void rb400_flush_pci_to_memory(void)
{
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1)); &lt;----------- this loop forever
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1));
}</code></pre></div><p>if I comment out this function at irq handler, the kernel complains on a PCI error.</p></blockquote></div><p>Have you tried to terminate the while after some loops (1000 is just a wild guess)?<br /></p><div class="codebox"><pre><code>static inline void rb400_flush_pci_to_memory(void)
{
        int limit;
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        limit=1000;
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1) &amp;&amp; limit-- &gt; 0);
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        limit=1000;
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1) &amp;&amp; limit-- &gt; 0);
}</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69494">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						12 Jun 2008, 12:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jal2 wrote:</cite><blockquote><div class="codebox"><pre><code>static inline void rb400_flush_pci_to_memory(void)
{
        int limit;
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        limit=1000;
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1) &amp;&amp; limit-- &gt; 0);
        rb400_writel(1, REG_DDR_PCI_FLUSH);
        limit=1000;
        while ((rb400_readl(REG_DDR_PCI_FLUSH) &amp; 0x1) &amp;&amp; limit-- &gt; 0);
}</code></pre></div></blockquote></div><p>Will be &quot;PCI Error ... &quot; from ops-rb400.c/rb400_check_error()</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69542">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						13 Jun 2008, 09:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><p>Will be &quot;PCI Error ... &quot; from ops-rb400.c/rb400_check_error()</p></blockquote></div><p>Too bad <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />I wonder if this is the PCI bug brainslayer talked about in the <br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=32053">DD-WRT forum</a> (German only, posting from Mon May 26, 2008 11:31 pm)<br />recently. He mentioned a &quot;severe CPU/PCI bus bug limiting the PCI throughput&quot; confirmed by Atheros. Anyhow he seems to be a bit biased against Mikrotik products.</p><p>Has anyone already bugged Atheros (and Mikrotik?) about this issue (together with the question for datasheets, errata etc. for the AR71xx)?</p>											<p class="post-edited">(Last edited by <strong>jal2</strong> on 13 Jun 2008, 09:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69543">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						13 Jun 2008, 10:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jal2 wrote:</cite><blockquote><p>Has anyone already bugged Atheros (and Mikrotik?) about this issue (together with the question for datasheets, errata etc. for the AR71xx)?</p></blockquote></div><p>I did.&nbsp; They should both be reading this tread.</p>											<p class="post-edited">(Last edited by <strong>acoul</strong> on 13 Jun 2008, 11:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69547">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">bitbucket</div>
					<div class="post-datetime">
						13 Jun 2008, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Btw, Mikrotik solved this problem: they routeros works on high pps load.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69590">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">Slammer</div>
					<div class="post-datetime">
						14 Jun 2008, 11:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bitbucket wrote:</cite><blockquote><p>Btw, Mikrotik solved this problem: they routeros works on high pps load.</p></blockquote></div><p>that&#039;s why they are hiding the patches.....<br />They are selling already their products while the others are behind.</p>											<p class="post-edited">(Last edited by <strong>Slammer</strong> on 14 Jun 2008, 11:58)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 76 to 75 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>