<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze newbie - WPA-Ent, VLAN, etc.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p99387">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						27 Dec 2009, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m sorry I think I will ask simple questions.<br />My router is: Linksys WRT54GL v1.0</p><p>I&#039;ve used WhiteRussian since 5 years. I have a 4 leg router. I&#039;d like to configure this on my<br />router with Kamikaze. I installed the image.</p><p>1. What package I need for WPA(2)-EAP-TLS AP?<br />From the default image it is missing now.</p><p>2. How can I add a secondary IP address for the default interfaces (br-lan, eth0, eth0.0;1)?<br />I want to setup a route for my test network temporary to use opkt. In WhiteRussian I can setup<br />a vlan0:0 interface with the needed IP address.</p><p>3. How can I setup a VLAN on LAN port 1 without any bridging?<br />I tried out many situation. I did an eth0.2 port and I gave an IP address for it without success.<br />I don&#039;t have eth0.2 interface when I ssh&#039;d to the router.</p><p>4. Where the configurated parameters from WEB GUI are stored? I checked nvram show ...</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99390">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						27 Dec 2009, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>Can&#039;t answer 1-3, but for item 4, Kamikaze configurations are in files in /etc/config.&nbsp; The best explanation I have seen for this is here:&nbsp; <a href="http://wiki.openwrt.org/doc/uci">http://wiki.openwrt.org/doc/uci</a></p><p>This is linked to from here: <a href="http://wiki.openwrt.org/doc/start">http://wiki.openwrt.org/doc/start</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99392">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						28 Dec 2009, 00:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lizby wrote:</cite><blockquote><p>4, Kamikaze configurations are in files in /etc/config.&nbsp; The best explanation I have seen for this is here:&nbsp; <a href="http://wiki.openwrt.org/doc/uci">http://wiki.openwrt.org/doc/uci</a></p></blockquote></div><p>Thanks!</p><p>I found the network config file.<br />I created a new interface lan1 by hand:</p><p>config &#039;interface&#039; &#039;lan1&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option &#039;defaultroute&#039; &#039;0&#039;<br />&nbsp; &nbsp; option &#039;peerdns&#039; &#039;0&#039;<br />&nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0.2&#039;<br />&nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.7.4&#039;</p><p>Now I&#039;ve got eth0.2 interface. I hope it is working. How can I make this by WEB GUI?</p><p>Remained items are: 1;2.</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99397">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						28 Dec 2009, 00:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aruzsi wrote:</cite><blockquote><p>Remained items are: 1;2.</p></blockquote></div><p>I configured the second IP address for my eth0.2:0 interface. So item 2 was solved.</p><p>New question: can I change the MAC of my interfaces? In the network file?</p><p>Now I try to install some packages, like ntpclient (or ntp) and quagga. Is there bird<br />package for OpenWRT? I just need OSPFv2 because my router is very small (RAM+flash).</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99424">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						28 Dec 2009, 12:38					</div>
				</div>
				<div class="post-content content">
					<p>I found for WPA(2)-EAP-TLS this:</p><p>802.1x configurations OpenWrt supports both 802.1x client and Access Point configurations. 802.1x client is only working with Atheros or mac80211 drivers. Configuration only supports EAP types TLS, TTLS or PEAP.</p><p>EAP-TLS<br />&nbsp; config wifi-iface<br />&nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;ath0&quot;<br />&nbsp; &nbsp; &nbsp; option network&nbsp; &nbsp; &nbsp; &nbsp; lan<br />&nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;OpenWrt<br />&nbsp; &nbsp; &nbsp; option eap_type&nbsp; &nbsp; &nbsp; &nbsp;tls<br />&nbsp; &nbsp; &nbsp; option ca_cert&nbsp; &nbsp; &nbsp; &nbsp; &quot;/etc/config/certs/ca.crt&quot;<br />&nbsp; &nbsp; &nbsp; option priv_key&nbsp; &nbsp; &nbsp; &nbsp;&quot;/etc/config/certs/priv.crt&quot;<br />&nbsp; &nbsp; &nbsp; option priv_key_pwd&nbsp; &nbsp;&quot;PKCS#12 passphrase&quot; </p><p>Is this true? Doesn&#039;t work with my Broadcom????</p><p>Why are there cert options in AP config? I thought it was in (Free)RADIUS server config. I think I am confused now.<br />A config for AP, please! My situation: WLAN clients; WRT54GL AP, FreeRADIUS server.</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99434">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						28 Dec 2009, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>MAC address changes solved.</p><p>WPA(2)-EAP-TLS seems working:</p><p>root@OpenWrt:/mnt/shfs# iwlist wl0 auth<br />wl0&nbsp; &nbsp; &nbsp; &nbsp;Authentication capabilities :<br />&nbsp; &nbsp; &nbsp; &nbsp; WPA<br />&nbsp; &nbsp; &nbsp; &nbsp; WPA2<br />&nbsp; &nbsp; &nbsp; &nbsp; CIPHER-TKIP<br />&nbsp; &nbsp; &nbsp; &nbsp; CIPHER-CCMP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current WPA version :<br />&nbsp; &nbsp; &nbsp; &nbsp; WPA2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Key management :<br />&nbsp; &nbsp; &nbsp; &nbsp; 802.1x<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Pairwise cipher :<br />&nbsp; &nbsp; &nbsp; &nbsp; none<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Pairwise cipher :<br />&nbsp; &nbsp; &nbsp; &nbsp; none<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current TKIP countermeasures : no<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Drop unencrypted : yes<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Authentication algorithm :<br />&nbsp; &nbsp; &nbsp; &nbsp; open<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Receive unencrypted EAPOL : no<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Roaming control : no<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Current Privacy invoked : no</p><p>My original questions were solved. WLAN test will be soon ...</p><p>Newer questions related to the very strict resources namely flash storage.</p><p>I&#039;ve read oldwiki:remotefilesystemhowto. I&#039;ve choosed shfs. It is working.<br />How can I go further? Mounting automaticly at boot time, using for opkt,<br />or running applications from it?</p><p>Can I put swap on that fs?</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99448">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						28 Dec 2009, 19:25					</div>
				</div>
				<div class="post-content content">
					<p>I configured WPA(2)-EAP-TLS by hand.<br />I checked it by WEB GUI and I can see nothing! WEB GUI show me an unconfigured wl0 interface. :-(</p><p>Is that my mistake?</p><p>TIA,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105877">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">PeterF</div>
					<div class="post-datetime">
						2 Apr 2010, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Did you get this working i.e. Client mode EAP TLS WPA2?</p><p>Is any one else doing this?</p><p>Should I be able to do this from the Luci GUI?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106024">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						4 Apr 2010, 15:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>PeterF wrote:</cite><blockquote><p>Did you get this working i.e. Client mode EAP TLS WPA2?</p></blockquote></div><p>No. I tried it in AP mode not in client.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>