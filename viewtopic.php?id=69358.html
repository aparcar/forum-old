<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to make guest Wifi?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p349116">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						12 Jan 2017, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Pls i need help.</p><p>I want to make a guest Wifi.<br />Configuration Tplink 1043 with openwrt after FritzBox .<br />Tplink has no Dhcp for Lan and Wifi.dhcp comes from FritzBox (wifi Off)</p><p>But i want to have a guest Wifi with own Dhcp on the Tplink.</p><p>any hints to make this?</p><p>thx</p><p>Andre</p>											<p class="post-edited">(Last edited by <strong>andre.glass30</strong> on 12 Jan 2017, 09:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349176">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						12 Jan 2017, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>Not tried this yet:&nbsp; <a href="https://blog.doenselmann.com/gaeste-wlan-auf-openwrt-access-point/">https://blog.doenselmann.com/gaeste-wla … ess-point/</a><br />You may want to use Google Translate or similar to your desired language.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349207">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						13 Jan 2017, 09:04					</div>
				</div>
				<div class="post-content content">
					<p>thx.<br />don´t have to Translate i´m german :-)).<br />i will test this</p><p>greets</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349214">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						13 Jan 2017, 11:12					</div>
				</div>
				<div class="post-content content">
					<p>I did not get this to work.<br />too bad</p><p>Cause as i wrote the Tplink get all ip from Fritzbox ,and if i make a new Wifi on open wrt and a new Interface with dhcp i cannot go to Internet.</p><p>hmm</p><p>any hints?</p><p>thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349217">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						13 Jan 2017, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>Hallo,</p><p>&quot;I did not get this to work.&quot;, damit kann man nicht viel anfagen! Was genau geht denn nicht. Ein paar Informationen darf man schon rausrücken, damit dir geholfen werden kann.</p><p>Wie hast du den TP-Link an die Fritz!Box (FB) angeschlossen? FB: LAN-Port ---&gt; TP-Link: WAN-Port oder FB: LAN: LAN-Port ---&gt; TP-Link: LAN-Port?<br />Welche OpenWRT Version hast du installiert?</p><p>Gruß<br />Christoph<br />################################<br />englisch</p><br /><p>&quot;I did not get this to work.&quot;, I think we need more information to help you. </p><p>How do you connect the Fritz!Box with TP-Link, via WAN or LAN Port? <br />Which version of OpenWRT is installed?<br />What exactly doesn&#039;t work? </p><p>greetings<br />Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349226">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						13 Jan 2017, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>Hallo Christoph.</p><p>TP-Link TL-WR1043N<br />OpenWrt Chaos Calmer 15.05.1 / LuCI 15.05-149-g0d8bbd2 Release (git-15.363.78009-956be55)</p><p>FB: LAN: LAN-Port ---&gt; TP-Link:<br />Tp-Link Dhcp off for 1 Wifi<br />All Devices get IP from Fb Lan and wifi.<br />Wifi FB off.</p><p>Ich bräuchte ein Gäste wlan mit eigenem dhcp und ip adressen ,komme aber nicht ins Internet mit dem im Blog von Michi beschriebenen weg.</p><p>Need a guest Wifi with own Dhcp </p><p>danke Thx</p><p>Andre</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349233">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">golialive</div>
					<div class="post-datetime">
						13 Jan 2017, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Hey there.</p><p>I think you should get some understanding about how vlans and routing are meant to work. Otherwise you might spend lots of hours searching for errors without even knowing where to look at.</p><p>First things first: It doesn&#039;t matter if we&#039;re talking about wired networks or wifi networks. There are some things to understand when it comes to wifi interfaces, but at the very beginning a wifi interface is pretty similar to a wired interface.</p><p>Your fritzbox provides two networks, its LAN and its GUEST. Both are separate vlans, each have individual DHCP servers, IP ranges, DNS servers. From a clients perspective, the fritzbox LAN and GUEST network are not related.</p><p>Your OpenWRT device can provide as many of those networks as you like. You can call the LAN and GUEST as well, but you can even call them DMZ, VOIP or when it comes to e.g. residential communities, ROOM1 to ROOM6. Whatever fits your needs. From a clients perspective, those networks are not related as well.</p><p>One scenario, the one you should aim for, would be to bridge one network of the fritzbox to one network of the OpenWRT. Bridging is as dumb as it sounds, which means of your OpenWRT has a GUEST network providing DHCP and your fritzbox has a GUEST network providing DHCP and you bridge them together, you end up having a single network with two individual devices that both think of themselves of being the responsible DHCP. Which is not a good thing. So you should disable DHCP on one of them, no matter if its the fritzbox or the OpenWRT. And keep in mind to only disable DHCP for the GUEST network you just recently bridged, not for the LAN network. And it doesn&#039;t matter at all if you disable the DHCP on your fritzbox or on your OpenWRT. Both will work, as long as you make sure to have exactly one DHCP server on the GUEST network.</p><p>If you disable the DHCP on your OpenWRT you&#039;re done right here. Your fritzbox will by default act not only as DHCP for the GUEST network but as well as DNS server and gateway to the internet.</p><p>If you disable the DHCP on your fritzbox (I&#039;m not sure if you can do that, but that&#039;s what I would try to do), you need to make sure the network on your OpenWRT is configured properly.<br />This means: <br />* It acts as DHCP server with proper IP range.<br />* The OpenWRT is not only attached to the GUEST network port spanning the GUEST network across both devices but has another interface called WAN which has &quot;somehow&quot; access to the internet. Let&#039;s talk about that later.<br />* It has firewall configuration in place that at least allows your GUEST network to call the WAN network.<br />* It has an actual hardware port bridged which goes to the GUEST port of your fritzbox.<br />* If you want to have wifi for your GUEST network as well (which you do) then you need to have a Wifi interface bridged to the GUEST network.</p><p>Now for the WAN connection of your OpenWRT.</p><p>By default your fritzbox has a GUEST network like 192.168.179.0/24, your fritzbox&#039;s GUEST interface has the IP address 192.168.179.1.<br />You could not disable the DHCP server on your fritzbox but make it &quot;only assigne IP addresses to known mac addresses&quot; and simply don&#039;t configure any mac addresses there. <br />Then you configure your OpenWRT GUEST network to e.g. 192.168.181.1/24 (notice: that&#039;s neither your fritzbox&#039;s LAN nor your fritzbox&#039;s GUEST network but a different range!).<br />Now you can plug the WAN interface of your OpenWRT device right in the very same network as your GUEST network (which can be done by vlan config on your OpenWRT device, you don&#039;t need different hardware cables for that) and manually configure the WAN address of your OpenWRT to 192.168.179.2 and make it use 192.168.179.1 as gateway. And keep the WAN interface &quot;masqueraded&quot; as it is by default.</p><p>This should give you:<br />* A single GUEST network spanned across both device in terms of wifi<br />* An IP range in that GUEST network that is controlled by OpenWRT<br />* Access to the internet since your GUEST network devices will use the 192.168.181.1 as gateway, which will route every request to 192.168.179.1.</p><p>I&#039;m not completely convinced if that&#039;s a configuration to aim for. I&#039;d rather completely drop the fritzbox&#039;s networking feature all together. Use OpenWRT for both, LAN and GUEST in terms of wired and wifi connection and make the only device attached to the fritzbox the WAN port of your OpenWRT.<br />That basically degrades your fritzbox to another tier of carrier grade nat but it avoids clumsy network loops.</p><p>Regards,<br />Stephan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349236">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						13 Jan 2017, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>HI Stephan.</p><p>I can not use the Wan Port on openwrt,caus i have a Nas and a 2 PC on Lan port at FB.<br />I dind´t found a way to route the NAS and a 2 PC to the openwrt .<br />FB and Openwrt are not in the same room.</p><p>I just want a Simple Guest Wifi on the openwrt with it´s own IP range .</p><p>greets </p><p>Andre</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349237">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						13 Jan 2017, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>Hallo,</p><p>es gibt da nur ein kleines ... Problem, meiner Meinung nach. Wenn du auf dem TP-Link ein Gäste-WLAN einrichtest, wird der ganze Verkehr trotzdem über das LAN der FB geleitet und somit sehen die WLAN-Gäste auch alles was sich im normalen LAN befindet. Damit ist das Konzept von einem Gäste-WLAN futsch. </p><p>Ein weiteres Problem ist auch, daß die FB keine VLANs - nicht zuverwechseln mit WLANs - unterstützt.</p><br /><p>was mir noch eingefallen ist, gibt es nicht die möglichkeit auf der FB ein Gäste-WLAN einzurichten?</p><p>############################<br />english</p><p>There is only one little problem ... every traffic from the TP-Link will be send to the LAN-Port of the FB. So the members of the guest wifi will see everything whats going on in the normal lan. So there is no need for a guest wifi.</p><p>the missing vlan capability of the FB is the other problem.</p><br /><p>Is it possible to configure a guest wifi on the fb?<br />Christoph</p>											<p class="post-edited">(Last edited by <strong>rj-45</strong> on 13 Jan 2017, 15:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349238">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						13 Jan 2017, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>What I do not see clearly discussed is how andre.glass30 has the TP1043 is configured for AP.&nbsp; It is also not clear how this should be configured in the link I referenced.&nbsp; Might be a good question for Michi</p><p>I am of the opinion that the 1043 needs to be set up as a &quot;Dumb AP&quot; and should be connected from the fritz box Ethernet LAN to the TP-Link 1043 LAN port.&nbsp; <a href="https://wiki.openwrt.org/doc/recipes/dumbap">https://wiki.openwrt.org/doc/recipes/dumbap</a></p><p>I would suggest setting the 1043 IP address to a Static value in the same subet of the fritzbox LAN, but not in the fritzbox DHCP range.&nbsp; If you do not assign a static IP you will not be able to access the 1043 if it is not connected to the fritzbox (ie it will have no place to get an IP from)</p><p>The linked recipe does not use VLANs, but the OpenWrt ones do when using a secondary AP.<br /><a href="https://wiki.openwrt.org/doc/recipes/guest-wlan">https://wiki.openwrt.org/doc/recipes/guest-wlan</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349239">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">andre.glass30</div>
					<div class="post-datetime">
						13 Jan 2017, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>1.Yes it is Possible to have a guest Wifi on FB ,but i don´t want to use Wifi on FB ,is complete off.<br />2.es wäre kein Probem das sie alles im Lan sehen ,ich hab nix zu verbergen und ausserdem kenne ich die Leute gut die hier her kommen.<br />Für meine Kinder hab ich einen extra Router mit eigenem Netz,wenn deren Freunde kommen können die Darüber reingehen .der ist sowieso Zeitgesteuert über die FB.</p><p>Ich glaube es wohl dann doch einfacher ,ein 2´tes Wlan aufzumachen im Openwrt wie das was ich eh schon nutze und das einfach nur einschalte wenn Gäste da sind ,dann werden halt die IP adressen von der FB vergeben.</p><p>Sorry for Language ,cannot translate .</p><p>Greets </p><p>Andre</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p349279">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						14 Jan 2017, 11:46					</div>
				</div>
				<div class="post-content content">
					<p>hello again,</p><p>only the german version, to lazy to translate:</p><p>okay, dann probiere ich es mal mit einer Anleitung.<br />1.) gehe zu &quot;Network&quot; -&gt; &quot;Wifi&quot;, klicke dann auf &quot;add&quot;<br />2) in diesem neuen Fenster kannst du die WLAN-Einstellungen für das Gäste-WLAN vornehmen, also Kanal, Name und so. Wichtig ist hier das du unter &quot;Mode&quot; &quot;Access Point&quot; einstellst und bei &quot;Network&quot; ein neues erstellst mittels &quot;create&quot;. Ich würde es &quot;guestwifi&quot; nennen. Unter &quot;Wireless Security&quot; noch die Sicherheitseinstellungen vornehmen und der erste Teil wäre erledigt.<br />3) dann gehe auf &quot;Network&quot; -&gt; &quot;Interfaces&quot; <br />dort müßte nun ein Interface mit dem Namen &quot;guest&quot; auftauchen. Klicke dort auf &quot;edit&quot;. Klicke dann auf &quot;Protocol&quot; und ändere es auf &quot;Static address&quot; und dann klicke auf &quot;Switch Protokoll&quot; Vergib nun eine IPv4 Adresse, die nicht in dem gleichen IP-Netz ist, wie das restliche LAN. Also wenn die FB die &quot;192.168.178.1&quot; hat, dann trage hier die &quot;192.168.179.1&quot; ein. Als IPv4 Netmaske nimmst du die &quot;255.255.255.0&quot;&nbsp; Bei IPv4 gateway trägst du die IP der FB ein, wie auch bei &quot;custom DNS servers&quot;. Das ganze IPv6 Geraffel lassen wir links liegen. Dann klickst du unten auf &quot;Save&quot;. Nun klickst du auf &quot;Setup DHCP Server&quot; und dann wieder auf &quot;Save&quot;. Ziemlich weit oben klickst du dann auf &quot;Firewall Settings&quot; und dann auf &quot;unspecified -or- create:&quot; und legst eine neue Zone an. Ich würde sie &quot;guest&quot; benennen. Nun folgt ein Klick auf &quot;Save &amp; Apply&quot;<br />4) nun gehe zu &quot;Network&quot; -&gt; &quot;Firewall&quot;<br />dort klickst du unter &quot;Zones&quot; bei &quot;lan&quot; auf &quot;edit&quot; und aktivierst &quot;Masquerading&quot; und &quot;MSS clamping&quot; und setzt unten den Haken bei &quot;Allow forward from source zones: guest:&quot;<br />Nachdem du auf &quot;save&quot; geklickt hast, editierst du die Zone &quot;guest&quot;. Dort setzt du den Haken bei &quot;Allow forward _to_ destination zones: lan&quot;<br />Wieder auf &quot;Save &amp; Apply&quot;</p><p>nun können sich gäste mit dem neuen WLAN verbinden und die Verbindung zum Internet sollte klappen.</p><p>Christoph</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>