<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need help with ZTE MF710M USB 3G Modem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p299887">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hrshovon</div>
					<div class="post-datetime">
						15 Nov 2015, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>hello all,<br />hope I have posted in the right place.My device is Xiaomi miwifi mini and I am running a custom built OpenWRT chaos calmer image built using the build tools available in git repo.<br />I have a ZTE MF710M USB modem<br />Output of &#039;lsusb&#039;<br />Bus 001 Device 003: ID 19d2:1595 ZTE WCDMA Technologies MSM<br />it doesnt do modswitching automatically and I have this new usbmode instead of usb_modswitch.<br />So I installed sdparm and Issued sdparm --command=&quot;eject&quot; /dev/sr0 (Also tried using sg0 and got the same output)<br />here is the output after that<br />/dev/sr0: HSPA&nbsp; &nbsp; &nbsp; USB SCSI CD-ROM&nbsp; &nbsp;2.31&nbsp; [cd/dvd]<br />[ 1386.540000] usb 1-1: USB disconnect, device number 3<br />root@OpenWrt:/# [ 1387.350000] usb 1-1: new high-speed USB device number 4 using ehci-platform<br />[ 1387.500000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-101c0000.ehci-1, CDC Ethernet Device, 02:00:ff:aa:aa:aa<br />[ 1387.530000] option 1-1:1.2: GSM modem (1-port) converter detected<br />[ 1387.530000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0<br />[ 1387.540000] option 1-1:1.3: GSM modem (1-port) converter detected<br />[ 1387.550000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1<br />[ 1387.560000] option 1-1:1.4: GSM modem (1-port) converter detected<br />[ 1387.560000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2<br />[ 1387.570000] option 1-1:1.5: GSM modem (1-port) converter detected<br />[ 1387.580000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB3<br />[ 1387.600000] usb-storage 1-1:1.6: USB Mass Storage device detected<br />[ 1387.600000] scsi host6: usb-storage 1-1:1.6<br />[ 1388.610000] scsi 6:0:0:0: CD-ROM&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HSPA&nbsp; &nbsp; &nbsp;USB SCSI CD-ROM&nbsp; 2.31 PQ: 0 ANSI: 0 CCS<br />[ 1388.630000] sr 6:0:0:0: [sr0] scsi3-mmc drive: 0x/0x caddy<br />[ 1388.630000] sr 6:0:0:0: Attached scsi generic sg0 type 5<br />[ 1388.640000] scsi 6:0:0:1: Direct-Access&nbsp; &nbsp; &nbsp;HSPA&nbsp; &nbsp; &nbsp;MMC Storage&nbsp; &nbsp; &nbsp; 2.31 PQ: 0 ANSI: 0 CCS<br />[ 1388.650000] sd 6:0:0:1: Attached scsi generic sg1 type 0<br />[ 1388.680000] sd 6:0:0:1: [sda] Attached SCSI removable disk<br />Now &#039;lsusb&#039; says<br />Bus 001 Device 004: ID 19d2:1592 ZTE WCDMA Technologies MSM <br />Then I switched to luci and added a new interface for 3G with /dev/ttyUSB0 and apn and dialing number ( *99#). This worked for me on a Huawei Modem ( lsusb&nbsp; Bus 002 Device 004: ID 12d1:1001 Huawei Technologies Co., Ltd. E169/E620/E800 HSDPA Modem) <br />But here,it doesnt work at all. I googled around and some said such modems register usb ethernet drivers so it should be accessed by assigning ip addresses and then wget/curl commands such as<br />curl --header &quot;Referer: url=http://192.168.0.1/index.html&quot; <a href="http://192.168.0.1/index.html\\">http://192.168.0.1/index.html\&quot;</a> <a href="http://192.168.0.1/goform">http://192.168.0.1/goform</a><br />/goform_set_cmd_process?goformId=CONNECT_NETWORK<br />(from archwiki ZTE MF823) but that didnt do anything either.<br />So, how do I get it working?<br />Thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299926">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Looper</div>
					<div class="post-datetime">
						15 Nov 2015, 20:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hrshovon wrote:</cite><blockquote><p>[ 1386.540000] usb 1-1: USB disconnect, device number 3<br />root@OpenWrt:/# [ 1387.350000] usb 1-1: new high-speed USB device number 4 using ehci-platform<br />[ 1387.500000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-101c0000.ehci-1, CDC Ethernet Device, 02:00:ff:aa:aa:aa<br />[ 1387.530000] option 1-1:1.2: GSM modem (1-port) converter detected<br />[ 1387.530000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0<br />[ 1387.540000] option 1-1:1.3: GSM modem (1-port) converter detected<br />[ 1387.550000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1<br />[ 1387.560000] option 1-1:1.4: GSM modem (1-port) converter detected<br />[ 1387.560000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2<br />[ 1387.570000] option 1-1:1.5: GSM modem (1-port) converter detected<br />[ 1387.580000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB3</p></blockquote></div><p>Install these packages<br /><strong>usb-modeswitch kmod-usb-net-rndis kmod-usb-net-cdc-ether kmod-usb-net</strong><br />Its CDC USB Ethernet as you can see in log <strong>CDC Ethernet Device, 02:00:ff:aa:aa:aa</strong><br />you have to create a new wan connection in luci, in physical settings select your new CDC interface, probably as eth2<br />Done!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299985">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hrshovon</div>
					<div class="post-datetime">
						16 Nov 2015, 05:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Looper wrote:</cite><blockquote><div class="quotebox"><cite>hrshovon wrote:</cite><blockquote><p>[ 1386.540000] usb 1-1: USB disconnect, device number 3<br />root@OpenWrt:/# [ 1387.350000] usb 1-1: new high-speed USB device number 4 using ehci-platform<br />[ 1387.500000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-101c0000.ehci-1, CDC Ethernet Device, 02:00:ff:aa:aa:aa<br />[ 1387.530000] option 1-1:1.2: GSM modem (1-port) converter detected<br />[ 1387.530000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0<br />[ 1387.540000] option 1-1:1.3: GSM modem (1-port) converter detected<br />[ 1387.550000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1<br />[ 1387.560000] option 1-1:1.4: GSM modem (1-port) converter detected<br />[ 1387.560000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2<br />[ 1387.570000] option 1-1:1.5: GSM modem (1-port) converter detected<br />[ 1387.580000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB3</p></blockquote></div><p>Install these packages<br /><strong>usb-modeswitch kmod-usb-net-rndis kmod-usb-net-cdc-ether kmod-usb-net</strong><br />Its CDC USB Ethernet as you can see in log <strong>CDC Ethernet Device, 02:00:ff:aa:aa:aa</strong><br />you have to create a new wan connection in luci, in physical settings select your new CDC interface, probably as eth2<br />Done!</p></blockquote></div><p>Thanks for replying!<br />All these packages are installed already.<br />I just managed to get it working <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Had to enter AT+CFUN=0 and then AT+CFUN=1 to activate the radio</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312175">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Naitachal</div>
					<div class="post-datetime">
						20 Feb 2016, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi can someone tell me how they got this working</p><p>did you use the <br />curl --header &quot;Referer: url=http://192.168.0.1/index.html&quot; <a href="http://192.168.0.1/index.html\\">http://192.168.0.1/index.html\&quot;</a> <a href="http://192.168.0.1/goform">http://192.168.0.1/goform</a><br />/goform_set_cmd_process?goformId=CONNECT_NETWORK</p><p>line?</p><p>Thank you<br />Dan</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>