<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tp-Link td-w8970</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 12 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p336008">
				<div class="post-metadata">
					<div class="post-num">Post #276</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						26 Aug 2016, 15:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks all for the details.</p><p>In my howto I am writing, I just installed Openwrt and reboot. I&#039;d guess at this point I can stop the process, shut down and carry on later. Right?</p><p>Then I&#039;ll install VDSL.<br />I downloaded from xdarklight.github.io (link in a previous post) the file<br />5.8.1.5.0.7-5.8.0.9.0.1 &nbsp; &nbsp; 29de7210958de4ba57464685f680dd66e6fb5b36 &nbsp; &nbsp; 898856 &nbsp; &nbsp; 8.1.5&nbsp; &nbsp; VDSL over ISDN incl. vectoring support.<br />I tried to sha1sum but it failed.<br />Other versions are not available any more.<br />Any help for that would be great as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336025">
				<div class="post-metadata">
					<div class="post-num">Post #277</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						26 Aug 2016, 15:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>z3non wrote:</cite><blockquote><p>Please note that there is no ATM-Bridge required in this setup. Be sure to have packages kmod-ltq-atm-vr9, ppp-mod-pppoa and kmod-pppoa installed. Also the kernel module ltq_ptm_vr9 must be unloaded for the DSL line to synchronize. If it remains loaded (lsmod) just uninstall the package kmod-ltq-ptm-vr9 and reboot.</p></blockquote></div><p>Yes because you are using pppoa. If you are on pppoe you will have to use the atm bridge for ADSL.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336026">
				<div class="post-metadata">
					<div class="post-num">Post #278</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						26 Aug 2016, 15:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>Then I&#039;ll install VDSL.<br />I downloaded from xdarklight.github.io (link in a previous post) the file<br />5.8.1.5.0.7-5.8.0.9.0.1 &nbsp; &nbsp; 29de7210958de4ba57464685f680dd66e6fb5b36 &nbsp; &nbsp; 898856 &nbsp; &nbsp; 8.1.5&nbsp; &nbsp; VDSL over ISDN incl. vectoring support.<br />I tried to sha1sum but it failed.<br />Other versions are not available any more.<br />Any help for that would be great as well.</p></blockquote></div><p>Follow the suggestion in the post above you. DD=Designated driver or LEDE comes with pre-installed VDSL firmware, no need to download it separately.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336029">
				<div class="post-metadata">
					<div class="post-num">Post #279</div>
					<div class="post-author">Scotch&#039;s</div>
					<div class="post-datetime">
						26 Aug 2016, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>@Toutatis</p><p>xdsl firmware (vdsl.bin) can be downloaded also from here: <a href="https://github.com/ScApi/P2812HNUFx-Pre-Build/tree/OpenWrt-Designated-Driver-r47026/F3%20OpenWRT/vdsl%20firmware">https://github.com/ScApi/P2812HNUFx-Pre … 20firmware</a></p><p>P.S. <br />Both OpenWrt Designated Driver and LEDE are Trunk versions - they changing frequently and are without GUI (LUCi).&nbsp; <br />Newest xdsl firmware will not work with CC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336046">
				<div class="post-metadata">
					<div class="post-num">Post #280</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						26 Aug 2016, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>Thank you Scotch&#039;s, I&#039;ll follow your way.</p><p>Now I have the vdsl.bin file and need to install it.<br />I had a look on /sbin/vdsl_fw_install.sh. I found the script at dev.openwrt.org/browser/trunk/package/kernel/lantiq/ltq-vdsl-fw/src/vdsl_fw_install.sh?rev=37007<br />My understanding of the script is that I need to copy/transfert the vdsl.bin file from the PC to /lib/firmware/vdsl.bin in the modem.<br />Am I right? Do I need to do something else?<br />What is the command using the terminal emulator?</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 26 Aug 2016, 18:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336053">
				<div class="post-metadata">
					<div class="post-num">Post #281</div>
					<div class="post-author">Scotch&#039;s</div>
					<div class="post-datetime">
						26 Aug 2016, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>All you have to do is to copy vdsl.bin file to /lib/firmware/ - in your router <br />I use for that WinSCP (under Windows) - for Linux you must use some other SCP program</p><p>Settings for VDSL connection:</p><p>You must modify 3 sections: &lt;config atm-bridge &#039;atm&#039;&gt;, &lt;config interface &#039;wan&#039;&gt;, &lt;config vdsl &#039;dsl&#039;&gt; - in: /etc/config/network</p><div class="codebox"><pre><code>#config atm-bridge &#039;atm&#039; - this section can be deleted
    #option vpi &#039;1&#039;
    #option vci &#039;32&#039;
    #option encaps &#039;llc&#039;
    #option payload &#039;bridged&#039;

config interface &#039;wan&#039;
    option ifname &#039;ptm0.35&#039;
    option proto &#039;pppoe&#039;
    option username &#039;login&#039;
    option password &#039;password&#039;
    option ipv6 &#039;0&#039;

config vdsl &#039;dsl&#039;
    option firmware &#039;/lib/firmware/vdsl.bin&#039;
    option tone &#039;av&#039;
    option xfer_mode &#039;ptm&#039;</code></pre></div><p>Note:<br />It is also possible that You must change 35 (VLAN ID) to the proper value - in line: option ifname &#039;ptm0.xx&#039;<br />But You must check first VLAN ID of Your ISP.</p>											<p class="post-edited">(Last edited by <strong>Scotch&#039;s</strong> on 26 Aug 2016, 20:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336059">
				<div class="post-metadata">
					<div class="post-num">Post #282</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						26 Aug 2016, 20:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Scotch&#039;s wrote:</cite><blockquote><p>It is also possible that You must change 35 (VLAN ID) to the proper value - in line: option ifname &#039;ptm0.xx&#039;<br />But You must check first VLAN ID of Your ISP.</p></blockquote></div><p>It&#039;s 101 if you are in the UK. It can be googled for each country.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336064">
				<div class="post-metadata">
					<div class="post-num">Post #283</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						26 Aug 2016, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>Could you confirm.<br />Reboot the modem, connect Ethernet cable, set static IP address to the PC: 192.168.1.2<br />Terminal: <br />scp /path/to/vdsl.bin admin@192.168.1.1:/lib/firmware/vdsl.bin<br />no password, just return</p><p>I am in Ireland with Vodafone and I don&#039;t know where to find the setup<br />BTW could you read this thread (I can&#039;t post URL)<br />h t t p s :<br />//community.vodafone.ie/t5/Technical-Support/Vodafone-VDSL-Settings-for-3rd-Party-Router/td-p/166813<br />and let me know your thoughts.</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 26 Aug 2016, 21:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336072">
				<div class="post-metadata">
					<div class="post-num">Post #284</div>
					<div class="post-author">Scotch&#039;s</div>
					<div class="post-datetime">
						26 Aug 2016, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Without connection details (i.e.login/password) you will not be able to establish internet connection on TD-W8970.<br />However You can still use your own router - connected to the VF router (their router will be working as modem only).</p><p>I did so - because my ISP router has better synchronization parameters than my TD-W8970<br />The only thing you have to do with VF router will be to disable WiFi and connect one of the LAN ports to LAN/WAN port of TD-W8970.</p><p>If that solution is OK for You - let me know,&nbsp; I&#039;ll describe how to prepare LAN port of TD-W8970 to work as WAN port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336115">
				<div class="post-metadata">
					<div class="post-num">Post #285</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						27 Aug 2016, 14:39					</div>
				</div>
				<div class="post-content content">
					<p>I am now in the process to install Openwrt.<br />I noticed something I want to be sure 100%.<br />In the howto the flash layout table for OEM 1.2 (I have this version) shows<br />mtd1 &nbsp; &nbsp; 0x00020000-0x00160000 &nbsp; &nbsp; kernel &nbsp; &nbsp; RAM executable &nbsp; &nbsp; kernel 2.6.32<br />mtd2 &nbsp; &nbsp; 0x00160000-0x007c0000 &nbsp; &nbsp; rootfs &nbsp; &nbsp; squashfs &nbsp; &nbsp; root <br />In the Installation direct to Flash, point 2e Erase the rootfs flash area:<br />sf erase 0x20000 0x7a0000<br />This command will erase from kernel and a part of rootfs, not all. Is it an error &quot;a&quot; instead of &quot;c&quot; for all the rootfs?<br />- Are the values correct?</p><p>After that I&#039;ll have to write image to flash<br />The length of the file vary with the version. When I copied the image file to the RAM I got the value<br />Bytes transferred = 4194308 (400004 hex)<br />I&#039;d guess I have to use this value but the difference with the howto seems big to me between 2 images versions (0x680004 vs 0x400004).<br />Maybe the author wanted to forecast the different versions and added some space but what is in the RAM after 0x40004 position to be transferred into flash?<br />What len should I use?<br />sf write 0x80800000 0x20000 0x400004</p><p>This is the part the most dangerous of the process, I need your help with all accuracy.<br />Many thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336132">
				<div class="post-metadata">
					<div class="post-num">Post #286</div>
					<div class="post-author">z3non</div>
					<div class="post-datetime">
						27 Aug 2016, 16:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Scotch&#039;s wrote:</cite><blockquote><p>Both OpenWrt Designated Driver and LEDE are Trunk versions - they changing frequently and are without GUI (LUCi).</p></blockquote></div><p>You are right that trunk versions change frequently and version change of kernel of libc can force you to perform a sysupgrade - which is kind of painful in my extroot-setup. But of course they have LuCI, it is just not included on the image. </p><div class="codebox"><pre><code>opkg update; opkg install luci luci-mod-admin-full</code></pre></div><p>does the job (once your router has internet connectivity). To avoid the frequent sysupgrades I created a private mirror of the relevant parts of the repository on an external storage (mounted USB disk, approx. 656 MB required):</p><br /><p>As we already have a web-server (the funky link-detection of this forum doesn&#039;t allow me to write its real name ...) running on our device, I just needed to link the mirrored folders into the /ww w folder:</p><div class="codebox"><pre><code>wget --recursive --no-parent h t t p : //downloads.lede-project.org/snapshots/targets/lantiq/xrx200/packages
wget --recursive --no-parent h t t p : //downloads.lede-project.org/snapshots/packages/mips_24kc</code></pre></div><div class="codebox"><pre><code>cd /ww w; ln -s /path/to/your/storage/mirror/downloads.lede-project.org/snapshots .</code></pre></div><p>I replaced the hostname with &#039;localhost&#039; in all lines from /etc/opkg/distfeeds.conf like this:</p><div class="codebox"><pre><code>src/gz reboot_core  h t t p : //localhost/snapshots/targets/lantiq/xrx200/packages</code></pre></div><p>Now I&#039;m pinned on a specific revision from the trunk without having changes of kernel version and libc every now and then. Another advantage of this setup is that I can continue to install/uninstall packages using opkg without internet connectivity.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336137">
				<div class="post-metadata">
					<div class="post-num">Post #287</div>
					<div class="post-author">z3non</div>
					<div class="post-datetime">
						27 Aug 2016, 17:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>sf erase 0x20000 0x7a0000<br />This command will erase from kernel and a part of rootfs, not all. Is it an error &quot;a&quot; instead of &quot;c&quot; for all the rootfs?<br />- Are the values correct?</p></blockquote></div><p>Yes, as explained in 3. </p><div class="quotebox"><cite>wiki wrote:</cite><blockquote><p>3. the rootfs area is 0x7c0000, erase command is to 0x7a000 and BB image is only 0x680004 in size, so it works anyway. If your image is bigger, custom or next release you see the size after tftpboot command and need to adjust it.</p></blockquote></div><p>You don&#039;t need to erase a larger area but if you want - it&#039;s your own risk. Just tell us if you were lucky ;-)</p><div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>What len should I use?<br />sf write 0x80800000 0x20000 0x400004</p></blockquote></div><p>looks good. Size matches exactly with sysupgrade image listed here: h t t p s <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" />/downloads.openwrt.org/chaos_calmer/15.05.1/lantiq/xrx200/</p><p>If your paranoia demands it, you can compare the sha256 sum of your file with the one listed here:<br />h t t p s <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" />/downloads.openwrt.org/chaos_calmer/15.05.1/lantiq/xrx200/sha256sums</p><p>If this still doesn&#039;t make you feel safe you can verify the GPG signature of the sha256sums file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336225">
				<div class="post-metadata">
					<div class="post-num">Post #288</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						28 Aug 2016, 13:50					</div>
				</div>
				<div class="post-content content">
					<p>I did it !<br />Everything smooth, looks working, I am happy</p><p>vdsl.bin is in /lib/firmware/ folder. I did reboot but I can&#039;t find anything related to vdsl. Sould I do something?<br />I am not skilled at all on WAN networking, I&#039;ll need help again.</p><p>Some info on my working config on vodafone modem:<br />ATM_TR069_VOIP_INTERNET_R_8_35&nbsp; &nbsp; IP_Routed (PPP)&nbsp; &nbsp; Disconnected&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; Enable<br />PTM_TR069_INTERNET_R_VID_10&nbsp; &nbsp; IP_Routed (PPP)&nbsp; &nbsp; Connected&nbsp; &nbsp;&nbsp; IPv4</p><p>ATM_TR069_VOIP_INTERNET_R_8_35:<br />WAN connection: &nbsp; &nbsp; Enable<br />Service list: &nbsp; &nbsp; INTERNET&nbsp; &nbsp; &nbsp;TR069&nbsp; &nbsp; &nbsp; &nbsp;VOIP<br />Connection type: &nbsp; &nbsp; IP_Routed (PPP)<br />Connection type: &nbsp; &nbsp; IPV4<br />NAT:&nbsp; NAPT<br />Authentication mode: &nbsp; &nbsp; Auto<br />Connection trigger: AlwaysOn<br />User name: (I can read it, grey out)<br />Password: (I CAN&#039;T read it, but maybe guess it, grey out)<br />Tunel Type: &nbsp; &nbsp; None<br />MRU: Auto<br />MSS: Auto</p><p>Where to copy this setup on the Openwrt?<br /></p><div class="quotebox"><cite>Scotch&#039;s wrote:</cite><blockquote><p>All you have to do is to copy vdsl.bin file to /lib/firmware/ - in your router <br />I use for that WinSCP (under Windows) - for Linux you must use some other SCP program</p><p>Settings for VDSL connection:</p><p>You must modify 3 sections: &lt;config atm-bridge &#039;atm&#039;&gt;, &lt;config interface &#039;wan&#039;&gt;, &lt;config vdsl &#039;dsl&#039;&gt; - in: /etc/config/network</p><div class="codebox"><pre><code>#config atm-bridge &#039;atm&#039; - this section can be deleted
    #option vpi &#039;1&#039;
    #option vci &#039;32&#039;
    #option encaps &#039;llc&#039;
    #option payload &#039;bridged&#039;

config interface &#039;wan&#039;
    option ifname &#039;ptm0.35&#039;
    option proto &#039;pppoe&#039;
    option username &#039;login&#039;
    option password &#039;password&#039;
    option ipv6 &#039;0&#039;

config vdsl &#039;dsl&#039;
    option firmware &#039;/lib/firmware/vdsl.bin&#039;
    option tone &#039;av&#039;
    option xfer_mode &#039;ptm&#039;</code></pre></div><p>Note:<br />It is also possible that You must change 35 (VLAN ID) to the proper value - in line: option ifname &#039;ptm0.xx&#039;<br />But You must check first VLAN ID of Your ISP.</p></blockquote></div><p>OK to do that but what do I need to use: ssh, serial or web interface?</p><p>Edit: Did it with ssh, now I have to test on WAN line</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 29 Aug 2016, 11:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336337">
				<div class="post-metadata">
					<div class="post-num">Post #289</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						29 Aug 2016, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>Again, sorry for my ignorance.<br />Now I have plugged the WAN line. In Status I can read:<br /></p><div class="codebox"><pre><code>ADSL Status
Status: UP
Line State: showtime_tc_sync [0x801]
Line Speed: 18.432 Mb/s / 5.116 Mb/s   (This is the speed I have with the other modem: OK)
Line Attenuation: 25.1 dB / 0 dB
Noise Margin: 12.5 dB / 10.3 dB</code></pre></div><p>The 2 first LED on the modem are steady ON.<br />System log says<br /></p><div class="codebox"><pre><code>Interface &#039;wan&#039; is enabled
Interface &#039;wan&#039; is setting up now
Plugin rp-pppoe.so loaded
RP-PPPoE plugin version 3.8p compiled against pppd 2.4.7
pppd 2.4.7 started by root, uid0</code></pre></div><p>Kernel log says<br /></p><div class="codebox"><pre><code>enter showtime
device ptm0 entered promiscuous mode
device ptm0 left promiscuous mode
IPv6: ADDRCONF (NETDEV_UP): ptmo.35: link is not ready
device ptm0 entered promiscuous mode
device ptm0 left promiscuous mode
IPv6: ADDRCONF (NETDEV_UP): ptmo.35: link is not ready
device ptm0 entered promiscuous mode</code></pre></div><p>Repeats the last 3 lines</p><p>What set-up I should add/change?<br />Do you need more info?</p><p>Thanks for your help</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 29 Aug 2016, 13:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336465">
				<div class="post-metadata">
					<div class="post-num">Post #290</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						30 Aug 2016, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>In your previous post <br /></p><div class="codebox"><pre><code>PTM_TR069_INTERNET_R_VID_10    IP_Routed (PPP)    Connected     IPv4</code></pre></div><p>so your provider is using PTM in vlan 10. <br />Your config show ptm0.35 . Change it to ptm0.10 in wan , change the o to 0 ( zero ) .</p>											<p class="post-edited">(Last edited by <strong>zhadoom</strong> on 30 Aug 2016, 00:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336517">
				<div class="post-metadata">
					<div class="post-num">Post #291</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						30 Aug 2016, 13:25					</div>
				</div>
				<div class="post-content content">
					<p>Thank you zhadoom, it&#039;s working now, you saved my day!</p><p>Now I&#039;ll play with it, set it up for my home lan then use it instead of the Vodafone one.<br />I&#039;ll attach a USB drive, maybe I&#039;ll have some question and I like the CRON to control WIFI.</p><p>Thanks again to z3non, Scotch&#039;s, dziny, rezad1393 and zhadoom</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336547">
				<div class="post-metadata">
					<div class="post-num">Post #292</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						30 Aug 2016, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>Another question:<br />I try to set port forwarding.<br />Match<br />IPv4-TCP, UDP<br />From any host in wan<br />Via any router IP at port 51413<br />Forward to<br />IP 192.168.1.115, port 51413 in lan<br />Enabled<br />However when I test the port is still closed.<br />Where is my error?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336553">
				<div class="post-metadata">
					<div class="post-num">Post #293</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						30 Aug 2016, 19:22					</div>
				</div>
				<div class="post-content content">
					<p>TCP port 51413 is used by transmission.<br />The machine at 192.168.1.115 have the software running ( listening the port 51413 ) ?<br />If that machine is windows based, is the firewall configured to accept incoming connections to that port ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336565">
				<div class="post-metadata">
					<div class="post-num">Post #294</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						30 Aug 2016, 20:21					</div>
				</div>
				<div class="post-content content">
					<p>Yes, this is Transmission running on 192.168.1.115, Linux. I do the Test port and result is &quot;closed&quot;<br />This was working 1 hour ago with my other modem</p><p>See the thead<br />ttps://forum.openwrt.org/viewtopic.php?id=66061<br />I had a look on the bug track #22762 LuCI creating firewall rule with wrong protocol.<br />I did the correction &#039;tcpudp&#039; =&gt; Nothing better<br />I did with and without option src_dport &#039;51413&#039; =&gt; Nothing better</p><p>Any other idea?</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 30 Aug 2016, 20:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336574">
				<div class="post-metadata">
					<div class="post-num">Post #295</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						30 Aug 2016, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Example of redirect that works in my router adapted to your ip and port.<br />In /etc/config/firewall<br /></p><div class="codebox"><pre><code>config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp udp&#039;
        option src_dport &#039;51413&#039;
        option dest_ip &#039;192.168.1.115&#039;
        option dest_port &#039;51413&#039;
        option name &#039;torrent1&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336576">
				<div class="post-metadata">
					<div class="post-num">Post #296</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						30 Aug 2016, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>This is mine<br /></p><div class="codebox"><pre><code>config redirect
    option target &#039;DNAT&#039;
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option proto &#039;tcpudp&#039;
    option dest_ip &#039;192.168.1.115&#039;
    option dest_port &#039;51413&#039;
    option name &#039;Transmission&#039;</code></pre></div><p>I tried<br />&nbsp; &nbsp; option proto &#039;tcp udp&#039;<br />nothing better<br />See post 21 The basic check list from<br />h ttps://forum.openwrt.org/viewtopic.php?id=36055<br />So far nothing found<br />Checked with canyouseeme.org as well</p><p>I am wandering if the position in the list is relevant. This redirect is the last in the /etc/config/firewall file.</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 30 Aug 2016, 21:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336581">
				<div class="post-metadata">
					<div class="post-num">Post #297</div>
					<div class="post-author">rezad1393</div>
					<div class="post-datetime">
						30 Aug 2016, 21:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>This is mine<br /></p><div class="codebox"><pre><code>config redirect
    option target &#039;DNAT&#039;
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option proto &#039;tcpudp&#039;
    option dest_ip &#039;192.168.1.115&#039;
    option dest_port &#039;51413&#039;
    option name &#039;Transmission&#039;</code></pre></div><p>I tried<br />&nbsp; &nbsp; option proto &#039;tcp udp&#039;<br />nothing better<br />See post 21 The basic check list from<br />h ttps://forum.openwrt.org/viewtopic.php?id=36055<br />So far nothing found<br />Checked with canyouseeme.org as well</p><p>I am wandering if the position in the list is relevant. This redirect is the last in the /etc/config/firewall file.</p></blockquote></div><p>the source port should be added . without that port forwarding doesn&#039;t mean anything.</p><p>and the option proto &#039;tcp udp&#039; should be that way too.<br />try them together.</p>											<p class="post-edited">(Last edited by <strong>rezad1393</strong> on 30 Aug 2016, 21:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336593">
				<div class="post-metadata">
					<div class="post-num">Post #298</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						30 Aug 2016, 21:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Toutatis wrote:</cite><blockquote><p>This is mine<br /></p><div class="codebox"><pre><code>config redirect
    option target &#039;DNAT&#039;
    option src &#039;wan&#039;
    option dest &#039;lan&#039;
    option proto &#039;tcpudp&#039;
    option dest_ip &#039;192.168.1.115&#039;
    option dest_port &#039;51413&#039;
    option name &#039;Transmission&#039;</code></pre></div><p>I tried<br />&nbsp; &nbsp; option proto &#039;tcp udp&#039;<br />nothing better<br />See post 21 The basic check list from<br />h ttps://forum.openwrt.org/viewtopic.php?id=36055<br />So far nothing found<br />Checked with canyouseeme.org as well</p><p>I am wandering if the position in the list is relevant. This redirect is the last in the /etc/config/firewall file.</p></blockquote></div><p>After changing the file /etc/config/firewall do you restart the firewall service ? <br />If not, do /etc/init.d/firewall restart .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336598">
				<div class="post-metadata">
					<div class="post-num">Post #299</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						30 Aug 2016, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>@ rezad1393<br /></p><div class="quotebox"><blockquote><p>the source port should be added . without that port forwarding doesn&#039;t mean anything.</p></blockquote></div><p>- Thread<br /><a href="https://forum.openwrt.org/viewtopic.php?id=36055">https://forum.openwrt.org/viewtopic.php?id=36055</a><br />Post 21<br />Point b) the source ip is either unset (should be this way) ...<br />However I did both =&gt; Not working</p><div class="quotebox"><blockquote><p>and the option proto &#039;tcp udp&#039; should be that way too.</p></blockquote></div><p>- As I wrote I did both =&gt; Not working</p><p>@ zhadoom<br />Sure I do it at every change, at least once to be certain and I check the output.</p><p>I did all the above again, =&gt; Not working</p>											<p class="post-edited">(Last edited by <strong>Toutatis</strong> on 30 Aug 2016, 22:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336735">
				<div class="post-metadata">
					<div class="post-num">Post #300</div>
					<div class="post-author">Toutatis</div>
					<div class="post-datetime">
						31 Aug 2016, 18:17					</div>
				</div>
				<div class="post-content content">
					<p>I had a lot of reading and checked the </p><div class="quotebox"><blockquote><p>The basic check list to run through before considering port forwards &quot;broken&quot;:</p></blockquote></div><p>What I don&#039;t know how to check or read the 3 points bellow:<br />f) accessing the own public ip from within the lan is not the same as actually testing a port forward from the outside. OpenWrt will attempt to setup some loopback rules but they only work by default if your lan network is called &quot;lan&quot;<br />i) use &quot;{ iptables -nvL; iptables -t nat -nvL; } | grep port-nr&quot; to see if you rules are actually reached, a counter of 0 means that either no traffic ever arrived or that the arriving traffic was not matched, because e.g. a bad &quot;src_ip&quot; is set<br />m) make sure the outgoing traffic is masqueraded (should be by default)</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 12 of 16</div><nav><ul><li><a href="viewtopic.php%3Fid=42380&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=42380&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42380&amp;p=16.html">16</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>