<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mac80211 support for STA and AP at the same time?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p170695">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">marko12345</div>
					<div class="post-datetime">
						22 Jun 2012, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello everybody,<br />I am playing with my tp-link wr703n with openwrt. It took a while but it seems to be doing almost everything that I want it to do.</p><p>The only problem, I see that I can&#039;t have the device act as an AP and a Wireless Client at the same time.</p><p>I believe that the problem is that &quot;mac80211 STA mode supported on trunk. STA and AP at the same time is not yet supported(r22989).&quot; as reported here <a href="http://wiki.openwrt.org/doc/uci/wireless">http://wiki.openwrt.org/doc/uci/wireless</a></p><p>Does anybody know whether and when STA and AP at the same time will be supported on mac80211?</p><p>Thanks,<br />M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170698">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						22 Jun 2012, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>r22989 ??<br />where did you get that ?<br />The latest downloadable trunk for 703n is r32481</p><p>I have 703n too.<br />I have been using it with STA and AP together to build a wifi repeater and wifi relay since the day I start using openwrt.<br />Meanwhile it is also an AP for another network zone.</p><p>So, what make you think it is not support ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170701">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">marko12345</div>
					<div class="post-datetime">
						22 Jun 2012, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>I am using OpenWrt Attitude Adjustment r32130 / LuCI Trunk (trunk+svn8702) which I downloaded from here: <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr703n">http://wiki.openwrt.org/toh/tp-link/tl-wr703n</a></p><p>Where can I find the latest release?</p><p>Since you are using wr703n too, will you please share your /etc/config/networking and /etc/config/wireless configuration files please?</p><p>Thanks a lot,<br />M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170704">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						22 Jun 2012, 18:20					</div>
				</div>
				<div class="post-content content">
					<p>When did you download that 32130 ?<br />Download again, it is 32481 !</p><p>My network is totally different from yours, that&#039;s not a good idea to just post it.<br />Maybe you post your see what is the problem.</p>											<p class="post-edited">(Last edited by <strong>johan666</strong> on 22 Jun 2012, 18:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170725">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">marko12345</div>
					<div class="post-datetime">
						22 Jun 2012, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>I upgraded and reconfigured everything, but without success.<br />Here are my config files:</p><p>/etc/config/network</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wifi&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.2.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.2.1&#039;</p><p>config interface &#039;wan_wifi&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><br /><br /><p>/etc/config/wireless</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option macaddr &#039;14:e6:e4:ec:ca:e2&#039;<br />&nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; option txpower &#039;20&#039;<br />&nbsp; &nbsp; option country &#039;US&#039;<br />&nbsp; &nbsp; option channel &#039;auto&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option network &#039;wifi&#039;<br />&nbsp; &nbsp; option ssid &#039;mcwifi&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;wpa_key_123&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option network &#039;wan_wifi&#039;<br />&nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;wpa_test_key&#039;<br />&nbsp; &nbsp; option ssid &#039;test&#039;</p><br /><p>At this time, I can use the wired interface as wan and connect clients through wireless (masquerading on).</p><p>The wr703n correctly connects as Client to the &quot;test&quot; network (I can see it gets an IP address and I can ping it) but once connected, it doesn&#039;t broadcast the &quot;mcwifi&quot; anymore and it can&#039;t be reached neither with webgui nor with ssh.</p><p>Any suggestions?</p><p>Thanks,<br />M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170802">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">marko12345</div>
					<div class="post-datetime">
						24 Jun 2012, 13:03					</div>
				</div>
				<div class="post-content content">
					<p>After some more researching I made some corrections, but still without success. Anyone can help?</p><p>Thanks!</p><br /><p>/etc/config/network</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;wan_wired&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;lan_wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;wlan0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.222.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway &#039;192.168.222.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns &#039;208.67.222.222 208.67.220.220 8.8.8.8&#039;</p><p>config interface &#039;wan_wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;wlan1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcp&#039;</p><br /><br /><p>/etc/config/wireless</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;auto&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option macaddr &#039;14:e6:e4:ec:ca:e2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;US&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan_wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;mcwifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;xxx&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;wan_wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;xxx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;RDCM&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option wds &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; #option disabled &#039;1&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171356">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">davor</div>
					<div class="post-datetime">
						2 Jul 2012, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>Having similar problem... did you fix yours?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172102">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">languagegame</div>
					<div class="post-datetime">
						12 Jul 2012, 04:12					</div>
				</div>
				<div class="post-content content">
					<p>I got this to work on latest trunk.&nbsp; Two items must be met.&nbsp; (1) The channel has to be set ahead of time in /etc/config/network to what the sta iface will use, and (2) the sta iface must associate correctly with the external access point.&nbsp; If these two are not met (at least on latest trunk), the openwrt access point will not work in parallel with the sta interface.</p>											<p class="post-edited">(Last edited by <strong>languagegame</strong> on 12 Jul 2012, 09:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172148">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">TheFonRanger</div>
					<div class="post-datetime">
						12 Jul 2012, 20:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>languagegame wrote:</cite><blockquote><p>I got this to work on latest trunk.&nbsp; Two items must be met.&nbsp; (1) The channel has to be set ahead of time in /etc/config/network to what the sta iface will use, and (2) the sta iface must associate correctly with the external access point.&nbsp; If these two are not met (at least on latest trunk), the openwrt access point will not work in parallel with the sta interface.</p></blockquote></div><p>Could you please tell me what release you used for this? I built r32673 and I am not having much luck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172183">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						13 Jul 2012, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>After r32587 has AP+STA problem.<br />r32685 has fixed this problem.<br />Current latest r32689 is working great.</p><p>Current downloadable build is still r32656.<br />So, you will need to wait until openwrt build system compile the latest, or compile yourself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172202">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">TheFonRanger</div>
					<div class="post-datetime">
						13 Jul 2012, 16:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><p>After r32587 has AP+STA problem.<br />r32685 has fixed this problem.<br />Current latest r32689 is working great.</p><p>Current downloadable build is still r32656.<br />So, you will need to wait until openwrt build system compile the latest, or compile yourself.</p></blockquote></div><p>Good to know.. I have r32673 on my device. Just updated my sources and will try again.</p><p>Thanks for the info!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172730">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Apprentice</div>
					<div class="post-datetime">
						19 Jul 2012, 14:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>languagegame wrote:</cite><blockquote><p>I got this to work on latest trunk.&nbsp; Two items must be met.&nbsp; (1) The channel has to be set ahead of time in /etc/config/network to what the sta iface will use, and (2) the sta iface must associate correctly with the external access point.&nbsp; If these two are not met (at least on latest trunk), the openwrt access point will not work in parallel with the sta interface.</p></blockquote></div><p>I have downloaded r32775 (18-Jul-2012 11:51) to my MR3020. It has WiFi AP and Client same time. If client can not connect to host (provider) - router`s AP do not start and I do not see it in Wireless. If client connects to provider - all works fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172953">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">arickbro</div>
					<div class="post-datetime">
						22 Jul 2012, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi Apprentice</p><p>could you share your configuration(wireless, network and firewall)?<br /> I&#039;ve used the latest trunk on MR3020, but still no success doing AP + STA at the time </p><p>regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173002">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Apprentice</div>
					<div class="post-datetime">
						23 Jul 2012, 08:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arickbro wrote:</cite><blockquote><p>Hi Apprentice</p><p>could you share your configuration(wireless, network and firewall)?<br /> I&#039;ve used the latest trunk on MR3020, but still no success doing AP + STA at the time </p><p>regards</p></blockquote></div><p>Hello Arickbro,<br />which type of client (STA) do you need - with static address or DHCP client?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173044">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">arickbro</div>
					<div class="post-datetime">
						23 Jul 2012, 16:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Apprentice wrote:</cite><blockquote><div class="quotebox"><cite>arickbro wrote:</cite><blockquote><p>Hi Apprentice</p><p>could you share your configuration(wireless, network and firewall)?<br /> I&#039;ve used the latest trunk on MR3020, but still no success doing AP + STA at the time </p><p>regards</p></blockquote></div><p>Hello Arickbro,<br />which type of client (STA) do you need - with static address or DHCP client?</p></blockquote></div><p>Hi Apprentice,</p><p>DHCP client for STA</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173051">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">arickbro</div>
					<div class="post-datetime">
						23 Jul 2012, 17:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arickbro wrote:</cite><blockquote><div class="quotebox"><cite>Apprentice wrote:</cite><blockquote><div class="quotebox"><cite>arickbro wrote:</cite><blockquote><p>Hi Apprentice</p><p>could you share your configuration(wireless, network and firewall)?<br /> I&#039;ve used the latest trunk on MR3020, but still no success doing AP + STA at the time </p><p>regards</p></blockquote></div><p>Hello Arickbro,<br />which type of client (STA) do you need - with static address or DHCP client?</p></blockquote></div><p>Hi Apprentice,</p><p>DHCP client for STA</p></blockquote></div><p>Hello Apprentice,</p><p>while ago, STA + AP works on MR3020,,,<br />just figure it out that I was wrong when writing ifname on &#039;etc/config/network</p><p>Cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173069">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Apprentice</div>
					<div class="post-datetime">
						23 Jul 2012, 20:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arickbro wrote:</cite><blockquote><p>Hi Apprentice</p><p>while ago, STA + AP works on MR3020,,,<br />just figure it out that I was wrong when writing ifname on &#039;etc/config/network</p><p>Cheers</p></blockquote></div><p>here current config of my MR3020 (some files was cutted ...):<br />network<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth0&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ipaddr &#039;192.168.99.1&#039;
    option gateway &#039;192.168.99.1&#039;
    option dns &#039;192.168.99.1&#039;
    option _orig_ifname &#039;eth0 wlan0&#039;
    option _orig_bridge &#039;true&#039;
    
config interface &#039;wwan&#039;
    option proto &#039;dhcp&#039;</code></pre></div><p>wireless<br /></p><div class="codebox"><pre><code>...
config wifi-iface
    option device &#039;radio0&#039;
    option mode &#039;ap&#039;
    option network &#039;lan&#039;
    option ssid &#039;OpenWrt&#039;
    option encryption &#039;psk2+ccmp&#039;
    option key &#039;xxxxxxx&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option mode &#039;sta&#039;
    option network &#039;wwan&#039;
    option ssid &#039;PROVIDER&#039;
    option encryption &#039;psk2&#039;
    option key &#039;yyyyyyy&#039;</code></pre></div><p>firewall<br /></p><div class="codebox"><pre><code>...
config zone
    option name &#039;lan&#039;
    option network &#039;lan&#039;
    option input &#039;ACCEPT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;

config zone
    option name &#039;wan&#039;
    option input &#039;REJECT&#039;
    option output &#039;ACCEPT&#039;
    option forward &#039;REJECT&#039;
    option masq &#039;1&#039;
    option network &#039;wan wwan&#039;

config forwarding
    option src &#039;lan&#039;
    option dest &#039;wan&#039;
...</code></pre></div><p>dhcp<br /></p><div class="codebox"><pre><code>...
config dhcp &#039;lan&#039;
...
    option force &#039;1&#039;

config dhcp &#039;wan&#039;
    option interface &#039;wan&#039;
    option ignore &#039;1&#039;</code></pre></div><p>Please keep in mind - if your dhcp client to wan will not setup properly then wifi AP will not starts and you will connect to router <strong>only by Lan</strong>.</p><p>And your wifi channel <strong>must be equal</strong> to wifi channel of provider (wifi - which you want connect)!</p><p>config wifi-device &#039;radio0&#039;<br />...<br />&nbsp; &nbsp; option channel &#039;3&#039;</p>											<p class="post-edited">(Last edited by <strong>Apprentice</strong> on 23 Jul 2012, 20:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173657">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">languagegame</div>
					<div class="post-datetime">
						30 Jul 2012, 07:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TheFonRanger wrote:</cite><blockquote><div class="quotebox"><cite>languagegame wrote:</cite><blockquote><p>I got this to work on latest trunk.&nbsp; Two items must be met.&nbsp; (1) The channel has to be set ahead of time in /etc/config/network to what the sta iface will use, and (2) the sta iface must associate correctly with the external access point.&nbsp; If these two are not met (at least on latest trunk), the openwrt access point will not work in parallel with the sta interface.</p></blockquote></div><p>Could you please tell me what release you used for this? I built r32673 and I am not having much luck.</p></blockquote></div><p>I was using a prior version (early July) of attitude adjustment on a MR3020.</p><p>I just tried the latest attitude adjustment, but it doesn&#039;t work.</p>											<p class="post-edited">(Last edited by <strong>languagegame</strong> on 30 Jul 2012, 17:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173695">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						30 Jul 2012, 16:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>languagegame wrote:</cite><blockquote><div class="quotebox"><cite>TheFonRanger wrote:</cite><blockquote><div class="quotebox"><cite>languagegame wrote:</cite><blockquote><p>I got this to work on latest trunk.&nbsp; Two items must be met.&nbsp; (1) The channel has to be set ahead of time in /etc/config/network to what the sta iface will use, and (2) the sta iface must associate correctly with the external access point.&nbsp; If these two are not met (at least on latest trunk), the openwrt access point will not work in parallel with the sta interface.</p></blockquote></div><p>Could you please tell me what release you used for this? I built r32673 and I am not having much luck.</p></blockquote></div><p>I was using latest 10.03.1 backfire on a MR3020</p></blockquote></div><p>Hello I am trying to run the same configuration sample (sta + ap at the same time), but I am facing the same issue - only one of both virtual wireless interfaces is working.</p><p>I am trying to achieve this on TP-Link MR3220. Tried the latest official trunk and one compiled by myself today - r32910.</p><p>Should I try to build an older trunk snapshot image? Is the issue resolved?</p>											<p class="post-edited">(Last edited by <strong>dir2cas</strong> on 30 Jul 2012, 16:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173701">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">languagegame</div>
					<div class="post-datetime">
						30 Jul 2012, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>Try a version of attitude adjustment from July 11th or 12th.&nbsp; I did have this working on an Tp-link MR-3020.</p><p>I can confirm latest version of attitude adjustment no longer works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173705">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">EXcomZkko</div>
					<div class="post-datetime">
						30 Jul 2012, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>Same issue with WR1043ND. Latest trunks are has this problem.</p><p>Try r32775, it works for me.</p><br /><br /><p>I&#039;have created a ticket for this. -&gt; <a href="https://dev.openwrt.org/ticket/11942">https://dev.openwrt.org/ticket/11942</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173706">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						30 Jul 2012, 19:52					</div>
				</div>
				<div class="post-content content">
					<p>there is already a bugreport, and you will find a workaround there.<br /><a href="https://dev.openwrt.org/ticket/11914">https://dev.openwrt.org/ticket/11914</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173750">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						31 Jul 2012, 10:45					</div>
				</div>
				<div class="post-content content">
					<p>I confirm myself the problem was firstly spotted by me since r32885.</p><p>I will try to build an image synchronized with the older attitude adjustment 32775 and will test again.<br />Hope the developers will look into the bug report soon.</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173771">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						31 Jul 2012, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>Hello All,</p><p>I just flashed and my configuration works with r32775</p><div class="codebox"><pre><code>root@sinemorec:~# iwconfig 
gre0      no wireless extensions.

lo        no wireless extensions.

eth1      no wireless extensions.

wlan0-1   IEEE 802.11bgn  ESSID:&quot;myWLAN&quot;  
          Mode:Managed  Frequency:2.412 GHz  Access Point: 94:0C:XX:XX:XX:XX   
          Bit Rate=65 Mb/s   Tx-Power=17 dBm
          RTS thr=2346 B   Fragment thr=2346 B   
          Encryption key:off
          Power Management:off
          Link Quality=51/70  Signal level=-59 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:1  Invalid misc:277   Missed beacon:0

wlan0     IEEE 802.11bgn  Mode:Master  Tx-Power=17 dBm   
          RTS thr=2346 B   Fragment thr=2346 B   
          Power Management:on
          
eth0      no wireless extensions.

br-lan    no wireless extensions.

root@sinemorec:~# 
root@sinemorec:~# cat /etc/openwrt_release 
DISTRIB_ID=&quot;OpenWrt&quot;
DISTRIB_RELEASE=&quot;Bleeding Edge&quot;
DISTRIB_REVISION=&quot;r32775&quot;
DISTRIB_CODENAME=&quot;attitude_adjustment&quot;
DISTRIB_TARGET=&quot;ar71xx/generic&quot;
DISTRIB_DESCRIPTION=&quot;OpenWrt Attitude Adjustment r32775&quot;
root@sinemorec:~# dmesg | head -n1
[    0.000000] Linux version 3.3.8 (dir2cas@wrt) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Tue Jul 31 12:03:34 EEST 2012</code></pre></div><p>Thanks to all of you. <br />However I hope we will see the fix soon in the latest trunk.</p><p>Regards,<br />dir2cas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173913">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">dir2cas</div>
					<div class="post-datetime">
						2 Aug 2012, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>Hello again. The above mentioned build is working fine. I managed to setup a usb flash drive as /overlay in oder to use it as extroot. </p><p>Unfortunately I see several packages could not be installed because of kernel version issue or something like that.<br /></p><div class="codebox"><pre><code>[root@sinemorec:/root]# opkg install ip tc tcpdump
Installing ip (3.3.0-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/ip_3.3.0-1_ar71xx.ipk.
Installing tc (3.3.0-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/tc_3.3.0-1_ar71xx.ipk.
Installing tcpdump (4.2.1-1) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/tcpdump_4.2.1-1_ar71xx.ipk.
Installing libpcap (1.1.1-2) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/libpcap_1.1.1-2_ar71xx.ipk.
Configuring ip.
Configuring libpcap.
Configuring tcpdump.
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for tc:
 *     kernel (= 3.3.8-1-46f485e35dfc28b6c826676f5d46487d) * 
 * opkg_install_cmd: Cannot install package tc.
[root@sinemorec:/root]# opkg install openvpn
Installing openvpn (2.2.2-2) to root...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/openvpn_2.2.2-2_ar71xx.ipk.
Collected errors:
 * satisfy_dependencies_for: Cannot satisfy the following dependencies for openvpn:
 *     kernel (= 3.3.8-1-46f485e35dfc28b6c826676f5d46487d) * 
 * opkg_install_cmd: Cannot install package openvpn.</code></pre></div><p>Well, in fact the problem is not exactly for this thread, no idea if it is related to this revision r32775.<br />Thanks in advance,<br />dir2cas</p>											<p class="post-edited">(Last edited by <strong>dir2cas</strong> on 2 Aug 2012, 23:48)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>