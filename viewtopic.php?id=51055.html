<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WR1043ND V1 Autoreboot loop</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p236219">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ralexandru</div>
					<div class="post-datetime">
						10 Jun 2014, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve got a TP-LINK TL-TL-WR1043ND V1.8 that I&#039;d like to restore to factory firmware. I&#039;ve managed to get the serial console up and running and following the instructions on the openwrt wiki I&#039;ve managed to get write the TL-WR1043ND-V1-stripped firmware. However after doing that my router gets into a auto-reboot cycle. Any ideas how I could manage to get it back up&amp;running?</p><p>Thanks</p><br /><p>############################<br />U-Boot 1.1.4 (Apr 28 2011 - 15:55:09)</p><p>AP83 (ar9100) U-boot 0.0.11<br />DRAM:<br />sri<br />32 MB<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag7100_enet_initialize...<br />No valid address in Flash. Using fixed address<br />: cfg1 0xf cfg2 0x7114<br />eth0: 00:03:7f:09:0b:ad<br />eth0 up<br />eth0<br />Autobooting in 1 seconds## Booting image at bf020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>Linux version 2.6.15--LSDK-6.1.1.40 (root@localhost.localdomain) (gcc version 3.4.4) #9 Sun Apr 28 16:02:56 CST 2013<br />flash_size passed from bootloader = 8<br />CPU revision is: 00019374<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />User-defined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Built 1 zonelists<br />Kernel command line: console=ttyS0,115200 root=/dev/mtdblock2 rootfstype=squashfs init=/sbin/init mtdparts=ar7100-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art) mem=32M<br />Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, linesize 32 bytes.<br />Synthesized TLB refill handler (20 instructions).<br />Synthesized TLB load handler fastpath (32 instructions).<br />Synthesized TLB store handler fastpath (32 instructions).<br />Synthesized TLB modify handler fastpath (31 instructions).<br />Cache parity protection disabled<br />PID hash table entries: 256 (order: 8, 4096 bytes)<br />Using 200.000 MHz high precision timer.<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 30516k/32768k available (1407k kernel code, 2236k reserved, 300k data, 112k init, 0k highmem)<br />Mount-cache hash table entries: 512<br />Checking for &#039;wait&#039; instruction...&nbsp; available.<br />NET: Registered protocol family 16<br />Jumpstart button pressed.<br />SCSI subsystem initialized<br />AR7100 GPIOC major 0<br />squashfs: version 3.3 (2007/10/31) Phillip Lougher<br />squashfs: LZMA suppport for slax.org by jro<br />Initializing Cryptographic API<br />io scheduler noop registered<br />io scheduler deadline registered<br />Serial: 8250/16550 driver $Revision: #2 $ 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A<br />RAMDISK driver initialized: 1 RAM disks of 8192K size 1024 blocksize<br />PPP generic driver version 2.4.2<br />PPPoX init, max protocols:3<br />NET: Registered protocol family 24<br />pppox protocol 0 register. max:3<br />cmdlinepart partition parsing not available<br />Searching for RedBoot partition table<br />5 RedBoot partitions found on MTD device ar7100-nor0<br />Creating 5 MTD partitions on &quot;ar7100-nor0&quot;:<br />0x00000000-0x00020000 : &quot;boot&quot;<br />0x00020000-0x00120000 : &quot;kernel&quot;<br />0x00120000-0x007e0000 : &quot;rootfs&quot;<br />0x007e0000-0x007f0000 : &quot;config&quot;<br />0x007f0000-0x00800000 : &quot;art&quot;<br />-&gt;Oops: flash id 0x10216 .<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 512 (order: -1, 2048 bytes)<br />TCP established hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />TCP bic registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />ar7100wdt_init: Registering WDT success<br />watch dog proc create successfully.<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 112k freed<br />init started:&nbsp; BusyBox v1.01 (2013.03.25-01:36+0000) multi-call binary<br />Algorithmics/MIPS FPU Emulator v1.5<br />This board use 2.6.15<br />ip_tables: (C) 2000-2002 Netfilter core team<br />ip_conntrack version 2.4 (256 buckets, 5120 max) - 244 bytes per conntrack<br />ip_conntrack_pptp version 3.1 loaded<br />insmod: cannot open module `/lib/modules/2.6.15/kernel/flashid.ko&#039;: No such file or directory<br />pppox protocol 1 register. max:3<br />PPPoL2TP kernel driver, V0.17. fixed many bug. drop rcv pkts and xmit pkts while no buffer, use pass time HZ/4.only drop ip pkt. no printk. xl2tpd 15 retries xmit. 08.20<br />PPTP driver version 0.8.3<br />pppox protocol 2 register. max:3<br />insmod: cannot open module `/lib/modules/2.6.15/kernel/harmony.ko&#039;: No such file or directory<br />insmod: cannot open module `/lib/modules/2.6.15/kernel/cdc-acm.ko&#039;: No such file or directory<br />Now flash open!<br />Now flash open!</p><p> (none) mips #9 Sun Apr 28 16:02:56 CST 2013 (none)<br />(none) login: Realtek switch id is: 0x0<br />AG7100: Length per segment 1536<br />AG7100: Max segments per packet 1<br />AG7100: Max tx descriptor count&nbsp; &nbsp; 40<br />AG7100: Max rx descriptor count&nbsp; &nbsp; 252<br />AG7100: fifo cfg 3 00780008<br />chip ID is 0x00005937<br />rtl8368s_getAsicPHYRegs(0, 1, 22, &amp;data) return is 0, data is 0x00001000<br />++ PVID: 0x00000001, bitmap: 0x00000021<br />++ PVID: 0x00000003, bitmap: 0x0000003e<br />++ PVID: 0x00000005, bitmap: 0x0000003e<br />++ PVID: 0x00000007, bitmap: 0x0000003e<br />++ PVID: 0x00000009, bitmap: 0x0000003e<br />vtable vid: 0x00000002, bitmap 0x00000022<br />vtable vid: 0x00000004, bitmap 0x00000024<br />vtable vid: 0x00000006, bitmap 0x00000026<br />vtable vid: 0x00000008, bitmap 0x00000028<br />vtable vid: 0x0000000a, bitmap 0x0000002a<br />vtable vid: 0x0000000c, bitmap 0x0000002c<br />vtable vid: 0x0000000e, bitmap 0x0000002e<br />vtable vid: 0x00000010, bitmap 0x00000030<br />vtable vid: 0x00000012, bitmap 0x00000032<br />vtable vid: 0x00000014, bitmap 0x00000034<br />vtable vid: 0x00000016, bitmap 0x00000036<br />vtable vid: 0x00000018, bitmap 0x00000038<br />vtable vid: 0x0000001a, bitmap 0x0000003a<br />vtable vid: 0x0000001c, bitmap 0x0000003c<br />vtable vid: 0x0000001e, bitmap 0x0000003e<br />Writing 4<br />SIOCETHTOOL<br />bridge: can&#039;t decode speed from eth0: 0<br />device eth0 entered promiscuous mode<br />Now flash open!<br />Writing 4<br />br0: port 1(eth0) entering learning state<br />br0: topology change detected, propagating<br />br0: port 1(eth0) entering forwarding state<br />tp_domain: module license &#039;BSD&#039; taints kernel.<br />ip_nat_pptp version 3.0 loaded<br />ip_conntrack_rtsp v0.01 loading<br />ip_nat_rtsp v0.01 loading<br />ath_hal: 0.9.17.1 (AR5416, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)<br />wlan: 0.8.4.2 (Atheros/multi-bss)<br />ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved<br />ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved<br />ath_ahb: 0.9.4.5 (Atheros/multi-bss)<br />Howl Revision ID 0xb9 &lt;6&gt;wifi0: Atheros AR9100 WiSoC: mem=0xb80c0000, irq=2<br />wlan_me: Version 0.1<br />Copyright (c) 2008 Atheros Communications, Inc. All Rights Reserved<br />wlan: mac acl policy registered</p><p>TP_Flags:6****</p><p>############################</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p236262">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						10 Jun 2014, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d post full serial log of what you did and what file you used...</p><p>also i don&#039;t see the boot-loop, is it restarting after TP__Flags:6*** ??</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>