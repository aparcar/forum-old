<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PC can not ping router under IPV6 mode</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p312095">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">yongjiah</div>
					<div class="post-datetime">
						19 Feb 2016, 05:41					</div>
				</div>
				<div class="post-content content">
					<p>Dear All,<br />&nbsp; &nbsp; &nbsp; I am trying to enable IPV6 in my router. Now I met a strange issue. <br />&nbsp; &nbsp; &nbsp; The prefix in my enviroment is 2001::/64. After configing the ip6prefix into WAN interface, the LAN can get an global IPV6: 2001::2. The WAN can get 2001::1. The PC connecting to router also can get its global IPV6 address. <br />&nbsp; &nbsp; &nbsp; The router can ping network server. But PC can not ping network server and can not ping LAN&#039;s IPV6 address. But if I disable WAN in the router (ifconfig WAN4 down), the PC can ping LAN&#039;s IPV6 address (2001::2). Could any experts please help to guide me what the problem is? Thanks!<br />&nbsp; &nbsp; &nbsp;The configuration in my router is:</p><p>/etc/config/network:<br />config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;usbnet0 eth0&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;64&#039;</p><p>config interface &#039;wan4&#039;<br />&nbsp; &nbsp; option ifname &#039;ccinet4&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option auto &#039;1&#039;<br />&nbsp; &nbsp; option ip6addr &#039;fe80::1/64&#039;<br />&nbsp; &nbsp; option ip6prefix &#039;2001:0000:0000:0000:0000:0000:0000:0001/64&#039;</p><br /><p>config interface &#039;wlan&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wlan6&#039;<br />&nbsp; &nbsp; option proto &#039;dhcpv6&#039;</p><p>===========================================================</p><p>/etc/config/dhcp:</p><p>config dnsmasq<br />&nbsp; &nbsp; option domainneeded &#039;1&#039;<br />&nbsp; &nbsp; option boguspriv &#039;1&#039;<br />&nbsp; &nbsp; option filterwin2k &#039;0&#039;<br />&nbsp; &nbsp; option localise_queries &#039;1&#039;<br />&nbsp; &nbsp; option rebind_protection &#039;1&#039;<br />&nbsp; &nbsp; option rebind_localhost &#039;1&#039;<br />&nbsp; &nbsp; option local &#039;/lan/&#039;<br />&nbsp; &nbsp; option domain &#039;lan&#039;<br />&nbsp; &nbsp; option expandhosts &#039;1&#039;<br />&nbsp; &nbsp; option nonegcache &#039;0&#039;<br />&nbsp; &nbsp; option authoritative &#039;1&#039;<br />&nbsp; &nbsp; option readethers &#039;1&#039;<br />&nbsp; &nbsp; option leasefile &#039;/tmp/dhcp.leases&#039;<br />&nbsp; &nbsp; option resolvfile &#039;/tmp/resolv.conf.auto&#039;<br />&nbsp; &nbsp; option dhcpscript &#039;/lib/stat/dhcp_action.sh&#039;</p><p>config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;<br />&nbsp; &nbsp; option dhcpv6 &#039;server&#039;<br />&nbsp; &nbsp; option ra &#039;server&#039;</p><br /><p>config dhcp &#039;wan4&#039;<br />&nbsp; &nbsp; option interface &#039;wan4&#039;<br />&nbsp; &nbsp; option ignore &#039;1&#039;</p><br /><p>config odhcpd &#039;odhcpd&#039;<br />&nbsp; &nbsp; option maindhcp &#039;0&#039;<br />&nbsp; &nbsp; option leasefile &#039;/tmp/hosts/odhcpd&#039;<br />&nbsp; &nbsp; option leasetrigger &#039;/usr/sbin/odhcpd-update&#039;</p><p>===========================================================</p><p>/etc/config/firewall:</p><p>config defaults<br />&nbsp; &nbsp; option syn_flood &#039;1&#039;<br />&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;REJECT&#039;</p><p>config zone<br />&nbsp; &nbsp; option name &#039;lan&#039;<br />&nbsp; &nbsp; list network &#039;lan&#039;<br />&nbsp; &nbsp; option input &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;ACCEPT&#039;</p><p>config zone<br />&nbsp; &nbsp; option name &#039;wan&#039;<br />&nbsp; &nbsp; list network &#039;wan0&#039;<br />&nbsp; &nbsp; list network &#039;wan1&#039;<br />&nbsp; &nbsp; list network &#039;wan2&#039;<br />&nbsp; &nbsp; list network &#039;wan3&#039;<br />&nbsp; &nbsp; list network &#039;wan4&#039;<br />&nbsp; &nbsp; list network &#039;wan5&#039;<br />&nbsp; &nbsp; list network &#039;wan6&#039;<br />&nbsp; &nbsp; list network &#039;wan7&#039;<br />&nbsp; &nbsp; list network &#039;wan60&#039;<br />&nbsp; &nbsp; list network &#039;wan61&#039;<br />&nbsp; &nbsp; list network &#039;wan62&#039;<br />&nbsp; &nbsp; list network &#039;wan63&#039;<br />&nbsp; &nbsp; list network &#039;wan64&#039;<br />&nbsp; &nbsp; list network &#039;wan65&#039;<br />&nbsp; &nbsp; list network &#039;wan66&#039;<br />&nbsp; &nbsp; list network &#039;wan67&#039;<br />&nbsp; &nbsp; list network &#039;wlan&#039;<br />&nbsp; &nbsp; list network &#039;wlan6&#039;<br />&nbsp; &nbsp; option input &#039;REJECT&#039;<br />&nbsp; &nbsp; option output &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option forward &#039;REJECT&#039;<br />&nbsp; &nbsp; option masq &#039;1&#039;<br />&nbsp; &nbsp; option mtu_fix &#039;1&#039;</p><p>config forwarding<br />&nbsp; &nbsp; option src &#039;lan&#039;<br />&nbsp; &nbsp; option dest &#039;wan&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-SIP&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;tcpudp&#039;<br />&nbsp; &nbsp; option dest_port &#039;5060&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-RTP-port-range&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;udp&#039;<br />&nbsp; &nbsp; option dest_port &#039;4040:4060&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-ipsec-port-range&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;tcpudp&#039;<br />&nbsp; &nbsp; option dest_port &#039;10000:101023&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-DHCP-Renew&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;udp&#039;<br />&nbsp; &nbsp; option dest_port &#039;68&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option family &#039;ipv4&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-Ping&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; option icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; option family &#039;ipv4&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-DHCPv6&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;udp&#039;<br />&nbsp; &nbsp; option src_ip &#039;fe80::/10&#039;<br />&nbsp; &nbsp; option src_port &#039;547&#039;<br />&nbsp; &nbsp; option dest_ip &#039;fe80::/10&#039;<br />&nbsp; &nbsp; option dest_port &#039;546&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Input&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br />&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br />&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br />&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br />&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br />&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br />&nbsp; &nbsp; list icmp_type &#039;router-solicitation&#039;<br />&nbsp; &nbsp; list icmp_type &#039;neighbour-solicitation&#039;<br />&nbsp; &nbsp; list icmp_type &#039;router-advertisement&#039;<br />&nbsp; &nbsp; list icmp_type &#039;neighbour-advertisement&#039;<br />&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-ICMPv6-Forward&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option dest &#039;*&#039;<br />&nbsp; &nbsp; option proto &#039;icmp&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-request&#039;<br />&nbsp; &nbsp; list icmp_type &#039;echo-reply&#039;<br />&nbsp; &nbsp; list icmp_type &#039;destination-unreachable&#039;<br />&nbsp; &nbsp; list icmp_type &#039;packet-too-big&#039;<br />&nbsp; &nbsp; list icmp_type &#039;time-exceeded&#039;<br />&nbsp; &nbsp; list icmp_type &#039;bad-header&#039;<br />&nbsp; &nbsp; list icmp_type &#039;unknown-header-type&#039;<br />&nbsp; &nbsp; option limit &#039;1000/sec&#039;<br />&nbsp; &nbsp; option family &#039;ipv6&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><p>config include<br />&nbsp; &nbsp; option path &#039;/etc/firewall.user&#039;</p><p>config rule<br />&nbsp; &nbsp; option name &#039;Allow-TR069&#039;<br />&nbsp; &nbsp; option src &#039;wan&#039;<br />&nbsp; &nbsp; option proto &#039;tcpudp&#039;<br />&nbsp; &nbsp; option dest_port &#039;8080&#039;<br />&nbsp; &nbsp; option target &#039;ACCEPT&#039;</p><br /><p>==========================================================<br />ifconfig result:</p><p>root@OpenWrt:/etc# ifconfig<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr FA:61:56:12:3D:D0&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::f861:56ff:fe12:3dd0/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: 2001::2/64 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:856 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:283 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:51984 (50.7 KiB)&nbsp; TX bytes:20837 (20.3 KiB)</p><p>ccinet4&nbsp; &nbsp;Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::1/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: 2001::1/64 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP RUNNING NOARP&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2471 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2482 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:214344 (209.3 KiB)&nbsp; TX bytes:247800 (241.9 KiB)</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:4626 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:4626 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:332400 (324.6 KiB)&nbsp; TX bytes:332400 (324.6 KiB)</p><p>uap0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:8C:E3:E8:6B:98&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::28c:e3ff:fee8:6b98/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:146 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>usbnet0&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr FA:61:56:12:3D:D0&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:938 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:257 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:59851 (58.4 KiB)&nbsp; TX bytes:33351 (32.5 KiB)</p>											<p class="post-edited">(Last edited by <strong>yongjiah</strong> on 19 Feb 2016, 08:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312104">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">yongjiah</div>
					<div class="post-datetime">
						19 Feb 2016, 08:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,<br />&nbsp; &nbsp; I tried to modify the dhcp configuation. After that, PC can ping router via IPV6. But PC can not ping network yet. <br />&nbsp; &nbsp; My Action is:<br />1. modify dhcp from:<br />config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;<br />&nbsp; &nbsp; option dhcpv6 &#039;server&#039;<br />&nbsp; &nbsp; option ra &#039;server&#039;</p><p>config dhcp &#039;wan4&#039;<br />&nbsp; &nbsp; option interface &#039;wan4&#039;<br />&nbsp; &nbsp; option ignore &#039;1&#039;</p><p>to</p><p>config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;<br />&nbsp; &nbsp; option ndp&#039;relay&#039;<br />&nbsp; &nbsp; option ra &#039;rekay&#039;</p><p>config dhcp &#039;wan4&#039;<br />&nbsp; &nbsp; option interface &#039;wan4&#039;<br />&nbsp; &nbsp; option ndp &#039;relay&#039;<br />&nbsp; &nbsp; option ra &#039;relay&#039;<br />&nbsp; &nbsp; option master &#039;1&#039;</p><p>2. /etc/init.d/odhcpd restart</p><p>What do I miss? Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312173">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						20 Feb 2016, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Please read through the IPv6 network guide:</p><p><a href="https://wiki.openwrt.org/doc/uci/network6">https://wiki.openwrt.org/doc/uci/network6</a></p><p>and make sure you understand the principles and how to configure.&nbsp; Then you should be able to start problem solving.</p><p>Which OpenWRT version are you using?&nbsp; That will make a large difference for IPv6.</p><p>If you&#039;re using a recent version your &quot;option ip6addr&quot; and &quot;option ip6prefix&quot; are almost certainly wrong.&nbsp; ip6addr is the IPv6 address in CIDR notation of your (upstream) wan interface.&nbsp; ip6gw is the gateway to route through on this upstream link.&nbsp; ip6prefix is the IPv6 subnet prefix in CIDR notation assigned to your (downstream) lan interface.&nbsp; 2001::/64 is not a valid subnet even if you intend to use it privately and never route it globally.&nbsp; You should use the default ULA which is assigned in recent OpenWRT versions.</p><p>I&#039;m fairly new so have no experience with Barrier Breaker and older.&nbsp; But, your interface names seem strange.&nbsp; I&#039;d recommend using LuCI to configure if you&#039;re new to setting up IPv6 on OpenWRT.</p><p>If any experts read this and find errors, please post corrections.&nbsp; Good luck <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Clemmitt</p>											<p class="post-edited">(Last edited by <strong>cmsigler</strong> on 20 Feb 2016, 00:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312295">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">yongjiah</div>
					<div class="post-datetime">
						22 Feb 2016, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />&nbsp; &nbsp; Thanks for your reply!<br />&nbsp; &nbsp; The version used in my side is 14.07. <br />&nbsp; &nbsp; Currently I found a strange thing on routing. The following are results by using &quot;ifstatus wan4&quot; and &quot;route -A inet6&quot;. </p><p>ifstatus wan4:<br />{<br />&nbsp; &nbsp; &quot;up&quot;: true,<br />&nbsp; &nbsp; &quot;pending&quot;: false,<br />&nbsp; &nbsp; &quot;available&quot;: true,<br />&nbsp; &nbsp; &quot;autostart&quot;: true,<br />&nbsp; &nbsp; &quot;uptime&quot;: 172,<br />&nbsp; &nbsp; &quot;l3_device&quot;: &quot;ccinet4&quot;,<br />&nbsp; &nbsp; &quot;proto&quot;: &quot;static&quot;,<br />&nbsp; &nbsp; &quot;device&quot;: &quot;ccinet4&quot;,<br />&nbsp; &nbsp; &quot;updated&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;addresses&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;prefixes&quot;<br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;metric&quot;: 0,<br />&nbsp; &nbsp; &quot;delegation&quot;: true,<br />&nbsp; &nbsp; &quot;ipv4-address&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;ipv6-address&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;address&quot;: &quot;fe80::1&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;mask&quot;: 64<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;ipv6-prefix&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;address&quot;: &quot;2001::&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;mask&quot;: 64,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;class&quot;: &quot;wan4&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;assigned&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;lan&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;address&quot;: &quot;2001::&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;mask&quot;: 64<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;ipv6-prefix-assignment&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;route&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;dns-server&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;dns-search&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; ],<br />&nbsp; &nbsp; &quot;inactive&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;ipv4-address&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;ipv6-address&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;route&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;dns-server&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;dns-search&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; ]<br />&nbsp; &nbsp; },<br />&nbsp; &nbsp; &quot;data&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; }<br />}</p><p>==============================================<br />route -A inet6:<br />Kernel IPv6 routing table<br />Destination&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Next Hop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Flags Metric Ref&nbsp; &nbsp; Use Iface<br />2001::/64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 ccinet4 <br />2001::/64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan&nbsp; <br />2001::/64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;1024&nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan&nbsp; <br />fe80::/64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan&nbsp; <br />fe80::/64&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 ccinet4 <br />::1/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 2&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />2001::/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />2001::/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />2001::1/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 32&nbsp; &nbsp; &nbsp; &nbsp;1 lo&nbsp; &nbsp; &nbsp; <br />2001::2/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />2001::2/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 3&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />fe80::/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />fe80::/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />fe80::1/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />fe80::dc32:afff:fed5:ccd2/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; 9&nbsp; &nbsp; &nbsp; &nbsp; 1 lo&nbsp; &nbsp; &nbsp; <br />ff02::1/128&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UC&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp; &nbsp; 0 br-lan&nbsp; <br />ff00::/8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 1 br-lan&nbsp; <br />ff00::/8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ::&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; U&nbsp; &nbsp; &nbsp;256&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0 ccinet4 </p><br /><p>It seems there are something wrong with routing configuration. I tried the method to add an &quot;ip6tables -t nat -I POSTROUTING -s xxxx:xxxx:xxxx:xxxx::/64 -j MASQUERADE&quot; in firewall.user. But it also can not work in my side. The PC behind LAN can ping WAN&#039;s interface(2001::2). But it can not ping network server (2001::100). Sigh, I am a fresher on this part and have struggled on this about one week. Could you or any experts please help to guide me? Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312302">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						22 Feb 2016, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve read your posts but I don&#039;t understand what you&#039;re trying to do with IPv6.&nbsp; Are you simply trying to get IPv6 network connectivity/routing?&nbsp; Or do you have a different, more complex goal?</p><p>The only places I could find &quot;ip6tables -t nat&quot; referenced with OpenWRT are these pages:</p><p><a href="http://blog.iopsl.com/ipv6-nat-with-openwrt-router/">http://blog.iopsl.com/ipv6-nat-with-openwrt-router/</a></p><p><a href="https://forum.openwrt.org/viewtopic.php?id=53023">https://forum.openwrt.org/viewtopic.php?id=53023</a></p><p>Hopefully these will give you some help.&nbsp; I again emphasize:&nbsp; Please read completely and understand completely the network6 documentation:</p><p><a href="https://wiki.openwrt.org/doc/uci/network6">https://wiki.openwrt.org/doc/uci/network6</a></p><p>That page will help with peculiarities of IPv6 on 14.07/Barrier Breaker.</p><div class="quotebox"><cite>yongjiah wrote:</cite><blockquote><p>The version used in my side is 14.07.&nbsp; &nbsp;It seems there are something wrong with routing configuration. I tried the method to add an &quot;ip6tables -t nat -I POSTROUTING -s xxxx:xxxx:xxxx:xxxx::/64 -j MASQUERADE&quot; in firewall.user.</p></blockquote></div><p>Why are you trying to use NAT with IPv6?&nbsp; I&#039;m not saying it won&#039;t work.&nbsp; It needs to be configured properly to work.</p><p>NAT is extremely rare with IPv6 because IPv6 was designed from the ground up and is normally deployed with end-to-end addressing.&nbsp; That is, a node/server/workstation can be located behind more than one gateway in a LAN but it will still have a unique global address.&nbsp; Once routing is set up properly, you can reach that node from anywhere in the world regardless of how many gateways it&#039;s behind.</p><p>NAT breaks that functionality.&nbsp; It goes against the basic philosophy of IPv6 and so is discouraged and almost never used.&nbsp; Instead of using NAT to provide partial network security for nodes behind a gateway, firewalling (via &#039;ip6tables -I FORWARD&#039;) is used to provide fine-grained security.&nbsp; You can block everything from the outside if you want using ip6tables.</p><div class="quotebox"><cite>yongjiah wrote:</cite><blockquote><p>The PC behind LAN can ping WAN&#039;s interface(2001::2). But it can not ping network server (2001::100). Sigh, I am a fresher on this part and have struggled on this about one week. Could you or any experts please help to guide me? Thanks!</p></blockquote></div><p>There&#039;s a problem with your addressing.&nbsp; For certain you haven&#039;t been assigned 2001::/64 or 2001::/48 or whatever as your globally routable assigned IPv6 subnet.&nbsp; This tells me you don&#039;t understand the most basic IPv6 addressing or other fundamentals.</p><p>Please use Google and search for terms such as &quot;ipv6 introduction&quot;, &quot;ipv6 basics&quot;, &quot;ipv6 tutorial&quot; and read and understand the basics of IPv6 thoroughly.&nbsp; Then you&#039;ll probably figure out how to configure your IPv6 addressing and routing properly.&nbsp; Good luck <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312547">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">yongjiah</div>
					<div class="post-datetime">
						25 Feb 2016, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />&nbsp; &nbsp; Let me introduce my network topology:<br />&nbsp; &nbsp; PC &lt;-----&gt; Router &lt;----&gt; 4G network<br />What I want to do is to let PC can access 4G network.&nbsp; For WAN in router, it will get an interface ID from network at first. After that, it will use RS&amp;RA procedure to get the prefix from network side (2001::/64). And then, WAN will combine prefix and interface ID to generate a global IPV6 address. And router will also generate an global IPV6 address by using that prefix for LAN interface. And router will also broadcast prefix to PC. <br />&nbsp; &nbsp; In my case, I found another phenomenon. if I use the configuration of DHCP like:<br />config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;<br />&nbsp; &nbsp; option dhcpv6 &#039;server&#039;<br />&nbsp; &nbsp; option ra &#039;server&#039;</p><p>config dhcp &#039;wan4&#039;<br />&nbsp; &nbsp; option interface &#039;wan4&#039;<br />&nbsp; &nbsp; option ignore &#039;1&#039;</p><p>PC can get the global IPV6 address. But it can ping the LAN interface of router. But if I turn off WAN interface of router, PC can ping LAN interface.&nbsp; Is it caused by the wrong routing rule ?<br />&nbsp; &nbsp;I will study more what you guide to me. Thank you very much for help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p312587">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						25 Feb 2016, 21:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yongjiah wrote:</cite><blockquote><p>&nbsp; &nbsp; PC &lt;-----&gt; Router &lt;----&gt; 4G network<br />What I want to do is to let PC can access 4G network.&nbsp; For WAN in router, it will get an interface ID from network at first. After that, it will use RS&amp;RA procedure to get the prefix from network side (2001::/64).</p></blockquote></div><p>I&#039;m pretty sure this is where things start going wrong.&nbsp; <strong>2001::/64</strong> can&#039;t possibly be the correct assigned prefix for your PC/LAN link -- or for your link from 4G network to Router, either.&nbsp; Something is wrong right here.&nbsp; You should get something like 2001:DB8:xxx:yyyy::/64, without entire fields filled with zeroes.</p><p>Can you contact technical support for your 4G provider?&nbsp; Maybe their IPv6 provisioning is the problem.&nbsp; Or maybe they use DHCPv6 and you&#039;re relying on Router Solicitation/Router Advertisement and that&#039;s not working or there&#039;s a conflict somewhere.</p><p>I wish I could help more but I&#039;ve never operated IPv6 networking through an upstream wireless carrier network.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p314228">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">yongjiah</div>
					<div class="post-datetime">
						10 Mar 2016, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>Dear Clemmitt,<br />&nbsp; &nbsp; We have made it work now. The IPV6 address we used for server side is not right. It should not use the same prefix as router. Thank you very much for your help!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>