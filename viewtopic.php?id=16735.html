<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze ultimate revision have a strange error!!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p72660">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mitsus</div>
					<div class="post-datetime">
						26 Aug 2008, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />i&#039;ve installed the last trunk version of kamikaze. During a test, my router is dead and the typing dmesq command i see:</p><div class="codebox"><pre><code>file_cluster badly computed!!! 84 &lt;&gt; 82
Break instruction in kernel code in traps.c::do_bp, line 593:
$0 : 00000000 ffffffdf 00001c00 00001e00 00000000 00000000 00000000 00000020
$8 : 00000000 00000801 0000003d 8019ab40 0000192d 1000fc01 00000000 00000001
$16: 81e1ebe0 812e28c0 0000000e 81c71800 00000001 c0190000 810453d8 0000000e
$24: ba2e8ba3 80038d84                   81450000 81451d70 812e2b00 c0191e6c
Hi : 00000006
Lo : 00000001
epc   : c0191eb0    Tainted: P
Status: 1000fc03
Cause : 00000024
PrId  : 00029029
Process clientSSL (pid: 670, stackpage=81450000)
Stack:    00000001 00000082 00000de1 8003a7f0 8192d000 00000e00 00000c00
 00000082 00000de1 81451db0 8003aa4c 00000000 81451ee8 800510d4 00000000
 81451e48 80050d84 00000000 812e28c0 00000200 8192d000 81451e48 8192d000
 00000d5f 00000001 00000082 810453d8 81e1ec9c 81e1ebe0 81e1ed08 00000d5f
 8003b4d0 81e1ebe0 00000000 00000d5f c019a8bc c0191e2c 00000001 00000200
 81451e78 ...
Call Trace:   [&lt;8003a7f0&gt;] [&lt;8003aa4c&gt;] [&lt;800510d4&gt;] [&lt;80050d84&gt;] [&lt;8003b4d0&gt;]
 [&lt;c019a8bc&gt;] [&lt;c0191e2c&gt;] [&lt;c0193f14&gt;] [&lt;c0191e2c&gt;] [&lt;80029b94&gt;] [&lt;80029ae8&gt;]
 [&lt;80044854&gt;] [&lt;8004470a&gt;] [&lt;80044774&gt;] [&lt;8002a1a4&gt;] [&lt;c0191fa4&gt;] [&lt;80037d00&gt;]
 [&lt;80037518&gt;] [&lt;80017558&gt;] [&lt;8003763c&gt;] [&lt;80008a60&gt;]

Code: 00521004  10430004  00000000 &lt;0200000d&gt; 080647ce  2404fffb  8e0200a8  944200f8  14400002
file_cluster badly computed!!! 85 &lt;&gt; 83</code></pre></div><p>Can someone tell me about this?</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72667">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						26 Aug 2008, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Try you tell us what revision, what board, and what platform..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mitsus</div>
					<div class="post-datetime">
						26 Aug 2008, 17:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Kaloz wrote:</cite><blockquote><p>Try you tell us what revision, what board, and what platform..</p></blockquote></div><p>OK Kaloz.</p><p>Revision:&nbsp; @12378<br />Board: ASUS WL500Gp v2<br />Platform: Linux Kubuntu 8.04 </p><p>Below, my dmesg without upon error:</p><div class="codebox"><pre><code>CPU revision is: 00029029
Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Linux version 2.4.35.4 (mediacenter2@dcerouter) (gcc version 3.4.6 (OpenWrt-2.0)) #2 Wed Aug 20 12:51:53 CEST 2008
Setting the PFC to its default value
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
On node 0 totalpages: 8192
zone(0): 8192 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
CPU: BCM5354 rev 2 at 240 MHz
Using 120.000 MHz high precision timer.
Calibrating delay loop... 237.56 BogoMIPS
Memory: 30408k/32768k available (1476k kernel code, 2360k reserved, 100k data, 88k init, 0k highmem)
Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)
Inode cache hash table entries: 2048 (order: 2, 16384 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 8192 (order: 3, 32768 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: no core
PCI: Fixing up bus 0
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
Registering mini_fo version $Id$
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
b44.c:v0.93 (Mar, 2004)
PCI: Setting latency timer of device 00:01.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 00:1e:8c:ec:3c:78
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.1 at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x800000 at 0x1c000000
bootloader size: 131072
Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00020000 : &quot;cfe&quot;
0x00020000-0x007f0000 : &quot;linux&quot;
0x000a0000-0x007f0000 : &quot;rootfs&quot;
0x007f0000-0x00800000 : &quot;nvram&quot;
Initializing Cryptographic API
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 2048 bind 4096)
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 344 bytes per conntrack
ip_tables: (C) 2000-2002 Netfilter core team
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (jffs2 filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 88k freed
Algorithmics/MIPS FPU Emulator v1.5
diag: Detected &#039;ASUS WL-500g Premium V2&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found!
jffs2.bbc: SIZE compression mode activated.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
SCSI subsystem driver Revision: 1.00
BFL_ENETADM not set in boardflags. Use force=1 to ignore.
usb.c: registered new driver usbdevfs
usb.c: registered new driver hub
device eth0.0 entered promiscuous mode
eth0.0: dev_set_promiscuity(master, 1)
device eth0 entered promiscuous mode
br-lan: port 1(eth0.0) entering learning state
br-lan: port 1(eth0.0) entering forwarding state
br-lan: topology change detected, propagating
eth0.1: add 01:00:5e:00:00:01 mcast address to master interface
PCI: Setting latency timer of device 00:05.0 to 64
PCI/DMA
wl0: wlc_attach: chiprev 2 coreunit 0 corerev 13 cccap 0x104007ea maccap 0x30482205 band 2.4G, phy_type 5 phy_rev 0 ana_rev 6
wl0: Broadcom BCM4318 802.11 Wireless Controller 4.150.10.5
CSLIP: code copyright 1989 Regents of the University of California
PPP generic driver version 2.4.2
ipt_time loading
PCI: Setting latency timer of device 00:03.0 to 64
usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6
usb-ohci.c: usb-00:03.0, PCI device 14e4:471a
usb.c: new USB bus registered, assigned bus number 1
hub.c: USB hub found
hub.c: 2 ports detected
uhci.c: USB Universal Host Controller Interface driver v1.1
usb-uhci.c: $Revision: 1.275 $ time 12:38:17 Aug 20 2008
usb-uhci.c: High bandwidth mode enabled
usb-uhci.c: v1.275:USB Universal Host Controller Interface driver
usb.c: registered new driver serial
usbserial.c: USB Serial support registered for Generic
usbserial.c: USB Serial Driver core v1.4
Initializing USB Mass Storage driver...
usb.c: registered new driver usb-storage
USB Mass Storage support registered.
usbserial.c: USB Serial support registered for FTDI SIO
usbserial.c: USB Serial support registered for FTDI 8U232AM Compatible
usbserial.c: USB Serial support registered for FTDI FT232BM Compatible
usbserial.c: USB Serial support registered for USB-UIRT Infrared Tranceiver
usbserial.c: USB Serial support registered for Home-Electronics TIRA-1 IR Transceiver
ftdi_sio.c: v1.3.5:USB FTDI Serial Converters Driver
hub.c: new USB device 00:03.0-1, assigned address 2
hub.c: USB hub found
hub.c: 2 ports detected
hub.c: new USB device 00:03.0-1.2, assigned address 3
scsi0 : SCSI emulation for USB Mass Storage devices
  Vendor: Alliance  Model: Flash Disk        Rev: 5.00
  Type:   Direct-Access                      ANSI SCSI revision: 02
Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0
SCSI device sda: 7633920 512-byte hdwr sectors (3909 MB)
sda: Write Protect is off
Partition check:
 /dev/scsi/host0/bus0/target0/lun0: p1
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 3
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating</code></pre></div><p>Regards</p>											<p class="post-edited">(Last edited by <strong>mitsus</strong> on 27 Aug 2008, 13:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72699">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mitsus</div>
					<div class="post-datetime">
						27 Aug 2008, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />the problem write below persists. Today my dmesg tell:</p><div class="codebox"><pre><code>scsi0 : SCSI emulation for USB Mass Storage devices
  Vendor: Alliance  Model: Flash Disk        Rev: 5.00
  Type:   Direct-Access                      ANSI SCSI revision: 02
Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0
SCSI device sda: 7633920 512-byte hdwr sectors (3909 MB)
sda: Write Protect is off
Partition check:
 /dev/scsi/host0/bus0/target0/lun0: p1
WARNING: USB Mass Storage data integrity not assured
USB Mass Storage device found at 3
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating
file_cluster badly computed!!! 90 &lt;&gt; 86</code></pre></div><p>I think that it is a USB problem. Is my idea right? I&#039;ve removed the usb-serial kernel module, but the problem persists, in the sense that the router shell lock all and i&#039;m forced to reboot the device.</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72716">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Kaloz</div>
					<div class="post-datetime">
						27 Aug 2008, 21:40					</div>
				</div>
				<div class="post-content content">
					<p>There is a patch pending for bcm5354 in the ticket system, try that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p72738">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mitsus</div>
					<div class="post-datetime">
						28 Aug 2008, 12:35					</div>
				</div>
				<div class="post-content content">
					<p>OK Kaloz,<br />is i know the path is <a href="https://dev.openwrt.org/cgi-bin/trac.fcgi/attachment/ticket/3803/pcibios_bcm5354_usb_fix.diff">https://dev.openwrt.org/cgi-bin/trac.fc … b_fix.diff</a>.</p><p>Is it right? I must apply the patch into trunk/target/linux/brcm-2.4/patches.</p><p>Thank a lot. I post my result.</p><p>Regards</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>