<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ChaosCalmer build from source, different kernel than official images</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p336477">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">macboy</div>
					<div class="post-datetime">
						30 Aug 2016, 02:25					</div>
				</div>
				<div class="post-content content">
					<p>I have built my own images from ChaosCalmer source. I obtained source using:<br /></p><div class="codebox"><pre><code>git clone git://git.openwrt.org/15.05/openwrt.git </code></pre></div><p>My images have kernel Linux version 3.18.36. Official images have Linux version 3.18.23-1. Is there any reason for this discrepancy? I can&#039;t install an kmod-* from the repositories due to the difference in version.<br />(p.s. building images for ar71xx-generic-pb44)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336481">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">slh</div>
					<div class="post-datetime">
						30 Aug 2016, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>If you compile it yourself, you should really enable everything you might want to install as part of your firmware build (ideally statically, rather than as package).</p><p>The procedure as you explained it contains two issues:<br />- you&#039;ve checked out the chaos calmer release branch (15.05.x, what might -or might not- become 15.05.2[1]), not the release tag (v15.01.1), so it contains commits above your desired release version.<br />- the versioning and dependency checks for kernel modules are checksum based to ensure ABI compatibility, they&#039;re basically unique to each and every build and not (easily-) reproducable in practice. Therefore you really need to build everything with dependencies on kernel modules yourself, as part of the same firmware build as the flash image (and once you&#039;re there, you really should build everything else you might want to install at a later date as well).</p><p>[1] yes packages from the various package feeds complicate this further, so there is not one release tag, but several different ones, which need to match</p>											<p class="post-edited">(Last edited by <strong>slh</strong> on 30 Aug 2016, 02:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336486">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">macboy</div>
					<div class="post-datetime">
						30 Aug 2016, 03:04					</div>
				</div>
				<div class="post-content content">
					<p>slh,<br />Thank you for the excellent reply.<br />I am OK with building everything I need, but I wonder if there is a way to set up the opkg repositories (ideally at compile time) to point to my own server / build machine where the images and packages are? I can install packages from there by giving the full server name and path, but I would like to be able to do <span style="color: blue">opkg update </span>then <span style="color: blue">opkg install X</span>, and have X pulled from my server rather than the openwrt.org server. I googled this and didn&#039;t find any satisfactory answer, only the workaround of explicitly specifying the server and path every time which isn&#039;t a great solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336516">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">maartenjd</div>
					<div class="post-datetime">
						30 Aug 2016, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>See:<br /><a href="https://wiki.openwrt.org/doc/techref/opkg#local_repositories">https://wiki.openwrt.org/doc/techref/op â€¦ positories</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>