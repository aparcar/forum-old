<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> logread with grep</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p216548">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">flowerpot123</div>
					<div class="post-datetime">
						2 Nov 2013, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>I tried following command at terminal:</p><p>logread -f | grep IN= &gt;&gt; /home/iptables_cap</p><p>what I tried here is to grep all iptables logs (IN=) from syslog and write them to a file in my USB-stick, mounted as /home, but this doesn&#039;t work. File iptables_cap stays empty.<br />With command:</p><p>logread -f | grep IN=</p><p>I get iptables logs printed at real time to terminal and with</p><p>logread -f &gt;&gt; /home/iptables_cap</p><p>everything from syslog is wroten to iptables_cap.<br />But as I said, when I combinate these commands, nothing happens.<br />I have tried this with &gt; and &gt;&gt;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216549">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						2 Nov 2013, 17:44					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>logread &gt; /tmp/logread.log
cd /tmp
cat logread.log | grep IN= &gt;&gt; /home/iptables_cap</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216551">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">flowerpot123</div>
					<div class="post-datetime">
						2 Nov 2013, 18:06					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for fast answer, angelos but I think this doesn&#039;t run &quot;real time&quot; in background. I would have to run cat-command to filter /tmp/logread.log file. It&#039;s not a big problem, but I would like this to run at background and get one file only with iptables logs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216560">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">angelos</div>
					<div class="post-datetime">
						2 Nov 2013, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>You are right, it does not run in real time.<br />You can try this too:<br /></p><div class="codebox"><pre><code>tail -f | logread | grep IN= &gt;&gt; /home/iptables_cap</code></pre></div><p>You have to hit Ctrl+C whenever you want to stop it.<br />I&#039;m not sure if it can run on the background.</p>											<p class="post-edited">(Last edited by <strong>angelos</strong> on 2 Nov 2013, 19:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p216613">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						3 Nov 2013, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>syslog-ng with appropriate filter set would do what is requested.<br />Just some alternative thought...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>