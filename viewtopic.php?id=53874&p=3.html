<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [How To] Asterisk 11+GSM/SMS channel+Google Voice+OpenWRT SIP Client</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=53874&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=53874&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=53874&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p319592">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						14 Apr 2016, 11:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>...very unstable usb &quot;overlay&quot;...</p></blockquote></div><p>Sad to hear this from you!<br />You did a great job.</p><p>May I ask your opinion on my issue with the <a href="https://forum.openwrt.org/viewtopic.php?id=63891">pivot-overlay to miniSDHC in an USB-modem slot</a>? Is it doable at all?<br />My goal is to run asterisk on Asus WL-330N3G with Huawei E3131 modem.</p><p>Thank you in advance.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 14 Apr 2016, 11:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319604">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						14 Apr 2016, 12:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>usavich wrote:</cite><blockquote><p> Also I have compiled <br />asterisk18-dongle module, up and running with E1550 and E173 voice enabled modems for<br />asterisk dialouts.</p></blockquote></div><p>Nice! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Could you please let me know were I can get the compiled asterisk18-dongle module ?<br />Thanks a lot for your help.</p><p>Maurizio</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319605">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						14 Apr 2016, 12:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>...very unstable usb &quot;overlay&quot;...</p></blockquote></div><p>Sad to hear this from you!<br />You did a great job.</p><p>May I ask your opinion on my issue with the <a href="https://forum.openwrt.org/viewtopic.php?id=63891">pivot-overlay to miniSDHC in an USB-modem slot</a>? Is it doable at all?<br />My goal is to run asterisk on Asus WL-330N3G with Huawei E3131 modem.</p><p>Thank you in advance.</p></blockquote></div><p>I tried many times to use the micro-sd slot of the dongle as a USB &quot;overlay&quot; but never found a way to do it, the sd slot is not recognized by OpenWRT.<br />Use a USB flash memory instead.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 14 Apr 2016, 12:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319680">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						14 Apr 2016, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the off-topic.</p><div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>I tried many times to use the micro-sd slot of the dongle as a USB &quot;overlay&quot; but never found a way to do it, the sd slot is not recognized by OpenWRT.<br />Use a USB flash memory instead.</p></blockquote></div><p>Will using an USD-hub help me? I need both the USB-modem and - apparently - the USB-flash connected.<br />Will extroot work this way?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319688">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">usavich</div>
					<div class="post-datetime">
						14 Apr 2016, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>@pilovis </p><p><a href="https://www.dropbox.com/sh/fsesqzcxtxpjnli/AABNYgv55y5Fer6Mk67j4fe9a/with.ggdb?dl=0">https://www.dropbox.com/sh/fsesqzcxtxpj … .ggdb?dl=0</a><br />these are compiled with ggdb option though. Modem must have voice option active if you want to use dongle</p>											<p class="post-edited">(Last edited by <strong>usavich</strong> on 14 Apr 2016, 20:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319768">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						15 Apr 2016, 08:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>usavich wrote:</cite><blockquote><p>@pilovis </p><p><a href="https://www.dropbox.com/sh/fsesqzcxtxpjnli/AABNYgv55y5Fer6Mk67j4fe9a/with.ggdb?dl=0">https://www.dropbox.com/sh/fsesqzcxtxpj … .ggdb?dl=0</a><br />these are compiled with ggdb option though. Modem must have voice option active if you want to use dongle</p></blockquote></div><p>Thank you very much <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319819">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">usavich</div>
					<div class="post-datetime">
						15 Apr 2016, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>Tried to use embeeded SDcard reader with my USB modem E173, mounted successfully.</p><p>/dev/sdd1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;929.7M&nbsp; &nbsp; &nbsp; 1.2M&nbsp; &nbsp; 880.5M&nbsp; &nbsp;0% /mnt/sdd1</p><p>Have not tried to move overlay to it tho - because I&#039;m using separate USB flash disk for overlay.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319826">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						15 Apr 2016, 15:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>usavich wrote:</cite><blockquote><p>Tried to use embeeded SDcard reader with my USB modem E173, mounted successfully.<br />/dev/sdd1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;929.7M&nbsp; &nbsp; &nbsp; 1.2M&nbsp; &nbsp; 880.5M&nbsp; &nbsp;0% /mnt/sdd1<br />Have not tried to move overlay to it tho - because I&#039;m using separate USB flash disk for overlay.</p></blockquote></div><p>If I do it <span class="bbu">manually</span> - no problems either - to /mnt/sda1 or /overlay, but this is not an extroot yet...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322859">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						7 May 2016, 11:24					</div>
				</div>
				<div class="post-content content">
					<p><strong>pilovis</strong>,<br />I tried to reach you via e-mail.<br />Could you please help me to compile a ramips/rt305x version of the <strong>chan_dongle</strong> for asterisk <strong>v1.8</strong>?<br />(I&#039;m on Asus WL-330N3G)</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p322861">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">vteccomm</div>
					<div class="post-datetime">
						7 May 2016, 11:52					</div>
				</div>
				<div class="post-content content">
					<p>i am looking for some help. i have been stuck from few weeks. i am trying to install asterisk any version with codec_g729 support. </p><p>TL-WR1043ND v1  OpenWrt Chaos Calmer 15.05.1 / LuCI 15.05-149-g0d8bbd2 Release (git-15.363.78009-956be55)</p><p>root@OpenWrt:~# opkg install asterisk18</p><p>root@OpenWrt:~# asterisk -r<br />Asterisk 1.8.32.3, Copyright (C) 1999 - 2013 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br />Connected to Asterisk 1.8.32.3 currently running on OpenWrt (pid = 5185)<br />OpenWrt*CLI&gt;</p><br /><p>Now i am gona install g729.</p><p>root@OpenWrt:~# opkg install asterisk18-codec-g729<br />Installing asterisk18-codec-g729 (1.3-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/telephony/asterisk18-codec-g729_1.3-1_ar71xx.ipk.">http://downloads.openwrt.org/chaos_calm … r71xx.ipk.</a><br />Installing bcg729 (1.0.0-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05.1/ar71xx/generic/packages/telephony/bcg729_1.0.0-1_ar71xx.ipk.">http://downloads.openwrt.org/chaos_calm … r71xx.ipk.</a><br />Configuring bcg729.<br />Configuring asterisk18-codec-g729.</p><p>root@OpenWrt:~# /etc/init.d/asterisk restart<br />Privilege escalation protection disabled!<br />See <a href="https://wiki.asterisk.org/wiki/x/1gKfAQ">https://wiki.asterisk.org/wiki/x/1gKfAQ</a> for more details.<br />root@OpenWrt:~# asterisk -r<br />Unable to connect to remote asterisk (does /var/run/asterisk/asterisk.ctl exist?)<br />root@OpenWrt:~# asterisk -&amp;<br />root@OpenWrt:~# Privilege escalation protection disabled!<br />See <a href="https://wiki.asterisk.org/wiki/x/1gKfAQ">https://wiki.asterisk.org/wiki/x/1gKfAQ</a> for more details.</p><p>[1]+&nbsp; Done&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;asterisk -<br />root@OpenWrt:~# asterisk -r<br />Unable to connect to remote asterisk (does /var/run/asterisk/asterisk.ctl exist?)<br />root@OpenWrt:~# </p><p>opkg list_installed | grep asterisk<br />asterisk18 - 1.8.32.3-4<br />asterisk18-codec-g729 - 1.3-1 <br />root@OpenWrt:~# /etc/init.d/asterisk enable<br />root@OpenWrt:~# /etc/init.d/asterisk restart<br />Privilege escalation protection disabled!<br />See <a href="https://wiki.asterisk.org/wiki/x/1gKfAQ">https://wiki.asterisk.org/wiki/x/1gKfAQ</a> for more details.<br />root@OpenWrt:~# asterisk -cccv<br />Privilege escalation protection disabled!<br />See <a href="https://wiki.asterisk.org/wiki/x/1gKfAQ">https://wiki.asterisk.org/wiki/x/1gKfAQ</a> for more details.<br />Asterisk 1.8.32.3, Copyright (C) 1999 - 2013 Digium, Inc. and others.<br />Created by Mark Spencer &lt;markster@digium.com&gt;<br />Asterisk comes with ABSOLUTELY NO WARRANTY; type &#039;core show warranty&#039; for details.<br />This is free software, with components licensed under the GNU General Public<br />License version 2 and other licenses; you are welcome to redistribute it under<br />certain conditions. Type &#039;core show license&#039; for details.<br />=========================================================================<br /> Asterisk Dynamic Loader Starting:<br /> Asterisk PBX Core Initializing<br /> Registering builtin applications:<br /> [Answer]<br /> [BackGround]<br /> [Busy]<br /> [Congestion]<br /> [ExecIfTime]<br /> [Goto]<br /> [GotoIf]<br /> [GotoIfTime]<br /> [ImportVar]<br /> [Hangup]<br /> [Incomplete]<br /> [NoOp]<br /> [Proceeding]<br /> [Progress]<br /> [RaiseException]<br /> [ResetCDR]<br /> [Ringing]<br /> [SayAlpha]<br /> [SayDigits]<br /> [SayNumber]<br /> [SayPhonetic]<br /> [Set]<br /> [MSet]<br /> [SetAMAFlags]<br /> [Wait]<br /> [WaitExten]<br /> Asterisk Dynamic Loader Starting:<br />[May&nbsp; 6 01:08:31] NOTICE[5449]: loader.c:1194 load_modules: 20 modules will be loaded.<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:434 load_dynamic_module: Error loading module &#039;res_musiconhold.so&#039;: File not found<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:434 load_dynamic_module: Error loading module &#039;res_musiconhold.so&#039;: File not found<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:910 load_resource: Module &#039;res_musiconhold.so&#039; could not be loaded.<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:434 load_dynamic_module: Error loading module &#039;res_crypto&#039;: File not found<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:910 load_resource: Module &#039;res_crypto&#039; could not be loaded.<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:434 load_dynamic_module: Error loading module &#039;chan_local&#039;: File not found<br />[May&nbsp; 6 01:08:31] WARNING[5449]: loader.c:910 load_resource: Module &#039;chan_local&#039; could not be loaded.<br /> res_rtp_asterisk.so =&gt; (Asterisk RTP Stack)<br /> res_rtp_multicast.so =&gt; (Multicast RTP Engine)<br />SIP channel loading...<br /> chan_sip.so =&gt; (Session Initiation Protocol (SIP))<br /> format_wav.so =&gt; (Microsoft WAV/WAV16 format (8kHz/16kHz Signed Linear))<br /> format_pcm.so =&gt; (Raw/Sun uLaw/ALaw 8KHz (PCM,PCMA,AU), G.722 16Khz)<br /> format_wav_gsm.so =&gt; (Microsoft WAV format (Proprietary GSM))<br /> format_gsm.so =&gt; (Raw GSM data)<br /> func_callerid.so =&gt; (Party ID related dialplan functions (Caller-ID, Connected-line, Redirecting))<br /> pbx_config.so =&gt; (Text Extension Configuration)<br />Segmentation fault<br />root@OpenWrt:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p323039">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">vteccomm</div>
					<div class="post-datetime">
						9 May 2016, 02:41					</div>
				</div>
				<div class="post-content content">
					<p>can anyone please help me with this <br /><a href="https://forum.openwrt.org/viewtopic.php?id=64689">https://forum.openwrt.org/viewtopic.php?id=64689</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331387">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">csandor</div>
					<div class="post-datetime">
						13 Jul 2016, 12:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>usavich wrote:</cite><blockquote><p>router2*CLI&gt; dongle show devices<br />ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Group State&nbsp; &nbsp; &nbsp; RSSI Mode Submode Provider Name&nbsp; Model&nbsp; &nbsp; &nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number<br />dongle0&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;3&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; E1550&nbsp; &nbsp; &nbsp; 11.608.14.15.311&nbsp; 3XXXXXXXXXXXX37&nbsp; 2XXXXXXXXXX77&nbsp; Unknown<br />dongle1&nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;8&nbsp; &nbsp; 0&nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E173&nbsp; &nbsp; &nbsp; &nbsp;11.126.85.00.209&nbsp; 8XXXXXXXXXX05&nbsp; 2XXXXXXXXXXXX2&nbsp; Unknown</p></blockquote></div><p>Do You used it with an external powered USB hub, or with the built in ports?</p><p>It is possible then to use an android smart-phone as a sip client, for GSM voice calls?<br />It is possible to setup a phone number to be routed to the sip client? <br />(to accept and make calls from/to provider network...)</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331389">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						13 Jul 2016, 12:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>csandor wrote:</cite><blockquote><p>Do You used it with an external powered USB hub, or with the built in ports?</p><p><strong>it is better to use an external powered USB since each dongle needs more than 500 mA</strong></p><p>It is possible then to use an android smart-phone as a sip client, for GSM voice calls?</p><p><strong>yes, I would suggest you to use Zoiper or Csip (android sip clients)</strong></p><p>It is possible to setup a phone number to be routed to the sip client?<br />(to accept and make calls from/to provider network...)</p><p><strong>Sure <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></strong></p></blockquote></div>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 13 Jul 2016, 12:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331559">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">csandor</div>
					<div class="post-datetime">
						14 Jul 2016, 15:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p><strong>Sure <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></strong></p></blockquote></div><p>Thanks for answers...</p><p>I decided for an Asus RT-AC56, but I am not sure for the modems...<br />Can I succeed with Huawei E352s-2?&nbsp; has voice enabled too, seems better for data. It will be recognized ?<br />Or E353-S2?</p><p>Or&nbsp; better the E173s-2 ? As we already know that works...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331560">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						14 Jul 2016, 15:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>csandor wrote:</cite><blockquote><div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p><strong>Sure <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></strong></p></blockquote></div><p>Thanks for answers...</p><p>I decided for an Asus RT-AC56, but I am not sure for the modems...<br />Can I succeed with Huawei E352s-2?&nbsp; has voice enabled too, seems better for data. It will be recognized ?<br />Or E353-S2?</p><p>Or&nbsp; better the E173s-2 ? As we already know that works...</p></blockquote></div><p>The only dongle GSM I have tested with success is Huawey E169, I also tested E173 but with no success.<br />TP-Link TL-WDR3600 is a great router to use with OpenWRT, it has 2 USB ports, a lot of ram (128 Mbytes) and a fast 560 Mhz CPU.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 14 Jul 2016, 15:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333181">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">csandor</div>
					<div class="post-datetime">
						3 Aug 2016, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi Pilovis!</p><p>I&#039;ve installed the Asterisk 11 packages based on your tutorial on my asus router (AC56U), the Huawei dongle E169&nbsp; is connected to the USB port&nbsp; 3.0. </p><p>Sms sending is working.<br />Voip calls are working between SIP clients.</p><p>From external calling the dongle I got a busy tone and on the logs I don&#039;t see anything</p><p>From sip client to external call (603/Declined - on the client), on the asterisk cli :<br /> RT-AC56U-8B58*CLI&gt; <br />&nbsp; == Using SIP RTP CoS mark 5<br />&nbsp; &nbsp; -- Executing [XXXXXXXXXX@from-sip:1] Log(&quot;SIP/sanyi-00000002&quot;, &quot;NOTICE, Dialing out from &quot;&quot; &lt;sanyi&gt; to XXXXXXXXXX through Dongle0 Provider&quot;) in new stack<br />[Aug&nbsp; 3 13:31:40] NOTICE[4436][C-00000002]: Ext. 0770208650:1 @ from-sip:&nbsp; Dialing out from &quot;&quot; &lt;sanyi&gt; to 0770208650 through Dongle0 Provider<br />&nbsp; &nbsp; -- Executing [XXXXXXXXXX@from-sip:2] Dial(&quot;SIP/sanyi-00000002&quot;, &quot;dongle/dongle0/XXXXXXXXXX,60&quot;) in new stack<br />[Aug&nbsp; 3 13:31:40] WARNING[4436][C-00000002]: channel.c:180 channel_request: [dongle0] Request to call on device which can not make call at this moment<br />[Aug&nbsp; 3 13:31:40] WARNING[4436][C-00000002]: app_dial.c:2455 dial_exec_full: Unable to create channel of type &#039;dongle&#039; (cause 44 - Requested channel not available)<br />&nbsp; == Everyone is busy/congested at this time (1:0/0/1)<br />[Aug&nbsp; 3 13:31:40] WARNING[4436][C-00000002]: pbx.c:4926 pbx_extension_helper: No application &#039;Playtones&#039; for extension (from-sip, XXXXXXXXXX, 3)<br />&nbsp; == Spawn extension (from-sip,XXXXXXXXXX, 3) exited non-zero on &#039;SIP/sanyi-00000002&#039;</p><p>dongle show device state dongle0 <br />-------------- Status -------------<br />&nbsp; Device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : dongle0<br />&nbsp; State&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Dialing <br />&nbsp; Audio&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: /dev/ttyUSB0<br />&nbsp; Data&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : /dev/ttyUSB1<br />&nbsp; Voice&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Yes<br />&nbsp; SMS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Yes<br />&nbsp; Manufacturer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : huawei<br />&nbsp; Model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: E169<br />&nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 11.315.05.00.00<br />&nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 359638015545142<br />&nbsp; IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 226050080737498<br />&nbsp; GSM Registration Status : Registered, home network<br />&nbsp; RSSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 6, -101 dBm<br />&nbsp; Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : No Service<br />&nbsp; Submode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: No service<br />&nbsp; Provider Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Digi.Mobil<br />&nbsp; Location area code&nbsp; &nbsp; &nbsp; : 2C1<br />&nbsp; Cell ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 3DC3<br />&nbsp; Subscriber Number&nbsp; &nbsp; &nbsp; &nbsp;: +4YYYYYYYYYY<br />&nbsp; SMS Service Center&nbsp; &nbsp; &nbsp; : +40770000050<br />&nbsp; Use UCS-2 encoding&nbsp; &nbsp; &nbsp; : Yes<br />&nbsp; USSD use 7 bit encoding : No<br />&nbsp; USSD use UCS-2 decoding : Yes<br />&nbsp; Tasks in queue&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />&nbsp; Commands in queue&nbsp; &nbsp; &nbsp; &nbsp;: 0<br />&nbsp; Call Waiting&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : Disabled<br />&nbsp; Current device state&nbsp; &nbsp; : start<br />&nbsp; Desired device state&nbsp; &nbsp; : start<br />&nbsp; When change state&nbsp; &nbsp; &nbsp; &nbsp;: now<br />&nbsp; Calls/Channels&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1<br />&nbsp; &nbsp; Active&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />&nbsp; &nbsp; Held&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />&nbsp; &nbsp; Dialing&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />&nbsp; &nbsp; Alerting&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />&nbsp; &nbsp; Incoming&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />&nbsp; &nbsp; Waiting&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />&nbsp; &nbsp; Releasing&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />&nbsp; &nbsp; Initializing&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1</p><p>RT-AC56U-8B58*CLI&gt; sip show peers<br />Name/username&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Host&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dyn Forcerport Comedia&nbsp; &nbsp; ACL Port&nbsp; &nbsp; &nbsp;Status&nbsp; &nbsp; &nbsp; Description&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />bobby/bobby&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(Unspecified)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D&nbsp; Auto (No)&nbsp; No&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp; UNKNOWN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />sanyi/sanyi&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.32.175&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;D&nbsp; Auto (No)&nbsp; No&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;58554&nbsp; &nbsp; OK (238 ms)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />2 sip peers [Monitored: 1 online, 1 offline Unmonitored: 0 online, 0 offline]</p><br /><p>extensions.conf:<br />[from-sip]<br />exten =&gt; 100,1,Dial(SIP/sanyi,30)<br />exten =&gt; 100,2,Hangup()</p><p>exten =&gt; 101,1,Dial(SIP/bobby,30)<br />exten =&gt; 100,2,Hangup()</p><p>exten =&gt; _X.,1,Log(NOTICE, Dialing out from ${CALLERID(all)} to ${EXTEN} through Dongle0 Provider)<br />exten =&gt; _X.,n,Dial(dongle/dongle0/${EXTEN},60)<br />exten =&gt; _X.,n,Playtones(congestion)<br />exten =&gt; _X.,n,Hangup()</p><p>[from-dongle]<br />exten =&gt; +4YYYYYYYYYY,1,Log(NOTICE, Incoming call from ${CALLERID(all)})<br />exten =&gt; +4YYYYYYYYYY,n,Dial(SIP/sanyi)<br />exten =&gt; +4YYYYYYYYYY,n,Hangup()</p><p>dongle.conf:<br />.......<br />[defaults]<br />; now you can set here any not required device settings as template<br />;&nbsp; &nbsp;sure you can overwrite in any [device] section this default values</p><p>context=from-dongle&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; context for incoming calls<br />group=1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; calling group<br />rxgain=0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; increase the incoming volume; may be negative<br />txgain=0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; increase the outgoint volume; may be negative<br />autodeletesms=yes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; auto delete incoming sms<br />resetdongle=yes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; reset dongle during initialization with ATZ command<br />u2diag=-1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; set ^U2DIAG parameter on device (0 = disable everything except modem function) ; -1 not use ^U2DIAG command<br />usecallingpres=yes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; use the caller ID presentation or not<br />callingpres=allowed_passed_screen ; set caller ID presentation&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; by default use default network settings<br />disablesms=no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; disable of SMS reading from device when received<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; chan_dongle has currently a bug with SMS reception. When a SMS gets in during a<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; call chan_dongle might crash. Enable this option to disable sms reception.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ;&nbsp; default = no</p><p>language=en&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; set channel default language<br />smsaspdu=yes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; if &#039;yes&#039; send SMS in PDU mode, feature implementation incomplete and we strongly recommend say &#039;yes&#039;<br />mindtmfgap=45&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; minimal interval from end of previews DTMF from begining of next in ms<br />mindtmfduration=80&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; minimal DTMF tone duration in ms<br />mindtmfinterval=200&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; minimal interval between ends of DTMF of same digits in ms</p><p>callwaiting=auto&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; if &#039;yes&#039; allow incoming calls waiting; by default use network settings</p><p>disable=no&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; OBSOLETED by initstate: if &#039;yes&#039; no load this device and just ignore this section</p><p>initstate=start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; specified initial state of device, must be one of &#039;stop&#039; &#039;start&#039; &#039;remote&#039;</p><br /><p>exten=+4YYYYYYYYYY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; exten for start incoming calls, only in case of Subscriber Number not available!, also set to CALLERID(ndid)</p><p>dtmf=relax&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; control of incoming DTMF detection, possible values:</p><p>[dongle0]<br />audio=/dev/ttyUSB0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ; tty port for audio connection;&nbsp; &nbsp; &nbsp; &nbsp; no default value<br />data=/dev/ttyUSB1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; tty port for AT commands;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;no default value</p><p>; or you can omit both audio and data together and use imei=123456789012345 and/or imsi=123456789012345<br />;&nbsp; imei and imsi must contain exactly 15 digits !<br />;&nbsp; imei/imsi discovery is available on Linux only<br />imei=359638015545142<br />imsi=226050080737498</p><br /><p>sip.conf:<br />......<br />[sanyi]<br />type=friend<br />username=sanyi<br />secret=******<br />host=dynamic<br />context=from-sip</p><p>[bobby]<br />type=friend<br />username=bobby<br />secret=******<br />host=dynamic<br />context=from-sip</p><p>Any ideas with the busy issue?<br />Could be locked/disabled the Voice feature, even if the we see &quot;Voice: Yes&quot; on the dongle status?<br />The AT^CVOICE=?&nbsp; -&gt; responds:&nbsp; AT^CVOICE:(0)&nbsp; - OK<br />A DC-UNCLOCKER from windows says VOICE disabled.<br />I am confused a little <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333214">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						4 Aug 2016, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>I think your problem is here:</p><div class="quotebox"><cite>csandor wrote:</cite><blockquote><p>&nbsp; RSSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 6, -101 dBm<br /><span style="color: reb">&nbsp; Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : No Service<br />&nbsp; Submode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: No service</span><br />&nbsp; Provider Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Digi.Mobil</p></blockquote></div><p>does &quot;No Service&quot; mean no connection?<br />Maybe.</p><p>My dongle shows this:</p><p>RSSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 10, -119 dBm<br /> Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : WCDMA<br /> Submode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: WCDMA<br /> Provider Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 3 Italy</p><p>Also, your&nbsp; RSSI (Radio Signal) is lower than mine, maybe it&#039;s a insufficient signal problem, try to move your dongle around to improve the signal.</p><p>eventually check the following guide, under &quot;AT commands&quot; section, the AT command instructions how to switch beetwen 3G and 2G network (use minicom serial console to give the commands to the dongle):</p><p><a href="http://www.lovisolo.com/asterisk/software/GUIDE-HOWTO/chan_dongle_commands.pdf">http://www.lovisolo.com/asterisk/softwa … mmands.pdf</a></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 4 Aug 2016, 15:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333217">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						4 Aug 2016, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>try this command under Asterisk cli:</p><p><strong>dongle show devices</strong></p><p>you should see something like this:</p><p>ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Group State&nbsp; &nbsp; &nbsp; RSSI Mode Submode Provider Name&nbsp; Model&nbsp; &nbsp; &nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number&nbsp; &nbsp; &nbsp; &nbsp; <br />dongle0&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;7&nbsp; &nbsp; 5&nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp;3 Italy&nbsp; &nbsp; &nbsp; &nbsp; E169&nbsp; &nbsp; &nbsp; &nbsp;11.314.11.00.00&nbsp; &nbsp;358xxxxxxxxxxx&nbsp; 222992xxxxxxxxx&nbsp; +3939xxxxxxxx</p><p>the State should be &quot;Free&quot;</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 4 Aug 2016, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333341">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">csandor</div>
					<div class="post-datetime">
						5 Aug 2016, 11:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>try this command under Asterisk cli:</p><p><strong>dongle show devices</strong></p><p>you should see something like this:</p><p>ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Group State&nbsp; &nbsp; &nbsp; RSSI Mode Submode Provider Name&nbsp; Model&nbsp; &nbsp; &nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number&nbsp; &nbsp; &nbsp; &nbsp; <br />dongle0&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;7&nbsp; &nbsp; 5&nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp;3 Italy&nbsp; &nbsp; &nbsp; &nbsp; E169&nbsp; &nbsp; &nbsp; &nbsp;11.314.11.00.00&nbsp; &nbsp;358xxxxxxxxxxx&nbsp; 222992xxxxxxxxx&nbsp; +3939xxxxxxxx</p><p>the State should be &quot;Free&quot;</p></blockquote></div><p>I&#039;ve corrected with AT commands, now :</p><p>&nbsp; GSM Registration Status : Registered, home network<br />&nbsp; RSSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 9, -95 dBm<br />&nbsp; Mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : WCDMA<br />&nbsp; Submode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: WCDMA<br />&nbsp; Provider Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Digi.Mobil<br />&nbsp; Location area code&nbsp; &nbsp; &nbsp; : 2C1<br />&nbsp; Cell ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 2C13DC8</p><p>The incoming still give me busy tone.</p><p>If I do an outgoing cal the dongle stuck in dialing. <br />I need to reboot again then the sate it is free:<br />ID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Group State&nbsp; &nbsp; &nbsp; RSSI Mode Submode Provider Name&nbsp; Model&nbsp; &nbsp; &nbsp; Firmware&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; IMEI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;IMSI&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Number&nbsp; &nbsp; &nbsp; &nbsp; <br />dongle0&nbsp; &nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;Free&nbsp; &nbsp; &nbsp; &nbsp;9&nbsp; &nbsp; 5&nbsp; &nbsp; 4&nbsp; &nbsp; &nbsp; &nbsp;Digi.Mobil&nbsp; &nbsp; &nbsp;E169&nbsp; &nbsp; &nbsp; &nbsp;11.315.05.00.00&nbsp; &nbsp;359638015545142&nbsp; 226050080737498&nbsp; +40XXXXXXXXX&nbsp; </p><p>The outgoing log now:</p><p> == Using SIP RTP CoS mark 5<br />&nbsp; &nbsp; -- Executing [0770208650@from-sip:1] Log(&quot;SIP/sanyi-00000005&quot;, &quot;NOTICE, Dialing out from &quot;&quot; &lt;sanyi&gt; to 0NNNNNNNNN through Dongle0 Provider&quot;) in new stack<br />[Aug&nbsp; 5 08:10:56] NOTICE[6054][C-00000005]: Ext. 0NNNNNNNNN:1 @ from-sip:&nbsp; Dialing out from &quot;&quot; &lt;sanyi&gt; to 0NNNNNNNNN through Dongle0 Provider<br />&nbsp; &nbsp; -- Executing [0NNNNNNNNN@from-sip:2] Dial(&quot;SIP/sanyi-00000005&quot;, &quot;dongle/dongle0/0NNNNNNNNN,60&quot;) in new stack<br />&nbsp; &nbsp; -- Called dongle/dongle0/0NNNNNNNNN<br />[Aug&nbsp; 5 08:10:56] ERROR[6040]: at_response.c:467 at_response_error: [dongle0] Dial failed<br />&nbsp; &nbsp; -- Dongle/dongle0-0100000002 is circuit-busy<br />&nbsp; == Everyone is busy/congested at this time (1:0/1/0)<br />[Aug&nbsp; 5 08:10:56] WARNING[6054][C-00000005]: pbx.c:4926 pbx_extension_helper: No application &#039;Playtones&#039; for extension (from-sip, 0NNNNNNNNN, 3)<br />&nbsp; == Spawn extension (from-sip, 0NNNNNNNNN, 3) exited non-zero on &#039;SIP/sanyi-00000005&#039;<br />[Aug&nbsp; 5 08:10:56] ERROR[6040]: at_response.c:472 at_response_error: [dongle0] AT^DDSETEX failed</p><p>If i google to at_response_error: [dongle0] AT^DDSETEX&nbsp; failed some forum says that voice is not enabled.</p><p>Thanks for reply.</p>											<p class="post-edited">(Last edited by <strong>csandor</strong> on 5 Aug 2016, 11:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333528">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						7 Aug 2016, 07:32					</div>
				</div>
				<div class="post-content content">
					<p>at this point I really think that VOICE is disabled on your dongle <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>In my country all the E169 dongles from Wind IT and TIM IT I used, have Voice Enabled feature by default, check on Google about your dongle.</p><p>I suppose there is no alternative than follow DC-UNCLOCKER guide to enable Voice on your dongle or buy another one that has the &quot;Voice enable&quot; feature guaranteed.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 7 Aug 2016, 07:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336114">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">csandor</div>
					<div class="post-datetime">
						27 Aug 2016, 14:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>at this point I really think that VOICE is disabled on your dongle <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>In my country all the E169 dongles from Wind IT and TIM IT I used, have Voice Enabled feature by default, check on Google about your dongle.</p><p>I suppose there is no alternative than follow DC-UNCLOCKER guide to enable Voice on your dongle or buy another one that has the &quot;Voice enable&quot; feature guaranteed.</p></blockquote></div><p>Thanks for help! I have succeded after i`ve unlocked with dc-unlocker <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> .<br />Calls in both directions are working.<br />The remote side hear my voice not 100% clean... but is acceptable, I will study the issue.<br />I&#039;ve included Your modules optimizations.</p><p>Best Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336364">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						29 Aug 2016, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>To improve audio quality on chan_dogle you may set up your modem to use only 3G (WCDMA) network </p><p>Commands to block modem to 3G mode:<br /><strong>asterisk -r </strong>(to get to asterisk console)</p><p><strong>dongle cmd dongle0 AT^SYSCFG=14,2,3FFFFFFF,2,4 </strong></p><p>instead to block modem to 2G:<br /><strong>dongle cmd dongle0 AT^SYSCFG=13,1,3FFFFFFF,2,4</strong></p><p>to disable call-waiting:<br /><strong>dongle cmd dongle0 AT+CCWA=0,0,1 </strong></p><p>In case of dongle memory full of SMS, to clear all SMS from dongle memory:<br /><strong>dongle cmd name_dongle AT+CPMS=\&quot;SM\&quot;,\&quot;SM\&quot;,\&quot;SM\&quot;<br />dongle cmd name_dongle AT+CMGD=1,4</strong></p><p>to clear all SMS from SIM memory:<br /><strong>dongle cmd name_dongle AT+CPMS=\&quot;ME\&quot;,\&quot;ME\&quot;,\&quot;ME\&quot;<br />dongle cmd name_dongle AT+CMGD=1,4 </strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 29 Aug 2016, 16:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337442">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						7 Sep 2016, 00:27					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu">[HOW-TO] Send an email and restart Asterisk when a SIP trunk gets disconnected.</span></p><p>0) prerequisites: asterisk and mini-sendmail (<em>no_auth SMTP server required</em>)</p><br /><p>1) create and edit the script:</p><p><strong>touch /root/check-sip.sh</strong></p><p><strong>vi /root/check-sip.sh</strong></p><p><span style="color: blue"><em>#!/bin/bash<br /># check SIP trunk for Asterisk/OpenWRT, send an email and restart Asterisk when a SIP trunk gets disconnected<br /># don&#039;t forget to create a crontab to lauch this script every xx minutes<br /># by pilovis - parknat12@yahoo.com<br />#<br />## check for sip trunk status<br />checkifok=`/usr/sbin/asterisk -rx &quot;sip show peer </em></span><em><span style="color: red">xxxxxxxx</span><span style="color: blue">&quot; | grep Status | grep -wc OK`<br />## if trunk is not connected<br />if [[ $checkifok == 0 ]]; then<br />## send an email<br />/bin/echo &quot;SIP Trunk </span><span style="color: red">xxxxxx</span><span style="color: blue"> not registered&quot; | /usr/sbin/mini_sendmail -fsender@mail.com -smailer-smtp.com -p25 receiver@mail.com<br />## then wait for 3 seconds<br />/bin/sleep 3<br />## and restarts Asterisk<br />/usr/sbin/asterisk -rx &quot;sip reload&quot;<br />## if trunk is OK do nothing<br />else<br />/bin/echo &quot;Trunk OK&quot; &gt; /dev/null 2&gt;&amp;1<br />fi<br />#eof</span></em></p><p><span class="bbu">Notes: </span><br />&quot;<em><span style="color: blue">/bin/echo &quot;SIP Trunk xxxxxx not registered&quot; | /usr/sbin/mini_sendmail -fsender@mail.com -smailer-smtp.com -p25 receiver@mail.com</span></em>&quot; is a single line!<br />change peer name &#039;<span style="color: red">xxxxxxxx</span>&#039; with your outbound trunk peer name as specified in /etc/asterisk/sip.conf</p><br /><p>2) give the right permissions to the script: </p><p><strong>chmod 755 check-sip.sh</strong></p><br /><p>3) create a contab to run the script every 5 minutes:</p><p><strong>vi /etc/crontabs/root</strong></p><p><span style="color: blue"><em>*/5 * * * * /bin/sh /root/check-sip.sh</em></span></p><br /><p>4) reboot to apply.</p><p>----------------------------------------------------</p><p>If you want to use &quot;msmtp&quot; to be able to use your Google account and SMTP Google server, <br />this is the line to be used to send an email:</p><p><span style="color: blue"><em>/bin/echo &quot;SIP Trunk xxxxxx not registered&quot; | /usr/bin/msmtp receiver@mail.com</em></span></p><br /><p>you also need to edit &quot;/etc/msmtprc&quot; with your gmail credentials, <br />delete everything inside the file and put the following;<br /><span style="color: blue"><em><br />account default<br />host smtp.gmail.com<br />port 587<br />auth on<br />user youraccount@gmail.com<br />password yourpassword<br />auto_from off<br />from youraccount@gmail.com<br />tls on<br />tls_starttls on<br />tls_certcheck off<br />logfile <br />syslog LOG_MAIL</em></span></p><p>Note: change &quot;youraccount@gmail.com&quot; and &quot;yourpassword&quot; with your Gmail credentials.</p><br /><p>To install msmtp:</p><p><strong>opkg update<br />opkg install msmtp</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 7 Sep 2016, 01:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p337948">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						11 Sep 2016, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>this is my last (mad) creation:</p><p><span class="bbu"><strong>OpenWRT Home Automation BOX</strong></span></p><p>Features:</p><p>- 2 digital input channels (to get feedback from remote devices) <br />- 7 power output channels 1500 W max each (to switch ON and OFF remote devices)<br />- PBX Voip/GSM server (Asterisk 11 + GSM_dongle)<br />- remote control by phone by using DTMF tones (I created an IVR that says: &quot;press 1 to switch on relay 1, etc&quot;)<br />- HD video streaming to monitor remote location (MJPG-streamer)<br />- 2 ways (listen/talk) remote audio streaming by phone (Baresip)<br />- 2 ways SMS server (receive commands and/or send back alerts/notifications) (Gnokii)<br />- remote/local control by web page (PHP + uhttpd) <br />- local control by USB keypad (Triggerhappy)<br />- restore the channels status after a power failure/reboot (restore the last status ON/OFF just before the power loss)</p><p>Maximum power consumption = 15W, one single power supply 12v/2.5A (I keept the original netgear PS)<br />This BOX can be powered by solar cells and/or by a 12V rechargeable lead battery <br />To save some electrical power and heating, I removed the (useless) WiFi PCI internal card because it is not supported by Barrier Breaker <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> , maybe Chaos Calmer supports it, but C.C. sucks, it is almost useless since there are to many packages missing, included most of the packages I used for this BOX <img src="https://forum.openwrt.org/img/smilies/mad.png" width="15" height="15" alt="mad" /></p><p>Notes: by having a GSM dongle (GSM calls and SMS), this box can work anywere, even in a place without any internet connection.</p><br /><p>I used (cost):</p><p>my brain (free) <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />many sleepless nights (almost free)<br />Openwrt Barrier Breaker (free)<br />Netgear DGND3700V1 router (Ebay @ 50 Euro)<br />USB HD webcam (local store @ 30 Euro) <br />8 channels Relay Board (Ebay @ 10 Euro)<br />USB GSM dongle Huawei E169 (Ebay @ 15 Euro)<br />USB audio card (local store @ 5 Euro)<br />Small speaker (recovered for free from my electronic trash)<br />USB Keypad (local store @ 5 Euro)<br />USB Hub (local store @ 5 Euro)</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183045.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183045.jpg" /></span><br /><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183100.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183100.jpg" /></span><br /><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183320.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_183320.jpg" /></span><br /><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_180049.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/netgear-DGND2700-home-automation/20160911_180049.jpg" /></span></p><p>Netgear DGND3700V1 has 11 LEDs of wich 9 of them can be used to control 9 relays, fortunately these 9 LEDs do not turn on or do not start blinking during startup process <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The downside of this router is that the internal PCI WiFi module is bad supported on OpenWRT, as a workaround you can use a different WiFI PCI board or connect an external USB WiFi dongle to the router (or use an ethernet cable).</p><p>This router is very powerful: it has 2x400 Mhz CPUs, 2xUSB2 ports, 2 integrated Switch buttons (plus reset) both usable directly by triggerhappy, 1 WAN and 4 LAN Gigabit ethernet connectors, 128 Mbytes of RAM and 32 Mbytes of Flash.</p><p>Here are the commands to switch ON the 9 LEDs (to switch them off use &quot;echo 0 &gt; ...&quot;):<br /><em><span style="color: blue"><br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:blue:wifi5g/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:dsl/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:inet/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:usb-back/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:usb-front/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:wifi2g/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:wps/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:red:inet/brightness<br />/bin/echo 1 &gt; /sys/devices/platform/leds-gpio.0/leds/DGND3700v1_3800B:green:lan/brightness</span></em></p><p>LED name, Color, GPIO, #note<br />power, red, 22, # it turns on at bootup<br />power, green, 24, # it turns on and starts blinking at bootup<br />lan, green, 23, # usable<br />usb-back, green, 14, # usable<br />wifi2g, green, 26, # usable<br />wifi5g, blue, 27, # usable<br />dsl, green, 2, # usable<br />inet, red, 4, # usable<br />inet, green, 5, # usable<br />usb-front, green, 13, # usable<br />wps, green, 11, # usable</p><br /><p>Board switches as seen by triggerhappy:</p><p><em>root@OpenWrt:~# thd --dump /dev/input/event*<br />EV_KEY&nbsp; &nbsp; <span style="color: red">KEY_WPS_BUTTON</span>&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event0<br /># KEY_WPS_BUTTON&nbsp; &nbsp; 1&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; KEY_WPS_BUTTON&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event0<br /># KEY_WPS_BUTTON&nbsp; &nbsp; 0&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; <span style="color: red">KEY_WLAN</span>&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event0<br /># KEY_WLAN&nbsp; &nbsp; 1&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; KEY_WLAN&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event0<br /># KEY_WLAN&nbsp; &nbsp; 0&nbsp; &nbsp; command</em></p><p>KEY_WLAN = gpio-10<br />KEY_WPS_BUTTON =&nbsp; gpio-35</p><br /><p>Usable GPIOs:<br /><em><br />root@OpenWrt:~# cat /sys/kernel/debug/gpio<br />GPIOs 0-37, bcm63xx-gpio:<br /> gpio-2&nbsp; &nbsp;(DGND3700v1_3800B:gre) out hi<br /> gpio-4&nbsp; &nbsp;(DGND3700v1_3800B:red) out hi<br /> gpio-5&nbsp; &nbsp;(DGND3700v1_3800B:gre) out hi<br /> gpio-10&nbsp; (wlan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) in&nbsp; hi<br /> gpio-11&nbsp; (DGND3700v1_3800B:gre) out hi<br /> gpio-12&nbsp; (reset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi<br /> gpio-13&nbsp; (DGND3700v1_3800B:gre) out hi<br /> gpio-14&nbsp; (DGND3700v1_3800B:gre) out hi<br /> gpio-22&nbsp; (DGND3700v1_3800B:red) out hi<br /> gpio-23&nbsp; (DGND3700v1_3800B:gre) out hi<br /> gpio-24&nbsp; (DGND3700v1_3800B:gre) out lo<br /> gpio-26&nbsp; (DGND3700v1_3800B:gre) out lo<br /> gpio-27&nbsp; (DGND3700v1_3800B:blu) out lo<br /> gpio-35&nbsp; (wps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi</em></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 12 Sep 2016, 00:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p338128">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						13 Sep 2016, 07:21					</div>
				</div>
				<div class="post-content content">
					<p><span class="bbu">Important note on Netgear DGND3700V1 and Barrier Breaker.</span></p><p>This router with its custom OpenWRT Barrier Breaker firmware has a very bad problem: during a reboot, invoked by a program or by the reboot command,&nbsp; the router may hangs forever, unfortunately it happens quite often and the only way to recover it, it is to do a power cycle.<br />The problem occurs during the shutdown process, just before the reboot, it seems that some process cannot be stopped correctly.</p><p>To avoid this problem during reboot cycle, you might use the following command to do an hard_reboot of the router:</p><p><strong>/bin/echo b &gt; /proc/sysrq-trigger</strong></p><p>this&nbsp; is pretty much the same as pressing the reset button on a PC, no daemons will be shut down gracefully, no filesystem sync will occur (but we don&#039;t need it).</p><p>So, don&#039;t use anymore the &quot;reboot&quot; command (busybox) on this router, also disable watchcat and zram:&nbsp; <br /><strong>/etc/init.d/watchcat disable<br />/etc/init.d/zram disable</strong></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 13 Sep 2016, 21:34)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=53874&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=53874&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=53874&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>