<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT160NL, WAN DHCP Client and interface names</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p140820">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">andrea.r</div>
					<div class="post-datetime">
						8 Aug 2011, 14:15					</div>
				</div>
				<div class="post-content content">
					<p>Since when I started using openwrt 5 or 6 months ago I have always had a weird yet unsolved problem in obtaining an IP address form my ISP&#039;s DHCP (my ISP is fastweb an italian provider). Today I found a very tricky solution and I cannot really give myself a reason why it wars. Also the &quot;trick&quot; leads to other problems as well. </p><p>I will first try to explain what the problem was and its symptoms, and then I will show what did the trick for me:</p><p>Before a couple of days ago, when I started my router most of the times I wouldn&#039;t get an IP address from my ISP&#039;s DHCP: before now my (un)practical solution has been to restart the network services un indefinite number of times until I got one.</p><p>Unfortunately, in the last days this trick did not work anymore: no matter how many restarts, I would get no address. Attaching the WAN cable to any desktop pc (either linux of mac os x), instead, worked as expected. <br />I have tried any kind of trick (like obtaining an address on my desktop machine, and then cloning its mac address), any kind of turn-off periods for all my electrical devices but I did not manage to solve in any way.</p><p>Taken by desperation, I even tried to switch to dd-wrt, but the problem remained exactly the same.<br />Finally, I discovered that this is a common problem that also users of dd-wrt are experiencing with my ISP (see, for example, here <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?p=545197)">http://www.dd-wrt.com/phpBB2/viewtopic.php?p=545197)</a>.</p><p>The original linksys firmware, instead, does not have the issue.</p><p>However, since I did not want to revert to the original firmware, I kept trying with openwrt --- backfire rc-5 --- and (basically through an endless stupid series of bruteforce tries) I found a way to solve the problem. Here&#039;s what I did:</p><p>1. Connect the WAN cable to the LAN switch and vice-versa.<br />2. Set eth0 as the WAN interface and eth1 as the LAN interface in /ect/config/network.<br />3. Restart networking</p><p>This way everything works neatly: The point is that I really do not understand the reason why.<br />Hence, my first - most important - question is: do you have a possible explanation why this trick did the job?</p><p>However, this configuration brings to a second problem; as you can see from <a href="http://wiki.openwrt.org/toh/linksys/wrt160nl#hardware">http://wiki.openwrt.org/toh/linksys/wrt160nl#hardware</a> the port where I connected the WAN cable is actually part of the switch which is connected to the eth0 interface. <br />Since now I am using eth0 for WAN connection, I basically cannot have more than one wired node in the LAN since now eth1 is the private network interface.</p><p>Do you have any idea about how to try to solve this? For instance, is it possible to rename the interfaces, just to check whether the DHCP problem is just related to interface names?</p><p>Any suggestion would be more than appreciated.</p><p>andrea</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>