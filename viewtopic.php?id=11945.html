<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ipt_mac: How to get it going?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p53425">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">benevans</div>
					<div class="post-datetime">
						5 Aug 2007, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi there everyone, first off, a big thanks to everyone involved in openwrt. Next the problem.</p><p>I&#039;m trying to get wifidog going on kamikaze and it turns out i need ipt_mac in order to support the iptables based rules mechanism in the wifidog gateway. The wifidog gatewaycan&#039;t find the ipt_mac library and neither can insmod.</p><p>I think I might need a ipt_mac.ko and an ipt_mac.so in order to do this. But I cant find them in the kamikaze build tree I have constructed.</p><p>Please can someone provide me with a bit of advice on how get ipt_mac working. I&#039;m desperate :-( and don&#039;t really understand enough about the Linux kernel and libraries to solve the problem.</p><br /><p>Cheers</p><p>Ben</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p53436">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">benevans</div>
					<div class="post-datetime">
						5 Aug 2007, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>Well, fixed my problem by building a new 7.07 tree, configuring all the ipt packages as built in. Wifidog can now see all the ipt stuff. </p><br /><div class="quotebox"><cite>benevans wrote:</cite><blockquote><p>Hi there everyone, first off, a big thanks to everyone involved in openwrt. Next the problem.</p><p>I&#039;m trying to get wifidog going on kamikaze and it turns out i need ipt_mac in order to support the iptables based rules mechanism in the wifidog gateway. The wifidog gatewaycan&#039;t find the ipt_mac library and neither can insmod.</p><p>I think I might need a ipt_mac.ko and an ipt_mac.so in order to do this. But I cant find them in the kamikaze build tree I have constructed.</p><p>Please can someone provide me with a bit of advice on how get ipt_mac working. I&#039;m desperate :-( and don&#039;t really understand enough about the Linux kernel and libraries to solve the problem.</p><br /><p>Cheers</p><p>Ben</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						14 Sep 2007, 04:51					</div>
				</div>
				<div class="post-content content">
					<p>This is still a problem for me, because I&#039;m relying on the packaged distributions.&nbsp; Specifically...<br /></p><div class="codebox"><pre><code>root@OpenWRT:~# ipkg files kmod-ipt-ipopt
Package kmod-ipt-ipopt (2.6.22.4-brcm47xx-1) is installed on root and has the following files:
/lib/modules/2.6.22.4/xt_mac.ko
/lib/modules/2.6.22.4/xt_CLASSIFY.ko
/lib/modules/2.6.22.4/ipt_ecn.ko
/lib/modules/2.6.22.4/xt_length.ko
/etc/modules.d/40-ipt-ipopt
/lib/modules/2.6.22.4/ipt_tos.ko
/lib/modules/2.6.22.4/xt_DSCP.ko
/lib/modules/2.6.22.4/xt_mark.ko
/lib/modules/2.6.22.4/ipt_ECN.ko
/lib/modules/2.6.22.4/xt_dscp.ko
/lib/modules/2.6.22.4/xt_MARK.ko
/lib/modules/2.6.22.4/ipt_ttl.ko
/lib/modules/2.6.22.4/ipt_time.ko
/lib/modules/2.6.22.4/ipt_TOS.ko
/lib/modules/2.6.22.4/ipt_TTL.ko

Done.</code></pre></div><p>&quot;lsmod&quot; shows these installed - including &quot;xt_mac&quot; - but that&#039;s not the same as &quot;ipt_mac&quot; is it?&nbsp; Is there a version of this package (or some other package) for 2.6.22.4-brcm47xx-1 which has ipt_mac compiled and installed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57178">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">whbjr</div>
					<div class="post-datetime">
						7 Oct 2007, 23:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Is there a version of this package (or some other package) for 2.6.22.4-brcm47xx-1 which has ipt_mac compiled and installed?</p></blockquote></div><p><strong>Problem Solved</strong> by upgrading to Kamikaze 7.09, and installing iptables-mod-ipopt, which pulls in kmod-ipt-ipopt as a dependency.&nbsp; A quick test - adding an iptables rule which includes both mac-address matching and packet-marking - shows that I&#039;m now ready to get wifidog up and running!</p><p>By the way, I still can&#039;t do this on my 7.07 (r8480) box because of old/new package conflicts:<br /></p><div class="codebox"><pre><code>r8480# ipkg install iptables-mod-ipopt
Installing iptables-mod-ipopt (1.3.8-1) to root...
Downloading http://downloads.openwrt.org/snapshots/brcm47xx-2.6/packages/./iptables-mod-ipopt_1.3.8-1_mipsel.ipk
An error ocurred, return value: 1.
Collected errors:
Package iptables-mod-ipopt wants to install file /usr/lib/iptables/libipt_tcpmss.so
        But that file is already provided by package iptables</code></pre></div><p>No big deal, I prefer the wifidog box to have a fresh installation of the newest release, anyway!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>