<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> serial console on tp-link 1043nd (usb-ttl)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p190232">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>Just got my usb-ttl (cp2102), but can&#039;t get it working with my router (tp-link 1043nd).<br /><span class="postimg"><img src="http://img38.imageshack.us/img38/8068/usbttl.jpg" alt="http://img38.imageshack.us/img38/8068/usbttl.jpg" /></span></p><p>I&#039;ve soldered the 4-pin header and checked continuity according to the wiki. The terminal (putty) will however only spit out garbled text, it actually looks like a baudrate/parity/flow-control problem but no matter what settings I choose, the output is either garbled or absent. </p><p>What I&#039;ve tried so far;<br />Connecting only TX/RX - Garbled output that comes in chunks (uboot, kernel booting?), seems to go quiet after a while.<br />Reversing TX/RX - No output.<br />Connecting TX/RX and GND - No output.<br />Connecting TX/RX, GND and VCC - No output.<br />Verified soldering joints with multimeter, all is fine as far as I can tell.</p><p>What could be the problem? Faulty usb-ttl cable?<br />The router is working fine btw, just wanted to make sure I have serial access for recovery.</p><br /><p>Output looks something like this at 115200/8n1 no-flowcontrol:<br /></p><div class="codebox"><pre><code>¿åëRûûë£E¿5/9-A/97¿UY{¿¿±u#/=#957±¿o!¿y!#¯uoym¿wëRûûë£E¿5/9-¥&#039;=3!5/9-¥&#039;=3!¿q5#5¿_&#039;=3!uoym¿y!#ëRûûë£E¿5/9-¥&#039;=3!5/9-¥&#039;=3!¿#5¿UY{¿;¿1-57§¿=-1#57¿;¿#%;55/9-¥&#039;=3!¿-§¿-!¿%5%¿5/9-¥&#039;=3!¿UY{¿¿=7§¿uoym¿¿755957åëRûûë£E¿#3A9!##9)¿5££¿¯¿;9)5§¿%=åëRûûë£E¿-A=;&#039;5¿¯y¿¥¿c53-&#039;5y!¿W5=%åëRûûë£E¿!/9-A/97¿UY{¿¯aoym¿wëRûûë£E¿=¿&#039;&#039;A1¿;¿7¿!¿%!75åëRûûë£E¿75-95¿5/¿5#57¿!¿%!75åëRûûë£E¿;&#039;=#¿!7¿3!-#1¿=5åë êûûë£E¿;&#039;=#¿!7¿3!-#åëRûûÛ£E¿;&#039;=#¿!&#039;=#¿5#57¿3!-#1¿=5åëêûûÛ£E¿;&#039;=#¿!&#039;=#¿5#57¿3!-#1¿=5åëRûûÛ£E¿m_¿}wåëRûûÛE¿;&#039;=#¿!&#039;=#¿5#57¿3!-#1¿=5åë!%5¿=7
R{{{{6kE?&#039;-;/
?
 ?57ekR{{{{6kE?5/
&#039;?-&#039;?%!75        ?}/5}q?=?;
¿=#7¿/-¿I5#5Ë£E¿5/¿&#039;-#)¿¿¯e;¡s&#039;&#039;¿7&#039;5åëiû-#-¿¥åëµTÊ¿/5¿I3E¿)5
¿!¿5#53=-&#039;=35¿%!75åë</code></pre></div>											<p class="post-edited">(Last edited by <strong>spock</strong> on 28 Jan 2013, 19:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190238">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						28 Jan 2013, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>Try only gnd and rx of adapter, connect to gnd and tx of router..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190241">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 21:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>Try only gnd and rx of adapter, connect to gnd and tx of router..</p></blockquote></div><p>No luck. :-(</p><p>In the meantime I got the adapter to work on another device. So I&#039;ve messed something up in the 1043nd for sure. </p><p>I&#039;ve done continuity check on GND and both TX/RX shows voltage to GND. I&#039;m no electrician so don&#039;t laugh.. but here goes -- when the router power is unplugged, I see 1.6V between TX/RX and GND using the multimeters power (whatever this is called I&#039;m not sure). With the router power plugged in I see 3.2V on TX and 0V on RX.. all this seems quite normal to me.</p><p>Google told me that CP2102 works poorly if the voltage is under 3V in some situations, original CP2102 spec. was min 2.7V, but they updated their docs to say 3V minimum later.. still my router measures 3.2V so it shouldn&#039;t be this either.</p><p>Any guesses?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190242">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						28 Jan 2013, 21:46					</div>
				</div>
				<div class="post-content content">
					<p>Any chance polarity can be wrong?&nbsp; That is, is the 1043nd putting out and expecting the lines to idle high and they actually are idling low?&nbsp; I suspect that the CP2102 can be set for idle-low by the driver, but I don&#039;t know how to do it (I&#039;d like to).&nbsp; All the CP2102 usb serial dongles that I have seen idle high like rs232 devices (but use ttl voltage levels).</p><p>One other possibility.&nbsp; The usb dongle which I use for router serial console is a PL2303 which has a jumper for 5V/3V3, and I put it on 3V3.&nbsp; I have a dongle like yours, but haven&#039;t used it for this purpose since I wasn&#039;t sure that it wasn&#039;t using 5V ttl when the router is expecting 3V.&nbsp; Even if you connect to the 3V3 output pin, that doesn&#039;t mean (I think) that the Tx and Rx voltage levels are 3V3 rather than 5V.</p><p>What other device to you have the CP2102 dongle working on?</p>											<p class="post-edited">(Last edited by <strong>lizby</strong> on 28 Jan 2013, 21:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190249">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>@lizby</p><p>From the spec. sheet of CP2102 it seems that it&#039;s always 3.3V TTL but can deliver either 5V or 3.3V for VCC. I just put an order for a PL2303 based adapter to try with as well..</p><p>Since I&#039;m pretty sure I suck at soldering I&#039;m going to redo it tomorrow and see if some magic will happen. If that doesn&#039;t work Google also talks about noise sensitivity on long TTL cables (the ones I got with the adapter are ~20cm, and my workbench isn&#039;t exactly noise free), so I&#039;ll have to test that too..</p><p>The other device I got working was my new router, tp-link 4300. Very similar to the 1043nd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190250">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>Solved it! One part stupidity and I think one part wiki error.. according to the wiki (<a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#serial">http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#serial</a>) TX is to the far right.. but on my 1043nd v1.8 the TX is second from right. I had just forgotten to plug the GND cable when I tried swapping TX/RX.</p><p>Below is the working connection, I guess the wiki must be wrong?<br /><span class="postimg"><img src="http://img12.imageshack.us/img12/9340/usbttl2.jpg" alt="http://img12.imageshack.us/img12/9340/usbttl2.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>spock</strong> on 28 Jan 2013, 23:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190251">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						28 Jan 2013, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s really strange.. Noone reported this???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190252">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 23:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>That&#039;s really strange.. Noone reported this???</p></blockquote></div><p>If I&#039;m the only one seeing this, it must mean the pcb on my ttl adapter is mislabeled. Which seems more plausible..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190253">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						28 Jan 2013, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>Yes i was thinking the same.. Just try to disconnect tx on the adapter and see if you still get serial output ^^</p><p>But why did it work with 4300???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190254">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">spock</div>
					<div class="post-datetime">
						28 Jan 2013, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>I feel a bit silly not to have thought of that myself.. but no, the terminal dies if I disconnect either TX or RX (or GND, for that matter - so it might die for other reasons).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p190257">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						29 Jan 2013, 00:24					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s the usb dongle which is mislabelled--I&#039;ve seen that also.&nbsp; You should see the console output with just 0V and the correct TX from the cp2102 dongle--removing RX should not alter that.&nbsp; But you do need the 0V.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196899">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">bruno_castegliani</div>
					<div class="post-datetime">
						2 Apr 2013, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys..<br />I was following the Wiki too. My router is 1.8 ver. In the first test i did with soldered pins i get the same chunk caracters. So, a change the baudrate in the device list in windows for 115200 (like Wiki Says) and connect via Putty. Was working, i could read the information.<br />But now, i only gets a blank screen on putty, nothing heappens, can anyone have an idea?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>