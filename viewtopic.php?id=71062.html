<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> What other supplicant besides wpa_supplicant can I use?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p359223">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nenekofi</div>
					<div class="post-datetime">
						28 May 2017, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>Hello world,</p><p>I&#039;m trying to isolate an issue I&#039;m seeing with some DSL routers, specifically:<br /></p><ul><li><p>AT&amp;T - Uverse</p></li><li><p>AT&amp;T - Pace</p></li><li><p>AT&amp;T - Arris</p></li><li><p>Verizon - FiOS</p></li><li><p>Xfinity - HOME</p></li></ul><p>The issue I see, below, is when I try to connect using WPA2:<br /></p><div class="codebox"><pre><code>1495759332.988382: Successfully initialized wpa_supplicant
1495759336.851410: wlan0: SME: Trying to authenticate with e0:22:04:0c:3b:9a (SSID=&#039;ATT7yrg2U6&#039; freq=2437 MHz)
1495759336.897855: wlan0: CTRL-EVENT-DISCONNECTED bssid=e0:22:04:0c:3b:9a reason=2 locally_generated=1
1495759337.867456: wlan0: Trying to associate with e0:22:04:0c:3b:9a (SSID=&#039;ATT7yrg2U6&#039; freq=2437 MHz)
1495759337.986141: wlan0: Associated with e0:22:04:0c:3b:9a
1495759338.998475: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759338.998618: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759338.999122: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759338.999227: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759339.982425: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759339.982569: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759340.965901: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759340.966043: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759341.948180: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759341.948323: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759343.024263: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759343.024406: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759343.925354: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759343.925497: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759344.903828: wlan0: WPA: Invalid EAPOL-Key MIC when using TPTK - ignoring TPTK
1495759344.903970: wlan0: WPA: Could not verify EAPOL-Key MIC - dropping packet
1495759345.918475: wlan0: CTRL-EVENT-DISCONNECTED bssid=e0:22:04:0c:3b:9a reason=15</code></pre></div><p>I have a Ralink/MediaTek RT3352 using the rt2x00 driver (Barrier Breaker). I don&#039;t see this issue when I set:<br /></p><div class="codebox"><pre><code>nohwcrypt=1</code></pre></div><p>I don&#039;t see this issue associating with non-ISP routers such as Netgear, Linksys, Asus, etc. I&#039;m going through the process of elimination to get to the bottom of the issue and I need to rule out wpa_supplicant. I&#039;d also appreciate it if someone has run into the issue and found away around it. I need to run with hardware encryption or the whole system goes to pot; so I need to find a solution to this issue.</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359299">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sera</div>
					<div class="post-datetime">
						29 May 2017, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>As far as I&#039;m aware everyone on Linux is using wpa_supplicant (Wicd, connman, networkmanager etc.) and there are no alternatives for WPA2</p><p>Maybe use an different version / configuration?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359333">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nenekofi</div>
					<div class="post-datetime">
						29 May 2017, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Sera</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359347">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						29 May 2017, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>The DSL router should be configured to WPA2 with AES (CCMP) forced.&nbsp; TKIP is obsolete and less secure.</p><p>Setting nohwcrypt tells the driver in the kernel to encrypt packets in software rather than try to use the hardware encryption engine in the wifi chip.&nbsp; The clear packets sent to user space (where wpa-supplicant runs) should be identical in either case.&nbsp; This appears to be a driver bug.&nbsp; wpa-supplicant is likely not even aware of your hwcrypt setting.</p><p>Barrier Breaker&#039;s kernel and driver suite is now very old.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>