<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Fonera / Atheros GPIO interrupts</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p55898">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jshamlet</div>
					<div class="post-datetime">
						17 Sep 2007, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>First off, I am using Kamikaze 7.06, with Linux kernel 2.6.19.2. Yes, I know, this is a WhiteRussian based forum, but there doesn&#039;t seem to be a devel thread for Kamikaze - and I would assume the principles apply to either.</p><p>It&#039;s running on a modified La Fonera (I installed 32MB of SDRAM in lieu of the original 16MB) I have wired jumpers from all of the user-available GPIO to the 10-pin debug connector, emulating a SPI bus to an Altera Stratix board. I am using the SPI interface to provide two async UART&#039;s, a number of GPIO, and a (relatively) high-speed synchronous serial link. I would like to implement one of the GPIO&#039;s as a RX/TX interrupt, to prevent the FIFO&#039;s from overflowing/underflowing.</p><p>I know that GPIO pins on Broadcom chips (WRT54G&#039;s) can be used as interrupt sources from searching the posts, but I&#039;m not sure how to do that with the Atheros WISOC in the La Fonera&#039;s. I can see from the documentation that there is&nbsp; an interrupt mask register, so it would make sense that it is possible, but how do you trap the interrupt? I am still a kernel module beginner. I just now have a driver that can speak SPI over GPIO, and report the contents of a SPI attached register vi a /proc file - but I really need interrupts for the next bit.</p><p>I have tried to create the largest FIFO&#039;s this FPGA can support, but the memory is limited, and it is possible to overflow with the 1Hz resolution timer that I appear to have access to via the kernel.</p><p>Could someone give me a pointer on how to trap and process that interrupt?</p><p>Alternately, is there a way to get sub 1Hz timing (that won&#039;t absolutely kill the kernel) for a kernel driver?</p><p>Thanks,<br />-Seth</p>											<p class="post-edited">(Last edited by <strong>jshamlet</strong> on 17 Sep 2007, 22:25)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>