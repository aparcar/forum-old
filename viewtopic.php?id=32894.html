<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> pivot root on tp-link wr1043nd</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p148170">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">danmackay</div>
					<div class="post-datetime">
						11 Nov 2011, 07:38					</div>
				</div>
				<div class="post-content content">
					<p>For some reason I cant get pivot root to mount after following the instructions on the wiki</p><p>I&#039;m using a self built trunk build with the following packages installed</p><br /><p>root@OpenWrt:~# opkg list-installed<br />6in4 - 10-1<br />base-files - 92-r28940<br />base-files-network - 2<br />blkid - 1.41.12-2<br />block-mount - 0.2.0-7<br />busybox - 1.19.3-5<br />crda - 1.1.1-1<br />dnsmasq - 2.58-2<br />dropbear - 0.53.1-6<br />e2fsprogs - 1.41.12-2<br />firewall - 2-42<br />hotplug2 - 1.0-beta-4<br />ip - 2.6.39-1<br />iptables - 1.4.10-4<br />iptables-mod-conntrack - 1.4.10-4<br />iptables-mod-nat - 1.4.10-4<br />iw - 3.1-2<br />kernel - 2.6.39.4-1<br />kmod-ath - 2.6.39.4+2011-11-04-1<br />kmod-ath9k - 2.6.39.4+2011-11-04-1<br />kmod-ath9k-common - 2.6.39.4+2011-11-04-1<br />kmod-button-hotplug - 2.6.39.4-3<br />kmod-cfg80211 - 2.6.39.4+2011-11-04-1<br />kmod-crc16 - 2.6.39.4-1<br />kmod-crypto-aes - 2.6.39.4-1<br />kmod-crypto-arc4 - 2.6.39.4-1<br />kmod-crypto-core - 2.6.39.4-1<br />kmod-fs-ext4 - 2.6.39.4-1<br />kmod-input-core - 2.6.39.4-1<br />kmod-input-gpio-keys-polled - 2.6.39.4-1<br />kmod-input-polldev - 2.6.39.4-1<br />kmod-ipt-conntrack - 2.6.39.4-1<br />kmod-ipt-core - 2.6.39.4-1<br />kmod-ipt-nat - 2.6.39.4-1<br />kmod-ipt-nathelper - 2.6.39.4-1<br />kmod-iptunnel4 - 2.6.39.4-1<br />kmod-ipv6 - 2.6.39.4-1<br />kmod-leds-gpio - 2.6.39.4-1<br />kmod-ledtrig-usbdev - 2.6.39.4-1<br />kmod-lib-crc-ccitt - 2.6.39.4-1<br />kmod-mac80211 - 2.6.39.4+2011-11-04-1<br />kmod-nls-base - 2.6.39.4-1<br />kmod-ppp - 2.6.39.4-1<br />kmod-pppoe - 2.6.39.4-1<br />kmod-scsi-core - 2.6.39.4-1<br />kmod-sit - 2.6.39.4-1<br />kmod-usb-core - 2.6.39.4-1<br />kmod-usb-ohci - 2.6.39.4-1<br />kmod-usb-storage - 2.6.39.4-1<br />kmod-usb-storage-extras - 2.6.39.4-1<br />kmod-usb2 - 2.6.39.4-1<br />libblkid - 1.41.12-2<br />libc - 0.9.32-92<br />libcom_err - 1.41.12-2<br />libelf - 0.8.13-1<br />libext2fs - 1.41.12-2<br />libgcc - 4.5-linaro-92<br />libip4tc - 1.4.10-4<br />libiwinfo - 16<br />liblua - 5.1.4-8<br />libncurses - 5.7-5<br />libnetsnmp - 5.4.2.1-5<br />libnl-tiny - 0.1-2<br />libopenssl - 1.0.0e-1<br />libpthread - 0.9.32-92<br />libuci - 2011-10-21.2-1<br />libuci-lua - 2011-10-21.2-1<br />libuuid - 1.41.12-2<br />libxtables - 1.4.10-4<br />lua - 5.1.4-8<br />luci - trunk+svn7920-1<br />luci-app-firewall - trunk+svn7920-1<br />luci-app-radvd - trunk+svn7920-1<br />luci-i18n-english - trunk+svn7920-1<br />luci-lib-core - trunk+svn7920-1<br />luci-lib-ipkg - trunk+svn7920-1<br />luci-lib-lmo - trunk+svn7920-1<br />luci-lib-nixio - trunk+svn7920-1<br />luci-lib-sys - trunk+svn7920-1<br />luci-lib-web - trunk+svn7920-1<br />luci-mod-admin-core - trunk+svn7920-1<br />luci-mod-admin-full - trunk+svn7920-1<br />luci-proto-core - trunk+svn7920-1<br />luci-proto-ppp - trunk+svn7920-1<br />luci-sgi-cgi - trunk+svn7920-1<br />luci-theme-base - trunk+svn7920-1<br />luci-theme-openwrt - trunk+svn7920-1<br />mtd - 17<br />nano - 2.2.6-1<br />openssh-client - 5.9p1-2<br />openssh-keygen - 5.9p1-2<br />openssh-server - 5.9p1-2<br />opkg - 618-2<br />radvd - 1.8.2-2<br />snmpd - 5.4.2.1-5<br />swap-utils - 2.13.0.1-4<br />swconfig - 10<br />terminfo - 5.7-5<br />uci - 2011-10-21.2-1<br />uhttpd - 30<br />wireless-tools - 29-4<br />wpad-mini - 20111103-1<br />zlib - 1.2.5-1</p><br /><p>mounting a usb device is fine, just pivot root isnt working</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148268">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Smola</div>
					<div class="post-datetime">
						12 Nov 2011, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>Same for me.<br />Trunk r28562.</p><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/config/fstab

config &#039;global&#039; &#039;automount&#039;
        option &#039;from_fstab&#039; &#039;1&#039;
        option &#039;anon_mount&#039; &#039;0&#039;

config &#039;global&#039; &#039;autoswap&#039;
        option &#039;from_fstab&#039; &#039;1&#039;
        option &#039;anon_swap&#039; &#039;0&#039;

config mount
        option target /
        option uuid 802cac75-eca9-4553-a974-14225be2e41c
        option fstype ext4
        option enabled 1
        option options rw,sync</code></pre></div><p>What i get:<br /></p><div class="codebox"><pre><code>/dev/sda3               503.9M     32.8M    445.5M   7% /tmp/whole_root-disabled</code></pre></div><p>Im also try:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# cp /.extroot.md5sum /tmp/whole_root-disabled/
root@OpenWrt:~# cp /.extroot.md5sum /tmp/whole_root-disabled/etc/extroot.md5sum</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148277">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						12 Nov 2011, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>I followed <a href="http://wiki.openwrt.org/doc/howto/extroot">Rootfs on External Storage (extroot)</a> and it works perfect. I run 28886 trunk:</p><div class="codebox"><pre><code>root@OpenWrt:~# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                    3.6G    187.7M      3.2G   5% /
/dev/root                 2.4M      2.4M         0 100% /rom
tmpfs                    30.3M      3.0M     27.3M  10% /tmp
tmpfs                   512.0K         0    512.0K   0% /dev
/dev/sda1                 3.6G    187.7M      3.2G   5% /
/dev/sdb1               698.6G    299.3G    399.3G  43% /mnt/sdb1</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,noatime)
sysfs on /sys type sysfs (rw,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
tmpfs on /dev type tmpfs (rw,noatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,noatime,mode=600)
/dev/sda1 on / type ext4 (rw,sync,relatime,user_xattr,barrier=1,data=ordered)
debugfs on /sys/kernel/debug type debugfs (rw,relatime)
none on /proc/bus/usb type usbfs (rw,relatime)
/dev/sdb1 on /mnt/sdb1 type fuseblk (rw,nosuid,nodev,relatime,user_id=0,group_id=0,allow_other,blksize=4096)</code></pre></div><p>Btw. I&#039;ve pyLoad running on a WNDR3700 v1.</p>											<p class="post-edited">(Last edited by <strong>written_direcon</strong> on 12 Nov 2011, 18:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p148293">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Smola</div>
					<div class="post-datetime">
						12 Nov 2011, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Problem solved after updating to trunk r28993.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>