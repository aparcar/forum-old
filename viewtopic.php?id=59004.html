<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Missing firmware mtd device</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p287298">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">marcosbontempo</div>
					<div class="post-datetime">
						12 Aug 2015, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m using a image generated with the Openwrt Buildroot. I need to upgrade the firmware with a command line solution. I already tried sysupgrade, but without sucess. I&#039;m now using mtd, but I only have rootfs and rootfs_data mtd devices. Does anybody know how can I upgrade the firmware? My version is Chaos Chalmer. </p><p>Any tip will be very helpful,<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287301">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						12 Aug 2015, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>hi</p><p>try this<br /><a href="http://wiki.openwrt.org/doc/howto/generic.sysupgrade">http://wiki.openwrt.org/doc/howto/generic.sysupgrade</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287303">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">marcosbontempo</div>
					<div class="post-datetime">
						12 Aug 2015, 22:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi, thanks for your answer. I tried sysupgrade, but it&#039;s not working. I get the following log:</p><div class="codebox"><pre><code>root@MANTIS:/# sysupgrade -v /tmp/openwrt-x86-generic-combined-squashfs.img.gz 
Saving config files...
etc/config/dansguardian
etc/config/dhcp
etc/config/dropbear
etc/config/firewall
etc/config/gps
etc/config/gpsd
etc/config/luci
etc/config/mantis
etc/config/mwan3
etc/config/network
etc/config/nodogsplash
etc/config/openvpn
etc/config/qos
etc/config/rpcd
etc/config/system
etc/config/tinyproxy
etc/config/ucitrack
etc/config/uhttpd
etc/config/wireless
etc/dansguardian/dansguardianf1.conf
etc/dnsmasq.conf
etc/dropbear/dropbear_dss_host_key
etc/dropbear/dropbear_rsa_host_key
etc/firewall.user
etc/group
etc/hosts
etc/inittab
etc/iproute2/rt_tables
etc/opkg.conf
etc/opkg/customfeeds.conf
etc/opkg/keys/aa35659321359e9c
etc/opkg/keys/af22f7a88858c8e9
etc/passwd
etc/ppp/chap-secrets
etc/ppp/filter
etc/ppp/options
etc/ppp/radius.conf
etc/ppp/radius/dictionary
etc/ppp/radius/dictionary.asnet
etc/ppp/radius/dictionary.microsoft
etc/ppp/radius/servers
etc/profile
etc/protocols
etc/rc.local
etc/services
etc/shadow
etc/shells
etc/sysctl.conf
etc/sysctl.d/local.conf
etc/sysupgrade.conf
Sending TERM to remaining processes ... logd rpcd netifd odhcpd gpsd uhttpd dnsmasq monit dansguardian dansguardian dansguardian ntpd ubusd askfirst 
Sending KILL to remaining processes ... askfirst K90network sleep 
Switching to ramdisk...
Performing system upgrade...
Terminated</code></pre></div><p>After rebooting, the system freezes in this point:</p><div class="codebox"><pre><code>[    6.162034] block2mtd: error: cannot open device PARTUUID=a10b855f-02
[    6.168585] rtc_cmos rtc_cmos: setting system clock to 2015-08-12 19:09:22 UTC (1439406562)
[    6.177476] Waiting for root device /dev/mtdblock0...
[   78.207422] random: nonblocking pool is initialized</code></pre></div>											<p class="post-edited">(Last edited by <strong>marcosbontempo</strong> on 12 Aug 2015, 22:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287307">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						12 Aug 2015, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>better you save all /etc folder somewhere safe and do a fresh install<br />for fresh install see your device CLI flashing wiki</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287312">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">marcosbontempo</div>
					<div class="post-datetime">
						12 Aug 2015, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>I reinstalled the image, but I still get the same error. It&#039;s something&nbsp; with the Chaos Chalmer version? Or with the x86 platform?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287314">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						12 Aug 2015, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>x86 platform...<br />just generate the image or get one already generated<br />dont put too many packages and dont make it too big<br />better start testing from empty image going up(trial and error)<br /><a href="https://forum.openwrt.org/viewtopic.php?id=58857">https://forum.openwrt.org/viewtopic.php?id=58857</a></p><p>i thought your on a device with 4MB of flash or something.. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p287317">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">marcosbontempo</div>
					<div class="post-datetime">
						12 Aug 2015, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>I think it&#039;s not about the size... my device has 1GB of flash.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>