<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to do a proper wireless benchmark?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p157302">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						13 Feb 2012, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have lots of wifi routers, tp-link wr741, wr841, wr1043 and ubiquiti routerboard with few different mini-pci cards and would like do a proper wifi test.</p><p>After I do some test I&#039;ll start wiki page with instructions for others and start filling results in benchmark table.</p><p>I would use always two of the same models to see how they perform before doing anything &quot;crazy&quot; like mixing different brands and models.</p><p>Has anybody done this? do you have any suggestions?</p><p>One router should be in ap and other in station mode, but should lan and wifi be in routing or in bridge mode? Is there any performance difference? </p><p>Does using 40 Mhz channel width make much difference? Are there any other non-default setting that should be turned on for maximum wifi performance?</p>											<p class="post-edited">(Last edited by <strong>valentt</strong> on 13 Feb 2012, 23:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157335">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						14 Feb 2012, 10:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>valentt wrote:</cite><blockquote><p>Hi, I have lots of wifi routers, tp-link wr741, wr841, wr1043 and ubiquiti routerboard with few different mini-pci cards and would like do a proper wifi test.</p><p>After I do some test I&#039;ll start wiki page with instructions for others and start filling results in benchmark table.</p><p>I would use always two of the same models to see how they perform before doing anything &quot;crazy&quot; like mixing different brands and models.</p><p>Has anybody done this? do you have any suggestions?</p><p>One router should be in ap and other in station mode, but should lan and wifi be in routing or in bridge mode? Is there any performance difference? </p><p>Does using 40 Mhz channel width make much difference? Are there any other non-default setting that should be turned on for maximum wifi performance?</p></blockquote></div><p>1. Nice.</p><p>2. What are you waiting for? Go test.</p><p>3. Good.</p><p>4. No and no suggestions.</p><p>5. Test both. Expect difference in performance.</p><p>6. Follow KISS and use defaults.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157347">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						14 Feb 2012, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Tools to use iperf or jperf<br />Things you need to note:<br />1)Windows Size Higher better throughput usually 64k<br />2)Ensure little to no interference from neighbours<br />3)40MHZ for highest performance include 20MHZ for comparison and testing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157365">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						14 Feb 2012, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>just a question intead of using the traditional ap and client mode test what about puuting both routers in adhoc mode and test</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157373">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Feb 2012, 17:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>valentt wrote:</cite><blockquote><p>Does using 40 Mhz channel width make much difference? Are there any other non-default setting that should be turned on for maximum wifi performance?</p></blockquote></div><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr841nd#stuck.at.130mbps.get.300mbps">http://wiki.openwrt.org/toh/tp-link/tl- … et.300mbps</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157419">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						15 Feb 2012, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>I tested two wr841 but had some issues with configuration, after I figure out the issue, I got iperf to run on both routers but not to run on laptops that are connected to wr841 lan ports. Laptops can ping each other but ipers gives error &quot;no route to host&quot; even when all firewall zones have &quot;ACCEPT&quot; rules, so I don&#039;t know what is the issue.</p><p>I tried few different settings and I got around 45 Mbits with 20 Mhz channel width and 47-50 Mbits with 40 Mhz channel width, even when iwconfig was showing 300 Mbits connection speeds.</p><p>I read on smallnetbuilder that wifi N routers could give upto 90 Mbits but on <a href="http://www.smallnetbuilder.com">www.smallnetbuilder.com</a> I saw that top 5 wifi routers all have bandwidth under 60 Mbits!<br /><a href="http://www.smallnetbuilder.com/lanwan/router-charts/bar/58-2_4-ghz-dn">http://www.smallnetbuilder.com/lanwan/r … 2_4-ghz-dn</a></p><p>What were maximum transfer speeds you got over wifi using openwrt or default firmware, did anybody got bandwidth significantly over 60 Mbitsor it 50 Mbits maximum with current technology and cpu speeds in non-professional routers under 200$ ?</p><p>I&#039;ll update this post with mode detailed info in next few days.</p>											<p class="post-edited">(Last edited by <strong>valentt</strong> on 15 Feb 2012, 13:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157421">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						15 Feb 2012, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>1) switch client and server position... i think you used routed client so maybe one can reach the other&#039;s server but not vice-versa.</p><br /><p>2) you should definetly get 100 Mbps with these boxes IN A RF CLEAN environment.. that depends on your luck and/or channel selection and/or placing far from any other RF source.</p><br /><p>P.S. you could have tried also the WDS option on stock firmware to compare throughput <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 15 Feb 2012, 00:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157466">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						15 Feb 2012, 12:26					</div>
				</div>
				<div class="post-content content">
					<p>Please see: <a href="http://wiki.openwrt.org/doc/faq/faq.wireless#wireless.throughput">OpenWrt 802.11 FAQ: wireless throughput</a>.</p><p>The unanswered question is, how much &quot;<em>payload</em> throughput&quot; you can possibly get with IEEE 802.11n 300 MBit/s <strong>theoretically</strong> because of the protcol overhead.</p><p>1. We are talking about Layer2 here, so we do not call the datagrams packets, but frames.<br />2. Let us look at the frames. What kind of frames does Layer2 of IEEE 802.11 define? No, there is no page for that in the wikipedia... the kretins must have succeded in outcasting the nerds.<br />3. Do the math.</p><p>4. Once you know what is/should be possible, you measure.<br />5. What do you want to measure and what does the software you are employing truly measure?</p><br /><p>I just created: <a href="http://wiki.openwrt.org/doc/networking/datagram.structures">OpenWrt Wiki: Datagram Structures</a> and <a href="http://wiki.openwrt.org/doc/networking/wireless.frames">OpenWrt Wiki: wireless frames</a>.</p>											<p class="post-edited">(Last edited by <strong>Orca</strong> on 15 Feb 2012, 12:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157468">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">risha</div>
					<div class="post-datetime">
						15 Feb 2012, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>hi, am a non-technical person and&nbsp; i have done something wrong with my router&#039;s ip address... i just put the ethernet cable between my laptop and ZTx modem.. and open the cosole page .. at that time internet was working .. i just change the ip adress there and after that conole page never opened in my laptop.. everything working on my bro&#039;s system but not mine... u guys can give any help with that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157474">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						15 Feb 2012, 13:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>risha wrote:</cite><blockquote><p>hi, am a non-technical person and&nbsp; i have done something wrong with my router&#039;s ip address... i just put the ethernet cable between my laptop and ZTx modem.. and open the cosole page .. at that time internet was working .. i just change the ip adress there and after that conole page never opened in my laptop.. everything working on my bro&#039;s system but not mine... u guys can give any help with that?</p></blockquote></div><p>Risha it is matter or online and forum netiquette not to hijack other people forum threads. Please start your own discussion and give as much detail as possible because that will enable others to help you faster.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157475">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						15 Feb 2012, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>Related topic [1] showed that stock tp-linl firmware have much better wireless performance. Any ideas why?<br />I&#039;ll also test stock firmware and report back my findings.</p><p>[1] <a href="https://forum.openwrt.org/viewtopic.php?pid=151782">https://forum.openwrt.org/viewtopic.php?pid=151782</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157522">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						15 Feb 2012, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>Actually I missed this table from Smallnetbuilder:<br /><a href="http://www.smallnetbuilder.com/lanwan/router-charts/bar/94-2_4-ghz-updn-40">http://www.smallnetbuilder.com/lanwan/r … hz-updn-40</a></p><p>If there is traffic in both directions bandwidth goes over 100 Mbit on most powerful routers! </p><p>Anybody got over 100 Mbits/s with openwrt? What hardware and how?</p>											<p class="post-edited">(Last edited by <strong>valentt</strong> on 15 Feb 2012, 21:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157534">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						15 Feb 2012, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>The question how to do a proper benchmark for 802.11 throughput is still open, it seems.</p><br /><br /><p>&quot;got over 100Mbit/s&quot; with that method in what environment?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157535">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						15 Feb 2012, 22:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>The question how to do a proper benchmark for 802.11 throughput is still open, it seems.</p><br /><br /><p>&quot;got over 100Mbit/s&quot; with that method in what environment?</p></blockquote></div><p>Here is really detailed explanation: <br /><a href="http://www.smallnetbuilder.com/wireless/wireless-howto/30488-how-we-test-wireless-products-six-location-open-air-method">http://www.smallnetbuilder.com/wireless … air-method</a><br /><a href="http://www.smallnetbuilder.com/wireless/wireless-howto/31542-how-we-test-wireless-products-revison-6">http://www.smallnetbuilder.com/wireless … -revison-6</a></p><p>Hope this helps to clarify a bit, sorry for not giving those links right away.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>