<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need help for limiting bandwidth for a subnet mask</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p369963">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">unixfox</div>
					<div class="post-datetime">
						24 Dec 2017, 02:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I&#039;m coming from DDWRT and I had an ability to limit the bandwidth only for a whole subnet mask.<br />My previous setup on DDWRT was limiting the bandwidth for <strong>192.168.1.1/25</strong> and my DHCP pool was <strong>192.168.1.2-192.168.1.126</strong>.<br />The bandwidth limitation for this subnet mask was <strong>16000kbps</strong>(DOWN)/<strong>3500kbps</strong>(UP). My internet connection can go up to <strong>20048kbps</strong> download and 4048kbps upload.</p><p>I don&#039;t find how to replicate the same thing on OpenWRT. Can someone help me?</p><p><em>Why I do this?</em><br />When someone of my family by downloading reach the maximum of my internet connection the ping goes high and playing online games is impossible.<br />This way only selected devices by me out of the subnet mask limited range can affect the ping.</p>											<p class="post-edited">(Last edited by <strong>unixfox</strong> on 24 Dec 2017, 02:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369966">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						24 Dec 2017, 02:42					</div>
				</div>
				<div class="post-content content">
					<p>have a peek at the sqm package and LEDE (a newer openwrt)</p><p><a href="https://lede-project.org/docs/user-guide/sqm">https://lede-project.org/docs/user-guide/sqm</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369987">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">unixfox</div>
					<div class="post-datetime">
						24 Dec 2017, 15:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>WWTK wrote:</cite><blockquote><p>have a peek at the sqm package and LEDE (a newer openwrt)</p></blockquote></div><p>Unfortunately I can&#039;t do what I said with SQM.</p><p>I explain you in details what I want to do.<br />My main subnet mask is 192.168.1.1/24 with my routers and the others devices in my house.<br />My DHCP distribute only IPs from 192.168.1.2 to 192.168.1.126.<br />I want to only limit the bandwidth for the range from 192.168.1.2 to 192.168.1.126, a whole subnet mask of 192.168.1.1/25.<br />This way the others devices (192.168.1.127 to 192.168.1.254) will never be rate limited and I’ll set the IP of my devices to the range that it’s not rate limited. For example my personal computer will have this IP: 192.168.1.180.</p><p>I opened a thread on the LEDE forum (category &quot;Network and Wireless Configuration&quot;), I can&#039;t send you the link because I&#039;m not allowed to paste links on this forum.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369988">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						24 Dec 2017, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>you don&#039;t need to do what you said with sqm it manages it all for you so everyone gets great speed without impacting gaming ping times.</p><p>its what is was created to do, but does need some tuning.</p><p>you could use qos with classes and get what you want but i think the dynamically flexible sqm is better</p>											<p class="post-edited">(Last edited by <strong>WWTK</strong> on 24 Dec 2017, 15:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369989">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">unixfox</div>
					<div class="post-datetime">
						24 Dec 2017, 15:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>WWTK wrote:</cite><blockquote><p>you don&#039;t need to do what you said with sqm it manages it all for you so everyone gets great speed without impacting gaming ping times.</p><p>its what is was created to do, but does need some tuning.</p><p>you could use qos with classes and get what you want but i think the dynamically flexible sqm is better</p></blockquote></div><p>If I use SQM and follow the tutorial I will lose bandwidth because my ISP is letting me having more bandwidth than my line can offer and when someone download something at 20048kbps (MAX of the router) the ping goes really high like 300ms.<br />I found the values where the ping stay stable, at 16000kbps(DOWN)/3500kbps(UP).</p><p>In my scenario no bandwidth will be lost because only my devices (not the devices of my family) will be capable of using the maximum of the internet connection and thus affecting the ping when I don&#039;t play.</p>											<p class="post-edited">(Last edited by <strong>unixfox</strong> on 24 Dec 2017, 15:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369993">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						24 Dec 2017, 17:58					</div>
				</div>
				<div class="post-content content">
					<p>it accounts for that and is talked about specifically in the tutorial.&nbsp; SQM manages based on the tx and rx management queues not based on bw alone.&nbsp; It is far more sophisticated.</p><p>As I said above, the qos package can manage bandwidth by assigning ip addresses to different classes giving you what you are asking for.</p><p>I live in a house where everyone is constantly streaming some kind of garbage from the internet, to the tune of over 2tb/mo and one user in the house is an avid online gamer who basically only plays mmo games on xbox and pc.&nbsp; All I can tell you is after I started using sqm he stopped complaining and our overall internet experience for everyone is significantly better.</p>											<p class="post-edited">(Last edited by <strong>WWTK</strong> on 24 Dec 2017, 18:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369994">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						24 Dec 2017, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>Try putting SQM only on the ISP interface first.&nbsp; This can be very effective and not need to limit users into different classes.</p><p>If you want to set up different classes of users I think you will need to put them into different networks and apply SQM at the network interface level.&nbsp; Possibly there is a way to configure outside of luci-app-sqm to use IP ranges.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>