<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Trying to dump firmware through serial console KW5212</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p333270">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">velrob</div>
					<div class="post-datetime">
						4 Aug 2016, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>Hello all.</p><p>I am trying to backup my existing firmware before I try anything funky on the device.&nbsp; It is a KW5212 modem by Kasda.</p><p>I am through serial console:</p><p>FE version 1.0.38-114.185 for BCM963268 (32bit,SP,BE)<br />Build Date: Thu Dec&nbsp; 3 19:00:47 CST 2015 (lijianlin@PonServer)<br />Copyright (C) 2000-2011 Broadcom Corporation.</p><p>HS Serial flash device: name S25FL064, id 0x0116 size 8192KB<br />Total Flash size: 8192K with 128 sectors<br />Flash not used for Auxillary File System<br />Chip ID: BCM63168D0, MIPS: 400MHz, DDR: 400MHz, Bus: 200MHz<br />Main Thread: TP0<br />Memory Test Passed<br />Total Memory: 67108864 bytes (64MB)<br />Boot Address: 0xb8000000</p><p>Board IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 192.168.1.1:ffffff00<br />Host IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 192.168.1.100<br />Gateway IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :<br />Run from flash/host (f/h)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: f<br />Default host run file name&nbsp; &nbsp; &nbsp; &nbsp; : vmlinux<br />Default host flash file name&nbsp; &nbsp; &nbsp; : bcm963xx_fs_kernel<br />Boot delay (0-9 seconds)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1<br />Board Id (0-34)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: KW5212C13A<br />Number of MAC Addresses (1-32)&nbsp; &nbsp; : 11<br />Base MAC Address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 00:0e:f4:df:77:a3<br />PSI Size (1-64) KBytes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 24<br />Enable Backup PSI [0|1]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1<br />System Log Size (0-256) KBytes&nbsp; &nbsp; : 0<br />Auxillary File System Size Percent: 0<br />Main Thread Number [0|1]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0</p><p>*** Press any key to stop auto run (1 seconds) ***<br />Auto run second count down: 1^H1^H0<br />Booting from only image (0xb8010000) ...<br />Code Address: 0x80010000, Entry Address: 0x8030b350<br />Decompression OK!<br />Entry at 0x8030b350<br />Closing network.<br />Disabling Switch ports.<br />Flushing Receive Buffers...<br />0 buffers found.<br />Closing DMA Channels.<br />Starting program at 0x8030b350<br />Linux version 2.6.30 (yanggaofei@PonServer) (gcc version 4.4.2 (Buildroot 2010.02-git) ) #1 SMP PREEMPT Mon Feb 29 18:09:04 CST 2016<br />HS Serial flash device: name S25FL064, id 0x0116 size 8192KB<br />KW5212C13A prom init<br />CPU revision is: 0002a080 (Broadcom4350)<br />DSL SDRAM reserved: 0x132000<br />Determined physical RAM map:<br /> memory: 03ece000 @ 00000000 (usable)<br />Zone PFN ranges:<br />&nbsp; DMA&nbsp; &nbsp; &nbsp; 0x00000000 -&gt; 0x00001000<br />&nbsp; Normal&nbsp; &nbsp;0x00001000 -&gt; 0x00003ece<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00003ece<br />On node 0 totalpages: 16078<br />free_area_init_node: node 0, pgdat 803cfb40, node_mem_map 81000000<br />&nbsp; DMA zone: 32 pages used for memmap<br />&nbsp; DMA zone: 0 pages reserved<br />&nbsp; DMA zone: 4064 pages, LIFO batch:0<br />&nbsp; Normal zone: 94 pages used for memmap<br />&nbsp; Normal zone: 11888 pages, LIFO batch:1<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 15952<br />Kernel command line: root=31:0 ro noinitrd console=ttyS0,115200<br />wait instruction: enabled<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 16 bytes.<br />Primary data cache 32kB, 2-way, VIPT, cache aliases, linesize 16 bytes<br />NR_IRQS:128<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />console [ttyS0] enabled<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 59388k/64312k available (3084k kernel code, 4904k reserved, 773k data, 152k init, 0k highmem)<br />Calibrating delay loop... 398.33 BogoMIPS (lpj=199168)<br />Mount-cache hash table entries: 512</p><p>Here i am booted into CFE:<br />CFE version 1.0.38-114.185 for BCM963268 (32bit,SP,BE)<br />Build Date: Thu Dec&nbsp; 3 19:00:47 CST 2015 (lijianlin@PonServer)<br />Copyright (C) 2000-2011 Broadcom Corporation.</p><p>HS Serial flash device: name S25FL064, id 0x0116 size 8192KB<br />Total Flash size: 8192K with 128 sectors<br />Flash not used for Auxillary File System<br />Chip ID: BCM63168D0, MIPS: 400MHz, DDR: 400MHz, Bus: 200MHz<br />Main Thread: TP0<br />Memory Test Passed<br />Total Memory: 67108864 bytes (64MB)<br />Boot Address: 0xb8000000</p><p>Board IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 192.168.1.1:ffffff00&nbsp; <br />Host IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 192.168.1.100&nbsp; <br />Gateway IP address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; :&nbsp; &nbsp;<br />Run from flash/host (f/h)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: f&nbsp; <br />Default host run file name&nbsp; &nbsp; &nbsp; &nbsp; : vmlinux&nbsp; <br />Default host flash file name&nbsp; &nbsp; &nbsp; : bcm963xx_fs_kernel&nbsp; <br />Boot delay (0-9 seconds)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 1&nbsp; <br />Board Id (0-34)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: KW5212C13A&nbsp; <br />Number of MAC Addresses (1-32)&nbsp; &nbsp; : 11&nbsp; <br />Base MAC Address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 00:0e:f4:df:77:a3&nbsp; <br />PSI Size (1-64) KBytes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 24&nbsp; <br />Enable Backup PSI [0|1]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 1&nbsp; <br />System Log Size (0-256) KBytes&nbsp; &nbsp; : 0&nbsp; <br />Auxillary File System Size Percent: 0&nbsp; <br />Main Thread Number [0|1]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0&nbsp; </p><p>*** Press any key to stop auto run (1 seconds) ***<br />Auto run second count down: 1<br />web info: Waiting for connection on socket 0.<br />CFE&gt; </p><p>I had to modify cfetool so it would work with this device.&nbsp; Here is the command line I am using:</p><p>cfetool.py --read=kw.bin --addr=0xB8000000 --size=0x1000000 --block=0x10000 --serial=/dev/ttyUSB0</p><p>Whenever cfetool reaches B8200000 the modem will throw an exception, please see:</p><p>CFE&gt; dm b82000000 1000<br />**Exception 8: EPC=8060B120, Cause=00000008 (TLBMissRd)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RA=8060AF48, VAddr=00000000</p><p>&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; ($00) = 00000000&nbsp; &nbsp; &nbsp;AT ($01) = 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; v0 ($02) = 00000000&nbsp; &nbsp; &nbsp;v1 ($03) = 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; a0 ($04) = 8074D668&nbsp; &nbsp; &nbsp;a1 ($05) = 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; a2 ($06) = 00000010&nbsp; &nbsp; &nbsp;a3 ($07) = 00000008<br />&nbsp; &nbsp; &nbsp; &nbsp; t0 ($08) = 00000000&nbsp; &nbsp; &nbsp;t1 ($09) = 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; t2 ($10) = B0001900&nbsp; &nbsp; &nbsp;t3 ($11) = 00000000<br />&nbsp; &nbsp; &nbsp; &nbsp; t4 ($12) = FFFFFFFF&nbsp; &nbsp; &nbsp;t5 ($13) = FCFFFFFF<br />&nbsp; &nbsp; &nbsp; &nbsp; t6 ($14) = 0000C0C0&nbsp; &nbsp; &nbsp;t7 ($15) = 0F000003<br />&nbsp; &nbsp; &nbsp; &nbsp; s0 ($16) = 00000000&nbsp; &nbsp; &nbsp;s1 ($17) = F344F0AB<br />&nbsp; &nbsp; &nbsp; &nbsp; s2 ($18) = 2241282A&nbsp; &nbsp; &nbsp;s3 ($19) = 449C0726<br />&nbsp; &nbsp; &nbsp; &nbsp; s4 ($20) = BD8A5098&nbsp; &nbsp; &nbsp;s5 ($21) = 443E30DC<br />&nbsp; &nbsp; &nbsp; &nbsp; s6 ($22) = 00000000&nbsp; &nbsp; &nbsp;s7 ($23) = 80000000<br />&nbsp; &nbsp; &nbsp; &nbsp; t8 ($24) = 0000C0C0&nbsp; &nbsp; &nbsp;t9 ($25) = 0C000003<br />&nbsp; &nbsp; &nbsp; &nbsp; k0 ($26) = 8074D508&nbsp; &nbsp; &nbsp;k1 ($27) = 8064BBB0<br />&nbsp; &nbsp; &nbsp; &nbsp; gp ($28) = 80642580&nbsp; &nbsp; &nbsp;sp ($29) = 8074D640<br />&nbsp; &nbsp; &nbsp; &nbsp; fp ($30) = 8074D640&nbsp; &nbsp; &nbsp;ra ($31) = 8060AF48</p><br /><p>Resetting board in 60 seconds...</p><p>Not sure if the firmware is stored elsewhere?&nbsp; &nbsp; Anyone can help?</p><p>Thanks alot.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>