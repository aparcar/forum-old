<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Need router recommendation: IPsec VPN to a ZyXEL Box (P-661H)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Aug 2015.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p125217">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						12 Jan 2011, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody</p><p>I am going to order a powerfull router that will be run with OpenWrt and need an advice on which one to order (or which one not to order) for my intended use:</p><p>Beside doing <strong>normal WLAN and internet gateway</strong> stuff, it should act as an <strong>IPsec server</strong>, allowing a ZyXEL DSL router (P-661H) to establish a site-2-site IPsec VPN tunnel. So I think I will try <strong>ipsec-tools</strong> for this - and hope that the ZyXEL will be compatible to the standard.</p><p><strong>Is there anything special I have do look for when ordering the new router?</strong> As from what I found during my search through the forum: enough CPU speed (encryption). Are there routers offering special encryption hardware that is supported by OpenWrt?</p><p><strong>Currently on my shortlist:</strong><br/> - D-Link DIR-825<br/> - Netgear WNDR3700<br/> - TP-Link WR1043ND<br/> - Buffalo WZR-HP-G300NH</p><p><strong>I am leaning towards the DIR-825 because of its firmware recovery mode. Good choice for IPsec VPN?</strong></p><p>Thanks<br/>Tom</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125219">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rpc</div>
					<div class="post-datetime">
						12 Jan 2011, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>zyxcela long used the P-660HW and ipsec tunnel. The tunnel was connected to vpn ipsec racoon on debian. Router zyxcela walked steadily.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125229">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						12 Jan 2011, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>Thanks.</p><p>I saw that you are running racoon based IPsec tunnels on Atheros based TP-Link router.</p><p>In another thread you mentioned that there is an article describing the setup of racoon tunnels. I must be too stupid as I can&#039;t find that document... Can you give me a hint where to start?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125328">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rpc</div>
					<div class="post-datetime">
						13 Jan 2011, 18:42					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://rpc.one.pl/index.php/lista-artykulow/34-openwrt/51-racoon-czyli-ipsec-vpn-adresy-statyczne">http://rpc.one.pl/index.php/lista-artyk … -statyczne</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/34-openwrt/56-racoon-czyli-ipsec-vpn-adresy-statyczne-szyfrowanie-plain-rsa">http://rpc.one.pl/index.php/lista-artyk … -plain-rsa</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/34-openwrt/63-l2tp-czyli-vpn-zestawiony-na-podstawie-xl2tpdipsec-racoon-na-certyfikatach-8091">http://rpc.one.pl/index.php/lista-artyk … atach-8091</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/34-openwrt/55-racoon-czyli-ipsec-vpn-adres-dynamiczny">http://rpc.one.pl/index.php/lista-artyk … dynamiczny</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/57-racoon-czyli-ipsec-vpn-adresy-statyczne-szyfrowanie-plain-rsa-br-604-asmax-linux">http://rpc.one.pl/index.php/lista-artyk … smax-linux</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/93-racoon-czyli-ipsec-vpn-adresy-statyczne-szyfrowanie-pre-shared-key-td-w8960n-tp-link-linux">http://rpc.one.pl/index.php/lista-artyk … link-linux</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/62-l2tp-czyli-vpn-zestawiony-na-podstawie-xl2tpdipsec-racoon-na-certyfikatach">http://rpc.one.pl/index.php/lista-artyk … tyfikatach</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/65-racoon-jako-server-ipsec-dla-vpn-cisco-cllient-autoryzacja-hybrid-rsa">http://rpc.one.pl/index.php/lista-artyk … hybrid-rsa</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/64-racoon-jako-server-ipsec-dla-vpn-cisco-cllient-autoryzacja-xauth-psk">http://rpc.one.pl/index.php/lista-artyk … -xauth-psk</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/62-l2tp-czyli-vpn-zestawiony-na-podstawie-xl2tpdipsec-racoon-na-certyfikatach">http://rpc.one.pl/index.php/lista-artyk … tyfikatach</a><br/><a href="http://rpc.one.pl/index.php/lista-artykulow/36-debian/61-generowanie-certyfikatow-openssl-x509">http://rpc.one.pl/index.php/lista-artykulow/36-debian/61-generowanie-certyfikatow-openssl-x509</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125329">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						13 Jan 2011, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Ups - I&#039;ll have to engage Google translator. ;-)</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125332">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rpc</div>
					<div class="post-datetime">
						13 Jan 2011, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>I used to create an IPSec tunnel between the router on debian and the following routers:<br/>P-660H (original software)<br/>WR1043ND (openwrt)<br/>AG241V2 (openwrt)<br/>TD-W8960N (original software)<br/>BR-804G (original software)<br/>BR-804 (original software)<br/>cisco 1841 (original software)<br/>Linksys WRV210 (original software)<br/>Linksys WRV200 (original software)<br/>created tunnels run everywhere stable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125333">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						13 Jan 2011, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. I&#039;m confident, that a connection to the P-661H is possible then (very similar to P-660).</p><p>Maybe I&#039;ll try OpenSwan first before KAME as this seems to be much more comfortable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125359">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						13 Jan 2011, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve used StrongSwan to connect an OpenWrt box (WNDR3700) to a Zyxel. StrongSwan is super easy to configure, and it handles the firewall rules for you. That said, I prefer ipsec-tools (racoon) because it takes up much less space.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125384">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						14 Jan 2011, 08:50					</div>
				</div>
				<div class="post-content content">
					<p>Thanks aport for your comment. Interesting to hear that it worked for StrongSwan. Can you tell something about a compatible configuration working both for StrongSwan and Zyxel? I think it&#039;s important to choose supported cipher, hash, etc. Not all combinations lead to a working tunnel.</p><p>I would prefer ipsec-tools too. These allow efficient lean VPNs. But the know how needed to configure a tunnel is huge IMHO.</p><p>That&#039;s why I&#039;ll try a simpler solution first (OpenSwan, StrongSwan). If that works, maybe I&#039;ll have the energy to configure the same thing based on ipsec-tools only.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125526">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">swiss_tom</div>
					<div class="post-datetime">
						15 Jan 2011, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>I just realized that the <strong>D-Link DIR-825 seems to have a problem with the LAN switch</strong> causing errors and low speed. As this problem seems hard to be fixed, I&#039;ll probably switch over to a cheap TP-Link WR1043ND.</p><p>I would have prefered the DIR-825 because of its <strong>firmware recovery mode</strong> which seems to make it nearly unbrickable. Or <strong>are there other routers offering that internal recovery feature</strong>? I&#039;m not a fan of building a serial connection cable for unbricking...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125733">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						17 Jan 2011, 19:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>swiss_tom wrote:</cite><blockquote><p>Thanks aport for your comment. Interesting to hear that it worked for StrongSwan. Can you tell something about a compatible configuration working both for StrongSwan and Zyxel? I think it&#039;s important to choose supported cipher, hash, etc. Not all combinations lead to a working tunnel.</p><p>I would prefer ipsec-tools too. These allow efficient lean VPNs. But the know how needed to configure a tunnel is huge IMHO.</p><p>That&#039;s why I&#039;ll try a simpler solution first (OpenSwan, StrongSwan). If that works, maybe I&#039;ll have the energy to configure the same thing based on ipsec-tools only.</p></blockquote></div><p>As long as you pick something common, such as aes-modp1024-sha1, you should be fine. Make sure you either explicitly enable or disable PFS on both sides. A PFS mismatch is a pretty common phase2 error.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>