<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> RTAI on Kamikaze</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p69978">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tA</div>
					<div class="post-datetime">
						23 Jun 2008, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>This is my first post on this forum, thus pardon if I do something wrong.</p><p>My issue is that I have to patch OpenWRT with RTAI (Hard Real Time patch) and since Im a novice at Linux, this raises a bundle of questions for me. Naturally I have already stuck my nose in to the problem, however I cant seem to find some general overview will it work, rather than specific issues. </p><p>First the concept: since my question is a rather specific one, I will try to provide some background situation (as I understand it). The way Linux system is patched with RTAI is that first a vanilla Linux kernel is patched, Then config file generated for specific system and kernel is build and installed. After that the configuration of RTAI takes place, building it and installing in to the system. The traditional approach is well documented and covered for x86 systems, however I dont really know how to put this in practice with OpenWRT. Can someone, who has good knowledge of OpenWRT advise me on the process and in general - possibility of success?&nbsp; </p><p>Additionally, due to the restrictions imposed by RTAI and hardware (my AP is ASUS WL 500gP equipped with Broadcoms 4704 chip), I am forced to limit my choice to Linux kernel 2.4.22. As the only compatible option from OpenWRT I see kamikaze/7.06/brcm-2.4/ or are the any alternatives? And question about the kernel, used in OpenWRT - the ones that are included in tar balls in download section, are they customized or vanillas?</p><p>Thanx for help - much appreciated <br />t.A</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70013">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lubimaer</div>
					<div class="post-datetime">
						24 Jun 2008, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi t.A<br />I&#039;m really interested in RTAI on router<br />Afaik there is no more support for MIPS on RTAI (ASUS WL500gP is MIPS based)<br />Am I wrong?<br />I think it&#039;s better a ARM based device for RTAI</p><p>Ciao<br />Marco</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70022">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tA</div>
					<div class="post-datetime">
						25 Jun 2008, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Well lubimaer, things is that I have 12 ASUS WL500gP AP&#039;s and I need to make a system work, so rebuying a new set is not really an option <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> on the point of RTAI is no longer supporting MIPS, yes it is, howerver the RTAI 3.1 has limitted support, which I expect to avail for my goal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70038">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lubimaer</div>
					<div class="post-datetime">
						25 Jun 2008, 10:29					</div>
				</div>
				<div class="post-content content">
					<p>So you can try to download complete kamikaze svn trunk<br />Then you should try to perform a complete build to make sure everything is ok (check openwrt docs for howto)</p><p>Then you can try to follow this approach I did for spca webcam driver for kernel 2.4<br /><a href="http://forum.openwrt.org/viewtopic.php?id=12414">http://forum.openwrt.org/viewtopic.php?id=12414</a></p><p>It could work ....</p><p>Ciao<br />Marco</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70874">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tA</div>
					<div class="post-datetime">
						14 Jul 2008, 04:55					</div>
				</div>
				<div class="post-content content">
					<p>Well I have run into some different issues before trying to patch the OpenWRT. First of all latest RTAI does not support MIPS and the only versions that do, they are dedicated up to v2.4.22 kernel&nbsp; and the as it seems the oldest kernel used in OpenWRT is v2.4.30. I have tried to compile development version with an external 2.4.22 kernel but the &quot;make&quot; stops with this kind of error:</p><div class="quotebox"><cite>error message wrote:</cite><blockquote><p>make -C ntfs modules<br />make[7]: Entering directory `/media/disk/OpenWRT/test_build/external_kernel_2.4.22/linux-2.4.22/fs/ntfs&#039;<br />mipsel-linux-uclibc-gcc -D__KERNEL__ -I/media/disk/OpenWRT/test_build/external_kernel_2.4.22/linux-2.4.22/include -Wall -Wstrict-prototypes -Wno-trigraphs -O2 -fno-strict-aliasing -fno-common -fomit-frame-pointer -I /media/disk/OpenWRT/test_build/external_kernel_2.4.22/linux-2.4.22/include/asm/gcc -G 0 -mno-abicalls -fno-pic -pipe&nbsp; -mabi=32&nbsp; -finline-limit=100000 -mtune=r4600 -mips2 -Wa,--trap -DMODULE -mlong-calls -DNTFS_VERSION=\&quot;1.1.22\&quot;&nbsp; -nostdinc -iwithprefix include -DKBUILD_BASENAME=fs&nbsp; -c -o fs.o fs.c<br />fs.c: In function `ntfs_printcb&#039;:<br />fs.c:168: warning: integer constant is too large for &quot;long&quot; type<br />fs.c: In function `_ntfs_clear_inode&#039;:<br />fs.c:852: error: label at end of compound statement</p></blockquote></div><p>maybe someone could advise how to compile OpenWRT with 2.4.22 kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70916">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">aoz.syn</div>
					<div class="post-datetime">
						15 Jul 2008, 07:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>maybe someone could advise how to compile OpenWRT with 2.4.22 kernel?</p></blockquote></div><p>Don&#039;t, or port the patches to 2.4.30.&nbsp; 2.4.22 was abandoned long ago with good reason, not the least of which is that it&#039;s just over a month away from being five years old in an arena where six months is positively ancient.&nbsp; Bugs, bugs, bugs, and more bugs.&nbsp; Linksys may standardize on 2.4.17, but that doesn&#039;t make them right.</p><p>This really is a case of the tail wagging the dog - you have a pile of [expensive] hardware all ready to go for an RTOS hack to a non-RTOS kernel on an unsupported (nay, abandoned) platform.</p><p>If you&#039;re really dedicated to the application and platform (why RT linux?&nbsp; on MIPS???), you&#039;re going to need to produce (or get) the patch RTAI made against the 2.4.22.x (.3?) kernel tree and work through applying that to the latest 2.4 (2.4.30.y).&nbsp; Then, you&#039;ll have a clean patch you can add to your target/linux/$arch/patches directory.&nbsp; If you&#039;re lucky, you&#039;ll finish before OpenWRT officially abandons the 2.4 kernel, which I have a feeling will directly coincide with when there&#039;s good b43 wireless support in the 2.6 kernel.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>