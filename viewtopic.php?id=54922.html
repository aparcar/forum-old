<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with Apple Ipad/iphone using client repeater on 14.07</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p259877">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pcgear</div>
					<div class="post-datetime">
						4 Jan 2015, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>I have a problem with apple products since upgrading to Barrier Breaker 14.07.&nbsp; If the openwrt radio is setup with a client bridge and a single AP then an IPad connects fine but if I add an extra virtual AP it will not connect.&nbsp; The same setup on Attitude Adjustment 12.09 works.&nbsp; A PC or android device will connect with no problem while the ipad will not.&nbsp; The problem seems to be limited to just apple products.&nbsp; I have reproduced the issue with Iphone, Ipad, and MacAir.&nbsp; Below are basic config files, just enough to reproduce the issue.&nbsp; I have tested this on TP-Link models 841, 3500, 3600 &amp; ac1750 with the same result.&nbsp; I have also tested with the latest trunk version and the apple problem persists.&nbsp; Any help is be greatly appreciated!</p><p>This is the message displayed on an Ipan when connecting: Unable to join the Network &quot;OpenWrt_A&quot;</p><p>Configs from TP-Link TL0WR841N Ver 8.2</p><p>Wireless:<br />config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option path &#039;platform/ar934x_wmac&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;US&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;wwan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bssid &#039;xx:xx:xx:xx:xx:xx&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;12345678&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;none&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt_A&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;none&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;OpenWrt_B&#039;</p><br /><br /><p>Network:<br />config interface &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ula_prefix &#039;fd6e:74bc:f970::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option force_link &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip6assign &#039;60&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcpv6&#039;</p><p>config switch<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ports &#039;0 1 2 3 4&#039;</p><p>config interface &#039;wwan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcp&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260363">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pcgear</div>
					<div class="post-datetime">
						7 Jan 2015, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>Some printers are also unable to connect.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260393">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bolmsted</div>
					<div class="post-datetime">
						7 Jan 2015, 08:44					</div>
				</div>
				<div class="post-content content">
					<p>I believe I encountered the same thing with the Bleeding Edge Breaking Barrier and I haven&#039;t upgraded to the latest Breaking Barrier 14.07 yet.&nbsp; I never tested on Attitude Adjustment 12.09 as it was not compatible with the hardware TP Link WDR 4300 v1.6 at the time I installed but i believe it later said that it worked on the hardware in the compatibility chart.</p><p>If I setup multiple virtual APs with a WDS link setup between the routers, my Macbook would not be able to connect to the wifi.&nbsp; I&#039;m not sure if I exhaustively tested with iPhone as I was using the Mac to setup and configure OpenWRT and I would have an ethernet cable plugged in and unplug it and switch to the wireless and back and forth at the time.</p><p>I was trying to setup one router with two APs&nbsp; (tplink and tplink-guest) and then setup a WDS link between the two of them and then advertise the same two APs (tplink and tplink-guest) on the 2nd router but it wouldn&#039;t work with the Mac but I believe my wife&#039;s computer (Win 7) was fine at the time of testing.</p><p>In the end I had to only enable the guest AP on the primary router on both radios and on the second router turn off the other AP on the other radios on the second router as a workaround.</p><p>I wanted to advertise both wifi networks on both routers (and add additional routers possibly in the future) but it seems like I couldn&#039;t do this and the Macbook couldn&#039;t connect at all if I enabled the 2nd AP on each of the radios.&nbsp; &nbsp;I could only have tplink-guest on the radio0 and tplink on radio1&nbsp; (not both on the same radio again).</p><div class="codebox"><pre><code>                      tplink + tplink-guest  &lt;------------------- WDS ------------------------&gt;  tplink-guest
                         /                                                                           \
                        / radio0                                                                      \  radio0
                 +------------+                                                                   +------------+
Internet &lt;-----&gt; |  Router1   |                                                                   | Router 2   |
                 +------------+                                                                   +------------+
                       \  radio1                                                                      /  radio1
                        \                                                                            /
                      tplink + tplink-guest  &lt;------------------ WDS -------------------------&gt;  tplink</code></pre></div><br /><p>looking for some insight as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260399">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">iamalittlepepper</div>
					<div class="post-datetime">
						7 Jan 2015, 10:33					</div>
				</div>
				<div class="post-content content">
					<p>I would suggest you concentrate on the setup with your Macbook since it is the most flexible device. Apple relies heavily on Bonjour to access network resources have you setup and configure avahi correctly?</p><p>Another issue I find, while testing it is best to connect to the wireless network via the control panel (instead of from the right menubar).. this way you can delete the SSID from the list. I find that helps.</p>											<p class="post-edited">(Last edited by <strong>iamalittlepepper</strong> on 7 Jan 2015, 10:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267923">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pcgear</div>
					<div class="post-datetime">
						6 Mar 2015, 22:18					</div>
				</div>
				<div class="post-content content">
					<p>The problem extends to IPads and a number of printer models.&nbsp; Ideally the issue would be corrected on the radio side.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>