<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Ralink RT3050F (D-Link dir-412)+ WiFi USB (need help)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Jul 2017.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p131272">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">NewUse</div>
					<div class="post-datetime">
						21 Mar 2011, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi, sorry for my English.<br/>I am new in OpenWRT.<br/>I have D-Link dir-412, based on Ralink RT3050F chip.<br/>It has an USB port. Is it possible to use a USB-WiFi adapter based on any other chip (Realtek) to make the second WiFi (with different channel) </p><p>So how should I compile OpenWRT to enable USB-adapter?</p><p>Is it possible to import USB-host support from D-Link SDK?</p><p>---<br/>Best regards,<br/>Alexander.</p>											<p class="post-edited">(Last edited by <strong>NewUse</strong> on 21 Mar 2011, 23:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132581">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						9 Apr 2011, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>I am interested in this too.</p><p>I have a Tenda 3G611R+ that I believe is pretty similar to the D-Link DIR-412.&nbsp; Tenda is an alternate brand for D-Link. <br/>On my Tenda, the PCB says: 3g622r v1.2<br/>Clearly has a RALink 3050 chip on it.</p><p>Some report that it is pretty similar to the &quot;D-Link DIR-300 hardware rev B1&quot; model that does not have USB support. Cite: <a href="https://forum.openwrt.org/viewtopic.php?id=28010">https://forum.openwrt.org/viewtopic.php?id=28010</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132883">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						13 Apr 2011, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>I put up a photograph of the Tenda 3G611R+ system board: <span class="postimg"><img src="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal1_medium1.jpg" alt="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal1_medium1.jpg"/></span><br/>backside:<br/><span class="postimg"><img src="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal2_medium1.jpg" alt="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal2_medium1.jpg"/></span></p><p>Someone on the dd-wrt forums put a serial port on the Tenda 311R, the board has a similar layout. The serial RX and TX are holes near the CPU.</p><p>keywordz: Tenda 3G 3G611R 3G611R+ 611R 611R+ D-Link USB Ralink router wifi 801.11n 3G622R 622R</p>											<p class="post-edited">(Last edited by <strong>RoundSparrow</strong> on 14 Apr 2011, 11:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133237">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						17 Apr 2011, 12:15					</div>
				</div>
				<div class="post-content content">
					<p>Stock boot message of my Tenda 3G611R:</p><div class="codebox"><pre><code>U-Boot 1.1.3 (Dec  8 2009 - 13:38:58)

Board: Ralink APSoC DRAM:  32 MB
relocate_code Pointer at: 81fb0000
flash_protect ON: from 0xBF000000 to 0xBF01D663
flash_protect ON: from 0xBF030000 to 0xBF030FFF
*** Warning - bad CRC, using default environment

============================================ 
Ralink UBoot Version: 3.3
-------------------------------------------- 
ASIC 3052_MP2 (Port5&lt;-&gt;None)
DRAM component: 256 Mbits SDR
DRAM bus: 16 bit
Total memory: 32 MBytes
Flash component: NOR Flash
Date:Dec  8 2009  Time:13:38:58
============================================ 
icache: sets:256, ways:4, linesz:32 ,total:32768
dcache: sets:128, ways:4, linesz:32 ,total:16384 

 ##### The CPU freq = 320 MHZ #### 

SDRAM bus set to 16 bit 
 SDRAM size =32 Mbytes

Please choose the operation: 
   1: Load system code to SDRAM via TFTP. 
   2: Load system code then write to Flash via TFTP. 
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   9: Load Boot Loader code then write to Flash via TFTP. 
 0 
   
3: System Boot system code via Flash.
## Booting image at bf050000 ...
   Image Name:   linkn Kernel Image
   Created:      2010-04-10  16:24:39 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    2536199 Bytes =  2.4 MB
   Load Address: 80000000
   Entry Point:  803d2000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 803d2000) ...
## Giving linux memsize in MB, 32

Starting kernel ...


LINUX started...

 THIS IS ASIC
Linux version 2.6.21 (root@linux-6091) (gcc version 3.4.2) #1614 Sun Apr 11 00:24:19 CST 2010

 The CPU feqenuce set to 320 MHz
CPU revision is: 0001964c
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Built 1 zonelists.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/ram0
Primary instruction cache 32kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
cause = 30800068, status = 1100ff00
PID hash table entries: 128 (order: 7, 512 bytes)
calculating r4koff... 00138800(1280000)
CPU frequency 320.00 MHz
Using 160.000 MHz high precision timer.
Console: colour dummy device 80x25
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 27084k/32768k available (3301k kernel code, 5684k reserved, 606k data, 1352k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Time: MIPS clocksource has been installed.
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
detected lzma initramfs
detected lzma initramfs
initramfs: LZMA lc=3,lp=0,pb=2,dictSize=1048576,origSize=5644288
LZMA initramfs by Ming-Ching Tiew &lt;mctiew@yahoo.com&gt;.......................................................................................Load RT)
squashfs: version 3.2-r2 (2007/01/15) Phillip Lougher
squashfs: LZMA suppport for slax.org by jro
fuse init (API version 7.8)
io scheduler noop registered (default)
FLASH_API: MAN_ID=C2 DEV_ID=22A8 SIZE=4MB
Ralink gpio driver initialized
HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096
N_HDLC line discipline registered.
Serial: 8250/16550 driver $Revision: 1.3 $ 2 ports, IRQ sharing disabled
serial8250: ttyS0 at I/O 0xb0000500 (irq = 37) is a 16550A
serial8250: ttyS1 at I/O 0xb0000c00 (irq = 12) is a 16550A
RAMDISK driver initialized: 16 RAM disks of 16384K size 1024 blocksize
loop: loaded (max 8 devices)
rdm_major = 254
PPP generic driver version 2.4.2
PPP BSD Compression module registered
PPP MPPE Compression module registered
NET: Registered protocol family 24
AP Driver version-2.3.0.0
ralink flash device: 0x1000000 at 0x1f000000
Ralink SoC physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Creating 4 MTD partitions on &quot;Ralink SoC physically mapped flash&quot;:
0x00000000-0x00030000 : &quot;Bootloader&quot;
0x00030000-0x00040000 : &quot;Config&quot;
0x00040000-0x00050000 : &quot;Factory&quot;
0x00050000-0x01000000 : &quot;Kernel&quot;
mtd: partition &quot;Kernel&quot; extends beyond the end of device &quot;Ralink SoC physically mapped flash&quot; -- size truncated to 0x3b0000
block2mtd: version $Revision: 1.1.1.1 $
nf_conntrack version 0.5.0 (256 buckets, 2048 max)
arp_tables: (C) 2002 David S. Miller
GRE over IPv4 tunneling driver
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone
net/ipv4/netfilter/ipt_netcheck.c 191 ipt_netcheck init
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 10
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
GDMA1_MAC_ADRH -- : 0x00000000
GDMA1_MAC_ADRL -- : 0x00000000
Ralink APSoC Ethernet Driver Initilization. v2.00  256 rx/tx descriptors allocated, mtu = 1500!
NAPI enable, weight = 0, Tx Ring = 256, Rx Ring = 256
GDMA1_MAC_ADRH -- : 0x0000000c
GDMA1_MAC_ADRL -- : 0x43305277
PROC INIT OK!
Freeing unused kernel memory: 1352k freed
init started: BusyBox v1.12.1 (2010-04-10 21:39Algorithmics/MIPS FPU Emulator v1.5
:44 CST)
starting pid 687, tty &#039;&#039;: &#039;/etc_ro/rcS&#039;
devpts: called with bogus options
Welcome to
     _______  _______  ___     __  ____   _  _   ___
    |  ___  \|   __  || kernel reg pid 694 success .
  |   |__||    \ | || | /  /
    | |___| ||  |__| ||   |__  __ |     \| || |/  /
    |   _   /|   _   ||      ||  || |\     ||     \
    |__| \__\|__| |__||______||__||_| \____||_|\___\

                     =System Architecture Department=



Yes:

      ****** WeLoveLinux ****** 

 Welcome to ...
httpd Reg gpio hook success .
starting pid 696, tty &#039;/dev/ttyS1&#039;: &#039;/bin/sh&#039;


BusyBox v1.12.1 (2010-04-10 21:39:44 CST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

# RX DESC a1fb2000  size = 2048
&lt;-- RTMPAllocTxRxRingMemory, Status=0
Key1Str is Invalid key length(0) or Type(0)
Key2Str is Invalid key length(0) or Type(0)
Key3Str is Invalid key length(0) or Type(0)
Key4Str is Invalid key length(0) or Type(0)
1. Phy Mode = 9
2. Phy Mode = 9
3. Phy Mode = 9
MCS Set = ff 00 00 00 01
Main bssid = c8:3a:35:0a:3e:88
&lt;==== rt28xx_init, Status=0
0x1300 = 00064380
getIfLive: device eth2.1 not found.
maclist:
WLan[C8:3A:35:0A:3E:88]
Lan[C8:3A:35:0A:3E:88]
GDMA1_MAC_ADRH -- : 0x0000c83a
Wan[C8:3A:35:0A:GDMA1_MAC_ADRL -- : 0x350a3e88
3E:8d]

phy_tx_ring = 0x004e7000, tx_ring = 0xa04e7000

phy_rx_ring = 0x00000000, rx_ring = 0x00000000
RT305x_ESW: Link Status Changed
CDMA_CSG_CFG = 81000007
GDMA1_FWD_CFG = 710000
eth2.1: Setting MAC address to  c8 3a 35 0a 3e 88.
VLAN (eth2.1):  Underlying device (eth2) has same MAC, not checking promiscious mode.
eth2.2: Setting MAC address to  c8 3a 35 0a 3e 8d.
device eth2 entered promiscuous mode
VLAN (eth2.2):  Setting underlying device (eth2) to promiscious mode.
Set: phy[1].reg[0] = 3900
Set: phy[2].reg[0] = 3900
Set: phy[3].reg[0] = 3900
Set: phy[4].reg[0] = 3900
Set: phy[1].reg[0] = 3100
Set: phy[2].reg[0] = 3100
Set: phy[3].reg[0] = 3100
Set: phy[4].reg[0] = 3100
getIfLive: device br0 not found.
eth2.1: dev_set_promiscuity(master, 1)
device eth2.1 entered promiscuous mode
Router ip address config success.
br0: port 1(eth2.1) entering learning state
device ra0 entered promiscuous mode
br0: port 2(ra0) entering learning state
libupnp: using UDP SSDP_PORT = 1900
br0: topology change detected, propagating
br0: port 1(eth2.1) entering forwarding state
br0: topology change detected, propagating
br0: port 2(ra0) entering forwarding state
killall: udhcpd: no process killed
httpd listen ip = 192.168.0.1 port = 80
MfgThread start loop.
TendaLog -&gt; ok rtn.
ND -&gt; Bad_Sig_entry [18]...
macBcast uses obsolete (PF_INET,SOCK_PACKET)
dwc_otg: version 2.60a 22-NOV-2006
DWC_otg: Using DMA mode
dwc_otg lm0: DWC OTG Controller
dwc_otg lm0: new USB bus registered, assigned bus number 1
dwc_otg lm0: irq 18, io mem 0x00000000
DWC_otg: Init: Port Power? op_state=1
DWC_otg: Init: Power Port (0)
usb usb1: Product: DWC OTG Controller
usb usb1: Manufacturer: Linux 2.6.21 dwc_otg_hcd
usb usb1: SerialNumber: lm0
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133493">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						19 Apr 2011, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>ok, let&#039;s talk about serial rs232 port on this router.</p><p>1. The pads are difficult. From other users on a different Tenda, I located them. They are on the backside of the router, under the CPU.</p><p>photo I illustrated: <span class="postimg"><img src="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal3_serial1.jpg" alt="http://sites.google.com/site/stephengutknecht/Home/Tenda_3G611RPLUS_internal3_serial1.jpg"/></span></p><p>It is a surface-mount point, not a hole like most routers.</p><p>Now the TX of the router isn&#039;t too bad. You can solder it without too much pain... I&#039;m not good a soldering and I managed it. then put hot glue to hold my wires onto the board to minimize the chance of accidental pulling of the solder off the surface-mount point.</p><p>The RX of the router is a total difficult pain. It sits very close to some surface-mount components that are easy to damage!!</p><p>********************************************</p><p>My idea and strategy that I used for now.&nbsp; I tried 10 times to solder the RX without stable results.&nbsp; I could hold a metal probe onto the point and get RX go work, but this isn&#039;t very nice.</p><p>But, through study of other Ralink routers, I decided I can hold the probe wire on RX long enough to issue a root command:</p><div class="codebox"><pre><code>/usr/sbin/telnetd -l /bin/ash</code></pre></div><p>Now I can telnet into the router over Ethernet port! so i can study the router further without having to connect a permanent wire to the tricky RX pad.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133494">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">RoundSparrow</div>
					<div class="post-datetime">
						19 Apr 2011, 20:23					</div>
				</div>
				<div class="post-content content">
					<p>ok, some gathered info on the Tenda firmware</p><div class="codebox"><pre><code># cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00030000 00010000 &quot;Bootloader&quot;
mtd1: 00010000 00010000 &quot;Config&quot;
mtd2: 00010000 00010000 &quot;Factory&quot;
mtd3: 003b0000 00010000 &quot;Kernel&quot;

# cat /proc/interrupts
           CPU0       
  3:       4687       Surfboard  eth2
  4:      44953       Surfboard  ra0
  5:     997365       Surfboard  timer
 12:       1376       Surfboard  serial
 17:          2       Surfboard  Ralink_ESW
 18:          1       Surfboard  dwc_otg, dwc_otg_hcd:usb1
 33:          0       Surfboard  rt2880_timer0

ERR:          0</code></pre></div>											<p class="post-edited">(Last edited by <strong>RoundSparrow</strong> on 19 Apr 2011, 20:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180786">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						17 Oct 2012, 05:00					</div>
				</div>
				<div class="post-content content">
					<p>Just tested Tenda 3G611R+ with the Attitude Adjustment 12.09-beta firmware compiled for Tenda W306R V2.0 .<br/>Works perfectly without any glitch or adjust. The hardware is the same.</p><p>- Network: OK<br/>- Wireless: OK<br/>- USB: testing with modules downloaded via opkg since W306R doesn&#039;t have usb connector ( mass storage and printer )</p><p>I soldered the pins to use the internal serial for debug/recover if needed. The method of the flash is the option 2 of the U-boot.</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.3.8 (blogic@Debian-60-squeeze-64-minimal) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #2 Mon Sep 3 22:09:10 UTC 2012
[    0.000000] prom: fw_arg0=00000001, fw_arg1=01f6efb0, fw_arg2=01f6f3b0, fw_arg3=00000000
[    0.000000] env[0]: memsize=32
[    0.000000] env[1]: initrd_start=0x00000000
[    0.000000] env[2]: initrd_size=0x0
[    0.000000] env[3]: flash_start=0xBF000000
[    0.000000] env[4]: flash_size=0x400000
[    0.000000] env[0]: memsize=32
[    0.000000] env[1]: initrd_start=0x00000000
[    0.000000] env[2]: initrd_size=0x0
[    0.000000] env[3]: flash_start=0xBF000000
[    0.000000] env[4]: flash_size=0x400000
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001964c (MIPS 24KEc)
[    0.000000] Ralink RT3350 id:1 rev:2 running at 320.00 MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] On node 0 totalpages: 8192
[    0.000000] free_area_init_node: node 0, pgdat 802505c0, node_mem_map 81000000
[    0.000000]   Normal zone: 64 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 8128 pages, LIFO batch:0
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=W306R_V20 console=ttyS1,57600 mtdparts=physmap-flash.0:192k(u-boot)ro,64k(u-boot-env)ro,64k(factory)ro,896k(kernel),2880k(rootfs),3776k@0x50000(firmware) rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=0003d030
[    0.000000] Readback ErrCtl register=0003d030
[    0.000000] Memory: 29800k/32768k available (2036k kernel code, 2968k reserved, 334k data, 176k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:48
[    0.000000] console [ttyS1] enabled, bootconsole disabled
[    0.010000] Calibrating delay loop... 212.58 BogoMIPS (lpj=1062912)
[    0.090000] pid_max: default: 32768 minimum: 301
[    0.090000] Mount-cache hash table entries: 512
[    0.100000] NET: Registered protocol family 16
[    0.110000] MIPS: machine is Tenda W306R V2.0
[    0.120000] gpiochip_add: registered GPIOs 0 to 23 on device: RT305X-GPIO0
[    0.130000] gpiochip_add: registered GPIOs 24 to 39 on device: RT305X-GPIO1
[    0.140000] gpiochip_add: registered GPIOs 40 to 51 on device: RT305X-GPIO2
[    0.170000] bio: create slab &lt;bio-0&gt; at 0
[    0.180000] Switching to clocksource MIPS
[    0.190000] NET: Registered protocol family 2
[    0.200000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.220000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.230000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.250000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.260000] TCP reno registered
[    0.260000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.280000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.290000] NET: Registered protocol family 1
[    0.340000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.360000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.380000] msgmni has been set to 58
[    0.390000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
[    0.400000] io scheduler noop registered
[    0.410000] io scheduler deadline registered (default)
[    0.420000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.430000] serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A
[    0.450000] serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A
[    0.480000] physmap platform flash device: 00800000 at bf000000
[    0.490000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x0000c2 Chip ID 0x0022a8
[    0.510000] physmap-flash.0: Found an alias at 0x400000 for the chip at 0x0
[    0.510000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.520000]   Amd/Fujitsu Extended Query version 1.1.
[    0.530000] number of CFI chips: 1
[    0.540000] 6 cmdlinepart partitions found on MTD device physmap-flash.0
[    0.550000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:
[    0.570000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.580000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.590000] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.610000] 0x000000050000-0x000000130000 : &quot;kernel&quot;
[    0.620000] 0x000000130000-0x000000400000 : &quot;rootfs&quot;
[    0.640000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.650000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2F0000, len=110000 
[    0.670000] 0x0000002f0000-0x000000400000 : &quot;rootfs_data&quot;
[    0.680000] 0x000000050000-0x000000400000 : &quot;firmware&quot;
[    0.710000] ramips-wdt ramips-wdt: timeout value must be 0 &lt; timeout &lt;= 40, using 40
[    0.720000] TCP cubic registered
[    0.730000] NET: Registered protocol family 17
[    0.740000] 8021q: 802.1Q VLAN Support v1.8
[    0.760000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    0.770000] Freeing unused kernel memory: 176k freed
[    3.090000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0
[    3.190000] Button Hotplug driver version 0.4.1
[    3.420000] Registered led device: w306r-v20:green:sys
[    3.430000] Registered led device: w306r-v20:green:wps
[    6.760000] JFFS2 notice: (375) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 5 of xref (0 dead, 0 orphan) found.
[    9.120000] Compat-wireless backport release: compat-wireless-2012-07-13
[    9.140000] Backport based on wireless-testing.git master-2012-07-16
[    9.150000] compat.git: wireless-testing.git
[    9.200000] cfg80211: Calling CRDA to update world regulatory domain
[    9.220000] cfg80211: World regulatory domain updated:
[    9.230000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    9.240000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.260000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    9.270000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    9.290000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.300000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.850000] SCSI subsystem initialized
[   10.050000] usbcore: registered new interface driver usbfs
[   10.060000] usbcore: registered new interface driver hub
[   10.070000] usbcore: registered new device driver usb
[   10.720000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   10.720000] Registered led device: rt2800pci-phy0::radio
[   10.720000] Registered led device: rt2800pci-phy0::assoc
[   10.720000] Registered led device: rt2800pci-phy0::quality
[   11.240000] PPP generic driver version 2.4.2
[   11.300000] tun: Universal TUN/TAP device driver, 1.6
[   11.310000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[   11.520000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.870000] NET: Registered protocol family 24
[   11.960000] nf_conntrack version 0.5.0 (468 buckets, 1872 max)
[   12.470000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   12.520000] dwc_otg: version 2.72a 24-JUN-2008
[   12.580000] usbcore: registered new interface driver cdc_acm
[   12.600000] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
[   12.680000] usbcore: registered new interface driver usblp
[   12.760000] Initializing USB Mass Storage driver...
[   12.770000] usbcore: registered new interface driver usb-storage
[   12.780000] USB Mass Storage support registered.
[   12.820000] usbcore: registered new interface driver asix
[   12.860000] usbcore: registered new interface driver cdc_ether
[   12.910000] pegasus: v0.6.14 (2006/09/27), Pegasus/Pegasus II USB Ethernet driver
[   12.930000] usbcore: registered new interface driver pegasus
[   12.990000] usbcore: registered new interface driver rndis_host
[   17.350000] device eth0.1 entered promiscuous mode
[   17.360000] device eth0 entered promiscuous mode
[   17.400000] br-lan: port 1(eth0.1) entered forwarding state
[   17.410000] br-lan: port 1(eth0.1) entered forwarding state
[   19.410000] br-lan: port 1(eth0.1) entered forwarding state
[   25.860000] ramips-wdt: timeout value 60 must be 0 &lt; timeout &lt;= 40, using 40</code></pre></div>											<p class="post-edited">(Last edited by <strong>zhadoom</strong> on 17 Oct 2012, 05:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180811">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						17 Oct 2012, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>USB controller not detected at all .... </p><p>dwc_otg is loaded but no usb bus detected in /proc ....</p><p>Any clues about this ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180838">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">123serge123</div>
					<div class="post-datetime">
						17 Oct 2012, 18:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zhadoom wrote:</cite><blockquote><p>USB controller not detected at all .... <br/>dwc_otg is loaded but no usb bus detected in /proc ....<br/>Any clues about this ?</p></blockquote></div><p>File mach-w306r-v20.c -&gt; function w306r_v20_init no call rt305x_register_usb() which enable USB hardware. To resolve problem there exist two ways:<br/>1. Quick&amp;dirty - add this call and recompile firmware.<br/>2. Long&amp;wright - difine new board, correct source, compile&amp;check firmware, prepare&amp;post patches to developers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180851">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zhadoom</div>
					<div class="post-datetime">
						17 Oct 2012, 23:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>123serge123 wrote:</cite><blockquote><div class="quotebox"><cite>zhadoom wrote:</cite><blockquote><p>USB controller not detected at all .... <br/>dwc_otg is loaded but no usb bus detected in /proc ....<br/>Any clues about this ?</p></blockquote></div><p>File mach-w306r-v20.c -&gt; function w306r_v20_init no call rt305x_register_usb() which enable USB hardware. To resolve problem there exist two ways:<br/>1. Quick&amp;dirty - add this call and recompile firmware.<br/>2. Long&amp;wright - difine new board, correct source, compile&amp;check firmware, prepare&amp;post patches to developers.</p></blockquote></div><p>Already found another dirty way ... </p><p>Used the firmware for Edimax 3g-6200n. <br/>Wireless and usb works but the switch isn&#039;t configured.</p><p>Need to add this configuration to the file /etc/config/network.<br/>eth0.0 = lan&nbsp; eth0.1=wan</p><div class="codebox"><pre><code>config switch &#039;rt305x&#039;
        option enable &#039;1&#039;
        option enable_vlan &#039;1&#039;
        option reset &#039;1&#039;

config switch_vlan
        option vlan &#039;0&#039;
        option device &#039;rt305x&#039;
        option ports &#039;1 2 3 4 6t&#039;

config switch_vlan
        option vlan &#039;1&#039;
        option device &#039;rt305x&#039;
        option ports &#039;0 6t&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180913">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">123serge123</div>
					<div class="post-datetime">
						18 Oct 2012, 18:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Used the firmware for Edimax 3g-6200n.<br/>Wireless and usb works but the switch isn&#039;t configured</p></blockquote></div><p>And leds&amp;buttons are different: 3g-6200n have 3 leds and 2 buttons, wr306v2 have 3 leds and no buttons. Only EDIMAX_GPIO_LED_POWER = WR306R_V20_LED_SYS = 9.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>