<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> AR7 Watchdog; a call for your BOOTCR values</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Mar 2018 and 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=14403&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p63018">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">AndyI</div>
					<div class="post-datetime">
						7 Feb 2008, 18:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nabcore wrote:</cite><blockquote><p>In the photograph, <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/ADLS2110HR">http://wiki.openwrt.org/OpenWrtDocs/Hardware/ADLS2110HR</a> ,which resistor did you modify and how?</p></blockquote></div><p>For check. <br />I have established it between these points. <br />In a photo it is not present!</p><p>go irc #AR7</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63020">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">nabcore</div>
					<div class="post-datetime">
						7 Feb 2008, 18:49					</div>
				</div>
				<div class="post-content content">
					<p>Ð“Ð´Ðµ, Ð½Ð° ÐºÐ°Ñ€Ñ‚Ð¸Ð½Ðµ, Ð’Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð»Ñ Ð»Ð¸ Ñ€ÐµÐ·Ð¸Ñ Ñ‚Ð¾Ñ€?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63022">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">nabcore</div>
					<div class="post-datetime">
						7 Feb 2008, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>AndyI has added a section &quot;WatchDog Disable Point&quot; to <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/ADLS2110HR">http://wiki.openwrt.org/OpenWrtDocs/Hardware/ADLS2110HR</a> where my question has been answered.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63027">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						7 Feb 2008, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>So, if you ADD the resistor, it disables the watchdog?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63030">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">AndyI</div>
					<div class="post-datetime">
						7 Feb 2008, 20:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><p>So, if you ADD the resistor, it disables the watchdog?</p></blockquote></div><p>yes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63033">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">sw</div>
					<div class="post-datetime">
						7 Feb 2008, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Sinus 154 DSL Basic SE (TNETD7300) has an initial value of 0x025d4291. The watchdog works.<br />&quot;Initial&quot; is the value read from the boot loader&#039;s command prompt (most boot loaders support memory dumps).</p><p>The value changes when an operating system is running. It also depends on the router&#039;s endianess (see below).</p><p>Here is an extract from ar7.c (part of the AR7 emulation for QEMU) which shows the bit values:</p><div class="codebox"><pre><code>typedef enum {
    CONFIG_BOOTS = BITS(2, 0),          /* 001 */
    CONFIG_WSDP = BIT(3),               /* 0 */
    CONFIG_WDHE = BIT(4),               /* 0 */
    CONFIG_PLL_BYP = BIT(5),            /* 0 */
    CONFIG_ENDIAN = BIT(6),             /* 0 = little endian */
    CONFIG_FLASHW = BITS(8, 7),         /* 01 = 16 bit flash */
    CONFIG_EMIFRATE = BIT(9),           /* 1 */
    CONFIG_EMIFTEST = BIT(10),          /* 0 */
    CONFIG_BOOTS_INT = BITS(13, 11),    /* 000 */
    CONFIG_SYS_PLL_SEL = BITS(15, 14),  /* 01, BUS */
    CONFIG_CPU_PLL_SEL = BITS(17, 16),  /* 01 */
    CONFIG_USB_PLL_SEL = BITS(19, 18),  /* 11 */
    CONFIG_EPHY_PLL_SEL = BITS(21, 20), /* 01 */
    CONFIG_DSP_PLL_SEL = BITS(23, 22),  /* 01, ADSL */
    CONFIG_ADSL_RST = BIT(24),          /* 0 */
    CONFIG_MIPS_ASYNC = BIT(25),        /* 1 */
    CONFIG_DEF = BIT(26),               /* 0 */
    CONFIG_RESERVED = BITS(31, 27),     /* 0 */
} dcl_config_bit_t;</code></pre></div><p>With AR7 emulation, you can also trace read/write access to this register.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63034">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						7 Feb 2008, 23:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AndyI wrote:</cite><blockquote><p>yes</p></blockquote></div><p>Thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I have no idea how you found where to put the resistor.</p><div class="quotebox"><cite>sw wrote:</cite><blockquote><p>Here is an extract from ar7.c (part of the AR7 emulation for QEMU) which shows the bit values</p></blockquote></div><p>Interesting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64644">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">colchaodemola</div>
					<div class="post-datetime">
						5 Mar 2008, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>DG834v2 [NOT G]<br />CPU revision is: 00018448 (MIPS 4KEc)<br />bootcr is 0x2594281 <br />Clocks: prediv: 1, postdiv: 1, mul: 10<br />TI AR7 (TNETD7300), ID: 0x0005, Revision: 0x02</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64650">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						5 Mar 2008, 21:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>colchaodemola wrote:</cite><blockquote><p>bootcr is 0x2594281</p></blockquote></div><p>So the watchdog is disabled on your router?&nbsp; (bit 4 is 0).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64988">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">colchaodemola</div>
					<div class="post-datetime">
						12 Mar 2008, 06:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><div class="quotebox"><cite>colchaodemola wrote:</cite><blockquote><p>bootcr is 0x2594281</p></blockquote></div><p>So the watchdog is disabled on your router?&nbsp; (bit 4 is 0).</p></blockquote></div><p>yeah <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65271">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">AndyI</div>
					<div class="post-datetime">
						17 Mar 2008, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>CPU revision is: 00018448 (MIPS 4KEc)<br />bootcr 7300 is 0x2514281<br />TI AR7 (TNETD7300), ID: 0x0005, Revision: 0x27<br />0x2514281 100101000101000010100-0-0001 disable<br />After change R59 place.<br />0x2514291 100101000101000010100-1-0001 enable!</p><p>see picture <br />6. WatchDog Enable<br /><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/ADLS2110HR_7">http://wiki.openwrt.org/OpenWrtDocs/Har … LS2110HR_7</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=14403&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>