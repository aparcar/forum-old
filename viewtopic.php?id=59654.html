<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How do I isolate one port from main network but have WAN access?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p292000">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tuprox</div>
					<div class="post-datetime">
						15 Sep 2015, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>Please excuse my ignorance when it comes to VLAN&#039;s, if that is what this is.&nbsp; What I need to do is isolate one device from the rest of the network so it is in a different IP or subnet range.&nbsp; I don&#039;t want this isolated device to be able to view or connect to anything on the main network but this nes network needs to have internet connection.&nbsp; </p><p>What is the best way to do this?</p><p>**I am logged in via SSH and am capable of editing files this way as well.</p><p>Here the information of my router:<br />TP-LINK TL-WDR3600<br />OpenWrt Attitude Adjustment 12.09 / LuCI 0.11.1 Release (0.11.1)<br />Kernel 3.3.x</p><p>I&#039;ve found a number of guides but they all seem to differ some what - one is editing text files while others use the GUI.&nbsp; </p><br /><p>I need to isolate Port 4 with any IP address.&nbsp; I guess it needs to bridge to the WAN, Is this done on the Interfaces tab and the &quot;isolated Network&quot; tab.&nbsp; </p><p>Here is what my system currently shows<br />My system shows: (+&#039;s deonote check marks)<br />Interfaces Tab -&gt; Lan tab</p><p>+Creates a Bridge over specified Devices<br />&nbsp; &nbsp;Enables the spanning tree Protocol on this bridge</p><p>&nbsp; Ethernet Switch: &quot;eth0&quot;<br />+VLAN Interface: &quot;eth0.1&quot; (lan)<br />&nbsp; VLAN interface: &quot;eht0.2&quot; (wan)<br />+Wireless Network: Unknown &quot;24-2&quot; (lan)<br />+Wireless Network: Unknown &quot;50-2&quot; (lan)<br />&nbsp; Custom interface</p><br /><p>Interfaces -&gt; WAN<br />&nbsp; Creates a Bridge over specified Devices</p><p>&nbsp; Ethernet Switch: &quot;eth0&quot;<br />&nbsp; VLAN Interface: &quot;eth0.1&quot; (lan)<br />+VLAN interface: &quot;eht0.2&quot; (wan)<br />&nbsp; Wireless Network: Unknown &quot;24-2&quot; (lan)<br />&nbsp; Wireless Network: Unknown &quot;50-2&quot; (lan)<br />&nbsp; Custom interface</p><p>---------</p><p>I&#039;m guessing that I need to create a new interface but I&#039;m not sure what boxes I need to check to make sure it is isolated yet have access to the WAN.&nbsp; </p><p>&nbsp; Name of Interface - Isolated Port</p><p> Protocol of new interface (Static, DHCP, Unmanaged, PPP, PPPoE)</p><p>&nbsp; Create a bridge over multiple interfaces</p><p>&nbsp; Ethernet Switch: &quot;eth0&quot;<br />&nbsp; VLAN Interface: &quot;eth0.1&quot; (lan)<br />&nbsp; VLAN Interface: &quot;eht0.2&quot; (wan)<br />&nbsp; Wireless Network: Unknown &quot;24-2&quot; (lan)<br />&nbsp; Wireless Network: Unknown &quot;50-2&quot; (lan)<br />&nbsp; Custom interface</p><p>What do I need to check to make sure this isolated?&nbsp; I want to make a static address for this network and enable DHCP, and I see where that is done.</p>											<p class="post-edited">(Last edited by <strong>tuprox</strong> on 16 Sep 2015, 00:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292003">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						16 Sep 2015, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>hi</p><p>it can be done check wiki.openwrt.org<br />search for network, switch, firewall configuration</p><p>basically you need to separate a lan port from main lan with switch config (switch config)<br />then assign it to a different lan interface (network config)<br />then make sure its not bridged with main lan (firewall config)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292035">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tuprox</div>
					<div class="post-datetime">
						16 Sep 2015, 03:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>makarel wrote:</cite><blockquote><p>hi</p><p>it can be done check wiki.openwrt.org<br />search for network, switch, firewall configuration</p><p>basically you need to separate a lan port from main lan with switch config (switch config)<br />then assign it to a different lan interface (network config)<br />then make sure its not bridged with main lan (firewall config)</p></blockquote></div><p>thanks I thought is was basically like that but didn&#039;t know if there was something &quot;hidden&quot; or not too obvious.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292043">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						16 Sep 2015, 05:48					</div>
				</div>
				<div class="post-content content">
					<p>..whell apart from those wiki pages.. i guess only devs know better.. or if you wana see the source code.. check git..<br />i would recommend you test failsafe or have a ttl adapter before messing with network/switch settings.. as you can be locked out from a bad config</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>