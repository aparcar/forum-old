<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> P-2812HNU-FX: getting OpenWrt installed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Jun 2015 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p257601">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						13 Dec 2014, 18:26					</div>
				</div>
				<div class="post-content content">
					<p>hello, builded and putted on tests my f1, and i got a crash after few minutes.</p><p>scapi, with gluebi - checked and unchecked same error</p><div class="codebox"><pre><code>[    9.484000] __nand_correct_data: uncorrectable ECC error
[    9.488000] UBI warning: ubi_io_read: error -77 (ECC error) while reading 4096 bytes from PEB 311:13212, read only 4096 bytes, retry
[    9.500000] __nand_correct_data: uncorrectable ECC error
[    9.508000] UBI warning: ubi_io_read: error -77 (ECC error) while reading 4096 bytes from PEB 311:13212, read only 4096 bytes, retry
[    9.520000] __nand_correct_data: uncorrectable ECC error
[    9.524000] UBI warning: ubi_io_read: error -77 (ECC error) while reading 4096 bytes from PEB 311:13212, read only 4096 bytes, retry
[    9.536000] __nand_correct_data: uncorrectable ECC error
[    9.540000] UBI error: ubi_io_read: error -77 (ECC error) while reading 4096 bytes from PEB 311:13212, read 4096 bytes
[    9.552000] CPU: 0 PID: 308 Comm: mount_root Not tainted 3.14.26 #5
[    9.556000] Stack : 00000006 00000000 00000000 00000000 00000000 00000000 8047cd9e 00000037
          87af77f8 00000000 803b08ec 80410ff7 00000134 80473afc 87af77f8 00000000
          0000339c 00000137 87ad3000 802e9acc 00000000 80206c40 00000000 00000000
          803b3b18 87b03adc 00000000 00000000 00000000 00000000 00000000 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          ...
[    9.592000] Call Trace:
[    9.596000] [&lt;80254270&gt;] show_stack+0x48/0x70
[    9.600000] [&lt;802b5188&gt;] ubi_io_read+0x254/0x340
[    9.604000] [&lt;802b3b88&gt;] ubi_eba_read_leb+0x28c/0x39c
[    9.608000] [&lt;802b65a8&gt;] ubi_leb_read+0xdc/0x150
[    9.616000] [&lt;8012e770&gt;] gluebi_read+0x8c/0xe4
[    9.620000] [&lt;801af070&gt;] mtd_read+0x84/0xd0
[    9.624000] [&lt;8017335c&gt;] jffs2_flash_read+0xa0/0x268
[    9.628000] [&lt;80172e7c&gt;] jffs2_fill_scan_buf+0x30/0x54
[    9.632000] [&lt;8017a434&gt;] jffs2_scan_medium+0x630/0x1864
[    9.640000] [&lt;8016f454&gt;] jffs2_do_mount_fs+0x19c/0x708
[    9.644000] [&lt;8016ef80&gt;] jffs2_do_fill_super+0x17c/0x2d0
[    9.648000] [&lt;801a8f80&gt;] mount_mtd_aux.isra.0+0x6c/0xf4
[    9.652000] [&lt;801a8ecc&gt;] mount_mtd+0x144/0x18c
[    9.660000] [&lt;80177d70&gt;] jffs2_mount+0x1c/0x28
[    9.664000] [&lt;801a8ccc&gt;] mount_fs+0x20/0xdc
[    9.668000] [&lt;80301c98&gt;] vfs_kern_mount+0x64/0x10c
[    9.672000] [&lt;800ec2a4&gt;] do_mount+0x82c/0x9d0
[    9.676000] [&lt;8001e43c&gt;] SyS_mount+0x94/0xdc
[    9.680000] [&lt;8000843c&gt;] handle_sys+0x11c/0x140
[    9.684000]
failed to mount -t jffs2 /dev/mtdblock6 /tmp/overlay: Input/output error
switching to overlay
switching to jffs2 failed - fallback to ramoverlay</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257617">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						13 Dec 2014, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>disabled &quot;gluebi&quot; option, and &quot;ubi_block&quot; also.</p><p>seems more stable now, it have 1hour uptime, last times never pass 20 mins.</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.14.26 (cornelus@dell) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 unknown) ) #7 Sat Dec 13 20:25:38 EET 2014
[    0.000000] SoC: VR9 rev 1.1
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019555 (MIPS 34Kc)
[    0.000000] MIPS: machine is P2812HNUF1 - ZyXEL P-2812HNU-F1
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x07ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] On node 0 totalpages: 32768
[    0.000000] free_area_init_node: node 0, pgdat 80408460, node_mem_map 81003fe0
[    0.000000]   Normal zone: 256 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 32768 pages, LIFO batch:7
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyLTQ0,115200 init=/etc/preinit
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Writing ErrCtl register=00000058
[    0.000000] Readback ErrCtl register=00000058
[    0.000000] Memory: 125252K/131072K available (3181K kernel code, 152K rwdata, 900K rodata, 164K init, 201K bss, 5820K reserved)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 500MHz
[    0.028000] Calibrating delay loop... 332.54 BogoMIPS (lpj=665088)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.040000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.044000] pinctrl core: initialized pinctrl subsystem
[    0.048000] NET: Registered protocol family 16
[    0.060000] pinctrl-xway 1e100b10.pinmux: Init done
[    0.064000] dma-xway 1e104100.dma: Init done - hw rev: 7, ports: 7, channels: 28
[    0.072000] dcdc-xrx200 1f106a00.dcdc: Core Voltage : 1016 mV
[    0.076000] PCI host bridge /fpi@10000000/pci@E105400 ranges:
[    0.080000]  MEM 0x0000000018000000..0x0000000019ffffff
[    0.084000]   IO 0x000000001ae00000..0x000000001affffff
[    0.100000] bio: create slab &lt;bio-0&gt; at 0
[    0.104000] gpio-stp-xway 1e100bb0.stp: Init done
[    0.108000] usbcore: registered new interface driver usbfs
[    0.112000] usbcore: registered new interface driver hub
[    0.116000] usbcore: registered new device driver usb
[    0.120000] PCI host bridge to bus 0000:00
[    0.124000] pci_bus 0000:00: root bus resource [mem 0x18000000-0x19ffffff]
[    0.128000] pci_bus 0000:00: root bus resource [io  0x1ae00000-0x1affffff]
[    0.132000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.136000] pci 0000:00:0e.0: [1814:3062] type 00 class 0x028000
[    0.136000] pci 0000:00:0e.0: reg 0x10: [mem 0xffff0000-0xffffffff]
[    0.136000] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 00
[    0.136000] pci 0000:00:0e.0: BAR 0: assigned [mem 0x18000000-0x1800ffff]
[    0.140000] Switched to clocksource MIPS
[    0.148000] NET: Registered protocol family 2
[    0.152000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.160000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.164000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.172000] TCP: reno registered
[    0.176000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.180000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.188000] NET: Registered protocol family 1
[    0.192000] PCI: CLS 0 bytes, default 32
[    0.192000] gptu: totally 6 16-bit timers/counters
[    0.196000] gptu: misc_register on minor 63
[    0.200000] gptu: succeeded to request irq 126
[    0.208000] gptu: succeeded to request irq 127
[    0.212000] gptu: succeeded to request irq 128
[    0.216000] gptu: succeeded to request irq 129
[    0.220000] gptu: succeeded to request irq 130
[    0.224000] gptu: succeeded to request irq 131
[    0.232000] phy-xrx200 gphy-xrx200.4: requesting lantiq/vr9_phy11g_a1x.bin
[    0.240000] phy-xrx200 gphy-xrx200.4: booting GPHY0 firmware at 78C0000
[    0.244000] phy-xrx200 gphy-xrx200.4: booting GPHY1 firmware at 78C0000
[    0.356000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.360000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.368000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.376000] msgmni has been set to 244
[    0.380000] io scheduler noop registered
[    0.384000] io scheduler deadline registered (default)
[    0.392000] 1e100c00.serial: ttyLTQ0 at MMIO 0x1e100c00 (irq = 112, base_baud = 0) is a lantiq,asc
[    0.400000] console [ttyLTQ0] enabled
[    0.408000] bootconsole [early0] disabled
[    0.420000] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[    0.420000] nand: Samsung NAND 128MiB 3,3V 8-bit
[    0.420000] nand: 128MiB, SLC, page size: 2048, OOB size: 64
[    0.436000] Scanning device for bad blocks
[    0.464000] Bad eraseblock 283 at 0x000002360000
[    0.484000] Bad eraseblock 488 at 0x000003d00000
[    0.492000] Bad eraseblock 579 at 0x000004860000
[    0.512000] Bad eraseblock 770 at 0x000006040000
[    0.536000] Bad eraseblock 1014 at 0x000007ec0000
[    0.540000] 5 ofpart partitions found on MTD device 10000000.nand-parts
[    0.548000] Creating 5 MTD partitions on &quot;10000000.nand-parts&quot;:
[    0.552000] 0x000000000000-0x000000040000 : &quot;uboot&quot;
[    0.560000] 0x000000040000-0x000000060000 : &quot;uboot_env&quot;
[    0.564000] 0x000000060000-0x000000080000 : &quot;board_config&quot;
[    0.572000] 0x000000080000-0x000000280000 : &quot;kernel&quot;
[    0.576000] 0x000000280000-0x000008000000 : &quot;ubi&quot;
[    0.688000] libphy: lantiq,xrx200-mdio: probed
[    0.760000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:00, irq=-1)
[    0.828000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:01, irq=-1)
[    0.896000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)
[    0.964000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)
[    1.036000] eth1: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:05, irq=-1)
[    1.044000] wdt 1f8803f0.watchdog: Init done
[    1.052000] TCP: cubic registered
[    1.056000] NET: Registered protocol family 17
[    1.060000] 8021q: 802.1Q VLAN Support v1.8
[    1.068000] UBI: auto-attach mtd4
[    1.072000] UBI: attaching mtd4 to ubi0
[    1.260000] UBI: scanning is finished
[    1.272000] UBI: attached mtd4 (name &quot;ubi&quot;, size 125 MiB) to ubi0
[    1.280000] UBI: PEB size: 131072 bytes (128 KiB), LEB size: 129024 bytes
[    1.284000] UBI: min./max. I/O unit sizes: 2048/2048, sub-page size 512
[    1.292000] UBI: VID header offset: 512 (aligned 512), data offset: 2048
[    1.300000] UBI: good PEBs: 999, bad PEBs: 5, corrupted PEBs: 0
[    1.304000] UBI: user volume: 2, internal volumes: 1, max. volumes count: 128
[    1.312000] UBI: max/mean erase counter: 1/0, WL threshold: 4096, image sequence number: 332387397
[    1.320000] UBI: available PEBs: 0, total reserved PEBs: 999, PEBs reserved for bad PEB handling: 15
[    1.328000] UBI: background thread &quot;ubi_bgt0d&quot; started, PID 241
[    1.336000] mtd: device 5 (rootfs) set to be root filesystem
[    1.348000] VFS: Mounted root (squashfs filesystem) readonly on device 31:5.
[    1.356000] Freeing unused kernel memory: 164K (80427000 - 80450000)
[    2.776000] eth0: port 0 got link
[    2.884000] eth0: port 1 got link
[    3.796000] SCSI subsystem initialized
[    3.804000] IFXUSB: ifxusb_hcd: version 3.2 B110801
[    3.808000] Chip Version :01c0 BurstSize=0
[    4.412000] IFXUSB: USB core #0 soft-reset
[    4.716000] IFXUSB: USB core #0 soft-reset
[    4.720000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    4.724000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 1
[    4.732000] ifxusb_hcd ifxusb_hcd: irq 62, io mem 0xbe101000
[    4.736000] IFXUSB: Init: Power Port (0)
[    4.740000] eth1: port 5 got link
[    4.748000] hub 1-0:1.0: USB hub found
[    4.748000] hub 1-0:1.0: 1 port detected
[    5.252000] IFXUSB: USB core #1 soft-reset
[    5.556000] IFXUSB: USB core #1 soft-reset
[    5.560000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    5.564000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 2
[    5.572000] ifxusb_hcd ifxusb_hcd: irq 91, io mem 0xbe106000
[    5.576000] IFXUSB: Init: Power Port (0)
[    5.584000] hub 2-0:1.0: USB hub found
[    5.584000] hub 2-0:1.0: 1 port detected
[    5.588000] ifxusb_hcd ifxusb_hcd: requested GPIO 233
[    5.600000] usbcore: registered new interface driver usb-storage
[    6.104000] random: mktemp urandom read with 103 bits of entropy available
[    9.416000] random: nonblocking pool is initialized
[    9.472000] jffs2: write-buffering enabled buffer (2048) erasesize (129024)
[    9.528000] jffs2: notice: (308) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 14 of xref (0 dead, 4 orphan) found.
[   12.496000] IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH
[   12.496000] 
[   12.520000] NET: Registered protocol family 10
[   12.536000] NET: Registered protocol family 8
[   12.540000] NET: Registered protocol family 20
[   12.556000] PPP generic driver version 2.4.2
[   12.568000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   12.596000] MEI CPE Driver, Version 1.2.0
[   12.596000] 
[   12.600000] (c) Copyright 2009, Infineon Technologies AG
[   12.600000] ### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###
[   12.608000] 
[   12.608000] 
[   12.608000] Lantiq CPE API Driver version: DSL CPE API V4.11.4
[   12.644000] 
[   12.644000] Predefined debug level: 2
[   12.656000] Loading modules backported from Linux version master-2014-11-04-0-gf3660a2
[   12.664000] Backport generated by backports.git backports-20141023-2-g4ff890b
[   12.676000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   12.688000] Infineon Technologies DEU driver version 2.0.0 
[   12.692000] IFX DEU DES initialized (multiblock).
[   12.696000] IFX DEU AES initialized (multiblock).
[   12.700000] IFX DEU ARC4 initialized (multiblock).
[   12.704000] IFX DEU SHA1 initialized.
[   12.708000] IFX DEU MD5 initialized.
[   12.712000] IFX DEU SHA1_HMAC initialized.
[   12.716000] IFX DEU MD5_HMAC initialized.
[   12.728000] nf_conntrack version 0.5.0 (1959 buckets, 7836 max)
[   12.752000] NET: Registered protocol family 24
[   12.756000] usbcore: registered new interface driver usblp
[   12.768000] usbcore: registered new interface driver usbserial
[   12.772000] usbcore: registered new interface driver usbserial_generic
[   12.780000] usbserial: USB Serial support registered for generic
[   12.808000] xt_time: kernel timezone is -0000
[   12.836000] cfg80211: Calling CRDA to update world regulatory domain
[   12.844000] cfg80211: World regulatory domain updated:
[   12.844000] cfg80211:  DFS Master region: unset
[   12.852000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   12.860000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   12.868000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   12.876000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   12.884000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   12.892000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   12.900000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   12.908000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   12.916000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   13.100000] usbcore: registered new interface driver option
[   13.104000] usbserial: USB Serial support registered for GSM modem (1-port)
[   13.124000] PCI: Enabling device 0000:00:0e.0 (0000 -&gt; 0002)
[   13.128000] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 3572, rev 0223 detected
[   13.140000] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 0008 detected
[   13.144000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   17.940000] PTM 1.0.27    PTM (E1) firmware version 0.30
[   17.944000] ifxmips_ptm: PTM init succeed
[   20.512000] device eth0 entered promiscuous mode
[   20.520000] br-lan: port 1(eth0) entered forwarding state
[   20.524000] br-lan: port 1(eth0) entered forwarding state
[   21.668000] cfg80211: Calling CRDA for country: RO
[   21.680000] cfg80211: Regulatory domain changed to country: RO
[   21.684000] cfg80211:  DFS Master region: ETSI
[   21.688000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   21.696000] cfg80211:   (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   21.704000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (N/A)
[   21.716000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   21.724000] cfg80211:   (5490000 KHz - 5710000 KHz @ 160000 KHz), (N/A, 2700 mBm), (0 s)
[   21.732000] cfg80211:   (57000000 KHz - 66000000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   22.528000] br-lan: port 1(eth0) entered forwarding state
[   24.600000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Loading firmware file &#039;rt2860.bin&#039;
[   24.628000] ieee80211 phy0: rt2x00lib_request_firmware: Info - Firmware detected - version: 0.34
[   24.732000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   24.736000] device wlan0 entered promiscuous mode
[   34.592000] br-lan: port 2(wlan0) entered forwarding state
[   34.596000] br-lan: port 2(wlan0) entered forwarding state
[   34.600000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[   36.600000] br-lan: port 2(wlan0) entered forwarding state
[  266.592000] eth1: tx ring full
[  268.112000] eth1: tx ring full
[  270.700000] eth1: tx ring full
[  282.684000] eth1: tx ring full
[  286.576000] eth1: tx ring full
[  293.408000] eth1: tx ring full
[  297.912000] eth1: tx ring full
[  301.128000] eth1: tx ring full
[ 2374.096000] device wlan0 left promiscuous mode
[ 2374.096000] br-lan: port 2(wlan0) entered disabled state
[ 2375.440000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[ 2375.448000] device wlan0 entered promiscuous mode
[ 2385.084000] br-lan: port 2(wlan0) entered forwarding state
[ 2385.088000] br-lan: port 2(wlan0) entered forwarding state
[ 2385.092000] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[ 2387.092000] br-lan: port 2(wlan0) entered forwarding state
root@OpenWrt:/# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257624">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						13 Dec 2014, 22:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p><strong>cornelus2009</strong>,</p><p>Could you tell how you fixed u-boot loader working?<br/>I cant get the z-boot loader changed to u-boot, only to different levels z-boot.</p><p>btw, i guess i have the 8,1 MB <em>fullimg.bin</em> file somewhere, still need it?</p></blockquote></div><p>I guess <strong>cornelus2009</strong> does not need <em>fullimg.bin</em> anymore? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><p>And please <strong>cornelus2009</strong> tell us (here) how you manage to flash the z-boot to u-boot??<br/>I tried alot to get the ASCII file to UART session, it did not work (yet)...</p><p>BTW, you can find my openWRT Bootlog @ <a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48">http://dgcomsys.noip.me/phpbb/viewtopic … 9&amp;t=48</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257629">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						14 Dec 2014, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>use the pin configuration provided by scapi.</p><p>use this asc file <a href="https://www.dropbox.com/s/lcc3br1vrjfugh0/UBOOT-P2812HNU-F1.asc?dl=0">https://www.dropbox.com/s/lcc3br1vrjfug … 1.asc?dl=0</a><br/>then flash this file <a href="https://www.dropbox.com/s/woa9ktb51fy1lpr/UBOOT-P2812HNU-F1?dl=0">https://www.dropbox.com/s/woa9ktb51fy1l … NU-F1?dl=0</a></p><p>use those commands after booted on uart.</p><p>nand erase.chip<br/>tftp &quot;uboot file&quot;<br/>nand write 81000000 0 40000</p><p>hope this help.</p>											<p class="post-edited">(Last edited by <strong>cornelus2009</strong> on 14 Dec 2014, 00:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257643">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						14 Dec 2014, 02:58					</div>
				</div>
				<div class="post-content content">
					<p>Actually, i try to send the ASCII file, but nothing seems to get over.<br/>&#039;How&#039; you send the ASCII file to UART ready device, is my q?<br/>The device won&#039;t &#039;recieve&#039; anything i send ....<br/>Please explain?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257655">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">oxo</div>
					<div class="post-datetime">
						14 Dec 2014, 08:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DGDodo wrote:</cite><blockquote><p>Actually, i try to send the ASCII file, but nothing seems to get over.<br/>&#039;How&#039; you send the ASCII file to UART ready device, is my q?<br/>The device won&#039;t &#039;recieve&#039; anything i send ....<br/>Please explain?</p></blockquote></div><p><a href="https://forum.openwrt.org/viewtopic.php?pid=256405#p256405">https://forum.openwrt.org/viewtopic.php … 05#p256405</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257656">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						14 Dec 2014, 08:46					</div>
				</div>
				<div class="post-content content">
					<p>What terminal program u use?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257658">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						14 Dec 2014, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Normally i use Putty, but that has no &#039;send&#039; functionality.<br/>I now use Hyperterminal and was wondering which protocol UART would accept, but you have to just &#039;send text file...&#039;<br/>Did the first file, but it takes a (long) while ...<br/>During the second file my son disconnects the power <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad"/><br/>After a reboot it still has the old Zyxel boot loader, nothing changed.</p><p>I know i should use a Linux machine with has better terminal programs, like Minicom.<br/>Untill now i did everything on an old XP machine <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue"/></p>											<p class="post-edited">(Last edited by <strong>DGDodo</strong> on 14 Dec 2014, 11:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257661">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						14 Dec 2014, 13:30					</div>
				</div>
				<div class="post-content content">
					<p>Use teraterm for windows, it have send file option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257666">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						14 Dec 2014, 15:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ius wrote:</cite><blockquote><p>Nice work! So are all of the following issues now working on F1?</p><div class="quotebox"><cite>ius wrote:</cite><blockquote><p>- NAND wasn&#039;t recognized by the OpenWRT kernel (<a href="https://dev.openwrt.org/ticket/16411">https://dev.openwrt.org/ticket/16411</a>)<br/>- Even though all LAN ports appeared to probe, only 2/5 actually were able to get a link<br/>- WiFi is undetected due to PCI bus issues (discussed this shortly with someone over email)</p></blockquote></div><p>I&#039;ll see if I can dust off my F1 soon and give it a go. Is the image bootable from RAM too? I&#039;m not sure if I have a full NAND dump lying around, suppose this might be useful for RF calibration data?</p></blockquote></div><p>NAND - it&#039;s recognized but not stable, probably I&#039;ve found missing part in nand driver, need to test it.<br/>LAN - all ports are working (added both VR9 v1.1 and VR9 v1.2 gphy firmware in my dts)<br/>Wifi - is detected and with cal_data from sources (as file) 300Mbit/s N mode is working.</p><p>As for NAND dump, unfortunately Zyxel placed cal_data as file, the same for every unit so DUMP isn&#039;t necessary any more.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257667">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						14 Dec 2014, 16:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>scapi wrote:</cite><blockquote><p>unfortunately Zyxel placed cal_data as file</p></blockquote></div><p>Why is that unfortunate?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257668">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						14 Dec 2014, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>too bad, device crashed again, after a hard restart, it seems problem is not need to keep wan cable onnected when do restart.</p><p>i will dig about.</p><p>scapi , what about nand stability problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257670">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						14 Dec 2014, 17:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><div class="quotebox"><cite>scapi wrote:</cite><blockquote><p>unfortunately Zyxel placed cal_data as file</p></blockquote></div><p>Why is that unfortunate?</p></blockquote></div><p>Because of dts config/build, P2812HNUFx needs cal data for full N support, file needs to be placed in firmware folder and official OpenWRT wont allow this file to be maintained in sources, so after flashing user needs to upload it to appropriate folder instead of extracting it from board_config partition.</p><div class="quotebox"><cite>cornelus2009 wrote:</cite><blockquote><p>scapi , what about nand stability problem?</p></blockquote></div><p>nand write buffer is missing in nand driver, probably this is cause of ECC read error.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257692">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						14 Dec 2014, 23:17					</div>
				</div>
				<div class="post-content content">
					<p><strong>cornelius2009</strong>, as i am now flashing bootloader with teraterm at the famous speed of:<br/><span class="postimg"><img src="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_548de9e6e8ad8.png" alt="http://dgcomsys.noip.me/DGWP01/wp-content/uploads/2014/12/img_548de9e6e8ad8.png"/></span><br/>And i know Hyperterm has (ASCII) writting options too, i found out, just &#039;send text file...&#039; in Hyperterm, same speed!<br/>Thinking of the old school way: <a href="http://homepages.rpi.edu/~mondore/kermitman.html">Kermit connect</a>, or search for more @ google ... </p><p><strong>ius</strong> the following fabric firmware is of your requested linux level:<br/></p><div class="codebox"><pre><code>Z-Boot 3.0.0(Feb 14 2014)    V1.00(AACC.3)        Image Name:   MIPS Linux-2.6.32
                            Created:      2014-02-14   3:33:18 UTC
                            Image Type:   MIPS Linux Kernel Image (lzma compressed)
Linux version 2.6.32.32 (tresia@tpds-dsl) (gcc version 4.3.3 (GCC) ) #17 Fri Feb 14 01:15:50 CST 2014</code></pre></div><p>You can flash that with TTL-serial device, no UART needed.</p><p><strong>scapi</strong>, i guess i wont need to remind you of:<br/><a href="https://dev.openwrt.org/browser/trunk/package/boot/uboot-lantiq/patches/0020-MIPS-lantiq-add-NAND-SPL-support.patch">https://dev.openwrt.org/browser/trunk/p … port.patch</a><br/>And i thought i saw more &#039;patches&#039; for lantiq nand... keep informed here...<br/>Or just switch ECC off, as some of the fabric fw does, <em>*** Warning - bad CRC or NAND, using default environment</em><br/>and works ok?</p><p><strong>3.04:</strong><br/></p><div class="codebox"><pre><code>ROM VER: 1.0.5
CFG 06
NAND
NAND Read OK
DDR Access auto data-eye tuning Rev 0.3a
DDR size from 0xa0000000 - 0xa7ffffff
DDR check ok... start booting...



ZyU-F02-300-20AA003-V3.04|04/01|2011(TUJ)

CLOCK CPU 500M RAM 250M
DRAM:  128 MB

 relocate_code start
 relocate_code finish.
128 MiB
*** Warning - bad CRC or NAND, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   fw_addr=0xa0200000
Internal phy(GE) firmware version: 0x020c
setup MDIO for new GPHY
vr9 Switch
Hit any key to stop autoboot:  0 

NAND read: device 0 offset 114688, size 65536 ...  65536 bytes read: OK
## Starting application at 0x86A80000 ...


Z-LOADER 3.0(Apr  1 2011)</code></pre></div><p><strong>3.09:</strong><br/></p><div class="codebox"><pre><code>ROM VER: 1.0.5
CFG 06
NAND
NAND Read OK

DDR autotuning Rev 0.3d
DDR size from 0xa0000000 - 0xa7ffffff
DDR check ok... start booting...



ZyU-F02-300-20AA003-V3.09|01/24|2013(AACC)

CLOCK CPU 500M RAM 250M
DRAM:  128 MB

 relocate_code start
 relocate_code finish.
128 MiB
*** Warning - bad CRC or NAND, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   fw_addr=0xa0200000
Internal phy(GE) firmware version: 0x0405
setup MDIO for new GPHY
vr9 Switch
Hit any key to stop autoboot:  0 

NAND read: device 0 offset 116736, size 65536 ...  65536 bytes read: OK
## Starting application at 0x86A80000 ...


Z-LOADER 3.0(Feb 14 2014)

NAND flash block size: 0x20000
Dual image: Both OK! upgcnt1=24 upgcnt2=25
Select 2nd zboot image...
go 0x86a90000
## Starting application at 0x86A90000 ...


Z-Boot 3.0.0(Feb 14 2014)

we get zloader version: 3.0
Hit any key to stop autoboot:   3</code></pre></div>											<p class="post-edited">(Last edited by <strong>DGDodo</strong> on 14 Dec 2014, 23:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257697">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						15 Dec 2014, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>Wrong speed in serial config.</p><p>ECC errors are writing related not ECC handling, beside patch You provided is for U-Boot not OpenWrt, and CRC error you see in U-Boot is env data crc only, there is no ecc switching off.</p><p>Asc file is for RAM load of U-Boot, after load You need to flash it to NAND with tftpboot and right file.</p>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 15 Dec 2014, 00:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257702">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						15 Dec 2014, 03:01					</div>
				</div>
				<div class="post-content content">
					<p><strong>scapi</strong>, as you can read here: <a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=48&amp;p=108#p108">http://dgcomsys.noip.me/phpbb/viewtopic … p=108#p108</a><br/>i managed to get the u-boot changed, get the box OpenWRT reboot ready, thx to all help here (full logs in the link above).<br/>Although i now facing config errors due to automaticaly made changes ...<br/>and its getting too late, logs follow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257708">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						15 Dec 2014, 08:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Although some &#039;[ 0.768000] Bad eraseblock 379 at 0x000002f60000&#039; messages, all seems to work fine!<br/>Now for the endurance test ...</p><p>After auto update, lost webinterface ... that&#039;s not so nice ...<br/>getting late ... checking</p><p>And found out: WAN port does not &#039;link&#039;at all ...<br/>To investigate ...</p></blockquote></div><p>BB are normal for NAND based devices, UBI handles them.</p><p>What auto-update ?</p><p>No link at WAN ? By default config it&#039;s bridged with LAN ports, if You want change it then change VLAN config, MAC is taken from U-Boot env.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257717">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						15 Dec 2014, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>how mac is taken from uboot env ?</p><p>need to add some env variable?, with default ethaddr variable, i got invalid MAC, using random, at booting linux.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257721">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						15 Dec 2014, 11:33					</div>
				</div>
				<div class="post-content content">
					<p><strong>scapi</strong>, indeed, the Bad blocks messages are gone after u-boot flash, but UBI also has this message:<br/></p><div class="codebox"><pre><code>[    6.452000] UBI warning: ubi_calculate_reserved: number of bad PEBs (73) is above the expected limit (20), not reserving any PEBs for bad PEB handling, will use available PEBs (if any)</code></pre></div><p>Perhaps i need a rerun of the installation and clear whole nand next time?</p><p>--<br/>The auto-update within Luci web-interface, i guess i(t) messed up br-lan / lan / vlan.<br/>There were 6 suggested adjustment changes within Luci, which i accidentally activated.<br/>Now only &#039;LuCI - Lua Configuration Interface&#039; is shown, login page won&#039;t come up.</p><p>--<br/>About the WAN interface, i tested all ports, the 4 LAN ports do &#039;link&#039;, but WAN does not.<br/>Very small chance its broken? (yet, nothing found in loggings, tho...)</p><p>--<br/>And my endurance test (although web page unavailable <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue"/> ) gets over 8 hours:<br/></p><div class="codebox"><pre><code>root@DG-OpenWrt-F1:/# uptime
 10:23:05 up  8:36,  load average: 0.16, 0.07, 0.05</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257726">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">ius</div>
					<div class="post-datetime">
						15 Dec 2014, 13:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cornelus2009 wrote:</cite><blockquote><p>then flash this file <a href="https://www.dropbox.com/s/woa9ktb51fy1lpr/UBOOT-P2812HNU-F1?dl=0">https://www.dropbox.com/s/woa9ktb51fy1l … NU-F1?dl=0</a></p></blockquote></div><p>Which file from the build output is this exactly? It&#039;s considerably larger than my own built SPL u-boot, yet smaller than the RAM image.</p><p>I tried flashing my own SPL image, but that doesn&#039;t work and makes it loop in the SPL loader.</p>											<p class="post-edited">(Last edited by <strong>ius</strong> on 15 Dec 2014, 13:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257770">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						15 Dec 2014, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>Its U-boot with patches from Antonios Vamporakis, TPL/SPL build. OpenWRT U-Boot build isn&#039;t working atm.</p><div class="quotebox"><cite>cornelus2009 wrote:</cite><blockquote><p>how mac is taken from uboot env ?</p><p>need to add some env variable?, with default ethaddr variable, i got invalid MAC, using random, at booting linux.</p></blockquote></div><p> Add this/replace old config in uci-defaults/network<br/></p><div class="codebox"><pre><code>P2812HNUF*)
    lan_mac=$(mtd_get_mac_ascii uboot-env ethaddr)
    wan_mac=$(macaddr_add &quot;$lan_mac&quot; 1)
    ucidef_set_interface_lan &#039;eth0.1&#039;
    ucidef_add_switch &quot;switch0&quot; &quot;1&quot; &quot;1&quot;
    ucidef_add_switch_vlan &quot;switch0&quot; &quot;1&quot; &quot;0 1 2 4 5 6t&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 16 Dec 2014, 10:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257804">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">ius</div>
					<div class="post-datetime">
						16 Dec 2014, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>Thanks.</p><p>The PCI bus appears to be broken on my V1.2 F1 though (PCI_LANTIQ seems enabled by default?)</p><div class="codebox"><pre><code>[    0.000000] Linux version 3.14.26 (ius@box) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r43707) ) #4 Mon Dec 15 17:37:50 CET 2014
[    0.000000] SoC: VR9 rev 1.2
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019556 (MIPS 34Kc)
[    0.000000] MIPS: machine is P2812HNUF1 - ZyXEL P-2812HNU-F1
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x07ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] On node 0 totalpages: 32768
[    0.000000] free_area_init_node: node 0, pgdat 80408460, node_mem_map 81003cc0
[    0.000000]   Normal zone: 256 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 32768 pages, LIFO batch:7
[    0.000000] Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyLTQ0,115200 init=/etc/preinit
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Writing ErrCtl register=0007802c
[    0.000000] Readback ErrCtl register=0007802c
[    0.000000] Memory: 125252K/131072K available (3181K kernel code, 152K rwdata, 900K rodata, 164K init, 201K bss, 5820K reserved)
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 500MHz
[    0.028000] Calibrating delay loop... 332.54 BogoMIPS (lpj=665088)
[    0.032000] pid_max: default: 32768 minimum: 301
[    0.036000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.040000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.044000] pinctrl core: initialized pinctrl subsystem
[    0.048000] NET: Registered protocol family 16
[    0.060000] pinctrl-xway 1e100b10.pinmux: Init done
[    0.064000] dma-xway 1e104100.dma: Init done - hw rev: 7, ports: 7, channels: 28
[    0.072000] dcdc-xrx200 1f106a00.dcdc: Core Voltage : 1016 mV
[    0.088000] bio: create slab &lt;bio-0&gt; at 0
[    0.092000] gpio-stp-xway 1e100bb0.stp: Init done
[    0.096000] usbcore: registered new interface driver usbfs
[    0.100000] usbcore: registered new interface driver hub
[    0.104000] usbcore: registered new device driver usb
[    0.108000] Switched to clocksource MIPS
[    0.116000] NET: Registered protocol family 2
[    0.120000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.128000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.132000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.140000] TCP: reno registered
[    0.144000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.148000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.156000] NET: Registered protocol family 1
[    0.160000] PCI: CLS 0 bytes, default 32
[    0.160000] gptu: totally 6 16-bit timers/counters
[    0.164000] gptu: misc_register on minor 63
[    0.168000] gptu: succeeded to request irq 126
[    0.176000] gptu: succeeded to request irq 127
[    0.180000] gptu: succeeded to request irq 128
[    0.184000] gptu: succeeded to request irq 129
[    0.188000] gptu: succeeded to request irq 130
[    0.192000] gptu: succeeded to request irq 131
[    0.200000] ralink,eeprom ralink_eep.5: using RT2860.eeprom as eeprom
[    0.204000] phy-xrx200 gphy-xrx200.4: requesting lantiq/vr9_phy11g_a2x.bin
[    0.212000] phy-xrx200 gphy-xrx200.4: booting GPHY0 firmware at 78C0000
[    0.220000] phy-xrx200 gphy-xrx200.4: booting GPHY1 firmware at 78C0000
[    0.328000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.336000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.340000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.352000] msgmni has been set to 244
[    0.356000] io scheduler noop registered
[    0.360000] io scheduler deadline registered (default)
[    0.368000] 1e100c00.serial: ttyLTQ0 at MMIO 0x1e100c00 (irq = 112, base_baud = 0) is a lantiq,asc
[    0.376000] console [ttyLTQ0] enabled
[    0.384000] bootconsole [early0] disabled
[    0.396000] nand: device found, Manufacturer ID: 0xec, Chip ID: 0xf1
[    0.396000] nand: Samsung NAND 128MiB 3,3V 8-bit
[    0.396000] nand: 128MiB, SLC, page size: 2048, OOB size: 64
[    0.408000] Scanning device for bad blocks
[    0.496000] 4 ofpart partitions found on MTD device 10000000.nand-parts
[    0.504000] Creating 4 MTD partitions on &quot;10000000.nand-parts&quot;:
[    0.508000] 0x000000000000-0x000000040000 : &quot;uboot&quot;
[    0.516000] 0x000000040000-0x000000060000 : &quot;uboot-env&quot;
[    0.520000] 0x000000060000-0x000000260000 : &quot;kernel&quot;
[    0.528000] 0x000000260000-0x000008000000 : &quot;ubi&quot;
[    0.640000] libphy: lantiq,xrx200-mdio: probed
[    0.648000] net-xrx200: invalid MAC, using random
[    0.716000] eth0: attached PHY [Lantiq XWAY PEF7071] (phy_addr=0:00, irq=-1)
[    0.784000] eth0: attached PHY [Lantiq XWAY PEF7071] (phy_addr=0:01, irq=-1)
[    0.852000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)
[    0.920000] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)
[    0.988000] eth0: attached PHY [Lantiq XWAY PEF7071] (phy_addr=0:05, irq=-1)
[    0.996000] wdt 1f8803f0.watchdog: Init done
[    1.004000] TCP: cubic registered
[    1.008000] NET: Registered protocol family 17
[    1.012000] 8021q: 802.1Q VLAN Support v1.8
[    1.020000] UBI: auto-attach mtd3
[    1.020000] UBI: attaching mtd3 to ubi0
[    1.208000] UBI: scanning is finished
[    1.224000] UBI: attached mtd3 (name &quot;ubi&quot;, size 125 MiB) to ubi0
[    1.228000] UBI: PEB size: 131072 bytes (128 KiB), LEB size: 129024 bytes
[    1.236000] UBI: min./max. I/O unit sizes: 2048/2048, sub-page size 512
[    1.240000] UBI: VID header offset: 512 (aligned 512), data offset: 2048
[    1.248000] UBI: good PEBs: 1005, bad PEBs: 0, corrupted PEBs: 0
[    1.256000] UBI: user volume: 2, internal volumes: 1, max. volumes count: 128
[    1.260000] UBI: max/mean erase counter: 3/2, WL threshold: 4096, image sequence number: 1367028976
[    1.272000] UBI: available PEBs: 0, total reserved PEBs: 1005, PEBs reserved for bad PEB handling: 20
[    1.280000] UBI: background thread &quot;ubi_bgt0d&quot; started, PID 232
[    1.288000] mtd: device 4 (rootfs) set to be root filesystem
[    1.296000] UBIFS error (pid 1): init_constants_early: too few LEBs (16), min. is 17
[    1.304000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    1.312000] Freeing unused kernel memory: 164K (80427000 - 80450000)
[    3.584000] IFXUSB: ifxusb_hcd: version 3.2 B110801
[    3.588000] Chip Version :000b BurstSize=4
[    4.192000] IFXUSB: USB core #0 soft-reset
[    4.496000] IFXUSB: USB core #0 soft-reset
[    4.500000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    4.504000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 1
[    4.512000] ifxusb_hcd ifxusb_hcd: irq 62, io mem 0xbe101000
[    4.516000] IFXUSB: Init: Power Port (0)
[    4.520000] eth0: port 4 got link
[    4.524000] hub 1-0:1.0: USB hub found
[    4.528000] hub 1-0:1.0: 1 port detected
[    5.032000] IFXUSB: USB core #1 soft-reset
[    5.336000] IFXUSB: USB core #1 soft-reset
[    5.340000] ifxusb_hcd ifxusb_hcd: IFX USB Controller
[    5.344000] ifxusb_hcd ifxusb_hcd: new USB bus registered, assigned bus number 2
[    5.352000] ifxusb_hcd ifxusb_hcd: irq 91, io mem 0xbe106000
[    5.356000] IFXUSB: Init: Power Port (0)
[    5.364000] hub 2-0:1.0: USB hub found
[    5.364000] hub 2-0:1.0: 1 port detected
[    5.368000] ifxusb_hcd ifxusb_hcd: requested GPIO 233
[    5.376000] eth0: port 5 got link
[    5.728000] random: mktemp urandom read with 84 bits of entropy available
[    8.964000] jffs2: write-buffering enabled buffer (2048) erasesize (129024)
[    9.092000] jffs2: notice: (287) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 641 of xref (0 dead, 634 orphan) found.
[   11.676000] IFXOS, Version 1.5.14 (c) Copyright 2009, Lantiq Deutschland GmbH
[   11.676000] 
[   11.704000] NET: Registered protocol family 10
[   11.712000] NET: Registered protocol family 8
[   11.716000] NET: Registered protocol family 20
[   11.724000] PPP generic driver version 2.4.2
[   11.736000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.756000] MEI CPE Driver, Version 1.2.0
[   11.756000] 
[   11.756000] (c) Copyright 2009, Infineon Technologies AG
[   11.756000] 
### MEI CPE - MEI CPE - MEI CPE - MEI CPE ###
[   11.764000] 
[   11.764000] 
[   11.764000] Lantiq CPE API Driver version: DSL CPE API V4.11.4
[   11.780000] 
[   11.780000] Predefined debug level: 2
[   11.796000] Loading modules backported from Linux version master-2014-11-04-0-gf3660a2
[   11.800000] Backport generated by backports.git backports-20141023-2-g4ff890b
[   11.812000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.824000] Infineon Technologies DEU driver version 2.0.0 
[   11.860000] IFX DEU DES initialized (multiblock).
[   11.864000] IFX DEU AES initialized (multiblock).
[   11.868000] IFX DEU ARC4 initialized (multiblock).
[   11.872000] IFX DEU SHA1 initialized.
[   11.876000] IFX DEU MD5 initialized.
[   11.880000] IFX DEU SHA1_HMAC initialized.
[   11.884000] IFX DEU MD5_HMAC initialized.
[   11.896000] nf_conntrack version 0.5.0 (1959 buckets, 7836 max)
[   11.920000] NET: Registered protocol family 24
[   11.944000] xt_time: kernel timezone is -0000
[   11.976000] cfg80211: Calling CRDA to update world regulatory domain
[   11.984000] cfg80211: World regulatory domain updated:
[   11.984000] cfg80211:  DFS Master region: unset
[   11.992000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   12.000000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   12.008000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   12.016000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   12.024000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   12.032000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   12.040000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   12.048000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   12.056000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   13.192000] random: nonblocking pool is initialized</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257856">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">scapi</div>
					<div class="post-datetime">
						16 Dec 2014, 10:00					</div>
				</div>
				<div class="post-content content">
					<p>Are you building from trunk ?</p><p>Try new dts from <a href="https://www.dropbox.com/sh/9aup68dv6oq5rzo/AAD-nRzmrWn0m31RK6U0gC5Ea?dl=0">https://www.dropbox.com/sh/9aup68dv6oq5 … gC5Ea?dl=0</a></p><p>It&#039;s still WIP so I probably made some errors in it.</p><p>And apply this patch for NAND stability (it&#039;s for BB not CC):</p><div class="codebox"><pre><code>Index: target/linux/lantiq/patches-3.10/0018-MTD-lantiq-xway-add-missing-write_buf-and-read_buf-t.patch
===================================================================
--- target/linux/lantiq/patches-3.10/0018-MTD-lantiq-xway-add-missing-write_buf-and-read_buf-t.patch
+++ target/linux/lantiq/patches-3.10/0018-MTD-lantiq-xway-add-missing-write_buf-and-read_buf-t.patch
@@ -37,7 +37,7 @@
 +
 +    spin_lock_irqsave(&amp;ebu_lock, flags);
 +    for (i = 0; i &lt; len; i++)
-+        ltq_w8(buf[i], (void __iomem *)nandaddr);
++        ltq_w8(buf[i], (void __iomem *)(nandaddr | NAND_WRITE_DATA));
 +    spin_unlock_irqrestore(&amp;ebu_lock, flags);
 +}
 +
Index: target/linux/lantiq/patches-3.10/0205-lantiq-nand-lock.patch
===================================================================
--- target/linux/lantiq/patches-3.10/0205-lantiq-nand-lock.patch
+++ target/linux/lantiq/patches-3.10/0205-lantiq-nand-lock.patch
@@ -79,7 +79,7 @@
  
 -    spin_lock_irqsave(&amp;ebu_lock, flags);
      for (i = 0; i &lt; len; i++)
-         ltq_w8(buf[i], (void __iomem *)nandaddr);
+         ltq_w8(buf[i], (void __iomem *)(nandaddr | NAND_WRITE_DATA));
 -    spin_unlock_irqrestore(&amp;ebu_lock, flags);
  }
  </code></pre></div>											<p class="post-edited">(Last edited by <strong>scapi</strong> on 16 Dec 2014, 10:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257870">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">ius</div>
					<div class="post-datetime">
						16 Dec 2014, 15:07					</div>
				</div>
				<div class="post-content content">
					<p>Works with the new dts! Haven&#039;t tested speed/reliability, but spawning an AP appears to work.</p><p>And yes, I&#039;m running trunk (so I haven&#039;t seen any NAND issues as the patch is already included)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257877">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						16 Dec 2014, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>patch is included, but those lines are missing </p><div class="codebox"><pre><code>+  ltq_w8(buf[i], (void __iomem *)(nandaddr | NAND_WRITE_DATA));  </code></pre></div><p>, aplyied modifications in patch and dts, compiled and putted now at work.......</p><p>Let see results.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>