<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dir-601 B1</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Feb 2018 and 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=33231&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=33231&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p220554">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">HappyTom</div>
					<div class="post-datetime">
						21 Dec 2013, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>First off, I really appreciate everyone that is involved in regards to make OpenWRT work on the B1 version of this router.<br />I have very simple questions respectfully, please. <br />I have downloaded all of the following .bin files that Mr. Jalopicus posted on google drive (Thank You Sir!).<br />Which one of the following should I install from the DLink web interface?<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-factory-NA<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-factory<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-sysupgrade</p><p>The only main function that I need, is the ability to use the router as a wireless repeater bridge, so I can extend the reach of my wireless workstations, to my main WAP.<br />From some of the videos on YouTube that I see, it looks like OpenWRT has that functionality, like DD-WRT does.<br />If someone could please answer those questions, it would make the upcoming holiday truly bright. :-)<br />Thank You, Happy Holidays! - Happy Tom :-)</p>											<p class="post-edited">(Last edited by <strong>HappyTom</strong> on 21 Dec 2013, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220688">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">knightcrusader</div>
					<div class="post-datetime">
						23 Dec 2013, 07:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jalopicus wrote:</cite><blockquote><p>Here&#039;s a build I compiled last night for my DIR-601 B1.&nbsp; I have pretty simple needs so it&#039;s basically the default config plus Luci, QOS, and UPNP.</p><div class="quotebox"><blockquote><p><a href="https://drive.google.com/folderview?id=0By82gD5tHGFATWlNeTQyOEpHT2M&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p></blockquote></div><p>I was able to flash with the D-Link web interface and then got right in via Luci with no problem.&nbsp; I set everything up and haven&#039;t had any issues yet except that the status page claims that the router is a TEW-712BR (it isn&#039;t).</p><div class="quotebox"><blockquote><p>Hostname&nbsp; &nbsp; OpenWrt<br />Model&nbsp; &nbsp; TRENDnet TEW-712BR<br />Firmware Version&nbsp; &nbsp; OpenWrt Barrier Breaker r38971 / LuCI Trunk (svn-r9934)<br />Kernel Version&nbsp; &nbsp; 3.10.18</p></blockquote></div><p>Not sure what to make of this, but no adverse effects so far.</p></blockquote></div><p>So, I got the sources downloaded and even the base configuration for the DIR-601 B1 to compile correctly and work when flashed, but I can&#039;t figure out what I can safely remove in order to get Luci to fit. I also need OpenVPN and the tun module installed, and that&#039;s it.</p><p>Do you happen to know what packages you omitted, or got the .config file you created that you can share with us?</p><p>I can get openvpn to compile in w/o Luci, and not having the web interface isn&#039;t a dealbreaker, but I would prefer to have it. Any help is appreciated.</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220689">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">knightcrusader</div>
					<div class="post-datetime">
						23 Dec 2013, 07:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>HappyTom wrote:</cite><blockquote><p>First off, I really appreciate everyone that is involved in regards to make OpenWRT work on the B1 version of this router.<br />I have very simple questions respectfully, please. <br />I have downloaded all of the following .bin files that Mr. Jalopicus posted on google drive (Thank You Sir!).<br />Which one of the following should I install from the DLink web interface?<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-factory-NA<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-factory<br />openwrt-ar71xx-generic-dir-601-b1-squashfs-sysupgrade</p><p>The only main function that I need, is the ability to use the router as a wireless repeater bridge, so I can extend the reach of my wireless workstations, to my main WAP.<br />From some of the videos on YouTube that I see, it looks like OpenWRT has that functionality, like DD-WRT does.<br />If someone could please answer those questions, it would make the upcoming holiday truly bright. :-)<br />Thank You, Happy Holidays! - Happy Tom :-)</p></blockquote></div><p>I too am a normal DD-WRT user, but I am new to OpenWRT. However, that said, I used the openwrt-ar71xx-generic-dir-601-b1-squashfs-factory-NA image when I tried it and it works. I am not sure what the difference is between them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220754">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">HappyTom</div>
					<div class="post-datetime">
						24 Dec 2013, 00:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>knightcrusader wrote:</cite><blockquote><p>I too am a normal DD-WRT user, but I am new to OpenWRT. However, that said, I used the openwrt-ar71xx-generic-dir-601-b1-squashfs-factory-NA image when I tried it and it works. I am not sure what the difference is between them.</p></blockquote></div><p> Thank You knightcrusader, I will try image, when I get the unit. Does that firmware enable the router in regards to &quot;wireless repeater bridge&quot; mode? I think Open WRT calls it &quot;Routed Client Mode&quot;.. at least what I see here in the link below,<br />this is my goal.. to have the 601 relay the wireless signal as a repeater to the main AP in my house:<br /><a href="http://wiki.openwrt.org/doc/howto/clientmode">http://wiki.openwrt.org/doc/howto/clientmode</a></p><p> Thank You for your help, and I really wish you and everyone else here.. a great upcoming holiday!<br /> Happy Tom :-)</p>											<p class="post-edited">(Last edited by <strong>HappyTom</strong> on 24 Dec 2013, 20:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227559">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">antiflag1980</div>
					<div class="post-datetime">
						14 Mar 2014, 00:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>antiflag1980 wrote:</cite><blockquote><p>Thanks Jalopicus! I will try this and report back when I get a chance.&nbsp; As far as the model thing, I&#039;ve been using one of the Luci builds that was posted in this thread for 6 months now and it&#039;s been working great, but this is what it reports:</p><p>Model&nbsp; &nbsp; TRENDnet TEW-712BR<br />Firmware Version&nbsp; &nbsp;&nbsp; OpenWrt Barrier Breaker r36935 / LuCI Trunk (svn-r9842)<br />Kernel Version&nbsp; &nbsp; 3.8.13</p><p>So I don&#039;t think the wrong model reporting makes any difference.</p></blockquote></div><p>I guess I forgot to report back, build works great, thanks!</p><p><a href="https://drive.google.com/folderview?id=0By82gD5tHGFATWlNeTQyOEpHT2M&amp;usp=sharing">https://drive.google.com/folderview?id= … sp=sharing</a></p>											<p class="post-edited">(Last edited by <strong>antiflag1980</strong> on 14 Mar 2014, 00:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228286">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">notgood</div>
					<div class="post-datetime">
						24 Mar 2014, 02:05					</div>
				</div>
				<div class="post-content content">
					<p>WARNING WARNING WARNING</p><p>Okay I had to get an account to even post this.</p><p>After enough goofing around trying to find out some information on this router (DLink 601B1), this is the site that keeps coming up in online seaches and I have tried to read and work through this mess of a thread for a while now.</p><p>There have been links to various binary&#039;s and NO CLEAR confirmation that any particular one IS THE GOTO binary to flash this router with! Besides unsuccessful uploads (even reported as being unsuccessful here) there are even binaries with NONSTANDARD log ins and passwords. And then no courtesy of the posters here to even report what passwords they used in their builds. </p><p>There is no doubt that I am not the only one that has one of these routers and was looking for some open source firmware for it. The confusion (and lack of manufacture clarity on which version is in the box until you open it - re:version A1 or B1) has waisted enough of my time trying to find something that works. As well as time trying to understand the confusion of a thread like this. Some binaries load but are still useless. Posters that asked for some basics got completely skipped over while the group want to talk about serial connections and usb support. (oh wow ... dah!)&nbsp; </p><p>The manufacture was able to have a web GUI by default on this router, yet all of the tweakers here don&#039;t seem to have enough space to build that into their flashes. And beyond that, the use of none standard log ins and passwords seems like a simple oopsie. (too bad they didn&#039;t spend the time to clarify that when they posted a link to their personal favorite)</p><p>telnet is closed ... ssh works ... maybe (if you can guess the password) ... GUI .. naw ... what network does it boot too? (you guess)</p><p>All in all, I am very dissappointed in both the faking in believing open wrt had a simple solution for this router and the lack of clarification of much by the posters on this thread here. I don&#039;t see how much of what is written here is of much use to the unregistered visitors. I guess you gotta be in the click of open wrt experts to understand (and guess what passwords they use).</p><p>If you aren&#039;t an open wrt EXPERT, I would leave this router alone in stock form.</p><p>Someone please clean up this thread with some clarifications ... or the only thing I can say isi good luck to newbies. Your are pretty much on you own. (enjoy reading the manual for openwrt - i am sure it is a good read - but i don&#039;t feel like it myself)</p><p>I will not become a fan of openwrt, that is for sure. After this experience.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228492">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">deviantintegral</div>
					<div class="post-datetime">
						26 Mar 2014, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>I just managed to upgrade to the latest trunk build from <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-dir-601-b1-squashfs-sysupgrade.bin.">http://downloads.openwrt.org/snapshots/ … grade.bin.</a> I used sysupgrade to come from a previous build on this thread. I did lose luci since it&#039;s not included, and the simple &quot;opkg install&quot; method to install doesn&#039;t work as /overlay doesn&#039;t have enough space. Not really a big deal, especially as you can preserve your configs and everything networking wise will still work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228583">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">notgood</div>
					<div class="post-datetime">
						27 Mar 2014, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Again. Someone pops by, posts some info about a ghost and doesn&#039;t say much.</p><p>The link is broken. I know what file is being refered to here.</p><p>It&#039;s great that you claim to have managed to do something. But sharing the how - would show us.</p><p>This is still a broken thread with no real flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228762">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">squeakywheel</div>
					<div class="post-datetime">
						29 Mar 2014, 20:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>notgood wrote:</cite><blockquote><p>This is still a broken thread with no real flash.</p></blockquote></div><br /><p>have some <a href="http://mir.cr/CIDXEM8N">grease</a></p>											<p class="post-edited">(Last edited by <strong>squeakywheel</strong> on 29 Mar 2014, 20:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p228790">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">goniak</div>
					<div class="post-datetime">
						30 Mar 2014, 08:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys.</p><p>Im happy I finally could install the firmware in my device. Nonethless, I would like to now how I can build a vpn service into de OpenWrt.</p><p>The specific problem Im having, is that It seems I dont have enough space. I try to remove certain packages, but It happens that even more space is taken after removing such packages... I dont know what to do to regain more space in my device.</p><p>Can anyone help, please???</p><p>btw, what&#039;s the best vpn package I can get t install; i would like to get the more automated, graphical one to use with ipvanish... any ideas?</p>											<p class="post-edited">(Last edited by <strong>goniak</strong> on 30 Mar 2014, 08:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229308">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						5 Apr 2014, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>--- BLAH BEGINS ---</p><p>Hi, I just picked up a free DIR-601 B1 the other day and promptly A) flashed it with openwrt (courtesy of jay0lee) then promptly bricked it while trying to install a trunk version from the router&#039;s CLI. At least I think that&#039;s when I bricked it, I got a flash error, can&#039;t remember what it said...anyhow, I have a serial port, and using a cp2102 could at least read the boot message which shows u-boot which freezes on Bad Magic Number with accompanying command prompt. Fine, bootloader seems intact. </p><p>Unfortunately the router is not accepting any commands. To add to my incompetent string of Keystone Cops type antics, I had previously &quot;modded&quot; the cp2102 by removing the Rx LED in order to accommodate a 1.8v shifter circuit to use with a kijiji purchased dead kindle ( which I would like to smash into little bits but I got it for my mother so I am waiting for a replacement board...). So anyhow, I figure that is causing my present woes. Add to that I just fried the cp2102 by crossing the GND and data lines...FTDI board in the mail!</p><p>--- BLAH ENDS ---</p><p>So, </p><p>Q1: Has anyone managed to send commands via the serial console? </p><p>I am hoping that I haven&#039;t fried the router&#039;s RX port, just the cp2102. </p><p>Q2: Does anyone know of a target specific debrick ( ie the proper hex addresses in the flashing process, etc...still studying the docs )</p><p>I&#039;m kind of surprised there hasn&#039;t been more info put out on these routers, I guess it&#039;s not as popular as the other revs/models?</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 7 Apr 2014, 18:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229395">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						6 Apr 2014, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>Update: Just tested one data line without the other connected and I got the u-boot process.</p><p>uvray313 said: &quot;The front pad is TX, the middle ground, and the rear (next to the square pad) is RX.&quot;</p><p>This is incorrect, the TX is definitely next to the square pad, and so far the other line isn&#039;t accepting CLI. So the actual pinout I have now is:</p><p>[] O O O = NULL - TX - GND - ?</p><p>The ? pin shows a full 3.3v, TX shows around 2.7v after boot. I am using an UNO as the USB-TTL converter with some 10k resistors. Voltage on the UNO&#039;s TX is 3.2v or so, UNO RX reads the bootup just fine. Anyone concur/have any ideas?</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 7 Apr 2014, 19:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p229422">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						7 Apr 2014, 04:04					</div>
				</div>
				<div class="post-content content">
					<p>On study of a closeup image of the serial pads I noticed that the two traces which go fairly directly to the UART_SIN and UART_SOUT pins on the ar9331 are connected to these pads-&gt;&nbsp; [] O O O = &quot;trace - trace -&nbsp; GND - BIG trace&quot; ie power ( which gels with my previous measurement of 3.3v on the pad - it might also explain why the cp2102 got hot enough to burn my fingers! Mmm, ozone). </p><p><span class="postimg"><img src="https://i.imgur.com/8YfFGOP.jpg" alt="DIR-601 B1 serial pads" /></span></p><p>This image shows my old configuration. Notice the wide trace on the board leading to the red wire, which is now on the square [] pad. The green wire is definitely TX and black is definitely GND.</p><p><span class="postimg"><img src="https://i.imgur.com/hc2wta5.jpg" alt="DIR-601 B1 Red wire changed" /></span></p><p>Red wire changed to square pad.</p><p>It&#039;s hard to see the full trace ends as the white labelling covers a lot of it, but when I zoom in on the square pad, the trace is quite noticeable.</p><p><span class="postimg"><img src="https://i.imgur.com/0KN9A2k.jpg" alt="DIR-601 B1 serial pinout?" /></span></p><p>It appears that R174 on the right is a pull-down( or is it pull-up? ) resistor that is part of a voltage divider circuit (4k on R173, 3k on R174). How this helps me is unknown.</p><p>So from what I see the pads are now </p><p>[] O O O = RX - TX - GND - Vcc</p><p>Sadly, RX still doesn&#039;t do anything. I tried a loopback test on the arduino rx/tx - before the pads - working fine. So I figure that assuming the RX line is not fried, either the router doesn&#039;t like the arduino signal, or the trace isn&#039;t touching the pad. I really studied the RX and TX traces all the way from the chip to the pads, there can be no mistake there. I suppose other possibilities might include the RX line is deactivated in code or there is no write access? I will have to wait now for the FTDI to arrive from China to confirm RX isn&#039;t working, unless some intrepid explorer grabs the ball...</p><p>I also tried (sudo) minicom, gtkterm, putty and miniterm.py, with RTS/CTS XON/XOFF NONE etc etc etc...</p><p>See you in a month!</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 21 Mar 2018, 13:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232618">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						7 May 2014, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>Success! I can now pass commands vial serial console. The 3.3V FTDI board was the ticket, although I imagine that any 3.3V USB to serial board would do. I can now confirm that for the DIR601 B1 the UART serial console pads are:</p><p>[] O O O = RX - TX - GND - Vcc</p><p>I am guessing the reason why people have abandoned this router ( other than it&#039;s old I guess ) is that there seems to be limited access to file transfer via U-boot commands:</p><p>fake&nbsp; &nbsp;- fake<br />?&nbsp; &nbsp; &nbsp; &nbsp;- alias for &#039;help&#039;<br />boot&nbsp; &nbsp; - boot default, i.e., run &#039;bootcmd&#039;<br />bootd&nbsp; &nbsp;- boot default, i.e., run &#039;bootcmd&#039;<br />bootm&nbsp; &nbsp;- boot application image from memory<br />cp&nbsp; &nbsp; &nbsp; - memory copy<br />erase&nbsp; &nbsp;- erase FLASH memory<br />eth_soft_led&nbsp; &nbsp; - start the ethernet software led control<br />help&nbsp; &nbsp; - print online help<br />httpboot- entering the backup mode.<br />md&nbsp; &nbsp; &nbsp; - memory display<br />mm&nbsp; &nbsp; &nbsp; - memory modify (auto-incrementing)<br />mtest&nbsp; &nbsp;- simple RAM test<br />mw&nbsp; &nbsp; &nbsp; - memory write (fill)<br />nm&nbsp; &nbsp; &nbsp; - memory modify (constant address)<br />ping&nbsp; &nbsp; - send ICMP ECHO_REQUEST to network host<br />printenv- print environment variables<br />progmac - Set ethernet MAC addresses<br />reset&nbsp; &nbsp;- Perform RESET of the CPU<br />run&nbsp; &nbsp; &nbsp;- run commands in an environment variable<br />setenv&nbsp; - set environment variables<br />tftpboot- boot image via network using TFTP protocol<br />version - print monitor version</p><p>There are no &#039;load&#039; commands, only tftp seems to be available. Unfortunately, that is not working, even though the tftp server (host pc) is working, and eth1 (host pc, set up to 192.168.0.100) is apparently pinging fine from the router. </p><p>According to the wiki page <a href="http://wiki.openwrt.org/toh/d-link/dir-600:">http://wiki.openwrt.org/toh/d-link/dir-600:</a></p><p>&quot;Loading an image via tftp may not work, arp replies do not seem to make it though the switch, these commands use y-modem instead.&quot;</p><p>However there is no loady option in the menu above.</p><p>I&#039;ve also noticed that the Trendnet&nbsp; TEW-712BR has a physical board and a U-boot setup that is quite close to this router. The RAM addresses are identical from what I see, but I know nothing about the proper &quot;offsets&quot; I guess they are called. Anyhow, that is moot at this point.</p><p>So, I&#039;ve hit another wall. Anyone know whether there is a solution?</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 7 May 2014, 20:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232658">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						7 May 2014, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Ok, so it turns out that I had to simply allow the ip address from the firewall. Awesome! Transferring files over serial works! I set up atftpd for the file server on the pc and used tftp from the router. Now I have to figure out all the hex addresses, what to &quot;erase&quot; etc.</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 7 May 2014, 09:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232727">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						7 May 2014, 20:16					</div>
				</div>
				<div class="post-content content">
					<p>Right, so I&#039;ve figured out the size of Jay0lee&#039;s dir-601b1.bin in hex, namely 0x390054 (3735636 bytes). So now I guess that I am left with the address. Using this as the example ( NOT CORRECT FOR THIS ROUTER DO NOT USE! ):</p><p>tftpboot 0x81000000 firm.bin<br />erase 0xbf020000 +0x7c0000<br />cp.b 0x81000000 0xbf020000 0x7c0000<br />bootm 0xbf020000</p><p>I assume I would replace 0x7c0000 ( I also assume this is what&#039;s called the offset? ) with 0x390054?<br />Also, where could I find the starting address?</p><p>If I type:</p><p>printenv bootcmd</p><p>I get bootcmd=bootm 0x9f070000. When I bricked the device I was trying to copy over a trunk image which was waaay too big, thus I suppose overwriting the existing image. If this address variable is what was left from that original openwrt image, would that be where I start erase?</p><p>I&#039;m beginning to think nobody reads this thread <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 7 May 2014, 20:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232735">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						7 May 2014, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>I just tried this:</p><p>tftpboot 0x80000000 dir-601b1.trx<br />erase 0x9f070000 +0x390034</p><p>I got this:</p><p>Bytes transferred = 3735604 (390034 hex)<br />ar7240&gt; erase 0x9f070000 +0x390034<br />Error: end address (0x9f400033) not in flash!<br />Bad address format</p><p>Apparently printenv bootcmd isn&#039;t showing me the correct flash address...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232748">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">squeakywheel</div>
					<div class="post-datetime">
						8 May 2014, 00:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lobonse wrote:</cite><blockquote><p>I just tried this:</p><br /><p>Bytes transferred = 3735604 (390034 hex)<br />ar7240&gt; erase 0x9f070000 +0x390034<br />Error: end address (0x9f400033) not in flash!<br />Bad address format</p></blockquote></div><p>I think you need to trim the header.<br />see <a href="https://forum.openwrt.org/viewtopic.php?pid=189566#p189566">https://forum.openwrt.org/viewtopic.php … 66#p189566</a></p>											<p class="post-edited">(Last edited by <strong>squeakywheel</strong> on 8 May 2014, 00:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232750">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						8 May 2014, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>Yep, I had seen that one and thought after seeing the hex head output decided on trying bs=32 instead of 84. Thanks! I was about to try 0xbf070000 instead. </p><p>BusyBox v1.19.4 (2013-06-04 17:25:04 EDT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> -----------------------------------------------------<br /> BARRIER BREAKER (Bleeding Edge, r36848)<br /> -----------------------------------------------------<br />&nbsp; * 1/2 oz Galliano&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Pour all ingredients into<br />&nbsp; * 4 oz cold Coffee&nbsp; &nbsp; &nbsp; &nbsp; an irish coffee mug filled<br />&nbsp; * 1 1/2 oz Dark Rum&nbsp; &nbsp; &nbsp; &nbsp;with crushed ice. Stir.<br />&nbsp; * 2 tsp. Creme de Cacao<br /> -----------------------------------------------------</p><p>SUCCESS!! Serial recovery is finished!</p><p>So, to recap I: </p><p>1) soldered a serial console on the board and used an FTDI USB to TTL converter ( 3.3V ) to connect to it</p><p>&nbsp; &nbsp;[] O O O = RX - TX - GND - Vcc</p><p>Using sudo minicom -s or some other serial communications program, set up to 115200 baud, 8n1, hardware/software controls off, ttyUSB0 plug in router, watch boot up, hit key when prompted and from command prompt:</p><p>ar7240&gt;</p><p>type printenv</p><p>You should see ipaddr=192.168.0.1 and serverip=192.168.0.100</p><p>Once you have ifconfig set up (step 5) and atftpd set up (step 6) tftpboot will do the rest from the router prompt.</p><p>2) used jay0lee&#039;s build here ( thank you btw ): <a href="https://googledrive.com/host/0B0YvUuHHn3MnYUlLMU5EelF2YXc/dir-601b1.bin">https://googledrive.com/host/0B0YvUuHHn … -601b1.bin</a></p><p>3) converted the file to dir-601b1.trx (I am now guessing that the file is trimmed to the correct size for the flash space, therefore for this router it needs to be 390000 hex, or 3735522 bytes exactly.) and trimmed the header from the file as per here: <a href="https://forum.openwrt.org/viewtopic.php?pid=189566#p189566">https://forum.openwrt.org/viewtopic.php … 66#p189566</a><br />&nbsp; &nbsp;<br />&nbsp; &nbsp;dd bs=84 skip=1 if=dir-601b1.bin of=dir-601b1.trx</p><p>4) connected an ethernet cable from a router lan port to laptop ( I used an ethernet to usb converter since my ethernet port is borked )</p><p>5) set up a static ip address for laptop ethernet which gels with the default address for u-boot ( ifconfig eth0 192.168.0.100 up )</p><p>6) from u-boot console ping 192.168.0.100 ( should say &#039;host 192.168.0.100 is alive&#039; )</p><p>7) set up atftpd ( or some other ftp daemon ) on laptop, making the directory /tftpboot and place dir-601b1.trx in it</p><p>**********************************************************************<br />******* WARNING: I assume the next step can brick your router if used carelessly *******<br />******* The values of 0x80000000 and 0x9f070000 are always the same for this *******<br />******* router, but 0x390000 is file size in hex, be sure your file is the right size!! *******<br />**********************************************************************</p><p>8) used the following commands on the router&#039;s u-boot console to download dir-601b1.trx, erase the flash, burn image and reboot:</p><p>&nbsp; &nbsp;tftpboot 0x80000000 dir-601b1.trx<br />&nbsp; &nbsp;erase 0x9f070000 +0x390000<br />&nbsp; &nbsp;cp.b 0x80000000 0x9f070000 0x390000<br />&nbsp; &nbsp;bootm 0x9f070000</p><p>The value of 0x390000 is the hexadecimal value of the filesize in bytes.</p><p>That&#039;s it.</p><p>I think next I will try making and uploading images. What the heck, I know how to unbork it now...</p><p>PS I got the POS kindle working too! Ma loves it.</p><p>PPS I also have to say that I am quite noob at this and still managed to find all of the pertinent information in this and other threads on this forum. I for one am very grateful for all the work done by others to get me this far. Great job folks.</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 24 May 2014, 19:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232751">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						8 May 2014, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>Interesting note, I had mentioned the similarity to the Trendnet&nbsp; TEW-712BR...</p><p>root@OpenWrt:/# cat /proc/cpuinfo<br />system type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Atheros AR9330 rev 1<br />machine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: TRENDnet TEW-712BR</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p232911">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						9 May 2014, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m back! Squeak squeak squeak! ( Not Squonk, that&#039;s blasphemy )</p><p>I compiled an image, sysupgraded and I&#039;ve configured the router as wireless AP and bridge to internet router. What a pain, one thing I will happily complain about is networking configuration. I also tried to install packages from the internet, nano and luci, both of which succeeded. I don&#039;t know if that is smart.</p><p>Yes, I got luci working from packages, along with these errors:</p><p>Collected errors:<br /> * verify_pkg_installable: Only have 12kb available on filesystem /overlay, pkg luci-app-firewall needs 57<br /> * opkg_install_cmd: Cannot install package luci.</p><p>Memory:</p><p>root@OpenWrt:~# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;29044&nbsp; &nbsp; &nbsp; &nbsp; 21940&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7104&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1688<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 20252&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8792<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</p><p>root@OpenWrt:~# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 820.0K&nbsp; &nbsp; &nbsp;76.0K&nbsp; 92% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8M&nbsp; &nbsp; &nbsp; 1.8M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.2M&nbsp; &nbsp; 916.0K&nbsp; &nbsp; &nbsp;13.3M&nbsp; &nbsp;6% /tmp<br />/dev/mtdblock8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 820.0K&nbsp; &nbsp; &nbsp;76.0K&nbsp; 92% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 820.0K&nbsp; &nbsp; &nbsp;76.0K&nbsp; 92% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev</p><br /><p>However, the luci interface is working. </p><p>UPDATE: I removed luci and associated packages, since I couldn&#039;t even save a text file!</p><p>After removal:</p><p>root@OpenWrt:/tmp# free<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;total&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;used&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;free&nbsp; &nbsp; &nbsp; &nbsp;shared&nbsp; &nbsp; &nbsp; buffers<br />Mem:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;29044&nbsp; &nbsp; &nbsp; &nbsp; 20912&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8132&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1688<br />-/+ buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 19224&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9820<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0</p><p>root@OpenWrt:/tmp# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 340.0K&nbsp; &nbsp; 556.0K&nbsp; 38% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8M&nbsp; &nbsp; &nbsp; 1.8M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.2M&nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; &nbsp;13.1M&nbsp; &nbsp;8% /tmp<br />/dev/mtdblock8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 340.0K&nbsp; &nbsp; 556.0K&nbsp; 38% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; 896.0K&nbsp; &nbsp; 340.0K&nbsp; &nbsp; 556.0K&nbsp; 38% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev</p><p>I also got an md5sum mismatch from another opkg download, so I&#039;ve set up a local repository for my own compiled packages.<br />Lesson learned!</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 10 May 2014, 00:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233168">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">corey.maddocks</div>
					<div class="post-datetime">
						12 May 2014, 23:29					</div>
				</div>
				<div class="post-content content">
					<p>I bought four of these off Amazon, thinking they would be hardware version A1. I tinkered around a little and finally found a use for them, as Dumb AP&#039;s!</p><p>Using the D-Link failsafe firmware recovery method, install this build:</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-dir-601-b1-squashfs-factory-NA.bin">http://downloads.openwrt.org/snapshots/ … ory-NA.bin</a></p><p>Once you see it reboot (at about 43% complete in the web UI upgrade counter) set your NIC back to DHCP and wait for an IP address.</p><p>This build of OpenWRT has no web UI, so using telnet in putty, connect to 192.168.1.1 and set a password with the passwd command. This will enable ssh access.</p><p>Next, use vi to edit /etc/config/wireless and delete the line that reads, &quot;option disabled 1&quot; </p><p>If your regular LAN also uses the 192.168.1.1 subnet, then edit /etc/config/network and change the static IP to something else. (for example, my router is 192.168.1.1 and my DHCP assigned addresses start at .100, so I set this unit to .99)</p><p>Run /etc/init.d.network reload and wireless will now be enabled. Plug in the WAN port to your LAN and the B1 device is now functioning as a full wireless router, with internet access.</p><p>From here, use this tutorial to set up the Dumb AP:</p><p><a href="http://wiki.openwrt.org/doc/recipes/dumbap">http://wiki.openwrt.org/doc/recipes/dumbap</a></p><p>For the network config, follow the subsection titled &quot;For devices with switch and dedicated WAN, e.g. WNDR3700, WR1043ND v1&quot;</p><p>**HOWEVER** don&#039;t set &#039;option proto&#039; to dhcp, leave it as the static IP you set earlier. This will allow you to connect via SSH later to make wifi changes as needed. Follow the rest of the guide as written.</p><p>Once completed and the device restarted, you will have a working WAP that passes through DHCP from your main router.</p><p>To connect to the device later to make changes, unplug the WAN port and direct connect a PC to it. Manually set an IP on the PC to something other than what you assigned to the DIR-601. Set the subnet mask to 255.255.25.0 and the gateway to the IP of the DIR-601. Then you should be able to connect to the DIR-601 with ssh as root with the password set in the first step.</p><p>I have converted all 4 of mine and they are working great as cheap WAP&#039;s.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233277">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">charlot biddle</div>
					<div class="post-datetime">
						13 May 2014, 22:30					</div>
				</div>
				<div class="post-content content">
					<p>@corey.maddocks<br />Could you publish your \etc\config\network and \etc\config\wireless?&nbsp; I have a lot of difficulties to reproduce the same setup.</p><p>Thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233622">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						16 May 2014, 07:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi again, something new to add today, I got USB working! At first I was getting &quot;unable to initialize libusb: -99&quot; when I ran lsusb ( from usbutils package )</p><p>Now I get, with cheapo usb hub and thumb drive:</p><p>root@OpenWrt:~# lsusb<br />Bus 001 Device 002: ID 058f:6254 Alcor Micro Corp. USB Hub<br />Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub<br />Bus 001 Device 004: ID 090c:1000 Silicon Motion, Inc. - Taiwan (formerly Feiya Technology Corp.) Flash Drive</p><p>root@OpenWrt:~# dmesg<br />[&nbsp; &nbsp;38.690000] usb 1-1.1: new high-speed USB device number 4 using ehci-platform<br />[&nbsp; &nbsp;38.830000] usb-storage 1-1.1:1.0: USB Mass Storage device detected<br />[&nbsp; &nbsp;38.830000] scsi1 : usb-storage 1-1.1:1.0<br />[&nbsp; &nbsp;39.840000] scsi 1:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;LUXL&nbsp; &nbsp; &nbsp;- V GOLD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1100 PQ: 0 ANSI: 0 CCS<br />[&nbsp; &nbsp;39.850000] sd 1:0:0:0: [sda] 3962880 512-byte logical blocks: (2.02 GB/1.88 GiB)<br />[&nbsp; &nbsp;39.860000] sd 1:0:0:0: [sda] Write Protect is off<br />[&nbsp; &nbsp;39.860000] sd 1:0:0:0: [sda] Mode Sense: 43 00 00 00<br />[&nbsp; &nbsp;39.860000] sd 1:0:0:0: [sda] No Caching mode page found<br />[&nbsp; &nbsp;39.870000] sd 1:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;39.880000] sd 1:0:0:0: [sda] No Caching mode page found<br />[&nbsp; &nbsp;39.880000] sd 1:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;39.890000]&nbsp; sda: sda1<br />[&nbsp; &nbsp;39.900000] sd 1:0:0:0: [sda] No Caching mode page found<br />[&nbsp; &nbsp;39.910000] sd 1:0:0:0: [sda] Assuming drive cache: write through<br />[&nbsp; &nbsp;39.910000] sd 1:0:0:0: [sda] Attached SCSI removable disk</p><p>Here&#039;s what worked for me:</p><p>SOFTWARE SIDE</p><p>1. Set up &#039;make menuconfig&#039; with the usual usb suspects: kmod-usb-core, kmod-usb-storage, kmod-usb2, kmod-fs-ext4 (match fs type), block-mount, kmod-scsi-core, usbutils</p><p>2. Run make</p><p>If make finished with no errors,</p><p>3. Go to /build_dir/target-mips_34kc_uClibc-0.9.33.2/linux-ar71xx_generic/linux-***KERNELVERSION***/arch/mips/ath79/ (where ***KERNELVERSION*** = the present kernel version) and edit this file:</p><p>mach-tew-712br.c</p><p>After the line #include &quot;dev-m25p80.h&quot; </p><p>add</p><p>#include &quot;dev-usb.h&quot;</p><p>After the line&nbsp; ath79_register_eth(0); </p><p>add</p><p>ath79_register_usb();</p><p>4. In the same directory, also edit this file:</p><p>Kconfig</p><p>Add </p><p>select ATH79_DEV_USB</p><p>after editing the section looks like this:</p><p>config ATH79_MACH_TEW_712BR<br />&nbsp; &nbsp; bool &quot;TRENDnet TEW-712BR support&quot;<br />&nbsp; &nbsp; select SOC_AR933X<br />&nbsp; &nbsp; select ATH79_DEV_ETH<br />&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />&nbsp; &nbsp; select ATH79_DEV_M25P80<br />&nbsp; &nbsp; select ATH79_DEV_USB<br />&nbsp; &nbsp; select ATH79_DEV_WMAC<br />&nbsp; &nbsp; select ATH79_NVRAM</p><p>then run make again. Use the sysupgrade version ( openwrt-ar71xx-generic-dir-601-b1-squashfs-sysupgrade.bin ) if installing openwrt from a working openwrt install.</p><p>HARDWARE SIDE</p><p><a href="http://img198.imageshack.us/img198/6154/usb740nv4png.jpg">http://img198.imageshack.us/img198/6154 … nv4png.jpg</a></p><p>Using the above picture for reference, I also used a 100uF 16v capacitor across the power and gnd connections. I used two 10k resistors to gnd ( standard is 15k apparently ), one on each data line. I don&#039;t think it really matters, and the resistors might not even be necessary. The external 5v power supply is unnecessary in this case, just pull 5v off of the wide bus near the power adapter. The hardest part of the whole thing for me was bridging the two tiny, empty resistor pads on each data line (R211, R212). I lifted one pad and destroyed another. Just scraping the trace further down and soldering to that was fine. The Squonk reverse engineered WR703N (ar9331-based) page showed them to be 0R or zero ohms, so just a piece of wire on each line will do.</p><p><span class="postimg"><img src="https://i.imgur.com/kHhP6R0.jpg" alt="https://i.imgur.com/kHhP6R0.jpg" /></span></p><p>Now using extroot:</p><p><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p><p>and a usb thumb drive I can install everything! Not bad for zero dollars.</p><p>That&#039;s it, that&#039;s all, I&#039;m done and outta here.</p><p>Cheers!</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 21 Mar 2018, 13:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233657">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">lobonse</div>
					<div class="post-datetime">
						16 May 2014, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>Here&#039;s the final product:<br /><span class="postimg"><img src="https://i.imgur.com/sZsOVwR.jpg" alt="https://i.imgur.com/sZsOVwR.jpg" /></span></p><p><span class="postimg"><img src="https://i.imgur.com/BDyBtqn.jpg" alt="https://i.imgur.com/BDyBtqn.jpg" /></span></p><p>Yes, the wires on the capacitor are the wrong colors, the electrons don&#039;t seem to mind though.</p><p><span class="postimg"><img src="https://i.imgur.com/tyJGizq.jpg" alt="https://i.imgur.com/tyJGizq.jpg" /></span></p><p>They call me the mangler. I never knew I could use such cuss words. The two white wires toward the top are completely unnecessary if you can manage to bridge the two gaps with tiny pieces of wire or 0R resistors ( or probably 22 ohm resistors, etc )</p><p><span class="postimg"><img src="https://i.imgur.com/BpOpVYP.jpg" alt="https://i.imgur.com/BpOpVYP.jpg" /></span></p><p>Comments welcome.</p>											<p class="post-edited">(Last edited by <strong>lobonse</strong> on 21 Mar 2018, 13:50)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=33231&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=33231&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=33231&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>