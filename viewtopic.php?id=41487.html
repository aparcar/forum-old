<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bricked TL-WDR4300, no serial output. Any Hope?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p188160">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">crckmc</div>
					<div class="post-datetime">
						7 Jan 2013, 10:29					</div>
				</div>
				<div class="post-content content">
					<p>Good day,</p><p>yesterday i installed dd-wrt on my 3 week old tl-wdr4300 and everything went fine. After the Installation i had the issue that port-forwarding rules were not applied so i wanted to switch to openwrt. As the dd-wrt webinterface wouldn&#039;t accept the openwrt bin i went ahead and tried flashing it manually via ssh. I tried following the instructions from here <a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4300#upgrading.openwrt">http://wiki.openwrt.org/toh/tp-link/tl- â€¦ ng.openwrt</a> but my flash layout was named different so i removed the 8mb partition named &quot;fullflash&quot; (yeah i know, bad idea...) because i thought it is the same as the &quot;firmware&quot; in openwrts layout. Anyway after removing the mtd write command still failed but as the webinterface was still up i tried reinstalling dd-wrt. After reboot brick...<br />I get nothing on the serial port and am pretty sure that i wired everything correctly. I even tried two different TTL to RS232 converters but still no luck. Is there any hope to debrick the device? Can anyone give me a hint on JTAG on AR934 devices?</p><p>Thank You</p><p>Crck</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188166">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						7 Jan 2013, 12:01					</div>
				</div>
				<div class="post-content content">
					<p>Safe option when you move from DD-WRT to others firmware is via TFTP boot.</p><p>There&#039;s still a hope to recover, as long as you got programmer tools and art.bin back up file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188173">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">crckmc</div>
					<div class="post-datetime">
						7 Jan 2013, 13:31					</div>
				</div>
				<div class="post-content content">
					<p>i have jtag adapater and also an spi programmer but no backup of the art partition...<br />is this really hardware specific or could i take from another 4300 and just change the mac values?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188174">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						7 Jan 2013, 13:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crckmc wrote:</cite><blockquote><p>i have jtag adapater and also an spi programmer but no backup of the art partition...<br />is this really hardware specific or could i take from another 4300 and just change the mac values?</p></blockquote></div><p>Art.bin is specific to hardware device, it is not interchangeable or you can go to Atheros tell them to calibrate your wifi chip <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span style="color: red">DO BACKUP EVERYTHING BEFORE FLASHING YOUR ROUTER</span></p><p>Take off flash chip from board read it with SPI flash programmer and save it to a file , do some hex analysis with hex editor.</p>											<p class="post-edited">(Last edited by <strong>xopal</strong> on 7 Jan 2013, 13:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188175">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						7 Jan 2013, 13:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crckmc wrote:</cite><blockquote><p> no backup of the art partition...<br />is this really hardware specific or could i take from another 4300 and just change the mac values?</p></blockquote></div><p>...at least the mac values and other router-specific info.<br />(e.g. router&#039;s serial number and the WPS pin code are found in my wndr3700&#039;s art partition).</p><p>Regarding the possible &quot;wifi calibration&quot; items and stuff like that, I am not sure if Openwrt utilises that info to any extent.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188177">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">crckmc</div>
					<div class="post-datetime">
						7 Jan 2013, 14:01					</div>
				</div>
				<div class="post-content content">
					<p>would you be so nice and upload or pm me your art.bin?<br />i&#039;m currently dumping the flash so i can compare if it is intact.</p><p>EDIT:<br />so i dumped my flash and to my surprise its not empty. It starts with &quot;....OpenWrt.................r34996&quot; in hex:<br />&quot;01 00 00 00 4F 70 65 6E 57 72 74 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 72 33 34 39 39 36&quot; is this right?</p><p>EDIT2:</p><p>can someone post the offset of the art.bin in a flashdump?</p>											<p class="post-edited">(Last edited by <strong>crckmc</strong> on 7 Jan 2013, 14:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188180">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						7 Jan 2013, 14:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crckmc wrote:</cite><blockquote><p>would you be so nice and upload or pm me your art.bin?<br />i&#039;m currently dumping the flash so i can compare if it is intact.</p><p>EDIT:<br />so i dumped my flash and to my surprise its not empty. It starts with &quot;....OpenWrt.................r34996&quot; in hex:<br />&quot;01 00 00 00 4F 70 65 6E 57 72 74 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 72 33 34 39 39 36&quot; is this right?</p></blockquote></div><p>I don&#039;t have any TL-WDR4300 , but I do compare art.bin between two 3420v1.</p><p>If you dumped the whole flash content then go to address:</p><p>400000 - 10000 = <strong>3F0000</strong></p><p>This is the starting address of an art.bin , total size is 10000 [hex] go grab them and save to a file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188183">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">crckmc</div>
					<div class="post-datetime">
						7 Jan 2013, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>but my flash is 8mb so i start at 7F0000?</p><p>doesn&#039;t look good but to be honest i don&#039;t know what i&#039;m looking for <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>So still not working but here is what i&#039;ve tried:</p><p>I downloaded the orginal FW from tp-link and opened the bin in a hex editor. Then i merged my dump and the new bin so that the flash starts with the bin and (hopefully) has my art.bin at the end. <br />The router is still not booting and only the powerled is on.</p><p>What did i do wrong? Any suggestions?</p>											<p class="post-edited">(Last edited by <strong>crckmc</strong> on 7 Jan 2013, 14:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188185">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						7 Jan 2013, 14:57					</div>
				</div>
				<div class="post-content content">
					<p>Upload your dumped file some where.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188186">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">crckmc</div>
					<div class="post-datetime">
						7 Jan 2013, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>will do after my next try. art partition seems to be fully intact as i can find my mac adress and stuff</p><p>thanks for your help so far</p><br /><p>It works!!!</p><p>i had to remove the header from the tp-link firmware and no it boots again.</p><p>Thank you all for your help!</p>											<p class="post-edited">(Last edited by <strong>crckmc</strong> on 7 Jan 2013, 15:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p238053">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">helivander</div>
					<div class="post-datetime">
						26 Jun 2014, 04:14					</div>
				</div>
				<div class="post-content content">
					<p>Dear friend, y brick my router TP-LINK WDR4320, I have chance to recover it using the Jtag?, since I saw that this is my only option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p238068">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jun 2014, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>how did you bricked it? usually a usb to ttl serial adapter is enough to unbrick...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>