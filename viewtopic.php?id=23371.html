<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NSLU2 ssh file transfer</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p101578">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						28 Jan 2010, 12:42					</div>
				</div>
				<div class="post-content content">
					<p>I installed kamikaze 8.09.2 on my NSLU2 and observed file&nbsp; transfer rate via ssh is extremly slow. <br />I use WINSCP for file tranfer.<br />Any hints?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101594">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MMCM</div>
					<div class="post-datetime">
						28 Jan 2010, 15:29					</div>
				</div>
				<div class="post-content content">
					<p>Since all ssh traffic is encrypted, the CPU of the NSLU2 will be the bottleneck. <br />What exactly is &quot;extremly slow&quot;?<br />For faster speed you could switch to rsyncd (not rsync over ssh!), which is unencrypted.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101627">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						28 Jan 2010, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>With nslu2, it takes aprox. 20 sec for a 350kb file.</p><p>When I tranfer the same file to my WRT54GL with 8.09.1 it takes approx. 3 second.</p><p>So something should be wrong. The cpu of the wrt54 shoudnt be faster than the nslu2 arm.</p><p>As I said, Im using WinSCP with SCP Protocol , not sure where to change the settings you propose</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101673">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">MMCM</div>
					<div class="post-datetime">
						29 Jan 2010, 10:27					</div>
				</div>
				<div class="post-content content">
					<p>What is the CPU usage on the NSLU2 during the transfer (top)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101688">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						29 Jan 2010, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>Mem: 15348K used, 15064K free, 0K shrd, 1040K buff, 6044K cached<br />CPU:&nbsp; &nbsp;1% usr&nbsp; &nbsp;4% sys&nbsp; &nbsp;0% nice&nbsp; 94% idle&nbsp; &nbsp;0% io&nbsp; &nbsp;0% irq&nbsp; &nbsp;0% softirq<br />Load average: 0.04 0.01 0.00<br />&nbsp; PID&nbsp; PPID USER&nbsp; &nbsp; &nbsp;STAT&nbsp; &nbsp;VSZ %MEM %CPU COMMAND<br /> 2544&nbsp; 2517 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 892&nbsp; &nbsp;3%&nbsp; &nbsp;4% scp -r -d -t /jffs/bin<br /> 2516&nbsp; 2384 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 948&nbsp; &nbsp;3%&nbsp; &nbsp;1% /usr/sbin/dropbear -p 22<br /> 2545&nbsp; 2535 root&nbsp; &nbsp; &nbsp;R&nbsp; &nbsp; &nbsp;1116&nbsp; &nbsp;4%&nbsp; &nbsp;1% top<br /> 2534&nbsp; 2384 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 948&nbsp; &nbsp;3%&nbsp; &nbsp;0% /usr/sbin/dropbear -p 22<br /> 2427&nbsp; 2421 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1932&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2428&nbsp; 2421 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1932&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2426&nbsp; 2421 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1908&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2424&nbsp; 2422 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1908&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2421&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1908&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2425&nbsp; 2421 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1908&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 2422&nbsp; 2421 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1908&nbsp; &nbsp;6%&nbsp; &nbsp;0% /jffs/bin/oscam -b -c /jffs/etc/confi<br /> 1898&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1128&nbsp; &nbsp;4%&nbsp; &nbsp;0% syslogd -C16<br /> 2535&nbsp; 2534 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1124&nbsp; &nbsp;4%&nbsp; &nbsp;0% -ash<br /> 2517&nbsp; 2516 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1120&nbsp; &nbsp;4%&nbsp; &nbsp;0% -ash<br />&nbsp; &nbsp; 1&nbsp; &nbsp; &nbsp;0 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1116&nbsp; &nbsp;4%&nbsp; &nbsp;0% init<br /> 1888&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1116&nbsp; &nbsp;4%&nbsp; &nbsp;0% init<br /> 1900&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1112&nbsp; &nbsp;4%&nbsp; &nbsp;0% klogd<br /> 2389&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1112&nbsp; &nbsp;4%&nbsp; &nbsp;0% /usr/sbin/httpd -p 80 -h /www -r Open<br /> 2433&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp;1108&nbsp; &nbsp;4%&nbsp; &nbsp;0% watchdog -t 5 /dev/watchdog<br /> 2384&nbsp; &nbsp; &nbsp;1 root&nbsp; &nbsp; &nbsp;S&nbsp; &nbsp; &nbsp; 892&nbsp; &nbsp;3%&nbsp; &nbsp;0% /usr/sbin/dropbear -p 22</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101707">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">andromeda</div>
					<div class="post-datetime">
						29 Jan 2010, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>As far as I know, NSLU2 has an ethernet port capable of ONLY 100 Mb. Are you sure the slug isn&#039;t connected to a switch/hub rated at 10 Mb ?</p><p>Some time ago I got a similar problem and the culprit was the 10 Mb switch.</p><p>Hope this helps</p>											<p class="post-edited">(Last edited by <strong>andromeda</strong> on 29 Jan 2010, 19:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101708">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						29 Jan 2010, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>the wrt54 router, that works fine, is connected to the same 100mb switch as the nslu2. So that is definitely not the root cause.<br />And even 10mb would be more than 100 times faster than what I see ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101710">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">andromeda</div>
					<div class="post-datetime">
						29 Jan 2010, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I just reported my experience.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101714">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">andromeda</div>
					<div class="post-datetime">
						29 Jan 2010, 20:11					</div>
				</div>
				<div class="post-content content">
					<p>Check in /etc/sysctl.conf the line:</p><p>net.ipv4.tcp_ecn=0</p><p>Give it a try!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101715">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						29 Jan 2010, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>thats in already: net.ipv4.tcp_ecn=0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101718">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						29 Jan 2010, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>andromeda wrote:</cite><blockquote><p>Check in /etc/sysctl.conf the line:</p><p>net.ipv4.tcp_ecn=0</p><p>Give it a try!</p></blockquote></div><p>thx</p><p>I just saw, my wrt54 (8.09.1) got net.ipv4.tcp_ecn=1, but changing nslu2 (8.09.2) to net.ipv4.tcp_ecn=1 doesnt improve...<br />What is the meaning of this setting?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101816">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Lama Bleu</div>
					<div class="post-datetime">
						31 Jan 2010, 12:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi </p><p>Not sure, but reported issue is perhaps caused by the slow performance while writing on JFFS.</p><p>Please try :<br />- copy your file from the computer to /tmp on the device (instead of /jffs/...), and check the difference<br />- transfer a large file from the device located on /jffs/.... to the computer, and check the difference.</p><p>I have the same problem on other devices. But it&#039;s just because writing on flash memory is very slow.<br />If this can help ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101910">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">felixka</div>
					<div class="post-datetime">
						1 Feb 2010, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>I think my PC is the problem. When I use my Labtop it works fine...approx same transfer rate, when I compare WRT54G and NSLU2.</p><p>Thanks for the support</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>