<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> unable to compile from sources on debian</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p340280">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						5 Oct 2016, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>hello<br />I used to compile openwrt on slackware and it works fine, but decided to migrate to debian (orange pi)</p><p>Using debian 8 jessie, I install all dependicies discribed in openwrt buildroot page,</p><p>copy same sources I used on slackware, make distlclean, menu config and start compiling and an error occurs:</p><div class="codebox"><pre><code>mkdir -p /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/www
mkdir -p /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/root
ln -sf /proc/mounts /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc/mtab
rm -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/var
ln -sf /tmp /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/var
mkdir -p /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc
ln -sf /tmp/resolv.conf /tmp/fstab /tmp/TZ /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc/
chmod 0600 /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc/shadow
chmod 1777 /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/tmp
rm -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc/config/network
for conffile in /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/etc/config/*; do if [ -f &quot;$conffile&quot; ]; then grep &quot;${conffile##/storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files}&quot; /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/CONTROL/conffiles || echo &quot;${conffile##/storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files}&quot; &gt;&gt; /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/CONTROL/conffiles; fi done
grep: /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/CONTROL/conffiles: No such file or directory
SHELL= /storage/openwrt/rc8_dd_47249/staging_dir/host/bin/flock /storage/openwrt/rc8_dd_47249/tmp/.root-copy.flock -c &#039;cp -fpR /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files/. /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/&#039;
rm -rf /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-base-files
touch /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/stamp/.base-files_installed
if [ -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/base-files.default.install.clean ]; then rm -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/base-files.default.install /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/base-files.default.install.clean; fi; echo &quot;base-files&quot; &gt;&gt; /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/base-files.default.install
make[3]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249/package/base-files&#039;
make[3]: Entering directory &#039;/storage/openwrt/rc8_dd_47249/package/boot/uboot-ar71xx&#039;
rm -rf /storage/openwrt/rc8_dd_47249/bin/ar71xx/uboot-ar71xx-nbg460n_550n_550nh
install -d -m0755 /storage/openwrt/rc8_dd_47249/bin/ar71xx/uboot-ar71xx-nbg460n_550n_550nh
install -d -m0755 /storage/openwrt/rc8_dd_47249/bin/ar71xx/uboot-ar71xx-nbg460n_550n_550nh
cp -fpR /storage/openwrt/rc8_dd_47249/build_dir/target-mips_34kc_musl-1.1.11/linux-ar71xx_generic/u-boot-nbg460n_550n_550nh/u-boot-2010.03/u-boot.bin /storage/openwrt/rc8_dd_47249/bin/ar71xx/openwrt-ar71xx-generic-nbg460n_550n_550nh-u-boot.bin
make[3]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249/package/boot/uboot-ar71xx&#039;
make[3]: Entering directory &#039;/storage/openwrt/rc8_dd_47249/package/boot/uboot-envtools&#039;
rm -rf /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools
mkdir -p /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/stamp /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools
install -d -m0755 /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/usr/sbin
install -m0755 /storage/openwrt/rc8_dd_47249/build_dir/target-mips_34kc_musl-1.1.11/u-boot-2014.10/tools/env/fw_printenv /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/usr/sbin
ln -sf fw_printenv /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/usr/sbin/fw_setenv
install -d -m0755 /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/lib
install -m0644 ./files/uboot-envtools.sh /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/lib
install -d -m0755 /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/etc/uci-defaults
install -m0644 ./files/ar71xx /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/etc/uci-defaults/30_uboot-envtools
SHELL= /storage/openwrt/rc8_dd_47249/staging_dir/host/bin/flock /storage/openwrt/rc8_dd_47249/tmp/.root-copy.flock -c &#039;cp -fpR /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools/. /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/&#039;
rm -rf /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/tmp-uboot-envtools
touch /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/root-ar71xx/stamp/.uboot-envtools_installed
if [ -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/uboot-envtools.default.install.clean ]; then rm -f /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/uboot-envtools.default.install /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/uboot-envtools.default.install.clean; fi; echo &quot;uboot-envtools&quot; &gt;&gt; /storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/pkginfo/uboot-envtools.default.install
make[3]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249/package/boot/uboot-envtools&#039;
make[3]: Entering directory &#039;/storage/openwrt/rc8_dd_47249/feeds/luci/modules/luci-base&#039;
install -d -m0755 /bin
install -m0755 src/po2lmo /bin/po2lmo
install: cannot create regular file &#039;/bin/po2lmo&#039;: Permission denied
Makefile:45: recipe for target &#039;/storage/openwrt/rc8_dd_47249/staging_dir/host/stamp/.luci-base_installed&#039; failed
make[3]: *** [/storage/openwrt/rc8_dd_47249/staging_dir/host/stamp/.luci-base_installed] Error 1
make[3]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249/feeds/luci/modules/luci-base&#039;
package/Makefile:191: recipe for target &#039;package/feeds/luci/luci-base/host/compile&#039; failed
make[2]: *** [package/feeds/luci/luci-base/host/compile] Error 2
make[2]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249&#039;
package/Makefile:188: recipe for target &#039;/storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/stamp/.package_compile&#039; failed
make[1]: *** [/storage/openwrt/rc8_dd_47249/staging_dir/target-mips_34kc_musl-1.1.11/stamp/.package_compile] Error 2
make[1]: Leaving directory &#039;/storage/openwrt/rc8_dd_47249&#039;
/storage/openwrt/rc8_dd_47249/include/toplevel.mk:177: recipe for target &#039;world&#039; failed
make: *** [world] Error 2</code></pre></div><br /><p>as long as I see by some reason this package is trying to install in system /bin direcotry instead of openwrt build directory, any idea how to fix that?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340331">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MagicSimon</div>
					<div class="post-datetime">
						5 Oct 2016, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know what the problem is, but did you try to do a fresh checkout, copy over .config and see what happens?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340335">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 Oct 2016, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>That looks like you are trying to compile a very old DD version from 2015? Then you should also use all feeds like Luci from the same time. I guess that the po2lmo error is due to new Luci with old main sources.</p><p>Use up-to-date sources for everything.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340379">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nedoskiv</div>
					<div class="post-datetime">
						6 Oct 2016, 06:57					</div>
				</div>
				<div class="post-content content">
					<p>how can I use old luci sources then? I just run ./feed update -a and install -a <br />guess gonna restore archive and try with less make clean, probabbly dirclean instead of distclean</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p340387">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						6 Oct 2016, 08:41					</div>
				</div>
				<div class="post-content content">
					<p>If you want to compile an old source version, then you should git checkout Luci and packages feeds from the same date as the main source. That requires some git knowledge but can be done with git.</p><p>But that old source of yours has e.g. Musl clib 1.11 while it is now 1.15. and it is ancient also otherwise. You would likely be better off with updated main sources.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>