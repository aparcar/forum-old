<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> XFS often throws &quot;Structure needs cleaning&quot;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p133970">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">flohuels</div>
					<div class="post-datetime">
						25 Apr 2011, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>I have a 1.5 TB USB HDD with 2 Partitions, one 4GB with ext3 for OpenWRT software (as opkg destination) and the rest as XFS for media, backups etc., primarily music... The latter is exported as NFS, e.g. to be accessed by a Linux-based STB (VIP1710 hack) which plays the music from it and is controlled by an infrared RC, so I can mount/umount the HDD on my router through that RC (over ssh commands from the STB) ... thats pretty cool hack :-P<br />Now around every 5th time I&#039;m mounting the HDD on the router, I get the error:<br /></p><div class="codebox"><pre><code>mount: mounting /dev/sda2 on /mnt/mount2 failed: Structure needs cleaning</code></pre></div><p>So I will have to plug the USB HDD to my computer and run </p><div class="codebox"><pre><code>xfs_repair -v -L  /dev/[1.5TB partition]</code></pre></div><p>to make it work again.</p><p>Should I prefer an other file system for that partition (I took XFS because its said to be performant on bigger files - which should be the case with a media partition) or is there any &quot;easy&quot; solution (such as reformatting etc. which is still some work with ca. 0.7 TB of files)?</p><p>some stuff you may need:<br /><a href="http://pastebin.com/sRXhrNQN">xfs_repair output</a> (sorry its partially german)</p><p>thanks for help :-))</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271749">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gem600</div>
					<div class="post-datetime">
						9 Apr 2015, 01:30					</div>
				</div>
				<div class="post-content content">
					<p>Thank you so much, I followed your instructions and saved/recovered my 2TB nas.<br />Thanks..</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>