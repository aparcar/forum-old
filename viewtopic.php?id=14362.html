<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Centralized monitoring platform for OpenWRT</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p62735">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">maco</div>
					<div class="post-datetime">
						3 Feb 2008, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks, <br />I have been working on a centralized monitoring platform for OpenWRT for some time now gathering bits and pieces from books, Internet and from 6 years of experience in wireless networks - I have designed a set of scripts to monitor OpenWRT nodes (clients and/or APs) on our new branch of <a href="http://www.blava.net">www.blava.net</a> project in Bratislava, Slovakia. This is a centralized monitoring platform for OpenWRT in very early stage of development, however fully functional. </p><p>The monitoring platform consists of few scripts sitting on the (Internet) remote server while every OpenWRT installation has one line of shell script in their /etc/crontabs/root file. Basically all it does is that every 5 minutes it downloads the relevant script from the remote server, runs it, which invokes gathering of different statistical data of the node and calls wget with GET parameters in URI which transfers variables onto the remote server which inserts the information into the database. Another scripts are sitting on the remote server using JPGraph to graph the statistical information about every single node in the network. </p><p>The result is here (one single node on the network): <br /><a href="http://www.maco.sk/openwrt/mon/lglass/sta.php?mac=00:18:0A:01:0C:B6">http://www.maco.sk/openwrt/mon/lglass/s â€¦ A:01:0C:B6</a><br />That is an example of monitoring Client station (managed mode) with overall information about its OpenWRT AP counterpart. <br />Please do not mind the reboots of both nodes every 9 hours - those are just testing nodes. </p><p>And now - the power of the whole system is basically in its flexibility - since the only change into default installation of OpenWRT is actually inserting one line into /etc/crontabs/root file we make all of the changes on the remote server where actual up-to-date scripts reside. Here we can change any of the scripts and all of the nodes in the network will automatically use that latest revision of the script without the need of touching them individually by admin. Another very strong point is, that you can actually run ANY script on the remote node - not just monitoring stuff, but remotely installing packages and possibly even upgrading the OpenWRT installation and its packages on hundreds of nodes without individual interaction. (think of rebooting node every X days, monitoring of traffic, number of clients, dhcp leases, cpu, conntrack...)</p><p>My intention has been to create easy to manage and analyze connection of the nodes into our network even if the nodes monitored are behind firewalls with as little effort as possible. </p><p>I am waiting for your responses and suggestions - please constructive criticism only. Once I feel like the system is ready to be open to the public (I still need to do some design changes) I will indeed release the whole monitoring platform including server-side to the community. (guessing that I will need additional 2-3 weeks to finish the first public alpha release)</p><p>So far the system needs default OpenWRT installation (I use Meraki nodes since we have plenty of them), one added line in /etc/crontabs/root file and server side scripts written in extremely simple shell script (for nodes to download), PHP for diplaying data (requires JPGraph for graphs) and uses MySQL for storing data. </p><p>Please mind that I&#039;m not trying to replicate Meraki, OpenMesh or any other similar project - I have been using simplified versions of this design since many years ago way before Meraki and other systems. The framework is focused on experienced administrators of wireless networks particularly on pure wireless infrastructure monitoring on as low level as possible to quickly find and debug issues with more or less critical wireless p-t-p or p-t-m links. No intension to do mesh - if you want mesh I recommend Meraki (well, or, ROBIN since we all are more open minded), which is something absolutely out of my focus for many reasons. </p><p>In the next few days I will be focusing on<br />- generating dynamic shell scripts from web user interface and storing them into database<br />- authentication on various levels<br />- design changes and generating map of nodes and their graphical visualization<br />- feedback system - f.e. reboot node if its cpu is too loaded or change channel on the AP and see if it brings any benefit to users - if it does keep it changed...)</p><p>Than you for your feedback and thanks a lot to other folks at <a href="http://www.blava.net">www.blava.net</a> for testing the system and my employer Station House Media Unit (<a href="http://www.shmu.org.uk">www.shmu.org.uk</a>) for their support. </p><p>If anybody is interested in any part of the engine or helping out please reach me via email. </p><p>Sincerely, <br />Marcel Hecko<br />maco@maco.sk</p>											<p class="post-edited">(Last edited by <strong>maco</strong> on 3 Feb 2008, 01:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63588">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ajauberg</div>
					<div class="post-datetime">
						18 Feb 2008, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi Marcel,</p><p>This looks very interesting, I agree very much on you design choices. I will contact you directly.</p><p>BR</p><p>ajauberg</p>											<p class="post-edited">(Last edited by <strong>ajauberg</strong> on 18 Feb 2008, 11:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p63779">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">acoul</div>
					<div class="post-datetime">
						20 Feb 2008, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>nice work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226147">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">renz_valentino</div>
					<div class="post-datetime">
						24 Feb 2014, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi maco,</p><p>Are you still watching this thread? I would like to implement a similar monitoring tool for openwrt. I will be monitoring a lot of routers running behind firewalls. I need the routers to be the one to initiate the connection. I will be using a remote server on AWS running cacti. If you still have the scripts you used they would be a lot of help. </p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247326">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">simen</div>
					<div class="post-datetime">
						17 Sep 2014, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>I second this. Would be nice to see your work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248409">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mthoodlum</div>
					<div class="post-datetime">
						29 Sep 2014, 06:16					</div>
				</div>
				<div class="post-content content">
					<p>Here is a very elegant open source centeralized management system for OpenWRT nodes:</p><p><a href="https://github.com/cobianet/cobia-collect">https://github.com/cobianet/cobia-collect</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>