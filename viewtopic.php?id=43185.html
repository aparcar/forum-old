<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> UDPXY with PPPoE?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p196512">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">knuddel</div>
					<div class="post-datetime">
						28 Mar 2013, 12:49					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I wanted to try out if I could get my ISP&#039;s IPTV services running with OpenWRT, my ISP uses PPPoE. I read the WIKI about IPTV and also here on the forum how to get it work, but I had no success yet. I wanted to use UDPXY because it works for Wifi too.</p><p>I opened firewall rules:</p><p>config &#039;rule&#039;<br />&nbsp; &nbsp; option &#039;src&#039; &#039;wan&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;igmp&#039;<br />&nbsp; &nbsp; option &#039;target&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option &#039;name&#039; &#039;igmp&#039;<br />config &#039;rule&#039;<br />&nbsp; &nbsp; option &#039;src&#039; &#039;wan&#039;<br />&nbsp; &nbsp; option &#039;proto&#039; &#039;udp&#039;<br />&nbsp; &nbsp; option &#039;dest_ip&#039; &#039;224.0.0.0/4&#039;<br />&nbsp; &nbsp; option &#039;target&#039; &#039;ACCEPT&#039;<br />&nbsp; &nbsp; option &#039;name&#039; multicast&#039;</p><p>I opened UDPXY in debug mode with &quot;udpxy -vTS -a 10.0.0.201 -p 4022 -m pppoe-wan&quot; but I cant get it working.</p><p>Heres the output:</p><p>2013-03-28 11:47:26.223716 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Request=[udp/233.51.128.19:1234], length=[22]<br />2013-03-28 11:47:26.223869 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Command [udp] with params [233.51.128.19:1234] read from socket=[8]<br />2013-03-28 11:47:26.224029 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; udp_relay : new_socket=[8] param=[233.51.128.19:1234]<br />2013-03-28 11:47:26.224608 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Added client: pid=[18940], maddr=[233.51.128.19], mport=[1234], saddr=[10.0.0.2], sport=[61289]<br />2013-03-28 11:47:26.224883 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; process_requests: closing accepted socket [8]<br />2013-03-28 11:47:26.225039 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Processed [1/1] accepted sockets<br />newly-accepted sockets [1]: -1<br />2013-03-28 11:47:26.225269 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; All accepted sockets processed<br />2013-03-28 11:47:26.225395 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Waiting for input from [2] fd&#039;s, NO timeout<br />2013-03-28 11:47:26.226632 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Client process=[18940] started for socket=[8]<br />2013-03-28 11:47:26.232370 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; min socket buffer = [65536], max space to use = [1500], Rmsgs = [1]<br />2013-03-28 11:47:26.236045 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Setting up multicast listener<br />2013-03-28 11:47:26.236389 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; current receive buffer size is [163840] bytes for socket [5]<br />2013-03-28 11:47:26.236729 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; multicast-group [ADD]<br />2013-03-28 11:47:26.237042 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Mcast listener socket=[5] set up<br />2013-03-28 11:47:26.237296 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; min socket buffer = [65536], max space to use = [1500], Rmsgs = [1]<br />2013-03-28 11:47:26.237568 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Data buffer will hold up to [1] messages<br />2013-03-28 11:47:26.237785 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; UDP stream, RTP check enabled<br />2013-03-28 11:47:26.238140 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; socket 5: RCV timeout set to 5 sec, 0 usec<br />2013-03-28 11:47:26.238430 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; socket 5: SEND timeout set to 5 sec, 0 usec<br />2013-03-28 11:47:26.238694 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; current send buffer size is [21480] bytes for socket [8]<br />2013-03-28 11:47:26.238958 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; current receive buffer size is [163840] bytes for socket [5]<br />2013-03-28 11:47:26.239222 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; send buffer size set to [163840] bytes for socket [8]<br />2013-03-28 11:47:26.239798 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Sent HTTP response code=[200], reason=[OK] to socket=[8]<br />HTTP/1.1 200 OK<br />Content-Type:application/octet-stream</p><br /><p>2013-03-28 11:47:26.240258 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Relaying traffic from socket[5] to socket[8], buffer size=[2048], Rmsgs=[1], pauses=[0]<br />2013-03-28 11:47:31.235779 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; read_buf: read: Resource temporarily unavailable<br />2013-03-28 11:47:31.235951 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; read_data - EOF<br />2013-03-28 11:47:31.236092 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Exited relay loop: received=[-1], sent=[0], quit=[0]<br />2013-03-28 11:47:31.236292 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; multicast-group [DROP]<br />2013-03-28 11:47:31.236471 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Mcast listener socket=[5] closed<br />2013-03-28 11:47:31.236901 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; Child process=[18940] exits with rc=[0]<br />2013-03-28 11:47:31.237845 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; *** Caught SIGCHLD (18) ***<br />2013-03-28 11:47:31.238116 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Waiting on exited children<br />2013-03-28 11:47:31.238312 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Client [18940] has exited.<br />2013-03-28 11:47:31.238466 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Deleted client: pid=[18940]<br />2013-03-28 11:47:31.238654 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Cleaned up 1 children, 0 still running<br />2013-03-28 11:47:31.238805 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; INTERRUPTED, yet will continue.<br />2013-03-28 11:47:31.238929 CET&nbsp; S(18915)&nbsp; &nbsp; &nbsp; &nbsp; Waiting for input from [2] fd&#039;s, NO timeout</p><p>It seems the problem is this:<br />2013-03-28 11:47:31.235779 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; read_buf: read: Resource temporarily unavailable<br />2013-03-28 11:47:31.235951 CET&nbsp; c(18940)&nbsp; &nbsp; &nbsp; &nbsp; read_data - EOF</p><p>Here&#039;s my devices list:<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 2E:B0:5D:A6:A1:61<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:10.0.0.201&nbsp; Bcast:10.0.0.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::2cb0:5dff:fea6:a161/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:88213 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:131266 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:8270710 (7.8 MiB)&nbsp; TX bytes:158672503 (151.3 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 2E:B0:5D:A6:A1:61<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::2cb0:5dff:fea6:a161/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:961 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:135157 (131.9 KiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4</p><p>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 2E:B0:5D:A6:A1:61<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:955 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:129816 (126.7 KiB)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 2C:B0:5D:A6:A1:62<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::2eb0:5dff:fea6:a162/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:176535 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:133395 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:174356334 (166.2 MiB)&nbsp; TX bytes:19277968 (18.3 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:5</p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:6114 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:6114 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:448916 (438.3 KiB)&nbsp; TX bytes:448916 (438.3 KiB)</p><p>pppoe-wan Link encap:Point-to-Point Protocol<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:92.228.121.104&nbsp; P-t-P:213.191.89.38&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1492&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:25677 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:20342 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:25532369 (24.3 MiB)&nbsp; TX bytes:3887715 (3.7 MiB)</p><p>tun0&nbsp; &nbsp; &nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:172.20.16.2&nbsp; P-t-P:172.20.16.2&nbsp; Mask:255.255.248.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:16302 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:10560 errors:0 dropped:224 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:18079913 (17.2 MiB)&nbsp; TX bytes:941580 (919.5 KiB)</p><p>tun1&nbsp; &nbsp; &nbsp; Link encap:UNSPEC&nbsp; HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:172.20.16.3&nbsp; P-t-P:172.20.16.3&nbsp; Mask:255.255.248.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:4607 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:4842 errors:0 dropped:81 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:100<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3582489 (3.4 MiB)&nbsp; TX bytes:609974 (595.6 KiB)</p><p>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 2C:B0:5D:A6:A1:61<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:73168 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:112060 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:32<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:7359864 (7.0 MiB)&nbsp; TX bytes:140830084 (134.3 MiB)</p><p>wlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 2C:B0:5D:A6:A1:63<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:15675 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:21618 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:32<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2304177 (2.1 MiB)&nbsp; TX bytes:20945617 (19.9 MiB)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200026">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">knuddel</div>
					<div class="post-datetime">
						29 Apr 2013, 12:39					</div>
				</div>
				<div class="post-content content">
					<p>bump</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>