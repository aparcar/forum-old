<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> lirc gpio Buffalo WZR-HP-G300NH and WZR-HP-G450H</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p309003">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">infernocs</div>
					<div class="post-datetime">
						25 Jan 2016, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;we been introduced to openwrt while trying to get proper 4G support to my cabin.<br />I found help with this through the ofmodemsandmen site and whirlpool au forum and one really helpful guy <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Huge thanks to &quot;The Cobia&quot; for getting me set up with openwrt Chaos chalmer and rooter package.</p><p>Now I&#039;m trying to integrate something new that would make for one sweet cabin 4G router, I&#039;d like to add an IR blaster to gpio and be able to use lirc to control my heatpump.<br />So here is what I&#039;we managed to do til now:</p><p>Set up the WZR-HP-G300NH with &quot;&nbsp; &nbsp; MultiWeb-Version-1 ( OpenWRT r48168 ) / LuCI 15.05-166-g9d759a4 Release (git-15.363.78009-956be55)&quot;<br />This if I have got things right is Chaos chalmer which shows up as MultiWeb... because of the included rooter package that gives superb 4G modem support via USB.</p><p>Then I added lirc and kmod-lirc-gpioblaster to my openwrt and included the lircd.conf file that includes my remote codes recorded with audio-alsa driver and mic-port receiver.</p><p>So software should be ready to go BUT... and this is my problem, I cannot get how I could remove the&nbsp; &quot;gpio-17&nbsp; (buffalo:orange:secur) out hi&quot; from the software so I could control that gpio directly and use it for lircd..... </p><p>I also tried to find out if there would be free gpio:s to use but as far as understand there are&#039;nt any awailable... this is what I found:<br />----------------------------------------------------------------------------------------------------------------------------------------------------------------------<br />cat /sys/kernel/debug/gpio</p><p>WZR-HP-G300NH<br />root@OpenWrt:/sys/devices/virtual/gpio/gpio10# cat /sys/kernel/debug/gpio<br />GPIOs 0-21, ath79:<br /> gpio-0&nbsp; &nbsp;(buffalo:blue:usb&nbsp; &nbsp; ) out hi&nbsp; &nbsp; <br /> gpio-1&nbsp; &nbsp;(buffalo:red:diag&nbsp; &nbsp; ) out hi&nbsp; &nbsp; <br /> gpio-2&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-3&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-4&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-5&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-6&nbsp; &nbsp;(buffalo:green:wirele) out hi&nbsp; &nbsp; <br /> gpio-7&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-8&nbsp; &nbsp;(sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-9&nbsp; &nbsp;(nxp-74hc153&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) out lo&nbsp; &nbsp; <br /> gpio-10&nbsp; (sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-11&nbsp; (nxp-74hc153&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) out hi&nbsp; &nbsp; <br /> gpio-12&nbsp; (nxp-74hc153&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; lo&nbsp; &nbsp; <br /> gpio-13&nbsp; (sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-14&nbsp; (nxp-74hc153&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-15&nbsp; (sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-16&nbsp; (sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-17&nbsp; (buffalo:orange:secur) out hi&nbsp; &nbsp; <br /> gpio-18&nbsp; (buffalo:green:router) out hi&nbsp; &nbsp; <br /> gpio-19&nbsp; (rtl8366s&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-20&nbsp; (rtl8366s&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-21&nbsp; (sysfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; </p><p>GPIOs 32-39, platform/nxp-74hc153, nxp-74hc153, can sleep:<br /> gpio-32&nbsp; (aoss&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-33&nbsp; (reset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-34&nbsp; (router_on&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; lo&nbsp; &nbsp; <br /> gpio-35&nbsp; (qos_on&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-37&nbsp; (usb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-38&nbsp; (router_auto&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; hi&nbsp; &nbsp; <br /> gpio-39&nbsp; (qos_off&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) in&nbsp; lo&nbsp; &nbsp;<br />------------------------------------------------------------------------------------------------------------------------------------<br />I also made a script that runs the following command for gpio:s from 0 to 32 using: echo &quot;0&quot; &gt; /sys/class/gpio/export&nbsp; (with a new line for every number &quot;1&quot;,&quot;2&quot;,&quot;3&quot;.. aso.)<br />And it returns:<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: Device or resource busy<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: No such device<br />sh: write error: Device or resource busy<br />------------------------------------------------------------------------------------------------------------------------<br />Not sure what this means but if (and that&#039;s a BIG if) i got this right there are gpio:s from 0 to 21 and 32-39, nothing in between...? And these are all reserved.</p><p>So how do I &quot;unreserve&quot; one of these, the security LED would be great since I guess the wild animals in the forest still don&#039;t have laptops so no need for security.</p><p>Any help would be fantastic.</p><p>-Infernocs-</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>