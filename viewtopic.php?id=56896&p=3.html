<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> LuCi web gui based on angular js</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Apr 2018 and 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=56896&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=56896&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p290860">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">ramguy</div>
					<div class="post-datetime">
						8 Sep 2015, 08:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi, mkschreder</p><p>&nbsp; &nbsp; &nbsp; When I compile JUCI within OpenWRT, make report a error. <br />openwrt version is : git://git.openwrt.org/14.07/openwrt.git</p><div class="codebox"><pre><code>chmod +x bin/usr/bin/*
chmod: cannot access &#039;bin/usr/bin/*&#039;: No such file or directory
make[4]: [plugins/juci-usb] Error 1 (ignored)
chmod +x bin/usr/lib/rpcd/cgi/*
UBUS IGMP: 
JUCI ubus enabled: y
./juci-compile 
/usr/bin/env: node: No such file or directory
make[4]: *** [all] Error 127
make[4]: Leaving directory `/home/test/openwrt_juci/openwrt/build_dir/target-i386_i486_uClibc-0.9.33.2/juci-1.0.33&#039;
make[3]: *** [/home/test/openwrt_juci/openwrt/build_dir/target-i386_i486_uClibc-0.9.33.2/juci-1.0.33/.built] Error 2
make[3]: Leaving directory `/home/test/openwrt_juci/openwrt/feeds/juci/juci&#039;
make[2]: *** [package/feeds/juci/juci/compile] Error 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290877">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">yhloverx</div>
					<div class="post-datetime">
						8 Sep 2015, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>ln -sf nodejs node</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291019">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">ramguy</div>
					<div class="post-datetime">
						9 Sep 2015, 13:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yhloverx wrote:</cite><blockquote><p>ln -sf nodejs node</p></blockquote></div><p>it works, thank you. but there another question happened , when I set the password for admin, it can&#039;t login in. I do password set as the description<br /></p><div class="codebox"><pre><code>By default admin user is used to login but if you don&#039;t have password set for admin user you will not be able to login. So then go to the console and set password for admin user or change the user used for logging in by editing /etc/config/rpcd and then do /etc/init.d/rpcd restart.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291159">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						10 Sep 2015, 21:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yhloverx wrote:</cite><blockquote><p>build success, but i got login screen with blank page.</p></blockquote></div><p>You happened to check out the devel code on 08 of Sep when the page was purposefully left blank. ;-) You can try today and the feed should work. After running make, check your build_dir/target../root../www/js and you should see zipped js bundles for all of your selected juci apps there. If not then the makefile is not installing things properly. </p><p>The openwrt feed is available here:</p><p>src-git juci <a href="https://github.com/mkschreder/juci-openwrt-feed.git">https://github.com/mkschreder/juci-openwrt-feed.git</a></p>											<p class="post-edited">(Last edited by <strong>mkschreder</strong> on 10 Sep 2015, 21:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291162">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						10 Sep 2015, 21:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ramguy wrote:</cite><blockquote><div class="quotebox"><cite>yhloverx wrote:</cite><blockquote><p>ln -sf nodejs node</p></blockquote></div><p>it works, thank you. but there another question happened , when I set the password for admin, it can&#039;t login in. I do password set as the description<br /></p><div class="codebox"><pre><code>By default admin user is used to login but if you don&#039;t have password set for admin user you will not be able to login. So then go to the console and set password for admin user or change the user used for logging in by editing /etc/config/rpcd and then do /etc/init.d/rpcd restart.</code></pre></div></blockquote></div><p>Are you able to login with curl?</p><div class="codebox"><pre><code>curl -d &#039;{ &quot;jsonrpc&quot;: &quot;2.0&quot;, &quot;id&quot;: 1, &quot;method&quot;: &quot;call&quot;, &quot;params&quot;: [ &quot;00000000000000000000000000000000&quot;, &quot;session&quot;, &quot;login&quot;, { &quot;username&quot;: &quot;root&quot;, &quot;password&quot;: &quot;secret&quot;  } ] }&#039;  http://your.router.ip/ubus</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291163">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						10 Sep 2015, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT rpc login configuration is described in detail here: <a href="http://wiki.openwrt.org/doc/techref/ubus">http://wiki.openwrt.org/doc/techref/ubus</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291167">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">obsy</div>
					<div class="post-datetime">
						10 Sep 2015, 21:29					</div>
				</div>
				<div class="post-content content">
					<p>@mkschreder: </p><p>code from today</p><div class="codebox"><pre><code>$ make package/juci-core/{clean,compile} V=s
make[1]: Entering directory `openwrt/chaos_calmer/ar71xx.generic&#039;
make[2]: Entering directory `openwrt/chaos_calmer/sources/feeds/juci/juci-core&#039;
Makefile:68: *** Download/default is missing the FILE field..  Stop.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291228">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">yhloverx</div>
					<div class="post-datetime">
						11 Sep 2015, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>@obsy<br />@mkschreder<br />i got the same error</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291844">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						14 Sep 2015, 21:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yhloverx wrote:</cite><blockquote><p>@obsy<br />@mkschreder<br />i got the same error</p></blockquote></div><p>Welcome to devel branch ;-). You can always go back a few commits by changing pkg_source_version in the feed. Or set it to master. In the coming months I will probably set it to use stable releases instead of always fetching latest source code, but then on the other hand you wouldn&#039;t get the latest changes by default. Now that I think of it, it would probably be reasonable to have two branches in the feed, one devel and a master. Whatever works best shall pave the way..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291848">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						14 Sep 2015, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>I have a major cleanup planned for the whole project and how things are organized and compiled, but that will be after next release in october. But all applications and you may develop right now will still continue to work, just that the build process will work more like the way linux kernel modules are built and installed. I have an idea that it would be cool to allow addon compilation by running make from addon folder and re-using as much of juci make scripts as possible instead of using duplicated makefiles for addons..</p><p>For now the easiest way to build extra addons is to create a symlink to them in the plugins folder (or to put them there) and then add the directory to DIRS-y in makefile. </p><p>Juci Makefile also includes Makefile.local if it exists and so addons can be included in the build by adding them in Makefile.local. For example to build all of juci modules for testing on local server, a Makefile.local would contain: </p><div class="codebox"><pre><code>DIRS-y += $(wildcard plugins/*) themes/juci-theme-inteno</code></pre></div><p>This will allow building all plugins you have in your plugins folder by using &quot;make debug&quot; and then testing them on the local server by running ./juci-local-server. But you still need a working box to connect to, it is just much quicker to develop this way through the local server.</p>											<p class="post-edited">(Last edited by <strong>mkschreder</strong> on 14 Sep 2015, 21:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294457">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">allenw</div>
					<div class="post-datetime">
						3 Oct 2015, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>hello mkschreder,</p><p>I am interested in your great project, and I tried to build under openwrt BB with your lasted juci branch. and after compilation I want to test is on local but always with following error. I am kind new to JS and found no clue by google it.<br />could you help give some help? thanks.</p><p> sudo ./juci-local-server --host 192.168.56.101<br />............................<br />Adding bin/www/js/90-juci-samba.tpl.js to index<br />Adding bin/www/js/90-juci-sysupgrade.tpl.js to index<br />Adding bin/www/js/90-juci-theme-inteno.tpl.js to index<br />Adding bin/www/js/90-juci-upnp.tpl.js to index<br />Adding bin/www/js/90-juci-usb.tpl.js to index<br />Adding bin/www/js/99-translations.js to index<br />./juci-update: 95: [: DEBUG: unexpected operator<br />Recompiled gui, code: 0<br />JSON_CALL (-&gt; <a href="http://192.168.56.101/ubus):">http://192.168.56.101/ubus):</a> {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;list&quot;,&quot;id&quot;:1,&quot;params&quot;:[&quot;00000000000000000000000000000000&quot;,&quot;*&quot;,&quot;&quot;,{}]}<br />ERROR: Error: connect ECONNREFUSED: undefined: undefined<br />JSON_RESP: {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:[1,&quot;Error: connect ECONNREFUSED&quot;]}<br />JSON_CALL (-&gt; <a href="http://192.168.56.101/ubus):">http://192.168.56.101/ubus):</a> {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;list&quot;,&quot;id&quot;:1,&quot;params&quot;:[&quot;00000000000000000000000000000000&quot;,&quot;*&quot;,&quot;&quot;,{}]}<br />ERROR: Error: connect ECONNREFUSED: undefined: undefined<br />JSON_RESP: {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:[1,&quot;Error: connect ECONNREFUSED&quot;]}<br />^Calan@alan:~/Work/openwrt/barrier_breaker/build_dir/target-mips_34kc+dsp_uClibc-0.9.33.2/juci-e70a890b05baf840c4b75898be255f8607d79c10$ </p><p>br<br />Allen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295277">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">allenw</div>
					<div class="post-datetime">
						8 Oct 2015, 13:43					</div>
				</div>
				<div class="post-content content">
					<p>hi Schreder,</p><p>some more debug infor, i checked the console log in browser and found no error, </p><p>Init UBUS -&gt; <br />01-juci.js:48 registering: session.access, method: undefined<br />01-juci.js:48 registering: session.login, method: undefined<br />01-juci.js:48 registering: local.features, method: undefined<br />01-juci.js:48 registering: local.set_rpc_host, method: undefined<br />01-juci.js:48 registering: dhcp, method: ipv4leases<br />01-juci.js:48 registering: dhcp, method: ipv6leases<br />01-juci.js:48 registering: juci.event, method: poll<br />01-juci.js:48 registering: juci.events, method: list<br />01-juci.js:48 registering: juci.network.netdevd, method: autoconf<br />01-juci.js:48 registering: juci.ui, method: menu<br />01-juci.js:48 registering: juci.ui, method: acls<br />01-juci.js:48 registering: log, method: read<br />01-juci.js:48 registering: log, method: write<br />.................</p><br /><p>but there is is alert window<br />’Can not establish ubus connection to router. If the router is rebooting then please wait a few minutes and try again‘<br />every time during visit. i check the juci.js a little and found it request for ubus.juci.system.</p><p>in my machine(BB x86-generic), i got following rpc registered. anything still missing? thanks.</p><p>root@OpenWrt:~# ubus list<br />dhcp<br />juci.event<br />juci.events<br />juci.network.netdevd<br />juci.ui<br />log<br />network<br />network.device<br />network.interface<br />network.interface.lan<br />network.interface.loopback<br />network.interface.wan6<br />network.wireless<br />service<br />session<br />sys.dect<br />system<br />uci</p><br /><br /><p>br<br />Allen</p><div class="quotebox"><cite>allenw wrote:</cite><blockquote><p>hello mkschreder,</p><p>I am interested in your great project, and I tried to build under openwrt BB with your lasted juci branch. and after compilation I want to test is on local but always with following error. I am kind new to JS and found no clue by google it.<br />could you help give some help? thanks.</p><p> sudo ./juci-local-server --host 192.168.56.101<br />............................<br />Adding bin/www/js/90-juci-samba.tpl.js to index<br />Adding bin/www/js/90-juci-sysupgrade.tpl.js to index<br />Adding bin/www/js/90-juci-theme-inteno.tpl.js to index<br />Adding bin/www/js/90-juci-upnp.tpl.js to index<br />Adding bin/www/js/90-juci-usb.tpl.js to index<br />Adding bin/www/js/99-translations.js to index<br />./juci-update: 95: [: DEBUG: unexpected operator<br />Recompiled gui, code: 0<br />JSON_CALL (-&gt; <a href="http://192.168.56.101/ubus):">http://192.168.56.101/ubus):</a> {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;list&quot;,&quot;id&quot;:1,&quot;params&quot;:[&quot;00000000000000000000000000000000&quot;,&quot;*&quot;,&quot;&quot;,{}]}<br />ERROR: Error: connect ECONNREFUSED: undefined: undefined<br />JSON_RESP: {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:[1,&quot;Error: connect ECONNREFUSED&quot;]}<br />JSON_CALL (-&gt; <a href="http://192.168.56.101/ubus):">http://192.168.56.101/ubus):</a> {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;list&quot;,&quot;id&quot;:1,&quot;params&quot;:[&quot;00000000000000000000000000000000&quot;,&quot;*&quot;,&quot;&quot;,{}]}<br />ERROR: Error: connect ECONNREFUSED: undefined: undefined<br />JSON_RESP: {&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;result&quot;:[1,&quot;Error: connect ECONNREFUSED&quot;]}<br />^Calan@alan:~/Work/openwrt/barrier_breaker/build_dir/target-mips_34kc+dsp_uClibc-0.9.33.2/juci-e70a890b05baf840c4b75898be255f8607d79c10$ </p><p>br<br />Allen</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p295571">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						10 Oct 2015, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>Ok guys, if you are still building from master then I really feel sorry for you :-)</p><p>I have now added a profile for bcm53xx sg400 box on top of stock openwrt. It builds from devel juci branch and uses devel branch of the feed. These contain many fixes that make juci work much better now on openwrt. You can check out the profile here: <a href="https://github.com/mkschreder/openwrt/blob/juci/target/linux/bcm53xx/profiles/110-JUCI.mk">https://github.com/mkschreder/openwrt/b … 10-JUCI.mk</a> and the feed makefile that selects juci packages automatically can be found here: <a href="https://github.com/mkschreder/mks-openwrt-feed/blob/devel/juci/Makefile">https://github.com/mkschreder/mks-openw … i/Makefile</a></p><p>So suppose you want to build an image for sg400.. here is how you would do it: <br />git clone <a href="https://github.com/mkschreder/openwrt.git">https://github.com/mkschreder/openwrt.git</a><br />cd openwrt<br />git checkout juci<br />./scripts/feeds update juci<br />./scripts/feeds install -p juci -a<br />make menuconfig<br />-- choose target bcm53xx and profile JUCI.<br />make</p><p>You can now probably port this to any other target. :-)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 3 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=56896&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=56896&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>