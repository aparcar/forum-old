<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with flashing Meraki MR 18</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p363852">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Darkstar0078</div>
					<div class="post-datetime">
						17 Aug 2017, 08:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello all together,</p><p>I have bought very cheap a MR18 and I want now to flash it with OpenWrt.</p><p>Last week I could successfully flash another MR18 but this one is a little strange.<br />I could easily change the serial number but I can not enter the root shell. In my opinion<br />there is something wrong with the MR 18, because during the start routine there are several<br />points who have a problem, as you can see:</p><br /><div class="codebox"><pre><code>944x BootROM Ver. (asic) 1.0 [Nov  8 2011 13:42:57]
_________________________________________
find_hif: bootstrap = 0x31c58
Nand Flash init
hdr: [0xbd000400 : 0xbd000400 : 0x6fb4 : 0xe5c86b84]
nand_load_fw: read 13 pages
nand_load_fw: 0x10000 0x800 0xbd000bf0
nand_load_fw: 0x20000 0x800 0xbd0013f0
nand_load_fw: 0x30000 0x800 0xbd001bf0
nand_load_fw: 0x40000 0x800 0xbd0023f0
nand_load_fw: 0x50000 0x800 0xbd002bf0
nand_load_fw: 0x60000 0x800 0xbd0033f0
nand_load_fw: 0x70000 0x800 0xbd003bf0
nand_load_fw: 0x80000 0x800 0xbd0043f0
nand_load_fw: 0x90000 0x800 0xbd004bf0
nand_load_fw: 0xa0000 0x800 0xbd0053f0
nand_load_fw: 0xb0000 0x800 0xbd005bf0
nand_load_fw: 0xc0000 0x800 0xbd0063f0
nand_load_fw: 0xd0000 0x800 0xbd006bf0
f/w 0 read complete, jumping to 0xbd000400



Meraki Atheros LinuxLoader MR18 built Jan 31 2014 15:53:22
qca955x_init_ddr ok
test_memory ok
D-cache size: 64K
I-cache size: 32K
init_dram_uncached ok
init_icache ok
init_dcache ok
enable_caches ok
test_memory ok
nand_flash_init ok
loading fw at 256
hdr: [0x8e73ed8a : 0x400 : 0x1694e8 ]
part1: Copying image to memory ... ...........
done.
part1: Checking sha1 (from 0x80060000 length 1479912) ... match
part1: sha1 calculated: e22ecee161ae56067307819c1118b6ae7c708e4e
starting stage2
decompressing embedded kernel image 0x81a02640(0x166e8a)
got osize 42d7fc
.....................done
starting linux
[    0.000000] Linux version 3.4.80-meraki-ar7100+ (meraki@buildbot105.meraki.com) (gcc version 4.7.1 (GCC) ) #4 Fri Mar 21 22:58:30 PDT 2014
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019750 (MIPS 74Kc)
[    0.000000] SoC: Qualcomm Atheros QCA9558 rev 0
[    0.000000] Clocks: CPU:720.000MHz, DDR:600.000MHz, AHB:200.000MHz, Ref:40.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 07fb0000 @ 00050000 (usable)
[    0.000000] Wasting 2560 bytes for tracking 80 unused pages
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000050 -&gt; 0x00008000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000050 -&gt; 0x00008000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32432
[    0.000000] Kernel command line:  console=ttyS0,115200 machtype=Meraki ubi.mtd=3 root=/dev/mtdblock8   
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 125096k/130752k available (2241k kernel code, 5656k reserved, 602k data, 1432k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 359.42 BogoMIPS (lpj=718848)
[    0.028000] pid_max: default: 32768 minimum: 301
[    0.032000] Mount-cache hash table entries: 512
[    0.036000] Performance counters: mips/74K PMU enabled, 4 32-bit counters available to each CPU, irq 13
[    0.040000] devtmpfs: initialized
[    0.044000] NET: Registered protocol family 16
[    0.048000] gpiochip_add: registered GPIOs 0 to 23 on device: ath79
[    0.052000] MIPS: machine is Meraki Access Point
[    0.056000] registering PCI controller with io_map_base unset
[    0.060000] registering PCI controller with io_map_base unset
[    0.068000] bio: create slab &lt;bio-0&gt; at 0
[    0.072000] PCI host bridge to bus 0000:00
[    0.076000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x11ffffff]
[    0.080000] pci_bus 0000:00: root bus resource [io  0x0000]
[    0.084000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bit]
[    0.088000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref]
[    0.092000] PCI host bridge to bus 0000:01
[    0.096000] pci_bus 0000:01: root bus resource [mem 0x12000000-0x13ffffff]
[    0.100000] pci_bus 0000:01: root bus resource [io  0x0001]
[    0.104000] pci 0000:01:00.0: BAR 0: assigned [mem 0x12000000-0x1201ffff 64bit]
[    0.108000] pci 0000:01:00.0: BAR 6: assigned [mem 0x12020000-0x1202ffff pref]
[    0.112000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.116000] pci 0000:01:00.0: using irq 41 for pin 1
[    0.120000] Switching to clocksource MIPS
[    0.124000] NET: Registered protocol family 2
[    0.128000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.136000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)
[    0.144000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
[    0.148000] TCP: Hash tables configured (established 4096 bind 4096)
[    0.156000] TCP: reno registered
[    0.160000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.164000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.172000] NET: Registered protocol family 1
[    0.188000] Detected Meraki MR18
[    0.204000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.212000] msgmni has been set to 244
[    0.216000] io scheduler noop registered
[    0.220000] io scheduler deadline registered (default)
[    0.224000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.252000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.256000] console [ttyS0] enabled, bootconsole disabled
[    0.256000] console [ttyS0] enabled, bootconsole disabled
[    0.268000] Trying to register dev faulty etc
[    0.276000] ONFI param page 0 valid
[    0.280000] ONFI flash detected
[    0.284000] NAND device: Manufacturer ID: 0xad, Chip ID: 0xf1 (Hynix H27U1G8F2BTR-BC)
[    0.292000] Scanning device for bad blocks
[    0.352000] Creating 5 MTD partitions on &quot;ath79-nand&quot;:
[    0.360000] 0x000000000000-0x000000080000 : &quot;nandloader&quot;
[    0.364000] 0x000000080000-0x000000880000 : &quot;part1&quot;
[    0.372000] 0x000000880000-0x000001080000 : &quot;part2&quot;
[    0.380000] 0x000001080000-0x000007f80000 : &quot;ubi&quot;
[    0.384000] 0x000007fe0000-0x000008000000 : &quot;odm-caldata&quot;
[    0.392000] UBI: attaching mtd3 to ubi0
[    0.396000] UBI: physical eraseblock size:   131072 bytes (128 KiB)
[    0.400000] UBI: logical eraseblock size:    129024 bytes
[    0.408000] UBI: smallest flash I/O unit:    2048
[    0.412000] UBI: sub-page size:              512
[    0.416000] UBI: VID header offset:          512 (aligned 512)
[    0.424000] UBI: data offset:                2048
[    0.568000] UBI: max. sequence number:       1084110
[    0.580000] UBI: attached mtd3 to ubi0
[    0.584000] UBI: MTD device name:            &quot;ubi&quot;
[    0.592000] UBI: MTD device size:            111 MiB
[    0.596000] UBI: number of good PEBs:        888
[    0.600000] UBI: number of bad PEBs:         0
[    0.604000] UBI: number of corrupted PEBs:   0
[    0.608000] UBI: max. allowed volumes:       128
[    0.612000] UBI: wear-leveling threshold:    4096
[    0.620000] UBI: number of internal volumes: 1
[    0.624000] UBI: number of user volumes:     7
[    0.628000] UBI: available PEBs:             482
[    0.632000] UBI: total number of reserved PEBs: 406
[    0.636000] UBI: number of PEBs reserved for bad PEB handling: 8
[    0.644000] UBI: max/mean erase counter: 1502/1221
[    0.648000] UBI: image sequence number:  0
[    0.652000] UBI: background thread &quot;ubi_bgt0d&quot; started, PID 203
[    0.668000] tun: Universal TUN/TAP device driver, 1.6
[    0.672000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[    0.680000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0
[    0.692000] TCP: cubic registered
[    0.696000] NET: Registered protocol family 17
[    0.700000] 8021q: 802.1Q VLAN Support v1.8
[    0.704000] devtmpfs: mounted
[    0.712000] Freeing unused kernel memory: 1432k freed
/init[    0.720000]
[    0.720000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
: reading file /[    0.728000]
[    0.728000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
proc/cpuinfo: No[    0.740000]
[    0.740000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
 such file or di[    0.752000]
[    0.752000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
rectory   
/init: [    0.760000]
[    0.760000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
reading file /pr[    0.772000]
[    0.772000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
oc/self/cmdline:[    0.780000]
[    0.780000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
 No such file or[    0.792000]
[    0.792000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
 directory
/ini[    0.804000]
[    0.804000] !!!!! {} reading /proc/cpuinfo failed [2]: No such file or directory
t: reading file [    0.812000] Made it into bootsh: /proc/cpuinfo: NMar 21 2014o such file or d irectory  
/init:22:57:50 reading file /p
roc/self/cmdline[    0.824000] bootsh build : No such file o22-131521r directory
/in
it: reading file /proc/cpuinfo: No such file or directory
/init: reading file /proc/self/cmdlin[    0.840000] Mapping e: No such file 5596or directory
/i bytes for nit: reading fil/lib/modules/leds-gpio.koe /proc/cpuinfo:
 No such file or directory
/ini[    0.856000] Mapping t: reading file 104052/proc/self/cmdli bytes for ne: No such file/lib/modules/ag7240_mod.ko or directory
/
init: reading file /proc/cpuinfo: No such file o[    0.872000] ATHR_GMAC: Length per segment 1024
r directory
/in[    0.876000] ATHR_GMAC: fifo cfg 3 01f00140
it: reading file[    0.880000] 955x_GMAC: qca955x_gmac_attach
 /proc/self/cmdl[    0.888000] 955x_GMAC: qca955x_set_gmac_caps
ine: No such fil[    0.892000] Currently in polling mode unit0
e or directory
[    0.900000] mac:0 Registering S17....
/init: reading f[    0.904000] ATHR_GMAC: RX TASKLET - Pkts per Intr:0
ile /proc/cpuinf[    0.908000] ATHR_GMAC: Mac address for unit 0:bfff1000
o: No such file [    0.916000] ATHR_GMAC: 00:00:00:00:00:00
or directory
/init: reading file /proc/self/cmdline: No such file or directory
/init: reading file /proc/cpuinfo: No such file or directory
/init: reading file /proc/self/cmdline: No such file or directory
/init: reading file /proc/cpuinfo: No such file or directory
/init: reading file /proc/self/cmdline: No such file or directory
/init: reading file /proc/cpuinfo: No such file or directory
/init: reading file /proc/self/cmdline: No such file or directory
[    1.472000] ATHR_GMAC: Max segments per packet :   1
[    1.476000] ATHR_GMAC: Max tx descriptor count :   100
[    1.484000] ATHR_GMAC: Max rx descriptor count :   252
[    1.488000] ATHR_GMAC: Mac capability flags    :   6200
[    1.516000] UBIFS: recovery needed
[    1.588000] UBIFS: recovery completed
[    1.592000] UBIFS: mounted UBI device 0, volume 1, name &quot;storage&quot;
[    1.600000] UBIFS: file system size:   19869696 bytes (19404 KiB, 18 MiB, 154 LEBs)
[    1.604000] UBIFS: journal size:       1032193 bytes (1008 KiB, 0 MiB, 8 LEBs)
[    1.612000] UBIFS: media format:       w4/r0 (latest is w4/r0)
[    1.620000] UBIFS: default compressor: lzo
[    1.624000] UBIFS: reserved for root:  938494 bytes (916 KiB)
[    1.640000] Bootsh: trying rootfs path: /dev/mtdblock/rootfs-22-131521-1
Attempting to setup root /dev/mtdblock/rootfs-22-131521-1...
[    2.476000] Mapping 5596 bytes for /lib/modules/leds-gpio.ko
[    2.700000] insmod: error initializing module /lib/modules/leds-gpio.ko: File exists
[    2.708000] Mapping 104052 bytes for /lib/modules/ag7240_mod.ko
[    2.716000] insmod: error initializing module /lib/modules/ag7240_mod.ko: File exists
init started: BusyBox v1.20.2 (2014-03-21 22:18:21 PDT)
[    3.008000] Algorithmics/MIPS FPU Emulator v1.5
WARNING! THIS CONSOLE IS LOGGED! UNAUTHORIZED ACCESS FORBIDDEN!
&lt;Meraki&gt; [    4.820000] To set s17 LOOKUP_CTRL_REG registers, flag 0
[    4.828000] To set s17 LOOKUP_CTRL_REG registers, flag 0
[    4.832000] athr_gmac_ring_alloc Allocated 1600 at 0x803a6000
[    4.840000] athr_gmac_ring_alloc Allocated 4032 at 0x87629000
[    5.144000] 955x_GMAC: eth0 in RGMII MODE
[    5.148000] 955x_GMAC: qca955x_gmac_sgmii_res_cal cal value = 0xe
[    5.168000] Scorpion -----&gt; S17 PHY
[    5.176000] athrs17_reg_init:done
[    5.180000] Setting Drop CRC Errors, Pause Frames and Length Error frames
[    5.184000] Setting PHY...
[    6.192000] To set s17 LOOKUP_CTRL_REG registers, flag 1
[    6.196000] To set s17 LOOKUP_CTRL_REG registers, flag 1
[    6.472000] sysctl -w vm.panic_on_oom=2
[    6.484000] vm.panic_on_oom = 2
[    7.380000] click: starting router thread pid 451 (8034e000)
[    8.244000] elts_meraki: module license &#039;unspecified&#039; taints kernel.
[    8.404000] Single synchronous check for reset
[    8.728000]
[    8.740000] boot 731 build 22-131521 board ar7100 mac 00:18:0A:D8:35:D0
[    8.752000] Module: dummy  .text=0xc0299000 .data=0xc02993b0 .bss=
[    8.752000] Module: mach_meraki_mr18_radios  .text= .data= .bss=0xc02a0270
[    8.752000] Module: proclikefs  .text=0xc02ab000 .data= .bss=0xc02abdc0
[    8.752000] Module: merakiclick  .text=0xc04a1000 .data=0xc0597760 .bss=0xc05979e0
[    8.752000] Module: elts_meraki  .text=0xc09a7000 .data=0xc0b58eb0 .bss=0xc0b59600
[    9.032000] phram: phram-oops device: 0x4000 at 0x10000
[    9.112000] ramoops: platform device not found, using module parameters
[    9.196000] ln: /usr/bin/slowfcgi: File exists
[   11.044000] adf: module license &#039;Proprietary&#039; taints kernel.
[   11.060000] asf: module license &#039;Proprietary&#039; taints kernel.
[   11.276000] ath_spectral: module license &#039;Proprietary&#039; taints kernel.
[   11.284000] ath_spectral: Version 2.0.0
[   11.284000] Copyright (c) 2005-2009 Atheros Communications, Inc. All Rights Reserved
[   11.296000] SPECTRAL module built on Mar 21 2014 22:46:13
[   11.336000] ath_hal: module license &#039;Proprietary&#039; taints kernel.
[   11.352000] ath_hal: 0.9.17.1 (AR5416, AR9380, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
[   11.376000] ath_dfs: module license &#039;Proprietary&#039; taints kernel.
[   11.384000] ath_dfs: Version 2.0.0
[   11.384000] Copyright (c) 2005-2006 Atheros Communications, Inc. All Rights Reserved
[   11.412000] ath_rate_atheros: module license &#039;Proprietary&#039; taints kernel.
[   11.420000] ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
[   11.452000] ath_dev: module license &#039;Proprietary&#039; taints kernel.
[   11.468000] ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
[   11.484000] ath_pktlog: module license &#039;unspecified&#039; taints kernel.
[   11.776000] ath_ahb: 9.5.5.36 (Atheros/multi-bss)
[   11.780000] __ath_attach: Set global_scn[0]
[   11.784000] ACBKMinfree = 48
[   11.788000] ACBEMinfree = 32
[   11.792000] ACVIMinfree = 16
[   11.796000] ACVOMinfree = 0
[   11.796000] CABMinfree = 48
[   11.800000] UAPSDMinfree = 0
[   11.804000] Bootstrap clock 40MHz
[   11.812000] Enterprise mode: 0x50000000
[   11.816000] Restoring Cal data from DRAM
[   11.828000] ath_get_caps[6066] rx chainmask mismatch actual 3 sc_chainmak 0</code></pre></div><p>Has anyone of you an idea how I can fix this problem?</p><p>By the way, firmware: 22-131521.</p><p>Best regards and many thanks</p><p>Darkstar</p>											<p class="post-edited">(Last edited by <strong>Darkstar0078</strong> on 17 Aug 2017, 08:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>