<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem with flashing back to Sveasoft</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p2068">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Rhodan</div>
					<div class="post-datetime">
						12 Sep 2004, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello, </p><p>i&#039;am a new subscripter of Sveasoft and have a major problem. <br />I had used with my WRT54G V1.0 Router the openwrt firmware. </p><p>Now i would use the Firmware_Alchemy-pre5_3.bin with my router. </p><p>I have enabled the boot_wait NVRAM variable. The router is connected to a linux workstation with atftp running. </p><p>When i reboot the router then i can reflash it only with the Satori-4.0 v2.07.1.7sv Firmware! And this works only when i rename the BIN File to openwrt-g-code.bin </p><p>I can after reflashing and reboot connect to the webinterface from Satori and the router works well (with PPPOE support...) </p><p>So, now when i try update to the Firmware_Alchemy-pre5_3.bin with the Upgrade Firmware option, then the firmware will flash and the router reboot. <br />But from now, i can&#039;t access the router. Only directly after the reboot i can ping the router (192.168.1.1) for few seconds (boot_wait) thats all. </p><p>Ok, then i reflash with tftp to Satori version and it works well again. I tryed then to upgrade to Alchemy version pre5_2_1 and pre5_2_2 with the web interface, but there i get a upgrade error after a few seconds. </p><p>I tryed then to upgrade via tftp but then i have the same problem as with pre5_3. </p><p>But what me makes a little confuse... i can always only flash files with tftp they are named openwrt-g-code.bin </p><p>What can i do to reset the router to factory default with all nvram variables also set to factory default and deleting all of not default variables they come from openwrt? </p><p>Why does the alchemy versions not work with my router? </p><p>Btw. i had to do change some nvram variables for openwrt. But i have the problem, that i can&#039;t remember to all changes. It was somthing with wan_ifname, pppoe_ifname, vlan1, br0 and so on... </p><p>Please help me! </p><p>Rhodan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2069">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						13 Sep 2004, 01:45					</div>
				</div>
				<div class="post-content content">
					<p>Try running &quot;mtd erase linux&quot; in OpenWRT. This will erase your linux partition on your flash.</p><p>Then power-cycle your router while holding the reset-button for about 10-15 sec. This will reset your nvram settings.</p><p>Then upload the new firmware of your choice using code.bin as firmware image name...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2070">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						13 Sep 2004, 03:44					</div>
				</div>
				<div class="post-content content">
					<p>I am curious to this as well, how does the &#039;boot loader&#039; determine what file&nbsp; name uploaded from tftp is &#039;valid&#039; or it doesn&#039;t matter ?</p><p>this report seems to suggest that the name does matter. Could it be that the &#039;boot loader&#039; has some mechanism like this :</p><p>1. if there is a nvram variable, I would only accept that.<br />2. otherwise, I would accept anything then write that name to nvram</p><p>This may explain this strange behaviour of why openwrt-g-code.bin is the only name accepted after the first tftp flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2078">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Rhodan</div>
					<div class="post-datetime">
						13 Sep 2004, 14:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Try running &quot;mtd erase linux&quot; in OpenWRT. This will erase your linux partition on your flash.</p><p>Then power-cycle your router while holding the reset-button for about 10-15 sec. This will reset your nvram settings.</p><p>Then upload the new firmware of your choice using code.bin as firmware image name...</p></blockquote></div><p>What&#039;s about the boot_wait status? Will this variable set to &quot;no&quot;?<br />If yes, how can i then flash a new firmware?</p><p>Btw. this are all my nvram variables (username, password, IP addresses have i changed...):<br /></p><div class="quotebox"><blockquote><p>wl_radius_port=1812<br />wl_mac_deny=<br />filter_dport_grp3=<br />filter_dport_grp4=<br />filter_dport_grp5=<br />filter=on<br />wan_unit=0<br />wl0_net_mode=mixed<br />filter_dport_grp6=<br />os_ram_addr=80001000<br />wl_br1_enable=0<br />filter_dport_grp7=<br />wl0_frameburst=on<br />filter_dport_grp8=<br />filter_dport_grp9=<br />ddns_username_2=<br />log_ipaddr=0<br />ppp_idletime=5<br />ppp_passwd=mypppoepassword<br />httpsd_enable=1<br />wl_wds3_enable=0<br />ddns_enable=0<br />et0macaddr=00:06:25:EB:C3:6E<br />skip_intel_check=0<br />wl0_wep_buf=<br />wl_wds9_enable=0<br />ddns_hostname_buf=<br />d11g_mode=1<br />wan_get_dns=100.237.100.97 200.25.200.129<br />syslogd_rem_ip=<br />watchdog=1000<br />boot_wait=on<br />wl0_macmode1=disabled<br />tftpd_enable=1<br />nas_enable=1<br />wl_phytypes=<br />filter_web_host1=<br />action_service_arg1=<br />wl0_infra=1<br />filter_web_host2=<br />filter_web_host3=<br />fw_disable=0<br />wl0_country_code=JP<br />et0mdcport=0<br />router_name=Sveasoft<br />pppoe_keepalive=0<br />filter_web_host4=<br />wshaper_enable=0<br />sh_masq=br0 wds0.2<br />filter_web_host5=<br />wl0_wds6_enable=0<br />Intel_firmware_version=v1.41.8<br />filter_web_host6=<br />apwatchdog_enable=0<br />wl_infra=1<br />filter_web_host7=<br />filter_web_host8=<br />filter_web_host9=<br />pptp_server_ip=<br />ppp_get_ac=<br />pmon_ver=PMON 3.11.30.5<br />restore_defaults=0<br />dhcpd_statics=<br />wshaper_downlink=0<br />ppp_username=mypppoeusername<br />sh_rules=<br />wan_lease=0<br />filter_port=<br />ddns_enable_buf=<br />d11g_dtim=1<br />ddns_hostname=<br />wl_radius_ipaddr=<br />http_wanport=8080<br />filter_ip_grp1=<br />lan_gateway=0.0.0.0<br />filter_ip_grp2=<br />wl0_ifname=eth2<br />filter_ip_grp3=<br />dr_lan_rx=0<br />filter_ip_grp4=<br />lan_domain=<br />filter_ip_grp5=<br />timer_interval=3600<br />filter_ip_grp6=<br />telnetd_web=1<br />wshaper_uplink=0<br />pppoe_ac=<br />filter_ip_grp7=<br />filter_rule1=<br />loopback_enable=1<br />hb_server_ip=<br />ipsec_pass=1<br />filter_ip_grp8=<br />filter_rule2=<br />filter_ip_grp9=<br />filter_rule3=<br />expert_mode=0<br />filter_rule4=<br />filter_rule5=<br />filter_ip_grp10=<br />filter_rule6=<br />wl0_mode=ap<br />filter_rule7=<br />wan_gateway=100.237.99.91<br />dhcp_start=10<br />filter_rule8=<br />filter_rule9=<br />pptpd_enable=0<br />wshaper_nopriohostsrc=<br />os_flash_addr=bfc40000<br />wl0_gmode=1<br />dhcp_lease=0<br />wl_wds4_enable=0<br />boardtype=bcm94710dev<br />dnsmasq_enable=1<br />wl_active_add_mac=0<br />wl_gmode=1<br />ping_ip=<br />et1macaddr=00:06:25:EB:C7:6F<br />stats_server=<br />wl_br1_nat=0<br />static_route=<br />d11g_rate=0<br />wl0_wep_last=<br />lan_netmask=255.255.255.0<br />wl0_wds1_enable=0<br />dmz_enable=0<br />wl0_dtim=1<br />wl0_ssid=sveasoft<br />http_username=<br />sh_routestopped=br0 -<br />eth0 -<br />eth2 -<br />wds0.2 -<br />port_trigger=<br />et1mdcport=1<br />filter_web_host10=<br />os_date=Jun 30 2004<br />wl0_wds7_enable=0<br />cron_enable=1<br />http_lanport=80<br />wl_plcphdr=long<br />filter_mac_grp1=<br />wl_macmode=disabled<br />ppp_service=<br />ppp_redialperiod=30<br />filter_mac_grp2=<br />filter_mac_grp3=<br />wan_domain=<br />wan_hwname=<br />wl0_key1=<br />wl_phytype=g<br />filter_mac_grp4=<br />wan_netmask=255.255.255.255<br />lan_lease=86400<br />wl0_key2=<br />wl_lazywds=0<br />pppoe_static_ip=<br />filter_mac_grp5=<br />wl0_key3=<br />filter_mac_grp6=<br />wl0_key4=<br />filter_mac_grp7=<br />wshaper_nopriohostdst=<br />filter_mac_grp8=<br />filter_client0=<br />filter_mac_grp9=<br />filter_maclist=<br />wl_wds10_enable=0<br />pptp_pass=1<br />pptp_get_ip=<br />wl_auth_mode=disabled<br />ppp_demand=0<br />mtu_enable=1<br />ppp_keepalive=0<br />wl0_br1_nat=0<br />sh_interfaces=loc br0<br />loc eth0<br />loc eth2<br />net wds0.2<br />block_activex=0<br />d11g_rts=2347<br />wl0_br1_enable=0<br />remote_mgt_https=0<br />wl_wpa_psk=<br />http_passwd=mywebpass<br />block_wan=1<br />lan_stp=0<br />skip_amd_check=0<br />wl_mode=ap<br />bird_ospf=Please read the BIRD setup instructions at <a href="http://bird.network.cz/bird.html">http://bird.network.cz/bird.html</a><br />wl0_plcphdr=long<br />wl0_rate=0<br />wl0_closed=0<br />wl_wpa_gtk_rekey=3600<br />wl_afterburner_override=-1<br />d11g_rateset=default<br />wl0_macmode=disabled<br />wl0_radioids=BCM2050<br />wl0_phytype=g<br />dr_wan_rx=0<br />wl0_lazywds=0<br />filter_tod_buf1=<br />block_proxy=0<br />filter_tod_buf2=<br />filter_tod_buf3=<br />pptpd_rip=<br />filter_tod_buf4=<br />filter_tod_buf5=<br />http_client_ip=192.168.1.101<br />wl_wds5_enable=0<br />dr_lan_tx=0<br />filter_tod_buf6=<br />apwatchdog_interval=15<br />wl0_antdiv=3<br />filter_tod_buf7=<br />filter_tod10=<br />lan_hwaddr=00:06:25:EB:C7:6E<br />filter_tod_buf8=<br />wan_dns=<br />http_client_mac=00:00:E3:90:E0:83<br />filter_tod_buf9=<br />action_service=<br />wl_dtim=1<br />wl_ssid=sveasoft<br />wl0_wpa_psk=<br />wl0_wds2_enable=0<br />d11g_bcn=100<br />wl0_mac_list=<br />wl_passphrase=<br />daylight_time=1<br />flash_type=AMD 29lv320DB 2Mx16 BotB<br />security_mode=disabled<br />dhcp_wins=wan<br />wl0_wds8_enable=0<br />bcm4712_firmware_version=v1.50.0<br />multicast_pass=1<br />filter_tod_buf10=<br />os_server=<br />pppoe_static=0<br />hb_server_domain=<br />wl_key1=<br />wan_proto=pppoe<br />wl_key2=<br />wl0_unit=0<br />wl_key3=<br />wshaper_noprioportsrc=<br />wl_key4=<br />ddns_cache=<br />wl_hwaddr=<br />aol_block_traffic1=0<br />static_route_name=<br />aol_block_traffic2=0<br />ntp_enable=1<br />wl_active_mac=<br />wl_net_mode=mixed<br />forward_port=<br />wshaper_dev=WAN<br />d11g_frag=2346<br />wl0_wds=<br />filter_mac_grp10=<br />sh_policy=loc net ACCEPT<br />net all DROP info<br />all all REJECT info<br />wl_rate=0<br />ppp_static_ip=<br />telnetd_enable=1<br />block_java=0<br />log_level=0<br />ntp_server=<br />ct_modules=<br />wan_hwaddr=00:06:25:EB:C7:6F<br />lan_ifnames=eth0 eth2 eth3 eth4<br />wl_macmode1=disabled<br />pppoe_ifname=ppp0<br />wl0_mac_deny=<br />wl0_radius_port=1812<br />wl0_auth=0<br />sshd_port=22<br />httpd_enable=1<br />wl0_radius_ipaddr=<br />wshaper_noprioportdst=<br />pppoe_service=<br />wl_country=Japan<br />wl_wds6_enable=0<br />pa0maxpwr=0x48<br />traceroute_ip=<br />ddns_change=<br />remote_management=0<br />wan_ifnames=eth1<br />block_loopback=0<br />wl_rateset=default<br />wl0_wds3_enable=0<br />wl_wep_bit=64<br />ppp_mru=1500<br />wl_radius_key=<br />filter_port_grp1=<br />lan_proto=dhcp<br />os_name=linux<br />lan_ipaddr=192.168.1.1<br />clkfreq=125<br />wl0_wds9_enable=0<br />filter_port_grp2=<br />ddns_passwd_2=<br />filter_port_grp10=<br />filter_port_grp3=<br />dr_wan_tx=0<br />wl_unit=0<br />filter_port_grp4=<br />filter_id=1<br />wl0_phytypes=g<br />firmware_version=Satori-4.0 v2.07.1.7sv<br />filter_port_grp5=<br />wl0_frag=2346<br />d11g_channel=6<br />wl0_wep=off<br />filter_port_grp6=<br />router_disable=0<br />syslogd_enable=0<br />ddns_username=<br />filter_port_grp7=<br />ddns_passwd=<br />pppoe_passwd=mypppoepassword<br />filter_port_grp8=<br />filter_port_grp9=<br />ppp_ac=<br />log_enable=0<br />sdram_config=0x0000<br />filter_web_url10=<br />wl0_country=Japan<br />dmz_ipaddr=0<br />sshd_passwd_auth=0<br />rc_startup=<br />security_mode_last=<br />wl_wds=<br />sshd_enable=0<br />ddns_hostname_2=<br />scratch=a0180000<br />wl0_rateset=default<br />wl0_wep_bit=64<br />pppoe_idletime=5<br />ping_times=<br />wan_primary=1<br />lan_ifname=br0<br />filter_services=$NAME:003:DNS$PROT:003:udp$PORT:005:53:53&lt; &gt;$NAME:004:Ping$<br />PROT:004:icmp$PORT:003:0:0&lt; &gt;$NAME:004:HTTP$PROT:003:tcp$PORT:005:80:80&lt;&amp;nb<br />sp;&gt;$NAME:005:HTTPS$PROT:003:tcp$PORT:007:443:443&lt; &gt;$NAME:003:FTP$PROT:003:<br />tcp$PORT:005:21:21&lt; &gt;$NAME:004:POP3$PROT:003:tcp$PORT:007:110:110&lt; &gt;$N<br />AME:004:IMAP$PROT:003:tcp$PORT:007:143:143&lt; &gt;$NAME:004:SMTP$PROT:003:tcp$PO<br />RT:005:25:25&lt; &gt;$NAME:004:NNTP$PROT:003:tcp$PORT:007:119:119&lt; &gt;$NAME:00<br />6:Telnet$PROT:003:tcp$PORT:005:23:23&lt; &gt;$NAME:004:SNMP$PROT:003:udp$PORT:007<br />:161:161&lt; &gt;$NAME:004:TFTP$PROT:003:udp$PORT:005:69:69&lt; &gt;$NAME:003:IKE$<br />PROT:003:udp$PORT:007:500:500&lt; &gt;<br />wl0_afterburner_override=-1<br />sdram_refresh=0x8040<br />dhcp_domain=wan<br />wl_auth=0<br />wl_wep_last=<br />sdram_ncdl=0x00000000<br />wl_wds1_enable=0<br />resetbutton_enable=1<br />block_cookie=0<br />rc_firewall=<br />wl_frameburst=on<br />wl_wds7_enable=0<br />dhcp_num=10<br />filter_web_url1=<br />wan_ipaddr=100.237.99.120<br />wan_ipaddr_buf=100.237.108.130<br />wl0_passphrase=<br />filter_web_url2=<br />filter_web_url3=<br />wl0_rts=2347<br />filter_web_url4=<br />filter_web_url5=<br />wl_ifname=<br />filter_web_url6=<br />wan_wins=0.0.0.0<br />wl0_wds4_enable=0<br />ntp_mode=auto<br />wl_wep=off<br />filter_web_url7=<br />l2tp_pass=1<br />filter_web_url8=<br />pppoe_username=mypppoeusername<br />filter_web_url9=<br />os_version=3.50.21.10<br />wl_gmode_protection=off<br />sshd_rsa_host_key=<br />wl0_wpa_gtk_rekey=3600<br />mac_clone_enable=0<br />ppp_get_srv=<br />wl_frag=2346<br />wan_mtu=1492<br />wl_wep_gen=<br />wl0_key=1<br />wl0_active_mac=<br />wl_maclist=<br />filter_macmode=deny<br />txant=3<br />console_loglevel=1<br />et0phyaddr=30<br />dnsmasq_options=<br />time_zone=+01 2 2<br />wan_ifname=eth1<br />sshd_authorized_keys=<br />wl_radioids=<br />wan_hostname=Sveasoft<br />sh_zones=net Net Internet<br />loc Local Local Networks<br />dmz DMZ Dmz Zone<br />wl0_radio=1<br />wl_corerev=<br />ppp_mtu=1500<br />zebra_enable=1<br />ddns_interval=60<br />wl_channel=6<br />wl0_bcn=100<br />pptpd_auth=<br />wl_radio=1<br />ppp_static=0<br />filter_tod1=<br />wl0_hwaddr=00:06:25:EB:C7:70<br />filter_tod2=<br />filter_tod3=<br />wl0_wep_gen=<br />filter_tod4=<br />pa0b0=0x170c<br />ddns_passwd_buf=<br />wk_mode=gateway<br />wl0_gmode_protection=off<br />filter_tod5=<br />rc_shutdown=<br />pa0b1=0xfa24<br />wl0_maclist=<br />filter_tod6=<br />pa0b2=0xfe70<br />filter_tod7=<br />wl_wds2_enable=0<br />wl_rts=2347<br />filter_tod8=<br />sdram_init=0x0419<br />filter_tod9=<br />lan_wins=<br />aol_block_traffic=0<br />dhcpd_options=<br />wl_mac_list=<br />lan_hwnames=<br />dl_ram_addr=a0001000<br />wl_wds8_enable=0<br />pppoe_demand=0<br />local_dns=0<br />wl0_radius_key=<br />filter_dport_grp10=<br />ddns_username_buf=<br />wl0_corerev=4<br />wl_key=1<br />wl0_channel=6<br />wl0_wds5_enable=0<br />wl0_wds10_enable=0<br />dr_setting=0<br />upnp_enable=0<br />pptpd_lip=<br />ddns_status=<br />filter_rule10=<br />txpwr=56<br />wl0_auth_mode=disabled<br />wl_closed=0<br />boot_ver=v1.0<br />et1phyaddr=30<br />autofw_port0=<br />boardnum=42<br />def_hwaddr=00:00:00:00:00:00<br />wl_bcn=100<br />wl_wep_buf=<br />filter_dport_grp1=<br />wl_antdiv=-1<br />filter_dport_grp2=</p></blockquote></div><p>Thank you for your help!</p><p>Rhodan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2080">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">s.decken</div>
					<div class="post-datetime">
						13 Sep 2004, 15:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>What&#039;s about the boot_wait status? Will this variable set to &quot;no&quot;?<br />If yes, how can i then flash a new firmware?</p></blockquote></div><p>Yes, you are right. By accicent I reset all my NVRAM variables to a - small - set of defaults. It was good enough to boot OpenWRT in failsave mode.</p><p>Getting there, I could download via wget the original firmware from Linksys and wrote it with </p><div class="codebox"><pre><code>mtd write &lt;firmware name&gt;.trx linux &amp;&amp; reboot</code></pre></div><p>Be aware, that the .trx-file is a copy of the .bin-file, but stripped of the first 32 bytes (see also &quot;How do I reflash / How do I revert back to my previous firmware?&quot; from the OpenWrt FAQ)</p><p>After booting the original firmware the router was in the the same state as it came first out of the box. From there I could start with the ping.asp exploid...</p><p>Greetings,<br />Stefan</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>