<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [gateworks GW2348-4] boot problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p70872">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">toshikikuchi</div>
					<div class="post-datetime">
						14 Jul 2008, 04:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m new to OpenWrt.<br />I flashed &quot;openwrt-avila-zImage&quot; and &quot;open-ixp4xx-squashfs.img&quot;.<br />But the boot stops at the message &quot;Please be patient, while OpenWrt loads ...&quot;<br />Can someone tell what could be wrong?</p><p>RAM: 0x00000000-0x04000000, [0x000298b0-0x03fc1000] available<br />FLASH: 0x50000000 - 0x51000000, 128 blocks of 0x00020000 bytes each.<br />== Executing boot script in 2.500 seconds - enter ^C to abort<br />RedBoot&gt; fis load linux<br />RedBoot&gt; exec<br />Using base address 0x00800000 and length 0x000f85ac<br />Uncompressing Linux.............................................................<br />........ done, booting the kernel.<br />Linux version 2.6.25.1 (slug@builder) (gcc version 4.1.2) #2 Wed May 14 12:00:11<br /> UTC 2008<br />CPU: XScale-IXP42x Family [690541c1] revision 1 (ARMv5TE), cr=000039ff<br />Machine: Gateworks Avila Network Platform<br />Memory policy: ECC disabled, Data cache writeback<br />CPU0: D VIVT undefined 5 cache<br />CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd cons<br />ole=ttyS0,115200 init=/etc/preinit<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 64MB = 64MB total<br />Memory: 62720KB available (1896K code, 173K data, 100K init)<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />net_namespace: 536 bytes<br />NET: Registered protocol family 16<br />IXP4xx: Using 16MiB expansion bus window size<br />PCI: IXP4xx is host<br />PCI: IXP4xx Using direct access for memory space<br />PCI: bus0: Fast back to back transfers enabled<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />IXP4xx Queue Manager initialized.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; ï¿½Â© 2001-2006 Red Hat, Inc.<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale<br />console [ttyS0] enabled<br />serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale<br />IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000<br />5 RedBoot partitions found on MTD device IXP4XX-Flash.0<br />Creating 5 MTD partitions on &quot;IXP4XX-Flash.0&quot;:<br />0x00000000-0x00080000 : &quot;RedBoot&quot;<br />0x00080000-0x00180000 : &quot;linux&quot;<br />0x00180000-0x00fe0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2A0000, len=D40000 <br />0x002a0000-0x00fe0000 : &quot;rootfs_data&quot;<br />0x00fe0000-0x00fff000 : &quot;FIS directory&quot;<br />0x00fff000-0x01000000 : &quot;RedBoot config&quot;<br />i2c /dev entries driver<br />ds1672 0-0068: chip found, driver version 0.4<br />ds1672 0-0068: rtc core: registered ds1672 as rtc0<br />i2c-gpio i2c-gpio.0: using pins 7 (SDA) and 6 (SCL)<br />ad7418 0-0028: ad7418 chip found<br />ad7418 0-0028: configuring for mode 1<br />IXP4xx Watchdog Timer: heartbeat 60 sec<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP westwood registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />XScale DSP coprocessor detected.<br />eth0: MII PHY 0 on NPE-B<br />eth1: MII PHY 1 on NPE-C<br />Registered led device: user<br />ds1672 0-0068: setting system clock to 2058-02-25 08:59:03 UTC (2781853143)<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing init memory: 100K<br />Please be patient, while OpenWrt loads ...<br />----------<br />This is how I flashed the 2 files:<br />-----------<br />RedBoot&gt; fis init<br />About to initialize [format] FLASH image system - continue (y/n)? y<br />*** Initialize FLASH Image System<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-avila-zImage<br />Using default protocol (TFTP)<br />__udp_sendto: Can&#039;t find address of server<br />Can&#039;t load &#039;openwrt-avila-zImage&#039;: some sort of network error<br />RedBoot&gt; help ip_address<br />Set/change IP addresses<br />&nbsp; &nbsp;ip_address [-l &lt;local_ip_address&gt;[/&lt;mask_len&gt;]] [-h &lt;server_address&gt;]<br />RedBoot&gt; ip_address -l 192.168.4.2/24 -h 192.168.4.1<br />IP: 192.168.4.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.4.1<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-avila-zImage<br />Using default protocol (TFTP)<br />-<br />Raw file loaded 0x00800000-0x008f85ab, assumed entry at 0x00800000<br />RedBoot&gt; fis create linux<br />... Erase from 0x50080000-0x50180000: ........<br />... Program from 0x00800000-0x008f85ac at 0x50080000: ........<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; fis free<br />&nbsp; 0x50180000 .. 0x50FE0000<br />RedBoot&gt; load -r -v -b 0x00800000 openwrt-ixp4xx-squashfs.img<br />Using default protocol (TFTP)<br />\<br />Raw file loaded 0x00800000-0x0093ffff, assumed entry at 0x00800000<br />RedBoot&gt; fis create -l 0xe60000 rootfs<br />... Erase from 0x50180000-0x50fe0000: ..........................................<br />.........................................................................<br />... Program from 0x00800000-0x00940000 at 0x50180000: ..........<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; fconfig&nbsp; &nbsp; &nbsp; &nbsp;<br />Run script at boot: true<br />Boot script: <br />.. fis load linux<br />.. exec<br />Enter script, terminate with empty line<br />&gt;&gt; fis load linux<br />&gt;&gt; exec<br />&gt;&gt; <br />Boot script timeout (100ms resolution): 25<br />Use BOOTP for network configuration: false<br />Gateway IP address: <br />Local IP address: 192.168.3.2<br />Local IP address mask: 255.255.255.0<br />Default server IP address: 192.168.3.1<br />Console baud rate: 115200<br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false<br />Default network device: npe_eth0<br />Update RedBoot non-volatile configuration - continue (y/n)? y<br />... Unlock from 0x50fe0000-0x51000000: .<br />... Erase from 0x50fe0000-0x51000000: .<br />... Program from 0x03fe0000-0x04000000 at 0x50fe0000: .<br />... Lock from 0x50fe0000-0x51000000: .<br />RedBoot&gt; reset</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70878">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">toshikikuchi</div>
					<div class="post-datetime">
						14 Jul 2008, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>OK. I stopped using the snapshot image, and built an image myself from subversion. Then it seems booting fine.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>