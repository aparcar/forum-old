<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> releasing PBX (supporting Asterisk) interface for LuCI</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Apr 2018 and 30 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 6</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=32392&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=32392&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=32392&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p145801">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						14 Oct 2011, 08:56					</div>
				</div>
				<div class="post-content content">
					<p>This is an announcement about the availability of a PBX interface for LuCI. The package name is luci-app-pbx.</p><p>Currently, the interface supports Asterisk, and hopefully will support Freeswitch in the future. What it allows you to do is to configure multiple Google Talk/Voice accounts, and SIP accounts (like Sipgate, any of the Betamax services which have SIP settings), and share them among multiple SIP devices (smartphones, ATA boxes, etc). The interface also has support for:</p><p>- remote usage (for remote SIP devices)<br />- call-through for specified numbers<br />- creating QoS configuration<br />- blacklisting of numbers</p><p>EDIT: Note that the voicemail package described below is currently not operational due to a missing app_record.so module for Asterisk. When it gets added, the package will be usable once again.</p><p>Through the installation of an additional package, luci-app-pbx-voicemail, the interface also gains voicemail to email support.</p><p>The package is currently available in the snapshot builds of OpenWRT here:</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/">http://downloads.openwrt.org/snapshots/trunk/</a></p><p>Please help me test this package so it can make its way into the stable build as quickly as possible! Thanks everyone!</p>											<p class="post-edited">(Last edited by <strong>dancho</strong> on 30 Nov 2011, 16:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145832">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						14 Oct 2011, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>Why not submit the package to OpenWRT?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145833">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						14 Oct 2011, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>He did. Its merely an additional announcement.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145878">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ammaree</div>
					<div class="post-datetime">
						15 Oct 2011, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>@dancho</p><p>downloaded the source, unpacked in opewrt/trunk/package/luci-app-pbx but I am stuck on the mkaefile bit.<br />The make package/index and numerous variations thereof is not working for me. Please note, I an NOT a developer and just getting started doing my own builds.</p><p>I have also tried installing the ipk but consistently get the following erro:<br />&quot;Collected errors:<br /> * pkg_hash_fetch_best_installation_candidate: Packages for luci-app-pbx found, but incompatible with the architectures configured<br /> * opkg_install_cmd: Cannot install package luci-app-pbx.</p><p>I am using and ar71xx based ubiquiti routerstation pro.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145887">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						15 Oct 2011, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>@ammaree</p><p>You&#039;re right, that package was created with a particular hardware target. I have replaced the target with noarch, repackaged, and verified that it installs. You can now grab the ipk and install it!</p><p>As for why you can&#039;t get the package to *build*, I am not sure this is the right place to be addressing that unless other people also have a problem! There are many many more things that can go wrong with the build process!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146126">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nikescar</div>
					<div class="post-datetime">
						18 Oct 2011, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>I tested your application. and I also failed to compile. so I just installed your binary to my dlink dir-825.</p><p>before install luci-app-pbx, I install all of asterisk18 derivatives.</p><p>and after that configured from luci. but I tried to connect to server, it doesn&#039;t respond.</p><p>I am not sure what the problem exact it. but &#039;netstat -nlp&#039; doesn&#039;t show asterisk port. even after I setup up the port number from luci.</p><p>but I have some report of log here.</p><p>/var/log/asterisk/messages</p><div class="quotebox"><blockquote><p>[Oct 18 17:51:49] ERROR[2722] config.c: The file &#039;jabber_users.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:51:49] ERROR[2722] res_jabber.c: JABBER: Failed to load config.<br />[Oct 18 17:51:50] ERROR[2722] config.c: The file &#039;sip_registrations.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:51:50] ERROR[2722] chan_sip.c: Contents of sip.conf are invalid and cannot be parsed<br />[Oct 18 17:51:50] ERROR[2722] config.c: The file &#039;extensions_incoming.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:52:19] ERROR[3253] config.c: The file &#039;jabber_users.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:52:19] ERROR[3253] res_jabber.c: JABBER: Failed to load config.<br />[Oct 18 17:52:19] ERROR[3253] config.c: The file &#039;sip_registrations.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:52:19] ERROR[3253] chan_sip.c: Contents of sip.conf are invalid and cannot be parsed<br />[Oct 18 17:52:19] ERROR[3253] config.c: The file &#039;extensions_incoming.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:52:47] ERROR[3498] config.c: The file &#039;sip_registrations.conf&#039; was listed as a #include but it does not exist.<br />[Oct 18 17:52:47] ERROR[3498] chan_sip.c: Contents of sip.conf are invalid and cannot be parsed<br />[Oct 18 17:52:47] ERROR[3498] config.c: The file &#039;extensions_incoming.conf&#039; was listed as a #include but it does not exist.</p></blockquote></div><p>root@OpenWrt:/etc/asterisk# ls -al /etc/asterisk<br /></p><div class="quotebox"><blockquote><p>drwxr-xr-x&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4096 Oct 18 17:52 .<br />drwxr-xr-x&nbsp; &nbsp;26 postgres postgres&nbsp; &nbsp; &nbsp;4096 Oct 14 05:05 ..<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 429 Oct 18 15:13 asterisk.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 742 Oct 18 17:52 extensions.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 112 Oct 18 15:13 extensions_blacklist.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 131 Oct 18 15:13 extensions_callthrough.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 585 Oct 18 17:52 extensions_incoming_gtalk.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1680 Oct 18 17:52 extensions_user.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 Oct 18 15:13 features.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 153 Oct 18 15:13 gtalk.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; 25247 Oct 18 15:13 indications.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;55 Oct 18 15:13 jabber.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 189 Oct 18 17:52 jabber_users.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 102 Oct 18 15:13 logger.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;57 Oct 18 15:13 manager.conf<br />drwxr-xr-x&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4096 Oct 18 17:52 manager.d<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1709 Oct 18 15:13 modules.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;91 Oct 18 17:51 rtp.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 597 Oct 18 17:51 sip.conf<br />-rw-r--r--&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp;root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 400 Oct 18 17:52 sip_users.conf</p></blockquote></div><p>Thanks for your work. It would gave more power to openwrt. I will try to find workaround myself.</p>											<p class="post-edited">(Last edited by <strong>nikescar</strong> on 18 Oct 2011, 21:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146136">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						18 Oct 2011, 22:29					</div>
				</div>
				<div class="post-content content">
					<p>@nikescar, thanks for your report! I know why this is happening, and I&#039;ll address it as soon as possible. It looks as though Asterisk *requires* files which are mentioned in an #include statement to be *present*, but some files are not created if you don&#039;t have certain sections of the PBX interface filled in. In your case, you have no Google account configured (hence the missing jabber_users.conf), and no SIP accounts enabled for Incoming Calls (hence the missing sip_registrations).</p><p>This should be very easy to fix on my end, but in the meanwhile simply enable your SIP account for incoming calls, and put some bogus Google account in there (heh heh) so that the PBX interface generates those files. With the next update to the package, these requirement will go away.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146152">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						19 Oct 2011, 06:22					</div>
				</div>
				<div class="post-content content">
					<p>OK, I&#039;ve fixed the issue reported by nikescar, but I&#039;ve kept the version the same. Please re-download the package or source I posted above.</p><p>Cheers!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146157">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nikescar</div>
					<div class="post-datetime">
						19 Oct 2011, 10:01					</div>
				</div>
				<div class="post-content content">
					<p>WOW, everything went well with your changed binary. thank you very much.</p><p>before when there are error I could not see sip menu on &#039;asterisk command line&#039;.</p><p>after setup rightly configured binary, it showed sip menu.</p><p>thank you again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146316">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">eBoy</div>
					<div class="post-datetime">
						21 Oct 2011, 11:55					</div>
				</div>
				<div class="post-content content">
					<p>Is a x86 package fpr kamikaze or backfire available? <br />And will it work with multiple SIP Accounts (for example 2* Sipgate)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146344">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						21 Oct 2011, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi eBoy,</p><p>Well the package I&#039;ve created (the file with the ipk extension) is an architecture independent package, since there is no compiled code in the interface - it&#039;s all Lua. So, install it on Backfire and all should be well. I am not sure about Kamikaze, because LuCI is an updated version in Backfire, and I rely on some of its newer features. My suspicion is that it won&#039;t work on anything older than Backfire.</p><p>Cheers,<br />Iordan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146415">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">eBoy</div>
					<div class="post-datetime">
						22 Oct 2011, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>Doesn&#039;t work for me :-( <br />Have problems with more than one sip accounts! I tested it with 3 sipgate accounts and all calls received via account 1 but all Sipgate accounts are registered. Same issue than “asterisk gui“. Could you please fix the gateway register problem (same src and dst ip with different accounts)?</p>											<p class="post-edited">(Last edited by <strong>eBoy</strong> on 22 Oct 2011, 22:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146698">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						26 Oct 2011, 08:14					</div>
				</div>
				<div class="post-content content">
					<p>@eBoy this really sounds like an Asterisk + Sipgate issue to me. This PBX inteface is &quot;pure Asterisk&quot; underneath - it doesn&#039;t add magic, it just cooks a configuration.</p><p>If I manage to create a couple of Sipgate accounts, I&#039;ll test your setup and if I confirm it, I guess a bug-report to Asterisk would be in order.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146702">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">eBoy</div>
					<div class="post-datetime">
						26 Oct 2011, 08:31					</div>
				</div>
				<div class="post-content content">
					<p>No, it&#039;s a problem how a account will be registered to the provider. It works fine if I use Asterisk without GUI (old and no more existing OpenWRT Kamikaze) or Asterisk/ Freeswitch with FusionPBX (but have some dialplan problems, Voyage Linux).<br />I think the register string/ option have to be modified?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146709">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nikescar</div>
					<div class="post-datetime">
						26 Oct 2011, 10:16					</div>
				</div>
				<div class="post-content content">
					<p>there would be various issues with sip registering or other usage in asterisk. I think &quot;eBoy&quot; is better stick to console configuration.</p><p>because this luci-pbx has basic own configuration made by luci input data that overwriting existing astierisk configuration. </p><p>or you could look for big asterisk configuration framework such as freepbx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146721">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						26 Oct 2011, 13:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dancho wrote:</cite><blockquote><p>Here are links to both a ready-made ipk (which is architecture-independent since there are no binaries), and the &quot;source&quot;, which you can unpack into backfire/package/, and then run &quot;make package/index&quot;. The app will show up under LuCI/Applications when you run &quot;make menuconfig&quot; next time.</p><p><a href="http://dancho.no-ip.com/pbx/luci-app-pbx_0.11.ipk">http://dancho.no-ip.com/pbx/luci-app-pbx_0.11.ipk</a><br /><a href="http://dancho.no-ip.com/pbx/luci-app-pbx-0.11.tar.gz">http://dancho.no-ip.com/pbx/luci-app-pbx-0.11.tar.gz</a></p><p>NOTE: I&#039;ve edited the post to indicate a new version is available. In 0.11, there are only slight usability changes, no new features. Instead of empty boxes, in pbx-calls, one now sees a message about what the PBX is doing when no custom values are entered into the boxes (e.g. stuff like Dials all numbers, Rings all users, and Uses all providers). Also I&#039;ve dealt with a situation where the OpenWRT box has no static IP address (as reported by Jow).</p></blockquote></div><p>When <em>luci-app-pbx-0.11.tar.gz</em> file is extracted, its <strong>luci-app-pbx/Makefile</strong> file still has <strong>PKG_RELEASE:=0.10</strong>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146749">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						26 Oct 2011, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>@eBoy, this is what I found as the first result of my search &quot;asterisk two sipgate accounts&quot;. I believe it&#039;s relevant because I know the way my PBX cooks the Asterisk configuration. There is a suggested &quot;workaround&quot; near the end of the thread which seems to work for the original poster. The trick in this case seems to be to have both accounts configured to put incoming calls in the *same context*, and then use two different extensions within that &quot;incoming context&quot; to distinguish calls made to each of the accounts. The way my PBX cooks the configuration is different, makes more sense, and is what the original poster in the thread did, which is to put incoming calls in contexts unique to each account. This doesn&#039;t work for Asterisk+Sipgate for whatever reason, and in my opinion, after confirming it, one *should* report it as a bug to Digium rather than bear the consequence of requiring the workaround for the rest of existence.</p><p>@mazilo, thanks for reporting that! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146750">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						26 Oct 2011, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>@nikescar, if you are still using my PBX interface, how is it working out so far?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146807">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">nikescar</div>
					<div class="post-datetime">
						27 Oct 2011, 12:26					</div>
				</div>
				<div class="post-content content">
					<p>@dancho</p><p>Registering and others are work fine. though I cannot connect when i am outside from wan. When both sip phone is outside of network. registering and signaling(phone rining) are fine. but voice is not sent. I am lookint rtp signal handling through rtp debugging and sip debugging. but I can&#039;t find any clue. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />when I find the answer, I will report you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146841">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						27 Oct 2011, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>@nikescar</p><p>It will be of particular interest whether the RTP firewall rules that the PBX inserts automatically are (1) in place, and if so (2) functioning. Also, it will be of interest whether this PBX is running on a device which is directly attached to the Internet or not. If not, you&#039;d have to put the necessary NAT rules on the router which is actually attached to the Net. </p><p>If this is indeed your router to the Net, head over to the firewall configuration of OpenWRT, and look for the PBX-SIP and PBX-RTP rules. If they are there, then, get into asterisk with &quot;asterisk -r&quot;, and use the &quot;rtp set debug on&quot; command and make a call. You should see packets flying across the screen during a conversation. If there are no packets, then the firewall rules are likely not functioning. If there are packets, then they may be going to the &quot;wrong place&quot;! Look at the IP addresses, and tell us what they are, and perhaps we can have a clue as to why this is happening.</p><p>Oh, and just a side-note about codecs. This PBX uses only ulaw for simplicity. I think it may be a good idea to also allow alaw, but I can&#039;t think of a service which doesn&#039;t support both. In any case, conversion between the two is computationally &quot;free&quot;, so may as well.</p><p>Cheers,<br />Iordan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149245">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">tekoholic</div>
					<div class="post-datetime">
						22 Nov 2011, 06:42					</div>
				</div>
				<div class="post-content content">
					<p>I would like to thank you for this GUI, also!</p><p>Just a coupla&#039; issues, from my limited use of it:</p><p>1.&nbsp; I, for some reason, cannot even register from outside the network.&nbsp; In my case, the router upon which it&#039;s installed directly takes a public IP via PPPoE from my DSL modem, no ports are blocked in- or outgoing, external reg is allowed in GUI, and firewall rules are present.</p><p>2.&nbsp; Might I ask a simple feature request?&nbsp; How about making IAX2 user configs available from the GUI as well as just SIP?&nbsp; Maybe give a drop-down or radio-button for each user, that would present the option?&nbsp; I&#039;ve been under the impression, for quite some time, that IAX2 is quite superior to SIP anyhow, for NAT traversal and many other reasons, and it&#039;d be nice to have it as an option (I&#039;m working on learning the CLI end of it)...</p><p>I&#039;ll attempt to determine, as suggested above, if my firewall rules are operating as expected, and report back on that info, as soon as I&#039;m able.</p><p>edit:&nbsp; Results so far:&nbsp; I called into my asterisk from one internally connected user to another, each routed to different google voice #&#039;s.&nbsp; This resulted in an error:&nbsp; &quot;[Jan 30 03:39:12] ERROR[4636]: pbx.c:3522 ast_func_read: Function CUT not registered&quot;, and an error in my ear about number not in service.</p><p>When attempting to register from the WAN iface, there&#039;s nothing shown under the asterisk CLI</p>											<p class="post-edited">(Last edited by <strong>tekoholic</strong> on 22 Nov 2011, 07:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149248">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						22 Nov 2011, 07:45					</div>
				</div>
				<div class="post-content content">
					<p>@tekoholic,</p><p>Thanks for the report. For the CUT function error, the reason this is happening is that func_cut.so is either not included in /etc/asterisk/modules.conf (please check that), or it is not present in&nbsp; /usr/lib/asterisk/modules/func_cut.so (please check that as well).</p><p>Thanks!<br />Iordan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149289">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">tekoholic</div>
					<div class="post-datetime">
						22 Nov 2011, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>It was not listed or located in either of those locations.&nbsp; What got left out of the install, or what must I install in addition, to fix this?&nbsp; Or, is this even relevant to the bigger issues, or consequential in any way?</p><div class="quotebox"><cite>dancho wrote:</cite><blockquote><p>@tekoholic,</p><p>Thanks for the report. For the CUT function error, the reason this is happening is that func_cut.so is either not included in /etc/asterisk/modules.conf (please check that), or it is not present in&nbsp; /usr/lib/asterisk/modules/func_cut.so (please check that as well).</p><p>Thanks!<br />Iordan</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>tekoholic</strong> on 22 Nov 2011, 16:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149310">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">dancho</div>
					<div class="post-datetime">
						22 Nov 2011, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to sort out the problems one at a time. Did you build our firmware image, or install a pre-made one? Which asterisk packages do you have installed?</p><p>opkg list_installed | grep asterisk</p><p>Cheers!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p149318">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">tekoholic</div>
					<div class="post-datetime">
						22 Nov 2011, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>OK, here&#039;s the setup:</p><p>Attitude Adjustment (r28475) on a Netgear WNDR3700v2, installed from model-specific image, Luci and a few other packages installed per instructions.</p><p># opkg list_installed | grep asterisk<br />asterisk18 - 1.8.7.1-1<br />asterisk18-app-sms - 1.8.7.1-1<br />asterisk18-chan-gtalk - 1.8.7.1-1<br />asterisk18-chan-iax2 - 1.8.7.1-1<br />asterisk18-codec-alaw - 1.8.7.1-1<br />asterisk18-codec-g722 - 1.8.7.1-1<br />asterisk18-codec-g726 - 1.8.7.1-1<br />asterisk18-res-crypto - 1.8.7.1-1<br />#</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 6</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=32392&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=32392&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=32392&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>