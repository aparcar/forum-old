<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DNS Bypass Region Blocks</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291678">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">b8dm0j0</div>
					<div class="post-datetime">
						13 Sep 2015, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>im fairly new to openwrt. have done much research but still having trouble wraping my head around this. i started using a smart dns service to get around region-blocks for hulu/netflix last year. recently my isp has started dns hijacking, to circumvent this, i use iptables to make sure all traffic on ports 53/54 goes to my smart dns. my question is simply this:<br />why does netflix/hulu not work if i dont put my dns numbers under [Network-&gt;DHCP and DNS-&gt;DNS Forwardings]</p><p>my understanding is that since i already have my dns numbers on the [Network-&gt;Interface-&gt;WAN-&gt;Advanced Settings-&gt;Custom DNS] with &quot;DNS servers advertised by peer&quot; unchecked, that is should work no?.</p><p>is this right?</p><p>EDIT: To be clear, the information i need to enter in DNS forwardings look like this:<br />/#/103.241.150.100<br />/#/54.251.190.247</p>											<p class="post-edited">(Last edited by <strong>b8dm0j0</strong> on 14 Sep 2015, 00:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291700">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Sep 2015, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>Changing the DNS you use will only give you the correct IP address for the netflix/hulu servers, so you can always reach those servers, despite your IPS&#039;s attempts to hijack the DNS service. However, the servers at netflix/hulu can still block you, based on your IP address and thus the country where you reside. You need to use a VPN service so your connections appear to the destination server as if they where initiated from an &quot;allowed&quot; country.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291705">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">b8dm0j0</div>
					<div class="post-datetime">
						14 Sep 2015, 00:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>Changing the DNS you use will only give you the correct IP address for the netflix/hulu servers, so you can always reach those servers, despite your IPS&#039;s attempts to hijack the DNS service. However, the servers at netflix/hulu can still block you, based on your IP address and thus the country where you reside. You need to use a VPN service so your connections appear to the destination server as if they where initiated from an &quot;allowed&quot; country.</p></blockquote></div><p>eduperez, thank you for your response, however your information is slightly outdated. Bypassing region blocks have come a long way since the old days where only vpns could solve the issue. Today we have &quot;Smart&quot; DNS services which achieve the same goal without the speed penalty of using a VPN, you can read more here:<br /><a href="http://www.getflix.com.au/">http://www.getflix.com.au/</a><br /><a href="https://www.smartdnsproxy.com/">https://www.smartdnsproxy.com/</a><br /><a href="https://www.unlocator.com/">https://www.unlocator.com/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334380">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">blackantt</div>
					<div class="post-datetime">
						13 Aug 2016, 22:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>b8dm0j0 wrote:</cite><blockquote><p>im fairly new to openwrt. have done much research but still having trouble wraping my head around this. i started using a smart dns service to get around region-blocks for hulu/netflix last year. recently my isp has started dns hijacking, to circumvent this, i use iptables to make sure all traffic on ports 53/54 goes to my smart dns. my question is simply this:<br />why does netflix/hulu not work if i dont put my dns numbers under [Network-&gt;DHCP and DNS-&gt;DNS Forwardings]</p><p>my understanding is that since i already have my dns numbers on the [Network-&gt;Interface-&gt;WAN-&gt;Advanced Settings-&gt;Custom DNS] with &quot;DNS servers advertised by peer&quot; unchecked, that is should work no?.</p><p>is this right?</p><p>EDIT: To be clear, the information i need to enter in DNS forwardings look like this:<br />/#/103.241.150.100<br />/#/54.251.190.247</p></blockquote></div><p>&nbsp; &nbsp;I was confused too.&nbsp; I pust iptables-rules into my firewall like this, &#039;iptables -t nat -A PREROUTING -i br-lan -p tcp --dport 53 -j DNAT --to x.x.x.x&#039;,&nbsp; but it&#039;s useless. How do you do it for netflix now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334446">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">b8dm0j0</div>
					<div class="post-datetime">
						14 Aug 2016, 12:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>blackantt wrote:</cite><blockquote><div class="quotebox"><cite>b8dm0j0 wrote:</cite><blockquote><p>im fairly new to openwrt. have done much research but still having trouble wraping my head around this. i started using a smart dns service to get around region-blocks for hulu/netflix last year. recently my isp has started dns hijacking, to circumvent this, i use iptables to make sure all traffic on ports 53/54 goes to my smart dns. my question is simply this:<br />why does netflix/hulu not work if i dont put my dns numbers under [Network-&gt;DHCP and DNS-&gt;DNS Forwardings]</p><p>my understanding is that since i already have my dns numbers on the [Network-&gt;Interface-&gt;WAN-&gt;Advanced Settings-&gt;Custom DNS] with &quot;DNS servers advertised by peer&quot; unchecked, that is should work no?.</p><p>is this right?</p><p>EDIT: To be clear, the information i need to enter in DNS forwardings look like this:<br />/#/103.241.150.100<br />/#/54.251.190.247</p></blockquote></div><p>&nbsp; &nbsp;I was confused too.&nbsp; I pust iptables-rules into my firewall like this, &#039;iptables -t nat -A PREROUTING -i br-lan -p tcp --dport 53 -j DNAT --to x.x.x.x&#039;,&nbsp; but it&#039;s useless. How do you do it for netflix now?</p></blockquote></div><br /><br /><br /><p>this was a pretty long time ago and I have since stopped using OpenWRT (moved on to pfsense) but if I remember correctly, the problem I was having was because IPv6 was enabled and because of that IPv4 iptable rules created were not enough, the easiest way to get it working is disable IPv6 so that everything on your network is forced to use the IPv4 iptable rules you create. These were the rules I used, which covers both TCP and UDP and ports 53 and 54</p><p>103.241.150.100 was my Primary DNS and 54.251.190.247 was my Secondary DNS</p><p>iptables -t nat -A PREROUTING -i br0 -p udp --dport 53 -j DNAT --to 103.241.150.100:53 <br />iptables -t nat -A PREROUTING -i br0 -p udp --dport 53 -j DNAT --to 54.251.190.247:53<br />iptables -t nat -A PREROUTING -i br0 -p tcp --dport 53 -j DNAT --to 103.241.150.100:53<br />iptables -t nat -A PREROUTING -i br0 -p tcp --dport 53 -j DNAT --to 54.251.190.247:53</p><p>iptables -t nat -A PREROUTING -i br0 -p udp --dport 54 -j DNAT --to 103.241.150.100:53<br />iptables -t nat -A PREROUTING -i br0 -p udp --dport 54 -j DNAT --to 54.251.190.247:53<br />iptables -t nat -A PREROUTING -i br0 -p tcp --dport 54 -j DNAT --to 103.241.150.100:53<br />iptables -t nat -A PREROUTING -i br0 -p tcp --dport 54 -j DNAT --to 54.251.190.247:53</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334459">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						14 Aug 2016, 16:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>Changing the DNS you use will only give you the correct IP address for the netflix/hulu servers, so you can always reach those servers, &lt;snip&gt;<br />You need to use a VPN service so your connections appear to the destination server as if they where initiated from an &quot;allowed&quot; country.</p></blockquote></div><p>Partially correct.</p><p>The services listed by the OPer are DNSes with A records to the service&#039;s <strong>proxy</strong> servers, thus still a tunnel is employed.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>