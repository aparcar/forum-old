<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> No free space problem with 8.09_RC1 &amp; ASUS 500W</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78354">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bar4mi</div>
					<div class="post-datetime">
						18 Dec 2008, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>I installed Kamikaze 8.09 on ASUS 500W. </p><p>Today I tried to install some packages on it. </p><p>But it seems to have no free space. I received below error message</p><p>How to install packages on it?</p><div class="codebox"><pre><code>root@HKTOP:/tmp/opkg-lists# opkg update
Downloading http://downloads.x-wrt.org/xwrt/kamikaze/snapshots/brcm-2.4/packages/Packages
Connecting to downloads.x-wrt.org (88.198.39.176:80)
Packages             100% |*******************************|   641k 00:00:00 ETA
Updated list of available packages in /var/opkg-lists/X-Wrt
root@HKTOP:/tmp/opkg-lists# opkg upgrade
Upgrading base-files-brcm-2.4 on root from 13-r13144 to 13-r13670...
Upgrading busybox on root from 1.11.2-1 to 1.11.3-3...
Upgrading dnsmasq on root from 2.45-1 to 2.46-1...
Upgrading iptables on root from 1.3.8-3 to 1.3.8-4...
Upgrading iptables-mod-conntrack on root from 1.3.8-3 to 1.3.8-4...
Upgrading iptables-mod-nat on root from 1.3.8-3 to 1.3.8-4...
Upgrading libopenssl on root from 0.9.8i-1 to 0.9.8i-3...
Upgrading libuci on root from 0.6.2-1 to 0.6.4-1...
Upgrading opkg on root from 4564-1 to 4564-2...
Upgrading uci on root from 0.6.2-1 to 0.6.4-1...
Upgrading webif on root from 0.3-4579 to 0.3-4629...
Collected errors:
 * Only have 0 available blocks on filesystem /, pkg base-files-brcm-2.4 needs 203
 * Only have 0 available blocks on filesystem /, pkg busybox needs 582
 * Only have 0 available blocks on filesystem /, pkg dnsmasq needs 185
 * Only have 0 available blocks on filesystem /, pkg iptables needs 127
 * Only have 0 available blocks on filesystem /, pkg iptables-mod-conntrack needs 21
 * Only have 0 available blocks on filesystem /, pkg iptables-mod-nat needs 32
 * Only have 0 available blocks on filesystem /, pkg libopenssl needs 1270
 * Only have 0 available blocks on filesystem /, pkg libuci needs 41
 * Only have 0 available blocks on filesystem /, pkg opkg needs 190
 * Only have 0 available blocks on filesystem /, pkg uci needs 38
 * Only have 0 available blocks on filesystem /, pkg webif needs 596</code></pre></div><p>My file system status is below. <br /></p><div class="codebox"><pre><code>root@HKTOP:/tmp/opkg-lists# df -h
Filesystem                Size      Used Available Use% Mounted on
rootfs                    1.4M      1.4M         0 100% /
/dev/root                 1.4M      1.4M         0 100% /rom
tmpfs                    14.9M    708.0k     14.2M   5% /tmp
/dev/mtdblock/4           5.8M      1.8M      4.0M  31% /jffs
mini_fo:/jffs             1.4M      1.4M         0 100% /</code></pre></div><p>My mounting information is below. <br /></p><div class="codebox"><pre><code>root@HKTOP:/tmp/opkg-lists# mount 
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro)
none on /dev type devfs (rw)
proc on /proc type proc (rw)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev)
devpts on /dev/pts type devpts (rw)
/dev/mtdblock/4 on /jffs type jffs2 (rw)
mini_fo:/jffs on / type mini_fo (rw)</code></pre></div><p>My dmesg <br /></p><div class="codebox"><pre><code>root@HKTOP:/tmp/opkg-lists# dmesg
CPU revision is: 00029006
Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Primary data cache 16kB, 2-way, linesize 16 bytes.
Linux version 2.4.35.4 (travis@localhost.localdomain) (gcc version 3.4.6 (OpenWrt-2.0)) #3 Sun Nov 9 07:27:48 CST 2008
Setting the PFC to its default value
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
On node 0 totalpages: 8192
zone(0): 8192 pages.
zone(1): 0 pages.
zone(2): 0 pages.
Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200
CPU: BCM4704 rev 9 at 264 MHz
Using 132.000 MHz high precision timer.
Calibrating delay loop... 263.78 BogoMIPS
Memory: 30472k/32768k available (1425k kernel code, 2296k reserved, 96k data, 84k init, 0k highmem)
Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)
Inode cache hash table entries: 2048 (order: 2, 16384 bytes)
Mount cache hash table entries: 512 (order: 0, 4096 bytes)
Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)
Page-cache hash table entries: 8192 (order: 3, 32768 bytes)
Checking for &#039;wait&#039; instruction...  unavailable.
POSIX conformance testing by UNIFIX
PCI: Initializing host
PCI: Fixing up bus 0
PCI: Fixing up bridge
PCI: Setting latency timer of device 01:00.0 to 64
PCI: Fixing up bus 1
Linux NET4.0 for Linux 2.4
Based upon Swansea University Computer Society NET3.039
Initializing RT netlink socket
Starting kswapd
Registering mini_fo version $Id$
devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.
squashfs: version 3.0 (2006/03/15) Phillip Lougher
pty: 256 Unix98 ptys configured
Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled
ttyS00 at 0xb8000300 (irq = 3) is a 16550A
ttyS01 at 0xb8000400 (irq = 3) is a 16550A
b44.c:v0.93 (Mar, 2004)
PCI: Setting latency timer of device 00:01.0 to 64
eth0: Broadcom 47xx 10/100BaseT Ethernet 00:22:15:xx:xx:xx
PCI: Setting latency timer of device 00:02.0 to 64
eth1: Broadcom 47xx 10/100BaseT Ethernet 00:22:15:xx:xx:xx
Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0
Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0
 Amd/Fujitsu Extended Query Table v1.3 at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling fast programming due to code brokenness.
Flash device: 0x800000 at 0x1c000000
bootloader size: 262144
Physically mapped flash: Filesystem type: squashfs, size=0x16404e
Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:
0x00000000-0x00040000 : &quot;cfe&quot;
0x00040000-0x007f0000 : &quot;linux&quot;
0x000bb000-0x00220000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x007f0000-0x00800000 : &quot;nvram&quot;
0x00220000-0x007f0000 : &quot;rootfs_data&quot;
Initializing Cryptographic API
NET4: Linux TCP/IP 1.0 for NET4.0
IP Protocols: ICMP, UDP, TCP, IGMP
IP: routing cache hash table of 512 buckets, 4Kbytes
TCP: Hash tables configured (established 2048 bind 4096)
NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.
NET4: Ethernet Bridge 008 for NET4.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 84k freed
Algorithmics/MIPS FPU Emulator v1.5
diag: Detected &#039;ASUS WL-500W&#039;
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
roboswitch: Probing device eth0: found!
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
jffs2.bbc: SIZE compression mode activated.
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: port 1(eth0) entering forwarding state
br-lan: topology change detected, propagating
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
PCI: Setting latency timer of device 01:02.0 to 64
PCI: Enabling device 01:02.0 (0004 -&gt; 0006)
PCI/DMA
wl0: wlc_attach: failed with err 13
wl%d: 4.150.10.5 driver failed with code 13
unregister_netdevice: device wl%d/801f9620 never was registered
Memory leak of bytes -2323
PCI/DMA
wl0: wlc_attach: chiprev 1 coreunit 0 corerev 11 cccap 0x864000d maccap 0x0 band 2.4G, phy_type 4 phy_rev 1 ana_rev 5
wl0: Broadcom BCM4329 802.11 Wireless Controller 4.150.10.5
CSLIP: code copyright 1989 Regents of the University of California
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2002 Netfilter core team
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating
ip_conntrack version 2.1 (5953 buckets, 5953 max) - 360 bytes per conntrack
br-lan: port 2(wl0) entering disabled state
br-lan: port 2(wl0) entering disabled state
device wl0 left promiscuous mode
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating
br-lan: port 2(wl0) entering disabled state
br-lan: port 1(eth0) entering disabled state
br-lan: port 2(wl0) entering disabled state
device wl0 left promiscuous mode
br-lan: port 1(eth0) entering disabled state
device eth0 left promiscuous mode
b44: eth0: Link is up at 100 Mbps, full duplex.
b44: eth0: Flow control is off for TX and off for RX.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: port 1(eth0) entering forwarding state
br-lan: topology change detected, propagating
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating
b44: eth1: Link is up at 100 Mbps, full duplex.
b44: eth1: Flow control is off for TX and off for RX.
br-lan: port 2(wl0) entering disabled state
br-lan: port 2(wl0) entering disabled state
device wl0 left promiscuous mode
device wl0 entered promiscuous mode
wl0: attempt to add interface with same source address.
br-lan: port 2(wl0) entering learning state
br-lan: port 2(wl0) entering forwarding state
br-lan: topology change detected, propagating</code></pre></div>											<p class="post-edited">(Last edited by <strong>bar4mi</strong> on 18 Dec 2008, 18:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78671">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sam0815</div>
					<div class="post-datetime">
						27 Dec 2008, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I had a similar problem.<br />First I installed Kamikaze 8.09_RC1 on my Netgear WGT634U.<br />After that I changed the source path in the opkg.conf from the 8.09_RC1 to the snapshot directory.<br />When I now tried to install/upgrade a package I got the same error message as you did.<br />What helped me was to add the following two lines to the opkg.conf:</p><p>option force_space<br />option overlay_root /jffs</p><p>Also see <a href="https://dev.openwrt.org/changeset/13650">https://dev.openwrt.org/changeset/13650</a></p><br /><p>Apart from that I didn&#039;t try to upgrade all of the packages at once, which I read somewhere in the wiki, isn&#039;t recommended.<br />Hope it helps <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>sam0815</strong> on 27 Dec 2008, 02:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78747">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ymhee_bcex</div>
					<div class="post-datetime">
						29 Dec 2008, 09:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sam0815 wrote:</cite><blockquote><p>option overlay_root /jffs</p></blockquote></div><p>Gives me an error opkg_conf_set_option: Unrecognized option: overlay_root=/jffs</p><p>But looks like just having force_space does the trick.</p><p>If I only knew where these and other options are documented...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78795">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Floppe</div>
					<div class="post-datetime">
						30 Dec 2008, 08:41					</div>
				</div>
				<div class="post-content content">
					<p>Compiled r13768 today and got the same problem. Did scream out the error about 0 blocks before I installed any packages.</p><p>option overlay_root /jffs was missing cause I have my own opkg.conf so started to work after adding this line.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78852">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">miguipda</div>
					<div class="post-datetime">
						1 Jan 2009, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I solved it by adding ackages on a usb hdd.</p><p>Have a nice day,</p><p>Miguipda ;-)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>