<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Updating 15.05.1 Dropbear to Latest Security Release!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p333956">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						10 Aug 2016, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>I noticed a security release was issued for Dropbear on July 21, 2016 v2016.74 <a href="https://matt.ucc.asn.au/dropbear/dropbear.html.">https://matt.ucc.asn.au/dropbear/dropbear.html.</a> Based on the release date, it&#039;s fair to assume routers running CC 15.05.1 are operating without this important security update.</p><p>What are the best steps to consider, which would allow updating Dropbear to the latest security release, while doing it in such a way to minimize the risk of introducing stability issues?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333963">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						10 Aug 2016, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>i guess if you&#039;ll need to compile the package yourself - not a big chance to get an update in the way development is going now</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p333993">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						11 Aug 2016, 00:22					</div>
				</div>
				<div class="post-content content">
					<p>Thank you maurer for your response. <br />Could you or someone reading this post provide detailed instructions on how to compile and install a package which would include the recent security update for Dropbear? I recently made the move to OpenWrt and away from manufacture stock firmware, understanding that doing so could enhance router security. </p><p>So it comes as some surprise the security update doesn’t appear to be posted in a prominent place on the OpenWrt website, or provisions/instructions on how to check for and then update components such as Dropbear when security patches are made available. I just happen to find out about the security update only by chance, when visiting the author’s website. I imagine there are many OpenWrt users unaware of this security update or who have the technical know how to put the update in place.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334153">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						12 Aug 2016, 05:38					</div>
				</div>
				<div class="post-content content">
					<p>Below is the latest Dropbear security release, to help illustrate the vulnerabilities users running CC 15.05.1 may be faced with. Could more advance users provide instructions on how to implement the Dropbear update or minimize the vulnerability until a stable release which includes the security update, is made available? </p><p>Security Update Dropbear 2016.74 fixes security issues, most users are advised to upgrade.</p><p>- Security: Message printout was vulnerable to format string injection.<br />&nbsp; If specific usernames including &quot;%&quot; symbols can be created on a system<br />&nbsp; (validated by getpwnam()) then an attacker could run arbitrary code as root<br />&nbsp; when connecting to Dropbear server.</p><p>&nbsp; A dbclient user who can control username or host arguments could potentially<br />&nbsp; run arbitrary code as the dbclient user. This could be a problem if scripts<br />&nbsp; or webpages pass untrusted input to the dbclient program.</p><p>- Security: dropbearconvert import of OpenSSH keys could run arbitrary code as<br />&nbsp; the local dropbearconvert user when parsing malicious key files</p><p>- Security: dbclient could run arbitrary code as the local dbclient user if<br />&nbsp; particular -m or -c arguments are provided. This could be an issue where<br />&nbsp; dbclient is used in scripts.</p><p>- Security: dbclient or dropbear server could expose process memory to the<br />&nbsp; running user if compiled with DEBUG_TRACE and running with -v<br />&nbsp; The security issues were reported by an anonymous researcher working with<br />&nbsp; Beyond Security&#039;s SecuriTeam Secure Disclosure <a href="http://www.beyondsecurity.com/ssd.html">www.beyondsecurity.com/ssd.html</a></p><p>- Fix port forwarding failure when connecting to domains that have both<br />&nbsp; IPv4 and IPv6 addresses. The bug was introduced in 2015.68</p><p>- Fix 100% CPU use while waiting for rekey to complete. Thanks to Zhang Hui P<br />&nbsp; for the patch</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334161">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">greybeard</div>
					<div class="post-datetime">
						12 Aug 2016, 07:50					</div>
				</div>
				<div class="post-content content">
					<p>Whilst security updates are important you need to keep the bigger picture in mind as well.<br />OpenWrt is typically used in a home environment, exposing ssh to the outside world (network) isn&#039;t something most people would need to do. Having a close read of the reported security issues shows that multiple circumstances are required to exploit the reported issue.<br />To top it off, Luci is accessed of plain http (ie clear text), so if someone has already breached your network boundaries then vulnerabilities in dropbear are the least of your worries.<br />OpenWrt is open source, no one, apart from the end user, is responsible for reporting/including security issues. ie buyer beware <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Have a pretty strong reason to expose SSH to the internet (or do some research to manage external access), use a VPN, use private/public keys and/or port knock to limit the exploitable footprint.<br />That said, having seen the reported issues, I&#039;m not going to lose any sleep over the issues. ymmv</p>											<p class="post-edited">(Last edited by <strong>greybeard</strong> on 12 Aug 2016, 07:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334174">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						12 Aug 2016, 11:14					</div>
				</div>
				<div class="post-content content">
					<p>if you want to mitigate dropbear security issues I suggest to:<br /><a href="https://wiki.openwrt.org/inbox/replacingdropbearbyopensshserver">https://wiki.openwrt.org/inbox/replacin … nsshserver</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334219">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						12 Aug 2016, 19:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>greybeard wrote:</cite><blockquote><p>Whilst security updates are important you need to keep the bigger picture in mind as well.<br />OpenWrt is typically used in a home environment, exposing ssh to the outside world (network) isn&#039;t something most people would need to do. Having a close read of the reported security issues shows that multiple circumstances are required to exploit the reported issue.<br />To top it off, Luci is accessed of plain http (ie clear text), so if someone has already breached your network boundaries then vulnerabilities in dropbear are the least of your worries.<br />OpenWrt is open source, no one, apart from the end user, is responsible for reporting/including security issues. ie buyer beware <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br />Have a pretty strong reason to expose SSH to the internet (or do some research to manage external access), use a VPN, use private/public keys and/or port knock to limit the exploitable footprint.<br />That said, having seen the reported issues, I&#039;m not going to lose any sleep over the issues. ymmv</p></blockquote></div><p>Thank you graybeard for your thoughts and response, it is much appreciated. Do you know if, or have knowledge of, how the security patch might be put in place? I contacted the developer directly prior to posting this article and he affirmed Dropbear on OpenWrt, would benefit from the update. If it is possible, and someone has knowledge of how to perform the security update, it would at the very least provide users this option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334220">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">booBot</div>
					<div class="post-datetime">
						12 Aug 2016, 19:21					</div>
				</div>
				<div class="post-content content">
					<p><strong>Spartan81</strong>, thanks for the head-up.<br />I&#039;ll try to look into the possibility to update the dropbear binary on OpenWrt - usually it just takes few edits (to point to the newer sources&#039; version) in the Makefile.<br />I&#039;ll report back ASAP.</p>											<p class="post-edited">(Last edited by <strong>booBot</strong> on 12 Aug 2016, 19:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334221">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						12 Aug 2016, 19:26					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://git.lede-project.org/?p=source.git;a=commit;h=4e8c6f340751c66a602b98b727af28b2a9004313">patch</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334226">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						12 Aug 2016, 20:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>booBot wrote:</cite><blockquote><p><strong>Spartan81</strong>, thanks for the head-up.<br />I&#039;ll try to look into the possibility to update the dropbear binary on OpenWrt - usually it just takes few edits (to point to the newer sources&#039; version) in the Makefile.<br />I&#039;ll report back ASAP.</p></blockquote></div><p>Your welcome. The whole purpose of this post is to bring awareness to the Dropbear security issue and its update. I wish I had the technical know-how to instruct users on how to implement the security patch, should they choose to.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p334366">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Spartan81</div>
					<div class="post-datetime">
						13 Aug 2016, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>if you want to mitigate dropbear security issues I suggest to:<br /><a href="https://wiki.openwrt.org/inbox/replacingdropbearbyopensshserver">https://wiki.openwrt.org/inbox/replacin … nsshserver</a></p></blockquote></div><p>Thank you maurer. Your recommendation for mitigating Dropbear security concerns, in lieu of not being able to update Dropbear with the security patch, is interesting. I have looked into OpenSSH and it appears to be well supported and a solid option. What I’ll need to consider, should I make the switch, would there be any issues I might have to contend with, when updating to a new release of OpenWrt? I imagine Dropbear will continue to be part of a future package, so I’m not sure if running a sysupgrade with OpenSSH installed would introduce problems or not.</p><p>What’s interesting about all this, is the fact users have the option and instructions, on how to replace Dropbear with an alternative solution, but no apparent provision to simply update Dropbear with a new release, for instance a security update.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>