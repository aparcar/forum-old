<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT Kamikaze on TP-link tl-wa501g?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Aug 2014 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 7 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=17252&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=17252&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=17252&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=14.html">14</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p140634">
				<div class="post-metadata">
					<div class="post-num">Post #151</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						5 Aug 2011, 02:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>option &#039;key&#039; &#039;1&#039;<br />option &#039;key1&#039; &#039;DaP77Zt1BPSKZ&#039;</p></blockquote></div><p>this is wrong syntax for psk/2</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140703">
				<div class="post-metadata">
					<div class="post-num">Post #152</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						6 Aug 2011, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>hello xssa</p><p>your reply was correct it was the wrong syntax i have changed the following </p><p>/etc/config/wireless<br />config &#039;wifi-device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;atheros&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;5&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;*********&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;19&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;**********&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk&#039;</p><p>/etc/config/network</p><p>config &#039;interface&#039; &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.0.0.0&#039;</p><p>config &#039;interface&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ifname&#039; &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;proto&#039; &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;netmask&#039; &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dns&#039; &#039;192.168.1.100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;gateway&#039; &#039;192.168.1.100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ipaddr&#039; &#039;192.168.1.55&#039;</p><p>config &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp;option &#039;ifname&#039; &#039;eth1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp;option &#039;proto&#039; &#039;dhcp&#039;</p><p>root@TPLink-mpcs_v2:~# wifi<br />udhcpc (v1.11.2) started<br />Sending discover...<br />root@TPLink-mpcs_v2:~# Sending discover...<br />Sending select for 192.168.0.3...<br />Lease of 192.168.0.3 obtained, lease time 86400<br />udhcpc: ifconfig ath0 192.168.0.3 netmask 255.255.255.0 broadcast +<br />udhcpc: setting default routers: 192.168.0.1<br />udhcpc: setting dns servers: **************</p><br /><p>root@TPLink-mpcs_v2:/etc/config# ping google.com -c3<br />PING google.com (74.125.235.16): 56 data bytes<br />64 bytes from 74.125.235.16: seq=0 ttl=49 time=220.193 ms<br />64 bytes from 74.125.235.16: seq=1 ttl=49 time=195.459 ms<br />64 bytes from 74.125.235.16: seq=2 ttl=49 time=192.477 ms</p><p>root@TPLink-mpcs_v2:/etc/config# uci -P/var/state get network.wan.ipaddr<br />192.168.0.3 (assigned by ap router)</p><p>root@TPLink-mpcs_v2:/etc/config# brctl show<br />bridge name&nbsp; &nbsp; &nbsp;bridge id&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;STP enabled&nbsp; &nbsp; &nbsp;interfaces<br />br-lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8000.940c6df6d82b&nbsp; &nbsp; &nbsp; &nbsp;yes&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0</p><p> now i can ping to the internet and the ap from the openwrt telnet console but not from the the windows computer which has only access to the openwrt telnet console with static entry from /etc/network</p><p>my other question is how to enable dhcp on this router as i cannot acquire an ip from this router i can only assign static ip ,gateway in windows tcp/ip controls to connect to the router telnet console .....</p><p>there is no dhcp in /etc/config to edit or set or </p><p>how to connect to the router to get to internet...... all this time i have been assigning static ip in windows xp to connect to the router but with static ip i&nbsp; cannot get internet on the browser or ping to anything other than the openwrt console </p><p>ps from the openwrt console i can ping to the the internet and to the ap router but not from windows machine</p><p>thanks in advance</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 20 Aug 2011, 21:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140783">
				<div class="post-metadata">
					<div class="post-num">Post #153</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						7 Aug 2011, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>Your setup needs any routing and NAT features to be build into the kernel but will make it bigger more then 128kB so there will be no space for jffs2 overlay, and I think there will be a significant limit in RAM to handle NAT tables. DHCPd is need to be included as busybox feature as it does not in current image. If you need one i can build it, hope it will not increase rootfs size. Some research has to be done on what your wishes can be included and will not make this device unstable.<br />Your wish list?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140816">
				<div class="post-metadata">
					<div class="post-num">Post #154</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						8 Aug 2011, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>xssa </p><p>You are very kind........ but to the extent of my knowledge i have understood that in a client mode setup. the client router requires dhcp to issue leases to the clients connected to it by lan... hence making the clients&nbsp; on a different subnet...... while in a client bridge setup all the clients behind the client router and the ap router are under one subnet (ie the subnet of the ap router) and all the ip addrsses are assigned by the ap router ie (no dhcp is required in the client router)</p><p>So from what i have understood the client mode will not work unless there is a dhcp server running on the wr340g so it can assign ip to the clients that are connected to it <br />.................................so do u think DHCPd will fit into an other image without any problems with size </p><p>and as asked earlier my wish is to use this router in client mode ......... and even i think that with only 8mb ram in these routers stability in the router will be a problem with dhcpd anyway best way to know is to test.....</p><p>ps: you say in the previous post u have successfully used this router as client how did you do this ? <br />thanks in advance</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 8 Aug 2011, 18:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141047">
				<div class="post-metadata">
					<div class="post-num">Post #155</div>
					<div class="post-author">tplink10</div>
					<div class="post-datetime">
						11 Aug 2011, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi. I have bricked TP-LINK 340G V2.3. I make SPIPGM programmer and unsolder flash 2MB 25L16050M2C . How program flash by SPI with 900KB bin? Adding at end file FF FF FF... not working :-( I need full 2MB bin file to program in SPIPGM. THX.<br /><a href="http://imageshack.us/photo/my-images/717/tlwr340ginside.jpg">http://imageshack.us/photo/my-images/71 … inside.jpg</a></p>											<p class="post-edited">(Last edited by <strong>tplink10</strong> on 11 Aug 2011, 16:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141113">
				<div class="post-metadata">
					<div class="post-num">Post #156</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						12 Aug 2011, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>to <br />xssa</p><p>all the documentation in openwrt wiki states the a client bridge cannot work on an atheros platform ....because of the atheros drivers but you say client bridge is possible with this image could you explain how ? did you use arp-nat scripts&nbsp; or some other workaround ? </p><p>thanks in advance<br />help is appreciated</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141194">
				<div class="post-metadata">
					<div class="post-num">Post #157</div>
					<div class="post-author">lowac</div>
					<div class="post-datetime">
						13 Aug 2011, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>WA-500g<br />with kamikaze 8.9.2 have no bootable image found, try default location 0xBFC10000 .. on backfire ap boot ok but have problem with rootfs ..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141244">
				<div class="post-metadata">
					<div class="post-num">Post #158</div>
					<div class="post-author">lowac</div>
					<div class="post-datetime">
						13 Aug 2011, 21:55					</div>
				</div>
				<div class="post-content content">
					<p>to our guru ;&gt; Xssa<br /> any chance for config backfire .. that U build for wa500g .. <br />Thank you in advance ..<br />update :. Backfire (10.03.1-RC6, r27980)&nbsp; boot ok..<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.0M   1004.0K     20.0K  98% /</code></pre></div><p>20k hmm, ;&gt;</p>											<p class="post-edited">(Last edited by <strong>lowac</strong> on 14 Aug 2011, 18:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141435">
				<div class="post-metadata">
					<div class="post-num">Post #159</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						15 Aug 2011, 22:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drekthar wrote:</cite><blockquote><p>to <br />xssa</p><p>all the documentation in openwrt wiki states the a client bridge cannot work on an atheros platform ....because of the atheros drivers but you say client bridge is possible with this image could you explain how ? did you use arp-nat scripts&nbsp; or some other workaround ? </p><p>thanks in advance<br />help is appreciated</p></blockquote></div><p><a href="http://wiki.openwrt.org/doc/howto/clientmode">http://wiki.openwrt.org/doc/howto/clientmode</a></p><p>If you&#039;ll google &quot;openwrt client-bridge&quot; you&#039;ll find <a href="https://forum.openwrt.org/viewtopic.php?pid=98452">https://forum.openwrt.org/viewtopic.php?pid=98452</a> and etc.</p>											<p class="post-edited">(Last edited by <strong>xssa</strong> on 15 Aug 2011, 23:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141438">
				<div class="post-metadata">
					<div class="post-num">Post #160</div>
					<div class="post-author">xssa</div>
					<div class="post-datetime">
						15 Aug 2011, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>The Openwrt config is not only an issue to build such tiny images. There are also many changes in kernel config, toolchain, some makefiles and base-files. So it is fork. Can anyone prepare hosting?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141470">
				<div class="post-metadata">
					<div class="post-num">Post #161</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						16 Aug 2011, 13:57					</div>
				</div>
				<div class="post-content content">
					<p>to xssa </p><p>at both these links ,https://forum.openwrt.org/viewtopic.php?pid=98452 and&nbsp; <a href="http://wiki.openwrt.org/doc/howto/clientmode">http://wiki.openwrt.org/doc/howto/clientmode</a> <br />they point out that a client bridge is not possible in an atheros platform but rather only in a broadcom platform because of the drivers</p><p>quote<br />First of all: client bridge mode on Kamikaze works only with the brcm-2.4 variant and the proprietary broadcom driver.</p><p>So the only possible options are </p><p>1)Routed client mode (which i have tested and it work properly)<br />2)client mode (which requires a dhcp server on the router to assign ip addresses ie dnsmasq)<br />3)wds (which i cannot use or try as my ap router does not have this feature )</p><p>PS I can take up the duty to host all the files..... i have been wondering why all the images i create don&#039;t even boot all the leds start flashing like crazy i don&#039;t have a&nbsp; serial console at the moment so i can&#039;t post log but i don&#039;t think it will be helpful as the router doesn&#039;t attempt to boot at all.. as soon as the power is plugged in all the leds starts flashing very fast....... i am using kamikaze 8.09 and backfire rc5 sources both with no working images</p><br /><p>i have one more question in the images u built the rootfs has an extention of .rom (rootsq.rom) while all the images i create have the extension of .squashfs how did you make a .rom file ?</p><br /><p>xsaa is it possible for u to make a new image with a dhcp server (dnsmasq) all my efforts where with futile results</p><p>thanks in advance</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 29 Aug 2011, 18:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141519">
				<div class="post-metadata">
					<div class="post-num">Post #162</div>
					<div class="post-author">lowac</div>
					<div class="post-datetime">
						17 Aug 2011, 10:27					</div>
				</div>
				<div class="post-content content">
					<p>What about change flash on 4mb ? what about redboot in this case .. exp. EN25Q40 ..? series is supported ..? :&gt;<br />What about gpioctl foud .. gpioct 2 -&gt; led2 , gpioctl&nbsp; 7 -&gt; led 4 .. Need two more ;&gt;&nbsp; 6 reset ..</p>											<p class="post-edited">(Last edited by <strong>lowac</strong> on 19 Aug 2011, 16:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142728">
				<div class="post-metadata">
					<div class="post-num">Post #163</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						2 Sep 2011, 00:43					</div>
				</div>
				<div class="post-content content">
					<p>I was wondering on implementing a sd/mmc mod the TP-LINK WR340G router..... </p><p>I figured that if we managed to create a striped down kernel and rootfs and maybe drop wifi support and include all the driver required for a sd/mmc card to work..... then eveything can be installed later on via opkg or binary packages to the attached memory card later on </p><p>here are my findings of the gpio pins from the tool gpioctl </p><p>gpio pins </p><p>1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ,2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ,3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;,4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;,5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ,7<br />.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; . <br />.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<br />.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .<br />cannot&nbsp; &nbsp; &nbsp;wlan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;cannot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Sys&nbsp; <br />control&nbsp; &nbsp; &nbsp; led&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;control&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; light<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Led 8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;(which constantly <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on Pcb)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flashes always. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; so gpioctl reads <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; high and low <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; consequently)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (Led 2<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;on Pcb)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />i haven&#039;t found the exact location of the pins on the pcb board. Probing the pcb board with a voltmeter is in order here....</p><p>will report back when more info is available <br />to be continued.........</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 2 Sep 2011, 11:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143822">
				<div class="post-metadata">
					<div class="post-num">Post #164</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						16 Sep 2011, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>WIKI HAS BEEN UPDATED </p><p><a href="http://wiki.openwrt.org/toh/tp-link/wr340gd?s">http://wiki.openwrt.org/toh/tp-link/wr340gd?s</a>[]=wr340g</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143846">
				<div class="post-metadata">
					<div class="post-num">Post #165</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						17 Sep 2011, 12:04					</div>
				</div>
				<div class="post-content content">
					<p>i want to buy an wr340g and flash it with openwrt.<br />i see an tp-link site there are v1 to v5.<br />which of this one is supported? has marvell switch, not atheros.?<br />how can i know what HW version to buy?</p>											<p class="post-edited">(Last edited by <strong>maurer</strong> on 17 Sep 2011, 12:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143857">
				<div class="post-metadata">
					<div class="post-num">Post #166</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						17 Sep 2011, 15:46					</div>
				</div>
				<div class="post-content content">
					<p>hello maurer<br /></p><div class="quotebox"><cite>maurer wrote:</cite><blockquote><p>i want to buy an wr340g and flash it with openwrt.<br />i see an tp-link site there are v1 to v5.<br />which of this one is supported? has marvell switch, not atheros.?<br />how can i know what HW version to buy?</p></blockquote></div><p>the version you see on the tplink site are software versions rather than actual harware revisions<br />there are mainly two harware revisions that i am aware of <br />1 v2.24 (the v2.24 has the marvell switch which is fully supported by the vxkiller image<br />2 v3.1 (v3.1 is not supported by the vxkiller&nbsp; image as it has the Atheros ar8236 switch chip which is not supported by the Vxkiller image LAN/WAN ports will not work...</p><br /><p>you can see the actual revision no on the black sticker found on the back side of the unit......</p><p>ps: read the wiki on this router it has more information </p><p><a href="http://wiki.openwrt.org/toh/tp-link/wr340gd?s">http://wiki.openwrt.org/toh/tp-link/wr340gd?s</a></p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 17 Sep 2011, 15:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144174">
				<div class="post-metadata">
					<div class="post-num">Post #167</div>
					<div class="post-author">sanitariu</div>
					<div class="post-datetime">
						21 Sep 2011, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>Where i can get wr542_linux.bin ?<br />Thanks !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144179">
				<div class="post-metadata">
					<div class="post-num">Post #168</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						21 Sep 2011, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>email member xssa he can help he made all the vxkiller in this forum</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144183">
				<div class="post-metadata">
					<div class="post-num">Post #169</div>
					<div class="post-author">alexei</div>
					<div class="post-datetime">
						21 Sep 2011, 18:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello.<br />Who knows how to set up work wr340g in sta mode with wpa2 security. Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144193">
				<div class="post-metadata">
					<div class="post-num">Post #170</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						21 Sep 2011, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>i have tried this and have successfully cliented to an ap with wpa-psk encryption</p><p>what kernel and rootfs did u flash in your router.......did u build your own image ?....if yes.....did u include dnsmasq(dhcpserver )&nbsp; in you build ?</p><p>more information is required on the linux you&#039;r running</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144196">
				<div class="post-metadata">
					<div class="post-num">Post #171</div>
					<div class="post-author">alexei</div>
					<div class="post-datetime">
						21 Sep 2011, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>To drekthar.<br />Happy for You. I hope that You and Your experience will help me.<br />1)Made Everything for Your article in the Wiki. Images uploaded on the links in the article <a href="http://wiki.openwrt.org/toh/tp-link/wr340gd?s">http://wiki.openwrt.org/toh/tp-link/wr340gd?s</a>[]=wr340g.<br />2)Apparently no wpa_supplicant(although I can its just not found) , there is only wpa_passphrase(not very strong in supplicante).<br />3)Ideally, I want to connect wr340 as a client Bridge with wpa2(as I understood it is necessary to collect the image with the patch from the gargoyle). The second option if I understand correctly xssa the native firmware from the tl-WA500g with VxWorks.<br />4)Meanwhile, run as Routed Client with wpa2 security. <br />To install wpa_supplicant in the image of the wiki is not enough space on the jffs2.<br />From here I think it is necessary to dig in the assembly of my own image. Unfortunately a large experience in the matter of assembling your system does not have(such as the kernel, i can leave the old or rebuild it.). If you can tell me the key moments of the path that I need to pass or share your correct images, if any.<br />5)I want not only to implement the plan, and i want&nbsp; improve the knowledge on Linux, especially in embedded systems.<br />Big thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144230">
				<div class="post-metadata">
					<div class="post-num">Post #172</div>
					<div class="post-author">drekthar</div>
					<div class="post-datetime">
						22 Sep 2011, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>glad to see people interested in openwrt <br />sorry for the late reply was busy with school......<br />okay here goes...<br />quote<br />&quot;.To install wpa_supplicant in the image of the wiki is not enough space on the jffs2&quot;</p><p>okay the rootfs and kernel you flashed to your router does not have opkg package system nor does it have wpa-supplicant preinstalled but there is another way to put wpa supplicant in the current build in the form of a binary</p><p>instructions are <br />download the wpa supplicant binary from this link <a href="http://sharecash.org/download.php?file=2341970">http://sharecash.org/download.php?file=2341970</a><br />after this put this binary on any available<br />ftp/http server, then download it to the /tmp directory on the your<br />openwrt, add executable rights to it, and move it to the /usr/sbin</p><p>(in windows&nbsp; i used radienftp it is quite easy to setup)<br />commands are</p><p>#cd /tmp<br />#wget ftp://user:pass@server_ip/wpa_supplicant<br />#chmod +x wpa_supplicant (make it executable)<br />#mv wpa_supplicant /usr/sbin</p><p>THIS METHOD WAS CREATED BY XSSA THIS IS HIS BINARY THE ONE HE BUILT.......FULL CREDIT GOES TO HIM I AM MERELY HELPING</p><p>after this just configure cd /etc/config/wireless with the ssid of the router u wan to connect followed by the password</p><p>here is the syntax for wpa-psk 1<br /> pinging to the router <br />config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;wifi0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;sta&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &#039;*********&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;txpower&#039; &#039;19&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;**********&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk&#039;</p><p>after this do <br />ifup wan <br />wifi</p><p>you should be connected now to the ap router test by pinging to the ap router or the internet </p><p>quote<br />&quot;3)Ideally, I want to connect wr340 as a client Bridge with wpa2(as I understood it is necessary to collect the image with the patch from the gargoyle). &quot;<br />Yes the patch is arp-nat from gargoyle it uses arp-nat to create a bridge. and ddwrt firmwares use this trick for client bridge in their atheros supported routers here is a link for more information <br /><a href="http://projectgus.com/wireless-client-b">http://projectgus.com/wireless-client-b</a> … h-openwrt/</p><p>quote<br />&quot;The second option if I understand correctly xssa the native firmware from the tl-WA500g with VxWorks.&quot;<br />Yes this is correct although the bridge can be created only with wep encryption.....&nbsp; besides vxworks suck&#039;s</p><p>quote<br />&quot;4)Meanwhile, run as Routed Client with wpa2 security. &quot;<br />Again i have tried this and it run&#039;s flawlessly. although i was not happy with routed client mode and wanted to use client mode which requires a dhcp server in the image which issues lease to all the clients connected to the router rather than static routes for each clients......<br />although i have not been able to make an image with dnsmasq included...... as size was very high as i am not an experienced linux user or programmer i have sent xssa a mail regarding a new kernel and rootfs with dhcp server so that client mode can be implemented&nbsp; </p><p>quote<br /> &quot;5)From here I think it is necessary to dig in the assembly of my own image. Unfortunately a large experience in the matter of assembling your system does not have(such as the kernel, i can leave the old or rebuild it.). If you can tell me the key moments of the path that I need to pass or share your correct images, if any.5)I want not only to implement the plan, and i want&nbsp; improve the knowledge on Linux, especially in embedded systems.<br />Big thank you&quot;</p><p>Okay her&#039;s is what you have to know. Making openwrt firmware is a very easy business using buildroot for 4mb flash router as they have enough space for linux to run and offer more functionality.... but in the case of 2mb flash routers openwrt devs has made no attempt to make minimal firmware to support 2mb flash router like the tp-link wr340g the openwrt devs answer to this by saying that 2mb flash router&#039;s are useless and that none of the openwrt devs have 2mb flash router&#039;s..... so a lot of people have to endup making their own minimal striped down firmware by removing MANY unwanted features to get a linux running on the router.....</p><p>okay now to get a openwrt running on a 2mb flash router remove everything and keep only </p><p>essential packages for openwrt to boot </p><p>base-files-atheros_14.3-r18801_mips<br />busybox_1.11.2-2.2_mips (remove unwanted busybox applets to save space)<br />hotplug2_0.9+r102-2_mips<br />libgcc_4.1.2-14.3_mips<br />libuci_0.7.3-1_mips<br />uci_0.7.3-1_mips<br />uclibc_0.9.29-14.3_mips<br />udevtrigger_106-1.1_mips</p><p>as for wifi the madwifi driver is very big and i have no idea how xssa manged to include a minimal image with wifi........ i had no luck in making an image with wifi to reach the size xssa has achieved in his image....... i still use the kernel and rootfs which he built......</p><p>busybox can be stripped&nbsp; by removing<br />archival tools <br />ipv6 support<br />and anything else unwanted</p><p>next the kernel should&nbsp; be made smaller with make kernel_menuconfig (By removing support for hardware that isn&#039;t present on the router ie usb support etc) and many more thing...... </p><p>remeber xssa kernel and rootfs with wifi is 640/704kb respectively which is amazing how he made everything fit (especially wifi) at only 1.344 mb</p><p>keep updating of you success with this router in the forum</p>											<p class="post-edited">(Last edited by <strong>drekthar</strong> on 29 Sep 2011, 20:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144241">
				<div class="post-metadata">
					<div class="post-num">Post #173</div>
					<div class="post-author">alexei</div>
					<div class="post-datetime">
						22 Sep 2011, 21:36					</div>
				</div>
				<div class="post-content content">
					<p>A very large, just a huge thank you for the information.<br />&quot;I understand everything <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&quot;, thanks for the link to wpa_supplicant. I&#039;ll try, unfortunately after the weekend, tomorrow I am going on a business trip.<br />Once again thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144318">
				<div class="post-metadata">
					<div class="post-num">Post #174</div>
					<div class="post-author">l0l</div>
					<div class="post-datetime">
						23 Sep 2011, 22:00					</div>
				</div>
				<div class="post-content content">
					<p>hello after storm my wlan port propably dont work, can I use vlan feature to set wlan port lan 1-4 ? If yes please tell me how <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144351">
				<div class="post-metadata">
					<div class="post-num">Post #175</div>
					<div class="post-author">l0l</div>
					<div class="post-datetime">
						24 Sep 2011, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>thx for anserw</p><p>aww sorry yes it&#039;s WAN port (that blue)</p><p>config from WRT54GL (kamikaze 7.09):<br />WAN port as LAN port nr 1.</p><div class="codebox"><pre><code>#### VLAN configuration
config switch eth0
        option vlan0    &#039;0 1 2 5*&#039;
        option vlan1    &#039;3 5&#039;

#### Loopback configuration
config interface loopback
        option ifname   &quot;lo&quot;
        option proto    static
        option ipaddr   127.0.0.1
        option netmask  255.0.0.0

#### WAN configuration               
config interface        wan       
        option ifname   &quot;eth0.1&quot;
        option proto    dhcp 

#### LAN configuration
config interface lan
        option type     bridge
        option ifname   &quot;eth0.0&quot;
        option proto    static
        option ipaddr   192.168.0.1
        option netmask  255.255.255.0
        option dns      192.168.1.1</code></pre></div><p>what change for TP Link ? I dont know how edit this &#039;0 1 2 5*&#039; :(</p>											<p class="post-edited">(Last edited by <strong>l0l</strong> on 24 Sep 2011, 12:34)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 7 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=17252&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=17252&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=17252&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=17252&amp;p=14.html">14</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>