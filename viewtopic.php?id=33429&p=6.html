<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-MR3020 Support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 16 Jun 2013 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p166249">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">vikl45</div>
					<div class="post-datetime">
						1 May 2012, 19:45					</div>
				</div>
				<div class="post-content content">
					<p>I build a new binary with the vfat and ext4 kernel modules included and flashed it to the device.<br />Finally I had to install the US- american codepage.<br /> Now all runs fine on the 3020.</p><p>the gpsd hom page provides client tools to read from the gpsd-daemon.</p><p>I need the gpspipe tool to write the output of gpsd to a file on a usbstick</p><p>On ubuntu there is a package called gpsd-clients. Is it possible to add this to the opkg packages?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166259">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">sophitus</div>
					<div class="post-datetime">
						1 May 2012, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>I try to use 3g modem Huaweii E173 with extroot on the onboard micro sd card reader using 2GB micro sd card. However I have some problems with usb_modeswitch. Only after rebooting 3 times I get the router booting from sd card and the modem usable, i.e. /dev/ttyUSB0 shows up. If I remove power, I have to reboot 3 times again to get all up and running.</p><p>Is there a way to improve this? Has anybody else solved this? Is it possible to boot from Huaweii E173 mass storage and use 3g modem after one single boot with OpenWRT?</p>											<p class="post-edited">(Last edited by <strong>sophitus</strong> on 1 May 2012, 22:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166808">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">tzippy</div>
					<div class="post-datetime">
						8 May 2012, 10:07					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone!<br />I came across this device and I was wondering if it supported FTDI drivers for the USB port. I am not referring to a serial connection via UART to my PC, but I want to connect a device on the USB Port. How does the connection usually work to the 3G modems?<br />Thx in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166858">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						8 May 2012, 22:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tzippy wrote:</cite><blockquote><p>Hello everyone!<br />I came across this device and I was wondering if it supported FTDI drivers for the USB port. I am not referring to a serial connection via UART to my PC, but I want to connect a device on the USB Port. How does the connection usually work to the 3G modems?<br />Thx in advance!</p></blockquote></div><p>Of coz there is FTDI module you can install.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166875">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">tzippy</div>
					<div class="post-datetime">
						9 May 2012, 10:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><div class="quotebox"><cite>tzippy wrote:</cite><blockquote><p>Hello everyone!<br />I came across this device and I was wondering if it supported FTDI drivers for the USB port. I am not referring to a serial connection via UART to my PC, but I want to connect a device on the USB Port. How does the connection usually work to the 3G modems?<br />Thx in advance!</p></blockquote></div><p>Of coz there is FTDI module you can install.</p></blockquote></div><p>Thx a lot!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167251">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">kochi</div>
					<div class="post-datetime">
						13 May 2012, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>@1st sorry for my broken english<br />so i buy a new TP-Link TL-MR3020<br />and flash openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory via the webif from the orignal firmware!<br />everything is fine then i install luci.....everyhing ok!<br />then i recognize that the memory is too less!so i delet something i don`t need:like luci english txt.then reboot!!!</p><br /><p>no telnet and no ssh!!!<br />luci is broken and is not showing!<br />the ip is working also via wlan!<br />my question is :can i restore the tl-mr3020-v1 to connect the telne??and install the luci again<br />the failsafe mode of the openwrt ??the button is :wps?? how long must i pusht the butten</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167281">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						14 May 2012, 00:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kochi wrote:</cite><blockquote><p>@1st sorry for my broken english<br />so i buy a new TP-Link TL-MR3020<br />and flash openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory via the webif from the orignal firmware!<br />everything is fine then i install luci.....everyhing ok!<br />then i recognize that the memory is too less!so i delet something i don`t need:like luci english txt.then reboot!!!</p><br /><p>no telnet and no ssh!!!<br />luci is broken and is not showing!<br />the ip is working also via wlan!<br />my question is :can i restore the tl-mr3020-v1 to connect the telne??and install the luci again<br />the failsafe mode of the openwrt ??the button is :wps?? how long must i pusht the butten</p></blockquote></div><p>You removed luci-english ??<br />Then what do you expect luci to show ?&nbsp; France ?<br />Install luci-english back to you 3020 !</p><p>No telnet.<br />If you changed the password, then insecure telnet will be turn off.<br />You should use ssh instead.</p><p>No ssh ?<br />What else you did to your router ??<br />What else you have done to your 3020 ?</p><p>You CANNOT delete anything inside, unless you Sure it is useless.<br />What the hell you thinking ??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167343">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">pix5</div>
					<div class="post-datetime">
						14 May 2012, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br />I have a problem with u-boot, i can&#039;t save environment variables<br />and mr3020 does not&nbsp; ping response.<br />How can i save my environment variables ? (printsev, i have changed config with setenv but that does not save after reboot)<br />This is to run my tftp server but there aren&#039;t dialog between them.</p><br /><div class="codebox"><pre><code>U-Boot 1.1.4 (Nov 28 2011 - 09:34:00)

AP121 (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
Fetching MAC Address from 0x81ff4228
Fetching MAC Address from 0x81ff4228
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:11:40:00
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:11:40:01
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
Autobooting in 1 seconds
hornet&gt;</code></pre></div><div class="codebox"><pre><code>printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-env),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)
bootcmd=bootm 0x9f020000
bootdelay=1
baudrate=115200
ethaddr=0xba:0xbe:0xfa:0xce:0x07:0x41
stdin=serial
stdout=serial
stderr=serial
netmask=255.255.255.0
ipaddr=192.168.1.4
serverip=192.168.1.25
ethact=eth0

Environment size: 381/65532 bytes
hornet&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167435">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">psousa</div>
					<div class="post-datetime">
						16 May 2012, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>Just an advice:</p><p>you must change this firmware download link</p><div class="codebox"><pre><code>Installation
Currently only OpenWRT developer versions support the hardware. Download the lastest trunk snapshot here (http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin).
(at Wiki TL-MR3020 page http://wiki.openwrt.org/toh/tp-link/tl-mr3020#installation)</code></pre></div><p>to the failsafe firmware link </p><div class="codebox"><pre><code>http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr3020-v1-jffs2-factory.bin</code></pre></div><p>.</p><p>As far as I can understand (too late, unfortunately) the linked firmware does not allow failsafe recovery like the second one.</p><p>Because of network bad configuration I made, I can&#039;t connect to my 3020 and therefore became bricked (theorically, since it boots well but I can&#039;t place connections, neither by wifi nor by rj45). I have a new one now, but I&#039;m afraid to install openwrt again.</p><p>Be aware.</p><p>Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167438">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">psousa</div>
					<div class="post-datetime">
						16 May 2012, 00:51					</div>
				</div>
				<div class="post-content content">
					<p>Any way, anyone knows if internet 3g/4g connection under 3020 runs faster with openwrt?</p><p>Using original firmware (last one, March 2012) and Vodafone 4g K5005 (huawei 398) I have reached 21Mbps of download and 2mbps of upload, while in a windows 7 palmtop I can reach 51Mbps. I made a sucessful connection with this pen at 3020 running openwrt but I didn&#039;t test speed since when connected to router over wifi or rj45 I had no internet connection (only inside the router). It was while reconfiguring router network that I lost all connections and therefore bricked it :\</p><p>If someone had already tested connection speed with this pen and openwrt, please post speed information.</p><p>Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167468">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						16 May 2012, 12:01					</div>
				</div>
				<div class="post-content content">
					<p>i don&#039;t think openwrt /original firmware supports 4G LTE usb connection yet - that&#039;s why you only get 21mbps max (3G+ only)<br />chat, comgt, usb-modeswitch ...ala need to be updated to support this kind of connection.<br />If i look in the past how 3G support was added to linux (openwrt)...I don&#039;t think will see support for the next 1-2 years...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168325">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">arickbro</div>
					<div class="post-datetime">
						28 May 2012, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>did anyone know, why wan connection using Huawei EC1260-2 evdo modem always disconnected after few minutes when share it via wifi?<br />try bring up the wan connection up again is not possible using &#039;ifup wan&#039; (only possible if reboot)<br />when share wan connection via lan is working fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168465">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">sgt_smith</div>
					<div class="post-datetime">
						29 May 2012, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>I have run into some difficulties installing openwrt on the TL-MR3020.</p><p>I installed the latest MR3020 firmware from the snapshots/trunk directory (<a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a>)</p><p>I used the following steps: <br />1) Switch function mode to WISP<br />2) log in on the original software<br />3) uploaded openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin using the GUI firmware upgrade option<br />4) wait until the router resets by itself.<br />5) try to connect to 192.168.1.1</p><p>I managed to upload the firmware and the MR3020 appears to boot, but I can&#039;t connect to it. It won&#039;t respond to ping request and when I use a packet sniffer there is no ethernet traffic coming from the MR3020 at all.</p><p>Power and WPS leds turn solid green after half a minute, pressing the WPS button or moving the function switch during the boot process results in a fast blinking WPS led (recovery mode?)</p><p>Undeterred I opened the case (bye bye warranty!) and added a serial port with some equipment I had around the house. I can connect, issue commands and verify OpenWRT is present, it is working but the ethernet connection is not. On my network switch I can see that during the boot process there is a 100 mbit link, when everything is loaded the connection is only 10 mbit.</p><p>What has gone wrong? Or more to the point, did I do something wrong?</p><p>** update ** </p><p>Another user mentioned a similar problem with another TP-link router and the same 5/29/2012 firmware (<a href="https://forum.openwrt.org/viewtopic.php?pid=168452#p168452">https://forum.openwrt.org/viewtopic.php … 52#p168452</a>)</p>											<p class="post-edited">(Last edited by <strong>sgt_smith</strong> on 29 May 2012, 23:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168473">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						29 May 2012, 23:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sgt_smith wrote:</cite><blockquote><p>I have run into some difficulties installing openwrt on the TL-MR3020.</p><p>I installed the latest MR3020 firmware from the snapshots/trunk directory (<a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a>)</p><p>I used the following steps: <br />1) Switch function mode to WISP<br />2) log in on the original software<br />3) uploaded openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin using the GUI firmware upgrade option<br />4) wait until the router resets by itself.<br />5) try to connect to 192.168.1.1</p><p>I managed to upload the firmware and the MR3020 appears to boot, but I can&#039;t connect to it. It won&#039;t respond to ping request and when I use a packet sniffer there is no ethernet traffic coming from the MR3020 at all.</p><p>Power and WPS leds turn solid green after half a minute, pressing the WPS button or moving the function switch during the boot process results in a fast blinking WPS led (recovery mode?)</p><p>Undeterred I opened the case (bye bye warranty!) and added a serial port with some equipment I had around the house. I can connect, issue commands and verify OpenWRT is present, it is working but the ethernet connection is not. On my network switch I can see that during the boot process there is a 100 mbit link, when everything is loaded the connection is only 10 mbit.</p><p>What has gone wrong? Or more to the point, did I do something wrong?</p><p>** update ** </p><p>Another user mentioned a similar problem with another TP-link router and the same 5/29/2012 firmware (<a href="https://forum.openwrt.org/viewtopic.php?pid=168452#p168452">https://forum.openwrt.org/viewtopic.php … 52#p168452</a>)</p></blockquote></div><p>Beware that ordinary openwrt firmware DO NOT include WebUI, and wifi is disabled by default.<br />You can only connect with TELNET after fresh flash.<br />For the details, study openwrt-&gt;documents on the website before do anything.</p>											<p class="post-edited">(Last edited by <strong>johan666</strong> on 29 May 2012, 23:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168477">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">sgt_smith</div>
					<div class="post-datetime">
						30 May 2012, 00:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><p>Beware that ordinary openwrt firmware DO NOT include WebUI, and wifi is disabled by default.<br />You can only connect with TELNET after fresh flash.<br />For the details, study openwrt-&gt;documents on the website before do anything.</p></blockquote></div><p>Thank you for the reminder, I am very aware of this. <br />That is why I mentioned the fact that it is not responding to ping packets and has no ethernet activity.</p><p>Without a ping reply or arp traffic telnet isn&#039;t going to work either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168490">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">pudrik</div>
					<div class="post-datetime">
						30 May 2012, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>a little side note, ive notice the wiki states that the serial should be set to 115200,n,8,1 but i like apparently some other people got random garbage that looked like a chineese font or equal, by changing this to 115200,n,7,1 makes this readable (im using putty) the reason for this is probably the origin of the router retailer. mine was purchased in bangkok.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168498">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">sunnyzj</div>
					<div class="post-datetime">
						30 May 2012, 06:26					</div>
				</div>
				<div class="post-content content">
					<p>wonderful post, I have learned much</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168499">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">alfa33</div>
					<div class="post-datetime">
						30 May 2012, 06:36					</div>
				</div>
				<div class="post-content content">
					<p>I have three units, two will not bring up eth0, confirmed with wireshark, and checked via serial,&nbsp; have tried a few images and confirmed hardware is good by re flashing TP firmware. All are labled as Ver 1.7 and the only difference is in the serial No&#039;s.<br />Working unit is SN1247xxxxx Non working SN1248xxxxx. Not sure if the hardware has changed, any pointers appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168504">
				<div class="post-metadata">
					<div class="post-num">Post #144</div>
					<div class="post-author">sgt_smith</div>
					<div class="post-datetime">
						30 May 2012, 07:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alfa33 wrote:</cite><blockquote><p>I have three units, two will not bring up eth0, confirmed with wireshark, and checked via serial,&nbsp; have tried a few images and confirmed hardware is good by re flashing TP firmware. All are labled as Ver 1.7 and the only difference is in the serial No&#039;s.<br />Working unit is SN1247xxxxx Non working SN1248xxxxx. Not sure if the hardware has changed, any pointers appreciated.</p></blockquote></div><p>How did you reflash the original firmware using serial? <br />Since I have no eth0 and no USB support I can&#039;t get a new image on it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168505">
				<div class="post-metadata">
					<div class="post-num">Post #145</div>
					<div class="post-author">alfa33</div>
					<div class="post-datetime">
						30 May 2012, 07:37					</div>
				</div>
				<div class="post-content content">
					<p>Just activate WiFi and SCP the original firmware to /tmp </p><p>What serial NO&#039;s do you have? I see there are a few commits to the AR71xx code recently, still not sure if hardware or software problem, (using same image on all three) which leads me to think there is a hardware change.</p><p>I note this from the WR703N Wiki<br />&quot;Quote&quot;<br />&quot;mtd write openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-sysupgrade.bin firmware<br />Note that this will not destroy the contents of the file system, so any old modules under /lib/modules/x.y.z will still get loaded.&quot;<br />&quot;Quote&quot;</p><p>So I might not be replacing the AR71xx modules when doing an mtd write, will have another look..</p>											<p class="post-edited">(Last edited by <strong>alfa33</strong> on 30 May 2012, 07:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168517">
				<div class="post-metadata">
					<div class="post-num">Post #146</div>
					<div class="post-author">3lixy</div>
					<div class="post-datetime">
						30 May 2012, 11:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><div class="quotebox"><blockquote><p><strong><em>Somebody wrote:</em></strong></p><p>Try putting this into your /etc/config/system, it may not be the niftiest way out but works perfectly for me! </p><p>For this to work, you want to have 1 ap mode, 1 client mode entry and a 3G wan in <strong>/etc/config/network</strong>.</p><p>If you want clarity, make the script out of each individual button handler entry.<br /></p><div class="codebox"><pre><code>config button
        option action &#039;released&#039;
        option button &#039;BTN_1&#039;
        option handler &#039;logger &quot;BTN_1 released: Enabling 3g&quot; &amp;&amp; (uci set network.wan.auto=0 &amp;&amp; uci commit network &amp;&amp; ifup wan) &amp;&amp; logger &quot;3G enabled&quot;&#039;

config button
        option action &#039;pressed&#039;
        option button &#039;BTN_1&#039;
        option handler &#039;logger &quot;BTN_1 pressed: Disabling 3G&quot; &amp;&amp; (uci set network.wan.auto=0 &amp;&amp; uci commit network &amp;&amp; ifdown wan) &amp;&amp; logger &quot;3G disabled&quot;&#039;

config button
        option action &#039;pressed&#039;
        option button &#039;BTN_0&#039;
        option handler &#039;logger &quot;BTN_0 pressed: Disabling WISP &quot; &amp;&amp; (for i in -1; do local net=$(uci get wireless.@wifi-iface[${i}].network); uci set wireless.@wifi-iface[${i}].disabled=1; uci set network.${net}.auto=0; uci commit &amp;&amp; ifdown ${net}; done) &amp;&amp; logger &quot;WISP disabled&quot;&#039;

config button
        option action &#039;released&#039;
        option button &#039;BTN_0&#039;
        option handler &#039;logger &quot;BTN_0 released: Enabling WISP&quot; &amp;&amp; (for i in -1; do local net=$(uci get wireless.@wifi-iface[${i}].network); uci del wireless.@wifi-iface[${i}].disabled 2&gt;/dev/null; uci del network.${net}.auto 2&gt;/dev/null; uci commit; ifup ${net}; done) &amp;&amp; logger &quot;WISP enabled&quot;&#039;</code></pre></div></blockquote></div><p>I am not sure how to create/define/format the &quot;For this to work, you want to have 1 ap mode, 1 client mode entry and a 3G wan in /etc/config/network&quot;.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168524">
				<div class="post-metadata">
					<div class="post-num">Post #147</div>
					<div class="post-author">alfa33</div>
					<div class="post-datetime">
						30 May 2012, 12:20					</div>
				</div>
				<div class="post-content content">
					<p>I have tftp loaded build r31650 and the Ethernet port is still not coming up, reloaded TP original firmware and Ethernet is fine, looks more like new hardware is causing my problem. Version 1.7 on sticker.</p><p>edit</p><p>Tried loading latest r31954 same issue.</p><p>From new MR3020 (Not Working)</p><br /><p>root@OpenWrt:/sbin# devstatus eth0<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;type&quot;: &quot;Network device&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;up&quot;: true,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link&quot;: false,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link-advertising&quot;: [</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link-supported&quot;: [</p><p>&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;speed&quot;: &quot;10H&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;mtu&quot;: 1500,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;macaddr&quot;: &quot;90:f6:52:be:6b:a7&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;txqueuelen&quot;: 1000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;statistics&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;collisions&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_frame_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_compressed&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;multicast&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_length_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_dropped&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_bytes&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_missed_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_compressed&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_over_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_fifo_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_crc_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_packets&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_heartbeat_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_dropped&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_aborted_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_packets&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_bytes&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_window_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_fifo_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_carrier_errors&quot;: 0<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />}</p><p> From Older MR3020 (Working)</p><p>root@AR-17-MR:/sbin# devstatus eth0<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;type&quot;: &quot;Network device&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;up&quot;: true,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link&quot;: true,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link-advertising&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;10H&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;10F&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;100H&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;100F&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;1000F&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;link-supported&quot;: [<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;10H&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;10F&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;100H&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;100F&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;1000F&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; ],<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;speed&quot;: &quot;100F&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;mtu&quot;: 1500,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;macaddr&quot;: &quot;90:f6:52:a2:70:3f&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;txqueuelen&quot;: 1000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &quot;statistics&quot;: {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;collisions&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_frame_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_compressed&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;multicast&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_length_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_dropped&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_bytes&quot;: 20466,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_missed_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_compressed&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_over_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_fifo_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_crc_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_packets&quot;: 203,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_heartbeat_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_dropped&quot;: 31,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_aborted_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_packets&quot;: 88,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_bytes&quot;: 9874,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_window_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;rx_fifo_errors&quot;: 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;tx_carrier_errors&quot;: 0<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />}</p>											<p class="post-edited">(Last edited by <strong>alfa33</strong> on 30 May 2012, 12:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168540">
				<div class="post-metadata">
					<div class="post-num">Post #148</div>
					<div class="post-author">AlexSpb</div>
					<div class="post-datetime">
						30 May 2012, 16:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alfa33 wrote:</cite><blockquote><p>I have three units, two will not bring up eth0, confirmed with wireshark, and checked via serial,&nbsp; have tried a few images and confirmed hardware is good by re flashing TP firmware. All are labled as Ver 1.7 and the only difference is in the serial No&#039;s.<br />Working unit is SN1247xxxxx Non working SN1248xxxxx. Not sure if the hardware has changed, any pointers appreciated.</p></blockquote></div><p>I have the same problem... By WiFi all working good. S/N is 1218xxxxxxx, VER. 1.6. Any suggestions?<br />I found something intrersting on this page - <a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3020">http://wiki.openwrt.org/toh/tp-link/tl-mr3020</a> in Installation section:<br /></p><div class="codebox"><pre><code>Currently only OpenWRT developer versions support the hardware. Download the lastest trunk snapshot here. As of 5/29, the most recent firmware does not allow access to the router via the ethernet port and thus telnet will not work. An older version of the firmware that works is available for download here.</code></pre></div><p>but link is broken....</p>											<p class="post-edited">(Last edited by <strong>AlexSpb</strong> on 30 May 2012, 19:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168568">
				<div class="post-metadata">
					<div class="post-num">Post #149</div>
					<div class="post-author">thux</div>
					<div class="post-datetime">
						30 May 2012, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>A question to the serial connector, can I mod a rs 232 cable to an ttdi 3.v&nbsp; an link it to an rs232 serial usb adaotor? <br />I also bricked my router because the ethernet does not work so i need a serial connection; a detailed how to to flash the tp-link firmware over wifi would be nice.<br />(if another post has the answer pelase post a link)<br />Thux</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168648">
				<div class="post-metadata">
					<div class="post-num">Post #150</div>
					<div class="post-author">alfa33</div>
					<div class="post-datetime">
						31 May 2012, 08:22					</div>
				</div>
				<div class="post-content content">
					<p>The MR3020 Ver 1.7 confirmed as not having Ethernet access using trunk r31650&nbsp; and newer builds flashed via tftp and also from the TP firmware update web page. Other users with Ver 1.6 hardware have Ethernet working after downgrading to r31650.</p><p>Two units originally flashed with r31954 reflashed to r31650 no ethernet.<br />One new unit flashed from TP firmware upgrade page to r31650 no ethernet</p><p>I&#039;ve also tried a multitude of trunks from the last three week, none are able to bring up the Ethernet port, although original TP firmware works fine. Have tried different network switches, changed flow control, negotiation, 10M, 100M, switch says link is up but no traffic. TP3020 says link is down.</p><p>Does anyone have any pointers on how to get the Ethernet port working?</p><p>Many thanks.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 6 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=8.html">8</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>