<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Help - bricked my Netgear WNR854T last night</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Apr 2018 and 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=21496&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p93075">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						24 Aug 2009, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>I loaded in the latest (I believe) load for this router to see how far it has gotten: openwrt-wnr854t-squashfs-webupgrade.img&nbsp; &nbsp;A couple of others have indicated that it works to one degree or another. I noticed that the &quot;Uploading&quot; phase went by very quickly (couple of seconds), hmmm. It went thru its looong updating router process and then nothing - just a yellow lite for the Power On indicator and which ever port I plugged my Cat5 cable into. Read another&nbsp; thread on how to unbrick a different version and followed that. After doing a hard reset (30/30/30), unplugging for 10 seconds and then plugging back in and hitting the reset button, I am able to&nbsp; ping the router. Then from a CMD window I tried the tftp -i 192.168.1.1 PUT openwrt-wnr854t-squashfs-webupgrade.img command, multiple times after unplugging or reset button, but I kept getting a &quot;Failure to connect&quot; message.</p><p>Any other ideas/suggestions? I don&#039;t have a JTAG cable nor want to go down that route if possible....</p><p>Thanks in advance!<br />daggerNC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93384">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						30 Aug 2009, 08:49					</div>
				</div>
				<div class="post-content content">
					<p>Bumping - - - any other suggestions, or should I just take a hammer to it!?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p93471">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						31 Aug 2009, 07:06					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?pid=67175#p67175">This post</a> was helpful for me. Implies a <a href="https://forum.openwrt.org/viewtopic.php?pid=93166#p93166">Cheap serial cable</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94081">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						11 Sep 2009, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Nilfred, Not sure I want to try going down the serial cable/jtag route....(I know, that makes me not a true hacker!) I also bought a Dlink DIR-655 gigabit w- router - works pretty good, but not tweakable <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I&#039;ll take any offers for this pingable, but bricked 854T if anyone is interested?</p><p>Cheers,<br />dagger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94088">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						11 Sep 2009, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>3v3 TTL serial to USB cable is 2-20 USD. I feel like you first time and even void the warranty anyway. Most times it&#039;s not bricked.<br />JTAG adapter is 100+ USD, an expensive <strong>all round</strong> debrick toy but slow. Not needed unless you mess uBoot with saveenv.<br />Try serial cable first, then make you way on the <a href="https://forum.openwrt.org/viewforum.php?id=14">unwanted hardware</a>.<br />To be a hacker, at least, you should <a href="https://forum.openwrt.org/viewtopic.php?pid=93920#p93920">fatten you router to 128Mb RAM</a>. I&#039;d like to add a USB port (not the easy way by <a href="http://www.aaeon.com/PL_Products_List_DCCAA0A1DF3344B7BB_928F5E62D5B04DB08D_TW_UTF-8.html">USB mini PCI card</a>)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94089">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tech</div>
					<div class="post-datetime">
						11 Sep 2009, 08:41					</div>
				</div>
				<div class="post-content content">
					<p>I debricked/flashed back to original firmware this way. <br />If U-boot is good, you don&#039;t need to use JTAG. I used MAX3232 - RS232 to TTL module / converter from E-bay. This is serial pinout.<br />Serial:<br />1 Tx<br />2 Vcc<br />3 NC<br />4 Vcc<br />5 NC<br />6 Ground<br />7 Rx<br />8 Ground<br />9 NC</p><p>install Pumpkin TFTP for TFTP server in computer. Place the wnr854t_1_4_38NA.img downloaded from Netgear . </p><p>connect serial console to router. check the connection. Use hyperterminal in windows XP.&nbsp; I used COM1. 115200, 8,N,1. connnect and power on. press any&nbsp; key within 3 sec to go to U-boot. <br />to get default environment:<br />Marvell&gt;&gt; printenv&nbsp; &nbsp;&gt;&gt;&gt; copy your&nbsp; original environment of the u-boot loader</p><p>serverip=192.168.1.55 &gt;&gt;&gt; change your computer IP to 192.168.1.55&nbsp; &nbsp;when tftpboot request, it will download img from&nbsp; computer&#039;s TFTP server</p><p>download the image to ram. <br />Marvell&gt;&gt; tftpboot 0 wnr854t_1_4_38NA.img<br />note -&nbsp; 0x600014 (hex)&nbsp; &gt;&gt;&gt; it will the size of image.</p><p>erase the flash (partially):<br />Marvell&gt;&gt; erase 0xFF800000 0xFFDFFFFF </p><p>copy to the flash:<br />Marvell&gt;&gt; cp.b 0x14 0xFF800000 0x600014</p><br /><p>start the image:<br />Marvell&gt;&gt; run standalone</p><p>I debricked and return to original firmware. Same way for different build firmwares for flashing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94090">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						11 Sep 2009, 09:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tech wrote:</cite><blockquote><p>copy to the flash:<br />Marvell&gt;&gt; cp.b 0x14 0xFF800000 0x6000<span style="color: red"><strong>14</strong></span></p></blockquote></div><p>You deliberately skipped first 0x14 bytes of image header, so you must subtract them from the downloaded size, using M$ Calculator in HEX mode:<br />0x600014 - 0x14 = 0x600000<br />Finally should look like this:<br /></p><div class="quotebox"><blockquote><p>Marvell&gt;&gt; cp.b 0x14 0xFF800000 0x600000</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94149">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						12 Sep 2009, 06:44					</div>
				</div>
				<div class="post-content content">
					<p>Nilfred and tech - REALLY appreciate your posts/help here. I&#039;ll try this serial cable approach.&nbsp; If I may ask, what is the need/purpose of erasing some of the flash and then copying the string above before trying to start the new image? Thanks much again.</p><p>dagger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94167">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">shen390s</div>
					<div class="post-datetime">
						12 Sep 2009, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>more simple solution if u-boot is ok:<br />marvell&gt;bootm 0x0</p><p>It will start a TFTP server and print out address, than you can run following commands in another host<br />1. start tftp<br />tftp&gt; connect &lt;wnr854t prints out ip address&gt;<br />tftp&gt; binary<br />tftp&gt; put &lt;file name of firmware binary you want to load&gt;</p><p>That&#039;s all</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94184">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						13 Sep 2009, 01:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shen390s wrote:</cite><blockquote><p>tftp&gt; put &lt;file name of firmware binary you want to load&gt;</p></blockquote></div><p>Should it be standard webupdate firmware or a binary result of strip first 0x14 bytes of firmware header?<br />If I recall right, last byte should also be stripped this way.<br />Correct me if I&#039;m wrong but may be easier if an already stripped firmware download location is provided.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94355">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">shen390s</div>
					<div class="post-datetime">
						15 Sep 2009, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>use web upgrade firmware</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95509">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">finger</div>
					<div class="post-datetime">
						7 Oct 2009, 15:56					</div>
				</div>
				<div class="post-content content">
					<p>sorry for the offtopic but is there a way to add usb to this? the cpu supports USB as I have read but I could not see any post here regarding it, since if I can add USB I&#039;ll buy one</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103007">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						16 Feb 2010, 00:21					</div>
				</div>
				<div class="post-content content">
					<p>Resurrecting this post, because, I decided to try to resurrect my bricked WNR854T router. My router appears to only be about 2/3 bricked - here&#039;s what I&#039;ve done (but no success yet):</p><p>To recap, I installed a squashfs version on my Netgear router, and it seemed to install with no issues, but when I rebooted it, I got nothing but a solid yellow Power LED, and solid yellow on the port where I connected the Cat5e cable. Unable to log in to the admin page at 192.168.1.1. Lots of hard resets, 30-30-30&#039;s and swearing, but no good. I used my laptop to run TFTP to PUT a factory image on it, doing the unplug/plug in at various delays dance, but to no avail. Also did the dual cmd window up with one running a constant ping command - nada. I always get the &quot;timeout occurred, connect request failed&quot; message. :-(</p><p>On my Win7 PC I can open a cmd window and I ping the router at address 192.168.1.1 and get 4 good responses with a TTL-64 result. What I just did this weekend was to hook it up directly to my cable modem and when I did an &quot;ipconfig&quot; I got an actual IP assignment of 192.168.1.228, subnet of 255.255.255.0 and a gateway address of 192.168.1.1 !!! If I got an IP assignment then something is still working, so I tried to access the internet, and,&nbsp; it worked!?!?! So, something is still working inside the box (note that wireless is not working).</p><p>Given that the router is not completely dead as I originally thought, does anybody have any additional suggestions as to what I can try next? I don&#039;t have a serial cable adaptor nor a JTAG cable. Is there a different IP address to access the open_wrt admin page perhaps?</p><p>Thanks!<br />daggerNC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103684">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						24 Feb 2010, 23:10					</div>
				</div>
				<div class="post-content content">
					<p>Nilfred, tech, shen, (and others from additional threads like maddes) - a big THANK YOU. Your contributions have really helped me out.</p><p>My update:&nbsp; I bought one of the generic Nokia CA-42 USB to Serial cell phone cables and proceeded to strip the cell phone connector off and prep the wires for pin access. Had a heck of a time trying to get my Windows 7 laptop to take and drivers for it - turns out I got a lead thru Google that lead me to the TW manufacturers site and had to use their latest drivers - but it worked. Of course my wire colors were different than any other thread I found - but I figured that out. tech - your serial layout and instructions to get into the MARVELL prompt worked (again once I got a terminal app to work - I tried Putty but it never would open, so I found a copy of Hyperterminal that I could run on Win7 and that one worked!).</p><p>First time for me to do something at this level via a Terminal window (and I&#039;m NO Linux expert), but I could see the previous version of open-wrt.squashfs was running and uboot appeared to be intact. So shen&nbsp; I followed your instructions and after setting up my PC to use 192.168.1.55 as the server IP address, issued the bootm 0x0 from the terminal, and then I opened a cmd window and issued&nbsp; the command:&nbsp; tftp -i 192.168.1.1 PUT &lt;latest WNR854T firmware.bin file downloaded from Netgear&gt;&nbsp; And, it gave me a success message (6 megs xferred in 3 seconds). I saw on my terminal window the erase blocks xx thru yy message and then the flashing abc message. Left the router go for the rest of the night (it&#039;s now after 1:00AM :-) )</p><p>BUT, I don&#039;t think it worked completely successfully. I had a few minutes this morning before heading off to work to check the router. The Power LED is now no longer a solid yellow, but it is now a constantly flashing green led. I did a power reset on the 854T, and then tried to log in to the admin page at 192.168.1.1, and it said it couldn&#039;t connect (in Internet Explorer 8) Huh?&nbsp; I checked my ipconfig and got a strange IP address - something like 162.xxx.y.zz (what subnet is this??) </p><p>Anyway - that&#039;s as far as I got this morning. Anybody have any quick ideas what might of happened and/or what I should do next? Did I need to force a run the new image in the Terminal session first? Do I need to load in an older version of Netgear firmware first? Or must I install a newer beta OPEN-WRT image only?</p><p>Thanks all once again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103712">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						25 Feb 2010, 05:52					</div>
				</div>
				<div class="post-content content">
					<p>More time to play tonight - but something isn&#039;t right/not working. I can Hyperterminal in, set my laptop to server address 192.168.1.55; in terminal issue bootm 0x0; in cmd window issue the tftp command to load image; load transfer is successful/complete; in terminal I see it takes the download file, then erases 47 sectors, and then it starts the flash-write process, and then just dies there????? Here is the Terminal capture:</p><p>Marvell&gt;&gt; bootm 0x0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />## Booting image at 00000000 ...&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Bad Magic Number...do_bootmimage_name);setenv bootargs<br />Start Gemtek tftpd for Netgear GE RT!&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />TFTP Server IP is : 192.168.1.1</p><p>Soc: 88F5181 B1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Load address: 0x400000u&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />WRequest from 192.168.1.55: [r854t_1_4_33_ww.img], [octet]x400000;hz , TClock = 166Mhz&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />#################################################################&nbsp; &nbsp; <br />bootdelay=3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />disaMvPnp=no Express Roo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#################################################################: 919/40956 byte&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />#################################################################&nbsp; &nbsp;005e0000&nbsp; &nbsp; &nbsp; 00600000&nbsp; &nbsp; &nbsp; 00620000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />######################################################&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />#################################################################000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />################################################################# 00760000 (RO)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#################################################################O) 007e0000 (RO)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />#################################################################&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Marvell&gt;&gt; tftpboot 0 wnr854t_1_4_33_ww.i<br />#################################################################&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />TFTP from server 192.168.1.55; our IP address i<br />#################################################################&nbsp; &nbsp; &nbsp; &nbsp;<br />Filename &#039;wnr854t_1_4_33_ww.img&#039;.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />#################################################################T T T T&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Retry count exceeded; startin<br />######################################################0 device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />T<br />header.magic is [NG_WNR854T]/[NG_WNR854T], header.crc is F76BCACF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; \/&nbsp; | __ _ _ ____&nbsp; &nbsp;_____| | |&nbsp; &nbsp; &nbsp; &nbsp;<br />crc is F76BCACF&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Firmware with CRC 0xF76BCACF...OK! / _ \ | |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />old_fw_crc[0]=[DC40C1CD]/[F76BCACF]_| | |&nbsp; &nbsp;\ V /&nbsp; __/ | |&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />old_fw_crc[1]=[548A1A71]/[F76BCACF]&nbsp; |_|&nbsp; |_|\__,_|_|&nbsp; &nbsp; \_/ \___|_|_|<br />old_fw_crc[2]=[B5144332]/[F76BCACF]&nbsp; &nbsp; &nbsp;<br /> _&nbsp; &nbsp;_&nbsp; &nbsp; &nbsp;____&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />old_fw_crc[3]=[97A5EF4F]/[F76BCACF]| |&nbsp; &nbsp;| __ )&nbsp; ___&nbsp; &nbsp;___ | |_&nbsp; &nbsp; &nbsp; &nbsp;<br />old_fw_crc[4]=[67F367CE]/[F76BCACF]|&nbsp; _ \ / _ \ / _ \| __|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />old_fw_crc[5]=[5F43C47E]/[F76BCACF]) | (_) | (_) | |_&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />old_fw_crc[6]=[19127FAD]/[F76BCACF]_/ \___/ \__|&nbsp; ** LOADER **&nbsp; &nbsp; &nbsp; &nbsp; <br />old_fw_crc[7]=[C59C&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />U-Boot 1.1.1 (Apr 18 2007 - 16:05<br />old_fw_crc[10]=[3A2061E9]/[F76BCACF]env bootargs $(bootargs) root=/dev/m<br />old_fw_crc[11]=[E7AAB69F]/[F76BCACF]00000&nbsp; &nbsp;size&nbsp; 32MBb&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />old_fw_crc[12]=[9348C43F]/[F76BCACF]&nbsp; 32MB&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />[8192kB@<br />old_fw_crc[17]=[F424C424]/[F76BCACF]<br />old_fw_crc[18]=[EFDD6C0C]/[F76BCACF]<br />old_fw_crc[19]=[B5E8409F]/[F76BCACF]<br />old_fw_crc[20]=[775CC58C]/[F76BCACF]<br />old_fw_crc[21]=[2DBABE9E]/[F76BCACF]<br />old_fw_crc[22]=[BC32B008]/[F76BCACF]<br />old_fw_crc[23]=[31624DE7]/[F76BCACF]<br />old_fw_crc[24]=[39BE3515]/[F76BCACF]<br />old_fw_crc[25]=[634F9071]/[F76BCACF]<br />old_fw_crc[26]=[DB18D5A5]/[F76BCACF]<br />old_fw_crc[27]=[73650662]/[F76BCACF]<br />old_fw_crc[28]=[855CBA4E]/[F76BCACF]<br />old_fw_crc[29]=[804AFE40]/[F76BCACF]<br />old_fw_crc[30]=[53EE236F]/[F76BCACF]<br />old_fw_crc[31]=[C830B8DC]/[F76BCACF]<br />old_fw_crc[32]=[C3AD44BB]/[F76BCACF]<br />old_fw_crc[33]=[18B2C611]/[F76BCACF]<br />old_fw_crc[34]=[1570FAED]/[F76BCACF]<br />old_fw_crc[35]=[D7F3A726]/[F76BCACF]<br />flash_protect : 0xFF800000 to 0xFFDFFFFF<br />Erase 0 - 47 sectors...<br />................................................<br />flash_write : from 00400014 write to FF800000-FFDFFFFF, len is 6291456</p><p>What am I doing wrong? I also try the tftpboot 0 wnr854t_1_4_33.ww.img and that never works as it goes T T T T T T T&nbsp; and then timesout and starts over again. It seems that I doesn&#039;t know how to access the TFTP server 192.168.1.55 (my static ip) or is it the file it can&#039;t find -&gt; like how does it locate the .img firmware file (two threads on this approach never mention that)?&nbsp; Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103722">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jal2</div>
					<div class="post-datetime">
						25 Feb 2010, 11:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>daggerNC wrote:</cite><blockquote><p>I also try the tftpboot 0 wnr854t_1_4_33.ww.img and that never works as it goes T T T T T T T&nbsp; and then timesout and starts over again. It seems that I doesn&#039;t know how to access the TFTP server 192.168.1.55 (my static ip) or is it the file it can&#039;t find -&gt; like how does it locate the .img firmware file</p></blockquote></div><p>You must set the IP address of the tftp server on the U-Boot prompt with<br /></p><div class="codebox"><pre><code>setenv serverip 192.168.1.55</code></pre></div><p>and the one of the WNR854T with<br /></p><div class="codebox"><pre><code>setenv ipaddr 192.168.1.1</code></pre></div><p>(unless it is already set). Both shall be in the same subnet. Check the settings with<br /></p><div class="codebox"><pre><code>printenv</code></pre></div><p>These settings are lost after power cycle or hw reset unless you say </p><div class="codebox"><pre><code>saveenv</code></pre></div><p>- if this command is supported.</p><p>The directory fo the image depends on your tftp server configuration, on Linux it usually defaults to /tftpboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103740">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						25 Feb 2010, 17:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>daggerNC wrote:</cite><blockquote><p>flash_protect : 0xFF800000 to 0xFFDFFFFF</p></blockquote></div><p>Maybe you have an overprotected flash, please issue:<br /></p><div class="quotebox"><cite>Marvell&gt;&gt; flinfo wrote:</cite><blockquote><p>Bank # 1: SAMSUNG SAMSUNG_FID_K8D6316T (8 Mbit, top boot sector)<br />Size:&nbsp; 8 MB,Bus Width: 1, device Width: 1.<br />Flash base: 0xff800000,Number of Sectors: 135 Type: TOP.<br />&nbsp; Sector Start Addresses:<br />&nbsp; &nbsp; 00000000&nbsp; &nbsp; &nbsp; 00010000&nbsp; &nbsp; &nbsp; 00020000&nbsp; &nbsp; &nbsp; 00030000&nbsp; &nbsp; &nbsp; 00040000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00050000&nbsp; &nbsp; &nbsp; 00060000&nbsp; &nbsp; &nbsp; 00070000&nbsp; &nbsp; &nbsp; 00080000&nbsp; &nbsp; &nbsp; 00090000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 000a0000&nbsp; &nbsp; &nbsp; 000b0000&nbsp; &nbsp; &nbsp; 000c0000&nbsp; &nbsp; &nbsp; 000d0000&nbsp; &nbsp; &nbsp; 000e0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 000f0000&nbsp; &nbsp; &nbsp; 00100000&nbsp; &nbsp; &nbsp; 00110000&nbsp; &nbsp; &nbsp; 00120000&nbsp; &nbsp; &nbsp; 00130000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00140000&nbsp; &nbsp; &nbsp; 00150000&nbsp; &nbsp; &nbsp; 00160000&nbsp; &nbsp; &nbsp; 00170000&nbsp; &nbsp; &nbsp; 00180000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00190000&nbsp; &nbsp; &nbsp; 001a0000&nbsp; &nbsp; &nbsp; 001b0000&nbsp; &nbsp; &nbsp; 001c0000&nbsp; &nbsp; &nbsp; 001d0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 001e0000&nbsp; &nbsp; &nbsp; 001f0000&nbsp; &nbsp; &nbsp; 00200000&nbsp; &nbsp; &nbsp; 00210000&nbsp; &nbsp; &nbsp; 00220000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00230000&nbsp; &nbsp; &nbsp; 00240000&nbsp; &nbsp; &nbsp; 00250000&nbsp; &nbsp; &nbsp; 00260000&nbsp; &nbsp; &nbsp; 00270000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00280000&nbsp; &nbsp; &nbsp; 00290000&nbsp; &nbsp; &nbsp; 002a0000&nbsp; &nbsp; &nbsp; 002b0000&nbsp; &nbsp; &nbsp; 002c0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 002d0000&nbsp; &nbsp; &nbsp; 002e0000&nbsp; &nbsp; &nbsp; 002f0000&nbsp; &nbsp; &nbsp; 00300000&nbsp; &nbsp; &nbsp; 00310000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00320000&nbsp; &nbsp; &nbsp; 00330000&nbsp; &nbsp; &nbsp; 00340000&nbsp; &nbsp; &nbsp; 00350000&nbsp; &nbsp; &nbsp; 00360000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00370000&nbsp; &nbsp; &nbsp; 00380000&nbsp; &nbsp; &nbsp; 00390000&nbsp; &nbsp; &nbsp; 003a0000&nbsp; &nbsp; &nbsp; 003b0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 003c0000&nbsp; &nbsp; &nbsp; 003d0000&nbsp; &nbsp; &nbsp; 003e0000&nbsp; &nbsp; &nbsp; 003f0000&nbsp; &nbsp; &nbsp; 00400000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00410000&nbsp; &nbsp; &nbsp; 00420000&nbsp; &nbsp; &nbsp; 00430000&nbsp; &nbsp; &nbsp; 00440000 <span style="color: red"><strong>(RO)</strong></span> 00450000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00460000&nbsp; &nbsp; &nbsp; 00470000&nbsp; &nbsp; &nbsp; 00480000&nbsp; &nbsp; &nbsp; 00490000&nbsp; &nbsp; &nbsp; 004a0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 004b0000&nbsp; &nbsp; &nbsp; 004c0000&nbsp; &nbsp; &nbsp; 004d0000&nbsp; &nbsp; &nbsp; 004e0000&nbsp; &nbsp; &nbsp; 004f0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00500000&nbsp; &nbsp; &nbsp; 00510000&nbsp; &nbsp; &nbsp; 00520000&nbsp; &nbsp; &nbsp; 00530000&nbsp; &nbsp; &nbsp; 00540000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00550000&nbsp; &nbsp; &nbsp; 00560000&nbsp; &nbsp; &nbsp; 00570000&nbsp; &nbsp; &nbsp; 00580000&nbsp; &nbsp; &nbsp; 00590000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 005a0000&nbsp; &nbsp; &nbsp; 005b0000&nbsp; &nbsp; &nbsp; 005c0000&nbsp; &nbsp; &nbsp; 005d0000&nbsp; &nbsp; &nbsp; 005e0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 005f0000&nbsp; &nbsp; &nbsp; 00600000&nbsp; &nbsp; &nbsp; 00610000&nbsp; &nbsp; &nbsp; 00620000&nbsp; &nbsp; &nbsp; 00630000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00640000&nbsp; &nbsp; &nbsp; 00650000&nbsp; &nbsp; &nbsp; 00660000&nbsp; &nbsp; &nbsp; 00670000&nbsp; &nbsp; &nbsp; 00680000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00690000&nbsp; &nbsp; &nbsp; 006a0000&nbsp; &nbsp; &nbsp; 006b0000&nbsp; &nbsp; &nbsp; 006c0000&nbsp; &nbsp; &nbsp; 006d0000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 006e0000&nbsp; &nbsp; &nbsp; 006f0000&nbsp; &nbsp; &nbsp; 00700000&nbsp; &nbsp; &nbsp; 00710000&nbsp; &nbsp; &nbsp; 00720000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00730000&nbsp; &nbsp; &nbsp; 00740000&nbsp; &nbsp; &nbsp; 00750000&nbsp; &nbsp; &nbsp; 00760000&nbsp; &nbsp; &nbsp; 00770000&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; 00780000&nbsp; &nbsp; &nbsp; 00790000&nbsp; &nbsp; &nbsp; 007a0000&nbsp; &nbsp; &nbsp; 007b0000&nbsp; &nbsp; &nbsp; 007c0000 (RO)<br />&nbsp; &nbsp; 007d0000 (RO) 007e0000 (RO) 007f0000 (RO) 007f2000 (RO) 007f4000 (RO)<br />&nbsp; &nbsp; 007f6000 (RO) 007f8000 (RO) 007fa000 (RO) 007fc000 (RO) 007fe000 (RO)</p><p>Bank # 2: missing or unknown FLASH type</p></blockquote></div><p>Then as needed:<br /></p><div class="quotebox"><blockquote><p>Marvell&gt;&gt; protect off 0xFFC40000 0xFFC5FFFF</p></blockquote></div><p>See <a href="https://forum.openwrt.org/viewtopic.php?pid=67175#p67175">mfd post</a></p><p>Edit: DO NOT use saveenv</p>											<p class="post-edited">(Last edited by <strong>Nilfred</strong> on 25 Feb 2010, 17:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103786">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						26 Feb 2010, 07:41					</div>
				</div>
				<div class="post-content content">
					<p>jal2 - my IP addresses were already set to 192.168.1.1 and 192.168.1.55 (but I ran your commands anyways) - no help</p><p>Hi Nilfred - I didn&#039;t see any sectors that were RO (except the last grouping like yours above). I tried multiple groups of forcing flash protect off, but no difference.</p><p>I find that I seem to be able to load any of the latest openwrt squashfs images - I can ping the router afterwards. But, when I then do a tftp to install any of the factory images, it seems to not want to boot the new load. I get the following capture in my Terminal program:</p><p>DRAM Total size&nbsp; 32MB<br />[8192kB@ff800000] Flash:&nbsp; 8 MB<br />Addresses 20M - 0M are saved for the U-Boot usage.<br />Mem malloc Initialization (20M - 16M): Done</p><p>Soc: 88F5181 B1<br />CPU: ARM926 (Rev 0) running @ 500Mhz<br />SysClock = 166Mhz , TClock = 166Mhz</p><br /><p>USB 0: host mode<br />PCI 0: PCI Express Root Complex Interface<br />PCI 1: Conventional PCI, speed = 33000000<br />Net:&nbsp; &nbsp;egiga0 [PRIME]<br />Hit any key to stop autoboot:&nbsp; 0<br />### JFFS2 loading &#039;uImage&#039; to 0x400000<br />Scanning JFFS2 FS: ....... done.<br />### JFFS2 load complete: 903724 bytes loaded to 0x400000<br />## Booting image at 00400000 ...<br />Bad Magic Number...do_bootm<br />Start Gemtek tftpd for Netgear GE RT!<br />TFTP Server IP is : 192.168.1.1<br />Load address: 0x400000</p><p>In this state, can&#039;t do anything with the router except tftp a new image to it.....</p><p>One of the IP gurus at my work said it might be a Linux version mismatch or nvram parameter mismatch or perhaps a file size mismatch?&nbsp; It appears to load uImage from JFFS2, but then I always see the &quot;Bad Magic Number&quot;, is this tell anybody something about what is wrong?</p><p>Thanks,<br />daggerNC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103831">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						26 Feb 2010, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>As well, I installed Solarwinds TFTPServer on my Win7 laptop. It started up fine and it creates a root folder at C:\TFTP-Root. I made sure that the TFTP Server parms allowed both receive and send files, and all IP&#039;s were allowed. It saw my static laptop IP address as 192.168.1.55. However, when I&#039;m in Terminal mode with the router and printenv shows the routers IP and TFTP Server IP is set correctly and flinfo shows no protected blocks, when I enter &quot;tftpboot 0 wnr854t_1_4_33_ww.img&quot; it attempts to download the file from the TFTP Server but it just shows a T&nbsp; T&nbsp; T&nbsp; T&nbsp; T&nbsp; T then Timeout, and restarts the tftpboot process and loops over and over. Has anyone used this tftp server app, and/or any special settings I may have missed? </p><p>Thanks - daggerNC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103977">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						1 Mar 2010, 07:01					</div>
				</div>
				<div class="post-content content">
					<p>OK - got a little further today. I tried again to get tftpboot to work, and it wouldn&#039;t, so I installed Pumpkin TFTP Server app on one of the other thread recommendations. That worked!!! (So, I deleted Solarwinds server app). I followed the sequences above and from the mdm thread, everything seems to go smoothly, until I issue the &quot;run standalone&quot; and then I get the Bad Magic Number message and it just goes into bootm wait loop. Here&#039;s the terminal data:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;__&nbsp; __&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _ _<br />&nbsp; &nbsp; &nbsp; &nbsp; |&nbsp; \/&nbsp; | __ _ _ ____&nbsp; &nbsp;_____| | |<br />&nbsp; &nbsp; &nbsp; &nbsp; | |\/| |/ _` | &#039;__\ \ / / _ \ | |<br />&nbsp; &nbsp; &nbsp; &nbsp; | |&nbsp; | | (_| | |&nbsp; &nbsp;\ V /&nbsp; __/ | |<br />&nbsp; &nbsp; &nbsp; &nbsp; |_|&nbsp; |_|\__,_|_|&nbsp; &nbsp; \_/ \___|_|_|<br /> _&nbsp; &nbsp;_&nbsp; &nbsp; &nbsp;____&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _<br />| | | |&nbsp; &nbsp;| __ )&nbsp; ___&nbsp; &nbsp;___ | |_ <br />| | | |___|&nbsp; _ \ / _ \ / _ \| __| <br />| |_| |___| |_) | (_) | (_) | |_ <br /> \___/&nbsp; &nbsp; |____/ \___/ \___/ \__|&nbsp; ** LOADER **<br /> ** MARVELL BOARD: RD-88F5181L-VOIP-GE LE GE RT v1.05</p><p>U-Boot 1.1.1 (Apr 18 2007 - 16:05:00) Marvell version: 1.7.3</p><p>DRAM CS[0] base 0x00000000&nbsp; &nbsp;size&nbsp; 32MB <br />DRAM Total size&nbsp; 32MB <br />[8192kB@ff800000] Flash:&nbsp; 8 MB<br />Addresses 20M - 0M are saved for the U-Boot usage.<br />Mem malloc Initialization (20M - 16M): Done</p><p>Soc: 88F5181 B1<br />CPU: ARM926 (Rev 0) running @ 500Mhz <br />SysClock = 166Mhz , TClock = 166Mhz </p><br /><p>USB 0: host mode<br />PCI 0: PCI Express Root Complex Interface<br />PCI 1: Conventional PCI, speed = 33000000<br />Net:&nbsp; &nbsp;egiga0 [PRIME]<br />Hit any key to stop autoboot:&nbsp; 3 <br />[08][08][08] 0 <br />Marvell&gt;&gt; tftpboot 0&nbsp; WNR854T_V1.4.38NA.img<br />tftpboot 0&nbsp; WNR854T_V1.4.38NA.img</p><p>Using egiga0 device<br />TFTP from server 192.168.1.55; our IP address is 192.168.1.1<br />Filename &#039;WNR854T_V1.4.38NA.img&#039;.<br />Load address: 0x0<br />Loading: *[08]#################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; #################################################################<br />&nbsp; &nbsp;&nbsp; ###########################################################<br />done<br />Bytes transferred = 6291476 (600014 hex)<br />Marvell&gt;&gt; erase 0xFF800000 0xFFDFFFFF<br />erase 0xFF800000 0xFFDFFFFF</p><br /><p>................................................<br />Erased 48 sectors<br />Marvell&gt;&gt; cp.b 0x14 0xFF800000 0x600000<br />cp.b 0x14 0xFF800000 0x600000</p><p>Copy to Flash... done<br />Marvell&gt;&gt; run standalone<br />run standalone</p><p>### JFFS2 loading &#039;uImage&#039; to 0x400000<br />Scanning JFFS2 FS:&nbsp; &nbsp;[08][08].&nbsp; [08][08]| [08][08]/ [08][08]- [08][08]\ [08][08]| [08][08]/ [08][08]- [08][08].&nbsp; [08][08]\ [08][08]| [08][08]/ [08][08]- [08][08]\ [08][08]| [08][08]/ [08][08]- [08][08]\ [08][08].&nbsp; [08][08]| [08][08]/ [08][08].&nbsp; [08][08]- [08][08].&nbsp; [08][08]\ [08][08].&nbsp; [08][08]| [08][08]/ [08][08]- [08][08]\ [08][08]| [08][08]/ [08][08]- [08][08]\ [08][08].&nbsp; [08][08]| [08][08]/ [08][08]- [08][08] done.</p><p>### JFFS2 load complete: 903668 bytes loaded to 0x400000<br />## Booting image at 00400000 ...<br />Bad Magic Number...do_bootm<br />Start Gemtek tftpd for Netgear GE RT!<br />TFTP Server IP is : 192.168.1.1<br />Load address: 0x400000<br />T T T T T T T T T T </p><br /><p>Here is my printenv results:</p><p>Marvell&gt;&gt; printenv</p><p>baudrate=115200<br />loads_echo=0<br />rootpath=/mnt/ARM_FS/<br />cpuName=926<br />CASset=min<br />MALLOC_len=4<br />ethprime=egiga0<br />bootargs_root=root=/dev/nfs rw<br />bootargs_end=:::DB88FXX81:eth0:none<br />ethaddr=00:00:00:00:51:81<br />usb0Mode=host<br />ethact=egiga0<br />image_name=uImage<br />ipaddr=192.168.1.1<br />serverip=192.168.1.55<br />filesize=70084<br />fileaddr=100000<br />uboot_ver=uboot<br />stdin=serial<br />stdout=serial<br />stderr=serial<br />enaMonExt=no<br />enaFlashBuf=yes<br />enaCpuStream=no<br />bootargs2=$(bootargs)<br />standalone=fsload 0x400000 $(image_name);setenv bootargs $(bootargs) root=/dev/mtdblock1 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x400000;<br />bootcmd=fsload 0x400000 $(image_name);setenv bootargs $(bootargs) root=/dev/mtdblock1 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x400000;<br />bootnfs=fsload 0x400000 $(image_name);setenv bootargs $(bootargs) root=/dev/mtdblock1 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x400000;<br />bootdelay=3<br />disaMvPnp=no<br />overEthAddr=no</p><p>Environment size: 919/40956 bytes<br />Marvell&gt;&gt; </p><br /><p>Any ideas???</p><p>Thanks,<br />dagger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104780">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">daggerNC</div>
					<div class="post-datetime">
						17 Mar 2010, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>SOLVED!!!!!!!!!</p><p>My Netgear WNR854T is back up a running with the latest factory firmware, 38NA. The last key that triggered my ability to finally get a factory firmware to install was a comment from one of the local network guru&#039;s I work with:&nbsp; I told him what was going on (installed openwrt, many versions, but could not get a factory firmware to take as I always got a &quot;BAD MAGIC NUMBER&quot; error. He said that error has been around for a long time and generally means that the linux partitions in my box don&#039;t match the expected partitions of the factory firmware....... Hmm, all the builds I&#039;ve tried are squashfs based...</p><p>So, I looked for a jffs2 build and found some here: <a href="http://ipkg.nslu2-linux.org/feeds/openwrt/unstable/orion/">http://ipkg.nslu2-linux.org/feeds/openw … ble/orion/</a>&nbsp; I tftp&#039;d it into the router and it installed, but wouldn&#039;t run giving me a Kernal Panic error. However, the upload and firmware did go thru the full install process, and, that did it!! I was then able to tftp a factory Netgear image and it installed. My WNR854T is now offically &quot;unbricked&quot; (though maddes&#039; firmwares did work to a limited degree).</p><p>Thanks again to all for your inputs and help. Maybe this clue to use a jffs2 build will help any others having problems reverting back to their factory firmware.</p><p>Cheers,<br />daggerNC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105418">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">brandon9271</div>
					<div class="post-datetime">
						28 Mar 2010, 07:54					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m having a very similar problem.. I flashed my WNR854T with openwrt-wnr854t-squashfs-webupgrade.img&nbsp; and after trying to access the LuCi web interface it says&quot;not found&quot;&nbsp; The router is working but of course I can&#039;t change any settings.&nbsp; I tried the TFTP flashing method mentioned above but that didn&#039;t work.. I also tried the Pumpkin TFTP with the same result.. it always times out.&nbsp; I&#039;m not really sure what to do at this point as I&#039;m not a Linux guru like the rest of you guys!&nbsp; Any help would be HUGELY appreciated!&nbsp; </p><p>Thanks!! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>EDIT:&nbsp; I haven&#039;t tried Hyperterminal as you mentioned doing.. is that a telnet sort of thing or did you connect a serial cable to the router? Sorry for my ignorance..&nbsp; Havent used hyperterminal in years..</p><p>EDIT:&nbsp; ok.. I managed to get &quot;telneted&quot; in.. I guess I&#039;ll poke around some more <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>brandon9271</strong> on 28 Mar 2010, 08:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111375">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">maddes.b</div>
					<div class="post-datetime">
						17 Jun 2010, 13:44					</div>
				</div>
				<div class="post-content content">
					<p>A way to flash the stock firmware via sysupgrade is mentioned in <a href="https://forum.openwrt.org/viewtopic.php?pid=111363#p111363">post #905</a> of another thread. Just to let you know.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111401">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">brandon9271</div>
					<div class="post-datetime">
						17 Jun 2010, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>can this method work via Telnet or will I have to build a serial cable and go that way?&nbsp; The router works fine except that its web interface doesn&#039;t work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p111423">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						18 Jun 2010, 08:27					</div>
				</div>
				<div class="post-content content">
					<p>There isn&#039;t any web interface by default. Please RTFM!</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=21496&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>