<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Toolchain on usb drive?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p65584">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mrx</div>
					<div class="post-datetime">
						23 Mar 2008, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I use the svn kamikaze toolchain, but my harddisk runs out of space.<br />I wanted to run the toolchain from usb disk so i used the svn co <a href="https://svn.openwrt.org/openwrt/trunk/">https://svn.openwrt.org/openwrt/trunk/</a><br />so everything was coppied on the usb disk. when i run make menuconfig it complains about missing dependencies,<br />but they are all installed and i dont have the error when i have the toolchain installed on the internal disk.<br />I guess the toolchain expect zlib, ncurses, etc to be installed on the same disk.<br />I can create a buch of symlinks to solve this, but i think there is a much better way.</p><p>Anny ideas?<br />Thanks for all help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65585">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">forum2008</div>
					<div class="post-datetime">
						23 Mar 2008, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>NO. Native compilation is NOT supported.</p><p>You have to cross-compile on a Linux box either on a real box or in a Virtual Machine.</p>											<p class="post-edited">(Last edited by <strong>forum2008</strong> on 23 Mar 2008, 15:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65587">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mrx</div>
					<div class="post-datetime">
						23 Mar 2008, 15:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forum2008 wrote:</cite><blockquote><p>NO. Native compilation is NOT supported.</p><p>You have to cross-compile on a Linux box either on a real box or in a Virtual Machine.</p></blockquote></div><p>Yes, this is what i mean. The toolchain is on my laptop with kubuntu. <br />But i run out of space, so i attached a usb disk to my laptop and intalled the toolchain on the usb disk.<br />(i had to mention my laptop in first post. Sorry)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65607">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						23 Mar 2008, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>There is no reason this should not work.</p><p>I have kamikaze checked out to my home directory.&nbsp; There is no difference between that and having it on /mnt/usb or somewhere else instead.</p><p>Did you install the official Ubuntu packages for zlib and the other dependencies or did you install them manually?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65634">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mrx</div>
					<div class="post-datetime">
						24 Mar 2008, 12:10					</div>
				</div>
				<div class="post-content content">
					<p>You might have a point there. I first installed things manualy because i could not find them. (used wrong package manger)<br />Later i found out how to install them and did this using synaptic. Maybe some things are still screwed up because of the first attemt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65654">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						24 Mar 2008, 15:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forum2008 wrote:</cite><blockquote><p>You have to cross-compile on a Linux box either on a real box or in a Virtual Machine.</p></blockquote></div><p>What is a <em>cross-compile on a real box</em>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65671">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						24 Mar 2008, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>He means you must compile on an x86 Linux PC instead of trying to compile on the router itself.</p><p>e.g. if you have a MIPS-based router, your cross compiler runs on x86, but produces MIPS binaries.</p><p>A normal compiler will run on x86 and produce x86 binaries (or run on MIPS and produce MIPS binaries).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65680">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						24 Mar 2008, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>What you explained is called a <em>cross compilation</em> on a host computer which most of us have been doing; however, what I asked is a <em>cross-compile on a real box</em>. These are two different things. AFAIC, a <em>cross-compile on a real box</em> is a native compilation that <a href="http://forum.openwrt.org/profile.php?id=13871">forum2008</a> said that isn&#039;t supported (by OpenWRT). However, it doesn&#039;t mean one cannot do a native compilation to produce an OpenWRT firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65689">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						24 Mar 2008, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>mazilo: &quot;to cross-compile&quot; is the verb form of &quot;cross compilation&quot; (noun form).&nbsp; i.e. it is the same thing.&nbsp; I don&#039;t understand why you distinguish between them and why you say &quot;cross-compile on a real box&quot; is a native compilation.</p><p>Whether or not one can compile OpenWrt natively I do not know.&nbsp; I am pretty sure it would work if the target is x86, but maybe it would not work on some other platform for some reason.</p><p>Perhaps I should try it on qemu <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65690">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mrx</div>
					<div class="post-datetime">
						24 Mar 2008, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>i did used the uclibc mips toolchain to compile stuff on my router. This did work, but was pretty slow <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />So i think it is also possible to create opwrt firmware on the router, but of course this will take a lot of patching.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65707">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 Mar 2008, 02:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><p>mazilo: &quot;to cross-compile&quot; is the verb form of &quot;cross compilation&quot; (noun form).&nbsp; i.e. it is the same thing.&nbsp; I don&#039;t understand why you distinguish between them and why you say &quot;cross-compile on a real box&quot; is a native compilation.</p></blockquote></div><p>I wasn&#039;t trying to distinguish what you claimed above; however, I tried to find an answer from <a href="http://forum.openwrt.org/profile.php?id=13871">forum2008</a> what he meant by a <em>cross-compile on a real box</em>. The way I understood about a <em>real box</em> is the actual machine that runs the code; thus, a <em>cross-compile on a real box</em> is nothing but a <em>native compilation</em>. If so, the two statements that <a href="http://forum.openwrt.org/profile.php?id=13871">forum2008</a> said on his post <a href="http://forum.openwrt.org/viewtopic.php?pid=65585#p65585">here</a> really contradict each other. Thus, this prompted me to ask <a href="http://forum.openwrt.org/profile.php?id=13871">forum2008</a> for a little clarification on what he said on his post.</p><p>BTW, I haven&#039;t done any <em>native compilation</em> on the OpenWRT SVN source; however, I don&#039;t see why a <em>native compilation</em> won&#039;t work if the codes can be <em>cross compiled</em>, except the compilation process takes more time. I thought all one needs is the <em>native SDK</em> to perform a <em>native compilation</em>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65713">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						25 Mar 2008, 07:14					</div>
				</div>
				<div class="post-content content">
					<p>mazilo: Ah, no he meant &quot;real&quot; as opposed to &quot;Virtual Machine.&quot;&nbsp; He said native compilation is not supported and that you must &quot;cross-compile on a [real Linux PC] or in a Virtual Machine.&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65714">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						25 Mar 2008, 07:18					</div>
				</div>
				<div class="post-content content">
					<p>mrx: I have also compiled small things on one of my routers by mounting the toolchain via NFS, but it was incredibly slow just to compile a simple &quot;Hello, World&quot;, so I would never bother trying to do compile OpenWrt like that.&nbsp; Anyway, I don&#039;t know if there would be enough RAM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65733">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 Mar 2008, 16:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><p>mazilo: Ah, no he meant &quot;real&quot; as opposed to &quot;Virtual Machine.&quot;&nbsp; He said native compilation is not supported and that you must &quot;cross-compile on a [real Linux PC] or in a Virtual Machine.&quot;</p></blockquote></div><p>Thanks and you are definitely right!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65735">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 Mar 2008, 16:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><p>mrx: I have also compiled small things on one of my routers by mounting the toolchain via NFS, but it was incredibly slow just to compile a simple &quot;Hello, World&quot;, so I would never bother trying to do compile OpenWrt like that.&nbsp; Anyway, I don&#039;t know if there would be enough RAM.</p></blockquote></div><p>By any chance, did you try to compile this simple program several times to time the compilation process to see how long did the process take and how much RAM was being consumed? The reason I asked this kind of questions is I suspect the system started to waste resources in trying to swap out without any swapped file. Back in earlier 90s when Linux just started, I remember porting/compiling my ANSI C/C++ neural-net program on an i386 20MHz 8MB RAM was very fast and much faster than any MS C/C++ compiler. This was a 20MHz, not 200MHz RiSC, CPU with only 8MB, not 32MB, RAM, except with a 16MB swapped file.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65739">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Wodin</div>
					<div class="post-datetime">
						25 Mar 2008, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>There is no disk on my router, so definitely no swap <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>It also has only has 16MB of Ram.&nbsp; Although that&#039;s more than your 386 with 8MB of RAM, I think the swap makes a bit of a difference.&nbsp; Also, I was using gcc 3.x or 4.x (I can&#039;t remember now) which is probably bigger than 2.x that you were probably using.</p><p>I think the main problem was that I had the toolchain mounted via NFS over USB.</p><p>I did not monitor the network or RAM while I was compiling, and I didn&#039;t recompile several times because I was just testing if it would work, not how long it would take.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65741">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 Mar 2008, 20:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Wodin wrote:</cite><blockquote><p>I think the main problem was that I had the toolchain mounted via NFS over USB.</p></blockquote></div><p>IIRC, my HD was only able to deliver about 5MBps (~40Mbps) throughput. If your router supports USB2, I am sure it probably had no problem to be able to stream data at least a 40Mbps. So, this wouldn&#039;t be the issue. As you said, I would suspect a swapped file is the issue. In this case, we probably will be able to attain the speed needed to perform a native compilation of an OpenWRT source if we attach a swapped file through a USB2 port. Someone just needs to try to see the possibilities.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>