<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDR3700 exploration</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Oct 2014 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 20</div><nav><ul><li><a href="viewtopic.php%3Fid=22311&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=22311&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=22311&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=22311&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22311&amp;p=20.html">20</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p97320">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						13 Nov 2009, 13:07					</div>
				</div>
				<div class="post-content content">
					<p>This is the flash map:</p><div class="codebox"><pre><code>static struct mtd_partition wndr3700_partitions[] = {
    {
        .name        = &quot;uboot&quot;,
        .offset        = 0x00000000,
        .size        = 0x50000,
    } , {
        .name        = &quot;env&quot;,
        .offset        = 0x00050000,
        .size        = 0x20000,
    } , {
        .name        = &quot;rootfs&quot;,
        .offset        = 0x00070000,
        .size        = 0x720000,
    } , {
        .name        = &quot;config&quot;,
        .offset        = 0x00790000,
        .size        = 0x10000,
    } , {
        .name        = &quot;config_bak&quot;,
        .offset        = 0x007a0000,
        .size        = 0x010000,
    } , {
        .name        = &quot;pot&quot;,
        .offset        = 0x007b0000,
        .size        = 0x10000,
    } , {
        .name        = &quot;traffic_meter&quot;,
        .offset        = 0x007c0000,
        .size        = 0x10000,
    } , {
        .name        = &quot;language&quot;,
        .offset        = 0x007d0000,
        .size        = 0x20000,

    } , {
        .name        = &quot;caldata&quot;,
        .offset        = 0x007f0000,
        .size        = 0x10000,
    } , {
        .name        = &quot;mount_fs&quot;,
        .offset        = 0x00070040,
        .size        = 0x71FFC0,
    }
};</code></pre></div><p>Here comes a hexdump of &quot;caldata&quot;. The lines with a * are skipped blocks with ff or 00. </p><div class="codebox"><pre><code>root@OpenWrt:/# hexdump dev/mtdblock8
0000000 0024 b258 fb49 0024 b258 fb4a 0024 b258
0000010 fb4b 3330 3138 3932 3934 3232 5231 3939
0000020 3543 3030 3833 32ff ffff ffff ffff ffff
0000030 ffff ffff ffff ffff ffff ffff ffff ffff
*
0001000 a55a 0000 0003 6000 168c 0029 6008 0001
0001010 0280 602c 168c a095 5000 168c 002a 5008
0001020 0001 0280 502c 168c a095 5064 0cc0 0504
0001030 506c 3811 0003 4004 073b 0040 4074 0003
0001040 0000 4000 0000 01c2 6034 0044 0000 ffff
0001050 ffff ffff ffff ffff ffff ffff ffff ffff
*
0001200 0cb8 dd00 e016 0201 0060 001f 0024 b258
0001210 fb49 0303 0000 0000 0000 0009 0700 0401
0001220 00ff 0200 0001 0000 00fb 0000 0000 0000
0001230 0000 0000 0000 0000 0000 0000 0000 0000
*
0001290 0000 002d 0b0b 0b0b 0b0b e000 0e0e 0e00
00012a0 020e 00ca caca 0901 0000 0000 0000 0602
00012b0 0200 0000 0e0e 0200 0000 0000 002c 0000
00012c0 0000 0000 0202 0d09 0000 0000 0000 0000
00012d0 0000 0000 8000 0000 0000 0000 0000 0000
00012e0 0000 0000 0000 0000 0000 0010 0000 0010
00012f0 0000 0000 0000 0120 0000 002d 2020 0b00
0001300 0010 e200 0d0d 0d00 020e 1cff ffff 0601
0001310 0000 0000 0000 0603 0302 0000 0e0e 0200
0001320 0000 0000 002d 0000 0000 0000 0303 0d09
0001330 0000 0000 0000 9200 0092 0000 8000 0000
0001340 0000 0000 0000 0000 0000 0000 0000 0000
0001350 0000 0000 0000 0000 7089 a2ff 0000 0000
0001360 0000 0000 0000 0000 0000 0000 0000 0000
*
0001710 0000 0000 0000 0000 0000 0000 132a 3e56
0001720 6846 586a 7580 0000 0000 0000 0000 0000
0001730 050f 224c 8816 2849 68a5 0000 0000 0000
0001740 0000 0000 152b 4157 6948 596b 7583 0000
0001750 0000 0000 0000 0000 0610 2551 8e18 2a4c
0001760 67a4 0000 0000 0000 0000 0000 142c 4056
0001770 6749 5966 7481 0000 0000 0000 0000 0000
0001780 0711 244f 8619 2b43 66a4 0000 0000 0000
0001790 0000 0000 0000 0000 0000 0000 0000 0000
*
00017b0 0000 0000 0000 0000 0000 0000 142b 4057
00017c0 6748 596c 7785 0000 0000 0000 0000 0000
00017d0 0412 2557 9419 2d54 79a5 0000 0000 0000
00017e0 0000 0000 1830 445b 6848 5b6c 7b81 0000
00017f0 0000 0000 0000 0000 0715 2e64 981a 3255
0001800 8ca5 0000 0000 0000 0000 0000 1830 455b
0001810 6748 5b6b 797e 0000 0000 0000 0000 0000
0001820 0716 326a 991a 3457 8ba5 0000 0000 0000
0001830 0000 0000 0000 0000 0000 0000 0000 0000
*
00018f0 0000 0000 0000 0000 0000 0000 4c22 2222
0001900 2258 2222 2222 5c2a 2a2a 2868 2a2a 2a28
0001910 8c30 2c2a 28b4 302c 2a28 bd2a 2a2a 28cd
0001920 2a2a 2a28 4c22 2222 2222 2222 2258 2222
0001930 2222 2222 2222 5c2a 2a2a 2a28 2826 2668
0001940 2a2a 2a2a 2828 2626 8c30 2c2c 2a28 2826
0001950 26b4 302c 2c2a 2828 2626 bd2a 2a2a 2a28
0001960 2826 26cd 2a2a 2a2a 2828 2626 4e22 2222
0001970 2222 2222 2256 2222 2222 2222 2222 5e2a
0001980 2a2a 2828 2626 2466 2a2a 2a28 2826 2624
0001990 8e30 2a2a 2828 2626 24ae 302a 2a28 2826
00019a0 2624 bf2a 2a2a 2828 2626 24c7 2a2a 2a28
00019b0 2826 2624 7033 3333 33ac 3333 3333 ff00
00019c0 0000 0070 302a 2a2a 8e30 2a2a 2aac 302a
00019d0 2a2a ff00 0000 0070 2f2f 2f2f 2f2a 2a28
00019e0 8e2f 2f2f 2f2f 2a2a 28ac 2f2f 2f2f 2f2a
00019f0 2a28 ff00 0000 0000 0000 007a 2626 2626
0001a00 2626 2626 8926 2626 2626 2626 2698 2626
0001a10 2626 2626 2626 ff00 0000 0000 0000 0010
0001a20 1618 1112 1517 4046 4142 4530 3638 3132
0001a30 3537 0000 0000 004c 1c50 5c5c 6a68 2a8c
0001a40 2390 6ab4 23bd 6a4c 1c50 5c5c 6a68 2a8c
0001a50 2390 6ab4 23bd 6a00 0000 0000 0000 0000
0001a60 0000 0000 0000 004c 1c50 5c5c 6a68 2a8c
0001a70 2390 6ab4 23bd 6a4c 1c50 5c5c 6a68 2a8c
0001a80 2390 6ab4 23bd 6a00 0000 0000 0000 0000
0001a90 0000 0000 0000 004e 1c56 5c5e 6a66 228e
0001aa0 1b96 6aae 26bf 6a4e 1c56 5c5e 6a66 228e
0001ab0 1b96 6aae 26bf 6a00 0000 0000 0000 0000
0001ac0 0000 0000 0000 0070 2e75 73a2 2e00 0000
*
0001ae0 0000 0000 0000 0000 0000 0000 0000 0000
0001af0 0000 0000 0000 0070 2875 70a2 2800 0000
*
0001b10 0000 0000 0000 0000 0000 0000 0000 0000
0001b20 0000 0000 0000 0070 2875 70a2 2800 0000
*
0001b40 0000 0000 0000 0000 0000 0000 0000 0000
0001b50 0000 0000 0000 007a 207f 6693 6698 2000
*
0001b70 0000 0000 0000 0000 0000 0000 0000 0000
0001b80 0000 0000 0000 004a 2250 625c 6268 2200
*
0001ba0 0000 0000 0000 0000 0000 0000 0000 0000
0001bb0 0000 0000 0000 004a 2250 625c 6268 2200
*
0001bd0 0000 0000 0000 0000 0000 0000 0000 0000
0001be0 0000 0000 0000 0070 2275 62ac 62b8 2200
*
0001c00 0000 0000 0000 0000 0000 0000 0000 0000
0001c10 0000 0000 0000 0070 2275 62ac 2200 0000
*
0001c30 0000 0000 0000 0000 0000 0000 0000 0000
0001c40 0000 0000 0000 0070 2275 6298 2200 0000
*
0001c60 0000 0000 0000 0000 0000 0000 0000 0000
0001c70 0000 0000 0000 004c 2250 6268 228c 3090
0001c80 70b4 3000 0000 004c 2250 6268 228c 3090
0001c90 70b4 3000 0000 0000 0000 0000 0000 0000
0001ca0 0000 0000 0000 004c 2250 6268 228c 3090
0001cb0 70b4 3000 0000 004c 2250 6268 228c 3090
0001cc0 70b4 3000 0000 0000 0000 0000 0000 0000
0001cd0 0000 0000 0000 004e 2256 6266 228e 3096
0001ce0 70ae 3000 0000 004e 2256 6266 228e 3096
0001cf0 70ae 3000 0000 0000 0000 0000 0000 0000
0001d00 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0001d20 0000 0000 0000 0000 0000 0000 0000 0000
0001d30 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0001d50 0000 0000 0000 0000 0000 0000 0000 0000
0001d60 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0001d80 0000 0000 0000 0000 0000 0000 0000 0000
0001d90 0000 0000 0000 007a 1c7f 5c93 5c98 1c00
*
0001db0 0000 0000 0000 0000 0000 0000 0000 0000
*
0001eb0 0000 0000 0000 0000 ffff ffff ffff ffff
0001ec0 ffff ffff ffff ffff ffff ffff ffff ffff
*
0005000 a55a 0000 0003 6000 168c 0029 6008 0001
0005010 0280 602c 168c a094 5000 168c 002a 5008
0005020 0001 0280 502c 168c a094 5064 0cc0 0504
0005030 506c 3811 0003 4004 073b 0040 4074 0003
0005040 0000 4000 0000 01c2 6034 0044 0000 ffff
0005050 ffff ffff ffff ffff ffff ffff ffff ffff
*
0005200 0cb8 26bf e016 0101 0060 001f 0024 b258
0005210 fb49 0303 0000 0000 0000 0009 0700 0400
0005220 01ff 0200 0001 0000 00fe 0000 0000 0000
0005230 0000 0000 0000 0000 0000 0000 0000 0000
*
0005280 0000 0158 0000 0158 0000 0000 0000 01e0
0005290 0000 002c 2020 0b00 000b e200 0e0e 0e00
00052a0 020e 1cca caca 0301 0000 0000 0000 0604
00052b0 0400 0000 0e0e 0215 1500 1f1f 002c 0000
00052c0 0000 0000 0404 4d09 0000 0000 0000 8e8c
00052d0 888e 8c88 8000 0000 0000 0000 0000 0000
00052e0 0000 0000 0000 0000 0000 0000 0000 0000
00052f0 0000 0000 0000 0000 0000 002d 0b0b 0b10
0005300 1010 e000 0d0d 0d00 020e 00ff ffff 0901
0005310 0000 0000 0000 0602 0201 0000 0e0e 0219
0005320 1900 1f1f 002d 0000 0000 0000 0303 0d09
0005330 0000 0000 0000 9200 0092 0000 8000 0000
0005340 0000 0000 0000 0000 0000 0000 0000 0000
0005350 4c58 5c68 8cb4 bdcd 0000 0000 415a 707f
0005360 8b45 596e 7f89 0000 0000 0000 0000 0000
0005370 0e24 518c a509 1227 4769 0000 0000 0000
0005380 0000 0000 4a62 7886 904b 6074 858f 0000
0005390 0000 0000 0000 0000 1127 548d cb08 1325
00053a0 4464 0000 0000 0000 0000 0000 4a62 7886
00053b0 904a 6073 848e 0000 0000 0000 0000 0000
00053c0 0f26 528b c808 1225 4462 0000 0000 0000
00053d0 0000 0000 384f 6572 7d47 5c6c 787e 0000
00053e0 0000 0000 0000 0000 0f2a 5791 d011 2039
00053f0 5b6a 0000 0000 0000 0000 0000 485f 7484
0005400 8a48 5e70 8087 0000 0000 0000 0000 0000
0005410 0f26 4e8c ac08 1224 4053 0000 0000 0000
0005420 0000 0000 283f 5468 7348 5664 6e73 0000
0005430 0000 0000 0000 0000 0a14 305d 8e0f 192a
0005440 3d48 0000 0000 0000 0000 0000 263d 5268
0005450 744a 5461 6b74 0000 0000 0000 0000 0000
0005460 070f 2a54 8c0f 1623 3347 0000 0000 0000
0005470 0000 0000 243b 5065 7149 5361 6a72 0000
0005480 0000 0000 0000 0000 050e 1f49 770e 1420
0005490 2e3c 0000 0000 0000 0000 0000 3b55 6b7b
00054a0 8545 5b6d 7d86 0000 0000 0000 0000 0000
00054b0 0d20 4887 c509 1528 4965 0000 0000 0000
00054c0 0000 0000 3e55 6b7f 8944 596b 7e8a 0000
00054d0 0000 0000 0000 0000 0d1c 3d7b b707 0f1f
00054e0 3d5e 0000 0000 0000 0000 0000 3e54 6a80
00054f0 8a45 5a6c 7f8b 0000 0000 0000 0000 0000
0005500 0b1a 3977 b507 101f 3c5e 0000 0000 0000
0005510 0000 0000 344b 6673 7f47 5d6c 797f 0000
0005520 0000 0000 0000 0000 0c1f 4e87 c50e 1d36
0005530 5364 0000 0000 0000 0000 0000 253b 5166
0005540 7648 5260 6b76 0000 0000 0000 0000 0000
0005550 0711 2553 910e 1522 314a 0000 0000 0000
0005560 0000 0000 2a40 576d 7a47 5665 727b 0000
0005570 0000 0000 0000 0000 0611 2a5b 9a0b 1423
0005580 3a4f 0000 0000 0000 0000 0000 273e 536a
0005590 7747 5565 7178 0000 0000 0000 0000 0000
00055a0 0712 2656 910c 1627 3a4a 0000 0000 0000
00055b0 0000 0000 263d 536a 7947 5565 727a 0000
00055c0 0000 0000 0000 0000 060d 1f48 830a 101d
00055d0 3244 0000 0000 0000 0000 0000 1092 78ce
00055e0 0010 9278 ce00 0000 0000 0000 0000 0000
00055f0 1092 78ce 0010 9278 ce00 0000 0000 0000
0005600 0000 0000 60ce 60ce 0030 ce30 ce00 0000
0005610 0000 0000 0000 0000 1092 78ce 0048 ce48
0005620 ce63 0000 0000 0000 0000 0000 58ce 58ce
0005630 0028 ce28 ce00 0000 0000 0000 0000 0000
0005640 70ce 70ce 7340 ce40 ce00 0000 0000 0000
0005650 0000 0000 50ce 50ce 0020 ce20 ce00 0000
0005660 0000 0000 0000 0000 68ce 68ce 0038 ce38
0005670 ce30 0000 0000 0000 0000 0000 48ce 48ce
0005680 6518 ce18 ce00 0000 0000 0000 0000 0000
0005690 60ce 60ce 0030 ce30 ce00 0000 0000 0000
00056a0 0000 0000 0891 78ce 0008 9178 ce00 0000
00056b0 0000 0000 0000 0000 a0ce a0ce 0008 9178
00056c0 ce00 0000 0000 0000 0000 0000 0891 78ce
00056d0 0008 9178 ce00 0000 0000 0000 0000 0000
00056e0 0891 78ce 0008 9178 ce00 0000 0000 0000
00056f0 0000 0000 0891 78ce 0008 9178 ce00 0000
0005700 0000 0000 0000 0000 0891 78ce 0008 9178
0005710 ce00 0000 0000 0000 0000 0000 0000 0000
0005720 0000 0000 0000 0000 0000 0000 0000 0000
*
00058f0 0000 0000 0000 0000 0000 0000 4c22 2222
0005900 2258 2222 2222 5c2a 2a2a 2868 2a2a 2a28
0005910 8c30 2c2a 28b4 302c 2a28 bd2a 2a2a 28cd
0005920 2a2a 2a28 4c22 2222 2222 2222 2258 2222
0005930 2222 2222 2222 5c2a 2a2a 2a28 2826 2668
0005940 2a2a 2a2a 2828 2626 8c30 2c2c 2a28 2826
0005950 26b4 302c 2c2a 2828 2626 bd2a 2a2a 2a28
0005960 2826 26cd 2a2a 2a2a 2828 2626 4e22 2222
0005970 2222 2222 2256 2222 2222 2222 2222 5e2a
0005980 2a2a 2828 2626 2466 2a2a 2a28 2826 2624
0005990 8e30 2a2a 2828 2626 24ae 302a 2a28 2826
00059a0 2624 bf2a 2a2a 2828 2626 24c7 2a2a 2a28
00059b0 2826 2624 7033 3333 33ac 3333 3333 ff00
00059c0 0000 0070 302a 2a2a 8e30 2a2a 2aac 302a
00059d0 2a2a ff00 0000 0070 2f2f 2f2f 2f2a 2a28
00059e0 8e2f 2f2f 2f2f 2a2a 28ac 2f2f 2f2f 2f2a
00059f0 2a28 ff00 0000 0000 0000 007a 2626 2626
0005a00 2626 2626 8926 2626 2626 2626 2698 2626
0005a10 2626 2626 2626 ff00 0000 0000 0000 0010
0005a20 1618 1112 1517 4046 4142 4530 3638 3132
0005a30 3537 0000 0000 004c 1c50 5c5c 6a68 2a8c
0005a40 2390 6ab4 23bd 6a4c 1c50 5c5c 6a68 2a8c
0005a50 2390 6ab4 23bd 6a00 0000 0000 0000 0000
0005a60 0000 0000 0000 004c 1c50 5c5c 6a68 2a8c
0005a70 2390 6ab4 23bd 6a4c 1c50 5c5c 6a68 2a8c
0005a80 2390 6ab4 23bd 6a00 0000 0000 0000 0000
0005a90 0000 0000 0000 004e 1c56 5c5e 6a66 228e
0005aa0 1b96 6aae 26bf 6a4e 1c56 5c5e 6a66 228e
0005ab0 1b96 6aae 26bf 6a00 0000 0000 0000 0000
0005ac0 0000 0000 0000 0070 2e75 73a2 2e00 0000
*
0005ae0 0000 0000 0000 0000 0000 0000 0000 0000
0005af0 0000 0000 0000 0070 2875 70a2 2800 0000
*
0005b10 0000 0000 0000 0000 0000 0000 0000 0000
0005b20 0000 0000 0000 0070 2875 70a2 2800 0000
*
0005b40 0000 0000 0000 0000 0000 0000 0000 0000
0005b50 0000 0000 0000 007a 207f 6693 6698 2000
*
0005b70 0000 0000 0000 0000 0000 0000 0000 0000
0005b80 0000 0000 0000 004a 2250 625c 6268 2200
*
0005ba0 0000 0000 0000 0000 0000 0000 0000 0000
0005bb0 0000 0000 0000 004a 2250 625c 6268 2200
*
0005bd0 0000 0000 0000 0000 0000 0000 0000 0000
0005be0 0000 0000 0000 0070 2275 62ac 62b8 2200
*
0005c00 0000 0000 0000 0000 0000 0000 0000 0000
0005c10 0000 0000 0000 0070 2275 62ac 2200 0000
*
0005c30 0000 0000 0000 0000 0000 0000 0000 0000
0005c40 0000 0000 0000 0070 2275 6298 2200 0000
*
0005c60 0000 0000 0000 0000 0000 0000 0000 0000
0005c70 0000 0000 0000 004c 2250 6268 228c 3090
0005c80 70b4 3000 0000 004c 2250 6268 228c 3090
0005c90 70b4 3000 0000 0000 0000 0000 0000 0000
0005ca0 0000 0000 0000 004c 2250 6268 228c 3090
0005cb0 70b4 3000 0000 004c 2250 6268 228c 3090
0005cc0 70b4 3000 0000 0000 0000 0000 0000 0000
0005cd0 0000 0000 0000 004e 2256 6266 228e 3096
0005ce0 70ae 3000 0000 004e 2256 6266 228e 3096
0005cf0 70ae 3000 0000 0000 0000 0000 0000 0000
0005d00 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0005d20 0000 0000 0000 0000 0000 0000 0000 0000
0005d30 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0005d50 0000 0000 0000 0000 0000 0000 0000 0000
0005d60 0000 0000 0000 0070 1c75 5cac 1c00 0000
*
0005d80 0000 0000 0000 0000 0000 0000 0000 0000
0005d90 0000 0000 0000 007a 1c7f 5c93 5c98 1c00
*
0005db0 0000 0000 0000 0000 0000 0000 0000 0000
*
0005eb0 0000 0000 0000 0000 ffff ffff ffff ffff
0005ec0 ffff ffff ffff ffff ffff ffff ffff ffff
*
0008000 faf3 0020 0000 0000 ffff ffff ffff ffff
0008010 ffff ffff ffff ffff ffff ffff ffff ffff
*
0010000</code></pre></div><p>I can see 3 (?) Mac adresses at the first lines and the flash magic number a55a (this should be absolute adress 0x1f7f1000 to where we guided the eeprom read process).</p><p>Anything else useful?</p><p>edit: 2nd magic # at address 0005000!</p>											<p class="post-edited">(Last edited by <strong>whiskas</strong> on 13 Nov 2009, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97415">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">aorlinsk</div>
					<div class="post-datetime">
						15 Nov 2009, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Here is an updated mach-wndr3700.c which handles leds and buttons. Tested everything works.</p><br /><div class="codebox"><pre><code>/*
 *  Netgear WNDR3700 board support
 *
 *  Copyright (C) 2009 Marco Porsch
 *  Copyright (C) 2009 Gabor Juhos &lt;juhosg@openwrt.org&gt;
 *
 *  This program is free software; you can redistribute it and/or modify it
 *  under the terms of the GNU General Public License version 2 as published
 *  by the Free Software Foundation.
 */

#include &lt;linux/platform_device.h&gt;
#include &lt;linux/mtd/mtd.h&gt;
#include &lt;linux/mtd/partitions.h&gt;
#include &lt;linux/spi/spi.h&gt;
#include &lt;linux/spi/flash.h&gt;
#include &lt;linux/input.h&gt;

#include &lt;asm/mips_machine.h&gt;
#include &lt;asm/mach-ar71xx/ar71xx.h&gt;
#include &lt;asm/mach-ar71xx/pci.h&gt;

#include &quot;devices.h&quot;

#define WNDR3700_GPIO_LED_WPS_ORANGE 0
#define WNDR3700_GPIO_LED_POWER_ORANGE 1
#define WNDR3700_GPIO_LED_POWER_GREEN    2
#define WNDR3700_GPIO_LED_WPS_GREEN    4

#define WNDR3700_GPIO_BTN_WPS        3
#define WNDR3700_GPIO_BTN_RESET        8
#define WNDR3700_GPIO_BTN_WIFI        11

#define WNDR3700_BUTTONS_POLL_INTERVAL    20


#ifdef CONFIG_MTD_PARTITIONS
static struct mtd_partition wndr3700_partitions[] = {
    {
        .name        = &quot;uboot&quot;,
        .offset        = 0,
        .size        = 0x050000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;env&quot;,
        .offset        = 0x050000,
        .size        = 0x020000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;rootfs&quot;,
        .offset        = 0x070000,
        .size        = 0x720000,
    } , {
        .name        = &quot;config&quot;,
        .offset        = 0x790000,
        .size        = 0x010000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;config_bak&quot;,
        .offset        = 0x7a0000,
        .size        = 0x010000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;pot&quot;,
        .offset        = 0x7b0000,
        .size        = 0x010000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;traffic_meter&quot;,
        .offset        = 0x7c0000,
        .size        = 0x010000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;language&quot;,
        .offset        = 0x7d0000,
        .size        = 0x020000,
        .mask_flags    = MTD_WRITEABLE,
    } , {
        .name        = &quot;caldata&quot;,
        .offset        = 0x7f0000,
        .size        = 0x010000,
        .mask_flags    = MTD_WRITEABLE,
    }
};
#endif /* CONFIG_MTD_PARTITIONS */

static struct flash_platform_data wndr3700_flash_data = {
#ifdef CONFIG_MTD_PARTITIONS
        .parts          = wndr3700_partitions,
        .nr_parts       = ARRAY_SIZE(wndr3700_partitions),
#endif
};

static struct ar71xx_pci_irq wndr3700_pci_irqs[] __initdata = {
    {
        .slot    = 0,
        .pin    = 1,
        .irq    = AR71XX_PCI_IRQ_DEV0,
    }, {
        .slot    = 1,
        .pin    = 1,
        .irq    = AR71XX_PCI_IRQ_DEV1,
    }
};

static struct spi_board_info wndr3700_spi_info[] = {
    {
        .bus_num    = 0,
        .chip_select    = 0,
        .max_speed_hz    = 25000000,
        .modalias    = &quot;m25p80&quot;,
        .platform_data  = &amp;wndr3700_flash_data,
    }
};

static struct gpio_led wndr3700_leds_gpio[] __initdata = {
    {
        .name        = &quot;wndr3700:green:power&quot;,
        .gpio        = WNDR3700_GPIO_LED_POWER_GREEN,
        .active_low    = 1,
        .default_trigger = &quot;default-on&quot;,
    }, {
        .name        = &quot;wndr3700:orange:power&quot;,
        .gpio        = WNDR3700_GPIO_LED_POWER_ORANGE,
        .active_low    = 1,
    }, {
        .name        = &quot;wndr3700:green:wps&quot;,
        .gpio        = WNDR3700_GPIO_LED_WPS_GREEN,
        .active_low    = 1,
    }, {
        .name        = &quot;wndr3700:orange:wps&quot;,
        .gpio        = WNDR3700_GPIO_LED_WPS_ORANGE,
        .active_low    = 1,
    }
};

static struct gpio_button wndr3700_gpio_buttons[] __initdata = {
    {
        .desc        = &quot;reset&quot;,
        .type        = EV_KEY,
        .code        = BTN_0,
        .threshold    = 5,
        .gpio        = WNDR3700_GPIO_BTN_RESET,
    }, {
        .desc        = &quot;wps&quot;,
        .type        = EV_KEY,
        .code        = BTN_1,
        .threshold    = 5,
        .gpio        = WNDR3700_GPIO_BTN_WPS,
    } , {
        .desc        = &quot;wifi&quot;,
        .type        = EV_KEY,
        .code        = BTN_2,
        .threshold    = 5,
        .gpio        = WNDR3700_GPIO_BTN_WIFI,
    }
};


static void __init wndr3700_setup(void)
{
    u8 *mac = (u8 *) KSEG1ADDR(0x1fff0000);

    ar71xx_set_mac_base(mac);
    ar71xx_add_device_mdio(0x0);

    ar71xx_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_RGMII;
    ar71xx_eth0_data.phy_mask = 0xf;
    ar71xx_eth0_data.speed = SPEED_1000;
    ar71xx_eth0_data.duplex = DUPLEX_FULL;

    ar71xx_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_RGMII;
    ar71xx_eth1_data.phy_mask = 0x10;

    ar71xx_add_device_eth(0);
    ar71xx_add_device_eth(1);

    ar71xx_add_device_usb();

    ar71xx_pci_init(ARRAY_SIZE(wndr3700_pci_irqs), wndr3700_pci_irqs);

    ar71xx_add_device_spi(NULL, wndr3700_spi_info,
                  ARRAY_SIZE(wndr3700_spi_info));
                  
        ar71xx_add_device_leds_gpio(-1, ARRAY_SIZE(wndr3700_leds_gpio),
                    wndr3700_leds_gpio);
                    
      ar71xx_add_device_gpio_buttons(-1, WNDR3700_BUTTONS_POLL_INTERVAL,
                    ARRAY_SIZE(wndr3700_gpio_buttons),
                    wndr3700_gpio_buttons);

//    ar91xx_add_device_wmac();

    
}

MIPS_MACHINE(AR71XX_MACH_WNDR3700, &quot;NETGEAR WNDR3700&quot;, wndr3700_setup);</code></pre></div><p>The usb led is missing, because it seems to be triggered by something else than GPIOs.<br />I could find some code in the GPL archive that seems to achieve it :<br /></p><div class="codebox"><pre><code>void turn_on_usbled(void)
{
    down(&amp;usbled_sem);
    usbled_state = 1;
    ar7100_reg_rmw_clear(AR7100_RESET, AR7100_RESET_GE1_PHY);
    up(&amp;usbled_sem);
}
EXPORT_SYMBOL(turn_on_usbled);

void turn_off_usbled(void)
{
    down(&amp;usbled_sem);
    usbled_state = 0;
    ar7100_reg_rmw_set(AR7100_RESET, AR7100_RESET_GE1_PHY);
    up(&amp;usbled_sem);
}
EXPORT_SYMBOL(turn_off_usbled);</code></pre></div><p>If needed, it should not be very hard to write a kernel module like the wndr3700-usbled one in the Netgear firmware to control it over /proc</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97453">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">yjchang</div>
					<div class="post-datetime">
						16 Nov 2009, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Well, I found the 2G interface could be up with following two changes.</p><p>1. update compat-wireless to 2009-11-12. <br />2. Patch compat-wireless-2009-11-12 with<br /></p><div class="codebox"><pre><code>diff --git a/drivers/net/wireless/ath/ath9k/hw.c b/drivers/net/wireless/ath/ath9k/hw.c
index 7cb529a..b4b4366 100644
--- a/drivers/net/wireless/ath/ath9k/hw.c
+++ b/drivers/net/wireless/ath/ath9k/hw.c
@@ -438,8 +438,8 @@ static void ath9k_hw_init_defaults(struct ath_hw *ah)
     ah-&gt;ah_flags = 0;
     if (ah-&gt;hw_version.devid == AR5416_AR9100_DEVID)
         ah-&gt;hw_version.macVersion = AR_SREV_VERSION_9100;
-    if (!AR_SREV_9100(ah))
-        ah-&gt;ah_flags = AH_USE_EEPROM;
+    /* if (!AR_SREV_9100(ah)) */
+    /*     ah-&gt;ah_flags = AH_USE_EEPROM; */
 
     ah-&gt;atim_window = 0;
     ah-&gt;sta_id1_defaults = AR_STA_ID1_CRPT_MIC_ENABLE;</code></pre></div><p>It seems that setting AH_USE_EEPROM make ath9k swap the read calibration data. (Is this a bug?)</p><p>With above changes, I can make one wireless client connect to WNDR3700, but the performance is not good. Lot of ping packet lost.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97457">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						16 Nov 2009, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>@yjchang &amp; aorlinsk<br />thx again for your great work!</p><p>The corresponding code piece for swapping the endianness of the flash is this (in eeprom_def.c, function static int ath9k_hw_def_check_eeprom(struct ath_hw *ah)):</p><div class="codebox"><pre><code>if (!ath9k_hw_use_flash(ah)) {
        ath_print(common, ATH_DBG_EEPROM,
              &quot;Read Magic = 0x%04X\n&quot;, magic);

        if (magic != AR5416_EEPROM_MAGIC) {
            magic2 = swab16(magic);

            if (magic2 == AR5416_EEPROM_MAGIC) {
                size = sizeof(struct ar5416_eeprom_def);
                need_swap = true;
                eepdata = (u16 *) (&amp;ah-&gt;eeprom);

                for (addr = 0; addr &lt; size / sizeof(u16); addr++) {
                    temp = swab16(*eepdata);
                    *eepdata = temp;
                    eepdata++;
                }
            } else {
                ath_print(common, ATH_DBG_FATAL,
                      &quot;Invalid EEPROM Magic. &quot;
                      &quot;Endianness mismatch.\n&quot;);
                return -EINVAL;
            }
        }
    }</code></pre></div><p>It seems to me, the magic number is reversed for this specific platform.</p>											<p class="post-edited">(Last edited by <strong>whiskas</strong> on 16 Nov 2009, 14:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97458">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						16 Nov 2009, 15:37					</div>
				</div>
				<div class="post-content content">
					<p>I get both wireless interfaces with the following code:</p><p>in arch/mips/ar71xx/mach-wndr3700.c<br /></p><div class="codebox"><pre><code>    ar71xx_add_device_wmac(0, 0x1f7f1000);
    ar71xx_add_device_wmac(1, 0x1f7f5000);</code></pre></div><p>in arch/mips/ar71xx/devices.c<br /></p><div class="codebox"><pre><code>static struct ath9k_platform_data ar71xx_wmac0_data;

static struct platform_device ar71xx_wmac0_device = {
    .name        = &quot;ath9k_flashcalc0&quot;,
    .id        = -1,
    .dev = {
        .platform_data = &amp;ar71xx_wmac0_data,
    },
};
static struct ath9k_platform_data ar71xx_wmac1_data;

static struct platform_device ar71xx_wmac1_device = {
    .name        = &quot;ath9k_flashcalc1&quot;,
    .id        = -1,
    .dev = {
        .platform_data = &amp;ar71xx_wmac1_data,
    },
};

void __init ar71xx_add_device_wmac(u8 id, unsigned int addr)
{
    u8 *ee = (u8 *) KSEG1ADDR(addr);
    struct platform_device *pdev=0;
    struct ath9k_platform_data *pdata=0;

    switch (id)
    {
        case 0:
            pdev = &amp;ar71xx_wmac0_device;
            pdata =&amp;ar71xx_wmac0_data;
            break;

        case 1:
            pdev = &amp;ar71xx_wmac1_device;
            pdata =&amp;ar71xx_wmac1_data;
            break;

        default:
           return;
    }

    memcpy(pdata-&gt;eeprom_data, ee,
               sizeof(pdata-&gt;eeprom_data));

    platform_device_register(pdev);
}</code></pre></div><p>in compat-wireless/drivers/net/wireless/ath/ath9k/pci.c<br /></p><div class="codebox"><pre><code>static bool once=true;

static int ath_set_cal_data(struct ath_softc *sc)
{
    struct device *d;
    struct platform_device *pd;
    struct ath9k_platform_data *pdata;

    if (once)
    {
        d = bus_find_device_by_name(&amp;platform_bus_type, NULL, &quot;ath9k_flashcalc0&quot;);
        printk(&quot; # reading wmac0 caldata\n&quot;);
        once = false;
    }
    else
    {
        d = bus_find_device_by_name(&amp;platform_bus_type, NULL, &quot;ath9k_flashcalc1&quot;);
        printk(&quot; # reading wmac1 caldata\n&quot;);
    }

    if (d){
        pd = to_platform_device(d);
        pdata = (struct ath9k_platform_data *) pd-&gt;dev.platform_data;
        sc-&gt;cal_data = pdata-&gt;eeprom_data;
    }else{
        sc-&gt;cal_data = NULL;
        printk(&quot; # error reading caldata\n&quot;);
    }
}</code></pre></div><p>Sorry for not posting diffs, but i think we all have quiet different sources by now and ... i&#039;m lazy <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Still the wmacs have the same wrong MAC. - Of course they have, still the MACs are saved in the block before the two calibration blocks starting with the magic numbers.</p><p>edit: numbers were mixed up. Sorry</p><p>2nd edit: another odd problem: the wifi-interface wlan1 is 5GHz only, while wlan0 and wlan2 are 2GHz only</p>											<p class="post-edited">(Last edited by <strong>whiskas</strong> on 16 Nov 2009, 16:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97504">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						17 Nov 2009, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>wow.. there is something going on: <a href="https://dev.openwrt.org/changeset/18437">https://dev.openwrt.org/changeset/18437</a> and <a href="https://dev.openwrt.org/changeset/18435">https://dev.openwrt.org/changeset/18435</a></p><p>thx Gabor!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97508">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">ratbug</div>
					<div class="post-datetime">
						17 Nov 2009, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>There was this here <a href="https://dev.openwrt.org/changeset/18411">https://dev.openwrt.org/changeset/18411</a></p><p>Glad to see everything channelized in on place (especially those diff)</p>											<p class="post-edited">(Last edited by <strong>ratbug</strong> on 17 Nov 2009, 14:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98022">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">Dragon</div>
					<div class="post-datetime">
						28 Nov 2009, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>What&#039;s the progress on this looking like? I noticed there was a flurry of updates in last day or so on tracker for wndr3700 related things, so it looks like further progress might have been made by someone?</p>											<p class="post-edited">(Last edited by <strong>Dragon</strong> on 28 Nov 2009, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98077">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						30 Nov 2009, 11:20					</div>
				</div>
				<div class="post-content content">
					<p>I have not tried a recent checkout, but as far as i can see from the code, wireless should work out-of-the-box now. I have not used AP mode much, so don&#039;t take my word on that. Transmission rates were quiet low for me, maybe someone can post his/her benchmarks here (use &#039;iperf&#039;).</p><p>I have not seen a switch-driver so far, but ethernet-access is generally working. Has anybody tried WAN?</p><p>I have not burned an image to flash, only ramdisk. So dunno about that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98094">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">rigolo</div>
					<div class="post-datetime">
						30 Nov 2009, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>did anyone note that the default firmware does not support dns and dhcp integration? The default firmware is using (a modified version) of dnsmasq as their dns resolver, and udhcpd as the dhcp server. But these 2 are NOT integrated. So when I replaced my openwrt router running on a via itx board with the wndr3700 my whole network fell apart. I am so used to dns and dhcp integration that I wrongly assumed that it was going to work with this router also. Now I have to setup a seperate dns server (using openwrt) on a nslu2 just to keep my network working ...</p><p>Digging through the released sources I also noticed this nice bit of comment in the dnsmasq rfc1035.c code:</p><div class="quotebox"><blockquote><p>/*<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* NETGEAR SPEC v1.6<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* 3.5.2&nbsp; &nbsp; &nbsp; &nbsp; DNS Hijack<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* An implementation MUST support DNS hijack. When the router performs DNS hijack, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* it intercepts all the interested DNS queries going through it either destined to<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* the router itself or to other DNS servers on the Internet. That is, no matter a PC <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* on the LAN configures its DNS server to be setup dynamically or to IPs other than <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* the router, the router MUST hijack the interested DNS queries from the PC. (&lt;----<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ---------------------------------------------------------------------------------<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* --This is done by kernel netfilter NAT `REDIRECT` target when in hijack mode-----<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* --------------------------------------------------------------------------------&gt;).<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* The DNS hijack behaviors are different at between Blank State and normal state.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* At the Blank State, the router MUST hijack all the DNS queries, except for the XBox<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Live domain names, from the LAN PCs and sends back the answer back to resolve the <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* queried domain name to the router&#039;s LAN IP address. An implementation MUST put zero <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* in the TTL field of resource record in the answer it sends back at the blank state. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* This prevents the LAN PCs to cache the IP resolved and so they will send DNS queries <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* again to get the real corresponding IP addresses after the blank state is done. There <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* are 3 XBox Live domain names that the router MUST NOT hijack and MUST forward the <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* queries to the Internet DNS servers to get the correct resolved IP addresses and send <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* them back. The 3 XBox Live domain names are:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ============================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* as.xboxlive.com, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* tgs.xboxlive.com,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* macs.xboxlive.com.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* At the normal state (i.e. the blank state is gone), the router MUST only hijack the <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* following 4 domain names and resolve them to the router&#039;s LAN IP address. All other <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* domain names are not interested.<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* ============================<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* <a href="http://www.routerlogin.com">www.routerlogin.com</a><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* routerlogin.com<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* <a href="http://www.routerlogin.net">www.routerlogin.net</a><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* routerlogin.net<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*/</p></blockquote></div><p>I would like to know what other &quot;gem&#039;s&quot; can be found in the &quot;NETGEAR SPEC v1.6&quot;. And these are the dns hijack&#039;s we know about, but how about &quot;unpublished&quot; hijacks?</p><p>and back to this subject, was anyone successfull in building a working firmware that is identical to the released firmware using only the release sources?</p><p>if so, is it possible to build a modified version without all the unnessesary stuff that netgear put in there??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98132">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">aorlinsk</div>
					<div class="post-datetime">
						1 Dec 2009, 21:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whiskas wrote:</cite><blockquote><p>I have not seen a switch-driver so far, but ethernet-access is generally working. Has anybody tried WAN?</p></blockquote></div><p>What do we expect for a switch driver ? I found interesting files in various archives related to rtl8366s, and I even started to compare them trying to keep the most complete ones. (some manufacturers just have stripped down versions of low level drivers...)<br />I think all the low level stuff support is complete (from various GPL archives), what is missing/proprietary is the control interface for the various features (through /proc or /dev), and this looks likely not to be the hardest part to write. </p><p>From what I could see, in the implementations of the &quot;high level&quot; switch control there are 2 parts :<br />- kind of init or setup of the switch. probably a hardcoded configuration. There are direct calls to GPIOs methods (changing with CPU platform). This looks a bit hackish but easier to write for manufacturers I guess... If I understand things well I should use the generic GPIO access so the driver could work with any CPU platform.<br />- switch control : to get some statuses, PHY info/change. Maybe live reconfiguration.</p><p>If you have pointers to describe how things work (or should work) regarding CPU network interfaces, PHYs, switches, GPIOs and their drivers in the kernel, I can have a deeper look. Pointers to a correct implementation for another platform can make it as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98243">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">entee</div>
					<div class="post-datetime">
						3 Dec 2009, 23:44					</div>
				</div>
				<div class="post-content content">
					<p>So it looks as though all the open tickets on the timeline are closed for the WNDR3700. Is it good to go then? Any resolution of speed issues?</p><p>If the OS is more or less ready, I&#039;m willing to try flashing my router. I think netgear has a way to unbrick if it doesn&#039;t work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98256">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						4 Dec 2009, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>You could give it a try. Since Ethernet working you can always ssh in to reflash to netgears firmware.<br />In the unlikely case it gets bricked, you can should always be able to reflash using a serial cable.</p><p>Be sure to post all bugs you may find and also post them as tickets in trac.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98260">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">Walhalla</div>
					<div class="post-datetime">
						4 Dec 2009, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>is it possible that the wan port is not supported? In my test is was unable to get an ip on the wan port over my cable modems dhcp. Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98261">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						4 Dec 2009, 11:21					</div>
				</div>
				<div class="post-content content">
					<p>Try to verify it by plugging your PC into the WAN-port and do a ping with static IPs. If it fails file a ticket for the developers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98488">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						8 Dec 2009, 15:20					</div>
				</div>
				<div class="post-content content">
					<p>Whassup?</p><p>@entee:<br />Did you try flashing? And?</p><p>@Walhalla:<br />WAN fine or not?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98577">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						10 Dec 2009, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>I have some serious problems with the wireless range.<br />I have problems connecting to the router even across a big room!</p><p>Can somebody confirm this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98593">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">entee</div>
					<div class="post-datetime">
						10 Dec 2009, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I&#039;ve become a bit overloaded with work, so I haven&#039;t had a chance to flash or test yet. Hopefully this weekend?</p><p>Again, sorry for not being terribly helpful</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98894">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">luminoso</div>
					<div class="post-datetime">
						17 Dec 2009, 00:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>WhooDInI wrote:</cite><blockquote><p>BiG up! to all dd-wrt users and great job y&#039;all.</p><p>Now, about WNDR3700, I just got mine from amazon.de and I cant hardly wait for a dd-wrt firmware. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />The default interface s***s but other then that the hardware rules. I&#039;m trying to connect to another wireless and I cant see how.</p><p>Meanwhile I found these:<br />WNDR3700 V1.0.4.35 Source Code ~200MB<br /><a href="ftp://downloads.netgear.com/files/GPL/WNDR3700-V1.0.4.35_src.tar.bz2.zip">ftp://downloads.netgear.com/files/GPL/W … ar.bz2.zip</a></p><p>WNDR3700 V1.0.4.49 Source Code ~200MB<br /><a href="ftp://downloads.netgear.com/files/GPL/WNDR3700-V1.0.4.49_gpl_src.tar.bz2.zip">ftp://downloads.netgear.com/files/GPL/W … ar.bz2.zip</a></p><p>WNDR3700 BootLoader ~3MB<br /><a href="ftp://downloads.netgear.com/files/GPL/WNDR3700_bootloader_v1.6_uBoot_v1.1.4.tar.bz2.zip">ftp://downloads.netgear.com/files/GPL/W … ar.bz2.zip</a><br />all of those and others on this page:<br /><a href="http://kb.netgear.com/app/answers/detail/a_id/2649">http://kb.netgear.com/app/answers/detail/a_id/2649</a></p><p>I dont know if they are any use to DD-WRT Developers but I hope it helps. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>L8er y&#039;all!</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98906">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">rotax</div>
					<div class="post-datetime">
						17 Dec 2009, 11:09					</div>
				</div>
				<div class="post-content content">
					<p>Just found the datasheet for the switch-chip (rtl8366), just in case it wasn&#039;t all common knowledge here...</p><p><a href="ftp://83.149.205.216/pub/hardware/realtek/8369/RTL8366%20design%20kit/RTL8366_8369_DataSheet_1.1.pdf">ftp://83.149.205.216/pub/hardware/realt … et_1.1.pdf</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98907">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						17 Dec 2009, 11:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>luminoso wrote:</cite><blockquote><p>List of WNDR3700 firmwares</p></blockquote></div><p>Not sure what this adds - the links were posted already <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />. Albeit in another topic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98909">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">Delekhan</div>
					<div class="post-datetime">
						17 Dec 2009, 12:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>last week I compiled an image for my WDNR3700 with the latest trunk that was available that day.&nbsp; It was working fine for me, except for some regulatory domain tweaking in the config to get the 5Ghz band working. Other than that I did not test USB or anything else, since I use the device as an access point. <br />I guess it is pretty save to flash and I did not experience any problems at all during multiple firmware updates. In order to get back the original firmware you have to strip the first 128 bytes of the original firmware and then flash it using the cmd/web gui.</p><p>One &quot;minor&quot; problem is the ath9k driver in Europe. It seems it does not support radar detection in AP mode, which is mandatory in most EU states. So 5ghz is basically off, if you aren&#039;t running it illegally with US/other countries settings. Is there somebody working on getting that fixed?</p><p>&nbsp; --Markus</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98935">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">ratbug</div>
					<div class="post-datetime">
						17 Dec 2009, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>be patient, Rome wasn&#039;t built in one day</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98936">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">ratbug</div>
					<div class="post-datetime">
						17 Dec 2009, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>@whiskas, </p><p>Do you know the pinout for the jtag connector on the board?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98969">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						18 Dec 2009, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ratbug wrote:</cite><blockquote><p>Do you know the pinout for the jtag connector on the board?</p></blockquote></div><p>No. To be honest, i don&#039;t even know there is one. Sorry, can&#039;t help on that.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 76 to 75 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 20</div><nav><ul><li><a href="viewtopic.php%3Fid=22311&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=22311&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=22311&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=22311&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=22311&amp;p=20.html">20</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>