<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WR741ND v4.20 back to original firmware</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p170733">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">industrial</div>
					<div class="post-datetime">
						23 Jun 2012, 01:17					</div>
				</div>
				<div class="post-content content">
					<p>i was reading how to get my router back to original firmware and im a bit confused with u boot with or without, i have rather simple question can i use firmware from this link to get back to tplink firmware ? </p><p><a href="http://www.tp-link.com/Resources/software/TL-WR741ND_V4.0_120320.zip">http://www.tp-link.com/Resources/softwa … 120320.zip</a> </p><p>with this procedure ?</p><p>PSCP.EXE -p wr741nv4_en_3_12_11_up(120320).bin root@192.168.1.1:/tmp<br />or</p><p>scp wr741nv4_en_3_12_11_up(120320).bin root@192.168.1.1:/tmp</p><p>Type your root password when prompted and a slow upload will start.<br />Open PuTTY as SSH to 192.168.1.1 and perform the following commands:<br />cd /tmp<br />mvwr741nv4_en_3_12_11_up(120320).bin tplink.bin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170750">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">industrial</div>
					<div class="post-datetime">
						23 Jun 2012, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>i tried with upper mentioned firmware to revert him to tplink firmware but i get this error does anyone know what is this ?<br />root@OpenWrt:/tmp# mv &quot;wr741nv4_en_3_12_11_up(120320).bin&quot; tplink.bin<br />root@OpenWrt:/tmp# mtd -r write /tmp/tplink.bin firmware<br />Unlocking firmware ...</p><p>Writing from /tmp/tplink.bin to firmware ...&nbsp; [e]Failed to erase block</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p170753">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">industrial</div>
					<div class="post-datetime">
						23 Jun 2012, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>ok i got it back with next steps<br />i did as site say</p><p>PSCP.EXE -p -scp wr741nv4_en_3_12_11_up(120320).bin root@192.168.1.1:/tmp<br />or</p><p>Type your root password when prompted and a slow upload will start.<br />Open PuTTY as SSH to 192.168.1.1 and perform the following commands:</p><p>root@OpenWrt: cd ..<br />root@OpenWrt: cd temp<br />root@OpenWrt:/tmp# mv &quot;wr741nv4_en_3_12_11_up(120320).bin&quot; tplink.bin<br />root@OpenWrt:/tmp# mtd -r write /tmp/tplink.bin firmware<br />Unlocking firmware ...</p><p>Writing from /tmp/tplink.bin to firmware ...&nbsp; [e]Failed to erase block<br />Online</p><p>ok after 1st update try i lost wan, webgui and wifi only thing i didnt do is rebooting ruter cause i still had ssh connected so i did next.<br />after that i downloaded that is the 1st firmvare for v4 of 741nd<br /><a href="http://www.tplink.com/Resources/software/TL-WR741ND_V4_110914.zip">http://www.tplink.com/Resources/softwar … 110914.zip</a></p><p>and extracted it and renamed it to 1.bin and repeat procedure </p><p>PSCP.EXE -p -scp 1.bin root@192.168.1.1:/tmp</p><p>Type your root password when prompted<br />root@OpenWrt: cd ..<br />root@OpenWrt: cd temp<br />root@OpenWrt:/tmp# mv 1.bin tplink.bin<br />root@OpenWrt:/tmp# mtd -r write /tmp/1.bin firmware<br />Unlocking firmware ...</p><br /><p>Writing from /tmp/tplink.bin to firmware ...</p><p>reboot</p><p>i<br />cleared arp and got new ip loged to 741nd and got tplink firmware runing</p><p>after that i did upgrade to latest tplink firmware&nbsp; wr741nv4_en_3_12_11_up(120320).bin via web interface and all working as suppose to</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180626">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						15 Oct 2012, 11:39					</div>
				</div>
				<div class="post-content content">
					<p>Man, you have been lucky. I tried to write firmware which i downloaded to /tmp using wget and got my router bricked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> I ended up with the [e]Failed to erase block too, but I did a reboot in a hope it just failed and nothing was written <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>So, what is the difference between this (which led into bricking of my router):<br /></p><div class="codebox"><pre><code>cd /tmp
wget http://mypc.lan/wr741nv4_en_3_12_11_up(120320).bin
mv wr741nv4_en_3_12_11_up(120320).bin tplink.bin
mtd -r write /tmp/tplink.bin firmware</code></pre></div><p>and the scp above, which according to &quot;industrial&quot; works? The only difference I see that in my case was the firmware transferred via wget and &quot;industrial&quot; used scp to copy the file. What is the difference? In both cases the file with original firmware should be placed to /tmp <strong>unaltered</strong>, or am I wrong? Or is there some difference in the new tplink firmware which leads to [e]Failed to erase block, but the old firmware simply works fine? Why?</p><p>I&#039;m trying to find out what went wrong to avoid it in the future when I&#039;m going back to original fw. I have reflashed with newly built openwrt image many times (transferred using wget) and it went flawlessly, but I wanted to try factory firmware and now i will have to solder and use serial and lose the warranty, or I will have to risk a fee as high as the price of new router for unjustified warranty replacement <img src="https://forum.openwrt.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 15 Oct 2012, 11:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182333">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						4 Nov 2012, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>there should be no difference in the 2 methods, but he succeded restoring with the 110914 firmware! with the newest he had some problems too...</p><p>I SUPPOSE that the 120320 firmware has also the bootloader (bigger file, 4063744 vs 3932160, it&#039;s 131584 bytes larger, equals to 0x20200 in hex, the amount you have to trim when flashing those files as described in wiki!)<br />They used to add the word &quot;boot&quot; in the filename, now you have to pay attention to the file size.. EVIL TP-Link developers...</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr741nd#back.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a></p><p>anyway in tp-link site they say that if you have 110825 you should update to 111130 before upgrading to 120320, so if I would have to go back to stock I&#039;ll restore to 110914 and then upgrade &quot;gradually&quot; as they say.</p><p><a href="http://www.tp-link.com/en/support/download/?model=TL-WR741ND&amp;version=V4">http://www.tp-link.com/en/support/downl … version=V4</a></p><p>wondering if the bootloader update could create problems if you decide to install openwrt starting from 120320 stock version!!</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 4 Nov 2012, 18:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183465">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						16 Nov 2012, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for reply, that clears a lot, I read the warning about stripping the boot loader, but used the firmware without boot in filename, so I thought I should be ok. If the new firmwares contain boot loader, but have no boot in the file name, someone should correct the wiki. Evil TP link developers, indeed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183863">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">gulweb</div>
					<div class="post-datetime">
						21 Nov 2012, 14:47					</div>
				</div>
				<div class="post-content content">
					<p>I have found out the same for TL-WR841ND, and the two latest versions are not marked that they include boot, but are much larger than the previous versions. I tried to do an od -x -a of them, and also strings , but I cannot make senso of any fixed 0x20200 offset. So, at least for this router, the scheme has changed. Now, If I go back to the firmware that &quot;fits&quot; I guess I could the upgrade using tplink UI AND in the process get my Uboot upgraded. But, after that, I would still be stuck with firmware versions that include the bootloader. So, how do I find the signature that show where the actual firmware begins, the TP-Link Technologies string is not at offset 0x20200, and I cannot find it in the newer images. Is there any size and address information embedded in the images?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p183902">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						21 Nov 2012, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>please link files, i found everything normal in wr841nd v8 firmwares:</p><p><a href="http://www.tp-link.com/en/support/download/?model=TL-WR841ND&amp;version=V8">http://www.tp-link.com/en/support/downl … version=V8</a></p><p>last 2 firmwares are 0x20200 bigger, at that offset you can find the TP-Link string!</p><p>also they have &quot;boot&quot; in names <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 21 Nov 2012, 18:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188932">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">erazo</div>
					<div class="post-datetime">
						14 Jan 2013, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>i did this procedure and left me with a &quot;Bus error&quot; so i never get to upload the 110914 bin.<br />The router respond to ping, and when i try to connect with putty it asks for my user and pass and then just closes the window</p><br /><br /><div class="quotebox"><cite>industrial wrote:</cite><blockquote><p>ok i got it back with next steps<br />i did as site say</p><p>PSCP.EXE -p -scp wr741nv4_en_3_12_11_up(120320).bin root@192.168.1.1:/tmp<br />or</p><p>Type your root password when prompted and a slow upload will start.<br />Open PuTTY as SSH to 192.168.1.1 and perform the following commands:</p><p>root@OpenWrt: cd ..<br />root@OpenWrt: cd temp<br />root@OpenWrt:/tmp# mv &quot;wr741nv4_en_3_12_11_up(120320).bin&quot; tplink.bin<br />root@OpenWrt:/tmp# mtd -r write /tmp/tplink.bin firmware<br />Unlocking firmware ...</p><p>Writing from /tmp/tplink.bin to firmware ...&nbsp; [e]Failed to erase block<br />Online</p><p>ok after 1st update try i lost wan, webgui and wifi only thing i didnt do is rebooting ruter cause i still had ssh connected so i did next.<br />after that i downloaded that is the 1st firmvare for v4 of 741nd<br /><a href="http://www.tplink.com/Resources/software/TL-WR741ND_V4_110914.zip">http://www.tplink.com/Resources/softwar … 110914.zip</a></p><p>and extracted it and renamed it to 1.bin and repeat procedure </p><p>PSCP.EXE -p -scp 1.bin root@192.168.1.1:/tmp</p><p>Type your root password when prompted<br />root@OpenWrt: cd ..<br />root@OpenWrt: cd temp<br />root@OpenWrt:/tmp# mv 1.bin tplink.bin<br />root@OpenWrt:/tmp# mtd -r write /tmp/1.bin firmware<br />Unlocking firmware ...</p><br /><p>Writing from /tmp/tplink.bin to firmware ...</p><p>reboot</p><p>i<br />cleared arp and got new ip loged to 741nd and got tplink firmware runing</p><p>after that i did upgrade to latest tplink firmware&nbsp; wr741nv4_en_3_12_11_up(120320).bin via web interface and all working as suppose to</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188938">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						14 Jan 2013, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>Are you trying ssh or telnet?<br />Do you tried failsafe mode?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p188944">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">erazo</div>
					<div class="post-datetime">
						15 Jan 2013, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>I did everything &quot;industrial&quot; did and i got the same error but, in the step where he uploads the bin version 110914, i could not do it, pscp.exe asked for my password an then there was a message &quot;Lost connection&quot;.</p><p>Then when i was still with the putty session (ssh) open, with every command that i typed it said &quot;Bus error&quot;.<br />And thats it.</p><p>I havent rebooted the router, it is still conected to the internet trough the wan port and i am still able to conect to the internet trough the other ports in the router with a cable.</p><p>There is no wifi.</p><p>I closed the putty session, because it kept telling me the &quot;Bus error&quot; message.</p><p>Now i am not able to open another ssh session, it asks for my user and pass and thats it, it closes the program (putty)</p><p>So i guess i have a bricked router</p><br /><br /><br /><br /><br /><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>Are you trying ssh or telnet?<br />Do you tried failsafe mode?</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>erazo</strong> on 15 Jan 2013, 00:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p189040">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						15 Jan 2013, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>but you did not mention if you tried to trigger failsafe mode with the QSS button!</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr741nd#failsafe.mode">http://wiki.openwrt.org/toh/tp-link/tl- … lsafe.mode</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272939">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nadeem mujahid</div>
					<div class="post-datetime">
						18 Apr 2015, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>I gone through brick issue as configure the openwrt for testing, the TL-MR3420 TP-link router, but recovered through TFTP server it quit easy no need for console port an, use the solarwinds TFTP(i am using since 15-18 years now) TFTP server, now change the firmware name to mr3420v2_tp_recovery.bin, connect router and computer on single Ethernet straight back-2-back cable, change ip address of computer 192.168.0.66/255.255.255.0 without putting any gateway address, now switch-off all the computer firewall options on the computer Ethernet port, as TFTP required udp 69 port to access, but anyway if the firewall is not blocking the port then it is ok. Setup from solarwinds TFTP menu, the server directory where file mr3420v2_tp_recovery.bin is saved. Hold the Tplink router rest button before switching on the Tplink router router and you will see that 192.168.0.88 will access the file after you see message on the TFTP with name of the file mr3420v2_tp_recovery.bin recovered, then release Router rest button, change computer ip address to &quot;obtain Ip address&quot; switch off the router and switch it on, and here you are getting the new ip address on the computer and router LED will be stable now you can login with the new ip address through web. <br />I did it these by wireshark it shows me the router is looking for TFTP server recovery file with ip address 192.168.0.66, the file name mr3420v2_tp_recovery.bin I read some time back from some form for another tp-link router recovery, it took all about 1 hour to search read configure and solve. I thought if someone is having the same problem so it can help little.<br />Regards<br />Nadeem Mujahid</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294926">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">thanhtn</div>
					<div class="post-datetime">
						6 Oct 2015, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi Nadeem Mujahid,</p><p>I have broken one TP LINK MR3420 with the downgrade to origin firmware process. At now, my route is flash all time.</p><p>I have tried to configure tptp server and configure the server to 192.168.0.66 as your note. But no luck, I see that we have 2 button, one is power button, one reset button.<br />Can you help me how to press it for router to get the bin file ?<br />I have tried many time but no luck.</p><p>Thank you<br />ThanhTn</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329826">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">rbarreto</div>
					<div class="post-datetime">
						26 Jun 2016, 04:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello Guys,</p><p>I have one TP-LINK model TL-WR741ND Ver 4.20 and I needed to back to original firmware so I think that I have broken the router</p><p>I did as the wiki:</p><p><a href="https://wiki.openwrt.org/doc/howto/generic.uninstall">https://wiki.openwrt.org/doc/howto/generic.uninstall</a></p><div class="codebox"><pre><code>$ mv wr741nv4_en_3_17_0_up_boot\(150119\).bin wr741nv4.bin
$ scp wr741nv4.bin root@172.31.0.1:/tmp
The authenticity of host &#039;172.31.0.1 (172.31.0.1)&#039; can&#039;t be established.
RSA key fingerprint is 7d:a4:ad:14:c2:1a:f7:e3:df:d6:44:24:24:97:ca:44.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#039;172.31.0.1&#039; (RSA) to the list of known hosts.
wr741nv4.bin                                                                                                        100% 3969KB   1.3MB/s   00:03    

$ ssh root@172.31.0.1


BusyBox v1.23.2 (2015-07-25 15:09:46 CEST) built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 CHAOS CALMER (15.05, r46767)
 -----------------------------------------------------
  * 1 1/2 oz Gin            Shake with a glassful
  * 1/4 oz Triple Sec       of broken ice and pour
  * 3/4 oz Lime Juice       unstrained into a goblet.
  * 1 1/2 oz Orange Juice
  * 1 tsp. Grenadine Syrup
 -----------------------------------------------------

# cd /tmp/
# mtd -r write /tmp/wr741nv4.bin firmware
Unlocking firmware ...

Writing from /tmp/wr741nv4.bin to firmware ...  [e]Failed to erase block</code></pre></div><br /><br /><p>So after that I rebooted the router all the leds (except the power led) are flashing together</p><p>Right now I can&#039;t ping, ssh access, web access. </p><p>I tried turn off / turn on and reset button no success</p><p>How can I recovery the router ? I</p><p>Thank you</p><p>Regards </p><p>Robson</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329867">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">danymarc</div>
					<div class="post-datetime">
						26 Jun 2016, 18:58					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://bkil.blogspot.mx/2014/12/tftp-secret-of-tl-wr740n-uncovered.html?m=1">http://bkil.blogspot.mx/2014/12/tftp-se … d.html?m=1</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>