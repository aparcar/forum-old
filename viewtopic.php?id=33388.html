<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Extroot dont work on tp-l 3220</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p150608">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cargt3</div>
					<div class="post-datetime">
						8 Dec 2011, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>Hallo,</p><p>I have the problem with extroot. Earlier everything was working fine, but after firstboot, formating pendrive and configuring it again i dont work. I tried also with option is_rootfs 1 and target &#039;&#039;. I have the pendrive with only one ext3 partition.</p><p> This is my fstab file:<br />config global automount<br />&nbsp; &nbsp; option from_fstab 1<br />&nbsp; &nbsp; option anon_mount 1<br />&nbsp; &nbsp; <br />config global autoswap<br />&nbsp; &nbsp; option from_fstab 1<br />&nbsp; &nbsp; option anon_swap 0<br />&nbsp; &nbsp; <br />config mount<br />&nbsp; &nbsp; option target&nbsp; &nbsp; /overlay<br />&nbsp; &nbsp; option device&nbsp; &nbsp; /dev/sda1<br />&nbsp; &nbsp; option fstype&nbsp; &nbsp; ext3<br />&nbsp; &nbsp; option options&nbsp; &nbsp; rw,sync<br />&nbsp; &nbsp; option enabled&nbsp; &nbsp; 1<br />&nbsp; &nbsp; option enabled_fsck 0</p><p>config swap<br />&nbsp; &nbsp; option device&nbsp; &nbsp; /dev/sda2<br />&nbsp; &nbsp; option enabled&nbsp; &nbsp; 0</p><p>and dmesg</p><p>Linux version 2.6.39.4 (buildslave@dd.das-iro.de) (gcc version 4.5.4 20110808 (prerelease) (Linaro GCC 4.5-2011.08) ) #1 Thu Oct 27 04:56:37 CEST 2011<br />prom: fw_arg0=00000008, fw_arg1=a1f87fb0, fw_arg2=a1f88470, fw_arg3=00000004<br />MyLoader: sysp=f0f0f0f0, boardp=f0f0f0f0, parts=f0f0f0f0<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />SoC: Atheros AR7241 rev 1<br />Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:5.000MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />On node 0 totalpages: 8192<br />free_area_init_node: node 0, pgdat 802d1510, node_mem_map 81000000<br />&nbsp; Normal zone: 64 pages used for memmap<br />&nbsp; Normal zone: 0 pages reserved<br />&nbsp; Normal zone: 8128 pages, LIFO batch:0<br />pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />pcpu-alloc: [0] 0<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line:&nbsp; board=TL-MR3220 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 29268k/32768k available (2102k kernel code, 3500k reserved, 400k data, 180k init, 0k highmem)<br />SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />NR_IRQS:80<br />Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />pid_max: default: 32768 minimum: 301<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-MR3220<br />registering PCI controller with io_map_base unset<br />bio: create slab &lt;bio-0&gt; at 0<br />pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200<br />pci 0000:00:00.0: fixup device configuration<br />pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]<br />pci 0000:00:00.0: supports D1<br />pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:00:00.0: PME# disabled<br />pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])<br />PCI: mapping irq 72 to pin1@0000:00:00.0<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />UDP hash table entries: 256 (order: 0, 4096 bytes)<br />UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />NET: Registered protocol family 1<br />PCI: CLS 0 bytes, default 32<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />msgmni has been set to 57<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: found en25f32, expected m25p80<br />m25p80 spi0.0: en25f32 (4096 Kbytes)<br />spi0.0: searching for MyLoader partition table at offset 0x10000<br />spi0.0: searching for MyLoader partition table at offset 0x20000<br />spi0.0: searching for MyLoader partition table at offset 0x30000<br />spi0.0: searching for MyLoader partition table at offset 0x40000<br />spi0.0: no MyLoader partition table found<br />Searching for RedBoot partition table in spi0.0 at offset 0x3fe000<br />Searching for RedBoot partition table in spi0.0 at offset 0x3ff000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2CA000, len=126000<br />0x0000002ca000-0x0000003f0000 : &quot;rootfs_data&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xba000000, irq 5<br />eth0: Found an AR7240 built-in switch<br />eth1: Atheros AG71xx at 0xb9000000, irq 4<br />eth1: connected to PHY at ag71xx-mdio:04 [uid=004dd041, driver=Generic PHY]<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />ar71xx-wdt: timeout=15 secs (max=21)<br />TCP westwood registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 180k freed<br />input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0<br />Button Hotplug driver version 0.4.1<br />Registered led device: tl-mr3x20:green:system<br />Registered led device: tl-mr3x20:green:qss<br />Registered led device: tl-mr3x20:green:3g<br />eth0: link up (1000Mbps/Full duplex)<br />JFFS2 notice: (377) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 16 of xref (0 dead, 2 orphan) found.<br />SCSI subsystem initialized<br />usb_storage: Unknown symbol usb_alloc_urb (err 0)<br />usb_storage: Unknown symbol usb_free_urb (err 0)<br />usb_storage: Unknown symbol usb_alloc_coherent (err 0)<br />usb_storage: Unknown symbol usb_register_driver (err 0)<br />usb_storage: Unknown symbol usb_sg_init (err 0)<br />usb_storage: Unknown symbol usb_sg_cancel (err 0)<br />usb_storage: Unknown symbol usb_reset_device (err 0)<br />usb_storage: Unknown symbol usb_submit_urb (err 0)<br />usb_storage: Unknown symbol usb_free_coherent (err 0)<br />usb_storage: Unknown symbol usb_control_msg (err 0)<br />usb_storage: Unknown symbol usb_deregister (err 0)<br />usb_storage: Unknown symbol usb_lock_device_for_reset (err 0)<br />usb_storage: Unknown symbol usb_unlink_urb (err 0)<br />usb_storage: Unknown symbol usb_kill_urb (err 0)<br />usb_storage: Unknown symbol usb_reset_endpoint (err 0)<br />usb_storage: Unknown symbol usb_sg_wait (err 0)<br />eth0: link down<br />eth0: link up (1000Mbps/Full duplex)<br />device eth0 entered promiscuous mode<br />br-lan: port 1(eth0) entering forwarding state<br />br-lan: port 1(eth0) entering forwarding state<br />Compat-wireless backport release: compat-wireless-2011-09-28-6-g8163a60<br />Backport based on wireless-testing.git master-2011-10-05<br />cfg80211: Calling CRDA to update world regulatory domain<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />cfg80211: World regulatory domain updated:<br />cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />eth1: link up (100Mbps/Full duplex)<br />PCI: Setting latency timer of device 0000:00:00.0 to 64<br />ath: EEPROM regdomain: 0x0<br />ath: EEPROM indicates default country code should be used<br />ath: doing EEPROM country-&gt;regdmn map search<br />ath: country maps to regdmn code: 0x3a<br />ath: Country alpha2 being used: US<br />ath: Regpair used: 0x3a<br />ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />Registered led device: ath9k-phy0<br />ieee80211 phy0: Atheros AR9285 Rev:2 mem=0xb0000000, irq=72<br />cfg80211: Calling CRDA for country: US<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />NET: Registered protocol family 24<br />cfg80211: Regulatory domain changed to country: US<br />cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller<br />ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1<br />ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000<br />ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />nf_conntrack version 0.5.0 (460 buckets, 1840 max)<br />usb 1-1: new high speed USB device number 2 using ar71xx-ehci<br />ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />Initializing USB Mass Storage driver...<br />scsi0 : usb-storage 1-1:1.0<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Kingston DT 100 G2&nbsp; &nbsp; &nbsp; &nbsp; PMAP PQ: 0 ANSI: 0 CCS<br />cfg80211: Calling CRDA for country: PL<br />cfg80211: Regulatory domain changed to country: PL<br />cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)<br />cfg80211:&nbsp; &nbsp; &nbsp;(5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2700 mBm)<br />sd 0:0:0:0: [sda] 7835648 512-byte logical blocks: (4.01 GB/3.73 GiB)<br />sd 0:0:0:0: [sda] Write Protect is off<br />sd 0:0:0:0: [sda] Mode Sense: 03 41 00 00<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br /> sda: sda1<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br />sd 0:0:0:0: [sda] Attached SCSI removable disk<br />device wlan0 entered promiscuous mode<br />br-lan: port 2(wlan0) entering forwarding state<br />br-lan: port 2(wlan0) entering forwarding state<br />EXT4-fs (sda1): warning: mounting unchecked fs, running e2fsck is recommended<br />EXT4-fs (sda1): mounted filesystem with ordered data mode. Opts: (null)<br />device wlan0 left promiscuous mode<br />br-lan: port 2(wlan0) entering forwarding state<br />device wlan0 entered promiscuous mode<br />br-lan: port 2(wlan0) entering forwarding state<br />br-lan: port 2(wlan0) entering forwarding state<br />ar71xx-wdt: enabling watchdog timer<br />eth0: link down<br />br-lan: port 1(eth0) entering forwarding state</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>