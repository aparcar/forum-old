<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> cross compile application with mysql</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p357579">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ravi8632fr</div>
					<div class="post-datetime">
						2 May 2017, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>&nbsp; &nbsp; &nbsp; &nbsp;I am trying to cross compile a C application with mysql API. But i get following error, Pls anyone suggest me. </p><br /><p>#<br /># configuration written to .config<br />#<br />make[1]: Entering directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2&#039;<br />make[2]: Entering directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2&#039;<br />make[3]: Entering directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/package/DB_Sync&#039;<br />CFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kec -mdsp -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float&nbsp; -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/usr/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/include &quot; CXXFLAGS=&quot;-Os -pipe -mno-branch-likely -mips32r2 -mtune=24kec -mdsp -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float&nbsp; -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/usr/include -I/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/include &quot; LDFLAGS=&quot;-L/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/usr/lib -L/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/lib -L/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/usr/lib -L/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/lib &quot; make -j1 -C /home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/db_sync/. AR=mipsel-openwrt-linux-uclibc-ar AS=&quot;mipsel-openwrt-linux-uclibc-gcc -c -Os -pipe -mno-branch-likely -mips32r2 -mtune=24kec -mdsp -fno-caller-saves -fhonour-copts -Wno-error=unused-but-set-variable -msoft-float&quot; LD=mipsel-openwrt-linux-uclibc-ld NM=mipsel-openwrt-linux-uclibc-nm CC=&quot;mipsel-openwrt-linux-uclibc-gcc&quot; GCC=&quot;mipsel-openwrt-linux-uclibc-gcc&quot; CXX=&quot;mipsel-openwrt-linux-uclibc-g++&quot; RANLIB=mipsel-openwrt-linux-uclibc-ranlib STRIP=mipsel-openwrt-linux-uclibc-strip OBJCOPY=mipsel-openwrt-linux-uclibc-objcopy OBJDUMP=mipsel-openwrt-linux-uclibc-objdump SIZE=mipsel-openwrt-linux-uclibc-size CROSS=&quot;mipsel-openwrt-linux-uclibc-&quot; ARCH=&quot;mipsel&quot; ;<br />make[4]: Entering directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/db_sync&#039;<br />mipsel-openwrt-linux-uclibc-gcc -std=c99 -pthread -L/usr/local/mysql/lib -I/usr/local/include/mysql -lmysqlclient -lz `mysql_config --cflags --libs` db_sync.o -o db_sync<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libmysqlclient.so when searching for -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libmysqlclient.a when searching for -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: cannot find -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libz.so when searching for -lz<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libz.a when searching for -lz<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libmysqlclient.so when searching for -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libmysqlclient.a when searching for -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: cannot find -lmysqlclient<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libpthread.so when searching for -lpthread<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libpthread.a when searching for -lpthread<br />/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.8.3/../../../../mipsel-openwrt-linux-uclibc/bin/ld: skipping incompatible /usr/lib/i386-linux-gnu/libpthread_nonshared.a when searching for libpthread_nonshared.a<br />collect2: error: ld returned 1 exit status<br />make[4]: *** [db_sync] Error 1<br />make[4]: Leaving directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/db_sync&#039;<br />make[3]: *** [/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/db_sync/.built] Error 2<br />make[3]: Leaving directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/package/DB_Sync&#039;<br />make[2]: *** [package/DB_Sync/compile] Error 2<br />make[2]: Leaving directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2&#039;<br />make[1]: *** [/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/stamp/.package_compile] Error 2<br />make[1]: Leaving directory `/home/ravi/ralink-easy-think/bin/ramips/OpenWrt-SDK-ramips-for-linux-i686-gcc-4.8-linaro_uClibc-0.9.33.2&#039;<br />make: *** [world] Error 2</p><p>And my make file,</p><p>&nbsp; &nbsp;</p><div class="codebox"><pre><code># OpenWrt Makefile for carserver program
#
#
# Most of the variables used here are defined in
# the include directives below. We just need to 
# specify a basic description of the package, 
# where to build our program, where to find 
# the source files, and where to install the 
# compiled program on the router. 
# 
# Be very careful of spacing in this file.
# Indents should be tabs, not spaces, and 
# there should be no trailing whitespace in
# lines that are not commented.
# 
##############################################

include $(TOPDIR)/rules.mk

# Name and release number of this package
PKG_NAME:=db_sync
PKG_RELEASE:=1


# This specifies the directory where we&#039;re going to build the program.  
# The root build directory, $(BUILD_DIR), is by default the build_mipsel 
# directory in your OpenWrt SDK directory
PKG_BUILD_DIR := $(BUILD_DIR)/$(PKG_NAME)


include $(INCLUDE_DIR)/package.mk



# Specify package information for this program. 
# The variables defined here should be self explanatory.
# If you are running Kamikaze, delete the DESCRIPTION 
# variable below and uncomment the Kamikaze define
# directive for the description below
define Package/db_sync
    SECTION:=utils
    CATEGORY:=Utilities
    TITLE:=db_sync -- prints a snarky message
    DEPENDS:=+libpthread +libmysqlclient
endef


# Uncomment portion below for Kamikaze and delete DESCRIPTION variable above
#define Package/db_sync/description
#    If you can&#039;t figure out what this program does, you&#039;re probably
#    brain-dead and need immediate medical attention.
#endef



# Specify what needs to be done to prepare for building the package.
# In our case, we need to copy the source files to the build directory.
# This is NOT the default.  The default uses the PKG_SOURCE_URL and the
# PKG_SOURCE which is not defined here to download the source from the web.
# In order to just build a simple program that we have just written, it is
# much easier to do it this way.
define Build/Prepare
    mkdir -p $(PKG_BUILD_DIR)
    $(CP) ./src/* $(PKG_BUILD_DIR)/
endef


# We do not need to define Build/Configure or Build/Compile directives
# The defaults are appropriate for compiling a simple program such as this one


# Specify where and how to install the program. Since we only have one file, 
# the carserver executable, install it by copying it to the /bin directory on
# the router. The $(1) variable represents the root directory on the router running 
# OpenWrt. The $(INSTALL_DIR) variable contains a command to prepare the install 
# directory if it does not already exist.  Likewise $(INSTALL_BIN) contains the 
# command to copy the binary file from its current location (in our case the build
# directory) to the install directory.
define Package/db_sync/install
    $(INSTALL_DIR) $(1)/usr/bin
    $(INSTALL_BIN) $(PKG_BUILD_DIR)/db_sync $(1)/usr/bin/
endef


# This line executes the necessary commands to compile our program.
# The above define directives specify all the information needed, but this
# line calls BuildPackage which in turn actually uses this information to
# build a package.
$(eval $(call BuildPackage,db_sync))</code></pre></div><br /><div class="codebox"><pre><code># build carserver executable when user executes &quot;make&quot;
LDFLAGS= -std=c99 -pthread -L/usr/local/mysql/lib -I/usr/local/include/mysql -lmysqlclient -lz `mysql_config --cflags --libs`
#LDFLAGS= -pthread
#LDFLAGS= -pthread `mysql_config --cflags --libs`
db_sync: db_sync.o
    $(CC) $(LDFLAGS) db_sync.o -o db_sync
db_sync.o: db_sync.c
    $(CC) $(CFLAGS) -c db_sync.c

# remove object files and executable when user executes &quot;make clean&quot;
clean:
    rm *.o db_sync</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>