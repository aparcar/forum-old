<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to configure igmpproxy</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p339314">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doaaron</div>
					<div class="post-datetime">
						27 Sep 2016, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><br /><p>I am having trouble testing multicast UDP throughput over wireless. My setup is like this:</p><p>PC1 ---lan---router1---------wireless ad-hoc---------router2---lan---PC2</p><p>I am using iperf to test the connection like this:</p><p>server:<br />iperf -s -u -B 224.0.0.1<br />client:<br />iperf -c 224.0.0.1 -u -t 10 -i 1 -b 1M</p><p>If I run the above iperf test from router1 to router2, it works. However, the performance is a bit slow, and as I understand it, the throughput is higher when running the test from PC1 to PC2. This is where I get stuck. It seems that multicast packets are not automatically forwarded over the lan-wireless bridge. I have downloaded igmpproxy to fix this, but I don&#039;t understand how to configure igmpproxy. The configuration on OpenWRT&#039;s wiki page is shown below:</p><div class="codebox"><pre><code>config igmpproxy
        option quickleave 1

config phyint
        option network wan
        option direction upstream
        list altnet 0.0.0.0/0

config phyint
        option network lan
        option direction downstream</code></pre></div><p>So how would I change this so that multicast packets are forwarded from the LAN to the Wireless? I am able to do a normal UDP connection (non multicast) from PC1 to PC2 using iperf, so I&#039;m fairly certain it&#039;s the multicasting that&#039;s the problem.</p><br /><p>thanks,<br />Aaron</p><p>p.s. I have also tried simply disabling multicast-snooping, but it doesn&#039;t help.</p>											<p class="post-edited">(Last edited by <strong>doaaron</strong> on 27 Sep 2016, 10:16)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>