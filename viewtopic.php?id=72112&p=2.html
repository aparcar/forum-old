<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> configuring router so that some devices completely bypass vpn [SOLVED]</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Apr 2018 and 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=72112&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p365802">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Sep 2017, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>My request is only to connect from lan by public address.<br />Have you tried it, or it is expectation?</p><p><strong>I just can&#039;t connect to it from lan using its public IP address.</strong><br />We are exploring this issue.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365803">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 00:59					</div>
				</div>
				<div class="post-content content">
					<p>Sure, no problem. Yes, I&#039;ve tried it a few times, like this:</p><div class="codebox"><pre><code>eileen@vaio:~$ ssh bruno@73.226.70.41</code></pre></div><p>Cursor just blinks and eventually the connection attempt times out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365804">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Sep 2017, 00:59					</div>
				</div>
				<div class="post-content content">
					<p>In what case, 2)? 3)?</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 24 Sep 2017, 01:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365805">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 01:05					</div>
				</div>
				<div class="post-content content">
					<p>Case 3. Openvpn is on. Vpnbypass is on. My/target laptop (running ssh server) is on vpnbypass subnet, has local IP of 192.168.10.61. Router has port forwarding of wan port 22 to 192.168.10.61</p><p>If I try connecting from wife&#039;s laptop to my laptop, using my laptop&#039;s *public* IP, I can&#039;t. It makes no difference whether her laptop has a DHCP local IP (i.e., she&#039;s on vpn) or if she&#039;s on the vpnbypass subnet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365806">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Sep 2017, 01:11					</div>
				</div>
				<div class="post-content content">
					<p>OK, also try to move you laptop to vpn-lan subnet, what is result from connection from second laptop in the same vpn-lan subnet?</p><p>And what is in case 2)?</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 24 Sep 2017, 01:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365807">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 01:16					</div>
				</div>
				<div class="post-content content">
					<p>In case 2 (i.e., openvpn on, vpnbypass off), all laptops have VPN provider&#039;s public IP. VPN provider doesn&#039;t make it easy (if even possible) to forward ports. It doesn&#039;t work nor would I expect it to.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365808">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Sep 2017, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Port forwarding both from lan and wan side is configured on your router, we are exploring just it, it is not affected by your provider, if wan interface of your router has public IP! Please, post output of<br /></p><div class="codebox"><pre><code>ifconfig</code></pre></div><p>from your router.</p><p>Try formally to connect to it from lan using its public IP address, as you&#039;ve done in case 3), for case 2).</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 24 Sep 2017, 01:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365811">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 02:23					</div>
				</div>
				<div class="post-content content">
					<p>Even though I didn&#039;t understand it, I tried it anyway on your say-so...and was greatly surprised. I get it now.</p><p>While vpnbypass was still on, I made a note of my laptop&#039;s public IP address. Then turned vpnbypass off in router. My laptop&#039;s local IP hasn&#039;t changed (still 192.168.10.61, same as in router&#039;s port forward rule), but its public IP has changed from ISP&#039;s to VPN&#039;s. So far, nothing new to me. </p><p>What I sort of knew in a vague way but failed to fully grasp is the fact that <strong>the router still has both ISP&#039;s and VPN&#039;s public IP addresses on the two respective interfaces. </strong>Wow, this sank in pretty good now.</p><p>I can confirm that running this command works when openvpn is on but vpnbypass is off in the router:</p><div class="codebox"><pre><code>eileen@vaio:~$ ssh bruno@73.226.70.41</code></pre></div><p>The last mystery is why the above command fails when vpnbypass is on.</p>											<p class="post-edited">(Last edited by <strong>GNUser</strong> on 24 Sep 2017, 02:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365812">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 02:36					</div>
				</div>
				<div class="post-content content">
					<p>BTW, we&#039;ll be away on vacation from tomorrow to Tuesday. I should be able to do one or two more experiments between now and when we leave, but then there&#039;ll be some radio silence until Tuesday night.</p>											<p class="post-edited">(Last edited by <strong>GNUser</strong> on 24 Sep 2017, 02:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365819">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Sep 2017, 10:59					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for confirmation of my assumption 8-)<br />The result is as it was expected. I can explain you principle, if you wish, but it is better to do via Skype, e.g.<br />What is next step?<br />1) To explain you principle.<br />2) To try to solve the issue, modifying routing table.<br />3) To adapt script in another topic.<br />Please, decide, and after your vacation we&#039;ll return to it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365832">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						24 Sep 2017, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>Sounds like a great plan. We&#039;ll resume upon my return. You rock!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365969">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">GNUser</div>
					<div class="post-datetime">
						27 Sep 2017, 02:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi, ulmwind. I&#039;m back. Please sign me up for 1-3 above. </p><p>Regarding #1, explaining the principle is quite a generous offer (especially given that I know very little about networking/routing). Therefore, I would gratefully accept the explanation in whatever format is most convenient for you. If Skype is what you would prefer, please contact me at routernoob AT dantas DOT airpost DOT net so that we can arrange a time that would work for you.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=72112&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>