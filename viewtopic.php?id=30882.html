<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WPS Button dosen&#039;t work on wndr3700v2</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p139184">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Ultimo67</div>
					<div class="post-datetime">
						15 Jul 2011, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,<br />I tried to configure my wndr3700v2 (with backfire 10.03.1-rc5) to use the wps button following the steps here... <a href="http://wiki.openwrt.org/toh/netgear/wndr3700#activate.wifi.button.and.wps.button">http://wiki.openwrt.org/toh/netgear/wnd … wps.button</a></p><p>However when I try to run the command:</p><p>hostapd_cli -p /var/run/hostapd-phy0 wps_pbc </p><p>from the command line I get the following message: wps_pbc unknown command.<br />Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139185">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						15 Jul 2011, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>Did you set wps_pushbutton 1 under wifi-iface in /etc/config/wireless?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139186">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Ultimo67</div>
					<div class="post-datetime">
						15 Jul 2011, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>yes ... I put the tag on both interfaces (2.4 and 5 GHz). (config &#039;wifi-iface&#039;)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142087">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						25 Aug 2011, 09:36					</div>
				</div>
				<div class="post-content content">
					<p>Having the same problem with Buffalo WZR-HP-G300NH. I have replaced wpad-mini with wpad and installed hostapd-utils. In /etc/config/wireless I have</p><div class="codebox"><pre><code>config &#039;wifi-iface&#039;
    option &#039;device&#039; &#039;radio0&#039;
    option &#039;network&#039; &#039;lan&#039;
    option &#039;mode&#039; &#039;ap&#039;
    option &#039;ssid&#039; &#039;Andromeda&#039;
    option &#039;encryption&#039; &#039;psk2&#039;
    option &#039;key&#039; &#039;********&#039;
    option &#039;wps_pushbutton&#039; &#039;1&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142102">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						25 Aug 2011, 12:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Having the same problem with Buffalo WZR-HP-G300NH. I have replaced wpad-mini with wpad and installed hostapd-utils.</p></blockquote></div><p>And have you implemented a WPS button hotplug? <br />See the hotplug script that I wrote for WNDR3700:<br /><a href="http://wiki.openwrt.org/toh/netgear/wndr3700#activate.wifi.button.and.wps.button">http://wiki.openwrt.org/toh/netgear/wnd … wps.button</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142103">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						25 Aug 2011, 12:28					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it is implemented, but the problem appears already when running</p><p>hostapd_cli -p /var/run/hostapd-phy0 wps_pbc</p><p>from the command line.</p><p>I&#039;m starting to think that maybe the problem is in the hostapd_cli binary, since WPS support is correctly advertised to clients. I wonder if there is a compile option in hostap-utils which determines the supported commands?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142105">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						25 Aug 2011, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Seems to work OK in my build:</p><div class="codebox"><pre><code>root@OpenWrt /root# hostapd_cli -p /var/run/hostapd-phy0 wps_pbc
Selected interface &#039;wlan0&#039;
OK</code></pre></div><p>No special compile options, wpad/hostapd-utils version 20110527-2. I don&#039;t have a WPS capable client to test though.</p><p>Have you seen this? <a href="https://dev.openwrt.org/ticket/9597">https://dev.openwrt.org/ticket/9597</a></p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 25 Aug 2011, 12:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142153">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">zyamb</div>
					<div class="post-datetime">
						26 Aug 2011, 03:34					</div>
				</div>
				<div class="post-content content">
					<p>My Buffalo WZR-HP-G300NH also doesn&#039;t understand what &#039;wps_pbc&#039; is.&nbsp; Running wpad &amp; hostpad-utils, configured the option wps_pushbutton, installed the hotplug, and still I get:</p><p>#&nbsp; hostapd_cli -p /var/run/hostapd-phy0 wps_pbc<br />Selected interface &#039;wlan0&#039;<br />Unknown command &#039;wps_pbc&#039;</p><p>Any thoughts?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142170">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						26 Aug 2011, 11:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Have you seen this? <a href="https://dev.openwrt.org/ticket/9597">https://dev.openwrt.org/ticket/9597</a></p></blockquote></div><p>Indeed, it seems that the commands recognized by hostapd_cli depend on whether it was built together with wpad-mini or wpad (full). I rebuilt hostapd-utils together with wpad, and lo and behold, wps_pbc is recognized and wps works.</p><p>I uploaded the binary <a href="http://ltl.tkk.fi/~malaakso/misc/hostapd_cli">here</a>, in case someone wants to try it.</p>											<p class="post-edited">(Last edited by <strong>snk</strong> on 26 Aug 2011, 11:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142280">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						27 Aug 2011, 13:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Having the same problem with Buffalo WZR-HP-G300NH. I have replaced wpad-mini with wpad and installed hostapd-utils.</p></blockquote></div><p>Did you remove both wpad-mini and hostapd-mini?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142424">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">snk</div>
					<div class="post-datetime">
						29 Aug 2011, 08:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Having the same problem with Buffalo WZR-HP-G300NH. I have replaced wpad-mini with wpad and installed hostapd-utils.</p></blockquote></div><p>Did you remove both wpad-mini and hostapd-mini?</p></blockquote></div><p>I don&#039;t think I ever had hostapd-mini, only wpad-mini.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177587">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">lorcap</div>
					<div class="post-datetime">
						10 Sep 2012, 09:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Having the same problem with Buffalo WZR-HP-G300NH. I have replaced wpad-mini with wpad and installed hostapd-utils.</p></blockquote></div><p>Same problem here for a BRCM63xx based router (exact image <a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/openwrt-AGV2+W-jffs2-128k-cfe.bin">here</a>) for Backfire 10.03.1 and same cure as <a href="https://forum.openwrt.org/viewtopic.php?pid=142170#p142170">snk</a>.</p><p>Has anyone field a bug report?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178106">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						13 Sep 2012, 20:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Indeed, it seems that the commands recognized by hostapd_cli depend on whether it was built together with wpad-mini or wpad (full).</p></blockquote></div><p>Fixed with <a href="https://dev.openwrt.org/changeset/33393">https://dev.openwrt.org/changeset/33393</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185502">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ack</div>
					<div class="post-datetime">
						7 Dec 2012, 21:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><div class="quotebox"><cite>snk wrote:</cite><blockquote><p>Indeed, it seems that the commands recognized by hostapd_cli depend on whether it was built together with wpad-mini or wpad (full).</p></blockquote></div><p>Fixed with <a href="https://dev.openwrt.org/changeset/33393">https://dev.openwrt.org/changeset/33393</a></p></blockquote></div><p>Please do remember that to use WPS, you still need to install the full version of wpad!<br />Not realizing this sent me into a spin for quite some time today, `$ wifi` giving me lots of errors about unrecognized options, until I finally replaced wpad-mini with wpad.</p><p>(isn&#039;t that why they call this OpenWRT version &quot;Attitude Adjustment&quot;? How ironic :-) )</p>											<p class="post-edited">(Last edited by <strong>ack</strong> on 7 Dec 2012, 21:26)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>