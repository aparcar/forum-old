<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WDR4900 v1.3 Bricked</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p246932">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">qlum</div>
					<div class="post-datetime">
						13 Sep 2014, 13:40					</div>
				</div>
				<div class="post-content content">
					<p>So this is what happened: I was running my WDR4900 on some version of openwrt for a long time as an access point however when my isp router died I wanted to use it to replace it. As I did not have a constant internet connection and could not install lucy to get it to work </p><p>I used the method from this post: <a href="https://forum.openwrt.org/viewtopic.php?pid=236428#p236428">https://forum.openwrt.org/viewtopic.php … 28#p236428</a></p><p>to get back to a version with luci however that went pretty bad. I waited for quite some time after that and all the lights except the power and the lan port went out. After rebooting only those lights kept burning. I tried connecting to telnet and ssh (with the failsafe method) but to no avail. I looked at it in wireshark but it also does not show any lifesigns of the router. <br />However when I keep the reset pressed on boot I do get the tftp request and I can transfer files to it which I tried multiple times. Sadly it has 0 effect even if the tftp server tells me the transfer is sucessful and even if wirershark also shows the transfer.</p><p>Any possible fixes for this? <br />(preferably without soldering / opening up the thing)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246936">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						13 Sep 2014, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>Which firmware you flash with tftp ? It must be stripped not contain bootloader</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246937">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">qlum</div>
					<div class="post-datetime">
						13 Sep 2014, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>The firmware included in the package I linked to, it also included a tftp server and was meant for recovery so I assume it did not include a bootloader. After that I have tried some other ones which i cannot remember exactly so maybe I have tried one with a bootloader by accident.</p>											<p class="post-edited">(Last edited by <strong>qlum</strong> on 13 Sep 2014, 15:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246947">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						13 Sep 2014, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>Try windows 8 as suggested in the lastest post in topic you posted. Very strange</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 13 Sep 2014, 18:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246948">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">qlum</div>
					<div class="post-datetime">
						13 Sep 2014, 18:12					</div>
				</div>
				<div class="post-content content">
					<p>I am using windows 8 sadly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246949">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						13 Sep 2014, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>In my opinion the problem is with wdr4300 globally not only your router. Tp-link must publish new firmwere+bootloader to fix the recovery mode problem. Recovery works for me in tl-wr841n v9. Many people report that works for 842. </p><p>Now your only possibility is to use serial port. No other way, sorry</p><p>DDon&#039;t worry about flashing firmware with bootloader through recovery mode because the router checks the firmware before erase the memory and boot the new one <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 13 Sep 2014, 18:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246955">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">qlum</div>
					<div class="post-datetime">
						13 Sep 2014, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>Okay, I will keep this thread open for a few days in the hope that someone has some brilliant ideas on fixing it.</p><p>BTW do you have any tips on the serial connection thing, I have never done something like that?</p>											<p class="post-edited">(Last edited by <strong>qlum</strong> on 14 Sep 2014, 12:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247015">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">noblem</div>
					<div class="post-datetime">
						14 Sep 2014, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>The wiki guide for serial recovery is pretty comprehensive and easy to follow, however a couple of tips from my attempts;</p><ul><li><p>Make sure you&#039;ve got a good cable - The one I used is described as an FTDI USB To Serial Cable FT232 chipset. </p></li><li><p>If you can get a <a href="http://en.wikipedia.org/wiki/Pin_header#mediaviewer/File:6_Pin_Header.jpg">circuit board header</a> you can get away without soldering, which I&#039;d not recommend - looks like there are solder less headers available which would be a bit more secure</p></li><li><p>Picking a cable where each wire has a in individual connector will help as you&#039;ll need to connect up to the pins shown in the wiki</p></li><li><p>Finally, possibly obvious, but you connect rx on the cable to tx on the router and vice versa</p></li></ul><p>Hopefully this will help,I spent ages messing with mine when I could have fixed it, without soldering, if I&#039;d had the correct cable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247050">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						14 Sep 2014, 20:12					</div>
				</div>
				<div class="post-content content">
					<p>If you follow the tftp recovery directions very precisely, you should be able to recover it. Here is a youtube video that may help:</p><p><a href="https://www.youtube.com/watch?v=54PAS0gvW2k">https://www.youtube.com/watch?v=54PAS0gvW2k</a></p><p>Reference instructions from youtube (link to this forum):<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=236428#p236428">https://forum.openwrt.org/viewtopic.php … 28#p236428</a></p><div class="quotebox"><cite>dabyd64 wrote:</cite><blockquote><p>I tried the recovery mode and it worked perfect.<br />Download and extract this file:<br /> <a href="https://dl.dropboxusercontent.com/u/23958662/WDR4900%20recover.zip">https://dl.dropboxusercontent.com/u/239 … ecover.zip</a><br />- Set your ip to 192.168.0.66, mask 255.255.255.0. Do not set anything else.<br />- Connect the computer to the WDR4900&#039;s&nbsp; switch,any port is ok, BUT NOT wan port!<br />- Open TFTPD32, leave it visible.<br />- Power on the router while keeping pressed the WPS/reset button, wait while keeping pressed at least 20 seconds.<br />- At some point, you should see that TFTPD32 starts a transfer. Just wait, the router will self reboot after 2 minutes or so.<br />- Done!</p></blockquote></div><p>Don&#039;t forget to set your PC back to get an IP via DHCP after you&#039;re done.</p><p>Once you have recovered, I recommend you stick to 14.07-rc3 (or rc4/final when available) since they include luci without requiring any additional download.</p>											<p class="post-edited">(Last edited by <strong>drawz</strong> on 16 Sep 2014, 04:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247159">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">freddy123</div>
					<div class="post-datetime">
						16 Sep 2014, 04:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drawz wrote:</cite><blockquote><p>If you fall the tftp recovery directions very precisely, you should be able to recover it. Here is a youtube video that may help:</p><p><a href="https://www.youtube.com/watch?v=54PAS0gvW2k">https://www.youtube.com/watch?v=54PAS0gvW2k</a></p></blockquote></div><p>If the OP is having problems with the tftp recovery. It maybe like the 4900 here i couldn&#039;t find any reference with wireshark not to mention t the upload to happen..</p><p>I recovered mine with the serial console no problem the wiki has a very comprehensive how to.&nbsp; Well done to who wrote it..</p><p>To connect the serial no solder is required at all...&nbsp; all you need is tapered pins drop them in and way you go.</p><br /><p>Better for the board.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p247224">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">qlum</div>
					<div class="post-datetime">
						16 Sep 2014, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>Okay I will probably look for the stuff to buy in the weekend.</p><p>And yes I did try the recovery again step by step, to no avail of course. I can transfer the files to the router just fine but once the router gets them it doesn&#039;t do anything with them. After it bricked it of course.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>