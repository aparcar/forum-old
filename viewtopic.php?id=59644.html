<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291916">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						15 Sep 2015, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>how to find out the client connected to router.( chip is MT7620a) the router is openwrt installed, i need to find out the client which are connected to the router using and code.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292584">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">th3gr8</div>
					<div class="post-datetime">
						19 Sep 2015, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>You can see the list of clients connected to your router via DHCP in the file &quot;dhcp.leases&quot; located in &quot;/tmp&quot; folder. But this file is not getting updated if a client gets disconnected from your router.</p><p>Another option is viewing arp-table. You can view it by using &quot;arp&quot;. But, arp table also has updation issues as Dhco.leases.</p><p>Another, and quite stable and handy, tool is &quot;arp-scan&quot; command. It doesn&#039;t have any issue of updation. But, this command is not generally available in openwrt, you have to compile it&#039;s source according to your board.</p><p>PS: you can also use &quot;nmap&quot; and &quot;tcpdump&quot; commands as they are already available in OpenWRT.</p><p>I hope it helps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292792">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						21 Sep 2015, 09:29					</div>
				</div>
				<div class="post-content content">
					<p>I need c code to demonstrate this result. so can u help me to give a c code</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292800">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						21 Sep 2015, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>can any one tell me how to get the signal strength of the device&#039;s which are connected to the router. my router is openwrt installed and i need c code to achieve this task</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292822">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						21 Sep 2015, 15:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>th3gr8 wrote:</cite><blockquote><p>Another, and quite stable and handy, tool is &quot;arp-scan&quot; command. It doesn&#039;t have any issue of updation. But, this command is not generally available in openwrt, you have to compile it&#039;s source according to your board.</p></blockquote></div><p>Can you please show some examples on how to use <em>arp-scan</em> to achieve this?</p><div class="quotebox"><blockquote><p>PS: you can also use &quot;nmap&quot; and &quot;tcpdump&quot; commands as they are already available in OpenWRT.</p></blockquote></div><p>I will also be interested to see some examples with either <em>nmap</em> or <em>tcpdump</em>, if you don&#039;t mind.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292824">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						21 Sep 2015, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>there is no nmap found on the router.<br />root@OpenWrt:~# nmap<br />-ash: nmap: not found</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292827">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						21 Sep 2015, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m doing my project so it&#039;s important me to gather an information like connected devices to router and signal strength of those devices.... can any one&nbsp; please help me to get those information by c code... i need c code to chive this tasks....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292837">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">tl71</div>
					<div class="post-datetime">
						21 Sep 2015, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Can you explain why you need c-code for things already available from the shell?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292919">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						22 Sep 2015, 08:58					</div>
				</div>
				<div class="post-content content">
					<p>that will help me for my project... there is no any software or nothing is there to get me those information.... c code will help me to do this and even i can able to modify the code if i need any changes&nbsp; means... so for that asking the c code</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292936">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">th3gr8</div>
					<div class="post-datetime">
						22 Sep 2015, 13:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>th3gr8 wrote:</cite><blockquote><p>Another, and quite stable and handy, tool is &quot;arp-scan&quot; command. It doesn&#039;t have any issue of updation. But, this command is not generally available in openwrt, you have to compile it&#039;s source according to your board.</p></blockquote></div><p>Can you please show some examples on how to use <em>arp-scan</em> to achieve this?</p><br /><div class="quotebox"><blockquote><p>PS: you can also use &quot;nmap&quot; and &quot;tcpdump&quot; commands as they are already available in OpenWRT.</p></blockquote></div><p>I will also be interested to see some examples with either <em>nmap</em> or <em>tcpdump</em>, if you don&#039;t mind.</p></blockquote></div><p>For example:<br />arp-scan --interface=eth0 --localnet<br />here, interface name may vary depending on the interface being used or required to get scanned.</p><br /><p>You can google for the syntax/uses of nmap and tcpdump:</p><p>for example:<br />nmap -v google.com</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292937">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">th3gr8</div>
					<div class="post-datetime">
						22 Sep 2015, 13:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>meghasbiradar93 wrote:</cite><blockquote><p>there is no nmap found on the router.<br />root@OpenWrt:~# nmap<br />-ash: nmap: not found</p></blockquote></div><p>You need to select the nmap command in before running make i.e. select nmap via &quot;make menuconfig&quot; ..<br />Also, you can download the package using:<br />&quot;opkg install nmap&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292941">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">meghasbiradar93</div>
					<div class="post-datetime">
						22 Sep 2015, 13:48					</div>
				</div>
				<div class="post-content content">
					<p>hi i have&nbsp; got the code for this task the code is:</p><br /><p>#include &lt;linux/wireless.h&gt;<br />#include &lt;wireless.h&gt;<br />#include &lt;sys/types.h&gt;<br />#include &lt;sys/socket.h&gt;<br />#include &lt;uci.h&gt;<br />#include &lt;stdio.h&gt;<br />#include &lt;stdlib.h&gt;<br />/* The name of the interface */<br />#ifndef IW_NAME<br />#define IW_NAME &quot;eth1&quot;<br />#endif</p><p>int main()<br />{<br />int sockfd;<br />struct iw_statistics stats;<br />struct iwreq req;<br />memset(&amp;stats, 0, sizeof(stats));<br />memset(&amp;req, 0, sizeof(iwreq));<br />sprintf(req.ifr_name, &quot;rausb0&quot;);<br />req.u.data.pointer = &amp;stats;<br />req.u.data.length = sizeof(iw_statistics);<br />#ifdef CLEAR_UPDATED<br />req.u.data.flags = 1;<br />#endif</p><p>/* Any old socket will do, and a datagram socket is pretty cheap */<br />if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {<br />perror(&quot;Could not create simple datagram socket&quot;);<br />exit(EXIT_FAILURE);<br />}</p><p>/* Perform the ioctl */<br />if(ioctl(sockfd, SIOCGIWSTATS, &amp;req) == -1) {<br />perror(&quot;Error performing SIOCGIWSTATS&quot;);<br />close(sockfd);<br />exit(EXIT_FAILURE);<br />}</p><p>close(sockfd);</p><p>printf(&quot;Signal level%s is %d%s.\n&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1,1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Top<br />(stats.qual.updated &amp; IW_QUAL_DBM ? &quot; (in dBm)&quot; :&quot;&quot;),<br />stats.qual.level,<br />(stats.qual.updated &amp; IW_QUAL_LEVEL_UPDATED ? &quot; (updated)&quot; :&quot;&quot;));</p><p>return 0;<br />}<br />&nbsp; &nbsp; &nbsp;</p><br /><p>but while compiling it&#039;s giving the error like:<br />In file included from /opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:74:0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from 111.c:1:<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/if.h:181:19: error: field &#039;ifru_addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/if.h:182:19: error: field &#039;ifru_dstaddr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/if.h:183:19: error: field &#039;ifru_broadaddr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/if.h:184:19: error: field &#039;ifru_netmask&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/if.h:185:20: error: field &#039;ifru_hwaddr&#039; has incomplete type<br />In file included from 111.c:1:0:<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:751:19: error: field &#039;addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:777:18: error: field &#039;bssid&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:835:18: error: field &#039;addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:848:18: error: field &#039;addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:861:18: error: field &#039;bssid&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:869:18: error: field &#039;src_addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:880:18: error: field &#039;bssid&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:934:18: error: field &#039;ap_addr&#039; has incomplete type<br />/opt/toolchain-mipsel_gcc-4.6-linaro_uClibc-0.9.33.2/bin/../lib/gcc/mipsel-openwrt-linux-uclibc/4.6.3/../../../../mipsel-openwrt-linux-uclibc/sys-include/linux/wireless.h:935:18: error: field &#039;addr&#039; has incomplete type<br />111.c:2:22: fatal error: wireless.h: No such file or directory<br />compilation terminated.</p><br /><br /><p>can any one help me what changes do i made so that this code will get work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292955">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Sep 2015, 16:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>th3gr8 wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>th3gr8 wrote:</cite><blockquote><p>Another, and quite stable and handy, tool is &quot;arp-scan&quot; command. It doesn&#039;t have any issue of updation. But, this command is not generally available in openwrt, you have to compile it&#039;s source according to your board.</p></blockquote></div><p>Can you please show some examples on how to use <em>arp-scan</em> to achieve this?</p><br /><div class="quotebox"><blockquote><p>PS: you can also use &quot;nmap&quot; and &quot;tcpdump&quot; commands as they are already available in OpenWRT.</p></blockquote></div><p>I will also be interested to see some examples with either <em>nmap</em> or <em>tcpdump</em>, if you don&#039;t mind.</p></blockquote></div><p>For example:<br />arp-scan --interface=eth0 --localnet<br />here, interface name may vary depending on the interface being used or required to get scanned.</p><br /><p>You can google for the syntax/uses of nmap and tcpdump:</p><p>for example:<br />nmap -v google.com</p></blockquote></div><p>Many thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292957">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						22 Sep 2015, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>meghasbiradar93 wrote:</cite><blockquote><p>hi i have&nbsp; got the code for this task the code is:</p><br /><div class="codebox"><pre><code>#include &lt;linux/wireless.h&gt;
#include &lt;wireless.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;uci.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
/* The name of the interface */
#ifndef IW_NAME
#define IW_NAME &quot;eth1&quot;
#endif

int main()
{
int sockfd;
struct iw_statistics stats;
struct iwreq req;
memset(&amp;stats, 0, sizeof(stats));
memset(&amp;req, 0, sizeof(iwreq));
sprintf(req.ifr_name, &quot;rausb0&quot;);
req.u.data.pointer = &amp;stats;
req.u.data.length = sizeof(iw_statistics);
#ifdef CLEAR_UPDATED
req.u.data.flags = 1;
#endif

/* Any old socket will do, and a datagram socket is pretty cheap */
if((sockfd = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {
perror(&quot;Could not create simple datagram socket&quot;);
exit(EXIT_FAILURE);
}

/* Perform the ioctl */
if(ioctl(sockfd, SIOCGIWSTATS, &amp;req) == -1) {
perror(&quot;Error performing SIOCGIWSTATS&quot;);
close(sockfd);
exit(EXIT_FAILURE);
}

close(sockfd);

printf(&quot;Signal level%s is %d%s.\n&quot;,
                                                                                                                                                              1,1           Top
(stats.qual.updated &amp; IW_QUAL_DBM ? &quot; (in dBm)&quot; :&quot;&quot;),
stats.qual.level,
(stats.qual.updated &amp; IW_QUAL_LEVEL_UPDATED ? &quot; (updated)&quot; :&quot;&quot;));

return 0;
}</code></pre></div><p>can any one help me what changes do i made so that this code will get work.</p></blockquote></div><p>Out of curiosity and if I may ask, where did you get this code from and what does it suppose to do?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>