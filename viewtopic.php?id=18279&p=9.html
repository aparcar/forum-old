<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Netgear WNR2000 OpenWRT (Atheros AP81, AR9103 chip, u-boot)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2018 and 3 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 9 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=18279&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=18279&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=18279&amp;p=11.html">11</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=15.html">15</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p196090">
				<div class="post-metadata">
					<div class="post-num">Post #201</div>
					<div class="post-author">backlund</div>
					<div class="post-datetime">
						25 Mar 2013, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone tell me what the process is of reverting back to the stock firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196174">
				<div class="post-metadata">
					<div class="post-num">Post #202</div>
					<div class="post-author">hyujitong</div>
					<div class="post-datetime">
						26 Mar 2013, 05:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>backlund wrote:</cite><blockquote><p>Can anyone tell me what the process is of reverting back to the stock firmware?</p></blockquote></div><p>You can use putty to log in to ssh.&nbsp; Then type the following:</p><p>mtd erase u-boot-env<br />mtd erase uImage<br />reboot</p><p>After the router reboots, you can flash to the factory firmware (use something like tftp2 for gui assistance).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197273">
				<div class="post-metadata">
					<div class="post-num">Post #203</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						4 Apr 2013, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>Somehow after I restore configuration, my router stuck somewhere<br />Anybody know how to enter failsafe mode without serial port?</p><p>===================================================<br />find the answer this<br />to enter openwrt in safe mode<br />plugin power and press and release wps button couple time<br />until you see all leds flashing, meaning openwrt in safe mode</p>											<p class="post-edited">(Last edited by <strong>dony71</strong> on 13 Apr 2013, 02:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197401">
				<div class="post-metadata">
					<div class="post-num">Post #204</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						5 Apr 2013, 23:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dony71 wrote:</cite><blockquote><p>Somehow after I restore configuration, my router stuck somewhere<br />Anybody know how to enter failsafe mode without serial port?</p></blockquote></div><p>seems nobody knows<br />i can&#039;t wait so i make serial cable and fix my router</p><p>now, another question if anybody knows<br />is it possible to make vlan on this device?<br />check swconfig but failed to connect switch</p>											<p class="post-edited">(Last edited by <strong>dony71</strong> on 6 Apr 2013, 00:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197426">
				<div class="post-metadata">
					<div class="post-num">Post #205</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						6 Apr 2013, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>there&#039;s a&nbsp; bug or something weird about the config.&nbsp; &nbsp;Some discussion (with currently no solution) here:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=43133">https://forum.openwrt.org/viewtopic.php?id=43133</a></p>											<p class="post-edited">(Last edited by <strong>vhrm</strong> on 6 Apr 2013, 05:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197427">
				<div class="post-metadata">
					<div class="post-num">Post #206</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						6 Apr 2013, 02:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vhrm wrote:</cite><blockquote><p>there&#039;s a&nbsp; bug or something weird about the config some discussion (with currently no solution) here:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=43133">https://forum.openwrt.org/viewtopic.php?id=43133</a></p></blockquote></div><p>simple conclusion, does it mean using backfire, i cannot make vlan with this device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197434">
				<div class="post-metadata">
					<div class="post-num">Post #207</div>
					<div class="post-author">vhrm</div>
					<div class="post-datetime">
						6 Apr 2013, 05:26					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t tried backfire so don&#039;t know if it would work there, but it doesn&#039;t work on aa_rc1 or trunk.&nbsp; &nbsp;At least not w/ images built as described in this thread.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197438">
				<div class="post-metadata">
					<div class="post-num">Post #208</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						6 Apr 2013, 06:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vhrm wrote:</cite><blockquote><p>I haven&#039;t tried backfire so don&#039;t know if it would work there, but it doesn&#039;t work on aa_rc1 or trunk.&nbsp; &nbsp;At least not w/ images built as described in this thread.</p></blockquote></div><p>i can confirm, doesn&#039;t work on backfire either<br />btw i need more space on jffs on backfire<br />i notice aa-rc1 has more space than backfire, but i want proven stable firmware<br />that&#039;s why i choose backfire<br />do you know which modules i can remove?<br />i notice wnr2000 doesn&#039;t have usb, but why usb module being loaded?<br />i cannot remove also</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p197719">
				<div class="post-metadata">
					<div class="post-num">Post #209</div>
					<div class="post-author">Jajetz</div>
					<div class="post-datetime">
						9 Apr 2013, 01:44					</div>
				</div>
				<div class="post-content content">
					<p>This is what I followed to setup Barrier Breaker r35574 / LuCI Trunk (trunk+svn9668) - hyujitong</p><p>Setup Router telnet:<br />&nbsp; &nbsp; wget <a href="http://wiki.openwrt.org/_media/oldwiki/openwrtdocs/hardware/netgear/telnetenable.zip">http://wiki.openwrt.org/_media/oldwiki/ … enable.zip</a><br />&nbsp; &nbsp; unzip telnetenable.zip<br />&nbsp; &nbsp; cd telnetenable<br />&nbsp; &nbsp; gcc -o telnetenable telnetenable.c md5.c Blowfish.c<br />&nbsp; &nbsp; telnetenable 192.168.1.1 000FB5A2BE26 Gearguy Geardog &gt; modpkt.pkt<br />&nbsp; &nbsp; nc 192.168.1.1 23 &lt; modpkt.pkt<br />&nbsp; &nbsp; python telnetenable.py 192.168.1.1 $(arp -n | awk &quot;/192.168.1.1/&quot;&#039;&nbsp; { gsub(/:/, &quot;&quot;, $3); print toupper($3)}&#039;) Gearguy Geardog</p><p>&nbsp; &nbsp; telnet 192.168.1.1</p><p>Setup FTP Server</p><p>Backup Router U-Boot and ART:<br />&nbsp; &nbsp; dd if=/dev/mtdblock0 of=/tmp/u-boot.orig.bin<br />&nbsp; &nbsp; dd if=/dev/mtdblock7 of=/tmp/ART.orig.bin<br />&nbsp; &nbsp; ftpput --user=anonymous --password=anonymous --verbose 192.168.1.x /temp/ u-boot.orig.bin<br />&nbsp; &nbsp; ftpput --user=anonymous --password=anonymous --verbose 192.168.1.x /temp ART.orig.bin</p><p>Flash OpenWrt firmware:<br />&nbsp; &nbsp; cd /tmp<br />&nbsp; &nbsp; snarf <a href="http://www.simcop2387.info/wnr2000/ubootenv-stockpartitions.img">http://www.simcop2387.info/wnr2000/uboo … itions.img</a><br />&nbsp; &nbsp; snarf <a href="http://www.simcop2387.info/wnr2000/u-boot.bin">http://www.simcop2387.info/wnr2000/u-boot.bin</a></p><p>&nbsp; &nbsp; Method 1. New Build: Barrier Breaker r35574 / LuCI Trunk (trunk+svn9668) - download from hyujitong&#039;s post above<br />&nbsp; &nbsp; ftpget --user=anonymous --password=anonymous --verbose 192.168.1.x openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin<br />&nbsp; &nbsp; ftpget --user=anonymous --password=anonymous --verbose 192.168.1.x openwrt-ar71xx-generic-uImage-lzma.bin openwrt-ar71xx-generic-uImage-lzma.bin<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Method 2. Original Build:&nbsp; &nbsp; <br />&nbsp; &nbsp; snarf <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-ap81-rootfs-squashfs.bin">http://downloads.openwrt.org/backfire/1 … uashfs.bin</a><br />&nbsp; &nbsp; snarf <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-uImage-lzma.bin">http://downloads.openwrt.org/backfire/1 … e-lzma.bin</a><br />&nbsp; &nbsp; <br />&nbsp; &nbsp; mtd -e mtd0 write u-boot.bin mtd0<br />&nbsp; &nbsp; mtd -e mtd1 write ubootenv-stockpartitions.img mtd1<br />&nbsp; &nbsp; mtd -e mtd2 write openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin mtd2<br />&nbsp; &nbsp; mtd -e mtd4 write openwrt-ar71xx-generic-uImage-lzma.bin mtd4<br />&nbsp; &nbsp; reboot</p><p>-----------<br />Now for my question:</p><p>Tried to install DNSSec (DNS Security) as described by this guide:<br /><a href="https://apuntesderoot.wordpress.com/2012/12/20/configure-unbound-dnssec-resolver-in-openwrt/">https://apuntesderoot.wordpress.com/201 … n-openwrt/</a></p><p>Nowhere near enough space to do so!!!<br />Can anyone build an image with unbound? or instructions</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198201">
				<div class="post-metadata">
					<div class="post-num">Post #210</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						13 Apr 2013, 01:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jajetz wrote:</cite><blockquote><p>This is what I followed to setup Barrier Breaker r35574 / LuCI Trunk (trunk+svn9668) - hyujitong</p><p>Setup Router telnet:<br />&nbsp; &nbsp; wget <a href="http://wiki.openwrt.org/_media/oldwiki/openwrtdocs/hardware/netgear/telnetenable.zip">http://wiki.openwrt.org/_media/oldwiki/ … enable.zip</a><br />&nbsp; &nbsp; unzip telnetenable.zip<br />&nbsp; &nbsp; cd telnetenable<br />&nbsp; &nbsp; gcc -o telnetenable telnetenable.c md5.c Blowfish.c<br />&nbsp; &nbsp; telnetenable 192.168.1.1 000FB5A2BE26 Gearguy Geardog &gt; modpkt.pkt<br />&nbsp; &nbsp; nc 192.168.1.1 23 &lt; modpkt.pkt<br />&nbsp; &nbsp; python telnetenable.py 192.168.1.1 $(arp -n | awk &quot;/192.168.1.1/&quot;&#039;&nbsp; { gsub(/:/, &quot;&quot;, $3); print toupper($3)}&#039;) Gearguy Geardog</p><p>&nbsp; &nbsp; telnet 192.168.1.1</p><p>Setup FTP Server</p><p>Backup Router U-Boot and ART:<br />&nbsp; &nbsp; dd if=/dev/mtdblock0 of=/tmp/u-boot.orig.bin<br />&nbsp; &nbsp; dd if=/dev/mtdblock7 of=/tmp/ART.orig.bin<br />&nbsp; &nbsp; ftpput --user=anonymous --password=anonymous --verbose 192.168.1.x /temp/ u-boot.orig.bin<br />&nbsp; &nbsp; ftpput --user=anonymous --password=anonymous --verbose 192.168.1.x /temp ART.orig.bin</p><p>Flash OpenWrt firmware:<br />&nbsp; &nbsp; cd /tmp<br />&nbsp; &nbsp; snarf <a href="http://www.simcop2387.info/wnr2000/ubootenv-stockpartitions.img">http://www.simcop2387.info/wnr2000/uboo … itions.img</a><br />&nbsp; &nbsp; snarf <a href="http://www.simcop2387.info/wnr2000/u-boot.bin">http://www.simcop2387.info/wnr2000/u-boot.bin</a></p><p>&nbsp; &nbsp; Method 1. New Build: Barrier Breaker r35574 / LuCI Trunk (trunk+svn9668) - download from hyujitong&#039;s post above<br />&nbsp; &nbsp; ftpget --user=anonymous --password=anonymous --verbose 192.168.1.x openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin<br />&nbsp; &nbsp; ftpget --user=anonymous --password=anonymous --verbose 192.168.1.x openwrt-ar71xx-generic-uImage-lzma.bin openwrt-ar71xx-generic-uImage-lzma.bin<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Method 2. Original Build:&nbsp; &nbsp; <br />&nbsp; &nbsp; snarf <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-ap81-rootfs-squashfs.bin">http://downloads.openwrt.org/backfire/1 … uashfs.bin</a><br />&nbsp; &nbsp; snarf <a href="http://downloads.openwrt.org/backfire/10.03.1/ar71xx/openwrt-ar71xx-uImage-lzma.bin">http://downloads.openwrt.org/backfire/1 … e-lzma.bin</a><br />&nbsp; &nbsp; <br />&nbsp; &nbsp; mtd -e mtd0 write u-boot.bin mtd0<br />&nbsp; &nbsp; mtd -e mtd1 write ubootenv-stockpartitions.img mtd1<br />&nbsp; &nbsp; mtd -e mtd2 write openwrt-ar71xx-generic-ap81-rootfs-squashfs.bin mtd2<br />&nbsp; &nbsp; mtd -e mtd4 write openwrt-ar71xx-generic-uImage-lzma.bin mtd4<br />&nbsp; &nbsp; reboot</p><p>-----------<br />Now for my question:</p><p>Tried to install DNSSec (DNS Security) as described by this guide:<br /><a href="https://apuntesderoot.wordpress.com/2012/12/20/configure-unbound-dnssec-resolver-in-openwrt/">https://apuntesderoot.wordpress.com/201 … n-openwrt/</a></p><p>Nowhere near enough space to do so!!!<br />Can anyone build an image with unbound? or instructions</p></blockquote></div><br /><p>pull out backfire source and compile yourself with buildroot with config each package as module<br />instruction in wiki <a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence">http://wiki.openwrt.org/doc/howto/buildroot.exigence</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198205">
				<div class="post-metadata">
					<div class="post-num">Post #211</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						13 Apr 2013, 02:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>CheBuzz wrote:</cite><blockquote><p>Just a bit of an FYI for those that are building their own OpenWRT images and using fuhry&#039;s partitioning for the extra 500K.&nbsp; You need to change the file target/linux/ar71xx/files/arch/mips/ar71xx/mach-wnr2000.c to read:</p><p>#ifdef CONFIG_MTD_PARTITIONS<br />static struct mtd_partition wnr2000_partitions[] = {<br />&nbsp; &nbsp; &nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;u-boot&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x040000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .mask_flags&nbsp; &nbsp; &nbsp;= MTD_WRITEABLE,<br />&nbsp; &nbsp; &nbsp; &nbsp; } , {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;u-boot-env&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x040000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x010000,<br />&nbsp; &nbsp; &nbsp; &nbsp; } , {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;rootfs&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x050000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x2c0000,<br />&nbsp; &nbsp; &nbsp; &nbsp; } , {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;uImage&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x310000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x0e0000,<br />&nbsp; &nbsp; &nbsp; &nbsp; } , {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= &quot;art&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x3f0000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 0x010000,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; .mask_flags&nbsp; &nbsp; &nbsp;= MTD_WRITEABLE,<br />&nbsp; &nbsp; &nbsp; &nbsp; }<br />};<br />#endif /* CONFIG_MTD_PARTITIONS */</p><p>I also use the following kernel commandline:<br />rootfstype=squashfs console=ttyS0,115200 board=WNR2000 panic=10 init=/etc/preinit rootdelay=2 -- console=ttyS0,115200 mtdparts=ar7100-nor0:256k(u-boot),64k(u-boot-env),2816k(rootfs),896k(uImage),64k(ART) board=WNR2000 mem=32M</p></blockquote></div><p>I follow your instruction to compile image and follow flash instruction in post#161<br />(using ubootenv-stockpartitions.img and u-boot.bin in this post also which i assume same like fuhry u-boot)<br />However after flash, I couldn&#039;t get 500k extra space<br />Type df -h still show below<br /> /dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.0M&nbsp; &nbsp; &nbsp; 2.0M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.4M&nbsp; &nbsp; &nbsp;60.0K&nbsp; &nbsp; &nbsp;14.4M&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock3&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 320.0K&nbsp; &nbsp; 228.0K&nbsp; &nbsp; &nbsp;92.0K&nbsp; 71% /overlay<br />mini_fo:/overlay&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.0M&nbsp; &nbsp; &nbsp; 2.0M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /</p><p>Notice there is /dev/mtdblock3 and mini_fo:/overlay<br />What did I do wrong?</p>											<p class="post-edited">(Last edited by <strong>dony71</strong> on 13 Apr 2013, 07:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p198380">
				<div class="post-metadata">
					<div class="post-num">Post #212</div>
					<div class="post-author">Jajetz</div>
					<div class="post-datetime">
						14 Apr 2013, 22:01					</div>
				</div>
				<div class="post-content content">
					<p>I was really hoping that hyujitong or someone else that has already built images, to save the rest of us the time.</p><p>For: <a href="https://apuntesderoot.wordpress.com/2012/12/20/configure-unbound-dnssec-resolver-in-openwrt/">https://apuntesderoot.wordpress.com/201 … n-openwrt/</a><br />I will try to figure out how to do a build with an unbound dnssec resolver and post the images.</p><p>If anyone beats me to it or is already there, please post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p201320">
				<div class="post-metadata">
					<div class="post-num">Post #213</div>
					<div class="post-author">dony71</div>
					<div class="post-datetime">
						10 May 2013, 02:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>vhrm wrote:</cite><blockquote><p>there&#039;s a&nbsp; bug or something weird about the config.&nbsp; &nbsp;Some discussion (with currently no solution) here:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=43133">https://forum.openwrt.org/viewtopic.php?id=43133</a></p></blockquote></div><p>With patch from Jonas Gorski applied on backfire<br />(<a href="https://lists.openwrt.org/pipermail/openwrt-devel/2011-July/011687.html">https://lists.openwrt.org/pipermail/ope … 11687.html</a>)<br />now switch AR8216 is detected during boot up and assigned on eth0<br />==========================================================<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xb9000000, irq 4<br />eth0: AR8216 switch driver attached.<br />eth0: connected to PHY at ag71xx-mdio:00 [uid=004dd042, driver=Atheros AR821<br />6/AR8316]<br />eth1: Atheros AG71xx at 0xba000000, irq 5<br />eth1: connected to PHY at ag71xx-mdio:04 [uid=004dd042, driver=Atheros AR821<br />6/AR8316]<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />ar71xx-wdt: timeout=15 secs (max=21)</p><p>I share the patch code at <a href="https://github.com/dony71/OpenWrt_Backfire">https://github.com/dony71/OpenWrt_Backfire</a><br />clone branch WNR2000_switch</p>											<p class="post-edited">(Last edited by <strong>dony71</strong> on 10 May 2013, 10:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p203398">
				<div class="post-metadata">
					<div class="post-num">Post #214</div>
					<div class="post-author">fuhry</div>
					<div class="post-datetime">
						1 Jun 2013, 05:42					</div>
				</div>
				<div class="post-content content">
					<p>So... I haven&#039;t touched this thread in a while but in the past week, whilst on holiday in the quadrasphere opposite from my home, I got both an email from someone I don&#039;t know, and a facebook message from someone I know personally (!) asking for updates and help, so I&#039;ve updated all of my somewhat-useful posts here to reflect my new domain. Unfortunately co.cc discontinued their service and existence some time ago and I had no control over this. An &quot;s/fuhry\.co\.cc/fuhry.com/g&quot; across everything should do the job quite nicely. I hate broken links as much as the next guy.</p><p><span class="postimg"><img src="http://cdn.memegenerator.net/instances/400x/22627952.jpg" alt="http://cdn.memegenerator.net/instances/400x/22627952.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>fuhry</strong> on 1 Jun 2013, 05:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206331">
				<div class="post-metadata">
					<div class="post-num">Post #215</div>
					<div class="post-author">apex84</div>
					<div class="post-datetime">
						3 Jul 2013, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone here been able to set this router (WNR2000v1) as a repeater?</p>											<p class="post-edited">(Last edited by <strong>apex84</strong> on 3 Jul 2013, 11:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207521">
				<div class="post-metadata">
					<div class="post-num">Post #216</div>
					<div class="post-author">querty</div>
					<div class="post-datetime">
						19 Jul 2013, 11:26					</div>
				</div>
				<div class="post-content content">
					<p>Would it be possible to get the compiled files with the patch added?</p><p>I tried to compile them myself and bricked my router <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>Cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210581">
				<div class="post-metadata">
					<div class="post-num">Post #217</div>
					<div class="post-author">Jajetz</div>
					<div class="post-datetime">
						23 Aug 2013, 21:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>querty wrote:</cite><blockquote><p>Would it be possible to get the compiled files with the patch added?</p><p>I tried to compile them myself and bricked my router <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>Cheers</p></blockquote></div><p>---</p><p>Yes can someone please compile, with Altitude Adjustment 12.09 Final, and fuhry&#039;s extra space.<br />Please don&#039;t forget to remove unnecessary modules like usb2, kmod-usb2.<br />include luci-app-firewall.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214820">
				<div class="post-metadata">
					<div class="post-num">Post #218</div>
					<div class="post-author">buddyochoa</div>
					<div class="post-datetime">
						15 Oct 2013, 06:02					</div>
				</div>
				<div class="post-content content">
					<p>Any news at all on this project? I have a WNR2000v4 I would love to see OpenWRT run on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215286">
				<div class="post-metadata">
					<div class="post-num">Post #219</div>
					<div class="post-author">bulwynkl</div>
					<div class="post-datetime">
						21 Oct 2013, 09:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RoundSparrow wrote:</cite><blockquote><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/TelnetConsole">http://wiki.openwrt.org/OpenWrtDocs/Har … netConsole</a></p><p>I can personally vouch for it working on the WNR2000.</p></blockquote></div><br /><br /><p>I&#039;ve been able to telnet into the console, true, but not do much with it after that - steep learning curve is part of the problem. </p><p>for example, run passwd to change root password and enable ssh results in an error - mostlikely due to / being read only hence no can write /etc/passwd</p><p>how do I get started with this? pointers?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217608">
				<div class="post-metadata">
					<div class="post-num">Post #220</div>
					<div class="post-author">bukington</div>
					<div class="post-datetime">
						15 Nov 2013, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I just bought a WNR2000v4 and I need to tweak openwrt so I have started investigations.</p><p>First I did not try to enable telnet through network but I connected directly on PCB on JP1 connector to get a serial console<br />(looks like this one <a href="http://www.dd-wrt.com/phpBB2/files/img00011_20100516_1100_454.jpg">http://www.dd-wrt.com/phpBB2/files/img0 … 00_454.jpg</a> but with 4 holes, being from left to right Ground - Tx - RX - VCC, I can post picture later).</p><p>Some infos:<br /></p><div class="codebox"><pre><code>U-Boot 1.1.4 (Nov 26 2012 - 15:58:42)

DNI HW ID: 29763904 flash 4MB RAM 32MB U-boot dni29 V0.5
DRAM:  
sri
Wasp 1.3
wasp_ddr_initial_config(281): Wasp (16bit) ddr1 init
Tap value selected = 0xf [0x0 - 0x1f]
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 218k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
Flash Manuf Id 0xc2, DeviceId0 0x20, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
Fetching MAC Address from 0x81fecd38
Fetching MAC Address from 0x81fecd38
 wasp  reset mask:c03300 
WASP ----&gt; S27 PHY 
: cfg1 0x80000000 cfg2 0x7114
eth0: 28:c6:8e:a9:32:4c
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :10
eth0 up
WASP ----&gt; S27 PHY 
: cfg1 0xf cfg2 0x7214
eth1: 28:c6:8e:a9:32:4b
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :10
eth1 up
eth0, eth1
Hit any key to stop autoboot:  1 0 
Trying eth1
eth1 link down
FAIL
Trying eth0
dup 1 speed 100

 Client starts...[Listening] for ADVERTISE...TTT
Retry count exceeded; boot the image as usual

 nmrp server is stopped or failed !
   Verifying Checksum ... OK
 Begin Second part firmware check
   Verifying Second part Checksum ... OK
## Booting image at 9f040000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.31
   Created:      2013-05-21   7:30:32 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    804009 Bytes = 785.2 kB
   Load Address: 80002000
   Entry Point:  801e6130
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 801e6130) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

Booting Atheros AR934x
Lon 2.6.31 (root@dnixm-compiler3) (gcc version 4.3.3 (GCC) ) #1 Tue May 21 15:30:25 CST 2013
flash_size passed from bootloader = 4
CPU revision is: 0001974c (MIPS 74Kc)
ath_sys_frequency: cpu srif ddr srif cpu 535 ddr 400 ahb 200
Determined physical RAM map:
 memory: 08000000 @ 00000000 (usable)
User-defined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: rootfstype=squashfs console=ttyS0,115200 mem=32M board=WNR2000v4 mtdparts=ath-nor0:192k(u-boot)ro,64k(u-boot-env)ro,832k(kernel),2624k(rootfs),128k(language),64k(pot),64k(traffic_meter),64k(config),64k(art),3456k@0x40000(firmware)
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 29988k/32768k available (1952k kernel code, 2780k reserved, 322k data, 124k init, 0k highmem)
SLUB: Genslabs=13, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:128
plat_time_init: plat time init done
Calibrating delay loop... 267.26 BogoMIPS (lpj=534528)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
ATH GPIOC major 0
squashfs: version 4.0 (2009/01/31) Phillip Lougher
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A
console [ttyS0] enabled
10 cmdlinepart partitions found on MTD device ath-nor0
Creating 10 MTD partitions on &quot;ath-nor0&quot;:
0x000000000000-0x000000030000 : &quot;u-boot&quot;
0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
0x000000040000-0x000000110000 : &quot;kernel&quot;
0x000000110000-0x0000003a0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=3A0000, len=0 
0x0000003a0000-0x000000400000 : &quot;rootfs_data&quot;
0x0000003a0000-0x0000003c0000 : &quot;language&quot;
0x0000003c0000-0x0000003d0000 : &quot;pot&quot;
0x0000003d0000-0x0000003e0000 : &quot;traffic_meter&quot;
0x0000003e0000-0x0000003f0000 : &quot;config&quot;
0x0000003f0000-0x000000400000 : &quot;art&quot;
0x000000040000-0x0000003a0000 : &quot;firmware&quot;
u32 classifier
    Performance counters on
Netfilter messages via NETLINK v0.30.
NAT Session Management application ports priority table is loaded!
nf_conntrack version 0.5.0 (512 buckets, 2048 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
ip_tables: (C) 2000-2006 Netfilter Core Team
TCP cubic registered
NET: Registered protocol family 10
ip6_tables: (C) 2000-2006 Netfilter Core Team
IPv6 over IPv4 tunneling driver
NET: Registered protocol family 17
Ebtables v2.0 registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
arch/mips/atheros/gpio.c (ath_simple_config_init) JUMPSTART_GPIO: 12
athwdt_init: Registering WDT success
ath_otp_init: Registering OTP success
ath_clksw_init: Registering Clock Switch Interface success
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 124k freed
Please be patient, while OpenWrt loads ...
- preinit -
insmod: leds-gpio.ko: no module by that name found
Press CTRL-C for failsafe
insmod: input-core.ko: no module by that name found
insmod: input-polldev.ko: no module by that name found
insmod: gpio_buttons.ko: no module by that name found
insmod: button-hotplug.ko: no module by that name found
ifconfig: SIOCSIFADDR: No such device
/etc/preinit: /etc/preinit.arch: 48: netmsg: not found
ifconfig: SIOCSIFADDR: No such device
Can&#039;t lock /tmp/.failsafe
switching to jffs2
mount: mounting /dev/mtdblock4 on /jffs failed
jffs2 not ready yet; using ramdisk
mount: mounting /proc on /mnt/proc failed
Unlocking rootfs ...
- init -
init started:  BusyBox v1.4.2 (2013-05-21 15:23:07 CST) multi-call binary
Loading data from /dev/mtd8 ...
The data configuration is Valid
The data center is Running ...
PPP generic driver version 2.4.2
dni-qos module init.
NET: Registered protocol family 24
nf_nat_STARCRAFT: module license &#039;unspecified&#039; taints kernel.
Disabling lock debugging due to kernel taint
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading
nf_conntrack_proto_esp loaded
NET: Registered protocol family 27
PPPoL2TP kernel driver, V0.16.1
PPTP-GRE-v1.13 2007 (C) Delta Networks Inc.
/etc/net6conf/6proc: /etc/net6conf/6proc: 33: cannot create /proc/sys/net/ipv6/ipv6_srcrt_type_2: Directory nonexistent
/etc/net6conf/6proc: /etc/net6conf/6proc: 33: cannot create /proc/sys/net/ipv6/conf/br1/accept_dad: Directory nonexistent
/etc/net6conf/6proc: /etc/net6conf/6proc: 33: cannot create /proc/sys/net/ipv6/neigh/br1/not_send_neighbor_solicitation: Directory nonexistent
/etc/net6conf/6proc: /etc/net6conf/6proc: 33: cannot create /proc/sys/net/ipv6/neigh/eth1/not_send_neighbor_solicitation: Directory nonexistent
Generating Rules...
Done!
SN: 3DH134590183F
WAN MAC: 28:C6:8E:a9:32:4C
The region number is: 0x0002
REGION: WW
cp: cannot stat &#039;/etc/wpa2.orig/*&#039;: No such file or directory
ATHR_GMAC: Length per segment 1536
ATHR_GMAC: fifo cfg 3 01f00140
ATHR_GMAC: RX TASKLET - Pkts per Intr:100
ATHR_GMAC: Mac address for unit 0:bfff0000
ATHR_GMAC: 28:c6:8e:a9:32:4c 
mac:0 Registering S27....
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   128
ATHR_GMAC: Mac capability flags    :   2580
ATHR_GMAC: RX TASKLET - Pkts per Intr:100
ATHR_GMAC: Mac address for unit 1:bfff0006
ATHR_GMAC: 28:c6:8e:a9:32:4b 
mac:1 Registering S27....
ATHR_GMAC: Max segments per packet :   1
ATHR_GMAC: Max tx descriptor count :   40
ATHR_GMAC: Max rx descriptor count :   128
ATHR_GMAC: Mac capability flags    :   32D80
Loading DNI-ENET driver
athr_gmac_ring_alloc Allocated 640 at 0x81e37800
athr_gmac_ring_alloc Allocated 2048 at 0x81e4d800
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...
ATHR_GMAC: Enet Unit:0 PHY:4 is UP Mii 100Mbps full duplex
ATHR_GMAC: done cfg2 0x7115 ifctl 0x10000 miictrl  
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
athr_gmac_ring_alloc Allocated 640 at 0x81e37c00
athr_gmac_ring_alloc Allocated 2048 at 0x81e9e000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
ATHRS27: resetting s27
ATHRS27: s27 reset done
Setting PHY...
ADDRCONF(NETDEV_UP): eth1: link is not ready
athr_gmac_ring_free Freeing at 0x81e37800
athr_gmac_ring_free Freeing at 0x81e4d800
athr_gmac_ring_free Freeing at 0x81e37c00
athr_gmac_ring_free Freeing at 0x81e9e000
Write Reg: 0x0000002c: Oldval = 0xfe7f007f Newval = 0xfe7f7f7f
Write Reg: 0x0000003c: Oldval = 0xcf00004e Newval = 0xce48004e
Write Reg: 0x00000104: Oldval = 0x00004804 Newval = 0x00304804
Write Reg: 0x00000204: Oldval = 0x00004004 Newval = 0x00304004
Write Reg: 0x00000304: Oldval = 0x00004004 Newval = 0x00304004
Write Reg: 0x00000404: Oldval = 0x00004004 Newval = 0x00304004
Write Reg: 0x00000504: Oldval = 0x00004004 Newval = 0x00304004
Write Reg: 0x0000003c: Oldval = 0xce48004e Newval = 0xce68004e
Write Reg: 0x00058804: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x00058808: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x0005880c: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x00058810: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x00058800: Oldval = 0x00000000 Newval = 0x00000001
Write Reg: 0x00058818: Oldval = 0x00000006 Newval = 0x00000006
Write Reg: 0x00058400: Oldval = 0x5e7ffffa Newval = 0x5e7ffffa
Write Reg: 0x00058404: Oldval = 0x00000100 Newval = 0x00000100
Write Reg: 0x00058408: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x0005840c: Oldval = 0x00000001 Newval = 0x00000001
Write Reg: 0x00058410: Oldval = 0x00000001 Newval = 0x00000001
Write Reg: 0x00058c00: Oldval = 0xffffffff Newval = 0xffffffff
Write Reg: 0x00058c04: Oldval = 0x0000ffff Newval = 0x0000ffff
Write Reg: 0x00058c08: Oldval = 0x00000000 Newval = 0x00000000
Write Reg: 0x00058c0c: Oldval = 0x00000fff Newval = 0x00000fff
Write Reg: 0x00058814: Oldval = 0x0000001f Newval = 0x0000001f
Write Reg: 0x0005881c: Oldval = athr_gmac_ring_alloc Allocated 640 at 0x81ede000
0x00000001 Newvaathr_gmac_ring_alloc Allocated 2048 at 0x81eea000
l = 0x00000001
Write Reg: 0x000WASP ----&gt; S27 PHY MDIO
58000: Oldval = Setting Drop CRC Errors, Pause Frames and Length Error frames 
0x00000000 NewvaSetting PHY...
l = 0x00000000
Write Reg: 0x00058004: Oldval = 0x11f00000 Newval = 0x11f00000
Write Reg: 0x00058008: Oldval = 0x00000000 Newval = 0x00000000
init.enet: Default WAN MAC is : 28:C6:8E:A9:32:4C
ADDRCONF(NETDEV_UP): eth1: link is not ready
device eth1.1 entered promiscuous mode
device eth1 entered promiscuous mode
init.enet: Default LAN MAC is : 28:C6:8E:A9:32:4B
device pas0 entered promiscuous mode
device eth0 entered promiscuous mode
device eth1.2 entered promiscuous mode
athr_gmac_ring_alloc Allocated 640 at 0x81ef0800
athr_gmac_ring_alloc Allocated 2048 at 0x81eb7000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...
ATHR_GMAC: Enet Unit:0 PHY:4 is UP Mii 100Mbps full duplex
ATHR_GMAC: done cfg2 0x7115 ifctl 0x10000 miictrl  
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
br1: port 2(eth1.2) entering forwarding state
br1: port 1(eth0) entering forwarding state
mkdir: cannot create directory &#039;/home&#039;: Read-only file system
br0: port 2(pas0) entering forwarding state
br0: port 1(eth1.1) entering forwarding state
br0: port 2(pas0) entering disabled state
br0: port 1(eth1.1) entering disabled state
br0: port 2(pas0) entering forwarding state
br0: port 1(eth1.1) entering forwarding state
syslogd can&#039;t open the temp log file: /tmp/log/log-message or /var/log/messages
The attached devices demo is Running ...
mkdir: cannot create directory &#039;/dev/pts&#039;: File exists
mknod: /dev/ptmx: File exists
mknod: /dev/pts/0: Operation not permitted
mknod: /dev/pts/1: Operation not permitted
killall: utelnetd: no process killed
killall: telnetenable: no process killed
The telnetenable is running ...
Deleting static route ... Done!
Adding static route ... Done!
athr_gmac_ring_free Freeing at 0x81ef0800
athr_gmac_ring_free Freeing at 0x81eb7000
br1: port 1(eth0) entering disabled state
dni-qos attached on eth0.
athr_gmac_ring_alloc Allocated 640 at 0x81ef0800
athr_gmac_ring_alloc Allocated 2048 at 0x81ebb800
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...
ATHR_GMAC: Enet Unit:0 PHY:4 is UP Mii 100Mbps full duplex
ATHR_GMAC: done cfg2 0x7115 ifctl 0x10000 miictrl  
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
br1: port 1(eth0) entering forwarding state
athr_gmac_ring_free Freeing at 0x81ef0800
athr_gmac_ring_free Freeing at 0x81ebb800
br1: port 1(eth0) entering disabled state
athr_gmac_ring_alloc Allocated 640 at 0x81ef0800
athr_gmac_ring_alloc Allocated 2048 at 0x81e6b000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...
ATHR_GMAC: Enet Unit:0 PHY:4 is UP Mii 100Mbps full duplex
ATHR_GMAC: done cfg2 0x7115 ifctl 0x10000 miictrl  
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
br1: port 1(eth0) entering forwarding state
br1: port 2(eth1.2) entering disabled state
br1: port 1(eth0) entering disabled state
br1: port 2(eth1.2) entering forwarding state
br1: port 1(eth0) entering forwarding state
athr_gmac_ring_free Freeing at 0x81ef0800
athr_gmac_ring_free Freeing at 0x81e6b000
br1: port 1(eth0) entering disabled state
athr_gmac_ring_alloc Allocated 640 at 0x81ef0800
athr_gmac_ring_alloc Allocated 2048 at 0x81f3f000
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
Setting PHY...
ATHR_GMAC: Enet Unit:0 PHY:4 is UP Mii 100Mbps full duplex
ATHR_GMAC: done cfg2 0x7115 ifctl 0x10000 miictrl  
WASP ----&gt; S27 PHY MDIO
Setting Drop CRC Errors, Pause Frames and Length Error frames 
br1: port 1(eth0) entering forwarding state
Terminated
warning: `dnsmasq&#039; uses 32-bit capabilities (legacy support in use)
br1: port 2(eth1.2) entering disabled state
br1: port 1(eth0) entering disabled state
br1: port 2(eth1.2) entering forwarding state
br1: port 1(eth0) entering forwarding state
Starting Firewall...
Done!
Deleting static route ... Done!
killall: ripd: no process killed
Deleting static route ... Done!
Adding static route ... Done!
start rip process
start initial data
$Shutting down igmpproxy: 
killall: igmpproxy: no process killed
Sorry, rule does not exist.
Sorry, rule does not exist.

killall: igmpproxy: no process killed
$Starting igmpproxy: 

killall: ntpclient: no process killed
igmpproxy, Version 0.1 beta2, Build 090422 
Copyright 2005 by Johnny Egeland &lt;johnny@rlo.org&gt;
Modified by Tos Xu for IGMP snooping in April, 2009.
Distributed under the GNU GENERAL PUBLIC LICENSE, Version 2 - check GPL.txt

time zone index is : 0
Run NTP Client with setting: pri:time-g.netgear.com sec:time-h.netgear.com
killall: miniupnpd: no process killed
Terminated
cp: cannot stat &#039;/usr/www/*&#039;: No such file or directory
The region number is: 0x0002
REGION: WW
The abbreviation of English is Eng!
Passed the checksum verification!
gui_region = English
region = English, download_region = English 
 current version: 1000000159, new version: 1000000159
Update string table successfully, memory usage: 624KB.
The httpd server is running ...
/etc/rc.common: /etc/rc.common: 84: detplc: not found
cat: /proc/bus/pci/devices: No such file or directory
Starting Firewall...
Done!
/etc/rc.common: /etc/rc.common: 84: /bin: Permission denied
dnsmasq: failed to create listening socket: Address already in use
Start utelnetd by telnetenable
POT is Running...
The POT-(Get/Set) Demo is Running ...
/sbin/button_detect: /sbin/button_detect: 23: cannot create : Directory nonexistent
/sbin/button_detect: /sbin/button_detect: 24: cannot create : Directory nonexistent
/sbin/button_detect: /sbin/button_detect: 25: cannot create : Directory nonexistent
ADDRCONF(NETDEV_UP): sit0: link is not ready
ADDRCONF(NETDEV_UP): eth1: link is not ready
Args: 1
ath_hal: 0.9.17.1 (AR9380, DEBUG, REGOPS_FUNC, WRITE_EEPROM, 11D)
ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved
NTPST: one NTP Sync Timestamp existed in POT partition, it&#039;s 15:42:52, Nov 11, 2013
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved
Saving Data... 
ath_ahb: 9.2.0_U10.1020 (Atheros/multi-bss)
__ath_attach: Set global_scn[0]
ACBKMinfree = 48
ACBEMinfree = 32
ACVIMinfree = 16
ACVOMinfree = 0
CABMinfree = 48
UAPSDMinfree = 0
Bootstrap clock 25MHz
Wasp Enterprise mode: 0x00000000
ar9300RadioAttach: Need analog access recipe!!
Restoring Cal data from Flash
ath_get_caps[5113] rx chainmask mismatch actual 3 sc_chainmak 0
ath_get_caps[5088] tx chainmask mismatch actual 3 sc_chainmak 0
SC Callback Registration for wifi0
wifi0: Atheros 9340: mem=0xb8100000, irq=2
wifi1     no private ioctls.

Creating ap for WEEDOW on
wlan_vap_create : enter. devhandle=0x80cfc2c0, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x80cfc2c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.
VAP device ath0 created 
Added ath0 mode master
Invalid command : bgscan
 
 DES SSID SET=WEEDOW 
 ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1 
/etc/ath/makeVAP: /etc/ath/makeVAP: 443: cannot create /proc/sys/dev/ath/htdupieenable: Directory nonexistent
WARNING: Fragmentation with HT mode NOT ALLOWED!!
Error for wireless request &quot;Set Fragmentation Threshold&quot; (8B24) :
    SET failed on device ath0 ; Invalid argument.
Invalid command : setVowExt
Invalid command : setKeySrchAlways
Invalid command : set_vsp_enable
Interface doesn&#039;t accept private ioctl...
setPhyRestartWar (8BE0): Operation not permitted
Invalid command : setVowExtStats
Created ath0 mode ap for WEEDOW
Done!

lo        no wireless extensions.

sit0      no wireless extensions.

br0       no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

pas0      no wireless extensions.

eth1.1    no wireless extensions.

eth1.2    no wireless extensions.

br1       no wireless extensions.

wifi0     no wireless extensions.

device ath0 entered promiscuous mode
br0: port 3(ath0) entering forwarding state
/etc/ath/activateVAP: /etc/ath/activateVAP: 1: arping: not found
&gt;&gt;&gt;&gt;&gt; WPS MODE, 2
&gt;&gt;&gt;&gt;&gt; WPS ENABLED, PSK
cat: /etc/wpa2/WSC_ath0.conf: No such file or directory
&gt;&gt;&gt;&gt;&gt; WPS Translate, Index:0
Configuration fi ieee80211_ioctl_siwmode: imr.ifm_active=918144, new mode=3, valid=1 
le: /etc/wpa2/WSC_ath0.conf
br0: port 3(ath0) entering disabled state
 DEVICE IS DOWN ifname=ath0
Could not connec DEVICE IS DOWN ifname=ath0
t to kernel driver.
Using interface ath0 with hwaddr 28:c6:8e:a9:32:4b and ssid &#039;WEEDOW&#039;
br0: port 3(ath0) entering forwarding state
traffic_meter start : .
$Starting igmpproxy: 
igmpproxy, Version 0.1 beta2, Build 090422 
Copyright 2005 by Johnny Egeland &lt;johnny@rlo.org&gt;
Modified by Tos Xu for IGMP snooping in April, 2009.
Distributed under the GNU GENERAL PUBLIC LICENSE, Version 2 - check GPL.txt


Can&#039;t lock /tmp/.switch2jffs
MTD partition not found.
Boot up procedure is Finished!!!

Please press Enter to activate this console. 


BusyBox v1.4.2 (2013-05-21 15:23:07 CST) Built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r18571) ------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@WNR2000v4:/#</code></pre></div><div class="codebox"><pre><code>root@WNR2000v4:/# uname -a
Linux WNR2000v4 2.6.31 #1 Tue May 21 15:30:25 CST 2013 mips unknown</code></pre></div><div class="codebox"><pre><code>root@WNR2000v4:/# cat /proc/cpuinfo 
system type        : Atheros AR934x
processor        : 0
cpu model        : MIPS 74Kc V4.12
BogoMIPS        : 267.26
wait instruction    : yes
microsecond timers    : yes
tlb_entries        : 32
extra interrupt vector    : yes
hardware watchpoint    : yes, count: 4, address/irw mask: [0x0000, 0x0ff8, 0x0ffb, 0x0ff8]
ASEs implemented    : mips16 dsp
shadow register sets    : 1
core            : 0
VCED exceptions        : not available
VCEI exceptions        : not available</code></pre></div><div class="codebox"><pre><code>root@WNR2000v4:/# cat /proc/meminfo 
MemTotal:          30112 kB</code></pre></div><div class="codebox"><pre><code>root@WNR2000v4:/# cat /proc/mtd 
dev:    size   erasesize  name
mtd0: 00030000 00010000 &quot;u-boot&quot;
mtd1: 00010000 00010000 &quot;u-boot-env&quot;
mtd2: 000d0000 00010000 &quot;kernel&quot;
mtd3: 00290000 00010000 &quot;rootfs&quot;
mtd4: 00060000 00010000 &quot;rootfs_data&quot;
mtd5: 00020000 00010000 &quot;language&quot;
mtd6: 00010000 00010000 &quot;pot&quot;
mtd7: 00010000 00010000 &quot;traffic_meter&quot;
mtd8: 00010000 00010000 &quot;config&quot;
mtd9: 00010000 00010000 &quot;art&quot;
mtd10: 00360000 00010000 &quot;firmware&quot;</code></pre></div><div class="codebox"><pre><code>root@WNR2000v4:/# mount
rootfs on / type rootfs (rw)
/dev/root on / type squashfs (ro,relatime)
proc on /proc type proc (rw,relatime)
sysfs on /sys type sysfs (rw,relatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime)
tmpfs on /dev type tmpfs (rw,relatime,size=512k)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
root on /tmp/root type tmpfs (rw,relatime)
/dev/root on /mnt type squashfs (ro,relatime)
root on /mnt type tmpfs (rw,relatime)</code></pre></div><br /><p>SOC is different from WNR2000V3, it&#039;s an Atheros AR9341 (<a href="http://wikidevi.com/wiki/Netgear_WNR2000v4">http://wikidevi.com/wiki/Netgear_WNR2000v4</a>).<br />TP-Link TL-WR841ND v8, supported by OpenWRT has the same SOC, so I added a new OpenWRT target by mixing wnr2000-v3 and tl-wr841n-v8 configurations.</p><p>I managed to boot a ramfs image of OpenWRT and most of the hardware seems to work fine.<br />Still, a lot of configuration remains.</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Nov 26 2012 - 15:58:42)

DNI HW ID: 29763904 flash 4MB RAM 32MB U-boot dni29 V0.5
DRAM:  
sri
Wasp 1.3
wasp_ddr_initial_config(281): Wasp (16bit) ddr1 init
Tap value selected = 0xf [0x0 - 0x1f]
32 MB
Top of RAM usable for U-Boot at: 82000000
Reserving 218k for U-Boot at: 81fc8000
Reserving 192k for malloc() at: 81f98000
Reserving 44 Bytes for Board Info at: 81f97fd4
Reserving 36 Bytes for Global Data at: 81f97fb0
Reserving 128k for boot params() at: 81f77fb0
Stack Pointer at: 81f77f98
Now running in RAM - U-Boot at: 81fc8000
Flash Manuf Id 0xc2, DeviceId0 0x20, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
*** Warning - bad CRC, using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
Fetching MAC Address from 0x81fecd38
Fetching MAC Address from 0x81fecd38
 wasp  reset mask:c03300 
WASP ----&gt; S27 PHY 
: cfg1 0x80000000 cfg2 0x7114
eth0: 28:c6:8e:a9:32:4c
s27 reg init 
athrs27_phy_setup ATHR_PHY_CONTROL 4 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :10
eth0 up
WASP ----&gt; S27 PHY 
: cfg1 0xf cfg2 0x7214
eth1: 28:c6:8e:a9:32:4b
s27 reg init lan 
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :10
eth1 up
eth0, eth1
Hit any key to stop autoboot:  1  0 
ar7240&gt; setenv serverip 192.168.0.3

ar7240&gt; setenv ipaddr 192.168.0.10

ar7240&gt; setenv bootargs console=ttyS0,115200

ar7240&gt; tftp 0x80260000 openwrt-ar71xx-generic-wnr2000v4-initramfs-uImage.bin

Trying eth1
enet1 port2 up
dup 1 speed 1000
Using eth1 device
TFTP from server 192.168.0.3; our IP address is 192.168.0.10
Filename &#039;openwrt-ar71xx-generic-wnr2000v4-initramfs-uImage.bin&#039;.
Load address: 0x80260000
Loading: *#################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     #################################################################
     ###########################################################
done
Bytes transferred = 2629842 (2820d2 hex)
ar7240&gt; bootm 0x80260000

## Booting image at 80260000 ...
   Image Name:   MIPS OpenWrt Linux-3.10.18
   Created:      2013-11-14  23:16:03 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    2629778 Bytes =  2.5 MB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 33554432

Starting kernel ...

[    0.000000] Linux version 3.10.18 (mick@solar) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38781) ) #12 Fri Nov 15 00:15:41 CET 2013
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9341 rev 3
[    0.000000] Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=WNR2000V4 console=ttyS0,115200 mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),6336k(rootfs),1408k(uImage),64k(mib0),64k(ART) rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 27248k/32768k available (2199k kernel code, 5520k reserved, 593k data, 1812k init, 0k highmem)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is NETGEAR WNR2000 V4
[    0.510000] bio: create slab &lt;bio-0&gt; at 0
[    0.510000] Switching to clocksource MIPS
[    0.520000] NET: Registered protocol family 2
[    0.520000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.530000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.540000] TCP: Hash tables configured (established 512 bind 512)
[    0.540000] TCP: reno registered
[    0.540000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.550000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] NET: Registered protocol family 1
[    2.860000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    2.870000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    2.880000] msgmni has been set to 53
[    2.880000] io scheduler noop registered
[    2.890000] io scheduler deadline registered (default)
[    2.890000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO(irq = 11) is a 16550A
[    2.930000] console [ttyS0] enabled, bootconsole disabled
[    2.930000] console [ttyS0] enabled, bootconsole disabled
[    2.940000] ath79-spi ath79-spi: master is unqueued, this is deprecated
[    2.950000] m25p80 spi0.0: found mx25l3205d, expected m25p80
[    2.950000] m25p80 spi0.0: mx25l3205d (4096 Kbytes)
[    2.960000] mtd: spi0.0: partitioning exceeds flash size, truncating
[    2.970000] mtd: spi0.0: partitioning exceeds flash size, truncating
[    2.970000] mtd: spi0.0: skipping zero sized partition
[    2.980000] mtd: spi0.0: partitioning exceeds flash size, truncating
[    2.980000] mtd: spi0.0: skipping zero sized partition
[    2.990000] mtd: spi0.0: partitioning exceeds flash size, truncating
[    3.000000] mtd: spi0.0: skipping zero sized partition
[    3.000000] 3 cmdlinepart partitions found on MTD device spi0.0
[    3.010000] Creating 3 MTD partitions on &quot;spi0.0&quot;:
[    3.010000] 0x000000000000-0x000000040000 : &quot;u-boot&quot;
[    3.020000] 0x000000040000-0x000000050000 : &quot;u-boot-env&quot;
[    3.030000] 0x000000050000-0x000000400000 : &quot;rootfs&quot;
[    3.030000] mtd: device 2 (rootfs) set to be root filesystem
[    3.040000] mtdsplit: no squashfs found in &quot;rootfs&quot;
[    3.050000] mtdsplit: no squashfs found in &quot;spi0.0&quot;
[    3.070000] libphy: ag71xx_mdio: probed
[    3.620000] eth%d: Found an AR934X built-in switch
[    4.660000] eth0: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
[    5.210000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd042, driver=Generic PHY]
[    5.220000] eth1: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    5.230000] TCP: cubic registered
[    5.240000] NET: Registered protocol family 17
[    5.240000] 8021q: 802.1Q VLAN Support v1.8
[    5.260000] Freeing unused kernel memory: 1812K (8031b000 - 804e0000)
Console is alive
procd: Console is alive
- watchdog -
procd: - watchdog -
kmod: ran 11 iterations
- preinit -
procd: - preinit -
Press the [f] key and hit [enter] to enter failsafe mode
[    7.530000] eth0: link up (1000Mbps/Full duplex)
[    9.570000] eth0: link down
- early -
procd: - early -
- watchdog -
procd: - watchdog -
- init -
procd: - init -
Please press Enter to activate this console.
[   10.300000] NET: Registered protocol family 10
[   10.310000] nf_conntrack version 0.5.0 (454 buckets, 1816 max)
[   10.330000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   10.350000] Loading modules backported from Linux version master-2013-06-27-0-gdcfa6d5
[   10.360000] Backport generated by backports.git backports-20130617-4-ge3220f5
[   10.370000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   10.410000] xt_time: kernel timezone is -0000
[   10.440000] cfg80211: Calling CRDA to update world regulatory domain
[   10.440000] cfg80211: World regulatory domain updated:
[   10.450000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   10.460000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.460000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.470000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   10.480000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.490000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.530000] PPP generic driver version 2.4.2
[   10.550000] NET: Registered protocol family 24
[   10.640000] cfg80211: Calling CRDA for country: US
[   10.650000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47
[   10.660000] cfg80211: Regulatory domain changed to country: US
[   10.660000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   10.670000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   10.680000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   10.690000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.690000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.700000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.710000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   13.910000] IPv6: ADDRCONF(NETDEV_UP): eth1: link is not ready
[   13.930000] device eth1 entered promiscuous mode
[   13.930000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   15.020000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   15.620000] eth0: link up (1000Mbps/Full duplex)
[   15.620000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
procd: - init complete -



BusyBox v1.19.4 (2013-11-13 00:43:03 CET) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (Bleeding Edge, r38781)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------
root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/cpuinfo
system type        : Atheros AR9341 rev 3
machine            : NETGEAR WNR2000 V4
processor        : 0
cpu model        : MIPS 74Kc V4.12
BogoMIPS        : 266.64
wait instruction    : yes
microsecond timers    : yes
tlb_entries        : 32
extra interrupt vector    : yes
hardware watchpoint    : yes, count: 4, address/irw mask: [0x0000, 0x0010, 0x0050, 0x0070]
isa            : mips1 mips2 mips32r1 mips32r2
ASEs implemented    : mips16 dsp dsp2
shadow register sets    : 1
kscratch registers    : 0
core            : 0
VCED exceptions        : not available
VCEI exceptions        : not available</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# uname -a
Linux OpenWrt 3.10.18 #12 Fri Nov 15 00:15:41 CET 2013 mips GNU/Linux</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig 
br-lan    Link encap:Ethernet  HWaddr 28:C6:8E:A9:32:4B  
          inet addr:192.168.1.1  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::2ac6:8eff:fea9:324b/64 Scope:Link
          inet6 addr: fdc9:f5ff:ac72::1/60 Scope:Global
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:780 (780.0 B)

eth0      Link encap:Ethernet  HWaddr 28:C6:8E:A9:32:4C  
          inet addr:192.168.0.10  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::2ac6:8eff:fea9:324c/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:341 errors:0 dropped:2 overruns:0 frame:0
          TX packets:191 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:44259 (43.2 KiB)  TX bytes:18229 (17.8 KiB)
          Interrupt:5 

eth1      Link encap:Ethernet  HWaddr 28:C6:8E:A9:32:4B  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:4 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:16 errors:0 dropped:0 overruns:0 frame:0
          TX packets:16 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1648 (1.6 KiB)  TX bytes:1648 (1.6 KiB)

wlan0     Link encap:Ethernet  HWaddr 28:C6:8E:A9:32:4C  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:1260 (1.2 KiB)</code></pre></div><p>I&#039;m new to OpenWRT so it takes time to understand how build process &amp; configuration works...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218013">
				<div class="post-metadata">
					<div class="post-num">Post #221</div>
					<div class="post-author">bukington</div>
					<div class="post-datetime">
						20 Nov 2013, 11:00					</div>
				</div>
				<div class="post-content content">
					<p>I anyone owning a WNR2000 v4 following the post? I should be able to provide an OpenWRT image to flash soon and I&#039;d need some testers....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219860">
				<div class="post-metadata">
					<div class="post-num">Post #222</div>
					<div class="post-author">rpsoft</div>
					<div class="post-datetime">
						13 Dec 2013, 03:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi bukington,<br />I try to get this model work too (v4).<br />Currently I&#039;m not able to initialize the hardware (internal switch) correctly.<br />If you want you can share your file (mach-wnr2000-v4.c ?) with me to take a test.</p><p>My try was:<br />static void __init wnr_common_setup(void)<br />{<br />&nbsp; &nbsp; /*u8 *art = (u8 *)KSEG1ADDR(0x1fff0000);<br />&nbsp; &nbsp; u8 mac[6];*/<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; ath79_register_leds_gpio(-1, ARRAY_SIZE(wnr2000v4_leds_gpio),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; wnr2000v4_leds_gpio);<br />&nbsp; &nbsp; ath79_register_gpio_keys_polled(-1, WNR2000V4_KEYS_POLL_INTERVAL,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ARRAY_SIZE(wnr2000v4_gpio_keys),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wnr2000v4_gpio_keys);</p><p>&nbsp; &nbsp; ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_RGMII_GMAC0);</p><p>&nbsp; &nbsp; mdiobus_register_board_info(wnr2000v4_mdio0_info,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp;ARRAY_SIZE(wnr2000v4_mdio0_info));</p><p>&nbsp; &nbsp; ath79_register_mdio(0, 0x0);</p><p>&nbsp; &nbsp; ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_RGMII;<br />&nbsp; &nbsp; ath79_eth0_data.phy_mask = 0;<br />&nbsp; &nbsp; ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio0_device.dev;<br />&nbsp; &nbsp; ath79_eth0_pll_data.pll_1000 = 0x06000000;<br />&nbsp; &nbsp; ath79_eth0_data.speed = SPEED_100;<br />&nbsp; &nbsp; ath79_eth0_data.duplex = DUPLEX_FULL;</p><p>&nbsp; &nbsp; ath79_register_eth(0);</p><p>Cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220104">
				<div class="post-metadata">
					<div class="post-num">Post #223</div>
					<div class="post-author">bukington</div>
					<div class="post-datetime">
						16 Dec 2013, 12:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi rpsoft,</p><p>In the meantime I&#039;ve got everything working up, I can provide a prebuilt image if you wanna test.<br />I&#039;ll try to provide it tonight (EU time).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220135">
				<div class="post-metadata">
					<div class="post-num">Post #224</div>
					<div class="post-author">rpsoft</div>
					<div class="post-datetime">
						16 Dec 2013, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>Yes, if you can provide an image I&#039;ll test it.<br />Currently I&#039;m able to init the hardware with this code:<br /></p><div class="codebox"><pre><code>u8 *art = (u8 *) KSEG1ADDR(0x1fff0000);
    u8 *ee  = (u8 *) KSEG1ADDR(0x1fff1000);

    ath79_register_leds_gpio(-1, ARRAY_SIZE(wnr2000v4_leds_gpio),
                 wnr2000v4_leds_gpio);
    ath79_register_gpio_keys_polled(-1, WNR2000V4_KEYS_POLL_INTERVAL,
                    ARRAY_SIZE(wnr2000v4_gpio_keys),
                    wnr2000v4_gpio_keys);
        
    /*ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_PHY_SWAP);*/
    ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_ONLY_MODE);
    
    ath79_register_m25p80(NULL);    
    ath79_register_mdio(1, 0x0);

    ath79_init_mac(ath79_eth0_data.mac_addr, art+WNR2000V4_MAC0_OFFSET, 0);
    ath79_init_mac(ath79_eth1_data.mac_addr, art+WNR2000V4_MAC1_OFFSET, 0);

    /* GMAC0 is connected to the PHY0 of the internal switch, GE0 */
    ath79_switch_data.phy4_mii_en = 1;
    ath79_switch_data.phy_poll_mask = BIT(0);
    ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;
    ath79_eth0_data.phy_mask = BIT(0);
    ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio1_device.dev;
    ath79_register_eth(0);

    /* GMAC1 is connected to the internal switch, GE1 */
    ath79_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_GMII;
    ath79_register_eth(1);

    ath79_register_wmac(ee, art);</code></pre></div><p>Is this correct or do you have a different one ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220142">
				<div class="post-metadata">
					<div class="post-num">Post #225</div>
					<div class="post-author">bukington</div>
					<div class="post-datetime">
						16 Dec 2013, 22:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rpsoft wrote:</cite><blockquote><p>Yes, if you can provide an image I&#039;ll test it.<br />Currently I&#039;m able to init the hardware with this code:<br /></p><div class="codebox"><pre><code>u8 *art = (u8 *) KSEG1ADDR(0x1fff0000);
    u8 *ee  = (u8 *) KSEG1ADDR(0x1fff1000);

    ath79_register_leds_gpio(-1, ARRAY_SIZE(wnr2000v4_leds_gpio),
                 wnr2000v4_leds_gpio);
    ath79_register_gpio_keys_polled(-1, WNR2000V4_KEYS_POLL_INTERVAL,
                    ARRAY_SIZE(wnr2000v4_gpio_keys),
                    wnr2000v4_gpio_keys);
        
    /*ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_PHY_SWAP);*/
    ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_ONLY_MODE);
    
    ath79_register_m25p80(NULL);    
    ath79_register_mdio(1, 0x0);

    ath79_init_mac(ath79_eth0_data.mac_addr, art+WNR2000V4_MAC0_OFFSET, 0);
    ath79_init_mac(ath79_eth1_data.mac_addr, art+WNR2000V4_MAC1_OFFSET, 0);

    /* GMAC0 is connected to the PHY0 of the internal switch, GE0 */
    ath79_switch_data.phy4_mii_en = 1;
    ath79_switch_data.phy_poll_mask = BIT(0);
    ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;
    ath79_eth0_data.phy_mask = BIT(0);
    ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio1_device.dev;
    ath79_register_eth(0);

    /* GMAC1 is connected to the internal switch, GE1 */
    ath79_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_GMII;
    ath79_register_eth(1);

    ath79_register_wmac(ee, art);</code></pre></div><p>Is this correct or do you have a different one ?</p></blockquote></div><p>I have this<br /></p><div class="codebox"><pre><code>static void __init wnr_common_setup(void)
{
        u8 *art = (u8 *) KSEG1ADDR(0x1fff0000);
    u8 *ee = (u8 *) KSEG1ADDR(0x1fff1000);

    ath79_register_m25p80(NULL);

    ath79_setup_ar934x_eth_cfg(AR934X_ETH_CFG_SW_ONLY_MODE);

    ath79_register_mdio(1, 0x0);

    /* LAN */
    ath79_init_mac(ath79_eth1_data.mac_addr, art+WNR2000V4_MAC0_OFFSET, 0);

    /* GMAC1 is connected to the internal switch */
    ath79_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_GMII;
    ath79_register_eth(1);

    /* WAN */
    ath79_init_mac(ath79_eth0_data.mac_addr, art+WNR2000V4_MAC1_OFFSET, 0);

    /* GMAC0 is connected to the PHY0 of the internal switch */
    ath79_switch_data.phy4_mii_en = 1;
    ath79_switch_data.phy_poll_mask = BIT(4);
    ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;
    ath79_eth0_data.phy_mask = BIT(4);
    ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio1_device.dev;

    ath79_register_eth(0);

    /* WLAN */
    ath79_register_wmac(ee, art+WNR2000V4_MAC0_OFFSET);

    /* USB */
        ath79_register_usb();
}</code></pre></div><p>Which is close but not exactly the same,&nbsp; you&#039;re setting wan mask to BIT(0) instead of BIT(4). IIRC the wan port was not at the correct place with your settings, that&#039;s why I changed the mask to BIT(0).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 9 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=18279&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=18279&amp;p=8.html">8</a></li><li class="pagination-current"><span>9</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=18279&amp;p=11.html">11</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18279&amp;p=15.html">15</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>