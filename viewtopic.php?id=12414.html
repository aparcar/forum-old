<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> brcm and spca5xx driver</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p55198">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jdobry</div>
					<div class="post-datetime">
						6 Sep 2007, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Is it possible use spca5xx camera with Kamikaze 7.06 or 7.07 at brcm 2.4 driver? I can&#039;t find package. Package for 2.6.22 kernel is in repository, but this kernel don&#039;t support Broadcom wifi. And binary drivers here <a href="http://www.macsat.com/macsat/content/view/36/30/">http://www.macsat.com/macsat/content/view/36/30/</a> is for whiterussian (kernel 2.4.30) Kamikaze 7.06 and 7.07 use 2.4.34 driver.</p><p>Do you have some experience somebody?</p><p>Jiri</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55199">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						6 Sep 2007, 12:33					</div>
				</div>
				<div class="post-content content">
					<p>Messed aroud a lot with :-\</p><p>- 2.4 kernel</p><p>No spca5xx package to choose. Compiled whiterussian from source, patched kernel in build directory (../build_mipsel) with spca5xxLE (from mxhaard website). Driver insmoded, but my cam isn&#039;t recognized.</p><p>As newest spca driver version is for 2.6 only, i tried an old version of Kamikaze (5059) which has a spca version still for 2.4. Compiled, installed on an Asus wl-hdd. Image is the unusable, if working together with wl driver kernel panics (i think both drivers are too much for such a&nbsp; little device)</p><p>- 2.6 kernel:</p><p>Works ok on 7.06 and 7.07, can&#039;t select the package anymore working on trunk (as the time of writing)</p><br /><p>Btw, if you plan to buy a webcam, check compatibility with spca5xxLE. Those supported by LE version of driver should be truly jpeg cams (should, as mine is marked compatible, but actually isn&#039;t). Otherwise they work with gspca, which in turns makes jpeg compression on the fly in kernel mode. A huge task, with all consequent performance problems...</p><p>Have fun! :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55421">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						10 Sep 2007, 14:39					</div>
				</div>
				<div class="post-content content">
					<p>I got the stuff compiled for kernel 2.4.34. Since I have a mjpg-stream capable cam I only built spca5xx_le and the associated tools (b/c the servfox binary from 2005 floating around seemed to not support auto-exposure). The image quality is a lot worse than on my laptop with gspca, low saturation, bad scaling artifacts, and poor autoexposure. Plus there seem to be some jpg quantization table artifacts.</p><p>But hey, it works. Should work on kamikaze 7.07. Please test.</p><p><a href="ftp://ftp.tuebingen.mpg.de/kyb/towolf/leer/spca5xx-57.08LE+spcatools20061208.tar.gz">ftp://ftp.tuebingen.mpg.de/kyb/towolf/l … 208.tar.gz</a></p><p>spca5xx.o<br />spca_core.o<br />spcadecoder.o<br />spcacat<br />spcaserv</p><p>The .o files go into /lib/modules/2.4.34/ , the binaries go into /usr/bin</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 10 Sep 2007, 14:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55422">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						10 Sep 2007, 15:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>I got the stuff compiled for kernel 2.4.34. Since I have a mjpg-stream capable cam I only built spca5xx_le and the associated tools (b/c the servfox binary from 2005 floating around seemed to not support auto-exposure). The image quality is a lot worse than on my laptop with gspca, low saturation, bad scaling artifacts, and poor autoexposure. Plus there seem to be some jpg quantization table artifacts.</p></blockquote></div><p>That could mean too LE driver verision is far older then the full version (gspca) and no more mantained...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p56823">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jagy</div>
					<div class="post-datetime">
						1 Oct 2007, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>hmmm, I also have problem with spca5xx... seems like not working on Kamikaze 7.09.<br />I got a Genius VideoCAM GE111, supported devices list says it works with spca5xx (not with LE version though).<br />But still, when I&nbsp; plug the cam dmesg says:</p><p>usb.c: USB device 2 (vend/prod 0x93a/0x2471) is not claimed by any active driver </p><br /><p>Is there anyone with a similar problem, or (even better) with same camera, who managed to make it work? Another driver? Older OS release?</p><p>the router is ASUS WL-500GP, wrt version is, as I said before, Kamikaze 7.09.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57775">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						19 Oct 2007, 17:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>I got the stuff compiled for kernel 2.4.34. Since I have a mjpg-stream capable cam I only built spca5xx_le and the associated tools (b/c the servfox binary from 2005 floating around seemed to not support auto-exposure). The image quality is a lot worse than on my laptop with gspca, low saturation, bad scaling artifacts, and poor autoexposure. Plus there seem to be some jpg quantization table artifacts.</p><p>But hey, it works. Should work on kamikaze 7.07. Please test.</p></blockquote></div><p>Any chance you can post the makefiles?</p><p>the spcaLE driver isn&#039;t really complete; you have to copy over the USB IDs from the spca5xx.c code to get full support of many cameras.</p><p>My 2 cameras aren&#039;t supported so I need to build from source, and I am using the 2.4 kernel, so I can&#039;t use the repository packages.</p><p>--Yan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61711">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lubimaer</div>
					<div class="post-datetime">
						15 Jan 2008, 17:25					</div>
				</div>
				<div class="post-content content">
					<p>Any news on this?</p><p>I have some &#039;old&#039; webcam they should be supported by latest spca5xx driver for kernel 2.4<br />I have ASUS wl500gP and I prefer 2.4 kernel to make wifi run good</p><p>I downloaded the last spca5xx driver that support 2.4 kernel<br />afaik it&#039;s<br /><a href="http://mxhaard.free.fr/spca50x/Download/spca5xx-v4l1goodbye.tar.gz">http://mxhaard.free.fr/spca50x/Download … bye.tar.gz</a></p><p>I change gspcav1 Makefile to download and compile spca5xx but it does not compile spca5xx.o obj file<br />I&#039;m not an expert on openwrt buildroot and I have no idea how to debug it</p><p>I attach here if someone would like to give it a try</p><p>Ciao<br />Marco</p><p># <br /># Copyright (C) 2006 OpenWrt.org<br />#<br /># This is free software, licensed under the GNU General Public License v2.<br /># See /LICENSE for more information.<br />#<br /># $Id: Makefile 8176 2008-01-15 13:00:00Z lubimaer $</p><p>include $(TOPDIR)/rules.mk<br />include $(INCLUDE_DIR)/kernel.mk</p><p>PKG_NAME:=spca5xx<br />PKG_VERSION:=v4l1goodbye<br />PKG_RELEASE:=1</p><p>PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz<br />PKG_SOURCE_URL:=http://mxhaard.free.fr/spca50x/Download<br />PKG_MD5SUM:=</p><p>include $(INCLUDE_DIR)/package.mk</p><p>define KernelPackage/spca5xx<br />&nbsp; SUBMENU:=Other modules<br />&nbsp; DEPENDS:=@LINUX_2_4 kmod-usb-core kmod-videodev @VIDEO_SUPPORT @USB_SUPPORT<br />&nbsp; TITLE:=Driver for SPCA5xx based USB cameras (kernel 2.4)<br />&nbsp; URL:=http://mxhaard.free.fr/<br />&nbsp; VERSION:=$(LINUX_VERSION)+$(PKG_VERSION)-$(BOARD)-$(PKG_RELEASE)<br />&nbsp; FILES:=$(PKG_BUILD_DIR)/spca5xx.$(LINUX_KMOD_SUFFIX)<br />&nbsp; AUTOLOAD:=$(call AutoLoad,90,spca5xx)<br />endef</p><p>define Build/Compile<br />&nbsp; &nbsp; $(MAKE) -C $(LINUX_DIR) \<br />&nbsp; &nbsp; ARCH=&quot;$(LINUX_KARCH)&quot; \<br />&nbsp; &nbsp; CROSS_COMPILE=&quot;$(TARGET_CROSS)&quot; \<br />&nbsp; &nbsp; KERNELVERSION=&quot;$(KERNEL)&quot; \<br />&nbsp; &nbsp; KERNEL_VERSION=&quot;$(LINUX_VERSION)&quot; \<br />&nbsp; &nbsp; KERNELDIR=&quot;$(LINUX_DIR)&quot; \<br />&nbsp; &nbsp; SUBDIRS=&quot;$(PKG_BUILD_DIR)&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; # removed &#039;module&#039; rule sisnce it is not found<br />endef</p><p>$(eval $(call KernelPackage,spca5xx))</p>											<p class="post-edited">(Last edited by <strong>lubimaer</strong> on 15 Jan 2008, 17:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61843">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">lubimaer</div>
					<div class="post-datetime">
						17 Jan 2008, 23:28					</div>
				</div>
				<div class="post-content content">
					<p>If you are interested in spca5xx_le driver for 2.4 kernel here it is how I was able to include it in openwrt:</p><p>donwload latest patch for kernel 2.4 at<br /><a href="http://mxhaard.free.fr/spca5le.html">http://mxhaard.free.fr/spca5le.html</a></p><p>I unzipped and apply to kernel usb patch (file usb-2.4whatever.patch) to usb directory of kernel (&lt;topdir&gt;/build_mipsel/linux/drivers/usb/)</p><p>patch execute with no problems</p><p>Execute make ARCH=mips menuconfig <br />Find spca5xx driver in usb menu and set it as &lt;M&gt;</p><p>rm .modules</p><p>cd&#039;ing topdir</p><p>add to package &lt;topdir&gt;/package/kernel/modules/usb.mk<br />the following stanza </p><p><em>define KernelPackage/usb-spca5xx<br />&nbsp; $(call usbdep,@LINUX_2_4 +kmod-videodev)<br />&nbsp; TITLE:=spca5xx WebCam driver<br />&nbsp; DESCRIPTION:=spca5xx 2.4 Kernel modules for several WebCam USB devices<br />&nbsp; KCONFIG:=$(CONFIG_USB_SPCA5XX)<br />&nbsp; AUTOLOAD:=$(call AutoLoad,70,spca5xx)<br />endef</em></p><p><em>define KernelPackage/usb-spca5xx/2.4<br />&nbsp; FILES:=$(LINUX_DIR)/drivers/usb/spca5xx/spca5xx.$(LINUX_KMOD_SUFFIX)<br />endef<br />$(eval $(call KernelPackage,usb-spca5xx))<br /></em></p><p>make menuconfig<br />Now you have spca5xx driver also in openwrt menu<br />you can set spca5xx to &lt;M&gt;</p><p>run make and you should have:<br />&lt;topdir&gt;/bin/packages/kmod-usb-spca5xx_2.4whatever.ipk</p><p>That&#039;s all</p><p>Ciao<br />Marco</p>											<p class="post-edited">(Last edited by <strong>lubimaer</strong> on 17 Jan 2008, 23:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64422">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">sharp</div>
					<div class="post-datetime">
						2 Mar 2008, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello</p><p>Will it work on Kamikaze 7.09?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>