<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Serial comm</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p255503">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nstorm</div>
					<div class="post-datetime">
						25 Nov 2014, 14:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello.</p><p>I&#039;ve flashed Asus RT-N10+ unit with OpenWRT. I&#039;ve connected its UART port via FTDI usb cable based on the wiki header pinout and can read the output from the uboot &amp; kernel. Running minicom on Linux PC, with &quot;-D /dev/ttyUSB0 -b 57600 -o&quot; options. I can echo to a /dev/ttyS0 from telnet and see the message on minicom. <br />But when I type something on minicom, I can&#039;t read that from device (by doing cat /dev/ttyS0) also TX LED on FTDI board doesn&#039;t flashes when I try to type something in minicom.<br />I&#039;ve also tried PL2303 based cable with same results.<br />Am I missing something?</p>											<p class="post-edited">(Last edited by <strong>nstorm</strong> on 25 Nov 2014, 14:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255600">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nstorm</div>
					<div class="post-datetime">
						26 Nov 2014, 12:45					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve changed flow control from hardware to software in minicom and now TX LED on FTDI board flashes, but I still can&#039;t see anything on the router side. Even installed picocom there - can type from there to PC, but not reverse direction either.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255657">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						26 Nov 2014, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Disconnect the router and jumper the TX and RX wires of your converter together.&nbsp; That should echo everything you type on the PC back to it, and it should stop when you remove the jumper.&nbsp; If the software echo on the PC is turned on, you will see each letter you type double.&nbsp; Turn the software echo off for serial terminal operations.</p><p>Defintely do not set hardware flow control on the PC.&nbsp; Use xon-xoff or even better, None.</p><p>Some converters require 3.3V from the router to power the TX driver in the converter (this is done so that the converter can&#039;t apply more voltage than the router can handle).&nbsp; This requires the 3.3v wire to be hooked up and the router powered on.&nbsp; You can still do the TX to RX loopback test by disconnecting those two wires and connecting them together.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255816">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nstorm</div>
					<div class="post-datetime">
						28 Nov 2014, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for advice!<br />Lame I forgot about loopback test. I&#039;ve did it and it works fine, both on the router (with picocom) and PC (with adapter) side. I can see double symbols with echo enabled.<br />Seems like I might be having voltage level issues... My adapter shows 3.7V on TX lane, probably thats too high for a 3.3V router levels. Gladly I didn&#039;t burned it. <br />Weird that VCC line of my adapter shows 3.3V constant, but TX line are at 3.7V. I&#039;ll try other adapter or even Arduino on 3.3V.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258575">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nstorm</div>
					<div class="post-datetime">
						24 Dec 2014, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>Bumping this old post in case someone else will encouter same problem. The problem was in voltage levels indeed.<br />I&#039;ve added 3.3V zener diode between router RX and GND lines and the serial console works without any problems now.</p>											<p class="post-edited">(Last edited by <strong>nstorm</strong> on 24 Dec 2014, 13:04)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>