<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> I messed up please help me.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p206184">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">nishogan</div>
					<div class="post-datetime">
						1 Jul 2013, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>I messed up BIG TIME <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />.<br />I got a TL WR740N router recently, i accidentally flashed it with openwrt firmware dont ask how (shows you what a klutz i am)<br />and i dont know how to revert back to stock firmware. iam running windows 8 and i have ubuntu on stick. i originally wanted to updated the modem with the latest firm ware but i somehow flashed it with Openwrt <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />. I went through the following tutorialls and none of em seem to help me.</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr1043nd#back.to.original.firmware">http://wiki.openwrt.org/toh/tp-link/tl- … l.firmware</a><br /><a href="http://wiki.openwrt.org/doc/howto/generic.uninstall">http://wiki.openwrt.org/doc/howto/generic.uninstall</a></p><p>I barely managed to figure out one way. That is </p><p>1.Instal Luci web ui<br />2. Flash firmware from the Web ui</p><p>But iam unable to install the Luci package using the opkg commands given here</p><p><a href="http://wiki.openwrt.org/doc/howto/luci.essentials">http://wiki.openwrt.org/doc/howto/luci.essentials</a></p><p>Iam an utter noob when it comes to this i hate myslef for getting into this rabbit hole <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>PLEASE PLEASE HELP <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206185">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Boompje123</div>
					<div class="post-datetime">
						1 Jul 2013, 22:35					</div>
				</div>
				<div class="post-content content">
					<p>Start by downloading putty and telnet-ing into the router.</p><p>Once in, type &quot;passwd&quot; (without the &quot;). It will ask you to set a new password. Choose whatever you like.</p><p>Now restart putty and use the &quot;ssh&quot; option. Login to the router using &quot;root&quot; (without &quot;) as username and the password you just choose as the password.</p><p>Once that works, report back <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206197">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						2 Jul 2013, 00:15					</div>
				</div>
				<div class="post-content content">
					<p>If you will provide version of your router, I can upload a revert image (it is original firmware without boot loader, writing unmodified factory firmware will result in a brick).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206207">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nishogan</div>
					<div class="post-datetime">
						2 Jul 2013, 03:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Boompje123 wrote:</cite><blockquote><p>Start by downloading putty and telnet-ing into the router.</p><p>Once in, type &quot;passwd&quot; (without the &quot;). It will ask you to set a new password. Choose whatever you like.</p><p>Now restart putty and use the &quot;ssh&quot; option. Login to the router using &quot;root&quot; (without &quot;) as username and the password you just choose as the password.</p><p>Once that works, report back <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p></blockquote></div><p>Yes i have done that, iam now able to SSH into the router without any issues</p><br /><div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>If you will provide version of your router, I can upload a revert image (it is original firmware without boot loader, writing unmodified factory firmware will result in a brick).</p></blockquote></div><p>Defenetley here you go.<br />Model: Tl-WR740N<br />Ver: 4.26<br />Got these details from the back of the router.</p><p>Thanks for all your replies and time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206222">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						2 Jul 2013, 09:19					</div>
				</div>
				<div class="post-content content">
					<p>Go to <a href="http://bayfiles.net/file/S44v/ZPkCNN/wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin">http://bayfiles.net/file/S44v/ZPkCNN/wr … actory.bin</a> , right click orange premium download and select copy link location</p><p>Now open putty, login to router with ssh and type:<br /></p><div class="codebox"><pre><code>cd /tmp
wget http://....paste-bayfiles-link-here...
md5sum wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin
(compare the md5 string with mine 69db411f88af2d1d79c9d5b4e4bc77a6  wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin - continue only if you get the same!)
mtd -r write wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin firmware</code></pre></div><p>Wait about 3 minutes and you are done, your tplink should be back to factory. Note, that tplink default ip is 192.168.0.1.</p><p>Btw. are you sure you don&#039;t want to try openwrt? You actually did a good thing, openwrt is much better than the stock firmware, going back is a real mess up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 2 Jul 2013, 09:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206237">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Boompje123</div>
					<div class="post-datetime">
						2 Jul 2013, 11:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>Go to <a href="http://bayfiles.net/file/S44v/ZPkCNN/wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin">http://bayfiles.net/file/S44v/ZPkCNN/wr … actory.bin</a> , right click orange premium download and select copy link location</p><p>Now open putty, login to router with ssh and type:<br /></p><div class="codebox"><pre><code>cd /tmp
wget http://....paste-bayfiles-link-here...
md5sum wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin
(compare the md5 string with mine 69db411f88af2d1d79c9d5b4e4bc77a6  wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin - continue only if you get the same!)
mtd -r write wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin firmware</code></pre></div><p>Wait about 3 minutes and you are done, your tplink should be back to factory. Note, that tplink default ip is 192.168.0.1.</p><p>Btw. are you sure you don&#039;t want to try openwrt? You actually did a good thing, openwrt is much better than the stock firmware, going back is a real mess up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><br /><p>These instruction will do the trick <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Only thing is that they&#039;re assuming that you have internet on your router. Therefore, make sure to plug in DHCP (automatic IP) cable to the WAN (internet) port of your router. OpenWRT will automatically connect to the internet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206250">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nishogan</div>
					<div class="post-datetime">
						2 Jul 2013, 12:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>Go to <a href="http://bayfiles.net/file/S44v/ZPkCNN/wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin">http://bayfiles.net/file/S44v/ZPkCNN/wr … actory.bin</a> , right click orange premium download and select copy link location</p><p>Now open putty, login to router with ssh and type:<br /></p><div class="codebox"><pre><code>cd /tmp
wget http://....paste-bayfiles-link-here...
md5sum wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin
(compare the md5 string with mine 69db411f88af2d1d79c9d5b4e4bc77a6  wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin - continue only if you get the same!)
mtd -r write wr740nv4_en_3_16_5_up_noboot-130329-openwrt-back-to-factory.bin firmware</code></pre></div><p>Wait about 3 minutes and you are done, your tplink should be back to factory. Note, that tplink default ip is 192.168.0.1.</p><p>Btw. are you sure you don&#039;t want to try openwrt? You actually did a good thing, openwrt is much better than the stock firmware, going back is a real mess up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Thank you SOOOOOOO MUCH. You are a life saver. I cant wait to get home inorder to try this.<br />Well i feel openwrt is way beyond my technical capabilities ,However iam considering to flash the modem with DD WRT some where down the line. once again Thanks a lot for your time and effort kind internet stranger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206252">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						2 Jul 2013, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Last time I tried dd-wrt on wr741nd (year ago I think), it had more problems than stock firmware. But feel free to try, maybe there&#039;s new version. Dd-wrt has nicer look imho, but openwrt has writable filesystem and far more posibilities limited only by hardware you are using.</p><p>Now you know how easy is to get back to original. If you download the final attitude adjustment of openwrt, it is compiled with luci.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p206276">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nishogan</div>
					<div class="post-datetime">
						2 Jul 2013, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>DONE!!! DONE!!!!!!!! </p><p>IT WORKED HALLELUJAH HALLELUJAH</p><p>my router is back to its noob self again.</p><p>at first the wget command was not working so i had change the /etc/config/network settings using the VI editor<br />i set the default gateway and dns</p><p>and then i did exactly what you said and now all is WELL!!</p><p>Thanks a lot nozombian you are such a hero!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211742">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Milan1992</div>
					<div class="post-datetime">
						6 Sep 2013, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, maybe its not the best place where i can ask it, but the router is tp-link wr741nd v2. I built a custom firmware based on attitude_adjust and the profile was the tl wr741nd. I also included to the project the openvpn, openvpn-easy-rsa and the luci-sll. The firmware was created succesfully and i could upload it as well, and basicli its works perfectly, but if i do a RESTART it LOSE all the settings and come back with FACTORY DEFAULT. So i can not test anything. As i can see and as i noticed the openvpn should work fine because i was able to set it up and generate the keys, but when i tried to do a restart its cleaned the whole router back to default.</p><p>Please if you have any idea tell me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211746">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						6 Sep 2013, 15:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Milan1992 wrote:</cite><blockquote><p>Hi guys, maybe its not the best place where i can ask it, but the router is tp-link wr741nd v2. I built a custom firmware based on attitude_adjust and the profile was the tl wr741nd. I also included to the project the openvpn, openvpn-easy-rsa and the luci-sll. The firmware was created succesfully and i could upload it as well, and basicli its works perfectly, but if i do a RESTART it LOSE all the settings and come back with FACTORY DEFAULT. So i can not test anything. As i can see and as i noticed the openvpn should work fine because i was able to set it up and generate the keys, but when i tried to do a restart its cleaned the whole router back to default.</p><p>Please if you have any idea tell me.</p></blockquote></div><p>Do you use initramfs image?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211747">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Milan1992</div>
					<div class="post-datetime">
						6 Sep 2013, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>I used the generated&nbsp; image called: openwrt-ar71xx-generic-tl-wr741nd-v2-squashfs-factory.bin which is the same version with my router, and the router was on stock firmware. I hope you would like to ask it, if not, pleas try to ask it more detailed.</p><p>Or initramfs is an optional package/utility? :S</p><p>I found the settings in make menuconfig-&gt;target image:<br />-tar.gz<br />-jffs2<br />-sqashfs</p><p>This 3 was signed (by *) to be use.&nbsp; Ramdisk is empty (looks like this: [ ] ramdisk ---&gt; )</p><p>If im here i not what did i set</p><p>i installed the things i wrote before openvpn...</p><p>in the menuconfig </p><p>Target system was set to Atheros ar7xxx<br />Target Profile TP-LINK tl-wr741n/nd<br />Network-&gt;VPN-&gt;openvpn stufs got *<br />Luci-&gt;Collection-&gt;Luci-ssl<br />Luci-&gt;Translation-&gt;luci-i18n-hungarian</p><p>All other stuff were left on default. May i missed some package? Or should i try to make the firmware with other base files, so trunk instead of attitude?</p><p>As i noticed my router has 4flash memory and 32MB of ram. Luci web ui says i fave 14MB free space... Maybe its mean the firmware just load into the ram and never store the configuration as it shoud into the flash memory?:S</p><p>I have continued to find the problem, and it is with the storeing. The custom firmware stores everythings in the ram this is why it is gone on restart. Maybe it is caused by too much ackage. Now i try to make a basic attitude. (The original attitude image is work perfect)</p>											<p class="post-edited">(Last edited by <strong>Milan1992</strong> on 6 Sep 2013, 19:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211786">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						6 Sep 2013, 20:08					</div>
				</div>
				<div class="post-content content">
					<p>too many packages.. try to cut out something!</p><p> <a href="https://forum.openwrt.org/viewtopic.php?id=43191">https://forum.openwrt.org/viewtopic.php?id=43191</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211793">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Milan1992</div>
					<div class="post-datetime">
						6 Sep 2013, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, i tried to find that theme but i couldn&#039;t find it... Now i know the problem, must have to find out how to solv it:)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>