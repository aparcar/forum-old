<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> eth1: link down / ar71xx: pll_reg 0xb8050014: 0x11110000</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p210408">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						22 Aug 2013, 11:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I really love the Open Wrt and used it for several years but I have an really annoying problem I hope you can help me resolve.</p><p>WNDR3700v2 with OpenWrt Attitude Adjustment 12.09 / LuCI 0.11.1 Release (0.11.1)<br />Kernel Version&nbsp; &nbsp; 3.3.8</p><p>Wan link does down and no connected devices get internet connection (no connection between LAN and WAN interface..)<br />It occurs periodically with 1-2 days recurrency. Before when I was running 10.3 I could override the MAC address and then I got connection again. But with 12.09 I need to restart the whole device. I feel it happens more frequently when stressing the device(CPU/Chipset/memory) with a lot of torrent connections etc.</p><p>I get this entry in the Kernel Log when this occurs:</p><p>[171911.920000] eth1: link down<br />[171922.920000] ar71xx: pll_reg 0xb8050014: 0x11110000<br />[171922.920000] eth1: link up (1000Mbps/Full duplex)</p><p>I have been trying these things to fix the problem without success:<br />- Added DNS servers to peer<br />- Changed the mac address to see if the ISP was the problem(if they block or have DHCP issues)</p><p>I have seen several other posts about these issues ref <a href="https://dev.openwrt.org/ticket/10439">https://dev.openwrt.org/ticket/10439</a></p><p>If this is a hardware issue or kernel problem then is it possible to code a startup script or configure the watchdog service so that you can either restart the device or restart the eth1(LAN) interface to autofix the internet conncection?</p><p>Im open to all solutions to avoid buying other hardware. I really appricate any help that can resolve this issue.</p><p>Have a nice day!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210413">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Aug 2013, 12:54					</div>
				</div>
				<div class="post-content content">
					<p>well have you already tried a recent trunk build?</p><p>just a random hint.. maybe there are some fixes <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210417">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						22 Aug 2013, 13:03					</div>
				</div>
				<div class="post-content content">
					<p>Im using the final build of 12.09. where do I find newer builds? </p><p>But this problem seems to have been an issue for over 3 years so I don&#039;t really it has been suddenly resolved the last months. But I can give it a try.</p><p>Anyone know why it started working when I overrided the mac address? Is it because the eth1 interface was restarted? <br />There is also some posts suggesting that when the link get up again automatically after the kernel error sets the link to 1000Mbps but it should be 100Mbps ?<br />Is only the wan port on WNDR3700v2 a 100Mbps and the rest is 1000Mbps(gigabit) ? then maybe 1000Mbps is wrong. </p><p>Its also posts that are indicating that the mac address reported by the device is different after the kernel goes down. This results in that the DHCP lease from the ISP is not valid when the connection is online again. </p><p>Hmm..hoping for a solution here <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210418">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						22 Aug 2013, 13:15					</div>
				</div>
				<div class="post-content content">
					<p>And any tips on getting more detailed logging on the kernel and system? what settings should I try ?</p><p>And is it possible to copy the logs to a external network share?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210419">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						22 Aug 2013, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>well these are trunk builds, unstable, beta, etc etc:</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-wndr3700v2-squashfs-factory.img">http://downloads.openwrt.org/snapshots/ â€¦ actory.img</a></p><p>your model has a &quot;recovery mode&quot; if something goes wrong or the firmware is not working? it could happen with trunk builds..</p><p>NOTE, there is no GUI preinstalled, you could install it later with opkg <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210432">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						22 Aug 2013, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>thanks! I will try this..but still does think this is a hardware issue. </p><p>anyone have some ideas on how to get a workaround everytime the link goes down? </p><p>how to you configure the watchdog ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210436">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						22 Aug 2013, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>I remember seeing something like that two years ago with my 3700 (or 3700v2), but I thought it then to be related to my cable modem, which apparently overheated under heavy traffic, or something like that. ISP adjusted power levels on the cable and also changed the modem, and my problems stopped, if I remember correctly.</p><p>I didn&#039;t try to debug further, if there would have been MAC changes on the router side, so my diagnose could also be wrong.</p><p>One rather easy idea for you:</p><p>create a crontab item that is run every 10 minutes. The script should ping some site near you (ISP&#039;s gateway?), and if no response is got after 3 tries, the script should reboot the device (or alternatively wait an additional 20 seconds and try again before rebooting).</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 22 Aug 2013, 16:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210465">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						22 Aug 2013, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>A little off-topic, but you could assign one lan port as wan interface and not use the physical wan interface at all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210510">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						23 Aug 2013, 10:38					</div>
				</div>
				<div class="post-content content">
					<p>thank for answers!</p><p>I tried newest trunk build without success. </p><p>I will also try to assign another port as WAN. but logs saying &quot;eth1: link down&quot;. And DHCP status on eth0 is connected to ISP.<br />Seems to like there is an issue with connection between eth0 and eth1.. but maybe a long shot.</p><p>I feel better logs would help. Any kernel developers that can tell me what code lines the&nbsp; &quot;ar71xx: pll_reg 0xb8050014: 0x11110000&quot; as mentioning.?</p><p>Any recommendations on the best open WRT &quot;compatible&quot; routers for the moment?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212057">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">prime_id</div>
					<div class="post-datetime">
						10 Sep 2013, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>*bump*</p><p>Anyone can recommend a &quot;new&quot; router for Open Wrt use?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>