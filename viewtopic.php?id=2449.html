<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wireless frame errors / compile with old kernel</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p11405">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						27 Aug 2005, 23:45					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT is wonderful and elegant, but the wireless performance is ruined by excessive retransmission requests and perhaps 10% of what it could be (show as frame errors on eth1 interface).<br />In the mean time, besides OpenWRT, also tried Sveasoft and DD-WRT and all suffer from this issue.<br />Found on the net some indication that this problem did not exist with an older Linux kernel (2.4.20).<br />Would like to give it a try. How difficult is it, if you have the current HEAD toolchain installed and operational, to give an old kernel a try, or are there fundamental problems ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11415">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						28 Aug 2005, 03:12					</div>
				</div>
				<div class="post-content content">
					<p>Well, except for the latest alpha of DD-WRT, all the other firmwares use 2.4.20 as well, so it can&#039;t be the kernel version. Try stuff like erasing your nvram. This is particularly helpful after flashing other Linksys-based firmware like Sveasoft, which add a huge load of crap to the nvram.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11416">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						28 Aug 2005, 03:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks nbd for your reaction. Of couse have made sure that nvram is not causing this.<br />Kernel now used is 2.4.30 , not 2.4.20, so that&#039;s why I am asking.<br />Is it complex to change back to an older one ???<br />With wired ethernet connections this phenomenon is caused when there is a communication conflict between two sides, one half-dupllex and the other full duplex or automatic. Perhaps the wireless interface just doesn&#039;t get properly hooked to the later kernel. As I have found no other suggestions would like to give it a try if reasonably doable. It&#039;s a pity that the system, that otherwise functions really beautifully, doesn&#039;t provide the radio bandwidth.<br />We have a 4 Mbps ADSL connection that is shared with a number of people but after the radio link only 600-700 k is left of it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11417">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						28 Aug 2005, 03:34					</div>
				</div>
				<div class="post-content content">
					<p>Why do you want to change back to the older kernel, when the other firmware that you&#039;ve tried IS based on it and doesn&#039;t work either? I don&#039;t think it would help at all...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11440">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						28 Aug 2005, 16:45					</div>
				</div>
				<div class="post-content content">
					<p>You are right about 2.4.20 in DD-WRT. Sorry for not having noticed that right away. So that eliminates that approach and saves time of trying.<br />Any other ideas where to look for the origin of this ?? Where is the decision made to ask for a retransmission, in the proprietary Broadcom radio drivers or somewhere in OpenWRT/Busybox/kernel software that the developers have access to ?<br />Even allowing for lots of overhead a 54 Mbps radio link should be able to do better than the 700 kbps effective transfer speed we see here at most.<br />Exhausted playing with a variety of radio settings. It improved from 500k to 700 kbps as result of gmode_cts collision protection and frameburst, but that&#039;s as good as it gets in effective bandwidth, even when experimenting only between two boxes sitting next to each other without anything special.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11441">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						28 Aug 2005, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>All the retransmission stuff is only in the proprietary driver. Maybe your hardware is faulty....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11446">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">doddel</div>
					<div class="post-datetime">
						28 Aug 2005, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, that&#039;s a possibility but it must be a systematic error then because have tried 4 boxes now (2 pcs v2 and 2pcs v2.2). Noticed in the documentation section of the buildtree, where some ifconfig outputs are listed for various hardware flavours that there these frame errors also show, so it&#039;s not just my hardware.<br />Example from v2.2 documentation<br />eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:12:17:CC:CD:26<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:3083<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:50 (50.0 B)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:4 Base address:0x1000</p><p>So even without any effective communication frame errors already get reported.</p><p>If you do a wireless file transfer between two WRT54g units with strong signals, what effective speed do you see ?<br />Have tried this using sftp which is on all my boxes and have measured sending some files back and forth of several megabytes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11447">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						28 Aug 2005, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t tried transfers between several WRTs, but if I transfer between my Powerbook (which also has Broadcom stuff) and my PC (through my WRT as LAN/WiFi bridge), I get 3.3-3.4MB/s performance using scp.<br />I&#039;m going to do some more tests when I&#039;m at home again...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>