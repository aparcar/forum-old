<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openwrt support for Huawei HG655b</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 12 Mar 2018 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 12 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p272963">
				<div class="post-metadata">
					<div class="post-num">Post #276</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I managed to free the jtag holes from soldering material (don&#039;t ask me how). Now I have the pinout of the HG655b interface<br /><a href="http://wiki.openwrt.org/toh/huawei/hg655d">http://wiki.openwrt.org/toh/huawei/hg655d</a><br /> and also the pinout of the TIAO device (20 pin JTAG connector)<br /><a href="http://www.tiaowiki.com/w/TIAO_USB_Multi_Protocol_Adapter_User%27s_Manual">http://www.tiaowiki.com/w/TIAO_USB_Mult … 27s_Manual</a>.<br />So what to connect where? I mean what pin from the TIAO USB JTAG 20 pin connector to connect to what pin (hole) of the HG655b JTAG interface? I can&#039;t find on google this information, or I don&#039;t know how to search.</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272967">
				<div class="post-metadata">
					<div class="post-num">Post #277</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 20:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />Ok, so after studying <br /><a href="http://sysprogs.com/VisualKernel/tutorials/raspberry/jtagsetup/">http://sysprogs.com/VisualKernel/tutori … jtagsetup/</a><br />and <br /><a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.faqs/ka8650.html">http://infocenter.arm.com/help/index.js … a8650.html</a><br />I think I have to connect the wires like this:</p><p>20 pin connector of TIAO USB JTAG&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;HG655b JTAG interface<br />nTRST &gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;TRST<br />TDI_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;TDI<br />TMS_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;TMS<br />TCK _&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;__&gt;_&gt;_TCK<br />TDO_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;TDO<br />GND (pin4)_&gt;_&gt;_&gt;_&gt;_&gt;__&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;_&gt;GND (from serial port) - no need for this one, actually, but it seems that the connection is best and most stable in detections with all 6 wires connected.</p><p>SO I&#039;ll give it a try</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 28 Apr 2015, 22:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272971">
				<div class="post-metadata">
					<div class="post-num">Post #278</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi again,<br />I also connected the GND of the serial port to the 4th pin of the TIAO JTAG and here is the first output:<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -probeonly /cable:0

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================

cableid=0, cabletype=0

 Set I/O speed to 30000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 31

Warning: detected/set IR Length isn&#039;t same as knew!
 (Defined IR length: 5, detected/set: 31)

CPU assumed running under LITTLE endian

CPU Chip ID: 10000000000000000000000000000000 (80000000)
*** Found a AMD manufactured Atheros AR531X/231X REV 08 CPU ***

    - EJTAG IMPCODE ....... : 10000000000000000000000000000000 (80000000)
    - EJTAG Version ....... : Unknown (4 is a reserved value)
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Skipped
Halting Processor ... &lt;Processor did NOT enter Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped

Probing Flash at Address: 0x1FC00000 ...
Detected Chip ID (VenID:DevID = 0000 : 8000)
*** Unknown or NO Flash Chip Detected ***

 *** REQUESTED OPERATION IS COMPLETE ***

E:\zjtag&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272972">
				<div class="post-metadata">
					<div class="post-num">Post #279</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 20:56					</div>
				</div>
				<div class="post-content content">
					<p>After powering on the HG655b and lowering the clock speed<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -probeonly /L1:2

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================


 Set I/O speed to 10000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 5

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101101000000101111111 (0636817F)
*** Found a Broadcom manufactured BCM6368 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... &lt;Processor Entered Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped
Detecting Flash Base Address...
DMA Read(x4) Addr = b0001000  Data = (06008000)ERROR ON READ
Read MPI register value : FFFFFFFF
MPI register show Flash Access Base Addr : 1FFFFF00

Probing Flash at Address: 0x1FFFFF00 ...
DMA Read(x2) Addr = 1fffff00  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff02  Data = (06008000)ERROR ON READ
Detected Chip ID (VenID:DevID = 00FF : FFFFFFFF)
DMA Read(x2) Addr = 1fffff20  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff22  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff24  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff20  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff22  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff24  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff20  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff22  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff24  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff20  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff22  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fffff24  Data = (06008000)ERROR ON READ
*** Unknown or NO Flash Chip Detected ***

 *** REQUESTED OPERATION IS COMPLETE ***

E:\zjtag&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272973">
				<div class="post-metadata">
					<div class="post-num">Post #280</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 21:02					</div>
				</div>
				<div class="post-content content">
					<p>And then I used the info on the openwrt wiki page to detect the flash chip<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -probeonly /L1:2 /window:18000000 /nompi

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================


 Set I/O speed to 10000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 5

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101101000000101111111 (0636817F)
*** Found a Broadcom manufactured BCM6368 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... &lt;Processor Entered Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped

Probing Flash at Address: 0x18000000 ...
Detected Chip ID (VenID:DevID = 017E : 1000)
*** Found a CFI Compatiable Flash Chip from AMD/Spansion


 *** REQUESTED OPERATION IS COMPLETE ***

E:\zjtag&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272974">
				<div class="post-metadata">
					<div class="post-num">Post #281</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						18 Apr 2015, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>- to detect flash chip </p><div class="codebox"><pre><code>zjtag -probeonly /window:18000000 /nompi  </code></pre></div><p>- to backup all flash<br /> </p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:800000 /nompi  </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272991">
				<div class="post-metadata">
					<div class="post-num">Post #282</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						18 Apr 2015, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I did that, but I cannot backup only cfe or nvram; when I give the command, it doesn&#039;t detect the flash anymore<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -backup:CFE /L1:2 /window:18000000 /nompi

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================


 Set I/O speed to 10000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 5

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101101000000101111111 (0636817F)
*** Found a Broadcom manufactured BCM6368 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... &lt;Processor Entered Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped

Probing Flash at Address: 0x1FC00000 ...
DMA Read(x2) Addr = 1fc00000  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00002  Data = (06008000)ERROR ON READ
Detected Chip ID (VenID:DevID = 00FF : FFFFFFFF)
DMA Read(x2) Addr = 1fc00020  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00022  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00024  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00020  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00022  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00024  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00020  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00022  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00024  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00020  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00022  Data = (06008000)ERROR ON READ
DMA Read(x2) Addr = 1fc00024  Data = (06008000)ERROR ON READ
*** Unknown or NO Flash Chip Detected ***


 *** REQUESTED OPERATION IS COMPLETE ***</code></pre></div><p>If i use /fc:082 to select the flash chip, I save a worthless cfe, here is the CFE.bin output:<br /></p><div class="codebox"><pre><code> €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  €  € </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273031">
				<div class="post-metadata">
					<div class="post-num">Post #283</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						19 Apr 2015, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>I opened a brand new device (with original firmware and connected with jtag:<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -probeonly /L1:2 /window:18000000 /nompi

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================


 Set I/O speed to 10000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 5

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101101000000101111111 (0636817F)
*** Found a Broadcom manufactured BCM6368 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... &lt;Processor Entered Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped

Probing Flash at Address: 0x18000000 ...
Detected Chip ID (VenID:DevID = 017E : 1000)
*** Found a CFI Compatiable Flash Chip from AMD/Spansion

 *** REQUESTED OPERATION IS COMPLETE ***</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273032">
				<div class="post-metadata">
					<div class="post-num">Post #284</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						19 Apr 2015, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>Now saving the original flash image... and first 256k to compare with the bricked one</p><p>The first 256k are different between the bricked device (wifi not working) and the new device (original huawei firmware)<br /><a href="https://app.box.com/s/zwvl1rmhxm21j9znbkvlxvo5ejhxudn3">https://app.box.com/s/zwvl1rmhxm21j9znbkvlxvo5ejhxudn3</a><br /><a href="https://app.box.com/s/cf07ng4hre88wmm1zxv36ikh1biw1uqt">https://app.box.com/s/cf07ng4hre88wmm1zxv36ikh1biw1uqt</a></p><p>What would you like me to do now?</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 19 Apr 2015, 16:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273033">
				<div class="post-metadata">
					<div class="post-num">Post #285</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						19 Apr 2015, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>I started the serial console for the bricked (openwrt - wifi not working)<br /></p><div class="codebox"><pre><code>CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)
Build Date: Wed Mar 23 22:59:09 CST 2011 (lihua@IBM_x3500)
Copyright (C) 2000-2008 Broadcom Corporation.

Parallel flash device: name AM29LV320MB, id 0x2200, size 8192KB
CPU type 0x2A031: 400MHz, Bus: 160MHz, Ref: 64MHz
CPU running TP0
Total memory: 67108864 bytes (64MB)
Boot Address 0xb8000000


Board IP address                  : 192.168.1.1:ffffff00
Host IP address                   : 192.168.1.100
Gateway IP address                :
Run from flash/host (f/h)         : f
Default host run file name        : vmlinux
Default host flash file name      : bcm963xx_fs_kernel
Boot delay (0-9 seconds)          : 1
Boot image (0=latest, 1=previous) : 0
Board Id (0-6)                    : HW65x
Number of MAC Addresses (1-32)    : 11
Base MAC Address                  : 02:10:18:01:00:01
PSI Size (1-64) KBytes            : 64
Main Thread Number [0|1]          : 0

*** Press any key to stop auto run (2 seconds) ***
Auto run second count down: 0</code></pre></div><br /><p>I started the serial console for the original HG655b (huawei firmware)<br /></p><div class="codebox"><pre><code>CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)
Build Date: Fri Apr 16 15:18:13 CST 2010 (lihua@IBM_x3500)
Copyright (C) 2000-2008 Broadcom Corporation.

Parallel flash device: name AM29LV320MB, id 0x2200, size 8192KB
CPU type 0x2A031: 400MHz, Bus: 160MHz, Ref: 64MHz
CPU running TP0
Total memory: 67108864 bytes (64MB)
Boot Address 0xb8000000


Board IP address                  : 192.168.1.1:ffffff00
Host IP address                   : 192.168.1.100
Gateway IP address                :
Run from flash/host (f/h)         : f
Default host run file name        : vmlinux
Default host flash file name      : bcm963xx_fs_kernel
Boot delay (0-9 seconds)          : 1
Boot image (0=latest, 1=previous) : 0
Board Id (0-6)                    : HW65x
Number of MAC Addresses (1-32)    : 11
Base MAC Address                  : 02:10:18:01:00:01
PSI Size (1-64) KBytes            : 64
Main Thread Number [0|1]          : 0

*** Press any key to stop auto run (2 seconds) ***
Auto run second count down: 1
web info: Waiting for connection on socket 0.
CFE&gt;</code></pre></div><p>so it seems that the CFE is the same version but different build dates<br />bricked<br />CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)<br />Build Date: Wed Mar 23 22:59:09 CST 2011 (lihua@IBM_x3500)<br />original<br />CFE version 1.0.37-102.6 for BCM96368 (32bit,SP,BE)<br />Build Date: Fri Apr 16 15:18:13 CST 2010 (lihua@IBM_x3500)</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 19 Apr 2015, 22:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273068">
				<div class="post-metadata">
					<div class="post-num">Post #286</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						19 Apr 2015, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>I compared the two complete flash images. There are differences in calib data:<br /><a href="https://app.box.com/s/bgrq3qqdh0o9oldua3yhcywi8vb9h3lu">https://app.box.com/s/bgrq3qqdh0o9oldua3yhcywi8vb9h3lu</a></p><br /><p>In this page<br /><a href="http://wiki.openwrt.org/doc/techref/bootloader/cfe">http://wiki.openwrt.org/doc/techref/bootloader/cfe</a><br />I found that the MAC address can be found at 0x6A0 (meaning 0006A0) and I found it for both devices :&nbsp; 02:10:18:01:00:01</p><p>I ask myself what will happen if I change this to what is written on the device</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 19 Apr 2015, 23:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273293">
				<div class="post-metadata">
					<div class="post-num">Post #287</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Apr 2015, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>So I&#039;ve been waiting for your suggestions on what to do next, as I don&#039;t lnow why when I give the commands -backup:cfe with the same /L1:2 and /window and /nompi&nbsp; id doesn&#039;t deteect anymore the flash; also, if I manually sefect /fc:082, I have a file full of euros.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273295">
				<div class="post-metadata">
					<div class="post-num">Post #288</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						21 Apr 2015, 17:33					</div>
				</div>
				<div class="post-content content">
					<p>To backup only CFE you can also use this command</p><div class="codebox"><pre><code>zjtag -backup:custom /window:18000000 /start:18000000 /length:10000 /nompi /BE</code></pre></div><p>Sometimes depending on the CFE initialization, the jtag utility fails to catch the CPU in a sane state for JTAG operation, sometimes you need to be fast to execute the commands after powering up the router, other times you need to wait a bit.</p><p>BTW I still don&#039;t understand exactly your goal, AFAIK the CFE bootloader doesn&#039;t perform any initialization in the wifi nor the pci interface which connects to wifi ().</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273304">
				<div class="post-metadata">
					<div class="post-num">Post #289</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Apr 2015, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi, danitool, my goal is to make the wifi work. But also I would like to know what happened. <br />Can you tell me:<br />-The command to backup the calib data<br />-The command to write the cfe and calib data and whole flash image<br />Maybe this would help the others in the same situation</p><p>Could you say why are those differences in cfe and calib data between the two devices?<br />And if I should change the mac address to that on the back of the device? <br />Thank you very much</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 21 Apr 2015, 19:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273308">
				<div class="post-metadata">
					<div class="post-num">Post #290</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						21 Apr 2015, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>On the openwrt wiki it is said that the msin function of the bootloader is to initialize the hardware<br />The bootloader&#039;s main function is to initialize the hardware, pass an abstraction of the initialized hardware, a hardware description, to and execute the Kernel.<br />Also, on the cfe wiki page talking about the bcm6368 they say that the data includes a parameter called wlan params which has 256 bytes. That&#039;s why I thaught cfe myght have something to do with hardware, but i don&#039;t know how it could get corrupted</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273656">
				<div class="post-metadata">
					<div class="post-num">Post #291</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						23 Apr 2015, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I flashed the unaltered CFe on the so-called bricked device<br /></p><div class="codebox"><pre><code>E:\zjtag&gt;zjtag -flash:custom /L1:2 /window:18000000 /start:18000000 /length:1000
0 /nompi

        ==============================================
               zJTAG EJTAG Debrick Utility v1.0
        ==============================================


 Set I/O speed to 10000 KHz

USB TAP device has been initialized. Please confirm VREF signal connected!
Press any key to continue... ONCE target board is powered on!

Probing bus ... Done

Detected IR chain Length is 5

CPU assumed running under BIG endian

CPU Chip ID: 00000110001101101000000101111111 (0636817F)
*** Found a Broadcom manufactured BCM6368 REV 01 CPU ***

    - EJTAG IMPCODE ....... : 00000000100000011000100100000100 (00818904)
    - EJTAG Version ....... : 1 or 2.0
    - EJTAG DMA Support ... : Yes
    - EJTAG Implementation flags: R4k MIPS16 MIPS32

Issuing Processor / Peripheral Reset ... Done
Enabling Memory Writes ... Done
Halting Processor ... &lt;Processor did NOT enter Debug Mode!&gt; ... Done
Clearing Watchdog ... Done
Loading CPU Configuration Code ... Skipped

Probing Flash at Address: 0x18000000 ...
Detected Chip ID (VenID:DevID = 017E : 1000)
*** Found a CFI Compatiable Flash Chip from AMD/Spansion

    - Flash Chip Window Start .... : 18000000
    - Flash Chip Window Length ... : 00800000
    - Selected Area Start ........ : 18000000
    - Selected Area Length ....... : 00010000

*** You Selected to Flash the CUSTOM.BIN ***

=========================
Flashing Routine Started
=========================
Total Blocks to Erase: 8

Erasing block: 1 (addr = 18000000)...Done
Erasing block: 2 (addr = 18002000)...Done
Erasing block: 3 (addr = 18004000)...Done
Erasing block: 4 (addr = 18006000)...Done
Erasing block: 5 (addr = 18008000)...Done
Erasing block: 6 (addr = 1800A000)...Done
Erasing block: 7 (addr = 1800C000)...Done
Erasing block: 8 (addr = 1800E000)...Done

Loading CUSTOM.BIN to Flash Memory...
Done  (CUSTOM.BIN loaded into Flash Memory OK)

=========================
Flashing Routine Complete
=========================
elapsed time: 49 seconds


 *** REQUESTED OPERATION IS COMPLETE **</code></pre></div><p>The wifi still doesn&#039;t work.</p><p>I&#039;ve read there is a ticket opened for the chaos calmer trunk<br /><a href="https://dev.openwrt.org/ticket/18280">https://dev.openwrt.org/ticket/18280</a> and other tickets for the ralink chipset</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273659">
				<div class="post-metadata">
					<div class="post-num">Post #292</div>
					<div class="post-author">andoru</div>
					<div class="post-datetime">
						24 Apr 2015, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>Does that log in the ticket look the same to what your bricked device&#039;s output? For me it doesn&#039;t show those two lines:</p><div class="codebox"><pre><code>[   14.476000] rt2800pci 0000:00:01.0: Direct firmware load failed with error -2
[   14.484000] rt2800pci 0000:00:01.0: Falling back to user helper</code></pre></div><p>The rest are the same as in the ticket.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273662">
				<div class="post-metadata">
					<div class="post-num">Post #293</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						24 Apr 2015, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>This was reported by another HG556a user.<br /><a href="http://foro.seguridadwireless.net/openwrt/openwrt-en-huaweig-hg556a/msg328608/#msg328608">http://foro.seguridadwireless.net/openw … #msg328608</a><br /></p><div class="codebox"><pre><code>[   27.872000] phy0 -&gt; rt2800_init_eeprom: Error - Invalid RT chipset 0xffff detected.
[   27.880000] phy0 -&gt; rt2x00lib_probe_dev: Error - Failed to allocate device.</code></pre></div><p>I&#039;m almost sure something at the wifi chip is fried. Might be a good idea to use lower wifi output power, 15dB or less looks a good choice for avoiding this problem. Of course this won&#039;t solve the problem if the wifi is already damaged.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273664">
				<div class="post-metadata">
					<div class="post-num">Post #294</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						24 Apr 2015, 01:02					</div>
				</div>
				<div class="post-content content">
					<p>After I flashed the whole original image,, here is the serial output:<br /></p><div class="codebox"><pre><code>NBUFF v1.0 Initialized
Broadcom Packet Flow Cache learning via BLOG enabled.
Created Proc FS /procfs/fcache
Broadcom Packet Flow Cache registered with netdev chain
Constructed Broadcom Packet Flow Cache v2.1 Mar 17 2010 13:26:20
Broadcom Packet CMF (Experimental) Char Driver v0.1 Mar 17 2010 02:52:58 Registered&lt;232&gt;
Broadcom Packet CMF (Experimental) [6368-B2] v0.1 Mar 17 2010 02:52:58 Loaded
bcmxtmcfg: bcmxtmcfg_init entry
adsl: adsl_init entry
KLOB extended to 2 pools
KLOB extended to 3 pools
KLOB extended to 4 pools
KLOB extended to 5 pools
KLOB extended to 6 pools
KLOB extended to 7 pools
KLOB extended to 8 pools
Broadcom Packet CMF (Experimental) SWC RESET.
Broadcom Packet CMF (Experimental) SWC INITIALIZED.
Broadcom Packet CMF (Experimental) Forwarder Net Device 0 v0.1 Mar 17 2010 02:52:58 Registered
Broadcom Packet CMF (Experimental) Forwarder Net Device 0 v0.1 Mar 17 2010 02:52:58 Registered
Broadcom Packet CMF (Experimental) ENABLED.
eth0.5: MAC Address: 5C:4C:A9:A4:D9:28
eth0.4: MAC Address: 5C:4C:A9:A4:D9:28
eth0.3: MAC Address: 5C:4C:A9:A4:D9:28
eth0.2: MAC Address: 5C:4C:A9:A4:D9:28
DSP Driver: DSP init stub
Endpoint: endpoint_init entry
............
PROV(ts: 5 s 977ms):Allocated memory = 13704
Endpoint: endpoint_init COMPLETED
Start mic now ...
load cfm ok.
start log proc...
ifconfig: SIOCSIFNETMASK: Cannot assign requested address
ifconfig: SIOCGIFFLAGS: No such device
wlancmd: wlan driver adapter not found
ifconfig: SIOCGIFFLAGS: No such device
ifconfig: SIOCGIFFLAGS: No such device
wlancmd: wlan driver adapter not found
ifconfig: SIOCGIFFLAGS: No such device
ifconfig: SIOCGIFFLAGS: No such device
wlancmd: wlan driver adapter not found
ifconfig: SIOCGIFFLAGS: No such device
ifconfig: SIOCGIFFLAGS: No such device
wlancmd: wlan driver adapter not found
ifconfig: SIOCGIFFLAGS: No such device
PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
PCI: Setting latency timer of device 0000:00:01.0 to 64


=== pAd = c039f000, size = 448000 ===

&lt;-- RTMPAllocAdapterBlock, Status=0
pAd-&gt;CSRBaseAddress =0xb1000000, csr_addr=0xb1000000!
sh: cannot kill pid 318: No such process
device wl0 is not a slave of br0
interface wl0.1 does not exist!
interface wl0.2 does not exist!
interface wl0.3 does not exist!
ifconfig: SIOCGIFFLAGS: No such device
ifconfig: SIOCGIFFLAGS: No such device
ifconfig: SIOCGIFFLAGS: No such device

 begin WlanUpInterfaces...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273666">
				<div class="post-metadata">
					<div class="post-num">Post #295</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						24 Apr 2015, 01:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>andoru wrote:</cite><blockquote><p>Does that log in the ticket look the same to what your bricked device&#039;s output? For me it doesn&#039;t show those two lines:</p><div class="codebox"><pre><code>[   14.476000] rt2800pci 0000:00:01.0: Direct firmware load failed with error -2
[   14.484000] rt2800pci 0000:00:01.0: Falling back to user helper</code></pre></div><p>The rest are the same as in the ticket.</p></blockquote></div><p>No, it&#039;s the same as in your case, I guess. Maybe this saturday I&#039;ll find out more. There ar emore tickets that report there is this error and related errors with the new trunk. But it doesn&#039;t work also with the original firmware.</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 24 Apr 2015, 01:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273667">
				<div class="post-metadata">
					<div class="post-num">Post #296</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						24 Apr 2015, 01:10					</div>
				</div>
				<div class="post-content content">
					<p>So it seems working with jtag is not that hard. Just that there is a random chance to work with different clock speeds.<br />It seems there is no need for the gnd pin. The 5 pins are enough for the connection.\<br />Regards.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273702">
				<div class="post-metadata">
					<div class="post-num">Post #297</div>
					<div class="post-author">01226547766</div>
					<div class="post-datetime">
						24 Apr 2015, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Ouhouuh;h</p>											<p class="post-edited">(Last edited by <strong>01226547766</strong> on 23 Jan 2016, 20:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273755">
				<div class="post-metadata">
					<div class="post-num">Post #298</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						24 Apr 2015, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />It seems you have the same problem as I and andoru. I still don&#039;t know what happned. I&#039;ll go tomorrow to another electronist to look at the device. The first one said that the wifi chip is not fried (has the correct voltages,etc), but somehow it is not properly initialised or something like that.<br />In this thread danitool explained how to restore the wifi calib data, but not all the devices have the same calib data. I saved mine while wifi worked. You just need to read those posts.<br />For jtag I tried only with nTRST conencted. I&#039;ll try without to see if the chip is detected when backing up cfe. </p><p>Can you give a download link of this quartus software? and what&#039;s with all those links?<br />Kind regards</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 24 Apr 2015, 17:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273916">
				<div class="post-metadata">
					<div class="post-num">Post #299</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						25 Apr 2015, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have some news. I checked again the wifi chip at a friend of mine which is an electronist engineer. He found that the quartz crystal near the wifi chip does not function properly, but he tested it on the goog device so this was not the problem. Although the voltages of the wifi chip are right, it seems the wifi chip is the problem, either it is fried or unsoldered because of overheating. So I&#039;ll stop here, as the repair costs of the wifi chip are three times higher than that of the device on the second hand market. I&#039;ll still use it as a wired server/router/extender/bridge.<br />Kind regards</p>											<p class="post-edited">(Last edited by <strong>fratzicu</strong> on 25 Apr 2015, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p273918">
				<div class="post-metadata">
					<div class="post-num">Post #300</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						25 Apr 2015, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi, danitool,<br />Can you give a hint on how to compile a custom cfe?<br />Thank you and regards.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 301 to 300 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 12 of 18</div><nav><ul><li><a href="viewtopic.php%3Fid=50207&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=10.html">10</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=11.html">11</a></li><li class="pagination-current"><span>12</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=13.html">13</a></li><li><a href="viewtopic.php%3Fid=50207&amp;p=14.html">14</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=50207&amp;p=18.html">18</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>