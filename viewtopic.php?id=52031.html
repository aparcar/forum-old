<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Command /sbin/reboot fails on TP-Link WDR3600 hw-version 1.5</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Jan 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p242852">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">underthehood</div>
					<div class="post-datetime">
						5 Aug 2014, 17:45					</div>
				</div>
				<div class="post-content content">
					<p>I have been running AA successfully on TP-Link WDR3600 hw-versions 1.1 to 1.4. However, on hw-version 1.5 the command /sbin/reboot sometimes fails -- the device goes down but does not come back up. Power cycling the box gets it up again, provided you have physical access to it.</p><p>I did some experiments using both hw-versions with AA and BB_rc2, logging in and running /sbin/reboot from the command line. The results: </p><p>HW-version 1.4: /sbin/reboot works every time (10 out of 10)<br />HW-version 1.5: /sbin/reboot fails 3-4 times out of 10 attempts, both on AA and on BB_rc2.</p><p>This is not just a bad apple, I have tried three different devices (hw-version 1.5) and the results are consistent. Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242984">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">underthehood</div>
					<div class="post-datetime">
						6 Aug 2014, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>After some googling I found another way to reboot the device: &quot;echo b &gt;/proc/sysrq-trigger&quot; . Is it OK to use this command instead of /sbin/reboot? Or is it even preferrable?</p><p>Anyway, although it looked promising at first, this command also fails to bring the device back up again at times.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p242989">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">underthehood</div>
					<div class="post-datetime">
						6 Aug 2014, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>The story continues: I flashed six devices (hw-version 1.5) with AA. Then I made cron run a reboot-test (using echo b &gt;/proc/sysrq-trigger) every 2-3 minutes.</p><p>(The cron-entry is &quot;* * * * * /root/reboot_test.sh&quot;, but booting takes some time, too).</p><p>After a good hour hour of running half of my devices have ceased functioning, two of then within the first 10 minutes. The other three are still ticking. </p><p>There seems to be significant variation in the quality/stability of the TP-Link devices. As stated earlier, I never had any issues with previous hw-versions. In fact, I believe I have had several stable 1.5 devices as well.</p><p>How much &quot;micro-versioning&quot; can there be between two versions, e.g. between 1.4 and 1.5?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243030">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						6 Aug 2014, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>maybe a serial log of the hanging could show some hints about why it&#039;s not booting ok.</p><p>in the past sometimes micro-versions had slightly different hw (chips revision etc..)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243109">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">underthehood</div>
					<div class="post-datetime">
						7 Aug 2014, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your prompt reply. </p><p>Unfortunately, I must confess I have no idea of how to produce a serial log. Any pointers?</p><p>An update on the reboot-test: after 24 hours of running two (2) out of six devices are still running. The other four are hanging.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246752">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						11 Sep 2014, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>I have the same problem with the reboot at a TL-WDR4300 V1.7 and OpenWRT BB-RC3.<br />Sometimes the router hangs after the reboot command and a power cycle is required to get it back to live.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246810">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nachopro</div>
					<div class="post-datetime">
						12 Sep 2014, 04:33					</div>
				</div>
				<div class="post-content content">
					<p>I have a TL-WDR3600 v1.5 with BB RC3 with the same problem... The reboot via ssh or luci fails and it need a power cycle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246833">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						12 Sep 2014, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>Here is also an ongoing discussion about a reboot problem with a TL-WDR4300:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=48226">https://forum.openwrt.org/viewtopic.php?id=48226</a><br />So far as I know has the TL-WDR3600 and the TL-WDR4300 nearly the same hardware inside (except of the WiFi part) and so we a probably talking about the same problem.</p><p>There came also the idea up, that maybe an additional installed software module causes these problems.<br />Did you guys install extra modules which are not included into the original OpenWRT firmware package at your router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p246839">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						12 Sep 2014, 11:06					</div>
				</div>
				<div class="post-content content">
					<p>I opened up a ticket with the reboot problem:<br /><a href="https://dev.openwrt.org/ticket/17839#ticket">https://dev.openwrt.org/ticket/17839#ticket</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249522">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">lc</div>
					<div class="post-datetime">
						7 Oct 2014, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>Which RAM does your board have?</p><p>We found:<br />Devices having reboot issues are eqipped with Zentel A3R12E40CBF<br />Devices without reboot issues use SKhynix H5PS5162GFR<br />Devices without reboot issues use Winbond W9751G6KB-25</p><p>Can you confirm?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252911">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ghiki</div>
					<div class="post-datetime">
						3 Nov 2014, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm, reboot issues here with &quot;Barrier Breaker&quot; <br /><span class="postimg"><img src="http://i.imgur.com/K590R9v.jpg" alt="http://i.imgur.com/K590R9v.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>ghiki</strong> on 3 Nov 2014, 03:16)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>