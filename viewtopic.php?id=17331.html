<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Selective VLAN tagging</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p74736">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">biquad</div>
					<div class="post-datetime">
						15 Oct 2008, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi everybody,</p><p>&nbsp; &nbsp;Running OpenWRT Kamikaze 7.09 on a WRT54GL. I am *not* using wireless for this, just plain old Ethernet. I managed to split up the ports into different VLANS without any problem (thanks for the docs).</p><p>&nbsp; &nbsp;Question is: is it possible to tag an outgoing packet according to its IP address (or subnet/whatever)?</p><p>&nbsp; &nbsp;The problem is I have a PC (Windoze) with a single NIC (can&#039;t install another one); I have two IP addresses (on different subnets, say subnet1 and subnet2) for the PC but no VLAN support. This means that all packets coming/going to the PC will be untagged.</p><p>&nbsp; &nbsp;PC is connected to the WRT which, in turn, is connected to a switch downstairs with VLAN support, and then to the rest of the LAN. </p><p>&nbsp; &nbsp;So, all packets coming *from* the switch (i.e. the rest of the LAN) will be tagged accordingly (say, VLAN1 and VLAN2): the WRT should untag them and send them (all) to the PC. This doesn&#039;t look like a big deal.</p><p>&nbsp; &nbsp;Problem is the reverse: packets coming from the PC to subnet1 should be tagged by the WRT54 (again, according to their IP address) for VLAN1 and sent out to the switch. Packets from the PC to subnet2 should be tagged with VLAN2 and sent to the switch. The switch downstairs will handle the packets based on their VLAN tag and send them out to the rest of the LAN.</p><p>&nbsp; &nbsp;And one last thing: only one wire from the WRT54 to the big switch downstairs. This means that the WRT has one port talking to 2 different VLANS.</p><p>&nbsp; &nbsp;I hope I have been sufficiently clear. Is this possible at all? </p><p>Any suggestions are most welcome! Thanx!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>