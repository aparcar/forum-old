<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> P-2812HNU-FX: getting OpenWrt installed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 6 Jun 2015 and 5 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 18 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p301471">
				<div class="post-metadata">
					<div class="post-num">Post #426</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						27 Nov 2015, 19:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><div class="quotebox"><cite>scapi wrote:</cite><blockquote><p>@strtfr it was faulty wireless chip, he need to reflow it, if I remember it right.</p></blockquote></div><p>For the record.. I had flashed a version of your openwrt onto it back in jan or whatever and my wifi worked at full speed (40mbit/s) up/down .. I then upgraded through the web gui some days ago and worked fine too.. it was only when I reflashed to stock, and now I am in same situation as the A. have ot use older commit to make things boot (#395), and am also ow stuck with the kernel image issue.</p><p>So I don&#039;t tihink it is wifi HW issue, it&#039;s some other misconfiguration in recent builds.</p><p>Answer to B) was in fact that wrong space in the nboot command btw.</p><p>Well, I get full speed after using the calibration file and as long as I am behind my other router and not ISP.. don&#039;t know why but so be it. I will use the other router as my main entry fw (tomato) and use openwrt as my lan fw/freeradius yaddi ya. Thanks for amazing software and work scapi et al!</p></blockquote></div><p>I suspect that with these errors I&#039;m seeing (check the pastebins I posted) that I might have flashed the wrong bootloader or something, it might just be that everyone here doesn&#039;t use DHCP and that&#039;s why the error appears. Do you know anything about using this router though WAN port and DHCP on the last scapi firmware, I know little about bridging so it might be that I have to do that for it to work but I assumed that since the light showed and it said wan connected in console everything was supposed to be set-up for that. He is kind enough to update the firmware but can&#039;t test it since his device is broken you know <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Despite this I doubt he would not notice something as simple as the GUI having errors with showing device load on the main screen, but it might just be left like that as it doesnt really matter...</p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 27 Nov 2015, 19:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301533">
				<div class="post-metadata">
					<div class="post-num">Post #427</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						28 Nov 2015, 10:14					</div>
				</div>
				<div class="post-content content">
					<p>Heya.. Ye well I am a bit stumped. As I said, it works at full 40/40 mbit speed here, even the wifi if I am behind my tomato router:</p><p>tomato.lan.output =&gt; wrt.wan.input.</p><p>If I for some reason place the router right on the ISP line, it drops the upspeed to 2 mb <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> I contacted them but you know technical support.. about as educated as a 2 pound lady of the streets.</p><p>Anyway, I notice some other issues with the latest build: One can get tx ring full errors.<br />Runtime error on the admin status page or so, dsl_something is nil.. (I don&#039;t use the phone lines).. this makes my status page unable to collect stuff... but doesn&#039;t seem to break anything else. </p><p>I had some major random issues with the dns/dhcp yes, suddenly. Despit just changing the default lan segment, I still get suddenl random bridgimng effects, aka my wrt client gets a ip form the upstream tomato and so on. This seemed to do with /tmp/resolv.conf{,.auto} but ya.. it is all shoddy. </p><p>Anyway, I wish to compile the sources so i can possibly do some patching. make breaks, so I found a patch for our lantiq regarding some usb issue during compilation (scapi?, any ideas?).. about the ring issue, I will look into an existing patch if I ever get around to actually considering this production ready.</p><br /><p>If I can get some help on how ot check out, or rather WHICH commits to check out usually, or what to look out for with regards to our F1 (in my case) , I don&#039;t mind building now andthen so ppl can download. But come xmas and me moving over to Poland again to do some housing work, I am not sure how much time I will have.</p><p>PS. I see dg has just a day or two ago built a new updated fw:</p><p><a href="http://dgcomsys.noip.me/phpbb/viewtopic.php?f=19&amp;t=60">http://dgcomsys.noip.me/phpbb/viewtopic … 9&amp;t=60</a></p><p>if you read this, could you link me the images? or even the build instructions ( I woudl really love if you could), you do not need ot list any installed packages, that is sorted (apart form jikes although I have the package fo rit from deb* systems).</p><p>I mean, eg. a .config, any particular commands and/or patches within the git tree and any other tweaks.</p><p>As a side note, I wish to get rid of the venerable dropbear as it is for my needs way too poor to be on a router in this day and age, and intend to do as I have on some other projects, add a different daemon.</p>											<p class="post-edited">(Last edited by <strong>forgetmij</strong> on 28 Nov 2015, 10:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301543">
				<div class="post-metadata">
					<div class="post-num">Post #428</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						28 Nov 2015, 12:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><p>As I said, it works at full 40/40 mbit speed here, even the wifi if I am behind my tomato router:</p><p>tomato.lan.output =&gt; wrt.wan.input.</p></blockquote></div><p>Have you tried to put a simple switch upstream? Maybe for some reason there is just an &#039;electrical&#039; problem.</p><div class="quotebox"><blockquote><p>I wish to get rid of the venerable dropbear as it is for my needs way too poor to be on a router</p></blockquote></div><p>What is &#039;poor&#039; on dropbear?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301926">
				<div class="post-metadata">
					<div class="post-num">Post #429</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						1 Dec 2015, 11:19					</div>
				</div>
				<div class="post-content content">
					<p>Ok. compiling the latest trunk and adding some vlans/switch interface makes this a nicer experience. I will try to patch some stuff here and there when I have dug deeper into openwrt building system. Successfully built 47680. Wouldn&#039;t mind exchanging a config file scapi, as I do have still quite a hit and miss with deps w.r.t. modules vs. inbuilt options and yaddi ya.</p><p>Mijzelf? win user? Regarding dropbear.. I see from the openwrt package actually they have updated some of the ciphers thank god for use with ssh. At least that is something. Either way, that is good enough against tier 2 baddies aka random cyber thugs. The big baddies though, US govt spying agencies you will need to only accept edDSA/*25519* currently for any faith in the software. Of course, there is al ong way to go before hardware is protected against those kinds, but that is a political fight rather than a technical.</p><p>for references, see gnupg development, curve 25519, edwards/montgomery curves, d.j.Bernstein and tinyssh for example.</p><p>Oh, to the db guy I posted a link too.. your current build _might_ be down to squashfs ahead of ubifs (see recent patches/discussions regarding bad blocks on nand). Anyway, you had 73 bad blocks I read or so on one of the routers.. don&#039;t expect that to run anything mission critical via squashfs images. nand.scrub can&#039;t perform magic imo.</p>											<p class="post-edited">(Last edited by <strong>forgetmij</strong> on 1 Dec 2015, 11:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301948">
				<div class="post-metadata">
					<div class="post-num">Post #430</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						1 Dec 2015, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>hmm, scapi.. I have compiled latest trunk, but eeprom fails due to complaining about eeprom not being 512 bytes.. what did you do as a fix if you are around? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Also, I see in your notes you undid something about separating the wan/lan to avoid ring full errors? I do get them although I have &#039;separated&#039; the wan/lan via vlans.</p><p>czescz y dzienky <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>nvm, I added it to the build. Now has vlans autoconfigured, a bunch of extras and all good. Had to fix the ACK on the wifi to gain full speeds again on latest trunk.. but also have added a tons of extra.</p><p>I now _love_ openwrt <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p><a href="http://postimg.org/image/z2t9eua9n/full/">http://postimg.org/image/z2t9eua9n/full/</a></p><p>I don&#039;t get *.image.bin files after building, only rootfs.tar{,.gz} Probably because I make larger than 8 MB images?</p><p>Still, they work fine as far as I can see.<br />The only issue is working with the RX ring. If it overloads it just means the cpu will take over some of the work as such but dunno. <br />I definitely think it can lead to some redplugging. </p><p>to dg laddy: On your forum, I saw you have some issues with seemingly bottlenecking wifi is it(or the net generally)?</p><p>if rx ring full errors, then you are probably encountering this thing scapi fixed by separating wan and lan again.. not sure what he means by that.</p><p>If it is your wlan (check for ACK errors/warnings in your logs)... if it is this, then this should help/fix it for you:<br />add/append to your wifi-iface in wireless:</p><p>&nbsp; &nbsp; option disassoc_low_ack &#039;0&#039;&nbsp; </p><br /><p>Hope it helps.</p>											<p class="post-edited">(Last edited by <strong>forgetmij</strong> on 2 Dec 2015, 08:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302062">
				<div class="post-metadata">
					<div class="post-num">Post #431</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						2 Dec 2015, 09:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><p>I now _love_ openwrt <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p><a href="http://postimg.org/image/z2t9eua9n/full/">http://postimg.org/image/z2t9eua9n/full/</a></p></blockquote></div><p>Tinyproxy? I&#039;ve always used shadowsocks or 3proxy. And wouldn&#039;t the router die with running transmission on it? I mean, it has very low RAM and CPU, a download will probably kill the CPU of the router... But that&#039;s just me.</p><p>Again I&#039;m probably doing something wrong but not sure I&#039;d use the router like this <a href="http://pastebin.com/mQGm9VBW">http://pastebin.com/mQGm9VBW</a> <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 2 Dec 2015, 10:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302067">
				<div class="post-metadata">
					<div class="post-num">Post #432</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						2 Dec 2015, 10:04					</div>
				</div>
				<div class="post-content content">
					<p>@courfazor: Next time, please quote only what&#039;s necessary. No need for a fullquote in each posting of you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302070">
				<div class="post-metadata">
					<div class="post-num">Post #433</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						2 Dec 2015, 10:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tmo26 wrote:</cite><blockquote><p>@courfazor: Next time, please quote only what&#039;s necessary. No need for a fullquote in each posting of you.</p></blockquote></div><p>Edited it, forgot about it most likely... Thanks for the heads up nonetheless.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302074">
				<div class="post-metadata">
					<div class="post-num">Post #434</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						2 Dec 2015, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>heya courfazor.. A. I am just testing for now as several packages were failing currently (ntpd, ntfs-3g-utils or ntfsprogs, some other)..</p><p>sure.. tinyproxy ain&#039;t my thing, I usually use a caching proxy. </p><p>transmission, ye..I added it just to test vs. rerouting it to attached hdds.. but agreed, on a router, avoid extra services as the plague!</p><p>So I will minimise so many things.. as I said.. I didn&#039;t build a &#039;production image to share&#039; (yet at least) just wanted to let people know, it works fine, the latest commit.. plus I integrated the eeprom file, added some default switch config which was missing so the switch option was back in the menu and so on <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>EDIT: LOL @ that syslog.. no.. the only error so far is tx ring full.. the ring buffer gets filled during heavy traffic which ain&#039;t a good thing. This has to be fixed else I am not sure about the viability of this router.</p><p>I saw Scapi wrote in his latest pre-built, that he &#039;separated the wan and lan to avoid this ring error)... I would like any input on what that means. When I look in my build, the wan port is a switch port , i.e. port 5 I think and I have separated it by using it on a different vlan.</p><p>As most probably know, vlans send the sirqs up to ~100% and slow down the speeds to 100mbitsish instead of gigabit speeds.</p><p>Either way, doing some perf tests also show that the rx tx is ~80 /120 Mbits currently (I presume due to the same issues making the ring buffer filled).</p><p>I am looking into other solutions.</p>											<p class="post-edited">(Last edited by <strong>forgetmij</strong> on 2 Dec 2015, 11:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302077">
				<div class="post-metadata">
					<div class="post-num">Post #435</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						2 Dec 2015, 11:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><p>I saw Scapi wrote in his latest pre-built, that he &#039;separated the wan and lan to avoid this ring error)... I would like any input on what that means. When I look in my build, the wan port is a switch port , i.e. port 5 I think and I have separated it by using it on a different vlan.</p><p>As most probably know, vlans send the sirqs up to ~100% and slow down the speeds to 100mbitsish instead of gigabit speeds.</p><p>Either way, doing some perf tests also show that the rx tx is ~80 /120 Mbits currently (I presume due to the same issues making the ring buffer filled).</p><p>I am looking into other solutions.</p></blockquote></div><p>Those are indeed very important. My line is just 30/30 megabit/s and when the buffer got filled up the router did not only slow down it even died completely after a lot of load (I fired up transmission over wi-fi with well over 200 GB+ transfer and I&#039;m not sure at which point but surely it died=internet connection vanished) <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" />. Either way, I don&#039;t know much about OpenWRT. Most experience I have is just operating Linux and such so all I did was update to the pre-built one scapi has when I saw Wi-Fi got fixed, but I might have to learn more if I plan on using this router.</p><p>EDIT: About the meaning, I think he means that WAN/LAN was on the same interface before. It was being bridged and I had quite a lot of bridging interfaces in the end when getting my router to work last time. It was such a big mess I hoped it was already set up but when I tried it didn&#039;t connect over DHCP but the interface wan does exist and shows up in logs when it connect so it&#039;s &quot;seperated&quot;? There must be a reason it&#039;s not cleaning the buffer. I&#039;m positive a router like this should be able to handle weak speeds like these. I have another cheap router which handles it perfectly.</p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 2 Dec 2015, 12:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302097">
				<div class="post-metadata">
					<div class="post-num">Post #436</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						2 Dec 2015, 14:05					</div>
				</div>
				<div class="post-content content">
					<p>Opps. power went down when replying ... in fact, I am not sure if it&#039;s this particular zyxel, zyxel in general or openwrt but when there is a power outage, my zyxel is almost bricked.. I have to reset power button 100 times, try and reset with button, unplug everything , keep doing this till it starts booting <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /> and afterwards it is so shoddy.. that CAN&quot;T BE GOOD <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>ABout the separation.. well, when I compile the trunk now, the WAN port is a port on the switch (eth0). Whereas in his compilation, the wan port registers as a seperate physical interface (i.e. eth1); this is what he means I think, I just didn&#039;t know one could do that.. I thought the physical layout was set and couldn&#039;t move an interface off the switch as such. I guess he has messed with the dti or what is is to change some physical IDs.</p><p>I would be interest in knowing how and what, as it can probably help to avoid the vlan slow down issues (and thus secondarily, avoid the ring buffer getting filled).</p><p>In my build i have included the wifi fix so one doesn&#039;t have to reup it afterwards.. I am still playing withi this as my outage made a sysupgrade also seem weird. If I find a good solution to the ring issue, I will let ppl know and I can upload some test firmwarefor those who want the latest online. </p><br /><p>I coudl never get quotes, or code blocks to work.. I wish to attach a kernel and boot log... anyway, none of them have any errors, all loads fine, and this is with a lot of extras like openvpn, switch, wol, freifunk , network shares, time sync (works), diagnostics, usage, hotspots strongswan, freeradius the lot. anyway Now to solve, the tx.</p><p>[&nbsp; &nbsp; 0.811799] libphy: lantiq,xrx200-mdio: probed<br />[&nbsp; &nbsp; 0.825279] net-xrx200: invalid MAC, using random<br />[&nbsp; &nbsp; 0.890919] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:00, irq=-1)<br />[&nbsp; &nbsp; 0.958889] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:01, irq=-1)<br />[&nbsp; &nbsp; 1.026874] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:11, irq=-1)<br />[&nbsp; &nbsp; 1.094873] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.4] (phy_addr=0:13, irq=-1)<br />[&nbsp; &nbsp; 1.162890] eth0: attached PHY [Lantiq XWAY VR9 GPHY 11G v1.3] (phy_addr=0:05, irq=-1)</p><p>This is the part I think Scapi took port 5, the wan and made it eth1. Great idea. if only I could be told how! <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>That might avoid the slow down due to vlans although it does sound a bit like houdou... The other option is to patch the ralink driver to increase the rx buffer size. For some reason ethtool (I compiled it in) does not support the switch sigh neither my nic on the desktop, but works fine with my ancient laptop nic <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>There the rx is set to 16k, but hardware is set to 256 it says.. that is rather old, and possibly we could hack that in the ralink driver .<br />EDIT: ok , found it.. it is the .dtsi file. I will try and revert like he has probably and see what I can come up with amongst that plus the switch and vlan solutions to streamline this darn ethernet issues. This is too good a router to pass up on!</p><br /><p>I plan to port some nice programs over to it, Not sure, is darkhttpd vs. uhttpd an idea, anyone?</p><p>Ok, quite a few patches in 4.1.1: Between this one 0025-NET-MIPS-lantiq-adds-xrx200-net.patch&nbsp; and reverting the .dtsi and some other hacking, we should be able to fine tune this thing. But it&#039;s gonna take me a lil while since I kinda hate C.</p>											<p class="post-edited">(Last edited by <strong>forgetmij</strong> on 2 Dec 2015, 17:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302189">
				<div class="post-metadata">
					<div class="post-num">Post #437</div>
					<div class="post-author">forgetmij</div>
					<div class="post-datetime">
						3 Dec 2015, 09:25					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.codico.com/fileadmin/bilder/produkte/akt/Lantiq_XWAY-VRX288_Product-Brief_02.pdf">http://www.codico.com/fileadmin/bilder/ … ief_02.pdf</a></p><p>Wow... according to that product brief, the lan ports can only run as 100 MB BT switch or as a gigabit switch if only 2 of the 4 are activated! That might have something to do with the networking issues? Although I thought the stock firmware showed it as 1000 Mb?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302504">
				<div class="post-metadata">
					<div class="post-num">Post #438</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						5 Dec 2015, 14:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><p><a href="http://www.codico.com/fileadmin/bilder/produkte/akt/Lantiq_XWAY-VRX288_Product-Brief_02.pdf">http://www.codico.com/fileadmin/bilder/ … ief_02.pdf</a></p><p>Wow... according to that product brief, the lan ports can only run as 100 MB BT switch or as a gigabit switch if only 2 of the 4 are activated! That might have something to do with the networking issues? Although I thought the stock firmware showed it as 1000 Mb?</p></blockquote></div><p>Have experiences something similar on my LAN switch before. The CPU is weak and depending on which ports you use/how many you have connected the speed will decrease overall a little and more for each time. Not good, not good at all...<br />My ISP just sent some new exciting router, now let&#039;s see if they want to give me the password for it <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <a href="http://i.imgur.com/NeayjQA.png">http://i.imgur.com/NeayjQA.png</a></p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 5 Dec 2015, 14:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302581">
				<div class="post-metadata">
					<div class="post-num">Post #439</div>
					<div class="post-author">calvxrr</div>
					<div class="post-datetime">
						6 Dec 2015, 09:57					</div>
				</div>
				<div class="post-content content">
					<p>Hello.<br />Has anyone of you tried to replace F1 internal antennas with external? I understand that those wires below the board are from WiFi card, connecting internal antennas?<br />As far I know, there are two u.fl connectors. So do I only have to use u.fl to rp-sma adapter?</p><p><strong>Edit:</strong><br />I&#039;ve succesfully removed two internal antennas. First I had bought two U.FL to RP-SMA wires. Then it was easy. Using the drill, I made two holes for rp-sma connectors. After that, I connected u.fl connectors, antennas and voila! <img src="https://forum.openwrt.org/img/smilies/cool.png" width="15" height="15" alt="cool" /></p><p>Before, between two floors my F1 wasn&#039;t seen on my laptop. After changing to external antennas, now I have good signal ~39Mbps.<br />Very good sign, because I used some cheap 5dbi antennas.</p><p>With scapi&#039;s openwrt, my F1 flies now! Thanks! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>											<p class="post-edited">(Last edited by <strong>calvxrr</strong> on 10 Dec 2015, 22:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303273">
				<div class="post-metadata">
					<div class="post-num">Post #440</div>
					<div class="post-author">Aquatica</div>
					<div class="post-datetime">
						11 Dec 2015, 07:08					</div>
				</div>
				<div class="post-content content">
					<p>Hello after a long time! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I haven&#039;t dared to touch my -F1, since it works nicely.<br />Currently 42d uptime (was on short vacation and it was shut down during that) and I&#039;ve had TX RING FULL errors for about 2 weeks. Still works, but it seems a bit slower than before - and if I keep it on low usage it seems to fix itself after a while?</p><p>Anyway, I got this funny error appear every now and then;<br />[2958248.876000] ieee80211 phy0: rt2x00lib_rxdone: Error - Wrong frame size 0 max 3840<br />Something about WIFI, but what does that really mean?</p><p> OpenWrt Barrier Breaker 14.07 / LuCI 0.12 Branch (0.12+git-15.037.36195-f1e2a26) <br /> Kernel Version 3.10.49 <br /> Uptime&nbsp; &nbsp; 42d 6h 40m 57s <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>And now I also got some buffered/cached stuff on! Apparently it takes weeks to get anything to cache or buffer?!<br /> Cached 7996 kB<br /> Buffered 2832 kB</p><p>Not that it matters I think. <br />Afaik this is from scapi&#039;s build, VDSL works wonderfully etc. I am planning on upgrading one day, if I dare. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />50/10 VDSL works 100% (through DSL port), as did 100/10.</p><p>In any case thanks for scapi &amp; all for making this box usable!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303360">
				<div class="post-metadata">
					<div class="post-num">Post #441</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						11 Dec 2015, 19:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>forgetmij wrote:</cite><blockquote><p>I had some major random issues with the dns/dhcp yes, suddenly. Despit just changing the default lan segment, I still get suddenl random bridgimng effects, aka my wrt client gets a ip form the upstream tomato and so on. This seemed to do with /tmp/resolv.conf{,.auto} but ya.. it is all shoddy.</p></blockquote></div><p>If you or scapi ever get things working properly please reply here. I&#039;d be very happy to have my F3 working again without filling its buffer up <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I could have just stayed on the ISP firmware at least, it worked to some extent but it was so horrible to use.<br />DHCP worked perfectly in the previous build scapi posted at if that matters.</p><p>I don&#039;t know much, again, but I hope there ever comes an image where I can simply attach the WAN cable then configuring it to DHCP so it gets the public IP and I can use the router. I absolutely suck at bridging and all that stuff. At most I&#039;ve only done TUN/TAP on Softether VPN and static/dynamic configurations on Linux by hand. Even dnsmasq is slightly different on routers than it is on desktop.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303375">
				<div class="post-metadata">
					<div class="post-num">Post #442</div>
					<div class="post-author">ZyNTaX</div>
					<div class="post-datetime">
						11 Dec 2015, 23:59					</div>
				</div>
				<div class="post-content content">
					<p>Looks like you can build straight from trunk now also with working DSL firmware(Annex A or B) :-)<br />Just did it on mine, and its working like a charm :-)</p><p>Linux version 4.1.13 (openwrt@zvps) (gcc version 5.2.0 (OpenWrt GCC 5.2.0 r47867) ) #1 Fri Dec 11 18:16:29 CET 2015</p>											<p class="post-edited">(Last edited by <strong>ZyNTaX</strong> on 12 Dec 2015, 01:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303868">
				<div class="post-metadata">
					<div class="post-num">Post #443</div>
					<div class="post-author">strtfr</div>
					<div class="post-datetime">
						16 Dec 2015, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>Does someone have a complete nanddump available of the p2812hnu-f1?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304924">
				<div class="post-metadata">
					<div class="post-num">Post #444</div>
					<div class="post-author">jsface</div>
					<div class="post-datetime">
						24 Dec 2015, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Can somebody help me solve with a problem installing OpenWRT on a ZyXel P-2812HNU-F1?<br />I followed the procedure in the wiki.</p><p>I get the following boot error:</p><p>P-2812HNU-Fx # reset<br />ROM VER: 1.0.5<br />CFG 06<br />NAND<br />NAND Read OK</p><p>U-Boot SPL 2013.10-openwrt5 (Nov 18 2014 - 19:54:01)<br />SPL: initializing NAND flash<br />SPL: checking U-Boot image<br />SPL: loading U-Boot to RAM<br />SPL: decompressing U-Boot with LZO<br />SPL: jumping to U-Boot</p><br /><p>U-Boot 2013.10-openwrt5 (Nov 18 2014 - 19:54:01) P-2812HNU-Fx</p><p>Board: ZyXEL P-2812HNU-Fx<br />SoC:&nbsp; &nbsp;Lantiq VRX288 v1.1<br />CPU:&nbsp; &nbsp;500 MHz<br />IO:&nbsp; &nbsp; 250 MHz<br />BUS:&nbsp; &nbsp;250 MHz<br />BOOT:&nbsp; NAND<br />DRAM:&nbsp; 128 MiB<br />NAND:&nbsp; 128 MiB<br />*** Warning - bad CRC, using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ltq-eth<br />Hit any key to stop autoboot:&nbsp; 0<br />Wrong Image Format for bootm command<br />ERROR: can&#039;t get kernel image!<br />P-2812HNU-Fx #</p><p>bad CRC is the problem I think<br />I have tried the following:</p><p>&quot;nand bad&quot;showed two bad blocks<br />I could reduced to one bad block with &quot;nand scrub&quot;</p><p>After this I have repeated steps 1 - 6:<br />nand erase.chip<br />tftp 0x80700000 etc<br />nand write.e 0x80700000 etc</p><p>No errors reported</p><p>When I do power off and one I get the same boot error.</p><p>Can somebody help me what I can do next to solve the problem?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304938">
				<div class="post-metadata">
					<div class="post-num">Post #445</div>
					<div class="post-author">jsface</div>
					<div class="post-datetime">
						24 Dec 2015, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>Things get worse I think, we I power on the only I get is:</p><p>ROM VER: 1.0.5<br />CFG 06<br />NAND<br />NAND Read OK</p><p>Any help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308111">
				<div class="post-metadata">
					<div class="post-num">Post #446</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						18 Jan 2016, 19:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ZyNTaX wrote:</cite><blockquote><p>Looks like you can build straight from trunk now also with working DSL firmware(Annex A or B) :-)<br />Just did it on mine, and its working like a charm :-)</p><p>Linux version 4.1.13 (openwrt@zvps) (gcc version 5.2.0 (OpenWrt GCC 5.2.0 r47867) ) #1 Fri Dec 11 18:16:29 CET 2015</p></blockquote></div><p>Interesting. Is Wi-Fi working like it should? And can you test if it connects to WAN interface through DHCP client. Since this might be your only router for DSL I understand if you can&#039;t. The reason I did not do this is because of the fact that I&#039;m not aware of how to build these (probably requires a great deal of expertise) like in terms of EEPROM, fix the tx ring errors and the interfaces. Buffer filling up was the issue before when I bridged up interfaces to make both wi-fi and WAN DHCP work. It might be that I can just skip the ADSL interface entirely.</p><p>At least back with Barrier Breaker that scapi built everything worked smoothly in terms of GUI and I was able to actually use the router with bad Wi-Fi performance since the buffer was filling up. Now it&#039;s just a bunch of sh write errors and lua errors, nothing seems to update in the GUI not even memory or interfaces displays correctly, when I set WAN to DHCP it doesn&#039;t send a request to do so. Only success I had was to connect through WAN using the IP settings for my other router and access it through LAN, kind of like using it as a ethernet cable repeater. Which is not quite what I want. The router never showed up in Tomatos DHCP client list during this process, but it got a link on WAN.</p><p>Another thing is that I never changed U-Boot since I don&#039;t know if it is needed, is there a possibility it needs to be updated and the errors I&#039;m experiencing isn&#039;t included? I flashed the sysupgrade without keeping settings and tried both the ubifs and squashfs but still the same errors. As forgetmij said everything in the GUI was working fine with the image or am I mistaken? Scapi said he couldn&#039;t really test it out as his device got broken so who knows.</p><p>Maybe I should try stock, or some other non-OpenWRT firmware that works for this router. I see that ZyXel abandoned ever updating their firmware but maybe some ISPs that use it still do?<br />EDIT:<br />Managed to find these from Telenor updates last year in October BLN20 <a href="https://my.pcloud.com/publink/show?code=kZG1bLZd8hfozDY4Uz86fXOdW8Fi0MzpBbV">https://my.pcloud.com/publink/show?code … 8Fi0MzpBbV</a><br />Only one I can tell for sure works is the one which has attached a changelog, the others I don&#039;t know. Either way useless without the ISPs branded U-Boot. I think that if I could get that one installed I could at least use the device with DHCP WAN and Wi-Fi like I want. Last time my router died it appeared like it required external configuration files to be loaded onto the router for it to work properly when looking at the bootlogs.</p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 18 Jan 2016, 20:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308265">
				<div class="post-metadata">
					<div class="post-num">Post #447</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						20 Jan 2016, 00:50					</div>
				</div>
				<div class="post-content content">
					<p><strong>jsface</strong>,</p><p>Most probably:<br />You installed openWrt ok, but not the U-boot loader.</p><p>The Wiki setup is actually 2 steps:</p><p>- Replacement of factory U-Boot<br />- Installing OpenWrt</p><p>You have to UART boot the device again (i.e. short R17 &amp; power on, dont&#039;t use reset &amp; short R17 !)<br />CFG 04&nbsp; - instead of &#039;CFG06&#039; must be shown (!)<br />And follow &#039;Replacement of factory U-Boot&#039; as in Wiki</p><p>After a reboot it could be possible that openWrt won&#039;t start (only serial seen!).<br />Then you have to run &#039;printenv&#039; to check if settings of step 11 are &#039;set&#039; correctly:<br /></p><div class="codebox"><pre><code>setenv nboot &#039;nand read 0x80800000 0x60000 0x200000; bootm 0x80800000&#039;
setenv bootcmd &#039;run nboot&#039;
saveenv</code></pre></div><p>If not, set them again and retry.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308385">
				<div class="post-metadata">
					<div class="post-num">Post #448</div>
					<div class="post-author">courfazor</div>
					<div class="post-datetime">
						20 Jan 2016, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>So I attempted to build from trunk like forgetmij and ZyNTaX here did with no success. First build booted and the GUI was showing right stats compared to scapi pre-build on my F3 device, but I somehow broke several functions. Next time I tried it seems like my router doesn&#039;t even want to give me a lease on DHCP. I guess this is to be expected since I have no idea what I&#039;m doing, maybe I should go back to Chaos Calmer again, at least I got it to work and it got public IPs from WAN with dhcpcd? Anyone got any ideas?</p><p>EDIT:<br />So, after a lot of errors and what seems to be a kernel that shouldn&#039;t be used unless you are a developer I decided to give up and go back to Chaos Calmer. To my surprise everything has been going smoothly. I set up VLAN 2 as WAN port (eth0.2 as WAN port 5) selecting DHCP client and bridged it up: br-wan, br-lan, eth0/0.1/0.2. As for eeprom I put in RT3092.eeprom which I found in scapis git by googling. LAN-LAN, WAN-LAN works perfectly (you can just ignore tx ring full errors), problem is with WAN/LAN-Wi-Fi. Using N-protocol, 40 MHz channel width and max it out at 1 MB/s, and I&#039;m pretty sure that it should be capable of 300Mbps which is, in theory 37.5 MB/s. </p><p>Since the TX ring full error doesn&#039;t seem to affect WAN-LAN I wonder if I should change this to legacy/20MHz for wireless chip, or this might be a community driver that max out at 1 MB/s like my USB MediaTek Wi-Fi does on 4.1 (Windows driver working perfectly). The proprietary blobs is the reason DD-WRT and Shibby on my main router runs kernel 2.*, it doesn&#039;t have wireless drivers with kernel 3.*/4.* (DD). I&#039;d like to hear if you manage to get a better speed out of it. RT3092 is supported by the rt2800pci driver.</p>											<p class="post-edited">(Last edited by <strong>courfazor</strong> on 31 Jan 2016, 22:29)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310043">
				<div class="post-metadata">
					<div class="post-num">Post #449</div>
					<div class="post-author">jsface</div>
					<div class="post-datetime">
						2 Feb 2016, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>DGDodo,</p><p>Thanks for your reply, I saw your comment only now, sorry.<br />Before I retry with your information I have a question:<br />The provided files to replace the factory U-Boot are:</p><p>openwrt-lantiq-p2812hnufx_ram-u-boot.asc<br />openwrt-lantiq-p2812hnufx_ram-u-boot.img<br />openwrt-lantiq-p2812hnufx_nandtpl-u-boot.img</p><p>Conform the wiki the first file I have uploaded with Send File and the third file is uploaded with tftp.</p><p>But where is the second file for, it is not used in the wiki?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310085">
				<div class="post-metadata">
					<div class="post-num">Post #450</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						3 Feb 2016, 02:56					</div>
				</div>
				<div class="post-content content">
					<p><strong>jsface</strong>,</p><p>Np &amp; not quiet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> You actually need 5 files:</p><ul><li><p>.asc - is for UART booting the device</p></li><li><p>.img - device NAND boot-loader (u-boot)</p></li><li><p>uImage - Linux kernel for device</p></li><li><p>initramfs - kinda like file-system for openWrt (mtd)</p></li><li><p>.bin (UBI image) file with the complete build with packages etc.</p></li></ul><p>According all steps @ <a href="https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1">https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1</a></p><p>The 2 .img files you mentioned are for devices with NAND or NOR memory chips, so if your device has a NOR chip (mostly F3 devices) you need <em>openwrt-lantiq-p2812hnufx_ram-u-boot.img</em>, if your device has a NAND chip (F1) you need file <em>openwrt-lantiq-p2812hnufx_nandtpl-u-boot.img</em>. ( Anyone may correct me if I&#039;m wrong, but I only have F1 devices to test and only have used the nand file which works fine. )</p><p>In short, for a F1 device (NAND):<br /></p><ul><li><p>Serial attach a PC to the device, power it up with R17 shorten(ed).</p></li><li><p>With <em>CFG 02</em> on output, sent the .asc file to device (TeraTerm works great, although: don&#039;t forget the 1 ms char delay in terminal settings...)</p></li><li><p>Then u start with&nbsp; <em>Replacement of factory U-Boot - Step 1: Type in console</em> @ <a href="https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1">https://wiki.openwrt.org/toh/zyxel/p2812hnu-f1</a></p></li><li><p>until <em>Step 6</em> &amp;</p></li><li><p><strong>Installing OpenWrt</strong></p></li><li><p>Step 1. to 12</p></li></ul><p>Make sure you also read carefully: <a href="https://wiki.openwrt.org/toh/zyxel/p2812hnu-fx">https://wiki.openwrt.org/toh/zyxel/p2812hnu-fx</a></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 18 of 23</div><nav><ul><li><a href="viewtopic.php%3Fid=53511&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=16.html">16</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=17.html">17</a></li><li class="pagination-current"><span>18</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=19.html">19</a></li><li><a href="viewtopic.php%3Fid=53511&amp;p=20.html">20</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53511&amp;p=23.html">23</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>