<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Rasberry Pi 3 B: broadcom: brcmf_configure_wpaie: Invalid key mgmt inf</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p374227">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						22 Mar 2018, 02:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I&#039;m trying to set up the Radius 802.1x together with 802.11r on Raspberry pi 3 b </p><p>and I got this error message,&nbsp; when my option encryption settings are anything from below </p><p>wpa2+tkip+ccmp<br />wpa2+tkip+aes </p><p>Please advise how to tackle this issue. Is there a way to fix the brcmfmac driver? There could be a naming convention problem?</p><br /><p>Wed Mar 21 21:46:35 2018 daemon.warn hostapd: wlan0: Could not connect to kernel driver<br />Wed Mar 21 21:46:35 2018 daemon.err hostapd: Using interface wlan0 with hwaddr b8:27:eb:aa:aa:aa and ssid &quot;roaming&quot;<br />Wed Mar 21 21:46:35 2018 daemon.info hostapd: wlan0: RADIUS Authentication server 192.168.200.1:1812<br /><strong>Wed Mar 21 21:46:35 2018 kern.err kernel: [&nbsp; &nbsp;14.538059] brcmfmac: brcmf_configure_wpaie: Invalid key mgmt info</strong><br />Wed Mar 21 21:46:35 2018 kern.info kernel: [&nbsp; &nbsp;14.712784] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready<br />Wed Mar 21 21:46:35 2018 kern.info kernel: [&nbsp; &nbsp;14.721697] br-lan: port 2(wlan0) entered forwarding state<br />Wed Mar 21 21:46:35 2018 kern.info kernel: [&nbsp; &nbsp;14.729539] br-lan: port 2(wlan0) entered forwarding state<br />Wed Mar 21 21:46:35 2018 daemon.notice hostapd: wlan0: interface state COUNTRY_UPDATE-&gt;ENABLED<br />Wed Mar 21 21:46:35 2018 daemon.notice hostapd: wlan0: AP-ENABLED</p>											<p class="post-edited">(Last edited by <strong>arti107</strong> on 22 Mar 2018, 02:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374234">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						22 Mar 2018, 03:26					</div>
				</div>
				<div class="post-content content">
					<p>fully cycle of Radius </p><p>Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: IEEE 802.11: binding station to interface &#039;wlan0&#039;<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: IEEE 802.1X: old identity &#039;user1&#039; updated with User-Name from Access-Accept &#039;user1&#039;<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: IEEE 802.1X: decapsulated EAP packet (code=3 id=43 len=4) from RADIUS server: EAP Success<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: IEEE 802.1X: Sending EAP Packet (identifier 43)<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: WPA: sending 1/4 msg of 4-Way Handshake<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: WPA: received EAPOL-Key frame (2/4 Pairwise)<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb: WPA: sending 3/4 msg of 4-Way Handshake<br />Thu Mar 22 01:24:17 2018 daemon.info hostapd: wlan0: STA b0:70:2d:cb: IEEE 802.11: disassociated<br />Thu Mar 22 01:24:17 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: WPA: event 2 notification<br />Thu Mar 22 01:24:17 2018 daemon.info hostapd: wlan0: STA b0:70:2d:cb IEEE 802.11: disassociated<br />Thu Mar 22 01:24:21 2018 daemon.info hostapd: wlan0: STA b0:70:2d:cb IEEE 802.11: associated<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d WPA: event 1 notification<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d IEEE 802.1X: start authentication<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d WPA: start authentication<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d IEEE 802.1X: unauthorizing port<br />Thu Mar 22 01:24:21 2018 daemon.notice hostapd: wlan0: CTRL-EVENT-EAP-STARTED b0:70:2d<br />Thu Mar 22 01:24:21 2018 daemon.notice hostapd: wlan0: CTRL-EVENT-EAP-PROPOSED-METHOD vendor=0 method=1<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: Sending EAP Packet (identifier 148)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: received EAP packet (code=2 id=148 len=10) from STA: EAP Response-Identity (1)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:IEEE 802.1X: STA identity &#039;user1&#039;<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 64 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: decapsulated EAP packet (code=1 id=149 len=6) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: Sending EAP Packet (identifier 149)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: received EAP packet (code=2 id=149 len=161) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 1068 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: decapsulated EAP packet (code=1 id=150 len=1004) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: Sending EAP Packet (identifier 150)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: received EAP packet (code=2 id=150 len=6) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 205 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70: IEEE 802.1X: decapsulated EAP packet (code=1 id=151 len=147) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:IEEE 802.1X: Sending EAP Packet (identifier 151)Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2 IEEE 802.1X: received EAP packet (code=2 id=151 len=136) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 115 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb IEEE 802.1X: decapsulated EAP packet (code=1 id=152 len=57) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb IEEE 802.1X: Sending EAP Packet (identifier 152)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:cb IEEE 802.1X: received EAP packet (code=2 id=152 len=6) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 98 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.01 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d:IEEE 802.1X: decapsulated EAP packet (code=1 id=153 len=40) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: Sending EAP Packet (identifier 153)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: received EAP packet (code=2 id=153 len=41) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 132 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: decapsulated EAP packet (code=1 id=154 len=74) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: Sending EAP Packet (identifier 154)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: received EAP packet (code=2 id=154 len=95) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 140 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: decapsulated EAP packet (code=1 id=155 len=82) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: Sending EAP Packet (identifier 155)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: received EAP packet (code=2 id=155 len=37) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 104 bytes from RADIUS server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received RADIUS message<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: RADIUS: Received RADIUS packet matched with a pending request, round trip time 0.00 sec<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: decapsulated EAP packet (code=1 id=156 len=46) from RADIUS server: EAP-Request-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: Sending EAP Packet (identifier 156)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: STA b0:70:2d: IEEE 802.1X: received EAP packet (code=2 id=156 len=46) from STA: EAP Response-PEAP (25)<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Sending RADIUS message to authentication server<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Next RADIUS client retransmit in 3 seconds<br />Thu Mar 22 01:24:21 2018 daemon.debug hostapd: wlan0: RADIUS Received 167 bytes from RADIUS server</p>											<p class="post-edited">(Last edited by <strong>arti107</strong> on 22 Mar 2018, 03:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374236">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						22 Mar 2018, 03:38					</div>
				</div>
				<div class="post-content content">
					<p>output from Radius -X </p><p>964) eap_peap: Session established.&nbsp; Decoding tunneled attributes<br />(964) eap_peap: PEAP state send tlv success<br />(964) eap_peap: Received EAP-TLV response<br />(964) eap_peap: Success<br />(964) eap: Sending EAP Success (code 3) ID 7 length 4<br />(964) eap: Freeing handler<br />(964)&nbsp; &nbsp; &nbsp;[eap] = ok<br />(964)&nbsp; &nbsp;} # authenticate = ok<br />(964) # Executing section post-auth from file /etc/freeradius/3.0/sites-enabled/default<br />(964)&nbsp; &nbsp;post-auth {<br />(964)&nbsp; &nbsp; &nbsp;update {<br />(964)&nbsp; &nbsp; &nbsp; &nbsp;No attributes updated<br />(964)&nbsp; &nbsp; &nbsp;} # update = noop<br />(964)&nbsp; &nbsp;} # post-auth = noop<br /><strong>(964) Login OK: [user1/&lt;via Auth-Type = eap&gt;] (from client b827eb91fb17 port 0 cli B0-70-2D-mm-aa-cc)</strong><br />(964) Sent Access-Accept Id 98 from 192.168.200.1:1812 to 192.168.200.100:56390 length 0<br />(964)&nbsp; &nbsp;MS-MPPE-Recv-Key = 0x896e3897a6bf8cd7ba9c92d4331972b36564fe8a67de9174ea2e4c1d71ca5056<br />(964)&nbsp; &nbsp;MS-MPPE-Send-Key = 0x74a867b7bb07f1fae08ffb260e90f535fbb32158a056c59a9ba456c56dc9340b<br />(964)&nbsp; &nbsp;EAP-Message = 0x03070004<br />(964)&nbsp; &nbsp;Message-Authenticator = 0x00000000000000000000000000000000<br />(964)&nbsp; &nbsp;User-Name = &quot;user1&quot;<br />(964) Finished request<br />Waking up in 4.8 seconds.<br />(956) Cleaning up request packet ID 90 with timestamp +20377<br />(957) Cleaning up request packet ID 91 with timestamp +20377<br />(958) Cleaning up request packet ID 92 with timestamp +20377<br />(959) Cleaning up request packet ID 93 with timestamp +20377<br />(960) Cleaning up request packet ID 94 with timestamp +20377<br />(961) Cleaning up request packet ID 95 with timestamp +20377<br />(962) Cleaning up request packet ID 96 with timestamp +20377<br />(963) Cleaning up request packet ID 97 with timestamp +20377<br />(964) Cleaning up request packet ID 98 with timestamp +20377<br />Ready to process requests</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374580">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						27 Mar 2018, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>So radius wpa2 and wpa roaming works fine unless encryption setting is in &quot;mixed&quot; mode.</p><p>I cant get the WPA2-PSK FT to work ... hard to understand why. I start to think that Raspberry Pi3 just don&#039;t support this. It must be some software problem as WPA2 works just fine in other variants f.e as stand alone AP or in mentioned WPA2-EAP .</p><p>Any ideas PLEASE let me know. Here is my config, Im using build in wifi.</p><p>config wifi-device &#039;radio0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option phy &#039;phy0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11g&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;EN&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option country_ie &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;10&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option required_mode &#039;g&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option log_level &#039;0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config wifi-iface &#039;default_radio0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option device &#039;radio0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;lan&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;ap&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid &#039;roaming&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option wmm &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option nasid &#039;b827eb777a55&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption &#039;psk-mixed+ccmp&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;Pass1234&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option ft_psk_generate_local &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ieee80211r &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option mobility_domain &#039;e612&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; option short_gi_20 &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option short_gi_40 &#039;0&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option dsss_cck40 &#039;1&#039; </p><p>This happens when using encryption in non &quot;mixed&quot; mode for psk2.</p><br /><p>Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: reading /tmp/resolv.conf.auto<br />Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: using local addresses only for domain lan<br />Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: using nameserver 192.168.200.2#53<br />Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: using nameserver 192.168.200.2#53<br />Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: read /etc/hosts - 4 addresses<br />Tue Mar 27 18:13:12 2018 daemon.info dnsmasq[620]: read /tmp/hosts/dhcp.cfg02411c - 1 addresses<br />Tue Mar 27 18:13:14 2018 daemon.warn hostapd: wlan0: Could not connect to kernel driver<br />Tue Mar 27 18:13:14 2018 daemon.err hostapd: Using interface wlan0 with hwaddr b8:27:eb:77:7a:55 and ssid &quot;roaming&quot;<br />Tue Mar 27 18:13:14 2018 kern.err kernel: [&nbsp; &nbsp;13.828032] brcmfmac: brcmf_configure_wpaie: Invalid key mgmt info<br />Tue Mar 27 18:13:14 2018 kern.info kernel: [&nbsp; &nbsp;14.011830] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready<br />Tue Mar 27 18:13:14 2018 kern.info kernel: [&nbsp; &nbsp;14.020812] br-lan: port 2(wlan0) entered forwarding state<br />Tue Mar 27 18:13:14 2018 kern.info kernel: [&nbsp; &nbsp;14.028746] br-lan: port 2(wlan0) entered forwarding state<br />Tue Mar 27 18:13:14 2018 daemon.notice hostapd: wlan0: interface state COUNTRY_UPDATE-&gt;ENABLED<br />Tue Mar 27 18:13:14 2018 daemon.notice hostapd: wlan0: AP-ENABLED <br />Tue Mar 27 18:13:14 2018 daemon.notice netifd: Network device &#039;wlan0&#039; link is up<br />Tue Mar 27 18:13:14 2018 daemon.notice netifd: lan (515): udhcpc: performing DHCP renew<br />Tue Mar 27 18:13:15 2018 daemon.notice netifd: lan (515): udhcpc: sending renew<br />Tue Mar 27 18:13:15 2018 daemon.notice netifd: lan (515): udhcpc: lease of 192.168.200.100 obtained, lease time 604800<br />Tue Mar 27 18:13:16 2018 kern.info kernel: [&nbsp; &nbsp;16.026859] br-lan: port 2(wlan0) entered forwarding state</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p374595">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">arti107</div>
					<div class="post-datetime">
						28 Mar 2018, 02:02					</div>
				</div>
				<div class="post-content content">
					<p>Fortunately, I managed to solve my project by using external card AWSU036 N H. The config was correct, I used exactly same options for alfa card, and it works perfect. </p><p>Sadly, I think that openwrt must have some glitch in its software, in that mgmt_key_info handler function. <br />I will confirm this soon. Going to attempt usual hostapd +wpa_S on jessie. However, </p><p>Raspberry pi is capable to roam, It works perfectly fine with mixed and EAP encryption. I just dont want to believe that hardware is not working bcos of psk2 encryption.&nbsp; This can be closed.</p>											<p class="post-edited">(Last edited by <strong>arti107</strong> on 30 Mar 2018, 01:43)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>