<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 25 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=24.html">24</a></li><li class="pagination-current"><span>25</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p342787">
				<div class="post-metadata">
					<div class="post-num">Post #601</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						2 Nov 2016, 12:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>I see... thanks!<br />After your reply I went through the entire README and in the section &quot;other&quot; (I would suggest to better rename this section and write somewhere clearly that the server ip address is 192.168.1.2) I read:[...]</p></blockquote></div><p>I will make Wiki and describe it better as soon as I have some free time, I have just returned from my holidays.</p><div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>Could you please help me in how use the reset button? I mean: router off, power up while holding the reset button for the above duration, till I get the netconsole output?</p></blockquote></div><p>Power up, then press and hold button (you can power up with button pressed, but that will also set default/safe clocks). There will be one LED blink during network initialization and just after that you will see all LEDs blinking ~once per second. Hold the button for at least 7 blinks (excluding one blink during network initialization) and then try to access U-Boot CLI over netconsole.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342788">
				<div class="post-metadata">
					<div class="post-num">Post #602</div>
					<div class="post-author">Menion</div>
					<div class="post-datetime">
						2 Nov 2016, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much Pepe</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342959">
				<div class="post-metadata">
					<div class="post-num">Post #603</div>
					<div class="post-author">Menion</div>
					<div class="post-datetime">
						3 Nov 2016, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi Pepe<br />I have tried, it works now<br />I have flashed the uboot embedded in the ready BB image tagged as 2014-11-19 release on a WDR3600 and a couple of TL841N V8.<br />Following refers to the WDR3600<br />The LED sequence is a little bit different, what I see is:</p><p>1) All led on for about one second, eccept the 5Ghz wireless<br />2) Power, star and 2.4Gh wireless led on<br />3) Led of the connected switch port turn on for one second<br />4) Led off<br />5) Start of operwrt/lede (if I press here the reset button I can enter failsafe)</p><p>If at stage 2 I press and keep pressed the reset button, something happens, the star and 2.4Ghz led blink at 1 sec for 6 time (7 including the first power on), the power and connected switch port turn on, I&#039;m in uboot now, netconsole works, but httpd server must be started manually<br />I wanted to upgrade uboot, but I&#039;m little doubious about the uboot_upg env script:</p><div class="codebox"><pre><code>uboot_addr=0x9F000000
uboot_name=uboot.bin
uboot_size=0x10000
uboot_upg=if ping $serverip; then tftp $loadaddr $uboot_name &amp;&amp; if itest.l $filesize == $uboot_size; then erase $uboot_addr +$filesize &amp;&amp; cp.b $loadaddr $uboot_addr $filesize &amp;&amp; echo OK!; else echo ERROR! Wrong file size!; fi; else ERROR! Server not reachable!; fi
firmware_addr=0x9F020000</code></pre></div><p>The expected uboot size is set to 64kb, but the images on your server are of 123kb. I know the in the image, only the first 64kb are occupied by uboot, then there are the writable env variables and the last 5kb of the 128kb are the ART sector, but with this 123kb image I guess the script will fail, right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342988">
				<div class="post-metadata">
					<div class="post-num">Post #604</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						4 Nov 2016, 09:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>I have flashed the uboot embedded in the ready BB image tagged as 2014-11-19 release on a WDR3600 and a couple of TL841N V8.[...]</p></blockquote></div><p>It&#039;s really, really old version, without writable environment support and 64 KB image limit on TP-Link devices.</p><div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>Following refers to the WDR3600<br />The LED sequence is a little bit different, what I see is:[...]</p></blockquote></div><p>That&#039;s normal, I don&#039;t control LEDs connected directly to external Ethernet switch chip on WDR3600 and WDR4300.</p><div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>The expected uboot size is set to 64kb, but the images on your server are of 123kb. I know the in the image, only the first 64kb are occupied by uboot, then there are the writable env variables and the last 5kb of the 128kb are the ART sector, but with this 123kb image I guess the script will fail, right?</p></blockquote></div><p>If you still have there my BB image, you can upload new U-Boot image and use the same script.</p><p>But... there is some bug with clocking on AR9344 (<a href="https://github.com/pepe2k/u-boot_mod/issues/128">https://github.com/pepe2k/u-boot_mod/issues/128</a>), so it would be better to wait for fix as it hurts main time clock on the router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342990">
				<div class="post-metadata">
					<div class="post-num">Post #605</div>
					<div class="post-author">Menion</div>
					<div class="post-datetime">
						4 Nov 2016, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi Pepe<br />Ok I&#039;ll wait. So I have to skip the uboot_upg script in this uboot version, right?<br />I perfectly understand the procedure to manually update uboot within uboot itself, so dump 128kb (0x20000) from flash, offset 0x0, to ram (normally 0x80800000), tftpboot the new uboot image to the same ram location, in order to merge the last 5kb of the old flash content with the new uboot, and then erase the 128kb of flash and write the, merged, 128kb of data from ram to flash.<br />But just a question: is it working with this old uboot version? Or some more adaptation are needed?<br />Bye</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342991">
				<div class="post-metadata">
					<div class="post-num">Post #606</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						4 Nov 2016, 10:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>So I have to skip the uboot_upg script in this uboot version, right?</p></blockquote></div><p>Yes, it won&#039;t allow you to use image bigger than 64 KB.</p><div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>I perfectly understand the procedure to manually update uboot within uboot itself, so dump 128kb (0x20000) from flash, offset 0x0, to ram (normally 0x80800000), tftpboot the new uboot image to the same ram location, in order to merge the last 5kb of the old flash content with the new uboot, and then erase the 128kb of flash and write the, merged, 128kb of data from ram to flash.</p></blockquote></div><p>Exactly!</p><div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>But just a question: is it working with this old uboot version? Or some more adaptation are needed?</p></blockquote></div><p>Yes, it will work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343007">
				<div class="post-metadata">
					<div class="post-num">Post #607</div>
					<div class="post-author">Menion</div>
					<div class="post-datetime">
						4 Nov 2016, 13:47					</div>
				</div>
				<div class="post-content content">
					<p>Last question: since it will involve several steps, is it safe to do so in netconsole? I mean, safe as it can be upgrade the bootloader, I just want to avoid that some operation (erase, flash) could interfere with the networking</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343009">
				<div class="post-metadata">
					<div class="post-num">Post #608</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						4 Nov 2016, 14:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Menion wrote:</cite><blockquote><p>Last question: since it will involve several steps, is it safe to do so in netconsole? I mean, safe as it can be upgrade the bootloader, I just want to avoid that some operation (erase, flash) could interfere with the networking</p></blockquote></div><p>Honestly, I haven&#039;t tested this approach, but I don&#039;t see any reason why it might cause this kind of problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p355888">
				<div class="post-metadata">
					<div class="post-num">Post #609</div>
					<div class="post-author">Deoptim</div>
					<div class="post-datetime">
						9 Apr 2017, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>New Datasheet for QCA9558:<br /><a href="https://github.com/Deoptim/atheros/raw/master/QCA9558_nowatermark.pdf">https://github.com/Deoptim/atheros/raw/ … ermark.pdf</a></p><p>Also new datasheet for QCA9531 has version 2.0:<br /><a href="https://github.com/Deoptim/atheros/raw/master/QCA9531_V2.0_nowatermark.pdf">https://github.com/Deoptim/atheros/raw/ … ermark.pdf</a></p>											<p class="post-edited">(Last edited by <strong>Deoptim</strong> on 9 Apr 2017, 22:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359640">
				<div class="post-metadata">
					<div class="post-num">Post #610</div>
					<div class="post-author">AnteLo</div>
					<div class="post-datetime">
						2 Jun 2017, 22:19					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://i64.tinypic.com/j0csjp.png" alt="http://i64.tinypic.com/j0csjp.png" /></span><br />I get this when I try to install it on my WR842N v3 router<br />Did I done something wrong???</p>											<p class="post-edited">(Last edited by <strong>AnteLo</strong> on 3 Jun 2017, 09:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p359988">
				<div class="post-metadata">
					<div class="post-num">Post #611</div>
					<div class="post-author">user5077</div>
					<div class="post-datetime">
						8 Jun 2017, 19:42					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?id=33205">https://forum.openwrt.org/viewtopic.php?id=33205</a>&nbsp; That guy modded u-boot 1.3.0 to make it work with atheros SOCs. I wonder if it could be done to QCA SOC routers as well, I understand newest u-boot takes too much space on flash, but 1.3.0 would probably fit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360003">
				<div class="post-metadata">
					<div class="post-num">Post #612</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						8 Jun 2017, 21:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>user5077 wrote:</cite><blockquote><p><a href="https://forum.openwrt.org/viewtopic.php?id=33205">https://forum.openwrt.org/viewtopic.php?id=33205</a>&nbsp; That guy modded u-boot 1.3.0 to make it work with atheros SOCs. I wonder if it could be done to QCA SOC routers as well, I understand newest u-boot takes too much space on flash, but 1.3.0 would probably fit.</p></blockquote></div><p>Basic support for QC/A WiSoC is already in mainline U-Boot: <a href="http://git.denx.de/?p=u-boot.git;a=tree;f=arch/mips/mach-ath79;h=94056ba072dc55db82a99903bc80adfe016bddd3;hb=HEAD">http://git.denx.de/?p=u-boot.git;a=tree … d3;hb=HEAD</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360916">
				<div class="post-metadata">
					<div class="post-num">Post #613</div>
					<div class="post-author">jongerenchaos</div>
					<div class="post-datetime">
						24 Jun 2017, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I installed the version u-boot_mod__tp-link_tl-wdr3600__20170510__git_master-0c183583.bin on my TP-link router.</p><p>After this i&#039;ll try to install/test a SOPHOS uimage version (with the same hardware) to this device. <br />File info:<br />AP15.uimage: u-boot legacy uImage, MIPS OpenWrt Linux-3.18.11, Linux/MIPS, OS Kernel Image (gzip), 6880877 bytes, Tue Feb 21 11:46:07 2017, Load Address: 0x80060000, Entry Point: 0x80060000, Header CRC: 0x78E832C4, Data CRC: 0x3DD99FCA</p><p>When i try to boot this image i get:<br />u-boot&gt; bootm<br />Booting image from 0x80800000...</p><p>&nbsp; &nbsp;Image name:&nbsp; &nbsp; MIPS OpenWrt Linux-3.18.11<br />&nbsp; &nbsp;Build date:&nbsp; &nbsp; 2017-02-21 09:40:42 UTC<br />&nbsp; &nbsp;Architecture:&nbsp; MIPS<br />&nbsp; &nbsp;OS/image type: Linux Kernel<br />&nbsp; &nbsp;Compression:&nbsp; &nbsp;unknown<br />&nbsp; &nbsp;Data size:&nbsp; &nbsp; &nbsp;6.8 MB (7132205 bytes)<br />&nbsp; &nbsp;Load address:&nbsp; 0x80060000<br />&nbsp; &nbsp;Entry point:&nbsp; &nbsp;0x80060000</p><p>&nbsp; &nbsp;Header CRC...&nbsp; OK!<br />&nbsp; &nbsp;Data CRC...&nbsp; &nbsp; skipped</p><p>Stopping network... OK!<br />## Error: unsupported compression type &#039;unknown&#039;!</p><p>So i think there is no gzip compiled in the uboot source. Is that this issue and can you resolve this?</p>											<p class="post-edited">(Last edited by <strong>jongerenchaos</strong> on 24 Jun 2017, 15:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360920">
				<div class="post-metadata">
					<div class="post-num">Post #614</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						24 Jun 2017, 17:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jongerenchaos wrote:</cite><blockquote><p>I installed the version u-boot_mod__tp-link_tl-wdr3600__20170510__git_master-0c183583.bin on my TP-link router.</p><p>After this i&#039;ll try to install/test a SOPHOS uimage version (with the same hardware) to this device. <br />File info:<br />AP15.uimage: u-boot legacy uImage, MIPS OpenWrt Linux-3.18.11, Linux/MIPS, OS Kernel Image (gzip), 6880877 bytes, Tue Feb 21 11:46:07 2017, Load Address: 0x80060000, Entry Point: 0x80060000, Header CRC: 0x78E832C4, Data CRC: 0x3DD99FCA</p></blockquote></div><p>What is SOPHOS?</p><div class="quotebox"><cite>jongerenchaos wrote:</cite><blockquote><p>So i think there is no gzip compiled in the uboot source.</p></blockquote></div><p>Exactly.</p><div class="quotebox"><cite>jongerenchaos wrote:</cite><blockquote><p>Is that this issue and can you resolve this?</p></blockquote></div><p><a href="https://github.com/pepe2k/u-boot_mod/issues">https://github.com/pepe2k/u-boot_mod/issues</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363146">
				<div class="post-metadata">
					<div class="post-num">Post #615</div>
					<div class="post-author">jongerenchaos</div>
					<div class="post-datetime">
						4 Aug 2017, 13:08					</div>
				</div>
				<div class="post-content content">
					<p>Sophos is a firewall system where you can also manage your sophos AP&#039;s. These AP&#039;s working with a openwrt version as you can see here: <a href="https://community.sophos.com/products/unified-threat-management/f/wireless-security/56598/accesspoint-howto-troubleshoot-on-console">https://community.sophos.com/products/u … on-console</a></p><p>Some of these AP&#039;s <a href="http://www.enterpriseav.com/Secure-Wi-Fi.asp">http://www.enterpriseav.com/Secure-Wi-Fi.asp</a> works with the same chipset as some other vendors. Therefore it must be possible to flash this sophos firmware to another device i think.</p>											<p class="post-edited">(Last edited by <strong>jongerenchaos</strong> on 4 Aug 2017, 13:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364599">
				<div class="post-metadata">
					<div class="post-num">Post #616</div>
					<div class="post-author">juniorjpdj</div>
					<div class="post-datetime">
						30 Aug 2017, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi pepe,<br />I flashed your u-boot (latest version from your build server) to my wr841n v9.1.<br />It boots great, but when I try to enter web UI I can&#039;t get it working.<br />I&#039;m turning router off with power button, pressing reset button, turning it back on, holding about 5 seconds.<br />I tried to connect ethernet to every lan and wan ports.<br />Router probably stops at u-boot like it should, but network stack seems not to work.<br />Ethernet leds are not blinking or shining.</p><p>I don&#039;t have USB-&gt;TTL cable, so I can&#039;t tell you what&#039;s on serial <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364600">
				<div class="post-metadata">
					<div class="post-num">Post #617</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						30 Aug 2017, 15:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>juniorjpdj wrote:</cite><blockquote><p>Hi pepe,<br />I flashed your u-boot (latest version from your build server) to my wr841n v9.1.<br />It boots great, but when I try to enter web UI I can&#039;t get it working.<br />I&#039;m turning router off with power button, pressing reset button, turning it back on, holding about 5 seconds.<br />I tried to connect ethernet to every lan and wan ports.<br />Router probably stops at u-boot like it should, but network stack seems not to work.<br />Ethernet leds are not blinking or shining.</p><p>I don&#039;t have USB-&gt;TTL cable, so I can&#039;t tell you what&#039;s on serial <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p></blockquote></div><p>Power up router with cable in LAN, press reset button, wait for first LED blink, then count 3-4 blinks and release the button. In latest version, LEDs should be blinking if the router is in web recovery mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364606">
				<div class="post-metadata">
					<div class="post-num">Post #618</div>
					<div class="post-author">juniorjpdj</div>
					<div class="post-datetime">
						30 Aug 2017, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, got it working.<br />I was pressing button before powering on router, when tried like you told me to it worked first time <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>juniorjpdj</strong> on 12 Sep 2017, 01:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365239">
				<div class="post-metadata">
					<div class="post-num">Post #619</div>
					<div class="post-author">juniorjpdj</div>
					<div class="post-datetime">
						12 Sep 2017, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve seen, you was doing something for 1043nd.<br />Is it still valid?<br />And if yes, which hw versions will it cover?</p>											<p class="post-edited">(Last edited by <strong>juniorjpdj</strong> on 29 Sep 2017, 03:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365356">
				<div class="post-metadata">
					<div class="post-num">Post #620</div>
					<div class="post-author">hurjup</div>
					<div class="post-datetime">
						14 Sep 2017, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys</p><p>I&#039;m struggling with this u-boot mod on my tl-wdr4300 v1.4.<br />I&#039;ve successfully used the &#039;u-boot-upgrade&#039; script of the 2014-11-19 release (here I see 64KiB images all around, which is confusing). After 30+ tries I finally managed to reach the web-failsafe interface. <a href="http://192.168.1.1/uboot.html">http://192.168.1.1/uboot.html</a> didn&#039;t accept the 123KiB image &quot;u-boot_mod__tp-link_tl-wdr43x0_v1__20170831__git_master-b29f18ad.bin&quot; downloaded from <a href="http://projects.dymacz.pl/:">http://projects.dymacz.pl/:</a><br /></p><div class="codebox"><pre><code>Something went wrong during update
Probably you have chosen wrong file (TOO BIG OR TOO SMALL) or you were trying to update ART on device with
unknown FLASH type (and size) which is not allowed. Please, try again or contact with the author of this
modification. You can also get more information during update in U-Boot console.</code></pre></div><p>At this point, instructions are sort of unclear.<br />Could anyone give a hint how to upgrade then u-boot mod to the latest available version? (Preparing my own 123+5KiB image in &quot;the dd-wrt way&quot; of the official page, and using the 2014-11-19 release might work. The only concern is if my router will boot after mtd-ing this image. It is also suspicious, that normally <a href="http://192.168.1.1/uboot.html">http://192.168.1.1/uboot.html</a> should do this.)</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p365658">
				<div class="post-metadata">
					<div class="post-num">Post #621</div>
					<div class="post-author">hurjup</div>
					<div class="post-datetime">
						21 Sep 2017, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Meanwhile I&#039;ve read somewhere that the 2014-11-19 release supports only the 64KiB images</p><p>Restating my previous assumption: Preparing my own 123+5KiB image in &quot;the dd-wrt way&quot; of the official page, and using the Barrier Breaked image with unlocked firmware partition might work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p366082">
				<div class="post-metadata">
					<div class="post-num">Post #622</div>
					<div class="post-author">juniorjpdj</div>
					<div class="post-datetime">
						29 Sep 2017, 03:44					</div>
				</div>
				<div class="post-content content">
					<p>You don&#039;t need to use unlocked image, just use mtd-rw (in repo of LEDE and OpenWRT).<br />Also you can use u-boot-upgrade script, modify it or just read it - it will learn you how to flash u-boot <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>Github links (add github[dot]com at front):<br />latest version of helpful script: pepe2k/u-boot_mod/blob/master/target_util/u-boot-upgrade<br />mtd-rw (eg. how-to-use example is available here): jclehner/mtd-rw</p>											<p class="post-edited">(Last edited by <strong>juniorjpdj</strong> on 29 Sep 2017, 03:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p366083">
				<div class="post-metadata">
					<div class="post-num">Post #623</div>
					<div class="post-author">juniorjpdj</div>
					<div class="post-datetime">
						29 Sep 2017, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>I found fork which adds 1043nd v1 support.<br />Pepe, can you do something with it?</p><p>ranma/u-boot_mod/tree/tl-wr1043nd</p><p>I don&#039;t really know what can I do to help you apply changes to current branch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p370863">
				<div class="post-metadata">
					<div class="post-num">Post #624</div>
					<div class="post-author">miazza</div>
					<div class="post-datetime">
						13 Jan 2018, 23:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AnteLo wrote:</cite><blockquote><p>I get this when I try to install it on my WR842N v3 router<br />Did I done something wrong???</p></blockquote></div><p>I have the same issue.<br />I have installed the latest openwrt-15.05.1-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin for my MR3020 but I cannot upgrade the u-boot:</p><p>-ash: u-boot-upgrade: not found</p><br /><br /><p>Probably I miss something but I do tot understand what ...<br />... on site it says :<br />Starting from official release &quot;2014-11-19&quot;, you will find ready OpenWrt images, with unlocked u-boot partition, embedded U-Boot image and dedicated small script for easy update process inside release tarball. All you need to do is download last release, select proper OpenWrt image for your device, install it and invoke one command: u-boot-upgrade<br />???? i am wired.</p><p>Please assist me in this silly question...</p>											<p class="post-edited">(Last edited by <strong>miazza</strong> on 13 Jan 2018, 23:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372414">
				<div class="post-metadata">
					<div class="post-num">Post #625</div>
					<div class="post-author">xavtronic</div>
					<div class="post-datetime">
						18 Feb 2018, 11:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I try to update the uboot on wr703 with the last version.</p><p>I have upload your script &quot;u-boot-upgrade&quot; on /tmp and the right files (uboot.bin and md5sum) into /etc/u-boot_mod directory.</p><p>I have install the package &quot;opkg install kmod-mtd-rw&quot; and the device work on last Openwrt 17.01 (Lege)</p><p>I have this message at the end of your script execution:</p><div class="codebox"><pre><code>=======================================================
DISCLAIMER: you are using this script at your own risk!

The author of U-Boot modification and this script takes
no responsibility for any of the results of using them.

     Updating U-Boot is a very dangerous operation
   and may damage your device! You have been warned!
=======================================================

-----&gt; Do you want to continue (type &#039;yes&#039; or &#039;no&#039;)? yes

[ ok ] Found U-Boot image file: &#039;u-boot_mod__tp-link_tl-wr703n_v1__20180204__git_master-4fbf43bf.bin&#039;

-----&gt; Do you want to use this file (type &#039;yes&#039; or &#039;no&#039;)? yes

[ ok ] MD5 checksum of new U-Boot image file is correct
[ ok ] Backup of /dev/mtd0 successfully created

-----&gt; Do you want to store backup (recommended) in &#039;/etc/u-boot_mod/backup/&#039; (type &#039;yes&#039; or &#039;no&#039;)? no

[info] Partition &#039;/dev/mtd0&#039; is writable
[ ok ] New U-Boot image successfully combined with backup file
[info] New U-Boot image is ready to be written into FLASH

-----&gt; Do you want to continue (type &#039;yes&#039; or &#039;no&#039;)? yes

[warn] Could not write new U-Boot image into FLASH
[ ok ] Original &#039;/dev/mtd0&#039; partition content was not changed</code></pre></div><p>Do you have any ideas?</p><p>BR, Xavier</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 25 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=23.html">23</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=24.html">24</a></li><li class="pagination-current"><span>25</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>