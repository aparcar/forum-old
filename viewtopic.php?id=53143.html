<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Broadcom 47xx wl0 won&#039;t work on BB.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p249313">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						5 Oct 2014, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>As it says on the title, I don&#039;t know how this managed to get past the developers nor how this managed to even get to a release.&nbsp; I guess no one uses a broadcom 47xx based wireless router. But anyway onto the details.</p><p>I have an asus rt-n16, and I tried to upgrade to BB, and it refuses to work. I installed all of the packages supplied by the unofficial build, I used wl, installed the modules followed the wiki. And nothing. I always repeatedly get the same messag.e</p><p>wl0 type broadcom not supported. Which makes _zero_ sense since the unofficial build seemingly uses the same driver and it works AOK but the release version? Nope, it refuses to work. All I have is a radio wireless device and it only does 802.11b which is more than enough for my home connection but still it&#039;s not what the router is supposed to be able to do (n). I don&#039;t know why this is going on, and I searched the googles and I can&#039;t find anything, the bug was apparently closed, so I guess somone compiling it themselves it&#039;ll run but the released images don&#039;t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249324">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						6 Oct 2014, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>I would file a formal ticket, but with a whole lot less attitude if you want to increase the chance that the developers, who do this FOR FREE, to actually fix it or help you. Some logs and real detail on what exactly you&#039;ve tried already would be helpful too.</p><p>Since Broadcom does not release full source for their drivers, it can&#039;t be as well supported on this OPEN platform.</p><p>*edit* - also try the suggestions in this thread, especially the post by Chimaira today:<br /><a href="https://forum.openwrt.org/viewtopic.php?id=52367">https://forum.openwrt.org/viewtopic.php?id=52367</a></p><p>If that works for you, please update the wiki so future users will not have the same problem.</p>											<p class="post-edited">(Last edited by <strong>drawz</strong> on 6 Oct 2014, 01:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249353">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						6 Oct 2014, 08:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>133794m3r wrote:</cite><blockquote><p>I installed all of the packages supplied by the unofficial build, I used wl, installed the modules followed the wiki. And nothing. I always repeatedly get the same messag.e</p><p>wl0 type broadcom not supported.</p></blockquote></div><p>No logs provided, no configs, no installed packages and I have no crystal ball around.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249500">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						7 Oct 2014, 06:30					</div>
				</div>
				<div class="post-content content">
					<p>OK so I don&#039;t know why I didn&#039;t even post the reply like I was hoping that I did. I&#039;ll try to reflash it tomorrow with all of the new items.</p><p>What configs do you want? the wireless config?</p><p>And the packages, in csv, raw dump what?</p><p>edit: Also about these &#039;crappy&#039; closed source systems, I would&#039;ve prefered to have gotten a wireless router that would&#039;ve given me full freedom, and also had 64mb+ of ram, 16MB+ of flash, and a 400mhz+ cpu clock speed, and that also wasn&#039;t insanely expensive. I saw rt-n16 was on the AOK list, plus since they were releasing all code I figured it&#039;d be a semi-easy way to get it to go.</p><p>I do wish it&#039;d be a simpler thing, but i have to deal with it. I started using debian way before it was a &quot;easy&quot; installation and it involved tons of forums, hours on irc all to get the thing&#039;s wireless to work(similar situation but different-ish). So I have dealt with it in the past, and it&#039;s a part of life.</p>											<p class="post-edited">(Last edited by <strong>133794m3r</strong> on 7 Oct 2014, 06:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249508">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						7 Oct 2014, 08:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>133794m3r wrote:</cite><blockquote><p>What configs do you want? the wireless config?</p></blockquote></div><p>Will be a good beginning</p><div class="quotebox"><cite>133794m3r wrote:</cite><blockquote><p>And the packages, in csv, raw dump what?</p></blockquote></div><p>Just tell us exactly which <strong>extra</strong> packages did you install. It should be short list.</p><p>And don&#039;t forget about the boot log!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249550">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						7 Oct 2014, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>really the wiki for this device says &quot;Barrier Breaker release have <strong>almost</strong> full support.&quot; There are many better choices, although not many with 32MB flash. Why do you need so much flash? I&#039;ll suggest again selling your RT-N16 and buying a TP-Link WDR3600 (8mb flash/128mb ram) or D-Link DIR-835 (16mb flash/128mb ram). The Netgear WNDR4300/WNDR3700v4 is a bit more expensive but has 128mb NAND flash. You&#039;ll probably break even and have something fully compatible with OpenWrt. Or keep the RT-N16 and use Tomato/DD-WRT/Merlin which support it better. </p><p>What exactly do you want out of open source (or semi open) firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249621">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						7 Oct 2014, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>For it to work, and let me add/remove features as I wish. I am using openwrt because I don&#039;t like ddwrt&#039;s motto of doing what oracle does with mysql. Where they hide core features behind a paywall, and put drm into open source.</p><p>That&#039;s it really, I want it to work, and I want to be able to add things as I feel like it, ala maybe dlna server, or smb or something.</p><p>From the wiki BB only lacked simple &quot;polish&quot; things like the wifi led working correctly.</p><p>Also I&#039;ve had it for long since past the 30 days return period/45 days in some of the better places so I&#039;m kinda stuck with it rightnow.</p><p>I basically saw that it was pretty much supported on openwrt(just had to change out wireless drivers as I&#039;ve had to do in teh past with debian. Including backporting a kernel so I figured it wouldn&#039;t be a huge deal).</p><p>As far as the flash memory, I don&#039;t trust flash memory at all, and I&#039;d much rather have way more than I need rather than way too little. Also the JFFS2 system are you guys also using rtime or whatever it&#039;s called to increase the compression ratio?</p>											<p class="post-edited">(Last edited by <strong>133794m3r</strong> on 7 Oct 2014, 22:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249644">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						8 Oct 2014, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>It sounds like you are asking for pretty basic stuff - have you tried Tomato or MerlinWRT? Those are at least reasonably open with no paywall or DRM (but proprietary closed-source Broadcom drivers). The bottom line is that Broadcom is not as well supported and the wiki does state that it requires some work to get proprietary drivers working. You&#039;re in the midst of trying to do that work, but as you can see, most people here don&#039;t run on the Broadcom platform, likely due to poor support from closed-source drivers.</p><p>I realize you&#039;re past your return period - I was two with that exact router. Used Tomato on it very happily in fact. I wanted to switch to OpenWrt for fq_codel based QoS. I realized the RT-N16 was not well supported, so I sold it on ebay and bought a D-Link DIR-835 in an essentially break even deal. It was totally worth it to me. I even got dual-band wireless in the process.</p><p>By the way, there are people here that have flashed their routers hundreds if not thousands of times with no issues related to flash. This is not the cheap MLC/TLC NAND in SD cards or even SSDs. It is very durable SLC and is unlikely to fail on you during the lifetime of your router. There is no wear leveling here, so having more flash does not make it more durable. There was another thread on this recently.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249667">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						8 Oct 2014, 06:45					</div>
				</div>
				<div class="post-content content">
					<p>well about it, I knew that debian wasn&#039;t so inline with closed source drivers(I had a laptop with a nvidia gpu and intel nic) so I worked my way around it. Also is it common knowledge for the openwrt QoS engine to eat up tons of cpu when doing pretty simple rules?</p><p>For exmaple, I have it setup to prioritize http(s), and to put sony/microsoft download ports at lower than normal priority and it was normally eating up ~70-80% cputime on it and my connection wasn&#039;t remotely fast, it&#039;s only a 5down,0.6 up connection. So I wouldn&#039;t have imagined this would&#039;ve been the case. </p><p>The router&#039;s box said that it could handle 300k connections at once so I figured it&#039;d be an OK router for me to use. I even got a different one because my last one would never use the second dns server and my ISP was doing some shady stuff like redirecting amazon to give them affiliate credit so I was using other DNSes not from google/other big name tracking companies so it wouldn&#039;t work OK for me. I do know that my phone comany&#039;s DSL router still is going to have to be reset every couple of months or so due to how little ram that it has. My ISP is moving up the connection speeds again due to the FCC&#039;s pot of cash requiring 10Mb/s for them to get the cash so I&#039;m sure we&#039;ll be getting that soon but still I am not holding my breath since it took almost a year after it was started to get the 512k dsl to me once it got to the nearest town.</p><p>Also I know that the nand flash in routers is much much higher quality than anything else out there, but there are still going to be bad blocks even from the factory there&#039;s going to be at least a few that aren&#039;t completely 100%.</p><br /><br /><p>P.S. Reason for this one was it was on sale, and money was tight and I wanted to get something that seemed to work on openwrt(realized after my previous router that you have to make sure on it) since cash flow is not readily available at the current time for a multitude of reasons.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250083">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						11 Oct 2014, 02:12					</div>
				</div>
				<div class="post-content content">
					<p>Just for the record, I have two RT-16N since more than one year and I love them, never let me down.</p><p>They are running my favorite firmware, you guessed it, openwrt of course, which is the only one I can tailor to my specific needs.</p><p>But my routers are very busy, one is at my company and the other at home, connected by openvpn, both actively running proftpd and above all, they both run asterisk connected by IAX2 with seven extensions, one landline and six voip providers. They are really busy but don&#039;t complain.</p><p>Concerning broadcom wifi, the main concern here, they manage more than a dozen clients.</p><p>I was using b43 for a long time but about two weeks ago I decide to try brcmsmac because I detected some glitches that, without deep investigation, I thought could be due to the driver. So I recompiled the trunk, which is always my source, to use brcmsmac only to find that my download speed&nbsp; came down to about 8 Mbps.</p><p>So, again make menuconfig and changed the driver to the closed source (oh, well...) broadcom-wl, recompiled, flashed and it&#039;s now working on both routers at full speed.</p><p>The only purpose of my post is to say that not only the unbeatable openwrt builds increadibly easy from trunk, but also that RT-16N is an excellent router and broadcom wifi works with the three drivers I&#039;ve used.</p><p>I hope my testimony is useful to the discussion.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253787">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						10 Nov 2014, 06:02					</div>
				</div>
				<div class="post-content content">
					<p>I guess i&#039;ll try to do the build then to see if I can get it to work, I forgot to go back and re-read your information. I&#039;ll try it then since I was only able to get the prebuilt firmware to work with my router and have been dealing iwth it basically. So then you just compiled from trunk and then built the firmware with the drivers in it and it worked? Have you tried to do it from the released ones? Because for some reason it doesn&#039;t run for me and it complains as I said that the thing never works. I&#039;d much rather have a released version of openwrt if I can but if trunk seems to work out better, I&#039;ll definitely try to compile it tomorrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269818">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						24 Mar 2015, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to come back almost six months afters; I forgot to subscribe the topic.</p><p>Yes, basically that&#039;s it. I always use trunk with brcm47xx/mips74k and broadcom wl proprietary, make defconfig, check the additional packages I need, and compile.</p><p>Oh, very important, I have to patch the source of trx.c found in tools/firmware-utils/src/trx.c<br /></p><div class="codebox"><pre><code>-#define TRX_MAX_LEN    0x720000
+#define TRX_MAX_LEN    0x1F20000</code></pre></div><p>to adjust for the size of flash memory in this router which is 32MB. If you don&#039;t do this and use a lot of software as I do (complete asterisk), then it won&#039;t fit the 16MB defined in trx.c. There&#039;s probably a better way to do it, but I never found it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286700">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">133794m3r</div>
					<div class="post-datetime">
						7 Aug 2015, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>WEll in the past I tried to build it but it wouldn&#039;t build so atm I&#039;m on merlinwrt even though I&#039;dmuch rather have openwrt but ti&#039;s working at least now which isn&#039;t perfct but hopefully the next release will suport i better.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>