<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Route traffic through VPN tunnel</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p96325">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">crazyquark</div>
					<div class="post-datetime">
						24 Oct 2009, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>Hello all,<br />I am running Kamikaze 8.0.9.1 on Asus 500gP. I&#039;ve established a VPN tunnel using OpenVPN. The tunnel is on interface tap0. OpenVPN pushes a route for the accessing the VPN. I can access the VPN from the router. I&#039;ve tried to add iptables rules to let my LAN access the VPN but I&#039;ve been unsuccessful. I&#039;ve tried to follow the PPTP howto from the old wiki. Ha anyone attempted this and succeded?<br />Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96345">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ciscostu</div>
					<div class="post-datetime">
						25 Oct 2009, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Do you have something like this?</p><p>iptables -A FORWARD -i br-lan -o tap0 -j ACCEPT</p><p>Does &#039;iptables -L FORWARD -v&#039; show any hits?</p><p>Another thing to check- does the other end of the tunnel have a route back to your LAN (192.168.1.0/24 by default)?</p><p>Hope this helps,<br />Charlie</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96353">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">crazyquark</div>
					<div class="post-datetime">
						25 Oct 2009, 11:08					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, I had that rule.<br />There&#039;s no way the other end of the tunnel could have a route to my LAN.<br />It&#039;s a tunnel to the 1.0.0.0 network, the so-called anonet. I was using to test VPN, I am thinking of subscribing to a paid VPN service.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96360">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ciscostu</div>
					<div class="post-datetime">
						25 Oct 2009, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>If the far end can&#039;t route to your LAN, then you&#039;ll need to SNAT outbound traffic to the tunnel address-</p><p>iptables -t nat -A POSTROUTING -o tap0 -j MASQUERADE</p><p>Cheers,<br />Charlie</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>