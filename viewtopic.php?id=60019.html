<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Occured the dependence problem build time.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p294138">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">poplinux</div>
					<div class="post-datetime">
						1 Oct 2015, 07:55					</div>
				</div>
				<div class="post-content content">
					<p>Dear Sir. </p><p>My env is see below<br />&nbsp; openWRT : 14.07</p><p>This time i&#039;m try to add new package to my buildroot.</p><p>new package name is &quot;tpm-tools&quot;.</p><p>First, I&#039;m create &quot;tpm-tools&quot; directory and Makefile.<br />Second, I&#039;m build the this package. All compile is done.</p><p>Next, I&#039;m try to install, But occured fail.</p><p>Error message is see below.</p><div class="codebox"><pre><code>Package tpm-tools is missing dependencies for the following libraries:
libiconv.so.2</code></pre></div><p>My Makefile is see below<br /></p><div class="codebox"><pre><code>include $(TOPDIR)/rules.mk

PKG_NAME:=tpm-tools
PKG_VERSION:=1.3.8
PKG_RELEASE:=


PKG_BUILD_DIR:=$(BUILD_DIR)/$(PKG_NAME)-$(PKG_VERSION)

PKG_SOURCE=$(PKG_NAME)-$(PKG_VERSION).tar.bz2

PKG_SRC_DIR:=$(TOPDIR)/package/nexg/tpm-tools/src
PKG_INSTALL:=1

include $(INCLUDE_DIR)/package.mk

TARGET_LDFLAGS += \
  -L$(STAGING_DIR)/usr/lib/libiconv-full/lib -ltspi -lcrypto -lssl -liconv


CONFIGURE_ARGS += \
  LDFLAGS=&quot;-L$(STAGING_DIR)/usr/lib/libiconv-full/lib -ltspi -lcrypto -lssl -liconv&quot;

define Package/tpm-tools/Default
  SECTION:=nexg
  CATEGORY:=NEXG
  TITLE:=tpm-tools
  DEPENDS:=+trousers
  URL:=nexg.net
endef

# tmp/.config-package.in 을 자동 생성하는데 사용된다.
# help 항목으로 저장됨.
define Package/tpm-tools/Default/description
 This is just sample for &quot;How to add new project to buildroot&quot;
endef

# tmp/.config-package.in 생성과정에서 필요한 정보를 정의한 &quot;Package/trousers/Default&quot; 를 호출해준다.
define Package/tpm-tools
$(call Package/tpm-tools/Default)
endef

# 소스 설치등의 컴파일 이전에 필요한 내용을 준비합니다.
define Build/Prepare
  @echo &quot;[S]==========================================&quot;
  @echo &quot;[package/nexg/tpm-tools] : Build/Prepare&quot;
  (mkdir -p $(PKG_BUILD_DIR); cd $(PKG_BUILD_DIR); lndir $(PKG_SRC_DIR))
  @echo &quot;[E] Build/Prepare====================&quot;
endef


define Package/tpm-tools/install
  echo &quot;BABO&quot;
  $(INSTALL_DIR) $(1)/usr
  $(CP) $(PKG_INSTALL_DIR)/usr/bin $(1)/usr/
  $(CP) $(PKG_INSTALL_DIR)/usr/lib $(1)/usr/
  $(CP) $(PKG_INSTALL_DIR)/usr/man $(1)/usr/
  $(CP) $(PKG_INSTALL_DIR)/usr/sbin $(1)/usr/
endef

define Build/InstallDev
  $(CP) $(PKG_INSTALL_DIR)/usr $(STAGING_DIR)/
endef


$(eval $(call BuildPackage,tpm-tools))</code></pre></div><br /><p>Please review the my Makefile and advise to me.</p><p>Thank you</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>