<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DNSCrypt setup — securing DNS communications</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=36380&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=36380&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=6.html">6</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p279876">
				<div class="post-metadata">
					<div class="post-num">Post #76</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						13 Jun 2015, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>dnscrypt-proxy now in upstream. Anyone still need this repository?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282165">
				<div class="post-metadata">
					<div class="post-num">Post #77</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						2 Jul 2015, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>Am I allowed to add two dnsCrypt resolvers? How do I specify a second resolver (e.g., &#039;cloudns-syd&#039;) as a backup?</p><br /><div class="codebox"><pre><code>cat /etc/config/dnscrypt-proxy</code></pre></div><p>config dnscrypt-proxy<br />&nbsp; &nbsp; &nbsp; &nbsp; option address &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option port&nbsp; &nbsp; &#039;2053&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>option resolver&nbsp; &#039;cloudns-can&#039;</strong><br />&nbsp; &nbsp; &nbsp; # option resolvers_list&nbsp; &#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;</p><br /><div class="codebox"><pre><code>cat /etc/init.d/dnscrypt-proxy</code></pre></div><p>#!/bin/sh /etc/rc.common</p><p>START=50</p><p>start_instance () {<br />&nbsp; &nbsp; local section=&quot;$1&quot;<br />&nbsp; &nbsp; config_get address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;$section&quot; &#039;address&#039;<br />&nbsp; &nbsp; config_get port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;port&#039;<br />&nbsp; &nbsp; config_get resolver&nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;resolver&#039;<br />&nbsp; &nbsp; config_get resolvers_list&nbsp; &quot;$section&quot; &#039;resolvers_list&#039;</p><p>&nbsp; &nbsp; service_start /usr/sbin/dnscrypt-proxy -d \<br />&nbsp; &nbsp; &nbsp; &nbsp; -a ${address}:${port} \<br />&nbsp; &nbsp; &nbsp; &nbsp; -u nobody \<br />&nbsp; &nbsp; &nbsp; &nbsp; -L ${resolvers_list:-&#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;} \<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>-R ${resolver:-&#039;cloudns-can&#039;}</strong></p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 2 Jul 2015, 19:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p288752">
				<div class="post-metadata">
					<div class="post-num">Post #78</div>
					<div class="post-author">l2d4y3</div>
					<div class="post-datetime">
						22 Aug 2015, 07:35					</div>
				</div>
				<div class="post-content content">
					<p>Is the default resolver opendns(wiki) or cisco(list)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289742">
				<div class="post-metadata">
					<div class="post-num">Post #79</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						30 Aug 2015, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>Updated to <strong>1.6.0</strong>. Dropped AA support. Also changed repository URL, see info at README: <a href="https://github.com/black-roland/exOpenWrt#software-repository-for-ar71xx-devices">https://github.com/black-roland/exOpenW … xx-devices</a></p><p>I&#039;ll try to fix some problems in the near future.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289804">
				<div class="post-metadata">
					<div class="post-num">Post #80</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						31 Aug 2015, 03:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dartraiden wrote:</cite><blockquote><p>Notice that the line 4 is commented out (#) by default. So dnscrypt-proxy ignores it and using opendns. If you uncomment this line =&gt; will be used cisco or any other resolver that you specify in this line.</p></blockquote></div><p>In new DNSCrypt versions &quot;opendns&quot; resolver renamed to &quot;cisco&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p289843">
				<div class="post-metadata">
					<div class="post-num">Post #81</div>
					<div class="post-author">dartraiden</div>
					<div class="post-datetime">
						31 Aug 2015, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>Oh, I missed that moment. I deleted my post and and has made changes to the wiki.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291142">
				<div class="post-metadata">
					<div class="post-num">Post #82</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						10 Sep 2015, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>Am I allowed to add two dnsCrypt resolvers? How do I specify a second resolver (e.g., &#039;cloudns-syd&#039;) as a backup?</p><br /><div class="codebox"><pre><code>cat /etc/config/dnscrypt-proxy</code></pre></div><p>config dnscrypt-proxy<br />&nbsp; &nbsp; &nbsp; &nbsp; option address &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option port&nbsp; &nbsp; &#039;2053&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>option resolver&nbsp; &#039;cloudns-can&#039;</strong><br />&nbsp; &nbsp; &nbsp; # option resolvers_list&nbsp; &#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;</p><br /><div class="codebox"><pre><code>cat /etc/init.d/dnscrypt-proxy</code></pre></div><p>#!/bin/sh /etc/rc.common</p><p>START=50</p><p>start_instance () {<br />&nbsp; &nbsp; local section=&quot;$1&quot;<br />&nbsp; &nbsp; config_get address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;$section&quot; &#039;address&#039;<br />&nbsp; &nbsp; config_get port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;port&#039;<br />&nbsp; &nbsp; config_get resolver&nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;resolver&#039;<br />&nbsp; &nbsp; config_get resolvers_list&nbsp; &quot;$section&quot; &#039;resolvers_list&#039;</p><p>&nbsp; &nbsp; service_start /usr/sbin/dnscrypt-proxy -d \<br />&nbsp; &nbsp; &nbsp; &nbsp; -a ${address}:${port} \<br />&nbsp; &nbsp; &nbsp; &nbsp; -u nobody \<br />&nbsp; &nbsp; &nbsp; &nbsp; -L ${resolvers_list:-&#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;} \<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>-R ${resolver:-&#039;cloudns-can&#039;}</strong></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291144">
				<div class="post-metadata">
					<div class="post-num">Post #83</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						10 Sep 2015, 17:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>Am I allowed to add two dnsCrypt resolvers? How do I specify a second resolver (e.g., &#039;cloudns-syd&#039;) as a backup?</p><br /><div class="codebox"><pre><code>cat /etc/config/dnscrypt-proxy</code></pre></div><p>config dnscrypt-proxy<br />&nbsp; &nbsp; &nbsp; &nbsp; option address &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option port&nbsp; &nbsp; &#039;2053&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>option resolver&nbsp; &#039;cloudns-can&#039;</strong><br />&nbsp; &nbsp; &nbsp; # option resolvers_list&nbsp; &#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;</p><br /><div class="codebox"><pre><code>cat /etc/init.d/dnscrypt-proxy</code></pre></div><p>#!/bin/sh /etc/rc.common</p><p>START=50</p><p>start_instance () {<br />&nbsp; &nbsp; local section=&quot;$1&quot;<br />&nbsp; &nbsp; config_get address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;$section&quot; &#039;address&#039;<br />&nbsp; &nbsp; config_get port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;port&#039;<br />&nbsp; &nbsp; config_get resolver&nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;resolver&#039;<br />&nbsp; &nbsp; config_get resolvers_list&nbsp; &quot;$section&quot; &#039;resolvers_list&#039;</p><p>&nbsp; &nbsp; service_start /usr/sbin/dnscrypt-proxy -d \<br />&nbsp; &nbsp; &nbsp; &nbsp; -a ${address}:${port} \<br />&nbsp; &nbsp; &nbsp; &nbsp; -u nobody \<br />&nbsp; &nbsp; &nbsp; &nbsp; -L ${resolvers_list:-&#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;} \<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>-R ${resolver:-&#039;cloudns-can&#039;}</strong></p></blockquote></div><p>Please update to the latest version from <a href="https://github.com/black-roland/exOpenWrt">exOpenWrt</a> (1.6.0-3.E).</p><p>You can specify many resolvers this way:<br /></p><div class="codebox"><pre><code>$ cat /etc/config/dnscrypt-proxy
config dnscrypt-proxy cloudnscan
    option address         &#039;127.0.0.1&#039;
    option port            &#039;5353&#039;
    option resolver        &#039;cloudns-can&#039;

config dnscrypt-proxy cloudnssyd
    option address         &#039;127.0.0.1&#039;
    option port            &#039;5454&#039;
    option resolver        &#039;cloudns-syd&#039;

$ cat /etc/config/dhcp 
config dnsmasq
    # ...
    option noresolv &#039;1&#039;
    list server &#039;127.0.0.1#5353&#039;
    list server &#039;127.0.0.1#5454&#039;
    list server &#039;/pool.ntp.org/84.200.69.80&#039;
    list server &#039;/pool.ntp.org/84.200.70.40&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291152">
				<div class="post-metadata">
					<div class="post-num">Post #84</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						10 Sep 2015, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>Anybody have any idea why DNSCrypt has stopped working? I have changed nothing on my network and yet it will no longer work. Have had it running without issue for several months. I can connect fine if I set /etc/dhcp/dhclient.conf to go directly to OpenDNS. But trying cisco and numerous other dnscrypt resolvers will not work any longer. Using Barrier Breaker and have changed nothing prior to this happening.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291205">
				<div class="post-metadata">
					<div class="post-num">Post #85</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						11 Sep 2015, 04:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>Anybody have any idea why DNSCrypt has stopped working? I have changed nothing on my network and yet it will no longer work. Have had it running without issue for several months. I can connect fine if I set /etc/dhcp/dhclient.conf to go directly to OpenDNS. But trying cisco and numerous other dnscrypt resolvers will not work any longer. Using Barrier Breaker and have changed nothing prior to this happening.</p></blockquote></div><p>Can yo provide output of <em>logread</em> command (after dnscrypt start)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291304">
				<div class="post-metadata">
					<div class="post-num">Post #86</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						11 Sep 2015, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>Okay, so I reset OpenWRT to a clean slate and then updated to Chaos Calmer final release. then I followed the directions here precisely: <a href="http://wiki.openwrt.org/inbox/dnscrypt?s">http://wiki.openwrt.org/inbox/dnscrypt?s</a></p><p>this command is producing good output: logread | grep -n &quot;using nameserver&quot;</p><p>this command produces NO output: logread | grep &quot;Proxying from&quot;</p><p>So it appears that the proxy is not working. If you are willing to help out, much appreciated. If you want specific logread info, could you be specific in how exactly you want me to get it? Thanks.</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 11 Sep 2015, 21:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291322">
				<div class="post-metadata">
					<div class="post-num">Post #87</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						11 Sep 2015, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>Is /etc/init.d/dnscrypt-proxy supposed to show &#039;opendns&#039; as the resolver even though I&#039;m not using opends?</p><div class="codebox"><pre><code>cat /etc/init.d/dnscrypt-proxy</code></pre></div><p>#!/bin/sh /etc/rc.common</p><p>START=50</p><p>start_instance () {<br />&nbsp; &nbsp; &nbsp; &nbsp; local section=&quot;$1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;$section&quot; &#039;address&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;port&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get resolver&nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;resolver&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get resolvers_list&nbsp; &quot;$section&quot; &#039;resolvers_list&#039;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; service_start /usr/sbin/dnscrypt-proxy -d \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -a ${address}:${port} \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -u nobody \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -L ${resolvers_list:-&#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;} \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -R ${resolver:-&#039;<strong>opendns</strong>&#039;}<br />}</p><div class="codebox"><pre><code>cat /etc/config/dnscrypt-proxy</code></pre></div><p>config dnscrypt-proxy dnscrypteu-nl<br />&nbsp; &nbsp; option address&nbsp; &nbsp; &nbsp; &nbsp; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;5353&#039;<br />&nbsp; &nbsp; option resolver&nbsp; &nbsp; &nbsp; &nbsp; &#039;dnscrypt.eu-nl&#039;<br />&nbsp; &nbsp; option ephemeral_keys&nbsp; &nbsp; &#039;1&#039;</p><p>config dnscrypt-proxy dnscrypteu-dk<br />&nbsp; &nbsp; option address&nbsp; &nbsp; &nbsp; &nbsp; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;5454&#039;<br />&nbsp; &nbsp; option resolver&nbsp; &nbsp; &nbsp; &nbsp; &#039;dnscrypt.eu-dk&#039;<br />&nbsp; &nbsp; option ephemeral_keys&nbsp; &nbsp; &#039;1&#039;</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 11 Sep 2015, 22:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291402">
				<div class="post-metadata">
					<div class="post-num">Post #88</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						12 Sep 2015, 08:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>Okay, so I reset OpenWRT to a clean slate and then updated to Chaos Calmer final release. then I followed the directions here precisely: <a href="http://wiki.openwrt.org/inbox/dnscrypt?s">http://wiki.openwrt.org/inbox/dnscrypt?s</a></p><p>this command is producing good output: logread | grep -n &quot;using nameserver&quot;</p><p>this command produces NO output: logread | grep &quot;Proxying from&quot;</p><p>So it appears that the proxy is not working. If you are willing to help out, much appreciated. If you want specific logread info, could you be specific in how exactly you want me to get it? Thanks.</p></blockquote></div><p>Without grep:<br /></p><div class="codebox"><pre><code>/etc/init.d/dnscrypt-proxy restart
logread | tail -n 20</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291404">
				<div class="post-metadata">
					<div class="post-num">Post #89</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						12 Sep 2015, 08:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>Is /etc/init.d/dnscrypt-proxy supposed to show &#039;opendns&#039; as the resolver even though I&#039;m not using opends?</p><div class="codebox"><pre><code>cat /etc/init.d/dnscrypt-proxy</code></pre></div><p>#!/bin/sh /etc/rc.common</p><p>START=50</p><p>start_instance () {<br />&nbsp; &nbsp; &nbsp; &nbsp; local section=&quot;$1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get address&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;$section&quot; &#039;address&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;port&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get resolver&nbsp; &nbsp; &nbsp; &nbsp; &quot;$section&quot; &#039;resolver&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; config_get resolvers_list&nbsp; &quot;$section&quot; &#039;resolvers_list&#039;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; service_start /usr/sbin/dnscrypt-proxy -d \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -a ${address}:${port} \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -u nobody \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -L ${resolvers_list:-&#039;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#039;} \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -R ${resolver:-&#039;<strong>opendns</strong>&#039;}<br />}</p><div class="codebox"><pre><code>cat /etc/config/dnscrypt-proxy</code></pre></div><p>config dnscrypt-proxy dnscrypteu-nl<br />&nbsp; &nbsp; option address&nbsp; &nbsp; &nbsp; &nbsp; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;5353&#039;<br />&nbsp; &nbsp; option resolver&nbsp; &nbsp; &nbsp; &nbsp; &#039;dnscrypt.eu-nl&#039;<br />&nbsp; &nbsp; option ephemeral_keys&nbsp; &nbsp; &#039;1&#039;</p><p>config dnscrypt-proxy dnscrypteu-dk<br />&nbsp; &nbsp; option address&nbsp; &nbsp; &nbsp; &nbsp; &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option port&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&#039;5454&#039;<br />&nbsp; &nbsp; option resolver&nbsp; &nbsp; &nbsp; &nbsp; &#039;dnscrypt.eu-dk&#039;<br />&nbsp; &nbsp; option ephemeral_keys&nbsp; &nbsp; &#039;1&#039;</p></blockquote></div><p>Install exopenwrt repository first:<br /></p><div class="codebox"><pre><code>cd /tmp
wget &#039;http://exopenwrt.and.in.net/exopenwrt.pub&#039;
opkg-key add exopenwrt.pub
echo &#039;src/gz exopenwrt http://exopenwrt.and.in.net/chaos_calmer/15.05-rc3/ar71xx/packages/exopenwrt&#039; &gt;&gt; /etc/opkg.conf

opkg update
opkg install dnscrypt-proxy dnscrypt-proxy-resolvers libsodium</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291501">
				<div class="post-metadata">
					<div class="post-num">Post #90</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						12 Sep 2015, 20:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Black Roland wrote:</cite><blockquote><p>Without grep:<br /></p><div class="codebox"><pre><code>/etc/init.d/dnscrypt-proxy restart
logread | tail -n 20</code></pre></div></blockquote></div><div class="codebox"><pre><code># /etc/init.d/dnscrypt-proxy restart &amp;&amp; logread | tail -n 20
Sat Sep 12 16:48:51 2015 daemon.info hostapd: wlan1: STA c8:f7:22:6e:12:aa WPA: group key handshake completed (RSN)
Sat Sep 12 16:48:51 2015 daemon.info hostapd: wlan1: STA 00:46:d7:82:89:ec WPA: group key handshake completed (RSN)
Sat Sep 12 16:52:56 2015 authpriv.info dropbear[1456]: Child connection from 192.168.100.198:44305
Sat Sep 12 16:53:03 2015 authpriv.notice dropbear[1456]: Password auth succeeded for &#039;root&#039; from 192.168.100.198:44305
Sat Sep 12 16:55:00 2015 daemon.warn dnsmasq[1171]: no servers found in /tmp/resolv.conf.auto, will retry
Sat Sep 12 16:56:10 2015 authpriv.info dropbear[1456]: Exit (root): Disconnect received
Sat Sep 12 16:56:28 2015 daemon.info dnsmasq[1171]: exiting on receipt of SIGTERM
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: started, version 2.73 cachesize 150
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: compile time options: IPv6 GNU-getopt no-DBus no-i18n no-IDN DHCP no-DHCPv6 no-Lua TFTP no-conntrack no-ipset no-auth no-DNSSEC loop-detect inotify
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: DNS service limited to local subnets
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq-dhcp[1932]: DHCP, IP range 192.168.100.100 -- 192.168.100.249, lease time 4d
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: using nameserver 208.67.222.222#53 for domain pool.ntp.org
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: using nameserver 127.0.0.1#5353
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: using local addresses only for domain lan
Sat Sep 12 16:56:31 2015 daemon.warn dnsmasq[1932]: no servers found in /tmp/resolv.conf.auto, will retry
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: read /etc/hosts - 1 addresses
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq[1932]: read /tmp/hosts/dhcp - 1 addresses
Sat Sep 12 16:56:31 2015 daemon.info dnsmasq-dhcp[1932]: read /etc/ethers - 0 addresses
Sat Sep 12 16:56:47 2015 authpriv.info dropbear[1935]: Child connection from 192.168.100.198:44312
Sat Sep 12 16:56:51 2015 authpriv.notice dropbear[1935]: Password auth succeeded for &#039;root&#039; from 192.168.100.198:44312</code></pre></div><br /><div class="quotebox"><blockquote><p>Install exopenwrt repository first:<br /></p><div class="codebox"><pre><code>cd /tmp
wget &#039;http://exopenwrt.and.in.net/exopenwrt.pub&#039;
opkg-key add exopenwrt.pub
echo &#039;src/gz exopenwrt http://exopenwrt.and.in.net/chaos_calmer/15.05-rc3/ar71xx/packages/exopenwrt&#039; &gt;&gt; /etc/opkg.conf

opkg update
opkg install dnscrypt-proxy dnscrypt-proxy-resolvers libsodium</code></pre></div></blockquote></div><p>I thought everything I need is now in the official repos. I need to install outside repo?</p>											<p class="post-edited">(Last edited by <strong>Lou-ltef</strong> on 12 Sep 2015, 20:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291582">
				<div class="post-metadata">
					<div class="post-num">Post #91</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						13 Sep 2015, 07:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>I thought everything I need is now in the official repos. I need to install outside repo?</p></blockquote></div><p>Dnscrypt in official repos does not support launching of many instances.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291583">
				<div class="post-metadata">
					<div class="post-num">Post #92</div>
					<div class="post-author">TJKV</div>
					<div class="post-datetime">
						13 Sep 2015, 07:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Black Roland wrote:</cite><blockquote><p>Dnscrypt in official repos does not support launching of many instances.</p></blockquote></div><p>Is it:</p><div class="codebox"><pre><code>http://exopenwrt.and.in.net/chaos_calmer/15.05-rc3/ar71xx/packages/exopenwrt</code></pre></div><p>or </p><div class="codebox"><pre><code>http://exopenwrt.rlnd.black/chaos_calmer/15.05/ar71xx/packages/exopenwrt</code></pre></div>											<p class="post-edited">(Last edited by <strong>TJKV</strong> on 13 Sep 2015, 07:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291585">
				<div class="post-metadata">
					<div class="post-num">Post #93</div>
					<div class="post-author">Black Roland</div>
					<div class="post-datetime">
						13 Sep 2015, 07:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TJKV wrote:</cite><blockquote><div class="quotebox"><cite>Black Roland wrote:</cite><blockquote><p>Dnscrypt in official repos does not support launching of many instances.</p></blockquote></div><p>Is it:</p><div class="codebox"><pre><code>http://exopenwrt.and.in.net/chaos_calmer/15.05-rc3/ar71xx/packages/exopenwrt</code></pre></div><p>or </p><div class="codebox"><pre><code>http://exopenwrt.rlnd.black/chaos_calmer/15.05/ar71xx/packages/exopenwrt</code></pre></div></blockquote></div><p>This:<br /></p><div class="codebox"><pre><code>http://exopenwrt.rlnd.black/chaos_calmer/15.05/ar71xx/packages/exopenwrt</code></pre></div><p>Repo migrated to new domain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292681">
				<div class="post-metadata">
					<div class="post-num">Post #94</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						20 Sep 2015, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>I reflashed OpenWRT chaos calmer and setup DNSCrypt per the wiki with a single resolver. Everything worked fine for the entire week until today. DNSCrypt just stopped working. I have tried switching DNSCrypt resolvers, but still nothing works. I switch to a non-DNSCrypt resolver and everything works. Every thing looks in order in the logs. I have no idea why it stops working.</p><p>I rebooted the router. Once reboot was complete, I pulled the log file. This is it:</p><div class="codebox"><pre><code>~# /etc/init.d/dnscrypt-proxy restart &amp;&amp; logread | tail -n 20
Sun Sep 20 13:18:08 2015 daemon.info dnscrypt-proxy[1248]: Done
Sun Sep 20 13:18:08 2015 user.emerg syslog: setting up led USB1
Sun Sep 20 13:18:08 2015 user.emerg syslog: setting up led USB2
Sun Sep 20 13:18:08 2015 user.emerg syslog: setting up led WLAN2G
Sun Sep 20 13:18:08 2015 daemon.info dnscrypt-proxy[1248]: Server certificate #808464433 received
Sun Sep 20 13:18:08 2015 daemon.info dnscrypt-proxy[1248]: This certificate looks valid
Sun Sep 20 13:18:08 2015 daemon.info dnscrypt-proxy[1248]: Chosen certificate #808464433 is valid from [2015-09-11] to [2016-09-10]
Sun Sep 20 13:18:08 2015 daemon.info dnscrypt-proxy[1248]: Server key fingerprint is E7AC:5C21:A4E6:6A90:B254:DD73:5229:3BA1:5BE9:8EB3:4E8F:E538:52DE:A2FB:DDB6:1357
Sun Sep 20 13:18:08 2015 daemon.notice dnscrypt-proxy[1248]: Proxying from 127.0.0.1:5353 to 176.56.237.171:443
Sun Sep 20 13:18:08 2015 daemon.info procd: - init complete -
Sun Sep 20 13:18:16 2015 authpriv.info dropbear[1272]: Child connection from 192.168.100.180:34057
Sun Sep 20 13:18:51 2015 authpriv.notice dropbear[1272]: Password auth succeeded for &#039;root&#039; from 192.168.100.180:34057
Sun Sep 20 13:18:58 2015 daemon.notice dnscrypt-proxy[1285]: Starting dnscrypt-proxy 1.4.3
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Initializing libsodium for optimal performance
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Generating a new key pair
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Done
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Server certificate #808464433 received
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: This certificate looks valid
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Chosen certificate #808464433 is valid from [2015-09-11] to [2016-09-10]
Sun Sep 20 13:18:58 2015 daemon.info dnscrypt-proxy[1285]: Server key fingerprint is E7AC:5C21:A4E6:6A90:B254:DD73:5229:3BA1:5BE9:8EB3:4E8F:E538:52DE:A2FB:DDB6:1357</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298590">
				<div class="post-metadata">
					<div class="post-num">Post #95</div>
					<div class="post-author">Lou-ltef</div>
					<div class="post-datetime">
						4 Nov 2015, 06:11					</div>
				</div>
				<div class="post-content content">
					<p>Anybody have any idea what&#039;s wrong with my box, why DNSCrypt won&#039;t work?</p><p>Is anybody else also having this problem?</p><p>If I do a fresh install, everything works--for a while and then it just stops working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303052">
				<div class="post-metadata">
					<div class="post-num">Post #96</div>
					<div class="post-author">iliiike</div>
					<div class="post-datetime">
						9 Dec 2015, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>Using DNSCrypt in win/linux/macosx and as the control freak that i am, i&#039;ve enabled DNS log.<br />I wish to migrate the service at router level also but... is DNS logging, or other plugins available?<br />What are my options to enable log plugin?<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305114">
				<div class="post-metadata">
					<div class="post-num">Post #97</div>
					<div class="post-author">ODra</div>
					<div class="post-datetime">
						26 Dec 2015, 22:22					</div>
				</div>
				<div class="post-content content">
					<p>@Black Roland</p><p>Hello Roland,</p><p>could you help me please with compiling dnscrypt-proxy? I&#039;ve tried to compile dnscrypt-proxy on TurrisOS (OpenWrt fork based on 14.07 version; Target System (Freescale MPC85xx); Subtarget (P2020-NAND). <br />I followed all <a href="https://forum.openwrt.org/viewtopic.php?pid=165418#p165418"> your steps</a> and everything went well till I run: </p><div class="codebox"><pre><code>$ make -j 2 V=s toolchain/install</code></pre></div><p>After that I&#039;ve got: </p><div class="codebox"><pre><code>/home/odra/openwrt/include/toplevel.mk:171: recipe for&gt;&gt; target &#039;toolchain/install&#039; failed
make: *** [toolchain/install] Error 2</code></pre></div><p>Screenshot: <span class="postimg"><img src="http://ibin.co/2RJ1NAtQvr9C" alt="PunBB bbcode test" /></span></p><br /><p>Do you have any idea why I&#039;ve got this error? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><p>I have also looked at your repository <a href="http://exopenwrt.roland.black/barrier_breaker/14.07/ar71xx/packages/base/">http://exopenwrt.roland.black/barrier_b … ages/base/</a> where can I get (how to build or download) <strong>libc_0.9.33.2-1, libgcc_4.8-linaro-1, zlib_1.2.8-1</strong>??</p>											<p class="post-edited">(Last edited by <strong>ODra</strong> on 26 Dec 2015, 22:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305116">
				<div class="post-metadata">
					<div class="post-num">Post #98</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						26 Dec 2015, 22:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ODra wrote:</cite><blockquote><p>@Black Roland</p><p>Hello Roland,</p><p>could you help me please with compiling dnscrypt-proxy? I&#039;ve tried to compile dnscrypt-proxy on TurrisOS (OpenWrt fork based on 14.07 version; Target System (Freescale MPC85xx); Subtarget (P2020-NAND). <br />I followed all <a href="https://forum.openwrt.org/viewtopic.php?pid=165418#p165418"> your steps</a> and everything went well till I run: </p><div class="codebox"><pre><code>$ make -j 2 V=s toolchain/install</code></pre></div><p>After that I&#039;ve got: </p><div class="codebox"><pre><code>/home/odra/openwrt/include/toplevel.mk:171: recipe for&gt;&gt; target &#039;toolchain/install&#039; failed
make: *** [toolchain/install] Error 2</code></pre></div><p>Screenshot: <span class="postimg"><img src="http://ibin.co/2RJ1NAtQvr9C" alt="PunBB bbcode test" /></span></p><br /><p>Do you have any idea why I&#039;ve got this error? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> </p><p>I have also looked at your repository <a href="http://exopenwrt.roland.black/barrier_breaker/14.07/ar71xx/packages/base/">http://exopenwrt.roland.black/barrier_b … ages/base/</a> where can I get (how to build or download) <strong>libc_0.9.33.2-1, libgcc_4.8-linaro-1, zlib_1.2.8-1</strong>??</p></blockquote></div><p>ld: ... no space left on device</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305117">
				<div class="post-metadata">
					<div class="post-num">Post #99</div>
					<div class="post-author">ODra</div>
					<div class="post-datetime">
						26 Dec 2015, 22:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stas2z wrote:</cite><blockquote><p>ld: ... no space left on device</p></blockquote></div><p>That&#039;s pretty embarrassing.. Ahh, thank you sir. <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307478">
				<div class="post-metadata">
					<div class="post-num">Post #100</div>
					<div class="post-author">prusayn</div>
					<div class="post-datetime">
						13 Jan 2016, 14:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lou-ltef wrote:</cite><blockquote><p>Okay, so I reset OpenWRT to a clean slate and then updated to Chaos Calmer final release. then I followed the directions here precisely: <a href="http://wiki.openwrt.org/inbox/dnscrypt?s">http://wiki.openwrt.org/inbox/dnscrypt?s</a></p><p>this command is producing good output: logread | grep -n &quot;using nameserver&quot;</p><p>this command produces NO output: logread | grep &quot;Proxying from&quot;</p><p>So it appears that the proxy is not working. If you are willing to help out, much appreciated. If you want specific logread info, could you be specific in how exactly you want me to get it? Thanks.</p></blockquote></div><p>I had the same issue. When I rebooted router dnscrypt wasn&#039;t proxying.<br />Change the START in<br /></p><div class="codebox"><pre><code>/etc/init.d/dnscrypt-proxy</code></pre></div><p>to 60 instead of 50.</p><p>dnsmasq run at 60 and dnscrypt-proxy should have same value by default.</p><p>Next run<br /></p><div class="codebox"><pre><code>/etc/init.d/dnscrypt-proxy enable</code></pre></div>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 4 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=36380&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=3.html">3</a></li><li class="pagination-current"><span>4</span></li><li><a href="viewtopic.php%3Fid=36380&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=36380&amp;p=6.html">6</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>