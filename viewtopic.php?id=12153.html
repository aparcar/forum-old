<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wrt54gl v1.0 -mmc</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 Feb 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p54196">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">goodrench</div>
					<div class="post-datetime">
						19 Aug 2007, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>I am sorry if this question has been asked a million times on this forum but I just can&#039;t seem to find a solution<br />I have a version 1.0 running whiterussion, and a 2 gb sd card installed.<br />My router (so I have read) uses the gpio2 in the mmc.o<br />I have downloaded and installed just about every mmc.o file on the interweb and none of them seem to be working.<br />All of the tutorials I have read are for the version 1.1<br />Is there a difference in the soldering locations between 1.1 and 1.0?<br />anyhow...<br />The error I am getting from dmesg is</p><p>mmc Hardware init<br />mmc Card init<br />mmc Card init<br />mmc: error in mmc_card_init (1)<br />mmc: error in mmc_init (-1)</p><br /><p>And this is as far as I can get.<br />When I insmod the mmc.o my orange ses light comes on and I can cd into my /mnt/mmc directory and see files in there but when I do a df -h I do not see anything for the mmc card.</p><br /><br /><br /><p>Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.0M&nbsp; &nbsp; &nbsp; 1.0M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7.0M&nbsp; &nbsp; &nbsp;32.0k&nbsp; &nbsp; &nbsp; 7.0M&nbsp; &nbsp;0% /tmp<br />/dev/mtdblock/4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2.2M&nbsp; &nbsp; 892.0k&nbsp; &nbsp; &nbsp; 1.3M&nbsp; 40% /jffs<br />/jffs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.0M&nbsp; &nbsp; &nbsp; 1.0M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /<br />root@OpenWrt:/mnt/mmc# </p><br /><br /><p>this is also another error I am getting</p><p>root@OpenWrt:~# mount /mnt/mmc/<br />mount: Mounting /dev/mmc/disc0/part1 on /mnt/mmc failed: No such file or directory<br />root@OpenWrt:~# </p><br /><p>Like I said.<br />I have been fighting with this for weeks and I still can&#039;t find a solution.<br />Is there a thread someone can point me to or maybe have some advice?<br />Thanks guys.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54369">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">goodrench</div>
					<div class="post-datetime">
						22 Aug 2007, 05:12					</div>
				</div>
				<div class="post-content content">
					<p>Ok.<br />Now I really did it.<br />I installed a version of dd-wrt that was supposed to have gpio2 mmc and I clicked on &#039;enable jffs&#039; .<br />It did not work either so I went back to openwrt and now when I do df -h I get the following.</p><p>root@OpenWrt:~$ df -h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />none&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 7.0M&nbsp; &nbsp; &nbsp;32.0k&nbsp; &nbsp; &nbsp; 7.0M&nbsp; &nbsp;0% /tmp<br />/dev/mtdblock/4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.3M&nbsp; &nbsp; 324.0k&nbsp; &nbsp;1020.0k&nbsp; 24% /jffs<br />/jffs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.9M&nbsp; &nbsp; &nbsp; 1.9M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /</p><p>It appears that I screwed it up pretty good.<br />Is there a way that I can get my file system back to the way that it was before?<br />Will I need to jtag and erase the file system or can I just issue a command and reinstall the firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55397">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">BlackNight</div>
					<div class="post-datetime">
						10 Sep 2007, 00:14					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m having the same problem. I tried to use a no-name 32 MB SD card with the wires soldered directly on it. Tried lots of compiled mmc modules, but none worked. dmesg gives me</p><div class="quotebox"><blockquote><p>mmc Hardware init<br />mmc Card init<br />mmc Card init<br />mmc: error in mmc_card_init (1)<br />mmc: error in mmc_init (-1)</p></blockquote></div><p>Also, checked the wires with the gpio utility and a multimeter.</p><p>With dd-wrt it seems to work (or at least /dev/mmc/[...] is created).</p><p>Tomorrow I think I&#039;ll buy a new card.</p><p>Do you have any idea where the problem may be when using OpenWRT?</p><p><strong>LE:</strong> Forgot to mention, my router is V 1.1.</p>											<p class="post-edited">(Last edited by <strong>BlackNight</strong> on 10 Sep 2007, 00:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55400">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">goodrench</div>
					<div class="post-datetime">
						10 Sep 2007, 04:43					</div>
				</div>
				<div class="post-content content">
					<p>I just bought another wrt54gl v1.1 but have not tried the mmc mod yet.<br />I will post my results with that one soon.<br />Maybe this week.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p55409">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">BlackNight</div>
					<div class="post-datetime">
						10 Sep 2007, 08:59					</div>
				</div>
				<div class="post-content content">
					<p>Resoldered some of the wires today and now it works using the optimized driver and OpenWRT Kamikaze.</p><p><strong>Edit:</strong> Again not working after I assambled (is this the correct term?) my router. But it seems that the memory card is faulty, because now I see that it is not accessible neither with my card reader.</p><p><strong>Edit2:</strong> It works ok with the new SD card.</p>											<p class="post-edited">(Last edited by <strong>BlackNight</strong> on 10 Sep 2007, 20:12)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>