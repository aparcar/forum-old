<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Turning off WiFi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p37902">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ASkwar</div>
					<div class="post-datetime">
						27 Nov 2006, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I just got a La Fonera Wifi router and would like to use it now. I&#039;d now like to turn off the WiFi on my WRT54GS running OpenWRT, so that it works best (no interference). But I&#039;d still like to use the WRT54GS as my DSL router.</p><p>Some questions:</p><p>1) Do I actually need to do that? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />2) If so, how do I do that? I&#039;d like that it doesn&#039;t transmit any data at all anymore.</p><p>Thanks a lot,<br />Alexander</p>											<p class="post-edited">(Last edited by <strong>ASkwar</strong> on 27 Nov 2006, 19:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p37920">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">MarkMentovai</div>
					<div class="post-datetime">
						28 Nov 2006, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>Easiest is to just turn off the radio:</p><div class="codebox"><pre><code># nvram set wl0_radio=0
# nvram commit
# wifi</code></pre></div><p>Reverse the procedure by reentering these commands, substituting wl0_radio=1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47934">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						7 May 2007, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>When I type in &quot;wifi&quot; after turning it off, the power light goes crazy.&nbsp; Why is this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47944">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">michelinok76</div>
					<div class="post-datetime">
						7 May 2007, 09:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Cyberian75 wrote:</cite><blockquote><p>When I type in &quot;wifi&quot; after turning it off, the power light goes crazy.&nbsp; Why is this?</p></blockquote></div><p>It&#039;s normal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47955">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						7 May 2007, 14:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>wifi up</p></blockquote></div><p>instead wifi alone, isn&#039;t it ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47968">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						7 May 2007, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>Is there another way to turn WI-FI on/off?&nbsp; I want to schedule it using Cron.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47975">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						7 May 2007, 19:41					</div>
				</div>
				<div class="post-content content">
					<p>nvram commit isn&#039;t necassery (and deprecated) if you use Cron</p><div class="quotebox"><blockquote><p>#Turn off Wifi<br />killall wifi<br />nvram set wl0_radio=0<br />wifi up<br />#Wait 5 seconds<br />sleep 5<br />#Turn on Wifi<br />killall wifi<br />nvram set wl0_radio=1<br />wifi up</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47976">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						7 May 2007, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, but turning wifi off seems to make the power light go crazy.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47978">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						7 May 2007, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>Indeed. I don&#039;t know why power light blink but wifi is really off and all other functions works ...<br />Wait for an expert ^^</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47988">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kebul</div>
					<div class="post-datetime">
						7 May 2007, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>I would do it this way for disabling the radio:<br />ifdown wifi; killall nas &gt;/dev/null 2&gt;&amp;1; sleep 1; nvram set wl0_radio=0; wifi<br />and for enabling it again:<br />nvram set wl0_radio=1; wifi; ifup wifi; [ -f /etc/init.d/S41wpa ] &amp;&amp; /etc/init.d/S41wpa</p><p>I think that it is a cleaner way but maybe i am wrong.</p><p>BTW: wifi is a simple wrapper that reads the the nvram values and sends them to the driver (no command line parameters necessary).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p47994">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						7 May 2007, 23:37					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know why, but when I turn wifi off via CLI, the power light goes crazy.</p>											<p class="post-edited">(Last edited by <strong>Cyberian75</strong> on 7 May 2007, 23:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p48003">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Nik</div>
					<div class="post-datetime">
						8 May 2007, 01:31					</div>
				</div>
				<div class="post-content content">
					<p>The power light thing is just cosmetic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p48006">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">netprince</div>
					<div class="post-datetime">
						8 May 2007, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>you can disable the flashing power light by using /proc/diag/led I think?&nbsp; Not sure the exact path...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p48479">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">wrtpilot</div>
					<div class="post-datetime">
						15 May 2007, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>Good topic, that&#039;s what I was looking for.. 8-) Thanks!</p><p>Concerning the flashing power LED, see: <a href="http://wiki.openwrt.org/wrtLEDCodes">http://wiki.openwrt.org/wrtLEDCodes</a><br />On my WRT54GS v1.1 running Whiterussian 0.9,<br /></p><div class="codebox"><pre><code>echo 1 &gt; /proc/diag/led/power</code></pre></div><p>worked fine (that is, the power LED is always on now).</p><p>Also, this FAQ entry may be interesting: <a href="http://wiki.openwrt.org/Faq#head-a7b1732bdd0d390ddd53ba48341fcf920b5f25a6">What does /sbin/wifi do?</a></p>											<p class="post-edited">(Last edited by <strong>wrtpilot</strong> on 15 May 2007, 17:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50306">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						12 Jun 2007, 07:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve written a simple script for this...<br /></p><div class="codebox"><pre><code>#!/bin/sh
#
# Turns WI-FI on/off.  Used with crond.

case &quot;$1&quot; in
    on)
        if [ $(nvram get wl0_radio) = 0 ]; then
        {
            nvram set wl0_radio=1
            nvram set wl0_akm=&quot;psk psk2&quot;
            sleep 1
            wifi
            ifup wifi
            /etc/init.d/S41wpa
        }
        fi
    ;;
    off)
        if [ $(nvram get wl0_radio) = 1 ]; then
        {
            ifdown wifi
            killall nas &gt;/dev/null 2&gt;&amp;1
            sleep 1
            nvram set wl0_radio=0
            nvram set wl0_akm=&quot;none&quot;
            sleep 1
            wifi
            echo 1 &gt; /proc/diag/led/power
        }
        fi
    ;;
    *)
        echo $&quot;Usage: $0 {on|off}&quot;
        exit 1
    ;;
esac</code></pre></div>											<p class="post-edited">(Last edited by <strong>Cyberian75</strong> on 12 Jun 2007, 21:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50355">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Sonic</div>
					<div class="post-datetime">
						12 Jun 2007, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>btw, you doesn&#039;t need to commit change to nvram each time. This will reduce lifetime of chip.<br />nvram commit is only needed to keep state of wifi status even with a reboot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p50357">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Cyberian75</div>
					<div class="post-datetime">
						12 Jun 2007, 21:28					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I modified it accordingly.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>