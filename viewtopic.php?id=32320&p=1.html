<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Rb751</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p145443">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						9 Oct 2011, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve made small patch for backfire and trunk&nbsp; which adds support for new MikroTik RB751 device (<a href="http://routerboard.com/pricelist/download_file.php?file_id=333">http://routerboard.com/pricelist/downlo … ile_id=333</a>). <br />It&#039;s small SOHO wireless router with builtin dual-chain wireless AP and USB port with very affordable price ($59,95).<br />I tested and everything except wireless works. I haven&#039;t been playing a lot with wireless, so most likely is just selection of valid drivers.</p><p>Patches can be found here: <a href="http://ayufan.eu/local/rb751/">http://ayufan.eu/local/rb751/</a><br />Also there&#039;s <strong>openwrt-vmlinux-initramfs.elf</strong> an precompiled vmlinux kernel with builtin openwrt compilation.</p><p>In order to boot image check following tutorial (not mine): <a href="http://blog.poettner.de/2011/05/27/openwrt-trunk-on-mikrotik-routerboard-411750/">http://blog.poettner.de/2011/05/27/open … rd-411750/</a><br />After TFTP boot reconnect ethernet cable to port 2 in order to access router at 192.168.1.1.</p>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 9 Oct 2011, 15:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145509">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						10 Oct 2011, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>I managed to list AR5008 wireless card, but still no support for chipset in ath9k. <br />It looks like that eeprom is missing. New patch can be found on my website.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155950">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mtadeu</div>
					<div class="post-datetime">
						1 Feb 2012, 02:45					</div>
				</div>
				<div class="post-content content">
					<p>I try it, but the path do not work anymore, with trunk r29967. Some struct change.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156202">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						4 Feb 2012, 01:31					</div>
				</div>
				<div class="post-content content">
					<p>I just got RB751G. Will try to post new version.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156625">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						7 Feb 2012, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>I have managed to run wlan on RB751U-2hnd. So stay tunned for next patch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 7 Feb 2012, 23:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156745">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kshogan</div>
					<div class="post-datetime">
						9 Feb 2012, 02:47					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to get the Routerboard 751 2Hn to work with our OpenWRT tree. I&#039;ve taken your diff from October 2011, that has the RB751 architecture and applied it. It compiled OK with the exception of the following changes:</p><p>ar71xx_pci_init(ARRAY_SIZE(rb751_pci_irqs), rb751_pci_irqs); // Commented this line out, as rb751_pci_irqs was not defined</p><p>Changed:<br />ar71xx_add_device_mdio(~RB751_MDIO_PHYMASK);<br />to<br />ar71xx_add_device_mdio(0, ~RB751_MDIO_PHYMASK);</p><p>The compile finishes, but when it PXEboots it fails. After the PXEboot fails, mikrotik OS boots back up. </p><p>I took your initramfs.elf ( from r30025 folder ) and was able to PXEboot it. I couldn&#039;t get into your image, couldn&#039;t telnet into 192.168.1.1 and DHCP wasn&#039;t being handed out on the LAN. I knew it was booted into OpenWRT based on the behavior of the board.</p><p>Are there any patches we are missing? I am modifying our existing RB750 port ( Which works great ), I&#039;m trying to port our build to the Routerboard 751 2Hn. Any help would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p156859">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						10 Feb 2012, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I fixed patches to work with latest trunk release and added support for WLAN module. <br />Device automatically creates OpenWrt 802.11ng access point and bridges it with LAN.<br />I started working on RB751G-2HnD. However, still had no time to port new switch chip.<br />At least you can connect through WLAN. RB751G-2HnD works great in my home <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>Image configuration:<br />WAN (dhcp client): Port 1<br />LAN (dhcp server with 192.168.1.1): Port 2-5 + WLAN</p><p>What works:<br />RB751U-2HnD: Switch Chip on ports 2-5, WAN port 1, WLAN, USB host<br />RB751G-2HnD: WLAN, USB host</p><p>What doesn&#039;t work:<br />RB751U-2HnD: All LEDs<br />RB751G-2HnD: All LEDs, Switch Chip on ports 2-5, WAN port 1</p><p>The latest patch:<br /><a href="http://ayufan.eu/local/rb751/trunk-r30386.diff">http://ayufan.eu/local/rb751/trunk-r30386.diff</a></p><p>Compilations: <br />trunk - r30025: <a href="http://ayufan.eu/local/rb751/r30025/">http://ayufan.eu/local/rb751/r30025/</a><br />trunk - r30386: <a href="http://ayufan.eu/local/rb751/r30386/">http://ayufan.eu/local/rb751/r30386/</a></p><p>Files:<br />openwrt-ar71xx-nand-vmlinux-initramfs.elf - kernel image with ramdisk<br />openwrt-ar71xx-nand-vmlinux.elf - kernel image<br />openwrt-ar71xx-nand-rootfs.tar.gz - openwrt rootfs</p><p>Logs from RB751G-2HnD:<br /></p><div class="quotebox"><blockquote><p>root@atom:~# cat /proc/cpuinfo<br />system type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: Atheros AR7242 rev 1<br />machine&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MikroTik RouterBOARD 751G<br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 24Kc V7.4<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 265.42<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : yes<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />tlb_entries&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 16<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes, count: 4, address/irw mask: [0x0ff8, 0x0ff8, 0x0ff8, 0x0ff8]<br />ASEs implemented&nbsp; &nbsp; &nbsp; &nbsp; : mips16<br />shadow register sets&nbsp; &nbsp; : 1<br />kscratch registers&nbsp; &nbsp; &nbsp; : 0<br />core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 0<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p></blockquote></div><div class="quotebox"><blockquote><p>[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] early_node_map[1] active PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 16384<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 802f7620, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 128 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 16256 pages, LIFO batch:3<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; no-uart gpio=3911 HZ=200000000 mem=64M kmac=00:0C:42:F8:91:34 board=751g boot=1 mlc=2 rootfstype=squashfs,yaffs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61592k/65536k available (2210k kernel code, 3944k reserved, 444k data, 192k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:80<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is MikroTik RouterBOARD 751G<br />[&nbsp; &nbsp; 0.100000] ar71xx: pll_reg 0xb805002c: 0x62000000<br />[&nbsp; &nbsp; 0.730000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.740000] rb7xx: calibration data found<br />[&nbsp; &nbsp; 0.750000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: [168c:ff1c] type 0 class 0x000200<br />[&nbsp; &nbsp; 0.750000] pci 0000:00:00.0: fixup device configuration<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: reg 10: [mem 0x00000000-0x0000ffff 64bit]<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: supports D1<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: PME# disabled<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1000ffff 64bit]<br />[&nbsp; &nbsp; 0.760000] pci 0000:00:00.0: BAR 0: set to [mem 0x10000000-0x1000ffff 64bit] (PCI address [0x10000000-0x1000ffff])<br />[&nbsp; &nbsp; 0.770000] PCI: mapping irq 72 to pin1@0000:00:00.0<br />[&nbsp; &nbsp; 0.770000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.780000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.780000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.780000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.790000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.790000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 0.800000] TCP reno registered<br />[&nbsp; &nbsp; 0.800000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.810000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.820000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.820000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.840000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.840000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.850000] yaffs built Feb&nbsp; 8 2012 00:03:34 Installing.<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000] YAFFS-WARNING CONFIG_YAFFS_ALWAYS_CHECK_CHUNK_ERASED selected.<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000]<br />[&nbsp; &nbsp; 0.850000] msgmni has been set to 120<br />[&nbsp; &nbsp; 0.860000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.860000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.870000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.890000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.900000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 1.030000] Atheros AR71xx SPI Controller driver version 0.2.4<br />[&nbsp; &nbsp; 1.100000] NAND flash driver for the RouterBOARD 750 version 0.1.0<br />[&nbsp; &nbsp; 1.180000] NAND device: Manufacturer ID: 0x20, Chip ID: 0x76 (ST Micro NAND 64MiB 3,3V 8-bit)<br />[&nbsp; &nbsp; 1.280000] Scanning device for bad blocks<br />[&nbsp; &nbsp; 1.430000] Creating 3 MTD partitions on &quot;NAND 64MiB 3,3V 8-bit&quot;:<br />[&nbsp; &nbsp; 1.500000] 0x000000000000-0x000000040000 : &quot;booter&quot;<br />[&nbsp; &nbsp; 1.560000] 0x000000040000-0x000000400000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 1.620000] 0x000000400000-0x000004000000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 1.680000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 1.750000] split_squashfs: no squashfs found in &quot;NAND 64MiB 3,3V 8-bit&quot;<br />[&nbsp; &nbsp; 2.060000] ar8216: Unknown Atheros device [ver=18, rev=2, phy_id=004dd033]<br />[&nbsp; &nbsp; 2.280000] ar8216: Unknown Atheros device [ver=18, rev=2, phy_id=004dd033]<br />[&nbsp; &nbsp; 2.500000] ar8216: Unknown Atheros device [ver=18, rev=2, phy_id=004dd033]<br />[&nbsp; &nbsp; 2.720000] ar8216: Unknown Atheros device [ver=18, rev=2, phy_id=004dd033]<br />[&nbsp; &nbsp; 2.940000] ar8216: Unknown Atheros device [ver=18, rev=2, phy_id=004dd033]<br />[&nbsp; &nbsp; 2.940000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 2.980000] eth0: Atheros AG71xx at 0xba000000, irq 5<br />[&nbsp; &nbsp; 3.590000] eth0: invalid speed specified<br />[&nbsp; &nbsp; 3.640000] eth0: using fixed link parameters<br />[&nbsp; &nbsp; 3.650000] ag71xx: probe of ag71xx.1 failed with error -22<br />[&nbsp; &nbsp; 3.710000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 4.320000] eth0: invalid speed specified<br />[&nbsp; &nbsp; 4.370000] eth0: using fixed link parameters<br />[&nbsp; &nbsp; 4.380000] ag71xx: probe of ag71xx.0 failed with error -22<br />[&nbsp; &nbsp; 4.440000] Atheros AR71xx hardware watchdog driver version 0.1.0<br />[&nbsp; &nbsp; 4.520000] ar71xx-wdt: timeout=15 secs (max=21)<br />[&nbsp; &nbsp; 4.520000] TCP westwood registered<br />[&nbsp; &nbsp; 4.560000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 4.610000] Bridge firewalling registered<br />[&nbsp; &nbsp; 4.660000] 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />[&nbsp; &nbsp; 4.740000] All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />[&nbsp; &nbsp; 4.830000] yaffs: dev is 32505858 name is &quot;mtdblock2&quot; ro<br />[&nbsp; &nbsp; 4.890000] yaffs: passed flags &quot;&quot;<br />[&nbsp; &nbsp; 4.930000] yaffs: Attempting MTD mount of 31.2,&quot;mtdblock2&quot;<br />[&nbsp; &nbsp; 6.480000] yaffs_read_super: is_checkpointed 0<br />[&nbsp; &nbsp; 6.480000] VFS: Mounted root (yaffs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 6.560000] Freeing unused kernel memory: 192k freed<br />[&nbsp; &nbsp; 7.830000] Button Hotplug driver version 0.4.1<br />[&nbsp; &nbsp;12.450000] ocf: module license &#039;BSD&#039; taints kernel.<br />[&nbsp; &nbsp;12.510000] Disabling lock debugging due to kernel taint<br />[&nbsp; &nbsp;12.890000] NET: Registered protocol family 38<br />[&nbsp; &nbsp;13.450000] Compat-wireless backport release: compat-wireless-2011-11-29<br />[&nbsp; &nbsp;13.530000] Backport based on wireless-testing.git master-2011-12-01<br />[&nbsp; &nbsp;13.820000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;14.050000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;14.110000] cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;14.210000] cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;14.300000] cfg80211:&nbsp; &nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;14.400000] cfg80211:&nbsp; &nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;14.490000] cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;14.590000] cfg80211:&nbsp; &nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;15.090000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;15.810000] SCSI subsystem initialized<br />[&nbsp; &nbsp;16.070000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp;16.140000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;16.210000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;17.730000] PCI: Setting latency timer of device 0000:00:00.0 to 64<br />[&nbsp; &nbsp;17.740000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;17.740000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;17.740000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;17.740000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;17.740000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;17.740000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;17.740000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;17.740000] Registered led device: ath9k-phy0<br />[&nbsp; &nbsp;17.740000] ieee80211 phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=72<br />[&nbsp; &nbsp;17.830000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;18.010000] NET: Registered protocol family 8<br />[&nbsp; &nbsp;18.060000] NET: Registered protocol family 20<br />[&nbsp; &nbsp;18.120000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;18.190000] cfg80211:&nbsp; &nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;18.290000] cfg80211:&nbsp; &nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />[&nbsp; &nbsp;18.390000] cfg80211:&nbsp; &nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />[&nbsp; &nbsp;18.480000] cfg80211:&nbsp; &nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;18.580000] cfg80211:&nbsp; &nbsp; &nbsp;(5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;18.670000] cfg80211:&nbsp; &nbsp; &nbsp;(5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;18.770000] cfg80211:&nbsp; &nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />[&nbsp; &nbsp;19.080000] device-mapper: ioctl: 4.20.0-ioctl (2011-02-02) initialised: dm-devel@redhat.com</p></blockquote></div><div class="quotebox"><blockquote><p>root@atom:~# lspci<br />00:00.0 Class 0280: 168c:002a<br />root@atom:~# lsusb<br />Bus 001 Device 001: ID 1d6b:0002<br />Bus 001 Device 002: ID 1058:1021</p></blockquote></div><p>Feel free to test and post results.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p157075">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						11 Feb 2012, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>Ok. I have managed to run port 1 on RB751G-2HnD. </p><p>Latest patch is there: <a href="http://ayufan.eu/local/rb751/trunk-r30025-v2.diff">http://ayufan.eu/local/rb751/trunk-r30025-v2.diff</a><br />Latest compilation against trunk&#039;s rev. 30025: <a href="http://ayufan.eu/local/rb751/r30025/">http://ayufan.eu/local/rb751/r30025/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158303">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						22 Feb 2012, 10:11					</div>
				</div>
				<div class="post-content content">
					<p>Damn. Tried to implement your patches to help overcome the 751G networking problem and found that the 2.6.39 support your ptaches are built upon have been nuked. It is now on 3.2<br />Cannot find the machtype.h file for the life of me. Any idea where that went?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158368">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						22 Feb 2012, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>Use older revision. The best for me is r30025.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158386">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						22 Feb 2012, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>No can do, as I need some upstream fixes in the 650 or so updates since 30025.</p><p>I will request nbd&#039;s assistance to port your patches into trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158403">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mtadeu</div>
					<div class="post-datetime">
						23 Feb 2012, 01:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ayufan wrote:</cite><blockquote><p>Hi,</p><p>I fixed patches to work with latest trunk release and added support for WLAN module. <br />Device automatically creates OpenWrt 802.11ng access point and bridges it with LAN.<br />I started working on RB751G-2HnD. However, still had no time to port new switch chip.<br />At least you can connect through WLAN. RB751G-2HnD works great in my home <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>Image configuration:<br />WAN (dhcp client): Port 1<br />LAN (dhcp server with 192.168.1.1): Port 2-5 + WLAN</p><p>What works:<br />RB751U-2HnD: Switch Chip on ports 2-5, WAN port 1, WLAN, USB host<br />RB751G-2HnD: WLAN, USB host</p><p>What doesn&#039;t work:<br />RB751U-2HnD: All LEDs<br />RB751G-2HnD: All LEDs, Switch Chip on ports 2-5, WAN port 1<br />....<br />Feel free to test and post results.</p></blockquote></div><p>Hi !<br />Thank you ! <br />RB751U-2HnD is UP with r30025 !<br />The VLAN switch work too. I can use 4 diferent VLAN (eth0.2 to eth0.5) and port 1 (eth1).<br />The USB port work well with 3G USB modem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158407">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						23 Feb 2012, 05:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>chillifire wrote:</cite><blockquote><p>No can do, as I need some upstream fixes in the 650 or so updates since 30025.</p><p>I will request nbd&#039;s assistance to port your patches into trunk.</p></blockquote></div><p>Great stuff! I was thinking of doing the same, got one RB751G-2HnD coming in. Looks like a serious contender for the home setup! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I only wish they could have had two sets of SDRAM pads, it would have been perfect to feed this thing with 128MB RAM as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p158488">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						23 Feb 2012, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>There&#039;s still problem with Ethernet ports on RB751G. Ethernet is working only when OpenWRT is run over network from tftp server. But WLAN and rest works great. I have my home setup with 1TB fully encrypted disk <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161313">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						19 Mar 2012, 03:13					</div>
				</div>
				<div class="post-content content">
					<p>No response from nbd on this.</p><p>I tried to port the fixes to trunk latest myself, but am not shamed to admit I failed miserably. Most of your patches are easy enough to reply one the right file has been found, but the mach-rb750.c has too many changes in terms of includes, changes constants and function names affecting your code for me to keep up with (since I do not speak C).</p><p><strong>We should push through through with these changes as with revision 31011 (generic: ar8216: add support for the AR8327 chip) the AR8327 switch chip is supported.</strong> </p><p>This is the switch chip built into RB750GL and RB751G-2HnD, while RB750, RB750UP and RB751U-2HnD were using the previously already supported AR7240 (see <a href="http://wiki.mikrotik.com/wiki/Manual:Switch_Chip_Features)">http://wiki.mikrotik.com/wiki/Manual:Sw … _Features)</a>.</p><p>So now that this switch is supported by OpenWrt, I suggest we make another effort to port your changes to trunk 31011 or later. </p><br /><p>I have a RB750GL and a RB751G-2HnD to test here and know my way around the buildroot system, so I am willing and able to test any any patches that we can come up with.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161343">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						19 Mar 2012, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Great. I&#039;ll port them to new release. Just wait few days <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161678">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						22 Mar 2012, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>I started making the new patches, we will see how will it work <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161683">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						22 Mar 2012, 02:38					</div>
				</div>
				<div class="post-content content">
					<p>It booted with full ethernet ports support on RB751G-2HnD. However, I couldnt make wlan-tx work, only wlan-rx, so still working on it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161736">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						22 Mar 2012, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot for these efforts - RB751G booted and used as 4G wireless router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> <br />Actually I wouldn&#039;t bother running OpenWRT if RouterOs would support Zte MF821 4G stick, but it doesn&#039;t and support is not answering to my emails for almost a week now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Whatever, openwrt is quite funny to use (MC and other stuff, and of course possibilities comparing with RouterOs are limitless, although mikrotik product is very user friendly), now the chances I would stick with it are not 0.0% <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Had problem using tftpd32 (yes, I&#039;m not a linux guy), it seems it sends responses as DHCP_OFFER and not BOOTPREPLY, or for whatever reasons mikrotik doesnt accept his replies <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Combination of tftpd32 (for TFTP proto) and DHCPSRV (http://www.dhcpserver.de/, for BOOTP proto) worked fine.</p><p>Using RB751G without eth interfaces is a strange thing - can&#039;t even play with wireless settings (btw I can&#039;t make it work in anything better than MCS-7, can&#039;t connect any WIFI devices after setting HT to 40-/+ and got no idea for the moment on how to switch second channel on - will google it later).</p><p>Good job anyway, and hoping for having uptodate-allstuffworking version soon, thanks <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161737">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						22 Mar 2012, 13:38					</div>
				</div>
				<div class="post-content content">
					<p>Maybe today or tomorrow <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161742">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">ayufan</div>
					<div class="post-datetime">
						22 Mar 2012, 14:11					</div>
				</div>
				<div class="post-content content">
					<p>Ok. Works. Just needs more tests and will post the results.</p>											<p class="post-edited">(Last edited by <strong>ayufan</strong> on 22 Mar 2012, 16:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161814">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						22 Mar 2012, 22:57					</div>
				</div>
				<div class="post-content content">
					<p>Seeing <a href="http://ayufan.eu/local/rb751/r31053/">this</a> is probably a good sign? <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161843">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						23 Mar 2012, 05:27					</div>
				</div>
				<div class="post-content content">
					<p>@ brainsuccker</p><p>Hi, I am also not getting anywhere with Linux and usually use tftpd. Works fine with the 450 and 450G boards, but the 75x do not accept anything. How do you make the tftpd32 and dhcpserv play together? Can you maybe share your respective ini files? Thanks</p>											<p class="post-edited">(Last edited by <strong>chillifire</strong> on 23 Mar 2012, 05:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161851">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						23 Mar 2012, 08:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>chillifire wrote:</cite><blockquote><p>Works fine with the 450 and 450G boards, but the 75x do not accept anything.</p></blockquote></div><p>ouch <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Wouldn&#039;t expect their bootloaders to be that different, I thought that&#039;s something all routerboards inherit (althrough I was getting suspicious if it was working with RB150 some time ago).</p><p>What you need to do is just disable everything beside TFTP server in TFTPD32 (I was also binding TFTP server to particular interface and starting it up only after RouterBoard getting DHCP lease), and everything beside DHCP in DHCPSRV (binding to same ethernet interface, providing next server address (same local address - used as TFTP server address), and bootp file name (available in TFTPD32 download dir, I reduced it to vmlinux.elf).<br /><a href="http://brains.by/misc/tftpinis.7z">Ini-files</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161866">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">brainsucker</div>
					<div class="post-datetime">
						23 Mar 2012, 11:04					</div>
				</div>
				<div class="post-content content">
					<p>I fixed tftpd32 (original 4.0 version) to work with Mikrotik routerboot&#039;s (at least with RB751G, fix was as simple as removing DHCP_MESSAGE_TYPE option, since mikrotik is expecting BOOTP replies to BOOTP requests <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.&nbsp; Also some other nullref on unexpected program close fixed.<br /><a href="http://brains.by/misc/tftpd32_mikrotik.7z">Download fixed TFTPD32 / TFTPD64 (tftpd32_mikrotik.7z)</a></p>											<p class="post-edited">(Last edited by <strong>brainsucker</strong> on 23 Mar 2012, 11:05)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=32320&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=32320&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>