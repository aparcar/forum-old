<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros PB44 Reference Board SPI driver issue in Backfire 10.03.1-rc4</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p123217">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wifi802.11abgn</div>
					<div class="post-datetime">
						14 Dec 2010, 07:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am working on Atheros PB44 ref board. I Flashed the Backfire 10.03.1-rc4 kernel and rootfs images in to <br />board using fis create command.</p><p>While loading kernel, The SPI drivers shows error message and its not detecting the REDBOOT partition. </p><p>Also my board is having 8 MB flash chip. but while kernel loading its detected as 64 Kbytes. </p><p>The below is dmesg output:</p><p>AR7161 CPU 680MHz, DDR 340MHz, AHB 170MHz<br />+Ethernet eth0: MAC address 00:26:ad:01:15:e1<br />IP: 192.168.1.2/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.1.10</p><p>RedBoot(tm) bootstrap and debug environment [ROMRAM]<br />Non-certified release, version UNKNOWN - built 15:55:26, Jan 15 2010</p><p>Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.</p><p>Board: pb44 <br />RAM: 0x80000000-0x82000000, [0x800510b0-0x80fe1000] available<br />FLASH: 0xbf000000 - 0xbf7f0000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 3.000 seconds - enter ^C to abort<br />RedBoot&gt; fis load -l vmlinux<br />Image loaded from 0x80060000-0x802eeb48<br />RedBoot&gt; exec -c board=PB44<br />Now booting linux kernel:<br /> Base address 0x80050000 Entry 0x80064550<br /> Cmdline : board=PB44<br />Linux version 2.6.32.27 (brodev@localhost) (gcc version 4.3.3 (GCC) ) #8 Tue Dec 14 09:07:16 IST 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz<br />Determined physical RAM map:<br /> memory: 04000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00004000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200&nbsp; board=PB44 ethaddr=00.26.ad.01.15.e1<br />PID hash table entries: 256 (order: -2, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000002<br />Readback ErrCtl register=00000002<br />Memory: 61788k/65536k available (2072k kernel code, 3680k reserved, 397k data, 148k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />MIPS: machine is Atheros PB44<br />registering PCI controller with io_map_base unset<br />bio: create slab &lt;bio-0&gt; at 0<br />i2c-gpio i2c-gpio.0: using pins 1 (SDA) and 0 (SCL)<br />pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot<br />pci 0000:00:00.0: PME# disabled<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2 (NAND) (SUMMARY) (ZLIB) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />yaffs Dec 13 2010 20:23:03 Installing. <br />msgmni has been set to 120<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />pb44-spi pb44-spi: can&#039;t setup spi0.1, status -22<br />m25p80 spi0.0: pm25lv512 (64 Kbytes)<br />Searching for RedBoot partition table in spi0.0 at offset 0xe000<br />Searching for RedBoot partition table in spi0.0 at offset 0xf000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xb9000000, irq 4<br />eth0: AR8316 switch driver attached.<br />eth1: Atheros AG71xx at 0xba000000, irq 5<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Cannot open root device &quot;&lt;NULL&gt;&quot; or unknown-block(0,0)<br />Please append a correct &quot;root=&quot; boot option; here are the available partitions:<br />1f00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 64 mtdblock0 (driver?)<br />Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>