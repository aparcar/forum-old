<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SquashFS or JFFS2?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p139945">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Alex24</div>
					<div class="post-datetime">
						26 Jul 2011, 04:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m completely new with Linux/OpenWRT.<br />I want to add some scripts in /root/ that will be auto executed on startup from /etc/rc.local </p><p>The router (WNDR3700v2) currently still has the Netgear stock firmware.<br />So, should I flash:</p><p><a href="http://downloads.openwrt.org/backfire/10.03.1-rc5/ar71xx/openwrt-ar71xx-wndr3700v2-jffs2-factory.img">http://downloads.openwrt.org/backfire/1 … actory.img</a><br />or<br /><a href="http://downloads.openwrt.org/backfire/10.03.1-rc5/ar71xx/openwrt-ar71xx-wndr3700v2-squashfs-factory.img">http://downloads.openwrt.org/backfire/1 … actory.img</a></p><br /><p>If I&#039;m correct I cannot upload or modify files with the SquashFS filesystem since it&#039;s read-only? So I have to flash JFFS2?</p>											<p class="post-edited">(Last edited by <strong>Alex24</strong> on 26 Jul 2011, 04:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140012">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Alex24</div>
					<div class="post-datetime">
						26 Jul 2011, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>Anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140013">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">scruffy</div>
					<div class="post-datetime">
						26 Jul 2011, 18:26					</div>
				</div>
				<div class="post-content content">
					<p>Yeah. Read<br /><a href="http://wiki.openwrt.org/doc/techref/flash.layout">http://wiki.openwrt.org/doc/techref/flash.layout</a><br /><a href="http://wiki.openwrt.org/doc/techref/filesystems">http://wiki.openwrt.org/doc/techref/filesystems</a></p><p>then decide yourself. I recommend SquashFS because this give&#039;s you Failsafe:&nbsp; <a href="http://wiki.openwrt.org/doc/howto/generic.failsafe">http://wiki.openwrt.org/doc/howto/generic.failsafe</a></p>											<p class="post-edited">(Last edited by <strong>scruffy</strong> on 26 Jul 2011, 18:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140016">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Alex24</div>
					<div class="post-datetime">
						26 Jul 2011, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>I would like to flash the SquashFS build if I know for sure I can add/modify scripts directly with WinSCP/Putty?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140021">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">scruffy</div>
					<div class="post-datetime">
						26 Jul 2011, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>First you visit grammar school and learn how to <a href="http://en.wikipedia.org/wiki/Read_%28process%29">read</a>. And then you read the two articles. And then you decide to take the SquashFS image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140023">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Alex24</div>
					<div class="post-datetime">
						26 Jul 2011, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Just give me an answer. Is it so hard? I already read those articles. They are complicated and unclear for beginners.</p>											<p class="post-edited">(Last edited by <strong>Alex24</strong> on 26 Jul 2011, 18:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140024">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">scruffy</div>
					<div class="post-datetime">
						26 Jul 2011, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>No, I wrote them explicitly exclusively for beginners at the time I had difficulties understanding this whole stuff here.</p><p>I am considering writing a &quot;howto read&quot; article.</p><p>Edit: I found <a href="http://www.alphabetisierung.de/kampagne/tv.html">help</a>.</p>											<p class="post-edited">(Last edited by <strong>scruffy</strong> on 26 Jul 2011, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140025">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Alex24</div>
					<div class="post-datetime">
						26 Jul 2011, 19:05					</div>
				</div>
				<div class="post-content content">
					<p>I reported you as Troll. Just wait for a deluser</p>											<p class="post-edited">(Last edited by <strong>Alex24</strong> on 26 Jul 2011, 19:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140026">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">scruffy</div>
					<div class="post-datetime">
						26 Jul 2011, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>Alright, I give up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140027">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Jul 2011, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>Just use the squashfs image. It is better on the long run. I have been using squashfs with my own 3700 builds.<br /><a href="http://koti.welho.com/hnyman1/Openwrt/">http://koti.welho.com/hnyman1/Openwrt/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p155607">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">intuited</div>
					<div class="post-datetime">
						28 Jan 2012, 05:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m sort of experienced with this stuff but I still was unsure which image to install because the labelling is not informative enough.&nbsp; As I understand it --and please correct me if I&#039;m wrong:</p><p>- the jffs2 image will get you an install that _only_ uses the jffs2 filesystem, which means that all system files and directories can be modified.&nbsp; <br />- the squashfs image will put core system files on a read-only, and compressed, squashfs filesystem, while also creating a jffs2 filesystem for additional installed packages and whatever else you want to put there.&nbsp; If this is the case, there&#039;s really no disadvantage to using the squashfs image unless you need to modify the core system files.&nbsp; That would be especially unlikely if you don&#039;t already know what I&#039;m explaining here.</p><p>That being said, I have a vague memory of having had to do something after install to create a jffs2 filesystem at some point with an earlier version of openwrt (or was it something else?), so I myself am not totally confident that what I&#039;ve said above is true.&nbsp; There should be README files in the download directories to inform people of what the various extensions mean, or this should be explained on a top-level Downloads page, or something along these lines.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185478">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">camelseller</div>
					<div class="post-datetime">
						7 Dec 2012, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>I strongly agree with intuited</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185489">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						7 Dec 2012, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>I just love the scruffy/Alex24 interaction. How to make enemies and annoy users.<br />Anyway: squashfs is the one to go for unless (a) you know what you are doing; (b) you don&#039;t want to hack the software;(c) as b, you don&#039;t want to add stuff that might make it difficult to access the system after a screw-up(TM).<br />Just read that: too many negatives, but the advice still stands: squashfs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p185498">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						7 Dec 2012, 20:41					</div>
				</div>
				<div class="post-content content">
					<p>Holy necrobump batman!</p><p>For a WNDR3700 you should use squashfs. It prevents the device from getting &quot;bricked&quot; and the JFFS2 overlay provides all the advantages of a full JFFS2 filesystem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191828">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">gcbwrt</div>
					<div class="post-datetime">
						12 Feb 2013, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>necrobump++</p><p>for my router with only 4MB of flash, is it wise to go with JFFS2? or should i remove/update the packages i want and create a squashfs image myself? ...i&#039;d really want to avoid that trouble of building a rom if JFFS2 is fine for everything except the recovery mode mentioned above.</p><p>Edit:<br />installed the 64k jff2.. actually have a little less&nbsp; free space now...</p><p>and i was being dumb (as i have no knowledge of DSL workings) and i didn&#039;t need to replace any package, it worked fine with the kmod-sangam-atm-annex-a, i didn&#039;t need the annex-b one. </p><p>just had to change the vpi from 8 to 0.</p>											<p class="post-edited">(Last edited by <strong>gcbwrt</strong> on 13 Feb 2013, 00:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191831">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jeffster</div>
					<div class="post-datetime">
						12 Feb 2013, 23:38					</div>
				</div>
				<div class="post-content content">
					<p>Can you get everything you want installed with the &quot;default&quot; build? WIN -- end of story<br />Otherwise, you&#039;ll have to proceed down a custom path of your choosing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191835">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">gcbwrt</div>
					<div class="post-datetime">
						13 Feb 2013, 00:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jeffster wrote:</cite><blockquote><p>Can you get everything you want installed with the &quot;default&quot; build? WIN -- end of story<br />Otherwise, you&#039;ll have to proceed down a custom path of your choosing.</p></blockquote></div><p>turned out i could <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> sorry for the noise.</p><p>i was thinking i had to replace the annex-a with the annex-b package... and with &gt;100kb of free space opkg was failing. My idea was that instead of downloading a bunch of tools and source to build something 99% identical to the regular image, i could loop mount the current fs image and replace the one or two files... just an idea. hopefully i will not have to go deeper on that <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191842">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">qasdfdsaq</div>
					<div class="post-datetime">
						13 Feb 2013, 03:28					</div>
				</div>
				<div class="post-content content">
					<p>Do you care about recovery mode? Does your router have it&#039;s own recovery mode? Are you likely to use it?</p><p>JFFS may be a bit bigger to start off with, but if you modify a lot of system files SqashFS will end up bigger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191845">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">zorxd</div>
					<div class="post-datetime">
						13 Feb 2013, 05:19					</div>
				</div>
				<div class="post-content content">
					<p>if you don&#039;t need many packages go for JFFS2<br />you will be able to upgrade your packages individually without wasting space</p><p>But if you need to squeeze as much features as possible in that 4 or 8MB flash, go for squashfs and do not upgrade any package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p191851">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						13 Feb 2013, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>qasdfdsaq is right, many routers does not have own tftp recovery mode at all, especially tp-link devices. Since I have only tp-links, because they are good and cheap, I ever use squashfs, because there are so many things that can go wrong when you are playing with openwrt, openwrt&#039;s recovery mode is the only saviour, if you don&#039;t plan to open the device, solder serial and lose waranty.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211449">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">dx2</div>
					<div class="post-datetime">
						2 Sep 2013, 18:10					</div>
				</div>
				<div class="post-content content">
					<p>Sorry about getting into this topic, but I have a few points about the wiki pages mentioned here:</p><p>On my journey to ubinize my system, I was obviously reading the wiki and came across this:<br /><em><strong>There is a generic problem when running SquashFS on NAND: The issue is that SquashFS has no bad block management at all and requires all blocks on order; but for proper NAND bad block management you also need to be able to skip bad blocks and occasionally relocate blocks (see squashfs and NAND flash). That&#039;s why raw SquashFS is a bad idea on NAND (it works if you use a FTL like UBIFS).</strong></em></p><p>OK, no SquashFS for NAND flashes, which I have proven myself, experiencing my file system getting corrupted now and then.</p><p>Later, on the same page:</p><p><em><strong>On many embedded targets that use NAND flash for the root filesystem, OpenWrt implements a clever trick to get the most out of the limited flash memory capacity while retaining flexibility for the end-user:<br />Basically, during the image creation, all of the rootfs contents is packed up in a SquashFS filesystem – a highly efficient filesystem with compression support. There&#039;s one important detail about it though: it is a read-only filesystem. To overcome this limitation OpenWrt uses the remaining portion of the NAND rootfs partition to store an additional read/write jffs2 filesystem which is &quot;overlayed&quot; on top of the rootfs (that is, allowing to read unchanged files from the SquashFS but storing all the modifications made to the jffs2 part).</strong></em></p><p>So, SquashFS is not recommended by anyone for NAND flashes, including OpenWRT wiki, but the same page describes how the file system is built on a NAND flash, using... SquashFS? I don&#039;t get it.</p><p>I was trying to switch to JFFS2-only, but it seems now that ubinize the whole thing is the way to go.</p>											<p class="post-edited">(Last edited by <strong>dx2</strong> on 2 Sep 2013, 18:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211451">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">camelseller</div>
					<div class="post-datetime">
						2 Sep 2013, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>What does &quot;ubinize&quot; mean?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211452">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">dx2</div>
					<div class="post-datetime">
						2 Sep 2013, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>Change the root file system to UBIFS. It&#039;s supposed to be better than JFFS2 and it&#039;s said to be the next generation of the JFFS2 file system.</p>											<p class="post-edited">(Last edited by <strong>dx2</strong> on 2 Sep 2013, 18:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227837">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">newzack</div>
					<div class="post-datetime">
						18 Mar 2014, 02:09					</div>
				</div>
				<div class="post-content content">
					<p>For what it&#039;s worth, I just changed from SquashFS to JFFS2 with my Netgear WNDR3700v2 and there is a NOTICEABLE difference in the speed when I&#039;m changing settings using the LuCI interface. It is WAY faster. Might be because I cleared out the old settings, but I think it&#039;s just using less processor cycles without having to deal with the Squash compression (however that works) and it doesn&#039;t have to track all the changes to the initial SquashFS kernel. (however that works)</p><p>Those are my theories, but the result is less than half the time to change a setting and refresh the router. But also, WAY more space taken up. Before, it was 94% free space, now only 78% free space. So, yeah, there is that.</p><p>My vote is JFFS2, for the win!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227839">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">dx2</div>
					<div class="post-datetime">
						18 Mar 2014, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>newzack, I&#039;m glad you replied this post, cause I had forgotten it... <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>I also went for JFFS2! I had some incompatibilities with the bootloader and other stuff running UBIFS... so I changed everything to JFFS2 and it is WAY better now. It&#039;s less compressed so as you said, it used more space, but the system is no longer crashing and neither the filesystem is getting corrupted. I haven&#039;t noticed (nor checked) any perfomance improvement to be honest, but I guess it depends on our hardware.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>