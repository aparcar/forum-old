<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> is it possible to reduce kernel size ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p308054">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">johan666</div>
					<div class="post-datetime">
						18 Jan 2016, 10:03					</div>
				</div>
				<div class="post-content content">
					<p>I am using TPLink travel router which have only 4MB rom size.<br />In the past kernel 3.x I was still able to put some basic stuff into it,<br />such as Luci, ddns, zram, wpad (full), usb disk &amp; modem support by cutting some unused modules e.g. ipv6 etc. <br />But now the image seems too big, with the similar thinner modules selection,<br />I can only add usb disk &amp; modem modules into it, no more room for Luci.<br />Is it possible to reduce the size to fit web interface ?</p><div class="codebox"><pre><code>Here are the modules / packages included in my config:

base-files - 165-r48259
block-mount - 2016-01-10
busybox - 1.24.1-1
chat - 2.4.7-8
comgt - 0.32-27
ddns-scripts - 2.5.0-5
ddns-scripts_no-ip_com - 2.5.0-5
dnsmasq - 2.75-4
dropbear - 2015.71-1
firewall - 2015-07-27
fstools - 2016-01-10
hostapd-common - 2015-03-25-2
ip - 4.3.0-1
iptables - 1.4.21-1
iw - 4.3-1
iwinfo - 2015-10-05
jshn - 2016-01-15
jsonfilter - 2014-06-19
kernel - 4.1.15-1
kmod-ath - 4.1.15+2016-01-10-1
kmod-ath9k - 4.1.15+2016-01-10-1
kmod-ath9k-common - 4.1.15+2016-01-10-1
kmod-cfg80211 - 4.1.15+2016-01-10-1
kmod-gpio-button-hotplug - 4.1.15-1
kmod-ipt-conntrack - 4.1.15-1
kmod-ipt-core - 4.1.15-1
kmod-ipt-nat - 4.1.15-1
kmod-lib-crc-ccitt - 4.1.15-1
kmod-lib-lz4 - 4.1.15-1
kmod-lib-lzo - 4.1.15-1
kmod-mac80211 - 4.1.15+2016-01-10-1
kmod-nf-conntrack - 4.1.15-1
kmod-nf-ipt - 4.1.15-1
kmod-nf-nat - 4.1.15-1
kmod-nf-nathelper - 4.1.15-1
kmod-nls-base - 4.1.15-1
kmod-ppp - 4.1.15-1
kmod-pppoe - 4.1.15-1
kmod-pppox - 4.1.15-1
kmod-slhc - 4.1.15-1
kmod-zram - 4.1.15-1
libblkid - 2.25.2-4
libblobmsg-json - 2016-01-15
libc - 1.1.11-1
libgcc - 5.2.0-1
libip4tc - 1.4.21-1
libiwinfo - 2015-10-05
libjson-c - 0.12-1
libjson-script - 2016-01-15
libnl-tiny - 0.1-5
libpthread - 1.1.11-1
librt - 1.1.11-1
libubox - 2016-01-15
libubus - 2016-01-13
libuci - 2016-01-11.1-1
libusb-1.0 - 1.0.19-1
libuuid - 2.25.2-4
libxtables - 1.4.21-1
mtd - 21
netifd - 2015-12-16
odhcpd - 2015-11-19
opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-10
ppp - 2.4.7-8
ppp-mod-pppoe - 2.4.7-8
procd - 2016-01-14
relayd - 2015-10-29
swap-utils - 2.25.2-4
swconfig - 10
uboot-envtools - 2015.10-1
ubox - 2015-11-22
ubus - 2016-01-13
ubusd - 2016-01-13
uci - 2016-01-11.1-1
uhttpd - 2015-11-08
usb-modeswitch - 2014-08-26
usign - 2015-05-08
wpad - 2015-03-25-2
zram-swap - 1-2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308320">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						20 Jan 2016, 13:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><p>...such as Luci, ddns, zram, wpad (full), usb disk &amp; modem support...</p></blockquote></div><p>As in ppp modem support? In a &#039;travel router&#039;? And &#039;iwinfo&#039; is a luxury, IM<strong>NS</strong>HO.</p><p>In the supplied listing of installed packages the kmods for USB storage are absent. And are the decompression kmods required? <a href="https://wiki.openwrt.org/doc/techref/swconfig">swconfig</a> would appear also unnecessary.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308326">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">bolvan</div>
					<div class="post-datetime">
						20 Jan 2016, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Some options are present in menuconfig.&nbsp; Disable debug info and strip unneeded symbols.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308329">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						20 Jan 2016, 14:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johan666 wrote:</cite><blockquote><p>I am using TPLink travel router which have only 4MB rom size.<br />In the past kernel 3.x I was still able to put some basic stuff into it,<br />such as Luci, ddns, zram, wpad (full), usb disk &amp; modem support by cutting some unused modules e.g. ipv6 etc. <br />But now the image seems too big, with the similar thinner modules selection,<br />I can only add usb disk &amp; modem modules into it, no more room for Luci.<br />Is it possible to reduce the size to fit web interface ?</p></blockquote></div><p>If you compile/build your own OpenWRT firmware, then perhaps you can strip more to make the firmware size smaller. You can even run <em>make kernel_menuconfig</em> to add/remove any drivers.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>