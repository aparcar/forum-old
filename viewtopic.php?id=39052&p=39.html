<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mwan3; multi-wan policy routing (general topic)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 May 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 39 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=38.html">38</a></li><li class="pagination-current"><span>39</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=40.html">40</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=41.html">41</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p249281">
				<div class="post-metadata">
					<div class="post-num">Post #951</div>
					<div class="post-author">kpv</div>
					<div class="post-datetime">
						5 Oct 2014, 18:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kpv wrote:</cite><blockquote><p>Testing the very latest version of mwan3 1.5-7 on OpenWrt CC r42753, I see the following error:</p><div class="codebox"><pre><code>root@OpenWrt:~# mwan3 ifup wan2
Expecting interface. Usage: mwan3 ifup &lt;interface&gt;
root@OpenWrt:~#</code></pre></div><p>I don&#039;t see the same error on the previous version.</p></blockquote></div><p>Does anyone else see this error when invoking</p><div class="codebox"><pre><code>mwan3 ifup wan2</code></pre></div><p>from the command-line?</p><p>PS: Actual mwan3 functionality seems unaffected.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249303">
				<div class="post-metadata">
					<div class="post-num">Post #952</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						5 Oct 2014, 21:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kpv wrote:</cite><blockquote><p>Does anyone else see this error when invoking</p><div class="codebox"><pre><code>mwan3 ifup wan2</code></pre></div><p>from the command-line?</p><p>PS: Actual mwan3 functionality seems unaffected.</p></blockquote></div><p>Very bizarre. Can you paste the contents of your ifup() function from /usr/sbin/mwan3 ? The code on github looks good to me and shouldn&#039;t be giving you that message.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249343">
				<div class="post-metadata">
					<div class="post-num">Post #953</div>
					<div class="post-author">kpv</div>
					<div class="post-datetime">
						6 Oct 2014, 04:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>kpv wrote:</cite><blockquote><p>Does anyone else see this error when invoking</p><div class="codebox"><pre><code>mwan3 ifup wan2</code></pre></div><p>from the command-line?</p><p>PS: Actual mwan3 functionality seems unaffected.</p></blockquote></div><p>Very bizarre. Can you paste the contents of your ifup() function from /usr/sbin/mwan3 ? The code on github looks good to me and shouldn&#039;t be giving you that message.</p></blockquote></div><p>I think the culprit are the last 2 lines of /usr/sbin/mwan3:</p><div class="codebox"><pre><code>action=${1:-help}
$action</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249360">
				<div class="post-metadata">
					<div class="post-num">Post #954</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						6 Oct 2014, 10:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kpv wrote:</cite><blockquote><p>Testing the very latest version of mwan3 1.5-7 on OpenWrt CC r42753, I see the following error:</p><div class="codebox"><pre><code>root@OpenWrt:~# mwan3 ifup wan2
Expecting interface. Usage: mwan3 ifup &lt;interface&gt;
root@OpenWrt:~#</code></pre></div><p>I don&#039;t see the same error on the previous version.</p><p>Does anyone else see this error when invoking</p><div class="codebox"><pre><code>mwan3 ifup wan2</code></pre></div><p>from the command-line?</p></blockquote></div><p>Yes, my bad. I ntroduced this error in the last version. Will change this later today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249462">
				<div class="post-metadata">
					<div class="post-num">Post #955</div>
					<div class="post-author">kpv</div>
					<div class="post-datetime">
						7 Oct 2014, 00:51					</div>
				</div>
				<div class="post-content content">
					<p>mwan3 won&#039;t recover from error - &quot;Timeout waiting for older hotplug processes to finish. ifup interface wan2 (eth2) aborted&quot;</p><p>I was &quot;stress-testing&quot; my mwan3 system today and noticed that after both WANs went off-line due to very high ping times, one of them won&#039;t recover.</p><p>The corresponding mwan3track process has exited.</p><div class="codebox"><pre><code>Mon Oct  6 23:53:12 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Mon Oct  6 23:53:26 2014 user.info mwan3track: Lost 3 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:53:51 2014 user.info mwan3track: Lost 5 ping(s) on interface wan (eth1)
Mon Oct  6 23:53:52 2014 user.info mwan3track: Lost 3 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:54:14 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Mon Oct  6 23:54:14 2014 user.info mwan3track: Lost 2 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:54:44 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Mon Oct  6 23:54:44 2014 user.info mwan3track: Lost 2 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:55:41 2014 user.info mwan3track: Lost 4 ping(s) on interface wan (eth1)
Mon Oct  6 23:55:41 2014 user.info mwan3track: Lost 4 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:56:05 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Mon Oct  6 23:56:06 2014 user.info mwan3track: Lost 2 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:56:18 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Mon Oct  6 23:56:18 2014 user.info mwan3track: Lost 1 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:56:44 2014 user.info mwan3track: Lost 3 ping(s) on interface wan (eth1)
Mon Oct  6 23:56:44 2014 user.info mwan3track: Lost 3 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:57:36 2014 user.info mwan3track: Lost 7 ping(s) on interface wan (eth1)
Mon Oct  6 23:57:36 2014 user.info mwan3track: Lost 6 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:58:15 2014 user.info mwan3track: Lost 5 ping(s) on interface wan (eth1)
Mon Oct  6 23:58:15 2014 user.info mwan3track: Lost 5 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:58:35 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Mon Oct  6 23:58:36 2014 user.info mwan3track: Lost 1 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:58:48 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Mon Oct  6 23:58:49 2014 user.info mwan3track: Lost 1 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:59:18 2014 user.info mwan3track: Lost 1 ping(s) on interface wan2 (eth2)
Mon Oct  6 23:59:23 2014 user.notice mwan3track: Interface wan (eth1) is online
Mon Oct  6 23:59:24 2014 user.notice mwan3: ifup interface wan (eth1)
Mon Oct  6 23:59:25 2014 user.notice mwan3track: Interface wan2 (eth2) is online
Tue Oct  7 00:00:27 2014 user.warn mwan3: Timeout waiting for older hotplug processes to finish. ifup interface wan2 (eth2) aborted
Tue Oct  7 00:00:56 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:03:34 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:07:53 2014 user.info mwan3track: Lost 5 ping(s) on interface wan (eth1)
Tue Oct  7 00:08:32 2014 user.info mwan3track: Lost 3 ping(s) on interface wan (eth1)
Tue Oct  7 00:09:24 2014 user.info mwan3track: Lost 5 ping(s) on interface wan (eth1)
Tue Oct  7 00:10:12 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:11:01 2014 user.notice mwan3track: Interface wan (eth1) is offline
Tue Oct  7 00:11:01 2014 user.notice mwan3: ifdown interface wan (eth1)
Tue Oct  7 00:11:54 2014 user.info mwan3track: Lost 13 ping(s) on interface wan (eth1)
Tue Oct  7 00:12:04 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:12:58 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:12:58 2014 user.notice mwan3track: Interface wan (eth1) is online
Tue Oct  7 00:12:59 2014 user.notice mwan3: ifup interface wan (eth1)
Tue Oct  7 00:18:43 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:20:43 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:22:06 2014 user.notice mwan3track: Interface wan (eth1) is offline
Tue Oct  7 00:22:06 2014 user.notice mwan3: ifdown interface wan (eth1)
Tue Oct  7 00:22:18 2014 user.info mwan3track: Lost 6 ping(s) on interface wan (eth1)
Tue Oct  7 00:23:04 2014 user.info mwan3track: Lost 4 ping(s) on interface wan (eth1)
Tue Oct  7 00:23:35 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:24:21 2014 user.info mwan3track: Lost 6 ping(s) on interface wan (eth1)
Tue Oct  7 00:24:44 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:25:10 2014 user.info mwan3track: Lost 3 ping(s) on interface wan (eth1)
Tue Oct  7 00:25:48 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:26:20 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:27:16 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:27:28 2014 user.info mwan3track: Lost 1 ping(s) on interface wan (eth1)
Tue Oct  7 00:27:28 2014 user.notice mwan3track: Interface wan (eth1) is online
Tue Oct  7 00:27:29 2014 user.notice mwan3: ifup interface wan (eth1)
Tue Oct  7 00:27:51 2014 user.info mwan3track: Lost 3 ping(s) on interface wan (eth1)
Tue Oct  7 00:28:32 2014 user.info mwan3track: Lost 2 ping(s) on interface wan (eth1)
Tue Oct  7 00:29:41 2014 user.info mwan3track: Lost 5 ping(s) on interface wan (eth1)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# mwan3 status
Interface status:
Interface wan is online (tracking active)
Interface wan2 is offline (tracking down)

Policy balanced:
 wan (100%)

Policy wan2_only:
 unreachable

Policy wan2_wan:
 wan (100%)

Policy wan_only:
 wan (100%)

Policy wan_wan2:
 wan (100%)
...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249534">
				<div class="post-metadata">
					<div class="post-num">Post #956</div>
					<div class="post-author">Straitvodka</div>
					<div class="post-datetime">
						7 Oct 2014, 13:32					</div>
				</div>
				<div class="post-content content">
					<p>We have mwan3 working amongst other things on our firmware:</p><p>Scroll down till you hit &quot;MultiWeb&quot; yes we have named our revisions after spiders <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><a href="http://ofmodemsandmen.com/downloads.html">http://ofmodemsandmen.com/downloads.html</a></p><p>Here is a Tutorial Dairyman has developed:</p><p><a href="http://ofmodemsandmen.com/multiweb.html">http://ofmodemsandmen.com/multiweb.html</a></p><p>This firmware is good for many routers and also allows for 3G and 4G modems even in a 3G router and also has SMS + cell signal information.</p><p>The website is a bit dated.<br />Currently i am working on a new Luci theme.</p>											<p class="post-edited">(Last edited by <strong>Straitvodka</strong> on 7 Oct 2014, 13:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250890">
				<div class="post-metadata">
					<div class="post-num">Post #957</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						17 Oct 2014, 02:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Straitvodka wrote:</cite><blockquote><p>Here is a Tutorial Dairyman has developed:</p><p><a href="http://ofmodemsandmen.com/multiweb.html">http://ofmodemsandmen.com/multiweb.html</a></p></blockquote></div><p>I&#039;m not sure if near the end this part is correct:</p><p>&quot;The Manager is only in operation if two modems are present. Otherwise normal routing takes place.&quot;</p><p>Unless there are rooter scripts to make that a reality then MWAN3 is very much in charge of traffic regardless of how many interfaces are online/present.</p><p>I use MWAN3 at home most of the time with a single WAN interface unless I&#039;m directing traffic out one of the many cracked WiFi networks in my neighborhood for testing MWAN3 from home.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 17 Oct 2014, 02:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250891">
				<div class="post-metadata">
					<div class="post-num">Post #958</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						17 Oct 2014, 03:48					</div>
				</div>
				<div class="post-content content">
					<p>Just downloaded latest version to test, <br />mwan3 - 1.5-8<br />mwan3-luci - 1.3-5</p><br /><br /><p>Scenario, wan is down (physically disconnected), wan2 is connected.</p><p>Why does Policy wan_wan2 (which is simply a priority to wan over wan2), show unreachable.&nbsp; Should it not say wan2 (100%)?</p><br /><br /><p>I am seeing the following:</p><p>Interface status:<br />Interface wan is offline<br />Interface wan2 is online</p><p>Policy wan2_only:<br /> wan2 (100%)</p><p>Policy wan2_wan:<br /> wan2 (100%)</p><p>Policy wan_only:<br /> unreachable</p><p>Policy wan_wan2:<br /> unreachable</p><p>Known networks:<br />destination&nbsp; &nbsp; &nbsp; &nbsp; policy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hits&nbsp; &nbsp; &nbsp;<br />-----------------------------------------------<br />127.0.0.0/8&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 8&nbsp; &nbsp; &nbsp; &nbsp; <br />224.0.0.0/3&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 45&nbsp; &nbsp; &nbsp; &nbsp;<br />10.10.10.0/24&nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 99&nbsp; &nbsp; &nbsp; &nbsp;<br />10.64.64.64&nbsp; &nbsp; &nbsp; &nbsp; default&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; </p><p>Active rules:<br />source&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;destination&nbsp; &nbsp; &nbsp; &nbsp; proto&nbsp; src-port&nbsp; &nbsp; &nbsp; dest-port&nbsp; &nbsp; &nbsp;policy&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hits&nbsp; &nbsp; &nbsp;<br />--------------------------------------------------------------------------------------------------<br />0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0.0.0.0/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; all&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wan2_wan&nbsp; &nbsp; &nbsp; &nbsp; 330</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250934">
				<div class="post-metadata">
					<div class="post-num">Post #959</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						17 Oct 2014, 10:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JohnV wrote:</cite><blockquote><p>Scenario, wan is down (physically disconnected), wan2 is connected.</p><p>Why does Policy wan_wan2 (which is simply a priority to wan over wan2), show unreachable.&nbsp; Should it not say wan2 (100%)?</p></blockquote></div><p>Yes it should. Could you paste your mwan3 config please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251000">
				<div class="post-metadata">
					<div class="post-num">Post #960</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						17 Oct 2014, 20:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Adze wrote:</cite><blockquote><p>Yes it should. Could you paste your mwan3 config please?</p></blockquote></div><p>I am fairly certain it was correct with the previous version of mwan3 I was using, but I dont remember the V#.</p><br /><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option timeout &#039;2&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;</p><p>config interface &#039;wan2&#039;<br />&nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; option reliability &#039;1&#039;<br />&nbsp; &nbsp; option count &#039;1&#039;<br />&nbsp; &nbsp; option interval &#039;5&#039;<br />&nbsp; &nbsp; option down &#039;3&#039;<br />&nbsp; &nbsp; option up &#039;8&#039;<br />&nbsp; &nbsp; option timeout &#039;5&#039;</p><p>config policy &#039;wan_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m10_w10&#039;</p><p>config policy &#039;wan2_only&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m10_w10&#039;</p><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m10_w10&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m20_w10&#039;</p><p>config policy &#039;wan2_wan&#039;<br />&nbsp; &nbsp; list use_member &#039;wan2_m10_w10&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m20_w10&#039;</p><p>config rule &#039;default_rule&#039;<br />&nbsp; &nbsp; option dest_ip &#039;0.0.0.0/0&#039;<br />&nbsp; &nbsp; option proto &#039;all&#039;<br />&nbsp; &nbsp; option use_policy &#039;wan2_wan&#039;</p><p>config member &#039;wan_m10_w10&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;10&#039;<br />&nbsp; &nbsp; option weight &#039;10&#039;</p><p>config member &#039;wan2_m10_w10&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;10&#039;<br />&nbsp; &nbsp; option weight &#039;10&#039;</p><p>config member &#039;wan_m20_w10&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option metric &#039;20&#039;<br />&nbsp; &nbsp; option weight &#039;10&#039;</p><p>config member &#039;wan2_m20_w10&#039;<br />&nbsp; &nbsp; option interface &#039;wan2&#039;<br />&nbsp; &nbsp; option metric &#039;20&#039;<br />&nbsp; &nbsp; option weight &#039;10&#039;</p>											<p class="post-edited">(Last edited by <strong>JohnV</strong> on 17 Oct 2014, 20:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251002">
				<div class="post-metadata">
					<div class="post-num">Post #961</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						17 Oct 2014, 20:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JohnV wrote:</cite><blockquote><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m10_w10&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m20_w10&#039;</p></blockquote></div><p>You do not have a wan2 member in this policy.</p>											<p class="post-edited">(Last edited by <strong>arfett</strong> on 17 Oct 2014, 20:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251031">
				<div class="post-metadata">
					<div class="post-num">Post #962</div>
					<div class="post-author">JohnV</div>
					<div class="post-datetime">
						18 Oct 2014, 03:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>JohnV wrote:</cite><blockquote><p>config policy &#039;wan_wan2&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m10_w10&#039;<br />&nbsp; &nbsp; list use_member &#039;wan_m20_w10&#039;</p></blockquote></div><p>You do not have a wan2 member in this policy.</p></blockquote></div><br /><p>Strange, but correct.</p><p>Must have fallen out somewhere, or a typo from a dev.</p><p>Sorry to bother everyone.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251037">
				<div class="post-metadata">
					<div class="post-num">Post #963</div>
					<div class="post-author">fggs</div>
					<div class="post-datetime">
						18 Oct 2014, 05:46					</div>
				</div>
				<div class="post-content content">
					<p>Good evening,</p><p>&nbsp; I&#039;m looking for a dual wan script and I think this one might be what I&#039;m looking for. I will describe below what I need and I hope someone can tell me if this package can do this.</p><p>&nbsp; I have two WANs, one is static ip (manually set) that I&#039;m gonna call WAN #1 and the other is pppoe with static ip that I&#039;m gonna call WAN #2.</p><p>&nbsp; I want WAN #1 to be my primary link, if it goes down, test if WAN #2 is up and switch to WAN #2, if WAN #1 comes back online, switch back to WAN #1, if both links are down, test each one within 5 minutes and switch to whatever comes online first.</p><p>&nbsp; Also, how is the check of WAN status made? Because from what I&#039;ve searched, it works better if pinging a highly available ip like 8.8.8.8, some scripts I&#039;ve seen pings only the WAN&#039;s gateway which sometimes is up but the connectivity itself is down somewhere else.</p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251046">
				<div class="post-metadata">
					<div class="post-num">Post #964</div>
					<div class="post-author">arfett</div>
					<div class="post-datetime">
						18 Oct 2014, 09:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fggs wrote:</cite><blockquote><p>Good evening,</p><p>&nbsp; I&#039;m looking for a dual wan script and I think this one might be what I&#039;m looking for. I will describe below what I need and I hope someone can tell me if this package can do this.</p><p>&nbsp; I have two WANs, one is static ip (manually set) that I&#039;m gonna call WAN #1 and the other is pppoe with static ip that I&#039;m gonna call WAN #2.</p><p>&nbsp; I want WAN #1 to be my primary link, if it goes down, test if WAN #2 is up and switch to WAN #2, if WAN #1 comes back online, switch back to WAN #1, if both links are down, test each one within 5 minutes and switch to whatever comes online first.</p><p>&nbsp; Also, how is the check of WAN status made? Because from what I&#039;ve searched, it works better if pinging a highly available ip like 8.8.8.8, some scripts I&#039;ve seen pings only the WAN&#039;s gateway which sometimes is up but the connectivity itself is down somewhere else.</p><p>Thanks in advance!</p></blockquote></div><p>MWAN3 will do what you want easily. It uses ICMP ping to whatever IP address you want to determine if the link is online.</p><p><a href="http://wiki.openwrt.org/doc/howto/mwan3">http://wiki.openwrt.org/doc/howto/mwan3</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251068">
				<div class="post-metadata">
					<div class="post-num">Post #965</div>
					<div class="post-author">fggs</div>
					<div class="post-datetime">
						18 Oct 2014, 14:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><p>MWAN3 will do what you want easily. It uses ICMP ping to whatever IP address you want to determine if the link is online.</p><p><a href="http://wiki.openwrt.org/doc/howto/mwan3">http://wiki.openwrt.org/doc/howto/mwan3</a></p></blockquote></div><p>Thanks! That&#039;s awesome! I forgot to mention, can I also choose manually which WAN to use?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251071">
				<div class="post-metadata">
					<div class="post-num">Post #966</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						18 Oct 2014, 15:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fggs wrote:</cite><blockquote><p>Thanks! That&#039;s awesome! I forgot to mention, can I also choose manually which WAN to use?</p></blockquote></div><p>Yes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251094">
				<div class="post-metadata">
					<div class="post-num">Post #967</div>
					<div class="post-author">doctor64</div>
					<div class="post-datetime">
						18 Oct 2014, 19:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arfett wrote:</cite><blockquote><div class="quotebox"><cite>Vahe91 wrote:</cite><blockquote><p>i have same problem after installing build BB 14.07 at 2.10.2014</p></blockquote></div><p>BB 14.07 is broken not the package. This is a comon issue since the final release if you google the problem or look on the forum. I installed BB 14.07 and did a reset to defaults and opkg.conf was still pointing to trunk package repositories and I was unable to install any packages.</p></blockquote></div><p>I was able to install mwan3 luci app on BB 14.97 by issuing <br /></p><div class="codebox"><pre><code>root@ap-main:/tmp# IPKG_NO_SCRIPT=1
root@ap-main:/tmp# export IPKG_NO_SCRIPT
root@ap-main:/tmp# opkg install mwan3_latest_all.ipk
Installing mwan3 (1.4-24) to root...
Configuring mwan3.
Configuring luci-app-mwan3.</code></pre></div><p>Not yet fully set up new installation, but luci interface seems to be working</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251721">
				<div class="post-metadata">
					<div class="post-num">Post #968</div>
					<div class="post-author">md55</div>
					<div class="post-datetime">
						23 Oct 2014, 09:40					</div>
				</div>
				<div class="post-content content">
					<p>Hello!<br />How stable is latest mwan3 with barrier_breaker/14.07 now?<br />Are there known issues?</p>											<p class="post-edited">(Last edited by <strong>md55</strong> on 23 Oct 2014, 09:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p251723">
				<div class="post-metadata">
					<div class="post-num">Post #969</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						23 Oct 2014, 09:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>md55 wrote:</cite><blockquote><p>How stable is latest mwan3 with barrier_breaker/14.07 now?<br />Are there known issues?</p></blockquote></div><p>I&#039;m not aware of any current issues..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252186">
				<div class="post-metadata">
					<div class="post-num">Post #970</div>
					<div class="post-author">netbus</div>
					<div class="post-datetime">
						27 Oct 2014, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>is it possible to get some debug output?<br />because since yesterday both interfaces are tagged as offline even they are online.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252208">
				<div class="post-metadata">
					<div class="post-num">Post #971</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						27 Oct 2014, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>netbus wrote:</cite><blockquote><p>is it possible to get some debug output?<br />because since yesterday both interfaces are tagged as offline even they are online.</p></blockquote></div><p>There are no debug options. Only debugging is by troubleshooting. The reason your wans are marked offline is probably because the track-ip host you are trying to reach is unresponsive. You could try and ping it yourself and see if this is indeed the case.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252287">
				<div class="post-metadata">
					<div class="post-num">Post #972</div>
					<div class="post-author">asergiu</div>
					<div class="post-datetime">
						28 Oct 2014, 12:12					</div>
				</div>
				<div class="post-content content">
					<p>How do I use the mwan3 package with an interface that is not listed in the /etc/config/network ?<br />Example: <br />I have a dual radio and use the 5G as client for a wirelees network towards a 4G modem that exposes a wireless network ?<br />It says that the interface is wither not present or that it does not have a default route in the main routing table</p><p>It has a default route and a metric set up on it but of course as being wireless it does not appear in the /etc/config/network</p><p>Thx<br />Adrian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252288">
				<div class="post-metadata">
					<div class="post-num">Post #973</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						28 Oct 2014, 12:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>asergiu wrote:</cite><blockquote><p>How do I use the mwan3 package with an interface that is not listed in the /etc/config/network ?</p></blockquote></div><p>You can&#039;t. It has to be in /etc/config/network</p><div class="quotebox"><cite>asergiu wrote:</cite><blockquote><p>Example: <br />I have a dual radio and use the 5G as client for a wirelees network towards a 4G modem that exposes a wireless network ?<br />It says that the interface is wither not present or that it does not have a default route in the main routing table</p><p>It has a default route and a metric set up on it but of course as being wireless it does not appear in the /etc/config/network</p></blockquote></div><p>How did you configure this wireless interface, as it does have an ip address?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252290">
				<div class="post-metadata">
					<div class="post-num">Post #974</div>
					<div class="post-author">asergiu</div>
					<div class="post-datetime">
						28 Oct 2014, 12:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>You can&#039;t. It has to be in /etc/config/network</p></blockquote></div><p>Why ? You can add networks that are not in /etc/config/network ! Take a look here in the images. I can send you the configs as well - stripped of wifi paswords.</p><div class="quotebox"><blockquote><p>How did you configure this wireless interface, as it does have an ip address?</p></blockquote></div><p><span class="postimg"><img src="https://drive.google.com/file/d/0BzUgSMhjCTA5ZGljbHVsTTE5eVE/view?usp=sharing" alt="Interfaces" /></span><br /><a href="https://drive.google.com/file/d/0BzUgSMhjCTA5ZGljbHVsTTE5eVE/view?usp=sharing">https://drive.google.com/file/d/0BzUgSM … sp=sharing</a><br /><span class="postimg"><img src="https://drive.google.com/file/d/0BzUgSMhjCTA5d2xfRFd1bk1kM1k/view?usp=sharing" alt="Wifi Interfaces - one in client mode" /></span><br /><a href="https://drive.google.com/file/d/0BzUgSMhjCTA5d2xfRFd1bk1kM1k/view?usp=sharing">https://drive.google.com/file/d/0BzUgSM … sp=sharing</a><br /><span class="postimg"><img src="https://drive.google.com/file/d/0BzUgSMhjCTA5bmkxRmNYaXdEVHM/view?usp=sharing" alt="Wifi Interfaces - edit interface" /></span><br /><a href="https://drive.google.com/file/d/0BzUgSMhjCTA5bmkxRmNYaXdEVHM/view?usp=sharing">https://drive.google.com/file/d/0BzUgSM … sp=sharing</a></p><p>So the Bouygues4G interface was created when I set up the Wifi 5G in client mode and connected it to the 4G modem. I said &quot;create interface&quot; and the name was Bouygues 4G. Then I setup the interface with DHCP - so is getting its IP address from the 4G modem. I assinged it a firewall zone as well and that&#039;s it.</p><p>Can we discuss this over skype or some IM (hangouts ) ? - maybe I can contribute as well to mwan3 if necessary ?</p><p>Thx,<br />Adrian</p>											<p class="post-edited">(Last edited by <strong>asergiu</strong> on 28 Oct 2014, 12:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252291">
				<div class="post-metadata">
					<div class="post-num">Post #975</div>
					<div class="post-author">Adze</div>
					<div class="post-datetime">
						28 Oct 2014, 12:43					</div>
				</div>
				<div class="post-content content">
					<p>Then it is in your /etc/config/network...</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 39 of 65</div><nav><ul><li><a href="viewtopic.php%3Fid=39052&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=37.html">37</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=38.html">38</a></li><li class="pagination-current"><span>39</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=40.html">40</a></li><li><a href="viewtopic.php%3Fid=39052&amp;p=41.html">41</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=39052&amp;p=65.html">65</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>