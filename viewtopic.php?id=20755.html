<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is monitor mode not working in 8.09.1?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p90181">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						21 Jun 2009, 09:07					</div>
				</div>
				<div class="post-content content">
					<p>Just upgraded from 8.09 to 8.09.1, installed kismet, aircrack-ng,etc like I always do. I edited the /etc/kismet/kismet.conf file to use the wl0 interface, instead of the eth1 as it has has by default since who-knows-when. I then simlinked /etc/kismet/kismet.conf to /etc/kismet.conf.</p><p>Nothing new here...</p><p>I ran kismet_server, with the -n option for no logging, like I often do, but today, BLAM!! Unable to switch to monitor mode!</p><p>console output snippet below:</p><p>root@OpenWrt:~# kismet_server -n<br />Not logging any data<br />Suid priv-dropping disabled.&nbsp; This may not be secure.<br />No specific sources given to be enabled, all will be enabled.<br />Enabling channel hopping.<br />Enabling channel splitting.<br />NOTICE: Disabling channel hopping, no enabled sources are able to change channel.<br />Source 0 (wrt): Enabling monitor mode for wrt54g source interface wl0 channel 6...<br />FATAL: Could not find &#039;monitor&#039; private ioctl or use the newer style &#039;mode monitor&#039; command.&nbsp; Different firmwares have used different methods of entering monitor mode on the wrt54, make sure you are running the latest open-source firmware for your device.</p><p>Any thoughts/comments??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90184">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Dogge</div>
					<div class="post-datetime">
						21 Jun 2009, 12:31					</div>
				</div>
				<div class="post-content content">
					<p>Using 2.4 or 2.6 kernel for 8.09.1?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90201">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						22 Jun 2009, 06:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using the 2.4. I I was using 2.6, I don&#039;t think I&#039;d have wireless at all. As I mentioned to a individual shortly before my last post, I don&#039;t think WiFi works on 2.6 on Broadcomm machines.</p><p>Sorry, it was late last night when I posted, and I forgot my manners.</p><p>Hardware: WRT54GS V3, Openwrt 8.09.1 for that model. No hardware mods (yet...), unless you count the broken antenna (don&#039;t ask).</p><p>--Aaron</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90602">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						29 Jun 2009, 20:55					</div>
				</div>
				<div class="post-content content">
					<p>garlicsalt2,</p><p>Did it work for you in 8.09? (See my previous <a href="http://forum.openwrt.org/viewtopic.php?id=18616">post</a> on this issue.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90631">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						30 Jun 2009, 05:58					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it worked fine in the original 8.09.</p><p>Oddly enough, I can set WiFi mode to monitor using the Web interface. If I then login via terminal, any command that I issue that accesses the WiFi interface causes the Router to immediately reboot.</p><p>For example, just typing &#039;iwconfig&#039; or &#039;iwpriv&#039; by itself, and pressing enter, causes an immediate restart. Wireless works ok again if I go back into the Web interface and set back to Master.</p><p>--Aaron</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90692">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						1 Jul 2009, 00:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>garlicsalt2 wrote:</cite><blockquote><p>Yes, it worked fine in the original 8.09.</p></blockquote></div><p>Not on my wrt54gl (which I thought was equivalent to the wrt54gs v3, except for less memory.)</p><p>In playing around with both versions, I noticed wl monitor doesn&#039;t bring up prism0 on 8.09.1 like it does on 8.09.&nbsp; Try getting Kismet to work after running &quot;ifconfig prism0 up.&quot;&nbsp; This doesn&#039;t work on the wrt54gl but maybe on your gs?</p>											<p class="post-edited">(Last edited by <strong>Belfry</strong> on 1 Jul 2009, 00:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90913">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						6 Jul 2009, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Odd, I don&#039;t see a prism0 iface, except after executing </p><div class="codebox"><pre><code>wlc monitor 1</code></pre></div><p>If I set Kismet to use the prism0 interface, it still reboots.</p><p>I NEVER saw a prism0 interface under 8.09. I DID see a wmonitor0 when NOT in monitor mode. iwconfig showed that wmaster0 was in monitor mode, but it never worked directly with Kismet. wmonitor0 interface disappeared when when wlan0 was switched into monitor mode.</p><p>Regarding the WRT54GL vs WRT54GS, yes you are correct, they are very similar on the HARDWARE level. The openwrt firmware is compiled separately for wrt54g/gl than for wrt54gs. Also, h/w versions 1-3 use one firmware release each, whereas version 4 hardware uses its own firmware on each. Check the download area for confirmation of this.</p><p>The firmware differences are, I presume, designed to use the available RAM and Flash on each model. My GS, I believe, has both 2x the RAM and 2x the Flash. It would appear that there are more differences in the software/firmware of which the Developers may not be aware.</p><p>I have a v4 WRT54G mainboard, but I seem to have wiped-out the entire flash area. I believe a jtag kit needs to be used to recover it. That, however, is a story for another time and/or thread.</p><p>--Aaron.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90915">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						6 Jul 2009, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I take it back. prism0 DOES exist before and after setting monitor mode.</p><p>I did have partial success, while trying the following:<br /></p><div class="codebox"><pre><code>wlc down; wlc up; wlc monitor 0;

kismet_server -n</code></pre></div><p>This no longer reboots my router, but kismet still complains that it can&#039;t enable monitor mode. Odd, because the card is already in Monitor mode, right??!?</p><p>Hmm.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91049">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">geekazoid</div>
					<div class="post-datetime">
						8 Jul 2009, 18:42					</div>
				</div>
				<div class="post-content content">
					<p>I have been struggling with the same condition myself - monitor mode causes reboot.</p><p>I have three identical WRT54GS v2 </p><p>- Broadcom BCM4712 chip rev 2 system type<br />- BCM3302 v0.7 CPU<br />- 32MB memory<br />- wl0: Broadcom BCM4320 802.11 Wireless Controller 4.150.10.5</p><p>so I&#039;m using the brcm-2.4 image from:&nbsp; [link]<a href="http://downloads.openwrt.org/kamikaze/8.09.1/brcm-2.4/openwrt-wrt54gs-squashfs.bin">http://downloads.openwrt.org/kamikaze/8 â€¦ uashfs.bin</a>[/link]</p><p>I&#039;m testing with the 8.09.1 but I&#039;ve also tried 8.09 - same behavior.</p><br /><p>My kismet installation is from the standard packages repository </p><div class="codebox"><pre><code>opkg update
opkg install kismet-client kismet-server kismet-drone</code></pre></div><p>When I put the radio into monitor mode - however you like - and then do *anything* that talks to the device (iwconfig, run kismet or airdump - anything) the system reboots.</p><p>I do get a prism0 interface, only after going into monitor mode.</p><p>Is there a known working version with my kit?</p>											<p class="post-edited">(Last edited by <strong>geekazoid</strong> on 8 Jul 2009, 18:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p91140">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">garlicsalt2</div>
					<div class="post-datetime">
						10 Jul 2009, 00:17					</div>
				</div>
				<div class="post-content content">
					<p>I am listing other posts from people having the same problem, not so much for purposes of discerning a solution, but for reasons of collaboration (In layman&#039;s terms, &quot;working together&quot;). Maybe some individual can make sense of this all. If not, I&#039;ll try PM&#039;ing user/moderator MBM.</p><p><a href="http://forum.openwrt.org/viewtopic.php?id=15859">http://forum.openwrt.org/viewtopic.php?id=15859</a><br /><a href="http://forum.openwrt.org/viewtopic.php?id=17367">http://forum.openwrt.org/viewtopic.php?id=17367</a><br /><a href="http://forum.openwrt.org/viewtopic.php?id=18616">http://forum.openwrt.org/viewtopic.php?id=18616</a><br /><a href="http://forum.openwrt.org/viewtopic.php?id=11096">http://forum.openwrt.org/viewtopic.php?id=11096</a>&nbsp; &lt;--- someone got it working here, but I cannot reproduce this.</p><p>Also, everyone who isn&#039;t already aware, running ifconfig by itself does NOT list interfaces that are not UP. To list ALL interfaces, use -a, as in </p><div class="codebox"><pre><code> ifconfig -a</code></pre></div><p>This will list ALL interfaces that exist at the moment the command was run.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96429">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">vio</div>
					<div class="post-datetime">
						27 Oct 2009, 02:14					</div>
				</div>
				<div class="post-content content">
					<p>Anyone figure this out?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p101225">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						23 Jan 2010, 08:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>garlicsalt2 wrote:</cite><blockquote><p>Yes, it worked fine in the original 8.09.</p><p>Oddly enough, I can set WiFi mode to monitor using the Web interface. If I then login via terminal, any command that I issue that accesses the WiFi interface causes the Router to immediately reboot.</p><p>For example, just typing &#039;iwconfig&#039; or &#039;iwpriv&#039; by itself, and pressing enter, causes an immediate restart. Wireless works ok again if I go back into the Web interface and set back to Master.</p><p>--Aaron</p></blockquote></div><p>Hmmm, I get the same behavior in 8.09, 8.09.1, and 8.09.2 (2.4 kernel). Anyone get this working?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>