<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> transport problem:switch doesn&#039;t work,PHY-ID read incorrect</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p218624">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">zepanwucai</div>
					<div class="post-datetime">
						27 Nov 2013, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>I have problem with openwrt transport, the target platfrom is ar9344+ar8327.<br />I&#039;m trying bring up the switch ar8327,while it doesn&#039;t work:<br />&nbsp; &nbsp; mdio driver&nbsp; scan the mdio-bus to find the device, and it find 2 device, phy-id is 0x12800000,0x00000760. but my ar8327 driver indicate the phy-id should be 0x004d****, as a result, ar8327 driver can&#039;t bind to device ar8327, and it doesn&#039;t work.<br />&nbsp; you see, the main problem is phy-id read incorrect, but the mido config is default from bootloader(it is work on the original firmware), it should be right.<br />&nbsp; i have no idea with this problem,&nbsp; can you give me some hint?<br />&nbsp; thanks very much!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218627">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						27 Nov 2013, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>read this <a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/patches-3.10/605-MIPS-ath79-db120-fixes.patch">patch</a><br />DB120 have ar9344+ar8327.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218897">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						30 Nov 2013, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>Welcome to the crazy world of the WD My Net N750 (I guess that&#039;s the device you&#039;re working on).<br />By now I pretty much know the AR9344 and AR8327N registers by heart, scanned the bootloader code and reversed the original network driver.</p><p>I have yet to find where they mess up the ethernet so badly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218998">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zepanwucai</div>
					<div class="post-datetime">
						2 Dec 2013, 04:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heffer wrote:</cite><blockquote><p>Welcome to the crazy world of the WD My Net N750 (I guess that&#039;s the device you&#039;re working on).<br />By now I pretty much know the AR9344 and AR8327N registers by heart, scanned the bootloader code and reversed the original network driver.</p><p>I have yet to find where they mess up the ethernet so badly.</p></blockquote></div><p>really? I build the db120 version, but it still can&#039;t work: buildin switch can be detected(phy id read as 0x4d****), while the ar8327 can&#039;t be detected(phy id read as 0x1280000 or 0x760). <br />what&#039;s wrong with it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219027">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						2 Dec 2013, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>If we&#039;re both talking about the WD My Net N750 I can&#039;t exactly tell you what&#039;s wrong. My current guess is that the MDIO bus is too fast for the switch so it doesn&#039;t correctly communicate.</p><p>Please read this thread for all the information we currently have on the problem: <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2013-October/022002.html">https://lists.openwrt.org/pipermail/ope … 22002.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219302">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">zepanwucai</div>
					<div class="post-datetime">
						6 Dec 2013, 10:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heffer wrote:</cite><blockquote><p>If we&#039;re both talking about the WD My Net N750 I can&#039;t exactly tell you what&#039;s wrong. My current guess is that the MDIO bus is too fast for the switch so it doesn&#039;t correctly communicate.</p><p>Please read this thread for all the information we currently have on the problem: <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2013-October/022002.html">https://lists.openwrt.org/pipermail/ope … 22002.html</a></p></blockquote></div><p>thank you， I finally solved it.<br />bootloader powerdown all the phy port, and phy CANNOT be READ in the powerdown mode (while it CAN be written).<br />I just poweron all phy port, and it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219315">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						6 Dec 2013, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>How did you solve it then? By going into the bootloader and then issuing boot or did you solve it from within OpenWRT?<br />Can you post a patch?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219319">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">zepanwucai</div>
					<div class="post-datetime">
						6 Dec 2013, 15:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Heffer wrote:</cite><blockquote><p>How did you solve it then? By going into the bootloader and then issuing boot or did you solve it from within OpenWRT?<br />Can you post a patch?</p></blockquote></div><p>I&#039;m using a private bootloader, and I didn&#039;t change the bootloader.<br />I just poweron all phy port before scan mii bus, it&#039;s in the openwrt.<br />um... infact i&#039;m new to linux, i&#039;m not familiar with &quot;post patch&quot;, and time is late(i&#039;m in china), I will try to post patch tomorrow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219469">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						9 Dec 2013, 01:50					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the tip! I got it working too.</p><p>Now I&#039;m working on preparing integration of this device into trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219903">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Heffer</div>
					<div class="post-datetime">
						13 Dec 2013, 15:41					</div>
				</div>
				<div class="post-content content">
					<p>Patches for the My Net N750 posted to mailing list, please test if you can:</p><p><a href="http://patchwork.openwrt.org/patch/4570/">http://patchwork.openwrt.org/patch/4570/</a><br /><a href="http://patchwork.openwrt.org/patch/4573/">http://patchwork.openwrt.org/patch/4573/</a><br /><a href="http://patchwork.openwrt.org/patch/4571/">http://patchwork.openwrt.org/patch/4571/</a><br /><a href="http://patchwork.openwrt.org/patch/4572/">http://patchwork.openwrt.org/patch/4572/</a></p>											<p class="post-edited">(Last edited by <strong>Heffer</strong> on 13 Dec 2013, 15:44)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>