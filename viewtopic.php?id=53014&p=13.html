<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Files and install instructions for HooToo HT-TM02 and HT-TM04(RT5350)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 29 Mar 2018 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 13 of 27</div><nav><ul><li><a href="viewtopic.php%3Fid=53014&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=15.html">15</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=27.html">27</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p292406">
				<div class="post-metadata">
					<div class="post-num">Post #301</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						18 Sep 2015, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>@IdiotProof I probably have been in part to blame for the perception about AP + STA being a chipset as opposed to OpenWRT issue.&nbsp; klaberte has straightened me out, thankfully, that it&#039;s an OpenWRT design issue, which maybe in it&#039;s time was an OK solution for a home based bridge.</p><p>@klaberte GL.iNet is a business, and I do not expect them to give any of this away.&nbsp; &nbsp;Alfie is a very nice player, but I would not ask him to do such.&nbsp; That said, I am considering buying a device pretty much for hotel use where I will use multiple devices and use the client based tools in other places.</p><p>Your right, there is just not enough interest in this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292431">
				<div class="post-metadata">
					<div class="post-num">Post #302</div>
					<div class="post-author">klaberte</div>
					<div class="post-datetime">
						18 Sep 2015, 21:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>IdiotProof wrote:</cite><blockquote><p>Just so you don&#039;t get the wrong idea, I do understand that AP+STA does not work correctly with OpenWrt on the TM02 (it does work by using no encryption on the STA side however).&nbsp; I now know that AP+AP works (though is useless to me) and I still would like to see if going from AP+AP to AP+STA by scanning may work in some way.&nbsp; However, getting encryption working on both sides, seems to be the problem with AP+STA, so I plan to move on from here to use the USB2Wifi adapter when it arrives.</p></blockquote></div><p>When you get the usb2wifi adapter (which one, btw?), please let us know how well it works for you.&nbsp; As mentioned above, it works well (enough) for RangerZ, not so well for me.&nbsp; But if you really have no ethernet device in your bag, you are going to have to have a dependable way to reconfigure your travel router via wireless.&nbsp; &nbsp;You could go back to the stock hootoo OEM firmware, which does this out of the box (using the hootoo app), but what is the fun of that?!&nbsp; Also, almost no chance OpenVPN will ever work.</p><p>Given the price and the popularity of the HooToo on amazon.com, I think a lot of future readers will eventually find this thread.&nbsp; It will be good once we perfect a solid answer of how to set things up for the road warrior.&nbsp; Please keep sharing your test results.</p><p>As for me, I have pretty much decided to focus on the 6414 for the reasons I listed above.&nbsp; I&#039;ll probably buy two and use the double-stick tape option, or stick with one and accept using the wired laptop configuration each time.&nbsp; I&#039;m waiting to get my external antenna gl-inet, which is on a boat from Hong Kong at present.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292641">
				<div class="post-metadata">
					<div class="post-num">Post #303</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						20 Sep 2015, 00:13					</div>
				</div>
				<div class="post-content content">
					<p>I wonder if someone can help me with this one:</p><p>I need to overwrite the bootloader partition, mtd0 (u-boot).&nbsp; It turns out that when I restored my TM03 to factory firmware the bootloader was still the original one, probably due to how I installed OpenWRT in the first place.&nbsp; So I&#039;ve installed OpenWRT on the TM02 using the factory bin image from <a href="http://wiki.openwrt.org/toh/hootoo/tripmate-nano">http://wiki.openwrt.org/toh/hootoo/tripmate-nano</a> and then the 15.05 sysupgrade image figuring that&#039;s what most people would do.&nbsp; This overwrote the bootloader with the OpenWRT release and now I can&#039;t get the factory firmware to reload properly.&nbsp; If I could get the original bootloader back on mtd0 that might do the trick.</p><p>It throws errors when trying to write.<br />root@OpenWrt:/tmp# mtd -f write Bootloader.bin u-boot<br />Could not open mtd device: u-boot<br />Can&#039;t open device for writing!</p><p>wingspinner posted these steps which are the ones I want to try next but don&#039;t know how to make the mtd partition writeable.<br />1. Shutdown the squashFS and run out of a ramdisk<br />2. Using mtd write &quot;Bootloader.bin&quot; to the u-boot MTD partition</p><br /><p>Anyone know how?</p>											<p class="post-edited">(Last edited by <strong>mmmdonuts</strong> on 20 Sep 2015, 00:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292785">
				<div class="post-metadata">
					<div class="post-num">Post #304</div>
					<div class="post-author">IdiotProof</div>
					<div class="post-datetime">
						21 Sep 2015, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>Quick update on what happened when I scanned for a connection (started with LAN (AP / WPA2) and WAN (AP / unencrypted), then scanned for a new SSID to connect to the WAN as STA - as described previously.&nbsp; When I got back in, I found only the one wireless interface which I had scanned for (STA) - the LAN AP was gone, and the remaining interface had associated with the wan in the firewall rules which I think I configured before the commit.&nbsp; Gonna leave that alone for now since the USB2Wifi adapter seems like it will work for me. </p><p>@klaberte, I now have a wired ethernet adapter for my tablet so can access the TM02 much more easily, and I also received an Edimax EW-7811Un (which I think is the same one Ranger Z uses).&nbsp; Followed the instructions from Ranger Z <a href="https://forum.openwrt.org/viewtopic.php?id=58548">here</a>, only needed to install kmod-rtl8192cu, and reset.&nbsp; This worked, however the adapter has issues and is being sent back (outside 10ft from the AP, there is massive packet loss even on a PC).</p><p>The good news is that I was able to use the Edimax + USB thumbdrive with a USB 2.0 hub (had seen there were problems with that setup noted before).&nbsp; When plugged into the USB hub, the Edimax was seen as a new radio (radio2) and therefore had to be reconfigured - the Edimax was present as radio1 when installed directly in the TM02&#039;s USB port.&nbsp; I was able to access the thumbdrive normally when connected to the hub with the Edimax also connected.&nbsp; No idea about performance with that setup and a non-defective Edimax however.&nbsp; The USB hub I used is a &quot;Ableconn USB2HUB2B USB 2.0 2-Port Compact Hub (Black)&quot; from Amazon.</p><p>@RangerZ, I was able to get the Edimax working with your instructions in the other <a href="https://forum.openwrt.org/viewtopic.php?id=58548">thread</a> (thanks), and I think once I have a working adapter I should be good to go.</p><p>Getting closer to a TM02 with AP+STA working as an Openwrt client!</p>											<p class="post-edited">(Last edited by <strong>IdiotProof</strong> on 21 Sep 2015, 08:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292819">
				<div class="post-metadata">
					<div class="post-num">Post #305</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						21 Sep 2015, 15:37					</div>
				</div>
				<div class="post-content content">
					<p>I can not explain why my unit works and&nbsp; most others are problems.&nbsp; Mine are 1-2 years old.&nbsp; There are at least 2 other micro size adapters, but I have not checked to see if these are compatible.<br /><a href="http://support.netgear.com/product/WNA1000M">http://support.netgear.com/product/WNA1000M</a><br /><a href="http://www.trendnet.com/products/proddetail.asp?prod=195_TEW-648UBM">http://www.trendnet.com/products/prodde … TEW-648UBM</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292874">
				<div class="post-metadata">
					<div class="post-num">Post #306</div>
					<div class="post-author">klaberte</div>
					<div class="post-datetime">
						21 Sep 2015, 21:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>I can not explain why my unit works and&nbsp; most others are problems.&nbsp; Mine are 1-2 years old.&nbsp; There are at least 2 other micro size adapters, but I have not checked to see if these are compatible.<br /><a href="http://support.netgear.com/product/WNA1000M">http://support.netgear.com/product/WNA1000M</a><br /><a href="http://www.trendnet.com/products/proddetail.asp?prod=195_TEW-648UBM">http://www.trendnet.com/products/prodde … TEW-648UBM</a></p></blockquote></div><p>The Edimax discussed here is very popular with the Raspberry Pi community, although I have seen others describe random issues that people write-off to manufacturing quality control.</p><p>From this link it seems that there are other re-badged versions, including at least one of the devices quoted here by RangerZ.</p><p><a href="https://wiki.debian.org/rtl819x#supported-rtl8192cu">https://wiki.debian.org/rtl819x#supported-rtl8192cu</a></p><p>I&#039;m inclined to buy one of these other devices and see how they compare.&nbsp; Also, the desire to add a second radio to an openwrt device should not be only a hootoo issue (or even a travel router issue).&nbsp; Perhaps we should start poking around outside of this thread.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292877">
				<div class="post-metadata">
					<div class="post-num">Post #307</div>
					<div class="post-author">klaberte</div>
					<div class="post-datetime">
						21 Sep 2015, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>I just ordered these two, and will report back once tested:</p><p><a href="http://www.amazon.com/gp/product/B00FWMEFES">http://www.amazon.com/gp/product/B00FWMEFES</a><br /><a href="http://www.amazon.com/gp/product/B00H28H8DU">http://www.amazon.com/gp/product/B00H28H8DU</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292910">
				<div class="post-metadata">
					<div class="post-num">Post #308</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						22 Sep 2015, 03:50					</div>
				</div>
				<div class="post-content content">
					<p>FYI: There is a bug in openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649.bin, the file used to flash OpenWRT onto TM01/2/3 routers via the HooToo firmware upgrade.&nbsp; The backup created by the script would have a bad Rootfs.bin as a result.</p><p>USERMTD=&quot;$MTDPRE/mtd7&quot;<br />ROOTFSMTD=&quot;$MTDPRE/mtd7&quot;&nbsp; &lt;-- should be mtd8!!!</p><p>I don&#039;t know if wingspinner is still around to correct this.&nbsp; It could prevent someone from restoring to factory firmware if they didn&#039;t create their own backup before running the conversion to OpenWRT.&nbsp; Of course that is once a reliable process to restore from the backup is developed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292933">
				<div class="post-metadata">
					<div class="post-num">Post #309</div>
					<div class="post-author">IdiotProof</div>
					<div class="post-datetime">
						22 Sep 2015, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>I bought this one, will report back on how it works (decided I want an ext antenna):<br /><a href="http://www.amazon.com/TP-LINK-TL-WN722N-Wireless-Adapter-External/dp/B002SZEOLG">http://www.amazon.com/TP-LINK-TL-WN722N … B002SZEOLG</a><br />Atheros based:<br /><a href="https://wikidevi.com/wiki/TP-LINK_TL-WN722N">https://wikidevi.com/wiki/TP-LINK_TL-WN722N</a></p><p>Update: This works, just had to install the following:<br />kmod-ath<br />kmod-ath9k-common<br />kmod-ath9k-htc</p><p>Copied the settings from wifi detect into /etc/config/wireless and I was in business.&nbsp; </p><p>Also works though the Ableconn USB2 hub.</p>											<p class="post-edited">(Last edited by <strong>IdiotProof</strong> on 24 Sep 2015, 09:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293112">
				<div class="post-metadata">
					<div class="post-num">Post #310</div>
					<div class="post-author">sleopantro</div>
					<div class="post-datetime">
						23 Sep 2015, 14:15					</div>
				</div>
				<div class="post-content content">
					<p>Good day everyone and thanks for all the info and work on tripmate. <br />I got the tripmate ht-tm01 and followed the instruction on this thread to install openwrt into it. It was successful however I tried to update it and bricked it. I have gotten all the files and serial console to unbrick it but don&#039;t know how to attach it to the board or what to do from there. Will greatly appreciate it if a detailed tutorial or a picture of where the cables are to be attached to. Also, I&#039;m a supernoob with limited knowledge in this field ; it&#039;s actually a hobby. However, I so love the device and also brought the tripmate ht-tm02. </p><p>I hope to run a WIFI cyber cafe with the device, will it be possible?</p>											<p class="post-edited">(Last edited by <strong>sleopantro</strong> on 23 Sep 2015, 14:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293127">
				<div class="post-metadata">
					<div class="post-num">Post #311</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						23 Sep 2015, 15:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sleopantro wrote:</cite><blockquote><p>Good day everyone and thanks for all the info and work on tripmate. <br />I got the tripmate ht-tm01 and followed the instruction on this thread to install openwrt into it. It was successful however I tried to update it and bricked it. I have gotten all the files and serial console to unbrick it but don&#039;t know how to attach it to the board or what to do from there. Will greatly appreciate it if a detailed tutorial or a picture of where the cables are to be attached to. Also, I&#039;m a supernoob with limited knowledge in this field ; it&#039;s actually a hobby. However, I so love the device and also brought the tripmate ht-tm02. </p><p>I hope to run a WIFI cyber cafe with the device, will it be possible?</p></blockquote></div><p>You don&#039;t need a serial connection to reload the firmware, you can tftp the firmware.bin image onto the router in &quot;recovery&quot; mode.</p><p>This works on TM02 and TM03, should work on TM01.</p><p>You need <br />- A tftp server running on 10.10.10.3.<br />- Copy the firmware.bin file to Kernal.bin (yes, actual spelling and capitalized) in the tftp server default directory.<br />- Ethernet connection.<br />- Running tcpdump on the workstation interface helps.<br />- Paper clip.</p><p>Power off the router, connect everything (via switch or direct), start tftpd, start tcpdump on your network interface, usually eth0.</p><p>Press and hold router reset pin with paper clip.&nbsp; While holding reset then press and hold router power button.&nbsp; Wifi LED should light up then go out again, 3-5 seconds.&nbsp; Continue holding reset and release power.&nbsp; Watch tcpdump output, after another 10-15 seconds you should see 10.10.10.123 looking for tftp on 10.10.10.3. Now you can release the reset pin. If tftp is running the Kernal.bin file will upload right away and you&#039;ll see the upload in tcpdump.</p><p>It can take another 3-5 minutes for the firmware to install.&nbsp; Let it sit for a while, up to 10 minutes, then power cycle the router.&nbsp; It should boot up on default config for OpenWRT.</p>											<p class="post-edited">(Last edited by <strong>mmmdonuts</strong> on 23 Sep 2015, 15:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293444">
				<div class="post-metadata">
					<div class="post-num">Post #312</div>
					<div class="post-author">jdz01</div>
					<div class="post-datetime">
						25 Sep 2015, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>Maybe it is a little stupid question.<br />I bricked my Hootoo. I am able to program (ICP) the flash. But... I lost my stock-firmware backup. <br />What to do???</p><p>e.g.<br />- how can I flash the firmware from the HooToo website? File is too large now.<br />- how can I flash the WRT-firmware by ICP??? (files are [too?] small).</p><p>TIA<br />JDZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293472">
				<div class="post-metadata">
					<div class="post-num">Post #313</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						25 Sep 2015, 20:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jdz01 wrote:</cite><blockquote><p>Maybe it is a little stupid question.<br />I bricked my Hootoo. I am able to program (ICP) the flash. But... I lost my stock-firmware backup. <br />What to do???</p><p>e.g.<br />- how can I flash the firmware from the HooToo website? File is too large now.<br />- how can I flash the WRT-firmware by ICP??? (files are [too?] small).</p><p>TIA<br />JDZ</p></blockquote></div><p>How did you brick it?</p><p>Are you sure it&#039;s dead or can you tell if at least the bootloader is still there?&nbsp; If it still has a working bootloader you should be able to reflash the firmware partition using the firmware.bin file from the OpenWRT factory upgrade image like &quot;openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649.bin&quot;.&nbsp; The firmware.bin is in the tar.gz data portion of that file.</p><p>The HooToo factory firmware files are incomplete and don&#039;t have all of the mtd partitions you would need to reflash.&nbsp; Those only include Bootloader, Kernel and RootFS partitions.&nbsp; Even the backup files created by the OpenWRT &quot;factory&quot; bin image above are not usable and missing the RootFS partition due to a bug.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293482">
				<div class="post-metadata">
					<div class="post-num">Post #314</div>
					<div class="post-author">jdz01</div>
					<div class="post-datetime">
						25 Sep 2015, 22:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><p>How did you brick it?</p></blockquote></div><p>Hi, totally sure I bricked it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; Cause I was playing with jtag, without knowledge. Got some cheap Jtag. Pressed &#039;erase&#039; - wow it worked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />:(:(<br />So no bootloader here anymore. Nothing here anymore.<br />Maybe someone can make a jtag backup of the whole flash, and share this with me....???</p>											<p class="post-edited">(Last edited by <strong>jdz01</strong> on 25 Sep 2015, 23:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293495">
				<div class="post-metadata">
					<div class="post-num">Post #315</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						26 Sep 2015, 00:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jdz01 wrote:</cite><blockquote><p>Hi, totally sure I bricked it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; Cause I was playing with jtag, without knowledge. Got some cheap Jtag. Pressed &#039;erase&#039; - wow it worked <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />:(:(<br />So no bootloader here anymore. Nothing here anymore.<br />Maybe someone can make a jtag backup of the whole flash, and share this with me....???</p></blockquote></div><p>I don&#039;t know enough about JTAG and flash to say if a raw dump of the mtd is all you would need to restore the router.&nbsp; If that would work then it&#039;s only 8MB uncompressed.&nbsp; Shouldn&#039;t be a problem to get a copy loaded somewhere.</p>											<p class="post-edited">(Last edited by <strong>mmmdonuts</strong> on 26 Sep 2015, 00:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293497">
				<div class="post-metadata">
					<div class="post-num">Post #316</div>
					<div class="post-author">sleopantro</div>
					<div class="post-datetime">
						26 Sep 2015, 00:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><div class="quotebox"><cite>sleopantro wrote:</cite><blockquote><p>Good day everyone and thanks for all the info and work on tripmate. <br />I got the tripmate ht-tm01 and followed the instruction on this thread to install openwrt into it. It was successful however I tried to update it and bricked it. I have gotten all the files and serial console to unbrick it but don&#039;t know how to attach it to the board or what to do from there. Will greatly appreciate it if a detailed tutorial or a picture of where the cables are to be attached to. Also, I&#039;m a supernoob with limited knowledge in this field ; it&#039;s actually a hobby. However, I so love the device and also brought the tripmate ht-tm02. </p><p>I hope to run a WIFI cyber cafe with the device, will it be possible?</p></blockquote></div><p>You don&#039;t need a serial connection to reload the firmware, you can tftp the firmware.bin image onto the router in &quot;recovery&quot; mode.</p><p>This works on TM02 and TM03, should work on TM01.</p><p>You need <br />- A tftp server running on 10.10.10.3.<br />- Copy the firmware.bin file to Kernal.bin (yes, actual spelling and capitalized) in the tftp server default directory.<br />- Ethernet connection.<br />- Running tcpdump on the workstation interface helps.<br />- Paper clip.</p><p>Power off the router, connect everything (via switch or direct), start tftpd, start tcpdump on your network interface, usually eth0.</p><p>Press and hold router reset pin with paper clip.&nbsp; While holding reset then press and hold router power button.&nbsp; Wifi LED should light up then go out again, 3-5 seconds.&nbsp; Continue holding reset and release power.&nbsp; Watch tcpdump output, after another 10-15 seconds you should see 10.10.10.123 looking for tftp on 10.10.10.3. Now you can release the reset pin. If tftp is running the Kernal.bin file will upload right away and you&#039;ll see the upload in tcpdump.</p><p>It can take another 3-5 minutes for the firmware to install.&nbsp; Let it sit for a while, up to 10 minutes, then power cycle the router.&nbsp; It should boot up on default config for OpenWRT.</p></blockquote></div><br /><p>thanks for the response. unfortunately, it didn&#039;t work and i think i have messed it up more.<br />everything worked smoothly until the watching the tcpdump output. never saw the &quot;10.10.10.123 looking for tftp on 10.10.10.3. however, i noticed that the tftp server uploaded the Kernal file but didn&#039;t&nbsp; see the upload in tcp dump. however,when i terminated he tcpdump it showed a number of sent and received bytes.</p><p>reviewing all the steps, i noticed i used a hootoo bin named fw-WiFiDGRJ-HooToo-TM01-2.000.022 which i changed to Kernal.bin instead of openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649 file. when i repeated the process i got no response from the tftp server. however, the tcpdump still showed no activity but could send and received bytes.<br />tried to telnet in but got connection timed out. checked the tftp log and got the below</p><p>Connection received from 10.10.10.123 on port 1343 [25/09 21:00:41.525]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [25/09 21:00:41.528]<br />File &lt;Kernal.bin&gt; : error 2 in system call CreateFile The system cannot find the file specified. [25/09 21:00:41.528]<br />Connection received from 10.10.10.123 on port 2702 [25/09 21:00:42.285]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [25/09 21:00:42.287]<br />File &lt;Kernal.bin&gt; : error 2 in system call CreateFile The system cannot find the file specified. [25/09 21:00:42.288]</p><p>it just keeps repeating that.<br />would really appreciate ant input on this</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293506">
				<div class="post-metadata">
					<div class="post-num">Post #317</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						26 Sep 2015, 02:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sleopantro wrote:</cite><blockquote><p>thanks for the response. unfortunately, it didn&#039;t work and i think i have messed it up more.<br />everything worked smoothly until the watching the tcpdump output. never saw the &quot;10.10.10.123 looking for tftp on 10.10.10.3. however, i noticed that the tftp server uploaded the Kernal file but didn&#039;t&nbsp; see the upload in tcp dump. however,when i terminated he tcpdump it showed a number of sent and received bytes.</p><p>reviewing all the steps, i noticed i used a hootoo bin named fw-WiFiDGRJ-HooToo-TM01-2.000.022 which i changed to Kernal.bin instead of openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649 file. when i repeated the process i got no response from the tftp server. however, the tcpdump still showed no activity but could send and received bytes.<br />tried to telnet in but got connection timed out. checked the tftp log and got the below</p><p>Connection received from 10.10.10.123 on port 1343 [25/09 21:00:41.525]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [25/09 21:00:41.528]<br />File &lt;Kernal.bin&gt; : error 2 in system call CreateFile The system cannot find the file specified. [25/09 21:00:41.528]<br />Connection received from 10.10.10.123 on port 2702 [25/09 21:00:42.285]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [25/09 21:00:42.287]<br />File &lt;Kernal.bin&gt; : error 2 in system call CreateFile The system cannot find the file specified. [25/09 21:00:42.288]</p><p>it just keeps repeating that.<br />would really appreciate ant input on this</p></blockquote></div><p>A couple of things.<br />- Make sure the file to be uploaded is in the correct tftp root directory on the server.&nbsp; It looks like it might not be.<br />- You need to extract the firmware.bin file (then rename to Kernal.bin) from the openwrt squashfs-factory.bin file.&nbsp; The file is a script with a data &quot;payload&quot; in tar.gz format.&nbsp; Near the top there is a SKIP value.&nbsp; Further down you&#039;ll find this:</p><p>#Split out the firmware payload<br />/usr/bin/tail -n +$SKIP $0 &gt; &quot;$HTUSB/$USBDIR/$FIRMGZ&quot;</p><p>You have to create the tar.gz file, for example: <br />tail -n +166 openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649.bin &gt; openwrt.tar.gz</p><p>Then extract the files (unzip and untar):<br />tar -xvzf openwrt.tar.gz</p><p>From this you&#039;ll get the uboot.bin and firmware.bin files.</p><p>I&#039;m not sure why tcpdump did not show your network activity, that&#039;s all it does and why I use it to monitor the transfer.&nbsp; It was easy to identify the tftp client and server IP addresses needed by using the tool.&nbsp; The sent/received bytes report is from the tcpdump utility reporting on the interface when you terminated the program, not tftp.</p>											<p class="post-edited">(Last edited by <strong>mmmdonuts</strong> on 26 Sep 2015, 02:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293533">
				<div class="post-metadata">
					<div class="post-num">Post #318</div>
					<div class="post-author">goddy99</div>
					<div class="post-datetime">
						26 Sep 2015, 14:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><p>You don&#039;t need a serial connection to reload the firmware, you can tftp the firmware.bin image onto the router in &quot;recovery&quot; mode.</p><p>This works on TM02 and TM03, should work on TM01.</p><p>You need <br />- A tftp server running on 10.10.10.3.<br />- Copy the firmware.bin file to Kernal.bin (yes, actual spelling and capitalized) in the tftp server default directory.<br />- Ethernet connection.<br />- Running tcpdump on the workstation interface helps.<br />- Paper clip.</p><p>Power off the router, connect everything (via switch or direct), start tftpd, start tcpdump on your network interface, usually eth0.</p><p>Press and hold router reset pin with paper clip.&nbsp; While holding reset then press and hold router power button.&nbsp; Wifi LED should light up then go out again, 3-5 seconds.&nbsp; Continue holding reset and release power.&nbsp; Watch tcpdump output, after another 10-15 seconds you should see 10.10.10.123 looking for tftp on 10.10.10.3. Now you can release the reset pin. If tftp is running the Kernal.bin file will upload right away and you&#039;ll see the upload in tcpdump.</p><p>It can take another 3-5 minutes for the firmware to install.&nbsp; Let it sit for a while, up to 10 minutes, then power cycle the router.&nbsp; It should boot up on default config for OpenWRT.</p></blockquote></div><p>Thanks a lot for this great information. How or where do you got this procedure ?<br />I follow your instructions and was able to unbrick my TM03 using the <a href="http://tftpd32.jounin.net/">Tftpd64</a> under Windows 10.</p><p>Remark: Previously I had already OpenWRT on my TM03, but brick it with installing wrong firmware.</p>											<p class="post-edited">(Last edited by <strong>goddy99</strong> on 26 Sep 2015, 14:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293579">
				<div class="post-metadata">
					<div class="post-num">Post #319</div>
					<div class="post-author">jdz01</div>
					<div class="post-datetime">
						26 Sep 2015, 22:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><p>I don&#039;t know enough about JTAG and flash to say if a raw dump of the mtd is all you would need to restore the router.&nbsp; If that would work then it&#039;s only 8MB uncompressed.&nbsp; Shouldn&#039;t be a problem to get a copy loaded somewhere.</p></blockquote></div><p>I think it is the only opportunity for me... With my (cheap China USB) jtag I cán write my flash memory, so it should work... But I cannot find an 8MB &#039;raw dump&#039; on the web. Maybe somebody here can help me out. Would be very nice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293581">
				<div class="post-metadata">
					<div class="post-num">Post #320</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						26 Sep 2015, 22:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jdz01 wrote:</cite><blockquote><p>I think it is the only opportunity for me... With my (cheap China USB) jtag I cán write my flash memory, so it should work... But I cannot find an 8MB &#039;raw dump&#039; on the web. Maybe somebody here can help me out. Would be very nice.</p></blockquote></div><p>I have a TM02 running the current 15.05 build. If you want an mtd image in its default state (post reset) let me know.&nbsp; I could upload it somewhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293583">
				<div class="post-metadata">
					<div class="post-num">Post #321</div>
					<div class="post-author">jdz01</div>
					<div class="post-datetime">
						26 Sep 2015, 23:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><p>I have a TM02 running the current 15.05 build. If you want an mtd image in its default state (post reset) let me know.&nbsp; I could upload it somewhere.</p></blockquote></div><p>Would be very very nice.</p><p>This forum does not seem to have PM. Maybe you can sent me a wetransfer via jdzveilingatgmail.com<br />TIA</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293585">
				<div class="post-metadata">
					<div class="post-num">Post #322</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						26 Sep 2015, 23:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>goddy99 wrote:</cite><blockquote><p>Thanks a lot for this great information. How or where do you got this procedure ?<br />I follow your instructions and was able to unbrick my TM03 using the <a href="http://tftpd32.jounin.net/">Tftpd64</a> under Windows 10.</p><p>Remark: Previously I had already OpenWRT on my TM03, but brick it with installing wrong firmware.</p></blockquote></div><p>You&#039;re welcome.&nbsp; It took digging, research, trial and error, some desperation and a little experience unbricking other routers.&nbsp; </p><p>I have a TM03 I wanted to restore to factory after trashing it and then loading OpenWRT using the same tftp steps.&nbsp; Luckily the original bootloader from HooToo (also u-boot) was still on it and I got a TM02 to bring the TM03 back to its original state.&nbsp; Then I loaded OpenWRT on the TM02 the clean way to see if I could do the same but the &quot;squashfs-factory&quot; bin replaces the original bootloader and I haven&#039;t been able to restore it.&nbsp; No big deal.&nbsp; I can keep OpenWRT on the TM02 or get a serial cable to play around with it.&nbsp; Until now I did not want to crack them open for the serial connection.</p><p>The TM02+OpenWRT bootloader combination is a little different in that it invokes tftp almost immediately after holding the reset pin and applying power.&nbsp; I don&#039;t know if the delay on the TM03 is due to the hardware (battery) or the bootloader since mine never had the OpenWRT u-boot.&nbsp; Another difference is that the HooToo factory bootloader runs tftp on 10.10.10.128 (client) and 10.10.10.254 (server) looking for &quot;kernel&quot; and &quot;rootfs&quot; files. The above steps are a merger of the two assuming the running bootloader is OpenWRT u-boot image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293597">
				<div class="post-metadata">
					<div class="post-num">Post #323</div>
					<div class="post-author">sleopantro</div>
					<div class="post-datetime">
						27 Sep 2015, 01:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmmdonuts wrote:</cite><blockquote><p>A couple of things.<br />- Make sure the file to be uploaded is in the correct tftp root directory on the server.&nbsp; It looks like it might not be.<br />- You need to extract the firmware.bin file (then rename to Kernal.bin) from the openwrt squashfs-factory.bin file.&nbsp; The file is a script with a data &quot;payload&quot; in tar.gz format.&nbsp; Near the top there is a SKIP value.&nbsp; Further down you&#039;ll find this:</p><p>#Split out the firmware payload<br />/usr/bin/tail -n +$SKIP $0 &gt; &quot;$HTUSB/$USBDIR/$FIRMGZ&quot;</p><p>You have to create the tar.gz file, for example: <br />tail -n +166 openwrt-ramips-rt305x-ht-tm02-squashfs-factory-r42649.bin &gt; openwrt.tar.gz</p><p>Then extract the files (unzip and untar):<br />tar -xvzf openwrt.tar.gz</p><p>From this you&#039;ll get the uboot.bin and firmware.bin files.</p><p>I&#039;m not sure why tcpdump did not show your network activity, that&#039;s all it does and why I use it to monitor the transfer.&nbsp; It was easy to identify the tftp client and server IP addresses needed by using the tool.&nbsp; The sent/received bytes report is from the tcpdump utility reporting on the interface when you terminated the program, not tftp.</p></blockquote></div><p>wish i could be in the same boat as goddy99.<br />if i should follow your instructions i would need to use a linux workstation. that might take a while because i am currently on windows and quite busy. i utilized windump and i don&#039;t know if that could be the problem. i tried it again and got this</p><p>Connection received from 10.10.10.123 on port 1723 [26/09 22:17:33.888]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [26/09 22:17:33.888]<br />OACK: &lt;timeout=5,&gt; [26/09 22:17:33.888]<br />Using local port 54722 [26/09 22:17:33.888]<br />&lt;Kernal.bin&gt;: sent 6801 blks, 3482036 bytes in 4 s. 0 blk resent [26/09 22:17:37.960]</p><p>that&#039;s from the log of tftpd64 but the router refuses to work: still shows a solid blue.<br />i currently have a tripmate th-02, could i use it to get the tripmate th-01 to boot in any possible way?</p>											<p class="post-edited">(Last edited by <strong>sleopantro</strong> on 27 Sep 2015, 01:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293601">
				<div class="post-metadata">
					<div class="post-num">Post #324</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						27 Sep 2015, 02:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sleopantro wrote:</cite><blockquote><p>wish i could be in the same boat as goddy99.<br />if i should follow your instructions i would need to use a linux workstation. that might take a while because i am currently on windows and quite busy. i utilized windump and i don&#039;t know if that could be the problem. i tried it again and got this</p><p>Connection received from 10.10.10.123 on port 1723 [26/09 22:17:33.888]<br />Read request for file &lt;Kernal.bin&gt;. Mode octet [26/09 22:17:33.888]<br />OACK: &lt;timeout=5,&gt; [26/09 22:17:33.888]<br />Using local port 54722 [26/09 22:17:33.888]<br />&lt;Kernal.bin&gt;: sent 6801 blks, 3482036 bytes in 4 s. 0 blk resent [26/09 22:17:37.960]</p><p>that&#039;s from the log of tftpd64 but the router refuses to work: still shows a solid blue.<br />i currently have a tripmate th-02, could i use it to get the tripmate th-01 to boot in any possible way?</p></blockquote></div><p>It looks like tftp is working now so the next step is to get the correct files for Kernal.bin.</p><p>You don&#039;t need linux.&nbsp; If you don&#039;t have cygwin you can download MobaXterm, it has all the tools you need to do the above, with the exception of tcpdump but windump should suffice.&nbsp; MobaX is a lightweight portable install.&nbsp; Make sure the windump is using the network adapter in promiscuous mode, it could be why you don&#039;t see activity.&nbsp; Tcpdump/windump are not needed unless you want to monitor what the router is doing.&nbsp; But since you are able to see the tftp upload it should work once you have the right files.</p>											<p class="post-edited">(Last edited by <strong>mmmdonuts</strong> on 27 Sep 2015, 02:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p293602">
				<div class="post-metadata">
					<div class="post-num">Post #325</div>
					<div class="post-author">mmmdonuts</div>
					<div class="post-datetime">
						27 Sep 2015, 02:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jdz01 wrote:</cite><blockquote><p>Would be very very nice.</p><p>This forum does not seem to have PM. Maybe you can sent me a wetransfer via jdzveilingatgmail.com<br />TIA</p></blockquote></div><p>Wetransfer sent. Good luck!</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 13 of 27</div><nav><ul><li><a href="viewtopic.php%3Fid=53014&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=12.html">12</a></li><li class="pagination-current"><span>13</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=14.html">14</a></li><li><a href="viewtopic.php%3Fid=53014&amp;p=15.html">15</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53014&amp;p=27.html">27</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>