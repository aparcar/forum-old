<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> configure linux hostapd WDS stations to connect to openwrt WDS AP</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p170344">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jfd</div>
					<div class="post-datetime">
						19 Jun 2012, 05:35					</div>
				</div>
				<div class="post-content content">
					<p>I have an OpenWRT AP in my living room with the upling, consoles and WDTVLive connected. In my work room I have two laptops, a desktop, a server and an NAS ... that might all want to get some internet. Its not a problem with the laptops but I only have one wifi dongle (Zydas G220, zd1211rw driver with fully supported master mode using nl80211 in hostapd).</p><p>So I thought it can&#039;t be that hard to connect the wifi stick to my server and share the WIFI from the OpwnWrt to the LAN in the working room. Masquerading is not an option, as I might stream a video or mp3s from my NAS to the WDTVLive with DLNA.</p><p>The OpenWRT side was easy enough with nice images on <a href="http://wiki.openwrt.org/doc/howto/clientmode">http://wiki.openwrt.org/doc/howto/clientmode</a> and documentation for nl80211 based WDS on <a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a>.</p><p>A default linux system running hostapd seems to be a different story. I dug through the ubuntu documentation and found out that sharing WIFI on a LAN has been disabled in the Kernel if the WIFI card is not in master mode. The only hints on <a href="http://linuxwireless.org/en/users/Documentation/iw#Using_4-address_for_AP_and_client_mode">http://linuxwireless.org/en/users/Docum â€¦ lient_mode</a> are<br /></p><div class="quotebox"><blockquote><p>iw phy phy0 interface add moni0 type managed 4addr on</p></blockquote></div><p>and for hostapd </p><div class="quotebox"><blockquote><p>wds_sta=1</p></blockquote></div><p>I sucessfully can connect my USB stick to my default ssid. Even after creating the WDS AP on the OpenWRT router my other devices can still access the internet, so I did not break anything. But how do I configure the funny mix of wpa_supplicant, hostapd, bridging and general network settings on ubuntu so that I can share the WIFI connection to my other boxes in the same room?</p><p>I need help! Seriously, in more than one way <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Time to go to sleep, the sun is rising ...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>