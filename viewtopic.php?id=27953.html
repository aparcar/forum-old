<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> hostapd - deauthenticated due to inactivity</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p124409">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Connor1</div>
					<div class="post-datetime">
						3 Jan 2011, 17:27					</div>
				</div>
				<div class="post-content content">
					<p>UPDATE: SOLVED</p><p>Hi Again,</p><p>I am running&nbsp; Openwrt Backfire 10.03.1-rc4 on a Buffalo WZR-HP-G300NH and I am experiencing wifi drops with an Android phone and a Mac client (the Windows client seems to be not affected so far).</p><p>The error in the log is the following one:</p><div class="codebox"><pre><code>hostapd: wlan0: STA 00:26:bb:xx:xx:xx IEEE 802.11: deauthenticated due to inactivity</code></pre></div><p>I am using WPA2 (AES), 802.11n.<br />I have searched everywhere for a solution but I have only found people complaining about the same behaviour.<br />Has anyone any experience with this kind of error?</p><p>Thanks,<br />Connor</p>											<p class="post-edited">(Last edited by <strong>Connor1</strong> on 4 Jan 2011, 19:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124497">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Connor1</div>
					<div class="post-datetime">
						4 Jan 2011, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>Wow, I have been experiencing this problem for a while and it seems that I have finally found a solution. This is exactly the same problem some people are experiencing with Android devices.</p><p>I had to disable the WMM option for the WiFi and everything so far seems running flawlessly.</p><p>To do this in Openwrt 10.03.1-rc4 it is not enough to edit the /etc/config/wireless. I had to manually edit the /lib/wifi/mac80211.sh and put:</p><div class="codebox"><pre><code>wmm_enabled=0</code></pre></div><p>and restart the wireless (hostapd).</p><p>Hope it helps!</p><br /><p>Connor</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124805">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">guardian_de</div>
					<div class="post-datetime">
						7 Jan 2011, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>Disabling WMM helped here too. Thanks.</p>											<p class="post-edited">(Last edited by <strong>guardian_de</strong> on 7 Jan 2011, 23:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p124965">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">guardian_de</div>
					<div class="post-datetime">
						9 Jan 2011, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>Does anyone by chance know the drawback of disabling WMM?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125051">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">bsod77</div>
					<div class="post-datetime">
						10 Jan 2011, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have same problem.I disabled WMM,but it didn&#039;t change anything.<br />Platform is Linksys WRT160NL<br />Software is OpenWRT Backfire 10.03.1 - rc4.</p><p>Any ideas are welcomed</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125058">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						10 Jan 2011, 17:07					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/doc/uci/wireless">Wireless configuration - OpenWrt Wiki</a><br /></p><div class="quotebox"><blockquote><p>Enables WMM (802.11e) support.<br />:!: Not supported for the mac80211 type yet</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125309">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">thorstenk</div>
					<div class="post-datetime">
						13 Jan 2011, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>I have exactly the same problem. My platform is x86, I am using an alix system.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125683">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">thorstenk</div>
					<div class="post-datetime">
						17 Jan 2011, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>Ok, my problem was related to crappy apple updates ... For everybody who has wifi dropping problems with macbook (pro) but not with windows, try to downgrade to 10.6.4 . Apple has with 10.6.5 upgraded the airport firmware which causes in some cases these problems. If anybody is interested how you can only downgrade the firmware, let me now ...</p><p>Thorsten</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134890">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Frex</div>
					<div class="post-datetime">
						8 May 2011, 14:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>guardian_de wrote:</cite><blockquote><p>Does anyone by chance know the drawback of disabling WMM?</p></blockquote></div><p>AFAICT the WMM (Wireless Multimedia) is needed to use WiFi-N MCS, so the speed should be limited to Wireless-G.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138343">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">danstoner</div>
					<div class="post-datetime">
						2 Jul 2011, 05:02					</div>
				</div>
				<div class="post-content content">
					<p>Just to clarify, this is an edit to an existing line (around line 111) in /lib/wifi/mac80211.sh</p><p>Change:</p><p>wmm_enabled=1</p><p>to</p><p>wmm_enabled=0</p><br /><p>Then run &quot;wifi&quot; to restart wireless.&nbsp; You should see the new value if you cat the working config file:</p><p># cat /var/run/hostapd-phy0.conf</p><br /><p>edit:<br />My Droid works great now.&nbsp; My OpenWrt is set to 802.11b since I have an older laptop.</p>											<p class="post-edited">(Last edited by <strong>danstoner</strong> on 3 Jul 2011, 16:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140784">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Paulxx</div>
					<div class="post-datetime">
						8 Aug 2011, 00:06					</div>
				</div>
				<div class="post-content content">
					<p>To make it even simpler, in RC5 adding an option to etc/config/wireless now works. Under&nbsp; config &#039;wifi-iface&#039;&nbsp; add:<br />&nbsp; &nbsp; <br />option &#039;wmm&#039; &#039;0&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142151">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">guitardood</div>
					<div class="post-datetime">
						26 Aug 2011, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>Disabling &#039;N&#039; on the router is not &#039;SOLVED&#039;!!!!!!!!!!!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142162">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">swaaye</div>
					<div class="post-datetime">
						26 Aug 2011, 08:19					</div>
				</div>
				<div class="post-content content">
					<p>I still see N rates with WMM disabled. WMM sounds like a QoS technology for prioritizing types of traffic.</p>											<p class="post-edited">(Last edited by <strong>swaaye</strong> on 26 Aug 2011, 08:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142482">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">swaaye</div>
					<div class="post-datetime">
						30 Aug 2011, 00:27					</div>
				</div>
				<div class="post-content content">
					<p>Ok let me correct myself. With WMM disabled, 54mbps is the limit for at least some adapters.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142486">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						30 Aug 2011, 00:46					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.smallnetbuilder.com/wireless/wireless-features/30938-dont-mess-with-wmm">Don&#039;t Mess With WMM! - SmallNetBuilder</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142669">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">swaaye</div>
					<div class="post-datetime">
						1 Sep 2011, 02:32					</div>
				</div>
				<div class="post-content content">
					<p>Yup. With my 802.11n equipped TI OMAP / TI WLAN Nook Color tablet, I saw &gt; 54mbps connect rates. But with my notebook with Intel 5100 it would only connect at 54mpbs.</p>											<p class="post-edited">(Last edited by <strong>swaaye</strong> on 1 Sep 2011, 02:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p143960">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">swaaye</div>
					<div class="post-datetime">
						19 Sep 2011, 02:49					</div>
				</div>
				<div class="post-content content">
					<p>I decided to do some testing with my Droid phone and this WZR-HP-G300NH router. I ran a large download for an Android game on the phone and tried to determine which settings made the download proceed the best. I have been having endless disconnects trying to get the 620MB for this program so this is the main motivator I suppose. I rarely download this much to the phone.</p><p>OpenWRT - With WPA/WPA2, 802.11b mode is the most stable. g/n modes cause the phone to fail transferring in a minute or so.<br />DDWRT - Same results.<br />Buffalo 1.76 - By far the most stable. The download went for 10 minutes and pulled in almost the entire 600MB while connected at 802.11n 65mbps w/ WPA2 AES. It has never been able to do this regardless of settings on OpenWRT or DDWRT.</p><p>A rooted Android OS allows you to tweak the tiwlan.ini file. I tried disabling all power save features and WME (aka WMM). This did not alleviate the problems with OpenWRT or DDWRT.</p><p>I am wondering if the problems on OpenWRT and DDWRT are exacerbated by a high download rate. I have a 15mbps connection that can spike at 2-4MB/s occasionally. On 802.11b it can&#039;t go above around 900KB/s and this was the most stable mode with those firmwares.</p><p>Anyway, the Buffalo firmware seems to be by far the most stable firmware when it comes to TI OMAP wifi on the Droid phone.</p>											<p class="post-edited">(Last edited by <strong>swaaye</strong> on 19 Sep 2011, 02:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161519">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Feka</div>
					<div class="post-datetime">
						20 Mar 2012, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>In final version of Backfire 10.03.1 the line to update is:</p><p>&quot;config_get_bool wmm &quot;$vif&quot; wmm 1&quot;</p><p>That should be set:</p><p>&quot;config_get_bool wmm &quot;$vif&quot; wmm 0&quot;</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>