<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR941N WR941ND - Atheros AP81 platform, USB port</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Jun 2015 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 8</div><nav><ul><li><a href="viewtopic.php%3Fid=18354&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=8.html">8</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p103215">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						18 Feb 2010, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. I will try. What do you think about links, thats i was posted? About&nbsp; Bullet M? But theirs size is other, than tp-link&#039;s.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103216">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">juhosg</div>
					<div class="post-datetime">
						18 Feb 2010, 22:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><div class="quotebox"><cite>alif wrote:</cite><blockquote><p>They differ only in flash? It possible to combine firmware 941n v5 and 841n v5? Any idea?)</p><p>Maybe the problem is this:<br /></p><div class="quotebox"><blockquote><p>Just be warned that at some point the flash chip in these devices has changed.</p><p>It was a winbond chip identified by the kernel as s25sl032a</p><p>now it&#039;s an hynix 934A HY5DU561622FTP-5<br />Kernel sees this as<br />m25p80 spi0.0: unrecognized JEDEC id ef4016</p></blockquote></div><p>How can I do?</p></blockquote></div><p>The TL-WR941ND v4 should be working with the &#039;openwrt-ar71xx-tl-wr841nd-v5-squashfs-universal.bin&#039; image. The problem is that you have used an old snapshot, and the support for the Winbond W25Q32BV flash chip has been added only with <a href="https://dev.openwrt.org/changeset/19536">r19536</a>. You should try a newer snapshot, or you should build your own image from a fresh checkout.</p><p>Regards,<br />Gabor</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103270">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						19 Feb 2010, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>On tl-wr941nd V4, openwrt was instaled))<br />Thanks for all) With last trunk, we did it) (openwrt-ar71xx-tl-wr841nd-v5-initramfs-uImage.bin)<br />Starting kernel ...</p><p>Linux version 2.6.32.8 (admin@serversmb.localdomain) (gcc version 4.3<br />.3 (GCC) ) #1 Fri Feb 19 09:53:30 ALMT 2010<br />bootconsole [early0] enabled<br />CPU revision is: 00019374 (MIPS 24Kc)<br />Atheros AR7240 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=TL-WR741ND<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 27352k/32768k available (2003k kernel code, 5416k reserved, 378k data, 2252k init, 0k highmem)<br />SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Hierarchical RCU implementation.<br />NR_IRQS:56<br />Calibrating delay loop... <br />266.24 BogoMIPS (lpj=1331200)<br />Mount-cache hash table entries: 512<br />N<br />ET: Registered protocol family 16<br />MIPS: machine is TP-LINK TL-WR741ND</p><p>registering PCI controller with io_map_base unset<br />bio: create slab &lt;bio-0&gt; at 0</p><p>PCI: fixup device 0000:00:00.0<br />pci 0000:00:00.0: PME# supported from D0 D1 D3hot<br />pci 0000:00:00.0: PME# disabled<br />PCI: mapping irq 48 to pin1@0000:00:00.0<br />Switching to clocksource MIPS<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1</p><p>squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 ver<br />sion 2.2. (NAND) (SUMMARY)&nbsp; \0xc2\0xa9 2001-2006 Red Hat, Inc.<br />yaffs Feb 19 2010 09:49:32 Installing. <br />msgmni has been set to 53<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console [ttyS0] enabled, bootconsole disabled<br />console [ttyS0] enabled, bootconsole disabled<br />Atheros AR71xx SPI Controller driver version 0.2.4<br />m25p80 spi0.0: w25q32 (4096 Kbytes)<br />Searching for RedBoot partition table in spi0.0 at offset 0x3fe000<br />Searching for RedBoot partition table in spi0.0 at offset 0x3ff000<br />No RedBoot partition table detected in spi0.0<br />spi0.0: no WRT160NL signature found<br />Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000160000 : &quot;kernel&quot;<br />0x000000160000-0x0000003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />split_squashfs: no squashfs found in &quot;spi0.0&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xba000000, irq 5</p><p>eth1: Atheros AG71xx at 0xb9000000, irq 4</p><p>Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP westw<br />ood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 2252k freed</p><p>gpio-buttons driver version 0.1.2<br />input: gpio-buttons as /devices/platform/gpio-buttons/inp<br />ut/input0<br />Button Hotplug driver version 0.3.1<br />eth0: link up (1000Mbps/Full duplex)<br />- preinit -<br />Registered led device: tl-wr741nd:green:system<br />Registered led device: tl-wr741nd:green:qss<br />Press Press f&lt;ENTER&gt; to enter failsafe mode</p><p>- regular preinit -</p><p>Please press Enter to activate this console. <br />device eth0 entered promiscuous mode<br />br-lan: port 1(eth0) entering forwarding state</p><p>eth1: link up (100Mbps/Full duplex)</p><p>Generic kernel compatibility enabled based on linux-next next-20100113</p><p>cfg80211: Calling CRDA to update world regulatory domain</p><p>SCSI subsystem initialized</p><p>cfg80211: World regulatory domain updated:<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidt<br />h), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)</p><p>usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub</p><p>usbcore: registered new device driver usb</p><p>Registered led device: ath9k-phy0::radio<br />Registered led device: ath9k-phy0::assoc<br />Registere<br />d led device: ath9k-phy0::tx<br />Registered led device: ath9k-phy0::rx<br />phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=48<br />cfg80211: Calling CRDA for country: US<br />cfg80211: Regulatory domain changed to country: US<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />&nbsp; &nbsp; (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)</p><p>PPP generic driver version 2.4.2<br />tun: Universal TUN/TAP device driver, 1.6<br />tun: (C) 1999-2004 <br />Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />ip_tables: (C) 2000-2006 Netfilter Core Team</p><p>nf_conntrack version 0.5.0 (462 buckets, 1848 max)</p><p>ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver</p><br /><br /><br /><p>BusyBox v1.15.3 (2010-02-19 09:28:45 ALMT) built-in shell (ash)<br />Enter &#039;help&#039; for a lis<br />t of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r19725) ------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/#</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 19 Feb 2010, 19:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103272">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						19 Feb 2010, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)</p><p>Is it true, for my device?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103274">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						19 Feb 2010, 19:35					</div>
				</div>
				<div class="post-content content">
					<p>good news!! <br />you may get further test</p><p>the wireless and the led lights<br />do they work well??</p>											<p class="post-edited">(Last edited by <strong>69350</strong> on 20 Feb 2010, 10:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103279">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						19 Feb 2010, 20:06					</div>
				</div>
				<div class="post-content content">
					<p>Yes, led lights work well. Wireless will test after 1-2 hours. How to disable update from internet before compile?<br />This one not work on 941nd v4 <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-tl-wr841nd-v5-squashfs-universal.bin">http://downloads.openwrt.org/snapshots/ … versal.bin</a> (17/02/2010)</p><p>iwconfig wlan0 mode Master <br />Error for wireless request &quot;Set Mode&quot; (8B06) :</p><p>And settings are not saved on device(</p>											<p class="post-edited">(Last edited by <strong>alif</strong> on 19 Feb 2010, 22:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103294">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						19 Feb 2010, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>Ok. wireless work is good)) But how to save all settings?) I am searching.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103346">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">ejcspii</div>
					<div class="post-datetime">
						20 Feb 2010, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>My WR-941ND v2 sports a 2x5 pin serial header instead of the 4 pin 1-line header that is found on the wiki (at least I hope it is the serial port). Did somebody figure out its pinout? Is the same resistor to bridge?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103353">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						20 Feb 2010, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>look here <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=40041&amp;postdays=0&amp;postorder=asc&amp;start=0&amp;sid=fdec395d2c401104ed45e6eeb8b34cb1">http://www.dd-wrt.com/phpBB2/viewtopic. … eeb8b34cb1</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103359">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">ejcspii</div>
					<div class="post-datetime">
						20 Feb 2010, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>Yes, that&#039;s it, thank you very much for the pointer.<br />Although it is not entirely clear from the post how lark counts the pin numbers: when he mentions pins 1...5, is he referring to the top row starting from the marked pin or is it in zig-zag as in the standard (?) pin numbering scheme?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103363">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						20 Feb 2010, 17:32					</div>
				</div>
				<div class="post-content content">
					<p>How could use with the USB host ?<br />My hardware is TL-WR941Nv4, run profile &quot;WR941NDv4&quot; well, which use &quot;mach-tl-wr741nd.c&quot; in the kernel.<br />And I had add function &quot;ar71xx_add_device_usb();&quot; at &quot;tl_wr741nd_setup&quot;, so I can &quot;lsusb&quot; in console to got following message:<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:/# lsusb<br />Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</p></blockquote></div><p>And I have solder [s]R278,R277,(updated, delete it)[/s]R185,R183, R713,R712,R711 directly.(Is it correct? I do not solder the resistor but short pass)<br />But the USB device can not find yet.<br />Is there any advice?</p><p>R713, R712, R185, R183, R711</p>											<p class="post-edited">(Last edited by <strong>arrowworld</strong> on 21 Feb 2010, 06:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103420">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						21 Feb 2010, 06:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arrowworld wrote:</cite><blockquote><p>And I have solder RR278,R277,R185,R183, R713,R712,R711 directly.(Is it correct? I do not solder the resistor but short pass)</p></blockquote></div><p>TL-WR941Nv4 direct solder resistor should be R713, R712, R185, R183, R711(GND)<br />Then R713 connect to CPU pin of U74, R712 connect to CPU pin of U73.<br />But Here lack 5V Vcc, How could get 5V from 9V Vcc.<br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=40041&amp;postdays=0&amp;postorder=asc&amp;start=15">http://www.dd-wrt.com/phpBB2/viewtopic. … p;start=15</a><br /></p><div class="quotebox"><blockquote><p>lark wrote:<br />I am also looking at the USB port&#039;s power supply circuit. It is 12v to 5v DC-DC converter, and yes it&#039;s not that complex as I thought before.</p></blockquote></div><p>But here is not any update<br />Could someone help it ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103421">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						21 Feb 2010, 06:46					</div>
				</div>
				<div class="post-content content">
					<p>new progress on the usb about TL-WR941Nv4, I have got below message now -_-, connect as the last my post.<br /><strong> but, I use with a hard-disk which supply 5Vcc with another USB host.</strong><br />So, How to get 5Vcc is the critical work.</p><div class="quotebox"><blockquote><p>usb 1-1: new full speed USB device using ar71xx-ohci and address 2<br />usb 1-1: configuration #1 chosen from 1 choice<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />scsi 0:0:0:0: Direct-Access&nbsp; &nbsp; &nbsp;Hitachi&nbsp; HTS541640J9AT00&nbsp; SB1O PQ: 0 ANSI: 0<br />sd 0:0:0:0: [sda] 78140160 512-byte logical blocks: (40.0 GB/37.2 GiB)<br />sd 0:0:0:0: [sda] Write Protect is off<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br /> sda: sda1 sda2 sda3 sda4 &lt; sda5 sda6 sda7 sda8 sda9 &gt;<br />sd 0:0:0:0: [sda] Assuming drive cache: write through<br />sd 0:0:0:0: [sda] Attached SCSI disk<br />yaffs: dev is 8388609 name is &quot;sda1&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.1, &quot;sda1&quot;<br />yaffs: dev is 8388609 name is &quot;sda1&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.1, &quot;sda1&quot;<br />REISERFS (device sda1): found reiserfs format &quot;3.6&quot; with standard journal<br />REISERFS (device sda1): using ordered data mode<br />REISERFS (device sda1): journal params: device sda1, size 8192, journal first block 18, max trans len 1024, max batch 900, max commit age 30, max trans age 30<br />REISERFS (device sda1): checking transaction log (sda1)<br />REISERFS (device sda1): replayed 1 transactions in 0 seconds<br />REISERFS (device sda1): Using r5 hash to sort names<br />yaffs: dev is 8388610 name is &quot;sda2&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.2, &quot;sda2&quot;<br />yaffs: dev is 8388610 name is &quot;sda2&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.2, &quot;sda2&quot;<br />REISERFS (device sda2): found reiserfs format &quot;3.6&quot; with standard journal<br />REISERFS (device sda2): using ordered data mode<br />REISERFS (device sda2): journal params: device sda2, size 8192, journal first block 18, max trans len 1024, max batch 900, max commit age 30, max trans age 30<br />REISERFS (device sda2): checking transaction log (sda2)<br />REISERFS (device sda2): replayed 1 transactions in 0 seconds<br />REISERFS (device sda2): Using r5 hash to sort names<br />yaffs: dev is 8388611 name is &quot;sda3&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.3, &quot;sda3&quot;<br />yaffs: dev is 8388611 name is &quot;sda3&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.3, &quot;sda3&quot;<br />yaffs: dev is 8388612 name is &quot;sda4&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.4, &quot;sda4&quot;<br />yaffs: dev is 8388612 name is &quot;sda4&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.4, &quot;sda4&quot;<br />attempt to access beyond end of device<br />sda4: rw=0, want=18, limit=2<br />REISERFS warning (device sda4): sh-2006 read_super_block: bread failed (dev sda4, block 8, size 1024)<br />attempt to access beyond end of device<br />sda4: rw=0, want=130, limit=2<br />REISERFS warning (device sda4): sh-2006 read_super_block: bread failed (dev sda4, block 64, size 1024)<br />yaffs: dev is 8388613 name is &quot;sda5&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.5, &quot;sda5&quot;<br />yaffs: dev is 8388613 name is &quot;sda5&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.5, &quot;sda5&quot;<br />yaffs: dev is 8388614 name is &quot;sda6&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.6, &quot;sda6&quot;<br />yaffs: dev is 8388614 name is &quot;sda6&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.6, &quot;sda6&quot;<br />yaffs: dev is 8388615 name is &quot;sda7&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.7, &quot;sda7&quot;<br />yaffs: dev is 8388615 name is &quot;sda7&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.7, &quot;sda7&quot;<br />yaffs: dev is 8388616 name is &quot;sda8&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.8, &quot;sda8&quot;<br />yaffs: dev is 8388616 name is &quot;sda8&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.8, &quot;sda8&quot;<br />yaffs: dev is 8388617 name is &quot;sda9&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.9, &quot;sda9&quot;<br />yaffs: dev is 8388617 name is &quot;sda9&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 8.9, &quot;sda9&quot;<br />REISERFS (device sda9): found reiserfs format &quot;3.6&quot; with standard journal<br />REISERFS (device sda9): using ordered data mode<br />REISERFS (device sda9): journal params: device sda9, size 8192, journal first block 18, max trans len 1024, max batch 900, max commit age 30, max trans age 30<br />REISERFS (device sda9): checking transaction log (sda9)<br />REISERFS (device sda9): replayed 1 transactions in 0 seconds<br />REISERFS (device sda9): Using r5 hash to sort names</p><p>root@OpenWrt:/# lsusb<br />Bus 001 Device 002: ID 067b:2506 Prolific Technology, Inc. <br />Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub</p><p>root@OpenWrt:/mnt# mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,relatime)<br />sysfs on /sys type sysfs (rw,relatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime,size=14796k)<br />tmpfs on /dev type tmpfs (rw,relatime,size=512k)<br />devpts on /dev/pts type devpts (rw,relatime,mode=600)<br />/dev/mtdblock3 on /jffs type jffs2 (rw,relatime)<br />mini_fo:/jffs on / type mini_fo (rw,relatime)<br />debugfs on /sys/kernel/debug type debugfs (rw,relatime)<br />none on /proc/bus/usb type usbfs (rw,relatime)<br />/dev/sda1 on /mnt/sda1 type reiserfs (rw,relatime)<br />/dev/sda2 on /mnt/sda2 type reiserfs (rw,relatime)<br />/dev/sda9 on /mnt/sda9 type reiserfs (rw,relatime)</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>arrowworld</strong> on 21 Feb 2010, 06:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103425">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						21 Feb 2010, 08:44					</div>
				</div>
				<div class="post-content content">
					<p>Get 5Vcc, Could use &quot;78M05&quot; ?<br /><a href="http://www.datasheetcatalog.com/datasheets_pdf/7/8/M/0/78M05.shtml">http://www.datasheetcatalog.com/datashe … 8M05.shtml</a><br />Solder it at &quot;U18&quot; ? Need your help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103438">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">ejcspii</div>
					<div class="post-datetime">
						21 Feb 2010, 17:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ejcspii wrote:</cite><blockquote><p>Although it is not entirely clear from the post how lark counts the pin numbers</p></blockquote></div><p>Should someone else be interested: my scope told me that the &quot;zigzag&quot; numbering is the right answer. Thanks again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103446">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">69350</div>
					<div class="post-datetime">
						21 Feb 2010, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>lark said: P1 is RX, P2 is TX. R356 is all you should need to bridge.<br />&nbsp; &nbsp; &nbsp;just to short pass the R356,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103472">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						22 Feb 2010, 05:07					</div>
				</div>
				<div class="post-content content">
					<p>Can you post photos, how you solder it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103481">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">alif</div>
					<div class="post-datetime">
						22 Feb 2010, 10:24					</div>
				</div>
				<div class="post-content content">
					<p>I am sorry) I asked arroworld)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103570">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						23 Feb 2010, 15:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alif wrote:</cite><blockquote><p>I am sorry) I asked arroworld)</p></blockquote></div><p>For here is no camera, I capture a photo with my thinkpad-x200, seems not clearly([s]refer to attached image::I&#039;m finding how to attach it[/s]).<br />The CPE did not stable while short pass all of the resistor, it will reset the device,(e.g. the DM9601 net device)<br />So I solder 0.1Ohm resistor to R713 and R712, then solder 100pF capacity to R278 and R277, now my DM9601 net card is so stable. (short pass for I have no resistor before, I bought some equipment for research the wrt these days, e.g. digital multimeter)<br />Oh, so sad, I have not found out any way to post it, fail on flickr.com yet.<br />The picture could not show with me, maybe anyother could show it?<br /><a href="http://www.flickr.com/photos/47810639@N03/4381491507/">http://www.flickr.com/photos/47810639@N03/4381491507/</a><br />(I&#039;d like if anyone tell me how to post a picture for wiki of openwrt)</p>											<p class="post-edited">(Last edited by <strong>arrowworld</strong> on 23 Feb 2010, 17:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104601">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">arrowworld</div>
					<div class="post-datetime">
						13 Mar 2010, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>Now, I have make out a 5V power supply with LM2576t-5(made by motorola), sit on another board, and connect the USB connector&#039;s VCC,GND to the power-board.<br />the datasheet is at: <a href="http://www.datasheetcatalog.com/datasheets_pdf/L/M/2/5/LM2576T-5.shtml">http://www.datasheetcatalog.com/datashe … 6T-5.shtml</a>, the layout referrence at page 22.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104964">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">Mausi</div>
					<div class="post-datetime">
						22 Mar 2010, 02:01					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I&#039;m trying to get the USB port of my WR941ND working, but didn&#039;t succeed yet. I have a V 3.0 device, hardware revision 1.2. </p><p>I soldered 33 Ohm resistors for impedance matching to R1000 and R1001, added a 7805 and a 100uF capacitor to provide +5V to the USB port. Power supply works well. I suppose that D100 and D101 are some kind of surge protection, so I omitted them.</p><p>Then I checked the data lines with a multimeter. Between R1000 and GND I measured 0.7V dc and an ac value of about 1.2V which looks promising to me, as it shows that there is a pulsing signal on the line.</p><p>I repeated the same test for R1001 and measured 3.3V dc and 0V ac, which looks more like the high level of a gpio line than an USB data signal. I checked all connections twice, but didn&#039;t found anything: no shortcuts, no missing components.</p><p>As I don&#039;t have a datasheet of the AR9132, I don&#039;t no if there is any kind of i/o-pin-sharing, which requires a pull-up / pulldown resistor to be set in order to connect the USB data signal to the corresponding i/o-pin. </p><p>The kernel is already modified, too. I added scsi_mod, nls_base, usbcore, ehci_hcd, ohci_hcd and usb-storage. In order to get the usb-controller be recognized by the kernel, I had to add 2 lines to the source file mach-tl-wr941nd.c. First an additional header-file must be included:<br /></p><div class="codebox"><pre><code>#include &quot;dev-usb.h&quot;</code></pre></div><p>Second the initialization routine of the usb-controller must be called: <br /></p><div class="codebox"><pre><code>static void __init tl_wr941nd_setup(void)
{
    u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);
    u8 *eeprom = (u8 *) KSEG1ADDR(0x1fff1000);

    ar71xx_set_mac_base(mac);

    ar71xx_add_device_mdio(0x0);

    ar71xx_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_RMII;
    ar71xx_eth0_data.phy_mask = 0x0;
    ar71xx_eth0_data.speed = SPEED_100;
    ar71xx_eth0_data.duplex = DUPLEX_FULL;

    ar71xx_add_device_eth(0);

    ar71xx_add_device_usb();

    ar71xx_add_device_dsa(0, &amp;tl_wr941nd_dsa_data);

    ar71xx_add_device_m25p80(&amp;tl_wr941nd_flash_data);

    ar71xx_add_device_leds_gpio(-1, ARRAY_SIZE(tl_wr941nd_leds_gpio),
                    tl_wr941nd_leds_gpio);

    ar71xx_add_device_gpio_buttons(-1, TL_WR941ND_BUTTONS_POLL_INTERVAL,
                    ARRAY_SIZE(tl_wr941nd_gpio_buttons),
                    tl_wr941nd_gpio_buttons);
    ar913x_add_device_wmac(eeprom, mac);
}</code></pre></div><p>The syslog output looks quite good so that I&#039;m pretty sure that nothing is missing.</p><div class="codebox"><pre><code>Jan  1 00:00:13 OpenWrt user.notice kernel: SCSI subsystem initialized
Jan  1 00:00:13 OpenWrt user.info kernel: usbcore: registered new interface driver usbfs
Jan  1 00:00:13 OpenWrt user.info kernel: usbcore: registered new interface driver hub
Jan  1 00:00:13 OpenWrt user.info kernel: usbcore: registered new device driver usb
Jan  1 00:00:15 OpenWrt user.info kernel: ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
Jan  1 00:00:15 OpenWrt user.info kernel: ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
Jan  1 00:00:15 OpenWrt user.info kernel: ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
Jan  1 00:00:15 OpenWrt user.info kernel: ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
Jan  1 00:00:15 OpenWrt user.info kernel: ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
Jan  1 00:00:15 OpenWrt user.info kernel: usb usb1: configuration #1 chosen from 1 choice
Jan  1 00:00:15 OpenWrt user.info kernel: hub 1-0:1.0: USB hub found
Jan  1 00:00:15 OpenWrt user.info kernel: hub 1-0:1.0: 1 port detected
Jan  1 00:00:16 OpenWrt user.info kernel: ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
Jan  1 00:00:16 OpenWrt user.info kernel: Initializing USB Mass Storage driver...
Jan  1 00:00:16 OpenWrt user.info kernel: usbcore: registered new interface driver usb-storage
Jan  1 00:00:16 OpenWrt user.info kernel: USB Mass Storage support registered.</code></pre></div><p>The usb filesystem is mounted, too.</p><div class="codebox"><pre><code>root@OpenWrt:/sys/bus/usb/drivers/usbfs# mount
rootfs on / type rootfs (rw)
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,relatime)
sysfs on /sys type sysfs (rw,relatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,relatime,size=14796k)
tmpfs on /dev type tmpfs (rw,relatime,size=512k)
devpts on /dev/pts type devpts (rw,relatime,mode=600)
/dev/mtdblock3 on /jffs type jffs2 (rw,relatime)
mini_fo:/jffs on / type mini_fo (rw,relatime)
debugfs on /sys/kernel/debug type debugfs (rw,relatime)
none on /proc/bus/usb type usbfs (rw,relatime)</code></pre></div><p>But when I connect a USB-Stick to the port, nothing happens. The activity led of the stick does not start to flash, as it does when I connect the stick to the USB port of my USR5461. It seems there is no activity on the bus.</p><div class="codebox"><pre><code>root@OpenWrt:/# ls -l /proc/bus/usb
dr-xr-xr-x    2 root     root            0 Jan  1 00:00 001
-r--r--r--    1 root     root            0 Jan  1 00:00 devices 

root@OpenWrt:/# ls -l /sys/bus/usb/devices/ 
lrwxrwxrwx    1 root     root            0 Jan  1 00:01 1-0:1.0 -&gt; ../../../devices/platform/ar71xx-ehci/usb1/1-0:1.0
lrwxrwxrwx    1 root     root            0 Jan  1 00:01 usb1 -&gt; ../../../devices/platform/ar71xx-ehci/usb1</code></pre></div><p>Anybody out there who knows what&#039;s wrong?</p>											<p class="post-edited">(Last edited by <strong>Mausi</strong> on 27 Mar 2010, 03:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106059">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">Mausi</div>
					<div class="post-datetime">
						5 Apr 2010, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I&#039;m still trying to get the USB-port of my WR941ND working. As the board of the V3 is different than the one of the V4 I need some additional information. Could anyone who has applied the modifications describe the circuit a little bit more, please?</p><p>According to the post R712 and R713 connect the USB-header to the CPU. Is that correct?</p><p>As R711 connects to GND, it seems to be a pull-down resistor. Is it connected to the CPU, too? (Which pin?)</p><p>Soldering a capacitor to a resistor&#039;s pad (R277 and R278) seems weird to me? Does anybody know a little bit more of the function of this components? To which other components are they connected? Are they related to the power supply ciruit?</p><p>What is the function of R183 and R185? Are they pull-ups or pull-downs?</p><p>Thanks in advance!</p><p>Sincerely,</p><p>Mausi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108980">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">beone</div>
					<div class="post-datetime">
						12 May 2010, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I just received a WR941ND it has version nr v4.1<br />What image can I use to flash it? Anyone tried to flash V4.1 ? </p><p>Many tnx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109066">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">sergejk</div>
					<div class="post-datetime">
						14 May 2010, 09:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>beone wrote:</cite><blockquote><p>Hi,</p><p>I just received a WR941ND it has version nr v4.1<br />What image can I use to flash it? Anyone tried to flash V4.1 ? </p><p>Many tnx.</p></blockquote></div><p>Have the same question ....</p><p>Anyone?</p><p>Brgds,<br />S.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109068">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">sergejk</div>
					<div class="post-datetime">
						14 May 2010, 09:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sergejk wrote:</cite><blockquote><div class="quotebox"><cite>beone wrote:</cite><blockquote><p>Hi,</p><p>I just received a WR941ND it has version nr v4.1<br />What image can I use to flash it? Anyone tried to flash V4.1 ? </p><p>Many tnx.</p></blockquote></div><p>Have the same question ....</p><p>Anyone?</p><p>Brgds,<br />S.</p></blockquote></div><p>I have standard TP-LINK firmware and i want it to upgrade with openwrt firmware.<br />As i can see from:<br /><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-tl-wr941nd-v4-squashfs-factory.bin">http://downloads.openwrt.org/snapshots/ … actory.bin</a></p><p>Is it going to work if i flash it over webUI with openwrt-ar71xx-tl-wr941nd-v4-squashfs-factory.bin file?</p><p>Brgds,<br />S.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 8</div><nav><ul><li><a href="viewtopic.php%3Fid=18354&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=18354&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=7.html">7</a></li><li><a href="viewtopic.php%3Fid=18354&amp;p=8.html">8</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>