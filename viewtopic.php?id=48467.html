<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Bricked Tl-wdr3600. Solved.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p222937">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						16 Jan 2014, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello, this is my first post so forgive any faux pas. <br />I bought a tl-wdr3600 that was sold as non working. I can&#039;t log onto it, wireless is broadcasting and I can&#039;t get a valid ip. <br />I soldered serial headers on it and booted it up to see it has openwrt on it. Attitude adjustment r35631. <br />I would like to re flash the stock fw on it. <br />I&#039;m used to doing things with dd-wrt and Broadcom devices. <br />I downloaded the recommended oem fw per the device openwrt wiki page but I&#039;m not sure how to flash it. <br />I&#039;m on windows 7 but have access to a win xp rig. <br />Could anyone help?</p><p>Edit: when I ping it at 192.168.1.1 in putty, I get ttl=64. When I open my browser I can&#039;t log into 192.168.1.1<br />Pinging it from the cmd through lan the same ip I get destination host unreachable.</p>											<p class="post-edited">(Last edited by <strong>Malachi</strong> on 20 Jan 2014, 01:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222940">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						16 Jan 2014, 23:21					</div>
				</div>
				<div class="post-content content">
					<p>I guess I can scp the file onto the router through the serial connection?&nbsp; If that&#039;s is true could someone please tell me the exact steps?</p><p>Seems like the LAN ports are not working. I don&#039;t know if that is on purpose or not. I have never installed openwrt nor used a router flashed to it.</p>											<p class="post-edited">(Last edited by <strong>Malachi</strong> on 17 Jan 2014, 14:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223036">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						18 Jan 2014, 01:16					</div>
				</div>
				<div class="post-content content">
					<p>In serial console I noticed a line that says:<br />Uncompressing kernel image ... Too big uncompressed streamLZMA ERROR 1 must RESET board to recover. </p><p>How do I reset the board?</p>											<p class="post-edited">(Last edited by <strong>Malachi</strong> on 18 Jan 2014, 01:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223040">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						18 Jan 2014, 02:52					</div>
				</div>
				<div class="post-content content">
					<p>During this whole process I&#039;m am running a continous ping at 192.168.1.1 with a static ip set on the PC. It responds with unreachable. <br />When I type F then enter when prompted in the boot up process in putty, the ping responds with ttl=64. </p><p>When I try to tftp the stock firmware it never uploads. I&#039;ve tried tftp2.exe and tftpd32.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223046">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						18 Jan 2014, 09:45					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4300#de-brick.or.oem.installation.using.the.tftp.and.rs232.serial.method">http://wiki.openwrt.org/toh/tp-link/tl- â€¦ ial.method</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223059">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						18 Jan 2014, 14:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried that. It says count exceeded; starting again. <br />It seems the lan ports only work when it&#039;s in fail safe mode, after typing F enter.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223086">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						18 Jan 2014, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>I just noticed that on every page I look at to try to fix this, when I telnet into the router every example says &quot;root@openwrt:&quot;<br />Mine says &quot;root@(none):<br />Does that matter?<br />Here is my serial log:<br />U-Boot 1.1.4 (Aug 20 2012 - 20:04:48)</p><p>U-boot DB120</p><br /><p>DRAM:&nbsp; 128 MB<br />id read 0x100000ff<br />flash size 8MB, sector count = 128<br />Flash:&nbsp; 8 MB<br />Using default environment</p><p>PCIe Reset OK!!!!!!<br />In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag934x_enet_initialize...<br />No valid address in Flash. Using fixed address<br /> wasp&nbsp; reset mask:c03300<br />WASP&nbsp; ----&gt; S17 PHY *<br />: cfg1 0x7 cfg2 0x7114<br />eth0: ba:be:fa:ce:08:41<br />athrs17_reg_init: complete<br />eth0 up<br />eth0<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (tilak@ubuntu) (gcc version 4.6.3 20120201 (p&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;rerelease) (Linaro GCC 4.6-2012.02) ) #4 Thu Feb 28 16:00:43 PST 2013<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001974c (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9344 rev 2<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:560.000MHz, DDR:450.000MHz, AHB:225.000MHz, Ref:40.00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 08000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00008000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;es: 32512<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WDR4300 console=ttyS0,115200 rootf&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;stype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 126596k/131072k available (2105k kernel code, 4476k reser&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ved, 400k data, 208k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, No&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;des=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.080000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79<br />[&nbsp; &nbsp; 0.090000] MIPS: machine is TP-LINK TL-WDR3600/4300/4310<br />[&nbsp; &nbsp; 0.090000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.310000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.310000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.320000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: invalid calibration data<br />[&nbsp; &nbsp; 0.330000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x1001ffff 64bi&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;t]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10020000-0x1002ffff pref&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;]<br />[&nbsp; &nbsp; 0.340000] pci 0000:00:00.0: using irq 40 for pin 1<br />[&nbsp; &nbsp; 0.350000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.350000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.360000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.360000] TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP: Hash tables configured (established 4096 bind 4096)<br />[&nbsp; &nbsp; 0.380000] TCP reno registered<br />[&nbsp; &nbsp; 0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.410000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.420000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.430000] msgmni has been set to 247<br />[&nbsp; &nbsp; 0.430000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.440000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.470000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.470000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.470000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: found en25q64, expected m25p80<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: en25q64 (8192 Kbytes)<br />[&nbsp; &nbsp; 0.500000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.500000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.510000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.520000] 0x000000020000-0x0000001003f8 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.520000] mtd: partition &quot;kernel&quot; must either start or end on erase block b&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;oundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.540000] 0x0000001003f8-0x0000007f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.540000] mtd: partition &quot;rootfs&quot; must either start or end on erase block b&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;oundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.550000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.560000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=4C0000, l&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;en=330000<br />[&nbsp; &nbsp; 0.570000] 0x0000004c0000-0x0000007f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.580000] 0x0000007f0000-0x000000800000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.580000] 0x000000020000-0x0000007f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.720000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 0.720000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 1.300000] eth0: Atheros AR8327 switch driver attached.<br />[&nbsp; &nbsp; 2.460000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.0:00 [uid=&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;004dd033, driver=Atheros AR8216/AR8236/AR8316]<br />[&nbsp; &nbsp; 2.480000] TCP cubic registered<br />[&nbsp; &nbsp; 2.480000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 2.480000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 2.490000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.500000] Freeing unused kernel memory: 208k freed<br />- preinit -<br />Press the [f] key and hit [enter] to enter failsafe mode<br />f<br />- failsafe -</p><br /><p>BusyBox v1.19.4 (2013-02-26 16:28:14 PST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;|[&nbsp; &nbsp; 5.520000] eth0: link up (1000Mbps/Full duplex)<br />|&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> -----------------------------------------------------<br /> ATTITUDE ADJUSTMENT (Attitude Adjustment, r35631)<br /> -----------------------------------------------------<br />&nbsp; * 1/4 oz Vodka&nbsp; &nbsp; &nbsp; Pour all ingredients into mixing<br />&nbsp; * 1/4 oz Gin&nbsp; &nbsp; &nbsp; &nbsp; tin with ice, strain into glass.<br />&nbsp; * 1/4 oz Amaretto<br />&nbsp; * 1/4 oz Triple sec<br />&nbsp; * 1/4 oz Peach schnapps<br />&nbsp; * 1/4 oz Sour mix<br />&nbsp; * 1 splash Cranberry juice<br /> -----------------------------------------------------<br />root@(none):/#</p>											<p class="post-edited">(Last edited by <strong>Malachi</strong> on 18 Jan 2014, 19:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223208">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Malachi</div>
					<div class="post-datetime">
						19 Jan 2014, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>When I press F + enter, I get ttl=64 responses but every time I try to tftp the firmware, I get a connection refused or timeout depending on which tftp client I use. <br />If the experts believe this can&#039;t be fixed, please just say so and I&#039;ll just throw it away instead of wasting hours upon hours and forum space.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>