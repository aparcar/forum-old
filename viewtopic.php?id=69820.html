<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to back to life mikrotik 951ui-2hnd</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p351797">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">emoxam</div>
					<div class="post-datetime">
						13 Feb 2017, 11:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi! I have mikrotik 951ui-2hnd</p><p>I flashed it with this manual wiki.openwrt.org/toh/mikrotik/common<br />after plaing a while..<br />I wanted to reset settings but didn&#039;t find any reset configuration option at it&#039;s web page. So i decided to use wget2nand as i did when flashed openwrt for a fist time.<br />It gives me an errors - something avout it can&#039;t mount or unmount, i&#039;ve decided to reboot the device, despite the fact that the i realized - most likely it won&#039;t boot anymore. I can tri some command manual but i didn&#039;t.<br />So - here am i - rooter don&#039;t boot.</p><p>What i&#039;ve tryed:<br />1 - netinstall (with holding reset adn wan port) doesn&#039;t work.<br />2 - tftpd (which i used when i load iniramfs) (with holding reset and wan port) doesn&#039;t work.<br />3 - i looked at tcpdump and wireshark - router asks for IP but don&#039;t see dhcp answers.<br />4 - solded to UART and what i this boot log:</p><div class="codebox"><pre><code>OpenWrt kernel loader for AR7XXX/AR9XXX
Copyright (C) 2011 Gabor Juhos &lt;juhosg@openwrt.org&gt;
Decompressing kernel... done!
Starting kernel at 80060000...

[    0.000000] Linux version 3.18.20 (buildbot@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r46450) ) #1 Fri Sep 4 21:32:22 CEST 2015
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9344 rev 2
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 08000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x07ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x07ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line:  GPIO_RESET=yes no-uart parts=1 boot_part_size=4194304 gpio=97835 HZ=300000000 mem=128M kmac=D4:CA:6D:D7:56:8A board=951HnD boot=0 mlc=5 rootfstype=yaffs noinitrd
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 126048K/131072K available (2573K kernel code, 153K rwdata, 332K rodata, 196K init, 189K bss, 5024K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:600.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Calibrating delay loop... 299.82 BogoMIPS (lpj=1499136)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is MikroTik RouterBOARD 951Ui-2HnD
[    0.550000] Switched to clocksource MIPS
[    0.550000] NET: Registered protocol family 2
[    0.560000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.560000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.570000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.580000] TCP: reno registered
[    0.580000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.590000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.590000] NET: Registered protocol family 1
[    0.600000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.620000] msgmni has been set to 246
[    0.630000] io scheduler noop registered
[    0.630000] io scheduler deadline registered (default)
[    0.640000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.640000] console [ttyS0] disabled
[</code></pre></div><p>FW author turned off delay after kernel starts as i guess.<br />FW author turned off uart after kernel starts.<br />So i don&#039;t see message about pressing &#039;f&#039;, console stops before it. And i cant interrupt loading anyhow.<br />What should i do ? Is there any chance to get it back with a network? Or UART ? Or jtag? Then what pinouts to use? What soft to use? How make jtag cable?<br />Any help will be appreciate.<br />Thanks</p><p>P.S. I forget to mention:<br />it boots with tweeting sound and then 1 beep.<br />When i use reset button it botts the same but after a pause, something about 20 seconds.<br />When i use reset hole - nothing changes - it boots as usual.</p>											<p class="post-edited">(Last edited by <strong>emoxam</strong> on 13 Feb 2017, 11:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351806">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">emoxam</div>
					<div class="post-datetime">
						13 Feb 2017, 12:44					</div>
				</div>
				<div class="post-content content">
					<p>Netinstall finally helped me somehow. From third try or like that.<br />Pardon</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>