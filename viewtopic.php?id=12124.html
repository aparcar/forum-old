<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> jffs2_scan_eraseblock problems with 7.07</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p54050">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SyncRo</div>
					<div class="post-datetime">
						17 Aug 2007, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />I&#039;m using ASUS WL-500g Premium.</p><p>I got the source for Kamikaze 7.07 and build a stripped image for 2.6 with Atheros because I changed the build-in Broadcom-WLAN to Atheros.</p><p>After setting up my box network, like DNS, DHCP, Routing, ssh, is working fine BUT I ran into travel with execution of local applications, like ipkg.</p><p>After a while because the box is allways hanging after &quot;heavy&quot; load I got segmentation faults and errors.</p><p>So I found the following lines in my dmesg while booting:<br /></p><div class="codebox"><pre><code>All bugs added by David S. Miller &lt;davem@redhat.com&gt;
jffs2_scan_eraseblock(): Node at 0x002d7af0 {0x1985, 0xe002, 0x00001044) has invalid CRC 0x80414049 (calculated 0x84d1586d)
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7af4: 0x1044 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7af8: 0x4049 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7afc: 0x0302 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b00: 0x0343 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b04: 0x81a4 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b0c: 0x3e00 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b10: 0xbf78 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b14: 0xbf78 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x002d7b18: 0xbf78 instead
Further such events for this erase block will not be printed
jffs2_scan_inode_node(): CRC failed on node at 0x004dc26c: Read 0x7b141f37, calculated 0x623460f9
jffs2_scan_inode_node(): CRC failed on node at 0x00567d60: Read 0x5ccf3b1e, calculated 0x6735ef2a
jffs2_scan_inode_node(): CRC failed on node at 0x0056d2c4: Read 0xa12ffc67, calculated 0xd0e2d34c
jffs2_scan_eraseblock(): Node at 0x005dd090 {0x1985, 0xe002, 0x00001044) has invalid CRC 0x84514024 (calculated 0x84d1586d)
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd094: 0x1044 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd098: 0x4024 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd09c: 0x0102 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0a0: 0x02df instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0a4: 0x81a4 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0ac: 0x9000 instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0b0: 0xc30e instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0b4: 0xc30e instead
jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x005dd0b8: 0xc30e instead
Further such events for this erase block will not be printed
VFS: Mounted root (jffs2 filesystem).</code></pre></div><p>Sometimes I can stop the started application but in the most cases I have to COLD start my box.</p><p>These errors are listed on each application hang if the application uses the jffs2 filesystem and somemore memory as normaly used for acting like as router only.</p><p>I expierenced the same issue with kamikaze build from newer than svn v8300 above but did not think over it to look at dmesg and logread.</p><p>Any suggestions?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>