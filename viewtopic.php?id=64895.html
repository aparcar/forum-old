<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVED] Error build 15.05 with gcc 6</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p324287">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						17 May 2016, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m trying to build 15.05 on my Manjaro system with gcc 6.1.1 but I get an error which I think is related to gcc version:<br /></p><div class="codebox"><pre><code>include/linux/compiler-gcc.h:114:30: fatal error: linux/compiler-gcc6.h: No such file or directory</code></pre></div><p>Any help, please?</p>											<p class="post-edited">(Last edited by <strong>jss</strong> on 20 May 2016, 02:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324879">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						20 May 2016, 02:08					</div>
				</div>
				<div class="post-content content">
					<p>It seems to be a difficult question once nobody replies.</p><p>Never mind, I made a VBox machine running Debian Jessie and compiled it, not with shared folders though, it doesn&#039;t work.</p><p>Thanks anyway.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324939">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dziny</div>
					<div class="post-datetime">
						20 May 2016, 13:09					</div>
				</div>
				<div class="post-content content">
					<p>I have build mine on VBox running Jessie and have not seen this error. So I doubt Debian is at fault here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p324948">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						20 May 2016, 14:02					</div>
				</div>
				<div class="post-content content">
					<p>I didn&#039;t say it was Debian&#039;s fault, I said it doesn&#039;t work with VirtualBox shared folders, meaning, your building tree cannot reside on a shared folder because the building process uses symlinks and this doesn&#039;t work on a sf.</p><p>Read this: <a href="https://www.virtualbox.org/ticket/10085#comment:14">https://www.virtualbox.org/ticket/10085#comment:14</a></p><p>But, even executing the extra-data command referred above and allowing symlinks, you will face another problems when tar doesn&#039;t have permission to work.</p><p>As I said, I also compiled with Debian on VirtualBox, but with the building tree on the main disk of the VM.</p><p>So, Debian is not at fault although I prefer systemd free Manjaro-openrc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325004">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">makro</div>
					<div class="post-datetime">
						20 May 2016, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>There were a few commits for GCC 6 support [1][2], but they haven&#039;t been backported to CC. They would probably help.</p><p>[1]: <a href="https://dev.openwrt.org/changeset/49342">https://dev.openwrt.org/changeset/49342</a><br />[2]: <a href="https://dev.openwrt.org/changeset/49344">https://dev.openwrt.org/changeset/49344</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p325055">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jss</div>
					<div class="post-datetime">
						21 May 2016, 02:41					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the pointers.</p><p>Nevertheless, as I have my target built now, I guess that on my next build gcc 6 will have hit CC already. So, I won&#039;t allocate any more time to this now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329762">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hamvil</div>
					<div class="post-datetime">
						25 Jun 2016, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>It would be great if somebody backported those to 15.05.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329788">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">trismo</div>
					<div class="post-datetime">
						25 Jun 2016, 21:10					</div>
				</div>
				<div class="post-content content">
					<p>I prefer a chroot environment over VM on linux host system.<br />Here few hints (mini howto)</p><p>Install debian debootstrap<br />now switch to root user <br />su - root<br />#cd in a directory with enough disk space i prefer home root /home</p><p>cd /home<br /></p><div class="codebox"><pre><code>debootstrap --arch=i386 stable ./chroot-stable http://httpredir.debian.org/debian</code></pre></div><p>wait to finish the base install then<br />just copy paste this to a terminal</p><div class="codebox"><pre><code>cd /home/chroot-stable/
mount -t proc none proc
mount --rbind /sys sys
mount --rbind /dev dev
# login on the debian system 
linux32 env -i HOME=/root TERM=$TERM $(which chroot) . bash -l </code></pre></div><div class="codebox"><pre><code>cat &lt;&lt;EOF &gt; /etc/apt/sources.list
#------------------------------------------------------------------------------#
#                   OFFICIAL DEBIAN REPOS
#------------------------------------------------------------------------------#

###### Debian Main Repos
deb http://ftp.debian.org/debian/ jessie main contrib non-free
deb-src http://ftp.debian.org/debian/ jessie main contrib non-free
###### Debian Update Repos
deb http://ftp.debian.org/debian/ jessie-proposed-updates main contrib non-free
deb-src http://ftp.debian.org/debian/ jessie-proposed-updates main contrib non-free
EOF
grep -v rootfs /proc/mounts &gt; /etc/mtab
apt-get update
apt-get upgrade

apt-get install eatmydata bash-completion
#this speed up apt-get package install few thousand % faster ^^ if a normal hard disk is used
dpkg-divert --rename /usr/bin/dpkg
cat &gt;/usr/bin/dpkg &lt;&lt;-EOT
#!/bin/sh
exec eatmydata /usr/bin/dpkg.distrib &quot;\$@&quot;
EOT
chmod +x /usr/bin/dpkg

apt-get install python python2.7 python3 perl imagemagick subversion git gcc g++ binutils autoconf automake libtool-bin make bzip2 libncurses5-dev libreadline-dev zlib1g-dev flex bison patch texinfo tofrodos gettext pkg-config realpath libstring-crc32-perl gawk libusb-dev unzip intltool libacl1-dev libcap-dev libc6-dev libglib2.0-dev unzip wget curl zip libssl-dev bc</code></pre></div><div class="codebox"><pre><code>adduser builduser</code></pre></div><p>then switch to a normal user<br /></p><div class="codebox"><pre><code>su - builduser</code></pre></div><p>now install and build your openwrt with full host performance</p><p>For relogin after a system restart just this is needed<br /></p><div class="codebox"><pre><code>su - root
cd /home/chroot-stable/
mount -t proc none proc
mount --rbind /sys sys
mount --rbind /dev dev
# login on the debian system 
linux32 env -i HOME=/root TERM=$TERM chroot . bash -l 
su - builduser</code></pre></div>											<p class="post-edited">(Last edited by <strong>trismo</strong> on 18 Jul 2017, 08:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339864">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dangherve</div>
					<div class="post-datetime">
						1 Oct 2016, 03:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>makro wrote:</cite><blockquote><p>There were a few commits for GCC 6 support [1][2], but they haven&#039;t been backported to CC. They would probably help.</p><p>[1]: Had to remove url not allowed to post it<br />[2]: Had to remove url not allowed to post it</p></blockquote></div><p>I do not understand how to use the second fix of this post I did not find the file that I have to modify </p><p>Someone could explain it to me </p><p>Thanks</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>