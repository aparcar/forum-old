<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> I think i bricked my Tp-link Wr941nd</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p106616">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">drahhen</div>
					<div class="post-datetime">
						11 Apr 2010, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i believe i did something really stupid... </p><p>I installed openwrt 10.03 and i changed something (i don&#039;t remeber what), now if i plug my pc in the router it is assigned a ip (dhcp is working) but i can&#039;t even ping the router (or login with web browser, telnet ou ssh)...<br />If i connect my pc in the Wan port (i want to connect this router to another wr941nd) it uses the ip that i had assigned in Luci (192.168.1.19), i can ping but i cannot use ssh, telnet or the web browser....</p><p>Is there anything i can do to fix it? I tried pressing the reset button but it did not do anything...</p><br /><p>Thanks,<br />drahhen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106619">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						11 Apr 2010, 21:42					</div>
				</div>
				<div class="post-content content">
					<p>Can you try to perform a factory reset by inserting a pin to its pinhole and press for at least 30 seconds?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106620">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">drahhen</div>
					<div class="post-datetime">
						11 Apr 2010, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>I already tried, but it doesn&#039;t work... i think this pin is disabled with openwrt and only works in the original firmware...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106628">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						12 Apr 2010, 02:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>drahhen wrote:</cite><blockquote><p>i think this pin is disabled with openwrt and only works in the original firmware...</p></blockquote></div><p>That doesn&#039;t make sense to me at all because AFAIC the pin is a hardware reset and is not related to firmware. If your router doesn&#039;t respond to the reset pin, chances are it is a complete brick. Your last resort on this is either using a serial-console and/or JTAG cable to recover your unit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106654">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">grogi</div>
					<div class="post-datetime">
						12 Apr 2010, 13:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>drahhen wrote:</cite><blockquote><p>i think this pin is disabled with openwrt and only works in the original firmware...</p></blockquote></div><p>That doesn&#039;t make sense to me at all because AFAIC the pin is a hardware reset and is not related to firmware. If your router doesn&#039;t respond to the reset pin, chances are it is a complete brick. Your last resort on this is either using a serial-console and/or JTAG cable to recover your unit.</p></blockquote></div><p>OpenWRT uses JFFS2 to store the settings - thus it is IMPOSSIBLE for the hardware itself (or any other software run prior to the OpenWRT firmware) reset the OpenWRT settings. </p><p>What usually happens when the Reset button is pressed, is that firmware boots and when it detects notices the button is pressed, it restores the factory defaults. </p><p>OpenWRT does not reset the settings, but boots into failsafe when it detects the reset button during boot (using default configuration, but not removing the configuration - thus allowing to modify the settings on the JFFS2 partition). The only if - does OpenWRT in mentioned build detect the reset button?</p>											<p class="post-edited">(Last edited by <strong>grogi</strong> on 12 Apr 2010, 13:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106658">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">drahhen</div>
					<div class="post-datetime">
						12 Apr 2010, 14:42					</div>
				</div>
				<div class="post-content content">
					<p>So if openwrt detects my reset button during boot and enters in failsafe mode i should be able to telnet to 192.168.1.1? I&#039;ll try tonight....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106846">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">drahhen</div>
					<div class="post-datetime">
						14 Apr 2010, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>Tried only today... didn&#039;t work... anyone have any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106855">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						14 Apr 2010, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>I would suggest to try a serial console to see what&#039;s happening inside it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106864">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">windrlee</div>
					<div class="post-datetime">
						14 Apr 2010, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Good luck to you .I wanna fresh my TP_841N_V5 ,while I &#039;m reading the articles now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106966">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Timothy</div>
					<div class="post-datetime">
						15 Apr 2010, 18:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mohnkhan wrote:</cite><blockquote><p>I would suggest to try a serial console to see what&#039;s happening inside it.</p></blockquote></div><p>Remember you need a 3.3v serial cable (something like a FTDI TTL-232R-3V3)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109804">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						25 May 2010, 03:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>grogi wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><div class="quotebox"><cite>drahhen wrote:</cite><blockquote><p>i think this pin is disabled with openwrt and only works in the original firmware...</p></blockquote></div><p>That doesn&#039;t make sense to me at all because AFAIC the pin is a hardware reset and is not related to firmware. If your router doesn&#039;t respond to the reset pin, chances are it is a complete brick. Your last resort on this is either using a serial-console and/or JTAG cable to recover your unit.</p></blockquote></div><p>OpenWRT uses JFFS2 to store the settings - thus it is IMPOSSIBLE for the hardware itself (or any other software run prior to the OpenWRT firmware) reset the OpenWRT settings. </p><p>What usually happens when the Reset button is pressed, is that firmware boots and when it detects notices the button is pressed, it restores the factory defaults. </p><p>OpenWRT does not reset the settings, but boots into failsafe when it detects the reset button during boot (using default configuration, but not removing the configuration - thus allowing to modify the settings on the JFFS2 partition). The only if - does OpenWRT in mentioned build detect the reset button?</p></blockquote></div><p>Wow ..., this has an after effect for not being able to reset the device through its reset pinhole. For instance, if one modifies the configurations and causes the device bricks after a reboot, the recovering process will require a serial-console cable to access its console shell so that necessary changes to the configuration files can be made. That really sucks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p109805">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">snowyowlster</div>
					<div class="post-datetime">
						25 May 2010, 04:20					</div>
				</div>
				<div class="post-content content">
					<p>Have you followed the failsafe instructions at<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr941nd#oem.installation.using.the.tftp.method">http://wiki.openwrt.org/toh/tp-link/tl- … ftp.method</a><br />and repeated below</p><p>Failsafe mode<br />NOTE: Not tested by author, so I don´t know what to write here…</p><p>If you forgot your password, broken one of the startup scripts, firewalled yourself or corrupted the JFFS2 partition, you can get back in by using OpenWrt&#039;s failsafe mode.</p><br /><p>Boot into failsafe mode<br />Unplug the router&#039;s power cord.<br />Connect the router&#039;s LAN1 port directly to your PC.<br />Configure your PC with a static IP address between 192.168.1.2 and 192.168.1.254. E. g. 192.168.1.2 (gateway and DNS is not required).<br />Plug the power on and wait for the DMZ LED to light up.<br />While the DMZ LED is on immediately press any button (Reset and Secure Easy Setup will work) a few times .<br />If done right the DMZ LED will quickly flash 3 times every second.<br />You should be able to telnet to the router at 192.168.1.1 now (no username and password)</p><p>What to do in failsafe mode?<br />NOTE: The root file system in failsafe mode is the SquashFS partition mounted in readonly mode. To switch to the normal writable root file system run mount_root and make any changes. Run mount_root now.</p><p>Forgot/lost your password and you like to set a new one<br />passwd</p><p>Forgot the routers IP address<br />uci get network.lan.ipaddr</p><p>You accidentally run &#039;ipkg upgrade&#039; or filled up the flash by installing to big packages (clean the JFFS2 partition and start over)<br />mtd -r erase rootfs_data If you are done with failsafe mode power cycle the router and boot in normal mode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110703">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Junior.robert</div>
					<div class="post-datetime">
						7 Jun 2010, 17:29					</div>
				</div>
				<div class="post-content content">
					<p>Any news on this ?</p><p>I changed the hostname from my 941nd v3.2 and backfire 10.3, used a name with space, after this... Dead router.</p><p>The router boots, the sys light start to flash after a few seconds and don´t stop, I can ping lan IP, but no connection to router.</p><p>I used a port scan and I can´t see any service listening on the router I also tried wireshark to see if some type of connection attemp was been made from the router (maybe a tftp recovery...) and nothing.</p><p>Well my second router, the first bricked when I try to recover original firmware, after the reboot all lights flashing like a christmas tree..</p><p>This router bricked in less then one hour in my hand... OMG I´m no luck guy.. kkk</p><p>BTW, the failsafe mode DO NOT WORK, and just for curious where is the DMZ led ?</p><p>Advise for newbies like me.. be carefull when changing configs in Luci.. </p><p>I will try the serial connection now, can I just erase the config´s or change throught serial connection ?</p><br /><p>Tks</p><p>Robert Jr.</p><p>In time, sorry about poor english.</p>											<p class="post-edited">(Last edited by <strong>Junior.robert</strong> on 7 Jun 2010, 17:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110704">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						7 Jun 2010, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>RobertJr,</p><p>You&#039;re right, the failsafe mode doesn&#039;t work for some reason. In fact it goes into the mode, but doesn&#039;t ping at all.</p><p>I played a bit with the serial console and notice this as well.</p><p>If you manage to solder to the serial console, you can login and do the &quot;firstboot&quot; command, and then &quot;reboot&quot;. This will set the router to default values. I had to do this because I screwed up some settings.</p><p>Pitou!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110715">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Junior.robert</div>
					<div class="post-datetime">
						7 Jun 2010, 19:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pitou wrote:</cite><blockquote><p>RobertJr,</p><p>You&#039;re right, the failsafe mode doesn&#039;t work for some reason. In fact it goes into the mode, but doesn&#039;t ping at all.</p><p>I played a bit with the serial console and notice this as well.</p><p>If you manage to solder to the serial console, you can login and do the &quot;firstboot&quot; command, and then &quot;reboot&quot;. This will set the router to default values. I had to do this because I screwed up some settings.</p><p>Pitou!</p></blockquote></div><p>I trying to discover if a Profilic PL 2303 can be used for serial connection, as soon I estabilish a tty connection I will try this.</p><br /><p>Thank you for your quick reply.</p><p>Robert Jr.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p110837">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Junior.robert</div>
					<div class="post-datetime">
						9 Jun 2010, 08:59					</div>
				</div>
				<div class="post-content content">
					<p>Solved,</p><p>When I got the terminal the follow error appears. - mini_fo_lookup: ERR from storage dentry, lookup failed</p><p>Every command show the error.<br />So I follow your clues and used firstboot and reboot... the error persist after each command but a simple power off solves the problem.</p><p>The funny part was the cable.. When I understant the TTL/RS232 I guess that the USB/Serial could do the conversion in one specific pin ( I guess i´m crazy), here in Brazil is not easy to find a cable, and wait the ship from another country isn´t an option, so I do it by the hard way. two transistors&nbsp; and nothing from maxx... two minute circuit.</p><p>Here is the circuit, only two transistors do the job, if someone do not have a cable, a max232 or max3321 nearby this helps a lot.</p><br /><p><a href="http://www.uchobby.com/index.php/2007/06/11/ttl-to-rs232-adaptor-explained/">http://www.uchobby.com/index.php/2007/0 … explained/</a></p><br /><br /><p>Again thak you Pitou!</p><p>Robert Jr.</p><br /><div class="quotebox"><cite>Pitou wrote:</cite><blockquote><p>RobertJr,</p><p>You&#039;re right, the failsafe mode doesn&#039;t work for some reason. In fact it goes into the mode, but doesn&#039;t ping at all.</p><p>I played a bit with the serial console and notice this as well.</p><p>If you manage to solder to the serial console, you can login and do the &quot;firstboot&quot; command, and then &quot;reboot&quot;. This will set the router to default values. I had to do this because I screwed up some settings.</p><p>Pitou!</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>Junior.robert</strong> on 9 Jun 2010, 09:00)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>