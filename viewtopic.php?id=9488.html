<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wrt54GL failsafe mode problem (openwrt 0.9)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p42771">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">patamou</div>
					<div class="post-datetime">
						16 Feb 2007, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>I did a mistake while configuring dhcp and vlans so my device is unreachable.<br />I boot into failsafe mode and try to telnet 192.168.1.1 it says &quot;Connecting To 192.168.1.1...Could not open connection to the host, on port 23: C<br />onnect failed&quot; <br />What could i do before I throw it through the window.<br />Thanx</p><p>EDIT: Forgot to say after entering failsafe mode it responds ping but not telnet (nor ssh nor http : quite logic )</p>											<p class="post-edited">(Last edited by <strong>patamou</strong> on 16 Feb 2007, 15:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42891">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Treq</div>
					<div class="post-datetime">
						18 Feb 2007, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi patamou, I have the exact same problem.</p><p>I was running DD-WRT, and after I upgraded to X-WRT 0.9, the Ethernet-ports wouldn&#039;t work (some mess with ports and vlans in the nvram, I believe). Only br0, Eth2 and lo0 came up in ifconfig. While trying to get the nvram-settings right, so that the wired ports would be in vlan2 -I somehow screwed up and got stuck. Now I can&#039;t get in by wireless or by wired. =/</p><p>And now when I go into failsafe, I can ping it -but telnet (or anything else, for that matter) doesn&#039;t respond.<br />This is a WRT54G v1.1<br />_And_ the boot_wait turned itself off too, for some reason?! So now I can&#039;t re-flash it either. My computer-port doesn&#039;t come up fast enough. I might borrow a switch tomorrow and try again. </p><p>But in your (the reader&#039;s) experience, is this screwed-up-nvram-settings-problem solvable by simply reflashing stock/openwrt/dd-wrt firmware via tftp or should I just start looking for parts for a JTAG-cable? </p><p>Thanks,<br />Treq</p>											<p class="post-edited">(Last edited by <strong>Treq</strong> on 18 Feb 2007, 21:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42902">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">zafayar</div>
					<div class="post-datetime">
						19 Feb 2007, 01:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>patamou wrote:</cite><blockquote><p>I did a mistake while configuring dhcp and vlans so my device is unreachable.<br />I boot into failsafe mode and try to telnet 192.168.1.1 it says &quot;Connecting To 192.168.1.1...Could not open connection to the host, on port 23: C<br />onnect failed&quot; <br />What could i do before I throw it through the window.<br />Thanx</p><p>EDIT: Forgot to say after entering failsafe mode it responds ping but not telnet (nor ssh nor http : quite logic )</p></blockquote></div><p>I am having the same Problem.</p><p>I need to go to failsafe, and I also get the &quot;Entering Failsafe!&quot; message from the router.&nbsp; I flushed my ARP Cache and Dns cache.&nbsp; I am able to ping the router, but no telnet.</p><p>Can anyone help at this ??&nbsp; Is the failsafe broken in 0.9 ???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42913">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">patamou</div>
					<div class="post-datetime">
						19 Feb 2007, 12:43					</div>
				</div>
				<div class="post-content content">
					<p>I found out (using nmap) that when in failsafe mode the device has only the 25 port open (SMTP ????). should&#039;i report this as a bug? <br />Does anyone can help for this?<br />Thanx for future answers ;p</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42926">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Treq</div>
					<div class="post-datetime">
						19 Feb 2007, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi patamou,</p><p>What happens when you telnet to port 25 on your router? What do you arrive at? Would be nice if it was the telnet-server simply running on the wrong port. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>If this is not the case, then I am going to try to flash the dead router with RC6, then use the failsafe on that one to change my screwed up nvram variables, and then flash back to RC9. </p><p>Might work for you too.</p><p>Treq</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42929">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">patamou</div>
					<div class="post-datetime">
						19 Feb 2007, 16:44					</div>
				</div>
				<div class="post-content content">
					<p>I got the same reply as normal telnet port. I&#039;ve tried to flash with a rc6, a rc6 micron and a rc5 but tftp transfer didn&#039;t start in any case.(tried all methods found in docs &amp; forum as start tftp before/after plugging in,...)<br />Thanx</p><p>Patamou (who will go back cry&#039;ing in a dark corner <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42947">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">dadaniel</div>
					<div class="post-datetime">
						19 Feb 2007, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>I reported it here: <a href="https://dev.openwrt.org/ticket/1372">https://dev.openwrt.org/ticket/1372</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p42998">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Timo Beil</div>
					<div class="post-datetime">
						20 Feb 2007, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>Don&#039;t panic :-) JTAG isn&#039;t the best way to solve your problem!</p><p>Get an old mobile phone serial interface cable and a soldering iron, and use the CFE to fix the problem. Check&nbsp; <a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Linksys/WRT54G">http://wiki.openwrt.org/OpenWrtDocs/Har â€¦ sys/WRT54G</a> and <a href="http://www.nslu2-linux.org/wiki/HowTo/AddASerialPort">http://www.nslu2-linux.org/wiki/HowTo/AddASerialPort</a> for more information. </p><p>Cheers<br />/T</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p43005">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dadaniel</div>
					<div class="post-datetime">
						20 Feb 2007, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>haha :-(</p><p>Try this on a WL-HDD!! You have to solder and buy ICs and so on .... only because there is no properly working failsafe in this thing <img src="https://forum.openwrt.org/img/smilies/mad.png" width="15" height="15" alt="mad" />:mad::mad::mad:</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p43011">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Timo Beil</div>
					<div class="post-datetime">
						21 Feb 2007, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Dadaniel, you got me wrong :-)</p><p>There is no question that the fail-safe mode has to be fixed (however, it is very likely that a patch to the diag module I posted earlier would fix the problem). </p><p>Using the serial port doesn&#039;t require advanced electronics skills, since you can use a mobile phone cable that already has all the necessary interface electronics. Building a buffered JTAG cable is a different story ;-)</p><p>I mentioned the serial interface/CFE option with the WRT54GL in mind. The WL-HDD doesn&#039;t even have a serial interface. You&#039;ll have to be a little bit more inventive ;-)</p><p>Cheers<br />/T</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p43494">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Darkstone</div>
					<div class="post-datetime">
						1 Mar 2007, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve run into the same problem on my WRT54GL. I upgraded from the stock firmware to X-Wrt (version from a couple of days ago, I think 2560) and everything was fine, until I rebooted the router. After that, somehow the MAC cloning did not work, although the NVRAM var seemed to be OK. The router simply didn&#039;t get the IP from my ISP. I may have done some changes to VLANs (it was late and I was tired, yes, I know, I should&#039;ve gone to bed instead), but nothing helped - the router actually became inaccessible. I decided to TFTP in the morning (today), but it does not work. It is quite possible that it&#039;s because the moment I unplug the router, Windoze report that net cable has been unplugged and by the time they recover when I plug the router, I miss the window of opportunity.</p><p>I decided to try to enter failsafe and held the reset button and DMZ light started flashing. However, while ping works, telnet does not. Any and all advice will be very appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p43500">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Darkstone</div>
					<div class="post-datetime">
						1 Mar 2007, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>I have made progress and maybe this info can come handy to others as well. </p><p>The problem seems to be in the X-Wrt kernel. After digging out an old laptop and realizing that the PCMCIA card/interface is not reset once the cable is pulled out, I have successfully TFTP-ed the latest vanilla OpenWrt and the router came back alive. On 54GL, the right time to hit enter to start TFTP transfer is the moment right after all 5 LAN LEDs have flashed.</p><p>I&#039;m busy with some other stuff, so I won&#039;t set up things just now, but if anyone needs any further info, do not hesitate to contact me.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>