<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> No monitor mode on WRT54GL</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p80377">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						26 Jan 2009, 01:33					</div>
				</div>
				<div class="post-content content">
					<p>8.09 rc1 and 8.09 rc2, 2.4 kernels won&#039;t go into monitor mode.&nbsp; Wireless is enabled, not configured and not bridged.</p><div class="codebox"><pre><code>ifconfig wl0 down
iwconfig wl0 mode monitor</code></pre></div><p>gives this error:</p><p>Error for wireless request &quot;Set Mode&quot; (8B06) :<br />&nbsp; &nbsp; SET failed on device wl0 ; Invalid argument.</p><div class="codebox"><pre><code>ifconfig wl0 down
wlc monitor 1
iwconfig</code></pre></div><p>causes a reboot. </p><p>I&#039;ve tried many combinations of ifconfig wl0 down/up, ifdown/ifup prism0, etc.&nbsp; The 2.6 kernel works with the above commands, but I like the wireless features and stability in 2.4.</p>											<p class="post-edited">(Last edited by <strong>Belfry</strong> on 26 Jan 2009, 02:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80557">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						28 Jan 2009, 02:22					</div>
				</div>
				<div class="post-content content">
					<p>Guess I&#039;ll fill out a ticket.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80699">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						29 Jan 2009, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>Florian answered my ticket, but his suggestion of adding &quot;option mode monitor&quot; to /etc/config/wireless isn&#039;t working for me:</p><p>config wifi-device&nbsp; wl0<br />&nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp; &nbsp; broadcom<br />&nbsp; &nbsp; option disabled&nbsp; &nbsp; &nbsp; &nbsp; 0</p><p>config wifi-iface<br />&nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; wl0<br />&nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp; &nbsp; monitor</p><p>No monitoring tools work, there is no prism0 interface (even after &quot;ifconfig wl0 up&quot; and &quot;wlc monitor 1&quot;) and iwconfig reboots the machine. If I run &quot;iwconfig wl0&quot; the output indicates managed mode.</p><p>Has anyone been able to get the broadcom driver in monitor mode under 8.09 with the 2.4 kernel?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p80799">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						31 Jan 2009, 06:55					</div>
				</div>
				<div class="post-content content">
					<p>Just calling out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p81677">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						12 Feb 2009, 00:31					</div>
				</div>
				<div class="post-content content">
					<p>Just another bump.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82379">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Fadoksi</div>
					<div class="post-datetime">
						22 Feb 2009, 15:09					</div>
				</div>
				<div class="post-content content">
					<p>I have also been fighting with this... Found no solution. I&#039;m having the exactly same problem: it reboots when you do iwconfig after &quot;wlc monitor 1&quot;</p><p>I would appreciate if someone had answer for this :S</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82555">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						24 Feb 2009, 18:20					</div>
				</div>
				<div class="post-content content">
					<p>No solution yet, either from my experiments or from ticket #4523.</p><p>Some things I&#039;ve tried:</p><p>1) Builds from 8.09 rc2 source and snapshots --exactly the same symptoms.&nbsp; &nbsp;I thought I&#039;d just try this based on some unrelated &quot;load_nls&quot; problems I&#039;ve resolved through doing builds.&nbsp; However, there doesn&#039;t seem to be any build options which would resolve this problem.</p><p>2) Uninstall the standard broadcom driver and replace with the MIMO version--functional wireless but exactly the same symptoms.</p><p>3) Swap /lib/wifi/broadcom.sh from Kamikaze 7.09--multiple errors on &quot;wifi up&quot;, no functional wireless.</p><p>4) And the problem is still there with the newly released 8.09.&nbsp; </p><p>Kamikaze 8.09 (Broadcom 2.4) is otherwise superior to 7.09, especially in multiple ssid throughput and CPU usage--a really great distribution with just a few minor issues.</p>											<p class="post-edited">(Last edited by <strong>Belfry</strong> on 24 Feb 2009, 19:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83435">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">yui72o</div>
					<div class="post-datetime">
						8 Mar 2009, 07:25					</div>
				</div>
				<div class="post-content content">
					<p>Hello Belfry,<br />I got stuck too with 8.09 and Monitor mode not available on WRT54GL for this version.<br />Yeah I could get back to whiterussian or 7.09 but I couldn&#039;t install aircrack 1.0 on them..</p><p>If you find a way to work it out I am really interested.<br />Hope it will be soon..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84318">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						21 Mar 2009, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>Doesn&#039;t work with a WRT54G v3.1, which is based on the BCM4712.&nbsp; The WRT54GL is based on the BCM5352.</p><p>Just thought I&#039;d give it a try.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90604">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Belfry</div>
					<div class="post-datetime">
						29 Jun 2009, 21:00					</div>
				</div>
				<div class="post-content content">
					<p>Not working in 8.09.1 <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Same symptoms: <br />wlc monitor 1 + iwconfig = reboot.&nbsp; <br />iwconfig wl0 mode monitor = &quot;Error for wireless request &quot;Set Mode&quot; (8B06) : SET failed on device wl0 ; Invalid argument.&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96341">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">TomasD</div>
					<div class="post-datetime">
						24 Oct 2009, 23:57					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />Similar here, unable to set wlan0 as AP (master mode) tried both option mode=master and option mode=ap in /etc/config/wireless </p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bg&nbsp; ESSID:&quot;&quot;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mode:Managed&nbsp; Frequency:2.412 GHz&nbsp; Access Point: Not-Associated&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx-Power=0 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Retry min limit:7&nbsp; &nbsp;RTS thr:off&nbsp; &nbsp;Fragment thr=2352 B&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Encryption key:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Link Quality:0&nbsp; Signal level:0&nbsp; Noise level:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rx invalid nwid:0&nbsp; Rx invalid crypt:0&nbsp; Rx invalid frag:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tx excessive retries:0&nbsp; Invalid misc:0&nbsp; &nbsp;Missed beacon:0</p><p>root@OpenWrt:~# iwconfig wlan0 mode master<br />Error for wireless request &quot;Set Mode&quot; (8B06) :<br />&nbsp; &nbsp; SET failed on device wlan0 ; Invalid argument.</p><p>Was this ever resolved?<br />Linksys wrt54grv11, running kamikaze RDC 321x [2.6], AirLink101 AR525W profile</p>											<p class="post-edited">(Last edited by <strong>TomasD</strong> on 24 Oct 2009, 23:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97571">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">hipatia</div>
					<div class="post-datetime">
						18 Nov 2009, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i`ve same symptos, is there any solution?? <br />Maybe we have to uninstall 8.09???<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115454">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">aztroboy</div>
					<div class="post-datetime">
						18 Aug 2010, 08:24					</div>
				</div>
				<div class="post-content content">
					<p>bump! has anyone solved this issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128114">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">iriki</div>
					<div class="post-datetime">
						12 Feb 2011, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Oh man, I&#039;m on the same boat guys, this is the only thread about this problem. </p><p>Ended up installing Kamikaze 7.07, works a charm \o/</p>											<p class="post-edited">(Last edited by <strong>iriki</strong> on 21 Feb 2011, 22:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218193">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Mok</div>
					<div class="post-datetime">
						22 Nov 2013, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Any solution for this yet? I have a wrt350n v1, running Backfire (10.03.1, r29597) and hit exactly the same problem.<br />wl/wlc creates prism0, but when I try to use iwconfig/monitor tools, it page faults:</p><div class="codebox"><pre><code>BusyBox v1.15.3 (2011-12-27 18:06:27 EET) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1, r29597) ------------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@metrou:/# 
root@metrou:/# 
root@metrou:/# wl monitor 1
root@metrou:/# iwconfig
lo        no wireless extensions.

eth0      no wUnable to handle kernel paging request at virtual address 00000010, epc == c01d99ac, ra == c01d9530
ireless extensioOops in fault.c::do_page_fault, line 206:
$0 : 00000000 813a5cb0 00000100 00000001 813a5b78 813a5cb0 00000000 0000000c
$8 : 00000000 813a5b78 0000000c 00000000 45454549 00000001 00000057 32303820
$16: ffffffe6 81bd0c00 813a5cd0 801a0000 00000000 80ea0200 00008b05 00405dbc
$24: 00000000 801145b4                   813a4000 813a5b48 004a092c c01d9530
Hi : 0000000f
Lo : 0001ef45
epc   : c01d99ac    Tainted: P 
Status: 1000fc03
Cause : 00000008
PrId  : 0002901a
Process iwconfig (pid: 1497, stackpage=813a4000)
Stack:    ffffffe6 81bd0c00 ffffffe6 81bd0c00 813a5d08 801a0000 0000001d
 813a5cd0 0000000c 00000000 00000000 00000000 ffffffe9 813a5e20 00000000
 80eb4fb0 00000000 813a5d00 00000106 813a5d08 0000000b 00000000 00000000
 00000000 00000000 813a5e20 813a5bb8 00000001 00000000 1000fc00 ffffffe6
 81bd0c00 813a5d70 801a0000 81bd0e00 813a5e90 00008b2b 00000001 00000040
 c01d99d0 ...
Call Trace:   [&lt;c01d99d0&gt;] [&lt;800090f0&gt;] [&lt;800caca4&gt;] [&lt;800d015c&gt;] [&lt;c01da950&gt;]
 [&lt;c01db2d8&gt;] [&lt;c01daec0&gt;] [&lt;c0188738&gt;] [&lt;8000306d&gt;] [&lt;c01db300&gt;] [&lt;c0189924&gt;]
 [&lt;c01ddb2c&gt;] [&lt;c01db0b0&gt;] [&lt;80017f54&gt;] [&lt;c01d96c4&gt;] [&lt;c01ff1d4&gt;] [&lt;c01fe0f4&gt;]
 [&lt;c01dae48&gt;] [&lt;c01fd0a0&gt;] [&lt;c01fe314&gt;] [&lt;c0198ff8&gt;] [&lt;c0198fc0&gt;] [&lt;80149e38&gt;]
 [&lt;c01daec0&gt;] [&lt;c0192560&gt;] [&lt;80026ea8&gt;] [&lt;80028520&gt;] [&lt;800db1a4&gt;] [&lt;8013e640&gt;]
 [&lt;c019d43c&gt;] [&lt;800d1acc&gt;] [&lt;80002408&gt;] [&lt;80097f94&gt;] [&lt;80097eb8&gt;] [&lt;80049388&gt;]
 [&lt;8013aa44&gt;] [&lt;80008aa0&gt;] [&lt;8005bd8c&gt;]

Code: 8f820004  34420100  af820004 &lt;8e820010&gt; 8e24009c  8fa50018  8fa70020  afa20010  3c02c019 
ns.

sit0     Kernel panic: Aiee, killing interrupt handler!
 no wireless extIn interrupt handler - not syncing
ensions.

eth0 .0    no wireles&lt;0&gt;Rebooting in 3 seconds..s extensions.

eth0.1    no wireless extensions.

br-lan    no wireless extensions.

wl0       IEEE 802.11-DS  ESSID:&quot;&quot;  
          Mode:Master  Frequency:2.412 GHz  Access Point: Not-Associated   
          Bit Rate:54 Mb/s   Tx-Power:10 dBm   
          RTS thr:off   Fragment thr:off
          Link Quality:5  Signal level:0  Noise level:171
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:1   Missed beacon:0

Please stand by while rebooting the system...


CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: Mon Oct 30 23:22:44 CST 2006 (root@linux)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.
....</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218208">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Nov 2013, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>The monitor mode works fine as long as you do not try to use wext with it (iwconfig, iwlist, iwpriv).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p218211">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Mok</div>
					<div class="post-datetime">
						22 Nov 2013, 14:56					</div>
				</div>
				<div class="post-content content">
					<p>Hi jow, thanks for your reply! I don&#039;t know if it&#039;s just me, but I get a similar page fault if I try to use airodump-ng directly:</p><div class="codebox"><pre><code>BusyBox v1.15.3 (2011-12-27 18:06:27 EET) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1, r29597) ------------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@metrou:/# wl monitor 1
root@metrou:/# ifconfig prism0 up
root@metrou:/# airodump-ng -i prism0
Unable to handle kernel paging request at virtual address 00000010, epc == c01d99ac, ra == c01d9530
Oops in fault.c::do_page_fault, line 206:
$0 : 00000000 80e0bcb0 00000100 00000001 80e0bb78 80e0bcb0 00000000 00000004
$8 : 00000000 80e0bb78 00000004 00000000 00000000 00000000 00000000 00000000
$16: ffffffe6 81b53c00 80e0bcd0 801a0000 00000000 80e90200 00008b07 00456d38
$24: 00000000 801280bc                   80e0a000 80e0bb48 00456dcc c01d9530
Hi : 00000369
Lo : 00001be5
epc   : c01d99ac    Tainted: P 
Status: 1000fc03
Cause : 00000008
PrId  : 0002901a
Process airodump-ng (pid: 1498, stackpage=80e0a000)
Stack:    8001c41c 8001c41c 80e0bc50 80017e90 801f4464 00000001 00000013
 80e0bcd0 00000004 00000000 00000000 00000000 00074090 00000000 80e0bc50
 800ab5d0 80e0bc88 2aabd000 800090f0 80e0a000 81d1d0e0 00000020 800caca4
 80e0bc50 81d1d0e0 81d1d0e0 800d015c 80d2cc60 00000187 00000002 80e0bc10
 81b53c00 801a0000 c01da950 00000000 80d2cc60 00000001 00000000 80e362c0
 00000020 ...
Call Trace:   [&lt;8001c41c&gt;] [&lt;8001c41c&gt;] [&lt;80017e90&gt;] [&lt;800ab5d0&gt;] [&lt;800090f0&gt;]
 [&lt;800caca4&gt;] [&lt;800d015c&gt;] [&lt;c01da950&gt;] [&lt;800caca4&gt;] [&lt;c0188738&gt;] [&lt;c01ff1d4&gt;]
 [&lt;800cae7c&gt;] [&lt;c01fd0a0&gt;] [&lt;c01fe314&gt;] [&lt;c01db418&gt;] [&lt;c01daec0&gt;] [&lt;c0198ff8&gt;]
 [&lt;c0198fc0&gt;] [&lt;8000306d&gt;] [&lt;c01dae48&gt;] [&lt;c01db454&gt;] [&lt;c01ddb2c&gt;] [&lt;80126c80&gt;]
 [&lt;c01da950&gt;] [&lt;c01d96c4&gt;] [&lt;800d00d8&gt;] [&lt;c01ff1d4&gt;] [&lt;800d0548&gt;] [&lt;800d0704&gt;]
 [&lt;80018318&gt;] [&lt;80017f54&gt;] [&lt;80044a24&gt;] [&lt;800027a4&gt;] [&lt;80026ea8&gt;] [&lt;80028520&gt;]
 [&lt;8004ee64&gt;] [&lt;800db1a4&gt;] [&lt;800d1acc&gt;] [&lt;80012580&gt;] [&lt;800123b8&gt;] ...

Code: 8f820004  34420100  af820004 &lt;8e820010&gt; 8e24009c  8fa50018  8fa70020  afa20010  3c02c019 
Kernel panic: Aiee, killing interrupt handler!
In interrupt handler - not syncing
 &lt;0&gt;Rebooting in 3 seconds..Please stand by while rebooting the system...


CFE version 1.0.37 for BCM947XX (32bit,SP,LE)
Build Date: Mon Oct 30 23:22:44 CST 2006 (root@linux)
Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>