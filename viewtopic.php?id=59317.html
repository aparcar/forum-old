<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Can&#039;t ping devices in network</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p289928">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ch3p</div>
					<div class="post-datetime">
						1 Sep 2015, 00:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;ve successfully installed OpenWRT BARRIER BREAKER (14.07, r42625) on a Raspberry Pi B+. I&#039;m trying to realize a static IP via OpenVPN routing for my DMZ network which I was able to realize in the past with an old WRT54GL. But the WRT is broken. </p><p>So I connected a Debug Cable to the GPIO Pins of the Pi and changed the network config for the device:</p><p>root@OpenWrt:/# cat /etc/config/network</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;10.25.0.201&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.254&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.254.253&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;dmz&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.20.11&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option auto &#039;1&#039;</p><br /><p>On my Switch the Pi is connected to a Port which has one untagged VLAN for the &#039;lan&#039; interface on the OpenWRT and two VLANs tagged (20 and 254) for the &#039;dmz&#039; and the &#039;wan&#039; interface. </p><p>In VLAN254 (WAN) there are 2 devices:<br />192.168.254.1 (Firewall)<br />192.168.254.254 (Core Router)</p><p>Here I can only ping the Core Router. I&#039;m not able to ping 192.168.254.1. Also when I try to add this IP as default gateway, I&#039;m not able to ping any addresses outside the firewall (e.g. 8.8.8.8)</p><br /><p>In VLAN20 (DMZ) there are also 2 devices:<br />192.168.20.1 (Current Gateway for DMZ)<br />192.168.20.101 (Webserver)</p><p>Here I can ping and access everything.</p><br /><p>In the untagged VLAN, I can ping nothing. What am I doing wrong? I also tried to untag VLAN254 and removed the other untagged VLAN (because it would not be needed for my project) with the same result. I can only ping 192.168.254.254.</p><br /><p>Regards,<br />Ch3p</p><br /><p>EDIT:<br />Strange. If I ssh to 192.168.254.1 it works fine. But if I add my Laptop to VLAN254 I can successfully ping 192.168.254.1 and outside IPs.</p>											<p class="post-edited">(Last edited by <strong>ch3p</strong> on 1 Sep 2015, 00:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>