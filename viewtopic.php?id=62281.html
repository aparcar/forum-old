<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Wireless issue on WDR4300</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p308387">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						20 Jan 2016, 20:29					</div>
				</div>
				<div class="post-content content">
					<p>I have a WDR4300 v1.7, and am running Chaos Calmer - 15.05.&nbsp; I recently installed the router, and appear to be having a problem with connectivity to a wireless printer.&nbsp; Rebooting the printer establishes a connection, and I&#039;m able to ping the device and access the webadmin section on the printer.&nbsp; After a short period, the printer is no longer accessible until another reboot.</p><p>As a temporary work around, I connected the printer to the network via CAT5e, and it&#039;s been stable (so far).&nbsp; The problem appears to be with the wireless on this router, since the problem manifested after I replaced the old router.</p><p>Other wireless devices on the network, do not appear to be affected by this wireless issue; smart phones, and laptops appear to be working fine.</p><p>Are there any settings that I can check or modify that might help address the issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308449">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						21 Jan 2016, 08:09					</div>
				</div>
				<div class="post-content content">
					<p>I had a weird issue where some clients would lose connection to OpenWrt when the ac-channel was set to auto. Not sure if it&#039;s your issue, but posting your wifi config file wouldn&#039;t hurt.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308617">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						22 Jan 2016, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>I checked the device, and it&#039;s configured to run on channel 11.&nbsp; Here is the wireless config:</p><br /><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; option path &#039;platform/ar934x_wmac&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; option txpower &#039;19&#039;<br />&nbsp; &nbsp; option country &#039;US&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option ssid &#039;wireless1&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;xxxxx&#039;</p><p>config wifi-device &#039;radio1&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option channel &#039;36&#039;<br />&nbsp; &nbsp; option hwmode &#039;11a&#039;<br />&nbsp; &nbsp; option path &#039;pci0000:00/0000:00:00.0&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; option txpower &#039;15&#039;<br />&nbsp; &nbsp; option country &#039;US&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio1&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option ssid &#039;wireless5G&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;xxxxx&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308635">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						22 Jan 2016, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running the latest snapshot on this device (Designated Driver). It runs nice and stable with DD</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308651">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						22 Jan 2016, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Where do you download DD?&nbsp; Also, I do want to note that other wireless devices (laptops, smartphones), have not exhibited any sort of connection issues.&nbsp; This wireless printer (HP OfficeJet 276DW) only started suffering from this problem once I replaced the old TP-link router with this new one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308656">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						22 Jan 2016, 22:20					</div>
				</div>
				<div class="post-content content">
					<p>If this is the TPlink 4300:</p><p>Do a sysupgrade:<br />wget <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/snapshots/ … pgrade.bin</a></p><p>sysupgrade -v /tmp/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-sysupgrade.bin</p><br /><br /><p>Have you tried to connect the printer to a usb port and run a print server?</p><p><a href="https://wiki.openwrt.org/doc/howto/p910nd.server">https://wiki.openwrt.org/doc/howto/p910nd.server</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308742">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						23 Jan 2016, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>The printer is located centrally in the office, whereas the router is in the network closet.&nbsp; I will attempt the system upgrade next week.&nbsp; Hopefully that will not cause other problems, since the wireless is secondary to the vlan setup.&nbsp; If DD causes new problems, is it possible to downgrade back to CC?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308744">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						23 Jan 2016, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>Try adding the &#039;noscan&#039; option to both radios to see if it helps.</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel &#039;10&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option path &#039;platform/ar934x_wmac&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option noscan &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option txpower &#039;22&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;US&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308747">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						23 Jan 2016, 19:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kgoerbig wrote:</cite><blockquote><p>If this is the TPlink 4300:</p><p>Do a sysupgrade:<br />wget <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-sysupgrade.bin">http://downloads.openwrt.org/snapshots/ … pgrade.bin</a></p><p>sysupgrade -v /tmp/openwrt-ar71xx-generic-tl-wdr4300-v1-squashfs-sysupgrade.bin</p></blockquote></div><p>Never forget to mention that trunk builds does not contain web interface by default <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308748">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kgoerbig</div>
					<div class="post-datetime">
						23 Jan 2016, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>True. I forgot mention that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308868">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						24 Jan 2016, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for mentioning about the lack of GUI with the DD trunk.&nbsp; That would have been a most unfortunate surprise <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Are their instructions on how to install the GUI?</p><p>I was informed that the printer issues appear to occur on workstations whose printer queues use the HP network re-discovery port monitor.&nbsp; I won&#039;t be able to confirm this until Monday, but in the interim, could this possibly explain the behavior?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308871">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						24 Jan 2016, 19:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rdege wrote:</cite><blockquote><p>Thank you for mentioning about the lack of GUI with the DD trunk.&nbsp; That would have been a most unfortunate surprise <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Are their instructions on how to install the GUI?</p><p>I was informed that the printer issues appear to occur on workstations whose printer queues use the HP network re-discovery port monitor.&nbsp; I won&#039;t be able to confirm this until Monday, but in the interim, could this possibly explain the behavior?</p></blockquote></div><p>If your connection is IPoE with dynamic IP, just ssh to router<br />ssh root@192.168.1.1</p><p>opkg update<br />opkg install luci<br />/etc/init.d/uhttpd restart</p><p>but if your connection setup is more difficult, better to use openwrt imagebuilder to prepare trunk image with luci built-in<br /><a href="https://wiki.openwrt.org/doc/howto/obtain.firmware.generate">https://wiki.openwrt.org/doc/howto/obta … e.generate</a></p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 24 Jan 2016, 19:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309689">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rdege</div>
					<div class="post-datetime">
						31 Jan 2016, 06:56					</div>
				</div>
				<div class="post-content content">
					<p>@kgoerbig - I tried adding no scan, but that didn&#039;t help.&nbsp; I also tried changing channels from 11 to 6, dropping from N to legacy, and disabling WMM, but nothing resolved the problem.</p><p>I&#039;m still not sure which device is the culprit here, but it looks like I&#039;ll be upgrading to DD within the next week or two.&nbsp; I will also note that this problem does not occur when the printer is connected via ethernet.&nbsp; This is only over wireless</p><p>Here are two scenarios that I&#039;m able to reproduce:<br />Power on the printer (Powersave is set to 10min)<br />All workstations can print to the printer<br />Once the printer goes into power save mode, any printer queue that uses the hp discovery port is unable to wake up the printer.&nbsp; If I change the port to a TCP/IP using the printer&#039;s static IP, I&#039;m able to wake up the printer.&nbsp; Otherwise, power cycling the printer temporarily resolves the problem.</p><br /><p>Scenario #2<br />Power on the printer<br />Workstation with printer queue that uses the tcp/ip port loses connection with the printer within a 5 minute window of the last print job from that workstation.<br />Rebooting the router, or saving and applying changes to the wireless section on the router allows the laptop to finish processing the remainder of the printer queue.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>