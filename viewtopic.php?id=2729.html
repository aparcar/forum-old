<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Curiosity did not kill the cat but my ASUS WL-500g deluxe</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p12801">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mmaexx</div>
					<div class="post-datetime">
						26 Sep 2005, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>A few days ago i had the (dumb) idea to test the 2.6 build from the current development branch <br />on my ASUS WL-500g deluxe.</p><p>The result is a now bricked wl-500gx.<br />But as you can see on the dump from the serial console, the bootloader seemd to be intact till the first reboot.<br />Since then NOTHING happens on the serial console anymore.<br />All i got when i do a power cycle ist a shot light up on the network leds LAN1-4 and WAN<br />POwer and AIR did not even light up.</p><p>Seems the flash including the bootloader is totally erased or corrupted.</p><p>The deluxe unit seems to lack a JTAG Port.</p><p>So does anybody have an idea what else can be done to unbrick the unit .<br />Probably some hints whether and how it ist possible to add a jtag port.</p><p>anny suggestions more than welcome</p><p>this is what i got on my console:</p><p>---------------<br />root@OpenWrt:/tmp# mtd -e linux -r write openwrt-brcm-2.6-jffs2-4MB-v0.9-b200509<br />21_7.trx linux<br />Writing openwrt-brcm-2.6-jffs2-4MB-v0.9-b20050921_7.trx to linux ...<br />Unlocking linux ...<br />Erasing linux ...<br />Unlocking linux ...<br />Unknown INCOMPAT nodetype F1C8 at 00170AB4<br />jffs2_read_inode(): No data nodes found for ino #312<br />Bummer, could not run &#039;/sbin/halt&#039;: Input/output error<br />The system is going down NOW !!Node CRC 3b21bf2b != calculated CRC dd90d846 for<br />node at 001c7e70</p><p>Sending SIGTERM to all processes.<br />Please stand by while rebooting the system.<br />Restarting system.<br />Please stand by while rebooting the system...</p><br /><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: Â¤Â­ 12Â¤Ã«3 20:46:15 CST 2004 (root@PaNLinux)<br />Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.</p><p>Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 1.3.2.0<br />rndis0: Broadcom USB RNDIS Network Adapter (P-t-P)<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x80300000 - 0x80436CF0 (1273072)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x803311B0 - 0x80333540 (9104)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80333540 - 0x80334CF0 (6064)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80334CF0 - 0x80434CF0 (1048576)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80434CF0 - 0x80436CF0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x80300000 - 0x803311B0 (201136)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x00437000 - 0x00477000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:00000000 - D:00000000</p><p>Device eth0:&nbsp; hwaddr 00-11-D8-70-1D-88, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Rescue Flag disable.<br />Reading :: TFTP Server.<br />Failed.: Timeout occured<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3732 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p><p>--&gt; unit dead !!!!<br />----------------</p><p>cheers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12803">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						26 Sep 2005, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Flash via the CFE and the serial console.</p><p>Should be work similar as described for the WGT port under &quot;1. Status of OpenWrt&quot;</p><p><a href="http://wiki.openwrt.org/OpenWrtDocs/Hardware/Netgear/WGT634U">http://wiki.openwrt.org/OpenWrtDocs/Har … ar/WGT634U</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12805">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mmaexx</div>
					<div class="post-datetime">
						26 Sep 2005, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>thanx for the answer,</p><p>BUT there is NO CFE anymore.</p><p>When i switch the power on<br />there is NO output on the serial console<br />no possibility to ping the unit </p><p>:-(</p>											<p class="post-edited">(Last edited by <strong>mmaexx</strong> on 26 Sep 2005, 16:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12833">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wbx</div>
					<div class="post-datetime">
						27 Sep 2005, 00:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmaexx wrote:</cite><blockquote><p>A few days ago i had the (dumb) idea to test thttp://openwrt.org/forum/viewtopic.php?pid=12829#p12829he 2.6 build from the current development branch <br />on my ASUS WL-500g deluxe.</p></blockquote></div><p>From where you got the idea that you can use 2.6 for Asus WL500dx?! <br />Very bad idea. The flash driver is not ready for Linksys WRT54GS/G or any other model than Netgear WGT634u. </p><div class="quotebox"><cite>mmaexx wrote:</cite><blockquote><p>The result is a now bricked wl-500gx.<br />But as you can see on the dump from the serial console, the bootloader seemd to be intact till the first reboot.<br />Since then NOTHING happens on the serial console anymore.<br />All i got when i do a power cycle ist a shot light up on the network leds LAN1-4 and WAN<br />POwer and AIR did not even light up.</p><p>Seems the flash including the bootloader is totally erased or corrupted.</p></blockquote></div><p>That is the reason, we call the tree: DEVELOPMENT TREE. If you do not communicate with the developers, you should not use any<br />DEVELOPMENT version on your router.</p><p>Get a new unit and do not play with stuff you do not participate.</p>											<p class="post-edited">(Last edited by <strong>wbx</strong> on 27 Sep 2005, 00:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12855">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mmaexx</div>
					<div class="post-datetime">
						27 Sep 2005, 12:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wbx wrote:</cite><blockquote><p>From where you got the idea that you can use 2.6 for Asus WL500dx?! <br />Very bad idea. The flash driver is not ready for Linksys WRT54GS/G or any other model than Netgear WGT634u.</p></blockquote></div><p>From nowhere - that&#039;s why i called it a bad idea ;-)</p><div class="quotebox"><cite>wbx wrote:</cite><blockquote><p>Get a new unit and do not play with stuff you do not participate.</p></blockquote></div><p>Well i did in no way acuse you of anything.<br />You all do great work and this was definitely my fault.<br />It&nbsp; was not my intention to blame you of anything.</p><p>But i guess the question if it is possible to add a jtag connector to a wl-500gx<br />IS of common interest.</p><p>BTW i know i use the Development branch<br />&nbsp; &nbsp; &nbsp; &nbsp; i know what a development branch is<br />&nbsp; &nbsp; &nbsp; &nbsp; i know of the risks<br />&nbsp; &nbsp; &nbsp; &nbsp; i already once offered to participate but obviously no one was interested<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />BTW a ASUS is a nice Brick much nicer to put it an top of you letters than a linksys :-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p12862">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">olli</div>
					<div class="post-datetime">
						27 Sep 2005, 14:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmaexx wrote:</cite><blockquote><p>But i guess the question if it is possible to add a jtag connector to a wl-500gx</p></blockquote></div><p>It&#039;s currently _unpossible_ to get a JTAG working on the Asus WL-500g Deluxe.</p><p>It even don&#039;t have any pin outs from the processor the the JTAG adapter.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p14978">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wbx</div>
					<div class="post-datetime">
						6 Nov 2005, 23:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mmaexx wrote:</cite><blockquote><p>A few days ago i had the (dumb) idea to test the 2.6 build from the current development branch <br />on my ASUS WL-500g deluxe.</p><p>The result is a now bricked wl-500gx.<br />But as you can see on the dump from the serial console, the bootloader seemd to be intact till the first reboot.<br />Since then NOTHING happens on the serial console anymore.<br />All i got when i do a power cycle ist a shot light up on the network leds LAN1-4 and WAN<br />POwer and AIR did not even light up.</p><p>Seems the flash including the bootloader is totally erased or corrupted.</p><p>The deluxe unit seems to lack a JTAG Port.</p><p>So does anybody have an idea what else can be done to unbrick the unit .<br />Probably some hints whether and how it ist possible to add a jtag port.</p><p>anny suggestions more than welcome</p><p>this is what i got on my console:</p><p>---------------<br />root@OpenWrt:/tmp# mtd -e linux -r write openwrt-brcm-2.6-jffs2-4MB-v0.9-b200509<br />21_7.trx linux<br />Writing openwrt-brcm-2.6-jffs2-4MB-v0.9-b20050921_7.trx to linux ...<br />Unlocking linux ...<br />Erasing linux ...<br />Unlocking linux ...<br />Unknown INCOMPAT nodetype F1C8 at 00170AB4<br />jffs2_read_inode(): No data nodes found for ino #312<br />Bummer, could not run &#039;/sbin/halt&#039;: Input/output error<br />The system is going down NOW !!Node CRC 3b21bf2b != calculated CRC dd90d846 for<br />node at 001c7e70</p><p>Sending SIGTERM to all processes.<br />Please stand by while rebooting the system.<br />Restarting system.<br />Please stand by while rebooting the system...</p><br /><p>CFE version 1.0.37 for BCM947XX (32bit,SP,LE)<br />Build Date: Â¤Â­ 12Â¤Ã«3 20:46:15 CST 2004 (root@PaNLinux)<br />Copyright (C) 2000,2001,2002,2003 Broadcom Corporation.</p><p>Initializing Arena.<br />Initializing Devices.<br />et0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 1.3.2.0<br />rndis0: Broadcom USB RNDIS Network Adapter (P-t-P)<br />CPU type 0x29007: 200MHz<br />Total memory: 0x2000000 bytes (32MB)</p><p>Total memory used by CFE:&nbsp; 0x80300000 - 0x80436CF0 (1273072)<br />Initialized Data:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x803311B0 - 0x80333540 (9104)<br />BSS Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80333540 - 0x80334CF0 (6064)<br />Local Heap:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80334CF0 - 0x80434CF0 (1048576)<br />Stack Area:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x80434CF0 - 0x80436CF0 (8192)<br />Text (code) segment:&nbsp; &nbsp; &nbsp; &nbsp;0x80300000 - 0x803311B0 (201136)<br />Boot area (physical):&nbsp; &nbsp; &nbsp; 0x00437000 - 0x00477000<br />Relocation Factor:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I:00000000 - D:00000000</p><p>Device eth0:&nbsp; hwaddr 00-11-D8-70-1D-88, ipaddr 192.168.1.1, mask 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; gateway not set, nameserver not set<br />Rescue Flag disable.<br />Reading :: TFTP Server.<br />Failed.: Timeout occured<br />Loader:raw Filesys:raw Dev:flash0.os File: Options:(null)<br />Loading: .. 3732 bytes read<br />Entry at 0x80001000<br />Closing network.<br />Starting program at 0x80001000</p><p>--&gt; unit dead !!!!<br />----------------</p><p>cheers</p></blockquote></div><p>Today I started working on 2.6 for brcm boards again, and flashed my WRT54GS v.1.0 with a new image. <br />I can&#039;t believe that the box is dead. I still can push &quot;strg-c&quot; and get into CFE. Same should be possible on your router. </p><p>Why CFE can&#039;t be overwritten?</p><p>long story:</p><p>CFE on Asus WL500g deluxe is 256 kb in size. CFE on Netgear WGT634u is 364 kb in size. CFE on Netgear use the ELF binary format to <br />load the linux kernel. (more exactly in our case, the LZMA-Bootloader, which finally extract and load the LZMA compressed kernel)</p><p>The LZMA bootloader in front of the snapshots are in ELF format. Asus WL500g deluxe use TRX format to find the LZMA bootloader.</p><p>That is the reason it stopps at&nbsp; &nbsp;Starting program at 0x80001000, because the CFE bootloader on Asus do not recognize ELF.</p><p>BUT, if OpenWrt never starts up, it can&#039;t use the mtd tool to accidently erase any areas like CFE. I think you should check your cables.</p><p>Serial output should still work. Otherwise send me the &quot;dead&quot; box.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>