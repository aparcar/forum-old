<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR941ND v5.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 31 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=44319&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=44319&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p211260">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">Ektus</div>
					<div class="post-datetime">
						30 Aug 2013, 22:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neoke007 wrote:</cite><blockquote><p>I installed this firmware to my device (941ND ver 5.0). I found the problem:<br />- Failsafe not working: Lan interface not working (light&#039;s lan or wan not turn on), so I can not connect to device via Ethernet port (lan or wan).</p><p>Do anyone else have same problem ?</p></blockquote></div><p>Unfortunately, yes. I successfully bricked my 5.0 version router using that firmware. U-Boot starts the kernel, but it crashes with kernel panic. See last couple of lines in attached log. I&#039;ve got a serial cable, but was yet unable to interrupt the boot loop.</p><p>Regards<br />Ektus.</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Jun  8 2013 - 15:28:02)

U-boot AP123


DRAM:  32 MB
Flash Manuf Id 0x1c, DeviceId0 0x30, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
 wasp  reset mask:c03300
WASP ----&gt; S27 PHY
file: ag934x.c,line: 189==: set LAN&amp;WAN SWAP. --debug by HouXB
GMAC: cfg1 0x80000000 cfg2 0x7114
eth0: ba:be:fa:ce:08:41
s27 reg init
athrs27_phy_setup ATHR_PHY_CONTROL 4 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :0x10
eth0 up
WASP ----&gt; S27 PHY
file: ag934x.c,line: 189==: set LAN&amp;WAN SWAP. --debug by HouXB
GMAC: cfg1 0xf cfg2 0x7214
eth1: ba:be:fa:ce:08:41
s27 reg init lan
ATHRS27: resetting s27
ATHRS27: s27 reset done
athrs27_phy_setup ATHR_PHY_CONTROL 0 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 1 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 2 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :0x10
athrs27_phy_setup ATHR_PHY_CONTROL 3 :0x1000
athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :0x10
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] cpu srif ddr srif cpu 535 ddr 400 ahb 200
AR9341
detect mem size
Uart Init
Booting WASP !!! -:) ...
[    0.000000] sys id = 121 Atheros AR9341 rev 1.1 (0x0121)
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x01ffffff]
[    0.000000] Primary instruction cache 64kB, 4-way, VIPT, I-cache aliases, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Linux version 3.9.4 (root@dd-wrt) (gcc version 4.8.1 (OpenWrt/Linaro GCC 4.8-2013.04 r36550) ) #328 Mon May 27 08:33:25 CEST 2013
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line: console=ttyS0,115200 root=1f02 rootfstype=squashfs noinitrd init=/sbin/init
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] __ex_table already sorted, skipping sort
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29004k/32768k available (2190k kernel code, 3764k reserved, 419k data, 204k init, 0k highmem)
[    0.000000] NR_IRQS:80
[    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.490000] 25MHZ ref freq
[    0.510000] bio: create slab &lt;bio-0&gt; at 0
[    0.520000] Switching to clocksource MIPS
[    0.520000] NET: Registered protocol family 2
[    0.530000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.530000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.540000] TCP: Hash tables configured (established 512 bind 512)
[    0.540000] TCP: reno registered
[    0.540000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.550000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.560000] NET: Registered protocol family 1
[    0.560000] gpio_proc: module loaded and /proc/gpio/ created
[    0.570000] wl0gpio_proc: module loaded and /proc/wl0gpio/ created
[    0.580000] squashfs: version 3.0 (2006/03/15) Phillip Lougher
[    0.580000] msgmni has been set to 56
[    0.590000] io scheduler noop registered (default)
[    0.590000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.620000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.620000] console [ttyS0] enabled, bootconsole disabled
[    0.620000] console [ttyS0] enabled, bootconsole disabled
[    0.640000] guessed flashsize = 4M
[    0.640000] scanning for root partition
[    0.640000] tplink uboot detected
[    0.650000] guessed bootloader size = 20000
[    0.660000]
[    0.660000] found squashfs at 110000
[    0.660000] Creating 8 MTD partitions on &quot;ar7240-nor0&quot;:
[    0.670000] 0x000000000000-0x000000020000 : &quot;RedBoot&quot;
[    0.670000] 0x000000020000-0x0000003e0000 : &quot;linux&quot;
[    0.680000] 0x000000110000-0x0000003d0000 : &quot;rootfs&quot;
[    0.690000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.690000] 0x0000003d0000-0x0000003e0000 : &quot;ddwrt&quot;
[    0.700000] 0x0000003e0000-0x0000003f0000 : &quot;nvram&quot;
[    0.700000] 0x0000003f0000-0x000000400000 : &quot;board_config&quot;
[    0.710000] 0x000000000000-0x000000400000 : &quot;fullflash&quot;
[    0.720000] 0x000000000000-0x000000020000 : &quot;fullboot&quot;
[    0.730000] libphy: Fixed MDIO Bus: probed
[    0.730000] tun: Universal TUN/TAP device driver, 1.6
[    0.740000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[    0.740000] PPP generic driver version 2.4.2
[    0.750000] PPP BSD Compression module registered
[    0.750000] PPP Deflate Compression module registered
[    0.760000] PPP MPPE Compression module registered
[    0.760000] NET: Registered protocol family 24
[    0.780000] u32 classifier
[    0.790000]     Performance counters on
[    0.790000]     input device check on
[    0.790000]     Actions configured
[    0.800000] Netfilter messages via NETLINK v0.30.
[    0.800000] nf_conntrack version 0.5.0 (453 buckets, 1812 max)
[    0.810000] nf_conntrack_rtsp v0.6.21 loading
[    0.810000] nf_nat_rtsp v0.6.21 loading
[    0.820000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    0.820000] TCP: westwood registered
[    0.830000] TCP: hybla registered
[    0.830000] TCP: vegas registered
[    0.830000] NET: Registered protocol family 17
[    0.840000] Bridge firewalling registered
[    0.840000] 8021q: 802.1Q VLAN Support v1.8
[    0.850000] searching for nvram
[    0.850000] nvram size = 0
[    0.880000] Broken NVRAM found, recovering it (Magic 55AA030E)
[    0.890000] Atheros AR71xx hardware watchdog driver version 0.1.0
[    0.890000] ar71xx-wdt: timeout=15 secs (max=171) ref freq=25000000
[    0.920000] SQUASHFS error: Unknown inode type 15 in squashfs_iget!
[    0.920000] List of all partitions:
[    0.930000] 1f00             128 mtdblock0  (driver?)
[    0.930000] 1f01            3840 mtdblock1  (driver?)
[    0.940000] 1f02            2816 mtdblock2  (driver?)
[    0.940000] 1f03              64 mtdblock3  (driver?)
[    0.950000] 1f04              64 mtdblock4  (driver?)
[    0.950000] 1f05              64 mtdblock5  (driver?)
[    0.960000] 1f06            4096 mtdblock6  (driver?)
[    0.960000] 1f07             128 mtdblock7  (driver?)
[    0.970000] No filesystem could mount root, tried:  squashfs
[    0.970000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)
[    0.970000] Rebooting in 1 seconds..</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211263">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						30 Aug 2013, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>[&nbsp; &nbsp; 0.690000] mtd:<br />partition &quot;rootfs&quot; set to be<br />root filesystem<br />[&nbsp; &nbsp; 0.690000]<br />0x0000003d0000-0x0000003e0000 :<br /><strong>&quot;ddwrt&quot;</strong></p><p>I hardly think that you flashed the firmware posted here..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211266">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">Ektus</div>
					<div class="post-datetime">
						30 Aug 2013, 23:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>[&nbsp; &nbsp; 0.690000] mtd:<br />partition &quot;rootfs&quot; set to be<br />root filesystem<br />[&nbsp; &nbsp; 0.690000]<br />0x0000003d0000-0x0000003e0000 :<br /><strong>&quot;ddwrt&quot;</strong></p><p>I hardly think that you flashed the firmware posted here..</p></blockquote></div><p>ahem... sorry. Has been a while back (was waiting for delivery of the serial cable), so it&#039;s possible I took another file. Yes, wr941NDv5_factory-to-ddwrt.bin looks like it. Sorry for the inconvenience, will switch to the other forum...</p><br /><p>Regards<br />Ektus.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211270">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						31 Aug 2013, 00:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Ektus wrote:</cite><blockquote><p>Sorry for the inconvenience, will switch to the other forum....</p></blockquote></div><p>I didn&#039;t meant that...</p><p>about stoppig uboot, are you sure you typed &quot;tpl&quot; really fast, just when you see &quot;Autoboot....&quot;?? type it many times.. no enter key required!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211272">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">Ektus</div>
					<div class="post-datetime">
						31 Aug 2013, 00:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><div class="quotebox"><cite>Ektus wrote:</cite><blockquote><p>Sorry for the inconvenience, will switch to the other forum....</p></blockquote></div><p>I didn&#039;t meant that...</p><p>about stoppig uboot, are you sure you typed &quot;tpl&quot; really fast, just when you see &quot;Autoboot....&quot;?? type it many times.. no enter key required!</p></blockquote></div><p>Ah okay. Tried it again, and have got a prompt &quot;wasp&gt;&quot; in hyperterminal. So something <span class="bbu">is</span> working. Will continue tomorrow, it&#039;s almost midnight here...</p><br /><p>Thank you for your help!<br />Ektus.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211288">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">Ektus</div>
					<div class="post-datetime">
						31 Aug 2013, 11:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Ektus wrote:</cite><blockquote><p>Ah okay. Tried it again, and have got a prompt &quot;wasp&gt;&quot; in hyperterminal. So something <span class="bbu">is</span> working. Will continue tomorrow, it&#039;s almost midnight here...</p></blockquote></div><p>Success! Flashed openwrt and got the web interface (luci) running.</p><br /><p>Thank you!</p><div class="codebox"><pre><code>wasp&gt; tftp 0x80000000 tl-wr941nd_v5.0.bin
Using eth1 device
TFTP from server 192.168.1.100; our IP address is 192.168.1.111
Filename &#039;tl-wr941nd_v5.0.bin&#039;.
Load address: 0x80000000
Loading: #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         #################################################################
         ######################################################
done
Bytes transferred = 3932160 (3c0000 hex)
wasp&gt; erase.b 0x9f020000 +0x3c0000

First 0x2 last 0x3d sector size 0x10000
  61
Erased 60 sectors
wasp&gt; cp.b 0x80000000 0x9f020000 0x3c0000
Copy to Flash... write addr: 9f020000
done
wasp&gt; reset

U-Boot 1.1.4 (Jun  8 2013 - 15:28:02)

U-boot AP123


DRAM:  32 MB
Flash Manuf Id 0x1c, DeviceId0 0x30, DeviceId1 0x16
flash size 4MB, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag934x_enet_initialize...</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211761">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">jjsg82</div>
					<div class="post-datetime">
						6 Sep 2013, 17:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>sbiomed wrote:</cite><blockquote><div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><br /><br /><br /><p>I can confirm the firmware works on TL-wr941ND v 5.0000. With the following defects:-<br />1)PPPOE connection drops at regular interval.<br />2)Coverage is significantly dropped in comparision to TP-LINK firmware.<br />So, can&#039;t use the most of router. Hence<br />I reverted back to the original firmware. sad<br />I hope the firmware appears soon.</p></blockquote></div><br /><p>I have all the sames problems.<br />is impossible to use</p><p>i back to original firmware</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211971">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">cmsandrigo</div>
					<div class="post-datetime">
						9 Sep 2013, 21:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi there! Are there some news about this topic? Like some users, I put the firmware posted in this thread and it worked, but the power of coverage is very bad compared with the original firmware, so I reverted back.</p><p>Have you any idea about the time that will take to correct this issues and get a stable release for this device?</p><p>Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214620">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">lucapost</div>
					<div class="post-datetime">
						12 Oct 2013, 12:17					</div>
				</div>
				<div class="post-content content">
					<p>any news about?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215941">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">thotypous</div>
					<div class="post-datetime">
						28 Oct 2013, 22:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neoke007 wrote:</cite><blockquote><p>I installed this firmware to my device (941ND ver 5.0). I found the problem:<br />- Failsafe not working: Lan interface not working (light&#039;s lan or wan not turn on), so I can not connect to device via Ethernet port (lan or wan).</p><p>Do anyone else have same problem ?</p></blockquote></div><p>Hi neoke007, Sorry for the delay. The device is installed in another city and I only had the chance to access it physically during this weekend.</p><p>I have tested the failsafe mode and it worked OK. Please make sure you are pressing the correct button. Press the button in the rear of the device, near the on/off switch (I think it is labeled &quot;QSS/reset&quot;). Please note that the button in the front of the device (which is labeled &quot;wireless on/off&quot;) <strong>cannot</strong> be used to start the failsafe mode.</p><p>So, press the rear button as soon as the SYS light blinks for the first time. It will start blinking faster. Then you can access the router by plugging an Ethernet cable to the WAN port (<strong>not</strong> to one of the switch ports!). The router will be accessible at 192.168.1.1, as usual.</p><p>For the people complaining about signal range / coverage issues, unfortunately I can&#039;t do anything about that because I can&#039;t reproduce those problems. Although I only have physical access to it around once a month, my device is working flawlessly since my first report, and is covering 3 floors of a construction. The users of my device are pretty satisfied with the signal.</p>											<p class="post-edited">(Last edited by <strong>thotypous</strong> on 28 Oct 2013, 22:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p217314">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">Iltd</div>
					<div class="post-datetime">
						11 Nov 2013, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>I have a tp-link wr940n V2</p><p>&quot;Firmware Version: 3.14.5 Build 130709 Rel.36000n<br /> Hardware Version: WR940N v2/WR941ND v5 00000000&quot;. </p><p>Can i use this firmware <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">http://downloads.openwrt.org/attitude_a … actory.bin</a> for my device?</p><p>Firmwares (on official site) for TL-WR841ND v8 (130506) and TL-WR941ND_V5 (130709) are different. Although, WR941ND_V5&nbsp; and WR940N v2 are the same (130709).</p><br /><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>Iltd</strong> on 11 Nov 2013, 23:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219971">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">eeff11</div>
					<div class="post-datetime">
						14 Dec 2013, 12:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>madmax wrote:</cite><blockquote><p><span class="postimg"><img src="http://imageshack.us/a/img826/1586/img00000023.jpg" alt="PunBB bbcode test" /></span></p></blockquote></div><p>Hi, what are the models of the chip LNA &amp;PA, can&#039;t see it clearly.</p><p>Anyone knows?</p>											<p class="post-edited">(Last edited by <strong>eeff11</strong> on 14 Dec 2013, 12:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220283">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">niti.sumitsharma</div>
					<div class="post-datetime">
						18 Dec 2013, 08:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Iltd wrote:</cite><blockquote><p>I have a tp-link wr940n V2</p><p>&quot;Firmware Version: 3.14.5 Build 130709 Rel.36000n<br /> Hardware Version: WR940N v2/WR941ND v5 00000000&quot;. </p><p>Can i use this firmware <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">http://downloads.openwrt.org/attitude_a … actory.bin</a> for my device?</p><p>Firmwares (on official site) for TL-WR841ND v8 (130506) and TL-WR941ND_V5 (130709) are different. Although, WR941ND_V5&nbsp; and WR940N v2 are the same (130709).</p><br /><p>Thanks!</p></blockquote></div><p>I have same router as yours. <br />Use modded firmware by thotypous&nbsp; tl-wr941nd_v5.0.bin this works. Before updating don&#039;t forget to factory reset router.&nbsp; <br />Note! Do not update by wifi use lan connection.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220561">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">Profecy</div>
					<div class="post-datetime">
						21 Dec 2013, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I have the same router as shown in the pictures (it says HW ver 5.1 on the device and the box however) and flashes successfully with the here linked modded firmware and also after that with regular firmware for 841n v8 via sys upgrade.<br />I have to say that the WAN dropping connection (serial console gets spammed with eth0 up / eth0 down messages every second or so at the worst times with trunk snapshot for 841nd v8 and not so often with the modded FW on this thread) stuff is true, but WLAN coverage is pretty good for me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Also, I&#039;m now trying to tweak the PPPoE daemon as I have a feeling that it might be the culprit... (did some tests with various devices on the WAN port)<br />But the whole connection drop thing is very very annoying...<br />I would love to see a specially designed firmware flavor for this router, since its really needed and this HW version seems to be the one thats being shipped right now as i have ordered the router a few days ago via Amazon Germany...<br />I realize there are A LOT of different router and you can&#039;t cover them all, but also the TP-LINK routers seem to be very popular with OpenWRT users, which is also why I bought this exact router again. (Had HW ver 3.6 before, was awesome but I failed at flashing due to negligence and the serial port is f***d beyond repair -.-)</p><p>I would try to compile my own firmware flavor from trunk, but I can&#039;t quite work that out as of today, but I&#039;ll keep trying! (Now that I have a router with a serial console that works...) If I succeed, I shall post the FW here for all the unlucky HW ver 5 users!</p><p>Until then, please fix ! Thank you !</p>											<p class="post-edited">(Last edited by <strong>Profecy</strong> on 21 Dec 2013, 21:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223707">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">thanh_nha0706</div>
					<div class="post-datetime">
						25 Jan 2014, 15:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><p>Hi Thotypous,</p><p>I have installed successfully your posted openwrt firmware on my router TPLink WR941NDv5. Everything is working great with LuCI UI. I am totally a newbie here so I do not know how to set up my TPLink router as a repeater. My main router is Cisco WAG120n. Please help me solve this. </p><p>Thanks million times =]]</p><p>Hope you guys can help me as soon as you can =]]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233612">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">scaloni</div>
					<div class="post-datetime">
						16 May 2014, 03:13					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys,</p><p>I want to install OpenWRT, the site says that the supported version is the Attitude Adjustment (12.09 final) for v5.0 but I do not know which to download. </p><p>Which one should I <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/atheros/generic/">Download</a>?<br />openwrt-atheros-combined.squashfs.img <br />openwrt-atheros-root.squashfs <br />openwrt-atheros-ubnt2-pico2-squashfs.bin <br />openwrt-atheros-ubnt2-squashfs.bin <br />openwrt-atheros-ubnt5-squashfs.bin </p><p>After installing this will only work 2 antennas?</p>											<p class="post-edited">(Last edited by <strong>scaloni</strong> on 16 May 2014, 03:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233686">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						16 May 2014, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>This model is ar71xx-architecture, so you will find your images <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/">here</a> (or just use the links in the previous postings).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233688">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">scaloni</div>
					<div class="post-datetime">
						16 May 2014, 22:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>MBS wrote:</cite><blockquote><p>This model is ar71xx-architecture, so you will find your images <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/">here</a> (or just use the links in the previous postings).</p></blockquote></div><p>These links are not my version (TL-WR941ND Ver:5.0 // FCC ID: TE7WR941NXV5).</p><p>There is no official version of OpenWRT to my router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p233735">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						17 May 2014, 15:52					</div>
				</div>
				<div class="post-content content">
					<p>That is what this thread is pointing out. So, this seems to be the usable workaround at the moment:<br /></p><div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240844">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">asaki</div>
					<div class="post-datetime">
						20 Jul 2014, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>R 18 (JP1) is that value? ohms?<br />where do the jumper to enable tx?<br />thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p240909">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">asaki</div>
					<div class="post-datetime">
						21 Jul 2014, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>wr941ND ver 5.0<br />I installed this firmware, because the LED-lan3-LAN4 not work?</p><br /><p>config system<br />&nbsp; &nbsp; option hostname &#039;OpenWrt&#039;<br />&nbsp; &nbsp; option timezone &#039;UTC&#039;</p><p>config timeserver &#039;ntp&#039;<br />&nbsp; &nbsp; list server &#039;0.openwrt.pool.ntp.org&#039;<br />&nbsp; &nbsp; list server &#039;1.openwrt.pool.ntp.org&#039;<br />&nbsp; &nbsp; list server &#039;2.openwrt.pool.ntp.org&#039;<br />&nbsp; &nbsp; list server &#039;3.openwrt.pool.ntp.org&#039;<br />&nbsp; &nbsp; option enable_server &#039;0&#039;</p><p>config led &#039;led_wan&#039;<br />&nbsp; &nbsp; option name &#039;WAN&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:wan&#039;<br />&nbsp; &nbsp; option trigger &#039;netdev&#039;<br />&nbsp; &nbsp; option dev &#039;eth0&#039;<br />&nbsp; &nbsp; option mode &#039;link tx rx&#039;</p><p>config led &#039;led_lan1&#039;<br />&nbsp; &nbsp; option name &#039;LAN1&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:lan1&#039;<br />&nbsp; &nbsp; option trigger &#039;switch0&#039;<br />&nbsp; &nbsp; option port_mask &#039;0x04&#039;</p><p>config led &#039;led_lan2&#039;<br />&nbsp; &nbsp; option name &#039;LAN2&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:lan2&#039;<br />&nbsp; &nbsp; option trigger &#039;switch0&#039;<br />&nbsp; &nbsp; option port_mask &#039;0x08&#039;</p><p>config led &#039;led_lan3&#039;<br />&nbsp; &nbsp; option name &#039;LAN3&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:lan3&#039;<br />&nbsp; &nbsp; option trigger &#039;switch0&#039;<br />&nbsp; &nbsp; option port_mask &#039;0x10&#039;</p><p>config led &#039;led_lan4&#039;<br />&nbsp; &nbsp; option name &#039;LAN4&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:lan4&#039;<br />&nbsp; &nbsp; option trigger &#039;switch0&#039;<br />&nbsp; &nbsp; option port_mask &#039;0x02&#039;</p><p>config led &#039;led_wlan&#039;<br />&nbsp; &nbsp; option name &#039;WLAN&#039;<br />&nbsp; &nbsp; option sysfs &#039;tp-link:green:wlan&#039;<br />&nbsp; &nbsp; option trigger &#039;phy0tpt&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p243817">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">ledzgio</div>
					<div class="post-datetime">
						14 Aug 2014, 11:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>niti.sumitsharma wrote:</cite><blockquote><div class="quotebox"><cite>Iltd wrote:</cite><blockquote><p>I have a tp-link wr940n V2</p><p>&quot;Firmware Version: 3.14.5 Build 130709 Rel.36000n<br /> Hardware Version: WR940N v2/WR941ND v5 00000000&quot;. </p><p>Can i use this firmware <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">http://downloads.openwrt.org/attitude_a … actory.bin</a> for my device?</p><p>Firmwares (on official site) for TL-WR841ND v8 (130506) and TL-WR941ND_V5 (130709) are different. Although, WR941ND_V5&nbsp; and WR940N v2 are the same (130709).</p><br /><p>Thanks!</p></blockquote></div><p>I have same router as yours. <br />Use modded firmware by thotypous&nbsp; tl-wr941nd_v5.0.bin this works. Before updating don&#039;t forget to factory reset router.&nbsp; <br />Note! Do not update by wifi use lan connection.</p></blockquote></div><p>Same router here, is everything working fine with tl-wr941nd_v5.0.bin? do you think it is stable enough for an office?</p><p>thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p244302">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">pekmop1024</div>
					<div class="post-datetime">
						20 Aug 2014, 04:06					</div>
				</div>
				<div class="post-content content">
					<p>If someone still interested, here is images with miniupnpd and openvpn out-of-the-box: <a href="http://monster.xe-xe.org/wr941nd-v52/">http://monster.xe-xe.org/wr941nd-v52/</a><br />It&#039;s stable Attitude Adjustment (r42171), nevermind the &quot;russian&quot; tag, it&#039;s just for additional LuCI language pack, english is available too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245277">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">abhilash</div>
					<div class="post-datetime">
						29 Aug 2014, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have TP-Link TL-WR941ND v5.0 router. I successfully updated it with OpenWrt backfire/trunk but again i&#039;m updating it with OpenWrt and this time Bad Update happened. I mean it stopped at 55%. Now my router is not working. when i open 192.168.1.1 or 192.168.0.1 it does not open it. I tried it with Reset button from the back side of it. Already pushed reset button for 30 sec. or more. It does not work. Now my router looks Useless.<br />&nbsp; <br />&nbsp; Guys!! can u plz help me?? <br />&nbsp; Thanks in Advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p245883">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">ceweber</div>
					<div class="post-datetime">
						3 Sep 2014, 19:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thotypous wrote:</cite><blockquote><p>I have just put a TL-WR941ND v5.0 router on production with OpenWrt. You can use the same firmware file as TL-WR841N v8, but you need to modify the header in order for the TP-Link web-interface to recognize it as a valid firmware for WR941ND v5.0 hardware.</p><p>For the impatient, I have put my modified firmware online: <a href="https://hal9k.ifsc.usp.br/~matias/floss/openwrt/tl-wr941nd_v5.0.bin">tl-wr941nd_v5.0.bin</a>. MD5 is: db062f1699c760775c5046cc303cba91. It worked perfectly with my router (I did not need to open it at all), but no warranties it will not brick your router, though.</p><p>If you want to modify the firmware yourself, do as follows:</p><ol class="decimal"><li><p>Download <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin">openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.bin</a></p></li><li><p>Open it in a hex editor. Look at offset 0x40. There should be the following bytes: <strong>08 41 00 08</strong>. Modify to: <strong>09 41 00 05</strong></p></li><li><p>Get <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/mktplinkfw.c?format=raw">mktplinkfw.c</a>, <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.c?format=raw">md5.c</a> and <a href="https://dev.openwrt.org/browser/trunk/tools/firmware-utils/src/md5.h?format=raw">md5.h</a>. Compile the tool: <strong>gcc -Os mktplinkfw.c md5.c -o mktplinkfw</strong>.</p></li><li><p>Run: <strong>./mktplinkfw -i *-factory.bin</strong></p></li><li><p>Look for the expected MD5Sum1: <strong>expected : e5 67 34 4d 04 99 20 60 f5 76 c6 04 15 81 ab f8 </strong></p></li><li><p>Open the hex editor again, go to offset 0x4c, and copy the MD5 above (it should span from offset 0x4c to offset 0x5b).</p></li><li><p>Go and upload the resulting file to firmware upgrade (in TP-Link web-interface). Good luck.</p></li></ol><p>Many thanks to LOM from DD-WRT and to cable007 for <a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=172673&amp;postdays=0&amp;postorder=asc&amp;start=30">reporting</a> this approach worked with DD-WRT.</p></blockquote></div><p>How do I go back to original firmware?</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 3</div><nav><ul><li><a href="viewtopic.php%3Fid=44319&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=44319&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>