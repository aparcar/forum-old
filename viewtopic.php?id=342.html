<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to read logs created by syslogd?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p1618">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">drsomewhat</div>
					<div class="post-datetime">
						18 Aug 2004, 20:24					</div>
				</div>
				<div class="post-content content">
					<p>i followed the how-to to setup syslogd so that it writes to a remote system, in my case a computer hooked up to the wrt54gs. Now, how do i retrieve those logging messages? (I have set up syslogd -r on the linux system im using)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1620">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Tornado</div>
					<div class="post-datetime">
						18 Aug 2004, 21:31					</div>
				</div>
				<div class="post-content content">
					<p>Usually the syslog log files are located in /var/log. See which file contains what (based on facility and priority) in /etc/syslog.conf.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1621">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">soulhunter</div>
					<div class="post-datetime">
						18 Aug 2004, 22:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I got mines in /var/log/messages, /var/log/debug and /var/log/syslog</p><p>But, as Tornado said, it will depend on what the /etc/syslog.conf says.</p><p>Off course, you need to run syslogd -R IP in the wrt AND klogd (if you want to get kernel log).</p><p>If you want to test, just do a tail -f /var/log/messages in your PC, and a &quot;logger Testing&quot; in the wrt, you should see the message &quot;Testing&quot; in the logs of your PC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1625">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						19 Aug 2004, 00:35					</div>
				</div>
				<div class="post-content content">
					<p>useless note: as of yesterday&#039;s cvs changes, syslogd gets run at bootup. The arguments are set so it will store the last 16k of logs in memory, read using the logread command.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1632">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">PolarWolf</div>
					<div class="post-datetime">
						19 Aug 2004, 10:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>useless note: as of yesterday&#039;s cvs changes, syslogd gets run at bootup. The arguments are set so it will store the last 16k of logs in memory, read using the logread command.</p></blockquote></div><p>Would it be an idea to have some nvram parameter set to a remote syslog server, and have the startup script check against that to determine whether or not to log remote or locally?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1636">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">philfr</div>
					<div class="post-datetime">
						19 Aug 2004, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>Why would we want to use NVRAM ? We have a real file system ! We can use real configuration files, even configuration scripts.<br />Leave NVRAM to those poor Sveasoft users :-).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1639">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						19 Aug 2004, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>I guess you understood him wrong (or I did <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />).<br />He doesn&#039;t want to log *into* nvram. He just wants to put some parameters for the configuration of syslogd there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1641">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">philfr</div>
					<div class="post-datetime">
						19 Aug 2004, 14:55					</div>
				</div>
				<div class="post-content content">
					<p>Sure, I understood that.<br />But why would we use NVRAM to store configuration when we have a real filesystem available, that is more flash-friendly ?<br />The only use of NVRAM is for Linksys tools: wlconf uses it to set WEP keys, MAC filtering, etc., and the bootloader needs it to correctly configure some hardware components (and also for boot_wait !).<br />But why would we write a script that executes &#039;nvram get someparam&#039; when it can as well do &#039;cat /etc/someparam.conf&#039; ?<br />Once I understood that NVRAM is in fact nothing else than a fixed piece of the flash, without the advantages of a filesystem (wear-leveling, hierarchical access), I stopped touching it at all (except for wlconf parameters, et al), and all my customizations and configuration parameters go simply into one or more files on jffs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1643">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">soulhunter</div>
					<div class="post-datetime">
						19 Aug 2004, 16:00					</div>
				</div>
				<div class="post-content content">
					<p>So...&nbsp; The nvram is just a part of the flash chip? or is it an *real* nvram mapped through the flash chip (this kind of flash chip can do that).&nbsp; I sent that question to linksys yesterday, I&#039;m wating for an answer.</p><p>Oh, by the way, if the nvram is only a part of the flash chip, then you should definetly use the jffs2 filesystem to store configs (say, modify the init script and add the -R parameter and a -L (to have local logging as well)).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1655">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Tornado</div>
					<div class="post-datetime">
						19 Aug 2004, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>nvram is a part of the 4/8MBytes flash. During boot, the kernel how the flash device is partitioned. Use dmesg to see it:</p><p>0x00000000-0x00040000 : &quot;pmon&quot;<br />0x00040000-0x007e0000 : &quot;linux&quot;<br />0x000e36d4-0x001b693e : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x007e0000-0x00800000 : &quot;nvram&quot;<br />0x001c0000-0x007e0000 : &quot;OpenWrt&quot;</p><p>And a note about syslogging to flash - it&#039;s really not recommended. I log locally as well as remotely, but I log to /tmp rather than flash. Most of the time you only need messages since last boot, and if you do need messages before that, then check the remote syslog server.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1657">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">philfr</div>
					<div class="post-datetime">
						19 Aug 2004, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>Sure, nobody would even think about logging to flash.<br />The point is storing syslog&#039;s configuration for remote logging.<br />I just added<br /></p><div class="codebox"><pre><code>/sbin/syslogd -R myloghost -L</code></pre></div><p>to /etc/init.d/S50services.<br />In the current version of OpenWRT, I think that syslogd is started from inittab, so /etc/inittab is the file that should be modified.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1658">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Tornado</div>
					<div class="post-datetime">
						19 Aug 2004, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>In the current version syslog gets started from /etc/init.d/S10boot.</p><p>And a note PolarWolf&#039;s post - it would be a nice thing. I prefer not to change init scripts that can (and do) get updated/modified whenever the author decides it should to look differently. It will save many a lot of copy/paste and headache.</p><p>The nvram stays untouched after a re-flash, and since syslog now gets started automatically, having this option set in nvram seems appropriate.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1660">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">philfr</div>
					<div class="post-datetime">
						19 Aug 2004, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>Better yet would be to put this info in /etc/nvram.overrides, or a similar file.<br />So everybody will be able to choose to configure its box by changing NVRAM or by patching a file...:-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1662">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Tornado</div>
					<div class="post-datetime">
						19 Aug 2004, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>The idea was to have the remote log configuration stored somewhere, where it would not be overwritten by an upgrade of firmware. </p><p>Ideally, after an upgrade, you would run firstboot to make sure the new files in the firmware are symlinked automatically - if the new firmware size doesn&#039;t mess up the jffs2 filesystem, in which case you&#039;ll need to run firstboot anyway to erase jffs2 filesystem and redo it.</p><p>Running firstboot in both cases will erase /etc/nvram.overrides as ln is called with -f, so it&#039;s pointless to use a file on the jffs2 filesystem unless you like doing things over and over again each time you perform an upgrade.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1663">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">soulhunter</div>
					<div class="post-datetime">
						19 Aug 2004, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>As I said, you can map an &quot;external&quot; memory chip in an address group in the flash chip, without having that data &quot;actually&quot; written to the flash chip.</p><p>0x007e0000-0x00800000 : &quot;nvram&quot; </p><p>Ok, According to this mapping, there is one block of the flash chip reserved for the nvram, that means that the nvram can only take 100000 erase/write cycles.</p><p>The jffs2 filesystem does a more smart writing method, and for a wrt54gs the maximum writes (of less that 128kB) to the jffs2 is 4000000 (four million).</p><p>This is terrible (only 100000 for the &quot;nvram&quot;).&nbsp; I think that I&#039;ll try to implement my FRAM hack (uf, when I have the time, righ now have *many* things to do).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>