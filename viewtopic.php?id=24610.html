<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> x86 ath9k, only get 135mbits with HT40 and 65mbits with HT20</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p108472">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						4 May 2010, 04:36					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m running openwrt trunk r21346 and only get half of the speed.</p><p>Here are some commands output:<br />-----------------------------------------</p><p>root@OpenWrt:~# iw list<br />Wiphy phy0<br />&nbsp; &nbsp; &nbsp; &nbsp; Band 1:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Capabilities: 0x104e<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT20/HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SM Power Save disabled<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX HT40 SGI<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; No RX STBC<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Max AMSDU length: 7935 bytes<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DSSS/CCK HT40<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Maximum RX AMPDU length 65535 bytes (exponent: 0x003)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Minimum RX AMPDU time spacing: 8 usec (0x06)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; HT TX/RX MCS rate indexes supported: 0-15<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Frequencies:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2412 MHz [1] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2417 MHz [2] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2422 MHz [3] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2427 MHz [4] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2432 MHz [5] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2437 MHz [6] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2442 MHz [7] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2447 MHz [8] (20.0 dBm)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2452 MHz [9] (20.0 dBm)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2457 MHz [10] (20.0 dBm)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2462 MHz [11] (20.0 dBm)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2467 MHz [12] (20.0 dBm)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2472 MHz [13] (20.0 dBm)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2484 MHz [14] (disabled)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bitrates (non-HT):<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 1.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5.5 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 11.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 6.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 9.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 12.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 18.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 24.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 36.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 48.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 54.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; max # scan SSIDs: 4<br />&nbsp; &nbsp; &nbsp; &nbsp; Coverage class: 0 (up to 0m)<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported interface modes:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* IBSS<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* managed<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* AP/VLAN<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* monitor<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* mesh point<br />&nbsp; &nbsp; &nbsp; &nbsp; Supported commands:<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_interface<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_interface<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_key<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_beacon<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_station<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* new_mpath<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_mesh_params<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_bss<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* authenticate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* associate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* deauthenticate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* disassociate<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* join_ibss<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* (null)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* (null)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* Unknown command (59)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* set_wiphy_netns<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* connect<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;* disconnect</p><p>----------------------------------</p><p>root@OpenWrt:~# iwconfig<br />lo&nbsp; &nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>imq0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>imq1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth0&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>br-lan&nbsp; &nbsp; no wireless extensions.</p><p>eth1&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>eth2&nbsp; &nbsp; &nbsp; no wireless extensions.</p><p>wlan0&nbsp; &nbsp; &nbsp;IEEE 802.11bgn&nbsp; Mode:Master&nbsp; Frequency:2.412 GHz&nbsp; Tx-Power=20 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />mon.wlan0&nbsp; IEEE 802.11bgn&nbsp; Mode:Monitor&nbsp; Frequency:2.412 GHz&nbsp; Tx-Power=20 dBm&nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RTS thr:off&nbsp; &nbsp;Fragment thr:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Power Management:off<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />-----------------------------------------------------------------------------------------------------------</p><p>root@OpenWrt:~# ifconfig<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:25:86:DF:CC:9A&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::f079:8fff:fe95:9960/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:46880 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:77375 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:8221492 (7.8 MiB)&nbsp; TX bytes:98070783 (93.5 MiB)</p><p>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:50:8B:11:FD:6B&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>eth1&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:50:8B:11:FD:6C&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p><p>eth2&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:50:BA:C9:5C:1D&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:74.210.159.93&nbsp; Bcast:255.255.255.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::250:baff:fec9:5c1d/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:159870 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:45352 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:104054863 (99.2 MiB)&nbsp; TX bytes:8722544 (8.3 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Interrupt:5 Base address:0xe000 </p><p>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:16 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:16 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:832 (832.0 B)&nbsp; TX bytes:832 (832.0 B)</p><p>mon.wlan0 Link encap:UNSPEC&nbsp; HWaddr 00-25-86-DF-CC-9A-20-00-00-00-00-00-00-00-00-00&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:1236 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:158824 (155.1 KiB)&nbsp; TX bytes:0 (0.0 B)</p><p>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr 00:25:86:DF:CC:9A&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::225:86ff:fedf:cc9a/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:47034 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:78003 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000 <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:8889856 (8.4 MiB)&nbsp; TX bytes:99719208 (95.0 MiB)</p><p>-----------------------------------------------------------------------------------------------------</p><p>root@OpenWrt:~# iw reg get<br />country CN:<br />&nbsp; &nbsp; &nbsp; &nbsp; (2402 - 2482 @ 40), (N/A, 20)<br />&nbsp; &nbsp; &nbsp; &nbsp; (5735 - 5835 @ 40), (N/A, 30)<br />root@OpenWrt:~# </p><p>-----------------------------------------------------------------------------------------------------</p><p>root@OpenWrt:~# cat /etc/config/wireless </p><p>config &#039;wifi-device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;type&#039; &#039;mac80211&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;macaddr&#039; &#039;00:25:86:df:cc:9a&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;hwmode&#039; &#039;11ng&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;disabled&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;channel&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;htmode&#039; &#039;HT40+&#039;</p><p>config &#039;wifi-iface&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;device&#039; &#039;radio0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;network&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;ap&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ssid&#039; &#039;Univers&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;encryption&#039; &#039;psk-mixed&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;key&#039; &lt;removed&gt;</p><p>------------------------------------------------------------------------</p><p>root@OpenWrt:~# cat /var/run/hostapd-phy0.conf <br />ctrl_interface=/var/run/hostapd-phy0<br />driver=nl80211<br />wmm_ac_bk_cwmin=4<br />wmm_ac_bk_cwmax=10<br />wmm_ac_bk_aifs=7<br />wmm_ac_bk_txop_limit=0<br />wmm_ac_bk_acm=0<br />wmm_ac_be_aifs=3<br />wmm_ac_be_cwmin=4<br />wmm_ac_be_cwmax=10<br />wmm_ac_be_txop_limit=0<br />wmm_ac_be_acm=0<br />wmm_ac_vi_aifs=2<br />wmm_ac_vi_cwmin=3<br />wmm_ac_vi_cwmax=4<br />wmm_ac_vi_txop_limit=94<br />wmm_ac_vi_acm=0<br />wmm_ac_vo_aifs=2<br />wmm_ac_vo_cwmin=2<br />wmm_ac_vo_cwmax=3<br />wmm_ac_vo_txop_limit=47<br />wmm_ac_vo_acm=0<br />tx_queue_data3_aifs=7<br />tx_queue_data3_cwmin=15<br />tx_queue_data3_cwmax=1023<br />tx_queue_data3_burst=0<br />tx_queue_data2_aifs=3<br />tx_queue_data2_cwmin=15<br />tx_queue_data2_cwmax=63<br />tx_queue_data2_burst=0<br />tx_queue_data1_aifs=1<br />tx_queue_data1_cwmin=7<br />tx_queue_data1_cwmax=15<br />tx_queue_data1_burst=3.0<br />tx_queue_data0_aifs=1<br />tx_queue_data0_cwmin=3<br />tx_queue_data0_cwmax=7<br />tx_queue_data0_burst=1.5<br />hw_mode=g<br />channel=1</p><br /><p>ieee80211n=1<br />ht_capab=[HT40+][SHORT-GI-40][DSSS_CCK-40][SHORT-GI-40][DSSS_CCK-40]</p><p>interface=wlan0<br />wpa_passphrase=&lt;removed&gt;<br />wpa=3<br />wpa_pairwise=CCMP TKIP<br />ssid=Univers<br />bridge=br-lan<br />wmm_enabled=1<br />bssid=00:25:86:df:cc:9a<br />ignore_broadcast_ssid=0</p><br /><p>I find it strange that the capabilities are repeated twice.</p><p>Any idea?</p><p>Thank you.</p><p>Pitou!</p>											<p class="post-edited">(Last edited by <strong>Pitou</strong> on 4 May 2010, 04:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108511">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						4 May 2010, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>Perhaps hostapd did not allow the ht40 mode because there are too many wireless networks in range. I have the same problem in my neighborhood. The &quot;psk-mixed&quot; is also a little bit buggy. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> WPA2-PSK is even better and more stable.</p>											<p class="post-edited">(Last edited by <strong>CrazyChris</strong> on 4 May 2010, 16:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108513">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						4 May 2010, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the suggestion, I&#039;ll try those.</p><p>Just want to precise that I&#039;m linking at those speeds (HT20 = 65mb/s and HT40=135mb/s). I didn&#039;t test actual transfert speeds yet.</p><p>Where can I see hostapd logs? Would it says why it didn&#039;t activate HT40?</p><p>Pitou!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108514">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						4 May 2010, 16:58					</div>
				</div>
				<div class="post-content content">
					<p>where do you get your info that you are only connected at 135mbits? from your client? <br />take a look at the datarate section <a href="http://en.wikipedia.org/wiki/IEEE_802.11n-2009">http://en.wikipedia.org/wiki/IEEE_802.11n-2009</a></p><p>your connection rates are corresponding to MCS index 7 with 20MHz and 40MHz channelwidth, so this means you only have one spartial stream, and not two (which you would need for 300Mbit)<br />connect your client run </p><div class="codebox"><pre><code>iw wlan0 station dump</code></pre></div><p>on the router, to check which MCS index is used. </p><p>does your wifi-cards (router and client) support multiple spartial&nbsp; streams?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108515">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						4 May 2010, 17:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Pitou wrote:</cite><blockquote><p>Thanks for the suggestion, I&#039;ll try those.</p><p>Just want to precise that I&#039;m linking at those speeds (HT20 = 65mb/s and HT40=135mb/s). I didn&#039;t test actual transfert speeds yet.</p><p>Where can I see hostapd logs? Would it says why it didn&#039;t activate HT40?</p><p>Pitou!</p></blockquote></div><p>start hostapd in the console. The warning apears only there and not in the log files. (That cost me a day of my lifetime <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />)</p>											<p class="post-edited">(Last edited by <strong>CrazyChris</strong> on 4 May 2010, 17:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108516">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						4 May 2010, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>where do you get your info that you are only connected at 135mbits? from your client? <br />take a look at the datarate section <a href="http://en.wikipedia.org/wiki/IEEE_802.11n-2009">http://en.wikipedia.org/wiki/IEEE_802.11n-2009</a></p><p>your connection rates are corresponding to MCS index 7 with 20MHz and 40MHz channelwidth, so this means you only have one spartial stream, and not two (which you would need for 300Mbit)<br />connect your client run </p><div class="codebox"><pre><code>iw wlan0 station dump</code></pre></div><p>on the router, to check which MCS index is used. </p><p>does your wifi-cards (router and client) support multiple spartial&nbsp; streams?</p></blockquote></div><p>Yes I see the speed on my client. It&#039;s a usb dongle Belkin F5D8053 v3. I get the same in Windows XP and Ubuntu</p><p>In the x86 router, it&#039;s PCI card TP-Link TL-WN851N. It seems to use the Atheros 5416 + ar2122</p><p>I&#039;ll check the MCS index and post back.</p><p>Thanks!</p><p>Pitou!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108519">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						4 May 2010, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>I mean this warning:</p><div class="codebox"><pre><code> 
root@router:~# /usr/sbin/hostapd /tmp/run/hostapd-phy0.conf

20/40 MHz operation not permitted on channel pri=7 sec=3 based on overlapping BSSes</code></pre></div><p>PS: Is it possible to force ht40? ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108521">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						4 May 2010, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>ok we found the problem: its an usb-dongle!</p><p>to run 300Mbit you need two spatial streams, and for this you need two antennas, which (like the name suggests) need a spatial distance between them (minimum half of the wavelengh or something like that. this would be a minimum of 6cm for 2.4 Ghz). this can not work with an usb-dongle without external antennas.</p><p>&quot;300Mbit/s&quot; sounds good for marketing purposes, and thats the reason why they use a 2x2 chip,&nbsp; but i really doubt that the antenna-layout of this usb-dongle allow multiple spartial streams. and the antennas on your pci-card are quite near too.</p><p>and @CrazyChris: I hope it&#039;s not possible to force 40MHz on 2.4GHz, because this mode would use over 80% of the available frequencyband, so it would be irresponsible to allow this if someone else is using this band.</p>											<p class="post-edited">(Last edited by <strong>eleon216</strong> on 4 May 2010, 18:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108523">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						4 May 2010, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t imagine, there are so many 300Mbps USB WLAN sticks available.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108532">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						4 May 2010, 20:40					</div>
				</div>
				<div class="post-content content">
					<p>Here is the output of the command:</p><p>root@OpenWrt:/# iw wlan0 station dump<br />Station 00:22:75:8e:e0:65 (on wlan0)<br />&nbsp; &nbsp; &nbsp; &nbsp; inactive time:&nbsp; 10 ms<br />&nbsp; &nbsp; &nbsp; &nbsp; rx bytes:&nbsp; &nbsp; &nbsp; &nbsp;16224<br />&nbsp; &nbsp; &nbsp; &nbsp; rx packets:&nbsp; &nbsp; &nbsp;154<br />&nbsp; &nbsp; &nbsp; &nbsp; tx bytes:&nbsp; &nbsp; &nbsp; &nbsp;5902<br />&nbsp; &nbsp; &nbsp; &nbsp; tx packets:&nbsp; &nbsp; &nbsp;47<br />&nbsp; &nbsp; &nbsp; &nbsp; signal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;-70 dBm<br />&nbsp; &nbsp; &nbsp; &nbsp; tx bitrate:&nbsp; &nbsp; &nbsp;135.0 MBit/s MCS 7 40Mhz</p><p>Pitou!</p>											<p class="post-edited">(Last edited by <strong>Pitou</strong> on 4 May 2010, 20:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108534">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						4 May 2010, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>CrazyChris,</p><p>It looks happy here.</p><p>root@OpenWrt:/# /usr/sbin/hostapd /tmp/run/hostapd-phy0.conf<br />Configuration file: /tmp/run/hostapd-phy0.conf<br />Using interface wlan0 with hwaddr 00:25:86:df:cc:9a and ssid &#039;OpenWrt&#039;</p><br /><p>Pitou!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108536">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						4 May 2010, 21:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eleon216 wrote:</cite><blockquote><p>and @CrazyChris: I hope it&#039;s not possible to force 40MHz on 2.4GHz, because this mode would use over 80% of the available frequencyband, so it would be irresponsible to allow this if someone else is using this band.</p></blockquote></div><p>hmm <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /> But the original firmware for my Linksys WRT160NL allow ht40 and i can connect with 300Mbps. And it work stable.</p>											<p class="post-edited">(Last edited by <strong>CrazyChris</strong> on 4 May 2010, 21:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108548">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						5 May 2010, 00:44					</div>
				</div>
				<div class="post-content content">
					<p>@CrazyChris: it is ok to run 40MHz if you have no neighbors. but if you havea lot of accesspoints around, it would be really egoistic, and probably useless with all the interference. but if you are alone &quot;in the air&quot; it&#039;s ok to use HT40.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108582">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						5 May 2010, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>@eleon216,</p><p>So you really think it&#039;s my usb dongle and/or my PCI card that is causing the limitation, due to antennas being too close?</p><p>What would you suggest as PCI cards? I was thinking about the Dlink DWA-552 or the Linksys WMP600N. I would buy 2 of them, one for my x86 router and one for my client PC.</p><p>What do you think?</p><p>Thanks.</p><p>Pitou!</p>											<p class="post-edited">(Last edited by <strong>Pitou</strong> on 5 May 2010, 15:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108639">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						6 May 2010, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>Any suggestions for PCI cards or other?</p><p>Thanks.</p><p>Pitou!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108655">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">CrazyChris</div>
					<div class="post-datetime">
						6 May 2010, 10:54					</div>
				</div>
				<div class="post-content content">
					<p>First, i would try to test the wlan stick with another draftn AP or the original firmware.</p>											<p class="post-edited">(Last edited by <strong>CrazyChris</strong> on 6 May 2010, 10:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p108699">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Pitou</div>
					<div class="post-datetime">
						7 May 2010, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>ok The belkin dongle is the culprit. I opened it and only one &quot;antenna&quot; (there so small) is active. Easy to follow using a ohm meter.</p><p>Now, I tried with another card in my client PC and it works fine.</p><p>Pitou!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>