<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> PPPoE Issue - WRT1900AC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p335453">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jawad_hai</div>
					<div class="post-datetime">
						22 Aug 2016, 11:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi Guys,<br />I&#039;ve been using OpenWrt for a while but recently i decided to use PPPoE for my Wan.<br />It connects with no problems and there is no drop in the connection, works fine for days at time.</p><p>The issue comes if i disconnect the Wan cable or restart the ISP media convertor. When that happens then my router hangs and doesnt allow anything, no web access. If i&#039;m lucky i can SSH in and reboot it from there but if not then i need to power cycle the router to get it up. When its back up it works perfectly again till i disconnect the Wan cable or restart the ISP media convertor.</p><p>Anyy suggestions?<br />I&#039;m using DD 4.4.11 and have seen this issue on all other versions i&#039;ve tried.</p><p>thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p335459">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jawad_hai</div>
					<div class="post-datetime">
						22 Aug 2016, 13:01					</div>
				</div>
				<div class="post-content content">
					<p>Simulated the disconnection and this is what the logs show before the hangup:<br />Mon Aug 22 14:43:29 2016 kern.err kernel: [ 4160.845391] INFO: rcu_sched self-detected stall on CPU<br />Mon Aug 22 14:43:29 2016 kern.err kernel: [ 4160.850584] &nbsp; &nbsp; 0-...: (41919 ticks this GP) idle=b37/140000000000001/0 softirq=189193/189214 fqs=41846 <br />Mon Aug 22 14:43:29 2016 kern.err kernel: [ 4160.859834] &nbsp; &nbsp;&nbsp; (t=42006 jiffies g=9051 c=9050 q=32832)<br />Mon Aug 22 14:43:29 2016 kern.info kernel: [ 4160.864923] Task dump for CPU 0:<br />Mon Aug 22 14:43:29 2016 kern.info kernel: [ 4160.868167] netifd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; R running&nbsp; &nbsp; &nbsp; 0&nbsp; 1198&nbsp; &nbsp; &nbsp; 1 0x00000003<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.874570] Backtrace: <br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.877059] [&lt;c001d238&gt;] (dump_backtrace) from [&lt;c001d440&gt;] (show_stack+0x18/0x1c)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.884652]&nbsp; r7:c05364c0 r6:80000193 r5:c053e300 r4:cdc2f800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.890402] [&lt;c001d428&gt;] (show_stack) from [&lt;c004b248&gt;] (sched_show_task+0xcc/0x100)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.898186] [&lt;c004b17c&gt;] (sched_show_task) from [&lt;c004c7d8&gt;] (dump_cpu_task+0x40/0x44)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.906135]&nbsp; r5:c053e300 r4:00000000<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.909759] [&lt;c004c798&gt;] (dump_cpu_task) from [&lt;c006cdac&gt;] (rcu_dump_cpu_stacks+0x80/0xb8)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.918055]&nbsp; r5:c053e300 r4:00000000<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.921679] [&lt;c006cd2c&gt;] (rcu_dump_cpu_stacks) from [&lt;c00703e4&gt;] (rcu_check_callbacks+0x29c/0x754)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.930671]&nbsp; r9:c053e300 r8:c053e300 r7:c0536100 r6:0f8a4000 r5:c0536100 r4:c0532240<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.938525] [&lt;c0070148&gt;] (rcu_check_callbacks) from [&lt;c007268c&gt;] (update_process_times+0x40/0x6c)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.947431]&nbsp; r10:c0536144 r9:000003c8 r8:c268f180 r7:000003c8 r6:c1d06d9c r5:00000000<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.955348]&nbsp; r4:cdc2f800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.957930] [&lt;c007264c&gt;] (update_process_times) from [&lt;c0081bc0&gt;] (tick_sched_timer+0x22c/0x270)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.966749]&nbsp; r5:ce9d9d40 r4:cfdd3c80<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.970372] [&lt;c0081994&gt;] (tick_sched_timer) from [&lt;c0073524&gt;] (__hrtimer_run_queues+0x110/0x1dc)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.979189]&nbsp; r10:c05364f0 r9:00000000 r8:cfdd3b00 r7:cfdd3ac0 r6:cfdd3b0c r5:c052fac0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.987118]&nbsp; r4:cfdd3c80<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.989678] [&lt;c0073414&gt;] (__hrtimer_run_queues) from [&lt;c0073774&gt;] (hrtimer_interrupt+0xbc/0x208)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4160.998496]&nbsp; r10:ffffffff r9:00000003 r8:cfdd3b38 r7:cfdd3b58 r6:cfdd3ad4 r5:c052fac0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.006423]&nbsp; r4:cfdd3ac0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.008994] [&lt;c00736b8&gt;] (hrtimer_interrupt) from [&lt;c02907b8&gt;] (armada_370_xp_timer_interrupt+0x38/0x40)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.018507]&nbsp; r10:00000000 r9:00000000 r8:00000010 r7:cf80eb80 r6:c054261c r5:cf805c00<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.026433]&nbsp; r4:cfdd87c0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.029004] [&lt;c0290780&gt;] (armada_370_xp_timer_interrupt) from [&lt;c0067e80&gt;] (handle_percpu_devid_irq+0x74/0x8c)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.039040]&nbsp; r5:cf805c00 r4:cfdd87c0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.042663] [&lt;c0067e0c&gt;] (handle_percpu_devid_irq) from [&lt;c0063c04&gt;] (generic_handle_irq+0x2c/0x3c)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.051741]&nbsp; r9:00000000 r8:cf808000 r7:00000001 r6:00000000 r5:00000000 r4:c052ffd4<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.059592] [&lt;c0063bd8&gt;] (generic_handle_irq) from [&lt;c0063f1c&gt;] (__handle_domain_irq+0xa0/0xb4)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.068333] [&lt;c0063e7c&gt;] (__handle_domain_irq) from [&lt;c000946c&gt;] (armada_370_xp_handle_irq+0x54/0xb8)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.077589]&nbsp; r9:00000000 r8:c057ad28 r7:c057ad10 r6:ce9d9d40 r5:c057ad28 r4:c00438a8<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.085430] [&lt;c0009418&gt;] (armada_370_xp_handle_irq) from [&lt;c000a654&gt;] (__irq_svc+0x54/0x70)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.093814] Exception stack(0xce9d9d40 to 0xce9d9d88)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.098900] 9d40: 00000000 cf83eca4 00000000 cf83eca4 c053c464 cf83eca4 00000000 cf83e830<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.107118] 9d60: 00000000 00000000 00000000 ce9d9d9c cf83eca8 ce9d9d90 c00297a8 c00438a8<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.115321] 9d80: 60000013 ffffffff<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.118827]&nbsp; r10:00000000 r9:00000000 r8:00000000 r7:ce9d9d74 r6:ffffffff r5:60000013<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.126757]&nbsp; r4:c00438a8 r3:c00297a8<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.130380] [&lt;c004387c&gt;] (raw_notifier_chain_register) from [&lt;c00297a8&gt;] (register_cpu_notifier+0x30/0x44)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.140084] [&lt;c0029778&gt;] (register_cpu_notifier) from [&lt;c027d484&gt;] (mvneta_open+0xbc/0x174)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.148469]&nbsp; r5:cf83ec80 r4:cf83e800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.152094] [&lt;c027d3c8&gt;] (mvneta_open) from [&lt;c02baddc&gt;] (__dev_open+0x94/0x110)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.159520]&nbsp; r6:c04c2c7c r5:00000001 r4:cf83e800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.164197] [&lt;c02bad48&gt;] (__dev_open) from [&lt;c02bb0bc&gt;] (__dev_change_flags+0xb8/0x148)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.172230]&nbsp; r7:00001002 r6:00001003 r5:00000001 r4:cf83e800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.177977] [&lt;c02bb004&gt;] (__dev_change_flags) from [&lt;c02bb16c&gt;] (dev_change_flags+0x20/0x50)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.186446]&nbsp; r9:00000000 r8:00000000 r7:00001002 r6:ce9d9ea4 r5:cf83e944 r4:cf83e800<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.194287] [&lt;c02bb14c&gt;] (dev_change_flags) from [&lt;c02d0a2c&gt;] (dev_ifsioc+0xd8/0x328)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.202148]&nbsp; r9:00000000 r8:00000000 r7:c04c2c7c r6:ce9d9ea4 r5:cf83e800 r4:00008914<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.209998] [&lt;c02d0954&gt;] (dev_ifsioc) from [&lt;c02d1500&gt;] (dev_ioctl+0x808/0x8d4)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.217336]&nbsp; r8:00000000 r7:be881c34 r6:c05363c8 r5:c0552b40 r4:00008914<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.224130] [&lt;c02d0cf8&gt;] (dev_ioctl) from [&lt;c029fd94&gt;] (sock_ioctl+0x2e4/0x2f8)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.231468]&nbsp; r10:00000000 r9:ce9d8000 r8:be881c34 r7:00000005 r6:be881c34 r5:fffffdfd<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.239398]&nbsp; r4:00008914<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.241961] [&lt;c029fab0&gt;] (sock_ioctl) from [&lt;c00e0ac4&gt;] (do_vfs_ioctl+0x6ac/0x6fc)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.249560]&nbsp; r7:00000005 r6:cea450c0 r5:cf584f20 r4:be881c34<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.255296] [&lt;c00e0418&gt;] (do_vfs_ioctl) from [&lt;c00e0b50&gt;] (SyS_ioctl+0x3c/0x64)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.262634]&nbsp; r10:00000000 r9:ce9d8000 r8:be881c34 r7:00008914 r6:cea450c0 r5:00000005<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.270565]&nbsp; r4:cea450c0<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.273125] [&lt;c00e0b14&gt;] (SyS_ioctl) from [&lt;c0009ce0&gt;] (ret_fast_syscall+0x0/0x3c)<br />Mon Aug 22 14:43:29 2016 kern.warn kernel: [ 4161.280724]&nbsp; r9:ce9d8000 r8:c0009ea4 r7:00000036 r6:0003b418 r5:0003b440 r4:00001003</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>