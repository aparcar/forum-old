<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Tinyproxy doesnt work - why ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p351761">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lulu123</div>
					<div class="post-datetime">
						12 Feb 2017, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;ve installed tinyproxy and the tinyproxy-luciapp and started it.</p><p>But it doesn&#039;t work. I want block some urls with this tool.</p><p>Please help me to get this work.</p><p><a href="http://abload.de/image.php?img=18zj8b.jpg"><span class="postimg"><img src="https://abload.de/thumb/18zj8b.jpg" alt="https://abload.de/thumb/18zj8b.jpg" /></span></a></p><p><a href="http://abload.de/image.php?img=37bkj3.jpg"><span class="postimg"><img src="https://abload.de/thumb/37bkj3.jpg" alt="https://abload.de/thumb/37bkj3.jpg" /></span></a></p><p>The wan port of the OpenWRT router (IP: 192.168.1.1) is connected to the</p><p>internet router (ip: 192.168.45.1). </p><p>I used as listen address the internet router ip, the wan port ip and the router ip of the open wrt router. Nothing happens, all black listed URLs are still useable.</p><p>Edit:</p><p>Now it shows the url requests from lan:</p><p><a href="http://abload.de/image.php?img=2n7kns.jpg"><span class="postimg"><img src="https://abload.de/thumb/2n7kns.jpg" alt="https://abload.de/thumb/2n7kns.jpg" /></span></a></p><p>But it blocks nothing... . The url list is correct.</p><p>Edit 2:</p><p>You have to redirect the request by mac per firewall to the port of the proxy. Now it works.</p><p>Best Regards </p><p>lulu123</p>											<p class="post-edited">(Last edited by <strong>lulu123</strong> on 12 Feb 2017, 22:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351769">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						12 Feb 2017, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>Looks like you configured TinyProxy, and it is just expecting connections from the clients. Now you need to configure the clients to use TinyProxy, or you have to configure the router to redirect requests through TinyProxy; I guess you are aiming for the latter. Have a look at <a href="https://wiki.openwrt.org/doc/uci/firewall#transparent_proxy_rule_external">https://wiki.openwrt.org/doc/uci/firewa … e_external</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351819">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">lulu123</div>
					<div class="post-datetime">
						13 Feb 2017, 15:07					</div>
				</div>
				<div class="post-content content">
					<p>I have a problem with https. No https web site is working, if i redirect it to tinyproxy for filtering.</p><p>The firewall settings are correct. And tiny proxy version 1.8.3 supports http(s).</p><p><a href="http://abload.de/image.php?img=https6el8k.jpg"><span class="postimg"><img src="https://abload.de/thumb/https6el8k.jpg" alt="https://abload.de/thumb/https6el8k.jpg" /></span></a></p><p>What is the reason ?</p>											<p class="post-edited">(Last edited by <strong>lulu123</strong> on 13 Feb 2017, 15:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351822">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Feb 2017, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>Have you verified that both HTTP and HTTPS are being redirected to TinyProxy? Is there any message in TinyProxy&#039;s logs? How does the client &quot;fail&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351825">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lulu123</div>
					<div class="post-datetime">
						13 Feb 2017, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>daemon.warn odhcpd[885]: A default route is present but there is no public prefix on br-lan thus we don&#039;t announce a default route!</p><p>I think thats the error.</p><p>What I have to to do ?</p>											<p class="post-edited">(Last edited by <strong>lulu123</strong> on 13 Feb 2017, 15:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351833">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Feb 2017, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>I do not see how is that error related to your issue...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351842">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lulu123</div>
					<div class="post-datetime">
						13 Feb 2017, 19:25					</div>
				</div>
				<div class="post-content content">
					<p>How can I fix a problem like this ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351844">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						13 Feb 2017, 19:40					</div>
				</div>
				<div class="post-content content">
					<p>It is not problem, it is warning concerning IPv6: <a href="https://en.wikipedia.org/wiki/IPv6_address#Unicast_and_anycast_address_format">https://en.wikipedia.org/wiki/IPv6_addr … ess_format</a><br /><strong>The network prefix (the routing prefix combined with the subnet id) is contained in the most significant 64 bits of the address.</strong></p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 13 Feb 2017, 19:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351845">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lulu123</div>
					<div class="post-datetime">
						13 Feb 2017, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>And what is about this error:</p><p>Mon Feb 13 17:52:44 2017 daemon.info tinyproxy[25659]: Connect (file descriptor 7): ::ffff:192.168.1.226 [::ffff:192.168.1.226]<br />Mon Feb 13 17:52:44 2017 daemon.info tinyproxy[25659]: Request (file descriptor 7): <br />Mon Feb 13 17:52:44 2017 daemon.warn tinyproxy[25659]: Could not retrieve all the headers from the client</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351859">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						13 Feb 2017, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>This looks more like a TinyProxy issue than a OpenWrt issue; you will probably find more help at their forum.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>