<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Makefile]: recipe for target &#039;all-recursive&#039; failed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p297856">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						29 Oct 2015, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>I have encountered this issue (recipe for target &#039;all-recursive&#039; failed) numerous times and am still baffled what causes make to spit out such an error message (as shown below). I use shairport-sync source package for an illustration purpose. However, this can easily happen when I tried to natively and directly compile any package on my Seagate GoFLEX Home running on OpenWRT with gcc version 4.8.3 20140401 (prerelease) () + uClibc-ng-1.0.6.<br /></p><div class="codebox"><pre><code>[goflex@GoFLEX:/home/local/goflex/work/shairport-sync_git 35%] ~ make
make  all-recursive
make[1]: Entering directory &#039;/home/local/goflex/work/shairport-sync_git&#039;
Making all in man
Makefile:518: recipe for target &#039;all-recursive&#039; failed
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory &#039;/home/local/goflex/work/shairport-sync_git&#039;
Makefile:371: recipe for target &#039;all&#039; failed
make: *** [all] Error 2
[goflex@GoFLEX:/home/local/goflex/work/shairport-sync_git 36%] ~</code></pre></div><p>The Makefile is generated by the GNU autoconf (configure) utility from the Makefile.in file. This Makefile.in is also generated by the GNU automake utility from the Makefile.am file included in the source package. Anyway, I excerpted the Makefile as shown below.<br /></p><div class="codebox"><pre><code>511 # This directory&#039;s subdirectories are mostly independent; you can cd
512 # into them and run &#039;make&#039; without going through this Makefile.
513 # To change the values of &#039;make&#039; variables: instead of editing Makefiles,
514 # (1) if the variable is set in &#039;config.status&#039;, edit &#039;config.status&#039;
515 #     (which will cause the Makefiles to be regenerated when you run &#039;make&#039;);
516 # (2) otherwise, pass the desired values on the &#039;make&#039; command line.
517 $(am__recursive_targets):
518         @fail=; \
519         if $(am__make_keepgoing); then \
520           failcom=&#039;fail=yes&#039;; \
521         else \
522           failcom=&#039;exit 1&#039;; \
523         fi; \
524         dot_seen=no; \
525         target=`echo $@ | sed s/-recursive//`; \
526         case &quot;$@&quot; in \
527           distclean-* | maintainer-clean-*) list=&#039;$(DIST_SUBDIRS)&#039; ;; \
528           *) list=&#039;$(SUBDIRS)&#039; ;; \
529         esac; \
530         for subdir in $$list; do \
531           echo &quot;Making $$target in $$subdir&quot;; \
532           if test &quot;$$subdir&quot; = &quot;.&quot;; then \
533             dot_seen=yes; \
534             local_target=&quot;$$target-am&quot;; \
535           else \
536             local_target=&quot;$$target&quot;; \
537           fi; \
538           ($(am__cd) $$subdir &amp;&amp; $(MAKE) $(AM_MAKEFLAGS) $$local_target) \
539           || eval $$failcom; \
540         done; \
541         if test &quot;$$dot_seen&quot; = &quot;no&quot;; then \
542           $(MAKE) $(AM_MAKEFLAGS) &quot;$$target-am&quot; || exit 1; \
543         fi; test -z &quot;$$fail&quot;
544</code></pre></div><p>If I remove the trailing &#039;\&#039; string from either line #523 r #524, I can re-launch <em>make</em> to successfully compile the source until the next Makefile (in other sub-directories) is called. When that happens, I edit the offending Makefile to remove the trailing &#039;\&#039; string to fix such a problem. I don&#039;t know what causes this issue, but certainly would like to know the answer. I am hoping the above illustrations will help to debug this issue. The above solution is temporary. I certainly would to know a permanent solution to fix this issue once and for all. So, does anyone here know a fix to this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307585">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">darkfires</div>
					<div class="post-datetime">
						14 Jan 2016, 10:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have figured out a way to (workaround) that issue.&nbsp; The problem actually has NOTHING to do with make or autotools itself.&nbsp; I believe the issue is truly in libc, if you compile a static bash on a system with normal glibc, and stick that in /bin/sh, it will solve the make error problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307606">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						14 Jan 2016, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>Thank you. Can you please shed some lights how did you discover to resolve this issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309058">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">szpunk</div>
					<div class="post-datetime">
						26 Jan 2016, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>@darkfires, thank you, follow you suggest, i fix the problem when i compile on DD-WRT with tomatoware. </p><p>Run export CONFIG_SHELL=/mmc/bin/bash first before run ./configure, It seem like is DD-WRT&#039;s /bin/bash problem, it&#039;s default CONFIG_SHELL.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>