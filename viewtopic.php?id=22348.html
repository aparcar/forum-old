<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ixp4xx and gpioctl</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p96582">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">antonello</div>
					<div class="post-datetime">
						29 Oct 2009, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I using Kamikaze 8.09.1 on IXDPG425 board.</p><p>I compiled the package gpioctl_1.0-1_armeb.ipk and try to use it, <br />but actually NOT have <em>/dev/gpio</em> node created.<br />Why ?</p><div class="quotebox"><blockquote><p>root@OpenWrt:/# cat /proc/devices<br />Character devices:<br />&nbsp; 1 mem<br />&nbsp; 2 pty<br />&nbsp; 3 ttyp<br />&nbsp; 4 ttyS<br />&nbsp; 5 /dev/tty<br />&nbsp; 5 /dev/console&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; 5 /dev/ptmx&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 10 misc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> 89 i2c&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br /> 90 mtd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />108 ppp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />128 ptm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />136 pts&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />254 rtc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Block devices:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />259 blkext&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> 31 mtdblock&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />root@OpenWrt:/#</p></blockquote></div><p>Also, I try to use GPIO SYSFS interface:<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:/# cd /sys/class/gpio/<br />root@OpenWrt:/sys/class/gpio# ls&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />export&nbsp; &nbsp; &nbsp;gpiochip0&nbsp; unexport&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />root@OpenWrt:/sys/class/gpio# echo 12 &gt; export&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />root@OpenWrt:/sys/class/gpio# ls&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />export&nbsp; &nbsp; &nbsp;gpio12&nbsp; &nbsp; &nbsp;gpiochip0&nbsp; unexport&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />root@OpenWrt:/sys/class/gpio# cd gpio12<br />root@OpenWrt:/sys/devices/virtual/gpio/gpio12# ls&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />direction&nbsp; subsystem&nbsp; uevent&nbsp; &nbsp; &nbsp;value&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />root@OpenWrt:/sys/devices/virtual/gpio/gpio12# echo out &gt; direction&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />root@OpenWrt:/sys/devices/virtual/gpio/gpio12# cat direction&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />out</p></blockquote></div><p>Any attempt to read/write <strong>value</strong> causes a kernel oops.<br /></p><div class="quotebox"><blockquote><p>root@OpenWrt:/sys/devices/virtual/gpio/gpio12# echo 1 &gt; value&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Unable to handle kernel paging request at virtual address aaaaaad6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />pgd = c787c000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />[aaaaaad6] *pgd=00000000&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Internal error: Oops: f3 [#1]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Modules linked in: nf_nat_tftp nf_conntrack_tftp nf_nat_irc nf_conntrack_irc nf_<br />nat_ftp nf_conntrack_ftp ipt_MASQUERADE iptable_nat nf_nat xt_NOTRACK iptable_ra<br />w xt_state nf_conntrack_ipv4 nf_defrag_ipv4 nf_conntrack ipt_REJECT xt_TCPMSS ip<br />t_LOG xt_multiport xt_mac xt_limit iptable_mangle iptable_filter ip_tables xt_tc<br />pudp x_tables ppp_async ppp_generic slhc crc_ccitt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />CPU: 0&nbsp; &nbsp; Not tainted&nbsp; (2.6.28.10 #8)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />pc : [&lt;c0107fb0&gt;]&nbsp; &nbsp; lr : [&lt;c0028a04&gt;]&nbsp; &nbsp; psr: a0000013&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />sp : c7a9deb0&nbsp; ip : aaaaaaaa&nbsp; fp : c7a9dec4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />r10: c7aec7f8&nbsp; r9 : c7a9df78&nbsp; r8 : c021e818&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />r7 : 00000002&nbsp; r6 : 00000002&nbsp; r5 : c7839000&nbsp; r4 : c02181f4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />r3 : c02347e0&nbsp; r2 : 0000000c&nbsp; r1 : 0000000c&nbsp; r0 : 01921770&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Flags: NzCv&nbsp; IRQs on&nbsp; FIQs on&nbsp; Mode SVC_32&nbsp; ISA ARM&nbsp; Segment user&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Control: 000039ff&nbsp; Table: 0787c000&nbsp; DAC: 00000015&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Process ash (pid: 1258, stack limit = 0xc7a9c268)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Stack: (0xc7a9deb0 to 0xc7a9e000)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />dea0:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;c7a9df14 0000000c c7a9ded4 c7a9dec8&nbsp; &nbsp;<br />dec0: c0028a04 c0107f94 c7a9deec c7a9ded8 c0106be0 c00289ac c40f0720 c0234870&nbsp; &nbsp;<br />dee0: c7a9df14 c7a9def0 c0107bec c0106bb0 4009f814 00000001 c7addd88 00000002&nbsp; &nbsp;<br />df00: c7aec7e0 c7adbc68 c7a9df24 c7a9df18 c01239cc c0107b60 c7a9df54 c7a9df28&nbsp; &nbsp;<br />df20: c00bbeb4 c01239b4 00000007 c7a99dc0 00000002 4009f814 c7a9df78 c001ff64&nbsp; &nbsp;<br />df40: c7a9c000 00000001 c7a9df74 c7a9df58 c007fbf8 c00bbd88 c7a99dc0 fffffff7&nbsp; &nbsp;<br />df60: 00000000 00000000 c7a9dfa4 c7a9df78 c008004c c007fb50 00000000 00000000&nbsp; &nbsp;<br />df80: c008b4a8 00000000 4009d320 00000002 00000002 00000004 00000000 c7a9dfa8&nbsp; &nbsp;<br />dfa0: c001fde0 c0080014 4009d320 00000002 00000001 4009f814 00000002 4006ac64&nbsp; &nbsp;<br />dfc0: 4009d320 00000002 00000002 00000004 00000002 00075284 00000001 00000000&nbsp; &nbsp;<br />dfe0: 000735ec beda4728 4006a328 40053f10 20000010 00000001 8a882aaa 0a90220a&nbsp; &nbsp;<br />Backtrace:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c0107f88&gt;] from [&lt;c0028a04&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> r4:0000000c&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c00289a0&gt;] from [&lt;c0106be0&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c0106ba4&gt;] from [&lt;c0107bec&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> r4:c0234870&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c0107b54&gt;] from [&lt;c01239cc&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> r7:c7adbc68 r6:c7aec7e0 r5:00000002 r4:c7addd88&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c01239a8&gt;] from [&lt;c00bbeb4&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c00bbd7c&gt;] from [&lt;c007fbf8&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c007fb44&gt;] from [&lt;c008004c&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> r7:00000000 r6:00000000 r5:fffffff7 r4:c7a99dc0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Function entered at [&lt;c0080008&gt;] from [&lt;c001fde0&gt;]&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br /> r7:00000004 r6:00000002 r5:00000002 r4:4009d320&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Code: e0000394 e59f301c e1a02001 e790c003 (e59c102c)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />---[ end trace 45b95cc01572dcb7 ]---&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />Please press Enter to activate this console.</p></blockquote></div><p>Any suggestion?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96744">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">antonello</div>
					<div class="post-datetime">
						2 Nov 2009, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>Solved!</p><p>I added the following change</p><div class="codebox"><pre><code>Index: linux-2.6.28.10/arch/arm/mach-ixp4xx/coyote-setup.c
===================================================================
--- linux-2.6.28.10.orig/arch/arm/mach-ixp4xx/coyote-setup.c
+++ linux-2.6.28.10/arch/arm/mach-ixp4xx/coyote-setup.c
@@ -98,12 +98,29 @@ static struct platform_device ixdpg425_e
     }
 };
 
+static struct resource ixdpg425_gpio_resources[] = {
+    {
+        .name = &quot;gpio&quot;,
+        .start  = IXDPG425_GPIO_MASK,
+        .end    = IXDPG425_GPIO_MASK,
+        .flags  = 0,
+    },
+};
+
+static struct platform_device ixdpg425_gpio = {
+    .name         = &quot;GPIODEV&quot;,
+    .id         = -1,
+    .num_resources  = ARRAY_SIZE(ixdpg425_gpio_resources),
+    .resource       = ixdpg425_gpio_resources,
+};
+
 
 static struct platform_device *coyote_devices[] __initdata = {
     &amp;coyote_flash,
     &amp;coyote_uart,
     &amp;ixdpg425_eth[0],
     &amp;ixdpg425_eth[1],
+    &amp;ixdpg425_gpio,
 };
 
 static void __init coyote_init(void)
Index: linux-2.6.28.10/arch/arm/mach-ixp4xx/include/mach/coyote.h
===================================================================
--- linux-2.6.28.10.orig/arch/arm/mach-ixp4xx/include/mach/coyote.h
+++ linux-2.6.28.10/arch/arm/mach-ixp4xx/include/mach/coyote.h
@@ -31,3 +31,16 @@
 #define    COYOTE_IDE_CTRL_PORT    0xFFFE10FC
 #define    COYOTE_IDE_ERROR_PORT    0xFFFE10E2
 
+/* gpio mask used by platform device */
+/* +---------------------------------------------------+
+ * | GPIO | Direction |            Function            |
+ * +------+-----------+--------------------------------+
+ * |   2  |    Out    |  SPI Clock                     |
+ * |   3  |    Out    |  SPI Data In (Data to Slic)    |
+ * |   4  |    In     |  SPI Data Out (Data from Slic) |
+ * |   5  |    Out    |  SPI Chip Select               |
+ * |  11  |    In     |  Slic Interrupt                |
+ * |  13  |    Out    |  Slic Reset                    |
+ * +---------------------------------------------------+
+ */
+#define IXDPG425_GPIO_MASK (1 &lt;&lt; 2) | (1 &lt;&lt; 3) | (1 &lt;&lt; 4) | (1 &lt;&lt; 5) | (1 &lt;&lt; 11) | (1 &lt;&lt; 13)</code></pre></div><p>Access to the GPIOs has only purpose of slic debug.<br />Thanks to all</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>