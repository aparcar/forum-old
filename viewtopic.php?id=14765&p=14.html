<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR7100</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 1 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 14 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=13.html">13</a></li><li class="pagination-current"><span>14</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p82479">
				<div class="post-metadata">
					<div class="post-num">Post #326</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						23 Feb 2009, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>leonardogyn, i pm&#039;d you a while ago. could you please mail me the patches?</p><p>also, has there perhaps been some public development of this? i think a lot of people will be interested in having sd support in their rb433x&#039;s!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84209">
				<div class="post-metadata">
					<div class="post-num">Post #327</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						19 Mar 2009, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>mmmm... can anyone please who has the experimental code please send me this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84281">
				<div class="post-metadata">
					<div class="post-num">Post #328</div>
					<div class="post-author">cdiggity</div>
					<div class="post-datetime">
						20 Mar 2009, 23:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xezen wrote:</cite><blockquote><p>how can it set up a rb411 or 433 ah the stream all data form serial port to sql server?</p></blockquote></div><p>take a look at ser2net package. let us know how it goes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86352">
				<div class="post-metadata">
					<div class="post-num">Post #329</div>
					<div class="post-author">rbiz</div>
					<div class="post-datetime">
						21 Apr 2009, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>There&#039;s a couple of new boards coming up apparently. <a href="http://www.roc-noc.com/product.php?productid=200&amp;cat=0&amp;page=5">http://www.roc-noc.com/product.php?prod … amp;page=5</a> is what they call the RB433U, it looks to me like a RB433AH with two USB ports.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86975">
				<div class="post-metadata">
					<div class="post-num">Post #330</div>
					<div class="post-author">skadu</div>
					<div class="post-datetime">
						30 Apr 2009, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi Everyone</p><p>Thanks a lot for all the development you&#039;re doing here. This is great stuff.</p><p>I&#039;m using the RB433AH and have been trying to get the kernel saved to NAND, but there&#039;s just not enough space.<br />Am able to boot OpenWRT from ethernet, and have formatted the flash from the boot menu (3840 1k blocks, 1536 Available) as well as by using the mtd command.<br />Tried another RB433AH, but have the same result. <br />Would you please let me know if there&#039;s something I&#039;m missing, or is this bad hardware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87576">
				<div class="post-metadata">
					<div class="post-num">Post #331</div>
					<div class="post-author">tcsh2002</div>
					<div class="post-datetime">
						8 May 2009, 05:31					</div>
				</div>
				<div class="post-content content">
					<p>I am unable to get OpenWRT netbooted successfully on my 433AH board. I am getting kernel panic.</p><p>I tried binaries from the following locations:<br /><a href="http://downloads.openwrt.org/kamikaze/8.09/ar71xx/">http://downloads.openwrt.org/kamikaze/8.09/ar71xx/</a><br /><a href="http://wifi.ozo.com/airo/openwrt/firmware/kamikaze/2.6/ar71xx/">http://wifi.ozo.com/airo/openwrt/firmwa … .6/ar71xx/</a> (I tried 11900, 12204, 12286, 14104)</p><p>They either hangs at &quot;jumping to kernel code&quot; or fail to find the init scripts (see below).</p><p>Any help is much appreciated.</p><br /><br /><p>RouterBOOT booter 2.19</p><p>RouterBoard 433AH</p><p>CPU frequency: 680 MHz<br />&nbsp; Memory size: 128 MB</p><p>Press any key within 2 seconds to enter setup..<br />kernel not found<br />trying dhcp protocol........ OK<br />resolved mac address 00:12:17:5C:3E:29<br />Gateway: 192.168.0.1<br />transfer started ................. transfer ok, time=2.58s<br />setting up elf image... OK<br />jumping to kernel code<br />Linux version 2.6.27.12 (alex@aifnis) (gcc version 4.2.4) #1 Mon Jan 19 17:15:44<br /> EET 2009<br />console [early0] enabled<br />CPU revision is: 00019374 (MIPS 24K)<br />Determined physical RAM map:<br /> memory: 08000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00008000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00008000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 32512<br />Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,1152<br />00 init=/etc/preinit<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00008000<br />Readback ErrCtl register=00008000<br />PID hash table entries: 512 (order: 9, 2048 bytes)<br />Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)<br />Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Memory: 127104k/131072k available (1732k kernel code, 3788k reserved, 318k data,<br /> 124k init, 0k highmem)<br />SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)<br />Mount-cache hash table entries: 512<br />net_namespace: 592 bytes<br />NET: Registered protocol family 16<br />MIPS: machine is MikroTik RouterBOARD 433/AH<br />registering PCI controller with io_map_base unset<br />pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot<br />pci 0000:00:00.0: PME# disabled<br />bus: 00 index 0 io port: [0, 0]<br />bus: 00 index 1 mmio: [10000000, 17ffffff]<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 4096 (order: 3, 32768 bytes)<br />TCP bind hash table entries: 4096 (order: 2, 16384 bytes)<br />TCP: Hash tables configured (established 4096 bind 4096)<br />TCP reno registered<br />NET: Registered protocol family 1<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; Â© 2001-2006 Red Hat, Inc.<br />yaffs Jan 19 2009 17:13:25 Installing.<br />msgmni has been set to 248<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />console handover: boot [early0] -&gt; real [ttyS0]<br />ag71xx_mdio: probed<br />eth0: Atheros AG71xx at 0xba000000, irq 5<br />eth1: Atheros AG71xx at 0xb9000000, irq 4<br />NAND flash driver for RouterBoard 4xx series version 0.1.10<br />NAND SPI clock 28333 kHz (AHB 170000 kHz / 6)<br />FLASH SPI clock 28333 kHz (AHB 170000 kHz / 6)<br />NAND device: Manufacturer ID: 0xad, Chip ID: 0xdc (Hynix NAND 512MiB 3,3V 8-bit)<br />Scanning device for bad blocks<br />Bad eraseblock 0 at 0x00000000<br />Bad eraseblock 836 at 0x0d100000<br />Bad eraseblock 1510 at 0x17980000<br />Bad eraseblock 1512 at 0x17a00000<br />Creating 3 MTD partitions on &quot;NAND 512MiB 3,3V 8-bit&quot;:<br />0x00000000-0x00040000 : &quot;booter&quot;<br />0x00040000-0x00400000 : &quot;kernel&quot;<br />0x00400000-0x20000000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />split_squashfs: error occured while reading from &quot;NAND 512MiB 3,3V 8-bit&quot;<br />Atheros AR71xx SPI Controller driver version 0.2.2<br />Atheros AR71xx hardware watchdog driver version 0.1.0<br />TCP vegas registered<br />NET: Registered protocol family 17<br />yaffs: dev is 32505858 name is &quot;mtdblock2&quot;<br />yaffs: passed flags &quot;&quot;<br />yaffs: Attempting MTD mount on 31.2, &quot;mtdblock2&quot;<br />yaffs: auto selecting yaffs2<br />block 821 is bad<br />block 1495 is bad<br />block 1497 is bad<br />VFS: Mounted root (yaffs filesystem) readonly.<br />Freeing unused kernel memory: 124k freed<br />Please be patient, while OpenWrt loads ...<br />Failed to execute /etc/preinit.&nbsp; Attempting defaults...<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88842">
				<div class="post-metadata">
					<div class="post-num">Post #332</div>
					<div class="post-author">paulCutler</div>
					<div class="post-datetime">
						27 May 2009, 16:06					</div>
				</div>
				<div class="post-content content">
					<p>I am having a real hard time getting ebtables to function correctly in my system, I am hoping that someone can help. </p><p>I am running trunk @16100 and building for the Ubiquity RouterStation. It seems that no matter what I do I get the same result on the console:<br />----------------------------------------------------------<br />eb_tables: standard target: invalid size 8 != 4<br />The kernel doesn&#039;t support a certain ebtables extension, consider recompiling your kernel or insmod the extension.<br />----------------------------------------------------------</p><p>I have enabled ebtables in the base config &quot;make menuconfig&quot; using the following:<br />-- Network<br /> &lt;*&gt; ebtables<br /> &lt;*&gt; ebtables-utils<br />-- Kernel-Netfilter Extensions:<br /> --- kmod-ebtables (selected)</p><p>In the kernel &quot;make kernel_menuconfig&quot; Networking options-&gt;Network packet filtering framework (Netfilter) -- I have also enabled :<br /> [*] Bridged IP/ARP packets filtering<br />&nbsp; &nbsp; &nbsp;Core Netfilter Configuration --&gt; (everything built into the kernel)<br />&nbsp; &nbsp; &nbsp; IP: Netfilter Configuration --&gt;(everything built into the kernel)<br />&nbsp; &nbsp; &nbsp; Ethernet Bridge Tables --&gt;(everything built into the kernel)</p><p>I always seem to get the same result -- &quot;eb_tables: standard target: invalid size 8 != 4&quot;</p><p>Is this a mismatch between ebtables and the kernel or xtables?<br />Any help you can lend would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88958">
				<div class="post-metadata">
					<div class="post-num">Post #333</div>
					<div class="post-author">hehol</div>
					<div class="post-datetime">
						29 May 2009, 19:23					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve got a D-Link DIR-825 which uses an Atheros AR7100 platform (AR7161). I can see output on the serial console, but the input does not work (not even in the U-Boot boot loader). According to D-Link, the pinout is</p><div class="codebox"><pre><code>PIN1--&gt;3.3V 
PIN2--&gt;RX 
PIN3--&gt;TX 
PIN4--&gt;GND</code></pre></div><p>Has anyone gotten their hands on the DIR-825 with a fully working console? I searched the forum and found a few boot logs of AR7100 devices. All the devices show</p><div class="codebox"><pre><code>console [early0] enabled</code></pre></div><p>but the D-Link doesn&#039;t. Does this mean that the console has been disabled?</p><p>For those interested, this is the full boot log:</p><div class="codebox"><pre><code>U-Boot 1.1.4 (Mar 13 2009 - 19:47:38)

AP94 (ar7100) U-boot 0.0.12
HTTP-UID AP94: DRAM:  b8050000: 0xc0140180
64 MB
Top of RAM usable for U-Boot at: 84000000
Reserving 214k for U-Boot at: 83fc8000
Reserving 192k for malloc() at: 83f98000
Reserving 44 Bytes for Board Info at: 83f97fd4
Reserving 36 Bytes for Global Data at: 83f97fb0
Reserving 128k for boot params() at: 83f77fb0
Stack Pointer at: 83f77f98
Now running in RAM - U-Boot at: 83fc8000
ar7100 flash_init: start
ar7100_spi_flash_unblock: start
ar7100_flash: id read: start
flash size 8MB, sector count = 128
Flash:  8 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   eth_initialize: ag7100_enet_initialize
rtl8366sr_phy_setup  ethUnit=0
ar7100.c: eth0 using default MAC: 00:24:01:66:11:c3
eth0 up
ar7100.c: eth1 using default MAC: 00:24:01:66:11:c4
eth1 up
eth0, eth1
### main_loop entered: bootdelay=1

### main_loop: bootcmd=&quot;bootm 0xbf050000&quot;
Hit any key to stop autoboot:  1  0 
### main_loop: no key string, allow autoboot
### main_loop: abortboot
## Booting image at bf050000 ...
checksum:389ce7ea
   Image Name:   Linux Kernel Image
   Image Type:   MIPS Linux Kernel Image (lzma  compressed)
   Data Size:    1034995 Bytes = 1010.7 kB
   Load Address: 80002000
   Entry Point:  802e8000
   Verifying Checksum ... OK
   LZMA Umcompressing Kernel Image ...    Image loaded from 80002000-8030b086
 OK
   Boot image os 5=IH_OS_LINUX
## do_bootm_linux start....
No initrd
## Transferring control to Linux (at address 802e8000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.15--LSDK-7.2.0.156 (root@localhost.localdomain) (gcc version 3.4.4) #319 Mon Mar 9 16:07:59 CST 2009

setup_arch:


cpu_probe:

PRID_COMP_MIPS CPU

prom_init:flash_size passed from bootloader = 8M

arg 1: console=ttyS0,115200

arg 2: root=31:03

arg 3: mem=64M

arg 4: rootfstype=squashfs,jffs2

arg 5: init=/sbin/init

arg 6: mtdparts=ar7100-nor0:256k(uboot),64k(Config),1024k(vmlinux),5184k(rootfs),64k(caldata)

cpu_report:CPU revision is: 00019374

Determined physical RAM map:

 memory: 02000000 @ 00000000 (usable)

User-defined physical RAM map:

 memory: 04000000 @ 00000000 (usable)

setup_arch: end


Built 1 zonelists

Kernel command line: console=ttyS0,115200 root=31:03 mem=64M rootfstype=squashfs,jffs2 init=/sbin/init mtdparts=ar7100-nor0:256k(uboot),64k(Config),1024k(vmlinux),5184k(rootfs),64k(caldata) 

Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.

Primary data cache 32kB, 4-way, linesize 32 bytes.

Synthesized TLB refill handler (20 instructions).

Synthesized TLB load handler fastpath (32 instructions).

Synthesized TLB store handler fastpath (32 instructions).

Synthesized TLB modify handler fastpath (31 instructions).

Cache parity protection disabled

PID hash table entries: 512 (order: 9, 8192 bytes)

Using 340.000 MHz high precision timer.

Console: colour dummy device 80x25

Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)

Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)

Memory: 61312k/65536k available (2450k kernel code, 4160k reserved, 513k data, 144k init, 0k highmem)

Mount-cache hash table entries: 512

Checking for &#039;wait&#039; instruction...  available.

NET: Registered protocol family 16

calling simple_config callback..

SCSI subsystem initialized

TC classifier action (bugs to netdev@vger.kernel.org cc hadi@cyberus.ca)

AR7100 GPIOC major 0

squashfs: version 3.1 (2006/08/19) Phillip Lougher

Initializing Cryptographic API

io scheduler noop registered

io scheduler deadline registered

HDLC line discipline: version $Revision: 1.1.1.1 $, maxframe=4096

N_HDLC line discipline registered.

Serial: 8250/16550 driver $Revision: 1.1.1.1 $ 1 ports, IRQ sharing disabled

serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A

RAMDISK driver initialized: 1 RAM disks of 1024K size 1024 blocksize

PPP generic driver version 2.4.2

PPP MPPE Compression module registered

NET: Registered protocol family 24

PPTP driver version 0.7.12

5 cmdlinepart partitions found on MTD device ar7100-nor0

Creating 5 MTD partitions on &quot;ar7100-nor0&quot;:

0x00000000-0x00040000 : &quot;uboot&quot;

0x00040000-0x00050000 : &quot;Config&quot;

0x00050000-0x00150000 : &quot;vmlinux&quot;

0x00150000-0x00660000 : &quot;rootfs&quot;

0x00660000-0x00670000 : &quot;caldata&quot;

GACT probability on

Mirror/redirect action on

Simple TC action Loaded

netem: version 1.1

u32 classifier

    Perfomance counters on

    input device check on 

    Actions configured 

NET: Registered protocol family 2

IP route cache hash table entries: 1024 (order: 0, 4096 bytes)

TCP established hash table entries: 4096 (order: 2, 16384 bytes)

TCP bind hash table entries: 4096 (order: 2, 16384 bytes)

TCP: Hash tables configured (established 4096 bind 4096)

TCP reno registered

ip_conntrack version 2.4 (512 buckets, 4096 max) - 232 bytes per conntrack

ip_ct_h323: init success

ip_conntrack_rtsp v0.6.21 loading

ip_nat_rtsp v0.6.21 loading

ip_conntrack_pptp version 3.1 loaded

ip_nat_pptp version 3.0 loaded

ip_tables: (C) 2000-2002 Netfilter core team

ipt_time loading

ipt_recent v0.3.1: Stephen Frost &lt;sfrost@snowman.net&gt;.  http://snowman.net/projects/ipt_recent/

ClusterIP Version 0.8 loaded successfully

TCP bic registered

NET: Registered protocol family 1

NET: Registered protocol family 10

lo: Disabled Privacy Extensions

IPv6 over IPv4 tunneling driver

ip6_tables: (C) 2000-2002 Netfilter core team

NET: Registered protocol family 17

802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;

All bugs added by David S. Miller &lt;davem@redhat.com&gt;

VFS: Mounted root (squashfs filesystem) readonly.

Freeing unused kernel memory: 144k freed


init started:  BusyBox v1.01 (2009.03.09-08:09+0000) multi-call binary
Algorithmics/MIPS FPU Emulator v1.5

mount: Mounting none on /proc/bus/usb failed: No such file or directory

Please press Enter to activate this console. ag7100_mod: module license &#039;unspecified&#039; taints kernel.

AG7100CHH: Mac address for unit 0

AG7100CHH: ff:ff:ff:ff:ff:ff 

AG7100CHH: Mac address for unit 1

AG7100CHH: ff:ff:ff:ff:ff:ff 

AG7100ag7100_open: mac0

ag7100_ring_alloc Allocated 2400 at 0x83cff000

ag7100_ring_alloc Allocated 3024 at 0x83cfb000

ag7100_hw_setup: Not AR9100 

CHH:mac: 0 if: 2

AG7100ag7100_hw_setup:AG7100_DMA_TX_DESC: 0x184

AG7100ag7100_hw_setup:AG7100_DMA_RX_DESC: 0x190

AG7100ag7100_hw_setup:mac0 cfg1 0xf cfg2 0x7014 cfg5 0x7ffef

Writing 4

ADDRCONF(NETDEV_UP): eth0: link is not ready

eth0: Cannot assign requested address
AG7100ag7100_open: mac1

ag7100_ring_alloc Allocated 2400 at 0x83dcf000

ag7100_ring_alloc Allocated 3024 at 0x83dd3000

ag7100_hw_setup: Not AR9100 

CHH:mac: 1 if: 0

AG7100ag7100_hw_setup:AG7100_DMA_TX_DESC: 0x184

AG7100ag7100_hw_setup:AG7100_DMA_RX_DESC: 0x190

AG7100ag7100_hw_setup:mac1 cfg1 0xf cfg2 0x7014 cfg5 0x7ffef

Writing 6

ADDRCONF(NETDEV_UP): eth1: link is not ready

eth1: Cannot assign requested address
device eth0 entered promiscuous mode

TFTP main
standard_tftp_server launched on port 69.
ImgCheckSum=7e0dbb8
Mon Mar  9 16:08:00 UTC 2009
Entry gpio_ioctl init_module !!

sh: cannot create /proc/sys/net/ipv6/conf/eth1/accept_ra: Directory nonexistent
usbcore: registered new driver usbfs

usbcore: registered new driver hub

10 Dec 2004 USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver (AR7100_EHCI)

In ar7100_ehci_drv_probe

probing ehci...

hcd-&gt;regs is 0xbb000000

ehci-&gt;caps is 0xbb000000

ehci-&gt;caps-&gt;hc_base is 0x1000010

ar7100-ehci ar7100-ehci.0: AR7100 EHCI

ar7100-ehci ar7100-ehci.0: new USB bus registered, assigned bus number 1

ar7100-ehci ar7100-ehci.0: irq 3, io mem 0x1b000000

hcc_params addr 0xbb000008 val 0xa020 hcs_params addr 0xbb000004 val 0x1212

ar7100-ehci ar7100-ehci.0: USB 0.0 started, EHCI 1.00, driver 10 Dec 2004

hub 1-0:1.0: USB hub found

hub 1-0:1.0: 2 ports detected

...probing done

2005 April 22 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver (ar7100_ohci)block sizes: ed 64 td 64

In ohci_hcd_ar7100_drv_probeprobing...

ar7100-ohci ar7100-ohci.0: new USB bus registered, assigned bus number 2

ar7100-ohci ar7100-ohci.0: irq 22, io mem 0x1c000000

hub 2-0:1.0: USB hub found

hub 2-0:1.0: 2 ports detected

probing done

rc is BUSY now!
killall: wantimer: no process killed
eth1: Cannot assign requested address
wantimer: wan_interface=eth1,wan_proto=dhcpc
DHCP client start.
eth0: Cannot assign requested address
eth1      Link encap:Ethernet  HWaddr 00:24:01:66:11:C4  
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

Sending discover...
inet6_if=br0, dad_status=80
dhcpd_enabled::::::
##################### wlan0_enable#########################
##################### wlan1_enable#########################
domain empty
Failure parsing line 19 of /var/etc/udhcpd.conf
Failure parsing line 20 of /var/etc/udhcpd.conf
Failure parsing line 21 of /var/etc/udhcpd.conf
DHCP server start.
device_lan_ip=192.168.0.1 , device_lan_subnet_mask=255.255.255.0
max_leases value (254) not sane, setting to 100 instead
Unable to open /var/misc/udhcpd.leases for reading
Sending discover...
Loading Wireless Modules in MakeVAP
Args: 1
ath_hal: 0.9.17.1 (AR5416, REGOPS_FUNC, WRITE_EEPROM, 11D)

wlan: 0.8.4.2 (Atheros/multi-bss)

ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved

insmod: cannot open module `/lib/modules/2.6.15/net/ath_dfs.ko&#039;: No such file or directory
ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved

ath_pci: 0.9.4.5 (Atheros/multi-bss)

_ath_attach: register_simple_config_callback: to wifi0

wifi0: Atheros 9280: mem=0x10000000, irq=48 hw_base=0xb0000000

wifi1: Atheros 9280: mem=0x10010000, irq=49 hw_base=0xb0010000

wlan: mac acl policy registered

wlan_me: Version 0.1

Copyright (c) 2008 Atheros Communications, Inc. All Rights Reserved

Sending discover...
wantimer: dhcpc_release (VCT_DISCONNECT)
makeVAP: IFNUM=0, RF=RF, PRI_CH=11ng, CH_MODE=11NGHT20
DHCPC Received SIGUSR2=&gt;DHCPC Release
Performing a DHCPC release
Entering released state
makeVAP Added ath0, mode master
makeVAP Created ath0 mode ap for dlink
Wireless Modules already loaded
makeVAP: IFNUM=1, RF=RF, PRI_CH=11na, CH_MODE=11NAHT20
makeVAP Added ath1, mode master
makeVAP Created ath1 mode ap for dlink_media
lo        no wireless extensions.

teql0     no wireless extensions.

sit0      no wireless extensions.

ip6tnl0   no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br0       no wireless extensions.

wifi0     no wireless extensions.

wifi1     no wireless extensions.

device ath0 entered promiscuous mode

br0: port 2(ath0) entering learning state

br0: topology change detected, propagating

br0: port 2(ath0) entering forwarding state

lo        no wireless extensions.

teql0     no wireless extensions.

sit0      no wireless extensions.

ip6tnl0   no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

br0       no wireless extensions.

wifi0     no wireless extensions.

wifi1     no wireless extensions.

device ath1 entered promiscuous mode

br0: port 3(ath1) entering learning state

br0: topology change detected, propagating

br0: port 3(ath1) entering forwarding state

device eth0 left promiscuous mode

br0: port 1(eth0) entering disabled state

device eth0 entered promiscuous mode

ARPING to 192.168.0.1 from 192.168.0.1 via br0
Sent 1 probes (1 broadcast(s))
Received 0 reply
Country ie is DEI

#################################Start WLAN Finished############################
Country ie is DEI

icctl: val =0x10Mon Mar  9 16:08:00 UTC 2009
&lt;1&gt;NetUSB: NetUSB 0.9232, KCodes co. 2008

NetUSB: SoftwareBus start

usbcore: registered new driver USB General Driver

NetUSB: Bind to br0

NetUSB: tcpConnector() started...

NetUSB: Accepting...

wan_ipaddr == NULL, firewall don&#039;t start
Start Firewall: Clear iptables
killall: crowdcontrol: no process killed
rc is IDLE now!
WscCmd:SetApBand=3

*******************************************************
Wi-Fi Simple Config Application - Atheros Communcations
*******************************************************
Set RFBand=3 and cp wsc_config_ag.txt to wsc_config.txt
StartStack:set RFBand=3
write_radvd_conf_cmd start
ReadNvramWscConfig:nvram_tmp_data open OK
ReadNvramWscConfig:close nvram_tmp_data OK!
Print out this meaasge to delay time for openssl.
DON&#039;T support thes kind of auth type. We use WPS2PSK
DON&#039;T support thes kind of cipher type. We use CCMP
ssid=dlink
ssid=dlink_media

Configuration file: /var/tmp/hostapd.conf
br0: port 2(ath0) entering disabled state

Using interface ath0 with hwaddr 00:24:01:66:11:c3 and ssid &#039;dlink&#039;
Country ie is DEI

br0: port 2(ath0) entering learning state

br0: topology change detected, propagating

br0: port 2(ath0) entering forwarding state

Flushing old station entries
Deauthenticate all stations
l2_packet_receive - recvfrom: Network is down
l2_packet_receive - recvfrom: Network is down
Configuration file: /var/tmp/hostapd.conf_1
br0: port 3(ath1) entering disabled state

Using interface ath1 with hwaddr 00:24:01:66:11:c5 and ssid &#039;dlink_media&#039;
Country ie is DEI

br0: port 3(ath1) entering learning state

br0: topology change detected, propagating

br0: port 3(ath1) entering forwarding state

Flushing old station entries
Deauthenticate all stations
l2_packet_receive - recvfrom: Network is down
l2_packet_receive - recvfrom: Network is down
write radvd_conf_cmd finished</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p88960">
				<div class="post-metadata">
					<div class="post-num">Post #334</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						29 May 2009, 19:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hehol wrote:</cite><blockquote><p>I&#039;ve got a D-Link DIR-825 which uses an Atheros AR7100 platform (AR7161). I can see output on the serial console, but the input does not work (not even in the U-Boot boot loader).</p></blockquote></div><p>I have no idea what is going on with Atheros platform but this same &quot;input&quot; problem has cropped up for other people.</p><p>I had same problem with Linksys WRT160NL which is AP81 design.</p><p>I was using a 6-foot long FTDI TTL-232R-3V3-AJ. USB cable as I have done on Broadcom for years.&nbsp; Checked my work couldn&#039;t find anything wrong.&nbsp; After suggestion by THALIENCE that the length was an issue, I tried something else which worked fine.</p><p>I cut open a Nokia-clone CA-42 I got of EBay and found it to be Nokia DKU-5-B.&nbsp; I cut the cables short less than 18 inches and installed PL2303 drivers and boom it WORKED.&nbsp; &nbsp;Maybe this would work if I shortened the FTDI cable also but I didn&#039;t want to cut it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89295">
				<div class="post-metadata">
					<div class="post-num">Post #335</div>
					<div class="post-author">hehol</div>
					<div class="post-datetime">
						4 Jun 2009, 15:22					</div>
				</div>
				<div class="post-content content">
					<p>Cabling is not the problem. I tried other serial adaptors with the same result.</p><p>I&#039;ve just come across D-Link&#039;s DNS-323 which - according to <a href="http://wiki.dns323.info/hardware:serial">this link</a> - has the interactive shell deliberately disabled. Maybe they did the same thing on the DIR-825?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89304">
				<div class="post-metadata">
					<div class="post-num">Post #336</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						4 Jun 2009, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>There was also a thread about models requiring bridging of pads to enable input:</p><p><a href="http://forum.openwrt.org/viewtopic.php?id=18354">http://forum.openwrt.org/viewtopic.php?id=18354</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89901">
				<div class="post-metadata">
					<div class="post-num">Post #337</div>
					<div class="post-author">Yanira</div>
					<div class="post-datetime">
						15 Jun 2009, 15:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>juhosg wrote:</cite><blockquote><p>Sorry, the microSD slot on the RB-493AH is not yet supported under OpenWrt. The slot shares the AR71xx&#039;s SPI bus with the NAND and with the NOR flash, and the linux mmc_spi driver does not work with a shared SPI bus currently.</p></blockquote></div><p>Any news on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89964">
				<div class="post-metadata">
					<div class="post-num">Post #338</div>
					<div class="post-author">hyperx</div>
					<div class="post-datetime">
						16 Jun 2009, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><p>I&#039;m a newbie. Right now, I&#039;m planning to develop some kind of gigabit related network using Atheros AR7161 and realtek PHY. So I need help on finding the datasheet for this NPU. Can anybody please send to me or uploaded it somewhere. I tried googling this for a past few days but can&#039;t find it.</p><p>Thank you for your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92502">
				<div class="post-metadata">
					<div class="post-num">Post #339</div>
					<div class="post-author">bryce_colin</div>
					<div class="post-datetime">
						10 Aug 2009, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>hi all,<br />&nbsp; for the wp543 compex board, can some one help me to add the vlan support</p><p>thanksbryce</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p92695">
				<div class="post-metadata">
					<div class="post-num">Post #340</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						15 Aug 2009, 07:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hehol wrote:</cite><blockquote><p>but the D-Link doesn&#039;t. Does this mean that the console has been disabled?</p></blockquote></div><p>i have partial success with DIR-825 rev B1</p><p>modified trunk openwrt image bootlog (loaded via ymodem):<br /></p><div class="codebox"><pre><code>## Booting image at 81000000 ...
checksum:150a16ff
   Image Name:   MIPS OpenWrt Linux-2.6.30.4
   Image Type:   MIPS Linux Kernel Image (lzma  compressed)
   Data Size:    2180412 Bytes =  2.1 MB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   LZMA Umcompressing Kernel Image ...    Image loaded from 80060000-807ca200
 OK
   Boot image os 5=IH_OS_LINUX
## do_bootm_linux start....
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.30.4 (valxdater@vx) (gcc version 4.1.2) #21 Sat Aug 15 05:46:44 CEST 2009
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
NR_IRQS:56
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 56828k/65536k available (1921k kernel code, 8636k reserved, 565k data, 5108k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
Mount-cache hash table entries: 512
net_namespace: 528 bytes
NET: Registered protocol family 16
MIPS: machine is D-Link DIR825B1
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:00.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:11.0
PCI: mapping irq 49 to pin1@0000:00:12.0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
yaffs Aug 14 2009 12:27:26 Installing. 
msgmni has been set to 111
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth1: Atheros AG71xx at 0xba000000, irq 5
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: s25sl064a (8192 Kbytes)
Searching for RedBoot partition table in spi0.0 at offset 0x7e0000
6 RedBoot partitions found on MTD device spi0.0
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;RedBoot&quot;
0x000000040000-0x000000140000 : &quot;vmlinux&quot;
0x000000140000-0x000000740000 : &quot;filesystem&quot;
0x0000007e0000-0x0000007ef000 : &quot;FIS directory&quot;
0x0000007ef000-0x0000007f0000 : &quot;RedBoot config&quot;
0x0000007f0000-0x000000800000 : &quot;boardconfig&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 5108k freed
- preinit -
Press CTRL-C for failsafe

Please press Enter to activate this console. eth0: link up (1000Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
cfg80211: Using static regulatory domain info
cfg80211: Regulatory domain: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
    (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)
cfg80211: Calling CRDA for country: US
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
ip_tables: (C) 2000-2006 Netfilter Core Team
Driver &#039;sd&#039; needs updating - please use bus_type methods
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR71xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
eth1: link up (10Mbps/Half duplex)
Registered led device: dir825b1:blue:usb
Registered led device: dir825b1:orange:power
Registered led device: dir825b1:blue:power
Registered led device: dir825b1:blue:powersafe
Registered led device: dir825b1:orange:planet
Registered led device: dir825b1:blue:planet
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0



BusyBox v1.13.4 (2009-08-14 10:20:46 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (bleeding edge, r17250) -------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/#</code></pre></div><p>wrong redboot partitions are detected maybe from previous d-link firmware:<br /></p><div class="codebox"><pre><code>6 RedBoot partitions found on MTD device spi0.0
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;RedBoot&quot;
0x000000040000-0x000000140000 : &quot;vmlinux&quot;
0x000000140000-0x000000740000 : &quot;filesystem&quot;
0x0000007e0000-0x0000007ef000 : &quot;FIS directory&quot;
0x0000007ef000-0x0000007f0000 : &quot;RedBoot config&quot;
0x0000007f0000-0x000000800000 : &quot;boardconfig&quot;</code></pre></div><p>new d-link firmware have partitions specified in cmdline</p><br /><p>but lspci shows bad (?) devid 168c:<strong>ff1d</strong> (and what is non-vga device?)<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# lspci -vnn
00:00.0 Non-VGA unclassified device [0000]: Device [0700:1107] (rev 01)
    Flags: bus master, fast Back2Back, 66MHz, medium devsel, latency 0
    Memory at &lt;unassigned&gt; (32-bit, prefetchable)
    I/O ports at &lt;unassigned&gt; [disabled]
    Capabilities: [dc] Power Management version 2

00:11.0 Ethernet controller [0200]: Atheros Communications, Inc. Device [168c:ff1d] (rev 01)
    Subsystem: Atheros Communications, Inc. Device [168c:ee1c]
    Flags: 66MHz, medium devsel, IRQ 48
    Memory at 10000000 (32-bit, non-prefetchable) [size=64K]
    Capabilities: [40] #80 [0000]

00:12.0 Ethernet controller [0200]: Atheros Communications, Inc. Device [168c:ff1d] (rev 01)
    Subsystem: Atheros Communications, Inc. Device [168c:ee1c]
    Flags: 66MHz, medium devsel, IRQ 49
    Memory at 10010000 (32-bit, non-prefetchable) [size=64K]
    Capabilities: [40] #80 [0000]</code></pre></div><p>/proc/pci from original firmware:<br /></p><div class="codebox"><pre><code># cat /proc/pci
PCI devices found:
  Bus  0, device   0, function  0:
    Class 0280: PCI device 168c:0029 (rev 1).
      IRQ 48.
      Master Capable.  Latency=168.  
      Non-prefetchable 32 bit memory at 0x10000000 [0x1000ffff].
  Bus  0, device   1, function  0:
    Class 0280: PCI device 168c:0029 (rev 1).
      IRQ 49.
      Master Capable.  Latency=168.  
      Non-prefetchable 32 bit memory at 0x10010000 [0x1001ffff].</code></pre></div><p>lan/wan is not working, maybe rtl8366sr switch need configuration (no phy detected)</p><p>rtl8366sr driver sources for 2.4/2.6 kernel are accessible in Asus or Belkin GPL package (ralink soc gpio)</p><br /><p>original u-boot is broken - access to console disabled, tftpboot is not working (only arp message reveived), u-boot console is running only if crc is broken (automatically)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95765">
				<div class="post-metadata">
					<div class="post-num">Post #341</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						12 Oct 2009, 17:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi -</p><div class="quotebox"><cite>ValXdater wrote:</cite><blockquote><p>i have partial success with DIR-825 rev B1<br />--- 8&lt; --- [snip]</p></blockquote></div><p>Any progress on this?</p><p>Regards,<br />-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95767">
				<div class="post-metadata">
					<div class="post-num">Post #342</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						12 Oct 2009, 17:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>olecam wrote:</cite><blockquote><div class="quotebox"><cite>ValXdater wrote:</cite><blockquote><p>i have partial success with DIR-825 rev B1<br />--- 8&lt; --- [snip]</p></blockquote></div><p>Any progress on this?</p></blockquote></div><p>no <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97839">
				<div class="post-metadata">
					<div class="post-num">Post #343</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						23 Nov 2009, 21:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>olecam wrote:</cite><blockquote><p>Hi -<br />Any progress on this?</p><p>Regards,<br />-- <br />Olivier</p></blockquote></div><p>better result with <a href="https://dev.openwrt.org/ticket/6171">this</a> PCI init workaround</p><div class="codebox"><pre><code>Linux version 2.6.30.9 (valxdater@vx) (collect2: ld returned 1 exit status) #1 Thu Nov 19 16:55:28 CET 2009
prom: fw_arg0=00000002, fw_arg1=a3f77fb0, fw_arg2=a3f783c0, fw_arg3=00000008
MyLoader: sysp=aaaa5554, boardp=aaaa5554, parts=aaaa5554
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
On node 0 totalpages: 16384
free_area_init_node: node 0, pgdat 802ad870, node_mem_map 81000000
  Normal zone: 128 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 16256 pages, LIFO batch:3
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=DIR825B1
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
NR_IRQS:56
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 60816k/65536k available (1934k kernel code, 4644k reserved, 432k data, 1220k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
Mount-cache hash table entries: 512
net_namespace: 528 bytes
NET: Registered protocol family 16
MIPS: machine is D-Link DIR825B1
ar71xx: using random MAC address for eth0
ar71xx: using random MAC address for eth1
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:00.0: reg 10 32bit mmio: [0x000000-0xfffffff]
pci 0000:00:00.0: reg 14 io port: [0x00-0xff]
pci 0000:00:00.0: supports D1 D2
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:00.0: PME# disabled
pci 0000:00:11.0: reg 10 32bit mmio: [0x10000000-0x1000ffff]
pci 0000:00:11.0: PME# supported from D0 D3hot
pci 0000:00:11.0: PME# disabled
pci 0000:00:12.0: reg 10 32bit mmio: [0x10010000-0x1001ffff]
pci 0000:00:12.0: PME# supported from D0 D3hot
pci 0000:00:12.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:11.0
PCI: mapping irq 49 to pin1@0000:00:12.0
NET: Registered protocol family 2
Switched to high resolution mode on CPU 0
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ÂŠ 2001-2006 Red Hat, Inc.
yaffs Nov 19 2009 16:51:17 Installing.
msgmni has been set to 118
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: connected to 4 PHYs
eth1: Atheros AG71xx at 0xba000000, irq 5
eth1: connected to PHY at 0:04 [uid=0000ffff, driver=Generic PHY]
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: s25sl064a (8192 Kbytes)
spi0.0: searching for MyLoader partition table at offset 0x10000
spi0.0: searching for MyLoader partition table at offset 0x20000
spi0.0: searching for MyLoader partition table at offset 0x30000
spi0.0: searching for MyLoader partition table at offset 0x40000
spi0.0: no MyLoader partition table found
Searching for RedBoot partition table in spi0.0 at offset 0x7e0000
6 RedBoot partitions found on MTD device spi0.0
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;RedBoot&quot;
0x000000040000-0x000000140000 : &quot;vmlinux&quot;
0x000000140000-0x000000740000 : &quot;filesystem&quot;
0x0000007e0000-0x0000007ef000 : &quot;FIS directory&quot;
0x0000007ef000-0x0000007f0000 : &quot;RedBoot config&quot;
0x0000007f0000-0x000000800000 : &quot;boardconfig&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=25)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 1220k freed
Registered led device: dir825b1:blue:usb
Registered led device: dir825b1:orange:power
Registered led device: dir825b1:blue:power
Registered led device: dir825b1:blue:powersafe
Registered led device: dir825b1:orange:planet
Registered led device: dir825b1:blue:planet
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
ar71xx: pll_reg 0xb8050010: 0x110000
eth0: link up (1000Mbps/Full duplex)
eth0: link down
ar71xx: pll_reg 0xb8050010: 0x110000
eth0: link up (1000Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
cfg80211: Using static regulatory domain info
cfg80211: Regulatory domain: US
        (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
        (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
        (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)
cfg80211: Calling CRDA for country: US
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
ath: Invalid EEPROM Magic. Endianness mismatch.
ath: Unable to initialize hardware; initialization status: -22
ath9k 0000:00:11.0: failed to initialize device
ath9k: probe of 0000:00:11.0 failed with error -22
ath: Invalid EEPROM Magic. Endianness mismatch.
ath: Unable to initialize hardware; initialization status: -22
ath9k 0000:00:12.0: failed to initialize device
ath9k: probe of 0000:00:12.0 failed with error -22
ip_tables: (C) 2000-2006 Netfilter Core Team
Driver &#039;sd&#039; needs updating - please use bus_type methods
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR71xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
ar71xx-ohci ar71xx-ohci: Atheros AR71xx built-in OHCI controller
ar71xx-ohci ar71xx-ohci: new USB bus registered, assigned bus number 2
ar71xx-ohci ar71xx-ohci: irq 14, io mem 0x1c000000
usb usb2: configuration #1 chosen from 1 choice
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 2 ports detected
ar71xx: pll_reg 0xb8050014: 0x991099
eth1: link up (10Mbps/Half duplex)</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/bus/pci/devices
0000    07001107        0                      8                       1       0
0088    168c0029        30              10000000                       0       0
0090    168c0029        31              10010000                       0       0
root@OpenWrt:/#</code></pre></div><p>edit: now wifi is working (with broken mac &amp; cal data?)<br /></p><div class="codebox"><pre><code>cfg80211: Calling CRDA for country: US
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
phy0: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy0::radio
Registered led device: ath9k-phy0::assoc
Registered led device: ath9k-phy0::tx
Registered led device: ath9k-phy0::rx
phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=48
ath: EEPROM regdomain: 0x0
ath: EEPROM indicates default country code should be used
ath: doing EEPROM country-&gt;regdmn map search
ath: country maps to regdmn code: 0x3a
ath: Country alpha2 being used: US
ath: Regpair used: 0x3a
cfg80211: Calling CRDA for country: US
phy1: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy1::radio
Registered led device: ath9k-phy1::assoc
Registered led device: ath9k-phy1::tx
Registered led device: ath9k-phy1::rx
phy1: Atheros AR9280 Rev:2 mem=0xb0010000, irq=49</code></pre></div><div class="codebox"><pre><code>Wiphy phy1
        Band 1:
                HT capabilities: 0x104e
                        * 20/40 MHz operation
                        * SM PS disabled
                        * 40 MHz short GI
                        * max A-MSDU len 3839
                        * DSSS/CCK 40 MHz
                HT A-MPDU factor: 0x0003 (65535 bytes)
                HT A-MPDU density: 0x0006 (8 usec)
                HT MCS set: ff ff 00 00 00 00 00 00 00 00 00 00 01 00 00 00
                HT TX/RX MCS rate indexes supported:
                        MCS index 0
                        MCS index 1
                        MCS index 2
                        MCS index 3
                        MCS index 4
                        MCS index 5
                        MCS index 6
                        MCS index 7
                        MCS index 8
                        MCS index 9
                        MCS index 10
                        MCS index 11
                        MCS index 12
                        MCS index 13
                        MCS index 14
                        MCS index 15
                Frequencies:
                        * 2412 MHz [1] (27.0 dBm)
                        * 2417 MHz [2] (27.0 dBm)
                        * 2422 MHz [3] (27.0 dBm)
                        * 2427 MHz [4] (27.0 dBm)
                        * 2432 MHz [5] (27.0 dBm)
                        * 2437 MHz [6] (27.0 dBm)
                        * 2442 MHz [7] (27.0 dBm)
                        * 2447 MHz [8] (27.0 dBm)
                        * 2452 MHz [9] (27.0 dBm)
                        * 2457 MHz [10] (27.0 dBm)
                        * 2462 MHz [11] (27.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
                Bitrates (non-HT):
                        * 1.0 Mbps
                        * 2.0 Mbps (short preamble supported)
                        * 5.5 Mbps (short preamble supported)
                        * 11.0 Mbps (short preamble supported)
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        Band 2:
                HT capabilities: 0x104e
                        * 20/40 MHz operation
                        * SM PS disabled
                        * 40 MHz short GI
                        * max A-MSDU len 3839
                        * DSSS/CCK 40 MHz
                HT A-MPDU factor: 0x0003 (65535 bytes)
                HT A-MPDU density: 0x0006 (8 usec)
                HT MCS set: ff ff 00 00 00 00 00 00 00 00 00 00 01 00 00 00
                HT TX/RX MCS rate indexes supported:
                        MCS index 0
                        MCS index 1
                        MCS index 2
                        MCS index 3
                        MCS index 4
                        MCS index 5
                        MCS index 6
                        MCS index 7
                        MCS index 8
                        MCS index 9
                        MCS index 10
                        MCS index 11
                        MCS index 12
                        MCS index 13
                        MCS index 14
                        MCS index 15
                Frequencies:
                        * 5180 MHz [36] (23.0 dBm)
                        * 5200 MHz [40] (23.0 dBm)
                        * 5220 MHz [44] (23.0 dBm)
                        * 5240 MHz [48] (23.0 dBm)
                        * 5260 MHz [52] (23.0 dBm) (passive scanning, no IBSS, )
                        * 5280 MHz [56] (23.0 dBm) (passive scanning, no IBSS, )
                        * 5300 MHz [60] (23.0 dBm) (passive scanning, no IBSS, )
                        * 5320 MHz [64] (23.0 dBm) (passive scanning, no IBSS, )
                        * 5500 MHz [100] (disabled)
                        * 5520 MHz [104] (disabled)
                        * 5540 MHz [108] (disabled)
                        * 5560 MHz [112] (disabled)
                        * 5580 MHz [116] (disabled)
                        * 5600 MHz [120] (disabled)
                        * 5620 MHz [124] (disabled)
                        * 5640 MHz [128] (disabled)
                        * 5660 MHz [132] (disabled)
                        * 5680 MHz [136] (disabled)
                        * 5700 MHz [140] (disabled)
                        * 5745 MHz [149] (30.0 dBm)
                        * 5765 MHz [153] (30.0 dBm)
                        * 5785 MHz [157] (30.0 dBm)
                        * 5805 MHz [161] (30.0 dBm)
                        * 5825 MHz [165] (30.0 dBm)
                Bitrates (non-HT):
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        max # scan SSIDs: 4
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point
Wiphy phy0
        Band 1:
                HT capabilities: 0x104e
                        * 20/40 MHz operation
                        * SM PS disabled
                        * 40 MHz short GI
                        * max A-MSDU len 3839
                        * DSSS/CCK 40 MHz
                HT A-MPDU factor: 0x0003 (65535 bytes)
                HT A-MPDU density: 0x0006 (8 usec)
                HT MCS set: ff ff 00 00 00 00 00 00 00 00 00 00 01 00 00 00
                HT TX/RX MCS rate indexes supported:
                        MCS index 0
                        MCS index 1
                        MCS index 2
                        MCS index 3
                        MCS index 4
                        MCS index 5
                        MCS index 6
                        MCS index 7
                        MCS index 8
                        MCS index 9
                        MCS index 10
                        MCS index 11
                        MCS index 12
                        MCS index 13
                        MCS index 14
                        MCS index 15
                Frequencies:
                        * 2412 MHz [1] (27.0 dBm)
                        * 2417 MHz [2] (27.0 dBm)
                        * 2422 MHz [3] (27.0 dBm)
                        * 2427 MHz [4] (27.0 dBm)
                        * 2432 MHz [5] (27.0 dBm)
                        * 2437 MHz [6] (27.0 dBm)
                        * 2442 MHz [7] (27.0 dBm)
                        * 2447 MHz [8] (27.0 dBm)
                        * 2452 MHz [9] (27.0 dBm)
                        * 2457 MHz [10] (27.0 dBm)
                        * 2462 MHz [11] (27.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
                Bitrates (non-HT):
                        * 1.0 Mbps
                        * 2.0 Mbps (short preamble supported)
                        * 5.5 Mbps (short preamble supported)
                        * 11.0 Mbps (short preamble supported)
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        max # scan SSIDs: 4
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point</code></pre></div>											<p class="post-edited">(Last edited by <strong>ValXdater</strong> on 23 Nov 2009, 23:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97856">
				<div class="post-metadata">
					<div class="post-num">Post #344</div>
					<div class="post-author">whiskas</div>
					<div class="post-datetime">
						24 Nov 2009, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i guess this design is quiet equal to netgears wndr3700. Try reading the mac-address with this workaround: <a href="https://dev.openwrt.org/ticket/6172">https://dev.openwrt.org/ticket/6172</a>.</p><p>If your addresses aren&#039;t the same, take a look at the flashdump in my linked post. a55a is a &quot;magic number&quot; and marks the beginning of a caldata-block. Right at the beginning you can see 3 mac-addresses, where 1 and 3 are the valid ones for the wifi-interfaces.</p><br /><p>edit:<br />You also should take a look at the special wndr3700_pci_init function here: <a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/files/arch/mips/ar71xx/mach-wndr3700.c">https://dev.openwrt.org/browser/trunk/t … wndr3700.c</a></p>											<p class="post-edited">(Last edited by <strong>whiskas</strong> on 24 Nov 2009, 14:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97864">
				<div class="post-metadata">
					<div class="post-num">Post #345</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						24 Nov 2009, 18:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>whiskas wrote:</cite><blockquote><p>Hi, i guess this design is quiet equal to netgears wndr3700. Try reading the mac-address with this workaround: <a href="https://dev.openwrt.org/ticket/6172">https://dev.openwrt.org/ticket/6172</a>.</p><p>If your addresses aren&#039;t the same, take a look at the flashdump in my linked post. a55a is a &quot;magic number&quot; and marks the beginning of a caldata-block. Right at the beginning you can see 3 mac-addresses, where 1 and 3 are the valid ones for the wifi-interfaces.</p><br /><p>edit:<br />You also should take a look at the special wndr3700_pci_init function here: <a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/files/arch/mips/ar71xx/mach-wndr3700.c">https://dev.openwrt.org/browser/trunk/t … wndr3700.c</a></p></blockquote></div><p>my solution is based on your code</p><p>calibration location was stolen from dlink GPL code (0xbf661000 and 0xbf665000) and pattern 0xA55A fits, but no mac address can be found in this location and in any detected redboot (wrong) partitions (i can&#039;t access direct to whole flash)</p><p>in flash is redboot partition fis &amp; redboot config<br /></p><div class="codebox"><pre><code>dev:    size   erasesize  name
mtd0: 00040000 00010000 &quot;RedBoot&quot;
mtd1: 00100000 00010000 &quot;vmlinux&quot;
mtd2: 00600000 00010000 &quot;filesystem&quot;
mtd3: 0000f000 0000f000 &quot;FIS directory&quot;
mtd4: 00001000 00001000 &quot;RedBoot config&quot;
mtd5: 00010000 00010000 &quot;boardconfig&quot;</code></pre></div><p>but dlink firmware is using kernel cmdline based mtd layout and loader is u-boot<br /></p><div class="codebox"><pre><code>256k(uboot),64k(Config),1024k(vmlinux),5184k(rootfs),64k(caldata)</code></pre></div><p>your MAC workaround is not working for this device</p>											<p class="post-edited">(Last edited by <strong>ValXdater</strong> on 24 Nov 2009, 18:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98056">
				<div class="post-metadata">
					<div class="post-num">Post #346</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						29 Nov 2009, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>lan switch &amp; wan is working too (with good mac), thx. <a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/files/arch/mips/ar71xx/mach-wndr3700.c">gabor</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98130">
				<div class="post-metadata">
					<div class="post-num">Post #347</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						1 Dec 2009, 20:55					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://dev.openwrt.org/ticket/6268">DIR-825 B1 support patch</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98407">
				<div class="post-metadata">
					<div class="post-num">Post #348</div>
					<div class="post-author">ea_umea</div>
					<div class="post-datetime">
						7 Dec 2009, 03:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ValXdater wrote:</cite><blockquote><p><a href="https://dev.openwrt.org/ticket/6268">DIR-825 B1 support patch</a></p></blockquote></div><p>Tried this a couple of minutes ago and it looked promising but I did not get the WAN to work. Compared with your dmesg above and found a difference:<br /></p><div class="codebox"><pre><code>eth1: connected to 2 PHYs</code></pre></div><p>Could this be why WAN did not work? Is there a workaround somehow? Can it be that I use an EU unit instead of NA?</p><p>Would really be awesome if I could change from D-Link firmware to this one. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98414">
				<div class="post-metadata">
					<div class="post-num">Post #349</div>
					<div class="post-author">ValXdater</div>
					<div class="post-datetime">
						7 Dec 2009, 04:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ea_umea wrote:</cite><blockquote><div class="quotebox"><cite>ValXdater wrote:</cite><blockquote><p><a href="https://dev.openwrt.org/ticket/6268">DIR-825 B1 support patch</a></p></blockquote></div><p>Tried this a couple of minutes ago and it looked promising but I did not get the WAN to work. Compared with your dmesg above and found a difference:<br /></p><div class="codebox"><pre><code>eth1: connected to 2 PHYs</code></pre></div><p>Could this be why WAN did not work? Is there a workaround somehow? Can it be that I use an EU unit instead of NA?</p><p>Would really be awesome if I could change from D-Link firmware to this one. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>wan is working for me, only wan link led not<br /></p><div class="codebox"><pre><code>eth1      Link encap:Ethernet  HWaddr 00:24:01:XX:XX:XX
          inet addr:10.X.X.X  Bcast:10.X.X.X  Mask:255.255.255.192
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:88 errors:0 dropped:0 overruns:0 frame:0
          TX packets:22 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:6205 (6.0 KiB)  TX bytes:2870 (2.8 KiB)
          Interrupt:5</code></pre></div><p>2 PHYs is workaround, with phy mask only 0x80 or 0x40 is wan broken</p><br /><p>new dmesg without <a href="https://dev.openwrt.org/changeset/18622">gabors cleanups</a><br /></p><div class="codebox"><pre><code>Linux version 2.6.30.9 (valxdater@vx) (gcc version 4.3.3 (GCC) ) #2 Thu Dec 3 23:37:27 CET 2009
prom: fw_arg0=00000007, fw_arg1=a3f77fb0, fw_arg2=a3f78460, fw_arg3=00000008
MyLoader: sysp=aaaa5554, boardp=aaaa5554, parts=aaaa5554
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR7161 rev 2, CPU:680.000 MHz, AHB:170.000 MHz, DDR:340.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
On node 0 totalpages: 16384
free_area_init_node: node 0, pgdat 802d1ae0, node_mem_map 81000000
  Normal zone: 128 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 16256 pages, LIFO batch:3
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=DIR825B1 mtdparts=spi0.0:256k(uboot)ro,64k(config)ro,1024k(kernel),5184k(rootfs),64k(caldata)ro,6208k@0x50000(firmware)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
NR_IRQS:56
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 61748k/65536k available (1951k kernel code, 3712k reserved, 559k data, 136k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 452.19 BogoMIPS (lpj=2260992)
Mount-cache hash table entries: 512
net_namespace: 528 bytes
NET: Registered protocol family 16
MIPS: machine is D-Link DIR825B1
registering PCI controller with io_map_base unset
bio: create slab &lt;bio-0&gt; at 0
pci 0000:00:00.0: reg 10 32bit mmio: [0x000000-0xfffffff]
pci 0000:00:00.0: reg 14 io port: [0x00-0xff]
pci 0000:00:00.0: supports D1 D2
pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot
pci 0000:00:00.0: PME# disabled
PCI: fixup device 0000:00:11.0
pci 0000:00:11.0: reg 10 32bit mmio: [0x000000-0x00ffff]
pci 0000:00:11.0: PME# supported from D0 D3hot
pci 0000:00:11.0: PME# disabled
PCI: fixup device 0000:00:12.0
pci 0000:00:12.0: reg 10 32bit mmio: [0x000000-0x00ffff]
pci 0000:00:12.0: PME# supported from D0 D3hot
pci 0000:00:12.0: PME# disabled
PCI: mapping irq 48 to pin1@0000:00:11.0
PCI: mapping irq 49 to pin1@0000:00:12.0
Switched to high resolution mode on CPU 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ÂŠ 2001-2006 Red Hat, Inc.
yaffs Dec  1 2009 19:22:16 Installing.
msgmni has been set to 120
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: connected to 4 PHYs
eth1: Atheros AG71xx at 0xba000000, irq 5
eth1: connected to 2 PHYs
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: s25sl064a (8192 Kbytes)
6 cmdlinepart partitions found on MTD device spi0.0
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;uboot&quot;
0x000000040000-0x000000050000 : &quot;config&quot;
0x000000050000-0x000000150000 : &quot;kernel&quot;
0x000000150000-0x000000660000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2F0000, len=370000
0x0000002f0000-0x000000660000 : &quot;rootfs_data&quot;
0x000000660000-0x000000670000 : &quot;caldata&quot;
0x000000050000-0x000000660000 : &quot;firmware&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=25)
TCP westwood registered
NET: Registered protocol family 17
Bridge firewalling registered
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
Registered led device: dir825b1:blue:usb
Registered led device: dir825b1:orange:power
Registered led device: dir825b1:blue:power
Registered led device: dir825b1:blue:powersave
Registered led device: dir825b1:orange:planet
Registered led device: dir825b1:blue:planet
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
ar71xx: pll_reg 0xb8050010: 0x11110000
eth0: link up (1000Mbps/Full duplex)
eth0: link down
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
ar71xx: pll_reg 0xb8050010: 0x11110000
eth0: link up (1000Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
ar71xx: pll_reg 0xb8050014: 0x11110000
eth1: link up (1000Mbps/Full duplex)
cfg80211: Using static regulatory domain info
cfg80211: Regulatory domain: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
    (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
    (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
cfg80211: Calling CRDA for country: US
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
PCI: Enabling device 0000:00:11.0 (0000 -&gt; 0002)
phy0: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy0::radio
Registered led device: ath9k-phy0::assoc
Registered led device: ath9k-phy0::tx
Registered led device: ath9k-phy0::rx
phy0: Atheros AR9280 Rev:2 mem=0xb0000000, irq=48
PCI: Enabling device 0000:00:12.0 (0000 -&gt; 0002)
phy1: Selected rate control algorithm &#039;ath9k_rate_control&#039;
Registered led device: ath9k-phy1::radio
Registered led device: ath9k-phy1::assoc
Registered led device: ath9k-phy1::tx
Registered led device: ath9k-phy1::rx
phy1: Atheros AR9280 Rev:2 mem=0xb0010000, irq=49
ip_tables: (C) 2000-2006 Netfilter Core Team
Driver &#039;sd&#039; needs updating - please use bus_type methods
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR71xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 2 ports detected
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
Ebtables v2.0 registered
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
ar71xx-ohci ar71xx-ohci: Atheros AR71xx built-in OHCI controller
ar71xx-ohci ar71xx-ohci: new USB bus registered, assigned bus number 2
ar71xx-ohci ar71xx-ohci: irq 14, io mem 0x1c000000
usb usb2: configuration #1 chosen from 1 choice
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 2 ports detected
usbcore: registered new interface driver usbserial
USB Serial support registered for generic
usbcore: registered new interface driver usbserial_generic
usbserial: USB Serial Driver core
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
USB Serial support registered for FTDI USB Serial Device
usbcore: registered new interface driver ftdi_sio
ftdi_sio: v1.4.3:USB FTDI Serial Converters Driver
ar71xx-wdt: enabling watchdog timer</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98494">
				<div class="post-metadata">
					<div class="post-num">Post #350</div>
					<div class="post-author">ea_umea</div>
					<div class="post-datetime">
						8 Dec 2009, 20:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ValXdater wrote:</cite><blockquote><p>wan is working for me, only wan link led not<br /></p><div class="codebox"><pre><code>eth1      Link encap:Ethernet  HWaddr 00:24:01:XX:XX:XX
          inet addr:10.X.X.X  Bcast:10.X.X.X  Mask:255.255.255.192
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:88 errors:0 dropped:0 overruns:0 frame:0
          TX packets:22 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:6205 (6.0 KiB)  TX bytes:2870 (2.8 KiB)
          Interrupt:5</code></pre></div><p>2 PHYs is workaround, with phy mask only 0x80 or 0x40 is wan broken</p><br /><p>new dmesg without <a href="https://dev.openwrt.org/changeset/18622">gabors cleanups</a></p></blockquote></div><p>Ok, made some more testing and got the WAN-port to get an IP from DHCP server by putting it behind another router that has gigabit support on the LAN ports.. Seems that the link always is set to 1000Mbps/Full duplex and that is why it did not work for me when i kept the WAN port connected as I have it with D-Link firmware directly to the network socket in the wall(100Mbps). Is there an easy way to change the link speed to 100Mbps in code and build new image or can it be changed by some other tool that can be built into image? (tried mii-tool and ethtool, non worked...)</p><p>Finally, can it be related to this somehow?<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=98260#p98260">https://forum.openwrt.org/viewtopic.php … 260#p98260</a></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 14 of 15</div><nav><ul><li><a href="viewtopic.php%3Fid=14765&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=14765&amp;p=13.html">13</a></li><li class="pagination-current"><span>14</span></li><li><a href="viewtopic.php%3Fid=14765&amp;p=15.html">15</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>