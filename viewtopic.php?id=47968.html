<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Using several USB connections and USB 3G modem E220</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p220629">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">tovis</div>
					<div class="post-datetime">
						22 Dec 2013, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>I have planning to use two or more pl2303 based serial adapters and a HUAWEI E220 modem, as a backup, on demand internet connection. I have utilize TP-LINK WR1043ND with latest firmware: attitude_adjustment release 12.09 revisiion r336088 -&nbsp; as a router it is working fine!</p><p>The first problem is to have several things working through USB connection. I have plug a four port USB HUB with dedicated power supply. Now I have E220 modem and two pl2303. I&#039;m still on plain OpwenWrt - no additional scripts.<br />After reboot, I have see only pl2303 and two devices USB0 and USB1 no signs of modem.<br />By hand, I have seen all things, I have remove all equipments (exclude HUB) and reboot, after I have plugged E220 - nothing was happened. What is excited me, that usbserial and pl2303 modules are loaded, even no equipments are plugged?<br />For now I have removed pl2303 and usbserial, run #huaweiAktBbo and isnmod usbserial with vendor and product id for E220 - my modem was go up, devices USB0, USB1 and USB2 are created.&nbsp; After this I have plug in serial ports and they have correct devices USB3 and USB4 - I have checked them using minicom with a PC port - working fine <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />What should I do to get my USB equipment setup for this level, after reboot or power on?<br />I have using a really good article <a href="http://josefsson.org/openwrt/dongle.html">http://josefsson.org/openwrt/dongle.html</a> - thanks Simon.&nbsp; Unfortunately this document does not use other serial ports attached to router<br />I have see two directories: /etc/modules-boot.d and /etc/modules.d it is clear that here I can manage appropriate sequence for ubsserial, but before I need to run huaweiAktBbo to have my modem. What is the sequence, for boot /etc/modules.d or /etc/init.d ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220654">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tovis</div>
					<div class="post-datetime">
						22 Dec 2013, 21:16					</div>
				</div>
				<div class="post-content content">
					<p>Step toward. I have used script made by Simon and I have see E220 and two pl2303 USB serial.<br />If I use to reboot - configuration is stay good, but if I simple unplug power, the system does not recognize modem, seem as huaweiAktBbo does not run at all. But if I reboot from this state, I have right configuration again - strange.<br />What could be the differenc in two scenario? Of course I can handle situation, using a simple script which does not recognize modem - reboot the system. - but this is really dangerouse, it could go to infinite loop, and it could not stopped.<br />What cause this instability?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220703">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						23 Dec 2013, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>You are following some outdated instructions which btw is for Broadcom and not for Atheros.<br />Get OpenWRT&#039;s&nbsp; usbmode package, it will handle the modem switching.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>