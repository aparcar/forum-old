<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [How To] Home Automation - Relay Board controlled from Web page or SMS</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 17 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=54722&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=54722&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=54722&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p259144">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Dec 2014, 08:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Only triggerhappy package for support keyboard?</p></blockquote></div><p><a href="http://wiki.openwrt.org/doc/howto/hardware.button">http://wiki.openwrt.org/doc/howto/hardware.button</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259158">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						30 Dec 2014, 10:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>Only triggerhappy package for support keyboard?</p></blockquote></div><p><a href="http://wiki.openwrt.org/doc/howto/hardware.button">http://wiki.openwrt.org/doc/howto/hardware.button</a></p></blockquote></div><p>thanks! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259170">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Dec 2014, 13:00					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just tested another interesting feature: &quot;Commands sent from phone&quot; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ve installed Asterisk 1.8 on my router board and tested the &quot;System&quot; function of Asterisk that enables it to run system commands directly from a dialplan, it works great on OpenWRT!</p><p>The idea is to create an IVR that answers the Voip call, than asks the caller to dial the login password and if the password is correct asks the caller to choose an option from a list, example:</p><p><em>&quot;Welcome to the home automation server, please enter your password followed by the # key&quot;<br />&quot;Thank you&quot;<br />&quot;Press 1 to activate channel 1&quot;<br />&quot;Press 2 to deactivate channel 1&quot;<br />&quot;Press 3 to activate channel 2&quot;</em><br />...</p><p>I don&#039;t have enough time at the moment to fully develop this feature, but if anyone is willing to help ... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 30 Dec 2014, 13:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259204">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						30 Dec 2014, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>i have bug, i have to restart triggerhappy after type 2 button.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259216">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Dec 2014, 19:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>i have bug, i have to restart triggerhappy after type 2 button.</p></blockquote></div><p>Is your triggerhappy configuration file correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259226">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						30 Dec 2014, 20:30					</div>
				</div>
				<div class="post-content content">
					<p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda.jpg" /></span><br />Vodafone Station (a.k.a. Huawei EchoLife HG553) Home Automation Server.</p><p>The led channel status indicator on the V.S. (CH1-3) is pink (red+blue) for &quot;Off&quot; state and red for &quot;On&quot; state.</p><p>The other router on the left (vertical) is a Pirelli Voipgate ADSL router, hacked with Eutelia firmware to use it as a Voip FXS gateway (2 analog phone RJ11 ports) connected to the Vodafone Station (Asterisk 1.8 also installed on V.S.)</p><p>The small router with the keypad and multi-led lighted USB Hub <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> that you see on the upper right side is another project of mine:<br />Openwrt MP3 Player and Internet Radio wi-fi stereo <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p><strong>All components I used are TRASHWARE that means zero cost!</strong> <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br /><span class="postimg"><img src="http://forum.49v.com/styles/prosilver/imageset/site_logo.gif" alt="http://forum.49v.com/styles/prosilver/imageset/site_logo.gif" /></span></p><p>Another particularity of my OpenWRT projects:<br />to amplify the audio output I designed a trashware Hi-Fi stereo&nbsp; vacuum tube amplifier using old television&#039;s used tubes <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span class="postimg"><img src="http://i44.servimg.com/u/f44/17/14/70/27/p1030721.jpg" alt="http://i44.servimg.com/u/f44/17/14/70/27/p1030721.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 30 Dec 2014, 21:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259260">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						31 Dec 2014, 03:02					</div>
				</div>
				<div class="post-content content">
					<p>I wish i have many devices as you have <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>My config file<br /></p><div class="codebox"><pre><code># This is an example configuration for the triggerhappy daemon (thd)
# please note that every file to be processed must end in &quot;.conf&quot;
#
# To view a list of supported event codes, use &quot;thd --listevents&quot; or
# &quot;thd --dump /dev/input/event*&quot;
#
# Format:
# &lt;eventcode&gt; &lt;value&gt; &lt;command&gt;
#
# values for key events are 1 (pressed), 0 (released) or 2 (held)
#
## control an mpd instance
# KEY_NEXTSONG          1       /usr/bin/mpc next
# KEY_PREVSONG          1       /usr/bin/mpc prev
KEY_KP1 /bin/sh /www/on_one.sh
KEY_KP2 /bin/sh /www/off_one.sh
KEY_KP3 /bin/sh /www/on_two.sh
KEY_KP4 /bin/sh /www/off_two.sh
KEY_KP5 /bin/sh /www/on_three.sh
KEY_KP6 /bin/sh /www/off_three.sh
KEY_KP7 /bin/sh /www/on_four.sh
KEY_KP8 /bin/sh /www/off_four.sh</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259291">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						31 Dec 2014, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>Try</p><p>KEY_KP1 1 /bin/sh /www/on_one.sh &amp;<br />KEY_KP2 1 /bin/sh /www/off_one.sh &amp;<br />KEY_KP3 1 /bin/sh /www/on_two.sh &amp;<br />KEY_KP4 1 /bin/sh /www/off_two.sh &amp;<br />KEY_KP5 1 /bin/sh /www/on_three.sh &amp;<br />KEY_KP6 1 /bin/sh /www/off_three.sh &amp;<br />KEY_KP7 1 /bin/sh /www/on_four.sh &amp;<br />KEY_KP8 1 /bin/sh /www/off_four.sh &amp;</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 31 Dec 2014, 11:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259324">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						31 Dec 2014, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>In addition to the USB keyboard, I added a three channels digital input (on/off) just by using an old USB mouse <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>In any mouse there are three button switches (SW1-2-3 in the picture) that triggerhappy can handle.</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/mouse.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/mouse.jpg" /></span></p><p>Triggerhappy discovering function:</p><p>root@OpenWrt:~# <strong>thd --dump /dev/input/event*</strong></p><p>EV_KEY&nbsp; &nbsp; BTN_LEFT&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event0<br /># BTN_LEFT&nbsp; &nbsp; 1&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; BTN_LEFT&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event0<br /># BTN_LEFT&nbsp; &nbsp; 0&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; BTN_MIDDLE&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event0<br /># BTN_MIDDLE&nbsp; &nbsp; 1&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; BTN_MIDDLE&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event0<br /># BTN_MIDDLE&nbsp; &nbsp; 0&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; BTN_RIGHT&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event0<br /># BTN_RIGHT&nbsp; &nbsp; 1&nbsp; &nbsp; command<br />EV_KEY&nbsp; &nbsp; BTN_RIGHT&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event0<br /># BTN_RIGHT&nbsp; &nbsp; 0&nbsp; &nbsp; command</p><p># values for key events are 1 (pressed), 0 (released)</p><p>than to associate a command to each button when is <span class="bbu">pressed</span>, add the following lines to your triggerhappy configuration file (/etc/triggerhappy/triggers.d/example.conf):<br /><em><span style="color: #0000FF"><br />BTN_LEFT 1 /path/command &amp;<br />BTN_MIDDLE 1 /path/command &amp;<br />BTN_RIGHT 1 /path/command &amp;<br /></span></em></p><p>or to associate a command when the button is <span class="bbu">released</span>:</p><p><em><span style="color: #0000FF">BTN_LEFT 0 /path/command &amp;<br />...</span></em></p><br /><p>This is a generic schematic of a USB mouse:</p><p><span class="postimg"><img src="http://www.eehomepage.com/reports/20080214_teardown_pics/blockdiagram.jpg" alt="http://www.eehomepage.com/reports/20080214_teardown_pics/blockdiagram.jpg" /></span></p><p>Each button switch needs to be grounded to give &quot;1&quot; level for tryggerhappy, you can connect in parallel to the switch a transistor/mosfet, a relay or an optocoupler to perform this function.</p><p>P.S.: Triggerhappy does not handle the rotary encoder of the mouse, but Openwrt does, if you want to see what openwrt sees when the rotary encoder of the mouse is turned use this command:<br /><strong>cat /dev/input/event0 |hexdump</strong></p><p>You&#039;ll get something like this:</p><p>Clockwise rotation:</p><p>root@OpenWrt:~# cat /dev/input/event0 |hexdump<br />0000000 54a4 185d 0007 1259 0002 0008 0000 0001<br />0000010 54a4 185d 0007 1267 0000 0000 0000 0000<br />0000020 54a4 185e 0000 3c9c 0002 0008 0000 0001<br />0000030 54a4 185e 0000 3caa 0000 0000 0000 0000<br />0000040 54a4 185e 0006 95d2 0002 0008 0000 0001<br />0000050 54a4 185e 0006 95e0 0000 0000 0000 0000<br />0000060 54a4 185e 0007 eda1 0002 0008 0000 0001<br />0000070 54a4 185e 0007 edae 0000 0000 0000 0000<br />0000080 54a4 185e 0008 a911 0002 0008 0000 0001<br />0000090 54a4 185e 0008 a91e 0000 0000 0000 0000<br />00000a0 54a4 185e 000a 00f2 0002 0008 0000 0001<br />00000b0 54a4 185e 000a 0100 0000 0000 0000 0000<br />00000c0 54a4 185e 000b b674 0002 0008 0000 0001<br />00000d0 54a4 185e 000b b680 0000 0000 0000 0000</p><p>Counter clockwise rotation:</p><p>root@OpenWrt:~# cat /dev/input/event0 |hexdump<br />0000000 54a4 1865 000b d96a 0002 0008 ffff ffff<br />0000010 54a4 1865 000b d977 0000 0000 0000 0000<br />0000020 54a4 1865 000e 4a6c 0002 0008 ffff ffff<br />0000030 54a4 1865 000e 4a78 0000 0000 0000 0000<br />0000040 54a4 1866 0000 9e86 0002 0008 ffff ffff<br />0000050 54a4 1866 0000 9e95 0000 0000 0000 0000<br />0000060 54a4 1866 0001 f647 0002 0008 ffff ffff<br />0000070 54a4 1866 0001 f654 0000 0000 0000 0000<br />0000080 54a4 1866 0003 cb1d 0002 0008 ffff ffff<br />0000090 54a4 1866 0003 cb2b 0000 0000 0000 0000<br />00000a0 54a4 1866 0005 a001 0002 0008 ffff ffff<br />00000b0 54a4 1866 0005 a00f 0000 0000 0000 0000<br />00000c0 54a4 1866 0007 f1c9 0002 0008 ffff ffff<br />00000d0 54a4 1866 0007 f1d5 0000 0000 0000 0000<br />00000e0 54a4 1866 000a dfe4 0002 0008 ffff ffff<br />00000f0 54a4 1866 000a dff2 0000 0000 0000 0000</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 1 Jan 2015, 14:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259333">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						31 Dec 2014, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>thank you your help!</p>											<p class="post-edited">(Last edited by <strong>hoatienii</strong> on 31 Dec 2014, 17:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259383">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						1 Jan 2015, 12:43					</div>
				</div>
				<div class="post-content content">
					<p>After a bad new years eve <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> I added an hand made <strong><span style="color: #FF0000">USB PIR motion sensor</span></strong>&nbsp; <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p><p>I modified a Home PIR Motion sensor and connected the output to one button switch of the Mouse PCB you see above <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>The modification consists in completely disconnecting all the relay outputs from the PIR circuit and connect the two pins (N.O. output) to the mouse PCB in parallel to a switch button:</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/cct1.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/cct1.jpg" /></span></p><p>When a motion is detected this is the triggerhappy output:</p><p>EV_KEY&nbsp; &nbsp; BTN_LEFT&nbsp; &nbsp; 1&nbsp; &nbsp; /dev/input/event2<br /># BTN_LEFT&nbsp; &nbsp; <strong>1</strong>&nbsp; &nbsp; command</p><p>when released:</p><p>EV_KEY&nbsp; &nbsp; BTN_LEFT&nbsp; &nbsp; 0&nbsp; &nbsp; /dev/input/event2<br /># BTN_LEFT&nbsp; &nbsp; <strong>0</strong>&nbsp; &nbsp; command</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/pir.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/pir.jpg" /></span></p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/pir2.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/pir2.jpg" /></span></p><p>The PIR motion sensor I used has also the light sensor and a timer integrated.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 1 Jan 2015, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259410">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						1 Jan 2015, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>You have many good idea <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />. Thanks your sharing!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259415">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						1 Jan 2015, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>Try</p><p>KEY_KP1 1 /bin/sh /www/on_one.sh &amp;<br />KEY_KP2 1 /bin/sh /www/off_one.sh &amp;<br />KEY_KP3 1 /bin/sh /www/on_two.sh &amp;<br />KEY_KP4 1 /bin/sh /www/off_two.sh &amp;<br />KEY_KP5 1 /bin/sh /www/on_three.sh &amp;<br />KEY_KP6 1 /bin/sh /www/off_three.sh &amp;<br />KEY_KP7 1 /bin/sh /www/on_four.sh &amp;<br />KEY_KP8 1 /bin/sh /www/off_four.sh &amp;</p></blockquote></div><p>I think i have problem with usb hub, when i press keyboard 4th or 5th router can not read input from webcam and keyboard. Webcam is input event0, keyboard input event1. I will try on Barrier Breaker.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259421">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						1 Jan 2015, 19:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>I think i have problem with usb hub, when i press keyboard 4th or 5th router can not read input from webcam and keyboard. Webcam is input event0, keyboard input event1. I will try on Barrier Breaker.</p></blockquote></div><p>Is your USB Hub powered?<br />I mean, does it have his own power supply?</p><p>If not, maybe your webcam asks too much current to the router</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 1 Jan 2015, 20:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259466">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						2 Jan 2015, 03:00					</div>
				</div>
				<div class="post-content content">
					<p>My USB hub have 4A power adapter</p><p><span class="postimg"><img src="http://i947.photobucket.com/albums/ad314/bibikitty2911/DSC04004hubusb7pbuffalo_zps4f693f86.jpg" alt="http://i947.photobucket.com/albums/ad314/bibikitty2911/DSC04004hubusb7pbuffalo_zps4f693f86.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259607">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						2 Jan 2015, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve connected the 5V relays board to the router <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Note: the signal to drive the relay (+3.3V) was taken from blue led&#039;s cathode (upper terminal, opposite to &quot;+&quot; label on PCB), the blue led is the one on the right of the group of two leds.</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda2.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda2.jpg" /></span></p><p>The relays board was luckily found rummaging through old hardware, I noticed an usb voip phone skype adapter&nbsp; I wasn&#039;t ever been able to use with linux, the adapter had three mini relays so I immediately destroyed it to recover the PCB portion with relays and their drivers <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>I took +5V&nbsp; to power the relays board from the lower USB connector but noticed that the router may have some problem when other devices are connected to this port due to increased load current, but if you do not connect anything else to this USB port it is OK.<br />As soon as I can I will add a +5V voltage regulator and will connect it directly to the + 12V router&#039;s power supply.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 3 Jan 2015, 10:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259630">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						3 Jan 2015, 04:14					</div>
				</div>
				<div class="post-content content">
					<p>You should use hot glue to hold wire on pcb <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br /><span class="postimg"><img src="http://www.howardelectronics.com/steinel/images/WGF-3002L.jpg" alt="http://www.howardelectronics.com/steinel/images/WGF-3002L.jpg" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259633">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						3 Jan 2015, 04:23					</div>
				</div>
				<div class="post-content content">
					<p>The obvious answer to the power situation is to use 12 volt relays.&nbsp; Or put a properly sized resistor in series from the 12v bus to each 5 volt relay coil, though that wastes energy.</p><p>You could clean up the motion detector considerably by bypassing its power system and relay and just using a 5 volt interface to the USB mouse board.&nbsp; The transistor that drives the relay now could pull one of the button lines to ground.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259652">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						3 Jan 2015, 09:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>You could clean up the motion detector considerably by bypassing its power system and relay and just using a 5 volt interface to the USB mouse board.&nbsp; The transistor that drives the relay now could pull one of the button lines to ground.</p></blockquote></div><p>Good suggestion! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thanks.</p><p>About the 12V relay you&#039;re right but I want to use recovered components from my trashware&#039;s drawer as much as possible.</p><p>The drop resistor solution is not suitable, the current consumption span of the relay board is too big from &quot;on&quot; to &quot;off&quot; state, during &quot;off&quot; state you may have too much voltage on the board (startup relay coil transient voltage too big).<br />The best solution would be having a switching voltage regulator to reduce waste of energy.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 3 Jan 2015, 10:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259691">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						3 Jan 2015, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>Separate resistor for each relay, so that turning one on doesn&#039;t affect the voltage to the others.</p><p>There is a nice 12v to 5v switching regulator board easy to repurpose from any phone charger that plugs into a car.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259751">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						4 Jan 2015, 02:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p><span class="postimg"><img src="http://i44.servimg.com/u/f44/17/14/70/27/p1030721.jpg" alt="http://i44.servimg.com/u/f44/17/14/70/27/p1030721.jpg" /></span></p></blockquote></div><p>I have old CRT monitor. Could use it for amplifier? <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>											<p class="post-edited">(Last edited by <strong>hoatienii</strong> on 4 Jan 2015, 03:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259757">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						4 Jan 2015, 03:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hoatienii wrote:</cite><blockquote><p>I have old CRT monitor. Could use this for amplifier? <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p></blockquote></div><p>I designed a special one to sonorize my OpenWrt Wi-Fi Internet radio.</p><p>This is my Openwrt Internet Hi-Fi stereo &quot;tube&quot; radio, I think it is the only OpenWRT vacuum tube project in the world <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p><span class="postimg"><img src="http://i44.servimg.com/u/f44/17/14/70/27/p1040416.jpg" alt="http://i44.servimg.com/u/f44/17/14/70/27/p1040416.jpg" /></span></p><p><span class="postimg"><img src="http://www.lovisolo.com/valvole/807b.jpg" alt="http://www.lovisolo.com/valvole/807b.jpg" /></span></p><p>note: all tubes I used were never used before (New Old Stock) and were made in 1944 by RCA for Army &amp; Navy, except for &quot;magic eye&quot; that was built in 1951 in Germany.</p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 4 Jan 2015, 03:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259973">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">pilovis</div>
					<div class="post-datetime">
						5 Jan 2015, 01:04					</div>
				</div>
				<div class="post-content content">
					<p>Finally, the 12V to 5V switching voltage regulator was added <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I recovered it from a cheap car USB charger.</p><p>Anyway, the Vodafone station still have USB problems, the USB support for this router is broken!</p><p>This the final version of my Home Automation Router, wires have been glued to PCB and the two boards are kept in place with double-sided adhesive tape:</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda3.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda3.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>pilovis</strong> on 5 Jan 2015, 01:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259995">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						5 Jan 2015, 04:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pilovis wrote:</cite><blockquote><p>Finally, the 12V to 5V switching voltage regulator was added <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I recovered it from a cheap car USB charger.</p><p>Anyway, the Vodafone station still have USB problems, the USB support for this router is broken!</p><p>This the final version of my Home Automation Router, wires have been glued to PCB and the two boards are kept in place with double-sided adhesive tape:</p><p><span class="postimg"><img src="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda3.jpg" alt="http://www.lovisolo.com/asterisk/software/openwrt/Vodafone-Station-Home-Automation-Server/voda3.jpg" /></span></p></blockquote></div><p>like!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260061">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						5 Jan 2015, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>i have error when connet keyboard and webcam to hub.<br /></p><div class="codebox"><pre><code>[    8.680000] usb 1-1: new full-speed USB device number 2 using ohci-platform
[    8.900000] hub 1-1:1.0: USB hub found
[    8.900000] hub 1-1:1.0: 4 ports detected
[    9.210000] usb 1-1.1: new low-speed USB device number 3 using ohci-platform
[    9.300000] usb 1-1.1: device descriptor read/64, error -62
[    9.490000] usb 1-1.1: device descriptor read/64, error -62
[    9.680000] usb 1-1.1: new low-speed USB device number 4 using ohci-platform
[    9.770000] usb 1-1.1: device descriptor read/64, error -62
[    9.960000] usb 1-1.1: device descriptor read/64, error -62
[   10.150000] usb 1-1.1: new low-speed USB device number 5 using ohci-platform
[   10.570000] usb 1-1.1: device not accepting address 5, error -62
[   10.650000] usb 1-1.1: new low-speed USB device number 6 using ohci-platform
[   11.070000] usb 1-1.1: device not accepting address 6, error -62
[   11.070000] hub 1-1:1.0: unable to enumerate USB device on port 1
[   11.170000] usb 1-1.4: new full-speed USB device number 7 using ohci-platform
[   11.260000] usb 1-1.4: device descriptor read/64, error -62
[   11.450000] usb 1-1.4: device descriptor read/64, error -62
[   11.640000] usb 1-1.4: new full-speed USB device number 8 using ohci-platform
[   11.730000] usb 1-1.4: device descriptor read/64, error -62
[   11.890000] eth0: link up (1000Mbps/Full duplex)
[   11.920000] usb 1-1.4: device descriptor read/64, error -62
[   12.110000] usb 1-1.4: new full-speed USB device number 9 using ohci-platform
[   12.530000] usb 1-1.4: device not accepting address 9, error -62
[   12.610000] usb 1-1.4: new full-speed USB device number 10 using ohci-platfor                                                                                        m
[   13.100000] usb 1-1.4: device not accepting address 10, error -62
[   13.210000] hub 1-1:1.0: unable to enumerate USB device on port 4</code></pre></div>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=54722&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=54722&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=54722&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>