<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> usb drive won&#039;t mount on WD My Net N750</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p252109">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jog267</div>
					<div class="post-datetime">
						26 Oct 2014, 23:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to mount an ext4 drive on a N750 for use as a dlna server and as a nas.&nbsp; I hoped default settings would work for usb - they didn&#039;t. I tried using command line instructions to create mount points but I don&#039;t think I know what I&#039;m doing.&nbsp; I can see the mount points but I can&#039;t access them;&nbsp; fstab is empty.&nbsp; Drive appears as both /dev/sda and /dev/sda1 on Device dropdown box on General tab from luci Mount Points screen.&nbsp; All attempts to mount drive result in error.</p><p>I followed the instructions from openwrt usb page and installed the proper packages.&nbsp; I get the following:</p><p>Mounted file systems<br />Filesystem&nbsp; &nbsp; Mount Point&nbsp; &nbsp; Available&nbsp; &nbsp; Used<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />rootfs &nbsp; &nbsp; / &nbsp; &nbsp; 8.19 MB / 12.13 MB &nbsp; &nbsp; 32% (3.93 MB) <br />/dev/root &nbsp; &nbsp; /rom &nbsp; &nbsp; 0.00 B / 2.25 MB &nbsp; &nbsp; 100% (2.25 MB) <br />tmpfs &nbsp; &nbsp; /tmp &nbsp; &nbsp; 61.06 MB / 61.68 MB &nbsp; &nbsp; 1% (636.00 KB) <br />/dev/mtdblock7 &nbsp; &nbsp; /overlay &nbsp; &nbsp; 8.19 MB / 12.13 MB &nbsp; &nbsp; 32% (3.93 MB) <br />overlayfs:/overlay &nbsp; &nbsp; / &nbsp; &nbsp; 8.19 MB / 12.13 MB &nbsp; &nbsp; 32% (3.93 MB) <br />tmpfs &nbsp; &nbsp; /dev &nbsp; &nbsp; 512.00 KB / 512.00 KB &nbsp; &nbsp; 0% (0.00 B) <br />Mount Points<br />Mount Points define at which point a memory device will be attached to the filesystem<br />Enabled&nbsp; &nbsp; Device&nbsp; &nbsp; Mount Point&nbsp; &nbsp; Filesystem&nbsp; &nbsp; Options&nbsp; &nbsp; Root&nbsp; &nbsp; Check&nbsp; &nbsp;&nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p>UUID: 346c-123d &nbsp; &nbsp; ? &nbsp; &nbsp; ext4 &nbsp; &nbsp; defaults &nbsp; &nbsp; no &nbsp; &nbsp; no &nbsp; &nbsp; </p><br /><br /><p>Browser interface Powered by LuCI Trunk (0.12+svn-r10530) OpenWrt Barrier Breaker 14.07 ; command lines issued via putty,</p><p>usb packages:<br />Remove &nbsp; &nbsp; kmod-ledtrig-usbdev &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; kmod-usb-core &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; kmod-usb-ohci &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; kmod-usb-storage &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; kmod-usb-uhci &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; kmod-usb2 &nbsp; &nbsp; 3.10.49-1<br />Remove &nbsp; &nbsp; libusb-1.0 &nbsp; &nbsp; 1.0.9-1<br />Remove &nbsp; &nbsp; usbutils &nbsp; &nbsp; 007-1</p><p>samba:<br />Remove &nbsp; &nbsp; luci-app-samba &nbsp; &nbsp; 0.12+svn-r1053:Remove &nbsp; &nbsp; <br />Remove &nbsp; &nbsp; samba36-server &nbsp; &nbsp; 3.6.24-1</p><p>dlna<br />Remove &nbsp; &nbsp; libdlna &nbsp; &nbsp; 0.2.4-1<br />Remove &nbsp; &nbsp; luci-app-minidlna &nbsp; &nbsp; 0.12+svn-r10530-1<br />Remove &nbsp; &nbsp; minidlna &nbsp; &nbsp; 1.1.3-1</p><p>I also installed kmod-fs-ntfs to use a ntfs drive.</p><p>I dk what to do.&nbsp; Any assistance would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252134">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						27 Oct 2014, 03:25					</div>
				</div>
				<div class="post-content content">
					<p>did you really remove all those packages? Am I misreading this?<br />Did you start all the relevant services by going to system-&gt;startup in Luci?</p><p>Follow this: <a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252140">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jog267</div>
					<div class="post-datetime">
						27 Oct 2014, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the response.&nbsp; I did not remove all of those packages - all instances of &#039;Remove&#039; from above resulted from crude cut/pastes from luci.&nbsp; Those are installed packages.</p><p>I had tried to follow instructions at link you provided, to no avail; mount failed invalid argument error is returned.&nbsp; </p><p>all services below are enabled:</p><p>Start priority&nbsp; &nbsp; Initscript&nbsp; &nbsp; Enable/Disable<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />0 &nbsp; &nbsp; sysfixtime &nbsp; &nbsp; <br />10 &nbsp; &nbsp; boot &nbsp; &nbsp; <br />10 &nbsp; &nbsp; system &nbsp; &nbsp; <br />11 &nbsp; &nbsp; sysctl &nbsp; &nbsp; <br />12 &nbsp; &nbsp; log &nbsp; &nbsp; <br />19 &nbsp; &nbsp; firewall &nbsp; &nbsp; <br />20 &nbsp; &nbsp; network &nbsp; &nbsp; <br />35 &nbsp; &nbsp; odhcpd &nbsp; &nbsp; <br />40 &nbsp; &nbsp; fstab &nbsp; &nbsp; <br />50 &nbsp; &nbsp; cron &nbsp; &nbsp; <br />50 &nbsp; &nbsp; dropbear &nbsp; &nbsp; <br />50 &nbsp; &nbsp; minidlna &nbsp; &nbsp; <br />50 &nbsp; &nbsp; telnet &nbsp; &nbsp; <br />50 &nbsp; &nbsp; uhttpd &nbsp; &nbsp; <br />50 &nbsp; &nbsp; ushare &nbsp; &nbsp; <br />60 &nbsp; &nbsp; dnsmasq &nbsp; &nbsp; <br />60 &nbsp; &nbsp; samba &nbsp; &nbsp; <br />95 &nbsp; &nbsp; done &nbsp; &nbsp; <br />96 &nbsp; &nbsp; led &nbsp; &nbsp; <br />98 &nbsp; &nbsp; sysntpd &nbsp; &nbsp; </p><p>Must they be manually started? </p><p>I don&#039;t understand mount points.&nbsp; If I have a drive formatted ext4 that luci/mount points tells me is at /dev/sda and /dev/sda1, what does that mean?&nbsp; Mount Points define at which point a memory device will be attached to the filesystem - then what are those 2 entries?&nbsp; It isn&#039;t a partitioned drive so why 2 entries?&nbsp; Which one do I mount?&nbsp; How do I do that?&nbsp; How can I tell? </p><p>From luci Mount Point Entry, MY QUESTIONS IN CAPS:</p><p>Enable this mount </p><p>Device :/dev/sda(8GB) --&gt; OR SHOULD I CHOSE /DEV/SDA1?</p><p> The device file of the memory or partition (e.g. /dev/sda1) <br />Mount point ? --&gt; WHAT SHOULD THIS BE?&nbsp; /MNT/?&nbsp; OR SOMETHING ELSE?</p><p> Specifies the directory the device is attached to <br />Filesystem EXT4 --&gt; WHAT IF DRIVE IS NTFS?</p><p> The filesystem that was used to format the memory (e.g. ext3) </p><p>Use as root filesystem --&gt; CHECKED OR NOT?</p><p> Configures this mount as overlay storage for block-extroot </p><p>Run filesystem check&nbsp; --&gt; CHECKED OR NOT?</p><p> Run a filesystem check before mounting the device&nbsp; <br />-------------------------------------------------------------------------------------------------------------</p><p>I&#039;ve tried creating a /mnt/usb1 entry (as in the example at link) with the command mount /dev/sda1 /mnt/usb1 and invalid argument error msg is returned.&nbsp; I dk what to do.&nbsp; Any help would be greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252148">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						27 Oct 2014, 09:10					</div>
				</div>
				<div class="post-content content">
					<p>Post the output of</p><div class="codebox"><pre><code>opkg list-installed kmod-fs*</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252191">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jirm</div>
					<div class="post-datetime">
						27 Oct 2014, 14:44					</div>
				</div>
				<div class="post-content content">
					<p>I think you still need install some more other modules, first install block mount (with this you can automount devices and not need edit fstab),&nbsp; and check for others kernel modules maybe required like kmod-nls-iso-89xx, kmod-nls-utf8 and last you have install the correct kernel filesystem support modules like kmod-fs-ext4, kmod-fs-vfat, etc... and for ntfs better install 3g-ntfs and not kernel kmod-fs-ntfs</p><p>Last i think you need to check folder and files permissions on the usb device (chmod) to access read over them or r/w, and the samba permissions for shared folders (chown)</p><p>When you have all the correct modules loaded, and you had set all the correct permission, then you can go to luci and mount the device/partions and shared forlders trough samba and define everthing, but you need &quot;first&quot; install and check all required is ok.</p><p>Some read this &quot;<a href="http://wiki.openwrt.org/doc/howto/usb.storage">http://wiki.openwrt.org/doc/howto/usb.storage</a>&quot; i think is mandatory</p><br /><p>Hope i help a little</p>											<p class="post-edited">(Last edited by <strong>jirm</strong> on 27 Oct 2014, 15:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252192">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jog267</div>
					<div class="post-datetime">
						27 Oct 2014, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the response.&nbsp; Output:</p><p>kmod-fs-ntfs - 3.10.49-1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p252229">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						27 Oct 2014, 19:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jog267 wrote:</cite><blockquote><p>kmod-fs-ntfs - 3.10.49-1</p></blockquote></div><p>Well, if you&#039;re trying to mount an ext4 drive, you should have installed kmod-fs-ext4 first.</p><p>Since you already missed this, please re-read <a href="http://wiki.openwrt.org/doc/howto/usb.storage,">http://wiki.openwrt.org/doc/howto/usb.storage,</a> in order to make sure you have all necessary packages installed.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>