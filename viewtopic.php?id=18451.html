<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Inventel Livebox</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 17 Apr 2018 and 18 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=18451&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18451&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=18451&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p79678">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">bluegeek</div>
					<div class="post-datetime">
						15 Jan 2009, 20:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>It seems there&#039;s preliminary support for the inventel livebox router. I&#039;ve build the SVN Kamikaze and I get a Linux Kernel image but not a complete firmware image. </p><p>Does somebody with serial console acces to this router tried to boot this kernel from RedBoot?</p><p>Some links:</p><p>The kernel image I&#039;ve build:<br /><a href="http://bogomips.net/openwrt/openwrt-livebox-vmlinux.gz">http://bogomips.net/openwrt/openwrt-livebox-vmlinux.gz</a></p><p><a href="https://dev.openwrt.org/browser/trunk/target/linux/brcm63xx/Makefile">https://dev.openwrt.org/browser/trunk/t … x/Makefile</a><br /><a href="https://svn.openwrt.org/openwrt/trunk/target/linux/brcm63xx/image/Makefile">https://svn.openwrt.org/openwrt/trunk/t … e/Makefile</a></p><p>Propposed patch:<br /><a href="https://dev.openwrt.org/ticket/4433">https://dev.openwrt.org/ticket/4433</a></p><p>New Broadcom BCM63xx codebase with GPL&#039;d Ethernet and USB support:<br /><a href="http://forum.openwrt.org/viewtopic.php?id=17370&amp;p=8">http://forum.openwrt.org/viewtopic.php?id=17370&amp;p=8</a></p><p>How to build firmware images for the livebox with dwbtool:<br /><a href="http://www.dbzoo.com/wiki/livebox/livebox">http://www.dbzoo.com/wiki/livebox/livebox</a></p><p>This is how I compiled<br /></p><div class="codebox"><pre><code>svn co https://svn.openwrt.org/openwrt/trunk/

cd /openwrt/trunk/target/linux/brcm63xx/files/drivers/mtd/maps/

wget http://nbd.name/brcm63xx-mtd.2.patch

patch -b bcm963xx-flash.c brcm63xx-mtd.2.patch

cd /openwrt/trunk/

make menuconfig

    [*] Advanced configuration options (for developers)  ---&gt; 
        [*]   Show broken platforms / packages
        Target System (Broadcom BCM63xx [2.6])  ---&gt; 
         (X) Broadcom BCM63xx [2.6] 
    [*]image configuration
        ---Imageconfiguration
        (192.168.1.1) LAN DNS server
        (static) LAN Protoco (NEW)
        (192.168.1.1) LAN Gateway
        (255.255.255.0) LAN Network Mask (NEW)
        (192.168.1.19) LAN IP Address (NEW)

make V=99

blue@pandora:~/src/openwrt/trunk$ ls -l bin/*livebox*
-rwxr-xr-x 1 blue blue 2372784 2009-01-10 14:26 bin/openwrt-livebox-vmlinux.elf
-rw-r--r-- 1 blue blue 1048576 2009-01-10 14:26 bin/openwrt-livebox-vmlinux.gz
-rw-r--r-- 1 blue blue  786432 2009-01-10 14:26 bin/openwrt-livebox-vmlinux.lzma</code></pre></div>											<p class="post-edited">(Last edited by <strong>bluegeek</strong> on 15 Jan 2009, 20:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79790">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pepejose</div>
					<div class="post-datetime">
						17 Jan 2009, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>First of all, it&#039;s my first time with openwrt so ... may be I&#039;m wrong<br />I&#039;ve tested it, but it doen&#039;t work (See output)</p><p>Note that I&#039;ve used EXEC &amp; GO for running the image. First exec and after a fail i tried with go.</p><p>=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2009.01.17 20:34:46 =~=~=~=~=~=~=~=~=~=~=~=</p><p>+ESA: deleted<br />WEP KEY : deleted<br />Ethernet eth0: MAC address deleted<br />IP: 192.168.1.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.1.2<br />Hardware version 0x10 BLUE5G.4_mod1<br />Factory Switch OFF</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Non-certified release, version UNKNOWN - built 22:49:54, Jul 19 2004</p><p>Platform: Blue_5g (MIPS32 4Kc) <br />Copyright (C) 2000, 2001, 2002, Red Hat, Inc.</p><p>RAM: 0x80000000-0x81000000, [0x8041de80-0x80fe1000] available<br />FLASH: 0xbe400000 - 0xbec00000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 0.400 seconds - enter ^C twice to abort</p><br /><p>(configuration)</p><p>RedBoot&gt; fconfig -l<br />Run script at boot: true<br />Boot script:</p><p>Boot script timeout (10ms resolution): 40<br />Use BOOTP for network configuration: false<br />Local IP address: 192.168.1.1<br />Default server IP address: 192.168.1.2<br />bt_pin: true<br />bt_pin_data: 0000<br />Set eth0 network hardware address [MAC]: true<br />eth0 network hardware address [MAC]: deleted<br />GDB connection port: 9000<br />Set H235 KEY: true<br />H235 KEY: deleted<br />Force console for special debug messages: false<br />INVENTEL WIRELESS MAGIC: -2<br />Network debug at boot time: false<br />Set SERIAL NUMBER: true<br />SERIAL NUMBER: deleted<br />Set WEP KEY: true<br />WEP KEY: deleted</p><p>(load uncompressed image)</p><p>RedBoot&gt; load -r -b %{FREEMEMLO} vmlinux<br />Using default protocol (TFTP)<br />Raw file loaded 0x8041e000-0x8065f084, assumed entry at 0x8041e000</p><p>RedBoot&gt; exec<br />Now booting linux kernel:<br /> Base address 0x8000fc00 Entry 0x8041e000<br /> Cmdline : root=1F01 panic=2<br />** command abort - illegal memory access?</p><p>RedBoot&gt; go<br />$T0425:80014450;1d:80ffffd0;#c8$T0425:80014450;1d:80ffffd0;#c8$T0425:80014450;1d:80ffffd0;#c8$T0425:80014450;1d:80ffffd0;#c8$T0425:80014450;1d:80ffffd0;#c8$T0425:80014450;1d:80ffffd0;#c8<br />(It sems to hangs)</p><p>+ESA: deleted<br />WEP KEY : deleted<br />Ethernet eth0: MAC address deleted<br />IP: 192.168.1.1/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 192.168.1.2<br />Hardware version 0x10 BLUE5G.4_mod1<br />Factory Switch OFF</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Non-certified release, version UNKNOWN - built 22:49:54, Jul 19 2004</p><p>Platform: Blue_5g (MIPS32 4Kc) <br />Copyright (C) 2000, 2001, 2002, Red Hat, Inc.</p><p>RAM: 0x80000000-0x81000000, [0x8041de80-0x80fe1000] available<br />FLASH: 0xbe400000 - 0xbec00000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 0.400 seconds - enter ^C twice to abort</p><p>(Load gz image)</p><p>RedBoot&gt; load -r -b %{FFREEMEMLO} openwrt-livebox-vmlinux.gz<br />Using default protocol (TFTP)<br />Raw file loaded 0x8041e000-0x8051dfff, assumed entry at 0x8041e000</p><p>RedBoot&gt; exec<br />Now booting linux kernel:<br /> Base address 0x8000fc00 Entry 0x8041e00<br /> Cmdline : root=1F01 panic=2<br />** command abort - illegal memory access?</p><p>RedBoot&gt; go<br />$T0425:8041e000;1d:80ffffd0;#f4$T0425:8041e000;1d:80ffffd0;#f4$T0425:8041e000;1d:80ffffd0;#f4$T0425:8041e000;1d:80ffffd0;#f4$T0425:8041e000;1d:80ffffd0;#f4$T0425:8041e000;1d:80ffffd0;#f4</p>											<p class="post-edited">(Last edited by <strong>pepejose</strong> on 17 Jan 2009, 22:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82298">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						21 Feb 2009, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>more clues<br /><a href="http://www.andyp.uwclub.net/livebox.html">http://www.andyp.uwclub.net/livebox.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82302">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">bluegeek</div>
					<div class="post-datetime">
						21 Feb 2009, 13:28					</div>
				</div>
				<div class="post-content content">
					<p>@pepejose: Thanks for trying, I hope it didn&#039;t brick your router <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" />)</p><p>@danitool: I&#039;ve been in contact with Andy, he&#039;s doing a great job trying to hack this router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p82382">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">pepejose</div>
					<div class="post-datetime">
						22 Feb 2009, 16:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>bluegeek wrote:</cite><blockquote><p>@pepejose: Thanks for trying, I hope it didn&#039;t brick your router <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" />)</p></blockquote></div><p>No, It isn&#039;t bricked, don&#039;t worry. But I need to reflash it again after a lot of (failed) tests with openwrt. I don&#039;t know why redboot doesn&#039;t allow me to modify the boot script (It&#039;s strange!!)</p><div class="quotebox"><cite>danitool wrote:</cite><blockquote><p>more clues<br /><a href="http://www.andyp.uwclub.net/livebox.html">http://www.andyp.uwclub.net/livebox.html</a></p></blockquote></div><p>And&nbsp; =&gt; <a href="http://www.dbzoo.com/wiki/livebox/livebox">http://www.dbzoo.com/wiki/livebox/livebox</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83237">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">AndyP</div>
					<div class="post-datetime">
						4 Mar 2009, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have managed to get my Inventel Livebox to &#039;boot&#039; an OpenWRT kernel up to a point, then it all goes south with a Oops.</p><p>To get my kernel ( config file at <a href="http://www.andyp.dyndns.info/.config">http://www.andyp.dyndns.info/.config</a> ) to boot I used the vmlinux kernel from the trunk/build_dir/linux-brcm63xx/ directory, not any of the other kernels.</p><p>The RedBoot command line is ignored during the boot and the kernel uses the command line that is in the kernel .config file as CONFIG_CMDLINE.</p><p>My bootlog is as follows,</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Non-certified release, version UNKNOWN - built 22:49:54, Jul 19 2004</p><p>Platform: Blue_5g (MIPS32 4Kc) <br />Copyright (C) 2000, 2001, 2002, Red Hat, Inc.</p><p>RAM: 0x80000000-0x81000000, [0x8041de80-0x80fe1000] available<br />FLASH: 0xbe400000 - 0xbec00000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 0.200 seconds - enter ^C twice to abort<br />RedBoot&gt; load -r -v -h 10.7.58.114 -m tftp -b 0x80010000 Image<br />Raw file loaded 0x80010000-0x80253085, assumed entry at 0x80010000<br />RedBoot&gt; exec -c &quot;boot_loader=RedBoot root=1F01 mem=16M&quot; 0x80010000<br />Now booting linux kernel:<br /> Base address 0x8000fc00 Entry 0x80010000<br /> Cmdline : boot_loader=RedBoot root=1F01 mem=16M<br />Linux version 2.6.27.19 (root@acernote) (gcc version 4.1.2) #38 Wed Mar 4 20:20:28 GMT 2009<br />Detected Broadcom 0x6348 CPU revision b0<br />CPU frequency is 256000000 Hz<br />16MB of RAM installed<br />console [early0] enabled<br />CPU revision is: 00029107 (Broadcom BCM6348)<br />board_livebox: board name: Livebox<br />Determined physical RAM map:<br /> memory: 01000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00001000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00001000<br />Built 1 zonelists in Zone order, mobility grouping off.&nbsp; Total pages: 4064<br />Kernel command line: root=/dev/mtdblock1 rootfstype=squashfs init=/etc/preinit noinitrd console=ttyS0,115200<br />Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.<br />Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes<br />PID hash table entries: 64 (order: 6, 256 bytes)<br />Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Memory: 13716k/16384k available (1874k kernel code, 2668k reserved, 322k data, 120k init, 0k highmem)<br />Calibrating delay loop... 252.92 BogoMIPS (lpj=505856)<br />Mount-cache hash table entries: 512<br />net_namespace: 592 bytes<br />NET: Registered protocol family 16<br />registering 37 GPIOs<br />registering PCI controller with io_map_base unset<br />bus: 00 index 0 io port: [8000000, 800ffff]<br />bus: 00 index 1 mmio: [30000000, 37ffffff]<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 512 bind 512)<br />TCP reno registered<br />NET: Registered protocol family 1<br />audit: initializing netlink socket (disabled)<br />type=2000 audit(0.596:1): initialized<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. Ã‚Â© 2001-2006 Red Hat, Inc.<br />msgmni has been set to 26<br />io scheduler noop registered<br />io scheduler cfq registered (default)<br />bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0300 (irq = 10) is a bcm63xx_uart<br />console handover: boot [early0] -&gt; real [ttyS0]<br />bcm63xx_enet MII bus: probed<br />bcm963xx_flash: 0x00400000 at 0x1fc00000<br />bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank<br />AGP Here max_chips=00 map-&gt;size=400000 cfi.chipshift=17<br />NOR chip too large to fit in mapping. Attempting to cope...<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Reducing visibility of 8192KiB chip to 4096KiB<br />bcm963xx_flash: Read Signature value of <br />bcm963xx_flash: assuming RedBoot bootloader<br />bcm963xx_flash: Support for extended flash memory size : 0x00800000 ; ONLY 64MBIT SUPPORT<br />Searching for RedBoot partition table in bcm963xx at offset 0x7f0000<br />CPU 0 Unable to handle kernel paging request at virtual address c0076000, epc == 800140fc, ra == 8015915c<br />Oops[#1]:<br />Cpu 0<br />$ 0&nbsp; &nbsp;: 00000000 10008400 c0066000 00000000<br />$ 4&nbsp; &nbsp;: c0076000 4fc083ff 4fc18400 00000000<br />$ 8&nbsp; &nbsp;: c03f0000 00000000 00000000 00000000<br />$12&nbsp; &nbsp;: 80260000 00000001 8025a980 00000000<br />$16&nbsp; &nbsp;: 00000000 007f0000 80382c00 80382c38<br />$20&nbsp; &nbsp;: 8022fab0 00000000 007f0000 00010000<br />$24&nbsp; &nbsp;: 00000000 000186a0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <br />$28&nbsp; &nbsp;: 802b4000 802b5d10 00010000 8015915c<br />Hi&nbsp; &nbsp; : 0000007e<br />Lo&nbsp; &nbsp; : 76ca1000<br />epc&nbsp; &nbsp;: 800140fc 0x800140fc<br />&nbsp; &nbsp; Not tainted</p><p>As you can see it trashes itself when searching for Redboot partitions and I think its due to the physical/virtual location for the flash. I am currently working on fixing this but incase I don&#039;t have the correct .config file, has anyone else managed to get an Openwrt kernel to boot on an Inventel Livebox? If so, can they post their config file.</p><p>Thanks</p><p>AndyP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83884">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">AndyP</div>
					<div class="post-datetime">
						14 Mar 2009, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Well, I finally managed to get a kernel that will boot a Livebox and have installed a squashfs image so I now get to a boot prompt. The boot log is as follows,</p><p>+ESA: 00:07:3a:d7:7f:66<br />WEP KEY : 0B49BABEA353A0FC8A03A9A266<br />Ethernet eth0: MAC address 00:07:3a:d7:7f:66<br />IP: 10.7.58.112/255.255.255.0, Gateway: 0.0.0.0<br />Default server: 0.0.0.0<br />Hardware version 0x0A BLUE5G.4_mod1<br />Factory Switch OFF</p><p>RedBoot(tm) bootstrap and debug environment [ROM]<br />Non-certified release, version UNKNOWN - built 22:49:54, Jul 19 2004</p><p>Platform: Blue_5g (MIPS32 4Kc) <br />Copyright (C) 2000, 2001, 2002, Red Hat, Inc.</p><p>RAM: 0x80000000-0x81000000, [0x8041de80-0x80fe1000] available<br />FLASH: 0xbe400000 - 0xbec00000, 128 blocks of 0x00010000 bytes each.<br />== Executing boot script in 0.200 seconds - enter ^C twice to abort<br />RedBoot&gt; load -r -v -h 10.7.58.114 -m tftp -b 0x80010000 Image<br />-<br />Raw file loaded 0x80010000-0x8023f085, assumed entry at 0x80010000<br />RedBoot&gt; exec -c &quot;boot_loader=RedBoot root=1F01 mem=16M&quot; 0x80010000<br />Now booting linux kernel:<br /> Base address 0x8000fc00 Entry 0x80010000<br /> Cmdline : boot_loader=RedBoot root=1F01 mem=16M &lt;---------------------------------------------- THIS IS IGNORED BY OpenWRT <br />Linux version 2.6.27.19 (andyp@acernote) (gcc version 4.1.2) #5 Sat Mar 14 12:22:36 GMT 2009<br />Detected Broadcom 0x6348 CPU revision b0<br />CPU frequency is 256000000 Hz<br />16MB of RAM installed<br />console [early0] enabled<br />CPU revision is: 00029107 (Broadcom BCM6348)<br />board_livebox: board name: Livebox<br />Determined physical RAM map:<br /> memory: 01000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00001000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00001000<br />Built 1 zonelists in Zone order, mobility grouping off.&nbsp; Total pages: 4064<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200 &lt;- THIS IS USED INSTEAD<br />Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.<br />Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes<br />PID hash table entries: 64 (order: 6, 256 bytes)<br />Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Memory: 13796k/16384k available (1812k kernel code, 2588k reserved, 305k data, 120k init, 0k highmem)<br />Calibrating delay loop... 252.92 BogoMIPS (lpj=505856)<br />Mount-cache hash table entries: 512<br />net_namespace: 776 bytes<br />NET: Registered protocol family 16<br />registering 37 GPIOs<br />registering PCI controller with io_map_base unset<br />bus: 00 index 0 io port: [8000000, 800ffff]<br />bus: 00 index 1 mmio: [30000000, 37ffffff]<br />PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)<br />ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />TCP: Hash tables configured (established 512 bind 512)<br />TCP reno registered<br />NET: Registered protocol family 1<br />audit: initializing netlink socket (disabled)<br />type=2000 audit(0.605:1): initialized<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />JFFS2 version 2.2. ï¿½Â© 2001-2006 Red Hat, Inc.<br />msgmni has been set to 26<br />io scheduler noop registered<br />io scheduler cfq registered (default)<br />bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0300 (irq = 10) is a bcm63xx_uart<br />console handover: boot [early0] -&gt; real [ttyS0]<br />bcm63xx_enet MII bus: probed<br />physmap platform flash device: 00800000 at 1e400000<br />physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Amd/Fujitsu Extended Query Table at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.<br />Searching for RedBoot partition table in physmap-flash.0 at offset 0x7f0000<br />6 RedBoot partitions found on MTD device physmap-flash.0<br />Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:<br />0x00000000-0x00030000 : &quot;RedBoot&quot;<br />0x00030000-0x003c0000 : &quot;user_fs&quot;<br />0x003c0000-0x00750000 : &quot;user_2_fs&quot;<br />0x00750000-0x007f0000 : &quot;jffs_system&quot;<br />0x007f0000-0x007ff000 : &quot;FIS directory&quot;<br />0x007ff000-0x00800000 : &quot;RedBoot config&quot;<br />TCP bic registered<br />NET: Registered protocol family 17<br />Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 120k freed<br />Please be patient, while OpenWrt loads ...<br />Algorithmics/MIPS FPU Emulator v1.5<br />- preinit -<br />Press CTRL-C for failsafe<br />- init -</p><p>Please press Enter to activate this console. </p><br /><p>BusyBox v1.11.3 (2009-03-12 19:56:33 GMT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (bleeding edge, r14863) -------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@(none):/# ieee80211: 802.11 data/management/control stack, git-1.1.13<br />ieee80211: Copyright (C) 2004-2005 Intel Corporation &lt;jketreno@linux.intel.com&gt;<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Plase use<br />nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />arp_tables: (C) 2002 David S. Miller</p><p>root@OpenWrt:/# </p><p>I have copied my OpenWRT and kernel config files to here, <a href="http://www.andyp.uwclub.net/OpenWRT.configs.tar.bz2">http://www.andyp.uwclub.net/OpenWRT.configs.tar.bz2</a><br />They were created on Kamikaze r14863 for anyone thats interested. So far I have not done anything with the OpenWRT Livebox but will start playing shortly. Many thanks to the OpenWRT team for all their hard work on this project.</p><p>AndyP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p83891">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						15 Mar 2009, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>Very nice news</p><p>For long time you have worked hard on livebox.</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84790">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">bluegeek</div>
					<div class="post-datetime">
						28 Mar 2009, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>Good news Andy! Keep us informed please.<br />Do you think it will be possible to build a firmware file for installing OpenWrt via Ethernet/TFTP?<br />--bluegeeek</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85947">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">AndyP</div>
					<div class="post-datetime">
						15 Apr 2009, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>Yesterday I finally managed to get my Livebox to boot from an OpenWRT kernel (r15001) that is stored in a cramfs partition on the Livebox. This then booted to a command prompt using a squashfs rootfs. I can then access the network from the Livebox and also mount a USB flash drive. I have not tried wireless yet, only wired.</p><p>Here is the bootlog (<a href="http://www.andyp.uwclub.net/openwrt.boot">http://www.andyp.uwclub.net/openwrt.boot</a>), along with the openwrt config (<a href="http://www.andyp.uwclub.net/openwrt.config">http://www.andyp.uwclub.net/openwrt.config</a>),<br />kernel config (<a href="http://www.andyp.uwclub.net/kernel.config">http://www.andyp.uwclub.net/kernel.config</a>) and config-2.6.27 (<a href="http://www.andyp.uwclub.net/config-2.6.27">http://www.andyp.uwclub.net/config-2.6.27</a>).</p><p>The config-2.6.27 needs to be copied as is to /openwrt/trunk/target/linux/brcm63xx.<br />The kernel config needs to be copied as .config to /openwrt/trunk/build_dir/linux-brcm63xx/linux-2.6.27.19<br />The openwrt config needs to be copied as .config to /openwrt/trunk</p><p>I changed the network file (<a href="http://www.andyp.uwclub.net/network">http://www.andyp.uwclub.net/network</a>) in /openwrt/trunk/build_dir/target-mips-uClibc-0.9.29/root-brcm63xx/etc/config so that the lan was on eth0 so I could use the same yellow port on the Livebox for redboot network access as well as linux kernel access. The IP address of the Livebox (openwrt.config) was changed to be 10.7.58.112 (the same as Redboot) just to make things a little easier.<br />I then ran &#039;make&#039; and waited.............and waited...............and waited.</p><p>The version or Redboot that I use (<a href="http://www.andyp.uwclub.net/redboot.20040719">http://www.andyp.uwclub.net/redboot.20040719</a>) allows Ctrl-C to break into it. You CANNOT use a ROM version of Redboot to flash a ROM version of RedBoot, a brick is the result, I know &#039;cos I did it. It needs to be done using a running linux, via JTAG or using a RAM version of RedBoot (I will try to build a RAM version of RedBoot that can be used to flash the ROM version, I have a version of the RedBoot sources released by Inventel which has some binary parts with it but does build). I first erased and then deleted any cramfs/squashfs/jffs partitions and created new kernel and rootfs partitions and ended up with this arrangement using the relevant &#039;fis erase&#039; then &#039;fis delete&#039; and finally &#039;fis create&#039; commands within RedBoot</p><p>RedBoot 0XBE400000&nbsp; &nbsp; &nbsp; 0XBE400000&nbsp; &nbsp; &nbsp; 0X00030000&nbsp; &nbsp; &nbsp; 0x00000000<br />kernel&nbsp; 0XBE430000&nbsp; &nbsp; &nbsp; 0XBE430000&nbsp; &nbsp; &nbsp; 0X00130000&nbsp; &nbsp; &nbsp; 0X80800000<br />rootfs&nbsp; 0XBE560000&nbsp; &nbsp; &nbsp; 0XBE560000&nbsp; &nbsp; &nbsp; 0X002C0000&nbsp; &nbsp; &nbsp; 0X80800000<br />FIS&nbsp; &nbsp; &nbsp;0XBEBF0000&nbsp; &nbsp; &nbsp; 0XBEBF0000&nbsp; &nbsp; &nbsp; 0X0000F000&nbsp; &nbsp; &nbsp; 0X00000000<br />Rconfig 0XBEBFF000&nbsp; &nbsp; &nbsp; 0XBEBFF000&nbsp; &nbsp; &nbsp; 0X00001000&nbsp; &nbsp; &nbsp; 0X00000000</p><p>I did NOT change the names of the RedBoot, FIS directory or RedBoot config partitions, they just don&#039;t all fit well in the text above.</p><p>I flashed the created squashfs image (<a href="http://www.andyp.uwclub.net/root.squashfs">http://www.andyp.uwclub.net/root.squashfs</a>) to the rootfs partition on the Livebox using Redboot.</p><p>Using the mkcramfs binary (<a href="http://www.andyp.uwclub.net/mkcramfs">http://www.andyp.uwclub.net/mkcramfs</a>) from one of the broadcom sets of sources (I can&#039;t remember where, will look to see) I created a cramfs image (<a href="http://www.andyp.uwclub.net/cramfs.fs">http://www.andyp.uwclub.net/cramfs.fs</a>) containing the vmlinux kernel from /openwrt/trunk/build_dir/linux-brcm63xx and then flashed it to the kernel partition.</p><p>I then modified the boot option by typing the following within RedBoot,</p><p>fconfig boot_script_data</p><p>and entering the following lines</p><p>fis load -b 0x80010000 -m cramfs -f vmlinux kernel<br />exec -c &quot;boot_loader=RedBoot root=1F01 mem=16M&quot; 0x80010000</p><p>This set RedBoot to load and boot my kernel. The bootlog is the result. Once I create a root password it will start sshd and stop telnetd on the<br />next reboot. </p><p>You do need serial port access to do all this. I am not sure if it can be done without but it might be possible. </p><p>Any questions, drop me a line.</p><p>Regards</p><p>&nbsp; &nbsp; &nbsp; &nbsp; AndyP</p>											<p class="post-edited">(Last edited by <strong>AndyP</strong> on 28 Apr 2009, 22:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85980">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						16 Apr 2009, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>bravo!!</p><p>congratulations for your work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86489">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">AndyP</div>
					<div class="post-datetime">
						23 Apr 2009, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>Just a quick update. </p><p>Finally managed to get OpenWRT r15252 to build (far too many packages selected) so updated all the above files to this rev.<br />Also, found the sources to a copy of mkcramfs that will build Livebox compatible images, no switches required, just mkcramfs indir outfilename .&nbsp; The sources and binary are at <a href="http://www.andyp.uwclub.net/cramfs.tar.bz2">http://www.andyp.uwclub.net/cramfs.tar.bz2</a> <br />Still working on a RAM copy of RedBoot to allow flashing of the ROM copy of RedBoot.</p><p>AndyP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86535">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">romaxmaniax</div>
					<div class="post-datetime">
						24 Apr 2009, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>Andy, this is the first time I use OpenWRT and thanks to your post I manage to install it on my livebox.<br />I have still some questions :</p><p>Wy do you need a ram based RedBoot?&nbsp; I manage to flash my redboot with &#039;fcp -v&#039; witch was installed on the original firmware (I think).</p><p>I also have some errors in dmesg like<br />jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00020020: 0x27bd instead<br />...<br />Empty flash at 0x0002c514 ends at 0x0002c524<br />...<br />Any idea where this come from ?</p><p>I have no wireless, is the module available ?</p><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86827">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">AndyP</div>
					<div class="post-datetime">
						28 Apr 2009, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>Yes, fcp is normally in the original firmware, but I was looking to build a RAM based RedBoot to allow flashing of the ROM based RedBoot for those who do not have command line access when the Livebox is running.</p><p>I saw errors like your when I had not erased the old partitions, only deleted them.</p><p>I have not looked at using wireless yet, I just bricked my Livebox running a RAM based RedBoot. Need to JTAG to recover. If I get a chance I will look at wireless support.</p><p>AndyP</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86939">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Seabstiii</div>
					<div class="post-datetime">
						29 Apr 2009, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi AndyP <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Good luck with jtag and always the best for livebox <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Sebastiii.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87139">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						2 May 2009, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>@ AndyP,<br />Some days ago I obtained a Livebox, output from serial console says:<br /></p><div class="codebox"><pre><code>96432SDRAM16bit_5GX101201234Hardware version 0x90 BLUE5G.9
56+678ESA: 00:1d:68:88:0e:b0
WEP KEY : ACE17BA962C02A4B2D6EC26782
Auto-negotiation timed-out
10 MB Half-Duplex (assumed)
Ethernet eth0: MAC address 00:1d:68:88:0e:b0
IP: 10.7.58.112, Default server: 0.0.0.0
Hardware version 0x10 BLUE5G.9 WITHOUT_OPTION
Factory Settings Recovery Switch OFF High
Register : 1f

RedBoot(tm) bootstrap and debug environment [ROM]
Non-certified release, version release-wanadoo-fr - built 16:25:10, Jun 20 2006

Platform: Blue_5g (MIPS32 4Kc) 
Copyright (C) 2000, 2001, 2002, Red Hat, Inc.

RAM: 0x80000000-0x81000000, [0x80445fb0-0x80fe2000] available
FLASH: 0xbe400000 - 0xbec00000, 128 blocks of 0x00010000 bytes each.
== Executing boot script in 0.200 seconds - enter ^C twice to abort
RedBoot&gt; fis load -b 0x80010000 -m cramfs -f Image user_fs
Partition is : 0xbe430000 - 0x720000 
mlen : 0x4c4034 
begin_tag : 0xbe8f4000, end : 0xbe8f4034
Verif OK 
Looking for Image in cramfs user_fs partition
cramfs_load : b 0x80010000, c 0xBE430000, s 0x00720000, f Image
.............loaded 0x1900FC bytes</code></pre></div><p>it has RedBoot partition newer than one you uses, ^C twice seems not work.</p><div class="quotebox"><cite>AndyP wrote:</cite><blockquote><p>The version or Redboot that I use (<a href="http://www.andyp.uwclub.net/redboot.20040719">http://www.andyp.uwclub.net/redboot.20040719</a>) allows Ctrl-C to break into it. You CANNOT use a ROM version of Redboot to flash a ROM version of RedBoot, a brick is the result, I know &#039;cos I did it. It needs to be done using a running linux, via JTAG or using a RAM version of RedBoot (I will try to build a RAM version of RedBoot that can be used to flash the ROM version, I have a version of the RedBoot sources released by Inventel which has some binary parts with it but does build). I first erased and then deleted any cramfs/squashfs/jffs partitions and created new kernel and rootfs partitions and ended up with this arrangement using the relevant &#039;fis erase&#039; then &#039;fis delete&#039; and finally &#039;fis create&#039; commands within RedBoot</p><p>RedBoot 0XBE400000&nbsp; &nbsp; &nbsp; 0XBE400000&nbsp; &nbsp; &nbsp; 0X00030000&nbsp; &nbsp; &nbsp; 0x00000000<br />kernel&nbsp; 0XBE430000&nbsp; &nbsp; &nbsp; 0XBE430000&nbsp; &nbsp; &nbsp; 0X00130000&nbsp; &nbsp; &nbsp; 0X80800000<br />rootfs&nbsp; 0XBE560000&nbsp; &nbsp; &nbsp; 0XBE560000&nbsp; &nbsp; &nbsp; 0X002C0000&nbsp; &nbsp; &nbsp; 0X80800000<br />FIS&nbsp; &nbsp; &nbsp;0XBEBF0000&nbsp; &nbsp; &nbsp; 0XBEBF0000&nbsp; &nbsp; &nbsp; 0X0000F000&nbsp; &nbsp; &nbsp; 0X00000000<br />Rconfig 0XBEBFF000&nbsp; &nbsp; &nbsp; 0XBEBFF000&nbsp; &nbsp; &nbsp; 0X00001000&nbsp; &nbsp; &nbsp; 0X00000000</p><p>I did NOT change the names of the RedBoot, FIS directory or RedBoot config partitions, they just don&#039;t all fit well in the text above.</p></blockquote></div><p>First of all, i don&#039;t know much abot RedBoot.<br />Question are:<br />1.- I can download it and flash from serial console with fcp -v redboot.20040719 /dev/mtd0 ?<br />2.- If I only want to change redboot, i must erase, delete and create mtd1, mtd2, mtd3, and mtd4 partitions?<br />3.- Finaly, any knowledgement if we modify mtd4 partition paramenters (RedBoot config) and reflash it (*) , and leave mtd0 partition, (RedBoot), unchanged?</p><p>tnhx in advanced.</p><p>(*) there is a tool to read and modify it at <a href="http://andrzejekiert.ovh.org/software.html.en">http://andrzejekiert.ovh.org/software.html.en</a><br />first of all we can dump mtd4 partition to a file, modify it with fconfig tool and reflash it</p>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 2 May 2009, 14:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87196">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ruff</div>
					<div class="post-datetime">
						3 May 2009, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>Ehm... How do you prepare image for loading? openwrt bin contains kernel image and rootfs tgz and squashfs. <br />I&#039;ve created cramfs image with <br /></p><div class="codebox"><pre><code>mkcramfs -v -i kamikadze/bin/openwrt-livebox-vmlinux.elf root/ vmlinux-openwrt.cramfs</code></pre></div><p>then I&#039;ve tried to load <br /></p><div class="codebox"><pre><code>load -v -r -b 0x80010000 vmlinux-openwrt.cramfs</code></pre></div><p>as well as <br /></p><div class="codebox"><pre><code>load -v -r -b 0x80010000 openwrt-brcm63xx-root.squashfs
load -v -r -b 0x80010000 openwrt-livebox-vmlinux.gz</code></pre></div><p>all of them give<br /></p><div class="codebox"><pre><code>RedBoot&gt; exec 0x80010000
Now booting linux kernel:
 Base address 0x8000fc00 Entry 0x80010000
 Cmdline : root=1F01 panic=2
** command abort - illegal memory access?
RedBoot&gt; exec
Now booting linux kernel:
 Base address 0x8000fc00 Entry 0x80010000
 Cmdline : root=1F01 panic=2
** command abort - illegal memory access?
RedBoot&gt; go
$T0425:80010000;1d:80ffffd0;#bb$T0425:80010000;1d:80ffffd0;#bb$T0425:80010000;1d
:80ffffd0;#bb</code></pre></div><p>i&#039;ve checked after kernel load memory - it is really there<br /></p><div class="codebox"><pre><code>RedBoot&gt; dump -b 0x80010000
80010000: 1F 8B 08 08 27 BF FA 49  02 03 76 6D 6C 69 6E 75  |....&#039;..I..vmlinu|
80010010: 78 00 EC 5B 0F 74 54 E5  95 BF EF BD 49 F2 26 19  |x..[.tT.....I.&amp;.|
..
RedBoot&gt; load -v -r -b 0x80010000 openwrt-livebox-vmlinux.elf
Using default protocol (TFTP)
-
Raw file loaded 0x80010000-0x802554e3, assumed entry at 0x80010000
RedBoot&gt; exec
Now booting linux kernel:
 Base address 0x8000fc00 Entry 0x80010000
 Cmdline : root=1F01 panic=2
** command abort - illegal memory access?
RedBoot&gt; dump -b 0x80010000
80010000: 7F 45 4C 46 01 02 01 00  00 00 00 00 00 00 00 00  |.ELF............|
80010010: 00 02 00 08 00 00 00 01  80 01 44 50 00 00 00 34  |..........DP...4|
RedBoot&gt;</code></pre></div>											<p class="post-edited">(Last edited by <strong>ruff</strong> on 3 May 2009, 19:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87197">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ruff</div>
					<div class="post-datetime">
						3 May 2009, 19:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>1.- I can download it and flash from serial console with fcp -v redboot.20040719 /dev/mtd0 ?<br />2.- If I only want to change redboot, i must erase, delete and create mtd1, mtd2, mtd3, and mtd4 partitions?<br />3.- Finaly, any knowledgement if we modify mtd4 partition paramenters (RedBoot config) and reflash it (*) , and leave mtd0 partition, (RedBoot), unchanged?</p></blockquote></div><p>1 - yes<br /></p><div class="codebox"><pre><code># fcp -v redboot.20040719 /dev/mtd0
Erasing blocks: 3/3 (100%)
Writing data: 192k/192k (100%)
Verifying data: 192k/192k (100%)
#
# reboot
Sending SIGTERM to adsld and pppd.</code></pre></div><p>and you have access to ctl+c<br />2 - no<br />3 - you can modify redboot config after getting to its promt via fconfig command, no need to manipulate partition directly</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87233">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						4 May 2009, 11:26					</div>
				</div>
				<div class="post-content content">
					<p>@ ruff,<br />tnhx for your answers, i will try.</p><p>Interest about only changing mtd4 partition is for maintain squashfs support on last versions of RedBoot, as i read from AndyP web pages ( <a href="http://www.andyp.uwclub.net/livebox_writing_to_flash.html">http://www.andyp.uwclub.net/livebox_wri … flash.html</a> )</p><div class="quotebox"><blockquote><p>....</p><p><strong> RedBoot Commands </strong></p><p>Using the RedBoot commands requires that you have a copy of RedBoot installed on the Livebox that allows you to break into the boot process. The earlier versions would allow you to break into the boot process by typing Ctrl-C during the initial loading of RedBoot. Later versions removed this. Also, the latest versions used in the Livebox now run a checksum on the root filesystem and refuse to complete the boot if the checksum is wrong.</p><p>Unfortunately, none of the older versions understand the squashfs filesystem used by the latest firmwares. This makes things difficult but not impossible. If you have your own local PC that you can use as a TFTP server and have installed a JTAG connection on the Livebox, you can use JTAG or Linux comands to flash an old version of RedBoot to the Livebox which you can break into via the serial port with Ctrl-C, then flash the image you want and finally use TFTP to load the kernel to the Livebox for booting. This is the method that I currently use on my Livebox. The following assumes that the IP address of the TFTP Server is 10.7.58.114 (the default for Livebox RedBoot tftp). </p><p>...</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>t3l3m4k0</strong> on 4 May 2009, 11:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87244">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ruff</div>
					<div class="post-datetime">
						4 May 2009, 13:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>t3l3m4k0 wrote:</cite><blockquote><p>Interest about only changing mtd4 partition is for maintain squashfs support on last versions of RedBoot, as i read from AndyP web pages ( <a href="http://www.andyp.uwclub.net/livebox_writing_to_flash.html">http://www.andyp.uwclub.net/livebox_wri … flash.html</a> )</p></blockquote></div><p>you mean to hack new redboot to enter its prompt? Or writing redboot config with your own configuration from outside? As for promt - it looks like ctl-c sequence disabled in binary, as even with zero timeout you can send ctlc just before script is launched.</p><p>For direct manipulation here is some resources<br /><a href="http://lists.gateworks.com/avila/2007-November/000840.html">http://lists.gateworks.com/avila/2007-N … 00840.html</a><br /><a href="http://lists.gateworks.com/avila/2006-November/000592.html">http://lists.gateworks.com/avila/2006-N … 00592.html</a><br /><a href="http://lists.gateworks.com/avila/2006-November/000589.html">http://lists.gateworks.com/avila/2006-N … 00589.html</a><br />but it assumes redboot patching, which is not our case, as we do not have redboot source for bcm63.<br />Though, next mail states it is possible to enable rw access in 2.6 kernel<br /><a href="http://lists.gateworks.com/avila/2006-November/000593.html">http://lists.gateworks.com/avila/2006-N … 00593.html</a></p><div class="codebox"><pre><code>merlin kamikadze # grep -i redboot target/linux/brcm63xx/*
target/linux/brcm63xx/config-2.6.27:CONFIG_MTD_REDBOOT_DIRECTORY_BLOCK=-1
target/linux/brcm63xx/config-2.6.27:CONFIG_MTD_REDBOOT_PARTS=y
target/linux/brcm63xx/config-2.6.27:CONFIG_MTD_REDBOOT_PARTS_READONLY=y
target/linux/brcm63xx/config-2.6.27:CONFIG_MTD_REDBOOT_PARTS_UNALLOCATED=y</code></pre></div><p>have something to try, if I manage to boot openwrt finally %)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87264">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">t3l3m4k0</div>
					<div class="post-datetime">
						4 May 2009, 16:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ruff wrote:</cite><blockquote><p>you mean to hack new redboot to enter its prompt? Or writing redboot config with your own configuration from outside? As for promt - it looks like ctl-c sequence disabled in binary, as even with zero timeout you can send ctlc just before script is launched.</p></blockquote></div><p>i have in mind to make our own config, but it will only be util if binary are propper</p><br /><br /><p>good luck booting</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87269">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">ruff</div>
					<div class="post-datetime">
						4 May 2009, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>So, the intention is to use old redboot image to prepare config and then replace it with new redboot, which should allow to boot normal squashfs openwrt image (using prepared config)? Unless redboot bin is modified to accept some presalted key in config - it could be done. fcp is not modifying redboot config partition, so...</p><p>Anyway, here is another nice howto of how to write redboot config partition<br /><a href="http://blog.coldtobi.de/1_coldtobis_blog/archive/157_la_fonera_a_better_way_to_enable_redboot_via_telnet__ethernet_safely_howto.html">http://blog.coldtobi.de/1_coldtobis_blo … howto.html</a><br />so, having onboard fconfig utility which can craft custom redboot config data and ability to flash that data gives possibility to try both options.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87273">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">juanito77</div>
					<div class="post-datetime">
						4 May 2009, 18:05					</div>
				</div>
				<div class="post-content content">
					<p>Hello iam new in this forum.</p><p>I have found this topic and it is very interesting for me because i want to use a livebox in accespoint.</p><p>Do you know if the wireless work in the livebox with the openwrt firmware?</p><p>Thank you for your good job and sorry for my bad english!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87276">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">ruff</div>
					<div class="post-datetime">
						4 May 2009, 18:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>juanito77 wrote:</cite><blockquote><p>i want to use a livebox in accespoint.</p></blockquote></div><p>You can use it as access point with original firmware, just set up needed wifi security profile and bridge wlan interface with ethernet. I&#039;ve been using the box in this mode till i found i can do more with it %)<br />Here is my /etc/wifi file to setup wpa security<br /></p><div class="codebox"><pre><code>WIFI_KEY_63=VeryNiceSecurityPhrase
WIFI_ESSID=ruff

SSID=${WIFI_ESSID:-$HNAME}
nas -H 34954 -P /var/run/nas.pid -l br0 -i wl0 -k $WIFI_KEY_63 -m 4 -s $SSID -w 2 -A -g 3600  &gt; /dev/console 2&gt;&amp;1
wlctl ap 1
wlctl ssid $SSID
wlctl wpa_auth 4
wlctl wsec 2
wlctl close 0
wlctl auth 0
wlctl up
wlctl essid $SSID</code></pre></div><p>and have wifi turned off in web config %)</p>											<p class="post-edited">(Last edited by <strong>ruff</strong> on 4 May 2009, 18:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87279">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">juanito77</div>
					<div class="post-datetime">
						4 May 2009, 19:21					</div>
				</div>
				<div class="post-content content">
					<p>Ok thank you very much for you fast answer.</p><p>So if i undertstand what you say:</p><p>i connect my computer in ssh or in telnet<br />i edit /etc/wifi</p><p>And i change that:<br />(Wifi key is passphrase and essid is juanito, i use WEPkey because iam in campaign)</p><br /><br /><p>WIFI_KEY_63=passphrase<br />WIFI_ESSID=juanito</p><p>SSID=${WIFI_ESSID:-$HNAME}<br />nas -H 34954 -P /var/run/nas.pid -l br0 -i wl0 -k $WIFI_KEY_63 -m 4 -s $SSID -w 2 -A -g 3600&nbsp; &gt; /dev/console 2&gt;&amp;1<br />wlctl ap 1<br />wlctl ssid $SSID<br />wlctl wep_auth 4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; %%%(iam in wep)%%%<br />wlctl wsec 2<br />wlctl close 0<br />wlctl auth 0<br />wlctl up<br />wlctl essid $SSID</p><br /><p>And i disable wifi in web config</p><br /><p>Thank you for your help</p>											<p class="post-edited">(Last edited by <strong>juanito77</strong> on 4 May 2009, 21:10)</p>
									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 4</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=18451&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=18451&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=18451&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>