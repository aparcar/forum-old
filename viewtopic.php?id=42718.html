<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-LINK MR3020 - Password recovery</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p194062">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">d82k</div>
					<div class="post-datetime">
						6 Mar 2013, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>Dear all, </p><p>I bought a product that it is supposed to block unwanted phonecall. I have opened the case and found that it is a tp-link mr3020 with a 56k usb modem attached.<br />I suspect that the original firmware of the tp-link has been changed to openwrt and a small program/script builted in it.</p><p>I would like to customize this product with some of my scripts, but unfortunately it is not possible to access the device. The only open port on the tplink is 22 ssh deamon is active. No other service is active.</p><p>Is there a method to get the root password in some way maybe connecting a serial cable or anything else?</p><p>Any advice could be usefull,<br />Thank you for your support,<br />dk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194068">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						7 Mar 2013, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>If it&#039;s actually OpenWRT, chances are the <a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3020#failsafe.mode">Failsafe Mode</a> may still be available, you should then be able to set a new root password (<a href="http://wiki.openwrt.org/doc/howto/generic.failsafe#in.failsafe.mode">howto</a>).</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 7 Mar 2013, 00:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194194">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">d82k</div>
					<div class="post-datetime">
						7 Mar 2013, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>Thank you metai for your answer.<br />I will try to boot it in Failsafe mode and see what happen.<br />In case the button metod is not going to work I will try the serial cable...<br />Thank you for your suggestion,<br />dk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194197">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">d82k</div>
					<div class="post-datetime">
						7 Mar 2013, 23:41					</div>
				</div>
				<div class="post-content content">
					<p>One more thing... just starting the failsafe mode (and running no command), does it change something permanently or not?<br />Thank you<br />dk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194198">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						7 Mar 2013, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>No, it doesn&#039;t.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194344">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">d82k</div>
					<div class="post-datetime">
						9 Mar 2013, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>Ok I found time to test. Yes it is running open wrt (BusyBox 1.19.4, bleeding edge r32130) and using failsafe mode I was able to telnet.<br />Now just to understand..</p><p>root@(none):/# cat /etc/passwd<br />root:x:0:0:root:/root:/bin/ash<br />daemon:*:1:1:daemon:/var:/bin/false<br />ftp:*:55:55:ftp:/home/ftp:/bin/false<br />network:*:101:101:network:/var:/bin/false<br />nobody:*:65534:65534:nobody:/var:/bin/false</p><p>root@(none):/# cat /etc/shadow<br />root:x:0:0:99999:7:::<br />daemon:*:0:0:99999:7:::<br />ftp:*:0:0:99999:7:::<br />network:*:0:0:99999:7:::<br />nobody:*:0:0:99999:7:::</p><p>Is it the &quot;x&quot; in the second field of the /etc/shadow file correct? What does it means? I think that it should contain the password hash instead..<br />Thank you,<br />dk</p><br /><p>EDIT: solved .. i forgot to run mount_root <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />thank you</p>											<p class="post-edited">(Last edited by <strong>d82k</strong> on 9 Mar 2013, 16:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194348">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						9 Mar 2013, 17:09					</div>
				</div>
				<div class="post-content content">
					<p>&quot;x&quot; is, obviously, not a valid password hash. In effect this disables the login for this user because no password can ever be confirmed. mount_root and set a new, proper password.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>