<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVED] Can&#039;t forward the port 443</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p331867">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">emmanuellgd</div>
					<div class="post-datetime">
						16 Jul 2016, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have installed lighttpd on my openwrt to act as a proxy. I have opened two ports: 8080 and 4343. Both are working fine in local (http://192.168.51.1:8080 as well as <a href="https://192.168.51.1:4343">https://192.168.51.1:4343</a> work). </p><p>I have then defined two rules to access it from outside. For that I have added to /etc/config/firewall, restarted the firewall and even the router:<br /></p><div class="codebox"><pre><code>config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;80&#039;
        option dest_ip &#039;192.168.51.1&#039;
        option dest_port &#039;8080&#039;
        option name &#039;HTTP-lighttpd&#039;


config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp&#039;
        option src_dport &#039;443&#039;
        option dest_ip &#039;192.168.51.1&#039;
        option dest_port &#039;4343&#039;
        option name &#039;HTTPS-lighttpd&#039;</code></pre></div><p>http works fine but not https !</p><p>More Info:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# netstat -nltp | grep light
tcp        0      0 0.0.0.0:8080            0.0.0.0:*               LISTEN      6129/lighttpd
tcp        0      0 0.0.0.0:4343            0.0.0.0:*               LISTEN      6129/lighttpd</code></pre></div><p>From a remote console:<br /></p><div class="codebox"><pre><code>$ nmap MYIP -p 80
Starting Nmap 7.01 ( https://nmap.org ) at 2016-07-16 17:38 CEST
Host is up (0.026s latency).
PORT   STATE SERVICE
80/tcp open  http


$ nmap MYIP -p 443
Starting Nmap 7.01 ( https://nmap.org ) at 2016-07-16 17:38 CEST
Host is up (0.027s latency).
PORT    STATE  SERVICE
443/tcp closed https</code></pre></div><p>I have even tried <em>option src_dport &#039;4343&#039;</em> without more success.</p><p>Any Idea ?</p><p>Thanks in advance !</p>											<p class="post-edited">(Last edited by <strong>emmanuellgd</strong> on 18 Jul 2016, 22:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332024">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">emmanuellgd</div>
					<div class="post-datetime">
						18 Jul 2016, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>up ? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332032">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						18 Jul 2016, 13:06					</div>
				</div>
				<div class="post-content content">
					<p>Dump your current iptables rules, just to be sure that everything is running as expected.<br />If everything there seems correct, perhaps your ISP is blocking port 443.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332074">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">emmanuellgd</div>
					<div class="post-datetime">
						18 Jul 2016, 22:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi and Thanks, I think my router has reserved the port 443 so I changed that and it works well <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>