<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WZR-HP-G301NH Bricked?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 14 Apr 2018 and 20 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=26750&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=26750&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=26750&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p118067">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						29 Sep 2010, 03:41					</div>
				</div>
				<div class="post-content content">
					<p>I had DD-WRT successfully running for a few weeks before I tried to switch over to OpenWrt. I followed the instructions here: <a href="http://wiki.openwrt.org/inbox/buffalo/wzr-hp-g300h">http://wiki.openwrt.org/inbox/buffalo/wzr-hp-g300h</a> for migrating from DD-WRT to OpenWrt, it seemed that everything went well but after the router rebooted it just never loaded properly.</p><p>Symptoms:<br />- No GUI web page found<br />- No response from telnet or SSH<br />- Boot light sequence: <br />&nbsp; &nbsp; 1. Power light ON, DIAG light ON <br />&nbsp; &nbsp; 2. (After about 10 seconds) DIAG light turns OFF, Router light flashes<br />&nbsp; &nbsp; 3. (After about 10 seconds) Router light solid<br />- No response from 30/30/30 reset procedure</p><p>Attempts:<br />I have tried the tftp procedure listed on OpenWrt and various other forums but it doesn&#039;t seem to work.<br />- Windows 7: tftp is successful at sending firmware upon booting the router. I have tried to send OpenWrt, DD-WRT and factory firmware. After cmd displays successful transfer, the router displays the boot light sequence above. I have also tried renaming the file to .tftp extension.<br />- Lunix: tftp will just continuously display the sending message until it times out.</p><p>Does this sound bricked? Any suggestions or help for what to do next is greatly appreciated. Thank you!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118071">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">xafaftershock</div>
					<div class="post-datetime">
						29 Sep 2010, 04:48					</div>
				</div>
				<div class="post-content content">
					<p>just to confirm you are actually using the wzr-hp-g301nh and not the 300nh, if it is the 301 its not compatible with the 300nh firmware and you would have to tftp either compatible ddwrt or stock buffalo firmware but I wouldn&#039;t worry about bricking these routers, the safety mechanism that kicks in during the 1st 3 seconds of boot isn&#039;t corruptible so as long as the router isn&#039;t fried it isn&#039;t bricked.</p>											<p class="post-edited">(Last edited by <strong>xafaftershock</strong> on 29 Sep 2010, 04:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118090">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						29 Sep 2010, 11:22					</div>
				</div>
				<div class="post-content content">
					<p>Yes thats correct, I have the G301NH. As far as i know the hardware is identical to the G300NH but there might be a firmware check at boot or something like that. I have successfully run both the G300NH and G301NH DD-WRT firmware before and they appear identical. </p><p>To fix the unit I have tried to tftp both the stock and DD-WRT firmware for the G301NH and it seems the result is the same, not working. Its a relief and good news that these units are hard to brick, any ideas as to what I am doing wrong?</p><p>Oh I found this link: <a href="http://g300nh.blogspot.com/2010/06/firmware-flash-and-brick-recovery.html">http://g300nh.blogspot.com/2010/06/firm … overy.html</a><br />I was thinking I will give these instructions in Windows 7 a try but of course with the G301NH firmware. I will let you know if any new results occur.</p>											<p class="post-edited">(Last edited by <strong>unfoldedtoast</strong> on 29 Sep 2010, 11:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118096">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">xafaftershock</div>
					<div class="post-datetime">
						29 Sep 2010, 14:10					</div>
				</div>
				<div class="post-content content">
					<p>damn it my reply didn&#039;t stick so I&#039;ll keep it short. It sounds like the firmware flashed successful giving the router light is solid green with no flashing diag light. after you tftp the firmware did you go back and remove the static ip info so your not trying to access openwrt or ddwrt using 192.168.11.1? I know it sounds simple but I&#039;ve stumped myself a couple times by forgetting to remove my static entries. the guide that you posted in your 1st post is the one I used except I had to skip setting a static arp entry because that method in the wiki doesn&#039;t work for win7 64bit but I was still able to tftp without it.</p>											<p class="post-edited">(Last edited by <strong>xafaftershock</strong> on 29 Sep 2010, 14:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118104">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						29 Sep 2010, 17:09					</div>
				</div>
				<div class="post-content content">
					<p>Yes I am sure that I removed the static arp entry. I will give the wiki one a go again except this time I will avoid the static arp entry as you suggested and see if it makes any difference. Thank you for the help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118106">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						29 Sep 2010, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>I just gave both the new tutorial I found and also the wiki one but this time not setting the static arp, both failed the same as before. I am starting to get worried that I toasted it!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118116">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						29 Sep 2010, 20:46					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://forum.openwrt.org/viewtopic.php?id=26444">OpenWrt / [HELP needed] WZR-HP-G300NH back to original firmware</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118225">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						1 Oct 2010, 03:41					</div>
				</div>
				<div class="post-content content">
					<p>After spending 10+ hours on this thing, I decided to take the easy way out and did an exchange at the store for a new one. I will just stick to the stock firmware until DD-WRT goes stable now.<br />Thank you fyi for the link and also xafaftershock for all your help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118230">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">xafaftershock</div>
					<div class="post-datetime">
						1 Oct 2010, 06:05					</div>
				</div>
				<div class="post-content content">
					<p>np, I don&#039;t know what it is that makes the 301 such a pain in the butt, if I ever seen one on ebay for cheap I will grab it and try to see figure out why its so much harder to revert. I did come across an idea while trying out the new ddwrt today and not being able to get my firmware to stick but went back to openwrt 10 min later because my usb drive wouldn&#039;t be detected and didn&#039;t plan on sticking with the ddwrt long enough to start hunting for solutions, mostly I was just seeing if they are ever going to get the LEDS to work correctly which I guess must still beyond there abilties lol.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118232">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						1 Oct 2010, 07:15					</div>
				</div>
				<div class="post-content content">
					<p>The LED&#039;s were one thing that really puzzled me, but to be honest it was the least of my worries. I had WiFi issues where there were two or more SSID&#039;s being broadcast. Also the signal strength was all over the place. I don&#039;t know if I will ever try OpenWrt again because its made for the G300NH and not the G301NH so I think it wont flash correctly. I just have to suffer with my Japanese stock firmware until DD-WRT is more refined.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118760">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						9 Oct 2010, 20:24					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://scarygliders.net/?p=13">Scary Gliders » Hacking around the Japanese Buffalo WZR-HP-G300NH</a><br /></p><div class="quotebox"><blockquote><p>Zgembo posted the following on October 2, 2010 at 10:17 pm.</p><p>an update:</p><p>I got myself Japanese WZR-HP-G300NH, and ran into same problems. Messing a bit with the u-boot console and comparing boot variables with non-Japanese WZR-HP-G300NH, i found out an interesting setting, simply typing:</p><p>ar7100&gt; setenv accept_open_rt_fmt 1<br />ar7100&gt; saveenv<br />Will enable flashing any compatible firmware via TFTP! Tested with OpenWRT 10.03</p></blockquote></div><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=66494">DD-WRT Forum :: View topic - Japanese WZR-HP-G300N will not install dd-wrt.</a><br /><a href="https://forum.openwrt.org/viewtopic.php?pid=118756#p118756">OpenWrt / ASUS RT-N15 serial console</a>, get a USB to serial cable for USD5.5 and start hacking by yourself.</p>											<p class="post-edited">(Last edited by <strong>fyi</strong> on 9 Oct 2010, 20:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118776">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">unfoldedtoast</div>
					<div class="post-datetime">
						10 Oct 2010, 03:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fyi wrote:</cite><blockquote><p><a href="http://scarygliders.net/?p=13">Scary Gliders » Hacking around the Japanese Buffalo WZR-HP-G300NH</a><br /></p><div class="quotebox"><blockquote><p>Zgembo posted the following on October 2, 2010 at 10:17 pm.</p><p>an update:</p><p>I got myself Japanese WZR-HP-G300NH, and ran into same problems. Messing a bit with the u-boot console and comparing boot variables with non-Japanese WZR-HP-G300NH, i found out an interesting setting, simply typing:</p><p>ar7100&gt; setenv accept_open_rt_fmt 1<br />ar7100&gt; saveenv<br />Will enable flashing any compatible firmware via TFTP! Tested with OpenWRT 10.03</p></blockquote></div><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=66494">DD-WRT Forum :: View topic - Japanese WZR-HP-G300N will not install dd-wrt.</a><br /><a href="https://forum.openwrt.org/viewtopic.php?pid=118756#p118756">OpenWrt / ASUS RT-N15 serial console</a>, get a USB to serial cable for USD5.5 and start hacking by yourself.</p></blockquote></div><p>Thank you for the information. I am a little confused here, is the &quot;Japanese Buffalo WZR-HP-G300NH&quot; the same as the WZR-HP-G301NH? I know that the OpenWRT firmware is only available for the G300NH and not the G301NH and I think that was why it didn&#039;t work in the first place. If you know, I still really want to get OpenWRT running on my new unit. Thanks again fyi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118786">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						10 Oct 2010, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>Someone said that the firmware v1.74 beta for WZR-HP-G301NH is same as for WZR-HP-G301NH. You can check it by yourself.</p><p><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=72949">DD-WRT Forum :: View topic - Buffalo WZR-HP-G301NH web-flashed to dd-wrt v24-sp2 14402</a><br /><a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=73191">DD-WRT Forum :: View topic - WZR-HP-G301NH goes to 1-2mbps and then becomes unresponsive</a><br /><a href="http://easytorotan.blogspot.com/2010/04/difference-of-wireless-lan-buffalo.html">A difference of the wireless LAN BUFFALO AirStation NFINITI WZR series WHR series, comparison - easyToRoTAN</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120679">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						9 Nov 2010, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I also have a Japanese WZR-HP-G301NH (I think this is only sold in Japan, right?)</p><p>I bought it with the impression that it&#039;s the same as the 300NH, but I guess it&#039;s not?&nbsp; I had the same problem with trying to get OPENWRT onto it.&nbsp; I used a serial console as shown on <a href="http://scarygliders.net/?p=13">http://scarygliders.net/?p=13</a></p><p>that seemed to work.&nbsp; I could then tftp any firmware I wanted onto it.&nbsp; But I have the same problem, green light flashes a while, then goes solid, and nothing.&nbsp; But I have the serial console hooked up, and OPENWRT is in fact booting up.&nbsp; Everything looks totally fine on the console, I can login, ls, cd, and so on.</p><p>But if I do &quot;ifconfig&quot;, there are no network interfaces.&nbsp; Just &#039;lo&#039; at 127.0.0.1&nbsp; </p><p>Anyone have any ideas?&nbsp; It&#039;d be really great to get this router working with OPENWRT and it seems like some little glitch somewhere, some little setting change or something.&nbsp; Because the firmware is running!&nbsp; It just somehow doesn&#039;t see any network interfaces.&nbsp; And I can&#039;t do any packages or anything because there&#039;s no network access.</p><p>So I bet this is what&#039;s happening with other people who have &quot;bricked&quot; there routers.&nbsp; It&#039;s running but just doesn&#039;t bring up any network.</p><p>If people who know a lot more / developers want me to try some things, I would be happy to help.&nbsp; I have full console access to the thing, but I don&#039;t really know much about OPENWRT.&nbsp; I tried obvious things like &quot;ifup eth0&quot; and &quot;/etc/init.d/network restart&quot; and stuff, but nothing.</p><p>Hope it can work... right now I&#039;m using DD-WRT which is kind of a mess.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120682">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						9 Nov 2010, 17:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Igarashi wrote:</cite><blockquote><p>Hi, I also have a Japanese WZR-HP-G301NH (I think this is only sold in Japan, right?)</p><p>I bought it with the impression that it&#039;s the same as the 300NH, but I guess it&#039;s not?&nbsp; I had the same problem with trying to get OPENWRT onto it.&nbsp; I used a serial console as shown on <a href="http://scarygliders.net/?p=13">http://scarygliders.net/?p=13</a></p><p>that seemed to work.&nbsp; I could then tftp any firmware I wanted onto it.&nbsp; But I have the same problem, green light flashes a while, then goes solid, and nothing.&nbsp; But I have the serial console hooked up, and OPENWRT is in fact booting up.&nbsp; Everything looks totally fine on the console, I can login, ls, cd, and so on.</p><p>But if I do &quot;ifconfig&quot;, there are no network interfaces.&nbsp; Just &#039;lo&#039; at 127.0.0.1&nbsp; </p><p>Anyone have any ideas?&nbsp; It&#039;d be really great to get this router working with OPENWRT and it seems like some little glitch somewhere, some little setting change or something.&nbsp; Because the firmware is running!&nbsp; It just somehow doesn&#039;t see any network interfaces.&nbsp; And I can&#039;t do any packages or anything because there&#039;s no network access.</p><p>So I bet this is what&#039;s happening with other people who have &quot;bricked&quot; there routers.&nbsp; It&#039;s running but just doesn&#039;t bring up any network.</p><p>If people who know a lot more / developers want me to try some things, I would be happy to help.&nbsp; I have full console access to the thing, but I don&#039;t really know much about OPENWRT.&nbsp; I tried obvious things like &quot;ifup eth0&quot; and &quot;/etc/init.d/network restart&quot; and stuff, but nothing.</p><p>Hope it can work... right now I&#039;m using DD-WRT which is kind of a mess.</p></blockquote></div><p>Posting the bootlog would be start.</p><p>KM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120709">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						10 Nov 2010, 02:11					</div>
				</div>
				<div class="post-content content">
					<p>OK - not exactly sure what you mean by &quot;boot log&quot; so I have two logs, one from the initial flashing and one from a power-on, and the power-on log has a little bit of me messing around in the shell at the end.</p><p>I guess I&#039;ll just post it here?&nbsp; Super long though...</p><p>ok the flashing one<br />this file:<br /><a href="http://backfire.openwrt.org/10.03.1-rc3/ar71xx/openwrt-ar71xx-wzr-hp-g300nh-squashfs-tftp.bin">http://backfire.openwrt.org/10.03.1-rc3 … s-tftp.bin</a></p><p> </p><div class="codebox"><pre><code>=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2010.11.10 08:50:11 =~=~=~=~=~=~=~=~=~=~=~=




BUFFALO U-BOOT Ver 1.07
AP83--539 (ar9100) U-boot 0.0.12
64 MB
Memory Test (address line)
Memory Test start(0x00000000) end(0x04000000) size(67108864)
Data line test start:0x00000000 pattern 0x00000001 0x00000003 0x00000007 0x0000000F 0x00000005 0x00000015 0x00000055 0xAAAAAAAA 
Address line test start:0x00000000 len:0x4000000 pattern 0xAAAAAAAA 0x55555555  
Fill test patnum:5 
fill Pattern 5555AAAA  Writing...             Reading...
fill Pattern AAAA5555  Writing...             Reading...
fill Pattern 0000FFFF  Writing...             Reading...
fill Pattern FFFF0000  Writing...             Reading...
fill Pattern AAAAAAAA  Writing...             Reading...
Top of RAM usable for U-Boot at: 84000000
Reserving 275k for U-Boot at: 83fb8000
Reserving 256k for malloc() at: 83f78000
Reserving 44 Bytes for Board Info at: 83f77fd4
Reserving 36 Bytes for Global Data at: 83f77fb0
Reserving 128k for boot params() at: 83f57fb0
Stack Pointer at: 83f57f98
Now running in RAM - U-Boot at: 83fb8000
Dev ID2:2222
Dev ID3:2201
Name: AMD-SPANSION Flash id: 0x1227E, Size: 33554432 bytes.
Flash: 32 MB
In:    serial
Out:   serial
Err:   serial
Memory Test
uboot use  83F57FB0 - 84000000
Memory Test start(80000000) end(83F00000) size(03F00000)

Pattern 55555555  Writing...            Reading...
Pattern AAAAAAAA  Writing...            Reading...
Pattern 00000000  Writing...            Reading...
Memory Test OK
### buf_ver=[1.07] U-Boot Ver.=[1.07]
### build_date(env)=[Dec 21 2009 - 10:37:30] build_date(bin)=[Dec 21 2009 - 10:37:30]
ag7100_enet_initialize...
: cfg1 0xf cfg2 0x7114
RTL8366 series driver, reading model-id...
  ID:0x5937, REV:0x0
rtl8366rb_phy_setup  ethUnit=0
Realtek 8366RB switch ID:0x5937 REV:0x3
Realtek Greeen Ethernet Setup
eth0: 02:aa:bb:cc:dd:1a
eth0 up
: cfg1 0x7 cfg2 0x7114
RTL8366 series driver, reading model-id...
eth1: 02:aa:bb:cc:dd:1a
eth1 up
eth0  02:AA:BB:CC:DD:1A
, eth1  02:AA:BB:CC:DD:1A

Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
dup 1 speed 100
CFG_PLL_FREQ=5
CFG_HZ=bebc200
cpu pll=1050
eth pll=1032
eth0 clk pll=13000a44
eth0 mii=12
eth0 cfg1=f
eth0 cfg2=7115
eth0 fcfg_0=1d1f00
eth0 fcfg_1=7ff0000
eth0 fcfg_2=fff
eth0 fcfg_3=780008
eth0 fcfg_4=3ffff
eth0 fcfg_5=3ffff

tftp server(receive) go, waiting:30[sec]
Trying eth1
eth1 link down
FAIL
Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
Load address: 0x81f00000
$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
 $$$$$$$$$$$$$$$$
tftp server done
Bytes transferred = 3407904 (340020 hex)

Airstation Public header
Recv fw image [3407872] bytes, now writing...

Erase Flash from 0xbe060000 to 0xbe39ffff in Bank # 1 First 0x3 last 0x1c
   3%   7%  11%  15%  19%  23%  26%  30%  34%  38%  42%  46%  50%  53%  57%  61%  65%  69%  73%  76%  80%  84%  88%  92%  96% 100%
Erased 26 sectors
Copy to Flash... 
 Copy 3407872 byte to Flash... 
   1%   2%   3%   4%   5%   6%   7%   8%   9%  10%  11%  12%  13%  14%  15%  16%  17%  18%  19%  20%  21%  22%  23%  24%  25%  26%  27%  28%  29%  30%  31%  32%  33%  34%  35%  36%  37%  38%  39%  40%  41%  42%  43%  44%  45%  46%  47%  48%  49%  50%  51%  52%  53%  54%  55%  56%  57%  58%  59%  60%  61%  62%  63%  64%  65%  66%  67%  68%  69%  70%  71%  72%  73%  74%  75%  76%  77%  78%  79%  80%  81%  82%  83%  84%  85%  86%  87%  88%  89%  90%  91%  92%  93%  94%  95%  96%  97%  98%  99% 100%
done
## Booting image at be060000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.32.16
   Created:      2010-08-25  22:28:16 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    886461 Bytes = 865.7 kB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.32.16 (openwrt@ampere) (gcc version 4.3.3 (GCC) ) #1 Wed Aug 25 15:20:15 PDT 2010
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR9132 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=WZR-HP-G300NH
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 61716k/65536k available (2109k kernel code, 3744k reserved, 398k data, 152k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:56
Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is Buffalo WZR-HP-G300NH
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
yaffs Aug 25 2010 15:11:02 Installing. 
msgmni has been set to 120
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
console [ttyS0] enabled, bootconsole disabled
ar91xx-flash ar91xx-flash: 02000000 at 1e000000
ar91xx-flash: Found 1 x16 devices at 0x0 in 16-bit bank
 CFI mfr 0x00000001
 CFI id  0x00002201
 Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.3.
ar91xx-flash: CFI does not contain boot bank location. Assuming top.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
ar91xx-flash ar91xx-flash: using static partition mapping
Creating 7 MTD partitions on &quot;ar91xx-flash&quot;:
0x000000000000-0x000000040000 : &quot;u-boot&quot;
0x000000040000-0x000000060000 : &quot;u-boot-env&quot;
0x000000060000-0x000000160000 : &quot;kernel&quot;
0x000000160000-0x000001fc0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=380000, len=1C40000 
0x000000380000-0x000001fc0000 : &quot;rootfs_data&quot;
0x000001fc0000-0x000001fe0000 : &quot;user_property&quot;
0x000001fe0000-0x000002000000 : &quot;art&quot;
0x000000060000-0x000001fc0000 : &quot;firmware&quot;
Atheros AR71xx SPI Controller driver version 0.2.4
Realtek RTL8366S ethernet switch driver version 0.2.2
rtl8366s rtl8366s: using GPIO pins 19 (SDA) and 20 (SCK)
rtl8366s rtl8366s: unknown chip id (0000)
rtl8366s rtl8366s: chip detection failed, err=-19
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: unable to find MII bus on device &#039;rtl8366s&#039;
eth0: Atheros AG71xx at 0xba000000, irq 5
eth0: unable to find MII bus on device &#039;rtl8366s&#039;
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 152k freed
Please be patient, while OpenWrt loads ...
gpio-buttons driver version 0.1.2
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
- preinit -
Registered led device: wzr-hp-g300nh:orange:security
Registered led device: wzr-hp-g300nh:green:wireless
Registered led device: wzr-hp-g300nh:green:router
Registered led device: wzr-hp-g300nh:red:diag
Registered led device: wzr-hp-g300nh:blue:usb
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -

Please press Enter to activate this console. Compat-wireless backport release: compat-wireless-2010-07-13-4-g04898a5
Backport based on wireless-2.6.git v2.6.35-rc6-48432-gdce358e
cfg80211: Calling CRDA to update world regulatory domain
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
usbcore: registered new device driver usb
phy0: Atheros AR9100 MAC/BB Rev:0 AR2133 RF Rev:a2 mem=0xb80c0000, irq=2
cfg80211: Calling CRDA for country: US
cfg80211: Regulatory domain changed to country: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
    (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR91xx builtZ*!
%controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
nf_conntrack version 0.5.0 (967 buckets, 3868 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
ath_hal: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 2009-05-08 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, XR)
ath_pci: trunk
wlan: trunk
wlan: mac acl policy registered
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
jffs2_build_filesystem(): unlocking the mtd device... done.
jffs2_build_filesystem(): erasing all blocks after the end marker... done.
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay</code></pre></div><p>that&#039;s where it stopped, and had the green light on solid but no DHCP or network response.</p><p>So here&#039;s a log of a boot-up after flashing:</p><div class="codebox"><pre><code>=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2010.11.10 09:00:39 =~=~=~=~=~=~=~=~=~=~=~=




BUFFALO U-BOOT Ver 1.07
AP83--539 (ar9100) U-boot 0.0.12
64 MB
Memory Test (address line)
Memory Test start(0x00000000) end(0x04000000) size(67108864)
Data line test start:0x00000000 pattern 0x00000001 0x00000003 0x00000007 0x0000000F 0x00000005 0x00000015 0x00000055 0xAAAAAAAA 
Address line test start:0x00000000 len:0x4000000 pattern 0xAAAAAAAA 0x55555555  
Fill test patnum:5 
fill Pattern 5555AAAA  Writing...             Reading...
fill Pattern AAAA5555  Writing...             Reading...
fill Pattern 0000FFFF  Writing...             Reading...
fill Pattern FFFF0000  Writing...             Reading...
fill Pattern AAAAAAAA  Writing...             Reading...
Top of RAM usable for U-Boot at: 84000000
Reserving 275k for U-Boot at: 83fb8000
Reserving 256k for malloc() at: 83f78000
Reserving 44 Bytes for Board Info at: 83f77fd4
Reserving 36 Bytes for Global Data at: 83f77fb0
Reserving 128k for boot params() at: 83f57fb0
Stack Pointer at: 83f57f98
Now running in RAM - U-Boot at: 83fb8000
Dev ID2:2222
Dev ID3:2201
Name: AMD-SPANSION Flash id: 0x1227E, Size: 33554432 bytes.
Flash: 32 MB
In:    serial
Out:   serial
Err:   serial
Memory Test
uboot use  83F57FB0 - 84000000
Memory Test start(80000000) end(83F00000) size(03F00000)

Pattern 55555555  Writing...            Reading...
Pattern AAAAAAAA  Writing...            Reading...
Pattern 00000000  Writing...            Reading...
Memory Test OK
### buf_ver=[1.07] U-Boot Ver.=[1.07]
### build_date(env)=[Dec 21 2009 - 10:37:30] build_date(bin)=[Dec 21 2009 - 10:37:30]
ag7100_enet_initialize...
: cfg1 0xf cfg2 0x7114
RTL8366 series driver, reading model-id...
  ID:0x5937, REV:0x0
rtl8366rb_phy_setup  ethUnit=0
Realtek 8366RB switch ID:0x5937 REV:0x3
Realtek Greeen Ethernet Setup
eth0: 02:aa:bb:cc:dd:1a
eth0 up
: cfg1 0x7 cfg2 0x7114
RTL8366 series driver, reading model-id...
eth1: 02:aa:bb:cc:dd:1a
eth1 up
eth0  02:AA:BB:CC:DD:1A
, eth1  02:AA:BB:CC:DD:1A

Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
dup 1 speed 100
CFG_PLL_FREQ=5
CFG_HZ=bebc200
cpu pll=1050
eth pll=1032
eth0 clk pll=13000a44
eth0 mii=12
eth0 cfg1=f
eth0 cfg2=7115
eth0 fcfg_0=1d1f00
eth0 fcfg_1=7ff0000
eth0 fcfg_2=fff
eth0 fcfg_3=780008
eth0 fcfg_4=3ffff
eth0 fcfg_5=3ffff

tftp server(receive) go, waiting:30[sec]
Trying eth1
eth1 link down
FAIL
Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
Load address: 0x81f00000

TftpServer Timeout;
no file was loaded.
## Booting image at be060000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.32.16
   Created:      2010-08-25  22:28:16 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    886461 Bytes = 865.7 kB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.32.16 (openwrt@ampere) (gcc version 4.3.3 (GCC) ) #1 Wed Aug 25 15:20:15 PDT 2010
bootconsole [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR9132 rev 2, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200 board=WZR-HP-G300NH
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
Memory: 61716k/65536k available (2109k kernel code, 3744k reserved, 398k data, 152k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Hierarchical RCU implementation.
NR_IRQS:56
Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
MIPS: machine is Buffalo WZR-HP-G300NH
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  © 2001-2006 Red Hat, Inc.
yaffs Aug 25 2010 15:11:02 Installing. 
msgmni has been set to 120
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console [ttyS0] enabled, bootconsole disabled
console [ttyS0] enabled, bootconsole disabled
ar91xx-flash ar91xx-flash: 02000000 at 1e000000
ar91xx-flash: Found 1 x16 devices at 0x0 in 16-bit bank
 CFI mfr 0x00000001
 CFI id  0x00002201
 Amd/Fujitsu Extended Query Table at 0x0040
  Amd/Fujitsu Extended Query version 1.3.
ar91xx-flash: CFI does not contain boot bank location. Assuming top.
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
ar91xx-flash ar91xx-flash: using static partition mapping
Creating 7 MTD partitions on &quot;ar91xx-flash&quot;:
0x000000000000-0x000000040000 : &quot;u-boot&quot;
0x000000040000-0x000000060000 : &quot;u-boot-env&quot;
0x000000060000-0x000000160000 : &quot;kernel&quot;
0x000000160000-0x000001fc0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=380000, len=1C40000 
0x000000380000-0x000001fc0000 : &quot;rootfs_data&quot;
0x000001fc0000-0x000001fe0000 : &quot;user_property&quot;
0x000001fe0000-0x000002000000 : &quot;art&quot;
0x000000060000-0x000001fc0000 : &quot;firmware&quot;
Atheros AR71xx SPI Controller driver version 0.2.4
Realtek RTL8366S ethernet switch driver version 0.2.2
rtl8366s rtl8366s: using GPIO pins 19 (SDA) and 20 (SCK)
rtl8366s rtl8366s: unknown chip id (0000)
rtl8366s rtl8366s: chip detection failed, err=-19
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: unable to find MII bus on device &#039;rtl8366s&#039;
eth0: Atheros AG71xx at 0xba000000, irq 5
eth0: unable to find MII bus on device &#039;rtl8366s&#039;
Atheros AR71xx hardware watchdog driver version 0.1.0
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 152k freed
Please be patient, while OpenWrt loads ...
gpio-buttons driver version 0.1.2
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
- preinit -
Registered led device: wzr-hp-g300nh:orange:security
Registered led device: wzr-hp-g300nh:green:wireless
Registered led device: wzr-hp-g300nh:green:router
Registered led device: wzr-hp-g300nh:red:diag
Registered led device: wzr-hp-g300nh:blue:usb
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /overlay
- init -

Please press Enter to activate this console. Compat-wireless backport release: compat-wireless-2010-07-13-4-g04898a5
Backport based on wireless-2.6.git v2.6.35-rc6-48432-gdce358e
cfg80211: Calling CRDA to update world regulatory domain
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
cfg80211: World regulatory domain updated:
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
usbcore: registered new device driver usb
phy0: Atheros AR9100 MAC/BB Rev:0 AR2133 RF Rev:a2 mem=0xb80c0000, irq=2
cfg80211: Calling CRDA for country: US
cfg80211: Regulatory domain changed to country: US
    (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
    (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
    (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
    (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
    (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
nf_conntrack version 0.5.0 (967 buckets, 3868 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel parameter, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
ath_hal: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint
ath_hal: 2009-05-08 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, XR)
ath_pci: trunk
wlan: trunk
wlan: mac acl policy registered
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver



BusyBox v1.15.3 (2010-07-10 11:43:31 PDT) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03.1-rc3, r22796) --------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua 
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s, 
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@OpenWrt:/# ls
bin      etc      mnt      proc     root     sys      usr      www
dev      lib      overlay  rom      sbin     tmp      var
root@OpenWrt:/# ifcon
root@OpenWrt:/# ifconfig 
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/# ifc
root@OpenWrt:/# ifconfig eth0           up eth0
interface not found.
root@OpenWrt:/# ifup wlan0
interface not found.
root@OpenWrt:/# . /et
root@OpenWrt:/# /etc/ini
root@OpenWrt:/# /etc/init.
root@OpenWrt:/# /etc/init.d/ne
root@OpenWrt:/# /etc/init.d/network 
Syntax: /etc/init.d/network [command]

Available commands:
startStart the service
stopStop the service
restartRestart the service
reloadReload configuration files (or restart if that fails)
enableEnable service autostart
disableDisable service autostart

root@OpenWrt:/# 
root@OpenWrt:/# /etc/init.d/network restart
Failed to connect to the switch
route: fscanf
ifconfig: SIOCSIFADDR: No such device
udhcpc: SIOCGIFINDEX: No such device
&#039;radio0&#039; is disabled
&#039;radio0&#039; is disabled
route: fscanf
root@OpenWrt:/# cd /de
root@OpenWrt:/# cd /dev/
root@OpenWrt:/dev# ls
console             mtd4ro              network_latency
cpu_dma_latency     mtd5                network_throughput
full                mtd5ro              null
kmsg                mtd6                port
log                 mtd6ro              ppp
mem                 mtd7                ptmx
mtd0                mtd7ro              pts
mtd0ro              mtdblock0           random
mtd1                mtdblock1           shm
mtd1ro              mtdblock2           tty
mtd2                mtdblock3           ttyS0
mtd2ro              mtdblock4           urandom
mtd3                mtdblock5           usb1
mtd3ro              mtdblock6           watchdog
mtd4                mtdblock7           zero
root@OpenWrt:/dev#</code></pre></div><p>so no network but maybe it&#039;s just a matter of turning it on, or drivers or something?&nbsp; If there&#039;s any shell commands I could type and you&#039;d like to get the response from please let me know!&nbsp; Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120724">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						10 Nov 2010, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>That was what I meant <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="codebox"><pre><code>Realtek RTL8366S ethernet switch driver version 0.2.2
rtl8366s rtl8366s: using GPIO pins 19 (SDA) and 20 (SCK)
rtl8366s rtl8366s: unknown chip id (0000)
rtl8366s rtl8366s: chip detection failed, err=-19
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: unable to find MII bus on device &#039;rtl8366s&#039;
eth0: Atheros AG71xx at 0xba000000, irq 5
eth0: unable to find MII bus on device &#039;rtl8366s&#039;</code></pre></div><p>The problem is this, resulting in the nonworking network. It looks like buffalo switched the rtl8366s with a rtl8366rb. Could you also&nbsp; post a bootlog with the original firmware?</p><p><strong>Edit</strong>: Also, if you can, try to get the ag7100.ko (or something like that) from /lib/modules/2.6.15/ from the original firmware. You should be able to use scp to transfer stuff. This all assuming the original firmware is running linux.</p>											<p class="post-edited">(Last edited by <strong>KanjiMonster</strong> on 10 Nov 2010, 12:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120732">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						10 Nov 2010, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi-</p><p>Ok just got back home and actually, it doesn&#039;t seem to want to revert to the original japanese buffalo firmware over TFTP.&nbsp; I can try to work on that more if that would be helpful.&nbsp; I put DD-WRT back on with no problems.&nbsp; DD-WRT works, ethernet and wireless and everything, but OPENWRT sounds a lot better and more customizable.</p><p>Anyway here is a boot log with DD-WRT</p><div class="codebox"><pre><code>=~=~=~=~=~=~=~=~=~=~=~= PuTTY log 2010.11.10 20:37:22 =~=~=~=~=~=~=~=~=~=~=~=




BUFFALO U-BOOT Ver 1.07
AP83--539 (ar9100) U-boot 0.0.12
64 MB
Memory Test (address line)
Memory Test start(0x00000000) end(0x04000000) size(67108864)
Data line test start:0x00000000 pattern 0x00000001 0x00000003 0x00000007 0x0000000F 0x00000005 0x00000015 0x00000055 0xAAAAAAAA 
Address line test start:0x00000000 len:0x4000000 pattern 0xAAAAAAAA 0x55555555  
Fill test patnum:5 
fill Pattern 5555AAAA  Writing...             Reading...
fill Pattern AAAA5555  Writing...             Reading...
fill Pattern 0000FFFF  Writing...             Reading...
fill Pattern FFFF0000  Writing...             Reading...
fill Pattern AAAAAAAA  Writing...             Reading...
Top of RAM usable for U-Boot at: 84000000
Reserving 275k for U-Boot at: 83fb8000
Reserving 256k for malloc() at: 83f78000
Reserving 44 Bytes for Board Info at: 83f77fd4
Reserving 36 Bytes for Global Data at: 83f77fb0
Reserving 128k for boot params() at: 83f57fb0
Stack Pointer at: 83f57f98
Now running in RAM - U-Boot at: 83fb8000
Dev ID2:2222
Dev ID3:2201
Name: AMD-SPANSION Flash id: 0x1227E, Size: 33554432 bytes.
Flash: 32 MB
In:    serial
Out:   serial
Err:   serial
Memory Test
uboot use  83F57FB0 - 84000000
Memory Test start(80000000) end(83F00000) size(03F00000)

Pattern 55555555  Writing...            Reading...
Pattern AAAAAAAA  Writing...            Reading...
Pattern 00000000  Writing...            Reading...
Memory Test OK
### buf_ver=[1.07] U-Boot Ver.=[1.07]
### build_date(env)=[Dec 21 2009 - 10:37:30] build_date(bin)=[Dec 21 2009 - 10:37:30]
ag7100_enet_initialize...
: cfg1 0xf cfg2 0x7114
RTL8366 series driver, reading model-id...
  ID:0x5937, REV:0x0
rtl8366rb_phy_setup  ethUnit=0
Realtek 8366RB switch ID:0x5937 REV:0x3
Realtek Greeen Ethernet Setup
eth0: 02:aa:bb:cc:dd:1a
eth0 up
: cfg1 0x7 cfg2 0x7114
RTL8366 series driver, reading model-id...
eth1: 02:aa:bb:cc:dd:1a
eth1 up
eth0  02:AA:BB:CC:DD:1A
, eth1  02:AA:BB:CC:DD:1A

Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
dup 1 speed 100
CFG_PLL_FREQ=5
CFG_HZ=bebc200
cpu pll=1050
eth pll=1032
eth0 clk pll=13000a44
eth0 mii=12
eth0 cfg1=f
eth0 cfg2=7115
eth0 fcfg_0=1d1f00
eth0 fcfg_1=7ff0000
eth0 fcfg_2=fff
eth0 fcfg_3=780008
eth0 fcfg_4=3ffff
eth0 fcfg_5=3ffff

tftp server(receive) go, waiting:30[sec]
Trying eth1
eth1 link down
FAIL
Trying eth0
eth0 is duplex
ag7100_check_link: _100BASET
Load address: 0x81f00000

TftpServer Timeout;
no file was loaded.
## Booting image at be060000 ...
   Image Name:   DD-WRT v24 Linux Kernel Image
   Created:      2010-05-07  12:29:19 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1043358 Bytes = 1018.9 kB
   Load Address: 80002000
   Entry Point:  802df000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 802df000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

Linux version 2.6.24.111 (root@dd-wrt) (gcc version 4.3.3 (GCC) ) #2079 Fri May 7 14:21:23 CEST 2010
flash_size passed from bootloader = 32
CPU revision is: 00019374
booting platform Atheros AR9132 rev 2 (0xb9)
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Built 1 zonelists in Zone order.  Total pages: 16256
Kernel command line: console=ttyS0,115200 root=1f02 rootfstype=squashfs noinitrd  init=/sbin/init
Primary instruction cache 64kB, physically tagged, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, linesize 32 bytes.
Synthesized TLB refill handler (20 instructions).
Synthesized TLB load handler fastpath (32 instructions).
Synthesized TLB store handler fastpath (32 instructions).
Synthesized TLB modify handler fastpath (31 instructions).
Cache parity protection disabled
PID hash table entries: 256 (order: 8, 1024 bytes)
Using 200.000 MHz high precision timer.
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Memory: 61384k/65536k available (2408k kernel code, 4092k reserved, 519k data, 124k init, 0k highmem)
Mount-cache hash table entries: 512
NET: Registered protocol family 16
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
Time: MIPS clocksource has been installed.
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
gpio_proc: module loaded and /proc/gpio/ created
AR7100 GPIOC major 0
devfs: 2004-01-31 Richard Gooch (rgooch@atnf.csiro.au)
devfs: boot_options: 0x1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver $Revision: 1.90 $ 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x0 (irq = 19) is a 16550A
console [ttyS0] enabled
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
MPPE/MPPC encryption/compression module registered
NET: Registered protocol family 24
PPPoL2TP kernel driver, V1.0
IMQ starting with 2 devices...
IMQ driver loaded successfully.
Hooking IMQ before NAT on PREROUTING.
Hooking IMQ after NAT on POSTROUTING.
tun: Universal TUN/TAP device driver, 1.6
tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
AG7100: Length per segment 1536
AG7100: Max segments per packet 1
AG7100: Max tx descriptor count    100
AG7100: Max rx descriptor count    252
AG7100: fifo cfg 3 00780008
realtek phy id 22839
rtl_chip_type_select:RTL8366RB
AG7100CHH: Mac address for unit 0
AG7100CHH: ff:ff:ff:ff:ff:ff 
realtek phy id 22839
rtl_chip_type_select:RTL8366RB
AG7100CHH: Mac address for unit 1
AG7100CHH: ff:ff:ff:ff:ff:ff 
FLASH ID: AMD-SPANSION SIZE: (32 MB)
scanning for root partition

found squashfs at 15F000
Creating 7 MTD partitions on &quot;ar9100-nor0&quot;:
0x00000000-0x00060000 : &quot;RedBoot&quot;
0x00060000-0x01fc0000 : &quot;linux&quot;
0x0015f000-0x00ca0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x00ca0000-0x01fc0000 : &quot;ddwrt&quot;
0x01fc0000-0x01fe0000 : &quot;nvram&quot;
0x01fe0000-0x02000000 : &quot;board_config&quot;
0x00000000-0x02000000 : &quot;fullflash&quot;
ar71xx-ehci ar71xx-ehci.0: Atheros AR91xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci.0: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci.0: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci.0: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
usbcore: registered new interface driver usbserial
drivers/usb/serial/usb-serial.c: USB Serial Driver core
Software Watchdog Timer: 0.07 initialized. soft_noboot=0 soft_margin=60 sec (nowayout= 0)
GACT probability on
Mirror/redirect action on
Simple TC action Loaded
u32 classifier
    Actions configured 
Netfilter messages via NETLINK v0.30.
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
ctnetlink v0.93: registering with nfnetlink.
IPv4 over IPv4 tunneling driver
GRE over IPv4 tunneling driver
ip_tables: (C) 2000-2006 Netfilter Core Team
IPP2P v0.8.2 loading
ClusterIP Version 0.8 loaded successfully
TCP bic registered
TCP cubic registered
TCP westwood registered
TCP highspeed registered
TCP hybla registered
TCP htcp registered
TCP vegas registered
TCP scalable registered
NET: Registered protocol family 1
NET: Registered protocol family 17
Welcome to PF_RING 3.2.1
(C) 2004-06 L.Deri &lt;deri@ntop.org&gt;
NET: Registered protocol family 27
PF_RING: bucket length    128 bytes
PF_RING: ring slots       4096
PF_RING: sample rate      1 [1=no sampling]
PF_RING: capture TX       No [RX only]
PF_RING: transparent mode Yes
PF_RING initialized correctly.
PF_RING: registered /proc/net/pf_ring/
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
decode 1f02
VFS: Mounted root (squashfs filesystem) readonly.
Mounted devfs on /dev
Freeing unused kernel memory: 124k freed
start service
starting Architecture code for ap83
load ATH Ethernet Driver
insmod: ag7100_mod.ko: module not found
configure eth0 to 00:24:a5:af:b3:48
configure eth1 to 00:24:a5:af:b3:48
ag7100_ring_alloc Allocated 1600 at 0x811a1800
ag7100_ring_alloc Allocated 4032 at 0x81158000
AG7100: cfg1 0x2f cfg2 0x7014
rtl8366rb_phy_setup  ethUnit=0
AG7100: unit 0 phy is up...RGMii 1000Mbps full duplex
AG7100: pll reg 0x18050014: 0x1f000000  AG7100: CPU PhaseLockLoop      : 0x1050
AG7100: Secondary PhaseLockLoop: 0x1032
AG7100: Ethernet Internal Clock Control: 0x0
AG7100: mii: 0x22
AG7100: cfg1: 0x2f
AG7100: cfg2: 0x7215
AG7100: fcfg_0: 0x1d1f00
AG7100: fcfg_1: 0x7ff0000
AG7100: fcfg_2: 0xfff
AG7100: fcfg_3: 0x7803ff
AG7100: fcfg_4: 0xffff
AG7100: fcfg_5: 0xfefef
AG7100: done cfg2 0x7215 ifctl 0x0 miictrl 0x22 
Writing 4
ag7100_ring_alloc Allocated 1600 at 0x83d84000
ag7100_ring_alloc Allocated 4032 at 0x83cc2000
AG7100: cfg1 0x3f cfg2 0x7014
rtl8366rb_phy_setup  ethUnit=1
AG7100: WAN Rx Hang Detected 1 times!
Writing 6
load ATH 802.11 a/b/g Driver
insmod: ath_hal.ko: module not found
insmod: ath_pci.ko: module not found
insmod: ath_ahb.ko: module not found
load ATH 802.11n Driver
ath_mimo_hal: module license &#039;Proprietary&#039; taints kernel.
ath_mimo_hal: 0.9.17.1 (AR5416, REGOPS_FUNC)
insmod: ath_mimo_pci.ko: module not found
ath_ahb: 0.9.4.5 (Atheros/multi-bss)
ath_dfs: Version 2.0.0
Copyright (c) 2005-2006 Atheros Communications, Inc. All Rights Reserved
wlan: 0.8.4.2 (Atheros/multi-bss)
wlan: mac acl policy registered
ath_rate_atheros: Version 2.0.1
Copyright (c) 2001-2004 Atheros Communications, Inc, All Rights Reserved
ar5416CheckEepromDef: Read Magic = 0xFFFF
EEPROM being read from flash @0xbfff1000
need_swap = False.
Howl Revision ID 0xb9
dfs_init_radar_filters: dfs-&gt;dfs_rinfo.rn_numradars: 0
1Mbps 2Mbps 5.5Mbps 11Mbps
1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps
 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
wifi0: mac 20.0 phy 10.2 radio 13.0
wifi0: Use hw queue 1 for WME_AC_BE traffic
wifi0: Use hw queue 0 for WME_AC_BK traffic
wifi0: Use hw queue 2 for WME_AC_VI traffic
wifi0: Use hw queue 3 for WME_AC_VO traffic
wifi0: Use hw queue 8 for CAB traffic
wifi0: Use hw queue 9 for beacons
wifi0: Use hw queue 7 for UAPSD
wifi0: Atheros AR9100 WiSoC: mem=0xb80c0000, irq=2
br0: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.
device br0 entered promiscuous mode
killall: ead: no process killed
ag7100_ring_free Freeing at 0x811a1800
ag7100_ring_free Freeing at 0x81158000
ag7100_ring_alloc Allocated 1600 at 0x83d84800
ag7100_ring_alloc Allocated 4032 at 0x81158000
AG7100: cfg1 0x2f cfg2 0x7215
rtl8366rb_phy_setup  ethUnit=0
AG7100: unit 0 phy is up...RGMii 1000Mbps full duplex
AG7100: pll reg 0x18050014: 0x1f000000  AG7100: CPU PhaseLockLoop      : 0x1050
AG7100: Secondary PhaseLockLoop: 0x1032
AG7100: Ethernet Internal Clock Control: 0x0
AG7100: mii: 0x22
AG7100: cfg1: 0x2f
AG7100: cfg2: 0x7215
AG7100: fcfg_0: 0x1d1f00
AG7100: fcfg_1: 0x7ff0000
AG7100: fcfg_2: 0xfff
AG7100: fcfg_3: 0x7803ff
AG7100: fcfg_4: 0xffff
AG7100: fcfg_5: 0xfefef
AG7100: done cfg2 0x7215 ifctl 0x0 miictrl 0x22 
Writing 4
ag7100_ring_free Freeing at 0x83d84800
ag7100_ring_free Freeing at 0x81158000
ag7100_ring_alloc Allocated 1600 at 0x83d6f800
ag7100_ring_alloc Allocated 4032 at 0x81158000
AG7100: cfg1 0x2f cfg2 0x7215
rtl8366rb_phy_setup  ethUnit=0
AG7100: unit 0 phy is up...RGMii 1000Mbps full duplex
AG7100: pll reg 0x18050014: 0x1f000000  AG7100: CPU PhaseLockLoop      : 0x1050
AG7100: Secondary PhaseLockLoop: 0x1032
AG7100: Ethernet Internal Clock Control: 0x0
AG7100: mii: 0x22
AG7100: cfg1: 0x2f
AG7100: cfg2: 0x7215
AG7100: fcfg_0: 0x1d1f00
AG7100: fcfg_1: 0x7ff0000
AG7100: fcfg_2: 0xfff
AG7100: fcfg_3: 0x7803ff
AG7100: fcfg_4: 0xffff
AG7100: fcfg_5: 0xfefef
AG7100: done cfg2 0x7215 ifctl 0x0 miictrl 0x22 
Writing 4
device eth0 entered promiscuous mode
sh: ead: not found
AG7100: WAN Rx Hang Detected 1 times!
sh: can&#039;t create /proc/sys/dev/wifi0/pollingmode: nonexistent directory
sh: can&#039;t create /proc/sys/dev/wifi0/maxvaps: nonexistent directory

 ath_numswbaperbc = 4(1)adj=51200
ath0
Invalid command : wdssep
AG7100: WAN Rx Hang Detected 2 times!
ag7100_ring_free Freeing at 0x83d84000
ag7100_ring_free Freeing at 0x83cc2000
ag7100_ring_alloc Allocated 1600 at 0x83e16000
ag7100_ring_alloc Allocated 4032 at 0x83cc2000
AG7100: cfg1 0x3f cfg2 0x7014
rtl8366rb_phy_setup  ethUnit=1
AG7100: WAN Rx Hang Detected 1 times!
Writing 6
device ath0 entered promiscuous mode
killall: roaming_daemon: no procbr0: port 2(ath0) entering learning state
ess killed
br0: port 1(eth0) entering learning state
device br0 left promiscuous mode
device br0 entered promiscuous mode
device br0 left promiscuous mode
device br0 entered promiscuous mode
ifconfig: ioctl 0x8914 failed: Cannot assign requested address
rmmod: bonding: No such file or directory
Ethernet Channel Bonding Driver: v3.1.3 (June 13, 2007)
bonding: MII link monitoring set to 100 ms
rmmod: n_hdlc: No such file or directory
device eth1 entered promiscuous mode
cp: cannot stat &#039;/tmp/mycron.d/*&#039;: No such file or directory
device eth1 left promiscuous mode
cp: cannot stat &#039;/jffs/mycron.d/*&#039;: No such file or directory
cp: cannot stat &#039;/mmc/mycron.d/*&#039;: No such file or directory
route: ioctl 0x890c failed: No such process
br0: topology change detected, propagating
br0: port 2(ath0) entering forwarding state
br0: topology change detected, propagating
br0: port 1(eth0) entering forwarding state
route: resolving 
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
SIOCGIFFLAGS: No such device
etherip: Ethernet over IPv4 tunneling driver
The Milkfish Router Services
ERROR: Necessary service setting not found: milkfish_username - aborting.
rmmod: ipt_webstr: No such file or directory
rmmod: ipt_layer7: No such file or directory
rmmod: ipt_ipp2p: No such file or directory
rmmod: ip_nat_pptp: No such file or directory
rmmod: ip_nat_proto_gre: No such file or directory
rmmod: ip_conntrack_pptp: No such file or directory
rmmod: ip_conntrack_proto_gre: No such file or directory
insmod: ip_conntrack_proto_gre.ko: module not found
insmod: ip_nat_proto_gre.ko: module not found
insmod: ip_conntrack_pptp.ko: module not found
killall: proxywatchdog.sh: no process killed
insmod: ip_nat_pptp.ko: module not found
The Milkfish Router Services
Restoring SIP ddsubscriber database from NVRAM...
Empty.
The Milkfish Router Services
Restoring SIP ddaliases database from NVRAM...
Empty.
umount: can&#039;t umount /tmp/smbshare: No such file or directory
rmmod: cifs: No such file or directory
killall: schedulerb.sh: no process killed
killall: shatd: no process killed
killall: wdswatchdog.sh: no process killed
rmmod: ebt_dnat: No such file or directory
rmmod: ebt_snat: No such file or directory
rmmod: ebt_mark_m: No such file or directory
rmmod: ebt_mark: No such file or directory
rmmod: ebtable_filter: No such file or directory
rmmod: ebtable_nat: No such file or directory
rmmod: ebtables: No such file or directory
rmmod: imq: No such file or directory
Freeing node: 00:24:a5:af:b3:48
ic-&gt;ic_cwm.cw_width :0, ic-&gt;ic_cwm.cw_extoffset: 0 
connect: Network is unreachable
connect: Network is unreachable
connect: Network is unreachable
gethostbyname: Network is unreachable</code></pre></div><p>It does have &quot;Realtek 8366RB switch ID:0x5937 REV:0x3&quot; in there, so looks like you&#039;re right.</p><p>On DD-WRT I looked in /lib/modules/2.6.24.111/kernel/drivers/net</p><p>in that directory there&#039;s bonding/ and usb/<br />in bonding/ there&#039;s bonding.ko which is around 115K.</p><p>I looked for a*.ko and found a ah6.ko in /lib/modules/2.6.24.111/kernel/net/ipv6, which is 8K</p><p>Let me know if either of these would be useful (By the way can files be attached on this forum?&nbsp; Or find somewhere else to host them?) or if it would be better to find the files from the original japanese buffalo firmware.&nbsp; I never actually ran that so I don&#039;t know what it was based on, linux presumably, but I just went right to DD-WRT when I bought it.</p><p>Thanks for the help, maybe with a few tweaks we can get OPENWRT running on this!&nbsp; The WZR-HP-G300NH I haven&#039;t seen in Japan, only the 301NH</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120733">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						10 Nov 2010, 14:46					</div>
				</div>
				<div class="post-content content">
					<p>Ah, okay. The problem is we need to know the correct GPIO pins for controlling the RTL8366RB switch, but of course we could try to find it (probably there are some &quot;default values&quot;).</p><p>Do you have a build system ready? Then I can try to create a quick patch which should make the ethernet working (but not the switch configurable), else you have to wait a little bit longer till I get around to creating an image.</p><p>KM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120738">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						10 Nov 2010, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Hi ????????(?)</p><p>I haven&#039;t built OPEN-WRT before, in fact I&#039;ve just found out about this whole project a few days ago.&nbsp; I have a small linux box with gcc and stuff but haven&#039;t dealt with OPEN-WRT sources.&nbsp; And it&#039;s probably cross-compiling and stuff right...? These things have... ARM based chips?&nbsp; Or whatever the SoC is.&nbsp; Definitely not x86.</p><p>So right now no I don&#039;t have an OPEN-WRT build environment / toolchain and stuff, but I could probably get that set up this weekend if there&#039;s decent documentation.&nbsp; Would looking at the DD-WRT sources help any?&nbsp; Or I could set up my router with the DD-WRT and leave it open for SSH logins or something.</p><p>Anyway I&#039;ll look in to getting the cross-compiling stuff set up this weekend if I have time.&nbsp; Thanks for all your help!<br />-???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120741">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						10 Nov 2010, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>?????????(?)<br />??????????????????????????????????</p><p>The build system is rather straight forward and acceptably documented, see <a href="http://wiki.openwrt.org/doc/start#building">the wiki pages</a>, especially the one <a href="http://wiki.openwrt.org/doc/howto/build">about building openwrt</a>.</p><p>Last time I checked, you needed at least 3 GB free space for a full toolchain build (including a minimal package set).</p><p>Feel free to ask if you have questions. There&#039;s also an IRC channel on the freenode network, #openwrt.</p><p>KM</p><p>P.S: AR7100 is MIPS(32), btw.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120955">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						13 Nov 2010, 01:40					</div>
				</div>
				<div class="post-content content">
					<p>Ok so I&#039;m getting this whole build environment set up according to instructions in the wiki.&nbsp; My internet is not very fast so looks like it might take a while.&nbsp; But anyway, any ideas where I can change the RTL8366RB driver or module or whatever?&nbsp; And DD-WRT is open source, right?&nbsp; I mean it must be, but then again it seems quite a bit less open than OPENWRT somehow.&nbsp; But they&#039;ve got whatever PHY driver working fine, and on their wiki they don&#039;t even make a distinction between the 300NH and the 301NH.&nbsp; So presumably it&#039;s something small.&nbsp; <br />I mean heck on the PCB I have in front of me, it says </p><p>WZR-HP-G300NH Rev:V1<br />21514WG300NH1A1 Rev:A1</p><p>I guess you can put a pin-compatible but different ethernet chip on the same board and sell it under a different model number, but that doesn&#039;t sound like it should be hard to get running... right?<br />I just worry that I won&#039;t really have time to work on this.&nbsp; It&#039;d be great if I could help get a revised firmware out so people with this model can use OPENWRT but looking at allll this source it seems really daunting.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122065">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Igarashi</div>
					<div class="post-datetime">
						27 Nov 2010, 02:42					</div>
				</div>
				<div class="post-content content">
					<p>any ideas on this?&nbsp; I&#039;ve actually looked for the WZR-HP-G300NH model here but they seem to have stopped selling it in Japan.</p><p>I&#039;d really like to help, I&#039;m just not well versed enough in OPEN-WRT and linux networking to really know where to start.&nbsp; However I had an idea.&nbsp; If someone who knows a lot about the 300NH model wants to check out the OPEN-WRT install on a 301NH, I can set up a user account on my (PC) linux box with a serial link to the router running the functional-but-no-ethernet router.&nbsp; So you could log in look around with a root account on the router.&nbsp; Granted somewhat more limited than having it in front of you because you can&#039;t really reboot it (well you can, but you can&#039;t unplug it, etc) but any takers on that?</p><p>Right now it&#039;s running DD-WRT which is... well it works if I just set the wireless to B/G with no N.&nbsp; OPEN-WRT on the 300NH model sounds like wireless-N works fine, so that&#039;d be nice.</p><p>Anyway still willing to try anything on this router anyone suggests (well within reason hah)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122441">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">KanjiMonster</div>
					<div class="post-datetime">
						2 Dec 2010, 16:52					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I was a bit occupied. <a href="http://page.mi.fu-berlin.de/jgorski/openwrt/temp/2010-12-01-1/0001-ar71xx-Disable-realtek-switch.patch">This patch</a> should make the ethernet intefaces work, at least with 10/100 speed. 1000 Mbit might not work since the PLL value is probably wrong. Note: this is only compile tested (obviously <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />.</p><p>Getting the switch to work is a bit harder since we have to find out what are the SCK/SDA GPIOs for it. This can be done by either reversing the bootloader or the ag7100.ko (assuming you can access it) from the original firmware.</p><p>Requesting the source code for the bootloader might work too, if its U-Boot.&nbsp; Then Buffalo is supposed to provide the sources, which will tell us what the GPIOs are.</p><p>KM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p122597">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">ego2006</div>
					<div class="post-datetime">
						4 Dec 2010, 17:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>i&#039;m running into the same problem. But i managed to get the module from the original firmware.<br />It&#039;s over here: <a href="http://dezoeten.mine.nu/ag7100_mod.ko">http://dezoeten.mine.nu/ag7100_mod.ko</a></p><p>I hope you can do something with it. If i can be of any help, please let me know.</p><p>Regards, Peter</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=26750&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=26750&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=26750&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>