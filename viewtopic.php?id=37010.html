<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-WR841N v8.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 26 Jul 2014 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 21</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=21.html">21</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p167962">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						23 May 2012, 06:54					</div>
				</div>
				<div class="post-content content">
					<p>The TP-Link TL-WR841N v8.0 is a wireless N MIMO router it has 1 WAN Port and 4 LAN Ports.<br />The CPU is The Atheros AR9341 SoC @ 500 Mhz. It has 4 MB Flash but has only 16 MB RAM.<br />With 4MB of Flash It is capable of running OpenWrt.</p><br /><p>Factory Boot :</p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Software Platform for MIPS<br />Creation date: Jul&nbsp; 5 2011, 09:13:06 (huangqingjia@tp-link.net)<br />Copyright(C) 2001-2012 by TP-LINK TECHNOLOGIES CO., LTD.<br />CPU: AR9341: AP123 Board<br />CPU freq: 500 MHZ<br />SDRAM size: 16 MB<br />ipaddr:192.168.1.1<br />serverip:192.168.1.100<br />file:vxWorks.img</p><br /><p>Press Ctrl+C to stop auto-boot...<br /> 0<br />auto-booting...<br />Uncompressing...done<br />Starting at 0x80001000...</p><p>Attaching interface lo0... done<br />Rx clbufs 512 each of size 1756 <br />eth_rx_netpool_init: allocated, pDmaBuf=0x80e4e3e0, buffend = 80f2abe4<br />ATHRS27: resetting s27<br />ATHRS27: s27 reset done<br />eth_rx_netpool_init: done already!<br />Attached IPv4 interface to mirror unit 0<br />usrAppInitEx: 112: GPIO_OE = 30300<br />usrAppInitEx: 113: CP0 CONFIG = 80208483<br />usrAppInitEx: 114: CP0 CONFIG1 = bee3519e</p><p>--&gt;starting wireless...<br />APCFG task id 80c85970<br />sysWlanInit ...<br />Create WLAN event task tWLANEventTask<br />Create mem partion 0x80c72140 for size 28672<br />AH_CAL_IN_FLASH_AHB<br />Boostrap clock 25MHz<br />ar9300RadioAttach: Need analog access recipe!!<br />Restoring Cal data from Flash<br />ath_get_caps[4703] rx chainmask mismatch actual 3 sc_chainmak 0<br />ath_get_caps[4678] tx chainmask mismatch actual 3 sc_chainmak 0<br />Create OS_MESGQ Successfully at 0x80c60b50<br />osifp-&gt;queue_head = 0x80c60e50<br />ag7240MemInit: allocated, dmabuf=0x80bac130, buffend = 80c54334<br />Entering Task Loop<br />Entering WLAN event Task Loop<br />ERROR:wireless OR ACL disable<br />sending message 80b87900,24<br />sending message 80b87900,24<br />TDDP: Now listening client request. <br />tddp is running.<br />httpInit: System File Registry successfully initialized.<br />httpInit: System File Manager successfully initialized.<br />httpInit: File System RPM successfully initialized.<br />httpInit: RPM dispatcher successfully initialized.<br />httpInit: MIME type guessing RPM successfully initialized.<br />httpInit: http Password Checking successfully initialized.<br />httpInit: http Access Control successfully initialized.</p><br /><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Software Platform for MIPS<br />&nbsp; Copyright(C) 2001-2010 by TP-LINK TECHNOLOGIES CO., LTD.<br />Starting W&nbsp; Creation date: LANJul&nbsp; 5 2011, 10:13:42 !!!! </p><p># AP_STARTMODE=standard<br />AP_ENABLE=1<br />ATH_COUNTRYCODE=156<br />wlan_vap_create : enter. devhandle=0x8043ef60, opmode=IEEE80211_M_HOSTAP, flags=0x1<br />wlan_vap_create : exit. devhandle=0x8043ef60, opmode=IEEE80211_M_HOSTAP, flags=0x1.<br />osif_ioctl_create_vap: vap 0x80ffe970 vap-&gt;iv_unit 0<br />ieee80211_end_load: load done<br />ath0 end flag = 0x00028802<br />default <br />default <br />default <br />IEE80211-FREQ IOCTL vap 0x80ffe970 0,0,0<br />AP_CHMODE=11NGHT40PLUS</p><p>WLAN IOCTL AP_CHMODE=11NGHT40PLUS=11NGHT20=11NGHT40PLUS=1003<br />IEE80211-MODE IOCTL 1,11NGHT40PLUS,13<br />set mode 11,-2130709132,6<br />set mode retv 0</p><p>WLAN IOCTL AP_PRIMARY_CH=auto=6=auto=1002<br />IEE80211-FREQ IOCTL vap 0x80ffe970 0,0,11</p><p>WLAN IOCTL PUREG=0=0=0=1004<br />IEEE80211-SETPURGE IOCTL 0</p><p>WLAN IOCTL AP_HIDE_SSID=0=0=0=1005<br />IEEE80211-SETHIDESSIDIOCTL 0</p><p>WLAN IOCTL AP_ISOLATION=0=0=0=1034<br />IEE80211-setparam-nobridge 0</p><p>WLAN IOCTL AP_TX11NRATE==0x0=0x0=1041<br />set auto rate</p><p>WLAN IOCTL AP_11G_PROTECTION==0=0=1042</p><p>WLAN IOCTL AP_BEACON_INTERVAL=100=100=100=1043</p><p>WLAN IOCTL AP_FRAGMENT_THRESHOLD=2346=2346=2346=1044</p><p>WLAN IOCTL AP_RTS_THRESHOLD=2346=2347=2346=1046</p><p>WLAN IOCTL AP_DTIM_PERIOD=1=1=1=1045</p><p>WLAN IOCTL AP_WMM_ENABLE=1=1=1=1051</p><p>WLAN IOCTL AP_WMM_NOACK==0=0=1052<br />IOCTL set wmm noack 0</p><p>WLAN IOCTL AP_CYPHER_2==CCMP=CCMP=1000<br />Get EIOCGADDR</p><p>WLAN IOCTL AP_NO_EDGE_CH==0=0=1056</p><p>WLAN IOCTL AP_MCASTRATE==0=0=1018</p><p>WLAN IOCTL AP_MACFILTER_MODE==0=0=1038</p><p>WLAN IOCTL AP_MACFILTER_LIST====1000<br />Get EIOCGADDR</p><p>WLAN IOCTL AP_SHORT_GI=1=1=1=1055</p><p>WLAN IOCTL AP_DISABLECOEXT=1=0=1=1075</p><p>WLAN IOCTL AP_SSID=WR841N=Ath_AP123ng=WR841N=1001<br />IEE80211-ESSID IOCTL 1,WR841N,7<br />AP_CHMODE=11NGHT40PLUS<br />AP_CWMMODE=1<br />IEE80211-CWMMODE IOCTL 1<br />AP_AMPDU=0<br />AP_PURE_N=0<br />AP_TX_CHAINMASK=3<br />AP_RX_CHAINMASK=3<br />AP_SECMODE=WPA<br />WPS_ENABLE=1<br />AP_MACFILTER_MODE=0<br />ieee80211_open</p><p>WLAN IOCTL AP_BASICRATES==0=0=1039</p><p>WLAN IOCTL AP_DEBUG=0=0=0=1062</p><p>WLAN IOCTL AP_TX_POWER==0=0=1073<br />Starting Hostapd<br />AP_SSID=WR841N<br />AP_HOSTAPD_DEBUG=0<br />AP_IPADDR=192.168.1.2<br />AP_SECMODE=WPA<br />WPS BSS init<br />WPS_ENABLE=1<br />WPS_PIN=4724XXXX &lt;--EDIT<br />WPS_STATE=2<br />1136073605.416667: wps_led_init: LED state CONFIGURED<br />AP_SECMODE=WPA<br />WPA BSS init<br />PSK_KEY=XXXXXXXXX &lt;--EDIT<br />AP_CYPHER=TKIP<br />AP_WPA_GROUP_REKEY=3600<br />starting hostapd ... <br />Hostapd task Created 80ff5a90<br />Task details [80ff5a90,,64,80c85708]<br />Adding ath0 in bridge ...<br />default <br />Set EIOCGMIB2<br />default <br />Entering Hostapd Main <br />default <br />Set EIOCGMIB2<br />attached backend socket .<br />Attached backend socket for eth0<br />Attached backend socket for eth1<br />Attached backend socket for mirror 0<br />@@@@ kris-hostapd @@@@@ wiface=ath0 @@@@<br />**** [2,1,0,0192.168.1.2,]****<br />Just before eloop_run()<br /> *** setup interface1 started ****<br /> Eapol sockfd=23 <br />Get EIOCGADDR<br />MAC address 5c,63,ffffffbf,XXXXX,XXXX,XXXXXX &lt;--EDIT<br />link _ubind0,0,0,0,0,0<br />IEE80211-IWMODE IOCTL&nbsp; 3<br />IEE80211-setparam-privacy 0<br />1136073607.416667: Defaulted uuid based on mac addr 5c:63:bf:XX:XX:XX &lt;--EDIT<br />ieee80211_ioctl_setappiebuf<br />ieee80211_ioctl_setappiebuf<br />ieee80211_ioctl_setappiebuf<br />1136073607.416667: madwifi_start_receive_prob_req Enter</p><p>Madwifi init completed<br />1136073607.416667: ENTER eap_wps_disable, reason=7<br /> *** setup interface1 completed ****<br /> *** setup interface2 started ****<br />1136073607.433333: Flushing old station entries<br />IOCTL setmlme<br />[ieee80211_ioctl_setmlme:1887] data=0x80ff55b0,data-&gt;pointer=0x80ff5600, data-&gt;length=42<br />[ieee80211_ioctl_setmlme:1893] mlme-&gt;im_op=3<br />1136073607.450000: Deauthenticate all stations<br />IEE80211-setparam-privacy 0<br />ieee80211_ioctl_delkey : idk_keyix=0<br />ieee80211_ioctl_delkey : idk_keyix=1<br />ieee80211_ioctl_delkey : idk_keyix=2<br />ieee80211_ioctl_delkey : idk_keyix=3<br />Using interface ath0 with hwaddr 5c:63:bf:XX:XX:XX and ssid &#039;WR841N&#039; &lt;--EDIT<br />1136073607.483333: SSID - hexdump_ascii(len=6):<br />&nbsp; &nbsp; &nbsp;XX XX XX XX XX XX&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;WR841N &lt;--EDIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />1136073607.483333: PSK (ASCII passphrase) - hexdump_ascii(len=9):<br />&nbsp; &nbsp; &nbsp;XX XX XX XX XX XX XX &lt;-- EDIT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; password &lt;-- EDIT&nbsp; &nbsp; &nbsp; &nbsp;<br />1136073607.783333: PSK (from passphrase) - hexdump(len=32): XX XX XX XX XX XX XX &lt;-- EDIT<br />IEE80211-ESSID IOCTL 1,WR841N,7<br />osif_vap_init :vap up <br />IEE80211-setparam-mcastcipher 1<br />Warning: wlan_set_mcast_cipher failed. cache the mcast cipher<br />IEE80211-setparam-unicipher 2<br />Warning: wlan_set_ucast_cipher failed. cache the ucast cipher<br />IEE80211-setparam-keymgmtalgs 2<br />ieee80211_rsncaps<br />IEE80211-setparam-wpa 1<br />set IEEE80211_IOC_WPA to WPA<br />[ieee80211_ioctl_setparam_wpa:1721]<br />IEE80211-setparam-authmode 5<br />osif_vap_init :vap up <br />osif_vap_init 0<br />1136073607.833333: WPA: group state machine entering state GTK_INIT (VLAN-ID 0)<br />1136073607.833333: GMK - hexdump(len=32): XX XX XX XX XX XX XX &lt;-- EDIT<br />1136073607.833333: GTK - hexdump(len=32): XX XX XX XX XX XX XX &lt;-- EDIT<br />1136073607.833333: WPA: group state machine entering state SETKEYSDONE (VLAN-ID 0)<br />ieee80211_ioctl_setkey</p><br /><p>ieee80211_ioctl_setkey: ******** SETKEY : error: 0 , key_type=1, macaddr=ff:ff:ff:ff:ff:ff, key_len=16</p><p>IEE80211-setparam-privacy 1<br />hostapd_ctrl_iface_init<br />1136073607.866667: upnp_wps_device_init called<br />1136073607.866667: upnp_wps_device ssdp_listener_start failure!<br />1136073607.866667: upnp_wps_device_stop ENTER<br />1136073607.883333: upnp_wps_device_deinit called<br />1136073607.883333: upnp_wps_device_stop ENTER<br />1136073607.883333: Failed to initialize UPnP state machine<br />1136073607.883333: Continuing with WPS UPnP disabled.<br /> ****setup interface2 completed****<br />1136073607.900000: ath0: Setup of interface done.<br /> ****setup interface finalized ****</p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 23 May 2012, 10:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167965">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						23 May 2012, 07:54					</div>
				</div>
				<div class="post-content content">
					<p>I sent this device to Huang Fang Cheng in Shenzhen China for a 64M RAM upgrade.<br />The Results :</p><p>U-Boot 1.1.4 (May 14 2012 - 21:01:27)</p><p>U-boot for WR841V8 OR 300RV3 </p><p> Build by &lt; huangfc&nbsp; QQ:343669866&gt;<br /> huangfangcheng@163.com <br /> TaoBao:&nbsp; http:// huangfc.taobao.com </p><br /><p>DRAM:&nbsp; 64 MB<br />Top of RAM usable for U-Boot at: 84000000<br />Reserving 152k for U-Boot at: 83fd8000<br />Reserving 192k for malloc() at: 83fa8000<br />Reserving 44 Bytes for Board Info at: 83fa7fd4<br />Reserving 36 Bytes for Global Data at: 83fa7fb0<br />Reserving 128k for boot params() at: 83f87fb0<br />Stack Pointer at: 83f87f98<br />Now running in RAM - U-Boot at: 83fd8000<br />id read 0x100000ff<br />flash size 4MB, sector count = 64<br />Flash:&nbsp; 4 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag934x_enet_initialize...<br />Fetching MAC Address from 0x83ff23d8<br />Fetching MAC Address from 0x83ff23d8<br /> wasp&nbsp; reset mask:c03300 <br />WASP ----&gt; S27 PHY <br />: cfg1 0x5 cfg2 0x7114<br />eth0: 00:00:00:00:00:01<br />s27 reg init <br />athrs27_phy_setup ATHR_PHY_CONTROL 0 :1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0 :10<br />eth0 up<br />WASP ----&gt; S27 PHY <br />: cfg1 0xf cfg2 0x7214<br />eth1: 00:00:00:00:00:00<br />s27 reg init lan <br />ATHRS27: resetting s27<br />ATHRS27: s27 reset done<br />athrs27_phy_setup ATHR_PHY_CONTROL 1 :1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1 :10<br />athrs27_phy_setup ATHR_PHY_CONTROL 2 :1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2 :10<br />athrs27_phy_setup ATHR_PHY_CONTROL 3 :1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3 :10<br />athrs27_phy_setup ATHR_PHY_CONTROL 4 :1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4 :10<br />eth1 up<br />eth0, eth1<br />Hit any key to stop autoboot:&nbsp; 0 <br />you get the PASS!!<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK<br />No initrd<br />## Transferring control to Linux (at address 80060000) ...<br />## Giving linux memsize in bytes, 67108864</p><p>Starting kernel ...</p><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.3 (huangfc@huangfc) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #50 Mon May 14 20:45:49 CST 2012<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001974c (MIPS 74Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9341 rev 1<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:525.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 04000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00004000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 16256<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WR841N-v8 console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 61800k/65536k available (2068k kernel code, 3736k reserved, 395k data, 200k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:48<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 261.73 BogoMIPS (lpj=1308672)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-WR841N v8<br />[&nbsp; &nbsp; 0.510000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.520000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.530000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.530000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.530000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.540000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.540000] TCP: Hash tables configured (established 2048 bind 2048)<br />[&nbsp; &nbsp; 0.550000] TCP reno registered<br />[&nbsp; &nbsp; 0.550000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.560000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.560000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.590000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.590000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.600000] msgmni has been set to 120<br />[&nbsp; &nbsp; 0.610000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.610000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.620000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.640000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.650000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.650000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.660000] m25p80 spi0.0: found s25sl032a, expected m25p80<br />[&nbsp; &nbsp; 0.670000] m25p80 spi0.0: s25sl032a (4096 Kbytes)<br />[&nbsp; &nbsp; 0.680000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.680000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.690000] 0x000000020000-0x000000120000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.690000] 0x000000120000-0x0000003f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.700000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.710000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2F0000, len=100000 <br />[&nbsp; &nbsp; 0.720000] 0x0000002f0000-0x0000003f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.720000] 0x0000003f0000-0x000000400000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.730000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.760000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.000000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.000000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 1.620000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd042, driver=Generic PHY]<br />[&nbsp; &nbsp; 1.630000] eth1: Atheros AG71xx at 0xba000000, irq 5<br />[&nbsp; &nbsp; 2.220000] eth1: Found an AR934X built-in switch<br />[&nbsp; &nbsp; 3.450000] TCP westwood registered<br />[&nbsp; &nbsp; 3.450000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 3.450000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 3.460000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 3.470000] Freeing unused kernel memory: 200k freed<br />- preinit -<br />Press the [f] key and hit [enter] to enter failsafe mode<br />- regular preinit -<br />[&nbsp; &nbsp; 8.770000] JFFS2 notice: (557) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 13 of xref (0 dead, 1 orphan) found.<br />switching to jffs2<br />- init -</p><p>Please press Enter to activate this console.<br />[&nbsp; &nbsp;10.400000] Compat-wireless backport release: compat-wireless-2012-04-17-1-r31540<br />[&nbsp; &nbsp;10.410000] Backport based on wireless-testing.git master-2012-04-17<br />[&nbsp; &nbsp;10.440000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;10.820000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;10.830000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;10.840000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.850000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.850000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.860000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.870000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.890000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp;10.890000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;10.900000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;11.430000] ieee80211 phy0: Atheros AR9340 Rev:0 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;11.430000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;11.560000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;11.570000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp;11.580000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)<br />[&nbsp; &nbsp;11.580000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)<br />[&nbsp; &nbsp;11.590000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;11.600000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;11.610000] cfg80211:&nbsp; &nbsp;(5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;11.620000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)<br />[&nbsp; &nbsp;11.640000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.760000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.860000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;11.970000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp;11.980000] ath79-ehci ar934x-ehci: Atheros built-in EHCI controller<br />[&nbsp; &nbsp;11.990000] ath79-ehci ar934x-ehci: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp;12.030000] ath79-ehci ar934x-ehci: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp;12.050000] ath79-ehci ar934x-ehci: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp;12.050000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp;12.060000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp;12.080000] nf_conntrack version 0.5.0 (968 buckets, 3872 max)<br />[&nbsp; &nbsp;15.320000] device wlan0 entered promiscuous mode<br />[&nbsp; &nbsp;18.400000] device wlan0 left promiscuous mode<br />[&nbsp; &nbsp;18.410000] br-lan: port 1(wlan0) entered disabled state<br />[&nbsp; &nbsp;18.580000] device eth1 entered promiscuous mode<br />[&nbsp; &nbsp;18.630000] device wlan0 entered promiscuous mode<br />[&nbsp; &nbsp;20.030000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;20.040000] br-lan: port 2(wlan0) entered forwarding state<br />[&nbsp; &nbsp;35.080000] br-lan: port 2(wlan0) entered forwarding state</p><br /><p>BusyBox v1.19.4 (2012-04-16 03:17:21 CST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> -----------------------------------------------------<br /> ATTITUDE ADJUSTMENT (Bleeding Edge, r31540)<br /> -----------------------------------------------------<br />&nbsp; * 1/4 oz Vodka&nbsp; &nbsp; &nbsp; Pour all ingredients into mixing<br />&nbsp; * 1/4 oz Gin&nbsp; &nbsp; &nbsp; &nbsp; tin with ice, strain into glass.<br />&nbsp; * 1/4 oz Amaretto<br />&nbsp; * 1/4 oz Triple sec<br />&nbsp; * 1/4 oz Peach schnapps<br />&nbsp; * 1/4 oz Sour mix<br />&nbsp; * 1 splash Cranberry juice<br /> -----------------------------------------------------<br />root@OpenWrt:/#</p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 23 May 2012, 08:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167966">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						23 May 2012, 08:28					</div>
				</div>
				<div class="post-content content">
					<p>mach-tl-wr841n-v8.c</p><p>/*<br /> * Atheros DB120 reference board support<br /> *<br /> * Copyright (c) 2011 Qualcomm Atheros<br /> * Copyright (c) 2011 Gabor Juhos &lt;juhosg@openwrt.org&gt;<br /> *<br /> * All rights reserved.<br /> *<br /> * Redistribution and use in source and binary forms, with or without<br /> * modification, are permitted (subject to the limitations in the<br /> * disclaimer below) provided that the following conditions are met:<br /> *<br /> *&nbsp; * Redistributions of source code must retain the above copyright<br /> *&nbsp; &nbsp; notice, this list of conditions and the following disclaimer.<br /> *<br /> *&nbsp; * Redistributions in binary form must reproduce the above copyright<br /> *&nbsp; &nbsp; notice, this list of conditions and the following disclaimer in the<br /> *&nbsp; &nbsp; documentation and/or other materials provided with the<br /> *&nbsp; &nbsp; distribution.<br /> *<br /> *&nbsp; * Neither the name of Qualcomm Atheros nor the names of its<br /> *&nbsp; &nbsp; contributors may be used to endorse or promote products derived<br /> *&nbsp; &nbsp; from this software without specific prior written permission.<br /> *<br /> * NO EXPRESS OR IMPLIED LICENSES TO ANY PARTY&#039;S PATENT RIGHTS ARE<br /> * GRANTED BY THIS LICENSE.&nbsp; THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT<br /> * HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED<br /> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF<br /> * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE<br /> * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE<br /> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR<br /> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF<br /> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR<br /> * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,<br /> * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE<br /> * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN<br /> * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.<br /> */</p><p>#include &lt;linux/mtd/mtd.h&gt;<br />#include &lt;linux/mtd/partitions.h&gt;<br />#include &lt;linux/pci.h&gt;<br />#include &lt;linux/platform_device.h&gt;<br />#include &lt;linux/ath9k_platform.h&gt;</p><p>#include &lt;asm/mach-ath79/ar71xx_regs.h&gt;</p><p>#include &quot;common.h&quot;<br />#include &quot;dev-ap9x-pci.h&quot;<br />#include &quot;dev-eth.h&quot;<br />#include &quot;dev-gpio-buttons.h&quot;<br />#include &quot;dev-leds-gpio.h&quot;<br />#include &quot;dev-m25p80.h&quot;<br />#include &quot;dev-spi.h&quot;<br />#include &quot;dev-usb.h&quot;<br />#include &quot;dev-wmac.h&quot;<br />#include &quot;machtypes.h&quot;</p><p>#define TL_WR841NV8_GPIO_LED_WPS&nbsp; &nbsp; &nbsp; &nbsp; 15<br />//#define TL_WR841NV8_GPIO_LED_USB&nbsp; &nbsp; &nbsp; &nbsp; 17<br />#define TL_WR841NV8_GPIO_LED_WLAN&nbsp; &nbsp; &nbsp; &nbsp;13<br />#define TL_WR841NV8_GPIO_LED_SYS&nbsp; &nbsp; &nbsp; &nbsp; 14<br />#define TL_WR841NV8_GPIO_BTN_RESET&nbsp; &nbsp; &nbsp; 17</p><p>//#define DB120_GPIO_BTN_WPS&nbsp; &nbsp; &nbsp; &nbsp; 16</p><p>//#define DB120_KEYS_POLL_INTERVAL&nbsp; &nbsp; 20&nbsp; &nbsp; /* msecs */<br />//#define DB120_KEYS_DEBOUNCE_INTERVAL&nbsp; &nbsp; (3 * DB120_KEYS_POLL_INTERVAL)</p><p>//#define DB120_MAC0_OFFSET&nbsp; &nbsp; 0<br />//#define DB120_MAC1_OFFSET&nbsp; &nbsp; 6<br />#define WR841NV8_WMAC_CALDATA_OFFSET 0x1000<br />//#define DB120_PCIE_CALDATA_OFFSET 0x5000</p><p>#define TL_WR841NV8_KEYS_POLL_INTERVAL&nbsp; &nbsp; 20&nbsp; &nbsp; /* msecs */<br />#define TL_WR841NV8_KEYS_DEBOUNCE_INTERVAL (3 * TL_WR841NV8_KEYS_POLL_INTERVAL)</p><p>static struct mtd_partition tl_wr841nv8_partitions[] = {<br />{<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;u-boot&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; = 0,<br />&nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; = 0x020000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .mask_flags&nbsp; &nbsp; = MTD_WRITEABLE,<br />&nbsp; &nbsp; }, {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;kernel&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; = 0x020000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; = 0x100000,<br />&nbsp; &nbsp; }, {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;rootfs&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; = 0x120000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; = 0x2d0000,<br />&nbsp; &nbsp; }, {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;art&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; = 0x3f0000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; = 0x010000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .mask_flags&nbsp; &nbsp; = MTD_WRITEABLE,<br />&nbsp; &nbsp; }, {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;firmware&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .offset&nbsp; &nbsp; &nbsp; &nbsp; = 0x020000,<br />&nbsp; &nbsp; &nbsp; &nbsp; .size&nbsp; &nbsp; &nbsp; &nbsp; = 0x3d0000,<br />&nbsp; &nbsp; }<br />};</p><p>static struct flash_platform_data tl_wr841nv8_flash_data = {<br />&nbsp; &nbsp; .parts&nbsp; &nbsp; &nbsp; &nbsp; = tl_wr841nv8_partitions,<br />&nbsp; &nbsp; .nr_parts&nbsp; &nbsp; = ARRAY_SIZE(tl_wr841nv8_partitions),<br />};</p><p>static struct gpio_led tl_wr841nv8_leds_gpio[] __initdata = {<br />&nbsp; &nbsp;&nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:wps&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WR841NV8_GPIO_LED_WPS,<br />&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; },<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:system&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WR841NV8_GPIO_LED_SYS,<br />&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; },&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; .name&nbsp; &nbsp; &nbsp; &nbsp; = &quot;tp-link:green:wlan&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WR841NV8_GPIO_LED_WLAN,<br />&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; }<br />};</p><p>static struct gpio_keys_button tl_wr841nv8_gpio_keys[] __initdata = {<br />&nbsp; &nbsp; {<br />&nbsp; &nbsp; &nbsp; &nbsp; .desc&nbsp; &nbsp; &nbsp; &nbsp; = &quot;reset&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; .type&nbsp; &nbsp; &nbsp; &nbsp; = EV_KEY,<br />&nbsp; &nbsp; &nbsp; &nbsp; .code&nbsp; &nbsp; &nbsp; &nbsp; = KEY_RESTART,<br />&nbsp; &nbsp; &nbsp; &nbsp; .debounce_interval = TL_WR841NV8_KEYS_DEBOUNCE_INTERVAL,<br />&nbsp; &nbsp; &nbsp; &nbsp; .gpio&nbsp; &nbsp; &nbsp; &nbsp; = TL_WR841NV8_GPIO_BTN_RESET,<br />&nbsp; &nbsp; &nbsp; &nbsp; .active_low&nbsp; &nbsp; = 1,<br />&nbsp; &nbsp; },<br />};</p><p>static void __init tl_wr841nv8_gmac_setup(void)<br />{<br />&nbsp; &nbsp; void __iomem *base;<br />&nbsp; &nbsp; u32 t;</p><p>&nbsp; &nbsp; base = ioremap(AR934X_GMAC_BASE, AR934X_GMAC_SIZE);</p><p>&nbsp; &nbsp; t = __raw_readl(base + AR934X_GMAC_REG_ETH_CFG);<br />&nbsp; &nbsp; t &amp;= ~(AR934X_ETH_CFG_RGMII_GMAC0 | AR934X_ETH_CFG_MII_GMAC0 |<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; AR934X_ETH_CFG_MII_GMAC0 | AR934X_ETH_CFG_SW_ONLY_MODE);<br />&nbsp; &nbsp; __raw_writel(t, base + AR934X_GMAC_REG_ETH_CFG);</p><p>&nbsp; &nbsp; iounmap(base);<br />}</p><p>static void __init tl_wr841nv8_setup(void)<br />{<br />&nbsp; &nbsp; u8 *mac = (u8 *) KSEG1ADDR(0x1f01fc00);<br />//&nbsp; &nbsp; u8 *eeprom = (u8 *) KSEG1ADDR(0x1fff1000);<br />&nbsp; &nbsp; u8 *art = (u8 *) KSEG1ADDR(0x1fff0000);<br />//&nbsp; &nbsp; ar71xx_gpio_output_select(DB120_GPIO_LED_USB, AR934X_GPIO_OUT_GPIO);//db120</p><p>//&nbsp; &nbsp; ar71xx_add_device_usb();//db120<br />&nbsp; &nbsp; </p><p>&nbsp; &nbsp; ath79_register_m25p80(&amp;tl_wr841nv8_flash_data);<br />&nbsp; &nbsp; ath79_register_leds_gpio(-1, ARRAY_SIZE(tl_wr841nv8_leds_gpio),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; tl_wr841nv8_leds_gpio);<br />&nbsp; &nbsp; ath79_register_gpio_keys_polled(-1, TL_WR841NV8_KEYS_POLL_INTERVAL,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ARRAY_SIZE(tl_wr841nv8_gpio_keys),<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; tl_wr841nv8_gpio_keys);<br />&nbsp; &nbsp; ath79_register_usb(); // 2543<br />&nbsp; &nbsp; ath79_register_wmac(art + WR841NV8_WMAC_CALDATA_OFFSET, mac);<br />&nbsp; &nbsp; tl_wr841nv8_gmac_setup();</p><p>&nbsp; &nbsp; ath79_register_mdio(0, 0x0);<br />&nbsp; &nbsp; ath79_register_mdio(1, 0x0);</p><p>&nbsp; &nbsp; ath79_init_mac(ath79_eth0_data.mac_addr, mac, 0);<br />#if 0<br />&nbsp; &nbsp; /* GMAC0 is connected to an AR8327 switch */<br />&nbsp; &nbsp; ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_RGMII;<br />&nbsp; &nbsp; ath79_eth0_data.speed = SPEED_1000;<br />&nbsp; &nbsp; ath79_eth0_data.duplex = DUPLEX_FULL;<br />#else<br />&nbsp; &nbsp; /* GMAC0 is connected to PHY4 of the internal switch */<br />&nbsp; &nbsp; ath79_switch_data.phy4_mii_en = 1;</p><p>&nbsp; &nbsp; ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_MII;<br />&nbsp; &nbsp; ath79_eth0_data.phy_mask = BIT(4);<br />&nbsp; &nbsp; ath79_eth0_data.mii_bus_dev = &amp;ath79_mdio1_device.dev;<br />#endif<br />&nbsp; &nbsp; ath79_register_eth(0);</p><p>//&nbsp; &nbsp; ath79_eth0_data.mii_bus_dev = &amp;tl_wr2543n_rtl8367_device.dev;//2543<br />//&nbsp; &nbsp; ar71xx_add_device_eth(0);<br />&nbsp; &nbsp; ath79_init_mac(ath79_eth1_data.mac_addr, mac, 1);<br />&nbsp; &nbsp; ath79_eth1_data.phy_if_mode = PHY_INTERFACE_MODE_GMII;<br />&nbsp; &nbsp; ath79_eth1_data.speed = SPEED_1000;<br />&nbsp; &nbsp; ath79_eth1_data.duplex = DUPLEX_FULL;</p><p>&nbsp; &nbsp; ath79_register_eth(1);<br />}</p><p>MIPS_MACHINE(ATH79_MACH_TL_WR841N_V8, &quot;TL-WR841N-v8&quot;, &quot;TP-LINK TL-WR841N v8&quot;,<br />&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; tl_wr841nv8_setup);</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167967">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						23 May 2012, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>patch</p><p>Index: target/linux/ar71xx/image/Makefile<br />===================================================================<br />--- target/linux/ar71xx/image/Makefile&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/image/Makefile&nbsp; &nbsp; (working copy)<br />@@ -405,13 +405,13 @@<br /> &nbsp; &nbsp; &nbsp; &nbsp; -k $(KDIR_TMP)/kernel-$(2).bin \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -r $(KDIR)/root.$(1) \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -a $(call rootfs_align,$(1)) -j \<br />-&nbsp; &nbsp; &nbsp; &nbsp; -o $(call factoryname,$(1),$(2))<br />+&nbsp; &nbsp; &nbsp; &nbsp; -o $(call factoryname,$(1),$(2)_$(REVISION))<br /> &nbsp; &nbsp; -$(STAGING_DIR_HOST)/bin/mktplinkfw \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -H $(4) -W $(5) -F $(6) -N OpenWrt -V $(REVISION) -s\<br /> &nbsp; &nbsp; &nbsp; &nbsp; -k $(KDIR_TMP)/kernel-$(2).bin \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -r $(KDIR)/root.$(1) \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -a $(call rootfs_align,$(1)) -j \<br />-&nbsp; &nbsp; &nbsp; &nbsp; -o $(call sysupname,$(1),$(2))<br />+&nbsp; &nbsp; &nbsp; &nbsp; -o $(call sysupname,$(1),$(2)_$(REVISION))<br /> endef</p><p> define Image/Build/TPLINK/initramfs<br />@@ -429,13 +429,13 @@<br /> &nbsp; &nbsp; &nbsp; &nbsp; -k $(KDIR_TMP)/vmlinux-$(2).bin.lzma \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -r $(KDIR)/root.$(1) \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -a $(call rootfs_align,$(1)) -j \<br />-&nbsp; &nbsp; &nbsp; &nbsp; -o $(call factoryname,$(1),$(2))<br />+&nbsp; &nbsp; &nbsp; &nbsp; -o $(call factoryname,$(1),$(2)_$(REVISION))<br /> &nbsp; &nbsp; -$(STAGING_DIR_HOST)/bin/mktplinkfw \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -H $(4) -W $(5) -F $(6) -N OpenWrt -V $(REVISION) -s \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -k $(KDIR_TMP)/vmlinux-$(2).bin.lzma \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -r $(KDIR)/root.$(1) \<br /> &nbsp; &nbsp; &nbsp; &nbsp; -a $(call rootfs_align,$(1)) -j \<br />-&nbsp; &nbsp; &nbsp; &nbsp; -o $(call sysupname,$(1),$(2))<br />+&nbsp; &nbsp; &nbsp; &nbsp; -o $(call sysupname,$(1),$(2)_$(REVISION))<br /> endef</p><p> define Image/Build/TPLINK-LZMA/initramfs<br />@@ -904,6 +904,31 @@<br /> &nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr703n-v1,$(tlwr703_cmdline),0x07030101,1,4Mlzma)<br /> endef</p><p>+tlwr700_cmdline=board=TL-WR700N console=ttyATH0,115200<br />+define Image/Build/Profile/TLWR700<br />+&nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr700n-v1,$(tlwr700_cmdline),0x07000101,1,4Mlzma)<br />+endef<br />+<br />+tlwr702_cmdline=board=TL-WR702N console=ttyATH0,115200<br />+define Image/Build/Profile/TLWR702<br />+&nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr702n-v1,$(tlwr702_cmdline),0x07020101,1,4Mlzma)<br />+endef<br />+<br />+tlwr710_cmdline=board=TL-WR710N console=ttyATH0,115200<br />+define Image/Build/Profile/TLWR710<br />+&nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr710n-v1,$(tlwr710_cmdline),0x07100101,1,4Mlzma)<br />+endef<br />+<br />+tlwr800_cmdline=board=TL-WR800N console=ttyATH0,115200<br />+define Image/Build/Profile/TLWR800<br />+&nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr800n-v1,$(tlwr800_cmdline),0x08000101,1,4Mlzma)<br />+endef<br />+<br />+tlwr841v8_cmdline=board=TL-WR841N-v8 console=ttyATH0,115200<br />+define Image/Build/Profile/TLWR841V8<br />+&nbsp; &nbsp; $(call Image/Build/Template/$(fs_64kraw)/$(1),TPLINK-LZMA,tl-wr841n-v8,$(tlwr841v8_cmdline),0x08410008,1,4Mlzma)<br />+endef<br />+<br /> tlwr740_cmdline=board=TL-WR741ND console=ttyS0,115200<br /> tlwr740v4_cmdline=board=TL-WR741ND-v4 console=ttyATH0,115200<br /> define Image/Build/Profile/TLWR740<br />Index: target/linux/ar71xx/config-3.3<br />===================================================================<br />--- target/linux/ar71xx/config-3.3&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/config-3.3&nbsp; &nbsp; (working copy)<br />@@ -56,6 +56,11 @@<br /> CONFIG_ATH79_MACH_TL_WR1043ND=y<br /> CONFIG_ATH79_MACH_TL_WR2543N=y<br /> CONFIG_ATH79_MACH_TL_WR703N=y<br />+CONFIG_ATH79_MACH_TL_WR700N=y<br />+CONFIG_ATH79_MACH_TL_WR702N=y<br />+CONFIG_ATH79_MACH_TL_WR710N=y<br />+CONFIG_ATH79_MACH_TL_WR800N=y<br />+CONFIG_ATH79_MACH_TL_WR841N_V8=y<br /> CONFIG_ATH79_MACH_TL_WR741ND=y<br /> CONFIG_ATH79_MACH_TL_WR741ND_V4=y<br /> CONFIG_ATH79_MACH_TL_WR841N_V1=y<br />Index: target/linux/ar71xx/patches-3.3/615-MIPS-ath79-WR1041N-support.patch<br />===================================================================<br />--- target/linux/ar71xx/patches-3.3/615-MIPS-ath79-WR1041N-support.patch&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/patches-3.3/615-MIPS-ath79-WR1041N-support.patch&nbsp; &nbsp; (working copy)<br />@@ -1,6 +1,6 @@<br /> --- a/arch/mips/ath79/Kconfig<br /> +++ b/arch/mips/ath79/Kconfig<br />-@@ -451,6 +451,17 @@ config ATH79_MACH_TL_WR941ND<br />+@@ -451,6 +451,64 @@ config ATH79_MACH_TL_WR941ND<br />&nbsp; &nbsp; &nbsp; select ATH79_DEV_M25P80<br />&nbsp; &nbsp; &nbsp; select ATH79_DEV_WMAC<br />&nbsp; <br />@@ -15,26 +15,83 @@<br /> +&nbsp; &nbsp; select ATH79_DEV_USB<br /> +&nbsp; &nbsp; select ATH79_DEV_WMAC<br /> +<br />++config ATH79_MACH_TL_WR700N<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WR700N support&quot;<br />++&nbsp; &nbsp; select SOC_AR933X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />++config ATH79_MACH_TL_WR702N<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WR702N support&quot;<br />++&nbsp; &nbsp; select SOC_AR933X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />++config ATH79_MACH_TL_WR710N<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WR710N support&quot;<br />++&nbsp; &nbsp; select SOC_AR933X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_USB<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />++config ATH79_MACH_TL_WR800N<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WR800N support&quot;<br />++&nbsp; &nbsp; select SOC_AR934X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_USB<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />++config ATH79_MACH_TL_WR841N_V8<br />++&nbsp; &nbsp; bool &quot;TP-LINK TL-WR841N v8 support&quot;<br />++&nbsp; &nbsp; select SOC_AR934X<br />++&nbsp; &nbsp; select ATH79_DEV_ETH<br />++&nbsp; &nbsp; select ATH79_DEV_GPIO_BUTTONS<br />++&nbsp; &nbsp; select ATH79_DEV_LEDS_GPIO<br />++&nbsp; &nbsp; select ATH79_DEV_M25P80<br />++&nbsp; &nbsp; select ATH79_DEV_WMAC<br />++<br />&nbsp; config ATH79_MACH_TL_WR1043ND<br />&nbsp; &nbsp; &nbsp; bool &quot;TP-LINK TL-WR1043ND support&quot;<br />&nbsp; &nbsp; &nbsp; select SOC_AR913X<br /> --- a/arch/mips/ath79/machtypes.h<br /> +++ b/arch/mips/ath79/machtypes.h<br />-@@ -64,6 +64,7 @@ enum ath79_mach_type {<br />+@@ -64,6 +64,12 @@ enum ath79_mach_type {<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_MR3420,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-MR3420 */<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_WA901ND,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WA901ND */<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_WA901ND_V2,&nbsp; &nbsp; /* TP-LINK TL-WA901ND v2 */<br /> +&nbsp; &nbsp; ATH79_MACH_TL_WR1041N_V2,&nbsp; &nbsp; /* TP-LINK TL-WR1041N v2 */<br />++&nbsp; &nbsp; ATH79_MACH_TL_WR700N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR700N */<br />++&nbsp; &nbsp; ATH79_MACH_TL_WR702N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR702N */<br />++&nbsp; &nbsp; ATH79_MACH_TL_WR710N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR710N */<br />++&nbsp; &nbsp; ATH79_MACH_TL_WR800N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR800N */<br />++&nbsp; &nbsp; ATH79_MACH_TL_WR841N_V8,&nbsp; &nbsp; /* TP-LINK TL-WR841N V8 */<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_WR1043ND,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR1041ND */<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_WR2543N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR2543N/ND */<br />&nbsp; &nbsp; &nbsp; ATH79_MACH_TL_WR703N,&nbsp; &nbsp; &nbsp; &nbsp; /* TP-LINK TL-WR703N */<br /> --- a/arch/mips/ath79/Makefile<br /> +++ b/arch/mips/ath79/Makefile<br />-@@ -74,6 +74,7 @@ obj-$(CONFIG_ATH79_MACH_TL_WR741ND)&nbsp; &nbsp; += m<br />+@@ -74,6 +74,12 @@ obj-$(CONFIG_ATH79_MACH_TL_WR741ND)&nbsp; &nbsp; += m<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR741ND_V4)&nbsp; &nbsp; += mach-tl-wr741nd-v4.o<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR841N_V1)&nbsp; &nbsp; += mach-tl-wr841n.o<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR941ND)&nbsp; &nbsp; += mach-tl-wr941nd.o<br /> +obj-$(CONFIG_ATH79_MACH_TL_WR1041N_V2)&nbsp; &nbsp; += mach-tl-wr1041n-v2.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR700N)&nbsp; &nbsp; += mach-tl-wr700n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR702N)&nbsp; &nbsp; += mach-tl-wr702n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR710N)&nbsp; &nbsp; += mach-tl-wr710n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR800N)&nbsp; &nbsp; += mach-tl-wr800n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR841N_V8)&nbsp; &nbsp; += mach-tl-wr841n-v8.o<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR1043ND)&nbsp; &nbsp; += mach-tl-wr1043nd.o<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR2543N)&nbsp; &nbsp; += mach-tl-wr2543n.o<br />&nbsp; obj-$(CONFIG_ATH79_MACH_TL_WR703N)&nbsp; &nbsp; += mach-tl-wr703n.o<br />Index: target/linux/ar71xx/base-files/lib/ar71xx.sh<br />===================================================================<br />--- target/linux/ar71xx/base-files/lib/ar71xx.sh&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/base-files/lib/ar71xx.sh&nbsp; &nbsp; (working copy)<br />@@ -73,6 +73,21 @@<br /> &nbsp; &nbsp; &quot;070300&quot;*)<br /> &nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR703N&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;070000&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR700N&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;070200&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR702N&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;071000&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR710N&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;080000&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR800N&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; &quot;084100&quot;*)<br />+&nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WR841N&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br /> &nbsp; &nbsp; &quot;070100&quot;*)<br /> &nbsp; &nbsp; &nbsp; &nbsp; model=&quot;TP-Link TL-WA701N/ND&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />@@ -322,6 +337,21 @@<br /> &nbsp; &nbsp; *&quot;TL-WR703N v1&quot;)<br /> &nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr703n&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WR700&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr700n&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WR702&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr702n&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WR710&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr710n&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WR800&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr800n&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; *&quot;TL-WR841N v8&quot;)<br />+&nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-wr841n-v8&quot;<br />+&nbsp; &nbsp; &nbsp; &nbsp; ;;<br /> &nbsp; &nbsp; *&quot;TL-MR11U&quot;)<br /> &nbsp; &nbsp; &nbsp; &nbsp; name=&quot;tl-mr11u&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />Index: target/linux/ar71xx/base-files/lib/upgrade/platform.sh<br />===================================================================<br />--- target/linux/ar71xx/base-files/lib/upgrade/platform.sh&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/base-files/lib/upgrade/platform.sh&nbsp; &nbsp; (working copy)<br />@@ -131,6 +131,11 @@<br /> &nbsp; &nbsp; tl-wa901nd | \<br /> &nbsp; &nbsp; tl-wa901nd-v2 | \<br /> &nbsp; &nbsp; tl-wr703n | \<br />+&nbsp; &nbsp; tl-wr700n | \<br />+&nbsp; &nbsp; tl-wr702n | \<br />+&nbsp; &nbsp; tl-wr710n | \<br />+&nbsp; &nbsp; tl-wr800n | \<br />+&nbsp; &nbsp; tl-wr841n-v8 | \<br /> &nbsp; &nbsp; tl-wr741nd | \<br /> &nbsp; &nbsp; tl-wr741nd-v4 | \<br /> &nbsp; &nbsp; tl-wr841n-v1 | \<br />Index: target/linux/ar71xx/base-files/etc/uci-defaults/leds<br />===================================================================<br />--- target/linux/ar71xx/base-files/etc/uci-defaults/leds&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/base-files/etc/uci-defaults/leds&nbsp; &nbsp; (working copy)<br />@@ -188,6 +188,7 @@<br /> &nbsp; &nbsp; set_led_wlan &quot;wlan&quot; &quot;WLAN&quot; &quot;tp-link:green:wlan&quot; &quot;phy0tpt&quot;<br /> &nbsp; &nbsp; ;;</p><p>+tl-wr841n-v8 | \<br /> tl-wr941nd | \<br /> tl-wr1041n-v2)<br /> &nbsp; &nbsp; set_led_wlan &quot;wlan&quot; &quot;WLAN&quot; &quot;tp-link:green:wlan&quot; &quot;phy0tpt&quot;<br />Index: target/linux/ar71xx/base-files/etc/uci-defaults/network<br />===================================================================<br />--- target/linux/ar71xx/base-files/etc/uci-defaults/network&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/base-files/etc/uci-defaults/network&nbsp; &nbsp; (working copy)<br />@@ -110,6 +110,12 @@<br /> &nbsp; &nbsp; ucidef_add_switch_vlan &quot;switch0&quot; &quot;2&quot; &quot;0 9t&quot;<br /> &nbsp; &nbsp; ;;</p><p>+tl-wr841n-v8)<br />+&nbsp; &nbsp; ucidef_set_interfaces_lan_wan &quot;eth1&quot; &quot;eth0&quot;<br />+&nbsp; &nbsp; ucidef_add_switch &quot;switch0&quot; &quot;1&quot; &quot;1&quot;<br />+&nbsp; &nbsp; ucidef_add_switch_vlan &quot;switch0&quot; &quot;1&quot; &quot;0 1 2 3 4&quot;<br />+&nbsp; &nbsp; ;;<br />+<br /> tl-wr841n-v1|\<br /> tl-wr941nd)<br /> &nbsp; &nbsp; ucidef_set_interface_raw &quot;eth&quot; &quot;eth0&quot;<br />@@ -137,6 +143,9 @@<br /> tl-wa901nd |\<br /> tl-wa901nd-v2 |\<br /> tl-wr703n |\<br />+tl-wr700n |\<br />+tl-wr702n |\<br />+tl-wr800n |\<br /> wp543)<br /> &nbsp; &nbsp; ucidef_set_interface_lan &quot;eth0&quot;<br /> &nbsp; &nbsp; ;;<br />@@ -166,6 +175,7 @@<br /> tl-mr3220 |\<br /> tl-mr3420 |\<br /> tl-wr741nd |\<br />+tl-wr710n |\<br /> tl-wr741nd-v4 |\<br /> tl-wr841n-v7 |\<br /> whr-g301n |\<br />Index: target/linux/ar71xx/base-files/etc/diag.sh<br />===================================================================<br />--- target/linux/ar71xx/base-files/etc/diag.sh&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/base-files/etc/diag.sh&nbsp; &nbsp; (working copy)<br />@@ -118,9 +118,14 @@<br /> &nbsp; &nbsp; tl-wr741nd-v4 | \<br /> &nbsp; &nbsp; tl-wr841n-v1 | \<br /> &nbsp; &nbsp; tl-wr841n-v7 | \<br />+&nbsp; &nbsp; tl-wr841n-v8 | \<br /> &nbsp; &nbsp; tl-wr941nd)<br /> &nbsp; &nbsp; &nbsp; &nbsp; status_led=&quot;tp-link:green:system&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />+&nbsp; &nbsp; tl-wr700n | \<br />+&nbsp; &nbsp; tl-wr702n | \<br />+&nbsp; &nbsp; tl-wr710n | \<br />+&nbsp; &nbsp; tl-wr800n | \<br /> &nbsp; &nbsp; tl-wr703n)<br /> &nbsp; &nbsp; &nbsp; &nbsp; status_led=&quot;tp-link:blue:system&quot;<br /> &nbsp; &nbsp; &nbsp; &nbsp; ;;<br />Index: target/linux/ar71xx/generic/profiles/tp-link.mk<br />===================================================================<br />--- target/linux/ar71xx/generic/profiles/tp-link.mk&nbsp; &nbsp; (revision 31813)<br />+++ target/linux/ar71xx/generic/profiles/tp-link.mk&nbsp; &nbsp; (working copy)<br />@@ -180,3 +180,58 @@<br /> &nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR2543N/ND.<br /> endef<br /> $(eval $(call Profile,TLWR2543))<br />+<br />+<br />+define Profile/TLWR700<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WR700N<br />+&nbsp; &nbsp; PACKAGES:=<br />+endef<br />+<br />+define Profile/TLWR700/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR700N<br />+endef<br />+$(eval $(call Profile,TLWR700))<br />+<br />+<br />+define Profile/TLWR702<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WR702N<br />+&nbsp; &nbsp; PACKAGES:=<br />+endef<br />+<br />+define Profile/TLWR702/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR702N<br />+endef<br />+$(eval $(call Profile,TLWR702))<br />+<br />+<br />+define Profile/TLWR710<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WR710N<br />+&nbsp; &nbsp; PACKAGES:=kmod-usb-core kmod-usb2 kmod-ledtrig-usbdev<br />+endef<br />+<br />+define Profile/TLWR710/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR710N.<br />+endef<br />+$(eval $(call Profile,TLWR710))<br />+<br />+<br />+define Profile/TLWR800<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WR800N<br />+&nbsp; &nbsp; PACKAGES:=kmod-usb-core kmod-usb2 kmod-ledtrig-usbdev<br />+endef<br />+<br />+define Profile/TLWR800/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR800N.<br />+endef<br />+$(eval $(call Profile,TLWR800))<br />+<br />+<br />+define Profile/TLWR841V8<br />+&nbsp; &nbsp; NAME:=TP-LINK TL-WR841N-v8<br />+&nbsp; &nbsp; PACKAGES:=<br />+endef<br />+<br />+define Profile/TLWR841V8/Description<br />+&nbsp; &nbsp; Package set optimized for the TP-LINK TL-WR841N-v8.<br />+endef<br />+$(eval $(call Profile,TLWR841V8))<br />Index: tools/firmware-utils/src/mktplinkfw.c<br />===================================================================<br />--- tools/firmware-utils/src/mktplinkfw.c&nbsp; &nbsp; (revision 31813)<br />+++ tools/firmware-utils/src/mktplinkfw.c&nbsp; &nbsp; (working copy)<br />@@ -37,6 +37,11 @@<br /> #define HWID_TL_WA901ND_V1&nbsp; &nbsp; 0x09010001<br /> #define HWID_TL_WA901ND_V2&nbsp; &nbsp; 0x09010002<br /> #define HWID_TL_WR703N_V1&nbsp; &nbsp; 0x07030101<br />+#define HWID_TL_WR700N_V1&nbsp; &nbsp; 0x07000101<br />+#define HWID_TL_WR702N_V1&nbsp; &nbsp; 0x07020101<br />+#define HWID_TL_WR710N_V1&nbsp; &nbsp; 0x07100101<br />+#define HWID_TL_WR800N_V1&nbsp; &nbsp; 0x08000101<br />+#define HWID_TL_WR841N_V8&nbsp; &nbsp; 0x08410008<br /> #define HWID_TL_WR741ND_V1&nbsp; &nbsp; 0x07410001<br /> #define HWID_TL_WR741ND_V4&nbsp; &nbsp; 0x07410004<br /> #define HWID_TL_WR740N_V1&nbsp; &nbsp; 0x07400001<br />@@ -276,6 +281,31 @@<br /> &nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br /> &nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br /> &nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WR700Nv1&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WR700N_V1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WR702Nv1&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WR702N_V1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WR710Nv1&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WR710N_V1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WR800Nv1&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WR800N_V1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br />+&nbsp; &nbsp; &nbsp; &nbsp; .id&nbsp; &nbsp; &nbsp; &nbsp; = &quot;TL-WR841Nv8&quot;,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_id&nbsp; &nbsp; &nbsp; &nbsp; = HWID_TL_WR841N_V8,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .hw_rev&nbsp; &nbsp; &nbsp; &nbsp; = 1,<br />+&nbsp; &nbsp; &nbsp; &nbsp; .layout_id&nbsp; &nbsp; = &quot;4Mlzma&quot;,<br />+&nbsp; &nbsp; }, {<br /> &nbsp; &nbsp; &nbsp; &nbsp; /* terminating entry */<br /> &nbsp; &nbsp; }<br /> };</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168503">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eastwoodnet</div>
					<div class="post-datetime">
						30 May 2012, 07:18					</div>
				</div>
				<div class="post-content content">
					<p>Hello ?i need this device TTL info,<br />where is the ttl? i connect TP4 TP5,but there is unread code!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p168518">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						30 May 2012, 11:33					</div>
				</div>
				<div class="post-content content">
					<p>In this picture&nbsp; <a href="http://www.right.com.cn/forum/thread-78372-1-1.html">http://www.right.com.cn/forum/thread-78372-1-1.html</a>&nbsp; you can see the TTL connection location marked.<br />You will also need a ground connection. I used a Nokia CA-42 clone cable with a pl-2303 chip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172054">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">bournokz</div>
					<div class="post-datetime">
						11 Jul 2012, 17:18					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://i47.tinypic.com/zyeipg.jpg">http://i47.tinypic.com/zyeipg.jpg</a><br /><a href="http://i49.tinypic.com/144070p.jpg">http://i49.tinypic.com/144070p.jpg</a><br /><a href="http://i49.tinypic.com/211rneu.jpg">http://i49.tinypic.com/211rneu.jpg</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172465">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">chillifire</div>
					<div class="post-datetime">
						16 Jul 2012, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>@ldipinney<br />Did you submit your patch to the development mailing list? If not, you should.<br />The patch probably needs refreshing as some of the files have recently changed with the inclusion of tp-link tl-wdr4300 for example.<br />Have you tested some or all of these models? Please advise</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p172472">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						17 Jul 2012, 01:19					</div>
				</div>
				<div class="post-content content">
					<p>This router REALLY needs a Hardware Hack.<br />Namely a RAM upgrade which mine has. (64M)<br />With only 16M of RAM the web interface is a real slug. (not recommended) <br />Mine runs Firmware built from OpenWrt-Dreambox.<br /><a href="https://dev.openwrt.org.cn">https://dev.openwrt.org.cn</a>/ (in Simplified Chinese)<br />No hacking required...the 841v8 is supported there.</p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 17 Jul 2012, 01:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173512">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">smooney</div>
					<div class="post-datetime">
						28 Jul 2012, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>Right, so, a couple of things here:</p><p>* TP2 is ground.&nbsp; TP5 is RX, and TP6 is TX.</p><p>* the boot loader is not the same u-boot as used elsewhere; it lacks various commands (cp.b, tftpboot, and so forth) and can not handle u-boot images.&nbsp; I managed to get it to boot a raw vmlinuz (which killed itself as soon as it probed the serial port), so it might be possible to feed it a custom image with an embedded ramdisk to flash the bootloader, then do the usual bootstrap procedure.</p><p>* there&#039;s a standard 14-pin MIPS JTAG block (minus headers) at the upper right.&nbsp; I expect that your friends in Shenzhen used that to flash the u-boot that they&#039;ve got on their site and loaded OpenWRT on it from there.</p><p>* the diff that you uploaded is incomplete.&nbsp; Although you&#039;ve got everything there for the 841v8, it&#039;s missing .c files for the other platforms that came along for the ride.&nbsp; I&#039;ve cleaned it up a bit and made it apply cleanly to a -current tree.</p><p>* I&#039;m not convinced that 16 megs is insufficient to run the GUI.&nbsp; These routers are only about 180 RMB at Cybermall, so it&#039;s not cost-effective to ship it up to those thieves in Shenzhen for a memory upgrade.</p><p>I nuked the bootloader by screwing around with &quot;update boot ${SERVER} ${IMAGE}&quot;, so I need to borrow a JTAG programmer from work before I can look at this further.&nbsp; Once I get it running again, I&#039;ll document my findings and make my image available.</p><p>Cheers ...</p>											<p class="post-edited">(Last edited by <strong>smooney</strong> on 28 Jul 2012, 15:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173514">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						28 Jul 2012, 15:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>smooney wrote:</cite><blockquote><p>* I&#039;m not convinced that 16 megs is insufficient to run the GUI.</p></blockquote></div><p>The factory bootloader is from wind river vxworks.<br />I can copy the bootloader from my 841v8 for you if you like.<br />I AM convinced that the luci GUI doesn&#039;t run well with only 16MB RAM...but don&#039;t let me stop you from trying <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Perhaps X-Wrt would work OK..I didn&#039;t try.</p><p>I don&#039;t bother patching for this one as it is supported by OpenWrt-Dreambox.</p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 28 Jul 2012, 16:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175257">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						19 Aug 2012, 01:06					</div>
				</div>
				<div class="post-content content">
					<p>Could you please &quot;bother&quot; patching anyway? V8 is now sold in europe too, I don&#039;t speak chinese, so support in &quot;OpenWrt-Dreambox&quot; is for nothing, it is the same as if it would be supported in dd-wrt, when I&#039;d like a pure openwrt in english. 16MB is low memory, but I&#039;m running openwrt on older boxes with 16MB perfectly fine, I&#039;m not using web interface neither on 32MB.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179438">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nanni92</div>
					<div class="post-datetime">
						26 Sep 2012, 16:37					</div>
				</div>
				<div class="post-content content">
					<p>hi this is my wr841nd v8:</p><br /><p>U-Boot 1.1.4 (Apr 12 2012 - 09:57:00)</p><p>U-boot AP123</p><br /><p>DRAM:&nbsp; 32 MB<br />id read 0x100000ff<br />Flash:&nbsp; 4 MB<br />Using default environment</p><p>In:&nbsp; &nbsp; serial<br />Out:&nbsp; &nbsp;serial<br />Err:&nbsp; &nbsp;serial<br />Net:&nbsp; &nbsp;ag934x_enet_initialize...<br />wasp reset mask:c03300<br />WASP ----&gt; S27 PHY<br />GMAC: cfg1 0x5 cfg2 0x7114<br />eth0: ba:be:fa:ce:08:41<br />s27 reg init <br />athrs27_phy_setup ATHR_PHY_CONTROL 4: 0x1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 4: 0x10<br />eth0 up<br />WASP ----&gt; S27 PHY<br />GMAC: cfg1 0xf cfg2 0x7214<br />eth1: ba:be:fa:ce:08:41<br />s27 reg init lan <br />ATHRS27: resetting s27<br />ATHRS27: s27 reset done<br />athrs27_phy_setup ATHR_PHY_CONTROL 0: 0x1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 0: 0x10<br />athrs27_phy_setup ATHR_PHY_CONTROL 1: 0x1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 1: 0x10<br />athrs27_phy_setup ATHR_PHY_CONTROL 2: 0x1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 2: 0x10<br />athrs27_phy_setup ATHR_PHY_CONTROL 3: 0x1000<br />athrs27_phy_setup ATHR_PHY_SPEC_STAUS 3: 0x10<br />eth1 up<br />eth0, eth1<br />Autobooting in 1 seconds<br />## Booting image at 9f020000 ...<br />&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>Starting kernel ...</p><p>Booting Atheros AR934x</p><p>Linux version 2.6.31--LSDK-9.2.0_U5.508 (root@localhost.localdomain) (gcc version 4.3.3 (GCC) ) #3 Thu Apr 12 09:57:51 CST 2012<br />flash_size passed from bootloader = 4<br />Ram size passed from bootloader =33554432<br />CPU revision is: 0001974c (MIPS 74Kc)<br />ath_sys_frequency: cpu srif ddr srif cpu 535 ddr 400 ahb 200<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS0,115200 root=31:2 rootfstype=squashfs init=/sbin/init mtdparts=ath-nor0:128k(u-boot),1024k(kernel),2816k(rootfs),64k(config),64k(art) mem=32M<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />Writing ErrCtl register=00000000<br />Readback ErrCtl register=00000000<br />Memory: 30132k/32768k available (1722k kernel code, 2636k reserved, 426k data, 112k init, 0k highmem)<br />NR_IRQS:128<br />plat_time_init: plat time init done<br />Calibrating delay loop... 267.26 BogoMIPS (lpj=534528)<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />bio: create slab &lt;bio-0&gt; at 0<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />ATH GPIOC major 0<br />squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />msgmni has been set to 58<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xb8020000 (irq = 19) is a 16550A<br />console [ttyS0] enabled<br />PPP generic driver version 2.4.2<br />NET: Registered protocol family 24<br />5 cmdlinepart partitions found on MTD device ath-nor0<br />Creating 5 MTD partitions on &quot;ath-nor0&quot;:<br />0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />0x000000020000-0x000000120000 : &quot;kernel&quot;<br />0x000000120000-0x0000003e0000 : &quot;rootfs&quot;<br />0x0000003e0000-0x0000003f0000 : &quot;config&quot;<br />0x0000003f0000-0x000000400000 : &quot;art&quot;<br />-&gt;Oops: flash id 0x1c3016 . <br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />Port Status 1c000004 <br />ath-ehci ath-ehci.0: ATH EHCI<br />ath-ehci ath-ehci.0: new USB bus registered, assigned bus number 1<br />ehci_reset Intialize USB CONTROLLER in host mode: 13<br />ehci_reset Port Status 1c000000 <br />ath-ehci ath-ehci.0: irq 3, io mem 0x1b000000<br />ehci_reset Intialize USB CONTROLLER in host mode: 13<br />ehci_reset Port Status 1c000000 <br />ath-ehci ath-ehci.0: USB 2.0 started, EHCI 1.00<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />TCP cubic registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />athwdt_init: Registering WDT success<br />ath_otp_init: Registering OTP success<br />ath_clksw_init: Registering Clock Switch Interface success<br />VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />Freeing unused kernel memory: 112k freed</p><p>init started:&nbsp; BusyBox v1.01 (2012.04.13-11:59+0000) multi-call binary<br />This Board use 2.6.31<br />xt_time: kernel timezone is -0000<br />nf_conntrack version 0.5.0 (512 buckets, 5120 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/iptable_raw.ko&#039;: No such file or directory<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/flashid.ko&#039;: No such file or directory<br />PPPoL2TP kernel driver, V1.0<br />PPTP driver version 0.8.3<br />insmod: cannot open module `/lib/modules/2.6.31/kernel/harmony.ko&#039;: No such file or directory</p><p>Now flash open!<br />Now flash open!<br /> (none) mips #3 Thu Apr 12 09:57:51 CST 2012 (none)</p><p>(none) login: ATHR_GMAC: Length per segment 1536<br />ATHR_GMAC: fifo cfg 3 01f00140<br />ATHR_GMAC: RX TASKLET - Pkts per Intr:32<br />mac:1 Registering S27....<br />ATHR_GMAC: Max segments per packet :&nbsp; &nbsp;1<br />ATHR_GMAC: Max tx descriptor count :&nbsp; &nbsp;40<br />ATHR_GMAC: Max rx descriptor count :&nbsp; &nbsp;128<br />ATHR_GMAC: Mac capability flags&nbsp; &nbsp; :&nbsp; &nbsp;2D82<br />ATHR_GMAC: RX TASKLET - Pkts per Intr:32<br />mac:0 Registering S27....<br />ATHR_GMAC: Max segments per packet :&nbsp; &nbsp;1<br />ATHR_GMAC: Max tx descriptor count :&nbsp; &nbsp;40<br />ATHR_GMAC: Max rx descriptor count :&nbsp; &nbsp;128<br />ATHR_GMAC: Mac capability flags&nbsp; &nbsp; :&nbsp; &nbsp;2582<br />athr_gmac_ring_alloc Allocated 640 at 0x81e88c00<br />athr_gmac_ring_alloc Allocated 2048 at 0x81ccb000<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames <br />Setting PHY...<br />athr_gmac_ring_alloc Allocated 640 at 0x81e88800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81e9b800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames <br />ATHRS27: resetting s27<br />ATHRS27: s27 reset done<br />++++ athrs27_igmp_setup once<br />port0 vid is 0xb000b<br />port1 vid is 0x30003<br />port2 vid is 0x50005<br />port3 vid is 0x70007<br />port4 vid is 0x90009<br />++ PVID: 0x0000000b, bitmap: 0x0000001f<br />++ PVID: 0x00000003, bitmap: 0x0000001f<br />++ PVID: 0x00000005, bitmap: 0x0000001f<br />++ PVID: 0x00000007, bitmap: 0x0000001f<br />++ PVID: 0x00000009, bitmap: 0x0000001f<br />vtable vid: 0x00000002, bitmap 0x00000003<br />vtable vid: 0x00000004, bitmap 0x00000005<br />vtable vid: 0x00000006, bitmap 0x00000007<br />vtable vid: 0x00000008, bitmap 0x00000009<br />vtable vid: 0x0000000a, bitmap 0x0000000b<br />vtable vid: 0x0000000c, bitmap 0x0000000d<br />vtable vid: 0x0000000e, bitmap 0x0000000f<br />vtable vid: 0x00000010, bitmap 0x00000011<br />vtable vid: 0x00000012, bitmap 0x00000013<br />vtable vid: 0x00000014, bitmap 0x00000015<br />vtable vid: 0x00000016, bitmap 0x00000017<br />vtable vid: 0x00000018, bitmap 0x00000019<br />vtable vid: 0x0000001a, bitmap 0x0000001b<br />vtable vid: 0x0000001c, bitmap 0x0000001d<br />vtable vid: 0x0000001e, bitmap 0x0000001f<br />vtable vid: 0x00000020, bitmap 0x00000021<br />Setting PHY...<br />device eth0 entered promiscuous mode<br />athr_gmac_ring_free Freeing at 0x81e88c00<br />athr_gmac_ring_free Freeing at 0x81ccb000<br />athr_gmac_ring_alloc Allocated 640 at 0x81e88c00<br />athr_gmac_ring_alloc Allocated 2048 at 0x81ea3800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames <br />Setting PHY...<br />Now flash open!<br />athr_gmac_ring_free Freeing at 0x81e88800<br />athr_gmac_ring_free Freeing at 0x81e9b800<br />athr_gmac_ring_alloc Allocated 640 at 0x81e88800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81e9b000<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames <br />Setting PHY...<br />====&gt;&gt;&gt;&gt;DHCP start.dhcpc.c,dhcpcStart,396 <br />====&gt;&gt;&gt;&gt;DHCP end.dhcpc.c,dhcpcStart,456 <br />nf_conntrack_rtsp v0.6.21 loading<br />nf_nat_rtsp v0.6.21 loading<br />asf: module license &#039;Proprietary&#039; taints kernel.<br />Disabling lock debugging due to kernel taint<br />ath_hal: 0.9.17.1 (AR5416, AR9380, REGOPS_FUNC, WRITE_EEPROM, 11D)<br />ath_rate_atheros: Copyright (c) 2001-2005 Atheros Communications, Inc, All Rights Reserved<br />ath_dev: Copyright (c) 2001-2007 Atheros Communications, Inc, All Rights Reserved<br />ath_ahb: 9.2.0_U10.1020 (Atheros/multi-bss)<br />__ath_attach: Set global_scn[0]<br />ACBKMinfree = 48<br />ACBEMinfree = 32<br />ACVIMinfree = 16<br />ACVOMinfree = 0<br />CABMinfree = 48<br />UAPSDMinfree = 0<br />Restoring Cal data from Flash<br />ath_get_caps[5105] rx chainmask mismatch actual 3 sc_chainmak 0<br />ath_get_caps[5080] tx chainmask mismatch actual 3 sc_chainmak 0<br />wifi0: Atheros 9340: mem=0xb8100000, irq=2<br />====&gt;&gt;&gt;&gt;SystemMode : Normal Router <br />wlan_vap_create : enter. devhandle=0x80c082c0, opmode=IEEE80211_M_HOSTAP, flags=0x1<br />wlan_vap_create : exit. devhandle=0x80c082c0, opmode=IEEE80211_M_HOSTAP, flags=0x1.<br />VAP device ath0 created <br />====&gt;&gt;&gt;&gt;wlan: rand channel 1</p> <br /><p> DES SSID SET=TP-LINK_F865F2 <br /> ieee80211_ioctl_siwmode: imr.ifm_active=131712, new mode=3, valid=1 <br /> Free buffer count 256 </p><p>sc_txq[0] : <br />sc_txq[0] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[1] : <br />sc_txq[1] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[2] : <br />sc_txq[2] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[3] : <br />sc_txq[3] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[6] : <br />sc_txq[6] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[7] : <br />sc_txq[7] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[8] : <br />sc_txq[8] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; </p><p> *********************************** <br />athr_gmac_ring_free Freeing at 0x81e88800<br />athr_gmac_ring_free Freeing at 0x81e9b000<br />br0: port 1(eth0) entering disabled state<br />athr_gmac_ring_alloc Allocated 640 at 0x81e88800<br />athr_gmac_ring_alloc Allocated 2048 at 0x81f01800<br />WASP ----&gt; S27 PHY MDIO<br />Setting Drop CRC Errors, Pause Frames and Length Error frames <br />Setting PHY...<br /> Free buffer count 256 </p><p>sc_txq[0] : <br />sc_txq[0] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[1] : <br />sc_txq[1] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[2] : <br />sc_txq[2] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[3] : <br />sc_txq[3] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[6] : <br />sc_txq[6] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[7] : <br />sc_txq[7] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[8] : <br />sc_txq[8] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; </p><p> *********************************** <br />device ath0 entered promiscuous mode<br />br0: port 2(ath0) entering forwarding state<br /> ieee80211_ioctl_siwmode: imr.ifm_active=918144, new mode=3, valid=1 <br />br0: port 2(ath0) entering disabled state</p><p> DES SSID SET=TP-LINK_F865F2 <br /> Free buffer count 256 </p><p>sc_txq[0] : <br />sc_txq[0] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[1] : <br />sc_txq[1] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[2] : <br />sc_txq[2] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[3] : <br />sc_txq[3] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[6] : <br />sc_txq[6] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[7] : <br />sc_txq[7] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; <br />sc_txq[8] : <br />sc_txq[8] : depth&nbsp; is 0 <br /> aggr_depth is 0 tidBufCount 0&nbsp; bufQCount 0 axq_cnt 0<br />&nbsp; </p><p> *********************************** <br />br0: port 2(ath0) entering forwarding state<br />====&gt;&gt;&gt;&gt;cmdCtrl open success <br />====&gt;&gt;&gt;&gt;eventCtrl open success <br />====&gt;&gt;&gt;&gt;eventCtrl attach success <br />ATHR_GMAC: GE0 RX DMA ENABLE<br />ath_paprd_cal PAPRD excessive failure disabling PAPRD now</p><br /><p>i see 32mb of ram.. it&#039;s possible?? can i help? i&#039;m not a programmer <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> and sorry for my english</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179443">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						26 Sep 2012, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>4M flash and 32M ram,no problem to run openwrt.But there is no target profile in openwrt for WR841N v8,so you need reference the patch in this topic and compile firmware by yourself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179451">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nanni92</div>
					<div class="post-datetime">
						26 Sep 2012, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>humm ok but i don&#039;t have any idea how to do it... can you help me?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179560">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">warren.wang</div>
					<div class="post-datetime">
						27 Sep 2012, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>hi, I encounter some compile error. The following source codes not exist.<br />++obj-$(CONFIG_ATH79_MACH_TL_WR700N)&nbsp; &nbsp; += mach-tl-wr700n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR702N)&nbsp; &nbsp; += mach-tl-wr702n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR710N)&nbsp; &nbsp; += mach-tl-wr710n.o<br />++obj-$(CONFIG_ATH79_MACH_TL_WR800N)&nbsp; &nbsp; += mach-tl-wr800n.o<br />where can i get them?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179561">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						27 Sep 2012, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>See target/linux/ar71xx/files/ in the OpenWrt checkout.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179562">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">warren.wang</div>
					<div class="post-datetime">
						27 Sep 2012, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>my openwrt version is 31813, but mach-tl-wr700n.c and other 3 files don&#039;t exist in target/linux/ar71xx/files</p><p>wfj@warren:~/openwrt/trunk/target/linux/ar71xx/files$ find . -name &quot;mach-tl-wr700n*&quot;<br />wfj@warren:~/openwrt/trunk/target/linux/ar71xx/files$ </p><p>found nothing</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179608">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">eastwoodnet</div>
					<div class="post-datetime">
						28 Sep 2012, 09:28					</div>
				</div>
				<div class="post-content content">
					<p>Hello all,i have change the uboot ,and use someone make the firmware it&#039;s ok , but&nbsp; i try to make a 841n v8 rom form Dream-box,&nbsp; then update to 841n v8 it&#039;s not work, and the ttl can&#039;t display anything, is there anyone to make the firmware form Dreambox successful?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179638">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">nanni92</div>
					<div class="post-datetime">
						28 Sep 2012, 15:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eastwoodnet wrote:</cite><blockquote><p>Hello all,i have change the uboot ,and use someone make the firmware it&#039;s ok , but&nbsp; i try to make a 841n v8 rom form Dream-box,&nbsp; then update to 841n v8 it&#039;s not work, and the ttl can&#039;t display anything, is there anyone to make the firmware form Dreambox successful?</p></blockquote></div><p>can you give me the link?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179839">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">neuralnet</div>
					<div class="post-datetime">
						1 Oct 2012, 18:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mips wrote:</cite><blockquote><p>4M flash and 32M ram,no problem to run openwrt.But there is no target profile in openwrt for WR841N v8,so you need reference the patch in this topic and compile firmware by yourself.</p></blockquote></div><p>Hi mips, I&#039;ve done as you suggested (create mach-tl-wr841n-v8.c with the code above &amp; created a patch) but when I <a href="https://forum.openwrt.org/viewtopic.php?pid=179772#p179772">run the patch</a> I get a lot of failed hunks. Any ideas why that&#039;s failing ? Anyone else had luck building firmware for the v8.1 TP Link TL 841N ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179926">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">maxb2000</div>
					<div class="post-datetime">
						2 Oct 2012, 18:56					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I want to flash my TP-LINK WR841ND v8 with this firmware (openwrt) beacuse my hardware version is not supported by others.Can you give me flash instructions and the file (bin) that need to upload to the router to start the flash?</p><p>Thanks you very much!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180005">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">mips</div>
					<div class="post-datetime">
						3 Oct 2012, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>@neuralnet:<br />Do you try the patch on the latest trunk code?<br />The patch is work on some old revision,if you want to let it work on latest trunk code,you need reference this patch and merge it by you hand!<br />I think you can get some help from <strong>ldpinney</strong>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180059">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">drdaeman</div>
					<div class="post-datetime">
						4 Oct 2012, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>To repack original v8.0/Intl firmware use:</p><div class="codebox"><pre><code>mktplinkfw -x -i &quot;$FW&quot;
mktplinkfw -H 0x08410008 -F 4Mlzma -N &#039;TP-LINK Technologies&#039; -V &#039;ver. 1.0&#039; -k &quot;$FW-kernel&quot; -L 0x80002000 -E 0x801a9c00 -r &quot;$FW-rootfs&quot; -j -o wr841nv8-repacked.bin</code></pre></div><p>Took me some time to get it right. Re-flashing the firmware (with stock U-boot) works fine.</p><p>I&#039;ve built OpenWRT r33602 (for now, without patches from this thread) for WR841ND v<strong>7</strong> and packed it this way:</p><div class="codebox"><pre><code>mktplinkfw -H 0x08410008 -F 4Mlzma -N &#039;OpenWRT&#039; -V &#039;r33602&#039; -k &quot;openwrt-ar71xx-generic-vmlinux.lzma&quot; -r &quot;openwrt-ar71xx-generic-root.squashfs&quot; -j -o wr841nv8-openwrt.bin</code></pre></div><p>Then flashed it using TFTP:</p><div class="codebox"><pre><code>wasp&gt; tftp 0x81000000 wr841nv8-openwrt.bin
enet1 port0 up
dup 1 speed 1000
Using eth1 device
TFTP from server 192.168.1.100; our IP address is 192.168.1.111
Filename &#039;wr841nv8-openwrt.bin&#039;.
Load address: 0x81000000
Loading: #################################################################
         ....
         ######################################################
done
Bytes transferred = 3932160 (3c0000 hex)
wasp&gt; erase 0x9f020000 +0x3c0000

First 0x2 last 0x3d sector size 0x10000                                       61
Erased 60 sectors
wasp&gt; cp.b 0x81000000 0x9f020000 0x3c0000
Copy to Flash... write addr: 9f020000
done
wasp&gt; bootm 0x9f020000
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... Too big uncompressed streamLZMA ERROR 1 - must RESET board to recover</code></pre></div><p>Don&#039;t know why in failed to load kernel straight after flashing, but after rebooting everything went almost fine:<br /></p><div class="codebox"><pre><code>wasp&gt; set bootargs=foo bar board=TL-WR741ND console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd
wasp&gt; bootm 0x9f020000
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 3.3.8 (drdaeman@kohaku) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #3 Thu Oct 4 01:42:47 MSK 2012
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9341 rev 1
[    0.000000] Clocks: CPU:535.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  foo=bar board=TL-WR741ND console=ttyS0,115200 rootfstype=squashfs,jffs2 noinitrd mem=32M rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29140k/32768k available (2098k kernel code, 3628k reserved, 399k data, 208k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 266.64 BogoMIPS (lpj=1333248)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] gpiochip_add: registered GPIOs 0 to 22 on device: ath79
[    0.100000] MIPS: machine is TP-LINK TL-WR741ND
[    0.100000] ar71xx: invalid PHY interface mode for GE1
[    0.110000] ar71xx: invalid PHY interface mode for GE0
[    0.120000] bio: create slab &lt;bio-0&gt; at 0
[    0.130000] Switching to clocksource MIPS
[    0.130000] NET: Registered protocol family 2
[    0.140000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.140000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.150000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.150000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.160000] TCP reno registered
[    0.160000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.170000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.170000] NET: Registered protocol family 1
[    0.190000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.200000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.210000] msgmni has been set to 56
[    0.210000] io scheduler noop registered
[    0.220000] io scheduler deadline registered (default)
[    0.220000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.250000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
[    0.260000] console [ttyS0] enabled, bootconsole disabled
[    0.260000] console [ttyS0] enabled, bootconsole disabled
[    0.270000] m25p80 spi0.0: found en25q32b, expected m25p80
[    0.280000] m25p80 spi0.0: en25q32b (4096 Kbytes)
[    0.280000] 5 tp-link partitions found on MTD device spi0.0
[    0.290000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.290000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.300000] 0x000000020000-0x000000120000 : &quot;kernel&quot;
[    0.310000] 0x000000120000-0x0000003f0000 : &quot;rootfs&quot;
[    0.310000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.320000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=300000, len=F0000
[    0.330000] 0x000000300000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.340000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.340000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    0.370000] ag71xx_mdio: probed
[    0.380000] TCP cubic registered
[    0.380000] NET: Registered protocol family 17
[    0.390000] Bridge firewalling registered
[    0.390000] 8021q: 802.1Q VLAN Support v1.8
[    0.400000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.410000] Freeing unused kernel memory: 208k freed
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[    5.650000] JFFS2 notice: (517) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 10 of xref (0 dead, 2 orphan) found.
switching to jffs2
- init -

Please press Enter to activate this console. [    7.060000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993
[    7.070000] Backport based on wireless-testing.git master-2012-09-07
[    7.070000] compat.git: wireless-testing.git
[    7.110000] cfg80211: Calling CRDA to update world regulatory domain
[    7.110000] cfg80211: World regulatory domain updated:
[    7.120000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    7.130000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.140000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    7.140000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    7.150000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.160000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.600000] NET: Registered protocol family 10
[    7.670000] cfg80211: World regulatory domain updated:
[    7.670000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    7.680000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.690000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    7.700000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    7.700000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    7.710000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.440000] PPP generic driver version 2.4.2
[    8.470000] tun: Universal TUN/TAP device driver, 1.6
[    8.470000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[    8.590000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    8.860000] NET: Registered protocol family 24
[    8.880000] nf_conntrack version 0.5.0 (458 buckets, 1832 max)
[    9.360000] xt_time: kernel timezone is -0000
[   10.060000] arp_tables: (C) 2002 David S. Miller
[   10.170000] Ebtables v2.0 registered
[   10.570000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   10.830000] NF_TPROXY: Transparent proxy support initialized, version 4.1.0
[   10.840000] NF_TPROXY: Copyright (c) 2006-2007 BalaBit IT Ltd.
[   11.140000] Error: Driver &#039;gpio-keys-polled&#039; is already registered, aborting...



BusyBox v1.19.4 (2012-10-03 17:09:05 MSK) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 ATTITUDE ADJUSTMENT (Bleeding Edge, r33602)
 -----------------------------------------------------
  * 1/4 oz Vodka      Pour all ingredients into mixing
  * 1/4 oz Gin        tin with ice, strain into glass.
  * 1/4 oz Amaretto
  * 1/4 oz Triple sec
  * 1/4 oz Peach schnapps
  * 1/4 oz Sour mix
  * 1 splash Cranberry juice
 -----------------------------------------------------
root@OpenWrt:/#</code></pre></div><p>Unfortunately, at this stage, the console input gets garbled up for some reason (everything was fine in U-Boot), so I haven&#039;t tried any further.</p><p>(Any suggestions why input may be garbled?)</p>											<p class="post-edited">(Last edited by <strong>drdaeman</strong> on 4 Oct 2012, 22:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180072">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">jnjn</div>
					<div class="post-datetime">
						5 Oct 2012, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>Hey. This is one image I got from some forum. And, it is WORKING on my 841v8. Hope this helps.<br /><a href="http://jnjn.homepc.it:10581/files/download/linux/mips/openwrt-ar71xx-generic-tl-wr841n-v8-squashfs-factory.rar">http://jnjn.homepc.it:10581/files/downl … actory.rar</a></p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 21</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=37010&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=37010&amp;p=21.html">21</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>