<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> After installing luci-qos, I cannot access luci anymore</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p141967">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">lordgreg</div>
					<div class="post-datetime">
						23 Aug 2011, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I just tried to install luci-qos package on my latest RC5 installation on Buffalo WZR-HP-G300NH. But, after 10 seconds or so, I got an error that the package couldnt be installed. Now, when trying to access index or any other luci site, I get this instead of anything else:</p><div class="codebox"><pre><code>/usr/lib/lua/luci/model/network.lua:172: attempt to call method &#039;substate&#039; (a nil value)
stack traceback:
    /usr/lib/lua/luci/model/network.lua:172: in function &#039;init&#039;
    /usr/lib/lua/luci/controller/admin/network.lua:21: in function &#039;v&#039;
    /usr/lib/lua/luci/dispatcher.lua:496: in function &#039;createtree&#039;
    /usr/lib/lua/luci/dispatcher.lua:179: in function &#039;dispatch&#039;
    /usr/lib/lua/luci/dispatcher.lua:143: in function &lt;/usr/lib/lua/luci/dispatcher.lua:142&gt;</code></pre></div><p>Can someone please help me out here? I tried to remove luci and installing it again, rebooting router, nothing helped. Someone suggested on forums (After googling) I should sysupgrade? But then, I will lose all router config. </p><p>Isnt there any easier way to just remove luci and install it again or something? </p><p>Thank you in advance for helping.</p><p><strong>Update:</strong></p><p>I used the opk remove luci* command now, then installed as following:</p><p>luci,<br />luci-theme-base,<br />luci-theme-openwrt,<br />and luci-fastindex to get pass the &quot;not found&quot; when trying to get to router url. </p><p>Now, the Luci web pages are all screwed up -.-</p><p>Is there a way to at lease upgrade to the same version of router I have at the moment or something? I just want to fix luci and that&#039;s it :S</p>											<p class="post-edited">(Last edited by <strong>lordgreg</strong> on 23 Aug 2011, 23:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141970">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lordgreg</div>
					<div class="post-datetime">
						23 Aug 2011, 23:39					</div>
				</div>
				<div class="post-content content">
					<p>2nd update needs second post:</p><p>at the end, I had to do sysupgrade -v path_to_bin.bin</p><p>Then I tried to install luci-app-qos from terminal, this is the output i get:</p><div class="codebox"><pre><code>root@OpenWrt:~# opkg update
Downloading http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/Packages.gz.
Inflating http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/Packages.gz.
Updated list of available packages in /var/opkg-lists/packages.
root@OpenWrt:~# opkg upgrade luci-app-qos
Installing luci-app-qos (0.9+svn6512-1) to root...
Downloading http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/luci-app-qos_0.9+svn6512-1_ar71xx.ipk.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kmod-ipt-conntrack and kmod-ipt-conntrack) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kernel and kernel) providing same name marked HOLD or PREFER. Using latest.
Multiple packages (kmod-ipt-core and kmod-ipt-core) providing same name marked HOLD or PREFER. Using latest.
Installing luci-core (0.9+svn6512-1) to root...
Downloading http://downloads.openwrt.org/backfire/10.03.1-rc4/ar71xx/packages/luci-core_0.9+svn6512-1_ar71xx.ipk.
Collected errors:
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/fs.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/ccache.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/ltn12.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/store.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/debug.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/init.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/version.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/util.lua
        But that file is already provided by package  * luci-lib-core
 * check_data_file_clashes: Package luci-core wants to install file /usr/lib/lua/luci/ip.lua
        But that file is already provided by package  * luci-lib-core</code></pre></div><p>So.. um.. what to do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142011">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">esplinter</div>
					<div class="post-datetime">
						24 Aug 2011, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>Looking at your post it seems you are installing rc4 packages in an rc5 system.</p><p>I would check /etc/opkg.conf to use the right source for packages and then run </p><p>opkg update<br />opkg list-upgradable</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142016">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						24 Aug 2011, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Like esplinter told you, you have a wrong package download directory in your config. Probably /etc/opkg.conf has survived a sysupgrade from rc4 to rc5, and the setting has not been updated.</p><p>The contents of /etc/opkg.conf should with rc5 in your architecture should be:<br /></p><div class="codebox"><pre><code>src/gz packages http://downloads.openwrt.org/backfire/10.03.1-rc5/ar71xx/packages
dest root /
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 24 Aug 2011, 13:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142017">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">lordgreg</div>
					<div class="post-datetime">
						24 Aug 2011, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your replies esplinter &amp; hnyman. I will check that out and reply what I found. </p><p>thanks again.</p>											<p class="post-edited">(Last edited by <strong>lordgreg</strong> on 24 Aug 2011, 13:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142046">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">lordgreg</div>
					<div class="post-datetime">
						24 Aug 2011, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>Yep, as you said it. I had rc4 in opkg.conf and it had to be set to RC5. As soon as i did that, everything started working <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>thank you again.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>