<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Network File configuration for TL-WDR4300</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p224313">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">salmanhaider5</div>
					<div class="post-datetime">
						2 Feb 2014, 03:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi friends ,</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I m having problem with configuration of my lan ports in my network file . First of all i dont want any vlans . I tried to disable vlan via luci . Previously i was using TL-WR941ND and i was using each lan port as seperate (not bridged) and each port had static ip . Now when i m applying the same configuration on this i m getting nothing from any port and than i have to use failsafe and firstboot step . I m putting my network file here if you had any idea what i m doing wrong or need any modification in this TP link model please do let me know . My network file is below </p><div class="quotebox"><blockquote><p>config interface loopback<br />&nbsp; &nbsp; option ifname&nbsp; &nbsp; lo<br />&nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; option ipaddr&nbsp; &nbsp; 127.0.0.1<br />&nbsp; &nbsp; option netmask&nbsp; &nbsp; 255.0.0.0</p><p>config interface lan1<br />&nbsp; &nbsp; option ifname&nbsp; &nbsp; &quot;lan1&quot;<br />&nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; option ipaddr&nbsp; &nbsp; 10.1.0.1<br />&nbsp; &nbsp; option netmask&nbsp; &nbsp; 255.255.255.0</p><p>config interface lan2<br />&nbsp; &nbsp; option ifname &quot;lan2&quot;<br />&nbsp; &nbsp; option proto static<br />&nbsp; &nbsp; option ipaddr 10.2.0.1<br />&nbsp; &nbsp; option netmask 255.255.255.0<br />&nbsp; &nbsp; <br />config interface lan3<br />&nbsp; &nbsp; option ifname &quot;lan3&quot;<br />&nbsp; &nbsp; option proto static<br />&nbsp; &nbsp; option ipaddr 10.3.0.1<br />&nbsp; &nbsp; option netmask 255.255.255.0</p><p>config interface lan4<br />&nbsp; &nbsp; option ifname &quot;lan4&quot;<br />&nbsp; &nbsp; option proto static<br />&nbsp; &nbsp; option ipaddr 192.168.5.3<br />&nbsp; &nbsp; option netmask 255.255.255.0<br />&nbsp; &nbsp; option gateway 192.168.5.9</p><p>config interface wan<br />&nbsp; &nbsp; option ifname&nbsp; &nbsp; wan<br />&nbsp; &nbsp; option proto&nbsp; &nbsp; dhcp</p><p>config interface wireless<br />&nbsp; &nbsp; option ifname &quot;wlan0&quot;<br />&nbsp; &nbsp; option proto static<br />&nbsp; &nbsp; option ipaddr 10.0.1.9<br />&nbsp; &nbsp; option netmask 255.255.255.0</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224316">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Feb 2014, 10:24					</div>
				</div>
				<div class="post-content content">
					<p>post also default network config please.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224361">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">salmanhaider5</div>
					<div class="post-datetime">
						2 Feb 2014, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>This is my default configuration network file <br /></p><div class="quotebox"><blockquote><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.2&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;eth0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 2 3 4 5&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;2&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1&#039;</p></blockquote></div><p>I had tried many times but to configure each port as separate but no success . Please suggest me some nice modifications .<br />Thank God Failsafe is working on this model i had very bad experience with my TL-WR941ND which had no failsafe <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Waiting for reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Regards..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224363">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						2 Feb 2014, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m no expert in VLAN, but i can TRY to GUESS that, based on what&#039;s in default config for wan (eth0.2), you should do something like this for other ports:</p><br /><p>config interface &#039;lan3&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.3&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;10.3.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;lan4&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.4&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;10.4.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><br /><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 2 5&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;2&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;3&#039;<br />&nbsp; &nbsp; option ports &#039;0t 3&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;4&#039;<br />&nbsp; &nbsp; option ports &#039;0t 4&#039;</p><br /><br /><p>NOTE that eth0.3 maybe is physical port LAN2, and eth0.4 maybe is physical port LAN3 and so on...</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 2 Feb 2014, 20:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224364">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">salmanhaider5</div>
					<div class="post-datetime">
						2 Feb 2014, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>I think i m messing up with the physical ports how can i confirm the physical name of any port ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224500">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">salmanhaider5</div>
					<div class="post-datetime">
						4 Feb 2014, 01:14					</div>
				</div>
				<div class="post-content content">
					<p>This is really not working ... where i m going wrong ??? Physical name of the port is main problem i think ? Any way to find out how i can really find the name of that port ?<br /></p><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>i&#039;m no expert in VLAN, but i can TRY to GUESS that, based on what&#039;s in default config for wan (eth0.2), you should do something like this for other ports:</p><br /><p>config interface &#039;lan3&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.3&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;10.3.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;lan4&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0.4&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;10.4.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><br /><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0t 2 5&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;2&#039;<br />&nbsp; &nbsp; option ports &#039;0t 1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;3&#039;<br />&nbsp; &nbsp; option ports &#039;0t 3&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;eth0&#039;<br />&nbsp; &nbsp; option vlan &#039;4&#039;<br />&nbsp; &nbsp; option ports &#039;0t 4&#039;</p><br /><br /><p>NOTE that eth0.3 maybe is physical port LAN2, and eth0.4 maybe is physical port LAN3 and so on...</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224545">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">salmanhaider5</div>
					<div class="post-datetime">
						4 Feb 2014, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi ,</p><p>&nbsp; &nbsp;I think i m only one living on this thread . Anyways problem solved i was deleting switch_vlan . The configuration provided by nebia88 working nice . Thank you <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>