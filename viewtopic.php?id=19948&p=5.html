<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DIR-615 HW rev C1 USB</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Apr 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=19948&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=19948&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=19948&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p170111">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">tuckata</div>
					<div class="post-datetime">
						16 Jun 2012, 09:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi Shadyman,</p><p>With common mode choke coil should be better, &quot;CMCCs help improve skews and reduce electromagnetic noise&quot;, see <a href="http://www.epsondevice.com/webapp/docs_ic/DownloadServlet?id=ID001683">http://www.epsondevice.com/webapp/docs_ … d=ID001683</a>, page 8, and here <a href="http://www.murata.com/products/article/pdf/ta09b1.pdf">http://www.murata.com/products/article/pdf/ta09b1.pdf</a>.</p><p>About the overcurrent protection, for the 5V USB power supply I&#039;ve used a dc-dc converter from a Car Cigarette Powered 1000mA USB Adapter Charger similar to <a href="http://www.dealextreme.com/p/mini-car-cigarette-powered-1000ma-usb-adapter-charger-black-dc-12v-48925">http://www.dealextreme.com/p/mini-car-c … -12v-48925</a>. These have integrated overcurrent protection (at 1000 mA indeed, but I like it) <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>About the 8M flash, I think it would be easier to use one 8M or 16M flash chip just because it has already been done and is well documented, see here <a href="https://forum.openwrt.org/viewtopic.php?pid=156473">https://forum.openwrt.org/viewtopic.php?pid=156473</a>. Your idea is good, in essence it is adding an additional logical SPI interface, the drawback is I think it will require a kernel hack, and it takes a lot of time. I&#039;ve thought also for adding an SD flash card (4GB, 8GB, 16GB...) on such additional fast SPI interface, or better - in place of the original 4MB flash chip, but I had no time for implementing this idea. Who would need and USB interface then? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Just joking, USB&#039;s good, you could always plug an USB fan or USB coffee warmer if you have&#039;em <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>A dir615 cluster? MEGAZORD!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171192">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">astralstorm</div>
					<div class="post-datetime">
						28 Jun 2012, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>hi tuckata, do you have 8M flash u-boot for Dir-615 c1? if you have please share it.<br />thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171195">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">tuckata</div>
					<div class="post-datetime">
						28 Jun 2012, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>No, I use firmware extension on extroot on an USB flash drive and it suits me. 8MB flash would be nice but I have much less time for playing with routers. Have you tried the instructions at <a href="https://forum.openwrt.org/viewtopic.php?pid=156473">https://forum.openwrt.org/viewtopic.php?pid=156473</a>?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175196">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">Mad Butcher</div>
					<div class="post-datetime">
						18 Aug 2012, 00:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!<br />Anybody know how to compile latest trunk with USB support?<br />I find and open mach-dir-615-c1.c in /target/linux/ar71xx/files/arch/mips/ath79/ directory, but he doesn&#039;t look like a regressor manual...<br />And where i can find setup.c file to modify it?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175212">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">tuckata</div>
					<div class="post-datetime">
						18 Aug 2012, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mad, // <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Atheros support has been included in the mainstream linux kernel for some time now and this changes the patching a bit. In /target/linux/ar71xx/files/arch/mips/ath79/mach-dir-615-c1.c you could add &quot;ath79_register_usb();&quot; to include usb support in kernel. But because the usb driver is now part of the kernel the PLL initialization can be modifed by adding a patch file. You could download a patch file for (full) USB support from here <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support.patch">https://sites.google.com/site/tuckata/d … port.patch</a>. It is against&nbsp; trunk r30919 from 1 April 2012 and should work against the newest trunk. To work it is just placed in folder target/linux/ar71xx/patches-3.2/ but newer trunk uses kernel version 3.3 and the patch should just be placed in target/linux/ar71xx/patches-3.3/.</p><p>A ready compiled trunk r30919 for dir-615-c1 can be downloaded from here <a href="https://sites.google.com/site/tuckata/downloads/openwrt-ar71xx-generic-dir-615-c1-squashfs.zip">https://sites.google.com/site/tuckata/d … uashfs.zip</a>.</p><p>Hope this helps.<br />tuckata</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175253">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">Mad Butcher</div>
					<div class="post-datetime">
						18 Aug 2012, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, tukata.<br />Your answer was very helpful. I viewed your patch file and all became clear.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196570">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">Indoorser</div>
					<div class="post-datetime">
						29 Mar 2013, 05:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys.</p><p>Can anybody fix the patch please since tuckata&#039;s patch not applicable for Attitude Adjustment (the structure of project changed significantly)?<br />The patch causes errors with Backfire (@33081) as well but it gives the information on what should be patched manually using patch code and description in wiki (DIR-615 USB mod).</p>											<p class="post-edited">(Last edited by <strong>Indoorser</strong> on 29 Mar 2013, 05:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256809">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						6 Dec 2014, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>new compile please! i follow guide but not success on barrier breaker</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256851">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">tuckata</div>
					<div class="post-datetime">
						7 Dec 2014, 10:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>New versions of the patch for Attitude Adjustment and Barrier Breaker can be found here:</p><p>for AA <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support-r36088.patch">https://sites.google.com/site/tuckata/d … 6088.patch</a><br />for BB <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support-r42625.patch">https://sites.google.com/site/tuckata/d … 2625.patch</a></p><p>tuckata</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256887">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						7 Dec 2014, 17:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tuckata wrote:</cite><blockquote><p>Hi,</p><p>New versions of the patch for Attitude Adjustment and Barrier Breaker can be found here:</p><p>for AA <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support-r36088.patch">https://sites.google.com/site/tuckata/d … 6088.patch</a><br />for BB <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support-r42625.patch">https://sites.google.com/site/tuckata/d … 2625.patch</a></p><p>tuckata</p></blockquote></div><p>thanks! I follow this patch, I download new source AA, BB three times and compile but can not success.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256888">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">tuckata</div>
					<div class="post-datetime">
						7 Dec 2014, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>For Barrier Breaker:</p><p>1. Download source with </p><div class="codebox"><pre><code>svn co -r 42625 svn://svn.openwrt.org/openwrt/branches/barrier_breaker</code></pre></div><p>2. Download config file in the root of the source tree from <a href="https://downloads.openwrt.org/barrier_breaker/14.07/ar71xx/generic/config.ar71xx_generic">https://downloads.openwrt.org/barrier_b … xx_generic</a></p><p>and rename it to .config </p><div class="codebox"><pre><code>mv config.ar71xx_generic .config</code></pre></div><p>3. Download the patch from <a href="https://sites.google.com/site/tuckata/downloads/777-usb-support-r42625.patch">https://sites.google.com/site/tuckata/d … 2625.patch</a></p><p>and place it in folder target/linux/ar71xx/patches-3.10/ </p><div class="codebox"><pre><code>mv 777-usb-support-r42625.patch target/linux/ar71xx/patches-3.10/</code></pre></div><p>4. In the root of source tree issue </p><div class="codebox"><pre><code>make kernel_menuconfig</code></pre></div><p>You should see that the patch applies smoothly and you could </p><div class="codebox"><pre><code>Enable FPU emulation</code></pre></div><p>5. In the root of source tree issue </p><div class="codebox"><pre><code>make menuconfig</code></pre></div><p> </p><p>Make changes if you need (you may select only your rooter model for just not to compile all images)</p><p>6. In the root of source tree issue </p><div class="codebox"><pre><code>make</code></pre></div><p> and go for a drink (preferably Barrier Breaker)</p><p>7. Enjoy</p><p>Regards,</p><p>tuckata</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256893">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						7 Dec 2014, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>Very clear guide.<br />Thank you very much! Best wish for you, tuckata!</p>											<p class="post-edited">(Last edited by <strong>hoatienii</strong> on 7 Dec 2014, 18:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264882">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						10 Feb 2015, 10:45					</div>
				</div>
				<div class="post-content content">
					<p>Uboot 16M flash for DIR 615 C2 is here, i success up to 16MB flash<br /><a href="http://blog.dword1511.info/?p=4480">http://blog.dword1511.info/?p=4480</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p265341">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">hoatienii</div>
					<div class="post-datetime">
						13 Feb 2015, 04:14					</div>
				</div>
				<div class="post-content content">
					<p>I find 1 free GPIO of DIR 615 C2. Testpoint 8 (TP8) is GPIO16.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274448">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">new_garden</div>
					<div class="post-datetime">
						29 Apr 2015, 17:04					</div>
				</div>
				<div class="post-content content">
					<p>Please give the finished collection firmware for DIR 615 C2 Barrier Breaker or newer with built-in support for USB core, usb2, ohci, storage, fs-ext4 (possibly without LuCL). I would be very grateful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275610">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">5N31d3R</div>
					<div class="post-datetime">
						7 May 2015, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, can anybody please explain how I make&nbsp; USB for DIR 615 C1 (with all schemes etc). Thank You!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275819">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">fratzicu</div>
					<div class="post-datetime">
						10 May 2015, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I have three Trendnet TEW-632BRP routers. I am interested in adding USB port to those routers. I know that this has been done but I don&#039;t know where is this information. Do you think that the discussion here for DIR-615 C1/2 applies as it is also for 632BRP? On the wiki page it is said that the devices are virtually identical.<br />Kind regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275891">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">new_garden</div>
					<div class="post-datetime">
						10 May 2015, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>How to modify DIR-615 rev C2 written in&nbsp; <a href="http://wiki.openwrt.org/toh/d-link/dir-615/c2-usb">http://wiki.openwrt.org/toh/d-link/dir-615/c2-usb</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p275892">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">johnisaacson</div>
					<div class="post-datetime">
						11 May 2015, 00:40					</div>
				</div>
				<div class="post-content content">
					<p>For those looking for a schematic perhaps this helps get close.</p><p><a href="http://wiki.openwrt.org/_media/toh/d-link/dir615c1.pdf">http://wiki.openwrt.org/_media/toh/d-link/dir615c1.pdf</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 5 of 5</div><nav><ul><li><a href="viewtopic.php%3Fid=19948&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=19948&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=19948&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>