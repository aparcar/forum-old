<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Dir-300 B1 MMC Hack</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 7 Apr 2018 and 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=36986&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p227133">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						9 Mar 2014, 21:23					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for being so interested in my problem, </p><p>I understand that these modules take off with the system, but unfortunately can not help himself with a script that turns them off, and to give it priority, how would you find even a moment of time to write such a script that I put in / etc / init.d I would be very very grateful. </p><p>Second question: </p><p>or for test is a command which I can use to used to disable the modules to a running system</p><p>3rd question:</p><p>maybe if I give you the address to my ssh, check what can be done?</p><p>thanx for help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227181">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						10 Mar 2014, 09:43					</div>
				</div>
				<div class="post-content content">
					<p>root@OpenWrt:~# ls<br />root@OpenWrt:~# lsmod | grep -i gpio<br />gpiommc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3600&nbsp; 2<br />spi_gpio_old&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2192&nbsp; 1 gpiommc<br />spi_gpio&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3744&nbsp; 0<br />spi_bitbang&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2848&nbsp; 2 spi_gpio_old,spi_gpio<br />gpio_keys_polled&nbsp; &nbsp; &nbsp; &nbsp; 2064&nbsp; 0<br />input_polldev&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1696&nbsp; 1 gpio_keys_polled<br />input_core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;20000&nbsp; 4 button_hotplug,gpio_keys_polled,input_polldev</p><br /><p>root@OpenWrt:~# rmmod gpio_keys_polled<br />root@OpenWrt:~# lsmod | grep -i button</p><br /><p>button_hotplug&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2656&nbsp; 0<br />input_core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;20000&nbsp; 2 button_hotplug,input_polldev</p><br /><p>root@OpenWrt:~# rmmod button_hotplug<br />root@OpenWrt:~# /etc/init.d/mmc_over_gpio stop<br />root@OpenWrt:~# /etc/init.d/mmc_over_gpio start</p><br /><p>configfs on /config type configfs (rw,relatime)</p><p>root@OpenWrt:~# dmesg | grep -i mmc</p><br /><p>[&nbsp; &nbsp;38.890000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; &nbsp;38.910000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[ 1176.970000] gpio-mmc: GPIO based MMC-Card &quot;default&quot; removed<br />[ 1185.490000] gpio-mmc: Failed to request mmc_spi module.<br />[ 1185.510000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power<br />[ 1185.520000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[ 1185.530000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[ 1185.570000] mmc_spi spi32766.0: setup: unsupported mode bits 4<br />[ 1185.590000] mmc_spi spi32766.0: can&#039;t change chip-select polarity<br />root@OpenWrt:~#</p><p>what can i made now?</p>											<p class="post-edited">(Last edited by <strong>finch84</strong> on 13 Mar 2014, 20:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227235">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						10 Mar 2014, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Maybe this helps now:</p><div class="quotebox"><cite>podly wrote:</cite><blockquote><p>Some progress.. I removed LEDs - WPS and Power. Also rearrange connections and change to smaller SD CARD - it is detected now, but I have problems with errors:</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227243">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						10 Mar 2014, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>i remove led-s from board and have the same problem.</p><p>i make new connection to sd card </p><p>Button&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gpio0)&nbsp; &nbsp; &nbsp;connect to&nbsp; &nbsp; &nbsp; &nbsp;data in&nbsp; &nbsp; &nbsp;[02 pin ] SDcard<br />Amber status led&nbsp; &nbsp; &nbsp; &nbsp;(gpio9)&nbsp; &nbsp; &nbsp;connect to&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[01 pin] SDCard<br />Green&nbsp; status led&nbsp; &nbsp; &nbsp; &nbsp;(gpio8)&nbsp; &nbsp; &nbsp;connect to&nbsp; &nbsp; &nbsp;data out&nbsp; &nbsp; &nbsp;[07 pin] SDCard<br />Blue WPS led&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (gpio13)&nbsp; &nbsp; connect to&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;clk&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[05 pin] SDCard</p><p>make new file&nbsp; /etc/config/mmc_over_gpio</p><p>config &#039;mmc_over_gpio&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;name&#039; &#039;default&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;enabled&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;DI_pin&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;DO_pin&#039; &#039;8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;CLK_pin&#039; &#039;13&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;CS_pin&#039; &#039;9&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;mode&#039; &#039;0&#039;</p><p>And have this resoult in dmesg:</p><p>[&nbsp; 362.870000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 362.890000] mmc_spi spi32764.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 362.900000] mmc_spi spi32764.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 362.910000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=0, do=8, clk=13, cs=9<br />[&nbsp; 365.960000] mmc_spi spi32764.0: setup: unsupported mode bits 4<br />[&nbsp; 365.970000] mmc_spi spi32764.0: can&#039;t change chip-select polarity<br />[&nbsp; 366.000000] mmc0: host doesn&#039;t support card&#039;s voltages<br />[&nbsp; 366.010000] mmc0: error -22 whilst initialising SDIO card<br />[&nbsp; 366.030000] mmc0: host doesn&#039;t support card&#039;s voltages<br />[&nbsp; 366.040000] mmc0: error -22 whilst initialising SD card<br />[&nbsp; 366.050000] mmc0: host doesn&#039;t support card&#039;s voltages<br />[&nbsp; 366.060000] mmc0: error -22 whilst initialising MMC card</p><p>meyby some can help now <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227389">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						12 Mar 2014, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried different SD-Cards? It seemed that some cards work better than others (and sometimes older/smaller ones better than newer/bigger ones).<br />Also, did you remove the debounce circuits from the button-GPIO? I think they have a bigger influence on signal quality than the circuits for LEDs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227538">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						13 Mar 2014, 20:02					</div>
				</div>
				<div class="post-content content">
					<p>hello Again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p>i use again the pineout from:</p><p>Podly</p><p>DONE!<br />Changed GPIOs to<br />Data Input = GPIO9 (Green Power LED)<br />Data Output = GPIO13 (WPS LED)<br />Clock = GPIO8 (Amber Power LED)<br />ChipSel = GPIO0 (WPS Switch)</p><p>and have good news <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>my card slot its bad and open self</p><p>if i push it, all its ok</p><p>its my new dmsg:</p><br /><p>[&nbsp; 128.860000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 128.880000] mmc_spi spi32765.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 128.890000] mmc_spi spi32765.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 128.900000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[&nbsp; 128.940000] mmc_spi spi32765.0: setup: unsupported mode bits 4<br />[&nbsp; 128.950000] mmc_spi spi32765.0: can&#039;t change chip-select polarity<br />[&nbsp; 129.020000] mmc0: host does not support reading read-only switch. assuming write-enable.<br />[&nbsp; 129.030000] mmc0: new SD card on SPI<br />[&nbsp; 129.040000] mmcblk0: mmc0:0000 SA02G 1.83 GiB<br />[&nbsp; 129.120000]&nbsp; mmcblk0: p1<br />[&nbsp; 266.830000] mmc0: SPI card removed<br />[&nbsp; 266.840000] gpio-mmc: GPIO based MMC-Card &quot;default&quot; removed</p><br /><p>[&nbsp; 283.270000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 283.290000] mmc_spi spi32764.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 283.300000] mmc_spi spi32764.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 283.310000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[&nbsp; 283.350000] mmc_spi spi32764.0: setup: unsupported mode bits 4<br />[&nbsp; 283.360000] mmc_spi spi32764.0: can&#039;t change chip-select polarity<br />[&nbsp; 283.580000] mmc0: host does not support reading read-only switch. assuming write-enable.<br />[&nbsp; 283.590000] mmc0: new SD card on SPI<br />[&nbsp; 283.610000] mmcblk0: mmc0:0000 SD&nbsp; &nbsp; 1.85 GiB<br />[&nbsp; 283.660000]&nbsp; mmcblk0: p1<br />[&nbsp; 310.070000] mmc0: SPI card removed<br />[&nbsp; 310.090000] gpio-mmc: GPIO based MMC-Card &quot;default&quot; removed</p><br /><p>[&nbsp; 343.080000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 343.090000] mmc_spi spi32763.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 343.100000] mmc_spi spi32763.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 343.120000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[&nbsp; 343.160000] mmc_spi spi32763.0: setup: unsupported mode bits 4<br />[&nbsp; 343.170000] mmc_spi spi32763.0: can&#039;t change chip-select polarity<br />[&nbsp; 343.380000] mmc0: host does not support reading read-only switch. assuming write-enable.<br />[&nbsp; 343.400000] mmc0: new SDHC card on SPI<br />[&nbsp; 343.410000] mmcblk0: mmc0:0000 SU08G 7.40 GiB<br />[&nbsp; 343.480000]&nbsp; mmcblk0: p1 p2<br />[ 1280.100000] mmc0: SPI card removed<br />[ 1280.110000] gpio-mmc: GPIO based MMC-Card &quot;default&quot; removed</p><br /><p>[ 1305.890000] gpio-mmc: Failed to request mmc_spi module.<br />[ 1305.910000] mmc_spi spi32762.0: ASSUMING 3.2-3.4 V slot power<br />[ 1305.920000] mmc_spi spi32762.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[ 1305.940000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[ 1305.980000] mmc_spi spi32762.0: setup: unsupported mode bits 4<br />[ 1305.990000] mmc_spi spi32762.0: can&#039;t change chip-select polarity<br />[ 1306.530000] mmc0: host does not support reading read-only switch. assuming write-enable.<br />[ 1306.550000] mmc0: new SDHC card on SPI<br />[ 1306.560000] mmcblk0: mmc0:0000 SD&nbsp; &nbsp; 29.4 GiB<br />[ 1306.620000]&nbsp; mmcblk0:</p><p>Realy thanx for help MBS</p><br /><br /><p>now i need write a scrip to automatical remove the modules </p><p>i made file /etc/init.d/proceskill</p><p>edit:</p><p>#!/bin/sh<br />START=89<br />rmmod leds_gpio<br />rmmod button_hotplug<br />rmmod gpio_keys_polled<br />rmmod input_polldev<br />rmmod input_core</p><br /><br /><p>but this dont wont start automatical in boot, i activate it in webgui&nbsp; &nbsp;system---&gt;startup, but dont start in boot. </p><p>i give chmod 777 /etc/init.d/proceskill<br />and if i start it in console /etc/init.d/proceskill --&gt; all its ok, but dont want start automatical</p><p>pls help, i need to mount this card and dont know what i need to use</p><br /><br /><br /><br /><br /><p>EDIT :::</p><br /><br /><p>i use section Webui-----&gt;system-------&gt;startup, and in local startup i write:</p><br /><br /><p># Put your custom commands here that should be executed once<br /># the system init finished. By default this file does nothing.<br />rmmod leds_gpio<br />rmmod button_hotplug<br />rmmod gpio_keys_polled<br />rmmod input_polldev<br />rmmod input_core<br />sleep 2<br />/etc/init.d/mmc_over_gpio start<br />exit 0</p> <br /><br /><p>next i reboot router and all its good.</p><br /><p>now i need mount the SD card, <br />have problem becouste my opkg can&#039;t install packages:</p><p>root@OpenWrt:/mnt# opkg install block-mount block-hotplug kmod-fs-vfat kmod-nls-<br />cp437 kmod-nls-iso8859-1<br />Unknown package &#039;block-mount&#039;.<br />Unknown package &#039;block-hotplug&#039;.<br />Unknown package &#039;kmod-fs-vfat&#039;.<br />Unknown package &#039;kmod-nls-cp437&#039;.<br />Unknown package &#039;kmod-nls-iso8859-1&#039;.<br />Unknown package &#039;kmod-fs-ext2&#039;.<br />Collected errors:<br /> * opkg_install_cmd: Cannot install package block-mount.<br /> * opkg_install_cmd: Cannot install package block-hotplug.<br /> * opkg_install_cmd: Cannot install package kmod-fs-vfat.<br /> * opkg_install_cmd: Cannot install package kmod-nls-cp437.<br /> * opkg_install_cmd: Cannot install package kmod-nls-iso8859-1.<br /> * opkg_install_cmd: Cannot install package kmod-fs-ext2.</p><p>Where i can find this package, meyby i must use other src configuration ? </p><br /><p>need help.<br />Thanx</p>											<p class="post-edited">(Last edited by <strong>finch84</strong> on 13 Mar 2014, 20:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227552">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						13 Mar 2014, 22:03					</div>
				</div>
				<div class="post-content content">
					<p>Did you run &quot;opkg update&quot;?<br />For removing the modules in autostart, have a look in /etc/rc.d. There should be a file called something like S90mmc_over_gpio, which would start the mmc card (assuming you did a &quot;/etc/init.d/mmc_over_gpio enable&quot; once before). Make a copy of it, named something like S89rmmod. Then edit it and delete everything, except the start()-function. Then modify that function to just contain your rmmods. See how that works out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227623">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						15 Mar 2014, 00:54					</div>
				</div>
				<div class="post-content content">
					<p>ok i flash new firmware:</p><p>OpenWrt Attitude Adjustment 12.09-beta2</p><p>and install </p><p>kmod-fs-ext4<br />block-mount</p><p>and storage card success mounted on&nbsp; /mnt/mmcblk0p1</p><p>i try make extroot</p><p>format card for ext3 and 100mb swap</p><p>use</p><p>tar -C /overlay -cvf - . | tar -C /mnt/mmcblk0p1 -xf -</p><p>mkdir -p /tmp/cproot<br />mount --bind / /tmp/cproot<br />tar -C /tmp/cproot -cvf - . | tar -C /mnt/mmcblk0p1 -xf -<br />umount /tmp/cproot</p><p>use nano /etc/config/fstab</p><p>config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp; /mnt&nbsp; # This is ignored once is_rootfs is set to 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; /dev/mmcblk0p1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp; &nbsp; &nbsp; ext3<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; &nbsp; &nbsp; &nbsp;rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck&nbsp; 0<br />&nbsp; &nbsp; &nbsp; &nbsp; option is_rootfs&nbsp; &nbsp; &nbsp;1<br />and reboot</p><p>free space on device not changed</p><p>i use new fstab</p><p>config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp; /overlay&nbsp; # This is ignored once is_rootfs is set to 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; /dev/mmcblk0p1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp; &nbsp; &nbsp; ext3<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; &nbsp; &nbsp; &nbsp;rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck&nbsp; 0</p><p>and have 1,5 gb free space in web gui<br /><span class="postimg"><img src="http://autonaprawa.ddns.net/images/beznazwy-2.png" alt="EXTROOT" /></span></p><p>but if I want to change anything, gets the message </p><p>No space left on device</p><p>root@OpenWrt:~# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; &nbsp; 1.0M&nbsp; &nbsp; &nbsp;56.0K&nbsp; 95% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8M&nbsp; &nbsp; &nbsp; 1.8M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.6M&nbsp; &nbsp; &nbsp;68.0K&nbsp; &nbsp; &nbsp;14.5M&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6G&nbsp; &nbsp; &nbsp;46.5M&nbsp; &nbsp; &nbsp; 1.5G&nbsp; &nbsp;3% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; &nbsp; 1.0M&nbsp; &nbsp; &nbsp;56.0K&nbsp; 95% /<br />/dev/mmcblk0p1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6G&nbsp; &nbsp; &nbsp;46.5M&nbsp; &nbsp; &nbsp; 1.5G&nbsp; &nbsp;3% /overlay</p><p>overlay its doble mounted</p><p>I do not know what I can do now.</p>											<p class="post-edited">(Last edited by <strong>finch84</strong> on 9 Sep 2014, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227673">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						15 Mar 2014, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>Good to see that much progress, please give some feedback on how you managed to solve the problems, that you encountered, so that people who may also struggle such issues will know what to do.<br />Now, better use the stable release of Attitude Adjustment (<a href="http://downloads.openwrt.org/attitude_adjustment/12.09/">http://downloads.openwrt.org/attitude_adjustment/12.09/</a>), beta2 is a pretty early development stage. And the other thing is, that you don&#039;t need to copy your existing /overlay to the external storage, but can leave it completely empty (fresh formatted) - that&#039;s how I did it during the last years and never had any problems this way.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227686">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						16 Mar 2014, 02:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the reply </p><p>Tell me if you did extroot on Dir300b1 or on another router? <br />I can not use attitude_adjustment/12.09 / because it does not contain packages for handling file systems, eg kmod-fs-ext4 or even mount_block <br />I asked you pasted the contents of your fstab file, <br />when I finish the mod 100%, put an extensive description on the forum. </p><p>sorry for my english, in most writing as I can, or I use a translator </p><p>Greetings from Polish</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227727">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						16 Mar 2014, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>No, I just used extroot on AR71xx and ADM5120 platforms. Regarding the missing packages in 12.09, I found them:<br /><a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-fs-ext4_3.3.8-1_ramips.ipk">http://downloads.openwrt.org/attitude_a … ramips.ipk</a><br /><a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/block-mount_0.2.0-9_ramips.ipk">http://downloads.openwrt.org/attitude_a … ramips.ipk</a></p><p>Unfortunately, I can&#039;t give you my fstab right now, since my router with extroot is not here with me. But I just followed the wiki: <a href="http://wiki.openwrt.org/doc/howto/extroot#openwrt.12.09.attitude.adjustment">http://wiki.openwrt.org/doc/howto/extro … adjustment</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227729">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						16 Mar 2014, 21:45					</div>
				</div>
				<div class="post-content content">
					<p>I used exactly the same manual and unfortunately my problem is the same as above,</p><br /><br /><p>QUOTE:</p><p>i try make extroot<br />format card for ext3 and 100mb swap<br />use<br />tar -C /overlay -cvf - . | tar -C /mnt/mmcblk0p1 -xf -<br />mkdir -p /tmp/cproot<br />mount --bind / /tmp/cproot<br />tar -C /tmp/cproot -cvf - . | tar -C /mnt/mmcblk0p1 -xf -<br />umount /tmp/cproot<br />use nano /etc/config/fstab<br />config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp; /mnt&nbsp; # This is ignored once is_rootfs is set to 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; /dev/mmcblk0p1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp; &nbsp; &nbsp; ext3<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; &nbsp; &nbsp; &nbsp;rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck&nbsp; 0<br />&nbsp; &nbsp; &nbsp; &nbsp; option is_rootfs&nbsp; &nbsp; &nbsp;1<br />and reboot<br />free space on device not changed<br />i use new fstab<br />config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target&nbsp; &nbsp; &nbsp; &nbsp; /overlay&nbsp; # This is ignored once is_rootfs is set to 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp; &nbsp; &nbsp; /dev/mmcblk0p1<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype&nbsp; &nbsp; &nbsp; &nbsp; ext3<br />&nbsp; &nbsp; &nbsp; &nbsp; option options&nbsp; &nbsp; &nbsp; &nbsp;rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp;1<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled_fsck&nbsp; 0<br />and have 1,5 gb free space in web gui<br />but if I want to change anything, gets the message<br />No space left on device</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227805">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						17 Mar 2014, 20:56					</div>
				</div>
				<div class="post-content content">
					<p>What is the output of mount and df in console? And which revision number is your firmware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227814">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						17 Mar 2014, 22:04					</div>
				</div>
				<div class="post-content content">
					<p>t the moment I have no extroot system because they do not know how to do.<br />My firmware revision is r33883)</p><p>root@OpenWrt:~# mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)<br />tmpfs on /dev type tmpfs (rw,noatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,noatime,mode=600)<br />/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)<br />overlayfs:/overlay on / type overlayfs (rw,relatime,lowerdir=/,upperdir=/overlay)<br />debugfs on /sys/kernel/debug type debugfs (rw,relatime)<br />none on /proc/bus/usb type usbfs (rw,relatime)<br />configfs on /config type configfs (rw,relatime)<br />/dev/mmcblk0p1 on /mnt/mmcblk0p1 type ext3 (rw,relatime,user_xattr,barrier=1,nodelalloc,data=ordered)</p><p>root@OpenWrt:~# df -h<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; 804.0K&nbsp; &nbsp; 284.0K&nbsp; 74% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1.8M&nbsp; &nbsp; &nbsp; 1.8M&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14.6M&nbsp; &nbsp; 136.0K&nbsp; &nbsp; &nbsp;14.4M&nbsp; &nbsp;1% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;512.0K&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; 512.0K&nbsp; &nbsp;0% /dev<br />/dev/mtdblock5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; 804.0K&nbsp; &nbsp; 284.0K&nbsp; 74% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; 1.1M&nbsp; &nbsp; 804.0K&nbsp; &nbsp; 284.0K&nbsp; 74% /<br />/dev/mmcblk0p1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.6G&nbsp; &nbsp; &nbsp;60.5M&nbsp; &nbsp; &nbsp; 1.5G&nbsp; &nbsp;4% /mnt/mmcblk0p1</p><p>Thanx for u time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227980">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">MBS</div>
					<div class="post-datetime">
						19 Mar 2014, 20:33					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t know if I am of big help at this point. I recently checked the fstab on my AR71xx device and realized, that I stopped using extroot on it, like 1 or 2 years ago. It was due to the typical USB issues, which caused way too much trouble. So since then, I just mounted my USB flash drive to /srv. And on my ADM5120 runs a version of trunk, where extroot did not work, due to the change to ubox/ubus. Seems to be time to resume working on that one.<br />So, the only thing I could recommend you is, trying to pivot /overlay with a freshly formatted memory card and checking with df and mount, and also to create dummy files in /overlay using dd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248097">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">blowagie</div>
					<div class="post-datetime">
						25 Sep 2014, 20:56					</div>
				</div>
				<div class="post-content content">
					<p>I did a HW mod for an SD-Card on a dir 615H2. I do have the same problem as described here with the Dir 300 B1 router (overlay seems ok but error with installing software: no space left on device). A short description of what I did: </p><p>- HW Mod as on <a href="http://wiki.openwrt.org/toh/d-link/dir-615#sd-card.in.dir-615.h1">http://wiki.openwrt.org/toh/d-link/dir- … dir-615.h1</a><br />- I have installed&nbsp; ATTITUDE ADJUSTMENT (12.09, r36088)<br />- Following config:</p><br /><p>opkg update<br />opkg install kmod-mmc-over-gpio luci-app-mmc-over-gpio<br />opkg remove remove kmod-leds-gpio kmod-input-gpio-keys-polled<br />rmmod gpio_keys_polled leds_gpio<br />opkg install kmod-fs-ext4</p><p>opkg remove kmod-button-hotplug kmod-ledtrig-usbdev<br />uci set mmc_over_gpio.@mmc_over_gpio[0].enabled=1<br />uci set mmc_over_gpio.@mmc_over_gpio[0].DI_pin=7<br />uci set mmc_over_gpio.@mmc_over_gpio[0].DO_pin=0<br />uci set mmc_over_gpio.@mmc_over_gpio[0].CLK_pin=9<br />uci set mmc_over_gpio.@mmc_over_gpio[0].CS_pin=14<br />uci commit mmc_over_gpio<br />/etc/init.d/mmc_over_gpio enable<br />opkg install block-mount</p><br /><br /><br /><p>Remove Modules at Boot:<br />Create a file /etc/init.d/rmmodules<br />#!/bin/sh /etc/rc.common<br /># Copyright (C) 2008 OpenWrt.org<br />START=89</p><p>start() {<br />&nbsp; &nbsp; rmmod gpio_keys_polled <br />&nbsp; &nbsp; rmmod leds_gpio<br />}</p><p>Change rights:<br />chmod 755 /etc/init.d/rmmodules</p><p>Create softlink in <br />cd /etc/rc.d:<br />ln –s ../init.d/rmmodules&nbsp; /etc/rc.d/S89rmmodules</p><br /><p>Changed fstab into<br />config global automount<br />&nbsp; &nbsp; &nbsp; &nbsp; option from_fstab 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option anon_mount 1</p><p>config global autoswap<br />&nbsp; &nbsp; &nbsp; &nbsp; option from_fstab 1<br />&nbsp; &nbsp; &nbsp; &nbsp; option anon_swap 0</p><p>config swap<br />&nbsp; &nbsp; &nbsp; &nbsp; option device /dev/sda2<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled 0</p><p>config mount<br />&nbsp; &nbsp; &nbsp; &nbsp; option target /overlay<br />&nbsp; &nbsp; &nbsp; &nbsp; option device /dev/mmcblk0p1<br />&nbsp; &nbsp; &nbsp; &nbsp; option options rw,sync<br />&nbsp; &nbsp; &nbsp; &nbsp; option fstype ext2<br />&nbsp; &nbsp; &nbsp; &nbsp; option enable_fsck 0<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled 1</p><p>df:<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1088&nbsp; &nbsp; &nbsp; &nbsp;664&nbsp; &nbsp; &nbsp; &nbsp;424&nbsp; 61% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1792&nbsp; &nbsp; &nbsp; 1792&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14924&nbsp; &nbsp; &nbsp; &nbsp; 80&nbsp; &nbsp; &nbsp;14844&nbsp; &nbsp;1% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />/dev/mtdblock5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 250943&nbsp; &nbsp; &nbsp; &nbsp;126&nbsp; &nbsp; 237761&nbsp; &nbsp;0% /overlay<br />overlayfs:/overlay&nbsp; &nbsp; &nbsp; &nbsp; 1088&nbsp; &nbsp; &nbsp; &nbsp;664&nbsp; &nbsp; &nbsp; &nbsp;424&nbsp; 61% /<br />/dev/mmcblk0p1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 250943&nbsp; &nbsp; &nbsp; &nbsp;126&nbsp; &nbsp; 237761&nbsp; &nbsp;0% /overlay</p><p>Mount:<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)<br />tmpfs on /dev type tmpfs (rw,noatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,noatime,mode=600)<br />/dev/mtdblock5 on /overlay type jffs2 (rw,noatime)<br />overlayfs:/overlay on / type overlayfs (rw,relatime,lowerdir=/,upperdir=/overlay)<br />debugfs on /sys/kernel/debug type debugfs (rw,relatime)<br />none on /proc/bus/usb type usbfs (rw,relatime)<br />configfs on /config type configfs (rw,relatime)<br />/dev/mmcblk0p1 on /overlay type ext2 (rw,sync,relatime,user_xattr,barrier=1)</p><br /><p>Is there something I can do to have the overlay working correctly?</p><p>Tx</p><p>Bart</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248102">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						25 Sep 2014, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m sorry my friend, but my work stopped. Not got success, above you can see that attempts have done it and ran out ideas, I hope that my previous posts have helped you get to the same stage. In post number 33 revealed a way as to show the amount of free space in the web gui, but unfortunately I managed to get rid of &quot; no space left on device&quot; .<br />Maybe you&#039;ll have better luck if success count on help. Sry for my english i use translator <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248662">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						1 Oct 2014, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>Hello All! I have DiR-300B1. I installed ATTITUDE ADJUSTMENT from:<br /><a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/openwrt-ramips-rt305x-dir-300-b1-squashfs-factory.bin">https://downloads.openwrt.org/attitude_ … actory.bin</a></p><p>I used follow GPIOs:<br />SD Pin1(CS) - GPIO0 (WPS Switch) <br />SD Pin2(DI) - GPIO12 (Green WAN LED) <br />SD Pin3(GND) <br />SD Pin4(+3.3V) <br />SD Pin5(CLK) - GPIO8 (Amber Power LED) <br />SD Pin6(GND) <br />SD Pin7(DO) - GPIO13 (WPS LED) </p><p>I removed modules:<br />rmmod leds_gpio<br />rmmod button_hotplug<br />rmmod gpio_keys_polled<br />rmmod input_polldev<br />rmmod input_core</p><p>/etc/init.d/mmc_over_gpio start</p><p>dmesg said: <br />[13258.320000] gpio-mmc: Failed to request mmc_spi module. <br />[13258.340000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power <br />[13258.350000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff <br />[13258.360000] gpio-mmc: MMC-Card &quot;mmc-card&quot; attached to GPIO pins di=12, do=13, clk=8, cs=0 <br />[13258.410000] mmc_spi spi32766.0: setup: unsupported mode bits 4 <br />[13258.420000] mmc_spi spi32766.0: can&#039;t change chip-select polarity </p><p>After that, nothing happened.</p><p>Then I installed Barrier Breaker from:<br /><a href="https://downloads.openwrt.org/barrier_breaker/14.07/ramips/rt305x/openwrt-ramips-rt305x-dir-300-b1-squashfs-factory.bin">https://downloads.openwrt.org/barrier_b … actory.bin</a></p><p>I removed modules leds_gpio and gpio_button_hotplug, then I started /etc/init.d/mmc_over_gpio start</p><p>dmesg said:<br />[&nbsp; &nbsp;24.090000] gpiommc gpiommc.0: no of_node; not parsing pinctrl DT<br />[&nbsp; &nbsp;24.090000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; &nbsp;24.110000] spi-gpio spi-gpio.0: no of_node; not parsing pinctrl DT<br />[&nbsp; &nbsp;24.110000] spi-gpio: probe of spi-gpio.0 failed with error -16<br />[&nbsp; &nbsp;24.120000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=12, do=13, clk=8, cs=0</p><p>Do you have any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248668">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						1 Oct 2014, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Reboot router<br />Use this 5 command in terminal:<br />rmmod leds_gpio<br />rmmod button_hotplug<br />rmmod gpio_keys_polled<br />rmmod input_polldev<br />rmmod input_core</p><p>And again try start mmcovergpio<br />send log dmesg.</p><p>Have good luck and good day</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248676">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						1 Oct 2014, 17:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello! Thanks for the quick reply!<br />Now, I have: ATTITUDE ADJUSTMENT (12.09, r36088)</p><p>I installed follow modules:</p><p>root@OpenWrt:~# opkg update<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/Packages.gz.">http://downloads.openwrt.org/attitude_a … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/attitude_adjustment.<br />root@OpenWrt:~# opkg install kmod-mmc-over-gpio<br />Installing kmod-mmc-over-gpio (3.3.8-4) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-mmc-over-gpio_3.3.8-4_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing kmod-mmc-spi (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-mmc-spi_3.3.8-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing kmod-mmc (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-mmc_3.3.8-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing kmod-lib-crc7 (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-lib-crc7_3.3.8-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing kmod-spi-gpio-old (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-spi-gpio-old_3.3.8-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Installing kmod-spi-bitbang (3.3.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ramips/rt305x/packages/kmod-spi-bitbang_3.3.8-1_ramips.ipk.">http://downloads.openwrt.org/attitude_a … amips.ipk.</a><br />Configuring kmod-mmc.<br />Configuring kmod-spi-bitbang.<br />Configuring kmod-spi-gpio-old.<br />Configuring kmod-lib-crc7.<br />Configuring kmod-mmc-spi.<br />Configuring kmod-mmc-over-gpio.<br />root@OpenWrt:~#</p><p>Then I configured mmc_over_gpio:</p><p>root@OpenWrt:~# cat /etc/config/mmc_over_gpio</p><p>config mmc_over_gpio<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;default&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option DI_pin &#039;12&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option DO_pin &#039;13&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option CLK_pin &#039;8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option CS_pin &#039;0&#039;</p><p>root@OpenWrt:~#</p><p>Then I removed modules:<br />root@OpenWrt:~# rmmod leds_gpio<br />root@OpenWrt:~# rmmod button_hotplug<br />root@OpenWrt:~# rmmod gpio_keys_polled<br />root@OpenWrt:~# rmmod input_polldev<br />root@OpenWrt:~# rmmod input_core<br />root@OpenWrt:~#</p><p>Trying /etc/init.d/mmc_over_gpio start :<br />[&nbsp; 285.320000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 285.340000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 285.350000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 285.360000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=12, do=13, clk=8, cs=0<br />[&nbsp; 285.410000] mmc_spi spi32766.0: setup: unsupported mode bits 4<br />[&nbsp; 285.420000] mmc_spi spi32766.0: can&#039;t change chip-select polarity</p><p>Then nothing happed, but GPIO8 (CLK) (Amber Power LED) is switch on.</p><p>PS: I tried SD-to-microSD adapter and microSD card 2 Gb. It`s work fine on notebook (Windows 7). I tried other microSD cards 2Gb and 1Gb, not result. I tried remove leds, no result. I tried change GPIOs, no result. I tied change SPI mode to 3, also no result.</p><p>PPS: Full dmesg:<br />root@OpenWrt:~# dmesg<br />[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (blogic@Debian-60-squeeze-64-minimal) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Sat Mar 23 19:00:46 UTC 2013<br />[&nbsp; &nbsp; 0.000000] prom: fw_arg0=00000001, fw_arg1=01f5bfb0, fw_arg2=01f5c3b0, fw_arg3=00000000<br />[&nbsp; &nbsp; 0.000000] env[0]: memsize=32<br />[&nbsp; &nbsp; 0.000000] env[1]: initrd_start=0x00000000<br />[&nbsp; &nbsp; 0.000000] env[2]: initrd_size=0x0<br />[&nbsp; &nbsp; 0.000000] env[3]: flash_start=0xBF000000<br />[&nbsp; &nbsp; 0.000000] env[4]: flash_size=0x800000<br />[&nbsp; &nbsp; 0.000000] env[0]: memsize=32<br />[&nbsp; &nbsp; 0.000000] env[1]: initrd_start=0x00000000<br />[&nbsp; &nbsp; 0.000000] env[2]: initrd_size=0x0<br />[&nbsp; &nbsp; 0.000000] env[3]: flash_start=0xBF000000<br />[&nbsp; &nbsp; 0.000000] env[4]: flash_size=0x800000<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 0001964c (MIPS 24KEc)<br />[&nbsp; &nbsp; 0.000000] Ralink RT3350 id:1 rev:2 running at 320.00 MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] On node 0 totalpages: 8192<br />[&nbsp; &nbsp; 0.000000] free_area_init_node: node 0, pgdat 802547a0, node_mem_map 81000000<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 64 pages used for memmap<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 0 pages reserved<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal zone: 8128 pages, LIFO batch:0<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768<br />[&nbsp; &nbsp; 0.000000] pcpu-alloc: [0] 0<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=DIR-300-B1 console=ttyS1,57600 mtdparts=physmap-flash.0:192k(u-boot)ro,64k(devdata)ro,64k(devconf)ro,896k(kernel),2880k(rootfs),3776k@0x50000(firmware) rootfstype=squashfs,jffs2<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 16kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00063510<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00063510<br />[&nbsp; &nbsp; 0.000000] Memory: 29672k/32768k available (2046k kernel code, 3096k reserved, 340k data, 176k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:48<br />[&nbsp; &nbsp; 0.000000] console [ttyS1] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.010000] Calibrating delay loop... 212.58 BogoMIPS (lpj=1062912)<br />[&nbsp; &nbsp; 0.090000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.090000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.100000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.110000] MIPS: machine is D-Link DIR-300 B1<br />[&nbsp; &nbsp; 0.120000] gpiochip_add: registered GPIOs 0 to 23 on device: RT305X-GPIO0<br />[&nbsp; &nbsp; 0.130000] gpiochip_add: registered GPIOs 24 to 39 on device: RT305X-GPIO1<br />[&nbsp; &nbsp; 0.140000] gpiochip_add: registered GPIOs 40 to 51 on device: RT305X-GPIO2<br />[&nbsp; &nbsp; 0.180000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.190000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.210000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.210000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.230000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.240000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.260000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.270000] TCP reno registered<br />[&nbsp; &nbsp; 0.280000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.290000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.300000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.360000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.380000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.400000] msgmni has been set to 57<br />[&nbsp; &nbsp; 0.410000] Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br />[&nbsp; &nbsp; 0.420000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.430000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.440000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled<br />[&nbsp; &nbsp; 0.460000] serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A<br />[&nbsp; &nbsp; 0.470000] serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A<br />[&nbsp; &nbsp; 0.500000] physmap platform flash device: 00800000 at bf000000<br />[&nbsp; &nbsp; 0.520000] physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x001a00<br />[&nbsp; &nbsp; 0.540000] physmap-flash.0: Found an alias at 0x400000 for the chip at 0x0<br />[&nbsp; &nbsp; 0.540000] Amd/Fujitsu Extended Query Table at 0x0040<br />[&nbsp; &nbsp; 0.550000]&nbsp; &nbsp;Amd/Fujitsu Extended Query version 1.3.<br />[&nbsp; &nbsp; 0.560000] number of CFI chips: 1<br />[&nbsp; &nbsp; 0.570000] 6 cmdlinepart partitions found on MTD device physmap-flash.0<br />[&nbsp; &nbsp; 0.580000] Creating 6 MTD partitions on &quot;physmap-flash.0&quot;:<br />[&nbsp; &nbsp; 0.590000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.610000] 0x000000030000-0x000000040000 : &quot;devdata&quot;<br />[&nbsp; &nbsp; 0.620000] 0x000000040000-0x000000050000 : &quot;devconf&quot;<br />[&nbsp; &nbsp; 0.640000] 0x000000050000-0x000000130000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.650000] 0x000000130000-0x000000400000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.670000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.680000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2F0000, len=110000<br />[&nbsp; &nbsp; 0.700000] 0x0000002f0000-0x000000400000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.710000] 0x000000050000-0x000000400000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.740000] ramips-wdt ramips-wdt: timeout value must be 0 &lt; timeout &lt;= 40, using 40<br />[&nbsp; &nbsp; 0.760000] TCP cubic registered<br />[&nbsp; &nbsp; 0.760000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 0.770000] Bridge firewalling registered<br />[&nbsp; &nbsp; 0.780000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 0.800000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.<br />[&nbsp; &nbsp; 0.820000] Freeing unused kernel memory: 176k freed<br />[&nbsp; &nbsp; 3.350000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0<br />[&nbsp; &nbsp; 3.460000] Button Hotplug driver version 0.4.1<br />[&nbsp; &nbsp; 3.710000] Registered led device: d-link:amber:status<br />[&nbsp; &nbsp; 3.710000] Registered led device: d-link:green:status<br />[&nbsp; &nbsp; 3.710000] Registered led device: d-link:amber:wan<br />[&nbsp; &nbsp; 3.720000] Registered led device: d-link:green:wan<br />[&nbsp; &nbsp; 3.720000] Registered led device: d-link:blue:wps<br />[&nbsp; &nbsp; 7.130000] JFFS2 notice: (378) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 9 of xref (0 dead, 2 orphan) found.<br />[&nbsp; &nbsp; 9.670000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993<br />[&nbsp; &nbsp; 9.690000] Backport based on wireless-testing.git master-2012-09-07<br />[&nbsp; &nbsp; 9.700000] compat.git: wireless-testing.git<br />[&nbsp; &nbsp; 9.770000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp; 9.780000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp; 9.790000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />[&nbsp; &nbsp; 9.810000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.820000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.840000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.850000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp; 9.870000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)<br />[&nbsp; &nbsp;10.560000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp;10.570000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;10.580000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp;11.200000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;11.210000] Registered led device: rt2800pci-phy0::radio<br />[&nbsp; &nbsp;11.210000] Registered led device: rt2800pci-phy0::assoc<br />[&nbsp; &nbsp;11.210000] Registered led device: rt2800pci-phy0::quality<br />[&nbsp; &nbsp;11.300000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.550000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;11.940000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;11.980000] nf_conntrack version 0.5.0 (466 buckets, 1864 max)<br />[&nbsp; &nbsp;12.590000] dwc_otg: version 2.72a 24-JUN-2008<br />[&nbsp; &nbsp;18.680000] device eth0.1 entered promiscuous mode<br />[&nbsp; &nbsp;18.690000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;18.710000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;18.720000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; &nbsp;20.260000] ramips-wdt: timeout value 60 must be 0 &lt; timeout &lt;= 40, using 40<br />[&nbsp; &nbsp;20.720000] br-lan: port 1(eth0.1) entered forwarding state<br />[&nbsp; 285.320000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 285.340000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 285.350000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 285.360000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=12, do=13, clk=8, cs=0<br />[&nbsp; 285.410000] mmc_spi spi32766.0: setup: unsupported mode bits 4<br />[&nbsp; 285.420000] mmc_spi spi32766.0: can&#039;t change chip-select polarity<br />root@OpenWrt:~#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248693">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						1 Oct 2014, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>U need duplicate this<br />Data Input = GPIO9 (Green Power LED)--&gt; 02 pin sd card<br />Data Output = GPIO13 (WPS LED)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;--&gt;&nbsp; 07 pin sd card<br />Clock = GPIO8 (Amber Power LED)&nbsp; &nbsp; &nbsp; &nbsp;--&gt;&nbsp; 05 pin sd card<br />ChipSel = GPIO0 (WPS Switch)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; --&gt;&nbsp; 01 pin sd card</p><p>And make new config file<br />U need this log in resoult<br />default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0</p><p>u use sd card or sd card slot + sd card??</p><br /><p>I use this config and can mount card np 2gb</p><p>If u have problem i can open my dir300 and make foto for u. </p><p>Good luck.</p><p>Sry for my english</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248773">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						2 Oct 2014, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>New tests... I changed GPIO and connected pin2 SD to GPIO9 (Green Power LED):<br />root@OpenWrt:~# cat /etc/config/mmc_over_gpio<br />config mmc_over_gpio<br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;default&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option DO_pin &#039;13&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option CLK_pin &#039;8&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option CS_pin &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option DI_pin &#039;9&#039;</p><p>Remove modules:<br />root@OpenWrt:~# rmmod leds_gpio<br />root@OpenWrt:~# rmmod button_hotplug<br />root@OpenWrt:~# rmmod gpio_keys_polled<br />root@OpenWrt:~# rmmod input_polldev<br />root@OpenWrt:~# rmmod input_core</p><p>Trying /etc/init.d/mmc_over_gpio start&nbsp; , dmesg said:<br />[&nbsp; 239.790000] gpio-mmc: Failed to request mmc_spi module.<br />[&nbsp; 239.810000] mmc_spi spi32766.0: ASSUMING 3.2-3.4 V slot power<br />[&nbsp; 239.820000] mmc_spi spi32766.0: SD/MMC host mmc0, no DMA, no WP, no poweroff<br />[&nbsp; 239.830000] gpio-mmc: MMC-Card &quot;default&quot; attached to GPIO pins di=9, do=13, clk=8, cs=0<br />[&nbsp; 239.870000] mmc_spi spi32766.0: setup: unsupported mode bits 4<br />[&nbsp; 239.880000] mmc_spi spi32766.0: can&#039;t change chip-select polarity</p><p>nothing happed, but GPIO8 (CLK) (Amber Power LED) is switch on <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />((</p><p>PS I use sd card slot+microSD card (2 Gb). Example there:<br /><a href="http://www.jbprojects.net/articles/wrt54gl_mods/">http://www.jbprojects.net/articles/wrt54gl_mods/</a></p><p>I have analog scheme: <br /><a href="https://dl.dropbox.com/u/101429500/dir300b1.jpg">https://dl.dropbox.com/u/101429500/dir300b1.jpg</a></p><p>PPS If I change SPI-mode from 0 to 3, CLK GPIO does not turn on, but during /etc/init.d/mmc_over_gpio start, GPIOs 8 and 9 blink 1 time.</p>											<p class="post-edited">(Last edited by <strong>Senya</strong> on 2 Oct 2014, 09:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248778">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">finch84</div>
					<div class="post-datetime">
						2 Oct 2014, 09:16					</div>
				</div>
				<div class="post-content content">
					<p>Bro if i use /etc/init.d/mmc_over_gpio start , my amber led too switch on and give light.</p><p>I make this mod&nbsp; 6 month ago, and write all in this topic, u must read step bu step all my posts, now i dont remember what you can do. </p><p>In next 10h i give u my config file, meyby u try other card. </p><p>Where are u from bro?<br />Good luck.</p>											<p class="post-edited">(Last edited by <strong>finch84</strong> on 2 Oct 2014, 09:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248784">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						2 Oct 2014, 09:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>finch84 wrote:</cite><blockquote><p>Bro if i use /etc/init.d/mmc_over_gpio start , my amber led too switch on and give light.<br />I make this mod&nbsp; 6 month ago, and write all in this topic, u must read step bu step all my posts, now i dont remember what you can do. <br />In next 10h i give u my config file, meyby u try other card. <br />Where are u from bro?<br />Good luck.</p></blockquote></div><p>Thanks for the quick answers! I have read several times your posts, but I realized that your problem was a broken SD card slot?<br />What do you think is required to remove LEDs?<br />Perhaps I have broken SD card slot, but it worked in Windows 7 of 100% as well as microSD card. Earlier, I tried two different microSD cards, 2Gb and 1Gb, it`s no result <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />The only option to change SD card slot or use true SD/MMC card. I checked all GPIO except WPS button using this manual:<br /><a href="http://squidge.sourceforge.net/gpio/">http://squidge.sourceforge.net/gpio/</a></p><p>GPIOs was right.</p><p>PS Bro, don`t worry about language! I myself use a google translator <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Hello from: <a href="https://en.wikipedia.org/wiki/Kostroma">https://en.wikipedia.org/wiki/Kostroma</a></p>											<p class="post-edited">(Last edited by <strong>Senya</strong> on 2 Oct 2014, 09:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248797">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">Senya</div>
					<div class="post-datetime">
						2 Oct 2014, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>May be all my microSD cards don`t support SPI mode...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=36986&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>