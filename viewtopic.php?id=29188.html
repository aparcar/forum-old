<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Issue with rootfs and lamp</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 8 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p131176">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kennyevo</div>
					<div class="post-datetime">
						20 Mar 2011, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!<br />I&#039;v successfully set up my external hard drive as rootfs with extroot, opkg works fine.<br />I would like to set up a lamp server following this howto:</p><div class="codebox"><pre><code>http://wiki.openwrt.org/inbox/lamp</code></pre></div><p>But when i try to install mysql db i get this screen:<br /></p><div class="codebox"><pre><code>root@Kockalak-RSRV:/# mysql_install_db --force
Aborted

FATAL ERROR: Could not find /usr/lib/mysqld

If you compiled from source, you need to run &#039;make install&#039; to
copy the software into the correct location ready for operation.

If you are using a binary release, you must either be at the top
level of the extracted archive, or pass the --basedir option
pointing to that location.</code></pre></div><p>PHP does not work too.</p><p>Can anybody help me?<br />Thank you in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131179">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						20 Mar 2011, 18:18					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tested the howto with <em>block-extroot</em> and it works fine here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131182">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kennyevo</div>
					<div class="post-datetime">
						20 Mar 2011, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>The mounting is fine, but the mysql doesn&#039;t work, now i php works, i did something wrong, but mysq don&#039;t want to work:(<br />If i make a soft link for /etc/init.d/mysqld to /usr/lib/<br />Then i got this screen<br /></p><div class="codebox"><pre><code>root@Kockalak-RSRV:/overlay/usr/bin# mysql_install_db --force
Aborted
Installing MySQL system tables...
OK
Filling help tables...
OK

To start mysqld at boot time you have to copy
support-files/mysql.server to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:

/usr/bin/mysqladmin -u root password &#039;new-password&#039;
/usr/bin/mysqladmin -u root -h Kockalak-RSRV password &#039;new-password&#039;

Alternatively you can run:
/usr/bin/mysql_secure_installation

which will also give you the option of removing the test
databases and anonymous user created by default.  This is
strongly recommended for production servers.

See the manual for more instructions.

You can start the MySQL daemon with:
cd /usr ; /usr/bin/mysqld_safe &amp;

You can test the MySQL daemon with mysql-test-run.pl
cd /usr/mysql-test ; perl mysql-test-run.pl

Please report any problems with the /usr/bin/mysqlbug script!</code></pre></div><p>But if i start the daemon, it says:<br /></p><div class="codebox"><pre><code>Error: I didn&#039;t detect a privileges table, you might need to run mysql_install_db --force to initialize the system tables</code></pre></div><p>Any idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131270">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kennyevo</div>
					<div class="post-datetime">
						21 Mar 2011, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>Please somebody help <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />I can&#039;t make it work...<br />What should i do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133549">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						20 Apr 2011, 11:44					</div>
				</div>
				<div class="post-content content">
					<p>i have the same problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134051">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">allanr</div>
					<div class="post-datetime">
						26 Apr 2011, 13:12					</div>
				</div>
				<div class="post-content content">
					<p>same here, hint anyone?</p><p>if i try to start mysqld it dies saying aborted</p><p>root@OpenWrt lib# mysqld<br />Aborted<br />root@OpenWrt</p><p>also tried <br />root@OpenWrt lib#&nbsp; /usr/bin/mysqld --skip-grant &amp;<br />root@OpenWrt lib# /usr/bin/mysql -u root mysql<br />ERROR 2002 (HY000): Can&#039;t connect to local MySQL server through socket &#039;/var/run/mysqld.sock&#039; (2)<br />[1]+&nbsp; Aborted&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; /usr/bin/mysqld --skip-grant<br />root@OpenWrt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134052">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						26 Apr 2011, 13:33					</div>
				</div>
				<div class="post-content content">
					<p>install libmysqlclient_r and libpthread if not already installed</p>											<p class="post-edited">(Last edited by <strong>crisman</strong> on 26 Apr 2011, 13:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p134061">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">allanr</div>
					<div class="post-datetime">
						26 Apr 2011, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>thanks for the tip. </p><p>installed fine But problem remains and no logs.</p><p>Root@OpenWrt /# mysql_install_db --force --basedir=/usr <br />Aborted<br />Installing MySQL system tables...<br />Aborted</p><p>Installation of system tables failed!&nbsp; Examine the logs in<br />/var for more information.</p><p>root@OpenWrt /# mysqld<br />Aborted<br />root@OpenWrt /#</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>