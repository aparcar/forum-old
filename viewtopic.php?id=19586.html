<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Openvpn and hardware crypto engine</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p84838">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						29 Mar 2009, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I try to get the hardware-cryptoaccelerator working on the my ASUS WL-500G Premium V1. </p><p>I used recent trunk (r15049) with kernel 2.6, enabled ubsec_ssb and used the patched openssl-package from <a href="http://www.danm.de">www.danm.de</a> (2/22/09), and set &quot;force use of ocf&quot;. </p><p>the kernel-modules loads just fine, and if I test openssl (openssl speed -engine cryptodev -evp aes-256-cbc) I get good results, so openssl is working with the hardware, but with openvpn I don&#039;t get any performance increase. I added &quot;engine cryptodev&quot; to /etc/config/openvpn and I can see in the log, that the engine is initialized, but I only get 450-500 kByte/s with aes-256-cbc encryption. </p><p>Is there someone, who has a working setup? </p><p>Do I need to patch openvpn too?<br />or does it use the cryptohardware but something else is the bottleneck? I don&#039;t know memory-bandwidth, or something?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96751">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">zap</div>
					<div class="post-datetime">
						2 Nov 2009, 17:42					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m also interested in getting hardware crypto to work with OpenVPN on the WL500GP.</p><p>Any update on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114364">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">paulCutler</div>
					<div class="post-datetime">
						4 Aug 2010, 08:30					</div>
				</div>
				<div class="post-content content">
					<p>I am working on this same issue with the Router Station Pro.... anyone get this working yet?</p><p>I am using the Soekris VPN1411 and a RS Pro main unit</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114390">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						4 Aug 2010, 12:55					</div>
				</div>
				<div class="post-content content">
					<p>I got it working using the ocf hifn driver. Hoewever the user-to-kernel and kernel-to-user copying of packets (context switches) is the bottleneck. The OpenVPN speed gets capped long before the crypto accel would make a difference. Its only useful for pure Kernel based VPNs like IPSec or L2TP.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114403">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Dogge</div>
					<div class="post-datetime">
						4 Aug 2010, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm that the Soekris VPN1411 crypto hardware works with the OCF HiFn drivers. OpenVPN and IPsec.</p>											<p class="post-edited">(Last edited by <strong>Dogge</strong> on 4 Aug 2010, 14:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114410">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">paulCutler</div>
					<div class="post-datetime">
						4 Aug 2010, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>which hifn driver are you using? kmod-crypto-ocf-hifn7751 or the kmod-crypto-hw-hifn-795x?</p><p>Thanks for the responses!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p114424">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						4 Aug 2010, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>&quot;ocf hifn&quot; -&gt; kmod-crypto-ocf-hifn7751&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>