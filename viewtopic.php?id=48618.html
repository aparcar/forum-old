<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SainSmart USB 4 Channel Relay Automation 5V with openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p223627">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						24 Jan 2014, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I have been scouring the internet looking for a way to use a: SainSmart USB 4 Channel Relay Automation 5V with openwrt on a TL-WDR3500.&nbsp; The sainsmart uses the FT245RL chip which should be supported by kmod-usb-serial-ftdi - 3.10.26-1<br /> or one of the other many kmods I have installed.&nbsp; One thing I did find has a problem that the pylibftdi and supporting packages are not available on openwrt (which I have heard work on the raspberry pi).&nbsp; Granted they were using a <a href="http://denkovi.com/product/44/usb-four-4-relay-output-module-board-for-home-automation.html">http://denkovi.com/product/44/usb-four- … ation.html</a> but they are the same FT245RL.&nbsp; </p><p>At any rate I have tried php with a serial class.&nbsp; I have tried echo -e &#039;\xFF\x01\x01&#039; &gt; /dev/ttyUSB0 and echo -e &#039;\xFF\x01\x01&#039; &gt; /dev/ttyS0 one of which should have turned on the #1 relay.&nbsp; And many other attempts.&nbsp; I have verified stty -F /dev/ttyUSB0 -a and all appears well the same for ttyS0.&nbsp; I have verified the unit works on Win7x64 with their canned software.</p><p>I have been searching for quite some time and have not found anyone with a working example of a SainSmart USB 4 Channel Relay Automation 5V on openwrt.&nbsp; Any guidance would be appreciated!</p><br /><p>Links:<br /><a href="https://code.google.com/p/drcontrol/wiki/Install_RaspberryPi">https://code.google.com/p/drcontrol/wik … aspberryPi</a><br /><a href="http://www.amazon.com/SainSmart-USB-Channel-Relay-Automation/dp/B009A524Z0/ref=sr_1_6?ie=UTF8&amp;qid=1390568223&amp;sr=8-6&amp;keywords=SainSmart+USB+4+Channel+Relay+usb">http://www.amazon.com/SainSmart-USB-Cha … +Relay+usb</a><br /><a href="http://denkovi.com/product/44/usb-four-4-relay-output-module-board-for-home-automation.html">http://denkovi.com/product/44/usb-four- … ation.html</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223640">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						24 Jan 2014, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>Do you have libftdi installed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223648">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						24 Jan 2014, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>I believe that would have to be installed manually?&nbsp; Or I&#039;m not sure.&nbsp; The following link says it is obsolete? <a href="https://dev.openwrt.org/ticket/3193">https://dev.openwrt.org/ticket/3193</a>&nbsp; &nbsp; So does that mean it is already included or something?</p><p>Per <a href="http://libftdi.141977.n3.nabble.com/lbftdi-for-OpenWRT-td2909961.html">http://libftdi.141977.n3.nabble.com/lbf … 09961.html</a><br />It appears <a href="http://www.intra2net.com/en/developer/libftdi/">http://www.intra2net.com/en/developer/libftdi/</a>&nbsp; &nbsp;may have something for me.</p><p>Per the intra2net site: I already had libusb and tried to add libconfuse (the two dependencies for libftdi). Then I got stuck.</p><p>For libconfuse I would have to do it manually as well for libftdi.&nbsp; This is where it goes a bit over my head.&nbsp; I did try to ./configure for libconfuse but got this error: configure: error: no acceptable C compiler found in $PATH...&nbsp; Which I assume means I just need to install a suitable compiler.&nbsp; I am not sure what would be a good compiler on here and I am low on disk space.&nbsp; Not sure where to go from here.</p><p>Notes below show that the needed packages do not seem to be available via opkg:<br />root@OpenWrt:~# opkg list-installed |grep ftdi<br />kmod-usb-serial-ftdi - 3.10.26-1<br />root@OpenWrt:~# opkg update<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/Packages.gz.">http://downloads.openwrt.org/snapshots/ … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/barrier_breaker.<br />root@OpenWrt:~# opkg list |grep ftdi<br />kmod-usb-serial-ftdi - 3.10.26-1 - Kernel support for FTDI USB-to-Serial converters</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223653">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						24 Jan 2014, 21:15					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>opkg list *ftdi

kmod-usb-serial-ftdi - 3.3.8-1 - Kernel support for FTDI USB-to-Serial converters

libftdi - 0.19-1 - libFTDI - FTDI USB driver with bitbang mode
libFTDI is an open source library to talk to FTDI chips: FT232BM, FT245BM, FT2232C, FT2232H, FT4232H, FT2232D and FT245R, including the popular bitbang mode.
The library is linked with your program in userspace, no kernel driver required.</code></pre></div><p>I have no experience with the FT245, but am interested in the subject.<br />Please keep us updated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223669">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						24 Jan 2014, 23:12					</div>
				</div>
				<div class="post-content content">
					<p>Well at any rate, it still isn&#039;t working.&nbsp; And I think it is because I need that libftdi and it definitely is not in the packages best I can tell.&nbsp; So I do think I have to figure out how to compile the libftdi and it&#039;s dependencies.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223695">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						25 Jan 2014, 09:51					</div>
				</div>
				<div class="post-content content">
					<p>Why can&#039;t you find libftdi? It&#039;s there (at least in AA12.09)!<br />What version of openwrt are you using?</p><div class="codebox"><pre><code>opkg update
opkg list *ftdi

libftdi - 0.19-1 - libFTDI - FTDI USB driver with bitbang mode

opkg install libftdi</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223697">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Jan 2014, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>libftdi missing for some reason.</p><p><a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/">http://downloads.openwrt.org/snapshots/ … /packages/</a></p><p><a href="http://buildbot.openwrt.org:8010/broken_packages/ar71xx/libftdi/">http://buildbot.openwrt.org:8010/broken … x/libftdi/</a></p><p>&quot;configure: error: *** libusb-config not found. You need a working libusb installation.&quot;</p><p>you can try using the one from AA:</p><p>opkg install <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libftdi_0.19-1_ar71xx.ipk">http://downloads.openwrt.org/attitude_a … ar71xx.ipk</a></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 25 Jan 2014, 09:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223723">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						25 Jan 2014, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>I still get errors:<br />root@OpenWrt:~# opkg install <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libftdi_0.19-1_ar71xx.ipk">http://downloads.openwrt.org/attitude_a … ar71xx.ipk</a><br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libftdi_0.19-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing libftdi (0.19-1) to root...<br />Collected errors:<br /> * satisfy_dependencies_for: Cannot satisfy the following dependencies for libftdi:<br /> *&nbsp; &nbsp; &nbsp; libusb *<br /> * opkg_install_cmd: Cannot install package libftdi.<br />-------<br />So that would appear to be because libusb isn&#039;t installed, but...?<br />-------<br />So that is odd because it looks installed?:<br />root@OpenWrt:~# opkg list-installed|grep libusb<br />libusb-1.0 - 1.0.9-1</p><p>------<br />Granted, when I did the install, I had to do opkg install libusb-1.0 because opkg install libusb did not work.&nbsp; Though I would think that of little consequence.<br />--</p><p>Any Thoughts?&nbsp; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223736">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						25 Jan 2014, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>Looks like I needed the older libusb so that it would recognize it.<br />root@OpenWrt:~# opkg install <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libusb_0.1.12-3_ar71xx.ipk">http://downloads.openwrt.org/attitude_a … ar71xx.ipk</a><br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libusb_0.1.12-3_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing libusb (0.1.12-3) to root...<br />Configuring libusb.</p><p>---<br />Then this worked:<br />root@OpenWrt:~# opkg install <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libftdi_0.19-1_ar71xx.ipk">http://downloads.openwrt.org/attitude_a … ar71xx.ipk</a><br />Downloading <a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/libftdi_0.19-1_ar71xx.ipk.">http://downloads.openwrt.org/attitude_a … r71xx.ipk.</a><br />Installing libftdi (0.19-1) to root...<br />Configuring libftdi.<br />----<br />Not sure if that will make my usb problems go away, but I wanted to document this while it was fresh in my mind.&nbsp; Should have time tonight to try the device now that I have the proper things installed(I think).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223985">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">vossnick</div>
					<div class="post-datetime">
						28 Jan 2014, 21:44					</div>
				</div>
				<div class="post-content content">
					<p>I have come to the conclusion that it just doesn&#039;t work with openWRT.&nbsp; If anyone figures this out, I would enjoy hearing about it.&nbsp; I am going to try a kmtronic one next.&nbsp; It will likely work better in my application anyhow because it doesn&#039;t require external power to drive the relays which the sainsmart does, even though amazon says it does not.&nbsp; Device seemed fine in windows, but I did not try to build any applications with it on there.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>