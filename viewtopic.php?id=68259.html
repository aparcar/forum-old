<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SSH using Key not working</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p342142">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">muhd.usman87</div>
					<div class="post-datetime">
						26 Oct 2016, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I am trying to connect to my server without password and using public/private key. I want to establish reverse SSH tunnel eventually. I have created the key using &quot;dropbearkey -t rsa -f id_rsa&quot; and placed the public key on server. Now when I try to connect using dbclient, I get successfully authenticated using key, however when I tries the ssh command, it asks me for password. I need to get ssh working, i guess this is required for SSHTunnel program.</p><br /><p>/usr/bin/dbclient -f -N -R 1500:localhost:22 -p 22 usman@X.X.X.X -i&nbsp; ~/.ssh/id_rsa -y ------&gt; <strong>Works</strong></p><p>ssh -i ~/.ssh/id_rsa -y -p 22 usman@X.X.X.X&nbsp; -----&gt; <strong>Doesnt work, ask me to provide password </strong></p><p>Any ideas, whats the issue here</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342148">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						26 Oct 2016, 10:56					</div>
				</div>
				<div class="post-content content">
					<p>What do the logs on the server say?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342182">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">muhd.usman87</div>
					<div class="post-datetime">
						26 Oct 2016, 19:00					</div>
				</div>
				<div class="post-content content">
					<p><strong>OpenWRt:</strong><br />It asks me to enter passphrase, however i havent set any.</p><p>root@Usman:~# ssh -i ~/.ssh/id_rsa-y -p 22 root@X.X.X.X<br />Enter passphrase for key &#039;/root/.ssh/id_rsa&#039;: <br />root@X.X.X.X&#039;s password: </p><br /><p><strong>Server Logs:</strong></p><p>Oct 26 15:57:52 ip-172-31-Y-Y sshd[27567]: Connection closed by A.B.C.D</p>											<p class="post-edited">(Last edited by <strong>muhd.usman87</strong> on 26 Oct 2016, 19:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342195">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						26 Oct 2016, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>dropbear keys are not compatible with e.g. OpenSSH.</p><p>Google &quot;dropbear key convert&quot; and see if you find a solution amongst the results.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342198">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">muhd.usman87</div>
					<div class="post-datetime">
						26 Oct 2016, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>I actually want to create a single key that I can use while compiling firmwares, so eventually all my devices would have the same key. <br />Any ideas how should I do this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342218">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						27 Oct 2016, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>It is not the server who is asking for the password, it is the client that is asking for the password for the key! Following tmo26&#039;s suggestion, I would create the keys in a computer, and copy them to all devices.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342286">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						27 Oct 2016, 19:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>muhd.usman87 wrote:</cite><blockquote><p><strong>OpenWRt:</strong><br />It asks me to enter passphrase, however i havent set any.</p><p>root@Usman:~# ssh -i ~/.ssh/id_rsa-y -p 22 root@X.X.X.X<br />Enter passphrase for key &#039;/root/.ssh/id_rsa&#039;: <br />root@X.X.X.X&#039;s password: </p><br /><p><strong>Server Logs:</strong></p><p>Oct 26 15:57:52 ip-172-31-Y-Y sshd[27567]: Connection closed by A.B.C.D</p></blockquote></div><p>If you haven&#039;t set any while generating the keys, you can just hit Enter like you did when generating them...</p><p>Do keep in mind though, if someone gets hold of your keys, they can do anything they want. So it&#039;s still a point of failure, and if you&#039;re using keys for increased security, you should really consider setting a passphrase&nbsp; for them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342287">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">muhd.usman87</div>
					<div class="post-datetime">
						27 Oct 2016, 19:44					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, how can i provide passkey automatically via command?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342352">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">JW0914</div>
					<div class="post-datetime">
						28 Oct 2016, 16:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>muhd.usman87 wrote:</cite><blockquote><p>Thanks, how can i provide passkey automatically via command?</p></blockquote></div><p>There&#039;s no point to a password protected key if one is going to provide the key in plaintext.&nbsp; If someone gains enough access to a system to grab keys, they&#039;re likely to also search the system for files containing plaintext passwords.</p>											<p class="post-edited">(Last edited by <strong>JW0914</strong> on 28 Oct 2016, 16:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p342354">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">muhd.usman87</div>
					<div class="post-datetime">
						28 Oct 2016, 17:03					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Guys for your replies.<br />I want to add these keys in the firmware for devices to make a reverse SSH session.<br />What do you guys believe is the most secure way to perform this operation.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>