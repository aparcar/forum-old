<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> boot console access through ...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p132879">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Apr 2011, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>Why do we need to access the boot console via serial bus?</p><p>Why can&#039;t I access it, through USB or Ethernet?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132880">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						13 Apr 2011, 12:00					</div>
				</div>
				<div class="post-content content">
					<p>well my answer to this would be..,<br />its very simple to build a serial port driver.<br />and its complicated for everything else.</p><p>and serial port hardware is built on most chips., poor little micro-controllers to big hefty ones. All you need to do is configure a register or two at max. and start transmitting. <br />then again if the serial port is not present., you can use any GPIO pin to do a simple serial transfer.</p><p>and almost everything can be connected to some kinda serial port, if it does not have one., one can easily be built or extended to create the serial port functionality.</p><p>if it was Ethernet imagine the IP mess, or would have to invent some new protocol and all that overhead.</p><p>code to do serial IO can be of 2 to 3 bytes depends upon chip <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> just&nbsp; generalizing it too much.</p><br /><br /><p>so to start from scratch we need to start from somewhere right, and that somewhere as to be as easy and comfortable as possible..<br />then I would go serial to start with and then build everything over there on., as we go by..</p><br /><p>well this was a general thought. not specific to openwrt..</p><p>anybody having more ideas please...post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132889">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Apr 2011, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Ah, I suspected something like that, because for every &quot;easy to write software for&quot; thingy, end users need to buy more hardware and solder that shit to the already purchased hardware, losing all warranty you ever had.</p><p>I just thought, that in the meantime there is the possibility... Here: <a href="http://wiki.openwrt.org/toh/d-link/dir-300#with.manual.step.by.step.guide">http://wiki.openwrt.org/toh/d-link/dir- â€¦ step.guide</a>&nbsp; it says I can telnet to redboot console. And I did. Is there any difference to a connection over the serial bus?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132920">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						13 Apr 2011, 17:47					</div>
				</div>
				<div class="post-content content">
					<p>Okies here we go..,</p><p>Being from a world of embedded devices...<br /> few years ago when I was still a kid.. there were no boot loaders as such..</p><p>Those days everything was directly burned on the chips.</p><p> then came the days of flash, where in you could re-write stuff.... area wise..</p><p> this brought&nbsp; in or rather sped up the concept of putting some software on the chip., which is small enough to help you program the chip without removing it from the circuits.</p><p>in those days still flash was costly., so you couldn&#039;t have more than few kb for boot loader.<br />its like can you give 50% of your real estate just for boot loader ? You cant justify that cost going into all your millions of products</p><p>then came..&nbsp; loads of flash in comparison to the earlier times..<br />now you may have some choice to spending.. a mb of flash.. on bootloaders</p><br /><p>Then 2nd part of your question.. <br />why cant we implement network : answer is yes.. you can fit in a whole OS as bootloader.. if you wish to..<br />but were is that limit you wish to define .. <br />how much percentage of space you want to keep for it.</p><br /><p>laws of software complexity and layers say. <br />there are more failures.. if more layer... more complexity..I cant recall the name.. may be in an updated comment.</p><p>now a days all good network enabled devices have bootloaders with network support.</p><br /><p>now the question of logging/command /control.</p><p>how would you tell the world. that your bootloader on the board is having some problem.. ?<br />well if the problem is in network driver itself.</p><br /><p>for serial you need Rx and TX and GND.. <br />thats all. if you want one way traffic then only 2 wires..</p><p>you directly write bytes to the pin or the serial controllers buffer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132928">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Apr 2011, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>So, it&#039;s not being integrated because it could brake... hmmmm.</p><p>My point is, the redboot implementation of the DIR300 gives this opportunity, and I was wondering whether there are differences to access via serial, and (of course) if other boot loader bring this functionality. So far I always read that I need to buy a cable. Who&#039;s work is this, the serial cable mafia? Aha!</p><p>One more time: are there any troubles with that (besides that it could brake...)? And are there other bootloader with this functionality?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132941">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">KillaB</div>
					<div class="post-datetime">
						13 Apr 2011, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>And are there other bootloader with this functionality?</p></blockquote></div><p>I believe the answer to this is &quot;yes&quot;, however some manufacturers choose not to include/support it.<br />For instance, U-boot is capable of TFTP restoral/debricking, however the version of U-boot included on the TL-WR1043ND was not compiled with that functionality (at least on my early hardware).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p132999">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						14 Apr 2011, 14:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>My point is, the redboot implementation of the DIR300 gives this opportunity, and I was wondering whether there are differences to access via serial, and (of course) if other boot loader bring this functionality. So far I always read that I need to buy a cable. Who&#039;s work is this, the serial cable mafia? Aha!</p></blockquote></div><p>My answer to this is YES&nbsp; there are boot loaders which are network aware. <br />I have used uboot and some in house built ones but they only did so much. (In the case of in house bootloader I would case it was a minimalistic RTOS force fitted into the board)<br />There is no serial cable mafia. With time you will find more and more, as situation begins to favor them (cheaper flash, experience, HAL, open platforms etc.).</p><p>u-boot I have used&nbsp; have functionality to upload image via network. and just send a single am alive now message broadcast. when it springs to life</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133041">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">PopOpen</div>
					<div class="post-datetime">
						14 Apr 2011, 22:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mohnkhan wrote:</cite><blockquote><p>then again if the serial port is not present., you can use any GPIO pin to do a simple serial transfer. and almost everything can be connected to some kinda serial port, if it does not have one., one can easily be built or extended to create the serial port functionality.</p></blockquote></div><p>@Mohnkhan: WHAT!?? Did I hear you right? Can I use any GPIO pin as a serial? How would I do that? I happen to have a router laying around with a burned PCB serial line... ==&gt; No serial! <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; Now you say there is some magic I can perform to get a new one? <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p><p>@Orca: Main problem with Ethernet/USB based (telnet/ssh/nc etc)&nbsp; consoles is that it is inherently unstable. And since the router must already be booted for it to work, you miss out on a lot of information sent to serial console line during boot process. In addition, I have noticed that the console buffers used for consoles in Ethernet mode, are easily overflowed, leading to router crash. E.g printing/dumping large files to console...</p>											<p class="post-edited">(Last edited by <strong>PopOpen</strong> on 15 Apr 2011, 18:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>