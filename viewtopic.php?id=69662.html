<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> authsae encrypted 802.11s mesh on ralink wifi</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p350788">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">greybeard</div>
					<div class="post-datetime">
						1 Feb 2017, 08:02					</div>
				</div>
				<div class="post-content content">
					<p>After a lot of stuffing around I&#039;ve finally managed to get an authsae encrypted link running on ralink hardware.<br />Previously I have achieved this on athxx hardware.</p><p>Trick was to add an entry to the ralink wifi driver.<br />On my test setup this was a NEXX WT3020 device<br />In /etc/modules.d/rt2800-soc<br />edit the file as follows<br />rt2800soc nohwcrypt=1</p><p>ie, add the nohwcrypt=1 entry to disable hardware crypto on the wifi chip</p><p>I have an encrypted (authsae) 802.11s link running between a tplink WR703 (with extroot) and a NEXX WT3020.<br />Hope this helps someone else.</p><p>[edit] and running on a a5-v11 device with extroot with the same config change</p>											<p class="post-edited">(Last edited by <strong>greybeard</strong> on 1 Feb 2017, 08:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353311">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">faruktezcan</div>
					<div class="post-datetime">
						2 Mar 2017, 00:42					</div>
				</div>
				<div class="post-content content">
					<p>HÄ± there!<br />I tried your method with my 2 wt3020 routers. There was no success with encryption.<br />Can you please post your configuration&nbsp; files?</p><p>Thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353317">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">greybeard</div>
					<div class="post-datetime">
						2 Mar 2017, 03:53					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t got those devices currently configured with 802.11s and authsae.<br />See this post <a href="https://forum.openwrt.org/viewtopic.php?id=64779">https://forum.openwrt.org/viewtopic.php?id=64779</a> for configs uploaded previously.<br />The change regarding nohwcrypt is the only change I made to mt wt3020 to get it to work.<br />If you need any other help you&#039;ll need to provide more information than &#039;There was no success with encryption&#039; to give me a chance of working out what the problem is that needs fixing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353318">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						2 Mar 2017, 04:31					</div>
				</div>
				<div class="post-content content">
					<p>Set up a non encrypted mesh first and confirm it works.&nbsp; Then with the authsae package installed, add two lines to each station&#039;s wireless interface config:</p><p>option encryption &#039;authsae&#039;<br />option key &#039;&lt;pre-shared-secret&gt;&#039;</p><p>All the mesh stations using the same secret key of course.&nbsp; Meshes need to be set up directly not through Luci.&nbsp; Once entered, do not touch that interface with LuCI.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353468">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">faruktezcan</div>
					<div class="post-datetime">
						4 Mar 2017, 00:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi there.</p><p>I finally managed to establish a secure 802.11s mesh network between my NEXX WT3020 routers by using &quot;nohwcrypt=1&quot; trick, </p><p>Thank you all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353640">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">faruktezcan</div>
					<div class="post-datetime">
						5 Mar 2017, 23:14					</div>
				</div>
				<div class="post-content content">
					<p>Issue with nohwcrypt : <br />If I&nbsp; use this option for encrypted connection between two routers than the CPUs have to deal with encryption. That means I&nbsp; need powerful CPUs. In my example, the communication between NEXX WT3020 routers was not successful if I&nbsp; start to watch a movie. Simply, the connection breaks and the router restarts by itself. So, technically it is possible with nohwcrypt option, but you need more powerful CPU to handle the encryption</p>											<p class="post-edited">(Last edited by <strong>faruktezcan</strong> on 5 Mar 2017, 23:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353644">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">greybeard</div>
					<div class="post-datetime">
						6 Mar 2017, 02:13					</div>
				</div>
				<div class="post-content content">
					<p>Interesting update. Didn&#039;t catch this as my testing wasn&#039;t under load, just for connectivity.</p>											<p class="post-edited">(Last edited by <strong>greybeard</strong> on 6 Mar 2017, 02:13)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>