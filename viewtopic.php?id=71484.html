<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to backup spi flash image</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p361914">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">enkavak</div>
					<div class="post-datetime">
						13 Jul 2017, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi to all,</p><p>&nbsp; &nbsp; &nbsp;I would like to backup my spi flash image of my openwrt router to a microSD card.</p><p>&nbsp; &nbsp; &nbsp;&quot;mmcblk0p1&quot; is my uSD card but I am not sure about which one of the &quot;mtd&quot; is my rootfs.</p><p>&nbsp; &nbsp; &nbsp;can anybody help me ?</p><br /><div class="codebox"><pre><code>root@mylinkit:/tmp/run/mountd/mmcblk0p1# ls /dev/
audio               mtd2                null                ttyS11
autofs              mtd2ro              port                ttyS12
bus                 mtd3                ppp                 ttyS13
console             mtd3ro              ptmx                ttyS14
cpu_dma_latency     mtd4                pts                 ttyS15
dsp                 mtd4ro              random              ttyS2
full                mtd5                shm                 ttyS3
i2c-0               mtd5ro              snd                 ttyS4
kmsg                mtd6                spidev32766.1       ttyS5
log                 mtd6ro              tty                 ttyS6
mem                 mtdblock0           ttyACM0             ttyS7
memory_bandwidth    mtdblock1           ttyACM1             ttyS8
mixer               mtdblock2           ttyACM2             ttyS9
mmcblk0             mtdblock3           ttyACM3             urandom
mmcblk0p1           mtdblock4           ttyACM4             watchdog
mtd0                mtdblock5           ttyACM5             watchdog0
mtd0ro              mtdblock6           ttyS0               zero
mtd1                network_latency     ttyS1
mtd1ro              network_throughput  ttyS10</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361917">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						13 Jul 2017, 16:18					</div>
				</div>
				<div class="post-content content">
					<p>cat /proc/mtd to identify the partitions.</p><p>The &#039;root&#039; partition holds your kernel and squashfs.&nbsp; It never changes during runtime.&nbsp; The overlay partition has files written at runtime.&nbsp; The one called firmware is a union of both combined.</p><p>Mount the SD card as a file system then create a file image of the firmware partition for example if it is mtd5, do </p><p>cat /dev/mtd5 &gt; firmware.bin</p><p>You can then flash this file like a sysupgrade bin to restore your router to how it was when the backup was made, or flash it to another router of the same model to make a clone of the OS and configuration.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 13 Jul 2017, 16:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361919">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">enkavak</div>
					<div class="post-datetime">
						13 Jul 2017, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>can you please write step by step by commands ?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>