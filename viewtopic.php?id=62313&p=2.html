<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> router recommendationdue to network layout change</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Apr 2018 and 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=62313&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p310513">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">daggs</div>
					<div class="post-datetime">
						6 Feb 2016, 17:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><div class="quotebox"><cite>daggs wrote:</cite><blockquote><div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>Hi daggs,</p><p>I believe the tl-wdr4300&#039;s SoC is only connected to the switch and hence all communication that involves the router (so either traffic for the WAN or traffic terminating on the router itself) will be sensitive to VLAN issues. I understand that you terminate the netcat traffic at the router so the second clause from above seems valid. Now there might be an issue with VLAN performance on your SoC, see <a href="https://dev.openwrt.org/ticket/13072">https://dev.openwrt.org/ticket/13072</a> and/or <a href="https://dev.openwrt.org/ticket/14120">https://dev.openwrt.org/ticket/14120</a> that is causing your issue.<br />But your router will be too slow to do anything meaningful besides performing NAT, firewalling and potentially PPPoE encapsulation and traffic shaping at your WAN speed, so you might as well give up on the idea of accessig a file server on the router. If you change the server away from the router to another machine that is physically plugged into one on the router&#039;s LAN ports and test throughput between two LAN only machines, what kind of speed do you see there?</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p></blockquote></div><p>Greetings,<br />unfortunately, disabling the file server is not possible as it is used by my family to view content or hear music.<br />if I reinstate the modem as modem/router, connect the WDR4300 as a switch to it (no pppoe) and connect the rest to it, will that improve the performance?</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; &nbsp; As long as you connect the wdr4300&#039;s switch via one of the LAN ports I would assume it will act as a simple Gbit-switch and hence should switch packets close to line rate. If the slw sped was caused by the router&#039;s CPU running out of steam do to having to do too much already, then not having the WDR perform NAT firewalling and PPPoE CPU will not help...</p></blockquote></div><p>is there a way to see if I over stress my router?<br /></p><div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><div class="quotebox"><cite>daggs wrote:</cite><blockquote><p>also, in the near future I plan to move the rpi2 to the lan, add another rpi2 to the lan and disable the 5 GHz wifi, will that improve my situation?</p></blockquote></div><p>&nbsp; &nbsp; &nbsp; &nbsp; If you move the content/movie server to one of those rpi&#039;s that should help <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /></p><div class="quotebox"><cite>daggs wrote:</cite><blockquote><p>I&#039;ll preform the test you&#039;ve requested once I&#039;ll complete the transition.</p><p>thanks.</p></blockquote></div><br /><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p></blockquote></div><p>moving the hdd usb to the rpi2 is not an option due to the fact that me OE is already stressing out the rpi2.<br />another issue is the backup, I&#039;m backing up the content from the desktop. imagine backing up 1.1 TB in a speed of 10 MB/s... it will take 30 days...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310515">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">daggs</div>
					<div class="post-datetime">
						6 Feb 2016, 17:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>golialive wrote:</cite><blockquote><p>Hey there.</p><div class="quotebox"><blockquote><p>my tests are done between the desktop and the router.</p></blockquote></div><p>That&#039;s the issue. You&#039;re limiting performance by using the routers CPU.<br />If that&#039;s your main goal after all: That&#039;s most likely as best as it gets with your device.</p><p>I was under the impression your main goal was to link a couple of network devices (desktop computer, server, NAS) via GBit where none of them is the router itself. You said &quot;first, I need the 1gb for data passing between the servers.&quot;. That would be the situation to expect nearly GBit speed.</p></blockquote></div><p>I&#039;m apologize for misleading you, I wasn&#039;t clear enough apparently.<br /></p><div class="quotebox"><cite>golialive wrote:</cite><blockquote><p>If you need nice performing network storage, I would suggest to not put an USB device as storage to your OpenWrt but use a regular NAS device for that, like an entry Synology or something. Spending 150 to 200â‚¬ for a basic NAS box would give you enough speed and enough space. Spending the very same money on blazing fast OpenWrt devices (compared to other OpenWrt devices and in terms of what a router is meant to do in the first place) most likely doesn&#039;t give you the same performance.</p><p>Regars,<br />Stephan.</p></blockquote></div><p>150-200 euros is a amount I cannot spend.<br />I need to do some recalculation, thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310521">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						6 Feb 2016, 18:19					</div>
				</div>
				<div class="post-content content">
					<p>wdr4300 (actually wdr3600, but it&#039;s the same except a different 5g chip) can pass near 1gbit from port to port, i checked it</p><p>but while you are trying to test throughput between a router host and any other network host u will ever get near 200-300mbit (depends on firmware and overclock, and the same throughput ull get with software nat), it&#039;s a cpu perfomance limitation</p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 6 Feb 2016, 18:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p310524">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">daggs</div>
					<div class="post-datetime">
						6 Feb 2016, 18:50					</div>
				</div>
				<div class="post-content content">
					<p>so in an essence, the usb plug should be for display only... :-/</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=62313&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>