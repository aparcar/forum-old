<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Failed to execute /init for Ralink SoC RT3052</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=21782&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p94266">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aj.pattel88</div>
					<div class="post-datetime">
						14 Sep 2009, 18:52					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys,</p><p>I am building kamikaze 7.09 for Ralink SoC board RT3052. and I&#039;m building kernel embed with initramfs.<br />While building everything is fine ,but one kernel execution is done,ramdisk is not loading and it gives below error,</p><p>Bridge firewalling registered<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 4356k freed<br />Failed to execute /init<br />Failed to execute /etc/preinit.&nbsp; Attempting defaults...<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p><br /><br /><p>Do anyone knows about how to eliminate this error?</p><p>thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94335">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stephen.wang</div>
					<div class="post-datetime">
						15 Sep 2009, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;m also building customized firmware on RT3052 board</p><p>I can successfully finish building but I don&#039;t know what firmware image should I flash into RT3052</p><p>Can you give me a hint?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94454">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						16 Sep 2009, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>Hey buddy,</p><p>You have to use /bin/openwrt-ramips-squashfs.img or jffs2.<br />Bytheway, which router do you have ?</p><p>in my router board there is only one partition ,so i can&#039;t keep kernel and ramdisk separately.<br />So I am trying to make initramfs and embed with kernel.<br />But giving follow problem,</p><p>Failed to execute /init<br />Failed to execute /etc/preinit.&nbsp; Attempting defaults...<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel.</p><br /><p>how do you build your kernel?embed with initramfs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94475">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stephen.wang</div>
					<div class="post-datetime">
						16 Sep 2009, 20:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi , I got a ralink&#039;s EVB and a Buffalo WHR-300G</p><p>I&#039;ve solved the image problem and my kernel and filesystem are put in different partitions.</p><p>After I set init=/etc/preinit , I got the same error message as you did</p><p>So we are stuck at the same point, hope someone knows the solution~</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94508">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						17 Sep 2009, 14:48					</div>
				</div>
				<div class="post-content content">
					<p>Hey Stephan,</p><p>lot thanks for your sharing views.<br />I think initramfs is not building properly in this build system.<br />There is some problem in root-ramips.</p><p>If you find solution,plz kindly help us out.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94551">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						18 Sep 2009, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>Why not choose initramfs as image type and load that?</p><p>On my RT3052 EVB the openwrt-ramips-uImage-initramfs.bin build from latest trunk boots fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94563">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">stephen.wang</div>
					<div class="post-datetime">
						18 Sep 2009, 04:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi aport, </p><p>Can you share your menuconfig and kernel_menuconfig?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94565">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">stephen.wang</div>
					<div class="post-datetime">
						18 Sep 2009, 05:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>After using initramfs, I can boot without kernel panic , but system hangs after console showed &quot;Press CTRL-C for failsafe&quot; </p><p>Here is my bootup log</p><div class="codebox"><pre><code>## Booting image at bf050000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.30.6
   Created:      2009-09-18   2:07:16 UTC

   System Control Status = 0x00440000
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1236882 Bytes =  1.2 MB
   Load Address: 80000000
   Entry Point:  80000000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80000000) ...
## Giving linux memsize in MB, 32

Starting kernel ...

Linux version 2.6.30.6 (stephen) (gcc version 4.1.2) #24 Fri Sep 18 10:07:13 CST 2009
console [early0] enabled
CPU revision is: 0001964c (MIPS 24Kc)
Ralink RT3052   id:1 rev:3 running at 384.00 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600 rootfstype=squashfs
Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0001508c
Readback ErrCtl register=0001508c
NR_IRQS:48
PID hash table entries: 128 (order: 7, 512 bytes)
console handover: boot [early0] -&gt; real [ttyS1]
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29772k/32768k available (1709k kernel code, 2996k reserved, 301k data, 612k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 255.59 BogoMIPS (lpj=1277952)
Mount-cache hash table entries: 512
net_namespace: 476 bytes
NET: Registered protocol family 16
MIPS: machine is Generic Ralink board
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ? 2001-2006 Red Hat, Inc.
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A
physmap platform flash device: 00400000 at bf000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
cmdlinepart partition parsing not available
RedBoot partition parsing not available
ralink flash device: 0x400000 at 0x1f000000
Ralink SoC physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Creating 5 MTD partitions on &quot;Ralink SoC physically mapped flash&quot;:
0x000000000000-0x000000030000 : &quot;Bootloader&quot;
0x000000030000-0x000000040000 : &quot;Config&quot;
0x000000040000-0x000000050000 : &quot;Factory&quot;
0x000000050000-0x000000150000 : &quot;Kernel&quot;
0x000000150000-0x000000400000 : &quot;RootFS&quot;
i8042.c: i8042 controller self test timeout.
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 612k freed
- preinit -
Press CTRL-C for failsafe</code></pre></div><p>Any ideas?</p>											<p class="post-edited">(Last edited by <strong>stephen.wang</strong> on 18 Sep 2009, 05:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94611">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						18 Sep 2009, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>Hey APORT and STEPHEN,<br />Thanks for your sharing.<br />I really appreciate it.<br />if I keep INITRAMFS path directory empty, then it give same error like stephen got.(Press CTRL-C for failsafe)</p><p>And if I will give root-ramips directory path, it give same below error</p><p>Failed to execute /init<br />Failed to execute /etc/preinit.&nbsp; Attempting defaults...<br />Kernel panic - not syncing: No init found.&nbsp; Try passing init= option to kernel. </p><p>Dear APORT,<br />if possible, Please kindly share menuconfig and Kernel_menuconfig . </p><br /><p>Does anyone&nbsp; else have any idea?</p>											<p class="post-edited">(Last edited by <strong>aj.pattel888</strong> on 18 Sep 2009, 14:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94626">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						18 Sep 2009, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi -</p><p>I got a DIR-300 B1 with a Ralink RT3050 and I&#039;d like to compile a custom kernel for from trunk (R17604).</p><p>I selected &quot;Ralink RT288x/RT305x&quot; as Target System, but &quot;ramdisk&quot; is not an option in the Target/Image submenu. </p><p>Is there something I could do in order to have it available?</p><p>Any help will be greatly appreciated. Thanks in anticipation!</p><p>-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94651">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						19 Sep 2009, 15:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi Olecom,<br />Please select &quot;Advanced configuration options (for developers)&quot; ---&gt;&quot;Show broken platforms / packages &quot;</p><p>You will get&nbsp; subtarget&nbsp; and target profile menu,</p><p>Select Target as RT305x and subtarget profile is Default.<br />And select ramdisk from TARGET IMAGE MENU.</p><p>and then run MAKE V=99 FORCE=1, your build system will run fine.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94740">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						21 Sep 2009, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>Excellent! I appreciate your help, aj.pattel888. Thanks to your instructions, I have been able to compile the kernel.</p><p>I faced to the &quot;The chosen file is not a valid firmware image file&quot; error message when trying to upload the generated uImage through the D-Link webserver.</p><p>From u-boot (in command line), the &quot;tftpboot&quot; then &quot;bootm&quot; commands are also failing. Image is transfered OK to the device, but &quot;bootm&quot; stops with an error message:</p><div class="codebox"><pre><code>RT3052 # tftpboot
Mac to giga Mac mode
Using Eth0 (10/100-M) device
TFTP from server 10.10.10.3; our IP address is 192.168.0.1
Filename &#039;openwrt.lzma.bin&#039;.
Loading: #################################################################
Bytes transferred = 1619293 (18b55d hex)

RT3052 # bootm
## Booting image at 80100000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.30.7
   Created:      2009-09-21  15:33:01 UTC
 System Control Status = 0x03400000 
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1619229 Bytes =  1.5 MB
   Load Address: 80000000
   Entry Point:  80000000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... LZMA ERROR 1 - must RESET board to recover</code></pre></div><p>Any idea on what could be wrong?</p><p>The first choice in the u-boot menu (System Load Linux to SDRAM via TFTP) makes me more happy though: the dir-300 boots like a charm that way. I have no network, but it is probably just a matter of kernel modules in the kernel.</p><p>I wonder why the same image can load directly to SDRAM via TFTP but not in command line in u-boot.</p><p>PS: I tried with either no compression and LZMA compression for the Target/Image.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94767">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						22 Sep 2009, 10:08					</div>
				</div>
				<div class="post-content content">
					<p>Hey Olivier,<br />You are welcome,</p><p>Acutally plz refer my answer to stephen.wang about this issue.He also faced same problem.<br />Now we both stuck in initramfs problem.</p><p>by the way, which openwrt(from /trunk/bin directory) file you are running in your board?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p94771">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						22 Sep 2009, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi -</p><p>I used openwrt-ramips-uImage-initramfs.bin</p><p>Would it be possible to share our .config? I have uploaded mine at <a href="http://olecam.online.fr/dir-300-b2/rt305x.config">http://olecam.online.fr/dir-300-b2/rt305x.config</a><br />I did not change anything in kernel_menuconfig.</p><p>Actually, my DIR-300 just boots fine, but I&#039;m still not able to get networking enabled. </p><p>Here is my bootup log:</p><div class="codebox"><pre><code>Automatic boot of image at addr 0x80800000 ...
## Booting image at 80800000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.30.7
   Created:      2009-09-22   8:49:49 UTC

 System Control Status = 0x03400000
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    2154665 Bytes =  2.1 MB
   Load Address: 80000000
   Entry Point:  80000000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK

Starting kernel ...

Linux version 2.6.30.7 (olecam@getafix) (gcc version 4.1.2) #3 Tue Sep 22 10:49:
44 CEST 2009
console [early0] enabled
CPU revision is: 0001964c (MIPS 24Kc)
Ralink RT3052   id:1 rev:2 running at 320.00 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600 rootfstype=squashfs,jffs2
Primary instruction cache 16kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0006c8ff
Readback ErrCtl register=0006c8ff
NR_IRQS:48
PID hash table entries: 128 (order: 7, 512 bytes)
console handover: boot [early0] -&gt; real [ttyS1]
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 28856k/32768k available (1697k kernel code, 3912k reserved, 365k data, 1
476k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 212.99 BogoMIPS (lpj=1064960)
Mount-cache hash table entries: 512
net_namespace: 528 bytes
NET: Registered protocol family 16
MIPS: machine is Generic Ralink board
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
msgmni has been set to 56
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 1476k freed
- preinit -
Press CTRL-C for failsafe

Please press Enter to activate this console. PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (512 buckets, 2048 max)</code></pre></div><p>I tried to enable kmod-rt2x00-lib (from Wireless Drivers) but the build fails with a &quot;rt2x00lib.ko: No such file or directory&quot; message. TBH I&#039;m not sure that this module is the appropriate one.</p><p>Could you please provide me with your .config?</p><p>Thanks in anticipation.</p><p>-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95099">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						30 Sep 2009, 07:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stephen.wang wrote:</cite><blockquote><p>Hi all,</p><p>After using initramfs, I can boot without kernel panic , but system hangs after console showed &quot;Press CTRL-C for failsafe&quot; </p><p>Here is my bootup log</p><div class="codebox"><pre><code>## Booting image at bf050000 ...
   Image Name:   MIPS OpenWrt Linux-2.6.30.6
   Created:      2009-09-18   2:07:16 UTC

   System Control Status = 0x00440000
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1236882 Bytes =  1.2 MB
   Load Address: 80000000
   Entry Point:  80000000
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80000000) ...
## Giving linux memsize in MB, 32

Starting kernel ...

Linux version 2.6.30.6 (stephen) (gcc version 4.1.2) #24 Fri Sep 18 10:07:13 CST 2009
console [early0] enabled
CPU revision is: 0001964c (MIPS 24Kc)
Ralink RT3052   id:1 rev:3 running at 384.00 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600 rootfstype=squashfs
Primary instruction cache 32kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 16kB, 4-way, VIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0001508c
Readback ErrCtl register=0001508c
NR_IRQS:48
PID hash table entries: 128 (order: 7, 512 bytes)
console handover: boot [early0] -&gt; real [ttyS1]
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29772k/32768k available (1709k kernel code, 2996k reserved, 301k data, 612k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 255.59 BogoMIPS (lpj=1277952)
Mount-cache hash table entries: 512
net_namespace: 476 bytes
NET: Registered protocol family 16
MIPS: machine is Generic Ralink board
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ? 2001-2006 Red Hat, Inc.
msgmni has been set to 58
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 13) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 20) is a 16550A
physmap platform flash device: 00400000 at bf000000
physmap-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
cmdlinepart partition parsing not available
RedBoot partition parsing not available
ralink flash device: 0x400000 at 0x1f000000
Ralink SoC physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Creating 5 MTD partitions on &quot;Ralink SoC physically mapped flash&quot;:
0x000000000000-0x000000030000 : &quot;Bootloader&quot;
0x000000030000-0x000000040000 : &quot;Config&quot;
0x000000040000-0x000000050000 : &quot;Factory&quot;
0x000000050000-0x000000150000 : &quot;Kernel&quot;
0x000000150000-0x000000400000 : &quot;RootFS&quot;
i8042.c: i8042 controller self test timeout.
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Freeing unused kernel memory: 612k freed
- preinit -
Press CTRL-C for failsafe</code></pre></div><p>Any ideas?</p></blockquote></div><p>Hey Stephen,if you have found solution, plz share with us ,thank you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95608">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						9 Oct 2009, 00:29					</div>
				</div>
				<div class="post-content content">
					<p>Hmm... when I compile from kamikaze trunk I now get the same problem. Odd... this didn&#039;t happen last week.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95619">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						9 Oct 2009, 09:51					</div>
				</div>
				<div class="post-content content">
					<p>Hey aport,</p><p>if possible, can you please upload or send us config file and firmware of your last build?</p><p>also let us know if you find solution of this problem,</p><p>I am trying since last 10 days but no luck.</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95643">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						9 Oct 2009, 19:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aj.pattel888 wrote:</cite><blockquote><p>Hey aport,</p><p>if possible, can you please upload or send us config file and firmware of your last build?</p><p>also let us know if you find solution of this problem,</p><p>I am trying since last 10 days but no luck.</p><p>Thanks in advance.</p></blockquote></div><p>Here&#039;s an image and my buildroot .config. My kernel config is default.</p><p><a href="http://nexaira.org/nxa/openwrt-ramips-uImage-initramfs.bin">http://nexaira.org/nxa/openwrt-ramips-u … tramfs.bin</a></p><p><a href="http://nexaira.org/nxa/ramips-config">http://nexaira.org/nxa/ramips-config</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95759">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						12 Oct 2009, 13:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aport wrote:</cite><blockquote><p>Here&#039;s an image and my buildroot .config. My kernel config is default.</p><p><a href="http://nexaira.org/nxa/openwrt-ramips-uImage-initramfs.bin">http://nexaira.org/nxa/openwrt-ramips-u … tramfs.bin</a></p><p><a href="http://nexaira.org/nxa/ramips-config">http://nexaira.org/nxa/ramips-config</a></p></blockquote></div><p>Thanks you for that aport! Your image boots up on DLink DIR-300 B1, but&nbsp; &quot;ra2880_read_mac&quot; seems confused when the router boots from the flash memory:</p><p>System booted via Flash:<br /></p><div class="codebox"><pre><code>Please press Enter to activate this console. 
ra2880_read_mac: 00:00:00:00:00:00
GDMA1_MAC_ADRH -- : 0x00000000
GDMA1_MAC_ADRL -- : 0x00000000
ra2880_read_mac: 00:00:00:00:00:00
Ralink APSoC Ethernet Driver Initilization. v2.00  256 rx/tx descriptors allocated, mtu = 1500!
eth2 (): not using net_device_ops yet
ra2880_read_mac: 00:00:00:00:00:00
GDMA1_MAC_ADRH -- : 0x00000000
GDMA1_MAC_ADRL -- : 0x00000000
ra2880_read_mac: 00:00:00:00:00:00
PROC INIT OK!
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (512 buckets, 2048 max)</code></pre></div><p>System loaded to SDRAM via TFTP:<br /></p><div class="codebox"><pre><code>Please press Enter to activate this console. 
ra2880_read_mac: 00:26:5a:2f:86:c8
GDMA1_MAC_ADRH -- : 0x00000026
GDMA1_MAC_ADRL -- : 0x5a2f86c8
ra2880_read_mac: 00:26:5a:2f:86:c8
Ralink APSoC Ethernet Driver Initilization. v2.00  256 rx/tx descriptors allocated, mtu = 1500!
eth2 (): not using net_device_ops yet
ra2880_read_mac: 00:00:00:00:00:00
GDMA1_MAC_ADRH -- : 0x00000000
GDMA1_MAC_ADRL -- : 0x00000000
ra2880_read_mac: 00:00:00:00:00:00
PROC INIT OK!
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
nf_conntrack version 0.5.0 (512 buckets, 2048 max)</code></pre></div><p>As you can see, the first &quot;ra2880_read_mac&quot; is able to get the Mac Address of the device when the system is loaded to SDRAM via TFTP.</p><p>The network is not working but I suppose that you are still working on it.</p><p>&quot;ifconfig -a&quot; gives:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig -a
eth2      Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
          BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
          Interrupt:3 

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</code></pre></div><p>Thanks again for sharing your experience on the forum.</p><p>Best regards,<br />-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95760">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						12 Oct 2009, 13:37					</div>
				</div>
				<div class="post-content content">
					<p>BTW, any modifications on the file system are lost if the router is shutdowned/rebooted.</p><p>Is this a feature or will it be possible to deal with this in the future? Actually, I really need to being able to get modifications on the file system persistent. If there is no way to accomodate with this, I should probably consider to switch to different hardware.</p><p>Please tell me!</p><p>Thanks,<br />-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95768">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">aj.pattel888</div>
					<div class="post-datetime">
						12 Oct 2009, 19:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aport wrote:</cite><blockquote><div class="quotebox"><cite>aj.pattel888 wrote:</cite><blockquote><p>Hey aport,</p><p>if possible, can you please upload or send us config file and firmware of your last build?</p><p>also let us know if you find solution of this problem,</p><p>I am trying since last 10 days but no luck.</p><p>Thanks in advance.</p></blockquote></div><p>Here&#039;s an image and my buildroot .config. My kernel config is default.</p><p><a href="http://nexaira.org/nxa/openwrt-ramips-uImage-initramfs.bin">http://nexaira.org/nxa/openwrt-ramips-u … tramfs.bin</a></p><p><a href="http://nexaira.org/nxa/ramips-config">http://nexaira.org/nxa/ramips-config</a></p></blockquote></div><p>Thanks a lot aport.<br />Now I am able to build firmware and boot successfully on my ralink board.<br />Not able to get ethernet port or wifi working?</p><p>it gives mac 00:00:00:00:00:00</p><p>Does your openwrt firmware have ethernet &amp; RT2860 wifi driver?<br />.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95838">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						13 Oct 2009, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>olecam wrote:</cite><blockquote><p>BTW, any modifications on the file system are lost if the router is shutdowned/rebooted.</p><p>Is this a feature or will it be possible to deal with this in the future? Actually, I really need to being able to get modifications on the file system persistent. If there is no way to accomodate with this, I should probably consider to switch to different hardware.</p><p>Please tell me!</p><p>Thanks,<br />-- <br />Olivier</p></blockquote></div><p>There&#039;s no storage on that because it&#039;s an initramfs image and there is no flash driver present. </p><br /><p>If you would like to get up and running ASAP on a Ralink RT305x board I would recommend that you download the fonosfera sources and take a look at the&nbsp; fonera2n target. blogic has done a great job with support for that platform. Wireless, ethernet, flash, everything is working very well. The wi-fi driver is precompiled, of course, because it&#039;s proprietary Ralink code. But the functionality is there.</p><br /><p><a href="http://trac.fonosfera.org/fon-ng">http://trac.fonosfera.org/fon-ng</a></p><br /><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95839">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">aport</div>
					<div class="post-datetime">
						13 Oct 2009, 20:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aj.pattel888 wrote:</cite><blockquote><div class="quotebox"><cite>aport wrote:</cite><blockquote><div class="quotebox"><cite>aj.pattel888 wrote:</cite><blockquote><p>Hey aport,</p><p>if possible, can you please upload or send us config file and firmware of your last build?</p><p>also let us know if you find solution of this problem,</p><p>I am trying since last 10 days but no luck.</p><p>Thanks in advance.</p></blockquote></div><p>Here&#039;s an image and my buildroot .config. My kernel config is default.</p><p><a href="http://nexaira.org/nxa/openwrt-ramips-uImage-initramfs.bin">http://nexaira.org/nxa/openwrt-ramips-u … tramfs.bin</a></p><p><a href="http://nexaira.org/nxa/ramips-config">http://nexaira.org/nxa/ramips-config</a></p></blockquote></div><p>Thanks a lot aport.<br />Now I am able to build firmware and boot successfully on my ralink board.<br />Not able to get ethernet port or wifi working?</p><p>it gives mac 00:00:00:00:00:00</p><p>Does your openwrt firmware have ethernet &amp; RT2860 wifi driver?<br />.</p></blockquote></div><p>The image I had provided was the first build I made while attempting to use the ethernet driver provided by olecam. Looks like it doesn&#039;t work <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> Really no surprise there, the driver is old and the kernel on ramips is very new. I would forsee issues compiling the wireless driver against 2.6.30 as well.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95976">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">olecam</div>
					<div class="post-datetime">
						16 Oct 2009, 16:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aport wrote:</cite><blockquote><p>There&#039;s no storage on that because it&#039;s an initramfs image and there is no flash driver present. </p><p>If you would like to get up and running ASAP on a Ralink RT305x board I would recommend that you download the fonosfera sources and take a look at the&nbsp; fonera2n target. blogic has done a great job with support for that platform. Wireless, ethernet, flash, everything is working very well. The wi-fi driver is precompiled, of course, because it&#039;s proprietary Ralink code. But the functionality is there.</p><p><a href="http://trac.fonosfera.org/fon-ng">http://trac.fonosfera.org/fon-ng</a></p><p>Thanks.</p></blockquote></div><p>Hi -</p><p>Well, I have been able to deal with the fonera sources and I confirm that everything is working well. Thanks!</p><p>Anyway, I still face to a problem with the vlans. Actually, I would like to get one of the LAN ports to be attached to a 3th vlan for a DMZ. This seems to be configurable with the help of the &quot;switch&quot; command:</p><div class="codebox"><pre><code>switch vlan set 0 1 0000111
switch vlan set 1 2 0111011
switch vlan set 2 3 1000111</code></pre></div><p>This is OK for the packets sent from the router but for some reason the received packets are always tagged to be originated from the vlan1 instead of vlan3.</p><p>I have enabled VLAN_DEBUG and I can confirm that all frames received by the 4 LAN ports are tagged to vlan1 when they come to the &quot;vlan_skb_recv&quot; function (defined in &quot;vlan_dev.c&quot;, which is part if the 8021q sources), regardless of the &quot;switch vlan set&quot; configuration. </p><p>This seems to be (hard)coded somewhere but despite of many hours of search I haven&#039;t been able to find the which part of code does that.</p><p>This is making me totally crazy!!! Any help/idea/pointer/suggestion/... will be GREATLY appreciated! </p><p>Thanks!</p><p>-- <br />Olivier</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p95982">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">herbswanson</div>
					<div class="post-datetime">
						16 Oct 2009, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>I&#039;ve found this thread to be quite useful. I have a Belkin f5d8235-4 router that uses the ra3052f chip for cpu/radio and a RTL8366RB chip for the gigabit switch. I&#039;ve checkout the lasted svn and used the .config file provided by olecam on Sep 22 2009. It works and I boot up into linux without the network or the wireless. What is the current status, what else is working (other than the linux) and what needs work (where can I contribute). Any guidance would be helpful.</p><p>Regards</p><p>Herb Swanson</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=21782&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>