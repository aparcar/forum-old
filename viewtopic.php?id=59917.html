<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [Solved] Chaos Calmer - various problems: Huawei E220, mode switch,...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 13 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p293550">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						26 Sep 2015, 17:41					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I was just updating my VPN (backup and testing) router, a TP-Link TL-WR1043ND with Chaos Calmer - the chaos was amplified in the following issues:</p><p>Edit: Problem apparently solved by reactivating the CD-Rom mode. Modeswitch does not seem to fully recognize the E220 otherwise.<br />1. echo &#039;12d1 1003 ff&#039; &gt; /sys/bus/usb-serial/drivers/generic/new_id<br />2. ifdown WWAN (if already configured).<br />3. echo&nbsp; &quot;AT^U2DIAG=255&quot; &gt;/dev/ttyUSB0<br />4. reboot</p><p>¹ <a href="http://www.techytalk.info/disable-virtual-cd-rom-drive-with-built-in-software-on-huawei-and-zte-gsm-modem-devices/">http://www.techytalk.info/disable-virtu … m-devices/</a><br />² <a href="https://www.semanticlab.net/index.php/UMTS_with_OpenWRT">https://www.semanticlab.net/index.php/UMTS_with_OpenWRT</a></p><p>/* Huawei E220 does not work out of the box anymore. Huaweiaktbbo was removed, the JSON based mode switching does not seem to do anything, sdparm is missing in the package repository, usb-mode.json is not well documented (is it documented at all?) and the only way to bring the E220 to acting like a modem is by manually adding the vendor and product id to the sys-tree as described in the wiki: <a href="http://wiki.openwrt.org/doc/recipes/3gdongle#huawei_e220chaos_calmer">http://wiki.openwrt.org/doc/recipes/3gd … aos_calmer</a><br />*/</p><p>* Furthermore the miredo packages are missing in the package repository. Someone here in the forums said, the code wasn&#039;t maintained anymore. Well - <a href="http://git.remlab.net/gitweb/?p=miredo.git:">http://git.remlab.net/gitweb/?p=miredo.git:</a> the latest code is from august 2014 which is more actual than the news on <a href="http://www.remlab.net/miredo/">http://www.remlab.net/miredo/</a> - does this already indicate, it&#039;s unmaintained?</p><p>In order to solve the first problem, I think I&#039;d need to have usbmode switch telling the kernel which drivers to load after a modeswitch event -&nbsp; &nbsp; <br />is there a way to execute the following command from within usb-mode.json (via rpcd)<br /> echo &#039;12d1 1003 ff&#039; &gt; /sys/bus/usb-serial/drivers/generic/new_id<br />?</p><p>Thx!</p><p>EDIT:<br />Huawei E220, E303s-2, TP-LINK MA260 fixed: <a href="http://technicalexperiments.blogspot.co.at/2015/10/huawei-e303-in-fallback-mode-openwrt.html">http://technicalexperiments.blogspot.co … enwrt.html</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=46725">https://forum.openwrt.org/viewtopic.php?id=46725</a></p><p>Using socat for tunneling instead of miredo; other mechanism, not compatible:<br /><a href="http://technicalexperiments.blogspot.co.at/2015/10/do-you-know-socat-multipurpose-relay.html">http://technicalexperiments.blogspot.co … relay.html</a></p><p>Still I&#039;d wish miredo was included with OpenWRT release package repos.</p>											<p class="post-edited">(Last edited by <strong>epek</strong> on 7 Nov 2015, 12:45)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>