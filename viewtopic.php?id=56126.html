<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WR1043ND intermittent reboots</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p267794">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						5 Mar 2015, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a TL-WR1043NDwhich exhibits intermittent reboots under certain conditions. When I try to fully load the WLAN it will reboot almost guaranteed (say transfer a file via SMB from one wired GbE client to a WLAN client). But also under some other usage scenarios where the load isn&#039;t particularly high it reboots occasionally. Light web browsing and also downloading from WAN works quite stable so far.</p><p>I already tried to log to a USB drive to get some ideas about the cause, but the results were not very helpful so far.</p><p>The problem occurred both on the BB release as well as the latest CC trunk (r44541).</p><p>I&#039;d be grateful for any advice to debug and potentially fix this issue. I also thought about it being a hardware issue, but I&#039;m not sure how I could verify that.</p><p>Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267878">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						6 Mar 2015, 14:23					</div>
				</div>
				<div class="post-content content">
					<p>i had one dowing that it was the power supply. put another one on and fixed it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267883">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">metin</div>
					<div class="post-datetime">
						6 Mar 2015, 15:01					</div>
				</div>
				<div class="post-content content">
					<p>I agree with ckm. Replace power supply</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267892">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						6 Mar 2015, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>Any idea where I can get a compatible power supply? Is the DC barrel a standard sized one for 12V DC? I know the PSU needs to be able to deliver at least 1.5A in this case, more shouldn&#039;t hurt, but obviously the barrel must fit.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267896">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						6 Mar 2015, 16:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>Is the DC barrel a standard sized one for 12V DC?</p></blockquote></div><p>No, there are several types out there with different outer and inner diameter and length.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268048">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">metin</div>
					<div class="post-datetime">
						7 Mar 2015, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>you can cut off the cable of your old power supply and connect it to antoher 12V DC with enough Ampere. use Screw terminals if you can&#039;t solder</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268267">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						10 Mar 2015, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>I was able to run a few more tests with PSUs borrowed from external HDDs that have the proper specs (12V, min 1.5A) and a fitting barrel. Unfortunately the behavior remains. Given I have tried two other PSUs (so three in total with the original one), I&#039;d say it&#039;s not the PSU but something else.</p><p>I also ran further tests and found that when the WiFi is in HT20 mode it takes longer for the router to reboot (it would steadily transfer at around 70% WLAN load, so 5-6MB/s). In HT40 mode it would reboot almost instantly after starting a file transfer (it would shortly transfer at 70% WLAN load with around 12MB/s). Given there are several threads both in this and Gargoyle forums discussing problems with HT40 on the WR1043ND (for example here: <a href="https://forum.openwrt.org/viewtopic.php?id=42539)">https://forum.openwrt.org/viewtopic.php?id=42539)</a> I wonder if this is some nasty software bug.</p><p>It could still be a hardware issue but in this case I suppose it is some onboard component and not the PSU.</p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268290">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						10 Mar 2015, 23:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>I was able to run a few more tests with PSUs borrowed from external HDDs that have the proper specs (12V, min 1.5A) and a fitting barrel. Unfortunately the behavior remains. Given I have tried two other PSUs (so three in total with the original one), I&#039;d say it&#039;s not the PSU but something else.</p><p>I also ran further tests and found that when the WiFi is in HT20 mode it takes longer for the router to reboot (it would steadily transfer at around 70% WLAN load, so 5-6MB/s). In HT40 mode it would reboot almost instantly after starting a file transfer (it would shortly transfer at 70% WLAN load with around 12MB/s). Given there are several threads both in this and Gargoyle forums discussing problems with HT40 on the WR1043ND (for example here: <a href="https://forum.openwrt.org/viewtopic.php?id=42539)">https://forum.openwrt.org/viewtopic.php?id=42539)</a> I wonder if this is some nasty software bug.</p><p>It could still be a hardware issue but in this case I suppose it is some onboard component and not the PSU.</p><p>Any ideas?</p></blockquote></div><p>does it reboot or you just lose wifi connection? you can check uptime to see</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268304">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						11 Mar 2015, 01:36					</div>
				</div>
				<div class="post-content content">
					<p>It reboots as is evident by uptime and also a disconnected wired connection.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268316">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						11 Mar 2015, 04:07					</div>
				</div>
				<div class="post-content content">
					<p>Few things to check<br />1) memtest check is the RAM error free?<br />2) Harddisk Power Check is harddisk independently powered?<br />3) any &#039;special&#039; stuff done to the SoC like overclocking ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268322">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						11 Mar 2015, 04:47					</div>
				</div>
				<div class="post-content content">
					<p>1) How do I run memtest on openwrt?<br />2) I&#039;m puzzled about this one, there is no HDD involved. I just took a compatible PSU from a 3.5&quot; external HDD to power the router to rule out the original PSU is at fault as suggested by other users. Since the behavior didn&#039;t change I went back to using the original PSU.<br />3) No.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268323">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						11 Mar 2015, 04:55					</div>
				</div>
				<div class="post-content content">
					<p>opkg update<br />opkg install memtester<br />memtester 32M</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268326">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ckm</div>
					<div class="post-datetime">
						11 Mar 2015, 05:07					</div>
				</div>
				<div class="post-content content">
					<p>TRY this build it mite fix it.</p><p><a href="http://s000.tinyupload.com/?file_id=96304283793677047846">http://s000.tinyupload.com/?file_id=963 … 3677047846</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268334">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						11 Mar 2015, 06:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>It reboots as is evident by uptime and also a disconnected wired connection.</p></blockquote></div><p>id go for overheating try G only standard for a while or wired only or lower wifi power</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268379">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						11 Mar 2015, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>memtester wouln&#039;t run with 32M because only around 14MB are free. But when i start it with smaller memsizes that are available it would finish testing loops ok, with 99% CPU load at this time.</p><p>@ckm: Will do in a few days. Is there some changelog available what you modified?</p><p>I set it to HT20 for now and it seems to be more stable but I have seen it reboot at least once under load as well. As if that reduces the odds of that happening. With HT40 any high wifi load will instantly make it reboot. Wouldn&#039;t overheating take a while to have an effect?</p><p>Also running only in G mode might help but isn&#039;t useful, then I can go straight back to the good old WRT54 ;-)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268386">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						11 Mar 2015, 14:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>...<br />Also running only in G mode might help but isn&#039;t useful, then I can go straight back to the good old WRT54 ;-)</p></blockquote></div><p>for debugging it would help..<br />try this <a href="http://www.gargoyle-router.com/phpbb/viewtopic.php?f=11&amp;t=4667">http://www.gargoyle-router.com/phpbb/vi … amp;t=4667</a><br />i did that 12 days ago and no drop since but im running G mode</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p268514">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						12 Mar 2015, 15:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>makarel wrote:</cite><blockquote><div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>...<br />Also running only in G mode might help but isn&#039;t useful, then I can go straight back to the good old WRT54 ;-)</p></blockquote></div><p>for debugging it would help..<br />try this <a href="http://www.gargoyle-router.com/phpbb/viewtopic.php?f=11&amp;t=4667">http://www.gargoyle-router.com/phpbb/vi … amp;t=4667</a><br />i did that 12 days ago and no drop since but im running G mode</p></blockquote></div><p>The setting mentioned in the link is not available on my router.</p><p>It seems fairly stable now with HT20, so I will leave it at that. No need to go back to HT disabled for now. But optimally would be working HT40 operation.</p>											<p class="post-edited">(Last edited by <strong>SCF</strong> on 12 Mar 2015, 15:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269118">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						18 Mar 2015, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>One more update on this issue from my side. In the meantime I got another router and then experimented with the stock firmware on the TL-WR1043ND. I flashed a stripped stock image and did the same WLAN to LAN SMB transfer test. With the stock firmware it didn&#039;t reboot at all and worked stable.</p><p>Then a bit annoyed about this behavior I flashed the 14.07 BB factory image and repeated the test. Now it worked stable as well. I have no idea what caused the behavior before, but it was clearly reproducable. The only difference I could spot is that before I initially installed 12.09 AA and later used a sysupgrade image to upgrade to 14.07 BB. Could it be possible that any leftover configuration caused this behavior? Or could it be that somehow parts of the firmware got corrupted and now that I reflashed this corruption is gone? I&#039;m merely asking for better understanding and also so other people could better understand such issues if encountered in the future.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269170">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						18 Mar 2015, 23:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SCF wrote:</cite><blockquote><p>... The only difference I could spot is that before I initially installed 12.09 AA and later used a sysupgrade image to upgrade to 14.07 BB. Could it be possible that any leftover configuration caused this behavior? Or could it be that somehow parts of the firmware got corrupted and now that I reflashed this corruption is gone? I&#039;m merely asking for better understanding and also so other people could better understand such issues if encountered in the future.</p></blockquote></div><p><a href="https://forum.openwrt.org/viewtopic.php?id=34572">https://forum.openwrt.org/viewtopic.php?id=34572</a><br />seems the data partition doesnt get erased in case of sysupgrade so you have settings from old firmware</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p269924">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">SCF</div>
					<div class="post-datetime">
						25 Mar 2015, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>I have one final update on the matter. After trying to use the router again the same issue came up again. This time I was also able to reproduce it using the stock firmware multiple times. It seemed to be a weird issue that&#039;s somewhat linked to overheating of some component as it takes a while till it happens especially if the router was cold-booted after sitting around a while.</p><p>I just wanted to share this with the community, so people aren&#039;t afraid of using sysupgrade image for no good reason.</p><p>Since there was one year left on the warranty I now try to RMA it.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>