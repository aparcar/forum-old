<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWrt as IPSec VPN client (Ikev2)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p368415">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dropmeamail</div>
					<div class="post-datetime">
						18 Nov 2017, 22:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have been trying to get my router to work as a VPN client using hide.me VPN service following their description here:<br /><a href="http://hide.me/en/vpnsetup/ubuntu/ikev2/">hide.me/en/vpnsetup/ubuntu/ikev2/</a><br />I am aware that this may not be the correct setup for OpenWrt, but I am too novice to see what should be changed here...</p><p>Currently I get the following error when starting the VPN:<br /><em>root@OpenWrt:~# ipsec up hide-nl<br />no files found matching &#039;/etc/strongswan.d/*.conf&#039;<br />initiating IKE_SA hide-nl[1] to 109.201.137.41<br />generating IKE_SA_INIT request 0 [ SA KE No N(NATD_S_IP) N(NATD_D_IP) N(HASH_ALG) ]<br />sending packet: from 192.168.1.56[500] to 109.201.137.41[500] (638 bytes)<br />received packet: from 109.201.137.41[500] to 192.168.1.56[500] (501 bytes)<br />parsed IKE_SA_INIT response 0 [ SA KE No N(NATD_S_IP) N(NATD_D_IP) CERTREQ N(HASH_ALG) N(MULT_AUTH) ]<br />local host is behind NAT, sending keep alives<br />received 2 cert requests for an unknown ca<br />no IDi configured, fall back on IP address<br />establishing CHILD_SA hide-nl<br />generating IKE_AUTH request 1 [ IDi CPRQ(ADDR) SA TSi TSr N(MOBIKE_SUP) N(ADD_4_ADDR) N(ADD_6_ADDR) N(MULT_AUTH) N(EAP_ONLY) ]<br />sending packet: from 192.168.1.56[4500] to 109.201.137.41[4500] (380 bytes)<br />received packet: from 109.201.137.41[4500] to 192.168.1.56[4500] (4588 bytes)<br />parsed IKE_AUTH response 1 [ IDr CERT CERT AUTH EAP/REQ/ID ]<br />building CRED_CERTIFICATE - X509 failed, tried 1 builders<br />building CRED_CERTIFICATE - X509 failed, tried 1 builders<br />no trusted RSA public key found for &#039;C=MY, ST=Wilayah Persekutuan, L=Labuan, O=eVenture Limited, CN=*.hide.me&#039;<br />generating INFORMATIONAL request 2 [ N(AUTH_FAILED) ]<br />sending packet: from 192.168.1.56[4500] to 109.201.137.41[4500] (76 bytes)<br />establishing connection &#039;hide-nl&#039; failed<br /></em></p><p>Perhaps the following issue (I have the same for probably all certs, so the srror list is actually much longer) when starting ipsec are related to the problem I have:<br />ipsec restart<br /><em><br />....<br />Sat Nov 18 20:30:58 2017 daemon.info syslog: 00[DMN] Starting IKE charon daemon (strongSwan 5.3.3, Linux 3.18.23, mips)<br />Sat Nov 18 20:30:59 2017 daemon.info syslog: 00[CFG] loading ca certificates from &#039;/etc/ipsec.d/cacerts&#039;<br />Sat Nov 18 20:30:59 2017 daemon.info syslog: 00[LIB] building CRED_CERTIFICATE - X509 failed, tried 1 builders<br />Sat Nov 18 20:30:59 2017 daemon.info syslog: 00[CFG]&nbsp; &nbsp;loading ca certificate from &#039;/etc/ipsec.d/cacerts/cd58d51e.0&#039; failed<br />.....<br /></em></p><p>It seems to me that there is an issue with I have been googling for quite a while but with no success.</p><p>Does anyone have any idea what could be wrong?</p><p>Thanks a lot in advance!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>