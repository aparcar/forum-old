<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 11 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=13.html">13</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p176950">
				<div class="post-metadata">
					<div class="post-num">Post #251</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						5 Sep 2012, 12:58					</div>
				</div>
				<div class="post-content content">
					<p>I upgraded from r33203, which I installed on or around the 2012-08-17.&nbsp; This worked very well.</p><p>I updated on the 2012-08-30 to r33275 and suddenly I cannot access my SMTPS or IMAP servers from the internet.</p><p>I will switch back to the r33203 version and see what happens.</p><p>TTYL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176953">
				<div class="post-metadata">
					<div class="post-num">Post #252</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 Sep 2012, 13:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zzz2002 wrote:</cite><blockquote><p>I upgraded from r33203, which I installed on or around the 2012-08-17.&nbsp; This worked very well.</p><p>I updated on the 2012-08-30 to r33275 and suddenly I cannot access my SMTPS or IMAP servers from the internet.</p></blockquote></div><p>Between those versions there should be nothing special in the trunk:<br /><a href="https://dev.openwrt.org/changeset?new=33275@trunk&amp;old=33203@trunk">https://dev.openwrt.org/changeset?new=3 … 3203@trunk</a><br /><a href="https://dev.openwrt.org/changeset?new=33275@packages&amp;old=33203@packages">https://dev.openwrt.org/changeset?new=3 … 3@packages</a></p><p>I think that I made mainly some 3G/USB related package selection changes to my own code in that time.<br />The only other thing is compiling dhcpv6 support into dnsmasq, the DHCP service in Openwrt. But that should have no impact on ipv4 traffic and would require manual config to turn dhcpv6 on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176977">
				<div class="post-metadata">
					<div class="post-num">Post #253</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						5 Sep 2012, 17:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi, well I switched back to r33203 and everything is working again.</p><p>From my perspective, it would appear that port 993 (IMAPS) was blocked when I used r33275. There may also have been a problem with port 587 (SMTP submit (SMTPS)), however this may have been more a user perception problem than a real one, I cannot be 100% sure on this one.</p><p>So what do we need do to determine what broke!</p>											<p class="post-edited">(Last edited by <strong>zzz2002</strong> on 5 Sep 2012, 17:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p176999">
				<div class="post-metadata">
					<div class="post-num">Post #254</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 Sep 2012, 20:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zzz2002 wrote:</cite><blockquote><p>From my perspective, it would appear that port 993 (IMAPS) was blocked when I used r33275.</p></blockquote></div><p>I tested setting a server to port 993 in a a LAN host behind NAT, and after configuring the port-forward, the incoming traffic reached the server quite normally. So, I wonder if that may have been something in your config.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177022">
				<div class="post-metadata">
					<div class="post-num">Post #255</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						5 Sep 2012, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>I do not use NAT for my servers they all have fixed public IPs. n.n.n.177/28. I assume that because of this I did not need port forwarding, at least I had not needed it in the past.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177116">
				<div class="post-metadata">
					<div class="post-num">Post #256</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						6 Sep 2012, 15:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using 33311 with port 993 and no issues here. Have you tried that newest build?</p><p>I can&#039;t understand why you think you don&#039;t need port forwarding. NAT only protects outgoing connections.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177137">
				<div class="post-metadata">
					<div class="post-num">Post #257</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						6 Sep 2012, 19:26					</div>
				</div>
				<div class="post-content content">
					<p>I have not needed it to date, and it seems a llittle redundant to port forward something like 99.99.99.178 port 993 to 99.99.99.178 port 993.</p><p>My network config<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config interface &#039;servers&#039;
    option proto &#039;static&#039;
    option ifname &#039;eth0.2&#039;
    option ipaddr &#039;99.99.99.177&#039;
    option netmask &#039;255.255.255.240&#039;
    option ip6addr &#039;2001:dead:dead:10::1/64&#039;

config interface &#039;guest&#039;
    option ifname &#039;wlan0-1&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;192.168.20.1&#039;
    option netmask &#039;255.255.255.240&#039;
    option ip6addr &#039;2001:dead:dead:20::1/64&#039;

config interface &#039;lan&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.224&#039;
    option ip6addr &#039;2001:dead:dead:30::1/64&#039;
    option type &#039;bridge&#039;
    option _orig_ifname &#039;eth0.1&#039;
    option _orig_bridge &#039;true&#039;
    option ifname &#039;eth0.1&#039;
    option ipaddr &#039;192.168.30.1&#039;

config interface &#039;wan&#039;
    option ifname &#039;eth1&#039;
    option password &#039;password&#039;
    option username &#039;me@someisp.net&#039;
    option proto &#039;pppoe&#039;

config interface &#039;henet&#039;
    option proto &#039;6in4&#039;
    option peeraddr &#039;88.88.88.58&#039;
    option ip6addr &#039;2001:dead:dead::2/64&#039;
    option tunnelid &#039;tunnelid&#039;
    option username &#039;he-net-userid&#039;
    option password &#039;password&#039;

config switch
    option name &#039;rtl8366s&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;
    option blinkrate &#039;2&#039;
    option enable_vlan4k &#039;1&#039;
    option max_length &#039;3&#039;

config switch_vlan
    option device &#039;rtl8366s&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 1 5t&#039;

config switch_vlan
    option device &#039;rtl8366s&#039;
    option vlan &#039;2&#039;
    option ports &#039;2 3 5t&#039;

config switch_port
    option device &#039;rtl8366s&#039;
    option port &#039;1&#039;
    option led &#039;6&#039;

config switch_port
    option device &#039;rtl8366s&#039;
    option port &#039;2&#039;
    option led &#039;9&#039;

config switch_port
    option device &#039;rtl8366s&#039;
    option port &#039;5&#039;
    option led &#039;2&#039;</code></pre></div><p>and my firewall <br /></p><div class="codebox"><pre><code>config rule
    option target &#039;ACCEPT&#039;
    option name &#039;6in4&#039;
    option family &#039;ipv4&#039;
    option proto &#039;41&#039;
    option src &#039;wan&#039;

config rule
    option target &#039;ACCEPT&#039;
    option name &#039;ICMPv6&#039;
    option family &#039;ipv6&#039;
    option proto &#039;icmp&#039;
    list icmp_type &#039;router-solicitation&#039;
    list icmp_type &#039;router-advertisement&#039;
    list icmp_type &#039;neighbour-solicitation&#039;
    list icmp_type &#039;neighbour-advertisement&#039;
    option src &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;udp&#039;
    option dest_port &#039;53 67 123&#039;
    option name &#039;Input&#039;
    option src &#039;guest&#039;

config rule
    option target &#039;ACCEPT&#039;
    option dest_port &#039;22 23 80&#039;
    option proto &#039;tcp&#039;
    option name &#039;Router-Admin-Access&#039;
    option src &#039;lan&#039;

config rule
    option target &#039;ACCEPT&#039;
    option name &#039;DNS&#039;
    option proto &#039;udp&#039;
    option dest_port &#039;53&#039;
    option src &#039;*&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option dest_port &#039;53&#039;
    option proto &#039;udp&#039;
    option name &#039;DNS&#039;
    option dest &#039;wan&#039;
    option src &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option dest_port &#039;80 443&#039;
    option proto &#039;tcp&#039;
    option name &#039;HTTP(S)&#039;
    option src &#039;*&#039;
    option dest &#039;wan&#039;

config rule
    option target &#039;ACCEPT&#039;
    option name &#039;HTTP(S)&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;80 443&#039;
    option src &#039;*&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;587 993&#039;
    option name &#039;eMail - server2&#039;
    option src &#039;wan&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;587 993&#039;
    option name &#039;eMail&#039;
    option src &#039;lan&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option name &#039;SMTP&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;25&#039;
    option src &#039;wan&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;25&#039;
    option name &#039;SMTP&#039;
    option dest &#039;wan&#039;
    option src &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option name &#039;NTP&#039;
    option dest_port &#039;123&#039;
    option proto &#039;udp&#039;
    option dest &#039;wan&#039;
    option src &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;993&#039;
    option name &#039;IMAPS&#039;
    option dest &#039;servers&#039;
    option src &#039;guest&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;udp&#039;
    option name &#039;Input&#039;
    option dest_port &#039;53 67 123 1900&#039;
    option src &#039;lan&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;22 23&#039;
    option name &#039;Server-Admin-Access&#039;
    option src &#039;lan&#039;
    option dest &#039;servers&#039;

config defaults
    option syn_flood &#039;1&#039;
    option drop_invalid &#039;1&#039;
    option input &#039;DROP&#039;
    option output &#039;DROP&#039;
    option forward &#039;DROP&#039;

config zone
    option masq &#039;1&#039;
    option mtu_fix &#039;1&#039;
    list masq_src &#039;!servers&#039;
    list masq_dest &#039;!servers&#039;
    option conntrack &#039;1&#039;
    option forward &#039;DROP&#039;
    option input &#039;DROP&#039;
    option output &#039;ACCEPT&#039;
    option name &#039;wan&#039;
    option network &#039;henet wan&#039;

config zone
    option network &#039;lan&#039;
    option output &#039;ACCEPT&#039;
    option input &#039;ACCEPT&#039;
    option forward &#039;DROP&#039;
    option name &#039;lan&#039;

config zone
    option output &#039;ACCEPT&#039;
    option network &#039;servers&#039;
    option forward &#039;DROP&#039;
    option input &#039;DROP&#039;
    option name &#039;servers&#039;

config zone
    option output &#039;ACCEPT&#039;
    option network &#039;guest&#039;
    option forward &#039;DROP&#039;
    option input &#039;ACCEPT&#039;
    option name &#039;guest&#039;

config include
    option path &#039;/etc/firewall.user&#039;

config forwarding
    option dest &#039;wan&#039;
    option src &#039;guest&#039;

config forwarding
    option dest &#039;wan&#039;
    option src &#039;lan&#039;

config forwarding
    option dest &#039;servers&#039;
    option src &#039;lan&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177196">
				<div class="post-metadata">
					<div class="post-num">Post #258</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						7 Sep 2012, 05:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zzz2002 wrote:</cite><blockquote><p>I have not needed it to date, and it seems a llittle redundant to port forward something like 99.99.99.178 port 993 to 99.99.99.178 port 993.</p><p>My network config<br /></p><div class="codebox"><pre><code>...
config interface &#039;servers&#039;
    option proto &#039;static&#039;
    option ifname &#039;eth0.2&#039;
    option ipaddr &#039;99.99.99.177&#039;
    option netmask &#039;255.255.255.240&#039;
    option ip6addr &#039;2001:dead:dead:10::1/64&#039;</code></pre></div><p>and my firewall <br /></p><div class="codebox"><pre><code>...
config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;587 993&#039;
    option name &#039;eMail - server2&#039;
    option src &#039;wan&#039;
    option dest &#039;servers&#039;

config rule
    option target &#039;ACCEPT&#039;
    option proto &#039;tcp&#039;
    option dest_port &#039;587 993&#039;
    option name &#039;eMail&#039;
    option src &#039;lan&#039;
    option dest &#039;servers&#039;</code></pre></div></blockquote></div><p>You&#039;re using a firewall rule and a network forwarding target, which is a bit different from my config. But ... are both rules not working, i.e. is it your lan, wan or both that need the port forward?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177249">
				<div class="post-metadata">
					<div class="post-num">Post #259</div>
					<div class="post-author">zzz2002</div>
					<div class="post-datetime">
						7 Sep 2012, 15:15					</div>
				</div>
				<div class="post-content content">
					<p>taking a look at the code I submitted I see that I have a duplicate firewall rule. Looking back in the admin logs I see that at one time access to ports 587 &amp; 993 was restricted to traffic routed to the mail servers only, ie there was an allowed address line that appears to have been removed. however, as this was something like 5 months ago and everything worked without it I am not sure that this is the problem.</p><p>Everything from inside the &quot;lan&quot; seems to be working , no problems that I am aware of.</p><p>The problem is that if I try to get my email while I am on the road. It would appear that I can not get from the WAN to the Servers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177655">
				<div class="post-metadata">
					<div class="post-num">Post #260</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						10 Sep 2012, 18:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>There seems to a be a bug in USB hotplug unmounting, which prevents some USB drives being logically unmounted when they are removed. That will lead into mount problems when a disk is attached the next time. I have added a short-term fix to my build while waiting the devs figure out a more permanent solution.</p></blockquote></div><p>Patch for that has been added with r33357, so I have dropped my own patch for the issue.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p177968">
				<div class="post-metadata">
					<div class="post-num">Post #261</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						12 Sep 2012, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>Trunk 33379: usb-modeswitch updated to 1.2.4 (it is not yet in the main Openwrt repository)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p179465">
				<div class="post-metadata">
					<div class="post-num">Post #262</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Sep 2012, 19:50					</div>
				</div>
				<div class="post-content content">
					<p>I have removed the haveged package that I used for increasing hardware entropy for /dev/random, as r33559 finally declares bug #9631 closed and increased kernel support for entropy.<br /><a href="https://dev.openwrt.org/changeset/33559">https://dev.openwrt.org/changeset/33559</a><br /><a href="https://dev.openwrt.org/ticket/9631">https://dev.openwrt.org/ticket/9631</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180136">
				<div class="post-metadata">
					<div class="post-num">Post #263</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						6 Oct 2012, 14:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>I will probably stop doing Backfire builds soon, as there have been almost no changes lately and as the trunk &quot;Attitude Adjustment&quot; nears release.<br />...<br />After the release AA will most likely be the new stable branch, and I will probably build both AA and the new trunk from that point onward. Not quite sure yet. Depends a bit from the exact SVN branching after the forthcoming AA release.</p></blockquote></div><p>Attitude Adjustment 12.09 release branch has been created yesterday in the SVN source code repository. As of today, the AA source code is identical to Trunk except the version ID strings. </p><p>As long as AA and Trunk are identical, I will probably build only AA. Trunk&#039;s kernel version will probably be bumped up rather soon, as Linux 3.6 has been released by now. After that change it will make more sense to build also new Trunk versions. Trunk has not yet been renamed for the next release, but that will probably be done soon.</p><p>Backfire 10.03.SVN r33275 will remain as my final Backfire build.</p><p>Current versions:<br />Attitude Adjustment 12.09 beta2 SVN r33629&nbsp; (<a href="http://koti.welho.com/hnyman1/Openwrt/attitude-r33629-2012-10-06/">http://koti.welho.com/hnyman1/Openwrt/a … 012-10-06/</a>)<br />(Trunk SVN r33618, not yet updated after the Trunk / Attitude Adjustment separation)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180162">
				<div class="post-metadata">
					<div class="post-num">Post #264</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						7 Oct 2012, 15:48					</div>
				</div>
				<div class="post-content content">
					<p>I have wondered since ages, where does the initial date &amp; time after a firmware flash come from. For me that date has been 09 Sep 2011 for a while. I thought that it might be something related to u-boot or Linux kernel or something in the core Openwrt system and have searched for documentation. But I couldn&#039;t figure it out :-(</p><p>Then after the Attitude Adjustment branch was created two days ago and I built the first firmware with that, I noticed that the router&#039;s initial system date was now 05 Oct 2012. But there was supposedly no difference in the source code between trunk and AA branch, or between Luci trunk and Luci 0.11. What the hell? Where is the new date coming from?</p><p>I figured out that is must be somehow related to the timestamp of some file in my build host, as the date (and time) matched the time when I had set up the new AA and Luci 0.11 sources. I reverted to brute force and recursively listed all files in my buildhost and looked for a date/time match between the initial system date and files there. Finally I found a file called &quot;luci_fixtime&quot; in Luci sources (/luci/trunk/modules/admin-core/root/etc/init.d/luci_fixtime). That file&#039;s timestamp matched the &quot;inital system date&quot; respectively in my trunk and in AA. So that must be it.<br /><a href="http://luci.subsignal.org/trac/browser/luci/trunk/modules/admin-core/root/etc/init.d/luci_fixtime">http://luci.subsignal.org/trac/browser/ … ci_fixtime</a></p><p>It gets copied to /etc/init.d/luci_fixtime in the final firmware.</p><p>That file is used to store the current date &amp; time to in a warm reboot. But initially it uses its own date, coming directly from the build host. That part is not documented anywhere to my knowledge, but after finding the file and reading it, it can be figured out. Changing the date/time (e.g. with &quot;touch&quot;) enables me to set the initial date &amp; time for a firmware.</p><p>The file had last time been modified in SVN on 8 Sep 2011 and I had svn updated it on 9 Sep 2011, so 9 Sep 2011 was the initial date for my trunk. </p><p>That file is only in the full Luci sources, not in the contrib/package/luci set included in a normal build. But as I have the full Luci source in my local repository, I can touch the file there (/luci/branches/luci-0.11/modules/admin-core/root/etc/init.d/luci_fixtime).</p><p>I have now added a line to my build script that touches the file just before &quot;make world&quot; and sets the initial system date to the build hour. As I use the same script for trunk and AA, I wanted to make the script branch independent, so I use &quot;/feeds/luci.tmp/location&quot; as the pointer to the respective Luci source. That complicates the line a bit:<br /></p><div class="codebox"><pre><code>touch -t `date &quot;+%Y%m%d%H00&quot;` `cat feeds/luci.tmp/location`/../../modules/admin-core/root/etc/init.d/luci_fixtime</code></pre></div><p>From now on, my firmware will have the build date and hour as the initial system date after a flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180218">
				<div class="post-metadata">
					<div class="post-num">Post #265</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						8 Oct 2012, 21:55					</div>
				</div>
				<div class="post-content content">
					<p>Trunk r33667: First build of the newly renamed &quot;Barrier Breaker&quot; trunk. Still almost identical to the Attitude Adjustment branch.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 8 Oct 2012, 22:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180342">
				<div class="post-metadata">
					<div class="post-num">Post #266</div>
					<div class="post-author">Jas_4</div>
					<div class="post-datetime">
						11 Oct 2012, 17:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi <br />I can&#039;t download / opdate opkg more, other that have the same problem ??.</p><p>I get this message:<br />Downloading <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/Packages.gz.">http://downloads.openwrt.org/snapshots/ … ckages.gz.</a><br /> wget: server returned error: HTTP/1.1 404 Not Found<br />Collected errors:<br /> * opkg_download: Failed to download <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/packages/Packages.gz,">http://downloads.openwrt.org/snapshots/ … ckages.gz,</a> wget returned 1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p180347">
				<div class="post-metadata">
					<div class="post-num">Post #267</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						11 Oct 2012, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>That problem concerns all users. There was a major RAID problem at Openwrt servers a week ago, and the snapshot builds have not yet been fixed after that. Opkg uses those as the package source dir.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181310">
				<div class="post-metadata">
					<div class="post-num">Post #268</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						23 Oct 2012, 18:36					</div>
				</div>
				<div class="post-content content">
					<p>I have updated the Attitude Adjustment 12.09 build (r33897) to match the beta2 released today.<br />See <a href="http://koti.welho.com/hnyman1/Openwrt">http://koti.welho.com/hnyman1/Openwrt</a></p><p>The build fetches packages from the beta2 packages repository.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 26 Oct 2012, 18:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181684">
				<div class="post-metadata">
					<div class="post-num">Post #269</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						28 Oct 2012, 20:46					</div>
				</div>
				<div class="post-content content">
					<p>hnyman -- would you please be so kind as to build, just one, fully NFS enabled WNDR3700(v2) version against Attitude Attachment, once it becomes stable? I missed your last NFS build b/c I was on vacation, and on Mac OS X 10.8, I have never been able to build a version on my own. Such a AA build would enable me to restructure the network services in my LAN, and make it possible to use any AA package. If it should be impossible for you, please just disregard this message.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181692">
				<div class="post-metadata">
					<div class="post-num">Post #270</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						28 Oct 2012, 22:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hvkls wrote:</cite><blockquote><p>hnyman -- would you please be so kind as to build, just one, fully NFS enabled WNDR3700(v2) version against Attitude Attachment</p></blockquote></div><p>It might be possible. Do you mean just NFS client functionality, or are you looking also for NFS server functionality?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181693">
				<div class="post-metadata">
					<div class="post-num">Post #271</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						28 Oct 2012, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>With NFS client functionality, I could move services like minidlna (and others) from my super-busy NAS system to the almost-idle OpenWRT router, which would be <em>really</em> helpful. On the other hand, a NFS server wouldn&#039;t hurt, although I haven&#039;t thought about possible uses yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181889">
				<div class="post-metadata">
					<div class="post-num">Post #272</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						30 Oct 2012, 19:21					</div>
				</div>
				<div class="post-content content">
					<p>I included NFS client support in my current r34013 build of Attitude Adjustment.<br />(I am not sure if the feature will be permanent, but is there at least for that build...)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p181938">
				<div class="post-metadata">
					<div class="post-num">Post #273</div>
					<div class="post-author">hvkls</div>
					<div class="post-datetime">
						31 Oct 2012, 07:38					</div>
				</div>
				<div class="post-content content">
					<p>With some &quot;--force-depends&quot;, it was even possible to install the NFS kernel server here, just in case. Most excellent, I sure do appreciate it!! Thank you so much.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182000">
				<div class="post-metadata">
					<div class="post-num">Post #274</div>
					<div class="post-author">tt</div>
					<div class="post-datetime">
						31 Oct 2012, 15:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>I included NFS client support in my current r34013 build of Attitude Adjustment.<br />(I am not sure if the feature will be permanent, but is there at least for that build...)</p></blockquote></div><p>For those of us who don&#039;t want file services on our router, this is undesirable. Perhaps the nfs_kmod could be an installable option. And, nfs-utils already is, so does not need to be built-in.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182002">
				<div class="post-metadata">
					<div class="post-num">Post #275</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						31 Oct 2012, 15:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tt wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>I included NFS client support in my current r34013 build of Attitude Adjustment.<br />(I am not sure if the feature will be permanent, but is there at least for that build...)</p></blockquote></div><p>For those of us who don&#039;t want file services on our router, this is undesirable.</p></blockquote></div><p>I don&#039;t need it myself, so most likely I will remove it again for the next build. It increases the flash size by 200 kB and although this impact is negligible for 3700v2/3800, it decreases the available free flash size in 3700v1 by 10% :-(</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 11 of 63</div><nav><ul><li><a href="viewtopic.php%3Fid=28392&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=9.html">9</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=10.html">10</a></li><li class="pagination-current"><span>11</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=12.html">12</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=13.html">13</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>