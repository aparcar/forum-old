<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> newbie question - creation of a full dev env - some files are missing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p38455">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						6 Dec 2006, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />I&#039;m just beginning in open WRT dev ..<br />I used openwrt or dd-wrt for now with the &#039;&#039;basic&#039;&#039; stuff and it was perfect up to now ...<br />I started to work on the dev and installed the Imagebuilder wich work very good ..i created few images ..everything correct ..<br />Now, I solvered an SD card on my WRT54Gl .. and as it s explained, I need to modify some options ...<br />I download the sources&nbsp; ( is it the correct link ? <a href="http://downloads.openwrt.org/whiterussian/rc6/whiterussian_rc6.tar.bz2">http://downloads.openwrt.org/whiterussi â€¦ c6.tar.bz2</a> )<br />I uncompress the file ..etc..everything seems ok ...<br />but now, I need to change some stuff in the kernel config ..but impossible to find the file which is mentionned ???<br />from another hand, it says thta I must run &#039;&#039;menuconfig&quot; in buildroot/build_mipsel/linux<br />I can t find this directory either the file menuconfig in all the files I unpacked ???<br />Can someone tell me what I missed ? so I need to add some files ?<br />from another hand , I search on this site or on google, I was not able to find a tutorial for the &#039;&#039;openwrt beginner dev&#039;, if you have some ..<br />Thanks in advance !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38456">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						6 Dec 2006, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d recommend you are doing a default build for the first time. See the <a href="http://forum.openwrt.org/viewtopic.php?id=8410">Setup a development environment for OpenWrt with the VMware Player</a> thread. When the build finished you can compile the mmc driver.</p><p>You can use the driver (mmc.c) and the Makefile directly from <a href="http://kiel.kool.dk/">http://kiel.kool.dk/</a>.</p><p>The kernel config file is in target/linux/linux-2.4/config/brcm</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 6 Dec 2006, 23:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38488">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						7 Dec 2006, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>ok thanks , I will start with this !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38494">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						7 Dec 2006, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>If you patch the buildroot to add MSDOS filesystem support you don&#039;t have to mess with the kernel config at all. Everything can be done whithin menuconfig then.</p><p><a href="https://dev.openwrt.org/attachment/ticket/1029/add-msdos-fs-support.patch">Patch</a> to add MSDOS filesystem support to WhiteRussian buildroot (patch -p0 &lt; <a href="https://dev.openwrt.org/attachment/ticket/1029/add-msdos-fs-support.patch?format=raw">add-msdos-fs-support.patch</a>)</p><p>In menuconfig -&gt; Kernel Configuration / Device Support -&gt;<br /> - VFAT filesystem support (fat.o, vfat.o) - creates the kmod-vfat package<br /> - MSDOS filesystem support (msdos.o) - creates the kmod-msdos package</p><p>After the build finished download mmc.c and the Makefile for the MMC driver. Edit the mmc Makefile and mmc.c and run make. That&#039;s it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 7 Dec 2006, 22:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p38921">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						15 Dec 2006, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>hello<br />just a quick update<br />I found my 1st problem : harddrive hardware problem ... that&#039;s why I had some problem and I was not able to find some files ...they were not extracted!<br />I changed the disk, use your tutorial for seting up the dev env... evrything for now goes well, I will wait the the end of 1st compil without problems, and then after I will do some chnages<br />I wil post updates<br />thanks for your help !!!</p>											<p class="post-edited">(Last edited by <strong>smalldragoon</strong> on 15 Dec 2006, 17:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39067">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						17 Dec 2006, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />seems that my story is not finnished...<br />when I compile, I have <br />&quot;<br />-6.3/gdb/ada-lex.l &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rm -f ada-lex.c.new &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sed -e &#039;/extern.*malloc/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/extern.*realloc/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/extern.*free/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;/include.*malloc.h/d&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/\([^x]\)malloc/\1xmalloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/\([^x]\)realloc/\1xrealloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; -e &#039;s/yy_flex_xrealloc/yyxrealloc/g&#039; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt; ada-lex.c &gt; ada-lex.c.new &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rm -f ada-lex.c &amp;&amp; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mv ada-lex.c.new ada-lex.c; \<br />&nbsp; &nbsp; &nbsp; &nbsp; elif [ -f ada-lex.c ]; then \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;Warning: ada-lex.c older than ada-lex.l and flex not available.&quot;; \<br />&nbsp; &nbsp; &nbsp; &nbsp; else \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo &quot;ada-lex.c missing and flex not available.&quot;; \<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; false; \<br />&nbsp; &nbsp; &nbsp; &nbsp; fi<br />ada-lex.c missing and flex not available.<br />make[4]: *** [ada-lex.c] Error 1<br />make[4]: Leaving directory `/usr/openwrt/SOURCE/whiterussian/toolchain_build_mipsel/gdbclient-6.3/gdb&#039;<br />make[3]: *** [all-gdb] Error 2<br />make[3]: Leaving directory `/usr/openwrt/SOURCE/whiterussian/toolchain_build_mipsel/gdbclient-6.3&#039;<br />make[2]: *** [/usr/openwrt/SOURCE/whiterussian/toolchain_build_mipsel/gdbclient-6.3/gdb/gdb] Error 2<br />make[2]: Leaving directory `/usr/openwrt/SOURCE/whiterussian/toolchain/gdb&#039;<br />make[1]: *** [gdb-install] Error 2<br />make[1]: Leaving directory `/usr/openwrt/SOURCE/whiterussian/toolchain&#039;<br />make: *** [toolchain/install] Error 2<br />&quot;<br />any idea?? I check and everything seems ok with lex &amp; yacc ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39071">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						17 Dec 2006, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>Follow these two guides:</p><p>1. <a href="http://forum.openwrt.org/viewtopic.php?id=8410">Setup a development environment for OpenWrt with the VMware Player</a><br />2. <a href="http://forum.openwrt.org/viewtopic.php?id=8543">[Howto] Compile the MMC driver (module) for the SD card mod</a></p><p>I&#039;m sorry, I can&#039;t do more for you.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 17 Dec 2006, 21:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39076">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">strobert</div>
					<div class="post-datetime">
						17 Dec 2006, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>do you actually have flex and bison, or literal lex and yacc?&nbsp; The FAQ at least says flex and bison specifically.<br /><a href="http://wiki.openwrt.org/Faq#head-99edad6156d294774899c5426d54b5b4fc5cf0d2">4.2. Requirements for compiling OpenWrt</a></p><p>I am new to openwrt development, and so I am not an expert with the openwrt build process specifically.&nbsp; But that error message sounds like the build tools can&#039;t find flex.&nbsp; And I know there are some feature differences (flex has some extensions last time I was working in detail with it).</p><p>good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39494">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						22 Dec 2006, 21:14					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />so be be sure that my locla ubuntu was ccorrect , I try to follow the complete tutorial ...<br />everything compile<br />so I will check your link ..thanks ...<br />Now<br />I have done al the changes<br />when I check my Dmesg I have <br />mmc Hardware init<br />mmc Card init<br />mmc Card init *1*<br />mmc Card init *2*<br />Size = 501248, hardsectsize = 512, sectors = 1002496<br />Partition check:<br /> mmca: p1<br />which seems to be ok<br />I check insmod msdos, vfat , fat ..etc..everything is ok :</p><p>Using /lib/modules/2.4.30/vfat.o<br />insmod: A module named vfat already exists</p><p>Using /lib/modules/2.4.30/fat.o<br />insmod: A module named fat already exists</p><p>Using /lib/modules/2.4.30/msdos.o<br />insmod: A module named msdos already exists</p><p>But when I try :<br />mount /dev/mmc/disc0/part1 /mnt -tmsdos or<br />mount /dev/mmc/disc0/part1 /mnt<br />I have <br />this error :<br />mount: Mounting /dev/mmc/disc0/part1 on /mnt failed: Invalid argument<br />for me it s ok no ?<br />Thanks !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39519">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						23 Dec 2006, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>Mounting a USB stick with a MSDOS filesystem on it works perfect for me. Even hotplug mounts it automaticalla after a reboot.<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# mount /dev/scsi/host0/bus0/target0/lun0/part1 /mnt/disc0_1/ -tmsdos
root@OpenWrt:~# df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/root                 1.0M      1.0M         0 100% /rom
none                     14.9M     16.0k     14.9M   0% /tmp
/dev/mtdblock/4           2.2M    676.0k      1.5M  30% /jffs
/jffs                     1.0M      1.0M         0 100% /
/dev/scsi/host0/bus0/target0/lun0/part1   487.7M      3.7M    484.0M   1% /mnt/disc0_1
root@OpenWrt:~#</code></pre></div><p>So, make sure you are using the correct path in /dev/mmc/... and have the SD card formatted correctly. Also check if the /mnt directory exists. Maybe use a subdirectory under /mnt.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 23 Dec 2006, 18:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39520">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						23 Dec 2006, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>If someone donate a WRT54GL to me I&#039;ll write up a complete howto for the MMC driver.</p><p>Write a private message to me if you like to donate a WRT54GL or money.</p>											<p class="post-edited">(Last edited by <strong>forum2006</strong> on 24 Dec 2006, 15:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p39635">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						27 Dec 2006, 15:00					</div>
				</div>
				<div class="post-content content">
					<p>Hello<br />So Finalyy, I try to follow exactly the tutorial wihtout using my own PC but the Vmware ...<br />now everthing works ...<br />all compilations are ok , the problem with the SD card was I think that I killed the 1st one soldering it ..<br />Thanks to all for your help, I have other questions, but I will create new post as it s not at all the same problem .<br />Enjoy the end of year <br />Thanks a lot for the help !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40766">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">smalldragoon</div>
					<div class="post-datetime">
						14 Jan 2007, 15:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello all<br />After many tests and searches , everything is ok ...<br />I just have a last question( I think )<br />From one hand, I have my building env where I can compile the os ( with fat, Vfat .etc.. modules ...)</p><p>From another hand, I have the Image builder </p><p>as Image builder is using a packge for the software, how can I &#039;&#039;mix&#039;&#039; the 2 solutions</p><p>I though to one ( which is to take all the .o I need on the image builder in the file sections, but I guess there is a cleaner method !)<br />Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p40782">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">forum2006</div>
					<div class="post-datetime">
						14 Jan 2007, 20:19					</div>
				</div>
				<div class="post-content content">
					<p>See the IB howto <a href="http://wiki.openwrt.org/ImageBuilderHowTo?highlight=%28imagebuilder%29#head-6b66e02415301edaedf76a41b9b822483ffb9363">3.4 Custom files</a> in the Wiki.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>