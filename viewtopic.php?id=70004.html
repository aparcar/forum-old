<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build-ca certificate freeze</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p352883">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						24 Feb 2017, 18:33					</div>
				</div>
				<div class="post-content content">
					<p>Good day,<br />I have installed on a Banana Pi OpenWrt.<br />When creating the certificate, however, I have the problem, which after the execution of the command build-ca nothing more in the shell does. In the web interface I can navigate without problems.</p><p>Screenshot: www2.pic-upload.de/img/32740908/Unbenannt.png</p><p>Where is the problem ?</p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352894">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						24 Feb 2017, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>If I recall correctly, that command is quite CPU intensive, and can take quite a lot of time to complete.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352902">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						24 Feb 2017, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>A lot of Time? The Pi has a Dual Core Processor, ARM7 and i let it run a Hour.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352906">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						24 Feb 2017, 23:45					</div>
				</div>
				<div class="post-content content">
					<p>Usually build-ca is script. Where is it located in your case? Run </p><div class="codebox"><pre><code>which build-ca</code></pre></div><p><a href="https://openvpn.net/index.php/open-source/documentation/miscellaneous/77-rsa-key-management.html">https://openvpn.net/index.php/open-sour â€¦ ement.html</a><br />Download <a href="https://github.com/OpenVPN/easy-rsa">https://github.com/OpenVPN/easy-rsa</a> package and run it manually according to instructions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352946">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						25 Feb 2017, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Yes, its a Script. <br />It is located in /usr/sbin/build-ca<br />I will let it run today some hours and then i will see. If it doesnt work anyways, i will try to run it manually. <br />Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352953">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						25 Feb 2017, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>Again, i let it run 2 or 3 Hours without any Reaction, in Top is no CPU Intensive Process seen.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352957">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						25 Feb 2017, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>Have you edited vars file before and executed </p><div class="codebox"><pre><code>source vars</code></pre></div><p>before running build-ca?</p><p><a href="https://wiki.openwrt.org/inbox/vpn.howto">https://wiki.openwrt.org/inbox/vpn.howto</a></p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 25 Feb 2017, 23:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353000">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						26 Feb 2017, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>A couple of hours is definitively too much...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353005">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						26 Feb 2017, 21:01					</div>
				</div>
				<div class="post-content content">
					<p>Hello, <br />So now i edited vars, following: <a href="https://wiki.openwrt.org/inbox/vpn.howto">https://wiki.openwrt.org/inbox/vpn.howto</a> <br />But ive noticed, that when i run &quot;clean-all&quot; the Command is not finishing. </p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353055">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						27 Feb 2017, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>&quot;clear-all&quot; is a simple script that you can open and read easily; I would just execute it step by step, and see where it hangs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353060">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						27 Feb 2017, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />here the Result of my try: <a href="http://pastebin.com/2n3BTbNF">http://pastebin.com/2n3BTbNF</a></p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353080">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						27 Feb 2017, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>There is also a &quot;. /etc/easy-rsa/vars&quot; line at the beginning, that should have given a value to the KEY_DIR variable; not executing that line could have wiped your entire system...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353194">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						28 Feb 2017, 21:59					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />ops <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <br />So i setup the System now again. <br />I tried to execute the . /etc/easy-rsa/vars script. <br />Its hanging. <br />This is really Annoying ._. <br />Is it possible that OpenVPN isnt Compatible with Arm7 Processors ?&nbsp; </p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353203">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						28 Feb 2017, 23:06					</div>
				</div>
				<div class="post-content content">
					<p>File &quot;/etc/easy-rsa/vars&quot; should only contain a bunch of variables being initialized, there is no reason why it should hang... unless it has been wrongly edited. Could you please paste the contents of that file here?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353275">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						1 Mar 2017, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Here as you asked: <a href="http://pastebin.com/KNM2adzz">http://pastebin.com/KNM2adzz</a></p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353303">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						1 Mar 2017, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>Ok, all that file seems pretty innocent and unable to cause any trouble... except for line #28:</p><div class="codebox"><pre><code>`/usr/sbin/whichopensslcnf $EASY_RSA`</code></pre></div><p>That line executes command &quot;/usr/sbin/whichopensslcnf $EASY_RSA&quot; (where $EASY_RSA is &quot;/etc/easy-rsa&quot;, and assigns the result to $KEY_CONFIG. Perhaps that command is hanging for some reason; could you please execute this line?</p><div class="codebox"><pre><code>/usr/sbin/whichopensslcnf /etc/easy-rsa</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353369">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						2 Mar 2017, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Here the Result: <a href="http://pastebin.com/JWHAAnTJ">http://pastebin.com/JWHAAnTJ</a></p><p>Seems we got some failure ? </p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353370">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						2 Mar 2017, 18:23					</div>
				</div>
				<div class="post-content content">
					<p>Does the directory </p><div class="codebox"><pre><code>/etc/easy-rsa</code></pre></div><p> exist? What is its content?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353372">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						2 Mar 2017, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />Here the Result: <a href="http://pastebin.com/dQb8edKy">http://pastebin.com/dQb8edKy</a></p><p>The Content is listed there.<br />Its existing.</p><p>Greetings</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353374">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						2 Mar 2017, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>As you can see, script tries to find openssl.cnf, but openssl-1.0.0.cnf exists. I don&#039;t know, why mismatch takes place. You can try to create corresponding symlink.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353375">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						2 Mar 2017, 19:01					</div>
				</div>
				<div class="post-content content">
					<p>Could i not rename the file either way ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353377">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						2 Mar 2017, 19:08					</div>
				</div>
				<div class="post-content content">
					<p>No, just create symlink:<br /></p><div class="codebox"><pre><code>ln -s /etc/easy-rsa/openssl-1.0.0.cnf /etc/easy-rsa/openssl.cnf</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353379">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						2 Mar 2017, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>Okay, did that.<br />The Output: <a href="http://pastebin.com/5ABjs5wF">http://pastebin.com/5ABjs5wF</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353388">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						2 Mar 2017, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>Ok, can&#039;t see result. Does it hang again? Please, run the same command manually:<br /></p><div class="codebox"><pre><code>/usr/sbin/whichopensslcnf /etc/easy-rsa</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p353389">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">danielalpha007</div>
					<div class="post-datetime">
						2 Mar 2017, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>The Output: <br />root@OpenWrt:~# /usr/sbin/whichopensslcnf /etc/easy-rsa<br />/etc/easy-rsa/openssl.cnf<br />root@OpenWrt:~#</p><br /><p>And build-ca is hanging.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>