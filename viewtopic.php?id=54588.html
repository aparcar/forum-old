<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Two wirelss access points, one WiFi SSID ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p257739">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">neuralnet</div>
					<div class="post-datetime">
						15 Dec 2014, 15:39					</div>
				</div>
				<div class="post-content content">
					<p>I have a TL-WR2543ND which I&#039;ve successfully with OpenWRT for 12 months, and a separate access point with a different SSID to reach the weak signal areas in the house. What I would like to do is set up a second OpenWRT device that has the same SSID and password as the main router.. so that mobile devices connect with a single SSID/Password, but the devices can &#039;talk&#039; to the either wifi radio that they are closest to (i.e. strongest connection). I know that I don&#039;t want a wireless bridge as the two devices will be connected over the LAN. Is this possible ? </p><p>FYI the second device is a WNR2000 that I&#039;ve flashed with an Attitude Adjustment build, both devices have atheros chipsets.</p><p>I have looked through the documentation and tried setting up a WDS using the atheros howto: <a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a> but when set up, the AP doesn&#039;t appear to be broadcasting as I could only detect a signal from the original router. Is what I&#039;m attempting possible &amp; is is this the right way to go about it ? Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257752">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						15 Dec 2014, 17:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neuralnet wrote:</cite><blockquote><p>I have a TL-WR2543ND which I&#039;ve successfully with OpenWRT for 12 months, and a separate access point with a different SSID to reach the weak signal areas in the house. What I would like to do is set up a second OpenWRT device that has the same SSID and password as the main router.. so that mobile devices connect with a single SSID/Password, but the devices can &#039;talk&#039; to the either wifi radio that they are closest to (i.e. strongest connection). I know that I don&#039;t want a wireless bridge as the two devices will be connected over the LAN. Is this possible ?</p></blockquote></div><p>Not only it is possible, it is the recommended way... just a couple of tips:</p><p>* Use the same SSID and password, but different channels (leave a couple of empty channels between each AP).<br />* Put both APs in the same network, and leave just one DHCP server active in the entire installation.</p><div class="quotebox"><cite>neuralnet wrote:</cite><blockquote><p>FYI the second device is a WNR2000 that I&#039;ve flashed with an Attitude Adjustment build, both devices have atheros chipsets.</p></blockquote></div><p>Do not worry about that, you could use two completely different APs.</p><div class="quotebox"><cite>neuralnet wrote:</cite><blockquote><p>I have looked through the documentation and tried setting up a WDS using the atheros howto: <a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a> but when set up, the AP doesn&#039;t appear to be broadcasting as I could only detect a signal from the original router. Is what I&#039;m attempting possible &amp; is is this the right way to go about it ? Thanks!</p></blockquote></div><p>If both APs are already connected to the same LAN, I would not bother with DWS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257758">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">SaltwaterC</div>
					<div class="post-datetime">
						15 Dec 2014, 18:22					</div>
				</div>
				<div class="post-content content">
					<p>You may have some issues with stations that don&#039;t do roaming properly, but you can&#039;t fix it with a WDS anyway. A cable backbone is recommended as you keep the air clear for serving actual stations. This article may give you some pointers about the station roaming issue: <a href="http://www.tp-link.com/lb/article/?faqid=592">http://www.tp-link.com/lb/article/?faqid=592</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257886">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">neuralnet</div>
					<div class="post-datetime">
						16 Dec 2014, 17:34					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the pointers both. I can happily report this is working nicely. I thought this would be a lot harder than it was <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> Occasionally devices insist on one AP when both are in range, but as SaltwaterC pointed out there&#039;s nothing you can do on the server side. Cheers !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258290">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Zed42</div>
					<div class="post-datetime">
						21 Dec 2014, 01:57					</div>
				</div>
				<div class="post-content content">
					<p>Do the coverage areas of the AP1 and AP2 overlap? What&#039;s your practical experience with handovers between the two APs?</p><p>What I&#039;m after is to hear how do clients generally behave in such environment. As is nicely described in the article referenced by SaltwaterC the &quot;handover&quot; is purely client decision. Do the different devices (ntb, tablets, smartphones) hand over as you&#039;re walking from the coverage are of AP1 towards AP2?</p><p>In theory there should be a problem particularly if the coverage areas overlap since once connected to AP1 the particular device sticks to it until it can barely &quot;hear it&quot; - never looking for an alternative hence stupidly ignoring a fact they are possibly already in the much stronger coverage of AP2.</p><p>I have a Mikrotik AP (with original FW) and TP Link WA901ND based on OpenWrt. </p><p>I got an advice on a workaround solution: a script in Mikrotik that periodically polls the signal level of all connected devices and &quot;kicks out&quot; those below certain threshold. The device - upon loosing connectivity once its connection is terminated from AP side - looks around and picks the strongest AP. Typically the device will not do such check on its own - or will it?</p><p>There are some drawbacks of the workaround solution: first of all there is delay (depends on how often the script is executed). Secondly it reduces the coverage since it cuts out any device with a weaker signal (below selected threshold) regardless of whether it is in coverage of AP2 or not.</p><p>But assuming a) one could live with a delay (or executes the script with sufficient frequency) and b) has a fairly good coverage in all places where he/she needs them and doesn&#039;t care about edges the workaround solution could work.</p><p>Two principal questions:<br />- is there nowadays a better way to achieve mobility then depicted in the above-described workaround?<br />- I do have the script for Mikrotik. Can the same be done with OpenWrt? How? (I don&#039;t see any scripting option in default package, at least not in its web interface)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258294">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						21 Dec 2014, 02:19					</div>
				</div>
				<div class="post-content content">
					<p>Obviously the script should communicate with the other AP and confirm that it has a strong signal from the client before kicking it off.&nbsp; Otherwise users who move away from both AP&#039;s would be disconnected before they are really out of signal.&nbsp; </p><p>This probing is a problem with the AP&#039;s on differerent channels, since an AP operating on one channel would need to stop serving its users in order to retune its radio and listen for signals from clients on a different channel.</p><p>You can go to the command line interface and run practically anything you want.&nbsp; Once installed, such a script would start automatically at boot-up and wouldn&#039;t require a web interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258319">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Zed42</div>
					<div class="post-datetime">
						21 Dec 2014, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>Depends on the intended use - or respectively what limitations is the user willing to put up with. Even the simple (i.e. non cross-AP-correlated) configuration could deliver acceptable results if e.g. you have sufficient coverage via two or more hotspots throughout the house and you don&#039;t care about connection outside/on the edge. This scenario could be called &quot;Strong signal or none&quot;.</p><p>One question is if mobility needs to be solved in some/such a way - that&#039;s why I asked neuralnet for his practical experience - or is there any more clever one? Large enterprise solutions aside I&#039;m aware of one commercially available option - that is Ubiquiti and their UniFi series. Bloody expensive (1 k$ investment needed for my installation of potentially 3 APs) but their &quot;Zero Handoff Roaming&quot; could do the trick. However there are limitations too (apart from rather significant investment required for a start): the SW is still in Beta phase (ok, I could live with that as long as it works <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> ), the SW runs on a separate machine =&gt; you have to have 24*7 running computer around (ok, there are at least two good descriptions how to squeeze the SW into Raspberry Pi so I could live with that too) but most important: the SW does not yet support the newest AC line of the AP devices. And if I&#039;m asked to put rather substantial amount of money on the table I certainly want my installation to be up-to-date and future proof to survive couple of months without being outdated already - I insist on AC support.</p><p>Let me refocus on the OpenWrt based solution:<br />Let&#039;s assume that solution for mobility inside WiFi coverage is needed, i.e. just lighting up two (or more) APs with same SSID and password delivers suboptimal results and something more is needed/desirable.<br />And let&#039;s assume we can put up with limitations the &quot;Strong signal ore none&quot; scenario brings.</p><p>Here is the script for Mikrotik:</p><p>:global hosts [/interface wireless registration-table find where interface=wlan_HotSpot]<br />:foreach h in $hosts do={<br />:global signalhost [/interface wireless registration-table get $h value-name=signal-strength]<br />:local pos [:find $signalhost &quot;d&quot;]<br />:set signalhost ([:pick $signalhost 0 ($pos)])<br />:if (signalhost &lt; -80) do {<br />/interface wireless registration-table remove $h<br />}<br />}</p><p>I.e. very simple: goes through the table of all connected devices and removes those under 80 dBm</p><p>Is there anyone who dares to adopt it to OpenWrt?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>