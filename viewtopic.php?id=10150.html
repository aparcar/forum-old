<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Installing Openwrt on AR7WRD (AWR-2440 - Dynamode R-ADSL-C4W-G)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p45636">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">benjaml</div>
					<div class="post-datetime">
						1 Apr 2007, 03:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone!</p><p>I have looked through the Wiki and docs relating to installing OpenWRT over the last week and I am now planning to make an attempt to install it on my router. Here&#039;s the details:</p><p>Model name: AWR-2440 (although it&#039;s sold as a Dynamode: r-adsl-c4w-g)<br />Chipset: Texas Instruments AR7WRD / Marvell<br />Router manual here: <a href="http://www.dynamode.co.uk/support/drivers/adsl/r-adsl-c4wg/R-ADSL-C4W-G-Black.zip">http://www.dynamode.co.uk/support/drive â€¦ -Black.zip</a></p><p>I can get SSH and telnet access to the router. Busybox asks me for Username and Password and then it drops me into a DSL Modem CLI. I can then type &#039;shell&#039; to get to a linux shell.</p><p>I understand the bootloader is PSP based but here&#039;s a dump of my ENV variables to confirm and other details from various files on the device:</p><p># cat /proc/ticfg/env<br />BUILD_OPS&nbsp; &nbsp; &nbsp; &nbsp;0x201<br />MAC_PORT&nbsp; &nbsp; &nbsp; &nbsp; 0<br />MEMSZ&nbsp; &nbsp;0x01000000<br />FLASHSZ 0x00400000<br />MODETTY0&nbsp; &nbsp; &nbsp; &nbsp; 38400,n,8,1,hw<br />MODETTY1&nbsp; &nbsp; &nbsp; &nbsp; 38400,n,8,1,hw<br />CPUFREQ 211968000<br />MIPSFREQ&nbsp; &nbsp; &nbsp; &nbsp; 211968000<br />SYSFREQ 105984000<br />bootloaderVersion&nbsp; &nbsp; &nbsp; &nbsp;1.3.7.15<br />pbVersion&nbsp; &nbsp; &nbsp; &nbsp;pb361w_1.4_060208A<br />pbType&nbsp; 0100000A-02010202<br />mtd2&nbsp; &nbsp; 0x90000000,0x90010000<br />mtd3&nbsp; &nbsp; 0x90010000,0x90020000<br />mtd4&nbsp; &nbsp; 0x90020000,0x90400000<br />StaticBuffer&nbsp; &nbsp; 120<br />BOOTCFG m:f:&quot;mtd1&quot;<br />SerialNumber&nbsp; &nbsp; none<br />ProductID&nbsp; &nbsp; &nbsp; &nbsp;AR7WRD<br />IPA&nbsp; &nbsp; &nbsp;192.168.1.1<br />PROMPT&nbsp; (psbl)<br />cpuType 2<br />av_vlynq_init_fail&nbsp; &nbsp; &nbsp; 0<br />kbVersion&nbsp; &nbsp; &nbsp; &nbsp;kb370w_1.0_060304A<br />kbType&nbsp; 01000008-02010202<br />cpmac_phy&nbsp; &nbsp; &nbsp; &nbsp;3<br />HWRevision&nbsp; &nbsp; &nbsp; 01000008-02010202<br />buildusbmode&nbsp; &nbsp; 0<br />buildapmode&nbsp; &nbsp; &nbsp;1<br />c2_Noneed_rst2&nbsp; 1<br />c2_nvs_autodefault&nbsp; &nbsp; &nbsp; 0<br />c2_nvs_defaultfromfile&nbsp; 1<br />IPA_SVR 192.168.1.127<br />c2_PPPoE_Max_Dailup_Count&nbsp; &nbsp; &nbsp; &nbsp;1500<br />c2_PPP_Backoff_Retval_05&nbsp; &nbsp; &nbsp; &nbsp; 300<br />c2_PPP_Backoff_Retval_30&nbsp; &nbsp; &nbsp; &nbsp; 1800<br />c2_PVC_orgLaunch&nbsp; &nbsp; &nbsp; &nbsp; 1<br />DSL_BIT_TMODE&nbsp; &nbsp;1<br />c2_mda_mode&nbsp; &nbsp; &nbsp;0<br />c2_PPPD_Ignore_recv_idle&nbsp; &nbsp; &nbsp; &nbsp; 0<br />c2_PPPD_Auth_Failed_Delay_Interval&nbsp; &nbsp; &nbsp; 7<br />c2_PPPD_Delay_Interval&nbsp; 7<br />c2_PPPD_No_Delay&nbsp; &nbsp; &nbsp; &nbsp; 0<br />c2_PPPoE_No_Send_LCPTR&nbsp; 0<br />c2_PPPoE_No_Send_PADT&nbsp; &nbsp;0<br />c2_CfgDSL&nbsp; &nbsp; &nbsp; &nbsp;1<br />c2_sh_web_rvt&nbsp; &nbsp;1<br />c2_ensave_iptlog&nbsp; &nbsp; &nbsp; &nbsp; 0<br />DSL_UPG_DONE&nbsp; &nbsp; 1<br />vcc_encaps0&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps1&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps2&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps3&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps4&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps5&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps6&nbsp; &nbsp; &nbsp;0.0<br />vcc_encaps7&nbsp; &nbsp; &nbsp;0.0<br />WLAN_EEPROM0&nbsp; &nbsp; 021156041B06001200000701095612000000010D56A9000000026D54969C470E<br />WLAN_EEPROM1&nbsp; &nbsp; 12000000013984000100000101854C1068900105850600100001298507000000<br />WLAN_EEPROM2&nbsp; &nbsp; 01C1850000300001C585000000000111850000FFFF0115850000F0FF01A58500<br />WLAN_EEPROM3&nbsp; &nbsp; 8000000109850000800201010C03000000012184000000800181851D00030001<br />WLAN_EEPROM4&nbsp; &nbsp; 55090100000001E5580200000001F1580800000001D5581000000001B1580400<br />WLAN_EEPROM5&nbsp; &nbsp; 0000000000000000000C00C300FE0008011401260144014D014F0165019F01AF<br />WLAN_EEPROM6&nbsp; &nbsp; 01B70101390000110004010101000501060002010201021E000A000205020411<br />WLAN_EEPROM7&nbsp; &nbsp; 2244030610203031324004095449204143583130300507544920546573740108<br />WLAN_EEPROM8&nbsp; &nbsp; 18089529589401350502000037006F00A900E50004044410EF034510CD03185A<br />WLAN_EEPROM9&nbsp; &nbsp; 4000145A1A00020E0801E9000A01E8026400ED018509500005010A0175036400<br />WLAN_EEPROM10&nbsp; &nbsp;E30185090107100000400000010000050400010100000000FFFFFFFFFDFDFDFD<br />WLAN_EEPROM11&nbsp; &nbsp;FBF4F4F4F40E04FDFDFDFEFFFFFFFF090000FF09090909090909090909090909<br />WLAN_EEPROM12&nbsp; &nbsp;0909090909090909000009FFFFFFFEFDFDFDFE0909090909090909090909090E<br />WLAN_EEPROM13&nbsp; &nbsp;0100000000000000000000000000000302A318A3180700012000000000000000<br />WLAN_EEPROM14&nbsp; &nbsp;00000000000000000000000000000000000000000000000000<br />NVS_TFTP_LOAD&nbsp; &nbsp;0<br />HWA_0&nbsp; &nbsp;00:08:5C:62:E4:57<br />WLAN_HWADDR&nbsp; &nbsp; &nbsp;00:08:5C:62:E4:58<br />HWA_3&nbsp; &nbsp;00:08:5C:62:E4:59<br />wan_br_mac&nbsp; &nbsp; &nbsp; 00:08:5C:62:E4:58<br />mtd1&nbsp; &nbsp; 0x90020090,0x9009e000<br />mtd0&nbsp; &nbsp; 0x9009e000,0x90400000</p><p>--------------------------------------</p><p># cat iomem<br />00000000-13ffffff : reserved<br />14000000-1401ffff : System RAM<br />14020000-14ffffff : System RAM<br />&nbsp; 14020000-141a9717 : Kernel code<br />&nbsp; 141b9380-141d2fff : Kernel data<br />a8610000-a86107ff : eth0</p><p>---------------------------------------</p><p># cat /proc/interrupts<br /> 7:&nbsp; &nbsp;741710&nbsp; &nbsp;R4000 timer/counter [MIPS interrupt]<br /> 8:&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp;unified secondary [hw0 (Avalanche Primary)]<br />15:&nbsp; &nbsp; &nbsp; 868&nbsp; &nbsp;serial [hw0 (Avalanche Primary)]<br />23:&nbsp; 1180652 + SAR&nbsp; [hw0 (Avalanche Primary)]<br />27:&nbsp; &nbsp;509193 + Cpmac Driver [hw0 (Avalanche Primary)]<br />29:&nbsp; &nbsp;114939&nbsp; &nbsp;vlynq0 [hw0 (Avalanche Primary)]<br />31:&nbsp; &nbsp; &nbsp; 114 + DSL&nbsp; [hw0 (Avalanche Primary)]<br />80:&nbsp; &nbsp;114939&nbsp; &nbsp;TNETW1150 [hw0 (Low Vlynq)]&nbsp; &lt;-- Wireless LAN card)</p><p>--------------------------------------</p><p># cat cpuinfo<br />processor&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: 0<br />cpu model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: MIPS 4KEc V4.8<br />BogoMIPS&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : 211.35<br />wait instruction&nbsp; &nbsp; &nbsp; &nbsp; : no<br />microsecond timers&nbsp; &nbsp; &nbsp; : yes<br />extra interrupt vector&nbsp; : yes<br />hardware watchpoint&nbsp; &nbsp; &nbsp;: yes<br />VCED exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available<br />VCEI exceptions&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;: not available</p><p>---------------------------------------</p><p># cat meminfo<br />&nbsp; &nbsp; &nbsp; &nbsp; total:&nbsp; &nbsp; used:&nbsp; &nbsp; free:&nbsp; shared: buffers:&nbsp; cached:<br />Mem:&nbsp; 14696448 14381056&nbsp; &nbsp;315392&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; 1044480&nbsp; 3477504<br />Swap:&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0&nbsp; &nbsp; &nbsp; &nbsp; 0<br />MemTotal:&nbsp; &nbsp; &nbsp; &nbsp; 14352 kB<br />MemFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;308 kB<br />MemShared:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />Buffers:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1020 kB<br />Cached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3396 kB<br />SwapCached:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />Active:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;5164 kB<br />Inactive:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;2332 kB<br />HighTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />HighFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB<br />LowTotal:&nbsp; &nbsp; &nbsp; &nbsp; 14352 kB<br />LowFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;308 kB<br />SwapTotal:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 kB<br />SwapFree:&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 kB</p><p>----------------------------------------</p><p>After reading the docs, I understand that I have to change the partitioning on the flash to create a place to install OpenWRT to, however there is no mention of this particlar model in the Wiki. I know the commands I need to use to change the mtd partitions but not what what exactly I should allocate. I obviously don&#039;t want to brick the router if possible.</p><p>I understand I have to compile a version of OpenWRT from SVN that supports AR7 architecure, and that Kamikaze has the support built in by default.</p><p>Could someone just confirm that I&#039;m on the right track and give me the mtd values I&#039;d need to use to get OpenWRT on my router (if it&#039;s possible).</p><p>Sorry if this has been asked before but I couldn&#039;t find any mention of this router when I searched through the forums.</p><p>Thanks in advance.</p><p>Ben.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90919">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">pico</div>
					<div class="post-datetime">
						6 Jul 2009, 13:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi Ben,</p><p>I&#039;m about in the same place you were (slightly different model router) when you posted this.&nbsp; Did you ever manage to get to the next step, ie flashing?</p><p>Pico</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>