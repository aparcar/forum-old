<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Why my bridge don&#039;t work in client mode ???</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p57633">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">MrBrooks</div>
					<div class="post-datetime">
						17 Oct 2007, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>For expose my problem I showing my network:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRIDGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRIDGE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.2.8/24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.2.1/24<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |--------------------|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|---------------|<br />PC&nbsp; -----------&gt;&nbsp; &nbsp; Ethernet&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Wireless&nbsp; &nbsp;- - - - - - - - -&gt;&nbsp; Wireless&nbsp; &nbsp; &nbsp; &nbsp;Ethernet&nbsp; -------&gt; Internet <br />192.168.2.10/24&nbsp; &nbsp; &nbsp; &nbsp;Kamikaze (1) client mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Kamikaze (2) AP mode</p><br /><p>I had to setup the Kamikaze (1) in client mode with bridged nic (one ethernet and one wireless), because I need to use Kamikaze (1) to link various PC and to permit these to exit in internet.</p><p>In this situation Kamikaze(1) cannot communicate with anyone (I don&#039;t have ping response between Kamikaze(1) and PC, and between Kamikaze(1) and Kamikaze(2))...</p><p>How I can resolve this problem without change Kamikaze (1) mode to wds ???</p>											<p class="post-edited">(Last edited by <strong>MrBrooks</strong> on 17 Oct 2007, 17:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57642">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">gerd</div>
					<div class="post-datetime">
						17 Oct 2007, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><p>Your Client bridge and PC should be in the same subnet</p><p>CIao Gerd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57643">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">MrBrooks</div>
					<div class="post-datetime">
						17 Oct 2007, 17:20					</div>
				</div>
				<div class="post-content content">
					<p>My PC and Kamikaze (1) client mode stay in the same subnet&nbsp; (192.168.2.x/24)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57758">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">gerd</div>
					<div class="post-datetime">
						19 Oct 2007, 11:24					</div>
				</div>
				<div class="post-content content">
					<p>after you edited your 1st post it should be fine (it was working for me time ago with 7.07)<br />with openwrt 0.9 (WR) it still works<br />maybe you sould give us more details on your setup (encrytion etc.pp.)</p><p>ciao gerd</p>											<p class="post-edited">(Last edited by <strong>gerd</strong> on 19 Oct 2007, 11:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58041">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jiaxin</div>
					<div class="post-datetime">
						25 Oct 2007, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi gerd,</p><p>I had same problem.</p><p>Could you show us how you setup etc/config/network and etc/config/wireless?</p><p>Thanks</p><p>Jiaxin</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58198">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">gerd</div>
					<div class="post-datetime">
						29 Oct 2007, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>:-) no.... its not that i don&#039;T want to post, but meanwhile both setup using wds (for testing purpose)<br />but afair i setup like in wiki 1st w/o encryption then with encryption</p><p>ciao gerd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58422">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ndk</div>
					<div class="post-datetime">
						2 Nov 2007, 16:37					</div>
				</div>
				<div class="post-content content">
					<p>Sorry... I must have missed it. The only post I found that talked about &quot;first weak, then strong&quot; crypto was quite old and required manual intervention at every reboot of ANY AP...<br />Could you please post a link?<br />Tks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58670">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">phuang</div>
					<div class="post-datetime">
						8 Nov 2007, 16:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi MrBrooks and others,<br />I have the same problem as yours. Have you got any solution yet?</p><p>I read net about it. It said something like this:<br />1. on old version of OpenWrt, wet mode (bridged client) was supported. and Kamikaze doesn&#039;t support it any more; sta mode is for Routed client which you and I don&#039;t want it at this configuration.<br />2. On other hand, if both sta mode and bridge to lan are set, and wet mode is auotmatic set.( Which I didn&#039;t understand);<br />3. DNS and DHCP server must be disabled for bridged client mode;</p><p>I have my etc/config/network(for Kamikaze (1)):</p><p># Network configuration file</p><p>config interface loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;lo<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;127.0.0.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.0.0.0</p><p>config interface lan<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname&nbsp; &nbsp;&quot;eth0 eth1 ath0&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;bridge<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto&nbsp; &nbsp; static<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr&nbsp; &nbsp;192.168.2.8<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask&nbsp; 255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; option gateway&nbsp; 192.168.2.1<br />&nbsp; &nbsp; &nbsp; &nbsp; option dns&nbsp; &nbsp; &nbsp; 204.101.110.2</p><p>I don&#039;t need a wan setting here. Should I?</p><p>etc/config/wireless :</p><p>config wifi-device&nbsp; &nbsp; &nbsp; wifi0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type&nbsp; &nbsp; &nbsp;atheros&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option channel&nbsp; 6&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option disabled 0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />config wifi-iface&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option device&nbsp; &nbsp;wifi0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network&nbsp; lan&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option mode&nbsp; &nbsp; &nbsp;sta&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ssid&nbsp; &nbsp; &nbsp;MASTERSSID&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option encryption wep&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key&nbsp; &nbsp; &nbsp; &#039;1&#039;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key1&nbsp; &nbsp; &nbsp;&#039;12345678901234567890123456&#039;</p><p>it doesn&#039;t work with or without wep enable.</p><p>Any suggestion to fix it?</p><br /><br /><div class="quotebox"><cite>MrBrooks wrote:</cite><blockquote><p>For expose my problem I showing my network:</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRIDGE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BRIDGE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 192.168.2.8/24&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;192.168.2.1/24<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |--------------------|&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|---------------|<br />PC&nbsp; -----------&gt;&nbsp; &nbsp; Ethernet&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Wireless&nbsp; &nbsp;- - - - - - - - -&gt;&nbsp; Wireless&nbsp; &nbsp; &nbsp; &nbsp;Ethernet&nbsp; -------&gt; Internet <br />192.168.2.10/24&nbsp; &nbsp; &nbsp; &nbsp;Kamikaze (1) client mode&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Kamikaze (2) AP mode</p><br /><p>I had to setup the Kamikaze (1) in client mode with bridged nic (one ethernet and one wireless), because I need to use Kamikaze (1) to link various PC and to permit these to exit in internet.</p><p>In this situation Kamikaze(1) cannot communicate with anyone (I don&#039;t have ping response between Kamikaze(1) and PC, and between Kamikaze(1) and Kamikaze(2))...</p><p>How I can resolve this problem without change Kamikaze (1) mode to wds ???</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58672">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						8 Nov 2007, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve said it several times before, but it looks like I need to repeat myself -</p><p>Client mode was written on the assumption that a client is a single computer; when communicating with the access point it deals in terms of 3 mac addresses - client, ap, destination. When multiple devices are communicating through the client, the original mac address of the source is lost; everything appears as the client mac address, causing subtle problems with the networking. We already implement several workarounds, but client mode bridges are still problematic.</p><p>Instead, try one of the following -</p><p>1&gt; Don&#039;t attempt to bridge the networks; give the client and all machines connected to the client a new subnet and set up routing between both subnets to make it seamless. The added separation will also reduce your wireless bandwidth.</p><p>2&gt; Wireless Distribution System (WDS). WDS is a point to point link, typically between access points; these point to point connections use a 4 address scheme (adds a source mac address), meaning that WDS links can be used to bridge networks or create wireless repeaters.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58759">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ndk</div>
					<div class="post-datetime">
						10 Nov 2007, 15:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>1&gt; Don&#039;t attempt to bridge the networks; give the client and all machines connected to the client a new subnet and set up routing between both subnets to make it seamless. The added separation will also reduce your wireless bandwidth.</p></blockquote></div><p>Even a WRT54GL can be a psk2 client given this approach?</p><div class="quotebox"><cite>mbm wrote:</cite><blockquote><p>2&gt; Wireless Distribution System (WDS). WDS is a point to point link, typically between access points; these point to point connections use a 4 address scheme (adds a source mac address), meaning that WDS links can be used to bridge networks or create wireless repeaters.</p></blockquote></div><p>Isn&#039;t WDS cleartext? If so, everyone sniffing the connection can get all the network traffic. And it&#039;s not hard to change MAC address on a network card (wired or wireless), so it doesn&#039;t give any additional security...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>