<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Spanning tree protocol</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p152270">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">craigdavids</div>
					<div class="post-datetime">
						28 Dec 2011, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi to all,</p><p>I have enable STP on Backfire, doing:</p><p>Simple search for the section in /etc/config/network that has option type bridge set, which is most probably the lan interface or other you may choose.<br />I add a line like this to that section:<br />Code:&nbsp; &nbsp; &nbsp; &nbsp; option&nbsp; &nbsp;stp&nbsp; &nbsp; &nbsp; 1</p><p>I can also do : brctl stp br-lan on, Both these changes the situation only until the next reboot no permanent, i think, do you all agree?</p><p>I have to active STP on all routers included in the WDS link including central AP&#039;s. I simple enable the STP option in every bridge that participates in my Spanning Tree. </p><p>But I have a important question were help will be much appreciated. <br />Can someone tell me were can I define STP Path Costs and Bridge Priority??? I don&#039;t now if exist a code to do this inside /etc/config/network or if it have to be done by other means.</p><p>Thanks in advance,<br />Best regards,<br />Craig</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152749">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">craigdavids</div>
					<div class="post-datetime">
						2 Jan 2012, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>someone???</p><p>Regards,<br />Craig</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152752">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Cypher</div>
					<div class="post-datetime">
						2 Jan 2012, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>This command will guide you: </p><div class="codebox"><pre><code>brctl --help</code></pre></div><p>Look out for &quot;setpathcosts&quot; and have fun! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152856">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">craigdavids</div>
					<div class="post-datetime">
						3 Jan 2012, 13:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Thanks for the help. For all o may need, were it goes a god tutorial: <a href="http://www.lainoox.com/bridge-brctl-tutorial-linux/">http://www.lainoox.com/bridge-brctl-tutorial-linux/</a><br />And do not forgot to download the package named: bridge current version 1.4-1.</p><p>After I activate the STP on my bridge interfaces it appears this message: &quot;br-lan: starting userspace STP failed, starting kernel STP&quot;<br />When I do &quot;#brctl show&quot; it shows &quot;STP enabled:yes&quot; and seems all ok.</p><p>1-Can someone tell me what the message means and if this indicates any real problem (would be nice to know).<br />2-How the heck do i specify the configuration of the bridge to remain permanent even after a reboot?&nbsp; Because i have configured the pathcost &quot;brctl setpathcost br-lan eth0.1 2 &quot;and portpriority, but after reboot this is all lost.</p><p>Help will be appreciated,<br />Regards,<br />Craig</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152996">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">craigdavids</div>
					<div class="post-datetime">
						4 Jan 2012, 12:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi to all,</p><p>2-How the heck do i specify the configuration of the bridge to remain permanent even after a reboot?&nbsp; Because i have configured the pathcost &quot;brctl setpathcost br-lan eth0.1 2 &quot;and portpriority, but after reboot this is all los<br />R: For the second questions above I have found one solution, that is, do a script that work on boot. Do anybody have other type of solution? I will be glade to know about other solutions.</p><p>But for the first question I&#039;m still without a solution, have anybody face this message. After I activate the STP on my bridge interfaces it appears this message: &quot;br-lan: starting userspace STP failed, starting kernel STP&quot;. I&#039;m the only facing this message?<br />Can someone tell me what the message means and if this indicates any real problem?</p><p>Help will be appreciated,<br />Regards,<br />Craig</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p152998">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						4 Jan 2012, 12:13					</div>
				</div>
				<div class="post-content content">
					<p>The message is normal and does not indicate a problem. As for making the settings persistent, there is no facility to do so yet, stick the required commands into rc.local.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>