<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Huawei E372 setup + connect</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p166889">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">schoerg</div>
					<div class="post-datetime">
						9 May 2012, 15:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am using a Huawei E372 3g modem. On my former Debian router (a normal PC) I used sakis3g to connect to the internet. Now I got myself a NSLU2 and don&#039;t know how to connect.</p><p>I read that guide on the wiki, but it didn&#039;t help much.</p><p>The E372 is as far as I know similar to the E398 modem.</p><div class="codebox"><pre><code>Linux OpenWrt 2.6.37.6 #1 Sat May 5 16:20:02 MST 2012 armv5teb GNU/Linux</code></pre></div><div class="codebox"><pre><code>Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 002 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 003 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 006: ID 12d1:1506 Huawei Technologies Co., Ltd.</code></pre></div><p>I think the device is already switched as 1506 is also used on the Debian pc while connected.</p><div class="codebox"><pre><code>config interface wan                
        option ifname   ppp0
        option device   /dev/ttyS0
        option apn      drei.at
        option service  umts
        option proto    3g
        option username 123
        option password password</code></pre></div><p>Also the device ttyUSB is not showing up like it should according to the wiki.</p><p>Some output from logread:</p><div class="codebox"><pre><code>May  9 13:48:37 OpenWrt local2.info chat[5708]: abort on (BUSY)
May  9 13:48:37 OpenWrt local2.info chat[5708]: abort on (NO CARRIER)
May  9 13:48:37 OpenWrt local2.info chat[5708]: abort on (ERROR)
May  9 13:48:37 OpenWrt local2.info chat[5708]: report (CONNECT)
May  9 13:48:37 OpenWrt local2.info chat[5708]: timeout set to 10 seconds
May  9 13:48:37 OpenWrt local2.info chat[5708]: send (AT&amp;F^M)
May  9 13:48:37 OpenWrt local2.info chat[5708]: expect (OK)
May  9 13:48:47 OpenWrt local2.info chat[5708]: alarm
May  9 13:48:47 OpenWrt local2.info chat[5708]: Failed
May  9 13:48:47 OpenWrt daemon.err pppd[5160]: Connect script failed
May  9 13:49:01 OpenWrt daemon.info pppd[5160]: Terminating on signal 15
May  9 13:49:01 OpenWrt daemon.info pppd[5160]: Exit.
May  9 13:49:03 OpenWrt daemon.notice pppd[5759]: pppd 2.4.5 started by root, uid 0
May  9 13:49:04 OpenWrt local2.info chat[5764]: abort on (BUSY)
May  9 13:49:04 OpenWrt local2.info chat[5764]: abort on (NO CARRIER)
May  9 13:49:04 OpenWrt local2.info chat[5764]: abort on (ERROR)
May  9 13:49:04 OpenWrt local2.info chat[5764]: report (CONNECT)
May  9 13:49:04 OpenWrt local2.info chat[5764]: timeout set to 10 seconds
May  9 13:49:04 OpenWrt local2.info chat[5764]: send (AT&amp;F^M)
May  9 13:49:04 OpenWrt local2.info chat[5764]: expect (OK)</code></pre></div><p>Some output from dmesg:</p><div class="codebox"><pre><code>[   44.877605] ip_tables: (C) 2000-2006 Netfilter Core Team
[   45.242463] NET: Registered protocol family 24
[   45.771623] nf_conntrack version 0.5.0 (464 buckets, 1856 max)
[   46.809572] usbcore: registered new interface driver usbserial
[   46.815800] USB Serial support registered for generic
[   46.821418] usbcore: registered new interface driver usbserial_generic
[   46.828100] usbserial: USB Serial Driver core
[   47.140288] scsi 0:0:0:0: Attached scsi generic sg0 type 5
[   47.146864] sd 1:0:0:0: Attached scsi generic sg1 type 0
[   47.249778] USB Serial support registered for GSM modem (1-port)
[   47.258095] usbcore: registered new interface driver option
[   47.263796] option: v0.7.2:USB Driver for GSM modems
[   22.327728] NPE-B: firmware&#039;s license can be found in /usr/share/doc/LICENSE.IPL
[   22.335345] NPE-B: firmware functionality 0x2, revision 0x2:1
[   22.763255] device eth0 entered promiscuous mode
[   22.876168] br-lan: port 1(eth0) entering forwarding state
[   22.881809] br-lan: port 1(eth0) entering forwarding state
[   23.703005] eth0: link up, speed 100 Mb/s, full duplex
[   49.719441] usb 1-1: USB disconnect, address 2
[   61.841830] usb 1-1: new high speed USB device using ehci_hcd and address 3
[   62.022062] scsi2 : usb-storage 1-1:1.0
[   62.028619] scsi3 : usb-storage 1-1:1.1
[   63.033976] scsi 3:0:0:0: Direct-Access     HUAWEI   TF CARD Storage  2.31 PQ: 0 ANSI: 2
[   63.044727] sd 3:0:0:0: Attached scsi generic sg0 type 0
[   63.059326] sd 3:0:0:0: [sda] Attached SCSI removable disk
[   64.052347] usb 1-1: USB disconnect, address 3
[    4.536568] usb 1-1: new high speed USB device using ehci_hcd and address 4
[    4.700342] scsi4 : usb-storage 1-1:1.5
[    4.708153] scsi5 : usb-storage 1-1:1.6
[    5.710103] scsi 4:0:0:0: CD-ROM            HUAWEI   Mass Storage     2.31 PQ: 0 ANSI: 2
[    5.720530] scsi 4:0:0:0: Attached scsi generic sg0 type 5
[    5.732306] scsi 5:0:0:0: Direct-Access     HUAWEI   TF CARD Storage  2.31 PQ: 0 ANSI: 2
[    5.742992] sd 5:0:0:0: Attached scsi generic sg1 type 0
[    5.757950] sd 5:0:0:0: [sda] Attached SCSI removable disk
[   10.985915] br-lan: port 1(eth0) entering forwarding state
[   11.029375] device eth0 left promiscuous mode
[   11.033945] br-lan: port 1(eth0) entering disabled state
[   11.144130] eth0: link down
[   15.514644] device eth0 entered promiscuous mode
[   16.156042] eth0: link up, speed 100 Mb/s, full duplex
[   16.161505] br-lan: port 1(eth0) entering forwarding state
[   16.167175] br-lan: port 1(eth0) entering forwarding state
[   46.693868] usbcore: registered new interface driver cdc_ether
[   63.494269] usb 1-1: USB disconnect, address 4
[   28.451265] usb 1-1: new high speed USB device using ehci_hcd and address 5
[   28.631600] scsi6 : usb-storage 1-1:1.0
[   28.638144] scsi7 : usb-storage 1-1:1.1
[   29.643830] scsi 7:0:0:0: Direct-Access     HUAWEI   TF CARD Storage  2.31 PQ: 0 ANSI: 2
[   29.654604] sd 7:0:0:0: Attached scsi generic sg0 type 0
[   29.668952] sd 7:0:0:0: [sda] Attached SCSI removable disk
[   30.669824] usb 1-1: USB disconnect, address 5
[   36.251330] usb 1-1: new high speed USB device using ehci_hcd and address 6
[   36.415154] scsi8 : usb-storage 1-1:1.5
[   36.431683] scsi9 : usb-storage 1-1:1.6
[   37.434498] scsi 9:0:0:0: Direct-Access     HUAWEI   TF CARD Storage  2.31 PQ: 0 ANSI: 2
[   37.445301] sd 9:0:0:0: Attached scsi generic sg0 type 0
[   37.453774] scsi 8:0:0:0: CD-ROM            HUAWEI   Mass Storage     2.31 PQ: 0 ANSI: 2
[   37.464132] scsi 8:0:0:0: Attached scsi generic sg1 type 5
[   37.476646] sd 9:0:0:0: [sda] Attached SCSI removable disk
[    1.394707] usbcore: deregistering interface driver usb-storage</code></pre></div><p>Any tips?</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166892">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						9 May 2012, 16:47					</div>
				</div>
				<div class="post-content content">
					<p>your huawei is not switched to modem mode - still in storage mode<br />have you followed? <a href="http://wiki.openwrt.org/doc/recipes/3gdongle?s">http://wiki.openwrt.org/doc/recipes/3gdongle?s</a>[]=umts<br />do you have all the required packages like usb-modeswitch, kmod-usb-serial-option</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166897">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">schoerg</div>
					<div class="post-datetime">
						9 May 2012, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Update: After using rmmod to unload all modules, I entered</p><div class="codebox"><pre><code>insmod usbserial vendor=0x12d1 product=0x1506</code></pre></div><p>Which resulted in this:</p><div class="codebox"><pre><code>[   54.648371] usbserial_generic 1-2:1.2: generic converter detected
[   54.656298] usb 1-2: generic converter now attached to ttyUSB1
[   54.662450] usbserial_generic 1-2:1.3: generic converter detected
[   54.670440] usb 1-2: generic converter now attached to ttyUSB2
[   54.676484] usbserial_generic 1-2:1.4: generic converter detected
[   54.684415] usb 1-2: generic converter now attached to ttyUSB3
[   54.690555] usbserial_generic 1-2:1.5: generic converter detected
[   54.698440] usb 1-2: generic converter now attached to ttyUSB4
[   54.704732] usbserial_generic 1-2:1.6: generic converter detected
[   54.712666] usb 1-2: generic converter now attached to ttyUSB5
[   54.718821] usbcore: registered new interface driver usbserial_generic</code></pre></div><p>Yes I followed that instruction, they&#039;re not very good.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p166965">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						10 May 2012, 11:16					</div>
				</div>
				<div class="post-content content">
					<p>correct - good resolution - i had the same issue with a k4510</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>