<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> adding new board. Not found by menuconfig</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p141148">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">brainscrew</div>
					<div class="post-datetime">
						12 Aug 2011, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a board that is real similar to the fonera20n device. I cna boot and run an initramfs image based off a build for fonera20n, with some modifications. The router has no name, but the board is marked xdx-rn502j, so I want to add a new device under the ralink rt3052 platforms.</p><p>The steps I took: I modified (or added) the files</p><p>target/linux/ramips/files/arch/mips/ralink/rt305x/mach-xdx-rn502j.c<br />target/linux/ramips/files/arch/mips/ralink/rt305x/Kconfig<br />target/linux/ramips/files/arch/mips/ralink/rt305x/Makefile<br />target/linux/ramips/image/Makefile</p><p>now I was hoping that make kernel_menuconfig would show the new board definition and name in Machine Selection -&gt;Ralink RT305x machine selection -&gt; xdx-rn502j</p><p>but nothing... it also does not build the new c files.</p><p>Obviously there is some way to regenerate whatever files menuconfig uses, or need to add somewhere a definition of the new board, but I can&#039;t find it !</p><p>Any hints ? The wiki page about adding a new device is not useful, it gives an example that does not seem relevant to all platforms.</p><p>---- Update: seems make clean leads to the new options/board to be recognized in menuconfig. However, it shows my board as (NEW) the build keeps asking me if I want to use the target... do I really have to hit &#039;Y&#039; all the time because it&#039;s a new target ? how can I disable this ? I don&#039;t know if the new files are builtm though. still going...</p>											<p class="post-edited">(Last edited by <strong>brainscrew</strong> on 12 Aug 2011, 22:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262117">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nam228</div>
					<div class="post-datetime">
						20 Jan 2015, 04:27					</div>
				</div>
				<div class="post-content content">
					<p>Hi ,</p><p>I think you should find out where is your &quot;mk&quot; file to add the new board description.</p><p>I guess it seems like this file : target/linux/ramips//rt305x/target.mk</p><p>&nbsp; &nbsp;#<br />&nbsp; # Copyright (C) 2009 OpenWrt.org<br />&nbsp; #<br />&nbsp; &nbsp;<br />&nbsp; &nbsp;SUBTARGET:=rt305x<br />&nbsp; &nbsp;BOARDNAME:=RT3x5x/RT5350 based boards<br />&nbsp; &nbsp;ARCH_PACKAGES:=ramips_24kec<br />&nbsp; &nbsp;FEATURES+=usb<br />&nbsp; &nbsp;CPU_TYPE:=24kec<br />&nbsp; CPU_SUBTYPE:=dsp<br />&nbsp; <br />&nbsp; DEFAULT_PACKAGES += kmod-rt2800-soc<br />&nbsp; <br />&nbsp; define Target/Description<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Build firmware images for Ralink RT3x5x/RT5350 based boards.<br />&nbsp; endef</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262137">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">brainscrew</div>
					<div class="post-datetime">
						20 Jan 2015, 10:16					</div>
				</div>
				<div class="post-content content">
					<p>Hey,</p><p>this has been solved a long time ago... changes comitted in OpenWRT already<br /><a href="https://dev.openwrt.org/changeset/30809/">https://dev.openwrt.org/changeset/30809/</a></p><p>please refer to these pages if interested in this router:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=34878">https://forum.openwrt.org/viewtopic.php?id=34878</a><br /><a href="http://wiki.openwrt.org/toh/widemac/sl-r7205">http://wiki.openwrt.org/toh/widemac/sl-r7205</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>