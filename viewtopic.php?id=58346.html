<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Can&#039;t configure router, software horribly slow and hangs.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p282509">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 06:30					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I&#039;m new here. If this is the wrong place to post this, feel free to tell me where, or move the post as adequate.</p><br /><p>I have an old adsl router which I intend to use as auxiliary wiffi access point. It is a Comtrend CT-5365. I saw that you have a firmware for it, here:</p><p><a href="http://wiki.openwrt.org/toh/comtrend/ct5365">http://wiki.openwrt.org/toh/comtrend/ct5365</a></p><p>Two downloads are suggested:</p><p>&nbsp; &nbsp; Attitude Adjustment (12.09) openwrt-96348A-122-generic-squashfs-cfe.bin<br />&nbsp; &nbsp; Backfire backport (10.03.1) openwrt-96348GW-generic-squashfs-cfe_backfire_10.03.1.bin</p><p>(the second one is a dead link).</p><p>It is the first time I have flashed a router, but as this unit is &quot;disposable&quot;, I took the chance to try. :-)</p><p>I flashed the device without problems and fast. I connected to it, and started configuring it. Nice web page. The problem is that it works horribly slow: some pages time out and I have to reload them. Some pages do not load at all after several retries. Some produce some CGI error. For instance:</p><div class="codebox"><pre><code>XML Parsing Error: unclosed token Location: [url]http://192.168.1.201/cgi-bin/luci/;stok=51e3afef1729d1ed422de3ca0aa276af/admin/system/[/url] Line Number 301, Column 21026:
    &lt;option id=&quot;cbi-system-cfg02e48a-zonename-UTC&quot; value=&quot;UTC&quot;&gt;UTC&lt;/option&gt;&lt;option id=&quot;cbi-system-cfg02e48a-zonename-Africa/Abidjan&quot; value=&quot;Africa/Abidjan&quot;&gt;Africa/Abidjan&lt;/option&gt;&lt;option id=&quot;cbi-system-cfg02e48a-zonename-Africa/Accra&quot; value=&quot;Africa/Accra&quot;&gt;Africa/Accra&lt;/option&gt;&lt;option id=&quot;cbi-s
... 
(trimmed)
...</code></pre></div><p>Via SSH, it is also slow. &quot;top&quot; shows a very busy process which I guess should not be there, not that busy:</p><div class="codebox"><pre><code>Mem: 12376K used, 608K free, 0K shrd, 844K buff, 2408K cached
CPU:   1% usr  91% sys   0% nic   7% idle   0% io   0% irq   0% sirq
Load average: 5.70 4.74 2.45 2/38 1237
  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND
  661     2 root     SW       0   0%  83% [irq/32-b43]
  684     1 root     S     1440  11%   3% hostapd -P /var/run/wifi-phy0.pid -B
  114     2 root     SW       0   0%   2% [mtdblock2]
 1156   998 root     R     1508  12%   1% top
  992     1 root     S     1508  12%   1% /usr/sbin/ntpd -n -p 0.openwrt.pool.n</code></pre></div><p>At present, I&#039;m unable to reach the page to edit WiFi parameters. I managed to click on &quot;enable&quot;, but after that, impossible to go further, even after several reboots. As I say, pages take for ever to load (minutes, time outs, cgi errors). I simply can not use this unit like this...</p><p>Did I use a beta firmware, perhaps?<br />Does that firmware work on my unit, or are there known problems?<br />Can I do something else, did I do something wrong?</p><p>If you need more info, just ask. I&#039;m an old hand with Linux, just not with openwrt. The command line does not scare me easily. :-)</p><p>Thanks in advance</p><p>Carlos E.R.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282512">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">norman25</div>
					<div class="post-datetime">
						6 Jul 2015, 06:57					</div>
				</div>
				<div class="post-content content">
					<p>please try a barrier breaker<br /><a href="http://downloads.openwrt.org/barrier_breaker/14.07/brcm63xx/generic/openwrt-96348A-122-generic-squashfs-cfe.bin">http://downloads.openwrt.org/barrier_br … fs-cfe.bin</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282514">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 07:20					</div>
				</div>
				<div class="post-content content">
					<p>Ok... what&#039;s a barrier breaker, the name of another release? I&#039;m not familiar with the names here.</p><p>I will try it tomorrow, thanks. It is 6 AM here, I have been trying for hours...</p><p>The router works, I just connected my tablet to it via wifi. I more or less configured WiFi with &quot;vi&quot;. The signal is stronger than my ISP router, so that&#039;s good :-)</p><p>Anyway, I downloaded the file. It is the same name as the firmware I already flashed, but bigger.</p><div class="codebox"><pre><code>-rw-r--r-- 1 cer users 2883588 Apr  3  2013 openwrt-96348A-122-generic-squashfs-cfe.bin
-rw-r--r-- 1 cer users 3407876 Oct  2  2014 openwrt-96348A-122-generic-squashfs-cfe.bin.1</code></pre></div><p>This naming is confusing...</p><p>Ok, I&#039;ll continue tomorrow. Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282554">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 15:35					</div>
				</div>
				<div class="post-content content">
					<p>Ok, flashed with that barrier breaker.</p><p>The pages are beautiful, but *horribly* slow to load. I tried for an hour, and I only managed to change the IP via direct edit with &quot;vi&quot;. It is impossible to display the network/interfaces/lan settings web page. I only get the header of the page (after one or two reloads):</p><div class="codebox"><pre><code>OpenWrt

    Status    System    Network    Logout

Interfaces - LAN

On this page you can configure the network interfaces. You can bridge several interfaces by ticking the &quot;bridge interfaces&quot; field and enter the names of several network interfaces separated by spaces. You can also use VLAN notation INTERFACE.VLANNR (e.g.: eth0.1).
Common Configuration

    General Setup    Advanced Settings    Physical Settings    Firewall Settings</code></pre></div><p>And nothing more, I can not configure anything. Clicking doesn&#039;t produce any response.<br />CPU usage (says &quot;top&quot;) is 99%, distributed on several process, till it goes fully idle and the page doesn&#039;t display the rest of the text. Sorry, can&#039;t paste, because to connect to the router I don&#039;t have Internet connection (I connect one or the other router, physically) — at least till I can tell this thing where is the default gateway, and this I don&#039;t know what file configures it to do it via ssh.</p><p>I tried for an hour, most of the time just waiting for the page to load.</p><p>At least with the image I had flashed yesterday I got the router routing. With this new one I can do nothing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282563">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						6 Jul 2015, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>This model only has 16 MB of RAM, and that is running out.&nbsp; &nbsp;You should probably kill the web interface and configure via command line instead.&nbsp; AA is the one to use; later versions require more RAM.</p><p>To set up a basic &quot;dumb AP&quot; by command line:</p><p>In /etc/config/dhcp, add &#039;option ignore 1&#039; to the LAN section so the DHCP server does not run.<br />in /etc/config/network, lan section, set a static IP different from your main router and add &#039;option gateway&#039; and &#039;option dns&#039; in lan pointing to your main router.<br />in /etc/config/wireless, remove the &#039;disabled&#039; line at the top and edit the AP section to have the SSID and security that you want.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 6 Jul 2015, 16:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282565">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 17:27					</div>
				</div>
				<div class="post-content content">
					<p>Well, what can I say... the original firmware web page worked fine.</p><p>What is &quot;AA&quot;?</p><p>If this is the case, please write that information on the <a href="http://wiki.openwrt.org/toh/comtrend/ct5365">http://wiki.openwrt.org/toh/comtrend/ct5365</a> page so that others don&#039;t start this road unawares. :-(</p><p>Yes, configuring via ssh and vi is what I&#039;m doing, but I&#039;m having difficulties finding documentation for each file in the config directory. What you say I already did. Missing is finding out what is the option keyword syntax for the wifi password.</p><p>I will revert to the firmware I had yesterday, that one at least works somewhat. It is smaller.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282566">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">norman25</div>
					<div class="post-datetime">
						6 Jul 2015, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m sorry i dont see the low memory in this router you can try backfire!<br /><a href="http://downloads.openwrt.org/backfire/10.03.1/brcm63xx/openwrt-96348GW-generic-squashfs-cfe.bin">http://downloads.openwrt.org/backfire/1 … fs-cfe.bin</a><br />and for easy configuring you can use ssh and scp in linux or winscp and putty in windows.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282577">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I figured out what &#039;AA&#039; stands for: you name releases, instead of use version numbers. Current is &quot;Barrier Breaker&quot; and I will stick to it, as it is supported, using ssh only.</p><p>I found a configuration program called &quot;uci&quot;, but I&#039;m unsure it works (I don&#039;t see the changes written to the files). The configuration files options are documented in <a href="http://wiki.openwrt.org/doc/uci">http://wiki.openwrt.org/doc/uci</a></p><p>What I need now is a way to stop the web interface from running at all, so that it doesn&#039;t use memory nor cycles. What&#039;s the best way to achieve this (via ssh, of course)?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282580">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">norman25</div>
					<div class="post-datetime">
						6 Jul 2015, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>yes the name releases in newer version are know as AA (Attitude Adjustment) BB (Barrier Breaker) and CC (Chaos Calmer, in Release Canditade not the final release yet, for testing only)<br />yes&nbsp; UCI works for you read the wiki.<br />to stop the web interface use opkg.<br /><a href="http://wiki.openwrt.org/doc/techref/opkg">http://wiki.openwrt.org/doc/techref/opkg</a><br />opkg remove luci</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282581">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 21:15					</div>
				</div>
				<div class="post-content content">
					<p>The router sometimes becomes unresponsive even over ssh, and i see a very busy kernel process,&nbsp; irq/32-b43:</p><div class="codebox"><pre><code>Mem: 11952K used, 768K free, 0K shrd, 452K buff, 1228K cached
CPU:   0% usr  99% sys   0% nic   0% idle   0% io   0% irq   0% sirq
Load average: 6.62 3.67 1.79 7/35 865
  PID  PPID USER     STAT   VSZ %VSZ %CPU COMMAND
  781     2 root     SW       0   0%  90% [irq/32-b43]
   91     2 root     RW       0   0%   2% [kswapd0]</code></pre></div><p>That doesn&#039;t look normal.<br />(there is about 10% free ram)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282583">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">carlos.e.r</div>
					<div class="post-datetime">
						6 Jul 2015, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>This thing is running so busy, that it doesn&#039;t even &quot;route&quot;. A tablet connected to it stops working, can&#039;t get a connection, when it was working fine minutes earlier.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282589">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">norman25</div>
					<div class="post-datetime">
						6 Jul 2015, 22:13					</div>
				</div>
				<div class="post-content content">
					<p>see here:<br /><a href="https://dev.openwrt.org/ticket/11178">https://dev.openwrt.org/ticket/11178</a><br />i&#039;m think is a b43 driver problem</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282652">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">vilpalu</div>
					<div class="post-datetime">
						7 Jul 2015, 10:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>carlos.e.r wrote:</cite><blockquote><p>Ok, I figured out what &#039;AA&#039; stands for: you name releases, instead of use version numbers. Current is &quot;Barrier Breaker&quot; and I will stick to it, as it is supported, using ssh only.</p><p>I found a configuration program called &quot;uci&quot;, but I&#039;m unsure it works (I don&#039;t see the changes written to the files). The configuration files options are documented in <a href="http://wiki.openwrt.org/doc/uci">http://wiki.openwrt.org/doc/uci</a></p><p>What I need now is a way to stop the web interface from running at all, so that it doesn&#039;t use memory nor cycles. What&#039;s the best way to achieve this (via ssh, of course)?</p></blockquote></div><p>&quot;uci commit&quot; command writes changes to config files. <br />yes, if you want to stop web interface you must do it from ssh console</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282669">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						7 Jul 2015, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>The web server is uhttpd.<br /></p><div class="codebox"><pre><code>/etc/init.d/uhttpd disable</code></pre></div><p>should prevent it from starting up on boot.</p><p>Burning all of your CPU in an ISR does look like a driver problem.&nbsp; There are several choices of Broadcom wifi drivers.&nbsp; Is this unit n capable or just b/g?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363089">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">jimmytaker</div>
					<div class="post-datetime">
						2 Aug 2017, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>Well, none of the firmwares on openwrt or LEDE work ok, however, this one (fix the link yourself - remove the spaces, I cannot post links):<br /><a href="http://foro.seguridadwireless.net%20/%20openwrt%20/%20open-wrt-en-comtrend-5365/">foro.seguridadwireless.net / openwrt /&nbsp; … rend-5365/</a><br />(based on 10.03.1) seems to do the job.<br />I am using it to establish a PPPoE connection on eth1.0 (one of the LAN ports) and connect to the router over WiFi/the other 3 LAN ports as a bridge over eth1.1 and the wlan. The WiFi is working as fast as a &#039;g&#039; network can go and LuCI is responsive.<br />Note: enabling the Switch Tab in Luci and correctly configuring the VLANs is only initially possible through SSH.</p>											<p class="post-edited">(Last edited by <strong>jimmytaker</strong> on 3 Aug 2017, 02:52)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>