<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Port forwarding stops working after a while</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 4 Mar 2018 and 18 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=13533&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=13533&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=13533&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p96203">
				<div class="post-metadata">
					<div class="post-num">Post #126</div>
					<div class="post-author">Chris Jenks</div>
					<div class="post-datetime">
						22 Oct 2009, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>The random port number forwarding bug is still alive and well in r16473 of the openwrt-wrt54gs-squashfs.bin for 2.4 kernel from x-wrt.org.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96260">
				<div class="post-metadata">
					<div class="post-num">Post #127</div>
					<div class="post-author">ubermage</div>
					<div class="post-datetime">
						22 Oct 2009, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m having this problem with the most recent release.&nbsp; I&#039;m not using QoS or PPTP so I&#039;m not sure why I&#039;d have this problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96266">
				<div class="post-metadata">
					<div class="post-num">Post #128</div>
					<div class="post-author">jmr0th</div>
					<div class="post-datetime">
						23 Oct 2009, 00:10					</div>
				</div>
				<div class="post-content content">
					<p>It suffices if the PPTP support is in there, you do not have to use it AFAIK.<br/>Building an own image from a more recent version from SVN should solve the problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p96862">
				<div class="post-metadata">
					<div class="post-num">Post #129</div>
					<div class="post-author">ubermage</div>
					<div class="post-datetime">
						4 Nov 2009, 05:49					</div>
				</div>
				<div class="post-content content">
					<p>Is there a chance that an official release might be made?&nbsp; I don&#039;t believe it&#039;s very easy for me to build a WRT54G bin for SVN that works with LuCI...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103290">
				<div class="post-metadata">
					<div class="post-num">Post #130</div>
					<div class="post-author">aczlan</div>
					<div class="post-datetime">
						19 Feb 2010, 22:34					</div>
				</div>
				<div class="post-content content">
					<p>Any updates on this? I am seeing this issue on several boxes here at work. We are running WRT54GL V1.1 hardware with OpenWRT version 8.09.1 firmware (r16278 I think).</p><p>Rebooting seems to be the only way to fix this and I would prefer not to have to reboot more than the current midnight reboot.</p><p>Thanks</p><p>Aaron Z</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p103301">
				<div class="post-metadata">
					<div class="post-num">Post #131</div>
					<div class="post-author">netprince</div>
					<div class="post-datetime">
						20 Feb 2010, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried 8.09.2?&nbsp; The release notes mention this bug has been fixed.&nbsp; I have not had this problem in quite a long time at this point.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104781">
				<div class="post-metadata">
					<div class="post-num">Post #132</div>
					<div class="post-author">aczlan</div>
					<div class="post-datetime">
						17 Mar 2010, 19:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>netprince wrote:</cite><blockquote><p>Have you tried 8.09.2?&nbsp; The release notes mention this bug has been fixed.&nbsp; I have not had this problem in quite a long time at this point.</p></blockquote></div><p>Not yet, the location that was having this issue stopped having it, so it has gone down in the list of important things to get done.</p><p>Aaron Z</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p104840">
				<div class="post-metadata">
					<div class="post-num">Post #133</div>
					<div class="post-author">thomasw</div>
					<div class="post-datetime">
						19 Mar 2010, 02:43					</div>
				</div>
				<div class="post-content content">
					<p>8.09.2 does *not* fix the bug, even though the release notes claim to do so.&nbsp; However, it has recently been fixed with r19761. Merging that revision to the 8.09.2 branch fixes NAT definitely, I&#039;ve been running this for weeks now and the NAT bugs are definitely fixed. More details at <a href="https://dev.openwrt.org/ticket/2558">https://dev.openwrt.org/ticket/2558</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106487">
				<div class="post-metadata">
					<div class="post-num">Post #134</div>
					<div class="post-author">h1kz0r</div>
					<div class="post-datetime">
						9 Apr 2010, 22:02					</div>
				</div>
				<div class="post-content content">
					<p>This is becoming a common frustration. How do we get the r19761 on an existing system, or have a new bin file including it?<br/>I&#039;m using WRT54GLv1.1 with the latest stable 8.09.2 and I could redirect 8080 to 8080 on an internal server, however redirecting any other port seems to fail for some reason like i see the iptables rules but they&#039;re not functional :\<br/>I tried to redirect Asterisk, SSH, Web and DB traffic but nothing is working except that 8080 port for some reason.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106492">
				<div class="post-metadata">
					<div class="post-num">Post #135</div>
					<div class="post-author">Void Main</div>
					<div class="post-datetime">
						9 Apr 2010, 23:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thomasw wrote:</cite><blockquote><p>8.09.2 does *not* fix the bug, even though the release notes claim to do so.&nbsp; However, it has recently been fixed with r19761. Merging that revision to the 8.09.2 branch fixes NAT definitely, I&#039;ve been running this for weeks now and the NAT bugs are definitely fixed. More details at <a href="https://dev.openwrt.org/ticket/2558">https://dev.openwrt.org/ticket/2558</a></p></blockquote></div><p>That&#039;s weird. I haven&#039;t had a problem on 8.09.2 and definitely had the annoying bug for a couple of years prior to upgrading to that. If it wasn&#039;t fixed it was certainly improved for me, unless you are referring to a problem other than the specified forwarded port mysteriously changing to a different port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106507">
				<div class="post-metadata">
					<div class="post-num">Post #136</div>
					<div class="post-author">thomasw</div>
					<div class="post-datetime">
						10 Apr 2010, 07:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Void Main wrote:</cite><blockquote><p>That&#039;s weird. I haven&#039;t had a problem on 8.09.2 and definitely had the annoying bug for a couple of years prior to upgrading to that. If it wasn&#039;t fixed it was certainly improved for me, unless you are referring to a problem other than the specified forwarded port mysteriously changing to a different port.</p></blockquote></div><p>I had it on 7.x (I think), and all 8.09.x releases.&nbsp; I have an asterisk voip server running <strong>behind</strong> my openwrt router, so I have to map a range of ports to that server.&nbsp; Before this one revision, my asterisk voip server would randomly lose it&#039;s registration to one of my sip providers (but not all were affected), usually after several hours or almost a day.&nbsp; This happened on a daily basis.&nbsp; I assume that the packets were forwarded to the wrong port, like all other people suggested.&nbsp; It didn&#039;t matter whether I mapped the whole range of ports in one rule, or set up a rule for each port individually.&nbsp; Anyway, after applying that one patch to 8.09.2 this bug definitely is fixed.&nbsp; My asterisk has been working great for weeks with no interruption whatsoever.&nbsp; I wasn&#039;t able to use openwrt until this fix, so I&#039;ve been trying all releases for the past year or two, none of which worked properly.</p>											<p class="post-edited">(Last edited by <strong>thomasw</strong> on 10 Apr 2010, 07:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106509">
				<div class="post-metadata">
					<div class="post-num">Post #137</div>
					<div class="post-author">thomasw</div>
					<div class="post-datetime">
						10 Apr 2010, 07:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>h1kz0r wrote:</cite><blockquote><p>How do we get the r19761 on an existing system, or have a new bin file including it?</p></blockquote></div><p>Make sure subversion (svn) is installed on your machine.&nbsp; Then checkout the 8.09.2 tag and apply r19761.&nbsp; Then compile according to the build instructions.</p><div class="codebox"><pre><code>svn co svn://svn.openwrt.org/openwrt/tags/8.09.2 kamikaze_8.09.2
svn merge -c 19761 svn://svn.openwrt.org/openwrt/trunk/ kamikaze_8.09.2/</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106569">
				<div class="post-metadata">
					<div class="post-num">Post #138</div>
					<div class="post-author">kheston</div>
					<div class="post-datetime">
						11 Apr 2010, 00:00					</div>
				</div>
				<div class="post-content content">
					<p>Outgoing traffic is always fine, but every so often, traffic to port forwarded servers ceases.&nbsp; It often goes weeks at a time with no issues, not sure what triggers the problem.&nbsp; A reboot always cures it.</p><p>I&#039;m going to try r19761 and see if it cures it.</p><p>Thomas, thanks for posting!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106577">
				<div class="post-metadata">
					<div class="post-num">Post #139</div>
					<div class="post-author">thomasw</div>
					<div class="post-datetime">
						11 Apr 2010, 02:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kheston wrote:</cite><blockquote><p>Outgoing traffic is always fine, but every so often, traffic to port forwarded servers ceases.&nbsp; It often goes weeks at a time with no issues, not sure what triggers the problem.&nbsp; A reboot always cures it.</p></blockquote></div><p>This is exactly what I experienced.&nbsp; I haven&#039;t seen this issue in more than a month with this one revision applied.&nbsp; Let me know if this fixed it for you, too.&nbsp; Good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p171198">
				<div class="post-metadata">
					<div class="post-num">Post #140</div>
					<div class="post-author">Psychokiller</div>
					<div class="post-datetime">
						28 Jun 2012, 23:05					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://dev.openwrt.org/ticket/2558">https://dev.openwrt.org/ticket/2558</a></p><p>I think this bug has reappeared (or is still here) in 10.03.1, while I never experienced with 10.03...</p><p>I think I will revert back to 10.03 :-(</p><p>Or does anyone have any news?</p><p>Paolo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p175965">
				<div class="post-metadata">
					<div class="post-num">Post #141</div>
					<div class="post-author">watou</div>
					<div class="post-datetime">
						27 Aug 2012, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>I see my port redirects stop working after usually a couple hours on my Vera 3 router, which is running OpenWrt 10.03.1.&nbsp; In the OpenWrt web ui, I can restart iptables and the port redirects start working again.&nbsp; Would love to see this fixed as it&#039;s a real pain.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p182470">
				<div class="post-metadata">
					<div class="post-num">Post #142</div>
					<div class="post-author">gbi</div>
					<div class="post-datetime">
						5 Nov 2012, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I&#039;m posting only for the records.</p><p>I had this issue with 8.09.1 on a WRT54GL. I updated the WRT54GL to 8.09.2, and the problem went away. The uptime of the device is 60 days now, runs like a charm (regarding this issue and issues in general :-), runs extremely stable ).</p><p>Keep up the good work :!:</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336038">
				<div class="post-metadata">
					<div class="post-num">Post #143</div>
					<div class="post-author">xiaosong8584</div>
					<div class="post-datetime">
						26 Aug 2016, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Jakabin wrote:</cite><blockquote><p>603-netfilter_nat_pptp.patch.fix.patch</p></blockquote></div><br/><p>The 603-netfilter_nat_pptp.patch.fix.patch is not downloadable,<br/>could you send it to me ? <br/>why 603-netfilter_nat_pptp.patch caused the bug?<br/>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 6 of 6</div><nav><ul><li><a href="viewtopic.php%3Fid=13533&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=13533&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=13533&amp;p=5.html">5</a></li><li class="pagination-current"><span>6</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>