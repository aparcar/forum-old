<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [TP-Link] Firmware Change Bricked WA-701, Weird UART Output Afterwards</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p327815">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">murdertrk</div>
					<div class="post-datetime">
						9 Jun 2016, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>While trying to load original firmware on my TP-Link WA-701ND, I got the error &quot;cannot erase the block&quot; error and then I restarted the access point (not knowing that this is a no-no thing). Obviously, my access point got bricked after this faulty move. After power-on, power light is switched on. After couple of milliseconds (500 to 1000, I haven&#039;t measured the exact timing), all LEDs are turned on, then only power LED is on (this loop goes on and on...).&nbsp; Although ethernet cable is plugged to the device and to the computer, computer does not recognize the connection.</p><p>Now I am trying to restore original firmware on this device. I found that TFTP &amp; UART connection does wonders on this device. I had a cheap Chinese USB-TO-UART (RS232 in TTL voltage levels) converter based on chip CH340G, unfortunately without 3.3V-5V switch. I thought that giving it a go was a coherent idea.</p><p>After connecting with UART, adjusting all settings correctly (this includes things like baud rate and parity) I get some output but unfortunately it is consisting of random characters. I tried with two programs (termite and putty) results are same. When I removed the connections and only connected rx to tx to check the conversion module, I successfully read what I have written. Although receiving from access point does not work, When I write &quot;tpl&quot; from the console, this loop stops and nothing is printed out from UART. Computer recognizes that ethernet cable is connected.</p><p>I need exact guide for this device starting from here. </p><p>PS: Output from AP, I tried inverting bits but it didnt work either. <br />[00]<br />Š#!UI½İ´Š®L&nbsp; &nbsp; [02]¨SÉA²Ò0±ª °N§ÓÒµŠ¨<br />Š[10][15]Ò‘Âánšš°Jªu¢ëK5ŠC!”[15]5i šÒ€3(È¬9[16]ÂÕò‹¹ ëfï.Ês®É©<br />iä’•Å¤‚xLÂ‚¦¶ˆf¬Ø.[0B]š¥éå¢Ê™Ó‚ÂŒš•c´KckÙ´ê “*<br />Æ+Í¡º[02]Â ÍhÈU³ZkA¤YVÕ¬[17]*ù¶Z®ËË•¹ôC¡HøI«‚€‚³Y®+±<br />ŠªÑ:€‚³Y®+±<br />Š1®é  š•ÉéX«<br />N¥—[02]‚€˜ÖÒ”z•Ù¥×•Ù©W[0B]±¥zYÉr<br />¡ê[01]vX«‘ X[16]Éå®©[0B]2±…óë‚UóZk[01]æZ•‘ X[16]Éåî5<br />Î[0B]ÒÅìZ[16]Š‘Ñ²™®A©[0B]2Ñ¡[0E]ë‚µNëİ€V‹•‘ X[16]V•Í³Cá:[1A]Ù§[0C]‚ÂU ¬ÖV[02]‚¸3Š¢a–á°&#039;‚‚ºšºÓé.&#039;’iá–ÈaçSÂ0ß¡y•Õ´[1D]<br />Š[19][17][0B][02]ÊÁá:[1A]™1‚Â™ ¬ÖI Âİ’,“È¥[17][0B]ò °ÒÂ3ºÓé0¹&#039;’iá–ÈaôKÍI¶%•İßZ«Ñß+¹5ŠP[15]J5¥²:’Õ³[19]—Å®[16]šÉ–[03]!Q¡RªòššÉ6€®V•Ñ ÖË•áa§“¢Â¿á¹5•ñµ[01]áe´+[02]ªÁ<br />¡[16][17][0B]b Y[17]+j<br />[1D]×K½oWË Z[0B]Š‚såìËÑóCá£[04][12]İ¯WËİ š+İ¥<br />ÑA¹[16]’Â°‚ ÉÉjŠ[02]‚Uîì«ÁòÙ®Nëİ€IVÙ¥[0B]Jµ…gY²&nbsp; &nbsp; ¢½½ ,ë[01]u+½µğ.ÖÍå[16]ÚÑòYµ±ÚSEÒªJ[05]Š‚jÕí´’[15]…[15]ş<br />¡H•[0B]¨ëÑ L)r4B*…r’â€&amp;Šâ€[0B]‚ÊšSÒ•Š¨<br />Š0[15]Ò‘Â¡nšš°Jªu¢ëK[15]Š[03]!”[15]5i šÒ Í(Èlå[16]ÂÕò+Ëİ Ë[0B]²½é€Œ®Ér<br />ái¤’•Å¤‚øLÂÂ¦Vˆf¬˜.[0B]š¥éå¢Ê9´&amp;Â, nÖÑï.šıõ‹= “j<br />Æ+Íáº[02]4j‰áU³ZkA¤[19]Võ¬[17]*Ù¶[1A]®ËµeK[15]Š[03]áÉ«‚  š•ÉéX«<br />Ï]—[02] š•ÉéX«<br />Å®é  š•ÉéX«<br />N¥—[02]‚€˜ÖÒ”z•n¥×•¹¥ôZ±¥úYÉr¡ê[01]öX«‘ X[16]Éåîiî2±ÅóË&nbsp; &nbsp; *ÍÅ®[16]2Å¸[19][16]Š‘d.ÖÍ<br />¡ê[01]vX+‘ X[16]V•Í³J¹A†+Íá®ªÍå®[16]2å¸Y[16]Š‘d²¹®5<br />º[1A]™±‚âU ¬ÖI Âİ1±“Èeô[0B]ò °ÒÂ3ºÓé0¹&#039;’iá¶ÈaçS¢‚ß¡y5Õ´[1D]<br />Š[19][17][0B][02]u5<br />º[1A]™±‚â™ ¬ÖI Âİ2±³Èeô+ò °ÒÂ3ºÓé0¹&#039;[12]iá¶ÈaôKÍI¶%•İŸZ«ÑŸ+¹5ŠP[15]J5¥²º’•Íå—¥¹çšÉ–#!Q¡ÒªÒ: ®Ò òY®[16][17]¢½nY#áaÖÒ´zÁÁ¹5•ñµAáe´+[02]êÁ<br />¡[16][17][0B]â Y[17]+j<br />¡[1D]×K½o[17]Ë Z[0B]Š .Ö½nV5Š£[04][12]İ¯WËİ š+İ¥ŠÑA™[16]’Â‚ ÉÉjŠ[02] Uk½mÉe³®ë[01]KY.«±A‰ÛÕ ÉÉ‚”ë[0B]’¥gªÙ£«[0B]é¥Î•Ñ [0E][17]Õ¡[1B]ŠU[05] Q*êJ[05]Š‚êÕí´[12][15]¥[15]ş<br />ŠC¡U)½½ôŠ²‘‰[02]¢8.Ò”’°[0C]ª ÊºM“’µJÈ<br />ŠP•’±BŠÉ¹æÂ) ÕIıï·È<br />ŠT[15]µº[02]3&amp;*‰<br />!«‘ —É¹ik¯[0B]2½É L.ÉÉjŠ©[16]’Õ¡[16]‚ÂÅ0‚Â°––H¦+ÍÁ€N«Õ€SÊâ“¢¬š•Í´Kc¯]KA½²´C![14]+Í¨&#039;[02]¢ S¨Hø•NËİ V–Åµ‹e®W+İ®›Ö‹5<br />CáI®[07][02]‚€NVÅ¡«¨Oµ—[02]‚€NV¥…lC¡TÉi [02]sY®+±5ŠNåW‚  XÖ’´ú•ùå÷Uùé7+ñéo–Éé*Šê[0B]ò…lZ[16]<br />‘ÑòÙ®[0E]J¹[01]F[0B]Í¡.ªÍ¥n[16]²¥øY[16]<br />‘Ñ²Ù®5Šê[0B]²…l©[16]<br />‘‘òY®[0E]JÙ [14]+í¨&nbsp; &nbsp; ªí©ëf©Õä<br />‘ÑòÙ®N¨: ¬ÖE ÂÕ ãöÉ °]1LSHhÑ¨Ò ‚Ò&amp;§“i°N&#039;[12]éa¤C¡İ·[06]zÁh^µ•t]AA–Á°ªÁ[15]Š: ¬ÖE Â™A£öÉ °]2LSHhÑ¨L&#039;‚°&#039;šÒ·–‚Êº[12]éa¤[03]¡ñ¨ÎÉ6ŸNÖ½©+K½¬[18]ë<br />[15]<br />µÉ6&#039;Ò•sY[17]7Ëİ ®²jŠP[15]J5¥²:šÉ–’•s¥[17]&quot;½¹åCá¡ÖSÂ[05]¡y¿®–ÕÁ Cá¥[17]+‚µ5ŠY[17][0B]b‚¥[17]+*Š—İ¢ëKÅ®[16]JÙ [0C]šÕ£ËKíá#ƒ[12]½o´:k©»e<br />ñ [0E][16]Ò°‚°r².!‚ Õk½õğnÖÍéëKå®+ñ Ò+İår.&nbsp; &nbsp; b½o[12]¥ ]k½mÉe³®–³—•aJÕ[05][01]ÅªuÉ Lª€»WÑ[01]ÒQª[14][15]ş<br />¡H•[0B]¨ëÑ L)r4B*…r’â€&amp;Šâ€[0B]‚ÊšSÒ•Š¨<br />Š0[15]Ò‘Â¡nšš°Jªu¢ëK[15]Š[03]!”[15]5i šÒ Í(Èlå[16]ÂÕò+Ëİ Ë[0B]²½é€Œ®Ér<br />á[00]</p>											<p class="post-edited">(Last edited by <strong>murdertrk</strong> on 10 Jun 2016, 02:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p327829">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						9 Jun 2016, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried any other baud rates?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p327838">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						9 Jun 2016, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>you need to connect ground also. Rx, Tx and Ground.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p327850">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">murdertrk</div>
					<div class="post-datetime">
						10 Jun 2016, 02:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neryba wrote:</cite><blockquote><p>you need to connect ground also. Rx, Tx and Ground.</p></blockquote></div><p>Yes, yes I connected ground as well. I am quite familiar with UART process because I am an Electrical and Electronics Engineering Student. That&#039;s why I had no trouble finding the required components &amp; modules <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Moreover, I mentioned that writing &quot;tpl&quot; resulted in an expected behaviour.</p><p>On the other hand, I doubt that lack of a level shifting circuitry might be the reason. Tomorrow, I am going to try with my bi-directional level shifter circuit (it was for I2C protocol but I am quite sure it will work with UART).</p><div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>Have you tried any other baud rates?</p></blockquote></div><p>This baud rate (115200) was written at wiki, both for this AP and for other products of TP-Link.<br />In addition to this, <strong>TX to modem perfectly works</strong>, so problem is most likely due to a specific condition regarding <strong>RX from modem</strong>.</p>											<p class="post-edited">(Last edited by <strong>murdertrk</strong> on 10 Jun 2016, 02:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p328348">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">elektroman</div>
					<div class="post-datetime">
						13 Jun 2016, 21:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>murdertrk wrote:</cite><blockquote><p>This baud rate (115200) was written at wiki, both for this AP and for other products of TP-Link.<br />In addition to this, <strong>TX to modem perfectly works</strong>, so problem is most likely due to a specific condition regarding <strong>RX from modem</strong>.</p></blockquote></div><p>The first test is always to get RX from device &quot;running&quot;<br />Without connecting TX !!!<br />If you see a good readable output the baudrate is OK.</p><p>Then connect TX.<br />Important :<br />If you don&#039;t use a level shifter for TX you will damage your board permanently.</p><p>Don&#039;t use bi-directional level shifters for this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329278">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">murdertrk</div>
					<div class="post-datetime">
						21 Jun 2016, 12:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elektroman wrote:</cite><blockquote><div class="quotebox"><cite>murdertrk wrote:</cite><blockquote><p>This baud rate (115200) was written at wiki, both for this AP and for other products of TP-Link.<br />In addition to this, <strong>TX to modem perfectly works</strong>, so problem is most likely due to a specific condition regarding <strong>RX from modem</strong>.</p></blockquote></div><p>The first test is always to get RX from device &quot;running&quot;<br />Without connecting TX !!!<br />If you see a good readable output the baudrate is OK.</p><p>Then connect TX.<br />Important :<br />If you don&#039;t use a level shifter for TX you will damage your board permanently.</p><p>Don&#039;t use bi-directional level shifters for this.</p></blockquote></div><br /><p>Hello after an unintended long break (due to health issues)</p><p>The problem here is, baud rate is correct, 115.2kbps for the modem and TX works correctly. I even managed to send commands for TFTP requests. Only problem is RX from AP. I cannot receive readable data from AP.</p><p>The thing is, reading what my modem says is not cruical. I only want to restore a firmware, regardless it is default or OpenWrt.</p><p>This issue is still not solved, so I am waiting for your help.</p><p>Have a good day!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332501">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">vijaykmr228</div>
					<div class="post-datetime">
						23 Jul 2016, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>i have facing a problem with wa701nd device, when i was assigned this device as clint mode after rebooting it shows it is in access point mode, but other changes made correctly like network ip, ssid, password etc. then i upgraded its firmware, after succesfull installation of upgrading firmware the device is rebooted, then i was faced this critical problem it is not showing lan connectivity between device to pc, i want my device back&nbsp; as perfect, please direct me how to get that back as working device. on the device it shows only single power light, reset button also not responding while press and hold.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>