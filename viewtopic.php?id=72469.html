<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to execute javascript through terminal</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p367648">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Squalo</div>
					<div class="post-datetime">
						1 Nov 2017, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi to all i need a script that can help me to <br />-open a website<br />-submit password<br />-when it log in do other.</p><p>Actually I can do that through computer&#039;s browser (as chrome/firefox) with this example command<br /></p><div class="codebox"><pre><code>javascript:document.getElementById(&quot;password&quot;).value = &quot;password&quot;;auth();</code></pre></div><p>Is there a way to do it through openwrt?<br />Thanks</p>											<p class="post-edited">(Last edited by <strong>Squalo</strong> on 1 Nov 2017, 01:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367653">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						1 Nov 2017, 03:39					</div>
				</div>
				<div class="post-content content">
					<p>well that depends on what you all want to do, but curl and wget can log into pages from within shell scripts.&nbsp; perl can do most anything if you can code in it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367720">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Squalo</div>
					<div class="post-datetime">
						1 Nov 2017, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>I only want to log in and, when it is logged in, launch other function (in browser is as to click on an icon)<br /></p><div class="codebox"><pre><code>javascript: function();</code></pre></div><p>Anyone have a good idea? I searched more and more over internet but i don&#039;t find anything that can help me!</p>											<p class="post-edited">(Last edited by <strong>Squalo</strong> on 1 Nov 2017, 17:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367727">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						1 Nov 2017, 19:07					</div>
				</div>
				<div class="post-content content">
					<p>You cannot run Javascript unless you have some sort of a JS runtime. Most browsers come with a built-in engine, but there are also headless JS engines, such as PhantomJS. They are used for unit-testing web pages.</p><p>One course of action would be to compile PhantomJS from sources, execute it, and using the runtime, download the login page, manipulate the elements to insert username, password and then call the &quot;auth&quot; function. After the login request has succeeded, you proceed to do whatever it is you need to do.</p><p>EDIT: Note that this is by no means a simple ordeal. PhantomJS has a lot of build requirements, and uses python as a build environment. Expect a lot of work.</p>											<p class="post-edited">(Last edited by <strong>Antek</strong> on 1 Nov 2017, 19:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367737">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Squalo</div>
					<div class="post-datetime">
						1 Nov 2017, 21:21					</div>
				</div>
				<div class="post-content content">
					<p>Yes you are right! But how i can do that? Your solution is very difficult to do! There aren&#039;t any way to do that? Bash script or other things?<br />WWTK says that it possible to write a similar solution and execute it on openwrt with perl, it&#039;s right? How? thanks</p>											<p class="post-edited">(Last edited by <strong>Squalo</strong> on 1 Nov 2017, 21:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367765">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Antek</div>
					<div class="post-datetime">
						2 Nov 2017, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>Maybe the WWW library for Perl (LWP) will help you? <a href="http://search.cpan.org/dist/libwww-perl/lib/LWP.pm">http://search.cpan.org/dist/libwww-perl/lib/LWP.pm</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367771">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						2 Nov 2017, 22:35					</div>
				</div>
				<div class="post-content content">
					<p>In most cases, you do not need to execute any JS to emulate a login page. Do not focus on the JS, focus on the content that gets sent to the server. Most probably, all what that JS does is to prepare some variables and launch a POST against the server. Use the debugging capabilities of your browser, intercept what is sent to the server, and you will have most of the work done.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367793">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Squalo</div>
					<div class="post-datetime">
						3 Nov 2017, 13:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Antek wrote:</cite><blockquote><p>Maybe the WWW library for Perl (LWP) will help you? <a href="http://search.cpan.org/dist/libwww-perl/lib/LWP.pm">http://search.cpan.org/dist/libwww-perl/lib/LWP.pm</a></p></blockquote></div><p>I think this is the best solution ... now i&#039;m trying to create the script! </p><div class="codebox"><pre><code>&lt;form method=&quot;post&quot; action=&quot;index.lp&quot; name=&quot;authform&quot; id=&quot;authform&quot;&gt;
&lt;input type=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; onkeypress=&quot;return enter_submit(event);&quot; /&gt;
&lt;input name=&quot;enter&quot; class=&quot;btn btn-primary&quot; type=&quot;button&quot; value=&quot;log in&quot; onclick=&#039;auth()&#039; /&gt;</code></pre></div><p>Now i&#039;m testing it on computer and have some problem:<br />1) Perl need a c compiler...after i can install it on openwrt?<br />2) I can try 2 different ways, <br /><strong>The first</strong> and more rapid is to use WWW::Scripter::Plugin::JavaScript but i cannot install the module because i cannot install mingw (i did, in ppm-shell, install mingw and it return &quot;ppm install failed: Can&#039;t find any package that provides mingw&quot;). Furthermore i don&#039;t see WWW::Scipter in <a href="https://lede-project.org/packages/index/languages---perl">https://lede-project.org/packages/index â€¦ ges---perl</a><br />I wrote that script (can it work?):<br /></p><div class="codebox"><pre><code>  use WWW::Scripter;
  $w = new WWW::Scripter;
  
  $w-&gt;use_plugin(&#039;JavaScript&#039;);
  $w-&gt;get(&#039;http://url&#039;);
  $w-&gt;get(&#039;javascript:document.getElementById(&quot;password&quot;).value = &quot;password&quot;;auth();&#039;);
  sleep (1);
  $w-&gt;get(&#039;http://url&#039;);
  $w-&gt;get(&#039;javascript: function();&#039;);</code></pre></div><p><strong>The second</strong> is to use WWW:Mechanize. How i can see output page? And how i can send command to the second page? Now with that script i get this error: &quot;Missing base argument at D:/Program Files/Perl/lib/HTTP/Response.pm line 92.&quot;<br />(can it work?)</p><div class="codebox"><pre><code>    use WWW::Mechanize;
    my $mech = WWW::Mechanize-&gt;new();

    $mech-&gt;get( $url );

    $mech-&gt;follow_link( url =&gt; &#039;http://url&#039; );

    $mech-&gt;submit_form(
        form_name =&gt; &#039;authform&#039;,
        fields    =&gt; { password  =&gt; &#039;password&#039;, },
        button    =&gt; &#039;log in&#039;
    );</code></pre></div><br /><div class="quotebox"><cite>eduperez wrote:</cite><blockquote><p>In most cases, you do not need to execute any JS to emulate a login page. Do not focus on the JS, focus on the content that gets sent to the server. Most probably, all what that JS does is to prepare some variables and launch a POST against the server. Use the debugging capabilities of your browser, intercept what is sent to the server, and you will have most of the work done.</p></blockquote></div><p>I&#039;ve already read the http header but it use some md5 (i think) and i don&#039;t know how to solve! I think also that with script i can solve quickly...</p>											<p class="post-edited">(Last edited by <strong>Squalo</strong> on 3 Nov 2017, 13:47)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>