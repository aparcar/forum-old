<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Atheros AR9132 : No Wifi N</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p93250">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cailleaux</div>
					<div class="post-datetime">
						27 Aug 2009, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m not sure wether I should raise a ticket to kernel dev team, openwrt dev team or my brain...</p><p>I have a MZK-W04NU (Atheros AR9132). With the vendor&#039;s firmware, I can have Wifi N (up to 130Mbps) but with the openwrt firmware (actually trunk 17357), I can&#039;t have more than Wifi G (54 Mbps) :</p><div class="codebox"><pre><code>root@openwrt:~# iw phy
Wiphy phy0
        Band 1:
                HT capabilities: 0x104e
                        * 20/40 MHz operation
                        * SM PS disabled
                        * 40 MHz short GI
                        * max A-MSDU len 3839
                        * DSSS/CCK 40 MHz
                HT A-MPDU factor: 0x0003 (65535 bytes)
                HT A-MPDU density: 0x0006 (8 usec)
                HT MCS set: ff ff 00 00 00 00 00 00 00 00 00 00 01 00 00 00
                HT TX/RX MCS rate indexes supported:
                        MCS index 0
                        MCS index 1
                        MCS index 2
                        MCS index 3
                        MCS index 4
                        MCS index 5
                        MCS index 6
                        MCS index 7
                        MCS index 8
                        MCS index 9
                        MCS index 10
                        MCS index 11
                        MCS index 12
                        MCS index 13
                        MCS index 14
                        MCS index 15
                Frequencies:
                        * 2412 MHz [1] (20.0 dBm)
                        * 2417 MHz [2] (20.0 dBm)
                        * 2422 MHz [3] (20.0 dBm)
                        * 2427 MHz [4] (20.0 dBm)
                        * 2432 MHz [5] (20.0 dBm)
                        * 2437 MHz [6] (20.0 dBm)
                        * 2442 MHz [7] (20.0 dBm)
                        * 2447 MHz [8] (20.0 dBm)
                        * 2452 MHz [9] (20.0 dBm)
                        * 2457 MHz [10] (20.0 dBm)
                        * 2462 MHz [11] (20.0 dBm)
                        * 2467 MHz [12] (disabled)
                        * 2472 MHz [13] (disabled)
                        * 2484 MHz [14] (disabled)
                Bitrates (non-HT):
                        * 1.0 Mbps
                        * 2.0 Mbps (short preamble supported)
                        * 5.5 Mbps (short preamble supported)
                        * 11.0 Mbps (short preamble supported)
                        * 6.0 Mbps
                        * 9.0 Mbps
                        * 12.0 Mbps
                        * 18.0 Mbps
                        * 24.0 Mbps
                        * 36.0 Mbps
                        * 48.0 Mbps
                        * 54.0 Mbps
        max # scan SSIDs: 4
        Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor
                 * mesh point</code></pre></div><p>For information, the bootlog :</p><div class="codebox"><pre><code>Linux version 2.6.30.5 (niko@server) (gcc version 4.1.2) #2 Sun Aug 23 21:50:30 CEST 2009
prom: fw_arg0=00000002, fw_arg1=8006040c, fw_arg2=00000000, fw_arg3=00000000
MyLoader: sysp=00000000, boardp=00000000, parts=00000000
console [early0] enabled
CPU revision is: 00019374 (MIPS 24Kc)
Atheros AR9132 rev 1, CPU:400.000 MHz, AHB:200.000 MHz, DDR:400.000 MHz
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
On node 0 totalpages: 8192
free_area_init_node: node 0, pgdat 802a9760, node_mem_map 81000000
  Normal zone: 64 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 8128 pages, LIFO batch:0
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: rootfstype=squashfs,yaffs,jffs2 noinitrd console=ttyS0,115200
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
Writing ErrCtl register=00000000
Readback ErrCtl register=00000000
NR_IRQS:56
PID hash table entries: 128 (order: 7, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Memory: 29520k/32768k available (1924k kernel code, 3248k reserved, 426k data, 136k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Calibrating delay loop... 266.24 BogoMIPS (lpj=1331200)
Mount-cache hash table entries: 512
net_namespace: 784 bytes
NET: Registered protocol family 16
MIPS: machine is Planex MZK-W04NU
bio: create slab &lt;bio-0&gt; at 0
NET: Registered protocol family 2
Switched to high resolution mode on CPU 0
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs Aug 23 2009 17:20:26 Installing.
msgmni has been set to 57
alg: No test for lzma (lzma-generic)
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A
console handover: boot [early0] -&gt; real [ttyS0]
ag71xx_mdio: probed
eth0: Atheros AG71xx at 0xb9000000, irq 4
eth0: connected to 4 PHYs
eth1: Atheros AG71xx at 0xba000000, irq 5
eth1: connected to PHY at 0:04 [uid=004dd042, driver=Generic PHY]
Atheros AR71xx SPI Controller driver version 0.2.4
m25p80 spi0.0: m25p64 (8192 Kbytes)
Searching for RedBoot partition table in spi0.0 at offset 0x7e0000
Searching for RedBoot partition table in spi0.0 at offset 0x7f0000
No RedBoot partition table detected in spi0.0
spi0.0: no WRT160NL signature found
Creating 6 MTD partitions on &quot;spi0.0&quot;:
0x000000000000-0x000000040000 : &quot;u-boot&quot;
0x000000040000-0x000000050000 : &quot;u-boot-env&quot;
0x000000050000-0x0000001b0000 : &quot;kernel&quot;
0x0000001b0000-0x0000007e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=690000, len=150000
0x000000690000-0x0000007e0000 : &quot;rootfs_data&quot;
0x0000007e0000-0x000000800000 : &quot;art&quot;
0x000000050000-0x0000007c0000 : &quot;firmware&quot;
Atheros AR71xx hardware watchdog driver version 0.1.0
ar71xx-wdt: timeout=15 secs (max=21)
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
Freeing unused kernel memory: 136k freed
Please be patient, while OpenWrt loads ...
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
ar71xx: pll_reg 0xb8050014: 0x13000a44
eth0: link up (100Mbps/Full duplex)
eth0: link down
Registered led device: mzk-w04nu:green:status
Registered led device: mzk-w04nu:blue:wps
Registered led device: mzk-w04nu:green:wlan
Registered led device: mzk-w04nu:green:usb
Registered led device: mzk-w04nu:green:ap
Registered led device: mzk-w04nu:green:router
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
NET: Registered protocol family 10
lo: Disabled Privacy Extensions
ar71xx: pll_reg 0xb8050014: 0x13000a44
eth0: link up (100Mbps/Full duplex)
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering forwarding state
ADDRCONF(NETDEV_UP): eth1: link is not ready
cfg80211: Using static regulatory domain info
cfg80211: Regulatory domain: US
        (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
        (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
        (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
        (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)
cfg80211: Calling CRDA for country: US
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
ath: EEPROM regdomain: 0x40
ath: EEPROM indicates we should expect a direct regpair map
ath: Country alpha2 being used: JP
ath: Regpair used: 0x40
phy0: Selected rate control algorithm &#039;ath9k_rate_control&#039;
phy0: Atheros AR9100 MAC/BB Rev:0, AR2133 RF Rev:a1, mem=0xb80c0000, irq=2
cfg80211: Calling CRDA for country: JP
eth0: no IPv6 routers present
br-lan: no IPv6 routers present
RPC: Registered udp transport module.
RPC: Registered tcp transport module.
NTFS driver 2.1.29 [Flags: R/O MODULE].
ip_tables: (C) 2000-2006 Netfilter Core Team
Driver &#039;sd&#039; needs updating - please use bus_type methods
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
nf_conntrack version 0.5.0 (512 buckets, 2048 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
IMQ driver loaded successfully.
        Hooking IMQ before NAT on PREROUTING.
        Hooking IMQ after NAT on POSTROUTING.
xt_time: kernel timezone is -0000
ip6_tables: (C) 2000-2006 Netfilter Core Team
usbcore: registered new interface driver snd-usb-audio
usbcore: registered new interface driver usblp
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
ADDRCONF(NETDEV_UP): wlan0: link is not ready
device wlan0 entered promiscuous mode
br-lan: port 2(wlan0) entering disabled state
br-lan: port 2(wlan0) entering forwarding state
wlan0: no IPv6 routers present
ar71xx-wdt: enabling watchdog timer</code></pre></div><p>I am wrong or does the driver ath9k can&#039;t let this chipset working @130M ?</p><p>Another question. Is this normal ? :</p><div class="codebox"><pre><code>root@goven:~# iwlist wlan0 scan
wlan0     Interface doesn&#039;t support scanning : Operation not supported</code></pre></div><p>Thanks for anyone&#039;s help !</p><p>NiKo</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98941">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stanv</div>
					<div class="post-datetime">
						17 Dec 2009, 23:08					</div>
				</div>
				<div class="post-content content">
					<p>I have same problem.</p><p>I have DLINK DIR-615 C</p><p>phy0: Selected rate control algorithm &#039;ath9k_rate_control&#039;<br />phy0: Atheros AR9100 MAC/BB Rev:0 AR2122 RF Rev:a2 mem=0xb80c0000, irq=2<br />cfg80211: Calling CRDA for country: US</p><p> Bitrates (non-HT):<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 1.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 2.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 5.5 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 11.0 Mbps (short preamble supported)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 6.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 9.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 12.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 18.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 24.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 36.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 48.0 Mbps<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * 54.0 Mbps</p><p>kmod-ath9k_2.6.30.10+2009-12-05-8_ar71xx.ipk</p><p>Is it possible turn N mode ?</p>											<p class="post-edited">(Last edited by <strong>stanv</strong> on 17 Dec 2009, 23:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99018">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">t4ndeta</div>
					<div class="post-datetime">
						19 Dec 2009, 13:46					</div>
				</div>
				<div class="post-content content">
					<p>This list represents non-HT bitrates, in other words non 802.11n standard speeds.<br />N-speeds can be enabled by changing HostAPd configuration. N-speeds should be enabled by default, remember that e.g Intel allows higher speeds only for unsecured networks or WPA2/CCMP encrypted networks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p99020">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						19 Dec 2009, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Check your etc/config/wireless file. It needs to have the 11n specific info such as:</p><div class="codebox"><pre><code>config &#039;wifi-device&#039; &#039;wifi0&#039;
    option &#039;type&#039; &#039;mac80211&#039;
    option &#039;macaddr&#039; &#039;xxxxxxxxxxxxxxxx&#039;
    list &#039;ht_capab&#039; &#039;HT40-&#039;
    list &#039;ht_capab&#039; &#039;SHORT-GI-40&#039;
    list &#039;ht_capab&#039; &#039;DSSS_CCK-40&#039;
    option &#039;country&#039; &#039;&#039;
    option &#039;maxassoc&#039; &#039;&#039;
    option &#039;distance&#039; &#039;&#039;
    option &#039;diversity&#039; &#039;&#039;
    option &#039;txantenna&#039; &#039;&#039;
    option &#039;rxantenna&#039; &#039;&#039;
    option &#039;disabled&#039; &#039;0&#039;
    option &#039;antenna&#039; &#039;&#039;
    option &#039;hwmode&#039; &#039;11ng&#039;
    option &#039;channel&#039; &#039;05&#039;</code></pre></div><p>I&#039;m getting very good 11n speed with my Sparklan WMIA-199N Atheros 3x3 11n card--the fastest wireless connection I have ever tested.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>