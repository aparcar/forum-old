<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link Archer C7: 802.11ac slower in OpenWRT than native firmware</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 19 Apr 2018 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=53703&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53703&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53703&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53703&amp;p=9.html">9</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p253609">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">dem</div>
					<div class="post-datetime">
						8 Nov 2014, 13:42					</div>
				</div>
				<div class="post-content content">
					<p>@alphasparc&nbsp; &nbsp;If you read the whole topic from start to finish you will understand the context of the tests and the exact iperf commands used.&nbsp; &nbsp;They are clearly LAN based tests with no NAT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253645">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						8 Nov 2014, 19:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dem wrote:</cite><blockquote><p>Unfortunately I found I was getting very poor 5Ghz wireless speeds so I decided to installed iperf on the BB C7 router and run the same tests between the router and a server but this time solely via Ethernet.&nbsp; <br />This time the maximum TCP speeds I got was just over 200Mbits/sec!?&nbsp; This is supposed to be on Gigabit Ethernet.</p><p>@Mastabog&nbsp; Any chance you&#039;d be able to run the same Ethernet tests on you C7 to see what you get?<br />I&#039;m keen to test the new CC build&#039;s 5Ghz speeds next week but I want to be sure the bottleneck isn&#039;t going to be on the Ethernet first.</p><p>Has anyone else done Ethernet benchmarking on Openwrt using iPerf?</p></blockquote></div><p>I&#039;m now back on the native firmware, but I did run wired tests with iperf on the router. It&#039;s expected to be this slow. The CPU in the router can&#039;t handle the load efficiently (50%+ is actually a lot) -- when you run iperf in the router, a lot now happens at the application level, rather than in hardware (switch). You need to hook two more powerful machines with Gigabit ethernet to the router and do the iperf test on those.</p><p>I even did a 5GHz test with iperf on the router just to see how bad it is, and it was abysmal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253670">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						9 Nov 2014, 02:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mastabog wrote:</cite><blockquote><div class="quotebox"><cite>dem wrote:</cite><blockquote><p>Unfortunately I found I was getting very poor 5Ghz wireless speeds so I decided to installed iperf on the BB C7 router and run the same tests between the router and a server but this time solely via Ethernet.&nbsp; <br />This time the maximum TCP speeds I got was just over 200Mbits/sec!?&nbsp; This is supposed to be on Gigabit Ethernet.</p><p>@Mastabog&nbsp; Any chance you&#039;d be able to run the same Ethernet tests on you C7 to see what you get?<br />I&#039;m keen to test the new CC build&#039;s 5Ghz speeds next week but I want to be sure the bottleneck isn&#039;t going to be on the Ethernet first.</p><p>Has anyone else done Ethernet benchmarking on Openwrt using iPerf?</p></blockquote></div><p>I&#039;m now back on the native firmware, but I did run wired tests with iperf on the router. It&#039;s expected to be this slow. The CPU in the router can&#039;t handle the load efficiently (50%+ is actually a lot) -- when you run iperf in the router, a lot now happens at the application level, rather than in hardware (switch). You need to hook two more powerful machines with Gigabit ethernet to the router and do the iperf test on those.</p><p>I even did a 5GHz test with iperf on the router just to see how bad it is, and it was abysmal.</p></blockquote></div><p>Is it it understood that you should only run iperf on 2 separate machines from the router to simulate the actual network?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253673">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">dem</div>
					<div class="post-datetime">
						9 Nov 2014, 03:39					</div>
				</div>
				<div class="post-content content">
					<p>Okay thanks Mastabog.&nbsp; &nbsp;I&#039;ll give the C7 a quick test before I test the 5Ghz with CC although presumably it should be similar to all my other non router iperf test speeds as it will just be using the Gigabit switch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253693">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						9 Nov 2014, 09:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dem wrote:</cite><blockquote><p>Okay thanks Mastabog.&nbsp; &nbsp;I&#039;ll give the C7 a quick test before I test the 5Ghz with CC although presumably it should be similar to all my other non router iperf test speeds as it will just be using the Gigabit switch.</p></blockquote></div><p>Indeed. I already did the wired-to-wired tests and got 940+ Mbps (as reported in my 1st post). Looking forward to your wired-to-11ac tests on the new OpenWRT compiled formware with the new ath10k driver -- however, shouldn&#039;t the new driver be already in the latest trunk snapshots? It would save you the compilation time... that is if they&#039;re actually working (the trunk snapshots I tried were not even recognizing the 5GHz interface, maybe the newer snapshots are better)</p>											<p class="post-edited">(Last edited by <strong>mastabog</strong> on 9 Nov 2014, 09:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253711">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">dem</div>
					<div class="post-datetime">
						9 Nov 2014, 14:05					</div>
				</div>
				<div class="post-content content">
					<p>Yes the trunk nightly builds should be up to date.&nbsp; &nbsp;I normally build BB because the images are often over a month old and I like to have the latest bug fixes and include some other packages and configuration within my own images to speed configuration and installation.</p><p>The trunk may not have worked on your C7 with 5Ghz due to the missing kmod-ath10k support for ath10k which is not included in the image.&nbsp; I found once installed the 5Ghz radio works but I now include the kernel support in my images.</p><p>I&#039;ve also found the original wireless card I tested 5Ghz with was only 5Ghz&nbsp; 802.11n not 802.11ac so I will test it with a different card.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253727">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						9 Nov 2014, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>Sure, just make sure you will use a 11ac card with 3 spatial streams to hit 1300 Mbps PHY rate on 80 MHz channels with short guard interval (2 streams only get you 867Mbps).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253968">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">elventear</div>
					<div class="post-datetime">
						11 Nov 2014, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>I have been following this thread since I am also having some issues with a C7. By dem&#039;s suggestion I installed CC snapshot and I see some improvement in stability. I know this thread is about throughput but I wanted to share a difference that I noted between CC and BB using these tests.</p><p>When testing for UDP performance, I noticed that using BB you get higher throughput reported by iperf (~800 Mbps) but a lot of out of order packets. On CC there are barely no out of order packets (there are still lost packets), and the reported throughput by the server is lower (~500Mbps)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253976">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						11 Nov 2014, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>@elventear: Wait, are you saying that there is a CC snapshot which has a working ath10k driver (5GHz radio is working)? All the ones I tried a week ago were missing the ath10k driver and the 5GHz is not working as a result.</p><p>The out of order issue can happen due to several problems completely external to the firmware/driver (I sometimes had them, sometimes not while using the same firmware and even same login session!). I wouldn&#039;t be 100% certain that the latest CC is more stable than BB, but it is possible.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253979">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">elventear</div>
					<div class="post-datetime">
						11 Nov 2014, 22:59					</div>
				</div>
				<div class="post-content content">
					<p>This morning I did sys upgrade from BB to CC snapshot, using this image:</p><p><a href="https://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-archer-c7-v2-squashfs-sysupgrade.bin">https://downloads.openwrt.org/snapshots … pgrade.bin</a></p><p>And I installed the ath10k kernel module and I am running 802.11ac. Right out of the bat I have noticed that I have much better SNR on my 802.11ac client and it has been much more stable. I haven&#039;t done any in-depth tests because I don&#039;t really have time, but I am already seeing a big difference between CC and BB.</p><p>Regarding the out of order packets with UDP; as I said, I just did a few tests, but for me I had around 150 out of order packets in each phase of the iperf tests with BB; and this happened being a few centimeters away from the AP during my tests for every single test. After upgrading to CC, I tried the same test and only get 1 out of order packet for every test being a couple of meters away. I do think they are related to the change of firmware. But I can be wrong.</p><p>I have not tried the tests with the native firmware, and I don&#039;t think I will, I just want a stable and decent throughput (plus the other OpenWRT configurability), but I don&#039;t think CC will match what you have seen with the native firmware. You should still try the CC image and see if it works better for you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253981">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						11 Nov 2014, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>That may be your issue right there: a few centimeters away can cause signal saturation (the PHY amplifier and equalization is thrown off) and then the PHY drops MPDUs. Using UDP (which does not have ACKs) you ent up with dropped or out of order packets. That, or maybe the new driver and stack in CC are better at queuing packets from the application level, given you are forcing a higher app rate than the driver can handle. </p><p>But you did make me curious. I&#039;ll give a CC snapshot another try and install the ath10k module manually (is there a pkg for that or did you compile it?).</p>											<p class="post-edited">(Last edited by <strong>mastabog</strong> on 11 Nov 2014, 23:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p253993">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">elventear</div>
					<div class="post-datetime">
						12 Nov 2014, 01:48					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>&gt; opkg update
&gt; opkg install kmod-ath10k</code></pre></div><p>Worked for me</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254471">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">jbsnyder</div>
					<div class="post-datetime">
						15 Nov 2014, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>This is a bit off-topic to the post, but since there are Archer C7 V2 users here it seems like a good place to ask:</p><p>I&#039;ve seen quite a few posts complaining about issues with the ath10k and 5 GHz band, some saying that they get atrocious throughput on 5ghz (~6mbits).&nbsp; From some discussion on this thread it sounds like the performance is actually not miserable, but may be reduced (on the order of half) from stock firmware.&nbsp; I&#039;m not too concerned about this scale of reduction, but I&#039;m wondering whether otherwise the performance is pretty decent in terms of reliability of connections and stability?</p><p>The stock firmware has been OK (wireless stopped routing yesterday requiring a reboot, but hard connections were fine), but I&#039;d like a bit more freedom to tweak things and experiment (having runing dd-wrt, various Tomato forks and OpenWRT once or twice), but the main thing I&#039;d like is something that works reliably and doesn&#039;t have an appreciable loss in range.</p><p>Is the trunk currently a good option for this?&nbsp; Or should I stick with stock for now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254501">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">elventear</div>
					<div class="post-datetime">
						16 Nov 2014, 05:21					</div>
				</div>
				<div class="post-content content">
					<p>I would say that if you want to use OpenWRT, then CC snapshot is the way to go. But there aren&#039;t any guarantees.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254503">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						16 Nov 2014, 06:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elventear wrote:</cite><blockquote><p>I would say that if you want to use OpenWRT, then CC snapshot is the way to go. But there aren&#039;t any guarantees.</p></blockquote></div><p>I tested both and quite a few packages are broken in the CC snapshot. In terms of reliability, I didn&#039;t notice differencies but I only tested 2.4 GHz on CC. The BB release was pretty reliable on both 2.4 GHz and 5 GHz, with the performance you see reported in the 1st post. You could go for that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254963">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">anotherUser</div>
					<div class="post-datetime">
						20 Nov 2014, 03:34					</div>
				</div>
				<div class="post-content content">
					<p>This thread caught my attention so I have had a play myself. I was more interested in WAN&lt;-&gt;LAN traffic as I only use wireless for convenience. Using iperf I first tested via LAN&lt;-&gt;LAN&nbsp; to check cables connection and got 934 Mbits/sec so that checks out.</p><p>Test bed of LAN&lt;-&gt;WAN is the same wiring from 10.10.x.x to a 192.168.x.x range.<br />With TP-Link Archer_C7_V2_V3_140929 FW:<br />Test 1: 899 Mbits/sec<br />Test 2: 911 Mbits/sec<br />Test 3: 930 Mbits/sec</p><p>OpenWRT&nbsp; Barrier Breaker 14.07 ar71xx/generic:<br />Test 1: 325 Mbits/sec<br />Test 2: 323 Mbits/sec<br />Test 3: 325 Mbits/sec</p><p>Top shows that there was 0% idle (98%sirq) so I assume that the factory firmware is using hardware acceleration for routing that OpenWRT cannot / does not take advantage of?</p>											<p class="post-edited">(Last edited by <strong>anotherUser</strong> on 20 Nov 2014, 03:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254970">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						20 Nov 2014, 05:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>anotherUser wrote:</cite><blockquote><p>This thread caught my attention so I have had a play myself. I was more interested in WAN&lt;-&gt;LAN traffic as I only use wireless for convenience. Using iperf I first tested via LAN&lt;-&gt;LAN&nbsp; to check cables connection and got 934 Mbits/sec so that checks out.</p><p>Test bed of LAN&lt;-&gt;WAN is the same wiring from 10.10.x.x to a 192.168.x.x range.<br />With TP-Link Archer_C7_V2_V3_140929 FW:<br />Test 1: 899 Mbits/sec<br />Test 2: 911 Mbits/sec<br />Test 3: 930 Mbits/sec</p><p>OpenWRT&nbsp; Barrier Breaker 14.07 ar71xx/generic:<br />Test 1: 325 Mbits/sec<br />Test 2: 323 Mbits/sec<br />Test 3: 325 Mbits/sec</p><p>Top shows that there was 0% idle (98%sirq) so I assume that the factory firmware is using hardware acceleration for routing that OpenWRT cannot / does not take advantage of?</p></blockquote></div><p>Yes, there is HW NAT used by TP-Link, that is not available in openwrt for a variety of reasons. This can be disabled and it would be interesting to retest with it off in stock firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p254978">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">anotherUser</div>
					<div class="post-datetime">
						20 Nov 2014, 06:09					</div>
				</div>
				<div class="post-content content">
					<p>That sounds reasonable, results were:</p><p>With TP-Link Archer_C7_V2_V3_140929 and hardware NAT disabled:<br />Test 1: 317 Mbits/sec<br />Test 1: 318 Mbits/sec<br />Test 1: 318 Mbits/sec</p><p>Slight edge to OpenWRT without HW acceleration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255102">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">PJK</div>
					<div class="post-datetime">
						21 Nov 2014, 13:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elventear wrote:</cite><blockquote><p>I would say that if you want to use OpenWRT, then CC snapshot is the way to go. But there aren&#039;t any guarantees.</p></blockquote></div><p>What days snapshot you are running, where can i download it?</p>											<p class="post-edited">(Last edited by <strong>PJK</strong> on 22 Nov 2014, 13:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255367">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">TheDrizzle</div>
					<div class="post-datetime">
						24 Nov 2014, 09:13					</div>
				</div>
				<div class="post-content content">
					<p>same here is there a newer direct version out for the v2 then 14.07 bb?? i do not have to build (new to open wrt still learning)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255461">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">drawz</div>
					<div class="post-datetime">
						25 Nov 2014, 01:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>TheDrizzle wrote:</cite><blockquote><p>same here is there a newer direct version out for the v2 then 14.07 bb?? i do not have to build (new to open wrt still learning)</p></blockquote></div><p>you can download a nightly snapshot from downloads.openwrt.org but please keep in mind that Luci (web UI) is not included in these builds and that you can only install certain packages from the same build version. So in other words, download, flash, and install all the packages you need on the same day to avoid problems with version conflicts. There are instructions in the wiki for installing Luci from the command line.</p><p>Read these two pages before proceeding: <br /><a href="http://wiki.openwrt.org/doc/howto/snapshots">http://wiki.openwrt.org/doc/howto/snapshots</a><br /><a href="http://wiki.openwrt.org/about/latest">http://wiki.openwrt.org/about/latest</a></p><p>The wiki is a little out of date (AA is no longer the current stable version), but you can get the gist of it.</p>											<p class="post-edited">(Last edited by <strong>drawz</strong> on 25 Nov 2014, 01:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255473">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						25 Nov 2014, 03:32					</div>
				</div>
				<div class="post-content content">
					<p>@TheDrizzle Could you please create a different topic for that? This one is specific to a particular (and different) issue. Good luck with learning about OpenWRT though, you won&#039;t regret it.</p><p>@dem and @elventear: any new results with trunk CC or trunk BB+new driver?</p>											<p class="post-edited">(Last edited by <strong>mastabog</strong> on 25 Nov 2014, 03:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255659">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">dem</div>
					<div class="post-datetime">
						26 Nov 2014, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi @mastabog</p><p>I&#039;ve now tested UDP and TCP iperf with a C7 Version 2 with stock TP Link firmware (version 3.13.34)&nbsp; ,&nbsp; BB 14.07, and CC (r43186)</p><p>I have not had much spare time lately so I only tested it with a Nexus 5 which has 802.11ac although I suspect only one of the lower speed specifications&nbsp; &nbsp;AC600?</p><p>Situated right next to the C7 I got physical link speed on the Nexus 5 of 433 Mbps&nbsp; with both factory and CC.&nbsp; However with BB I only ever got 150Mbps!? link speed on 5 Ghz so I didn&#039;t even bother testing it with iPerf</p><p>Here are my results using mastabog&#039;s iPerf TCP and UDP settings.&nbsp; &nbsp;Repeated tests revealed very little difference in average speeds.</p><p>UDP test</p><p>TP-Link factory</p><p>[ ID] Interval&nbsp; &nbsp; &nbsp; &nbsp;Transfer&nbsp; &nbsp; &nbsp;Bandwidth&nbsp; &nbsp; &nbsp; &nbsp;Jitter&nbsp; &nbsp;Lost/Total Datagrams<br />[140]&nbsp; 0.0- 1.0 sec&nbsp; 32484 KBytes&nbsp; 266109 Kbits/sec&nbsp; 0.127 ms&nbsp; 190/ 8311 (2.3%)<br />[140]&nbsp; 0.0- 1.0 sec&nbsp; 3 datagrams received out-of-order<br />[140]&nbsp; 1.0- 2.0 sec&nbsp; 32144 KBytes&nbsp; 263324 Kbits/sec&nbsp; 0.127 ms&nbsp; &nbsp; 0/ 8036 (0%)<br />[140]&nbsp; 2.0- 3.0 sec&nbsp; 33976 KBytes&nbsp; 278331 Kbits/sec&nbsp; 0.147 ms&nbsp; &nbsp; 0/ 8494 (0%)<br />[140]&nbsp; 3.0- 4.0 sec&nbsp; 33124 KBytes&nbsp; 271352 Kbits/sec&nbsp; 0.119 ms&nbsp; &nbsp; 0/ 8281 (0%)<br />[140]&nbsp; 4.0- 5.0 sec&nbsp; 33492 KBytes&nbsp; 274366 Kbits/sec&nbsp; 0.136 ms&nbsp; &nbsp; 0/ 8373 (0%)<br />[140]&nbsp; 5.0- 6.0 sec&nbsp; 33456 KBytes&nbsp; 274072 Kbits/sec&nbsp; 0.108 ms&nbsp; &nbsp; 0/ 8364 (0%)<br />[140]&nbsp; 6.0- 7.0 sec&nbsp; 33444 KBytes&nbsp; 273973 Kbits/sec&nbsp; 0.162 ms&nbsp; &nbsp; 0/ 8361 (0%)<br />[140]&nbsp; 7.0- 8.0 sec&nbsp; 33328 KBytes&nbsp; 273023 Kbits/sec&nbsp; 0.908 ms&nbsp; &nbsp; 0/ 8332 (0%)<br />[140]&nbsp; 8.0- 9.0 sec&nbsp; 32868 KBytes&nbsp; 269255 Kbits/sec&nbsp; 0.144 ms&nbsp; &nbsp; 0/ 8217 (0%)<br />[140]&nbsp; 9.0-10.0 sec&nbsp; 32824 KBytes&nbsp; 268894 Kbits/sec&nbsp; 0.159 ms&nbsp; &nbsp; 0/ 8206 (0%)<br />[140]&nbsp; 0.0-10.0 sec&nbsp; 331864 KBytes&nbsp; 271142 Kbits/sec&nbsp; 0.224 ms&nbsp; 189/83021 (0.23$<br />[140]&nbsp; 0.0-10.0 sec&nbsp; 4 datagrams received out-of-order</p><br /><p>Chaos Calmer</p><p>[ ID] Interval&nbsp; &nbsp; &nbsp; &nbsp;Transfer&nbsp; &nbsp; &nbsp;Bandwidth&nbsp; &nbsp; &nbsp; &nbsp;Jitter&nbsp; &nbsp;Lost/Total Datagrams<br />[144]&nbsp; 0.0- 1.0 sec&nbsp; 34248 KBytes&nbsp; 280560 Kbits/sec&nbsp; 0.164 ms&nbsp; 152/ 8714 (1.7%)<br />[144]&nbsp; 1.0- 2.0 sec&nbsp; 32940 KBytes&nbsp; 269844 Kbits/sec&nbsp; 0.262 ms&nbsp; &nbsp; 0/ 8235 (0%)<br />[144]&nbsp; 2.0- 3.0 sec&nbsp; 33104 KBytes&nbsp; 271188 Kbits/sec&nbsp; 0.148 ms&nbsp; &nbsp; 0/ 8276 (0%)<br />[144]&nbsp; 3.0- 4.0 sec&nbsp; 33048 KBytes&nbsp; 270729 Kbits/sec&nbsp; 0.159 ms&nbsp; &nbsp; 0/ 8262 (0%)<br />[144]&nbsp; 4.0- 5.0 sec&nbsp; 32468 KBytes&nbsp; 265978 Kbits/sec&nbsp; 0.120 ms&nbsp; &nbsp; 0/ 8117 (0%)<br />[144]&nbsp; 5.0- 6.0 sec&nbsp; 34128 KBytes&nbsp; 279577 Kbits/sec&nbsp; 0.125 ms&nbsp; &nbsp; 0/ 8532 (0%)<br />[144]&nbsp; 6.0- 7.0 sec&nbsp; 33400 KBytes&nbsp; 273613 Kbits/sec&nbsp; 0.146 ms&nbsp; &nbsp; 0/ 8350 (0%)<br />[144]&nbsp; 7.0- 8.0 sec&nbsp; 33400 KBytes&nbsp; 273613 Kbits/sec&nbsp; 0.125 ms&nbsp; &nbsp; 0/ 8350 (0%)<br />[144]&nbsp; 8.0- 9.0 sec&nbsp; 33932 KBytes&nbsp; 277971 Kbits/sec&nbsp; 0.295 ms&nbsp; &nbsp; 0/ 8483 (0%)<br />[144]&nbsp; 9.0-10.0 sec&nbsp; 34408 KBytes&nbsp; 281870 Kbits/sec&nbsp; 0.814 ms&nbsp; &nbsp; 0/ 8602 (0%)<br />[144]&nbsp; 0.0-10.0 sec&nbsp; 335536 KBytes&nbsp; 274192 Kbits/sec&nbsp; 0.249 ms&nbsp; 151/84028 (0.18$<br />[144]&nbsp; 0.0-10.0 sec&nbsp; 1 datagrams received out-of-order</p><br /><br /><p>TCP test</p><p>TP-Link factory</p><p>[ ID] Interval&nbsp; &nbsp; &nbsp; &nbsp;Transfer&nbsp; &nbsp; &nbsp;Bandwidth<br />[264]&nbsp; 0.0- 1.0 sec&nbsp; 27830 KBytes&nbsp; 227985 Kbits/sec<br />[264]&nbsp; 1.0- 2.0 sec&nbsp; 30851 KBytes&nbsp; 252730 Kbits/sec<br />[264]&nbsp; 2.0- 3.0 sec&nbsp; 33485 KBytes&nbsp; 274306 Kbits/sec<br />[264]&nbsp; 3.0- 4.0 sec&nbsp; 31931 KBytes&nbsp; 261579 Kbits/sec<br />[264]&nbsp; 4.0- 5.0 sec&nbsp; 30266 KBytes&nbsp; 247936 Kbits/sec<br />[264]&nbsp; 5.0- 6.0 sec&nbsp; 27890 KBytes&nbsp; 228471 Kbits/sec<br />[264]&nbsp; 6.0- 7.0 sec&nbsp; 28062 KBytes&nbsp; 229884 Kbits/sec<br />[264]&nbsp; 7.0- 8.0 sec&nbsp; 27851 KBytes&nbsp; 228158 Kbits/sec<br />[264]&nbsp; 8.0- 9.0 sec&nbsp; 28652 KBytes&nbsp; 234718 Kbits/sec<br />[264]&nbsp; 9.0-10.0 sec&nbsp; 28646 KBytes&nbsp; 234669 Kbits/sec<br />[264]&nbsp; 0.0-10.0 sec&nbsp; 296960 KBytes&nbsp; 242552 Kbits/sec</p><br /><p>Chaos Calmer</p><p>[ ID] Interval&nbsp; &nbsp; &nbsp; &nbsp;Transfer&nbsp; &nbsp; &nbsp;Bandwidth<br />[268]&nbsp; 0.0- 1.0 sec&nbsp; 28048 KBytes&nbsp; 229769 Kbits/sec<br />[268]&nbsp; 1.0- 2.0 sec&nbsp; 29517 KBytes&nbsp; 241803 Kbits/sec<br />[268]&nbsp; 2.0- 3.0 sec&nbsp; 30351 KBytes&nbsp; 248639 Kbits/sec<br />[268]&nbsp; 3.0- 4.0 sec&nbsp; 28170 KBytes&nbsp; 230765 Kbits/sec<br />[268]&nbsp; 4.0- 5.0 sec&nbsp; 28891 KBytes&nbsp; 236678 Kbits/sec<br />[268]&nbsp; 5.0- 6.0 sec&nbsp; 29644 KBytes&nbsp; 242845 Kbits/sec<br />[268]&nbsp; 6.0- 7.0 sec&nbsp; 28821 KBytes&nbsp; 236103 Kbits/sec<br />[268]&nbsp; 7.0- 8.0 sec&nbsp; 29470 KBytes&nbsp; 241422 Kbits/sec<br />[268]&nbsp; 8.0- 9.0 sec&nbsp; 30179 KBytes&nbsp; 247226 Kbits/sec<br />[268]&nbsp; 9.0-10.0 sec&nbsp; 28485 KBytes&nbsp; 233348 Kbits/sec<br />[268]&nbsp; 0.0-10.0 sec&nbsp; 292864 KBytes&nbsp; 239130 Kbits/sec</p><br /><p>We see virtually no difference in performance between Factory and CC for both UDP and TCP.&nbsp; In fact after repeated tests Factory and CC both beat each other marginally which we can assume is just down to expected variability. </p><p>One thing to note though was that CC was more consistent in TCP speeds between each 1 second interval.</p><br /><p>Also I found that there seems to be a bug in CC where 5 Ghz wireless does not work unless 2.4Ghz is enabled too.&nbsp; Obviously ath10k-kmod needs installing too.</p>											<p class="post-edited">(Last edited by <strong>dem</strong> on 27 Nov 2014, 01:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255702">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">mastabog</div>
					<div class="post-datetime">
						27 Nov 2014, 02:48					</div>
				</div>
				<div class="post-content content">
					<p>@dem, I already showed in my 1st post that OpenWRT can reach 400+ Mbps using the official BB release. Your nexus 5 limits you below 250 Mbps.</p><p>The idea of this thread was to understand why and how to make OpenWRT reach 800+ Mbps on 11ac like it does on the tp-link firmware. Currently it&#039;s stuck somewhere around 500 Mbps.</p><p><strong>To anyone who wishes to test</strong>: you must use an 801.11ac machine with true 3-stream (3x3 mimo) AC1300 (max PHY rate 1300 Mbps), with the other machine on wired ethernet. I used a Macbook Pro late 2013 for the wireless. Tests using phones or devices that are not 3-stream AC1300 will not reveal speed differences between tp-link and openwrt firmwares, i.e. doesn&#039;t help the scope of this thread.</p>											<p class="post-edited">(Last edited by <strong>mastabog</strong> on 27 Nov 2014, 05:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255725">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">dem</div>
					<div class="post-datetime">
						27 Nov 2014, 10:26					</div>
				</div>
				<div class="post-content content">
					<p>@Mastabog Have you done iPerf testing with CC yet yourself?</p><p>I thought it was interesting that it demonstrated that there was no difference between factory and CC yet there was a significant difference between factory and BB.</p><p>The trouble with 3 x 3 mimo is that you need 3 antennas.&nbsp; &nbsp;If you have laptops it is hardly feasible to retro fit an existing laptop with a 3 antenna configuration as most will traditionally have only 2 antennas so that really only leaves a large USB 3.0 device which is not great on a laptop .&nbsp; &nbsp; Most people who already have desktops on gigabit Ethernet are not going to buy a 3 x 3 mimo 802.11ac wireless adapter either.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 9</div><nav><ul><li><a href="viewtopic.php%3Fid=53703&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=53703&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=53703&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=53703&amp;p=9.html">9</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>