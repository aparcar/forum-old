<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem blinking leds</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p215568">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">farguis</div>
					<div class="post-datetime">
						24 Oct 2013, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi, <br />I have a wr703n and I do not understand why when you turn off 2 times, he enters a fault state, blinking light and only being able to get inside the through the serial port. Before this system worked to perfection but trying other firmwares now this.</p><p> May be memory exceeded and I have to delete some / mtd (mtd-r erase ...)?<br /> I need to use the 36088 version because I do not get a memory function pen as rootfs.<br />Here I leave what comes out via serial.</p><br /><p>[&nbsp; &nbsp; 0.000000] Linux version 3.3.8 (farguis@farguis-Linux) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #2 Thu Oct 24 11:10:13 CEST 2013<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.000000] CPU revision is: 00019374 (MIPS 24Kc)<br />[&nbsp; &nbsp; 0.000000] SoC: Atheros AR9330 rev 1<br />[&nbsp; &nbsp; 0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz<br />[&nbsp; &nbsp; 0.000000] Determined physical RAM map:<br />[&nbsp; &nbsp; 0.000000]&nbsp; memory: 02000000 @ 00000000 (usable)<br />[&nbsp; &nbsp; 0.000000] Initrd not found or empty - disabling initrd<br />[&nbsp; &nbsp; 0.000000] Zone PFN ranges:<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp;Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Movable zone start PFN for each node<br />[&nbsp; &nbsp; 0.000000] Early memory PFN ranges<br />[&nbsp; &nbsp; 0.000000]&nbsp; &nbsp; &nbsp;0: 0x00000000 -&gt; 0x00002000<br />[&nbsp; &nbsp; 0.000000] Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />[&nbsp; &nbsp; 0.000000] Kernel command line:&nbsp; board=TL-WR703N console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd<br />[&nbsp; &nbsp; 0.000000] PID hash table entries: 128 (order: -3, 512 bytes)<br />[&nbsp; &nbsp; 0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />[&nbsp; &nbsp; 0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.<br />[&nbsp; &nbsp; 0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes<br />[&nbsp; &nbsp; 0.000000] Writing ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Readback ErrCtl register=00000000<br />[&nbsp; &nbsp; 0.000000] Memory: 29308k/32768k available (2013k kernel code, 3460k reserved, 356k data, 172k init, 0k highmem)<br />[&nbsp; &nbsp; 0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)<br />[&nbsp; &nbsp; 0.080000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.080000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.090000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] gpiochip_add: registered GPIOs 0 to 29 on device: ath79<br />[&nbsp; &nbsp; 0.100000] MIPS: machine is TP-LINK TL-WR703N v1<br />[&nbsp; &nbsp; 0.350000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.360000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.360000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.370000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.380000] TCP: Hash tables configured (established 1024 bind 1024)<br />[&nbsp; &nbsp; 0.390000] TCP reno registered<br />[&nbsp; &nbsp; 0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.400000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher<br />[&nbsp; &nbsp; 0.430000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.<br />[&nbsp; &nbsp; 0.440000] msgmni has been set to 57<br />[&nbsp; &nbsp; 0.440000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.450000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.450000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.460000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART<br />[&nbsp; &nbsp; 0.460000] console [ttyATH0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.460000] console [ttyATH0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.480000] m25p80 spi0.0: found s25sl032a, expected m25p80<br />[&nbsp; &nbsp; 0.480000] m25p80 spi0.0: s25sl032a (4096 Kbytes)<br />[&nbsp; &nbsp; 0.490000] 5 tp-link partitions found on MTD device spi0.0<br />[&nbsp; &nbsp; 0.490000] Creating 5 MTD partitions on &quot;spi0.0&quot;:<br />[&nbsp; &nbsp; 0.500000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.510000] 0x000000020000-0x0000000f47a0 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.510000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.520000] 0x0000000f47a0-0x0000003f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.530000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.540000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.550000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=360000, len=90000<br />[&nbsp; &nbsp; 0.550000] 0x000000360000-0x0000003f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.560000] 0x0000003f0000-0x000000400000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.570000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;<br />[&nbsp; &nbsp; 0.590000] ag71xx_mdio: probed<br />[&nbsp; &nbsp; 0.590000] eth0: Atheros AG71xx at 0xb9000000, irq 4<br />[&nbsp; &nbsp; 1.150000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]<br />[&nbsp; &nbsp; 1.160000] TCP cubic registered<br />[&nbsp; &nbsp; 1.160000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.160000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.170000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 1.180000] Freeing unused kernel memory: 172k freed<br />- preinit -<br />Press the [f] key and hit [enter] to enter failsafe mode<br />- regular preinit -<br />[&nbsp; &nbsp; 6.580000] JFFS2 notice: (396) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 10 of xref (0 dead, 2 orphan) found.<br />[&nbsp; &nbsp; 7.290000] SCSI subsystem initialized<br />[&nbsp; &nbsp; 7.460000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 7.460000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 7.470000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 7.860000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 7.860000] ehci-platform ehci-platform: Generic Platform EHCI Controller<br />[&nbsp; &nbsp; 7.870000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 7.910000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp; 7.930000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 7.930000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 7.930000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 7.950000] Initializing USB Mass Storage driver...<br />[&nbsp; &nbsp; 7.960000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp; 7.960000] USB Mass Storage support registered.<br />switching to jffs2<br />- init -<br />[&nbsp; &nbsp;28.380000] Kernel panic - not syncing: Attempted to kill init!</p><br /><br /><br /><p>THANKS</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215569">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						24 Oct 2013, 15:13					</div>
				</div>
				<div class="post-content content">
					<p>you selected wrong size of kernel image, rebuild image with original size and reflash device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215579">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">farguis</div>
					<div class="post-datetime">
						24 Oct 2013, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the answer.</p><p>The size of image is 3.9MB and It is the same that original of the page. I have make my own image but the problem is the same.</p><p>Do you mean this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215586">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						24 Oct 2013, 20:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>farguis wrote:</cite><blockquote><p>[&nbsp; &nbsp; 0.510000] 0x000000020000-0x0000000f47a0 : &quot;kernel&quot;</p></blockquote></div><p>your flash have 64k block size, that&#039;s means you should always have 0000 at the end (ex. 0x000000020000-0x000000120000 : &quot;kernel&quot;)<br />also you have only 4M flash, where 128k is u-boot and 64k art and you try add 3.9M image here.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215675">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">farguis</div>
					<div class="post-datetime">
						25 Oct 2013, 19:47					</div>
				</div>
				<div class="post-content content">
					<p>thanks. Now I have installed one memory USB and I have copied all system in it. <br />Now I have one rootfs of 1.5 Gb and I havent more problems but I dont understand that I must change when I build my image firm for the system is correct.</p><p>Can you help me?? </p><p>thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p215992">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">neryba</div>
					<div class="post-datetime">
						29 Oct 2013, 09:47					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>$(eval $(call SingleProfile,TPLINK-LZMA,$(fs_64kraw),TLWR703,tl-wr703n-v1,TL-WR703N,ttyATH0,115200,0x07030101,1,4Mlzma))</code></pre></div><p>I am not familiar with tp-link,&nbsp; -$(STAGING_DIR_HOST)/bin/mktplinkfw created image based on your 4Mlzma size, maybe error comes because was selected too many packages. But $(fs_64kraw) means, that in partition table all will ends with 0000(64*1024 = 10000 in hex).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>