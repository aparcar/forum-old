<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kernel build error after git pull</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p178772">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">cjsoftuk</div>
					<div class="post-datetime">
						19 Sep 2012, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m sure I&#039;ve done something daft here - and probably failed to read the instructions, but during the kernel compile process, it tries to set up some new .config options which fails with the error: &quot;Console input/output is redirected. Run &#039;make oldconfig&#039; to update configuration.&quot;</p><p>I seem to recall that this means I need to get some more changes I don&#039;t yet have.... but can&#039;t remember what to do to fix it.....</p><p>I&#039;m on commit 45aba3c282a2980586cdf5ae2bc5bd23c6b26964 which is r33465 for the SVN people.</p><p>Any pointers would be much appreciated.&nbsp; In case you&#039;re wondering why I&#039;m building from trunk.... it&#039;s a case of backfire never has agreed with the Nokia IP130s I have.... so I have to build from scratch every time <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178773">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						19 Sep 2012, 19:03					</div>
				</div>
				<div class="post-content content">
					<p>Have you done &quot;make defconfig&quot; after updating the sources? That should fix the missing kernel options.<br />Alternatively, go to make menuconfig and save the new config (although you did no apparent changes to modules).</p><div class="quotebox"><cite>cjsoftuk wrote:</cite><blockquote><p>In case you&#039;re wondering why I&#039;m building from trunk....</p></blockquote></div><p>Practically everybody builds from trunk ;-)</p><div class="quotebox"><cite>cjsoftuk wrote:</cite><blockquote><p>so I have to build from scratch every time <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>No idea what you are talking here. Maintaining trunk sources and building normally works at the most times. &quot;Building from sratch&quot; is useful to clean the build tree every now and then, but normally not required.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 19 Sep 2012, 19:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178774">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">cjsoftuk</div>
					<div class="post-datetime">
						19 Sep 2012, 19:21					</div>
				</div>
				<div class="post-content content">
					<p>I build so infrequently.... I&#039;ve usually lost my previous build root before I come around to the rebuild......</p><p>A &quot;make defconfig&quot; doesn&#039;t fix anything I&#039;m afraid.... still getting the error.</p><p>Last few lines of the output:<br /></p><div class="codebox"><pre><code>EFI runtime service support (EFI) [N/y/?] (NEW) aborted!

Console input/output is redirected. Run &#039;make oldconfig&#039; to update configuration.

make[7]: *** [silentoldconfig] Error 1
make[6]: *** [silentoldconfig] Error 2
make[6]: Nothing to be done for `all&#039;.
make[6]: Nothing to be done for `relocs&#039;.
make[5]: *** No rule to make target `include/config/auto.conf&#039;, needed by `include/config/kernel.release&#039;.  Stop.
make[5]: Leaving directory `/home/cmalton/Documents/Development/openwrt/build_dir/linux-x86_ip130/linux-3.3.8&#039;
make[4]: *** [/home/cmalton/Documents/Development/openwrt/build_dir/linux-x86_ip130/linux-3.3.8/.modules] Error 2
make[4]: Leaving directory `/home/cmalton/Documents/Development/openwrt/target/linux/x86&#039;
make[3]: *** [compile] Error 2
make[3]: Leaving directory `/home/cmalton/Documents/Development/openwrt/target/linux&#039;
make[2]: *** [target/linux/compile] Error 2
make[2]: Leaving directory `/home/cmalton/Documents/Development/openwrt&#039;
make[1]: *** [/home/cmalton/Documents/Development/openwrt/staging_dir/target-i386_uClibc-0.9.33.2/stamp/.target_compile] Error 2
make[1]: Leaving directory `/home/cmalton/Documents/Development/openwrt&#039;
make: *** [world] Error 2</code></pre></div>											<p class="post-edited">(Last edited by <strong>cjsoftuk</strong> on 19 Sep 2012, 19:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178782">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						19 Sep 2012, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>I just did an <em>svn up</em> to SVN trunk revision 33465 and try to recompile after a <em>make dirclean</em> to noavail as shown below:<br /></p><div class="codebox"><pre><code>Checking &#039;rsync&#039;... ok.
Checking &#039;xgettext&#039;... ok.
Checking &#039;xsltproc&#039;... ok.
 make[1] world
 make[2] tools/install
 make[3] -C tools/m4 compile
 make[3] -C tools/m4 install
 make[3] -C tools/sed compile
 make[3] -C tools/sed install
 make[3] -C tools/libtool compile
 make[3] -C tools/libtool install
 make[3] -C tools/autoconf compile
 make[3] -C tools/autoconf install
 make[3] -C tools/pkg-config compile
 make[3] -C tools/pkg-config install
 make[3] -C tools/xz compile
 make[3] -C tools/xz install
 make[3] -C tools/automake compile
 make[3] -C tools/automake install
 make[3] -C tools/gmp compile
 make[3] -C tools/gmp install
 make[3] -C tools/mpfr compile
 make[3] -C tools/mpfr install
 make[3] -C tools/mpc compile
 make[3] -C tools/mpc install
 make[3] -C tools/libelf compile
 make[3] -C tools/libelf install
 make[3] -C tools/flex compile
 make[3] -C tools/flex install
 make[3] -C tools/bison compile
 make[3] -C tools/bison install
 make[3] -C tools/mklibs compile
 make[3] -C tools/mklibs install
 make[3] -C tools/sstrip compile
 make[3] -C tools/sstrip install
 make[3] -C tools/ipkg-utils compile
 make[3] -C tools/ipkg-utils install
 make[3] -C tools/genext2fs compile
 make[3] -C tools/genext2fs install
 make[3] -C tools/e2fsprogs compile
 make[3] -C tools/e2fsprogs install
 make[3] -C tools/mtd-utils compile
 make[3] -C tools/mtd-utils install
 make[3] -C tools/mkimage compile
 make[3] -C tools/mkimage install
 make[3] -C tools/firmware-utils compile
 make[3] -C tools/firmware-utils install
 make[3] -C tools/patch-cmdline compile
 make[3] -C tools/patch-cmdline install
 make[3] -C tools/quilt compile
 make[3] -C tools/quilt install
 make[3] -C tools/yaffs2 compile
 make[3] -C tools/yaffs2 install
 make[3] -C tools/flock compile
 make[3] -C tools/flock install
 make[3] -C tools/padjffs2 compile
 make[3] -C tools/padjffs2 install
 make[3] -C tools/mm-macros compile
 make[3] -C tools/mm-macros install
 make[3] -C tools/xorg-macros compile
 make[3] -C tools/xorg-macros install
 make[3] -C tools/xfce-macros compile
 make[3] -C tools/xfce-macros install
 make[3] -C tools/missing-macros compile
 make[3] -C tools/missing-macros install
 make[3] -C tools/cmake compile
 make[3] -C tools/cmake install
 make[3] -C tools/scons compile
 make[3] -C tools/scons install
 make[3] -C tools/lzma compile
 make[3] -C tools/lzma install
 make[3] -C tools/squashfs4 compile
 make[3] -C tools/squashfs4 install
 make[2] toolchain/install
 make[3] -C toolchain/binutils prepare
 make[3] -C toolchain/binutils compile
 make[3] -C toolchain/binutils install
 make[3] -C toolchain/gcc/minimal prepare
 make[3] -C toolchain/gcc/minimal compile
 make[3] -C toolchain/gcc/minimal install
 make[3] -C toolchain/kernel-headers prepare
 make[3] -C toolchain/kernel-headers compile
 make[3] -C toolchain/kernel-headers install
 make[3] -C toolchain/uClibc/headers prepare
 make[3] -C toolchain/uClibc/headers compile
 make[3] -C toolchain/uClibc/headers install
 make[3] -C toolchain/gcc/initial prepare
 make[3] -C toolchain/gcc/initial compile
 make[3] -C toolchain/gcc/initial install
 make[3] -C toolchain/uClibc prepare
 make[3] -C toolchain/uClibc compile
 make[3] -C toolchain/uClibc install
 make[3] -C toolchain/gcc/final prepare
 make[3] -C toolchain/gcc/final compile
 make[3] -C toolchain/gcc/final install
 make[3] -C toolchain/uClibc/utils prepare
 make[3] -C toolchain/uClibc/utils compile
 make[3] -C toolchain/uClibc/utils install
 make[2] target/compile
 make[3] -C target/linux compile
make -r world MAKE_JOBSERVER=: build failed. Please re-run make with V=s to see what&#039;s going on
make: *** [world] Error 1
5064.731u+752.702s=1:46:37.34e(90.9%) TDSavg=0k+0k+0k max=523630k 1619680+17522840io 2493pf+0sw
[mazilo@Mi:/opt/openwrt-svn-trunk 212%] ~</code></pre></div><p>Has anyone seen this problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p178792">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">cjsoftuk</div>
					<div class="post-datetime">
						19 Sep 2012, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>So, I&#039;ve been doing a bit of beating of the config..... and I&#039;ve bodged it so it builds.... Far from happy about it, but it works!</p><p>Bodge looks something like below:<br /></p><div class="codebox"><pre><code>diff --git a/target/linux/x86/ip130/config-default b/target/linux/x86/ip130/config-default
index 85d9f8b..b9e2b9a 100644
--- a/target/linux/x86/ip130/config-default
+++ b/target/linux/x86/ip130/config-default
@@ -1,3 +1,5 @@
+CONFIG_3C515=n
+CONFIG_AC3200=n
 CONFIG_ACPI=y
 # CONFIG_ACPI_AC is not set
 # CONFIG_ACPI_ASUS is not set
@@ -5,9 +7,11 @@ CONFIG_ACPI=y
 CONFIG_ACPI_BLACKLIST_YEAR=0
 # CONFIG_ACPI_BUTTON is not set
 # CONFIG_ACPI_CONTAINER is not set
+CONFIG_ACPI_CMPC=n
 # CONFIG_ACPI_CUSTOM_DSDT is not set
 # CONFIG_ACPI_DEBUG is not set
 # CONFIG_ACPI_DOCK is not set
+CONFIG_ACPI_EC_DEBUGFS=n
 # CONFIG_ACPI_FAN is not set
 # CONFIG_ACPI_PCI_SLOT is not set
 CONFIG_ACPI_PROCESSOR=y
@@ -20,14 +24,32 @@ CONFIG_ACPI_SYSFS_POWER=y
 CONFIG_ACPI_THERMAL=y
 # CONFIG_ACPI_TOSHIBA is not set
 # CONFIG_ACPI_WMI is not set
+CONFIG_APRICOT=n
+CONFIG_ASUS_LAPTOP=n
+CONFIG_AT1700=n
+CONFIG_BLK_DEV_XD=n
+CONFIG_CONSOLE_TRANSLATIONS=y
 CONFIG_CPU_SUP_AMD=y
 CONFIG_CPU_SUP_CENTAUR=y
 CONFIG_CPU_SUP_CYRIX_32=y
 CONFIG_CPU_SUP_INTEL=y
 CONFIG_CPU_SUP_TRANSMETA_32=y
 CONFIG_CPU_SUP_UMC_32=y
+CONFIG_CS89x0=n
+CONFIG_DEPCA=n
 CONFIG_DMI=y
+CONFIG_DMI_SYSFS=n
 # CONFIG_DMIID is not set
+CONFIG_EFI=n
+CONFIG_EISA=n
+CONFIG_EL1=n
+CONFIG_EL16=n
+CONFIG_EL2=n
+CONFIG_EL3=n
+CONFIG_ELPLUS=n
+CONFIG_GEOS=n
+CONFIG_HPET=n
+CONFIG_HP_ACCEL=n
 CONFIG_ILLEGAL_POINTER_VALUE=0
 CONFIG_INPUT=y
 CONFIG_INPUT_KEYBOARD=y
@@ -37,10 +59,17 @@ CONFIG_INPUT_MOUSEDEV_PSAUX=y
 CONFIG_INPUT_MOUSEDEV_SCREEN_X=1024
 CONFIG_INPUT_MOUSEDEV_SCREEN_Y=768
 # CONFIG_INPUT_YEALINK is not set
+CONFIG_INTEL_IPS=n
+CONFIG_INTEL_MENLOW=n
 CONFIG_ISA=y
 CONFIG_ISAPNP=y
 CONFIG_ISA_DMA_API=y
+CONFIG_ISDN_CAPI_MIDDLEWARE=n
 CONFIG_K8_NB=y
+CONFIG_LANCE=n
+CONFIG_LEDS_CLEVO_MAIL=n
+CONFIG_MDA_CONSOLE=n
+CONFIG_MIXCOMWD=n
 # CONFIG_MOUSE_BCM5974 is not set
 CONFIG_MOUSE_PS2=y
 CONFIG_MOUSE_PS2_ALPS=y
@@ -52,14 +81,31 @@ CONFIG_MOUSE_PS2_SYNAPTICS=y
 CONFIG_MOUSE_PS2_TRACKPOINT=y
 # CONFIG_MOUSE_SERIAL is not set
 # CONFIG_MOUSE_VSXXXAA is not set
+CONFIG_NET_VENDOR_RACAL=n
 CONFIG_PATA_LEGACY=y
 CONFIG_PATA_PLATFORM=y
 CONFIG_PATA_AMD=y
 CONFIG_PCIEAER=y
 CONFIG_PCIEPORTBUS=y
+CONFIG_PCI_IOAPIC=n
+CONFIG_PCWATCHDOG=n
+CONFIG_PNP_DEBUG_MESSAGES=n
+CONFIG_PNPBIOS=n
+CONFIG_SERIAL_8250_PNP=y
+CONFIG_THINKPAD_ACPI=n
+CONFIG_TOPSTAR_LAPTOP=n
+CONFIG_TOSHIBA_BT_RFKILL=n
+CONFIG_VGA_CONSOLE=n
 CONFIG_VT=y
 CONFIG_VT_CONSOLE=y
 # CONFIG_VT_HW_CONSOLE_BINDING is not set
+CONFIG_WDT=n
+CONFIG_X86_PM_TIMER=n
+CONFIG_X86_PCC_CPUFREQ=n
+CONFIG_X86_ACPI_CPUFREQ=n
+CONFIG_X86_POWERNOW_K8=n
+CONFIG_X86_LONGHAUL=n
+CONFIG_XO15_EBOOK=n
 
 # IP130 specific config
 CONFIG_BLK_DEV_CS5530=y</code></pre></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>