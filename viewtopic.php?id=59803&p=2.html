<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> adblock package, release 2.x</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Mar 2018 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=59803&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=17.html">17</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p300806">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">roger_</div>
					<div class="post-datetime">
						22 Nov 2015, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>Would be nice if there was a more efficient&nbsp; version than ran on low power hardware. My devices typically have &lt; 1 MB of storage available and 64 MB RAM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301126">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						25 Nov 2015, 00:52					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the new version 0.22.0.</p><p>Memory consumption (during sorting of the downloaded blocklists) has decreased somewhat, although selecting at least 2 large lists in a device with 64 MB or less memory may cause risk of an out-of-memory error due to the apparent inefficiency of the default Busybox sort. Installing the GNU sort (coreutils-sort) helps.</p><p>And the automatic detection of most of the needed options is nice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301139">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						25 Nov 2015, 11:34					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman: Thanks for testing &amp; rapid deploying to trunk! ;-)</p><p>@roger_: my recommendation for low memory systems is to add an usb stick or any other storage device to supersize your /tmp directory with a swap partition (see <a href="https://wiki.openwrt.org/doc/uci/fstab">openwrt wiki</a>). After that you can resize and use your tmp partition without a breeze. Anyway, 0.22.0 should help a lot ... ;-)</p><br /><p><strong>Link to the latest <a href="https://github.com/openwrt/packages/blob/master/net/adblock/files/README.md">adblock documentation</a></strong></p>											<p class="post-edited">(Last edited by <strong>dibdot</strong> on 25 Nov 2015, 15:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301427">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						27 Nov 2015, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>small feedback for the next release:</p><p>I tested the &quot;shallalist&quot; source with default categories selection and to my surprise both Dropbox and Microsoft Onedrive got blocked. For some reason they are included in the &quot;downloads&quot; category, which is selected by default for shallalist.</p><p>You might consider either <br />* whitelisting the global cloud file sharing services (dropbox, onedrive), or <br />* removing the &quot;downloads&quot; from the shallalist defaults.</p><p>And I am not quite sure why bild.de should be in the default blacklist...<br />(you</p><p>Ps.<br />I am not quite sure about the need to delete shell variables CONFIG_* . Which variables? For what purpose? (I don&#039;t see the creation of them anywhere. If they are from an ancient version ages ago, just forget about them.)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 27 Nov 2015, 15:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301438">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						27 Nov 2015, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>@hnyman</p><p>The CONFIG_* environment variables will be created during script runtime by uci configuration system. The vars set from parsing uci config should disappear once the adblock script quits, it&#039;s just a tweak to save space (10-20k) during runtime.</p><p>bild.de is just a personal &quot;favorite&quot;, simply remove it if you like to read &quot;news&quot; with big pictures ... ;-))</p><p>For 0.22.2 I&#039;ll think about a dynamic whitelist to solve this shallalist issue with the &quot;downloads&quot; category. You find a short description of every category <a href="http://www.shallalist.de/categories.html">here</a>.</p><p>Thanks!<br />Dirk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303078">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">sok</div>
					<div class="post-datetime">
						9 Dec 2015, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi, in my logs i see the following:<br />adblock[7638] error: failed to initialize new dynamic/volatile uhttpd instance (adblock, 192.168.6.1), rc: 1</p><p>what do i have to configure to get rid of it ?</p><p>uhttpd is just configured on 192.168.6.1:80 for luci</p>											<p class="post-edited">(Last edited by <strong>sok</strong> on 9 Dec 2015, 21:34)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p303082">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						9 Dec 2015, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>@sok: the ip address of the local adblock interface/uhttpd instance needs to be a different subnet from the normal LAN, i.e. 192.168.5.1 in your case. See also /etc/adblock/README.md and /etc/adblock/samples/adblock.con.sample.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304331">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">dj_mcm2001</div>
					<div class="post-datetime">
						20 Dec 2015, 11:23					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the adblock solution!</p><p>Using TP-Link TL-WR1043ND_V1 I had to add a sleep line in /etc/rc.local to avoid error related to inexistent input network.</p><div class="codebox"><pre><code> /usr/bin/logger -t rc.local &quot;start adblock script&quot;
sleep 20
/usr/bin/adblock-update.sh &gt;/dev/null 2&gt;&amp;1</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304355">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						20 Dec 2015, 14:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>thanks for using adblock!<br />There is no need for such workaround in rc.local. Simply activate &quot;wancheck&quot; service in adblock config (see example in /etc/adblock/samples/adblock.conf.sample) and adblock will wait for your wan device to come up ... ;-))</p><div class="quotebox"><cite>dj_mcm2001 wrote:</cite><blockquote><p>Thanks for the adblock solution!</p><p>Using TP-Link TL-WR1043ND_V1 I had to add a sleep line in /etc/rc.local to avoid error related to inexistent input network.</p><div class="codebox"><pre><code> /usr/bin/logger -t rc.local &quot;start adblock script&quot;
sleep 20
/usr/bin/adblock-update.sh &gt;/dev/null 2&gt;&amp;1</code></pre></div></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304691">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">jacqkeen</div>
					<div class="post-datetime">
						23 Dec 2015, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I am having the same issue as Sok.&nbsp; Here is the output in the console when running the script</p><p>adblock[16592] info : domain adblock processing started (0.40.0, 15.05, 22.12.2015 16:13:49)<br />adblock[16592] info : backup/restore will be disabled<br />adblock[16592] info : dns query logging will be disabled<br />adblock[16592] info : debug logging will be disabled<br />adblock[16592] info : wan update check will be disabled<br />adblock[16592] info : get ntp time sync (0.openwrt.pool.ntp.org 1.openwrt.pool.ntp.org 2.openwrt.pool.ntp.org 3.openwrt.pool.ntp.org), after 0 loops<br />adblock[16592] error: failed to initialize new dynamic/volatile uhttpd instance (adblock, 192.168.9.1), rc: 1<br />adblock[16592] info : domain adblock processing finished (0.40.0, 15.05, 22.12.2015 16:14:05)</p><p>my Lan is 192.168.0.x so it is different in the config.&nbsp; Any suggestions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304746">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						23 Dec 2015, 12:14					</div>
				</div>
				<div class="post-content content">
					<p>Please post your uhttpd config file.</p><div class="quotebox"><cite>jacqkeen wrote:</cite><blockquote><p>Hi, I am having the same issue as Sok.&nbsp; Here is the output in the console when running the script</p><p>adblock[16592] info : domain adblock processing started (0.40.0, 15.05, 22.12.2015 16:13:49)<br />adblock[16592] info : backup/restore will be disabled<br />adblock[16592] info : dns query logging will be disabled<br />adblock[16592] info : debug logging will be disabled<br />adblock[16592] info : wan update check will be disabled<br />adblock[16592] info : get ntp time sync (0.openwrt.pool.ntp.org 1.openwrt.pool.ntp.org 2.openwrt.pool.ntp.org 3.openwrt.pool.ntp.org), after 0 loops<br />adblock[16592] error: failed to initialize new dynamic/volatile uhttpd instance (adblock, 192.168.9.1), rc: 1<br />adblock[16592] info : domain adblock processing finished (0.40.0, 15.05, 22.12.2015 16:14:05)</p><p>my Lan is 192.168.0.x so it is different in the config.&nbsp; Any suggestions?</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304832">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">jacqkeen</div>
					<div class="post-datetime">
						23 Dec 2015, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>config uhttpd &#039;main&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_http &#039;192.168.0.1:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; #list listen_http &#039;[::]:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_https &#039;192.168.0.1:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; #list listen_https &#039;[::]:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option home &#039;/www&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rfc1918_filter &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_requests &#039;3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_connections &#039;100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cert &#039;/etc/uhttpd.crt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;/etc/uhttpd.key&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cgi_prefix &#039;/cgi-bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option script_timeout &#039;60&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network_timeout &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option http_keepalive &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcp_keepalive &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ubus_prefix &#039;/ubus&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304846">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">jacqkeen</div>
					<div class="post-datetime">
						23 Dec 2015, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>Gah! I restarted the uhttpd daemon and now i don&#039;t get the error! Sorry for the trouble.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305093">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">Amarh</div>
					<div class="post-datetime">
						26 Dec 2015, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>IPset? Not, I didn&#039;t hear...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305096">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">Amarh</div>
					<div class="post-datetime">
						26 Dec 2015, 18:00					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>ipset create AD_NET4 hash:net family inet
ipset create AD_NET6 hash:net family inet6
ipset create AD_IP4 hash:ip family inet
ipset create AD_IP6 hash:ip family inet6
ipset create ADBLOCK  list:set
ipset add ADBLOCK AD_NET4
ipset add ADBLOCK AD_NET6
ipset add ADBLOCK AD_IP4
ipset add ADBLOCK AD_IP6
ipset add ADBLOCK 77.88.8.8
ipset add ADBLOCK 0.0.0.0/8
ipset add ****
etc</code></pre></div><p>Option<br /></p><div class="codebox"><pre><code>#!/bin/bash

downloadList()
{
    while [ &quot;$(curl http://.../blacklist.txt.gz -z blacklist.txt.gz -o blacklist.txt.gz -s -L -w %{http_code})&quot; != &quot;200&quot; ]; do
        echo &quot;Blocklist download failed! Trying again in 60 seconds...&quot;
        sleep 60
    done
    echo &quot;Blocklist download successful!&quot;
}

applyList()
{
    local CHANGED=0
    for IP in $(zcat blacklist.txt.gz | sed -n &#039;/^[0-9]/p&#039;); do
        CHANGED=1
        ipset -q add ADBLOCK $IP -exist
    done
    if [ &quot;$CHANGED&quot; -eq 1 ]; then
        echo &quot;New IP addresses added to blacklist!&quot;
    else
        echo &quot;No new IP addresses added to blacklist!&quot;
    fi
}

# kill any existing blocklist downloader PIDs
pkill -f &lt;nameOfYourScriptFileHere&gt;
# download the blocklist
downloadList
# apply the blocklist
applyList

exit 0</code></pre></div><p>Allso<br /></p><div class="codebox"><pre><code>downloadList()
{
    local RESULT
    while true; do
        RESULT=&quot;$(curl http://.../blacklist.txt.gz -z blacklist.txt.gz -o blacklist.txt.gz -s -L -w %{http_code})&quot;
        case $RESULT in
            200)
                echo &quot;Blocklist download successful!&quot;
                break
                ;;
            404)
                echo &quot;404 received! Trying again in 60 seconds...&quot;
                sleep 60
                ;;
        esac
    done
}</code></pre></div><p>Then<br /></p><div class="codebox"><pre><code>    iptables -N ADBLOCK
    iptables -F ADBLOCK
    iptables -I ADBLOCK -j DROP
    iptables -I ADBLOCK -j LOG --log-prefix &quot;### AD DROPED ###: &quot; --log-level 6
    iptables -I OUTPUT -o eth+ -m set --match-set ADBLOCK src  -j ADBLOCK
    
    ip6tables -N ADBLOCK
    ip6tables -F ADBLOCK
    ip6tables -I ADBLOCK -j DROP
    ip6tables -I ADBLOCK -j LOG --log-prefix &quot;### AD DROPED ###: &quot; --log-level 6
    ip6tables -I OUTPUT -o eth+ -m set --match-set ADBLOCK src  -j ADBLOCK</code></pre></div><p>or only just like that<br /></p><div class="codebox"><pre><code>    iptables -I OUTPUT -o eth+ -m set --match-set ADBLOCK src  -j DROP
    ip6tables -I OUTPUT -o eth+ -m set --match-set ADBLOCK src  -j DROP</code></pre></div><h5>And stop forcing dnsmasq!!!111</h5>											<p class="post-edited">(Last edited by <strong>Amarh</strong> on 26 Dec 2015, 18:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305148">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						27 Dec 2015, 06:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Amarh wrote:</cite><blockquote><h5>And stop forcing dnsmasq!!!111</h5></blockquote></div><p>Since you seem to be very passionate about the matter can you elaborate on what&#039;s wrong with the dnsmasq adblocking?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305160">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">Amarh</div>
					<div class="post-datetime">
						27 Dec 2015, 13:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><div class="quotebox"><cite>Amarh wrote:</cite><blockquote><h5>And stop forcing dnsmasq!!!111</h5></blockquote></div><p>Since you seem to be very passionate about the matter can you elaborate on what&#039;s wrong with the dnsmasq adblocking?</p></blockquote></div><p>I hurried, I apologize. I forgot to deliver &quot;)&quot;.<br />Briefly, use not to destination can make operation of service unstable. For block of such large number of addresses is better to use ipset, which for this purpose and was written. I anyway tried to use dnsmasq for blocking by blacklist, in which I had about 60000 IP, and in a week unfortunate dnsmasq fell two times. Besides, dns started working only after all unit a list is processed.<br />I am delighted with the operation done by the author, but I want to emphasize that for these purposes it is better to use those means which were specially developed.<br />You can independently try to create such IPset and to look at a difference. The single insignificant shortcoming - that IPset&#039;s in itself doesn&#039;t remain, and, after reset they shall be created again. But it is solved very simply. You can look how it is realized in packets bcp38 and dns-ipset. I use dynamic sets therefore added cron job for saving a set every minute, and when boot up, before or with&nbsp; a firewall start, I do </p><div class="codebox"><pre><code>ipset -exist restore &lt; /where/the set/is located/ipset</code></pre></div><h5>To the author anyway many thanks for the work!</h5><p>And<br /></p><h5><img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></h5>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305180">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						27 Dec 2015, 16:54					</div>
				</div>
				<div class="post-content content">
					<p>When you say &quot;For block of such large number of addresses is better to use ipset, which for this purpose and was written&quot; -- can you again elaborate in which way is it better? Less RAM used? Faster operation?</p><p>I don&#039;t see the fact that you need to recreate rules after reboot as a big problem, I&#039;d rather have the router re-download the blocklists on each start than have it store the list on the device.</p><p>My concern is that using your rules would seem to result in the web-pages with &quot;broken&quot; items, would it not? If this can be worked out and if there&#039;s a demonstrable benefit of using ipset, would be great if you could collaborate with the author of this package (and ideally also the script which is used in arokh&#039;s builds) to transition to ipset use (or offer an option of using either dnsmasq or ipset) to redirect the ad requests to the pixelserv.</p><p>I&#039;m currently set up to use the dnsmasq and I&#039;m willing to be a guinea pig for the transition. I&#039;m fairly inexperienced with iptables tho and have some questions. Since I don&#039;t want to further thread-jack and OpenWrt forums do not support PMs, how can I reach out to you?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305185">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">Amarh</div>
					<div class="post-datetime">
						27 Dec 2015, 17:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stangri wrote:</cite><blockquote><p>When you say &quot;For block of such large number of addresses is better to use ipset, which for this purpose and was written&quot; -- can you again elaborate in which way is it better? Less RAM used? Faster operation?</p><p>I don&#039;t see the fact that you need to recreate rules after reboot as a big problem, I&#039;d rather have the router re-download the blocklists on each start than have it store the list on the device.</p><p>My concern is that using your rules would seem to result in the web-pages with &quot;broken&quot; items, would it not? If this can be worked out and if there&#039;s a demonstrable benefit of using ipset, would be great if you could collaborate with the author of this package (and ideally also the script which is used in arokh&#039;s builds) to transition to ipset use (or offer an option of using either dnsmasq or ipset) to redirect the ad requests to the pixelserv.</p><p>I&#039;m currently set up to use the dnsmasq and I&#039;m willing to be a guinea pig for the transition. I&#039;m fairly inexperienced with iptables tho and have some questions. Since I don&#039;t want to further thread-jack and OpenWrt forums do not support PMs, how can I reach out to you?</p></blockquote></div><p>It is unlikely I will be able to be very useful owing to congestion).<br />As for block of arrays of addresses, iptables works at the logic level of filtering, at the kernel level of system, and the ipset module was written especially for the purposes when it is necessary to process the big IP lists of addresses. Dnsmasq is small dhcp server with the dns resolver functions. It isn&#039;t intended for filtering, and on embeddable systems with limited resources it can reduce productivity noticeably. I suggest to use that tool which was created for such purposes. For readdressing on pixelserv it is possible to change the rule to redirect, etc. Something like this<br /></p><div class="codebox"><pre><code>iptables -t nat -A OUTPUT -m set --match-set ADBLOCK src -j DNAT --to-destination IP:PORT</code></pre></div><p>In any case, I would do somehow so))<br />I, unfortunately, have now no time to experiment. Perhaps in January... And adblock in the browser is more flexible and functional;)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305256">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						28 Dec 2015, 08:44					</div>
				</div>
				<div class="post-content content">
					<p>@stangri/amarh: this adblock package is a dns based adblock solution for openwrt. Feel free to invent another package based on ipset, iptables, privoxy or something else. As a starting point for ipset check <a href="https://firehol.org/installing/openwrt">firehol</a>, they&#039;re already support openwrt ...</p><p>back to vacation! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305455">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">stonecarver</div>
					<div class="post-datetime">
						29 Dec 2015, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m stuck at something &quot;bind uhttpd to the standard LAN port&quot;. How do I do this? <br />I&#039;m on latest trunk. Can I still access LuCi on my router over WiFi then?</p><p>Edit:<br />Can you please add <a href="http://www.malwaredomainlist.com/hostslist/hosts.txt">http://www.malwaredomainlist.com/hostslist/hosts.txt</a></p><p>Edit2:<br />And how does this compare to this adblock solution? <a href="https://gist.github.com/teffalump/7227752">https://gist.github.com/teffalump/7227752</a><br />Pros, cons?</p>											<p class="post-edited">(Last edited by <strong>stonecarver</strong> on 29 Dec 2015, 22:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305457">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						29 Dec 2015, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>re. uhttp bind: yes, see <a href="https://wiki.openwrt.org/doc/uci/uhttpd#securing_uhttpd">https://wiki.openwrt.org/doc/uci/uhttpd#securing_uhttpd</a> for securing uhttpd ...</p><p>re. new adblock source: no problem, I&#039;ll add this source with the next release </p><p>re. your posted link: did you read the first paragraph? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><div class="quotebox"><cite>stonecarver wrote:</cite><blockquote><p>I&#039;m stuck at something &quot;bind uhttpd to the standard LAN port&quot;. How do I do this? <br />I&#039;m on latest trunk. Can I still access LuCi on my router over WiFi then?</p><p>Edit:<br />Can you please add <a href="http://www.malwaredomainlist.com/hostslist/hosts.txt">http://www.malwaredomainlist.com/hostslist/hosts.txt</a></p><p>Edit2:<br />And how does this compare to this adblock solution? <a href="https://gist.github.com/teffalump/7227752">https://gist.github.com/teffalump/7227752</a><br />Pros, cons?</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305618">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						31 Dec 2015, 08:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>currently I&#039;m working on ipv6 support and I found a promising approach to combine the dns based solution with ipset/iptables.<br />I need some testers, ideally with ipv6 uplink. Please drop me a short mail (see package maintainer address) if you&#039;re interested in pre-testing - thanks.</p><p>Thanks again &amp; a happy new year!<br />Dirk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p306790">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">dibdot</div>
					<div class="post-datetime">
						8 Jan 2016, 22:15					</div>
				</div>
				<div class="post-content content">
					<p>@Amarh: ip based ad-/abuse-blocking does not work reliable in real world, i.e. youtube.com and google-analytics.com are using the same server infrastructure - see nslookup queries below. Therefore you can&#039;t block google-analytics without blocking harmless youtube videos...</p><div class="codebox"><pre><code>Name:      www-google-analytics.l.google.com
Address 1: 173.194.116.133 fra02s28-in-f5.1e100.net
Address 2: 173.194.116.130 fra02s28-in-f2.1e100.net
Address 3: 173.194.116.142 fra02s28-in-f14.1e100.net
Address 4: 173.194.116.131 fra02s28-in-f3.1e100.net
Address 5: 173.194.116.128 fra02s28-in-f0.1e100.net
Address 6: 173.194.116.134 fra02s28-in-f6.1e100.net
Address 7: 173.194.116.132 fra02s28-in-f4.1e100.net
Address 8: 173.194.116.136 fra02s28-in-f8.1e100.net
Address 9: 173.194.116.135 fra02s28-in-f7.1e100.net
Address 10: 173.194.116.137 fra02s28-in-f9.1e100.net
Address 11: 173.194.116.129 fra02s28-in-f1.1e100.net
Address 12: 2a00:1450:4001:80d::1005 fra02s28-in-x05.1e100.net

Name:      youtube.com
Address 1: 173.194.116.131 fra02s28-in-f3.1e100.net
Address 2: 173.194.116.135 fra02s28-in-f7.1e100.net
Address 3: 173.194.116.142 fra02s28-in-f14.1e100.net
Address 4: 173.194.116.133 fra02s28-in-f5.1e100.net
Address 5: 173.194.116.129 fra02s28-in-f1.1e100.net
Address 6: 173.194.116.132 fra02s28-in-f4.1e100.net
Address 7: 173.194.116.128 fra02s28-in-f0.1e100.net
Address 8: 173.194.116.130 fra02s28-in-f2.1e100.net
Address 9: 173.194.116.134 fra02s28-in-f6.1e100.net
Address 10: 173.194.116.137 fra02s28-in-f9.1e100.net
Address 11: 173.194.116.136 fra02s28-in-f8.1e100.net
Address 12: 2a00:1450:4001:80d::1003 fra02s28-in-x03.1e100.net</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p307717">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">zandhaas</div>
					<div class="post-datetime">
						15 Jan 2016, 10:11					</div>
				</div>
				<div class="post-content content">
					<p>Hello all</p><p>I have installed the adblocker on &quot; Chaos Calmer 15.05&quot;</p><p>In the beginning it did not download the &quot;blacklists&quot; from the internet.<br />After starting the script with &quot;bash -x&quot; I got the commands the script issues and I was able the pin point the command that went wrong.</p><p>Below part of the &quot;bash -x&quot; output<br />*****************************************<br />++ curl -q --insecure --silent --max-time 60 &#039;<a href="http://pgl.yoyo.org/adservers/serverlist.php?hostformat=one-line&amp;showintro=0&amp;mimetype=plaintext">http://pgl.yoyo.org/adservers/serverlis … =plaintext</a>&#039;<br />+ tmp_domains=<br />+ rc=16<br />+ &#039;[&#039; 16 -eq 0 &#039;]&#039;<br />+ &#039;[&#039; 16 -eq 0 &#039;]&#039;<br />+ f_log &#039;source download failed (yoyo)&#039; 16<br />+ local &#039;log_msg=source download failed (yoyo)&#039;<br />+ local log_rc=16<br />+ local &#039;class=info &#039;<br />+ &#039;[&#039; -n &#039;source download failed (yoyo)&#039; &#039;]&#039;<br />+ &#039;[&#039; 16 -ne 0 &#039;]&#039;<br />+ class=error<br />+ log_rc=&#039;, rc: 16&#039;<br />+ log_msg=&#039;source download failed (yoyo), rc: 16&#039;<br />+ /usr/bin/logger -s -t &#039;adblock[28797] error&#039; &#039;source download failed (yoyo), rc: 16&#039;<br />adblock[28797] error: source download failed (yoyo), rc: 16<br />*********************************************************************</p><p>After this I took the &quot;curl&quot; commandline and started it right from putty. Then I got a message stating the libmbedtls.so.9&nbsp; library was missing.</p><p>After some googling I found out the library is part of ssl communication packages. So I additionaly installed &quot;libpolarssl&quot; which seems the incorporate the missing library and voila the addblocker is functioning without errors.</p><p>Next step is testing if it blocks everything I want it to block.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=59803&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=59803&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=59803&amp;p=17.html">17</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>