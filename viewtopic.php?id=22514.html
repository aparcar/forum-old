<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Notification of the association of clients to the AP?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p97232">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">diego.misc</div>
					<div class="post-datetime">
						11 Nov 2009, 19:49					</div>
				</div>
				<div class="post-content content">
					<p>I am not sure if this should go on the developers forum or in the general one, my apologies if this is the wrong forum. For the record, I&#039;m running stock kamikaze 8.09.1 (brcm-2.4) on a WRT54GL.</p><p>My question is, is there a way of being notified programmatically when a client associates (or tries to associate) to my access point? I have been browsing through the forums or documentation, and could not find any (answered) reference to this particular issue. The logs on the router do not show anything when a client associates (they do show the DHCP requests and replies handled by dnsmasq, but I am looking for a more general way of handling the association). My intention is to be able to &quot;react&quot; (for example logging the associated client attempt, or executing some actions depending on its MAC) to that events.</p><p>On a related issue, which is the daemon or component responsible for handling the association of the clients in this case (brcm-2.4)? In other setups it seems that the handling of associating and authentication is done by <em>hostapd</em>, but it does not seem to be the case. It also seems that hostapd might be able to provide the &quot;notification&quot; feature I need, or at least the documentation on the configuration file [1] seems to hint so: in any case, any indication or comment would be much appreciated.</p><p>Best regards, and thanks in advance!</p><p>[1] <a href="http://hostap.epitest.fi/gitweb/gitweb.cgi?p=hostap.git;a=blob_plain;f=hostapd/hostapd.conf">http://hostap.epitest.fi/gitweb/gitweb. â€¦ stapd.conf</a></p>											<p class="post-edited">(Last edited by <strong>diego.misc</strong> on 11 Nov 2009, 19:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97242">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Nov 2009, 01:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi.</p><p>There is no notification mechanism you can rely on, however there is the possibility to poll the driver and look for changes during the cycles.<br />The proprietary &quot;wl&quot; utility (opkg install wl) has a command called &quot;assoclist&quot; which returns a list with mac addresses of all currently associated stations.<br />Using the command &quot;wl sta_info &lt;macaddr&gt;&quot; you can get detailled info per client like authentication state etc.</p><p>With this knowledge you can build a cronjob or similar to implement some kind of client logging.</p><p>Edit:<br />To answer your second question, on brcm-2.4 the driver handles the association stuff itself and wpa is handled by the &quot;nas&quot; process.<br />The nas authenticator is propriatary as well and thus a blackbox, as far as I know it provides no notification facilities you can use and it isn&#039;t very verbose in general.</p><p>Regards,<br />JoW</p>											<p class="post-edited">(Last edited by <strong>jow</strong> on 12 Nov 2009, 02:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p97268">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">diego.misc</div>
					<div class="post-datetime">
						12 Nov 2009, 14:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the answer, JoW! I was aware of the existence of the wl utility, but was hoping for a &quot;cleaner&quot; way of getting notified other than polling the driver. But perhaps that is the only way to go.</p><p>Regarding the second issue, thanks for the information as well. I assume that the nas process you refer to is the same one that is described in [1], and indeed seems not very user friendly. Since it seems that hostapd is available in the repositories for 2.4, would it be possible to use hostapd instead of nas (by replacing the hotplug.d script that starts nas), or is the brcm-2.4 driver not supported by hostapd? </p><p>Thanks again!</p><p>[1] <a href="http://wiki.openwrt.org/oldwiki/openwrtdocs/nas">http://wiki.openwrt.org/oldwiki/openwrtdocs/nas</a></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>