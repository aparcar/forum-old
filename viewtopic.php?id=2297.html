<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54G v3.1 + Xsupplicant = Interface eth1 is NOT wireless!</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p10752">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ying</div>
					<div class="post-datetime">
						14 Aug 2005, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>My last try to get it working....</p><p>Well I&#039;m trying to connect to the wlan of my university with eap-leap. So I installed on my wrt54g v2. OpenWrt and the xsupplicant. And allways get [INT] Interface eht1 is NOT wireless!</p><p>Now, I bought a new wrt54g (v3.1) because I need a second one and also hoped that it would run with the newer version because of the different wlan-chip.</p><p>So I set it up with the whiterussian RC2, installed xsupplicant from the florian-experimental packages. Updated kmod-wlcompat and wificonf from the nbd-packages. And tried to run the xsupplicant. But still get the same error message: [INT] Interface eth1 is NOT wireless!.</p><p>RitalMan told me that he has successfully tested it and I guess that he is not the only one.</p><p>I found a function in the xsupplicant sources which checks the /proc/net/wireless if the chosen interface is a wireless or not. But in this forum I read that since the newer linksys versions the /proc/net/wireless isn&#039;t supported anymore. So I need the wlcompat kmod to keep the &quot;older&quot; scripts/progs, who are using /proc/net/wireless, running. Is this right?</p><p>Perhaps I allways do a little mistake during my setup. </p><p>OK, here is my nvram show:<br /></p><div class="codebox"><pre><code>wl_radius_port=1812
wl_mac_deny=
filter_dport_grp3=
filter_dport_grp4=
filter_dport_grp5=
filter=off
wan_unit=0
filter_dport_grp6=
os_ram_addr=80001000
wl0_net_mode=mixed
filter_dport_grp7=
wl0_frameburst=off
filter_dport_grp8=
filter_dport_grp9=
ddns_username_2=
log_ipaddr=0
boardrev=0x10
il0macaddr=00:14:bf:29:ca:1d
ppp_idletime=5
ppp_passwd=
et0macaddr=00:14:BF:29:CA:1B
ddns_enable=0
bootnv_ver=6
qos_appport1=0
skip_intel_check=0
qos_appport2=0
ddns_hostname_buf=
wl_maxassoc=128
wl0_akm=
d11g_mode=1
wan_get_dns=
wl0_wep_buf=
qos_appport3=0
boot_wait=on
watchdog=5000
qos_appport4=0
wl_phytypes=
filter_web_host1=
wl0_macmode1=disabled
qos_appport5=0
filter_web_host2=
wl0_infra=1
qos_appport6=0
filter_web_host3=
fw_disable=0
wl0_country_code=ALL
et0mdcport=0
qos_appport7=0
router_name=funkstar-ac
pppoe_keepalive=0
filter_web_host4=
qos_appport8=0
filter_web_host5=
https_enable=0
filter_web_host6=
Intel_firmware_version=v1.41.8
wl_infra=1
filter_web_host7=
l2tp_get_ip=
filter_web_host8=
ses_event=0
filter_web_host9=
pptp_server_ip=
ppp_get_ac=
pmon_ver=CFE 3.91.7.0
restore_defaults=0
get_sn=
wan_run_mtu=1500
ppp_username=
wl0_wme_sta_be=15 1023 3 0 0 off
wan_lease=0
filter_port=
ddns_enable_buf=
d11g_dtim=1
ddns_hostname=
wl_radius_ipaddr=
http_wanport=8080
filter_ip_grp1=
filter_ip_grp2=
lan_gateway=192.168.0.1
wl0_ifname=eth1
filter_ip_grp3=
dr_lan_rx=0
filter_ip_grp4=
lan_domain=
wl0_wme_sta_bk=15 1023 7 0 0 off
filter_ip_grp5=
timer_interval=3600
gpio2=ses_led
filter_ip_grp6=
gpio3=ses_led2
wl_net_reauth=36000
pppoe_ac=
filter_ip_grp7=
filter_rule1=
qos_devmac1=00:00:00:00:00:00
hb_server_ip=
ipsec_pass=1
gpio4=ses_button
filter_ip_grp8=
filter_rule2=
qos_devmac2=00:00:00:00:00:00
ses_enable=1
filter_ip_grp9=
filter_rule3=
gpio5=robo_reset
vlan0ports=1 2 3 4 5*
filter_rule4=
filter_rule5=
lan_route=
filter_ip_grp10=
filter_rule6=
wl0_mrate=0
wl0_mode=sta
filter_rule7=
wan_gateway=0.0.0.0
dhcp_start=100
filter_rule8=
filter_rule9=
eou_configured=1
ident_pass=0
wl0_ap_isolate=0
wl_mrate=0
l2tp_server_ip=
wl_akm=
os_flash_addr=bfc40000
wl0_wme_no_ack=off
wl0_gmode=1
dhcp_lease=0
sromrev=2
qos_devpri1=0
qos_devpri2=0
get_mac_index=1
boardtype=0x0708
is_default=0
wl_active_add_mac=0
wl_gmode=1
ping_ip=
stats_server=
static_route=
d11g_rate=0
lan_netmask=255.255.255.0
wl0_wep_last=
dmz_enable=0
wl_wme_sta_vi=7 15 2 6016 3008 off
wl0_dtim=1
wl0_ssid=funkstar-ac
http_username=
manual_rate=0
port_trigger=
qos_devname1=
wl_wme_ap_be=15 63 3 0 0 off
filter_web_host10=
qos_devname2=
os_date=May 27 2005
http_lanport=80
wl_wme_sta_vo=3 7 2 3264 1504 off
wl_plcphdr=long
filter_mac_grp1=
wl_macmode=disabled
ppp_service=
ppp_redialperiod=30
filter_mac_grp2=
wl_wme_ap_bk=15 1023 7 0 0 off
filter_mac_grp3=
wan_domain=
wan_hwname=
wl0_key1=
wl_phytype=g
filter_mac_grp4=
wan_netmask=0.0.0.0
lan_lease=86400
wl0id=0x4320
wl0_key2=
pppoe_static_ip=
filter_mac_grp5=
wl_lazywds=1
wl0_key3=
filter_mac_grp6=
wl0_key4=
filter_mac_grp7=
filter_mac_grp8=
filter_client0=
filter_mac_grp9=
filter_maclist=
pptp_pass=1
pptp_get_ip=
wl_auth_mode=none
ppp_demand=1
mtu_enable=0
ppp_keepalive=0
block_activex=0
d11g_rts=2347
remote_mgt_https=0
wl_wpa_psk=
http_passwd=admin
ag0=255
block_wan=1
lan_stp=0
wl0_wme_ap_vi=7 15 1 6016 3008 off
skip_amd_check=0
wl_mode=ap
wl0_plcphdr=long
wl0_rate=0
wl0_closed=0
wl_wpa_gtk_rekey=3600
d11g_rateset=default
wl0_macmode=disabled
wl0_wme_ap_vo=3 7 1 3264 1504 off
lan_dhcp=0
wl0_radioids=BCM2050
wl0_phytype=g
wl0gpio2=0
dr_wan_rx=0
filter_tod_buf1=
wl0_lazywds=1
wl0gpio3=0
block_proxy=0
filter_tod_buf2=
filter_tod_buf3=
port_rate_limit_1=0
filter_tod_buf4=
boardflags2=0
port_rate_limit_2=0
filter_tod_buf5=
port_rate_limit_3=0
dr_lan_tx=0
wl0_afterburner=off
filter_tod_buf6=
http_client_ip=192.168.1.2
port_rate_limit_4=0
wl_wds_timeout=1
filter_tod_buf7=
filter_tod10=
lan_hwaddr=00:14:BF:29:CA:1B
get_eou_index=1
wl0_antdiv=-1
filter_tod_buf8=
wan_dns=
filter_tod_buf9=
http_client_mac=00:00:F0:92:A9:A2
action_service=filters
wl_dtim=1
wl_ssid=funkstar-ac
wl0_wpa_psk=
d11g_bcn=100
web_wl_filter=0
wl_passphrase=
daylight_time=1
flash_type=Intel 28F320C3 2Mx16 BotB
wl0_mac_list=
security_mode=disabled
dhcp_wins=wan
multicast_pass=0
filter_tod_buf10=
os_server=
bcm4712_firmware_version=v1.50.0
pppoe_static=0
hb_server_domain=
wl_key1=
wan_proto=dhcp
ses_client_join=0
wl_key2=
wl0_unit=0
wl_key3=
wl_key4=
wl_country_code=ALL
ddns_cache=
wl_hwaddr=
aol_block_traffic1=0
aol_block_traffic2=0
static_route_name=
wl0_net_reauth=36000
wl_active_mac=
wl_net_mode=mixed
pa0itssit=62
enable_game=0
forward_port=
d11g_frag=2346
sel_qosport1=0
sel_qosport2=0
wl0_wds=
filter_mac_grp10=
sel_qosport3=0
wl_rate=0
ppp_static_ip=
sel_qosport4=0
block_java=0
log_level=0
cctl=0
sel_qosport5=0
ntp_server=
ct_modules=
sel_qosport6=0
wan_hwaddr=00:14:BF:29:CA:1C
sel_qosport7=0
sel_qosport8=0
lan_ifnames=vlan0
lan_dns=192.168.0.1
wl_macmode1=disabled
pppoe_ifname=
wl0_radius_port=1812
wl0_wme=off
wl0_auth=0
wl0_mac_deny=
wl0_radius_ipaddr=
pppoe_service=
wl0_wme_sta_vi=7 15 2 6016 3008 off
wl_country=ALL
pa0maxpwr=0x4e
traceroute_ip=
ddns_change=
remote_management=0
wan_ifnames=vlan1
block_loopback=0
wl0_wme_sta_vo=3 7 2 3264 1504 off
wl_crypto=tkip
wl_rateset=default
wl_wep_bit=64
ppp_mru=1500
http_method=post
wl_cck_result=16.50
QoS=0
wl_radius_key=
filter_port_grp1=
os_name=linux
clkfreq=216
lan_ipaddr=192.168.0.3
filter_port_grp2=
vlan1hwname=et0
aa0=3
wl0_maxassoc=128
ddns_passwd_2=
filter_port_grp10=
filter_port_grp3=
dr_wan_tx=0
wl_unit=0
filter_port_grp4=
filter_id=1
filter_port_grp5=
firmware_version=v4.01.1
wl0_phytypes=g
wl0_frag=2346
d11g_channel=7
wl0_wep=disabled
filter_port_grp6=
router_disable=0
ddns_username=
filter_port_grp7=
ddns_passwd=
pppoe_passwd=
filter_port_grp8=
ses_led_assertlvl=0
filter_port_grp9=
ppp_ac=
log_enable=0
sdram_config=0x0062
filter_web_url10=
wl0_country=ALL
dmz_ipaddr=0
vlan1ports=0 5
security_mode_last=
wl_wds=
eou_private_key=ac57bc509b2ff91245964606970fc3c1bb99ef9554ead5cf58e4c74f2c7b62a107ac41d333b66d79a1eb4c5fc7d47710bd97030fc91a00abc063076ad64555e383b6e8cd070522f034cf7fc859f249c338d63e960d8ce7ad0315330acf0c32abd5322ae257ee9103bce543e9ebd550e26f065d6394ebb155ba7345cfb99de5f1
ddns_hostname_2=
scratch=a0180000
ccode=0
wl0_rateset=default
wl0_wep_bit=64
port_flow_control_1=1
wl_wme=off
pppoe_idletime=5
eou_device_id=LOYJFJFB
port_flow_control_2=1
get_mac=00:14:BF:29:CA:1B
ping_times=
port_flow_control_3=1
wl_wme_ap_vi=7 15 1 6016 3008 off
wan_primary=1
lan_ifname=vlan0
port_flow_control_4=1
filter_services=$NAME:003:DNS$PROT:003:udp$PORT:005:53:53&lt; &gt;$NAME:004:Ping$PROT:004:icmp$PORT:003:0:0&lt; &gt;$NAME:004:HTTP$PROT:003:tcp$PORT:005:80:80&lt; &gt;$NAME:005:HTTPS$PROT:003:tcp$PORT:007:443:443&lt; &gt;$NAME:003:FTP$PROT:003:tcp$PORT:005:21:21&lt; &gt;$NAME:004:POP3$PROT:003:tcp$PORT:007:110:110&lt; &gt;$NAME:004:IMAP$PROT:003:tcp$PORT:007:143:143&lt; &gt;$NAME:004:SMTP$PROT:003:tcp$PORT:005:25:25&lt; &gt;$NAME:004:NNTP$PROT:003:tcp$PORT:007:119:119&lt; &gt;$NAME:006:Telnet$PROT:003:tcp$PORT:005:23:23&lt; &gt;$NAME:004:SNMP$PROT:003:udp$PORT:007:161:161&lt; &gt;$NAME:004:TFTP$PROT:003:udp$PORT:005:69:69&lt; &gt;$NAME:003:IKE$PROT:003:udp$PORT:007:500:500&lt; &gt;
boardflags=0x0118
sdram_refresh=0x0000
dhcp_domain=wan
wl_auth=0
wl_ofdm_result=16.50
wl_wep_last=
sdram_ncdl=0xfd0007
wan_gateway_buf=0.0.0.0
wl_wme_ap_vo=3 7 1 3264 1504 off
block_cookie=0
wl_frameburst=off
ezc_enable=1
wan_iface=vlan1
is_modified=1
upnp_wan_proto=
dhcp_num=50
filter_web_url1=
wan_ipaddr=0.0.0.0
filter_web_url2=
wl0_passphrase=
filter_web_url3=
wl0_rts=2347
filter_web_url4=
filter_web_url5=
wl_ifname=
filter_web_url6=
wan_wins=
ntp_mode=auto
wl_wep=disabled
http_enable=1
filter_web_url7=
l2tp_pass=1
filter_web_url8=
pppoe_username=
filter_web_url9=
os_version=3.91.7.0
qos_appname1=
wl_gmode_protection=off
qos_appname2=
wl0_wpa_gtk_rekey=3600
qos_appname3=
mac_clone_enable=0
ppp_get_srv=
qos_appname4=
wl_frag=2346
qos_appname5=
wan_mtu=1500
wl_wep_gen=
wl0_key=1
qos_appname6=
wl0_active_mac=
qos_appname7=
rate_mode=1
wl_maclist=
filter_macmode=deny
qos_appname8=
console_loglevel=1
et0phyaddr=30
time_zone=+01 2 2
wan_get_domain=
wan_ifname=vlan1
wl_wme_sta_be=15 1023 3 0 0 off
wl_radioids=
wan_hostname=
wl0_radio=1
wl_corerev=
ppp_mtu=1500
ddns_interval=60
wl_channel=7
manual_boot_nv=0
wl_wme_sta_bk=15 1023 7 0 0 off
wl0_bcn=100
port_priority_1=0
port_priority_2=0
wl_afterburner=off
wl_radio=1
ppp_static=0
filter_tod1=
wl0_hwaddr=00:14:BF:29:CA:1D
port_priority_3=0
filter_tod2=
port_priority_4=0
filter_tod3=
filter_tod4=
ezc_version=2
wl0_wep_gen=
ddns_passwd_buf=
wk_mode=gateway
wl0_gmode_protection=off
filter_tod5=
pa0b0=0x15eb
eou_expired_hour=72
wl0_maclist=
filter_tod6=
pa0b1=0xfa82
filter_tod7=
pa0b2=0xfe66
wl_rts=2347
filter_tod8=
sdram_init=0x010b
filter_tod9=
aol_block_traffic=0
wl_ap_isolate=0
lan_wins=
vlan0hwname=et0
wl_mac_list=
lan_hwnames=
dl_ram_addr=a0001000
wl_wme_no_ack=off
pppoe_demand=1
wl0_radius_key=
filter_dport_grp10=
ddns_username_buf=
wl0_wme_ap_be=15 63 3 0 0 off
wl0_corerev=7
wl_key=1
wl0_channel=7
wl0_wds_timeout=1
dr_setting=0
wl0_wme_ap_bk=15 1023 7 0 0 off
upnp_enable=1
ddns_status=
filter_rule10=
ses_sw_btn_status=DEFAULTS
wl0_auth_mode=none
wl_closed=0
boot_ver=v3.5
autofw_port0=
wl0_crypto=tkip
language=EN
boardnum=42
def_hwaddr=00:00:00:00:00:00
wl_bcn=100
wl_wep_buf=
eou_public_key=b71d3815a4e2f8a369efaa670080bffdd7538e8eaa39832c4e7313c41f4318cb182705f066f1d4513c0a0125c451be81c9707340c5aba0b67c6937e183a9ab436e4c957ecc3f3fa3c4a1a5f366d7d093e6b9ba3d4c2f6ab969f016581fb011587fb0643c7de1c79a11c91e0c254e01c7e5a4ead359685eef7d439f4f42a05da311
get_sn_index=0
filter_dport_grp1=
wl_antdiv=-1
filter_dport_grp2=</code></pre></div><p>And here the log from my xsupplicant:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/etc# xsupplicant -i eth1 -d A -f
Using default config path!
[INT] Flags are : 02
[STATE] Reinit state machine
[INT] Clearing keys!
[INT] Initializing socket for interface eth1..
[INT] Index : 3
[INT] Allmulti mode is already enabled on this device!
[INT] WPA: Enabling WPA on interface eth1.
[INT] Interface eth1 is NOT wireless!
[INT] Interface initialized!
[INT] Interface eth1 is NOT wireless!
[CONFIG] Working from config file /etc/xsupplicant.conf.
No configuration information for network &quot;(null)&quot; found.  Using default.
Couldn&#039;t get MAC address for AP!
[INT] Current BSSID is 50 84 00 10 A0 0F
[INT] Opened socket descriptor #7
[STATE] DISCONNECTED -&gt; CONNECTING
[STATE] Backend State : INITIALIZE -&gt; IDLE
[STATE] Sending EAPOL-Start Frame.
[ALL] Frame to be sent :
01 80 C2 00 00 03 00 14 - BF 29 CA 1D 88 8E 02 01 .........)......
00 00                                             ..
[ALL] Clock tick! authWhile=29 heldWhile=59 startWhen=29 curState=CONNECTING
[ALL] Clock tick! authWhile=28 heldWhile=58 startWhen=28 curState=CONNECTING
[ALL] Clock tick! authWhile=27 heldWhile=57 startWhen=27 curState=CONNECTING
[ALL] Shutting down IPC socket!
[INT] Closing socket descriptor #7
[ALL] Doing statemachine cleanup!
There was no active method in eap_cleanup()!
[INT] Sending Logoff for int eth1!
[STATE] Sending EAPOL-Logoff Frame.
[ALL] Frame to be sent :
01 80 C2 00 00 03 00 14 - BF 29 CA 1D 88 8E 02 02 .........)......
00 00                                             ..
[ALL] Cleaning up interface eth1...
[INT] Turning off WPA support/state.
[INT] Called event_core_cleanup()!
[INT] Called cardif_linux_rtnetlink_cleanup()!
root@OpenWrt:/etc#</code></pre></div><p>If you need more informations just ask.</p><p>Thanks for your help</p><p>ying</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10763">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hrzags11</div>
					<div class="post-datetime">
						14 Aug 2005, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>doesnt metter if eth1 isnt wireless, it is some Xsupplicant internal AI, but that doesnt create any problem, think on that like warrning.</p><p>Isit your WRT associete to some SSID ? ... I am more worry about&nbsp; Couldn&#039;t get MAC address for AP! message. That may mean Your AP doesnt working properly.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p10924">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ying</div>
					<div class="post-datetime">
						17 Aug 2005, 13:51					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m sitting next to the AP I want to connect to. Still getting the same message.</p><p>&quot;Couldn&#039;t get MAC address for AP!&quot; ... I can connect with my notebook without any problems.</p><p>Before I start the xsupplicant I have to bring eth1 up manualy by typing &quot;ifconfig eth1 up&quot;. But I guess that&#039;s correct.</p><p>I don&#039;t know what I can do/test to get it working. </p><p>HELP !! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11008">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ying</div>
					<div class="post-datetime">
						19 Aug 2005, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>OK back again <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>I guess that I found my problem. <br />Before I can start the xsupplicant I have to join the AP with #wl join. I always thought that the xsupplicant would scan for the APs like the wpa_supplicant.</p><p>I tested it with an open AP. I joined it with wl join WLAN and started the xsupplicant. And (what a surprise) it wanted to authentificate with this AP.</p><p>So I tried to join the my university-wlan which is secured with WPA (I can use eap-fast, eap-leap, eap-peap). But now I have an other problem, because I can&#039;t join this secured wlan with the wl join command. Tried to set wl eap 1, wl wpa_auth 2. Without any success.<br />I read some forum-posts, the clientmode howto but didn&#039;t find any help.</p><p>Which nvram variables or wl commands I have to set/run to connect to this secured ap, so that I can run the xsupplicant?</p><p>Thanks<br />Ying</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>