<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mount_root: No jffs2 marker was found</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p207147">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						15 Jul 2013, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>I tried this FW today:</p><p>59d7390ff8d8a572d8a490b33b765a82&nbsp; openwrt-ar71xx-generic-tl-mr3220-v2-squashfs-factory.bin</p><p>after flashing, the router reboots in infinite loop. Led starts flashing then reboot. I can still enter safe mode and login with telnet, but I am unable to debrick it. What is wrong?</p><p>Dropbear does not start so I cannot scp another firmware <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>any idea?</p><p>root@(none):/# mount_root <br />mount_root: No jffs2 marker was found<br />mount_root: mount failed: Invalid argument</p><p>root@(none):/# mount<br />rootfs on / type rootfs (rw)<br />/dev/root on /rom/rom type squashfs (ro,relatime)<br />proc on /proc type proc (rw,noatime)<br />sysfs on /sys type sysfs (rw,noatime)<br />tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)<br />tmpfs on /dev type tmpfs (rw,noatime,size=512k,mode=755)<br />devpts on /dev/pts type devpts (rw,noatime,mode=600)<br />tmpfs on /tmp/root type tmpfs (rw,noatime,mode=755)<br />overlayfs:/tmp/root on /rom type overlayfs (rw,noatime,lowerdir=/,upperdir=/tmp/root)<br />tmpfs on /tmp/root type tmpfs (rw,noatime,mode=755)<br />overlayfs:/tmp/root on / type overlayfs (rw,noatime,lowerdir=/,upperdir=/tmp/root)<br />tmpfs on /tmp/root type tmpfs (rw,noatime,mode=755)</p><br /><p>root@(none):/# df<br />Filesystem&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blocks&nbsp; &nbsp; &nbsp; Used Available Use% Mounted on<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /<br />/dev/root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1792&nbsp; &nbsp; &nbsp; 1792&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /rom/rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; 12&nbsp; &nbsp; &nbsp;14484&nbsp; &nbsp;0% /tmp<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 512&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp; &nbsp;512&nbsp; &nbsp;0% /dev<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /tmp/root<br />overlayfs:/tmp/root&nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /rom<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /tmp/root<br />overlayfs:/tmp/root&nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /<br />tmpfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 14496&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp; &nbsp;14496&nbsp; &nbsp;0% /tmp/root</p><p>root@(none):/# ps<br />&nbsp; PID USER&nbsp; &nbsp; &nbsp; &nbsp;VSZ STAT COMMAND<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; 1248 S&nbsp; &nbsp; /sbin/init<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kthreadd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[ksoftirqd/0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kworker/0:0]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kworker/0:0H]<br />&nbsp; &nbsp; 6 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kworker/u:0]<br />&nbsp; &nbsp; 7 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kworker/u:0H]<br />&nbsp; &nbsp; 8 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [khelper]<br />&nbsp; &nbsp; 9 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kworker/u:1]<br />&nbsp; &nbsp;63 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[bdi-default]<br />&nbsp; &nbsp;65 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kblockd]<br />&nbsp; &nbsp;95 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kswapd0]<br />&nbsp; 141 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[fsnotify_mark]<br />&nbsp; 169 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [ath79-spi]<br />&nbsp; 245 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [deferwq]<br />&nbsp; 247 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[kworker/0:2]<br />&nbsp; 257 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[khubd]<br />&nbsp; 285 root&nbsp; &nbsp; &nbsp; 1620 S&nbsp; &nbsp; /bin/sh /etc/preinit<br />&nbsp; 350 root&nbsp; &nbsp; &nbsp; 1492 R&nbsp; &nbsp; telnetd -l /bin/login.sh<br />&nbsp; 354 root&nbsp; &nbsp; &nbsp; 1484 S&nbsp; &nbsp; lock /tmp/.failsafe<br />&nbsp; 355 root&nbsp; &nbsp; &nbsp; 1496 S&nbsp; &nbsp; ash --login<br />&nbsp; 362 root&nbsp; &nbsp; &nbsp; 1508 S&nbsp; &nbsp; /bin/ash --login<br />&nbsp; 396 root&nbsp; &nbsp; &nbsp; 1492 R&nbsp; &nbsp; ps</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207148">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						15 Jul 2013, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>root@(none):/# dropbear -F -E<br />[400] Jan 01 00:07:26 Premature exit: Bad buf_getptr</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207150">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						15 Jul 2013, 02:08					</div>
				</div>
				<div class="post-content content">
					<p>I think this is the cause of the problem (from dmsg) - but why it happend and what went wrong??</p><p>[&nbsp; &nbsp; 0.700000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;<br />[&nbsp; &nbsp; 0.710000] 0x000000020000-0x00000011eb80 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.710000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.730000] 0x00000011eb80-0x0000003f0000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.730000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only<br />[&nbsp; &nbsp; 0.740000] mtd: partition &quot;rootfs&quot; set to be root filesystem<br />[&nbsp; &nbsp; 0.750000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2D0000, len=120000 <br />[&nbsp; &nbsp; 0.760000] 0x0000002d0000-0x0000003f0000 : &quot;rootfs_data&quot;<br />[&nbsp; &nbsp; 0.760000] 0x0000003f0000-0x000000400000 : &quot;art&quot;<br />[&nbsp; &nbsp; 0.770000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207153">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Horst_Tappert</div>
					<div class="post-datetime">
						15 Jul 2013, 03:11					</div>
				</div>
				<div class="post-content content">
					<p>I also had this problem with the 13 July build for the TL-WR720N.&nbsp; I could put a working firmware on it with the netcat / indirect method described on &lt;<a href="http://wiki.openwrt.org/doc/howto/generic.sysupgrade">http://wiki.openwrt.org/doc/howto/generic.sysupgrade</a>&gt;.&nbsp; This will probably work for you, too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207160">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						15 Jul 2013, 05:25					</div>
				</div>
				<div class="post-content content">
					<p>yeah I debricked it using netcat.... however do not find the reason why it bricked. Seems to me the Jul 13 images are broken... just wait few days.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207274">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">nmlss2013</div>
					<div class="post-datetime">
						16 Jul 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<p>Same here, jul 13 built, TP-3220 v2.1 . And netcat (indirect method as recommended) does not solve the issue. Are the snapshots weekly?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207328">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">velsi</div>
					<div class="post-datetime">
						16 Jul 2013, 23:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kurczaq wrote:</cite><blockquote><p>yeah I debricked it using netcat....</p></blockquote></div><p>tell me steps that you&#039;ve done, please</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207385">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kurczaq</div>
					<div class="post-datetime">
						17 Jul 2013, 18:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>velsi wrote:</cite><blockquote><div class="quotebox"><cite>kurczaq wrote:</cite><blockquote><p>yeah I debricked it using netcat....</p></blockquote></div><p>tell me steps that you&#039;ve done, please</p></blockquote></div><p>you basically do on the host (replace firmwareXXXX with the correct filename ):</p><p>cat firmwareXXXX | netcat -l 3333</p><p>and on the router:</p><p>nc 192.168.1.X 3333 &gt;fw.bin</p><p>you must be able to login into router in safe mode. X is the IP of the host.</p><p>then on the router you do &quot;sysupgrade fw.bin&quot; and you are done.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p207401">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">velsi</div>
					<div class="post-datetime">
						17 Jul 2013, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>thanks</p><p>my problem was in win7 firewall</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>