<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Xiaomi Mi Wifi Nano</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 22 Mar 2018 and 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=60888&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=60888&amp;p=3.html">3</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p299560">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gazambuja</div>
					<div class="post-datetime">
						12 Nov 2015, 17:49					</div>
				</div>
				<div class="post-content content">
					<p>I try to install openwrt on this router, but I cant find the way to get ssh passwor of Xiaomi</p><p>Try until now:<br />1. Download dev ROM from: <a href="http://www1.miwifi.com/miwifi_download.html">http://www1.miwifi.com/miwifi_download.html</a> --&gt;&nbsp; <a href="http://bigota.miwifi.com/xiaoqiang/rom/r1cl/miwifi_r1cl_all_59371_2.1.26.bin">http://bigota.miwifi.com/xiaoqiang/rom/ … 2.1.26.bin</a></p><p>2. Install rom to get SSH (using browser) </p><p>Now SSH is live, but I cant get the password.<br />In this page (the same to the Mini version of this router) doesnt show this new router: <a href="https://d.miwifi.com/rom/ssh">https://d.miwifi.com/rom/ssh</a></p><p>You can help?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300213">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						17 Nov 2015, 22:08					</div>
				</div>
				<div class="post-content content">
					<p>The only form I found it by reprogramming the uboot, it appears UART is enabled on uboot. If not, reprogram by flash, that is what I did. The Mini ROM doesn&#039;t work with this one, as this one uses MT7628. Wifi is not working ATM</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300232">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						17 Nov 2015, 23:56					</div>
				</div>
				<div class="post-content content">
					<p><a href="https://wiki.openwrt.org/toh/xiaomi/nano">https://wiki.openwrt.org/toh/xiaomi/nano</a> doesn&#039;t contain too much useful information right now :-/</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300234">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						18 Nov 2015, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>I know, I didn&#039;t have time to make a guide. Will do it today or tomorrow. But remember, it is not on a working state! LAN is slow and no WiFi.</p><p>I am working on a image with the factory firmware but access to SSH.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300311">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						18 Nov 2015, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>By the way, I haven&#039;t tested it but PandoraBox has images with (it appears to be) wifi support:</p><p><a href="http://downloads.openwrt.org.cn/PandoraBox/MT7628AN_EVB/">http://downloads.openwrt.org.cn/Pandora … 628AN_EVB/</a></p><p>UBOOT is enabled and you can flash a new uboot there, if you want to.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300379">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						19 Nov 2015, 07:52					</div>
				</div>
				<div class="post-content content">
					<p>New instructions, you can try using the default uboot web interface. I will test it tomorrow.</p><p><a href="https://wiki.openwrt.org/toh/xiaomi/nano">https://wiki.openwrt.org/toh/xiaomi/nano</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301194">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">ovt00</div>
					<div class="post-datetime">
						25 Nov 2015, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>Dear netomx?<br />when do you install PandoraBox what works, what not works? broadcast works?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301205">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						25 Nov 2015, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>It &quot;works&quot;. Ap+sta is very unstable. Wifi works but giving 10mbps output. Range is pretty good</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301213">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						25 Nov 2015, 21:18					</div>
				</div>
				<div class="post-content content">
					<p>So how do you flash a new uboot or a pandora image? I can read the serial console but i cant get write access... how do i interrupt the boot sequence to tfpt the image? because the standard uboot webserver on 192.168.31.1 doesn&#039;t accept any other images...</p>											<p class="post-edited">(Last edited by <strong>s1lvester</strong> on 25 Nov 2015, 22:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301228">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						25 Nov 2015, 23:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>s1lvester wrote:</cite><blockquote><p>So how do you flash a new uboot or a pandora image? I can read the serial console but i cant get write access... how do i interrupt the boot sequence to tfpt the image? because the standard uboot webserver on 192.168.31.1 doesn&#039;t accept any other images...</p></blockquote></div><p>The serial console from the MI image doesn&#039;t work, but the uboot works. Check your connections. When the uboots starts to boot, it asks for 9 options, choose the one that says &quot;upload new rom and flash it&quot;.</p><p>It works</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301318">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						26 Nov 2015, 18:54					</div>
				</div>
				<div class="post-content content">
					<p>F me! I wasted two days of banging my head against the wall.</p><p>writing to uboot only works with the stock 2.0.30 firmware form miwifi.com. I initially flashed the development-version 2.1.26 which doesn&#039;t seem to allow any console access anymore.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301320">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						26 Nov 2015, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>You downgrade it and it worked?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301353">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						26 Nov 2015, 22:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>netomx wrote:</cite><blockquote><p>You downgrade it and it worked?</p></blockquote></div><p>yes</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301376">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						27 Nov 2015, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>Excellent news!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301504">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">habl</div>
					<div class="post-datetime">
						27 Nov 2015, 23:11					</div>
				</div>
				<div class="post-content content">
					<p>Hi all. I connect to my Xiaomi mi nano R1CL with 2.0.30 for UART 115200 but UBoot does not respond to a keystroke 2.</p><p>Serial cable and connect is proper. I connected to router with Putty. Please help me.</p><div class="quotebox"><blockquote><p>RESET MT7628 PHY!!!!!!<br />Please choose the operation:<br />&nbsp; &nbsp;1: Load system code to SDRAM via TFTP.<br />&nbsp; &nbsp;2: Load system code then write to Flash via TFTP.<br />&nbsp; &nbsp;3: Boot system code via Flash (default).<br />&nbsp; &nbsp;4: Entr boot command line interface.<br />&nbsp; &nbsp;5: Load system2 code then write to Flash via TFTP.<br />&nbsp; &nbsp;7: Load system code via web.<br />&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP.</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301507">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						27 Nov 2015, 23:24					</div>
				</div>
				<div class="post-content content">
					<p>It should work. Check your uart connection</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301674">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						29 Nov 2015, 18:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>habl wrote:</cite><blockquote><p>Hi all. I connect to my Xiaomi mi nano R1CL with 2.0.30 for UART 115200 but UBoot does not respond to a keystroke 2.</p><p>Serial cable and connect is proper. I connected to router with Putty. Please help me.</p></blockquote></div><p>I got my hands on a second router and had exactly the same problem again although it was on 2.0.30.</p><p>So I did the following:</p><p>1. Connect UART and boot to check wether you&#039;re able to read. (115200 8N1)<br />2. Hold reset-key until the router boots into recovery-mode<br />3. re-flash the original image (v. 2.0.30) through the web-interface<br />4. when the unit reboots press 2 over and over again to interrupt boot</p><p>Maybe uboot gets locked down during first boot or maybe it&#039;s only open as long as the unit isn&#039;t configured. I dunno.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301726">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">habl</div>
					<div class="post-datetime">
						29 Nov 2015, 22:52					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>s1lvester wrote:</cite><blockquote><div class="quotebox"><cite>habl wrote:</cite><blockquote><p>Hi all. I connect to my Xiaomi mi nano R1CL with 2.0.30 for UART 115200 but UBoot does not respond to a keystroke 2.</p><p>Serial cable and connect is proper. I connected to router with Putty. Please help me.</p></blockquote></div><p>I got my hands on a second router and had exactly the same problem again although it was on 2.0.30.</p><p>Maybe uboot gets locked down during first boot or maybe it&#039;s only open as long as the unit isn&#039;t configured. I dunno.</p></blockquote></div><p>OK. I have thinking about. I did it. But it does not help me. Version of boot does not changed. I downloaded firmare from this <a href="http://bigota.miwifi.com/xiaoqiang/rom/r1cl/miwifi_r1cl_firmware_1236b_2.0.30.bin">http://bigota.miwifi.com/xiaoqiang/rom/ … 2.0.30.bin</a></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Jul 31 2015 - 19:31:38)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fa8000
RT2880_RSTSTAT_REG 0xc0030204
******************************
Software System Reset Occurred
******************************
flash manufacture id: ef, device id 40 18
find flash: W25Q128BV
============================================
Ralink UBoot Version: 4.3.0.0
--------------------------------------------
ASIC 7628_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Jul 31 2015  Time:19:31:38
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 575 MHZ ####
 estimate memory size =64 Mbytes
RESET MT7628 PHY!!!!!!
Please choose the operation:
   1: Load system code to SDRAM via TFTP.
   2: Load system code then write to Flash via TFTP.
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load system code via web.
   9: Load Boot Loader code then write to Flash via TFTP.


3: System Boot system code via Flash.
Try to boot OS1                   </code></pre></div><p>And in the wiki UBoot has version U-Boot 1.1.3 (Sep 25 2015 - 17:14:30)</p><div class="codebox"><pre><code>[04060C0B][04060D06]
DDR Calibration DQS reg = 00008A88


U-Boot 1.1.3 (Sep 25 2015 - 17:14:30)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fa8000
RT2880_RSTSTAT_REG 0xc0030000
***************************
Board power on Occurred
***************************
flash manufacture id: ef, device id 40 18
find flash: W25Q128BV.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301730">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						29 Nov 2015, 23:07					</div>
				</div>
				<div class="post-content content">
					<p>Mine is the same. Same version.</p><p>By the way: I used 3.3V from my USB to serial adaptor to power the chip, not mini-usb power. Also I had no luck with an PL2303 adaptor and used a different one</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301737">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">habl</div>
					<div class="post-datetime">
						29 Nov 2015, 23:33					</div>
				</div>
				<div class="post-content content">
					<p>I flashed developer firmware 2.1.26 and version of boot chanded. After I flashed 2.0.30 but new boot dont changed anymore.<br /></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Oct 15 2015 - 20:59:29)

Board: Ralink APSoC DRAM:  64 MB
relocate_code Pointer at: 83fa8000
RT2880_RSTSTAT_REG 0xc0030204</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301741">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">habl</div>
					<div class="post-datetime">
						29 Nov 2015, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>I wathed miwifi_r1cl_firmware_1236b_2.0.30.bin and it does not has uboot information. What about replase uboot information from <a href="http://downloads.openwrt.org.cn/PandoraBox/Xiaomi_R1CL/u-boot/">http://downloads.openwrt.org.cn/Pandora … CL/u-boot/</a> to miwifi_r1cl_all_59371_2.1.26.bin and flash it from the recovery?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301748">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">s1lvester</div>
					<div class="post-datetime">
						30 Nov 2015, 00:37					</div>
				</div>
				<div class="post-content content">
					<p>I think this wont work since the updater checks the hashes during updating.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302011">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">netomx</div>
					<div class="post-datetime">
						1 Dec 2015, 22:41					</div>
				</div>
				<div class="post-content content">
					<p>It checks hashes, so you may need to reprogram it using a SPI adapter. </p><p>Try to look for older versions, they may have the uboot you need.</p><p>EDIT 1: They may be here: <a href="http://www.miui.com/thread-1776173-1-1.html">http://www.miui.com/thread-1776173-1-1.html</a></p>											<p class="post-edited">(Last edited by <strong>netomx</strong> on 1 Dec 2015, 22:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302660">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">UbuntuInMacBook</div>
					<div class="post-datetime">
						6 Dec 2015, 23:48					</div>
				</div>
				<div class="post-content content">
					<p>I have a question about installing OpenWrt to Mi Wifi Nano without UART. I already sent the question but to wrong thread. Shall I move it here?</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=302659#p302659">https://forum.openwrt.org/viewtopic.php … 59#p302659</a></p>											<p class="post-edited">(Last edited by <strong>UbuntuInMacBook</strong> on 6 Dec 2015, 23:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p302941">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">UbuntuInMacBook</div>
					<div class="post-datetime">
						8 Dec 2015, 22:07					</div>
				</div>
				<div class="post-content content">
					<p>Please, is it possible that someone who has ssh access to Nano can do this to any firmware file and enable then ssh:<br />mkxqimage -x &lt;firmware_name.bin&gt;</p><p>Here is guide how to validate modified firmware (If you don&#039;t understand Chinese use chrome and translator):<br /><a href="http://www.iptvfans.cn/wiki/index.php/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8%E5%9B%BA%E4%BB%B6%E4%BF%AE%E6%94%B9">http://www.iptvfans.cn/wiki/index.php/% … E%E6%94%B9</a></p><p>In original firmware mkxqimage is in /bin/ folder. You can copy private.pem and public.pem from that web site.</p><p>I tried to do it in mini router with official OpenWrt release, and it can&#039;t find /proc/xiaoqiang/model file. I copied mkxqimage and crypt 1.0.0 library from nano filesystem to mini router without success. I don&#039;t have access to nano, so I can&#039;t do it there.</p>											<p class="post-edited">(Last edited by <strong>UbuntuInMacBook</strong> on 8 Dec 2015, 22:13)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 3</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=60888&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=60888&amp;p=3.html">3</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>