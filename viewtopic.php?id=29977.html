<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mpd with bluetooth headphones?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Feb 2015.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p135115">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						12 May 2011, 02:02					</div>
				</div>
				<div class="post-content content">
					<p>I have a running mpd, a bluetooth usb dongle and bluetooth headphones (sennheiser pxc310bt)<br/>I already have done this:<br/>#opkg install kmod-bluetooth<br/>#opkg install bluez-utils<br/>#/etc/init.d/dbus enable<br/>#/etc/init.d/bluez-utils enable<br/>#reboot</p><br/><p>#hciconfig<br/>hci0:&nbsp; &nbsp;Type: USB<br/>&nbsp; &nbsp; &nbsp; &nbsp; BD Address: 00:11:95:0E:24:7F ACL MTU: 192:8 SCO MTU: 64:8<br/>&nbsp; &nbsp; &nbsp; &nbsp; UP RUNNING PSCAN ISCAN <br/>&nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1595 acl:1 sco:0 events:42 errors:0<br/>&nbsp; &nbsp; &nbsp; &nbsp; TX bytes:433 acl:1 sco:0 commands:28 errors:0</p><p>#hcitool scan<br/>Scanning ...<br/>&nbsp; &nbsp; &nbsp; &nbsp; 00:1B:66:01:45:AC&nbsp; &nbsp; &nbsp; &nbsp;Sennheiser PXC310BT</p><p>#hcitool info 00:1B:66:01:45:AC<br/>Requesting information ...<br/>&nbsp; &nbsp; &nbsp; &nbsp; BD Address:&nbsp; 00:1B:66:01:45:AC<br/>&nbsp; &nbsp; &nbsp; &nbsp; Device Name: Sennheiser PXC310BT<br/>&nbsp; &nbsp; &nbsp; &nbsp; LMP Version: 2.1 (0x4) LMP Subversion: 0x14f3<br/>&nbsp; &nbsp; &nbsp; &nbsp; Manufacturer: Cambridge Silicon Radio (10)<br/>&nbsp; &nbsp; &nbsp; &nbsp; Features: 0xff 0xfe 0x0f 0xc6 0x9b 0xbf 0x59 0x83<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;3-slot packets&gt; &lt;5-slot packets&gt; &lt;encryption&gt; &lt;slot offset&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;timing accuracy&gt; &lt;role switch&gt; &lt;hold mode&gt; &lt;sniff mode&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;RSSI&gt; &lt;channel quality&gt; &lt;SCO link&gt; &lt;HV2 packets&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;HV3 packets&gt; &lt;u-law log&gt; &lt;A-law log&gt; &lt;CVSD&gt; &lt;paging scheme&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;power control&gt; &lt;transparent SCO&gt; &lt;EDR ACL 2 Mbps&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;EDR ACL 3 Mbps&gt; &lt;inquiry with RSSI&gt; &lt;extended SCO&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;EV4 packets&gt; &lt;EV5 packets&gt; &lt;AFH cap. slave&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;AFH class. slave&gt; &lt;3-slot EDR ACL&gt; &lt;5-slot EDR ACL&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;sniff subrating&gt; &lt;pause encryption&gt; &lt;AFH cap. master&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;AFH class. master&gt; &lt;EDR eSCO 2 Mbps&gt; &lt;3-slot EDR eSCO&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;extended inquiry&gt; &lt;simple pairing&gt; &lt;encapsulated PDU&gt; <br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;non-flush flag&gt; &lt;LSTO&gt; &lt;inquiry TX power&gt; &lt;extended features&gt; </p><p>but now? how can I pair my headphones and what are the settings for mpd? what else do I need? I have no idea right now...<br/>If someone can help me with a short step-by-step!<br/>thanks a lot<br/>jan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135325">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						15 May 2011, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>no one with an idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135525">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">grep</div>
					<div class="post-datetime">
						19 May 2011, 01:17					</div>
				</div>
				<div class="post-content content">
					<p>I can try to help if no one else steps up. BUT I&#039;ve done this only on Linux boxes and NOT openwrt, so I&#039;m flying more than half blind. Though perhaps I can ease at least *some* of the pain that I went through when trying to figure this stuff out by my lonesome.</p><p>The Bluez code (along with it&#039;s setup procedure) is in a state of constant churn, and it appears that the version installed by openwrt is very old (3.36 in the branch tree). So trying to match the setup method with older code not easy, and now that the Bluez wiki seems to have disappeared we&#039;re left with *no* documentation... thanks guys.</p><p>Anyway, you might try pairing your headset with Bluez using the method described in comment #3 here:</p><p>&nbsp; &nbsp; <a href="https://forum.openwrt.org/viewtopic.php?id=22343">https://forum.openwrt.org/viewtopic.php?id=22343</a></p><p>Where you create a file called &quot;pincodes&quot; in the /var/lib/bluetooth/XX:XX:XX:XX:XX:XX directory (where XX:XX:XX:XX:XX:XX is the address of your bluetooth hci0 controller dongle), and hopefully that directory (along with a bunch of other files) has already been created due to your previous attempts to pair the device. The &quot;pincodes&quot; file should contain the following line for each bluetooth device you want to pair:</p><p>&nbsp; YY:YY:YY:YY:YY:YY PIN</p><p>Where &quot;YY:YY:YY:YY:YY:YY&quot; is the address of your remote device (your headset) and &quot;PIN&quot; is the PIN code for that device. For example:</p><p>&nbsp; 00:1A:0E:9A:8B:72 0000</p><p>Next, I made my headset Trusted by creating a file called &quot;trusts&quot; in the same directory containing a line for each remote device in the following format:</p><p>&nbsp; YY:YY:YY:YY:YY:YY [all]</p><p>Where &quot;YY:YY:YY:YY:YY:YY&quot; is once again the address of the remote device, followed by a space, and then the text &quot;[all]&quot;. For example:</p><p>&nbsp; 00:1A:0E:9A:8B:72 [all]</p><p>You&#039;ll probably need to restart all the Bluez daemons at this point.</p><p>Those two things (the pincodes and trusts files) allow my headset to automatically connect when I fire it up. No further PIN codes required, nothing to enter on the command line, no nothing... it just connects after I put the headset into connect mode... ***BUT*** I&#039;m using a very recent version 4.xx of Bluez, obviously YMMV.</p><p>But, if you can get that to occur, then you next need to try getting the headset to work with ALSA (you didn&#039;t say, but I&#039;m assuming that you want to send the music through openwrt&#039;s ALSA code). This is also poorly documented, but at least there&#039;s a little.</p><p>Here, you&#039;ll need to create a &quot;virtual&quot; ALSA device via the ALSA configuration file. On my Linux boxes, this ALSA config file can either be /etc/asound.conf or ~/.asoundrc. I&#039;ll leave it to you to figure where it belongs in openwrt. Put the following in the ALSA configuration file:</p><p>&nbsp; &nbsp;pcm.NAME {<br/>&nbsp; &nbsp; &nbsp; type plug<br/>&nbsp; &nbsp; &nbsp; slave {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pcm {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type bluetooth<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device XX:XX:XX:XX:XX:XX<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; profile &quot;auto&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp; &nbsp; hint {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;show on<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;description &quot;My bluetooth headset&quot;<br/>&nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp;}</p><p>&nbsp; &nbsp;ctl.NAME {<br/>&nbsp; &nbsp; &nbsp; type bluetooth<br/>&nbsp; &nbsp;}</p><p>Change the &quot;NAME&quot; text above to something of your choosing as it will become the name of the &quot;virtual&quot; ALSA bluetooth device. Also change &quot;XX:XX:XX:XX:XX:XX&quot; above to the address of your headset. There is no such thing as an ALSA daemon, so no restart required <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink"/></p><p>If the stars are aligned, you should now be able to listen to music with your bluetooth headset. I test this by using the trusty aplay command:</p><p>&nbsp; &nbsp;aplay -D NAME something.wav</p><p>Where &quot;NAME&quot; is the name of the &quot;virtual&quot; bluetooth device I created in the ALSA configuration file. You can probably use any music player you like as long as it allows you to input the ALSA device name.</p><p>NOTE: I&#039;ve found that my &quot;virtual&quot; bluetooth ALSA device exists only *after* I&#039;ve connected my headset to the bluetooth hci0 controller dongle... so be aware of the order you fire things up. If I try to use one of these &quot;virtual&quot; devices *before* connecting, ALSA throws an error causing the music player to barf.</p><p>Lastly (hopefully), you&#039;ll need to configure MPD to use this new &quot;virtual&quot; ALSA device. Here, I&#039;m only guessing, but it appears that something like this in the MPD config file *may* work:</p><p>&nbsp; &nbsp;audio_output {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;alsa&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;NAME&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;plughw:NAME&quot;&nbsp; &nbsp; &nbsp;# optional<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; format&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;44100:16:2&quot;&nbsp; &nbsp; &nbsp; # optional<br/>&nbsp; &nbsp;}</p><p>Where once again you need to change the &quot;NAME&quot; text above to your &quot;virtual&quot; ALSA device name. Now restart the MPD daemon (probably only *after* connecting your bluetooth headset). I&#039;m not sure about that &quot;device&quot; line, so play around with it if MPD bitches... maybe it&#039;s not even needed.</p><p>One last thing... I compiled a SVN branch version of Openwrt just a few days ago. While I didn&#039;t compile the &quot;bluez-utils&quot; package, when I explored it&#039;s Makefile just now, I noticed that it&#039;s using a &quot;--disable-audio&quot; configuration option. I have no idea if this affects what you&#039;re trying to do, just thought I&#039;d pass it along.</p><p>Good luck (you&#039;ll need it).</p><p>PS: If you get this working, perhaps you&#039;ll add to OpenWRT&#039;s Wiki???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135534">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						19 May 2011, 10:03					</div>
				</div>
				<div class="post-content content">
					<p>thanks grep, I hope I will get working it with your description.<br/>I will try this in the next days.</p><p>one question:<br/>after I configure PIN and TRUSTS the headset should connect automatically, but how can I see that it IS CONNECTED? Are connected device listed somewhere?</p><p>Thanks again for your detaild step-by-step.<br/>j</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135625">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">grep</div>
					<div class="post-datetime">
						20 May 2011, 02:39					</div>
				</div>
				<div class="post-content content">
					<p>If you&#039;re going to have any chance of success in this quest, you&#039;ll need to create the mindset of a sweaty ninja warrior with sleeves rolled up <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink"/></p><p>When I&#039;m trudging down a computer path I&#039;ve not been down before (and without a map) I tend to try everything and look anywhere.</p><p>In this case, I&#039;d first start off with &quot;dmesg&quot; (my usual habit), and then I see from the &quot;hcitool&quot; man page, it has a &quot;con&quot; command (on my 4.xx version)... so I&#039;d try that too:</p><p>&nbsp; &nbsp;hcitool -i hci0 con</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135807">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dddesign</div>
					<div class="post-datetime">
						23 May 2011, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>I could connect to my headphones by<br/># hcitool cc 00:1B:66:01:45:AC<br/># hcitool con<br/>Connections:<br/>&nbsp; &nbsp; &nbsp; &nbsp; &lt; ACL 00:1B:66:01:45:AC handle 41 state 1 lm MASTER</p><p>so connect should be fine<br/>here is my .asoundrc config file (I have to usb soundcards connected):<br/>pcm.js-sound-1 {<br/>&nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; hw<br/>&nbsp; &nbsp; &nbsp; &nbsp; card&nbsp; &nbsp; 0<br/>&nbsp; &nbsp; &nbsp; &nbsp; device&nbsp; 0<br/>}<br/>pcm.js-sound-2 {<br/>&nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; hw<br/>&nbsp; &nbsp; &nbsp; &nbsp; card&nbsp; &nbsp; 1<br/>&nbsp; &nbsp; &nbsp; &nbsp; device&nbsp; 0<br/>}</p><p>pcm.sennheiser {<br/>&nbsp; &nbsp; &nbsp; &nbsp; type plug<br/>&nbsp; &nbsp; &nbsp; &nbsp; slave {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pcm {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type bluetooth<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device 00:1B:66:01:45:AC<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; profile &quot;auto&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp; &nbsp; &nbsp; hint {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; show on<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; description &quot;My bluetooth headset&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; }<br/>}</p><p>ctl.sennheiser {<br/>&nbsp; &nbsp; &nbsp; &nbsp; type bluetooth<br/>}</p><p>but I have some problems to play with aplay. this is working:<br/># aplay a_sound.wav -D plughw:0,0</p><p>but these are NOT:<br/># aplay a_sound.wav -D plughw:js-sound-1<br/>ALSA lib pcm_hw.c:1429:(_snd_pcm_hw_open) Invalid value for card<br/>aplay: main:590: audio open error: No such device</p><p># aplay a_sound.wav -D js-sound-1&nbsp; &nbsp; &nbsp; &nbsp;<br/>Playing WAVE &#039;a_sound.wav&#039; : Unsigned 8 bit, Rate 11025 Hz, Mono<br/>aplay: set_params:961: Sample format non available</p><p>and for my bluetooth headphones I get following error:<br/># aplay a_sound.wav -D sennheiser<br/>ALSA lib pcm.c:2162:(snd_pcm_open_conf) Cannot open shared library /usr/lib/alsa-lib/libasound_module_pcm_bluetooth.so<br/>aplay: main:590: audio open error: No such file or directory</p><p>I don&#039;t have a directory /usr/lib/alsa-lib but in /usr/lib I have two libasound.so.2 files. so libasound_module_pcm_bluetooth.so is missing?</p><p>my installed opkg are:<br/></p><div class="codebox"><pre><code>alsa-lib - 1.0.19-1 - 
alsa-utils - 1.0.19-1 - 
base-files-brcm-2.4 - 14.3-r18961 - 
bluez-libs - 3.36-1 - 
bluez-utils - 3.36-6 - 
bridge - 1.0.6-1 - 
busybox - 1.11.2-2.2 - 
dbus - 1.2.3-2 - 
dnsmasq - 2.47-3.3 - 
dropbear - 0.51-2 - 
firewall - 1-1.2 - 
iptables - 1.3.8-4.1 - 
iptables-mod-conntrack - 1.3.8-4.1 - 
iptables-mod-nat - 1.3.8-4.1 - 
kernel - 2.4.35.4-brcm-2.4-1 - 
kmod-alsa - 2.4.35.4+1.0.14rc1-brcm-2.4-1 - 
kmod-bluetooth - 2.4.35.4-brcm-2.4-1 - 
kmod-brcm-wl-mimo - 2.4.35.4+4.150.10.5.3-brcm-2.4-3.2 - 
kmod-diag - 2.4.35.4-brcm-2.4-4.2 - 
kmod-fs-nfs - 2.4.35.4-brcm-2.4-1 - 
kmod-fs-nfs-common - 2.4.35.4-brcm-2.4-1 - 
kmod-ipt-conntrack - 2.4.35.4-brcm-2.4-1 - 
kmod-ipt-core - 2.4.35.4-brcm-2.4-1 - 
kmod-ipt-nat - 2.4.35.4-brcm-2.4-1 - 
kmod-ipt-nathelper - 2.4.35.4-brcm-2.4-1 - 
kmod-ppp - 2.4.35.4-brcm-2.4-1 - 
kmod-pppoe - 2.4.35.4-brcm-2.4-1 - 
kmod-sound-core - 2.4.35.4-brcm-2.4-1 - 
kmod-switch - 2.4.35.4-brcm-2.4-1.1 - 
kmod-usb-core - 2.4.35.4-brcm-2.4-1 - 
kmod-usb-ohci - 2.4.35.4-brcm-2.4-1 - 
kmod-usb-uhci-iv - 2.4.35.4-brcm-2.4-1 - 
kmod-wlcompat - 2.4.35.4+4.150.10.5.3-brcm-2.4-3.2 - 
libexpat - 1.95.8-1 - 
libflac - 1.1.2-1 - 
libgcc - 3.4.6-14.3 - 
libiconv - 1.9.1-1 - 
libid3tag - 0.15.1b-1 - 
libintl - 0.16.1-4 - 
liblua - 5.1.4-2 - 
libmad - 0.15.1b-1 - 
libncurses - 5.6-1 - 
libpthread - 0.9.29-14.3 - 
libuci - 0.7.3-1 - 
libuci-lua - 0.7.3-1 - 
libusb - 0.1.12-2 - 
libvorbisidec - 1.0.2+svn14261-1 - 
lua - 5.1.4-2 - 
luci-admin-core - 0.8.8-1 - 
luci-admin-full - 0.8.8-1 - 
luci-admin-mini - 0.8.8-1 - 
luci-cbi - 0.8.8-1 - 
luci-core - 0.8.8-1 - 
luci-http - 0.8.8-1 - 
luci-i18n-english - 0.8.8-1 - 
luci-ipkg - 0.8.8-1 - 
luci-sgi-cgi - 0.8.8-1 - 
luci-sys - 0.8.8-1 - 
luci-theme-base - 0.8.8-1 - 
luci-theme-openwrt - 0.8.8-1 - 
luci-uci - 0.8.8-1 - 
luci-uvl - 0.8.8-1 - 
luci-web - 0.8.8-1 - 
mpc - 0.12.1-2 - 
mpd - 0.13.2-1 - 
mtd - 8.2 - 
nas - 4.150.10.5.3-3.2 - 
nvram - 1 - 
opkg - 4564-3.1 - 
ppp - 2.4.3-11.2 - 
ppp-mod-pppoe - 2.4.3-11.2 - 
uci - 0.7.3-1 - 
uclibc - 0.9.29-14.3 - 
usbutils - 0.73-1 - 
wireless-tools - 29-2 - 
wlc - 4.150.10.5.3-3.2 - 
zlib - 1.2.3-5 -</code></pre></div><p>so, what is wrong with my .asoundrc config file? and what do I need for libasound_module_pcm_bluetooth?<br/>thanks for further tips<br/>j</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p135878">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">grep</div>
					<div class="post-datetime">
						24 May 2011, 02:52					</div>
				</div>
				<div class="post-content content">
					<p>First, congratulations on wandering thru the foggy Bluez forest and making it to the other side.</p><p>&nbsp; &nbsp; &quot;# aplay a_sound.wav -D js-sound-1<br/>&nbsp; &nbsp; &nbsp;Playing WAVE &#039;a_sound.wav&#039; : Unsigned 8 bit, Rate 11025 Hz, Mono<br/>&nbsp; &nbsp; &nbsp;aplay: set_params:961: Sample format non available&quot;</p><p>This is just an ALSA thing.</p><p>While there&#039;s nothing wrong with your ALSA configuration, the two configuration segments where you define your two audio devices do nothing more than rename the hardware devices. In other words, there&#039;s no difference between specifying &quot;hw:0,0&quot; and &quot;js-sound-1&quot; on the music player&#039;s command line... and in both cases you&#039;re sending the audio data *directly* to the audio hardware... and in this case your hardware doesn&#039;t like the format (unsigned 8 bit, Rate 11025 Hz, Mono). Audio hardware can only play audio of certain formats, and obviously the supported format(s) will vary among different audio hardware brands/models.</p><p>When you added the &quot;plug&quot; (&quot;plughw:0,0&quot;) in front of the device name, it worked because you&#039;re now telling ALSA to resample and/or dither the audio data into something that the audio hardware can handle. To make it easy on yourself you can change the ALSA code (via the ALSA config file) to automatically do this for you. For example, changing:</p><p>&nbsp; &nbsp; pcm.js-sound-1 {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type&nbsp; &nbsp; hw<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; card&nbsp; &nbsp; 0<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; device&nbsp; 0<br/>&nbsp; &nbsp; }</p><p>to the following:</p><p>&nbsp; &nbsp; pcm.js-sound-1 {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type plug<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slave {<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pcm &quot;hw:0,0&quot;<br/>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/>&nbsp; &nbsp; }</p><p>should (hopefully) allow that &quot;aplay -D js-sound-1 a_sound.wav&quot; command to work with that particular audio file.</p><p>I don&#039;t know what possessed you to swap aplay&#039;s command line parameters, but you need to be careful. There&#039;s a ton of command line programs that won&#039;t let you get away with that.</p><p>&nbsp; &nbsp; &quot;and for my bluetooth headphones I get following error:<br/>&nbsp; &nbsp; &nbsp;# aplay a_sound.wav -D sennheiser<br/>&nbsp; &nbsp; &nbsp;ALSA lib pcm.c:2162:(snd_pcm_open_conf) Cannot open shared library /usr/lib/alsa-lib/libasound_module_pcm_bluetooth.so<br/>&nbsp; &nbsp; &nbsp;aplay: main:590: audio open error: No such file or directory&quot;</p><p>It seems that I provided the clue to this problem at the bottom of comment #3. I just dug deeper into the &quot;bluez-utils&quot; code itself (because I was curious), and it appears (to me) that when you configure it with &quot;--disable-audio&quot; it won&#039;t create the &quot;libasound_module_pcm_bluetooth.so&quot; library file. I have no clue why the openwrt developers did that, but it looks like you&#039;d need to try changing openwrt&#039;s &quot;bluez-utils&quot; configuration ,recompiling, and putting all the new files into the correct place.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>