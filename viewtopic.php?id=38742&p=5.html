<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-link DIR-505 support?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 2 Apr 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=38742&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=38742&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=38742&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=11.html">11</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p209776">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">nix-v</div>
					<div class="post-datetime">
						14 Aug 2013, 15:27					</div>
				</div>
				<div class="post-content content">
					<p>well, i have Attitude Adjustment 12.09 and i don&#039;t know why because i uploaded the barrier breaker firmware through DLINK Router Recovery Mode and still have the AA 12.09 even when success message appears.<br />Also i tried to upload the firmware through the luci interface but i get this error:<br />&quot;The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&quot;</p><p>i&#039;ts safe to do the following?</p><p>sysupgrade -v /tmp/openwrt-r37738-dir505-A1-factory.bin</p><p>thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209779">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						14 Aug 2013, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Found some errors in the file &quot;target/linux/ar71xx/image/Makefile&quot;, in the trunk source. <br />After editing 2 lines in this file, I was able to compile a factory image. <br />Here is the patch to fix it:</p><p><a href="http://pastie.org/8235862">http://pastie.org/8235862</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209787">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						14 Aug 2013, 16:03					</div>
				</div>
				<div class="post-content content">
					<p>Here you can find my photos of this model: <a href="http://galeria.tech-blog.pl/D-Link_DIR-505/">http://galeria.tech-blog.pl/D-Link_DIR-505/</a>.<br />I&#039;m going to add support for it in my U-Boot modification (edit, done: <a href="https://github.com/pepe2k/u-boot_mod/commit/d2bb828746ed22bec63bfb3f14699a65a69e0fee">https://github.com/pepe2k/u-boot_mod/co … 65a69e0fee</a>).</p>											<p class="post-edited">(Last edited by <strong>pepe2k</strong> on 17 Aug 2013, 22:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210066">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						18 Aug 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>I like this unit and would like to add it as another choice of platform for my meteobridge offering (<a href="http://www.meteobridge.com">www.meteobridge.com</a>). In order to provide an easy to install route for the weather guys target audience, flashing via D-Links web interface is a must. I did see that there is a firmware compiled that can be flashed by the web interface (and I did that sucessfully), but the tool chain provided to compile my own kernel/rootfs does just generate a sysupgrade and not a factory-bin file. <br />Could anyone give a hint how to make a factory-bin? From this thread I understand that the header needs some update regarding the hornet string, but to be honest I don&#039;t fully understand that. Any help is welcome.</p>											<p class="post-edited">(Last edited by <strong>docbee</strong> on 18 Aug 2013, 11:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210081">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">dape</div>
					<div class="post-datetime">
						18 Aug 2013, 15:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nix-v wrote:</cite><blockquote><p>well, i have Attitude Adjustment 12.09 and i don&#039;t know why because i uploaded the barrier breaker firmware through DLINK Router Recovery Mode and still have the AA 12.09 even when success message appears.<br />Also i tried to upload the firmware through the luci interface but i get this error:<br />&quot;The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.&quot;</p></blockquote></div><p>meanwhile i believe you managed to flash it on a Windows system, the dlink web recovery page has issues on some browsers (i couldnt flash on Linux with neither Firefox nor Chrome..) but on Win7 with Chrome seems okay.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210082">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">dape</div>
					<div class="post-datetime">
						18 Aug 2013, 15:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brsinal wrote:</cite><blockquote><p>Found some errors in the file &quot;target/linux/ar71xx/image/Makefile&quot;, in the trunk source. <br />After editing 2 lines in this file, I was able to compile a factory image. <br />Here is the patch to fix it:</p><p><a href="http://pastie.org/8235862">http://pastie.org/8235862</a></p></blockquote></div><p>cool, it&#039;s fixed in latest trunk anyway..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210083">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">dape</div>
					<div class="post-datetime">
						18 Aug 2013, 15:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><p> but the tool chain provided to compile my own kernel/rootfs does just generate a sysupgrade and not a factory-bin file. <br />Could anyone give a hint how to make a factory-bin? From this thread I understand that the header needs some update regarding the hornet string</p></blockquote></div><p>fixed in latest trunk !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210096">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						18 Aug 2013, 20:21					</div>
				</div>
				<div class="post-content content">
					<p>The error with my Huawei E-3276 modem appears to be power-related. The modem consumes too much power that it sometimes activates&nbsp; the USB over-current protection. I&#039;ll try to fix it with external power source.</p><p><a href="http://paulphilippov.com/articles/how-to-fix-device-not-accepting-address-error">http://paulphilippov.com/articles/how-t … ress-error</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210186">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						20 Aug 2013, 00:28					</div>
				</div>
				<div class="post-content content">
					<p>Worked like a charm!<br />I connected a hub with an external power source (max 2000mA) to my dir-505, and connected my modem to the hub. <br />That error message never appeared again, even with several reboots. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210247">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">doiga</div>
					<div class="post-datetime">
						20 Aug 2013, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the new updates!</p><p>Which is the flashing address for the factory image?<br />Can any developer update the installation instructions on the wiki?</p><p>Best regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210478">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						23 Aug 2013, 02:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dape wrote:</cite><blockquote><div class="quotebox"><cite>docbee wrote:</cite><blockquote><p> but the tool chain provided to compile my own kernel/rootfs does just generate a sysupgrade and not a factory-bin file. <br />Could anyone give a hint how to make a factory-bin? From this thread I understand that the header needs some update regarding the hornet string</p></blockquote></div><p>fixed in latest trunk !</p></blockquote></div><p>I just downloaded trunk (svn co svn://svn.openwrt.org/openwrt/trunk/), compiled through and in &quot;trunk/bin/ar71xx/&quot; I still only find &quot;openwrt-ar71xx-generic-dir-505-a1-squashfs-sysupgrade.bin&quot; but not the factory image.</p><p>What is going wrong? Am I missing a config setting?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210503">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">dape</div>
					<div class="post-datetime">
						23 Aug 2013, 09:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><div class="quotebox"><cite>dape wrote:</cite><blockquote><div class="quotebox"><cite>docbee wrote:</cite><blockquote><p> but the tool chain provided to compile my own kernel/rootfs does just generate a sysupgrade and not a factory-bin file. <br />Could anyone give a hint how to make a factory-bin? From this thread I understand that the header needs some update regarding the hornet string</p></blockquote></div><p>fixed in latest trunk !</p></blockquote></div><p>I just downloaded trunk (svn co svn://svn.openwrt.org/openwrt/trunk/), compiled through and in &quot;trunk/bin/ar71xx/&quot; I still only find &quot;openwrt-ar71xx-generic-dir-505-a1-squashfs-sysupgrade.bin&quot; but not the factory image.</p><p>What is going wrong? Am I missing a config setting?</p></blockquote></div><p>rm -fr tmp/ ; make clean</p><p>maybe?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210533">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						23 Aug 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><p>I just downloaded trunk (svn co svn://svn.openwrt.org/openwrt/trunk/), compiled through and in &quot;trunk/bin/ar71xx/&quot; I still only find &quot;openwrt-ar71xx-generic-dir-505-a1-squashfs-sysupgrade.bin&quot; but not the factory image.</p><p>What is going wrong? Am I missing a config setting?</p></blockquote></div><p>I checked <a href="https://github.com/mirrors/openwrt/blob/master/target/linux/ar71xx/image/Makefile">https://github.com/mirrors/openwrt/blob … e/Makefile</a></p><p>The file /target/linux/ar71xx/image/Makefile at the source is still incorrect. They fixed the image header, but the mtd layout has no information about the image max size.&nbsp; Try to edit this file. <br />Find the line:</p><div class="quotebox"><blockquote><p>define Image/Build/Cameo933x_8M<br />$(call Image/Build/CameoHornet,$(1),$(2),$(3),$(cameo933x_mtdlayout_8M),1048576,6422528,$(4))<br />endef</p></blockquote></div><p>and edit it:</p><div class="quotebox"><blockquote><p>define Image/Build/Cameo933x_8M<br />$(call Image/Build/CameoHornet,$(1),$(2),$(3),$(cameo933x_mtdlayout_8M),1048576,6422528,$(4),$(5),$(6),7864320)<br />endef</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210601">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						24 Aug 2013, 00:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brsinal wrote:</cite><blockquote><p>define Image/Build/Cameo933x_8M<br />$(call Image/Build/CameoHornet,$(1),$(2),$(3),$(cameo933x_mtdlayout_8M),1048576,6422528,$(4),$(5),$(6),7864320)<br />endef</p></blockquote></div><p>Thank you for the welcome hint! I did edit this but when i compile with &quot;make V=99&quot; I can see that code fragment below does not make the &quot;mkcameofw&quot; calls, because $(9) is an empty string and therefore for-loop does not run through.<br /></p><div class="codebox"><pre><code>define Image/Build/CameoHornet
        $(call MkuImageLzma,$(2),$(3) $(4))
        $(call Sysupgrade/KRuImage,$(1),$(2),$(5),$(6))
        if [ -e &quot;$(call sysupname,$(1),$(2))&quot; ]; then \
                for r in $(9); do \
                        [ -n &quot;$$$$r&quot; ] &amp;&amp; dashr=&quot;-$$$$r&quot; || dashr=; \
                        [ -z &quot;$$$$r&quot; ] &amp;&amp; r=&quot;DEF&quot;; \
                        mkcameofw -M HORNET -R &quot;$$$$r&quot; -S $(7) -V $(8) -c \
                                -K 0xe0000 -I $(10) \
                                -k &quot;$(call sysupname,$(1),$(2))&quot; \
                                -o $(call imgname,$(1),$(2))-factory$$$$dashr.bin; \
                done; \
        fi
endef</code></pre></div><p>Any idea how to get $(9) populated with something useful?</p>											<p class="post-edited">(Last edited by <strong>docbee</strong> on 24 Aug 2013, 00:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210603">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						24 Aug 2013, 01:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><div class="codebox"><pre><code>define Image/Build/CameoHornet
        $(call MkuImageLzma,$(2),$(3) $(4))
        $(call Sysupgrade/KRuImage,$(1),$(2),$(5),$(6))
        if [ -e &quot;$(call sysupname,$(1),$(2))&quot; ]; then \
                for r in $(9); do \
                        [ -n &quot;$$$$r&quot; ] &amp;&amp; dashr=&quot;-$$$$r&quot; || dashr=; \
                        [ -z &quot;$$$$r&quot; ] &amp;&amp; r=&quot;DEF&quot;; \
                        mkcameofw -M HORNET -R &quot;$$$$r&quot; -S $(7) -V $(8) -c \
                                -K 0xe0000 -I $(10) \
                                -k &quot;$(call sysupname,$(1),$(2))&quot; \
                                -o $(call imgname,$(1),$(2))-factory$$$$dashr.bin; \
                done; \
        fi
endef</code></pre></div><p>Any idea how to get $(9) populated with something useful?</p></blockquote></div><p>As far as I could sneak the code, the source of the program &quot;mkcameofk&quot; gave me the parameters:<br /></p><div class="codebox"><pre><code>&quot;  -k &lt;file&gt;       read kernel image from the file &lt;file&gt;\n&quot;
&quot;  -c              use the kernel image as a combined image\n&quot;
&quot;  -M &lt;model&gt;      set model to &lt;model&gt;\n&quot;
&quot;  -o &lt;file&gt;       write output to the file &lt;file&gt;\n&quot;
&quot;  -r &lt;file&gt;       read rootfs image from the file &lt;file&gt;\n&quot;
&quot;  -S &lt;signature&gt;  set image signature to &lt;signature&gt;\n&quot;
&quot;  -R &lt;region&gt;     set image region to &lt;region&gt;\n&quot;
&quot;  -V &lt;version&gt;    set image version to &lt;version&gt;\n&quot;
&quot;  -I &lt;size&gt;       set image size to &lt;size&gt;\n&quot;
&quot;  -K &lt;size&gt;       set kernel size to &lt;size&gt;\n&quot;
&quot;  -h              show this screen\n&quot;</code></pre></div><p>So, if -S is the signature (variable $(7)), and the signature is &quot;HORNET-PACKET-DIR505A1-3&quot;, you can search the file target/linux/ar71xx/image/Makefile for the line:<br /></p><div class="codebox"><pre><code>$(eval $(call SingleProfile,Cameo933x_8M,$(fs_squash),DIR505A1,dir-505-a1,DIR-505-A1,ttyATH0,115200,&quot;HORNET-PACKET-DIR505A1-3&quot;))</code></pre></div><p>This line is probably the input for these variables.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210632">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						24 Aug 2013, 13:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, I don&#039;t think &quot;-S&quot; is the issue but &quot;-R&quot;. When it compiles via V=99 it executes this line where the &quot;for r in&quot;-loop expecting to get a list of things to loop through is not feeded, because $(9) is empty.<br /></p><div class="codebox"><pre><code>if [ -e &quot;/home/boris/openwrt.na/trunk/bin/ar71xx/openwrt-ar71xx-generic-dir-505-a1-squashfs-sysupgrade.bin&quot; ]; then for r in ; do [ -n &quot;$r&quot; ] &amp;&amp; dashr=&quot;-$r&quot; || dashr=; [ -z &quot;$r&quot; ] &amp;&amp; r=&quot;DEF&quot;; mkcameofw -M HORNET -R &quot;$r&quot; -S &quot;HORNET-PACKET-DIR505A1-3&quot; -V  -c -K 0xe0000 -I 7864320 -k &quot;/home/boris/openwrt.na/trunk/bin/ar71xx/openwrt-ar71xx-generic-dir-505-a1-squashfs-sysupgrade.bin&quot; -o /home/boris/openwrt.na/trunk/bin/ar71xx/openwrt-ar71xx-generic-dir-505-a1-squashfs-factory$dashr.bin; done; fi</code></pre></div><p>Looking at these definitions in the Makefile<br /></p><div class="codebox"><pre><code>define Image/Build/Cameo933x_8M
        $(call Image/Build/CameoHornet,$(1),$(2),$(3),$(cameo933x_mtdlayout_8M),1048576,6422528,$(4),$(5),$(6),7864320)
endef

define Image/Build/CameoHornet
        $(call MkuImageLzma,$(2),$(3) $(4))
        $(call Sysupgrade/KRuImage,$(1),$(2),$(5),$(6))
        if [ -e &quot;$(call sysupname,$(1),$(2))&quot; ]; then \
                for r in $(9); do \
                        [ -n &quot;$$$$r&quot; ] &amp;&amp; dashr=&quot;-$$$$r&quot; || dashr=; \
                        [ -z &quot;$$$$r&quot; ] &amp;&amp; r=&quot;DEF&quot;; \
                        mkcameofw -M HORNET -R &quot;$$$$r&quot; -S $(7) -V $(8) -c \
                                -K 0xe0000 -I $(10) \
                                -k &quot;$(call sysupname,$(1),$(2))&quot; \
                                -o $(call imgname,$(1),$(2))-factory$$$$dashr.bin; \
                done; \
        fi
endef</code></pre></div><p>makes me think that the call to &quot;Image/Build/Cameo933x_8M&quot; is not done correctly as $(6) (which is then passed as $(9) to the sub) seems to be errornously empty.</p><p>Unfortunately, I can&#039;t find the code calling &quot;Image/Build/Cameo933x_8M&quot; in the source tree.</p><p>Any ideas on that? ...and sorry for being such a pain.</p>											<p class="post-edited">(Last edited by <strong>docbee</strong> on 24 Aug 2013, 13:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210644">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						24 Aug 2013, 18:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><p>makes me think that the call to &quot;Image/Build/Cameo933x_8M&quot; is not done correctly as $(6) (which is then passed as $(9) to the sub) seems to be errornously empty.</p></blockquote></div><p>They updated it and fixed the empty vars. Check this out:<br /><a href="https://dev.openwrt.org/changeset/37834/">https://dev.openwrt.org/changeset/37834/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210722">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">mraneri</div>
					<div class="post-datetime">
						25 Aug 2013, 02:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dape wrote:</cite><blockquote><p>Hey guys, maybe the following Barrier Breaker images work for you (they seem okay on my A1) :</p></blockquote></div><p>Thanks to everyone for getting this going...<br />I bought a USA DIR-505L and flashed with dape&#039;s image.&nbsp; (I needed to hex-edit the device name in the header of the .bin to match what was in the US D-Link firmware file.)&nbsp; It works great so far.</p><p>However, as you all know, the RJ-45 port is configured as a LAN port by default.&nbsp; I want to turn this into a router/hotspot I can take on the road with me.&nbsp; So I need to reconfigure this port to act as a WAN port.&nbsp; Additionally, I will install openVPN on it to create a VPN back to my home network for when I&#039;m on the road.&nbsp; I have a similar device that I use this on, and it works great, but the DIR-505L is SO much more tiny and easy to pack.&nbsp; Anyway, the OpenVPN project is for another day...</p><p>For NOW, I&#039;m trying to figure out how to reconfigure the port (eth1?) to act as as WAN port and create a NAT&#039;ted network with the Wifi.<br />Of course, I will setup DHCP as well to serve the wireless clients.</p><p>Can someone point me to clear instructions on how to do this, either via the Luci interface (preferred) or via SSH (also ok)?</p><p>Any help is much appreciated.&nbsp; By the way, I&#039;m a TOTAL OpenWRT noob, though I&#039;ve done quite a bit of hacking on my other (tomato based) Linux router. (An Asus RT-N16)</p>											<p class="post-edited">(Last edited by <strong>mraneri</strong> on 25 Aug 2013, 02:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210732">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">dape</div>
					<div class="post-datetime">
						25 Aug 2013, 04:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mraneri wrote:</cite><blockquote><div class="quotebox"><cite>dape wrote:</cite><blockquote><p>Hey guys, maybe the following Barrier Breaker images work for you (they seem okay on my A1) :</p></blockquote></div><p>Thanks to everyone for getting this going...<br />I bought a USA DIR-505L and flashed with dape&#039;s image.</p></blockquote></div><p>hehe, thanks, new firmware version out by the way.. <br /></p><div class="quotebox"><blockquote><p>For NOW, I&#039;m trying to figure out how to reconfigure the port (eth1?) to act as as WAN port and create a NAT&#039;ted network with the Wifi.<br />Of course, I will setup DHCP as well to serve the wireless clients.</p><p>Can someone point me to clear instructions on how to do this, either via the Luci interface (preferred) or via SSH (also ok)?</p></blockquote></div><p>Here&#039;s what i use for PPPoE on the ethernet port with LAN on the wifi (/etc/config/network) :</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ula_prefix &#039;fd17:c6d4:848c::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip6assign &#039;64&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;pppoe&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option username &#039;USERNAME&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option password &#039;PASSWORD&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipv6 &#039;1&#039;</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;dhcpv6&#039;</p>											<p class="post-edited">(Last edited by <strong>dape</strong> on 25 Aug 2013, 04:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210733">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">mraneri</div>
					<div class="post-datetime">
						25 Aug 2013, 04:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dape wrote:</cite><blockquote><p>hehe, thanks, new firmware version out by the way..</p></blockquote></div><p>I&#039;ll try the network config first, in case I lose communication like I did the last few times I tried to get it going!!<br />Then I can reflash with the new version.</p><p>Thanks...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210735">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">mraneri</div>
					<div class="post-datetime">
						25 Aug 2013, 05:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dape wrote:</cite><blockquote><p>Here&#039;s what i use for PPPoE on the ethernet port with LAN on the wifi (/etc/config/network) :</p></blockquote></div><p>I needed to change:<br />config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth1&#039;</p><p>eth0 didn&#039;t work.<br />Seems the double natting is working now.<br />I&#039;ll check it a little more thoroughly and then start on the openVPN piece...</p><p>Thanks for the pointer.</p><p>- Mike</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210745">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						25 Aug 2013, 11:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>brsinal wrote:</cite><blockquote><div class="quotebox"><cite>docbee wrote:</cite><blockquote><p>makes me think that the call to &quot;Image/Build/Cameo933x_8M&quot; is not done correctly as $(6) (which is then passed as $(9) to the sub) seems to be errornously empty.</p></blockquote></div><p>They updated it and fixed the empty vars. Check this out:<br /><a href="https://dev.openwrt.org/changeset/37834/">https://dev.openwrt.org/changeset/37834/</a></p></blockquote></div><p>Great news! I did a try yesterday. This time problems with a not reachable openwrt server (needed as it downloads material during make cycle on a fresh sources download) did not occur as last time. But this time compile stops at a new position to keep me busy<br /></p><div class="codebox"><pre><code>[100%] Generating ../Docs/cmake.txt
make[6]: Leaving directory `/home/boris/openwrt.na/trunk/build_dir/host/cmake-2.8.11.2&#039;
[100%] Built target documentation
make[5]: Leaving directory `/home/boris/openwrt.na/trunk/build_dir/host/cmake-2.8.11.2&#039;
make[4]: Leaving directory `/home/boris/openwrt.na/trunk/build_dir/host/cmake-2.8.11.2&#039;
touch /home/boris/openwrt.na/trunk/build_dir/host/cmake-2.8.11.2/.built
make[3]: Leaving directory `/home/boris/openwrt.na/trunk/tools/cmake&#039;
make[2]: Leaving directory `/home/boris/openwrt.na/trunk&#039;
make[1]: *** [/home/boris/openwrt.na/trunk/staging_dir/target-mips_r2_uClibc-0.9.33.2/stamp/.tools_install_nnnnn] Error 2
make[1]: Leaving directory `/home/boris/openwrt.na/trunk&#039;
make: *** [world] Error 2</code></pre></div><p>sorry for bothering here again with this &quot;low level&quot; problems, but trunk seem sto be a bit shaky at the moment... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><br /><p><span style="color: #FF0000">SOLVED!</span><br />It was again a download issue (but a bit more hard to find). I downloaded file &quot;<a href="http://tioan.org/openwrt/trunk/dl/mklibs_0.1.35.tar.gz">http://tioan.org/openwrt/trunk/dl/mklibs_0.1.35.tar.gz</a>&quot; manually into &quot;trunk/dl&quot; folder, restarted compilation and it went through fine this time.</p>											<p class="post-edited">(Last edited by <strong>docbee</strong> on 25 Aug 2013, 12:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210788">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">doiga</div>
					<div class="post-datetime">
						25 Aug 2013, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys I need your help, want to install a new factory image but so far without success.<br />The image boot address from &#039;printenv bootcmd&#039; is 9f080000 plus the 780054 image size it gives error:<br />&quot;Error: end address (0x9f800053) not in flash!<br />Bad address format&quot;</p><p>What am I doing wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210802">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">docbee</div>
					<div class="post-datetime">
						26 Aug 2013, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>Finally, after a downloading three files (that Makefile cannot find) with script below, I was able to get a &quot;factory.bin&quot;.</p><div class="codebox"><pre><code>#!/bin/sh
#
unset TAR_OPTIONS
export TAR_OPTIONS
mkdir -p trunk/dl
cd trunk/dl
wget -O carl9170-1.fw-1.9.6 http://tioan.org/openwrt/trunk/dl/carl9170-1.fw-1.9.6
wget -O mklibs_0.1.35.tar.gz http://tioan.org/openwrt/trunk/dl/mklibs_0.1.35.tar.gz
wget -O compat-wireless-2013-06-27.1.tar.bz2 http://enduser.subsignal.org/~trondah/tree/dl/compat-wireless-2013-06-27.1.tar.bz2</code></pre></div><p>I started my DIR-505 that I have patched with one of the precompiled images from this thread and I tried to load the newly generated image for flashing. But to my surprise the format is not accepted (see error message below)? </p><p><span class="postimg"><img src="http://www.meteohub.de/files/openwrt-flasherror.png" alt="http://www.meteohub.de/files/openwrt-flasherror.png" /></span></p><p>Any idea how to circumvent this? Can&#039;t I flash an image generated from trunk onto an AA 12.09 installation? Neither factory nor sysupgrade files did work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210808">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">brsinal</div>
					<div class="post-datetime">
						26 Aug 2013, 01:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>docbee wrote:</cite><blockquote><p>I started my DIR-505 that I have patched with one of the precompiled images from this thread and I tried to load the newly generated image for flashing. But to my surprise the format is not accepted (see error message below)? </p><p>Any idea how to circumvent this? Can&#039;t I flash an image generated from trunk onto an AA 12.09 installation? Neither factory nor sysupgrade files did work.</p></blockquote></div><p>I noticed that too, the d-link web upgrade accepts the image, but the sysupgrade don&#039;t. It looks like a bug on sysupgrade. You can either use the option -F (force) at command-line via SSH, or use the emergency recovery of the dir-505 instead.</p><p>To use emergency recovery of dir-505:<br />-Hold reset button with the router turned-off, then turn on, and the led will keep blinking red. <br />-On your computer, put manually the ip 192.168.0.2 at the ethernet device, then connect it with the ethernet port of the router.<br />-Open the web browser and go to the address 192.168.0.1. You&#039;ll see the emergency recovery interface of the router.</p>											<p class="post-edited">(Last edited by <strong>brsinal</strong> on 26 Aug 2013, 01:02)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 11</div><nav><ul><li><a href="viewtopic.php%3Fid=38742&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=38742&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=38742&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=38742&amp;p=11.html">11</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>