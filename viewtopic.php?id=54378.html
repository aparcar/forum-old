<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Vonets Var11n Plus uboot</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 1 Apr 2018 and 24 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=54378&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=54378&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54378&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p256425">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						3 Dec 2014, 16:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello. Let me first say hello to everyone here, as I am a newcomer. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> </p><p>I don&#039;t really know it this is the right section, so please mods, move it if it is misplaced. Thanks!</p><p>Well, I have bought a nice very cheap wifi router from Vonets. <br /><a href="http://www.vonets.com/ProductViews.asp?D_ID=71">http://www.vonets.com/ProductViews.asp?D_ID=71</a></p><p>The device is firmware locked to only wifi router mode, so I would like to upgrade with OpenWRT. The device is based on MT7620N SoC and has an additional 256 Mbit RAM module. Exposed pins on the board are for TX and RX, just like in the Buffalo AirPlay. The problem is that it seems uBoot is set to automatic boot, therefore no availability to interrupt the sequence with any key. The board also has a GPIO button installed, but that also does not make any difference when trying to enter the bootloader menu. </p><p>Now my question. I understand that it is impossible to reset the autoboot flag, once the firmware is flashed. The complete bootloader needs to be reflashed with autoboot disabled. I need ideas on how to do that.</p><p>Device offers webpage upgrade, where the script on the router pulls a file from FTP somewhere in China. I was thinking to overcome the uBoot limitation with some route voodoo on the main router. The idea is to sniff out the requested file, reroute the destination IP to something local with an FTP server and serve the updated OpenWRT firmware instead. The device board looks almost identical to the Buffalo&#039;s AirPlay, so I assume there shouldn&#039;t be any limitations. </p><p>Any ideas are welcome guys as this is a really tiny WRTNode like hardware. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Best,<br />Andrej</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256427">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						3 Dec 2014, 16:41					</div>
				</div>
				<div class="post-content content">
					<p>The picture of the hardware...you see those two circular pins on the right of the chip? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> That is TX and RX.</p><p><a href="http://g01.s.alicdn.com/kf/HTB1zDJKFVXXXXcmXFXXq6xXFXXXD/200925331/HTB1zDJKFVXXXXcmXFXXq6xXFXXXD.jpg">http://g01.s.alicdn.com/kf/HTB1zDJKFVXX … XFXXXD.jpg</a></p>											<p class="post-edited">(Last edited by <strong>deeexit</strong> on 3 Dec 2014, 16:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256945">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						8 Dec 2014, 11:47					</div>
				</div>
				<div class="post-content content">
					<p>Ok, since noone seems to be interested in these very cheap routers... I will continue by myself then. </p><p>I&#039;ve sniffed the FTP process and got the request the router makes. It downloades a txt file, contaning some encrypted lines for the model and firmware. Lines look like base64 encoded, but are not decodable easily. It seems that either some strange character encoding was used. Right now, I am comparing a few different versions of this txt file to see if I can find some similarities between lines. If I am successful, I will try to inject a &quot;rouge&quot; fw for the box to update.</p><p>I have also executed bitwalk on the firmware, where the contents are decoded, but some false possitives are present too. It says that the first 64 bytes of the firmware are uBoot parameters, followed by LZMA compressed image. The image looks encrypted, but bitwalk cannot recognize the encryption, neither is possible to decompress and mount the image. </p><p>If anyone had any similar experiences, please share!</p><p>***EDIT: file was not encrypted, I&#039;ve missed the LZMA header when slicing. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>deeexit</strong> on 8 Dec 2014, 14:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p256952">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						8 Dec 2014, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I got further. After dd-ing the initial firmware file to isolate uBoot and LZMA compressed data, I then successfuly extracted the files with lzma -d image.xz</p><p>The decompress produces another file, which is another image containint the Linux kernel and complete file dump. I will be investigating this further and extract the filesystem to get to the &quot;version&quot; encryption/decryption software. </p><p>Update soon. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258213">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mr2000jp</div>
					<div class="post-datetime">
						20 Dec 2014, 07:36					</div>
				</div>
				<div class="post-content content">
					<p>i bought this router by mistake , i wanted a bridge , and i found out quite late , the stupid company that makes it doesnt allow you to change the mode for this router , so you are stuck with only router mode , by the way , all their earlier released hardware is switchable via software , but this is their only model that doesnt , i dont understand why is that , <br />to be honest its a nice piece of hardware and the specs is good compared to the price&nbsp; , but i cant make use of it while its like that , i need it as a portable bridge , i can connect it to my tv receiver or the xbox360 , <br />i hope i can help to make things go a little faster , i have good knowledge with hardware but im not that good in programming , but i learn fast , if you can tell me where to start i might help , i do love to see openwrt installed on this router , i have it on my main router and i love it , <br />by the way , i noticed that the same company makes a model &quot;VAH300&quot; that is compatible with openwrt and they do distribute some kind of SDK for it , this router have the very same specs of the VAR11n plus , <br />i dont know , but i think would help&nbsp; <br /><a href="http://www.vonets.com/ProductViews.asp?D_ID=73">http://www.vonets.com/ProductViews.asp?D_ID=73</a><br />this is it , and if you find the links dead those for downloading the SDK and documents , just switch the language to chinese and you will find the links working in the chinese page<br /><a href="http://www.vonets.com/download/OpenWrt/vmware_7.1.3.rar">http://www.vonets.com/download/OpenWrt/vmware_7.1.3.rar</a><br /><a href="http://www.vonets.com/download/OpenWrt/vonets_openwrt_7620_SDK_2.6.36.1.rar">http://www.vonets.com/download/OpenWrt/ … 6.36.1.rar</a><br /><a href="http://www.vonets.com//download/OpenWrt/Openwrt%20for%20vonets_MT7620%20Build%20compilation%20environment.pdf">http://www.vonets.com//download/OpenWrt … onment.pdf</a><br /><a href="http://www.vonets.com//download/OpenWrt/MTK-OpenWrt-2.6.36.1-SDK-Release%20Notes.pdf">http://www.vonets.com//download/OpenWrt … 0Notes.pdf</a></p>											<p class="post-edited">(Last edited by <strong>mr2000jp</strong> on 20 Dec 2014, 07:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259042">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						29 Dec 2014, 13:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi. Nice to see there are others out there lol. I also bought this router by mistake as it was advertised to be able to change modes. </p><p>Anyway, I have made it this far to modify the firmware(telnetd was commented out in rcS) and to try to upload it to the router for update. When sniffing the traffic, the device requests the MINI300 version, which should be ok. Either they changed that or it is a mistake. I will report back if I have any success. </p><p>I found some guys on the Russian blog, who might also help.</p><p><a href="http://mysku.ru/blog/china-stores/26718.html,">http://mysku.ru/blog/china-stores/26718.html,</a> under comments.</p><p>The difference between var11nplus and vah300 is the ram. Var11n+ only has 32M, while the vah300 has 64M. SDK is nice to have, but I am not there yet. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259090">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						29 Dec 2014, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I have the same problem as you. Deeexit could you upload the file that router downloads. And what is its link (uri) please? Any news about your work? Could you mark what pin on board is tx and what is rx? Thanks a lot</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259091">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						29 Dec 2014, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Кстати, может, здесь кто по-русски общается?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259157">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						30 Dec 2014, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi Var, and no ... I can&#039;t speak Russian. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>RX is the closest to the ethernet socket, next one is TX. You have to take your ground from somewhere else. I took it from the antenna solder joint so it has a bit more strength. </p><p>Now the firmware part. As said earlier, I have successfully modified the firmware file so the telnetd is not commented out. It seems that busybox binary does include telnetd, so there shouldn&#039;t be any problem. I am still to flash the device with this new file. </p><p>URI for firmware upgrade is: ftp: // qinfang : 123456 @ 211.154.131.164<br />Device pulls the file versionNew.txt, which is somewhat encrypted, but if you wait long enough, they should release an update. The last one was 27.12.2014. </p><p>The solution with rerouting all ftp traffic to upper IP, to a local IP, works great. Device connects to a mirror site where it downloads its version file. After that it requests an update file. You can replace this file with any firmware, you only need to rename it on your local ftp server. The procedure works, but I am yet to gain some confidence that it will flash and not brick the router. I will try it in a few days, so hold on. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259214">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						30 Dec 2014, 18:47					</div>
				</div>
				<div class="post-content content">
					<p>Thanks deeexit. I read <a href="http://mysku.ru/blog/china-stores/26718.html.">http://mysku.ru/blog/china-stores/26718.html.</a> There i found the firmware url. Wait your results <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><span class="postimg"><img src="http://s28.postimg.org/jk9og0xn1/IMG_2156.png" alt="http://s28.postimg.org/jk9og0xn1/IMG_2156.png" /></span></p>											<p class="post-edited">(Last edited by <strong>Var</strong> on 30 Dec 2014, 19:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259563">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">strtfr</div>
					<div class="post-datetime">
						2 Jan 2015, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi there. I have also bought the MINI300 from Vonets. I have successfully connected the rx pin to the right of the MT7620 on 57600bps @ 8N1 and have received the boot log. As already mentioned UBoot does not provide any interruption keys so the bootproces cannot be forced to fall back to command line.</p><p>I noticed a second pair of bias exposed left from the MT7620 chip at the height of the 1416-BMSL designation. The datasheet shows that there are JTAG ports available somewhere around that position. Since I am not familiar at all with OpenWRT I do not know if there is a possibility to use this port in our advantage. Maybe it is possible to download the flash contents?</p><p>So the Environment Variables of UBoot are protected and set to autoboot = true. I know it is possible to download the software through a programmer by removing the flash chip. But is it also possible to just change the autoboot setting with the programmer? I read somewhere that this UBoot partition is protected by a checksum calculation. Does OpenWRT auto compile a suitable UBoot for this chip? So we can just copy/paste the wifi calibration data? I am sorry, I am not really familiar with OpenWRT yet.</p><p>High resolution images</p><p>Top:<br /><span class="postimg"><img src="http://i.imgur.com/oUGoiiW.jpg" alt="http://i.imgur.com/oUGoiiW.jpg" /></span></p><br /><p>Bottom:<br /><span class="postimg"><img src="http://i.imgur.com/aCu0LG7.jpg" alt="http://i.imgur.com/aCu0LG7.jpg" /></span></p><p>Boot Log:<br /></p><div class="codebox"><pre><code>U-Boot 1.1.3 (May 26 2014 - 14:52:34)

Board: Ralink APSoC DRAM:  32 MB
relocate_code Pointer at: 81fb8000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.
******************************
Software System Reset Occurred
******************************
spi_wait_nsec: 42
spi device id: 7f 9d 46 7f 9d (9d467f9d)
Warning: un-recognized chip ID, please update bootloader!
raspi_read: from:30000 len:1000
*** Warning - bad CRC, using default environment

============================================
Ralink UBoot Version: 4.2.S.1
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;None)
DRAM component: 256 Mbits SDR
DRAM bus: 16 bit
Total memory: 32 MBytes
Flash component: SPI Flash
Date:May 26 2014  Time:14:52:34
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 600 MHZ ####
 estimate memory size =32 Mbytes

Please choose the operation:
   1: Load system code to SDRAM via TFTP.
   2: Load system code then write to Flash via TFTP.
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load Boot Loader code then write to Flash via Serial.
   9: Load Boot Loader code then write to Flash via TFTP.


3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40
   Image Name:   Linux Kernel Image
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    3166448 Bytes =  3 MB
   Load Address: 80000000
   Entry Point:  8000c2f0
raspi_read: from:50040 len:3050f0
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 8000c2f0) ...
## Giving linux memsize in MB, 32

Starting kernel ...


LINUX started...

 THIS IS ASIC
Linux version 2.6.36 (root@localhost.localdomain) (gcc version 3.4.2) #8 Thu Sep 4 21:49:43 CST 2014

 The CPU feqenuce set to 600 MHz

 MIPS CPU sleep mode enabled.
 PCIE: bypass PCIe DLL.
 PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4
 disable all power about PCIe
 PCIE: PLL power down for MT7620N
CPU revision is: 00019650 (MIPS 24Kc)
Software DMA cache coherency
Determined physical RAM map:
 memory: 02000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00002000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00002000
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
Kernel command line: console=ttyS1,57600n8 root=/dev/ram0 console=ttyS0
PID hash table entries: 128 (order: -3, 512 bytes)
Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Primary instruction cache 64kB, VIPT, , 4-waylinesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=000596dc
Readback ErrCtl register=000596dc
Memory: 18892k/32768k available (3699k kernel code, 13876k reserved, 677k data, 8928k init, 0k highmem)
NR_IRQS:128
console [ttyS1] enabled
Calibrating delay loop... 399.36 BogoMIPS (lpj=798720)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
Switching to clocksource Ralink Systick timer
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 1024 (order: 1, 8192 bytes)
TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
TCP: Hash tables configured (established 1024 bind 1024)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
RT3xxx EHCI/OHCI init.
fuse init (API version 7.15)
msgmni has been set to 36
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
io scheduler noop registered (default)
HDLC line discipline maxframe=4096
N_HDLC line discipline registered.</code></pre></div>											<p class="post-edited">(Last edited by <strong>strtfr</strong> on 6 Jan 2015, 12:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259703">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						3 Jan 2015, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>My device var11n+ has the same board as mini300. There are different versions only 2v0 and 4v0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260250">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						6 Jan 2015, 11:30					</div>
				</div>
				<div class="post-content content">
					<p>is there any other difference than pcb antennas? Is the flash chip the same?</p><p>I will order some new 8M flash chips and try to put my own firmware. <br />I was successful with flashing MINI300 version to the router, but it seems that there is a nvram variable designating the VAR11NPlus model, so no change is visible. My next try is to flash a telnet enabled firmware. They also change the console output to ttyS1 instead of ttyS0. If it works, I will have root access to the device over console. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260255">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						6 Jan 2015, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>I see that flash memory is the same on both boards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260256">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">strtfr</div>
					<div class="post-datetime">
						6 Jan 2015, 12:41					</div>
				</div>
				<div class="post-content content">
					<p>Vonets Mini300<br />FLASH: <a href="http://pdf.datasheetarchive.com/indexerfiles/Datasheets-IS19/DSA00366866.pdf">PM25LQ032</a> (4MB)<br />DRAM: <a href="http://www.winbond.com.tw/NR/rdonlyres/04CCE85E-22A7-4B37-A0A8-5AB32D54E184/0/W9825G6EH.pdf">W9825G6EH-6</a> (32MB)</p><p>I have also appended the MINI300 bootlog in my comment above. It seems that flash is the same model. I have ordered a SPI programmer to program the flash. The VHA300 SDK apparently contains an unlocked uboot and seems to be the same platform as the mini300.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260257">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						6 Jan 2015, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Did anyone find the openwrt version for vonets with 32mb memory? Deeexit did you try to upload vonets openwrt from their site &lt;link&gt;http://www.vonets.com/ProductViews.asp?D_ID=73#&lt;/link&gt; into the router? How did you upload the firmware? Please write the instruction</p>											<p class="post-edited">(Last edited by <strong>Var</strong> on 6 Jan 2015, 12:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260258">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						6 Jan 2015, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>Vonets made all their products on the same board.<br />Did you find vonets var11n+ flash version. I thought it has 8mb flash chip and 32mb memory</p>											<p class="post-edited">(Last edited by <strong>Var</strong> on 6 Jan 2015, 12:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260278">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						6 Jan 2015, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>i have uploaded the mini300 version with the above mentioned procedure. You need to make an iptables rule for rerouting to internal ip.</p><p>iptables -t nat -A PREROUTING -p tcp -d 211.154.131.164 -j DNAT --to-destionation &lt;localIP&gt;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260279">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						6 Jan 2015, 15:25					</div>
				</div>
				<div class="post-content content">
					<p>These are the lines in versionNew.txt, that seem to indicate var11nplus.</p><p>1/:92aH]LmmPN2)+c6&#039;aHYLjpnc+8alpnplmplfpmkc1=;anndmgdmkdmhdnndnnqXXdXXdXXdXXdXXdXXc:/&#039;02/=:a&#039;&#039;&#039;p(/09*+p;/1p;0oH]LmmPN2)+?lpnplmplfpmk<br />1/:92aH]LmmPN2)+c6&#039;aHYLkpnc+8alpnplmplfpmkc1=;anndmgdmkdmhdnndnnqXXdXXdXXdXXdXXdXXc:/&#039;02/=:a&#039;&#039;&#039;p(/09*+p;/1p;0oH]LmmPN2)+?lpnplmplfpmk<br />1/:92aH]LmmPN2)+c6&#039;aHYLlpnc+8alpnplmplfpmkc1=;anndmgdmkdmhdnndnnqXXdXXdXXdXXdXXdXXc:/&#039;02/=:a&#039;&#039;&#039;p(/09*+p;/1p;0oH]LmmPN2)+?lpnplmplfpmk<br />1/:92aH]LmmPN2)+c6&#039;aHYLmpnc+8alpnplmplfpmkc1=;anndmgdmkdmhdnndnnqXXdXXdXXdXXdXXdXXc:/&#039;02/=:a&#039;&#039;&#039;p(/09*+p;/1p;0oH]LmmPN2)+?lpnplmplfpmk</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260281">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						6 Jan 2015, 16:05					</div>
				</div>
				<div class="post-content content">
					<p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260421">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						7 Jan 2015, 16:21					</div>
				</div>
				<div class="post-content content">
					<p>Ok, got it. I can now persuade the router to download a new file. </p><p>This is an old line for V2.0 board:<br />1/:92aH]LmmPN2)+c6&#039;aHYLlpnc+8alpnplmplfpmkc1=;anndmgdmkdmhdnndnnqXXdXXdXXdXXdXXdXXc:/&#039;02/=:a&#039;&#039;&#039;p(/09*+p;/1p;0oH]LmmPN2)+?lpnplmplfpmk</p><p>If we change some letters, we can persuade it that a new version is available.</p><p>so, we change 8alpnplmplfpmkc1 to 8akpnpkmpkfpmmc1 (l &gt; k) and (k &gt; m),&nbsp; lpnplmplfpmk to kpnpkmpkfpmm (l &gt; k) and (k &gt; m). This should translate to 3.0.31.38. and router should request the update file from the ftp. </p><p>I will try the upgrade later today.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260455">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						7 Jan 2015, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>Success!! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I now have root access over console and telnet enabled. Telnet uses the same user/pass as the webconfig. Below is the full bootlog. Console is changed to ttyS0 so we stay connected.</p><br /><br /><div class="quotebox"><blockquote><p>U-Boot 1.1.3 (May 26 2014 - 14:52:34)</p><br /><p>Board: Ralink APSoC DRAM:&nbsp; 32 MB</p><p>relocate_code Pointer at: 81fb8000</p><p>enable ephy clock...done. rf reg 29 = 5</p><p>SSC disabled.</p><p>******************************</p><p>Software System Reset Occurred</p><p>******************************</p><p>spi_wait_nsec: 42 </p><p>spi device id: 7f 9d 46 7f 9d (9d467f9d)</p><p>Warning: un-recognized chip ID, please update bootloader!</p><p>raspi_read: from:30000 len:1000 </p><p>*** Warning - bad CRC, using default environment</p><br /><p>============================================ </p><p>Ralink UBoot Version: 4.2.S.1</p><p>-------------------------------------------- </p><p>ASIC 7620_MP (Port5&lt;-&gt;None)</p><p>DRAM component: 256 Mbits SDR</p><p>DRAM bus: 16 bit</p><p>Total memory: 32 MBytes</p><p>Flash component: SPI Flash</p><p>Date:May 26 2014&nbsp; Time:14:52:34</p><p>============================================ </p><p>icache: sets:512, ways:4, linesz:32 ,total:65536</p><p>dcache: sets:256, ways:4, linesz:32 ,total:32768 </p><br /><p> ##### The CPU freq = 600 MHZ #### </p><p> estimate memory size =32 Mbytes</p><br /><p>Please choose the operation: </p><p>&nbsp; &nbsp;1: Load system code to SDRAM via TFTP. </p><p>&nbsp; &nbsp;2: Load system code then write to Flash via TFTP. </p><p>&nbsp; &nbsp;3: Boot system code via Flash (default).</p><p>&nbsp; &nbsp;4: Entr boot command line interface.</p><p>&nbsp; &nbsp;7: Load Boot Loader code then write to Flash via Serial. </p><p>&nbsp; &nbsp;9: Load Boot Loader code then write to Flash via TFTP. </p><br /><p>&nbsp; &nbsp;</p><p>3: System Boot system code via Flash.</p><p>## Booting image at bc050000 ...</p><p>raspi_read: from:50000 len:40 </p><p>&nbsp; &nbsp;Image Name:&nbsp; &nbsp;Linux Kernel Image</p><p>&nbsp; &nbsp;Image Type:&nbsp; &nbsp;MIPS Linux Kernel Image (lzma compressed)</p><p>&nbsp; &nbsp;Data Size:&nbsp; &nbsp; 3150436 Bytes =&nbsp; 3 MB</p><p>&nbsp; &nbsp;Load Address: 80000000</p><p>&nbsp; &nbsp;Entry Point:&nbsp; 8000c2f0</p><p>raspi_read: from:50040 len:301264 </p><p>&nbsp; &nbsp;Verifying Checksum ... OK</p><p>&nbsp; &nbsp;Uncompressing Kernel Image ... OK</p><p>No initrd</p><p>## Transferring control to Linux (at address 8000c2f0) ...</p><p>## Giving linux memsize in MB, 32</p><br /><p>Starting kernel ...</p><br /><br /><p>LINUX started...</p><p> THIS IS ASIC<br />Linux version 2.6.36 (root@ht) (gcc version 3.4.2) #2 Mon Aug 11 14:24:45 EDT 2014</p><p> The CPU feqenuce set to 600 MHz</p><p> MIPS CPU sleep mode enabled.<br /> PCIE: bypass PCIe DLL.<br /> PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4<br /> disable all power about PCIe<br /> PCIE: PLL power down for MT7620N<br />CPU revision is: 00019650 (MIPS 24Kc)<br />Software DMA cache coherency<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />Initrd not found or empty - disabling initrd<br />Zone PFN ranges:<br />&nbsp; Normal&nbsp; &nbsp;0x00000000 -&gt; 0x00002000<br />Movable zone start PFN for each node<br />early_node_map[1] active PFN ranges<br />&nbsp; &nbsp; 0: 0x00000000 -&gt; 0x00002000<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: console=ttyS1,57600n8 root=/dev/ram0 console=ttyS0<br />PID hash table entries: 128 (order: -3, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Primary instruction cache 64kB, VIPT, , 4-waylinesize 32 bytes.<br />Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes<br />Writing ErrCtl register=0001935c<br />Readback ErrCtl register=0001935c<br />Memory: 18920k/32768k available (3698k kernel code, 13848k reserved, 678k data, 8904k init, 0k highmem)<br />NR_IRQS:128<br />console [ttyS1] enabled<br />Calibrating delay loop... 399.36 BogoMIPS (lpj=798720)<br />pid_max: default: 32768 minimum: 301<br />Mount-cache hash table entries: 512<br />NET: Registered protocol family 16<br />bio: create slab &lt;bio-0&gt; at 0<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />Switching to clocksource Ralink Systick timer<br />NET: Registered protocol family 2<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />UDP hash table entries: 256 (order: 0, 4096 bytes)<br />UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />NET: Registered protocol family 1<br />RT3xxx EHCI/OHCI init.<br />fuse init (API version 7.15)<br />msgmni has been set to 36<br />Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)<br />io scheduler noop registered (default)<br />HDLC line discipline maxframe=4096<br />N_HDLC line discipline registered.<br />Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled<br />serial8250: ttyS0 at MMIO 0x10000500 (irq = 37) is a 16550A<br />serial8250: ttyS1 at MMIO 0x10000c00 (irq = 12) is a 16550A<br />brd: module loaded<br />deice id : 7f 9d 46 7f 9d (9d467f9d)<br />Warning: un-recognized chip ID, please update SPI driver!<br />AT25DF321(1f 47000000) (4096 Kbytes)<br />mtd .name = raspi, .size = 0x00400000 (0M) .erasesize = 0x00000004 (0K) .numeraseregions = 65536<br />Creating 5 MTD partitions on &quot;raspi&quot;:<br />0x000000000000-0x000000400000 : &quot;ALL&quot;<br />0x000000000000-0x000000030000 : &quot;Bootloader&quot;<br />0x000000030000-0x000000040000 : &quot;Config&quot;<br />0x000000040000-0x000000050000 : &quot;Factory&quot;<br />0x000000050000-0x000001000000 : &quot;Kernel&quot;<br />mtd: partition &quot;Kernel&quot; extends beyond the end of device &quot;raspi&quot; -- size truncated to 0x3b0000<br />rdm_major = 253<br />SMACCR1 -- : 0x00000017<br />SMACCR0 -- : 0x1318065a<br />Ralink APSoC Ethernet Driver Initilization. v3.0&nbsp; 256 rx/tx descriptors allocated, mtu = 1500!<br />SMACCR1 -- : 0x00000017<br />SMACCR0 -- : 0x1318065a<br />PROC INIT OK!<br />PPP generic driver version 2.4.2<br />PPP Deflate Compression module registered<br />PPP BSD Compression module registered<br />PPP MPPE Compression module registered<br />NET: Registered protocol family 24<br />SLIP: version 0.8.4-NET3.019-NEWTTY (dynamic channels, max=256).<br />CSLIP: code copyright 1989 Regents of the University of California.<br />usbcore: registered new interface driver asix<br />usbcore: registered new interface driver cdc_ether<br />usbcore: registered new interface driver net1080<br />usbcore: registered new interface driver cdc_subset<br />usbcore: registered new interface driver zaurus<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />usbcore: registered new interface driver usbserial<br />usbserial: USB Serial Driver core<br />USB Serial support registered for opticon<br />usbcore: registered new interface driver opticon<br />nf_conntrack version 0.5.0 (295 buckets, 1180 max)<br />IPVS: Registered protocols ()<br />IPVS: Connection hash table configured (size=4096, memory=32Kbytes)<br />IPVS: ipvs loaded.<br />ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Restricted Cone<br />TCP cubic registered<br />NET: Registered protocol family 17<br />L2TP core driver, V2.0<br />PPPoL2TP kernel driver, V2.0<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />Freeing unused kernel memory: 8904k freed</p><p>init started: BusyBox v1.12.1 (2014-Algorithmics/MIPS FPU Emulator v1.5<br />08-11 14:16:33 EDT)</p><p>starting pid 29, tty devpts: called with bogus options<br />&#039;&#039;: &#039;/etc_ro/rcS&#039;<br />ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller<br />rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1<br />rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000<br />rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 1 port detected<br />ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller<br />rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2<br />rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000<br />hub 2-0:1.0: USB hub found<br />hub 2-0:1.0: 1 port detected<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />0x1300 = 00064380</p><p>starting pid 50, tty &#039;/dev/ttyS1&#039;: &#039;/bin/sh&#039;</p><br /><p>BusyBox v1.12.1 (2014-08-11 14:16:33 EDT) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p># rt3xxx-ehci rt3xxx-ehci: remove, state 1<br />usb usb1: USB disconnect, address 1<br />rt3xxx-ehci rt3xxx-ehci: USB bus 1 deregistered<br />rt3xxx-ohci rt3xxx-ohci: remove, state 1<br />usb usb2: USB disconnect, address 1<br />rt3xxx-ohci rt3xxx-ohci: USB bus 2 deregistered<br />Password for &#039;admin&#039; changed<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />0x1300 = 00064380<br />brctl: bridge br0: No such device<br />brctl: bridge br0: No such device<br />brctl: iface eth2.1: No such device<br />brctl: bridge br0: No such device or address<br />ifconfig: ioctl 0x8913 failed: No such device<br />iptables v1.4.10: can&#039;t initialize iptables table `mangle&#039;: Table does not exist (do you need to insmod?)<br />Perhaps iptables or your kernel needs to be upgraded.<br />Raeth v3.0 (Tasklet,SkbRecycle)</p><p>phy_tx_ring = 0x00c9e000, tx_ring = 0xa0c9e000</p><p>phy_rx_ring0 = 0x00c9f000, rx_ring0 = 0xa0c9f000<br />SMACCR1 -- : 0x00000017<br />SMACCR0 -- : 0x1318065a<br />ESW: Link Status Changed - Port0 Link UP<br />CDMA_CSG_CFG = 81000000<br />GDMA1_FWD_CFG = 20710000<br />vconfig: ioctl error for rem: No such device<br />vconfig: ioctl error for rem: No such device<br />device eth2 entered promiscuous mode<br />##### config Ralink ESW vlan partition (WLLLL) #####<br />Special Tag Disabled<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />rt635x_tssi0_dc is 0xfffffffe<br />rt635x_tssi1_dc is 0xfffffffd<br />0x1300 = 00064380<br />device ra0 entered promiscuous mode<br />brctl: iface eth2.1: No such device<br />udhcpc (v1.12.1) started<br />br0: port 1(ra0) entering learning state<br />br0: port 1(ra0) entering learning state<br />ifconfig: ioctl 0x8914 failed: Cannot assign requested address<br />ifconfig: ioctl 0x8914 failed: Cannot assign requested address<br />br0: port 1(ra0) entering forwarding state<br />killall: udhcpd: no process killed<br />SeESW: Link Status Changed - Port0 Link Down<br />t: phy[0].reg[0] = 3900<br />Set: phy[0].reg[0] = 3300<br />Set: phy[1].reg[0] = 3900<br />Set: phy[2].reg[0] = 3900<br />Set: phy[3].reg[0] = 3900<br />switch register base addr to 0xb0000300<br />write offset 0x1c, value 0x1<br />write offset 0x4, value 0xf812039f<br />ESW: Link Status Changed - Port0 Link UP<br />sh: /bin/super_dmz: not found<br />cat: can&#039;t open &#039;/var/run/wscd.pid.ra0&#039;: No such file or directory<br />kill: you need to specify whom to kill</p><p>#</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p260708">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						9 Jan 2015, 15:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>deeexit wrote:</cite><blockquote><p>i have uploaded the mini300 version with the above mentioned procedure. You need to make an iptables rule for rerouting to internal ip.</p><p>iptables -t nat -A PREROUTING -p tcp -d 211.154.131.164 -j DNAT --to-destionation &lt;localIP&gt;</p></blockquote></div><p>I&#039;m sorry. Where did you connect vonets router? To PC or to another router? I can not connect vonets router to PC (Ubuntu 14.04). And another one question. I could not open uImage and other files to edit. Says that archive is unknown. How did you open this?</p>											<p class="post-edited">(Last edited by <strong>Var</strong> on 9 Jan 2015, 16:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261067">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">deeexit</div>
					<div class="post-datetime">
						12 Jan 2015, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve connected my router directly to my PC over ethernet cable. The PC was connected to the internet over WiFi connection and iptables were established to reroute traffic from wired to wireless. I have also set up an FTP server on my local machine and issued the iptables command to reroute all traffic with the destination 211.154.131.164 to a local IP. </p><p>regarding the firmware. You need to download binwalk to analyze the firmware. First 64 bytes are bootloader parameters, followed by the LZMA compressed image.</p><p>In short, here are the steps:</p><p>1) binwalk the firmware to discover offsets<br />2) use DD to slice the firmware and cut out the uboot image (dd if=firmware of=uBoot bs=1 count=64 and dd if=firmwre of=image.xz bs=1 skip=64)<br />3) decompress the lzma image with lzma -d image.xz<br />4) execute binwalk again on decompressed image to find kernel and ramdisk image. At this point you can already change the file contents using some hex editor like tweak.<br />5) use DD again to slice out the ramdisk if you want the complete filesystem structure.<br />6) once you get the CPIO compressed image out, simply decompress with cpio &lt; cpio_image.<br />7) change anything you need<br />8) compress the image back (I haven&#039;t tried this as I have changed the image with a hex editor before)<br />9) use DD to compose the image again and reunite it with uBoot parameters<br />10) use the above procedure to flash the modified firmware<br />11) explore further. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Hope this helps a bit. If you have any questions, just ask, but please try to do it yourself first as it will result in higher knowledge gained. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Good luck!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261102">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">Var</div>
					<div class="post-datetime">
						12 Jan 2015, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=54378&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=54378&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=54378&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>