<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> openwrt on TL-WR841N v13 or TL-WR840N 4.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 27 Apr 2018 and 2 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=70687&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p360084">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">9000000</div>
					<div class="post-datetime">
						10 Jun 2017, 06:11					</div>
				</div>
				<div class="post-content content">
					<p>Please update fw for 841n v13 , thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360195">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">tuxpap</div>
					<div class="post-datetime">
						12 Jun 2017, 03:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, I built a new binary for wr840n-v4 using the Daniel Golle patch that did a great job and raised funds in the kickstart. Thank you Daniel! The patch can be found at git.lede-project.org/?p=lede/dangole/staging.git<br />Even with the work of Daniel the MT7628 drive still has poor performance compared to the atheros SoC (qualcomm) but now we no longer have the MCU message in the kernel log nor the kernel call trace. Important to include in the wireless settings:</p><p> Option noscan &#039;1&#039;<br /> Option rx_stbc &#039;2&#039;</p><p>To manually restart the interfaces do:<br />/etc/init.d/network stop &amp;&amp; sleep 3 &amp;&amp; /etc/init.d/network start</p><p>The binary can be downloaded in ge.tt/2iPZH8l2<br />Rename to tp_recovery.bin and make upload by tftp process.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360203">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">Bemaer</div>
					<div class="post-datetime">
						12 Jun 2017, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>It seems we&#039;re a bit stuck regardign the 841 v13.<br />Here is the status &amp; please contribute.<br /><a href="https://md.darmstadt.ccc.de/AwY2E4CYBYCMQLQEMCMcHQGYA4XNlgpOONgKaRrbbSRA?view">https://md.darmstadt.ccc.de/AwY2E4CYBYC … bbSRA?view</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360272">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">StrayCode</div>
					<div class="post-datetime">
						13 Jun 2017, 10:33					</div>
				</div>
				<div class="post-content content">
					<p>I report also: github.com/JamesT42/source/commit/6886fce66883d85a64c445fc6416124f41ae0ed4</p>											<p class="post-edited">(Last edited by <strong>StrayCode</strong> on 12 Jul 2017, 11:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360431">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">9000000</div>
					<div class="post-datetime">
						15 Jun 2017, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>thank you for updates fw for 841n v13, I would love to use fw lede but I don&#039;t know anything about programming, I can only hope you help, thank you, hope you will constantly updated to complete the this software</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360477">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">phamnhatkhang</div>
					<div class="post-datetime">
						16 Jun 2017, 07:54					</div>
				</div>
				<div class="post-content content">
					<p>Waiting too, thank you for all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360713">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						20 Jun 2017, 19:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>tuxpap wrote:</cite><blockquote><p>The patch can be found at git.lede-project.org/?p=lede/dangole/staging.git ... now we no longer have the MCU message in the kernel log nor the kernel call trace. ...</p></blockquote></div><p>How can we apply the patch? Can you describe it I want to combine it with revealed GPIO pins of TL-WR841N v13 and build a LEDE firmware.</p><p>Edit: OK, i figured it out. Thanks anyway.</p>											<p class="post-edited">(Last edited by <strong>bagciozgur</strong> on 21 Jun 2017, 02:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361082">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">StrayCode</div>
					<div class="post-datetime">
						27 Jun 2017, 23:29					</div>
				</div>
				<div class="post-content content">
					<p>news: git.lede-project.org/?p=lede/pepe2k/staging.git;a=shortlog;h=refs/heads/ramips_tp-link-tl-wr840nv4-support_20170621</p>											<p class="post-edited">(Last edited by <strong>StrayCode</strong> on 12 Jul 2017, 11:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361133">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">fapirini92</div>
					<div class="post-datetime">
						28 Jun 2017, 19:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>StrayCode wrote:</cite><blockquote><p>news: h.t.t.p s:// git.lede-project.org/?p=lede/pepe2k/staging.git;a=shortlog;h=refs/heads/ramips_tp-link-tl-wr840nv4-support_20170621</p></blockquote></div><p>so, this means that I can follow his flash instructions and I&#039;ll have LEDE working on my WR840n v4?? hell yeah! I noticed it&#039;s on staging so after some test they can merge it into stable LEDE? thx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361508">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">fepolito</div>
					<div class="post-datetime">
						4 Jul 2017, 15:32					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I&#039;ve successfuly instaled LEDE in a 840N V4 but the WiFi link became too slow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361846">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">StrayCode</div>
					<div class="post-datetime">
						12 Jul 2017, 11:58					</div>
				</div>
				<div class="post-content content">
					<p>Has anyone tried this?<br /><a href="http://raxp.ru/index.php/2017/06/21/lede-for-wr841n-v13wr840n-v4-en/">raxp.ru/index.php/2017/06/21/lede-for-w … 40n-v4-en/</a></p>											<p class="post-edited">(Last edited by <strong>StrayCode</strong> on 12 Jul 2017, 11:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361874">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						12 Jul 2017, 19:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>StrayCode wrote:</cite><blockquote><p>Has anyone tried this?<br /><a href="http://raxp.ru/index.php/2017/06/21/lede-for-wr841n-v13wr840n-v4-en/">raxp.ru/index.php/2017/06/21/lede-for-w … 40n-v4-en/</a></p></blockquote></div><p>this looks promising. i will try it soon.</p><p>edit: this is working very well on my 841v13.</p><p>to maintainer: </p><p>if you are reading this please share a patch with us.</p><p>or anyone can guide me how to make a patch out of that driver?</p>											<p class="post-edited">(Last edited by <strong>bagciozgur</strong> on 13 Jul 2017, 02:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361906">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">StrayCode</div>
					<div class="post-datetime">
						13 Jul 2017, 11:15					</div>
				</div>
				<div class="post-content content">
					<p>Article explains everything.</p><p>I&#039;ll take you some steps (find the links in the article):</p><ul><li><p><em>The driver for 4.1.X.X kernel was taken from the Padavan for Asus RT-N56U firmware. Makefile for the kernel package was taken from here. Some dependencies was taken from padavan firmware and from witi-openwrt.</em></p></li><li><p><em>I’ve replaced core repo with my own repo, which will be hosted on my server. Core repo contains all kernel modules provided with LEDE. You can’t install kernel modules from the lede-project.org because of hashsum mismatch (this was done by OpenWrt developers). All other repos (base, routing, telephony…) are default, from lede-project.org. You only need to uncomment them in /etc/opkg/distfeeds.conf.</em></p></li></ul>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p361923">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						13 Jul 2017, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>oh boy, i learnt a lot of stuff. i am now compiling openwrt for tl-wr841v13 with mediatek driver for mt7628. i will try it, if i succeed i will share the kernel package source. wish me luck.</p><p>edit: i am close but i can&#039;t understand what is P4URL in Makefiles. In one it is <br /></p><div class="codebox"><pre><code>define P4/Info
  P4URL:=//Jedi/MP/jedi.MT7628.MP/wifi_driver/
endef</code></pre></div><p>In one other it is<br /></p><div class="codebox"><pre><code>define P4/Info
  P4URL:=//Embedded_WIFI/MP/MT7610/rlt_wifi/
endef</code></pre></div><p>edit: i can&#039;t make any progress. waiting for original maintainer to release package.</p>											<p class="post-edited">(Last edited by <strong>bagciozgur</strong> on 13 Jul 2017, 23:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362032">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						15 Jul 2017, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>i compiled the proprietary driver. but i understood now why the guy said it is a mess. i will create a package soon. since my build is without luci and dropbear i won&#039;t share it here.</p>											<p class="post-edited">(Last edited by <strong>bagciozgur</strong> on 15 Jul 2017, 00:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362053">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">Drbrains</div>
					<div class="post-datetime">
						15 Jul 2017, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>@bagciozgur Thats great! Which kernel version are you building for? I tried before to compile the MT7628 driver for a 4.4 kernel but could not get it configured properly.</p><p>I am trying again now starting with a kernel 3.x to see how to configure the driver using Uci and ssh.</p><p>Could you post a short simple configuration for an AP with WPA2/aes? Of course looking forward to your driver package. My intentions are to port forward the mt7603 and mt76x2 drivers later as well</p><p>Thank you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362058">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						15 Jul 2017, 18:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Drbrains wrote:</cite><blockquote><p>@bagciozgur Thats great! Which kernel version are you building for? I tried before to compile the MT7628 driver for a 4.4 kernel but could not get it configured properly.</p><p>I am trying again now starting with a kernel 3.x to see how to configure the driver using Uci and ssh.</p><p>Could you post a short simple configuration for an AP with WPA2/aes? Of course looking forward to your driver package. My intentions are to port forward the mt7603 and mt76x2 drivers later as well</p><p>Thank you</p></blockquote></div><p>it compiled but i can&#039;t get it working unfortunately. there is some problem with mt7628.ko with my build. I am working on it. I will post a walk-through as soon as I get it working. I am using the kernel 4.4.X.</p><p>if there is no wireless in /etc/config probably you can&#039;t compile it right. can you share your mt7628.ko with me. mine is buggy somehow.</p>											<p class="post-edited">(Last edited by <strong>bagciozgur</strong> on 16 Jul 2017, 03:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362082">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">Drbrains</div>
					<div class="post-datetime">
						16 Jul 2017, 09:05					</div>
				</div>
				<div class="post-content content">
					<p>Because it&#039;s very buggy, I went back to compile them first with a Mediatek SDK I found. It compiles a generic MT7628 profile but it boots on my device. Problem is it doesn&#039;t work. Some &quot;features&quot; don&#039;t compile at all. The MT7628AP driver seems to load just fine, but doesn&#039;t seem to transmit anything. The MT7628STA can scan and find other networks but can&#039;t even connect as client to an open (test) network.</p><p>I haven&#039;t figured out yet how Padavan manages to use these drivers; or how the guy from the blog above managed even with messy/dirty patches.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p362119">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">bagciozgur</div>
					<div class="post-datetime">
						16 Jul 2017, 18:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Drbrains wrote:</cite><blockquote><p>Because it&#039;s very buggy, I went back to compile them first with a Mediatek SDK I found. It compiles a generic MT7628 profile but it boots on my device. Problem is it doesn&#039;t work. Some &quot;features&quot; don&#039;t compile at all. The MT7628AP driver seems to load just fine, but doesn&#039;t seem to transmit anything. The MT7628STA can scan and find other networks but can&#039;t even connect as client to an open (test) network.</p><p>I haven&#039;t figured out yet how Padavan manages to use these drivers; or how the guy from the blog above managed even with messy/dirty patches.</p></blockquote></div><p>yeah, wish the guy shares his package. </p><p>anyway i will be on my way with linksys ea3500/ea4500 and netbsd. i need to use these routers on massive scale and had no time left. and bsd rocks, lol.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364816">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">amaurynieto</div>
					<div class="post-datetime">
						2 Sep 2017, 20:45					</div>
				</div>
				<div class="post-content content">
					<p>Did you guys notice that V4 is discontinued and V5 EU is out?</p><p>Noticeable differences are..</p><p>840V4</p><p>CPU MEDIATEK MT7628NN<br />1706-AJCSL<br />EAP0W363<br />RAM 512MB<br />WINBOND<br />W9751G6KB-25</p><p>840V5</p><p>CPU MEDIATEK MT7628NN<br />1710-AJCSL<br />EAP0X331<br />RAM 512MB<br />ESMT M14D5121632A</p><p>That and the fact that the leds, save one, are gone. Just one led (idiot move if you ask me).</p><p>Any luck in supporting? How would I go about it. Whom do I need to ask?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364818">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						2 Sep 2017, 21:35					</div>
				</div>
				<div class="post-content content">
					<p>The different RAM chip should not make a difference.&nbsp; The bootloader takes care of configuring RAM.&nbsp; Linux doesn&#039;t try to change it because the kernel runs from RAM.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 2 Sep 2017, 21:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p364867">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">amaurynieto</div>
					<div class="post-datetime">
						3 Sep 2017, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>It seems however, regardless of the ram, that it doesn&#039;t work. it&#039;s a new version even though it&#039;s the same chipset, and looks like it goes from 1706-AJCSL (V4) to 1710-AJCSL (V5). I will have a serial log in a while and will post. they discontinued 840Nv4, only shipping v5 as of a month or so ago.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p366092">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">msandon</div>
					<div class="post-datetime">
						29 Sep 2017, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>Any news about packages of the mtk driver or fix for open source driver? Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368490">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">deymos</div>
					<div class="post-datetime">
						20 Nov 2017, 07:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi, what problem whith web update? Original fw to openwrt/lede?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369541">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						13 Dec 2017, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, I have tried current lede snapshot, because I needed wds bridge and to my surprise wds bridge between mediatek based wr841n v13 (wds client) ~~~ atheros based wr1043nd v2 (dumb ap) seem to work fine. I have real throughput around 80 mbit (ht20). Flash via tftp was no problem.</p>											<p class="post-edited">(Last edited by <strong>nozombian</strong> on 13 Dec 2017, 14:41)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=70687&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>