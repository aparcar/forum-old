<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to block websites in openwrt (eg: youtube, facebook)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p367875">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">thanaraj.s</div>
					<div class="post-datetime">
						6 Nov 2017, 09:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi All,</p><p>I have working on openwrt from last few days. I have enabled wifi and LAN connnections. I able to access internet from WAN to LAN. Now I want to block Websites in client machine&#039;s.</p><p>For example: I want to block &quot;www.youtube.com &amp; <a href="http://www.facebook.com">www.facebook.com</a>&quot;.</p><p>Can anyone have idea on this?</p><p>Thanks</p><p>Regards,<br />Thanaraj.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367876">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						6 Nov 2017, 10:37					</div>
				</div>
				<div class="post-content content">
					<p>It is <strong>Open</strong>WRT, not close one.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367877">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						6 Nov 2017, 10:49					</div>
				</div>
				<div class="post-content content">
					<p>See <a href="https://lede-project.org/docs/user-guide/parental-controls">https://lede-project.org/docs/user-guid … l-controls</a><br />See also the LEDE forum for solutions.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367878">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">thanaraj.s</div>
					<div class="post-datetime">
						6 Nov 2017, 10:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m working on openWrt only for raspberry Pi board. I&#039;m asking how to configure in firewall to block social websites based on URL or IP Address.</p><p>Please give clear idea on this.</p><p>Regards,<br />Thanaraj.</p>											<p class="post-edited">(Last edited by <strong>thanaraj.s</strong> on 6 Nov 2017, 10:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367879">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						6 Nov 2017, 13:27					</div>
				</div>
				<div class="post-content content">
					<p>The motto of OpenWRT is Wireless <strong>FREEDOM</strong>, not <strong>restriction</strong>. You&#039;ve made mistake in your goal.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367881">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						6 Nov 2017, 14:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thanaraj.s wrote:</cite><blockquote><p>Hi,</p><p>I&#039;m working on openWrt only for raspberry Pi board. I&#039;m asking how to configure in firewall to block social websites based on URL or IP Address.</p><p>Please give clear idea on this.</p><p>Regards,<br />Thanaraj.</p></blockquote></div><p>tmo26 gave you the answer up above.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367883">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						6 Nov 2017, 14:58					</div>
				</div>
				<div class="post-content content">
					<p>Search for &#039;adblock&#039; here on forum, and tailor the code to your (similar) requirements.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367917">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">thanaraj.s</div>
					<div class="post-datetime">
						7 Nov 2017, 07:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have installed <strong>adblock, simple-adblock, squid &amp; privoxy</strong>. But I&#039;m not able to configure URL block.<br />Also <strong>iprange</strong> is not working with <strong>iptables</strong> command. </p><p>Can you please provide any sample configuration to block websites?. and how to use iprange in iptables?</p><p>Regards,<br />Thanaraj.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367923">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						7 Nov 2017, 15:16					</div>
				</div>
				<div class="post-content content">
					<p>do you have:<br />luci-app-adblock<br />luci-app-firewall</p><p>installed so you can configure in luci gui?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367962">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">thanaraj.s</div>
					<div class="post-datetime">
						8 Nov 2017, 08:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Using that, I&#039;m not able to block websites.<br />Since I&#039;m trying with iptables but I&#039;m getting below error</p><p><strong>iptables v1.4.21: Couldn&#039;t load match `iprange&#039;:No such file or directory</strong></p><p>I have enabled <strong>kmod-ipt-iprange</strong> and installed too, even-though it is throwing error.</p><p><strong>root@Tringapps:~# opkg install kmod-ipt-iprange<br />Package kmod-ipt-iprange (4.4.14-1) installed in root is up to date.<br />root@Tringapps:~#</strong></p><p>Can anyone help me to resolve this issue?</p><p>Regards,<br />Thanaraj.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367969">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						8 Nov 2017, 13:36					</div>
				</div>
				<div class="post-content content">
					<p>@Ulmwind<br />Freedom means also to be free to decide which websites a user wants to see and which not.<br />And btw, watch your language.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367974">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">WWTK</div>
					<div class="post-datetime">
						8 Nov 2017, 15:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>thanaraj.s wrote:</cite><blockquote><p>Hi,</p><p>Using that, I&#039;m not able to block websites.<br />Since I&#039;m trying with iptables but I&#039;m getting below error</p><p><strong>iptables v1.4.21: Couldn&#039;t load match `iprange&#039;:No such file or directory</strong></p><p>I have enabled <strong>kmod-ipt-iprange</strong> and installed too, even-though it is throwing error.</p><p><strong>root@Tringapps:~# opkg install kmod-ipt-iprange<br />Package kmod-ipt-iprange (4.4.14-1) installed in root is up to date.<br />root@Tringapps:~#</strong></p><p>Can anyone help me to resolve this issue?</p><p>Regards,<br />Thanaraj.</p></blockquote></div><p>so you are using :</p><p><a href="https://1921.68.1.1/cgi-bin/luci/admin/network/firewall/rules">https://1921.68.1.1/cgi-bin/luci/admin/ … wall/rules</a></p><p>to set up the firewall rules?&nbsp; obviously substituting your router ip</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p367976">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">t3hn00b</div>
					<div class="post-datetime">
						8 Nov 2017, 16:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ulmwind wrote:</cite><blockquote><p>You&#039;ve misunderstood the main principle of OpenWRT: Wireless <strong>FREEDOM</strong>! You should remove OpenWRT from all your devices, eat shit, and use something different.</p></blockquote></div><div class="quotebox"><blockquote><p>This <strong>frees </strong>you from the application selection and configuration provided by the <strong>vendor </strong>and allows you to customize the device through the use of packages to suit any application.</p></blockquote></div><p>opkg update<br />opkg install kmod-ipt-filter iptables-mod-filter<br />/usr/sbin/iptables -A FORWARD -m string --algo bm --string &quot;facebook.com&quot; -j DROP<br />/usr/sbin/iptables -A FORWARD -m string --algo bm --string &quot;youtube.com&quot; -j DROP</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>