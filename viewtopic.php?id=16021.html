<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Linksys WAG54GP2v2 Router/VoIP/ADSL Modem - Flash memory dump JTAG</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p69635">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">maikol</div>
					<div class="post-datetime">
						15 Jun 2008, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,</p><p>First of all I apologize if I am posting in the wrong forum.</p><p>I have a WAG54GP2V2 router which is locked by my ISP. This router contains a DSL modem as well as 2 VoIP ports. It is very similar to the WRTP54G router.<br />It has the AR7 processor and 8MB of flash.<br />I have opened the router and dumped the flash memory using a JTAG cable.<br />I have managed to obtain the NVRAM information from the flash file.<br />I also mounted the squashfs root partition and explored in there.</p><p>The firwmare version shown in the web interface is : Firmware Version: 2.01.03 </p><p>What i am trying to get is the credentials for the Voice tab. How do i go about in figuring out in which area in flash memory i should look?<br />I have search the memory areas indicated by the documentation for the WRTP54G but i cannot find anything.<br />What i found are two memory areas with identical contents which i presume are the WRTP54G corresponding areas marked as CONFIG_A and CONFIG_B<br />These areas are in : 0x007a1000 and 0x007b0800<br />I tried zlib decompressing these areas by saving to a file first but it doesnt work. Area size is 26159 bytes</p><p>Also, what is the CRYPT_KEY used for? Encrypting what values?<br />The ADMIN_PWD value, what is it used for ? Console access? I already have the web passwords.</p><p>There is no SSH access or anything on the box. Only telnet and its very limited. When i login these are the only commands available:</p><p>router(main)#?<br />access-list&nbsp; &nbsp;no access-list&nbsp; &nbsp;configure&nbsp; &nbsp;vpn&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;voice-nmm<br />exit&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; help&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;?&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;iflist&nbsp; &nbsp; &nbsp; interface<br />ip dhcp&nbsp; &nbsp; &nbsp; &nbsp;ipcp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;parental&nbsp; &nbsp; ping&nbsp; &nbsp; &nbsp; &nbsp; reboot<br />restart&nbsp; &nbsp; &nbsp; &nbsp;show&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;saveall&nbsp; &nbsp; &nbsp;status&nbsp; &nbsp; &nbsp; traceroute<br />upgrade</p><p>The following information is stored in the flash regading /dev/mtd mountpoints :</p><p>mtd0.0x900e0000,0x90760000<br />mtd1.0x9002007e:01800000,0x90760000<br />mtd2.0x90000000,0x90020000<br />mtd3.0x907e007e:01c00000,0x90800000<br />mtd4.0x90780000,0x907c0000<br />mtd5.0x9076007e:02000000,0x90780000<br />mtd6.0x907c0000,0x907e0000</p><p>Thank you in advance.</p><p>Michael</p>											<p class="post-edited">(Last edited by <strong>maikol</strong> on 15 Jun 2008, 19:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p75066">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dgi</div>
					<div class="post-datetime">
						20 Oct 2008, 22:05					</div>
				</div>
				<div class="post-content content">
					<p>Experiment with the telnet interface until it gives you a shell. It did that for me, but I don&#039;t remember what I typed.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>