<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WL-520GU + Webcam (supported by spca5xx-le driver)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p98728">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ioan</div>
					<div class="post-datetime">
						14 Dec 2009, 08:30					</div>
				</div>
				<div class="post-content content">
					<p><strong>Solved. Please see this post:</strong><br /><a href="https://forum.openwrt.org/viewtopic.php?pid=98821#p98821">https://forum.openwrt.org/viewtopic.php … 821#p98821</a></p><p>Hi,<br />I started a project that requires to connect a webcam and an arduino board to the router (WL-520GU). I don&#039;t have yet the arduino board, so right now I&#039;m trying to figure out the webcam thing.</p><p>I read everything I found about installing a webcam under OpenWrt, I flashed my router at least 20 times with different versions of openwrt to try different versions of spca5xx files I found on the internet, and so far, after 3 days I couldn&#039;t make it work. The farthest I got is that when I plug in the camera, I get the message:</p><div class="quotebox"><blockquote><p>hub.c: new USB device 00:03.0-1, assigned address 2<br />usb.c: USB device 2 (vend/prod 0x41e/0x4034) is not claimed by any active driver.</p></blockquote></div><p>I&#039;m stuck. I need help.<br />Some questions:<br />1) do I need to compile spca5xx for openwrt version that I use or the spca5xx.o files I find on the internet should work fine?<br />2) if I need to compile the spca5xx, how to I do that? I built openwrt from the source, but I have no idea how to include (or just compile separately) spca5xx<br />3) did I get the wrong router? will the webcam work on my router? </p><p>I don&#039;t know if this will help, but here is the dmesg:<br /></p><div class="quotebox"><blockquote><p>CPU revision is: 00029029<br />Primary instruction cache 16kB, physically tagged, 4-way, linesize 16 bytes.<br />Primary data cache 16kB, 2-way, linesize 16 bytes.<br />Linux version 2.4.35.4 (andy@stable-sandbox) (gcc version 3.4.6 (OpenWrt-2.0)) #9 Mon Sep 14 08:35:07 UTC 2009<br />Setting the PFC to its default value<br />Determined physical RAM map:<br /> memory: 01000000 @ 00000000 (usable)<br />On node 0 totalpages: 4096<br />zone(0): 4096 pages.<br />zone(1): 0 pages.<br />zone(2): 0 pages.<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />CPU: BCM5354 rev 3 at 240 MHz<br />Using 120.000 MHz high precision timer.<br />Calibrating delay loop... 237.56 BogoMIPS<br />Memory: 14260k/16384k available (1425k kernel code, 2124k reserved, 100k data, 84k init, 0k highmem)<br />Dentry cache hash table entries: 2048 (order: 2, 16384 bytes)<br />Inode cache hash table entries: 1024 (order: 1, 8192 bytes)<br />Mount cache hash table entries: 512 (order: 0, 4096 bytes)<br />Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Page-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />POSIX conformance testing by UNIFIX<br />PCI: no core<br />PCI: Fixing up bus 0<br />Linux NET4.0 for Linux 2.4<br />Based upon Swansea University Computer Society NET3.039<br />Initializing RT netlink socket<br />Starting kswapd<br />Registering mini_fo version $Id$<br />devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />pty: 256 Unix98 ptys configured<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 3) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 3) is a 16550A<br />b44.c:v0.93 (Mar, 2004)<br />PCI: Setting latency timer of device 00:01.0 to 64<br />eth0: Broadcom 47xx 10/100BaseT Ethernet 90:e6:ba:1a:04:3d<br />Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table v1.1 at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling fast programming due to code brokenness.<br />Flash device: 0x400000 at 0x1c000000<br />bootloader size: 131072<br />Physically mapped flash: Filesystem type: squashfs, size=0x181e60<br />Creating 5 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00020000 : &quot;cfe&quot;<br />0x00020000-0x003f0000 : &quot;linux&quot;<br />0x0009b000-0x00220000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />0x003f0000-0x00400000 : &quot;nvram&quot;<br />0x00220000-0x003f0000 : &quot;rootfs_data&quot;<br />Initializing Cryptographic API<br />NET4: Linux TCP/IP 1.0 for NET4.0<br />IP Protocols: ICMP, UDP, TCP, IGMP<br />IP: routing cache hash table of 512 buckets, 4Kbytes<br />TCP: Hash tables configured (established 1024 bind 2048)<br />NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.<br />NET4: Ethernet Bridge 008 for NET4.0<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 84k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;ASUS WL-520gU&#039;<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />roboswitch: Probing device eth0: found!<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />jffs2.bbc: SIZE compression mode activated.<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />eth0.0: add 01:00:5e:00:00:01 mcast address to master interface<br />eth0.1: add 01:00:5e:00:00:01 mcast address to master interface<br />eth0.0: dev_set_promiscuity(master, 1)<br />device eth0 entered promiscuous mode<br />device eth0.0 entered promiscuous mode<br />br-lan: port 1(eth0.0) entering learning state<br />br-lan: port 1(eth0.0) entering forwarding state<br />br-lan: topology change detected, propagating<br />PCI: Setting latency timer of device 00:05.0 to 64<br />PCI/DMA<br />wl0: wlc_attach: chiprev 3 coreunit 0 corerev 13 cccap 0x104007ea maccap 0x30482205 band 2.4G, phy_type 5 phy_rev 0 ana_rev 6<br />wl0: Broadcom BCM4318 802.11 Wireless Controller 4.150.10.5<br />CSLIP: code copyright 1989 Regents of the University of California<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2002 Netfilter core team<br />ip_conntrack version 2.1 (5953 buckets, 5953 max) - 352 bytes per conntrack<br />device wl0 entered promiscuous mode<br />wl0: attempt to add interface with same source address.<br />br-lan: port 2(wl0) entering learning state<br />br-lan: port 2(wl0) entering forwarding state<br />br-lan: topology change detected, propagating<br />Warning: DQ5 raised while program operation was in progress, however operation completed OK<br />usb.c: registered new driver usbdevfs<br />usb.c: registered new driver hub<br />SB USB20H init<br />SB COREREV: 2<br />SB USB20H resetting<br />USB20H fcr: 0x64<br />USB20H shim cr: 0x8f7<br />PCI: Setting latency timer of device 00:03.0 to 64<br />usb-ohci.c: USB OHCI at membase 0xb8003000, IRQ 6<br />usb-ohci.c: usb-00:03.0, PCI device 14e4:471a<br />usb.c: new USB bus registered, assigned bus number 1<br />hub.c: USB hub found<br />hub.c: 2 ports detected<br />uhci.c: USB Universal Host Controller Interface driver v1.1<br />SB USB20H init<br />SB COREREV: 2<br />USB20H fcr: 0x64<br />USB20H shim cr: 0x8f7<br />PCI: Setting latency timer of device 00:03.1 to 64<br />ehci_hcd 00:03.1: PCI device 14e4:471a<br />ehci_hcd 00:03.1: irq 6, pci mem b8003800<br />usb.c: new USB bus registered, assigned bus number 2<br />ehci_hcd 00:03.1: illegal capability!<br />ehci_hcd 00:03.1: USB 0.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4<br />hub.c: USB hub found<br />hub.c: 2 ports detected<br />Linux video capture interface: v1.00<br />usb.c: registered new driver spca5xx<br />spca_core.c: spca5xx driver 00.57.06LE registered<br />hub.c: new USB device 00:03.0-1, assigned address 2<br />usb.c: USB device 2 (vend/prod 0x41e/0x4034) is not claimed by any active driver.</p></blockquote></div><p>Thanks.<br />-ioan</p>											<p class="post-edited">(Last edited by <strong>ioan</strong> on 15 Dec 2009, 22:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98741">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						14 Dec 2009, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>I have had problems with spca webcams (and don&#039;t know enough to have figured out the solutions--I&#039;m sure they are there).&nbsp; But I have a UVC webcam running now on a WL-520GU, a Rosewill RCM-3201V (available now in the U.S. at Newegg: <a href="http://www.newegg.com/Product/Product.aspx?Item=N82E16826193045&amp;cm_re=uvc_webcam-_-26-193-045-_-Product">http://www.newegg.com/Product/Product.a … -_-Product</a> )</p><p>The quickcam deluxe for notebooks also works, and I&#039;m sure the quickcam 9000 would.&nbsp; I was hopeful about a &lt;$10 UVC webcam from dealextreme, but it apparently doesn&#039;t stream encoded mjpeg, only raw format.</p><p>For software, I&#039;m using mjpg-streamer, with the necessary usb, usb2, usb audio kmods.</p><p>If you&#039;re building your own and don&#039;t have kmod-video-gspca in your &quot;makemenu config&quot;, have you tried to &quot;./scripts/feeds install kmod-video-gspca&quot; to include it?</p>											<p class="post-edited">(Last edited by <strong>lizby</strong> on 14 Dec 2009, 13:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98761">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ioan</div>
					<div class="post-datetime">
						14 Dec 2009, 20:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>lizby wrote:</cite><blockquote><p>If you&#039;re building your own and don&#039;t have kmod-video-gspca in your &quot;makemenu config&quot;, have you tried to &quot;./scripts/feeds install kmod-video-gspca&quot; to include it?</p></blockquote></div><p>Is there a list somewhere with all the packages that can be included with &quot;./scripts/feeds install ...&quot;? I see a directory named &quot;spca5xx-le&quot; in /feeds/packages/multimedia/&nbsp; but if I run &quot;./scripts/feeds install spca5xx-le&quot; I get &quot;No feed for package &#039;spca5xx-le&#039; found, maybe it&#039;s already part of standard packages?</p><p>I&#039;m getting same thing for &quot;./scripts/feeds install kmod-video-gspca&quot;.</p><p>The camera I&#039;m trying to use, a refurbished Creative Instant,&nbsp; is $7.99 at Fry&#039;s and is supposed to be supported by spca5xx-le.</p><p>Thanks.<br />-ioan</p>											<p class="post-edited">(Last edited by <strong>ioan</strong> on 14 Dec 2009, 20:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98771">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						14 Dec 2009, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>&quot;./scripts/feeds install kmod-video-spca5xx-le&quot; runs without error for me from the build directory.&nbsp; But it does not appear as an entry in menuconfig, so I searched: &quot;/spca5&quot;, and it shows up and is selected by &quot;PACKAGE_spca5xx-view&quot;.&nbsp; It also indicates that it depends on Linux 2.6.24 or 25 or 26--I haven&#039;t seen that before and am not certain what it means for this build.&nbsp; But I could not find spca5xx-view, so I don&#039;t know what you would need to do next.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98773">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						14 Dec 2009, 23:52					</div>
				</div>
				<div class="post-content content">
					<p>It is amazing that the se401 driver isn&#039;t longer supported by OpenWRT, yet the se041 driver source codes are still distributed under linux-2.6.30.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98817">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ioan</div>
					<div class="post-datetime">
						15 Dec 2009, 21:27					</div>
				</div>
				<div class="post-content content">
					<p>I have good news. <br />I was able to compile the latest openwrt source kernel 2.4 with spca5xx as a package. <br />The webcam works without problems now on my WL-520GU. Again, the webcam I&#039;m using is a $7.99 camera from Fry&#039;s, refurbished Creative Instant. <br />I will post detailed instructions on how I compiled the source and how I applied the spca5xx-le patch if anyone is interested.<br />If anyone want it already built, here are the binaries:<br /><a href="http://ioanghip.googlepages.com/openwrt-brcm-2.4-squashfs-spca5xx.zip">http://ioanghip.googlepages.com/openwrt … pca5xx.zip</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98818">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						15 Dec 2009, 21:32					</div>
				</div>
				<div class="post-content content">
					<p>Please do post.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98821">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ioan</div>
					<div class="post-datetime">
						15 Dec 2009, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>To compile openwrt latest source with spca5xx-le patch you will need a Linux box.<br />I&#039;m using vmware image of ubuntu on a windows machine with vmware player installed. I downloaded the vmware image from here: <a href="http://repository.variableadmin.com/vm/ubuntu904desktop.7z">http://repository.variableadmin.com/vm/ … desktop.7z</a></p><p>Here is how you do it:<br />Open a console and type: <br /></p><div class="quotebox"><blockquote><p>sudo apt-get install build-essential subversion libncurses5-dev zlib1g-dev gawk bison gcc<br />mkdir ~/kamikaze<br />cd ~/kamikaze<br />svn checkout svn://svn.openwrt.org/openwrt/trunk/ .&nbsp; <br />./scripts/feeds update -a<br />make menuconfig</p></blockquote></div><p>Select the following options:<br /></p><div class="quotebox"><blockquote><p>Target System (Broadcom BCM947xx/953xx [2.4])<br />Target Profile (Generic, Broadcom WiFi (default))<br />Select all packages by default<br />Kernel modules<br />&nbsp; &nbsp; USB support<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-usb-core [*]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-usb-ohci [*]<br />&nbsp; &nbsp; Video Support<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-video-core [*]</p></blockquote></div><p>Save the configuration and then type in console:<br /></p><div class="quotebox"><blockquote><p>make world V=99</p></blockquote></div><p>This will take a while...<br />When is done, type this in console:<br /></p><div class="quotebox"><blockquote><p>wget <a href="http://mxhaard.free.fr/spca50x/embedded/KernelPatch/usb-2.4.31LE06.patch.tar.gz">http://mxhaard.free.fr/spca50x/embedded … tch.tar.gz</a><br />tar xvfz usb-2.4.31LE06.patch.tar.gz<br />mv usb-2.4.31LE06.patch ~/kamikaze/build_dir/linux-brcm-2.4/linux-2.4*/drivers/usb<br />cd ~/kamikaze/build_dir/linux-brcm-2.4/linux-2.4*/drivers/usb<br />patch -p1 &lt; usb-2.4.31LE06.patch</p></blockquote></div><p>Now we have to modify usb.mk. Open with a text editor ~/kamikaze/package/kernel/modules/usb.mk and add the following code to it:<br /></p><div class="quotebox"><blockquote><p>define KernelPackage/usb-spca5xx<br />&nbsp; $(call usbdep,)<br />&nbsp; TITLE:=spca5xx WebCam driver<br />&nbsp; #KCONFIG:=$(CONFIG_USB_SPCA5XX)<br />&nbsp; FILES:=$(LINUX_DIR)/drivers/usb/spca5xx/spca5xx.$(LINUX_KMOD_SUFFIX)<br />&nbsp; AUTOLOAD:=$(call AutoLoad,70,spca5xx)<br />endef</p><p>$(eval $(call KernelPackage,usb-spca5xx))</p></blockquote></div><p>Save usb.mk with the new settings.</p><p>Now we have to build the image again. In Kernel-&gt;modules-&gt;USB Supoprt you&#039;ll have a new line &quot;kmod-usb-spca5xx&quot;, make sure is marked as [M].<br /></p><div class="quotebox"><blockquote><p>cd ~/kamikaze<br />make menuconfig<br />Target System (Broadcom BCM947xx/953xx [2.4])<br />Target Profile (Generic, Broadcom WiFi (default))<br />Select all packages by default<br />Kernel modules<br />&nbsp; &nbsp; USB support<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-usb-core [*]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-usb-ohci [*]<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-usb-spca5xx [M]<br />&nbsp; &nbsp; Video Support<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;kmod-video-core [*]</p></blockquote></div><p>Save the new config, and then:<br /></p><div class="quotebox"><blockquote><p>make world V=99</p></blockquote></div><p>The compiling stopped twice to ask me to to select an option, I selected &quot;m&quot;.</p><p>When is done, you&#039;ll have in ~/kamikaze/bin/brcm-2.4/ the new firmware: <br />openwrt-brcm-2.4-squashfs.trx<br />and in ~/kamikaze/bin/brcm-2.4/packages/ the compiled spca5xx package:<br />kmod-usb-spca5xx_2.4.37.5-1_brcm-2.4.ipk</p><p>Let me know if you have questions or if something is not clear.</p><p>Thanks to:<br /><a href="http://nuwiki.openwrt.org/doc/howto/buildroot">http://nuwiki.openwrt.org/doc/howto/buildroot</a><br /><a href="http://mightyohm.com/blog/2008/11/building-a-wifi-radio-part-4-installing-openwrt/">http://mightyohm.com/blog/2008/11/build … g-openwrt/</a><br /><a href="https://forum.openwrt.org/viewtopic.php?pid=61843#p61843">https://forum.openwrt.org/viewtopic.php … 843#p61843</a></p>											<p class="post-edited">(Last edited by <strong>ioan</strong> on 29 Dec 2009, 22:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p98828">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						16 Dec 2009, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>Thanks very much for the detailed flow.&nbsp; I&#039;ll have to study this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p105105">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">displacedtexan</div>
					<div class="post-datetime">
						23 Mar 2010, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Great How To, it really helped me out!</p><p>I installed the kmod, ran &quot;insmod spca5xx&quot;, and added a symbolic link (ln -s /dev/v4l/video0 /dev/video0).</p><p>It works great with spcacat, although that particular webcam only does 352 x 288.&nbsp; </p><p>Thanks again!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106114">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">displacedtexan</div>
					<div class="post-datetime">
						5 Apr 2010, 20:57					</div>
				</div>
				<div class="post-content content">
					<p>Any idea why a Logitech quickcam for notebook deluxe webcam would not work with the above setup?&nbsp; I got the author&#039;s webcam to work and wanted to improve the resolution, so I bought the logitech as it is supposed to supported by the same spca5xxLE driver and have 640x480 resolution.</p><p>Here is my dmesg output.</p><div class="codebox"><pre><code> usb.c: registered new driver spca5xx
spca_core.c: spca5xx driver 00.57.06LE registered
usb.c: USB disconnect on device 00:03.0-1 address 2
hub.c: new USB device 00:03.0-1, assigned address 3
usb.c: USB device 3 (vend/prod 0x46d/0x8d8) is not claimed by any active driver.</code></pre></div><p>Any help would be appreciated!</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p106336">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">tanmay</div>
					<div class="post-datetime">
						8 Apr 2010, 05:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ioan wrote:</cite><blockquote><p>I have good news. <br />I was able to compile the latest openwrt source kernel 2.4 with spca5xx as a package. <br />The webcam works without problems now on my WL-520GU. Again, the webcam I&#039;m using is a $7.99 camera from Fry&#039;s, refurbished Creative Instant.</p></blockquote></div><p>Thanks for the package file and the comprehensive how-to. I am using an ASUS WL500 GPV2 router (very similar in hardware to the 520 GU), with the brcm-2.4 Kamikaze Bleeding edge running on it. <br />I downloaded your ipk file to my router, however when i tried to install, this was the error I got: </p><p>root@OpenWrt: opkg install kmod-usb-spca5xx_2.4.37.5-1_brcm-2.4.ipk<br />Collected errors:<br /> * Packages were found, but none compatible with the architectures configured</p><p>Not sure why it is complaining about the architecture in this case. Am i doing something stupid or would it only be possible to work around this by compiling my own package. Others have been succesful in installing this, so I was wondering if anyone had a similar problem.</p><p>What version of Kamikaze were you running during this?</p><p>Also a bit worried about the use of the Logitech Communicate STX [046d:08d7] which is shown to be supported by spca5xx/LE. Would I require any changes to the way you built the package for this particular cam ? </p><p>Thanks for the help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p112793">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ipas</div>
					<div class="post-datetime">
						9 Jul 2010, 15:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>displacedtexan wrote:</cite><blockquote><p>Great How To, it really helped me out!</p><p>I installed the kmod, ran &quot;insmod spca5xx&quot;, and added a symbolic link (ln -s /dev/v4l/video0 /dev/video0).</p><p>It works great with spcacat, although that particular webcam only does 352 x 288.&nbsp; </p><p>Thanks again!</p></blockquote></div><p>Thank you very much. </p><p>Now a day, you can not update another package with &#039;opkg install&#039;. Because old-trunked compiled package was gone from server. So, you need to re-build it all.</p><p>After that , I have tried to run &#039;motion&#039;, motion detection software. <br />But there&#039;s some problem. <br />Because motion could not initial &#039;/dev/v4l/video0&#039;.</p><p>So, I&#039;m still looking for next solution.</p>											<p class="post-edited">(Last edited by <strong>ipas</strong> on 10 Jul 2010, 15:21)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p125609">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">NatalieSmith01</div>
					<div class="post-datetime">
						16 Jan 2011, 15:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ioan wrote:</cite><blockquote><p>I have good news. <br />I was able to compile the latest openwrt source kernel 2.4 with spca5xx as a package. <br />The webcam works without problems now on my WL-520GU. Again, the webcam I&#039;m using is a $7.99 camera from Fry&#039;s, refurbished Creative Instant. <br />I will post detailed instructions on how I compiled the source and how I applied the spca5xx-le patch if anyone is interested.<br />If anyone want it already built, here are the binaries:<br /><a href="http://ioanghip.googlepages.com/openwrt-brcm-2.4-squashfs-spca5xx.zip">http://ioanghip.googlepages.com/openwrt … pca5xx.zip</a></p></blockquote></div><p>Yup...Quite a good news that is.<br />Please keep us posted.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p130050">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">NekoNoKotatsu</div>
					<div class="post-datetime">
						6 Mar 2011, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I read from a lot of threads on different forums about<br />spca5xx but no results... I think I have 3 choices:</p><p>1st: compile the module onto router using actual compiler<br />2nd: cross-compilling the module on a pc machine<br />3rd: compile using same gcc version 3.2.3 with Broadcom<br />modifications from Asus directly to router</p><p>Here is the archive containing makefile from 2nd and the result (spca5xx.o):</p><p><a href="http://www.tempfiles.net/download/201103/147754/asus.html">http://www.tempfiles.net/download/20110 … /asus.html</a></p><br /><p>1st: I tried also to compile on the router the drivers:<br /><a href="http://mxhaard.free.fr/spca50x/Download/spca5xx-v4l1goodbye.tar.gz">http://mxhaard.free.fr/spca50x/Download … bye.tar.gz</a></p><p>- system: Broadcom BCM4704 chip rev 9 pkg 0;<br />- cpu: BCM3302 V0.6;<br />- Linux version 2.4.20 (gcc version 3.2.3 with Broadcom modifications) #109;<br />- firmware 1.9.2.7-10-USB-1.71 (from koppel.cz);<br />- webcam Logitech, Inc. QuickCam Communicate STX; ID: 046d:08d7;<br />- compiler: gcc version 4.1.1;<br />- linker: gnu ld version 2.17.50.0.8 20061201<br />(both installed with ipkg on /opt/ [compact flash, 16gb card])</p><p>At compilation process everything seems to stuck at /opt/include/asm/softirq.h<br />The output of `make` is:<br />-------------------------<br />Compiling drivers/usb/spcadecoder.c<br />In file included from /opt/include/linux/interrupt.h:46,<br />from /opt/include/linux/usb.h:139,<br />from drivers/usb/spca5xx.h:14,<br />from drivers/usb/spcadecoder.h:5,<br />from drivers/usb/spcadecoder.c:36:<br />/opt/include/asm/softirq.h: In function &#039;cpu_bh_disable&#039;:<br />/opt/include/asm/softirq.h:18: error: invalid lvalue in increment<br />/opt/include/asm/softirq.h: In function &#039;__cpu_bh_enable&#039;:<br />/opt/include/asm/softirq.h:25: error: invalid lvalue in decrement<br />drivers/usb/spcadecoder.c: In function &#039;fun_D&#039;:<br />drivers/usb/spcadecoder.c:809: warning: value computed is not used<br />drivers/usb/spcadecoder.c: In function &#039;decode_spca561&#039;:<br />drivers/usb/spcadecoder.c:1422: warning: pointer targets in passing argument 4 of &#039;internal_spca561_decode&#039; differ in signedness<br />drivers/usb/spcadecoder.c: In function &#039;spca50x_outpicture&#039;:<br />drivers/usb/spcadecoder.c:2161: warning: pointer targets in passing argument 2 of &#039;decode_spca561&#039; differ in signedness<br />drivers/usb/spcadecoder.c: In function &#039;yuv_decode&#039;:<br />drivers/usb/spcadecoder.c:2270: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function &#039;jpeg_decode411&#039;:<br />drivers/usb/spcadecoder.c:2622: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function &#039;jpeg_decode422&#039;:<br />drivers/usb/spcadecoder.c:3001: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function &#039;bayer_decode&#039;:<br />drivers/usb/spcadecoder.c:3356: warning: cast increases required alignment of target type<br />make: *** [drivers/usb/spcadecoder.o] Error 1<br />-------------------------</p><p>2nd: I downloaded that version from the Asus&#039;s site<br />(and also the source of firmware: GPL_WL500GP_1.9.7.7.tar.gz and toolschain323.tar.gz),<br />extracted into pc#2 with CentOS 5.5, and configured in Makefile from spca5xx-v4l1goodbye.tar.gz<br />I compiled it after many struggles. Only few warnings and no error (see below):<br />----------------------------------------------------------------<br /># make<br />Compiling drivers/usb/spcadecoder.c<br />In file included from /opt/firmware/broadcom/src/linux/linux/include/linux/net.h:22,<br />from /opt/firmware/broadcom/src/linux/linux/include/linux/fs.h:15,<br />from /opt/firmware/broadcom/src/linux/linux/include/linux/capability.h:17,<br />from /opt/firmware/broadcom/src/linux/linux/include/linux/binfmts.h:5,<br />from /opt/firmware/broadcom/src/linux/linux/include/linux/sched.h:9,<br />from /opt/firmware/broadcom/src/linux/linux/include/asm/uaccess.h:13,<br />from drivers/usb/spca5xx.h:11,<br />from drivers/usb/spcadecoder.h:5,<br />from drivers/usb/spcadecoder.c:36:<br />/opt/firmware/broadcom/src/linux/linux/include/linux/socket.h: In function `__cmsg_nxthdr&#039;:<br />/opt/firmware/broadcom/src/linux/linux/include/linux/socket.h:107: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function `yuv_decode&#039;:<br />drivers/usb/spcadecoder.c:2270: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function `jpeg_decode411&#039;:<br />drivers/usb/spcadecoder.c:2622: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function `jpeg_decode422&#039;:<br />drivers/usb/spcadecoder.c:3001: warning: cast increases required alignment of target type<br />drivers/usb/spcadecoder.c: In function `bayer_decode&#039;:<br />drivers/usb/spcadecoder.c:3356: warning: cast increases required alignment of target type<br />Compiling drivers/usb/spca5xx.c<br />In file included from /opt/firmware/broadcom/src/linux/linux/include/linux/net.h:22,<br />from /opt/firmware/broadcom/src/linux/linux/include/linux/fs.h:15,<br />from drivers/usb/spca5xx.c:45:<br />/opt/firmware/broadcom/src/linux/linux/include/linux/socket.h: In function `__cmsg_nxthdr&#039;:<br />/opt/firmware/broadcom/src/linux/linux/include/linux/socket.h:107: warning: cast increases required alignment of target type<br />In file included from drivers/usb/spca5xx.c:847:<br />drivers/usb/spcausb.h: In function `spca50x_reg_read_with_value&#039;:<br />drivers/usb/spcausb.h:335: warning: cast increases required alignment of target type<br />drivers/usb/spcausb.h:341: warning: cast increases required alignment of target type<br />drivers/usb/spca5xx.c: At top level:<br />drivers/usb/spca5xx.c:5660: warning: initialization from incompatible pointer type<br />drivers/usb/spca5xx.c:5661: warning: initialization from incompatible pointer type<br />drivers/usb/spca5xx.c:5662: warning: initialization from incompatible pointer type<br />drivers/usb/spca5xx.c:5663: warning: braces around scalar initializer<br />drivers/usb/spca5xx.c:5663: warning: (near initialization for `spca5xx_driver.disconnect&#039;)<br />drivers/usb/spca5xx.c:5663: warning: excess elements in scalar initializer<br />drivers/usb/spca5xx.c:5663: warning: (near initialization for `spca5xx_driver.disconnect&#039;)<br />drivers/usb/spca5xx.c:150: warning: `bright&#039; defined but not used<br />drivers/usb/spca5xx.c:151: warning: `contrast&#039; defined but not used<br />Linking spca5xx.o<br />----------------------------------------------------------------<br />Also there are few interesting results:<br />- on router, after /sbin/insmod videodev and<br />/sbin/insmod /opt/lib/webcam/spca5xx.o<br />there are no complains;<br />- some weird characters appear when the camera is loaded;<br />- appeared the message: `vlan1: dev_set_allmulti(master, 1)`;<br />- no video0 in /dev (nor /dev/4l/video0);<br />- no other errors, no tained, no unresolved symbols;<br />- there are no files in /proc/video nor /proc/spca50x<br />and some informations in files from /proc/bus/usb, see:</p><p><a href="http://www.tempfiles.net/download/201103/147754/asus.html">http://www.tempfiles.net/download/20110 … /asus.html</a></p><p>----------------------------------------------------------------<br />dmesg output:<br />----------------------------------------------------------------<br />usb.c: registered new driver audio<br />usb.c: audio driver claimed interface 81e304d0<br />usbaudio: device 2 audiocontrol interface 1 has 1 input and 0 output AudioStreaming interfaces<br />usbaudio: device 2 interface 2 altsetting 1 channels 1 framesize 2 configured<br />usbaudio: valid input sample rate 8000<br />usbaudio: device 2 interface 2 altsetting 1: format 0x00000010 sratelo 8000 sratehi 8000 attributes 0x00<br />usbaudio: device 2 interface 2 altsetting 2 channels 1 framesize 2 configured<br />usbaudio: valid input sample rate 16000<br />usbaudio: device 2 interface 2 altsetting 2: format 0x00000010 sratelo 16000 sratehi 16000 attributes 0x00<br />usbaudio: registered dsp 14,3<br />usbaudio: constructing mixer for Terminal 3 type 0x0101<br />usbaudio: warning: found 1 of 0 logical channels.<br />usbaudio: assuming the channel found is the master channel (got a Philips camera?). Should be fine.<br />usbaudio: registered mixer 14,0<br />usb_audio_parsecontrol: usb_audio_state at 81c66dc0<br />usb.c: audio driver claimed interface 81e304b8<br />audio.c: v1.0.0:USB Audio Class driver<br />vlan1: dev_set_allmulti(master, 1)<br />Linux video capture interface: v1.00<br />usb.c: registered new driver Ðÿ½&#039;,<br />usb.c: Ðÿ½&#039;, driver claimed interface 81e304a0<br />drivers/usb/spca5xx.c: spca5xx driver 00.60.00.1 registered<br />------------------------------------------------------</p><p>3rd: very slow (you know already the deal with the router&#039;s limited cpu, ram)...<br />so: no problem at `configure`, errors at `make`... still working at it...<br />don&#039;t know if I will see it finaly and properly compiled Sad</p><p>I really don&#039;t still want to get to 2.6.x kernel; after few months maybe.<br />I really appreciate every single advice in this problem.</p><p>P.S.: the Logitech STX cam it&#039;s recognized under CentOs 5.5 and works perfectly with Palantir 2.7...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165784">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">viosebi</div>
					<div class="post-datetime">
						25 Apr 2012, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>hello ioan, <br />this is a romanian name <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Did you succed to solve 5xx-LE issue with webcam?<br />I also have many webcams which might work with this driver but i cannot find it in backfire repository.<br />any ideea?<br />brgds,<br />Sebastian <br />viosebi@yahoo.com</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p167392">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">playonlcd</div>
					<div class="post-datetime">
						15 May 2012, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>Kernel 2.6 has better suport for web cams.<br />Also, try JPEG webcams to function correctly.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>