<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> USB-Hid on WL-500GD</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 23 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78723">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jirin.sv</div>
					<div class="post-datetime">
						28 Dec 2008, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, I&#039;m having trouble with my WL-500GD (2.4). I want my ASUS to get data from weather station Watson W-8681, unfortunately this WS is connected via USB as HID device<br />Hardware identification:<br /></p><div class="codebox"><pre><code>usb 2-8: new low speed USB device using ohci_hcd and address 2
usb 2-8: configuration #1 chosen from 1 choice
hiddev96hidraw0: USB HID v1.00 Device [HID 1941:8021] on usb-0000:00:02.0-8
usb 2-8: New USB device found, idVendor=1941, idProduct=8021
usb 2-8: New USB device strings: Mfr=0, Product=0, SerialNumber=0</code></pre></div><p>I was running trunk version of Openwrt revision 7880, this revision without hid module doesn&#039;t recognize station, so I have decided to build new image. I had downloaded the latest trunk version, updated kernel_menuconfig (enable HID and input devices), build and installed new image. Asus now recognizes device. After the device is connected in dmesg i got information, that new HID device was connected.<br />New nod /dev/usb/hid/hiddev0 is created.<br />dmesg:<br /></p><div class="codebox"><pre><code>hub.c: new USB device 01:02.0-2.4, assigned address 6
hiddev0: USB HID v1.00 Device [1941:8021] on usb1:6.0</code></pre></div><p>Then I have cross-compiled script for the weather s. â€“ <a href="http://meteolinger.lowlevel.cz/tracker">http://meteolinger.lowlevel.cz/tracker</a> ( <a href="http://meteolinger.lowlevel.cz/anonsvn/driver/wwsr.c">http://meteolinger.lowlevel.cz/anonsvn/driver/wwsr.c</a> ). <br /></p><div class="codebox"><pre><code>Mipsel cross compile:
./staging_dir_mipsel/bin/mipsel-linux-uclibc-gcc -I ./staging_dir_mipsel/include/ -I ./staging_dir_mipsel/usr/include/ -L ./staging_dir_mipsel/usr/lib/ -lusb -O2 -Wall wwsr.c -o wwsr

Classic PC compile:
gcc /usr/lib/libusb.so wwsr.c -o wwsr</code></pre></div><p>When is this script launched, on the output they displayed faulty values and the nod /dev/usb/hid/hiddev0 is dropped and does&#039;n exists until the USB device is reconnected.</p><p>dmesg errors:<br /></p><div class="codebox"><pre><code>usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22
usbdevfs: usb_submit_urb returned -22</code></pre></div><p>Where should be mistake? Thanks in advance for any ideas (and sorry for my bad English â€“ <span class="postimg"><img src="http://www.virtualnipraha.cz/images/flag_cs.jpg" alt="http://www.virtualnipraha.cz/images/flag_cs.jpg" /></span>) <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>jirin.sv</strong> on 28 Dec 2008, 20:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78851">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jirin.sv</div>
					<div class="post-datetime">
						1 Jan 2009, 20:32					</div>
				</div>
				<div class="post-content content">
					<p>Nobody has an idea how to solve it?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>