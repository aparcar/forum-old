<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Barrier Breaker 14.07 Ntfs Mounting Problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p257307">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mirach61</div>
					<div class="post-datetime">
						11 Dec 2014, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Barrier Breaker 14.07 Ntfs Mounting Problem</p><div class="quotebox"><blockquote><p>root@OpenWrt:~# ntfs-3g /dev/sdb1 /mnt/usb-ntfs<br />ntfs-3g-mount: mount failed: Invalid argument</p></blockquote></div><p>I have Openwrt&#039;s Barrier Breaker 14.07 version. I installed it on TD-W8970 router.</p><p>First question;<br />I can&#039;t found NTFS partition. I read tih article Writable NTFS (<a href="http://wiki.openwrt.org/doc/howto/writable_ntfs">http://wiki.openwrt.org/doc/howto/writable_ntfs</a>)<br />I have followed all the instructions. But it doesn&#039;t work. !</p><p>What is the solution?</p><p><strong>My app list:</strong><br /></p><div class="quotebox"><blockquote><p>base-files - 156-r43085<br />blkid - 2.24.1-1<br />block-mount - 2014-06-22-e0430f5c62f367e5a8e02755412977b02c3fc45e<br />br2684ctl - 2.5.2-5<br />busybox - 1.22.1-3<br />collectd - 4.10.8-3<br />collectd-mod-interface - 4.10.8-3<br />collectd-mod-iwinfo - 4.10.8-3<br />collectd-mod-load - 4.10.8-3<br />collectd-mod-network - 4.10.8-3<br />collectd-mod-rrdtool - 4.10.8-3<br />ddns-scripts - 1.0.0-23<br />dnsmasq - 2.71-4<br />dropbear - 2014.63-2<br />e2fsprogs - 1.42.4-1<br />etherwake - 1.09-3<br />fdisk - 2.24.1-1<br />firewall - 2014-09-19<br />fstools - 2014-06-22-e0430f5c62f367e5a8e02755412977b02c3fc45e<br />hd-idle - 1.04-1<br />hostapd-common - 2014-06-03.1-1<br />ip6tables - 1.4.21-1<br />iptables - 1.4.21-1<br />iw - 3.15-1<br />iwinfo - 51<br />jshn - 2014-08-04-dffbc09baf71b294185a36048166d00066d433b5<br />jsonfilter - 2014-06-19-cdc760c58077f44fc40adbbe41e1556a67c1b9a9<br />kernel - 3.10.49-1-8a538b0ca330c4bbb3a71173ce108230<br />kmod-ath - 3.10.49+2014-05-22-1<br />kmod-ath9k - 3.10.49+2014-05-22-1<br />kmod-ath9k-common - 3.10.49+2014-05-22-1<br />kmod-atm - 3.10.49-1<br />kmod-button-hotplug - 3.10.49-3<br />kmod-cfg80211 - 3.10.49+2014-05-22-1<br />kmod-crypto-aes - 3.10.49-1<br />kmod-crypto-arc4 - 3.10.49-1<br />kmod-crypto-core - 3.10.49-1<br />kmod-crypto-hash - 3.10.49-1<br />kmod-crypto-manager - 3.10.49-1<br />kmod-crypto-pcompress - 3.10.49-1<br />kmod-fs-ext4 - 3.10.49-1<br />kmod-fs-ntfs - 3.10.49-1<br />kmod-fs-vfat - 3.10.49-1<br />kmod-fuse - 3.10.49-1<br />kmod-gpio-button-hotplug - 3.10.49-1<br />kmod-ip6tables - 3.10.49-1<br />kmod-ipt-conntrack - 3.10.49-1<br />kmod-ipt-core - 3.10.49-1<br />kmod-ipt-nat - 3.10.49-1<br />kmod-ipt-nathelper - 3.10.49-1<br />kmod-ipv6 - 3.10.49-1<br />kmod-leds-gpio - 3.10.49-1<br />kmod-ledtrig-default-on - 3.10.49-1<br />kmod-ledtrig-gpio - 3.10.49-1<br />kmod-ledtrig-heartbeat - 3.10.49-1<br />kmod-ledtrig-morse - 3.10.49-1<br />kmod-ledtrig-netdev - 3.10.49-1<br />kmod-ledtrig-netfilter - 3.10.49-1<br />kmod-ledtrig-oneshot - 3.10.49-1<br />kmod-ledtrig-timer - 3.10.49-1<br />kmod-ledtrig-usbdev - 3.10.49-1<br />kmod-lib-crc-ccitt - 3.10.49-1<br />kmod-lib-crc16 - 3.10.49-1<br />kmod-lib80211 - 3.10.49+2014-05-22-1<br />kmod-ltq-atm-vr9 - 3.10.49-1<br />kmod-ltq-deu-vr9 - 3.10.49-1<br />kmod-ltq-hcd-vr9 - 3.10.49-1<br />kmod-ltq-ifxos - 3.10.49+1.5.14-3<br />kmod-ltq-vdsl-vr9 - 3.10.49+4.11.4-1<br />kmod-ltq-vdsl-vr9-mei - 3.10.49+1.2.0-1<br />kmod-mac80211 - 3.10.49+2014-05-22-1<br />kmod-nls-base - 3.10.49-1<br />kmod-nls-cp437 - 3.10.49-1<br />kmod-nls-iso8859-1 - 3.10.49-1<br />kmod-ppp - 3.10.49-1<br />kmod-pppoa - 3.10.49-1<br />kmod-pppoe - 3.10.49-1<br />kmod-pppox - 3.10.49-1<br />kmod-scsi-core - 3.10.49-1<br />kmod-slhc - 3.10.49-1<br />kmod-usb-core - 3.10.49-1<br />kmod-usb-storage - 3.10.49-1<br />kmod-usb-storage-extras - 3.10.49-1<br />kmod-usb2 - 3.10.49-1<br />kmod-usb3 - 3.10.49-1<br />libblkid - 2.24.1-1<br />libblobmsg-json - 2014-08-04-dffbc09baf71b294185a36048166d00066d433b5<br />libbz2 - 1.0.6-1<br />libc - 0.9.33.2-1<br />libcurl - 7.38.0-1<br />libevent2 - 2.0.21-1<br />libexif - 0.6.21-1<br />libext2fs - 1.42.4-1<br />libffmpeg-mini - 0.11.5-5<br />libflac - 1.2.1-1<br />libgcc - 4.8-linaro-1<br />libgcrypt - 1.6.1-1<br />libgpg-error - 1.12-1<br />libid3tag - 0.15.1b-4<br />libip4tc - 1.4.21-1<br />libip6tc - 1.4.21-1<br />libiwinfo - 51<br />libiwinfo-lua - 51<br />libjpeg - 6b-1<br />libjson-c - 0.11-2<br />libjson-script - 2014-08-04-dffbc09baf71b294185a36048166d00066d433b5<br />libltdl - 2.4-1<br />liblua - 5.1.5-1<br />libncurses - 5.9-1<br />libnfnetlink - 1.0.1-1<br />libnl-tiny - 0.1-3<br />libogg - 1.3.2-2<br />libopenssl - 1.0.1j-1<br />libpcap - 1.5.3-1<br />libpng - 1.2.51-1<br />libpolarssl - 1.3.8-2<br />libpthread - 0.9.33.2-1<br />libreadline - 6.2-1<br />librrd1 - 1.0.50-2<br />librt - 0.9.33.2-1<br />libsqlite3 - 3080701-1<br />libstdcpp - 4.8-linaro-1<br />libubox - 2014-08-04-dffbc09baf71b294185a36048166d00066d433b5<br />libubus - 2014-09-17-4c4f35cf2230d70b9ddd87638ca911e8a563f2f3<br />libubus-lua - 2014-09-17-4c4f35cf2230d70b9ddd87638ca911e8a563f2f3<br />libuci - 2014-04-11.1-1<br />libuci-lua - 2014-04-11.1-1<br />libusb-1.0 - 1.0.9-1<br />libustream-polarssl - 2014-03-25-fc0b5ec804ee43c532978dd04ab0509c34baefb0<br />libuuid - 2.24.1-1<br />libvorbis - 1.3.4-2<br />libxtables - 1.4.21-1<br />linux-atm - 2.5.2-5<br />ltq-vdsl-app - 4.11.4-1<br />ltq-vdsl-vr9-fw-installer - 1-1<br />lua - 5.1.5-1<br />luci - 0.12+svn-r10530-1<br />luci-app-ddns - 0.12+svn-r10530-1<br />luci-app-diag-core - 0.12+svn-r10530-1<br />luci-app-firewall - 0.12+svn-r10530-1<br />luci-app-minidlna - 0.12+svn-r10530-1<br />luci-app-ntpc - 0.12+svn-r10530-1<br />luci-app-p910nd - 0.12+svn-r10530-1<br />luci-app-qos - 0.12+svn-r10530-1<br />luci-app-samba - 0.12+svn-r10530-1<br />luci-app-statistics - 0.12+svn-r10530-1<br />luci-app-upnp - 0.12+svn-r10530-1<br />luci-app-wol - 0.12+svn-r10530-1<br />luci-base - 0.12+svn-r10530-1<br />luci-i18n-english - 0.12+svn-r10530-1<br />luci-i18n-italian - 0.12+svn-r10530-1<br />luci-lib-nixio - 0.12+svn-r10530-1<br />luci-mod-admin-full - 0.12+svn-r10530-1<br />luci-proto-ppp - 0.12+svn-r10530-1<br />luci-ssl - 0.12+svn-r10530-1<br />luci-theme-bootstrap - 0.12+svn-r10530-1<br />minidlna - 1.1.3-1<br />miniupnpd - 1.8.20140523-4<br />mtd - 20<br />nano - 2.3.6-1<br />netifd - 2014-09-08-46c569989f984226916fec28dd8ef152a664043e<br />ntfs-3g - 2014.2.15-1-fuseint<br />ntfs-3g-low - 2014.2.15-1-fuseint<br />ntpclient - 2007_365-4<br />odhcp6c - 2014-10-25-940e2141ab13727af6323c4d30002f785e466318<br />odhcpd - 2014-09-25-a6e2953843eaf6c93764f9feef10466e7a84ec85<br />opkg - 9c97d5ecd795709c8584e972bfdf3aee3a5b846d-7<br />p910nd - 0.95-3<br />ppp - 2.4.7-2<br />ppp-mod-pppoa - 2.4.7-2<br />ppp-mod-pppoe - 2.4.7-2<br />procd - 2014-09-15-c1a558f7d0c1e6c1ffa5a47d557a7b45205eef1d<br />procd-nand - 2014-09-15-c1a558f7d0c1e6c1ffa5a47d557a7b45205eef1d<br />px5g - 1<br />rrdtool1 - 1.0.50-2<br />samba36-client - 3.6.24-1<br />samba36-server - 3.6.24-1<br />smap - 0.6.0-2<br />swconfig - 10<br />terminfo - 5.9-1<br />transmission-cli - 2.84-1<br />transmission-daemon - 2.84-1<br />transmission-remote - 2.84-1<br />transmission-web - 2.84-1<br />ubi-utils - 1.5.1-2<br />ubox - 2014-09-16-5c45b560bc8c9e13682269ed963a8a4a65959518<br />ubus - 2014-09-17-4c4f35cf2230d70b9ddd87638ca911e8a563f2f3<br />ubusd - 2014-09-17-4c4f35cf2230d70b9ddd87638ca911e8a563f2f3<br />uci - 2014-04-11.1-1<br />uhttpd - 2014-10-27-fd8e5e379c23c5fbcec3e76894b839233df09067<br />uhttpd-mod-ubus - 2014-10-27-fd8e5e379c23c5fbcec3e76894b839233df09067<br />usbutils - 007-1<br />wpad-mini - 2014-06-03.1-1<br />zlib - 1.2.8-1</p></blockquote></div><p>Second qestion is has got a Openwrt bandwidth control software?</p><p>Thanks for answers <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>mirach61</strong> on 11 Dec 2014, 01:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257314">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						11 Dec 2014, 03:46					</div>
				</div>
				<div class="post-content content">
					<p>Do you have a /dev/sdb1 after you plug the drive in?&nbsp; kmod-usb-storage creates the /dev/sdXN without regard to the filesystem type.&nbsp; Then you mount them as a certain type of filesystem.&nbsp; Check dmesg to see this process.&nbsp; If you only have one drive it is likely sda1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257360">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mirach61</div>
					<div class="post-datetime">
						11 Dec 2014, 15:05					</div>
				</div>
				<div class="post-content content">
					<p>Yeah. I have more than one drive. My /dev/sda1 input for exroot drive (EXT 4 formatted) . So my second drive is sdb1 (NTFS partition). I tried many thing but i couldn&#039;t solve this problem. Is there any different ideas?</p>											<p class="post-edited">(Last edited by <strong>mirach61</strong> on 11 Dec 2014, 15:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257369">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						11 Dec 2014, 16:26					</div>
				</div>
				<div class="post-content content">
					<p>The mnt/usb-ntfs directory must already exist.&nbsp; The command you issued also is not exactly what is in the wiki.</p><p>You probably want to <em>remove</em> kmod-fs-ntfs, this is a read-only driver which is being replaced by ntfs-3g.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257459">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mirach61</div>
					<div class="post-datetime">
						12 Dec 2014, 14:17					</div>
				</div>
				<div class="post-content content">
					<p>I tried, i deleted kmod-fs-ntfs and i follow the steps.(1. installed ntfs-3g 2. installed fdisk). Then i paste this code </p><p>#!/bin/sh<br /># Copyright (C) 2011 OpenWrt.org</p><p>blkdev=`dirname $DEVPATH`<br />if [ `basename $blkdev` != &quot;block&quot; ]; then<br />&nbsp; &nbsp; device=`basename $DEVPATH`<br />&nbsp; &nbsp; case &quot;$ACTION&quot; in<br />&nbsp; &nbsp; &nbsp; &nbsp; add)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mkdir -p /mnt/$device<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # vfat &amp; ntfs-3g check<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if [ `which fdisk` ]; then<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isntfs=`fdisk -l | grep $device | grep NTFS`<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isvfat=`fdisk -l | grep $device | grep FAT`<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isfuse=`lsmod | grep fuse`<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isntfs3g=`which ntfs-3g`<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isntfs=&quot;&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isvfat=&quot;&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fi</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # mount with ntfs-3g if possible, else with default mount<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if [ &quot;$isntfs&quot; -a &quot;$isfuse&quot; -a &quot;$isntfs3g&quot; ]; then<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ntfs-3g /dev/$device /mnt/$device<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; elif [ &quot;$isvfat&quot; ]; then<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mount -o iocharset=utf8 /dev/$device /mnt/$device<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mount /dev/$device /mnt/$device<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fi<br />&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />&nbsp; &nbsp; &nbsp; &nbsp; remove)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; umount -l /dev/$device<br />&nbsp; &nbsp; &nbsp; &nbsp; ;;<br />&nbsp; &nbsp; esac<br />fi </p><br /><p>at &quot;/etc/hotplug.d/block/10-mount&quot; file. Then i plug my ntfs hdd and restart my router. But hotplug did&#039;nt work. I mounted my ntfs hdd drive manually but the result is same. </p><p>Mount Points Screenshot:</p><p><span class="postimg"><img src="http://s2.postimg.org/cnl5oirmx/scr.jpg" alt="PunBB bbcode test" /></span></p><p><span class="postimg"><img src="http://s2.postimg.org/v7htl54rt/scr_2.png" alt="PunBB bbcode test" /></span></p><p><span class="postimg"><img src="http://s17.postimg.org/lb79ws9nz/scr3.png" alt="PunBB bbcode test" /></span></p><p>I tried mount by ntfs-3g command but i have take this notice:</p><p><span class="postimg"><img src="http://s30.postimg.org/xkod0k27l/putty.jpg" alt="PunBB bbcode test" /></span></p><br /><p>What can i do?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257473">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						12 Dec 2014, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>install kmod-fuse.</p><p>Also stick to the command line, Luci is likely to mis-handle the userspace mount thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257530">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mirach61</div>
					<div class="post-datetime">
						12 Dec 2014, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>I installed kmod-fuse but result is same. Again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> . Is there different way to mount ntfs partition?</p><p><span class="postimg"><img src="http://s7.postimg.org/4k388atnf/sksksk.jpg" alt="PunBB bbcode test" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257531">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						12 Dec 2014, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Actually, the result is different... now you are back to &quot;invalid argument&quot;</p><p>maybe search for ntfs-3g documentation.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257931">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mirach61</div>
					<div class="post-datetime">
						17 Dec 2014, 05:11					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>Actually, the result is different... now you are back to &quot;invalid argument&quot;</p><p>maybe search for ntfs-3g documentation.</p></blockquote></div><p>This result is the same as in first post. My fist message;</p><p>&quot;Barrier Breaker 14.07 Ntfs Mounting Problem<br />root@OpenWrt:~# ntfs-3g /dev/sdb1 /mnt/usb-ntfs<br />ntfs-3g-mount: mount failed: Invalid argument</p><p>I have Openwrt&#039;s Barrier Breaker 14.07 version. I installed it on TD-W8970 router.<br />First question;<br />I can&#039;t found NTFS partition. I read tih article Writable NTFS (<a href="http://wiki.openwrt.org/doc/howto/writable_ntfs">http://wiki.openwrt.org/doc/howto/writable_ntfs</a>)<br />I have followed all the instructions. But it doesn&#039;t work. !<br />What is the solution?&quot;</p><br /><p>I&#039;m dealing with this problem for two weeks, I read a lot of article for nts monting but i didn&#039;t find any solution. Is there someone who knows how to solve this problem at Openwrt 14.07 ?</p>											<p class="post-edited">(Last edited by <strong>mirach61</strong> on 17 Dec 2014, 05:15)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>