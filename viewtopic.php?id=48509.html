<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Can&#039;t reach local web server behind TL-MR3020 from local network</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p223082">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						18 Jan 2014, 18:32					</div>
				</div>
				<div class="post-content content">
					<p>Hello!</p><p>I am kindly asking your help to find what&#039;s wrong in settings of my TP-Link TL-MR3020 with OpenWrt (Attitude Adjustment 12.09-rc1 | Load: 0.08 0.10 0.05) on board. The problem is that I can&#039;t reach web server set up behind MR3020 and connected to &#039;eth0&#039; of the router from local network. Server IP is 192.168.0.101:80 (it&#039;s small device with ethernet port and digital I/O pins for telemetry. Device is carrying web server).</p><p>Network topology looks as follows:</p><p>ISP Internet Provider&lt;--&gt;[Cable]:Router:[WiFi_192.168.1.1]&lt;--&gt;[WiFi_192.168.1.123]:MR3020:[Cable_192.168.0.1]&lt;--&gt;[Cable_192.168.0.101]:Device with web server</p><p>MR3020 is connected to local wifi network as a client.</p><p>The goal is to reach from any machine in network 192.168.1.XXX the web server 192.168.0.101:80</p><br /><p>Ping of 192.168.0.101 from 192.168.1.XXX is working, but when I type in browser 192.168.0.101, i see that request to server is out, but i got no answer from server. </p><p>Opera browser answer:&quot;No data received. Unable to load the webpage because the server sent no data.&quot;</p><p>Device can do telnet too on port 2424, but when I try to connect, I see that connection is established but nothing happens, just black screen. After pressing several times &lt;enter&gt; telnet falls back to a command prompt. </p><p>When I directly connect pc to device via ethernet cable web page opens okay, telnet is working either.</p><p>I tested another web server on a pc connected the same way via cable to MR3020. Result is the same - can&#039;t open web page from 192.168.1.XXX network</p><p>At the same time internet and other services are passing MR3020 well. Tested pc with the same ip gets windows updates, brosing internet, Teamviewer is also working. Ping from 192.168.0.1 is working to 192.168.1.1 only.</p><p>Disabling of firewall has no result.<br />Relayd package is installed and running.</p><p>Can you give me a&nbsp; tip to help in the network configuration?</p>											<p class="post-edited">(Last edited by <strong>_Mickey_</strong> on 18 Jan 2014, 18:46)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223112">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						18 Jan 2014, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>The purpose of relayd package is to bridge 2 networks via wifi, when wds is not working. (Btw. have you tried wds?) I think you don&#039;t need to have telemetry in network 192.168.0.x at all, if you do relayd properly, it will be fully transparent and you will see your telemetry device as if it was connected by cable.</p><p>Where I was unable to use eds bridge, which is the easiest way, I have managed this task by wiki: <a href="http://wiki.openwrt.org/doc/recipes/relayclient">http://wiki.openwrt.org/doc/recipes/relayclient</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223160">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						19 Jan 2014, 14:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nozombian wrote:</cite><blockquote><p>The purpose of relayd package is to bridge 2 networks via wifi, when wds is not working. (Btw. have you tried wds?) I think you don&#039;t need to have telemetry in network 192.168.0.x at all, if you do relayd properly, it will be fully transparent and you will see your telemetry device as if it was connected by cable.</p><p>Where I was unable to use eds bridge, which is the easiest way, I have managed this task by wiki: <a href="http://wiki.openwrt.org/doc/recipes/relayclient">http://wiki.openwrt.org/doc/recipes/relayclient</a></p></blockquote></div><p>I didn&#039;t try WDS yet. </p><p>Thank you for the link, I am aware of it, but my settings are a bit different to ones in wiki, and is not working for me. Probably I have to repeat configuration one to one.</p><p>I`ll post my results when finish.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223168">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						19 Jan 2014, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d prefer cable over wireless whenever it&#039;s possible.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223201">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nozombian</div>
					<div class="post-datetime">
						19 Jan 2014, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>Nothing can&#039;t replace the cable, but wireless solution is usually the easiest and sometimes the only possible. Have you ever tried to convince your boss to dig up 100m of fine asphalt to connect the store house and main building, when there leads only old electric cable? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223202">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						19 Jan 2014, 21:37					</div>
				</div>
				<div class="post-content content">
					<p>It seems I&#039;ve bricked my TL-MR3020 trying to arrange WDS. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> I can&#039;t reach it neither from Wifi nor lan, but Failsafe mode rulezzz.... Making Guru meditation what went wrong...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223721">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						25 Jan 2014, 17:29					</div>
				</div>
				<div class="post-content content">
					<p>Okay, after some silence I am back with some comments.</p><p>I tried to apply configuration mentioned as BRIDGED REPEATER in <a href="https://forum.openwrt.org/viewtopic.php?id=39077">https://forum.openwrt.org/viewtopic.php?id=39077</a><br />And it is not working for me. By some reason I can`t reach MR3020 neither from lan port nor via wireless. After failsafe mode I return my MR3020 back to life.</p><p>@nozombian: <br />I try to make WDS, but not really succesfull. With mentioned below configuration in LUCi I can see that MR3020 is connected to my wireless network. At the same time main router do not report on connection of a client with MR3020 MAC address. Therefore I consider MR3020 is connected as a bridge.&nbsp; I also can reach LUCi configuration&nbsp; page by connecting pc to lan port of MR3020. But I can`t reach it via wireless... is it normal for WDS mode? Finall I still can`t reach from the main network device with IP 192.168.1.101 connected at the lan port of MR3020. And I do not know what is wrong? Shall I set up somehow LAN-Routing at the main router as well?</p><p>Current (incorrect) configuration of MR3020:</p><p>------------------etc/config/wireless--------------------------</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option channel &#039;1&#039;<br />&nbsp; &nbsp; option macaddr &#039;64:66:b3:78:ef:1c&#039;<br />&nbsp; &nbsp; option phy &#039;phy0&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-20&#039;<br />&nbsp; &nbsp; list ht_capab &#039;SHORT-GI-40&#039;<br />&nbsp; &nbsp; list ht_capab &#039;RX-STBC1&#039;<br />&nbsp; &nbsp; list ht_capab &#039;DSSS_CCK-40&#039;<br />&nbsp; &nbsp; option country &#039;RU&#039;<br />&nbsp; &nbsp; option distance &#039;20&#039;<br />&nbsp; &nbsp; option disabled &#039;0&#039;<br />&nbsp; &nbsp; option txpower &#039;10&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option ssid &#039;MYHOME_WiFi&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option mode &#039;sta&#039;<br />&nbsp; &nbsp; option bssid &#039;BC:AE:C5:EB:97:7F&#039;<br />&nbsp; &nbsp; option key &#039;XXXXXXXXXXX&#039;<br />&nbsp; &nbsp; option wds &#039;1&#039;<br />&nbsp; &nbsp; option network &#039;wwan&#039;</p><p>--------------------------------------------------------------------</p><p>------------------etc/config/network--------------------------</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.123&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option dns &#039;8.8.8.8&#039;</p><p>config interface &#039;stabridge&#039;<br />&nbsp; &nbsp; option proto &#039;relay&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.123&#039;</p><p>config interface &#039;wwan&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;wlan0&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.123&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.1.1&#039;<br />--------------------------------------------------------------------</p><p>firewall is stopped and disabled.</p><p>What is wrong?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223824">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						26 Jan 2014, 21:48					</div>
				</div>
				<div class="post-content content">
					<p>if I follow it right Atheros chipset (in MR3020) can&#039;t do bridging in a conventional way as Broadcom chipset do it.<br />no trying to set up like here: <a href="http://wiki.openwrt.org/doc/recipes/atheroswds">http://wiki.openwrt.org/doc/recipes/atheroswds</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224360">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">_Mickey_</div>
					<div class="post-datetime">
						2 Feb 2014, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!</p><p>Finally I did it!!! If anyone is interested I can make short description of my steps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p321873">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">zuyang</div>
					<div class="post-datetime">
						29 Apr 2016, 22:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>_Mickey_ wrote:</cite><blockquote><p>Hi all!</p><p>Finally I did it!!! If anyone is interested I can make short description of my steps.</p></blockquote></div><br /><p>I am interested, please tell me how</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>