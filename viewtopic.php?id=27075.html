<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> how to change the USB Serial port baud rate by using getty?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p119636">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kwongwo</div>
					<div class="post-datetime">
						24 Oct 2010, 18:53					</div>
				</div>
				<div class="post-content content">
					<p>Dear friends,<br />&nbsp; could you please advice how to change the USB Serial port [ttyUSB0] baud rate by using getty or other programs.</p><p>root@OpenWrt:/dev# ls /dev/tty*<br />/dev/tty&nbsp; &nbsp; &nbsp; /dev/ttyS0&nbsp; &nbsp; /dev/ttyUSB0</p><p>[i try the following command,but fail,]</p><p>root@OpenWrt:/dev# getty 19200 ttyUSB0</p><br /><p>Many thx.<br />---------<br />man getty</p><p>root@OpenWrt:/dev# getty<br />BusyBox v1.15.3 (2010-09-06 10:00:12 CST) multi-call binary</p><p>Usage: getty [OPTIONS] BAUD_RATE TTY [TERMTYPE]</p><p>Open a tty, prompt for a login name, then invoke /bin/login</p><p>Options:<br />&nbsp; &nbsp; &nbsp; &nbsp; -h&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Enable hardware (RTS/CTS) flow control<br />&nbsp; &nbsp; &nbsp; &nbsp; -i&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Do not display /etc/issue before running login<br />&nbsp; &nbsp; &nbsp; &nbsp; -L&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Local line, do not do carrier detect<br />&nbsp; &nbsp; &nbsp; &nbsp; -m&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Get baud rate from modem&#039;s CONNECT status message<br />&nbsp; &nbsp; &nbsp; &nbsp; -w&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Wait for a CR or LF before sending /etc/issue<br />&nbsp; &nbsp; &nbsp; &nbsp; -n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Do not prompt the user for a login name<br />&nbsp; &nbsp; &nbsp; &nbsp; -f issue_file&nbsp; &nbsp;Display issue_file instead of /etc/issue<br />&nbsp; &nbsp; &nbsp; &nbsp; -l login_app&nbsp; &nbsp; Invoke login_app instead of /bin/login<br />&nbsp; &nbsp; &nbsp; &nbsp; -t timeout&nbsp; &nbsp; &nbsp; Terminate after timeout if no username is read<br />&nbsp; &nbsp; &nbsp; &nbsp; -I initstring&nbsp; &nbsp;Init string to send before anything else<br />&nbsp; &nbsp; &nbsp; &nbsp; -H login_host&nbsp; &nbsp;Log login_host into the utmp file as the hostname</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119642">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">b0nafide</div>
					<div class="post-datetime">
						24 Oct 2010, 21:03					</div>
				</div>
				<div class="post-content content">
					<p>Try setserial or stty instead.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119643">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						24 Oct 2010, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>Install and use the <em>setserial</em> package.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119651">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						24 Oct 2010, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>If you build your own, you can enable stty in busybox.&nbsp; Or you can download coreutils-stty and use something like </p><p>stty -F /dev/ttyUSB0 9600 clocal cread cs8 -cstopb -parenb</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p119717">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kwongwo</div>
					<div class="post-datetime">
						25 Oct 2010, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>Dear all ,thanks for you kind help,<br />i will check it out later.</p><p>have a nice day:)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131007">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kukodajanos</div>
					<div class="post-datetime">
						18 Mar 2011, 01:45					</div>
				</div>
				<div class="post-content content">
					<p>Hey!</p><p>Could you give me some advise? I would use an sensor via an USB I2C (ftdi) converter. I add the module (kmod-usb-serial-ftdi), and sensor is recognized by the kernel. But i don&#039;t know, how i can write and after it read one of the specific registers on the sensor. I think I should start an terminal, or write directly to /dev/ttyUSB0, but first I have to set the parameters for the serial communication (baud rate, stop bit, etc.), isn&#039;t it?</p><p>Here is the dmesg:</p><p>ftdi_sio 1-2:1.0: FTDI USB Serial Device converter detected<br />ftdi_sio: Detected FT232RL<br />usb 1-2: FTDI USB Serial Device converter now attached to ttyUSB0<br />usb 1-1: reset full speed USB device using adm5120-hcd and address 2</p><p>Thanks, JÃ¡nos</p>											<p class="post-edited">(Last edited by <strong>kukodajanos</strong> on 18 Mar 2011, 01:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131009">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						18 Mar 2011, 02:39					</div>
				</div>
				<div class="post-content content">
					<p>See post 4 to set parameters.</p><p>For a terminal:</p><p>picocom -b 2400 -f n -p n -d 8 -r /dev/ttyUSB0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131096">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kukodajanos</div>
					<div class="post-datetime">
						19 Mar 2011, 09:59					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, it is working mostly. I can start and stop the controller, I can change the leds on it, but I cant see the command in the terminal what I put in, and it overwrites every of the returned value, what i get back. I think, I should specify some &quot;echo&quot; like property by stty or picocom, but I cant figure it out how. Do you have any ideas?</p>											<p class="post-edited">(Last edited by <strong>kukodajanos</strong> on 19 Mar 2011, 09:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p131116">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">lizby</div>
					<div class="post-datetime">
						19 Mar 2011, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>picocom apparently doesn&#039;t support local echo.&nbsp; microcom is said to (but with no way given to turn it off if you want to).</p><p>microcom -D/dev/ttyUSB0</p><p>As for the overwriting, your controller is probably sending a &quot;carriage return&quot;, &quot;CR&quot;, hex 13, which returns the cursor to the beginning of the current line.&nbsp; You need it to also send a &quot;line feed&quot;, LF, hex 10, which moves the cursor to the next line.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174463">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">valentt</div>
					<div class="post-datetime">
						9 Aug 2012, 16:34					</div>
				</div>
				<div class="post-content content">
					<p>I just wrote an fresh WIKI page, please help out and make it better, proof read it, add you own info, clean it up:<br /><a href="http://wiki.openwrt.org/doc/recipes/serialbaudratespeed">http://wiki.openwrt.org/doc/recipes/serialbaudratespeed</a></p><p>Cheers,<br />Valent.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>