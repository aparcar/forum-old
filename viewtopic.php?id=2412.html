<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Port based VLANs on DG834?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p11256">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">evanspa1</div>
					<div class="post-datetime">
						24 Aug 2005, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>Has anybody managed to get port based VLANs working on the DG834 or DG834GT?</p><p>Thanks, Paul.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p11443">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Per Hansson</div>
					<div class="post-datetime">
						28 Aug 2005, 17:24					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d really like to know this to, reason being I want to create a &quot;WAN&quot; port on a DG834GT since they do not work with Ericssons DSLAM equipment... (on the ADSL line that is ;-))</p><p>The switch chip is a regular BCM5325 just like some of the newer models of the WRT&#039;s use...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13232">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">picassoin</div>
					<div class="post-datetime">
						4 Oct 2005, 18:29					</div>
				</div>
				<div class="post-content content">
					<p>I am also intrested for port based VLAN if any one can suggest how to do it, I am sitting with one DG834G to try something new.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18280">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">yellownotblack</div>
					<div class="post-datetime">
						4 Jan 2006, 08:28					</div>
				</div>
				<div class="post-content content">
					<p>Vlan for the marvell 88E6060/3-RCJ 5+1 Port 10/100 MAC/PHY Switch seems to be in the GPL source code of the LINKSYS WAG54G V2 AU&nbsp; and AZTECH/NETCOMM DSL600EW/NB5PLUS4W.</p><p>The kernel code is located in directory /src/kernel/linux-2.4.17_mvl21/drivers/char/extSwitch</p><p>The user land code is only present in the AZTECH/NETCOMM gpl code directory /src/extswitch.</p><p>Config.xml 66.2.2.003 for the aztech contains this </p><p>&lt;ifaces&gt;<br />&nbsp; &lt;usb&gt;USB&lt;/usb&gt; <br />&nbsp; &lt;eth0.1&gt;VLAN1&lt;/eth0.1&gt; <br />&nbsp; &lt;eth0.2&gt;VLAN2&lt;/eth0.2&gt; <br />&nbsp; &lt;eth0.3&gt;VLAN3&lt;/eth0.3&gt; <br />&nbsp; &lt;eth0.4&gt;VLAN4&lt;/eth0.4&gt; <br />&nbsp; &lt;ap&gt;WLAN&lt;/ap&gt; <br />&nbsp; &lt;/ifaces&gt;</p><p>The vlan is present in my webinterface, but does not work. <br />Looking at it closely reveals that the kernel switch code is compiled in the aztech firmware, (/proc/Switch) but the userland tool extswitch NOT. The weblog gives an error regarding this tool.</p><p>Vlan is also present in the QoS page of my webinterface. I can limit the bandwidth given to each physical port. In the switch webinterface I can enable /disable physical ports or change their ethernet speed like 10/100baseT/half-full duplex.</p><br /><p>I tried to compile the userland tool extswitch, but get a path error. This is a script error as the libs are present in the kernel code.&nbsp; Till now I have not worked it out.</p><p>Maybe somebody want to try this code ?</p><p>Netcomm sources Netcomm_GPL.tgz is located at</p><p><a href="ftp://202.44.167.165">ftp://202.44.167.165</a><br />user: source<br />pass: s0urc3</p><p>Size is 65 MB.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p18568">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">noodles</div>
					<div class="post-datetime">
						9 Jan 2006, 14:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>yellownotblack wrote:</cite><blockquote><p>Vlan for the marvell 88E6060/3-RCJ 5+1 Port 10/100 MAC/PHY Switch seems to be in the GPL source code of the LINKSYS WAG54G V2 AU&nbsp; and AZTECH/NETCOMM DSL600EW/NB5PLUS4W.</p><p>The kernel code is located in directory /src/kernel/linux-2.4.17_mvl21/drivers/char/extSwitch</p><p>The user land code is only present in the AZTECH/NETCOMM gpl code directory /src/extswitch.</p></blockquote></div><p>The userland code in /src/extswitch is for the 80E6063, which is a managed switch that supports 802.1q VLANs properly. All the documentation I can find on the 88E6060 implies it can only do port based VLANs, which would make it unlikely that a DMZ or WAN port could be created.</p><p>My DG834G definitely contains a 6060 rather than a 6063. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21430">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">yellownotblack</div>
					<div class="post-datetime">
						23 Feb 2006, 17:08					</div>
				</div>
				<div class="post-content content">
					<p>on thise page <a href="http://malphx.free.fr/dotclear/index.php/Conception-firmware-dg834g">http://malphx.free.fr/dotclear/index.ph … are-dg834g</a>, you can find a port based vlan tool for the dg834g.</p><p>in french...press on switchctl v0.1 to download the kernel patch and tool.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21462">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">evanspa1</div>
					<div class="post-datetime">
						24 Feb 2006, 02:56					</div>
				</div>
				<div class="post-content content">
					<p>Excellent, thanks for this!</p><p>I&#039;ve patched the kernel, hit make, built the switchctl tool, put it in /usr/sbin and re-built the firmware image. When I try and run switchctl it says everything is OK, however the port based VLANs don&#039;t seem to be working.</p><p>I suspect that the rebuilt kernel isn&#039;t being added back to the firmware image. As far as I can tell build.sh simply incorporates the target directory into the firmware image, but there&#039;s no obvious way to replace the kernel part in the image. Any ideas?</p><p>Cheers,</p><br /><p>Paul.</p>											<p class="post-edited">(Last edited by <strong>evanspa1</strong> on 24 Feb 2006, 04:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21526">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">evanspa1</div>
					<div class="post-datetime">
						24 Feb 2006, 23:36					</div>
				</div>
				<div class="post-content content">
					<p>Update:</p><p>There is a tool called dgfirmware that allows you to replace the kernel in a firmware image. You can find it at:</p><p><a href="http://malphx.free.fr/DG834G/blog/files/dgfirmware.c">http://malphx.free.fr/DG834G/blog/files/dgfirmware.c</a></p><p>Unfortunately the newly compiled kernel doesn&#039;t work - after the new image has been uploaded the modem enters recovery mode.&nbsp; I&#039;ve read somewhere that the standard WRT54G toolchain isn&#039;t appropriate for compiling the kernel and that the montavista gcc compiler is required. Has anybody managed to find an alternative way of compiling the kernel?</p><p>Cheers,</p><br /><p>Paul.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p21533">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">yellownotblack</div>
					<div class="post-datetime">
						25 Feb 2006, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>As far as I remember the montavitsa compiler and tools are inside the linksys ag241 source package.</p><p>I use it too to compile some stuff for my aztech and is works...</p><p><a href="http://www.agnescreations.co.uk/linux/dlink-dsl/Development.htm">http://www.agnescreations.co.uk/linux/d … opment.htm</a></p><p>look at 2.2. and 2.3</p><p>(download does not work, but you can directly download from <a href="ftp://ftp.linksys.com">ftp.linksys.com</a>)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>