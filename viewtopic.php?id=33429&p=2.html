<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link TL-MR3020 Support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 16 Jun 2013 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p153369">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						6 Jan 2012, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>Good news.</p><p>My patch was accepted and support for the TL-MR3020 has been added to the SVN repository.</p><p>See here: <a href="https://dev.openwrt.org/changeset/29651">https://dev.openwrt.org/changeset/29651</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153495">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						7 Jan 2012, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi all!</p><p>I have used the official snapshot (squashfs, factory) for the MR3020 to test it on my device. <br />So far everything seems to work fine.</p><p>But the directory /etc/uci-defaults is empty. So the default setup of the LEDs is not set.<br />Does anybody know why this dir is empty?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153497">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						7 Jan 2012, 15:47					</div>
				</div>
				<div class="post-content content">
					<p>Because all scripts in there are getting deleted after they ran.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153499">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						7 Jan 2012, 15:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Because all scripts in there are getting deleted after they ran.</p></blockquote></div><p>ok. I did not know that. But they have not done their job.</p><p>For example the &quot;leds&quot; script is supposed to setup two leds for the MR3020:<br />tl-mr3020)<br />&nbsp; &nbsp; &nbsp; &nbsp; set_led_usbdev &quot;usb&quot; &quot;USB&quot; &quot;tp-link:green:3g&quot; &quot;1-1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; set_led_wlan &quot;wlan&quot; &quot;WLAN&quot; &quot;tp-link:green:wlan&quot; &quot;phy0tpt&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; ;;</p><p>I do not see any &quot;led&quot; entries in /etc/config/system.</p><p>So something went wrong obviously.</p><p>Any idea?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153500">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						7 Jan 2012, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>No. Simply run the script manually and see if it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153502">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">Nilfred</div>
					<div class="post-datetime">
						7 Jan 2012, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>Look at /rom/etc/uci-defaults for the &quot;deleted&quot; scripts.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p153505">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						7 Jan 2012, 16:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nilfred wrote:</cite><blockquote><p>Look at /rom/etc/uci-defaults for the &quot;deleted&quot; scripts.</p></blockquote></div><p>Thanks. Meanwhile I have found them. ;-)</p><p>I found a bug in my patch. The board type detected is &quot;unknown&quot; instead of &quot;tl-mr3020&quot;. That&#039;s why the script did not work.</p><p>I am currently preparing a new patch. Before sending it the ML I have to test it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154203">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						14 Jan 2012, 23:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />I think I bricked my TP-LINK TL-MR3020 v1.4...I tried to put openwrt (<a href="https://dev.openwrt.org/changeset/29651">https://dev.openwrt.org/changeset/29651</a>) by TP-LINK GUI...&nbsp; When the router restart only the first led (power led) is on..<br />If I try to go on the web page of the router (192.168.1.1) return that &quot;This web page is not available&quot;. By ssh command (i used putty), the client connects but I can not login to router (incorrect username and password, which I never set)..</p><p>What can i do?</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>Fado84</strong> on 14 Jan 2012, 23:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154211">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						15 Jan 2012, 00:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fado84 wrote:</cite><blockquote><p>Hi,<br />I think I bricked my TP-LINK TL-MR3020 v1.4...I tried to put openwrt (<a href="https://dev.openwrt.org/changeset/29651">https://dev.openwrt.org/changeset/29651</a>) by TP-LINK GUI...&nbsp; When the router restart only the first led (power led) is on..<br />If I try to go on the web page of the router (192.168.1.1) return that &quot;This web page is not available&quot;. By ssh command (i used putty), the client connects but I can not login to router (incorrect username and password, which I never set)..</p><p>What can i do?</p><p>Thanks!</p></blockquote></div><p>I see two possibilities only:<br />1) Connect to the serial console to see if the bootloader is still ok. If it is still working, flash a new firmware using TFTP.<br />2) If the bootloader is broken, you will have to desolder the SPI flash chip and reprogram it with a backup copy from another user that owns a V1.4.<br />&nbsp; &nbsp; There is a guide in the wiki somewhere which describes how to recover the bootloader in case it is broken.</p><p>Since you have flashed using the WebGUI, I think the chances are good that the bootloader is still ok.</p><p>The power LED is connected to power supply directly. So it will light up as soon as you apply power to the device.</p><p>What about the other LEDs? Do they flicker shortly after you have applied power or are they completely dark all the time?<br />From what I have seen from the bootloader source code, the LEDs should flicker shortly while the bootloader is initialising.</p>											<p class="post-edited">(Last edited by <strong>cille75</strong> on 15 Jan 2012, 00:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154217">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						15 Jan 2012, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Thanks a lot for your quick response cille75.</p><p>When I turn on the router all the LEDs light up and after about a second only the power LED is on.. like you&#039;ve described.</p><p>Is there a simple, step-by-step guide to step 1? I&#039;m a newbie...<br />Can I go directly to flash a new firmware using TFTP safely? </p><p>Thanks a lot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154251">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						15 Jan 2012, 10:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fado84 wrote:</cite><blockquote><p>Thanks a lot for your quick response cille75.</p><p>When I turn on the router all the LEDs light up and after about a second only the power LED is on.. like you&#039;ve described.</p><p>Is there a simple, step-by-step guide to step 1? I&#039;m a newbie...<br />Can I go directly to flash a new firmware using TFTP safely? </p><p>Thanks a lot.</p></blockquote></div><p>Please have a look into the wiki:<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-mr3020">http://wiki.openwrt.org/toh/tp-link/tl-mr3020</a></p><p>You should get the serial console working. After that you should try to print the environment of the bootloader to see if the flash laylout differs somehow. </p><p>Mine (V1.0) looks like this:<br /></p><div class="codebox"><pre><code>hornet&gt; printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-env),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)
bootcmd=bootm 0x9f020000
bootdelay=1
baudrate=115200
ethaddr=0xba:0xbe:0xfa:0xce:0x07:0x41
ipaddr=192.168.1.111
serverip=192.168.1.100
stdin=serial
stdout=serial
stderr=serial
ethact=eth0

Environment size: 362/65532 bytes
hornet&gt;</code></pre></div><p>The interesting part is this: <br /></p><div class="codebox"><pre><code>mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-env),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)</code></pre></div><p>If these numbers are equal, you could probably try the TFTP manual method from the wiki. </p><p>But first try to get the serial console working. Please post here the text output if you got it working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154321">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">patr-x</div>
					<div class="post-datetime">
						16 Jan 2012, 00:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m pretty new to OpenWrt and wanted to install it on my brand new TP-Link TL-MR3020 to use it as a music streaming client. Installing OpenWrt via the WebInterface worked fine. No problems connecting over ssh and so i changed the IP and installend luci. When I wanted to continue today i couldn&#039;t acces it neither over luci nor over ssh&nbsp; anymore, I get &quot;Operation timed out&quot;. I also tried to get all IPs of the network, as I thought i have maybe the wrong IP but the ping gave me only my computer (when connected directly over ethernet) or my laptop and the main router (when connected to the main router via ethernet). I also tried to acces the default 192.168.1.1 and put the binary via tftp, didn&#039;t work either. For manual flashing as described in the wiki I would also need the IP.<br />Would be awesome if someone knew what to do <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thanks for your help </p><p>patr-x</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154358">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						16 Jan 2012, 10:47					</div>
				</div>
				<div class="post-content content">
					<p>@cille75: maybe tomorrow will came the cable CA-42, do the test and after I will post the results.</p><p>@patr-x: What about the LEDs? Maybe you have the same problem but I can read the IP&nbsp; by ifconfig (linux) o ipconfig(win). Try to see if the bootloader is still ok.. Like I will do.. <br />I&#039;m a newbie like you..</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154362">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						16 Jan 2012, 11:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>patr-x wrote:</cite><blockquote><p>Hi,</p><p>I&#039;m pretty new to OpenWrt and wanted to install it on my brand new TP-Link TL-MR3020 to use it as a music streaming client. Installing OpenWrt via the WebInterface worked fine. No problems connecting over ssh and so i changed the IP and installend luci. When I wanted to continue today i couldn&#039;t acces it neither over luci nor over ssh&nbsp; anymore, I get &quot;Operation timed out&quot;. I also tried to get all IPs of the network, as I thought i have maybe the wrong IP but the ping gave me only my computer (when connected directly over ethernet) or my laptop and the main router (when connected to the main router via ethernet). I also tried to acces the default 192.168.1.1 and put the binary via tftp, didn&#039;t work either. For manual flashing as described in the wiki I would also need the IP.<br />Would be awesome if someone knew what to do <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Thanks for your help </p><p>patr-x</p></blockquote></div><p>I think that you have a misunderstanding of how the manual method via TFTP works.<br />You definitely need a serial console like Fade84. So you have to open the case (voids your warranty) and attach a serial adapter cable as described in the wiki to the PCB. <br />After you have got the serial console working, you can access the bootloader and thus the TFTP client of the bootloader. You must setup a TFTP server yourself on your PC which provides the image you want to flash over the network.<br />You also setup the IP address manually then as described in the wiki.</p><p>This is basic stuff. Please read the wiki about TFTP/bootloaders and search the web.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154427">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">mrzaphodb</div>
					<div class="post-datetime">
						16 Jan 2012, 22:52					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Has their been a fix for the MR3020 led behavior? </p><p>Apologies if that one got past me.</p><p>Cheers.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154482">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						17 Jan 2012, 13:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mrzaphodb wrote:</cite><blockquote><p>Hi,</p><p>Has their been a fix for the MR3020 led behavior? </p><p>Apologies if that one got past me.</p><p>Cheers.</p></blockquote></div><p>Hi!</p><p>Not yet. I have already fixed it in my sources, but I did not have the time to prepare the patch and send it to the dev mailing list.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154497">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						17 Jan 2012, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />this is the output of serial console:</p><p><strong>Boot log</strong> <br /></p><div class="codebox"><pre><code>U-Boot 1.1.4 (Oct 21 2011 - 16:26:38)

AP121-2MB (ar9330) U-boot

DRAM:  32 MB
led turning on for 1s...
id read 0x100000ff
flash size 4194304, sector count = 64
Flash:  4 MB
Using default environment

In:    serial
Out:   serial
Err:   serial
Net:   ag7240_enet_initialize...
No valid address in Flash. Using fixed address
No valid address in Flash. Using fixed address
: cfg1 0x5 cfg2 0x7114
eth0: 00:03:7f:09:0b:ad
ag7240_phy_setup 
eth0 up
: cfg1 0xf cfg2 0x7214
eth1: 00:03:7f:09:0b:ad
athrs26_reg_init_lan
ATHRS26: resetting s26
ATHRS26: s26 reset done
ag7240_phy_setup 
eth1 up
eth0, eth1
Autobooting in 1 seconds
## Booting image at 9f020000 ...
   Uncompressing Kernel Image ... OK

Starting kernel ...

[    0.000000] Linux version 2.6.39.4 (openwrt@OpenWRTBuild) (gcc version 4.5.4 20110808 (prerelease) (Linaro GCC 4.5-2011.08) ) #1 Mon Jan 9 08:21:43 MST 2012
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR9330 rev 1
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-MR3020 console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29224k/32768k available (2119k kernel code, 3544k reserved, 413k data, 192k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:80
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is TP-LINK TL-MR3020 v1
[    0.340000] bio: create slab &lt;bio-0&gt; at 0
[    0.350000] Switching to clocksource MIPS
[    0.350000] NET: Registered protocol family 2
[    0.360000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.360000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.360000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.370000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.380000] TCP reno registered
[    0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.380000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.390000] NET: Registered protocol family 1
[    0.410000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.420000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.430000] msgmni has been set to 57
[    0.430000] io scheduler noop registered
[    0.430000] io scheduler deadline registered (default)
[    0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.440000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART
[    0.450000] console [ttyATH0] enabled, bootconsole disabled
[    0.450000] console [ttyATH0] enabled, bootconsole disabled
[    0.460000] Atheros AR71xx SPI Controller driver version 0.2.4
[    0.470000] m25p80 spi0.0: found s25sl032a, expected m25p80
[    0.470000] m25p80 spi0.0: s25sl032a (4096 Kbytes)
[    0.480000] 5 tp-link partitions found on MTD device spi0.0
[    0.480000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.490000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.490000] 0x000000020000-0x0000000fee70 : &quot;kernel&quot;
[    0.500000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.510000] 0x0000000fee70-0x0000003f0000 : &quot;rootfs&quot;
[    0.520000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.530000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.530000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=270000, len=180000 
[    0.540000] 0x000000270000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.550000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.550000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    0.900000] ag71xx_mdio: probed
[    0.900000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    1.510000] Atheros AR71xx hardware watchdog driver version 0.1.0
[    1.510000] TCP westwood registered
[    1.510000] NET: Registered protocol family 17
[    1.520000] Bridge firewalling registered
[    1.520000] 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
[    1.530000] All bugs added by David S. Miller &lt;davem@redhat.com&gt;
[    1.550000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.550000] Freeing unused kernel memory: 192k freed
[    3.880000] input: gpio-keys-polled as /devices/platform/gpio-keys-polled/input/input0
[    4.060000] Button Hotplug driver version 0.4.1
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[    7.450000] JFFS2 notice: (417) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 8 of xref (0 dead, 2 orphan) found.
switching to jffs2
- init -

Please press Enter to activate this console. [    8.510000] Compat-wireless backport release: compat-wireless-2011-11-29
[    8.510000] Backport based on wireless-testing.git master-2011-12-01
[    8.650000] cfg80211: Calling CRDA to update world regulatory domain
[    9.370000] usbcore: registered new interface driver usbfs
[    9.380000] usbcore: registered new interface driver hub
[    9.420000] cfg80211: World regulatory domain updated:
[    9.420000] cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    9.430000] cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.440000] cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    9.440000] cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    9.450000] cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.460000] cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.470000] usbcore: registered new device driver usb
[   10.550000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2
[   10.560000] cfg80211: Calling CRDA for country: US
[   10.670000] PPP generic driver version 2.4.2
[   10.680000] cfg80211: Regulatory domain changed to country: US
[   10.690000] cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   10.690000] cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[   10.700000] cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[   10.710000] cfg80211:     (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.720000] cfg80211:     (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.720000] cfg80211:     (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   10.730000] cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[   11.060000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.220000] NET: Registered protocol family 24
[   11.410000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   11.420000] ar71xx-ehci ar71xx-ehci: Atheros AR91xx built-in EHCI controller
[   11.420000] ar71xx-ehci ar71xx-ehci: new USB bus registered, assigned bus number 1
[   11.460000] ar71xx-ehci ar71xx-ehci: irq 3, io mem 0x1b000000
[   11.480000] ar71xx-ehci ar71xx-ehci: USB 2.0 started, EHCI 1.00
[   11.480000] hub 1-0:1.0: USB hub found
[   11.480000] hub 1-0:1.0: 1 port detected
[   11.590000] nf_conntrack version 0.5.0 (459 buckets, 1836 max)
[   11.970000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   13.180000] device eth0 entered promiscuous mode



BusyBox v1.19.3 (2012-01-08 21:07:48 MST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 ATTITUDE ADJUSTMENT (bleeding edge, r29697) ----------
  * 1/4 oz Vodka      Pour all ingredients into mixing
  * 1/4 oz Gin        tin with ice, strain into glass.
  * 1/4 oz Amaretto
  * 1/4 oz Triple sec
  * 1/4 oz Peach schnapps
  * 1/4 oz Sour mix
  * 1 splash Cranberry juice
 -----------------------------------------------------
root@OpenWrt:/#</code></pre></div><p><strong>printenv</strong> <br /></p><div class="codebox"><pre><code>hornet&gt; printenv
bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-env),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)
bootcmd=bootm 0x9f020000
bootdelay=1
baudrate=115200
ethaddr=0xba:0xbe:0xfa:0xce:0x07:0x41
ipaddr=192.168.1.111
serverip=192.168.1.100
stdin=serial
stdout=serial
stderr=serial
ethact=eth0

Environment size: 362/65532 bytes
hornet&gt;</code></pre></div><p><span style="color: #FF0000">bootargs=console=ttyS0,115200 root=31:02 rootfstype=squashfs init=/sbin/init mtdparts=ar7240-nor0:256k(u-boot),64k(u-boot-nv),2752k(rootfs),896k(uImage),64k(NVRAM),64k(ART)</span> </p><p>is equal!</p><p>Now can I try to flash a new firmware using TFTP??</p><p>Thanks a lot!</p>											<p class="post-edited">(Last edited by <strong>Fado84</strong> on 17 Jan 2012, 16:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154502">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						17 Jan 2012, 17:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Fado84 wrote:</cite><blockquote><p>Now can I try to flash a new firmware using TFTP??</p><p>Thanks a lot!</p></blockquote></div><p>Hi!</p><p>That looks good! You do not need to flash a new firmware at the moment. <br />Everything starts normal (kernel, rootfs).</p><p>I assume that the network configuration is probably not correct.</p><p>Try the usual linux commands to find out how the network interfaces are configured.</p><p>BTW: Please also keep in mind that the openwrt firmware image for the TL-MR3020 does <strong>not</strong> contain the WEBGUI (e.g. LuCi)! <br />The SPI flash with 4MB is to small to integrate that. So you cannot use your web browser to configure openwrt on this device.<br />If you want to have that you must use an additional external storage device (e.g. USB stick). For a guide, search the wiki for &quot;extroot&quot;. Choose either &quot;pivot-overlay&quot; or &quot;pivot-root&quot;.<br />&quot;pivot-overlay&quot; is recommended.</p><p>You must configure openwrt using the config files in /etc/config by using an editor (default editor is &quot;vi&quot;).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154503">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">cille75</div>
					<div class="post-datetime">
						17 Jan 2012, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>One more thing. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>As you now seem to have opened your device, could you please provide some detail pictures of the PCB (top, bottom)?<br />Could be interesting to see if there is a difference in version V1.4.</p><p>The bootloader on your devices has a later build time.&nbsp; So far the only difference I have noticed.</p><p>Where did you buy your device?</p><p>I did not find a hint for revision V1.4 on the support page from TP-Link.</p>											<p class="post-edited">(Last edited by <strong>cille75</strong> on 17 Jan 2012, 17:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154546">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						18 Jan 2012, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>Finally using the serial console I could change the password by passwd command!! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>Thanks cille75!!!<br />I know that there isn&#039;t a luci ( but I never used it, always cli!!!).. thanks a lot, I use openwrt and I know the basic operation like expanded the memory.. I&#039;m a newbie because I never hardware hacking a router.. up until now!</p><p>I bought the router in Italy 2 days ago..<br />On the router box there is written: Model TL-MR3020 Ver.1.4 but opened the device, on the pcd there is written Rev.1.1</p><p><strong>Images</strong><br /><a href="http://imageshack.us/photo/my-images/215/img20120117222147.jpg/">image1</a><br /><a href="http://imageshack.us/photo/my-images/854/img20120117222152.jpg/">image2</a><br /><a href="http://imageshack.us/photo/my-images/23/img20120117222607.jpg/">image3</a><br /><a href="http://imageshack.us/photo/my-images/848/img20120117222621.jpg/">image4</a><br /><a href="http://imageshack.us/photo/my-images/845/img20120117222633.jpg/">image5</a><br /><a href="http://imageshack.us/photo/my-images/269/img20120117222646.jpg/">image6</a></p><p>Last question: installed openwrt, how does it function the switch? is the function equal in any position ?</p><p>Thanks!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154555">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">codeThatThinks</div>
					<div class="post-datetime">
						18 Jan 2012, 03:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m a newbie like Fado84, and I think I&#039;ve also bricked my MR3020. I flashed the firmware with the WebGUI and it seemed like it was successful. Unfortunately, it no longer broadcasts WiFi, and when I tried to plug it in via ethernet cable, I am unable to access the configuration page. As suggested, I opened it up and connected to its 4 pin serial interface. All I get in my terminal is weird characters, nothing readable, as though there is some kind of character set issue or something:</p><div class="codebox"><pre><code>R???e???????E?75-95?5/??5#57?%-9!?%!75?</code></pre></div><p>Any help would be appreciated.</p><p>~Ian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154561">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">Lennong</div>
					<div class="post-datetime">
						18 Jan 2012, 06:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>codeThatThinks wrote:</cite><blockquote><p>Hi,</p><p>I&#039;m a newbie like Fado84, and I think I&#039;ve also bricked my MR3020. I flashed the firmware with the WebGUI and it seemed like it was successful. Unfortunately, it no longer broadcasts WiFi, and when I tried to plug it in via ethernet cable, I am unable to access the configuration page. As suggested, I opened it up and connected to its 4 pin serial interface. All I get in my terminal is weird characters, nothing readable, as though there is some kind of character set issue or something:</p><div class="codebox"><pre><code>R???e???????E?75-95?5/??5#57?%-9!?%!75?</code></pre></div><p>Any help would be appreciated.</p><p>~Ian</p></blockquote></div><p>Set the bit rate to 115200 and the rest default in device manager/ports (com&amp;ltp), and same rate in putty.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154635">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">codeThatThinks</div>
					<div class="post-datetime">
						18 Jan 2012, 22:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Lennong wrote:</cite><blockquote><p>Set the bit rate to 115200 and the rest default in device manager/ports (com&amp;ltp), and same rate in putty.</p></blockquote></div><p>No luck. I&#039;m using an actual serial cable connected to a Linux box running minicom. I&#039;ve been using 115200 ever since I started because that was what I had read on the wiki page for this router. I tried both ansi and iso modes in minicom and I still have the same problem. I even tried this on a different machine, same result.</p><p>I already ordered another of these micorouters, so it isn&#039;t as big of a deal if this is bricked now.</p><p>Again, I appreciate any help.</p><p>~Ian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154637">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">codeThatThinks</div>
					<div class="post-datetime">
						18 Jan 2012, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Ok, so I just tried it on a Windows machine running PuTTY. Same exact result. Tried everything, whether it be port speed, flow control, parity bit, character set. Same exact result.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p154638">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">Fado84</div>
					<div class="post-datetime">
						18 Jan 2012, 23:21					</div>
				</div>
				<div class="post-content content">
					<p>I got some times a similar problem, but I think that this isn&#039;t your case.. merely reboot the system and router I solved..<br />try: cu -l /dev/ttyUSB0 -s 115200</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 24</div><nav><ul><li><a href="viewtopic.php%3Fid=33429&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=33429&amp;p=4.html">4</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=33429&amp;p=24.html">24</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>