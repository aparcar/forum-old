<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Missing config for Busybox</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p220211">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">acema</div>
					<div class="post-datetime">
						17 Dec 2013, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I tried to compile Barrier Breaker with an enhances Busybox. But the config is missing therefor &#039;make menuconfig&quot; doesn&#039;t show the options. Where can I get it again?</p><br /><p>Thanks,<br />acema</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220225">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						17 Dec 2013, 17:14					</div>
				</div>
				<div class="post-content content">
					<p>Changeset r39106 removed almost all Busybox config options<br /><a href="https://dev.openwrt.org/changeset/39106">https://dev.openwrt.org/changeset/39106</a></p><p>Based on changeset 39107, you can include a new env/busybox-config file, where you manually set the busybox config options you need to change from defaults.</p><p>Alternative is to patch directly the new default config file &quot;package/utils/busybox/config/default&quot; and change the options there.</p><p>EDIT: apparently busybox itself provide a menuconfig. Haven&#039;t yet tested it.<br /><a href="https://lists.openwrt.org/pipermail/openwrt-devel/2013-December/022984.html">https://lists.openwrt.org/pipermail/ope â€¦ 22984.html</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 17 Dec 2013, 17:33)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221512">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						2 Jan 2014, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>Who has done this crap?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221518">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zloop</div>
					<div class="post-datetime">
						3 Jan 2014, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>from the commit:<br />&quot;This will help with avoiding bogus bug reports caused by stale configs<br />and bad cases of user tinkering <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&quot;</p><p>you can always fork and revert the patches</p>											<p class="post-edited">(Last edited by <strong>zloop</strong> on 3 Jan 2014, 00:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221525">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						3 Jan 2014, 02:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>zloop wrote:</cite><blockquote><p>you can always fork and revert the patches</p></blockquote></div><p>are there side effects?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221536">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">acema</div>
					<div class="post-datetime">
						3 Jan 2014, 09:28					</div>
				</div>
				<div class="post-content content">
					<p>As hnyman descriped above you can still configure busybox in build_dir -after the first built! I experienced a missing dependency with librpc. I can&#039;t compile with NFS.</p><p>There is a similar situation with uClib...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221541">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">FriedZombie</div>
					<div class="post-datetime">
						3 Jan 2014, 11:29					</div>
				</div>
				<div class="post-content content">
					<p>Also there is <a href="https://dev.openwrt.org/changeset/39125/trunk">Revision 39125</a><br />busybox: add back support for top-level menuconfig based config overrides (can be used by custom packages to alter the config)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221545">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						3 Jan 2014, 12:18					</div>
				</div>
				<div class="post-content content">
					<p>All not good :-(</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223158">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">risa2000</div>
					<div class="post-datetime">
						19 Jan 2014, 13:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>written_direcon wrote:</cite><blockquote><p>Who has done this crap?</p></blockquote></div><p>I believe one reason was this ticket (<a href="https://dev.openwrt.org/ticket/14010">https://dev.openwrt.org/ticket/14010</a>). Contrary to dev I would however not call it bogus report.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223219">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						19 Jan 2014, 23:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>Changeset r39106 removed almost all Busybox config options<br /><a href="https://dev.openwrt.org/changeset/39106">https://dev.openwrt.org/changeset/39106</a></p><p>Based on changeset 39107, you can include a new env/busybox-config file, where you manually set the busybox config options you need to change from defaults.</p></blockquote></div><p>I tried this approach to no avail. Perhaps, I did something wrong. Anyway, here is what I had done:<br /></p><ol class="decimal"><li><p>Make sure to compile busybox once, i.e. make package/busybox/compile</p></li><li><p>Change directory to build_dir/&lt;target platform&gt;/busybox-&lt;version&gt; source directory and run <em>make menuconfig</em> to reconfigure busybox for next builds.</p></li><li><p>While still inside the busybox source directory, I copied the .config file to &lt;OpenWRT root directory&gt;/env/busybox-config</p></li><li><p>Change back to &lt;OpenWRT root directory&gt;. Then, run <em>make package/busybox/{clean,compile}</em> and the binary busybox doesn&#039;t contain all new applets I added in the above step #2.</p></li></ol>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223232">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						20 Jan 2014, 09:16					</div>
				</div>
				<div class="post-content content">
					<p>I think the idea was to include only the new/changed config lines in env/busybox-config, not the whole config.</p><p>My current approach:<br />I make by build available also for others, so I have wanted to maintain its config as clear as possible.</p><p>I patch the short Busybox Config.in left there (&quot;package/utils/busybox/Config.in&quot; with only the NFS option) and add the needed options to that. That make those options available for normal Openwrt menuconfig etc. just like earlier. Then I include the old config lines normally in my main .config. </p><p>This mirrors rather nearly the old system and the used Busybox options are visible and changeable via normal Openwrt menuconfig. The drawback is that I have had to manually recover the config definitions.</p><p>From .config<br /></p><div class="codebox"><pre><code># Busybox tweaks: diff, less
CONFIG_BUSYBOX_CONFIG_DIFF=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LESS_FLAGS=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LESS_REGEXP=y
CONFIG_BUSYBOX_CONFIG_FEATURE_LESS_WINCH=y</code></pre></div><p>Patch for Config.in<br /></p><div class="codebox"><pre><code>--- trunk/package/utils/busybox/Config.in   (revision 39320)
+++ trunk/package/utils/busybox/Config.in   (working copy)
@@ -3,4 +3,80 @@
 config BUSYBOX_CONFIG_FEATURE_MOUNT_NFS
    bool &quot;Enable NFS mount support&quot;
  
+config BUSYBOX_CONFIG_DIFF
+   bool &quot;diff&quot;
+   default n
+   help
+     diff compares two files or directories and outputs the
+     differences between them in a form that can be given to
+     the patch command.
+
+config BUSYBOX_CONFIG_FEATURE_DIFF_DIR
+   bool &quot;Enable directory support&quot;
+   default n
+   depends on BUSYBOX_CONFIG_DIFF
+   help
+     This option enables support for directory and subdirectory
+     comparison.
+
+config BUSYBOX_CONFIG_LESS
+   bool &quot;less&quot;
+   default y
+   help
+     &#039;less&#039; is a pager, meaning that it displays text files. It possesses
+     a wide array of features, and is an improvement over &#039;more&#039;.
+
+config BUSYBOX_CONFIG_FEATURE_LESS_BRACKETS
+   bool &quot;Enable bracket searching&quot;
+   default n
+   depends on BUSYBOX_CONFIG_LESS
+   help
+     This option adds the capability to search for matching left and right
+     brackets, facilitating programming.
+
+config BUSYBOX_CONFIG_FEATURE_LESS_FLAGS
+   bool &quot;Enable extra flags&quot;
+   default n
+   depends on BUSYBOX_CONFIG_LESS
+   help
+     The extra flags provided do the following:
+
+     The -M flag enables a more sophisticated status line.
+     The -m flag enables a simpler status line with a percentage.
+
+config BUSYBOX_CONFIG_FEATURE_LESS_REGEXP
+   bool &quot;Enable regular expressions&quot;
+   default n
+   depends on BUSYBOX_CONFIG_LESS
+   help
+     Enable regular expressions, allowing complex file searches.
+
+config BUSYBOX_CONFIG_FEATURE_LESS_WINCH
+   bool &quot;Enable automatic resizing on window size changes&quot;
+   default n
+   depends on BUSYBOX_CONFIG_LESS
+   help
+     Makes less track window size changes.
+
+config BUSYBOX_CONFIG_FEATURE_IPV6
+   bool &quot;Enable IPv6 support&quot;
+   default IPV6
+   help
+     Enable IPv6 support in busybox.
+     This adds IPv6 support in the networking applets.
+
+config BUSYBOX_CONFIG_TRACEROUTE
+   bool &quot;traceroute&quot;
+   default y
+   select BUSYBOX_CONFIG_PLATFORM_LINUX
+   help
+     Utility to trace the route of IP packets.
+
+config BUSYBOX_CONFIG_TRACEROUTE6
+   bool &quot;traceroute6&quot;
+   default n
+   depends on BUSYBOX_CONFIG_FEATURE_IPV6 &amp;&amp; BUSYBOX_CONFIG_TRACEROUTE
+   help
+     Utility to trace the route of IPv6 packets.
+
 endif</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223271">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						20 Jan 2014, 18:51					</div>
				</div>
				<div class="post-content content">
					<p>I haven&#039;t done any changes since my last post above. Then, I just did a <em>make package/busybox/{clean,compile}</em> and it works. In other words, it looks like all applets (added in &lt;OpenWRT root directory&gt;/env/busybox-config file) are built/compiled into busybox now.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223867">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">colchaodemola</div>
					<div class="post-datetime">
						27 Jan 2014, 12:35					</div>
				</div>
				<div class="post-content content">
					<p>The easiest way i found is download the trunk using svn, then you cd to the&nbsp; package/utils/busybox directory and run &#039;svn up -r 39105&#039; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p223879">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						27 Jan 2014, 15:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>colchaodemola wrote:</cite><blockquote><p>The easiest way i found is download the trunk using svn, then you cd to the&nbsp; package/utils/busybox directory and run &#039;svn up -r 39105&#039; <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>What you are suggesting above is not bad and the process must be done repeatedly whenever you perform an SVN update to the whole OpenWRT. What hnyman suggested <a href="https://forum.openwrt.org/viewtopic.php?pid=220225#p220225">above</a> makes more sense. All you need is as follows:<br /></p><ol class="decimal"><li><p>Update to the latest SVN trunk.</p></li><li><p>Go to your buil-dir/&lt;target platform&gt;/&lt;busybox source directory&gt; .</p></li><li><p>Execute <em>make menuconfig</em> to configure to your taste and then exit to save your configuration.</p></li><li><p>Still in the same directory, copy the newly updated <strong>.config</strong> file to your <em>env</em> directory as <strong>busybox-config</strong> file, i.e. cp -a .config &lt;OpenWRT root directory&gt;/env/busybox-config, and that&#039;s good to last until you perform step #2 above again.</p></li></ol><p>The only problem is all the settings will still not show on the <em>make menuconfig</em> when launched from the &lt;OpenWRT root directory&gt;. In other words, changing busybox configuration must be done as shown on the above step #2 and so on. Honestly, I prefer the older way than this new approach.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224252">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						1 Feb 2014, 15:28					</div>
				</div>
				<div class="post-content content">
					<p>It looks like the menu has been restored in r39440.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224262">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						1 Feb 2014, 17:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>It looks like the menu has been restored in r39440.</p></blockquote></div><p>LOL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224268">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						1 Feb 2014, 17:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>written_direcon wrote:</cite><blockquote><div class="quotebox"><cite>mazilo wrote:</cite><blockquote><p>It looks like the menu has been restored in r39440.</p></blockquote></div><p>LOL</p></blockquote></div><p>Yes and let&#039;s hope it remains there for good.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>