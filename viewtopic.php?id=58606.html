<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wt3020 - slow network copy speed + acceleration after underclocking!?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 10 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p284407">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hurjup</div>
					<div class="post-datetime">
						21 Jul 2015, 23:13					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m playing (experimenting) with my new wt3020. For the actual day&#039;s experiment I always use the newest trunk.<br />Today&#039;s topic is: copying over the network.</p><p>The numbers below are for ext4 partition, aligned on megabyte, without optimization. But empyrically it doesn&#039;t matter whether it is optimized or not, or even FAT32. (NTFS does not work for me.)<br />I use a 64GB Lexar Color Edition (USB3.0), performing ~20MBps write and ~30MBps read on my host computer (USB2.0).</p><p>I&#039;ve created a 64M sized file:<br />dd if=/dev/urandom of=64M.bin bs=64M count=1 iflag=fullblock</p><p>Then, did some performance tests with scp:<br />- upload on wifi: ~115s<br />- download on wifi: ~78s<br />- upload on ethernet: ~64s<br />- download on ethernet: ~55s<br />- samba read speed on wifi is around 1.1MBps<br />Meanwhile the CPU burns, the load is nearly 3.<br />- copying from partition to partition goes with 9-10MBps - it is fair, and a proof that not the pendrive is the bottleneck</p><p>Well, I&#039;ve expected a bit more. The wifi read speed on my (much older) tl-wr842nd v1.0 running AA is around ~3.7MBps using samba.<br /><span style="color: #FF0000">Question#1</span>: obviously, why is network read so slow? (And of course is it possible to speed it up &quot;radically&quot;?)</p><p>Despite of the partition to partition test, in despair I thought that the CPU may be weaker, however having higher clock rate. Well, measuring performance with bash loops the wt3020 was ~15% quicker on 580MHz...<br /><strong>But then</strong> I&#039;ve suddenly underclocked it to 320MHz instead of the original 580MHz. The results are amazing and confusing too:<br />- upload on wifi: ~90s<br />- download on wifi: ~70s<br />- upload on ethernet: ~45s<br />- download on ethernet: ~50s</p><p>Bash loops reflect well the underclocking. (The CPU doesn&#039;t seem to be less hot at all.)<br />On the other hand the network copy speed improved nicely.</p><p><span style="color: #FF0000">Question#2</span>: Why did network copy speed improve, despite of underclocking?</p><p>And...<br /><span style="color: #FF0000">Question#1.1</span>: may my network setup be the bottleneck, or the networking subsystem / driver is? Or what?</p>											<p class="post-edited">(Last edited by <strong>hurjup</strong> on 21 Jul 2015, 23:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p284556">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hurjup</div>
					<div class="post-datetime">
						23 Jul 2015, 00:51					</div>
				</div>
				<div class="post-content content">
					<p>After a reboot (more precisely: a day&#039;s sleep) the figures have changed.<br />With firewall the speed is ~2.3MBps up (excellent) and ~2.6MBps down (average, expected still more). Without firewall the speed increased with another little bit.<br />I&#039;m satisfied anyway, and a also bit puzzled about this reboot related acceleration.</p>											<p class="post-edited">(Last edited by <strong>hurjup</strong> on 23 Jul 2015, 00:52)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>