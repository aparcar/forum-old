<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Improve the DuckDNS DDNS section of the Wiki</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p214069">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">StevenHarperUK</div>
					<div class="post-datetime">
						6 Oct 2013, 14:07					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I run the service <a href="https://www.duckdns.org">https://www.duckdns.org</a></p><p>I really want to improve the instructions on our site (<a href="https://www.duckdns.org/install.jsp?tab=openwrt">https://www.duckdns.org/install.jsp?tab=openwrt</a>)</p><p>However I don&#039;t have an OpenWrt system to check/work with the instructions.</p><p>The current instructions on your Wiki seem to have been improved recently (<a href="http://wiki.openwrt.org/doc/howto/ddns.client#configuration.for.duckdns.org">http://wiki.openwrt.org/doc/howto/ddns. â€¦ uckdns.org</a>)</p><p>However we have fixed a few of the issues and I would like to update the Wiki and our site to reflect the updates.</p><br /><p>Firstly we have now swapped SSL Certificate providers - so it should be that we don&#039;t need to add -k to the retrieve program</p><p>Also the configuration seems to use the WEB to test the IP, is this normal wont the WAN Address be a more efficient way to do this?<br />Also we don&#039;t need the IP passing to us (At duckdns /update) we pull the IP out of the request.</p><br /><p>So with all that in mind - is this the correct config procedure now?<br />note: I have not changed the IP param of the update from web </p><p>Can someone test it?</p><p>------------------------------------------------------------------------------------</p><p>Add Duck DNS to &#039;&#039;services&#039;&#039;<br />The reason you want to add Duck DNS to the services file is because this will allow you to configure other ddns services if needed, and it allows for proper https usage with curl. <br />Edit /usr/lib/ddns/services and add this to the end of the file:</p><p># Duck DNS<br />&quot;duckdns.org&quot;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;https://www.duckdns.org/update?domains=[DOMAIN]&amp;token=[PASSWORD]&amp;ip=[IP]&quot;</p><p>Duck DNS ddns-scripts &#039;&#039;config&#039;&#039; example</p><p>&nbsp; &nbsp; config service &quot;myddns&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option interface&nbsp; &nbsp; &nbsp; &nbsp; &quot;wan&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option service_name&nbsp; &nbsp; &nbsp;&quot;duckdns.org&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option domain&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;DOMAIN&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option username&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;LEAVE BLANK&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option password&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;xxxxxxx-YOUR_TOKEN-xxxx-xxxxxxxxxxxx&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option force_interval&nbsp; &nbsp;&quot;12&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option force_unit&nbsp; &nbsp; &nbsp; &nbsp;&quot;hours&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option check_interval&nbsp; &nbsp;&quot;10&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option check_unit&nbsp; &nbsp; &nbsp; &nbsp;&quot;minutes&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip_source&nbsp; &nbsp; &nbsp; &nbsp; &quot;web&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ip_url&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;<a href="http://wtfismyip.com/text">http://wtfismyip.com/text</a>&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp;option use_https&nbsp; &nbsp; &nbsp; &nbsp; &quot;1&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp;option cacert&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&quot;/etc/ssl/certs/cacert.pem&quot;</p>											<p class="post-edited">(Last edited by <strong>StevenHarperUK</strong> on 6 Oct 2013, 14:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226224">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">AndyDd</div>
					<div class="post-datetime">
						25 Feb 2014, 05:19					</div>
				</div>
				<div class="post-content content">
					<p>This guide is great.&nbsp; One question - how am I able to tell if it is working correctly?&nbsp; LOGREAD says &#039;update successful&#039;&nbsp; </p><p>Should the &#039;last changed&#039; field on the duckdns site be update periodically even if the ip doesn&#039;t change?&nbsp; Just looking for a way to confirm that the site is receiving my updates.</p><p>Thanks for a great service</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p227753">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tmcg</div>
					<div class="post-datetime">
						17 Mar 2014, 05:15					</div>
				</div>
				<div class="post-content content">
					<p>I setup duckdns in my ddns config today.&nbsp; Just added the entry in /usr/lib/ddns/services and then refreshed Luci and used UI to add the remaining parameters.&nbsp; Then I added the option use_https &quot;1&quot; to config.</p><p>No idea if it is working or not working.&nbsp; Something on the duckdns web control panel that says time of last update would be helpful to know if it is configured correctly before the first time the IP really changes.</p><p>Thanks for the free ddns service!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p231955">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">colsearle</div>
					<div class="post-datetime">
						1 May 2014, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>Sorry but can someone help me to understand a few things here. I managed to install openwrt and luci a few weeks back and I have just installed the dyndns services into openwrt.</p><p> I need a walkthrough. My first question is how do I Edit /usr/lib/ddns/services&nbsp; ???</p><p> I&#039;ve tried changing directories in putty but I&#039;m getting nowhere and obviously going about it in the wrong way. I cant reach the openwrt links here or in Google which isn&#039;t helping. Many thanks for any help.</p><p>&nbsp; &nbsp; &nbsp; can&#039;t cd to /usr/lib/ddns/services&nbsp; ??????</p>											<p class="post-edited">(Last edited by <strong>colsearle</strong> on 1 May 2014, 15:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250225">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">malahal</div>
					<div class="post-datetime">
						12 Oct 2014, 16:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>colsearle wrote:</cite><blockquote><p>Sorry but can someone help me to understand a few things here. I managed to install openwrt and luci a few weeks back and I have just installed the dyndns services into openwrt.</p><p> I need a walkthrough. My first question is how do I Edit /usr/lib/ddns/services&nbsp; ???</p><p> I&#039;ve tried changing directories in putty but I&#039;m getting nowhere and obviously going about it in the wrong way. I cant reach the openwrt links here or in Google which isn&#039;t helping. Many thanks for any help.</p><p>&nbsp; &nbsp; &nbsp; can&#039;t cd to /usr/lib/ddns/services&nbsp; ??????</p></blockquote></div><p>It is actually a file, not a directory. You should use &quot;vi&quot; to open the file. Since the instructions asks you to add/append two lines to the file, you can use</p><p>echo &quot;what-ever-you-want-to-append-goes-here&quot; &gt;&gt; /usr/lib/ddns/services</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250227">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">malahal</div>
					<div class="post-datetime">
						12 Oct 2014, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>OK, I just created a subdomain (malahal.duckdns.org). The duckdns install guide suggests &quot;malahal&quot; as domain in /etc/config/dns file. Looks like this domain is used by /usr/lib/ddns/dynamic_dns_updater.sh script to do TWO things:</p><p>1. Used in constructing the update URL. This gives right url<br />2. Also used in checking the registered IP address by running nslookup. In my case, the script runs &quot;nslookup malahal&quot;. This is incorrect. It should run &quot;nslookup malahal.duckdns.org&quot;. So the script never finds my registered IP address! This results in ip address getting updated with duckdns for every 10 minutes. Ideally it should update every 72 hours only.</p><p>Any comments from openwrt users or duckdns admins??? </p><p>I am new to openwrt but no stranger to Linux.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>