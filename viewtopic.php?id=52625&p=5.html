<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TP-Link Archer C2 AC750 support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 30 Mar 2018 and 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 5 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=52625&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=14.html">14</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p343110">
				<div class="post-metadata">
					<div class="post-num">Post #101</div>
					<div class="post-author">dpazzaglia</div>
					<div class="post-datetime">
						6 Nov 2016, 01:10					</div>
				</div>
				<div class="post-content content">
					<p>@YOQ. This is my first post on OpenWrt forum. Following your instruction I was able to flash a TP-Link Archer C2 V1 (No need of the TFTP trick, it was simply flashed via the native TP-Link web interface since it wasn&#039;t updated to the latest stock release that isn&#039;t downgradable). I was even able to have the 5G wireless working using the trick to copy the etc subtree portion you suggested an doing the specific insmod.&nbsp; I&#039;m so far satisfied with your bin but I need to install the mwan3 package (and also USB wwan LTE modem support I suppose isn&#039;t comprised in your bin), because I would like to have a wwan failover link. I wasn&#039;t able to install due to dependencies on other packages not installed I tried to solve, but, at last the most blocking dependency is on kernel level. Your bin kernel is at 4.4.7 level while the mwan3 package (and prerequisite packages) require 4.4.14 level as of today available snapshot trunk. May you help to find a solution or you have a more up to date bin? I apologize to be not so agile in OpenWrt as I am with ordinary linux distros like Centos or Ubuntu.&nbsp; Many thanks in advance</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p343775">
				<div class="post-metadata">
					<div class="post-num">Post #102</div>
					<div class="post-author">yoq</div>
					<div class="post-datetime">
						15 Nov 2016, 12:27					</div>
				</div>
				<div class="post-content content">
					<p>unfortunately, I can&#039;t build new a image at the moment. maybe you&#039;ll have more luck with the 15.05 packages: <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ramips/mt7620/packages/packages/">downloads.openwrt.org/chaos_calmer/15.0 … /packages/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345262">
				<div class="post-metadata">
					<div class="post-num">Post #103</div>
					<div class="post-author">s0x</div>
					<div class="post-datetime">
						30 Nov 2016, 02:40					</div>
				</div>
				<div class="post-content content">
					<p>@yoq, thank you.</p><p>If I were to clone the current openwrt repo from github, are these the changes I should be applying to the sources to try and get a working image?</p><div class="codebox"><pre><code>htt ps://bitbucket.org/dbeinder/openwrt-archer-c2/commits/51a5de02951893f7c5b4ebc36419e14899cdf3a2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345281">
				<div class="post-metadata">
					<div class="post-num">Post #104</div>
					<div class="post-author">yoq</div>
					<div class="post-datetime">
						30 Nov 2016, 09:55					</div>
				</div>
				<div class="post-content content">
					<p>yep, that one and the latest commit, i cleaned it up a bit more. It should get you everything except 5G wifi. you can get the mt7610 driver from here: <a href="http://bitbucket.org/padavan/rt-n56u/src/master/trunk/proprietary/rt_wifi/rtpci/3.0.X.X">bitbucket.org/padavan/rt-n56u/src/maste … ci/3.0.X.X</a>.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345339">
				<div class="post-metadata">
					<div class="post-num">Post #105</div>
					<div class="post-author">kenlim143</div>
					<div class="post-datetime">
						30 Nov 2016, 20:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dpazzaglia wrote:</cite><blockquote><p>@YOQ. This is my first post on OpenWrt forum. Following your instruction I was able to flash a TP-Link Archer C2 V1 (No need of the TFTP trick, it was simply flashed via the native TP-Link web interface since it wasn&#039;t updated to the latest stock release that isn&#039;t downgradable). I was even able to have the 5G wireless working using the trick to copy the etc subtree portion you suggested an doing the specific insmod.&nbsp; I&#039;m so far satisfied with your bin but I need to install the mwan3 package (and also USB wwan LTE modem support I suppose isn&#039;t comprised in your bin), because I would like to have a wwan failover link. I wasn&#039;t able to install due to dependencies on other packages not installed I tried to solve, but, at last the most blocking dependency is on kernel level. Your bin kernel is at 4.4.7 level while the mwan3 package (and prerequisite packages) require 4.4.14 level as of today available snapshot trunk. May you help to find a solution or you have a more up to date bin? I apologize to be not so agile in OpenWrt as I am with ordinary linux distros like Centos or Ubuntu.&nbsp; Many thanks in advance</p></blockquote></div><p>Hi. I was looking to do the same with my archer c2 v1 us. I wanted the get the&nbsp; mwan and connect it with my grandfathered vzw internet. Thanks for any help you can provide me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345375">
				<div class="post-metadata">
					<div class="post-num">Post #106</div>
					<div class="post-author">lollersk8tz</div>
					<div class="post-datetime">
						1 Dec 2016, 04:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dpazzaglia wrote:</cite><blockquote><p>@YOQ. This is my first post on OpenWrt forum. Following your instruction I was able to flash a TP-Link Archer C2 V1 (No need of the TFTP trick, it was simply flashed via the native TP-Link web interface since it wasn&#039;t updated to the latest stock release that isn&#039;t downgradable). I was even able to have the 5G wireless working using the trick to copy the etc subtree portion you suggested an doing the specific insmod.&nbsp; I&#039;m so far satisfied with your bin but I need to install the mwan3 package (and also USB wwan LTE modem support I suppose isn&#039;t comprised in your bin), because I would like to have a wwan failover link. I wasn&#039;t able to install due to dependencies on other packages not installed I tried to solve, but, at last the most blocking dependency is on kernel level. Your bin kernel is at 4.4.7 level while the mwan3 package (and prerequisite packages) require 4.4.14 level as of today available snapshot trunk. May you help to find a solution or you have a more up to date bin? I apologize to be not so agile in OpenWrt as I am with ordinary linux distros like Centos or Ubuntu.&nbsp; Many thanks in advance</p></blockquote></div><p>could you compile an image and upload it? i&#039;m trying to configure openvpn for this, but i need the kernel to be 4.4.14 in order to install the latest kmod-tun. thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345492">
				<div class="post-metadata">
					<div class="post-num">Post #107</div>
					<div class="post-author">eddy551</div>
					<div class="post-datetime">
						2 Dec 2016, 14:29					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I have the same problem. I already tried to build the image by myself. The original&nbsp; &#039;target/linux/ramips/image/mt7620.mk&#039; is a whole lot different than yours. I replaced it completely, but I&#039;m not sure if it&#039;s the correct way. Also I have no idea about the &#039;make menuconfig&#039; parameters. Can anybody give me some instructions please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345670">
				<div class="post-metadata">
					<div class="post-num">Post #108</div>
					<div class="post-author">eddy551</div>
					<div class="post-datetime">
						4 Dec 2016, 05:00					</div>
				</div>
				<div class="post-content content">
					<p>With a little hint from yoq I was able to create the updatet image with kernel 4.4.14. If you want to build your own, take care of the &#039;Target System&#039;. You have to choose Ralink RT288x/RT3xxx, in order to find the Archer C2. </p><p>Have fun!</p><p><strong>goo.gl/RPyRjb</strong></p>											<p class="post-edited">(Last edited by <strong>eddy551</strong> on 4 Dec 2016, 05:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p345851">
				<div class="post-metadata">
					<div class="post-num">Post #109</div>
					<div class="post-author">s0x</div>
					<div class="post-datetime">
						6 Dec 2016, 06:17					</div>
				</div>
				<div class="post-content content">
					<p>@yoq, thanks again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I did give it a go.. But couldn&#039;t find the Archer C2 target, but now..</p><p>After @eddy551 reply I might try again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>@eddy551, what version of OpenWRT did you compile? Which branch on github?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346164">
				<div class="post-metadata">
					<div class="post-num">Post #110</div>
					<div class="post-author">gargle</div>
					<div class="post-datetime">
						9 Dec 2016, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>@eddy551, I tried your goo.gl/RPyRjb but it didn&#039;t work, I think I bricked my router. Any advice? I&#039;m rather new to this.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346434">
				<div class="post-metadata">
					<div class="post-num">Post #111</div>
					<div class="post-author">eddy551</div>
					<div class="post-datetime">
						12 Dec 2016, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>The file can&#039;t be broken, because I use it myself. Are you sure to have the v1 hardware version?</p><p>Flash the C2 recovery Image from yoq (look at post #90&nbsp; in this thread) with tftpd to get it back to life. After that, you upload the c2 image from post #86 via webinterface. Then you check, if the device is running properly. If this is the case, upload my file via webinterface. That should do the trick. </p><br /><p>@s0x <br />I used Chaos Calmer with the standard branch. My webinterface is saying this:</p><p>Model&nbsp; &nbsp; TP-Link Archer C2<br />Firmware Version&nbsp; &nbsp; OpenWrt Designated Driver 50015 / LuCI Master (git-16.336.70424-1fd43b4)<br />Kernel Version&nbsp; &nbsp; 4.4.14</p>											<p class="post-edited">(Last edited by <strong>eddy551</strong> on 12 Dec 2016, 10:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346448">
				<div class="post-metadata">
					<div class="post-num">Post #112</div>
					<div class="post-author">gargle</div>
					<div class="post-datetime">
						12 Dec 2016, 13:25					</div>
				</div>
				<div class="post-content content">
					<p>@eddy551, thanks for the swift reply. It&#039;s the v1 I&#039;m using, just like yours. </p><p>One question? Is the c2 image from post #86 mandatory? Can&#039;t I upload your file directly? Maybe that&#039;s what &#039;broke&#039; my Archer.</p><p>I&#039;ll follow your instructions and will try your new image one of these days.</p>											<p class="post-edited">(Last edited by <strong>gargle</strong> on 12 Dec 2016, 16:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346480">
				<div class="post-metadata">
					<div class="post-num">Post #113</div>
					<div class="post-author">eddy551</div>
					<div class="post-datetime">
						12 Dec 2016, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>To be honest, I don&#039;t know. I already had a running OpenWrt-Build because of the image from yoq. I upgraded from his build, therefore I can&#039;t tell if it&#039;s mandatory - only that it was my working solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346515">
				<div class="post-metadata">
					<div class="post-num">Post #114</div>
					<div class="post-author">htom</div>
					<div class="post-datetime">
						12 Dec 2016, 23:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>eddy551 wrote:</cite><blockquote><p>With a little hint from yoq I was able to create the updatet image with kernel 4.4.14. If you want to build your own, take care of the &#039;Target System&#039;. You have to choose Ralink RT288x/RT3xxx, in order to find the Archer C2. </p><p>Have fun!</p><p><strong>goo.gl/RPyRjb</strong></p></blockquote></div><p>Hy!</p><p>I just tired to flash this image, but it cant, because it says my hardware version dont match... :-(</p><p>This is error msg:<br /><strong>Error code: 4506<br />The uploaded file does not match the device&#039;s current hardware version.</strong></p><p>My hardware version is: Hardware version:Archer C2 v1 00000001</p><p>Is this image built for v1 hardware?<br />Wwhat did I do wrong? <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346560">
				<div class="post-metadata">
					<div class="post-num">Post #115</div>
					<div class="post-author">eddy551</div>
					<div class="post-datetime">
						13 Dec 2016, 11:02					</div>
				</div>
				<div class="post-content content">
					<p>@htom<br />See Post #90, it looks like your Router is already locked. Try to downgrade.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346790">
				<div class="post-metadata">
					<div class="post-num">Post #116</div>
					<div class="post-author">gargle</div>
					<div class="post-datetime">
						15 Dec 2016, 18:08					</div>
				</div>
				<div class="post-content content">
					<p>I got myself a new C2 and ran into the &quot;The uploaded file does not match the device&#039;s current hardware version.&quot; message.</p><p>So I went to post#90, downloaded the ArcherC2V1_tp_recovery.bin and applied the tftpd trick.</p><p>This gave me openwrt, kernel 4.4.7.</p><p>Next I uploaded the c2 image from post#108 and I&#039;m up and running <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thanks guys!</p>											<p class="post-edited">(Last edited by <strong>gargle</strong> on 15 Dec 2016, 18:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347117">
				<div class="post-metadata">
					<div class="post-num">Post #117</div>
					<div class="post-author">yoq</div>
					<div class="post-datetime">
						19 Dec 2016, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>The build system for ramips has changed over the last months, here is a patch that should work with the newest trunk:<br /><a href="https://bitbucket.org/dbeinder/openwrt-new-archer-c2/commits/ba9030945d5e728dcfc8047b5f49c2b1a53e78ab">https://bitbucket.org/dbeinder/openwrt- … b1a53e78ab</a><br />Select Ralink RT288x/RT3xxx &gt; MT7620 &gt; Default Profile, select your packages and build using </p><div class="codebox"><pre><code>make TARGET_DEVICES=ArcherC2</code></pre></div><p>I also cleaned up my build system for the 5G wifi driver, you can find it here: <a href="http://bitbucket.org/dbeinder/openwrt-archer-c2-mt7610">bitbucket.org/dbeinder/openwrt-archer-c2-mt7610</a> - you will need a compiled kernel, but make sure to fix the paths and versions in the Makefile for your setup. To work with the driver, your kernel needs the wireless extension tools package.</p><p>Also here is a prebuilt r50019/kernel 4.4.14 image + wifi driver: <a href="http://beinder.at/pub/c2_r50019.zip">beinder.at/pub/c2_r50019.zip</a><br />To get 5G wifi, upload wifi5G.tar.gz as a &quot;restore backup&quot; file in LuCI and apply. To configure the AP, paste this code to the local startup field in LuCI and modify for your needs. With the defaults you can start 3 virtual APs, for a more detailed description of the configuration interface see <a href="http://sourceforge.net/p/wive-ng/wive-ng-mt/ci/05d0fa0ec200e4201f3fca74694ed2dee6de6aff/tree/docs/DriversNotes/2011_0124_RT3x5x_5350_Linux_SoftAP_v2.5.0.0_ReleaseNotes.pdf?format=raw">here</a>.<br /></p><div class="codebox"><pre><code>insmod /mt7610_ap.ko

ifconfig rai0 up
iwpriv rai0 set AuthMode=WPA2PSK
iwpriv rai0 set EncrypType=AES
iwpriv rai0 set SSID=MyWifiName0
iwpriv rai0 set WPAPSK=MySecretPW0

ifconfig rai1 up
iwpriv rai1 set AuthMode=WPA2PSK
iwpriv rai1 set EncrypType=AES
iwpriv rai1 set SSID=MyWifiName1
iwpriv rai1 set WPAPSK=MySecretPW1

iwpriv rai0 set Channel=36</code></pre></div><p>After a reboot you will have rai0, rai1 interfaces - you can bridge them to your net in the network tab.</p><p>EDIT: The MAC address can be set by<br /></p><div class="codebox"><pre><code>insmod /mt7610_ap.ko mac=&quot;E8:DE:27:99:88:77&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>yoq</strong> on 25 Dec 2016, 02:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347343">
				<div class="post-metadata">
					<div class="post-num">Post #118</div>
					<div class="post-author">zen_axel</div>
					<div class="post-datetime">
						22 Dec 2016, 03:11					</div>
				</div>
				<div class="post-content content">
					<p>I hope someone can help me <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>I have a locked Archer C2 V1 which i couldn&#039;t update with official firmware, so i&#039;ve tried updating firmware with instructions on comment #90. I&#039;ve done that, then tried flashing official firmware through the openwrt firmware, but it said it was too big for the memory, but i let it do it anyway, since the recovery firmware is the same size.</p><p>It failed and got all the lights blinking.</p><p>I reflashed using comment #90 instructions and it worked, but then... i renamed the latest official firmware from tplink to ArcherC2V1_tp_recovery.bin and tried flashing that with Tftpd32 and it looks like it bricked.</p><p>On boot, only the internet light blinks once, then it does nothing. I cannot make it go back to flash mode (the lock light) and i really don&#039;t know what to do now.</p><p>Is there any chance i can fix it ? I&#039;m just an average windows user with no linux/coding skills.</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347371">
				<div class="post-metadata">
					<div class="post-num">Post #119</div>
					<div class="post-author">yoq</div>
					<div class="post-datetime">
						22 Dec 2016, 10:10					</div>
				</div>
				<div class="post-content content">
					<p>yes, that was a mistake, tplink designed this models&#039; bootloader the way you wouldn&#039;t expect and made it kinda easy to brick - you can read the technical details here: <a href="http://pwassi.privatedns.org/lede/archerc20i/#factory">pwassi.privatedns.org/lede/archerc20i/#factory</a> (it&#039;s about the C20i but the same applies)<br />you will have to take out the flash chip, rewrite the firmware and solder it back in</p>											<p class="post-edited">(Last edited by <strong>yoq</strong> on 22 Dec 2016, 10:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347411">
				<div class="post-metadata">
					<div class="post-num">Post #120</div>
					<div class="post-author">zen_axel</div>
					<div class="post-datetime">
						22 Dec 2016, 18:46					</div>
				</div>
				<div class="post-content content">
					<p>thank you for answering.</p><p>i&#039;d suggest writing instructions for upgrading a locked unit with official firmware - if possible. that&#039;s what i was searching for, and this topic was the only relevant thing i could find with google, but i wasn&#039;t expecting your method to install a custom firmware. i was trying to force it to install the official firmware.</p><p>don&#039;t take it wrong, i&#039;m not blaming anyone for what happened to me <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /> i just want others to be aware and not do the same mistake i did. it&#039;s a really popular router, and i think there are many like me trying to update it with official firmware, but getting the 4503 error.</p><p>for anyone trying to update it even though it&#039;s already working, GIVE UP ! if it ain&#039;t broke, don&#039;t fix it <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347489">
				<div class="post-metadata">
					<div class="post-num">Post #121</div>
					<div class="post-author">halucigenia</div>
					<div class="post-datetime">
						23 Dec 2016, 14:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have been following this thread as I have been setting up a network using Archer C2s and would like to get openwrt working on them instead of the stock firmware, but can&#039;t follow the instructions on how to flash the routers.</p><p>I get that my C2s will be locked and that I have to flash the ArcherC2V1_tp_recovery.bin provided in post #90 before installing the openwrt firmware in post #108 or #117 (is that correct?), but I just can&#039;t seem to find the right commands to ftp that recovery firmware to the C2s from linux (ubuntu).</p><p>Any help would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347536">
				<div class="post-metadata">
					<div class="post-num">Post #122</div>
					<div class="post-author">gargle</div>
					<div class="post-datetime">
						23 Dec 2016, 22:44					</div>
				</div>
				<div class="post-content content">
					<p>@halucigenia, I&#039;m on debian, that&#039;s like ubuntu <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> </p><p>I don&#039;t know if your router will be locked if you try to flash the openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin with the original tp-link firmware. When I tried the firmware told me that the uploaded file did not match the device&#039;s current hardware version.</p><p>Try to flash first. Download beinder.at/pub/c2_r50019.zip from #117 and unzip. Flash the firmware with the openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin file (System Tools, Firmware Upgrade).</p><p>If you get the same message about the uploaded file not matching the current hardware version, then do the tftp trick:</p><p>a. apt-get install tftpd-hpa tftp<br />b. copy the file from #90 (beinder.at/pub/ArcherC2V1_tp_recovery.bin) to /srv/tftp/ArcherC2V1_tp_recovery.bin<br />c. copy /etc/network/interfaces to /etc/network/interfaces.old<br />d. put this in /etc/network/interfaces, if eth0 connects to your router at least:</p><p>iface eth0 inet static<br />&nbsp; &nbsp; address 192.168.0.66<br />&nbsp; &nbsp; netmask 255.255.255.0<br />&nbsp; &nbsp; gateway 192.168.0.1</p><p>e. reboot or&nbsp; /etc/init.d/networking restart, ifdown eth0, ifup eth0.</p><p>ifconfig should show you&#039;re on 192.168.0.66<br />Check if ftpd is running: ps -aef | grep tftp should do the trick. If not, /etc/init.d/tftpd-hpa start or /etc/init.d/tftpd start should do the trick (help.ubuntu.com/community/TFTP says: sudo service tftpd-hpa restart)</p><p>f. go to /tmp and launch tftp from bash. Inside of tftp do::</p><p>connect localhost<br />get&nbsp; ArcherC2V1_tp_recovery.bin</p><p>You should see tftp fetching the ArcherC2V1_tp_recovery.bin</p><p>g. quit tftp, you should see a&nbsp; ArcherC2V1_tp_recovery.bin in the /tmp directory. This proves that tftpd-hpa is up and running.</p><p>h. With the router connected, and switched off, hold down the wps button and press the on switch. Keep the wps button down for at least 10 seconds.</p><p>(The wps button is all on the left on the rear panel of the ac750, just to the right of the left antenna)</p><p>i. cp /etc/network/interfaces to /etc/network/interfaces.fixed<br />j. cp /etc/network:interfaces.old to /etc/network/interfaces<br />k. reboot or&nbsp; /etc/init.d/networking restart, ifdown eth0, ifup eth0...<br />l. surf to 192.168.1.1, it should show you the openwrt login, with a complaint that the&nbsp; root pw isn&#039;t set.<br />m. set a pw, and log on.</p><br /><br /><p>next you can unzip beinder.at/pub/c2_r50019.zip from #117 and flash the firmware with the openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin file.</p><p>Have fun!</p>											<p class="post-edited">(Last edited by <strong>gargle</strong> on 24 Dec 2016, 10:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347575">
				<div class="post-metadata">
					<div class="post-num">Post #123</div>
					<div class="post-author">halucigenia</div>
					<div class="post-datetime">
						24 Dec 2016, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the tips but sorry gargle, that did not help. I must still be missing something.</p><br /><p>I have tftpd-hpa and tftp installed<br />my machine is on<br />&nbsp; &nbsp; address 192.168.0.66<br />&nbsp; &nbsp; netmask 255.255.255.0<br />&nbsp; &nbsp; gateway 192.168.0.1<br />connected through a switch so eth0 is always up (connecting directly from PC to router does not help)<br />I can always ping 192.168.0.1 while the C2 router is up.</p><p>I edited&nbsp; /etc/default/tftpd-hpa using a text editor&nbsp; to include the line </p><p>TFTP_DIRECTORY=&quot;/srv/tftp&quot;</p><p>to make sure that it would pick the recovery file from that directory after copying it there (which seemed logical to me).</p><p>I enabled tftpd-hpa using systemctl (I am on Lububtu kernel 4.4.0-57 which uses systemD now)<br />sudo systemctl enable tftpd-hpa</p><p>sudo systemctl start tftpd-hpa</p><p>sudo systemctl status tftpd-hpa</p><p>saw &quot;active (running)&quot; and using &quot;/srv/tftp&quot;</p><p>q</p><p>copied the recovery file<br />cp [path to]ArcherC2V1_tp_recovery.bin /srv/tftp/ArcherC2V1_tp_recovery.bin</p><p>ran tftp<br />cd /tmp</p><p>tftp</p><p>connect localhost</p><p>get&nbsp; ArcherC2V1_tp_recovery.bin</p><p>(is running tftp actually necessary after setting tftpd-hpa to use /srv/tftp/ and copying the recovery file there?)</p><p>I then booted up the router with WPS button held for 10 sec</p><p>there was no different activity from the router and it was still on the firmware that gives the &quot;uploaded file did not match the device&#039;s current hardware version&quot; mesage.</p><p>By the way it looks to me that you have the last part <br /></p><div class="quotebox"><blockquote><p>i. cp /etc/network/interfaces to /etc/network/interfaces.fixed<br />j. cp /etc/network:interfaces.old to /etc/network/interfaces<br />k. reboot or&nbsp; /etc/init.d/networking restart, ifdown eth0, ifup eth0...<br />l. surf to 192.168.1.1, it should show you the openwrt login, with a complaint that the&nbsp; root pw isn&#039;t set.<br />m. set a pw, and log on.</p><br /><p>next you can unzip beinder.at/pub/c2_r50019.zip from #117 and flash the firmware with the openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin file.</p></blockquote></div><p>the wrong way around.</p><p>Shouldn&#039;t it be<br /></p><div class="quotebox"><blockquote><p>next you can unzip beinder.at/pub/c2_r50019.zip from #117 and flash the firmware with the openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin file.</p></blockquote></div><p>then</p><div class="quotebox"><blockquote><p>i. cp /etc/network/interfaces to /etc/network/interfaces.fixed<br />j. cp /etc/network:interfaces.old to /etc/network/interfaces<br />k. reboot or&nbsp; /etc/init.d/networking restart, ifdown eth0, ifup eth0...<br />l. surf to 192.168.1.1, it should show you the openwrt login, with a complaint that the&nbsp; root pw isn&#039;t set.<br />m. set a pw, and log on.</p></blockquote></div><p>I was expecting to still be able to connect to the router on 192.168.0.1 after flashing ArcherC2V1_tp_recovery.bin and log on to the router to use the router&#039;s flash utility to flash to openwrt-ramips-mt7620-ArcherC2-squashfs-sysupgrade.bin</p><p>Is that not correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347582">
				<div class="post-metadata">
					<div class="post-num">Post #124</div>
					<div class="post-author">yoq</div>
					<div class="post-datetime">
						24 Dec 2016, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>xmas release <a href="http://beinder.at/pub/c2_r50020.zip">OpenWrt r50020 + 5G driver</a> <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /><br /> - will now read the correct mac address from rom, for both 2.4G and 5G wifi</p><p>and here is a new openwrt recovery image, back-to-stock recovery image, and a simple tftp server for linux:<br /><a href="http://beinder.at/pub/c2_recovery.zip">beinder.at/pub/c2_recovery.zip</a><br /></p><div class="quotebox"><blockquote><p><strong>TFTP flashing:</strong><br /> - turn the C2 off<br /> - connect a ethernet cable from any port to your machine<br /> - set your machines&#039; IP to static 192.168.0.66/255.255.255.0<br /> - set up your TFTP server (windows: tftpd32, linux: simple server in folder)<br /> - hold the WPS/Reset button<br /> - turn the C2 on<br /> - keep holding the WPS/Reset button until the WPS light comes on (takes ~10sec)<br /> - the C2 will now attempt to pull the file ArcherC2V1_tp_recovery.bin from your TFTP server<br /> - flashing takes about 1 minute and reboot afterwards<br /> - set your machines&#039; IP back to dynamic<br /> - WebUI for stock firmware is at 192.168.0.1, OpenWrt is at 192.168.1.1</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p347584">
				<div class="post-metadata">
					<div class="post-num">Post #125</div>
					<div class="post-author">halucigenia</div>
					<div class="post-datetime">
						24 Dec 2016, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>yoq, when you say</p><div class="quotebox"><cite>yoq wrote:</cite><blockquote><p>linux: simple server in folder</p></blockquote></div><p> What is the procedure for doing this?<br />I am struggling to find out how to FTP flash the recovery image in linux (see above).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 5 of 14</div><nav><ul><li><a href="viewtopic.php%3Fid=52625&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=4.html">4</a></li><li class="pagination-current"><span>5</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=6.html">6</a></li><li><a href="viewtopic.php%3Fid=52625&amp;p=7.html">7</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=52625&amp;p=14.html">14</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>