<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Building 15.05 from source</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291502">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">shm0</div>
					<div class="post-datetime">
						12 Sep 2015, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi</p><p>i compiled 15.05 from source to add cake for sqm.<br />It worked fine but i cant install some packages because of dependency error regarding linux kernel.</p><p>For example:<br /></p><div class="codebox"><pre><code>satisfy_dependencies_for: Cannot satisfy the following dependencies for freifunk-p2pblock:
 *     kernel (= 3.18.20-1-d18786f7b70aa80793e6f77c59ad223e) *     kernel (= 3.18.20-1-d18786f7b70aa80793e6f77c59ad223e) *     kernel (= 3.18.20-1-d18786f7b70aa80793e6f77c59ad223e) *     kernel (= 3.18.20-1-d18786f7b70aa80793e6f77c59ad223e) * 
 * opkg_install_cmd: Cannot install package freifunk-p2pblock.</code></pre></div><p>My build has kernel 3.18.21.<br />I used this to clone the source:<br />git clone git://git.openwrt.org/15.05/openwrt.git</p><p>In the log <a href="http://git.openwrt.org/?p=15.05/openwrt.git;a=log">http://git.openwrt.org/?p=15.05/openwrt.git;a=log</a><br />There was a kernel push to 3.18.21 on Fri, 11 Sep 2015 12:48:34 +0200 </p><p>The files at <br /><a href="https://downloads.openwrt.org/chaos_calmer/15.05/mvebu/generic/">https://downloads.openwrt.org/chaos_cal … u/generic/</a> <br />were pushed 10-Sep-2015 19:32.</p><p>So there are older and containing the older kernel ?<br />Will the packages be updated? Or do i have to include all packages i need into my build?<br />If there are not updated can i use the snapshot from 4 days ago from here<br /><a href="http://git.openwrt.org/?p=15.05/openwrt.git;a=summary">http://git.openwrt.org/?p=15.05/openwrt.git;a=summary</a> ?</p><p>Also if someone is struggling compiling cake. there is an error in sch_cake.c which breaks compiling on kernel version &lt;= 4.0.0<br />line 211 and 220: it must be <br />#if LINUX_VERSION_CODE &lt;= KERNEL_VERSION(4,0,0)<br />because there is no skb_get_hash_perturb in kernel &lt;= 4.0.0</p><p>It was right a week ago but the dev changed it this way dunno why.<br /><a href="https://github.com/dtaht/sch_cake/commit/942b944ba4d3f11a4be867ee2ada91e84f782dd1">https://github.com/dtaht/sch_cake/commi … e84f782dd1</a></p><br /><p>Thank you.</p>											<p class="post-edited">(Last edited by <strong>shm0</strong> on 12 Sep 2015, 21:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291507">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						12 Sep 2015, 20:51					</div>
				</div>
				<div class="post-content content">
					<p>You should include all needed package in your build.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291511">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">shm0</div>
					<div class="post-datetime">
						12 Sep 2015, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your answer.<br />Then i have to recompile the complete source every time i need a new package?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291518">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						12 Sep 2015, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>IF it contains kernel modules kmod as dependencies. Normal packages can be installed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291523">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">shm0</div>
					<div class="post-datetime">
						12 Sep 2015, 22:24					</div>
				</div>
				<div class="post-content content">
					<p>Thank you <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /><br />i will try to compile with all packages i need i hope i dont miss something.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>