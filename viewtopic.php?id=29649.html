<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> about subversion question</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p133545">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						20 Apr 2011, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>import the svn-repository error, </p><p><strong><br />root@OpenWrt:/# svn import /tmp/testsvn svn://192.168.20.1/lib/ -m messages<br />Adding&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/tmp/testsvn/network<br />Adding&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;/tmp/testsvn/wireless<br />svn: Corrupt node-revision &#039;0.0.t0-9&#039;<br />svn: Malformed text representation offset line in node-rev<br /></strong></p><br /><br /><br /><p>svnadmin, version 1.6.16 (r1073529)<br />compiled Apr 18 2011, 18:38:13</p><p>svn, version 1.6.16 (r1073529)<br />compiled Apr 18 2011, 18:38:13</p><p>======================================================================<br /><strong>resolved</strong><br />according <a href="http://mail-archives.apache.org/mod_mbox/subversion-users/201101.mbox/%3C66B14FB7D5784002A4AF53A7888B641D@Brostykkevej2%3E">Re: svnserve with corrupt timestamps and malformed text representation</a> , i recompiled the subversion lib and upgrade it will be ok.</p><br /><p>if you dont want or don&#039;t know how to compile, can email to coolslob at 163 dot&nbsp; com, i will send a copy to you!</p><br /><p>first of all, you must run <strong>opkg update</strong> and <strong>opkg install subversion-server</strong><br />second, upload the new files <strong>subversion-libs_1.6.16-2_ar71xx.ipk</strong> to /tmp/ <br />the last, opkg install /tmp/subversion-libs_1.6.16-2_ar71xx.ipk will upgrade.</p>											<p class="post-edited">(Last edited by <strong>coolslob</strong> on 27 Apr 2011, 17:54)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133705">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rincewind</div>
					<div class="post-datetime">
						21 Apr 2011, 19:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have the same problem I think. I had a subversion-server working until I compiled a new build, because I wanted to add openvpn support to my router. <br />My current firmware version is: OpenWrt Firmware Attitude Adjustment (r26716) / LuCI Trunk 0.10+svn6987<br />also compiled on 2011-04-18 13:52:25 CEST<br />I have a D-Link DIR-825 rev. B1.&nbsp; (architecture ar71xx)<br />Same svn version as you.<br />Unfortunately I don&#039;t know the version when it was still working. I created a backup with Luci before updating the router. Can I look up the firmware-version in the backup file somewhere?</p><p>Here is how i can reproduce the error:<br /></p><div class="codebox"><pre><code>$ svn mkdir test
A         test
$ svn commit test -m &quot;some text&quot;
Hinzufügen     test
svn: Übertragen schlug fehl (Details folgen):
svn: Corrupt node-revision &#039;0.0.t0-2&#039;
svn: Malformed text representation offset line in node-rev</code></pre></div><p>Please let me know if i should add more information.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133779">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						22 Apr 2011, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Subject &nbsp; &nbsp; Re: svnserve with corrupt timestamps and malformed text representation</p><br /><p><a href="http://mail-archives.apache.org/mod_mbox/subversion-users/201101.mbox/%3C66B14FB7D5784002A4AF53A7888B641D@Brostykkevej2%3E">http://mail-archives.apache.org/mod_mbo … kkevej2%3E</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133795">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rincewind</div>
					<div class="post-datetime">
						22 Apr 2011, 21:49					</div>
				</div>
				<div class="post-content content">
					<p>If this is causing the error, then I guess I can checkout the openwrt source, edit the files as described in the post and try if it works ...<br />I&#039;ll try it next week, don&#039;t have access to my router at the moment ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133806">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						22 Apr 2011, 23:33					</div>
				</div>
				<div class="post-content content">
					<p>Please create a ticket and mention the link above. Might be an issue introduced by the new Linaro gcc.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133832">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">rincewind</div>
					<div class="post-datetime">
						23 Apr 2011, 12:22					</div>
				</div>
				<div class="post-content content">
					<p>I created the ticket: <a href="https://dev.openwrt.org/ticket/9287">https://dev.openwrt.org/ticket/9287</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133872">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						24 Apr 2011, 08:47					</div>
				</div>
				<div class="post-content content">
					<p>@rincewind, thanks! </p><br /><br /><p>resolved.</p>											<p class="post-edited">(Last edited by <strong>coolslob</strong> on 24 Apr 2011, 14:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133893">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						24 Apr 2011, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>Unfortunately, a other bug coming,&nbsp; svn log result, no auther, no date, no log message</p><br /><br /><p>root@OpenWrt:/tmp/lib/lib# svn log<br />------------------------------------------------------------------------<br />r8 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r7 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r6 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r5 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r4 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r3 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r2 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------<br />r1 | (no author) | (no date) | 1 line</p><br /><p>------------------------------------------------------------------------</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133894">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">coolslob</div>
					<div class="post-datetime">
						24 Apr 2011, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>sorry, it&#039;s my mistake , </p><p>modify svnserve.conf file&nbsp; <strong>anon-access = none</strong></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142582">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">????</div>
					<div class="post-datetime">
						31 Aug 2011, 10:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rincewind wrote:</cite><blockquote><p>Hi,</p><p>I have the same problem I think. I had a subversion-server working until I compiled a new build, because I wanted to add openvpn support to my router. <br />My current firmware version is: OpenWrt Firmware Attitude Adjustment (r26716) / LuCI Trunk 0.10+svn6987<br />also compiled on 2011-04-18 13:52:25 CEST<br />I have a D-Link DIR-825 rev. B1.&nbsp; (architecture ar71xx)<br />Same svn version as you.<br />Unfortunately I don&#039;t know the version when it was still working. I created a backup with Luci before updating the router. Can I look up the firmware-version in the backup file somewhere?</p><p>Here is how i can reproduce the error:<br /></p><div class="codebox"><pre><code>$ svn mkdir test
A         test
$ svn commit test -m &quot;some text&quot;
Hinzufügen     test
svn: Übertragen schlug fehl (Details folgen):
svn: Corrupt node-revision &#039;0.0.t0-2&#039;
svn: Malformed text representation offset line in node-rev</code></pre></div><p>Please let me know if i should add more information.</p></blockquote></div><p>To anyone experiencing the error described by rincewind:</p><p><a href="https://dev.openwrt.org/ticket/9287#comment:5">https://dev.openwrt.org/ticket/9287#comment:5</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p142827">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">peejaybee</div>
					<div class="post-datetime">
						4 Sep 2011, 08:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>???? wrote:</cite><blockquote><p>To anyone experiencing the error described by rincewind:</p><p><a href="https://dev.openwrt.org/ticket/9287#comment:5">https://dev.openwrt.org/ticket/9287#comment:5</a></p></blockquote></div><p>This worked for me on the Backfire branch, too. It took me a while to learn how to use quilt correctly to do this. The info at <a href="http://wiki.openwrt.org/doc/devel/patches">http://wiki.openwrt.org/doc/devel/patches</a> is good, but you will want to save the patch to a file and use <br /></p><div class="codebox"><pre><code>quilt import -P 002-timeformat.patch whatever_i_saved_the_patch_as.txt</code></pre></div><p>instead of the new or edit commands.</p><p>I ended up reinstalling libapr, libaprutil, and subversion-libs.&nbsp; I am not sure all that was necessary, but that is the order I installed them in, and the error did not disappear until subversion-libs was installed.</p><p>Thanks, ????!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p147635">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						5 Nov 2011, 03:59					</div>
				</div>
				<div class="post-content content">
					<p>Should be fixed in r28760 in AA. Since the fix is a bit different (forcing Large File Support in apr), can you confirm this issue is resolved?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p147700">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">????</div>
					<div class="post-datetime">
						5 Nov 2011, 18:30					</div>
				</div>
				<div class="post-content content">
					<p>[size=12]I can confirm that the issue has been fixed in the changesets <a href="https://dev.openwrt.org/changeset/28763">r28763</a> (<em>apr</em>), <a href="https://dev.openwrt.org/changeset/28764">r28764</a> (<em>apr-util</em>) and <a href="https://dev.openwrt.org/changeset/28765">r28765</a> (<em>subversion</em>) by forcing use of LFS and 64-bit off_t (thanks to <em>Nico</em>).</p><p>I have done some extra testing and (at least in my case) with the changesets mentioned above, the patch <a href="https://dev.openwrt.org/browser/packages/libs/apr/patches/101-fix_apr_time_now.patch?rev=28760">101-fix_apr_time_now.patch</a> introduced at <a href="https://dev.openwrt.org/changeset/28760">r28760</a> (<em>apr</em>) is not needed.</p><p>With or without the patch, and rebuilding <em>apr</em>, <em>apr-util</em> and <em>subversion</em> packages, svnserve works without any issues.</p><p>Kind regards.[/size]</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>