<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDR3700: GNU/Screen + irssi and SSH from outside the network?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p133078">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						15 Apr 2011, 08:04					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve been looking to buy a Netgear WNDR3700 and most likely putting OpenWrt on it. The main reason for ditching the stock firmware would be to use it to run a screen with irssi on it. The server I run it on now (on a friends connection) drops from the irc-networks a short while now and then. I read the <a href="https://forum.openwrt.org/viewtopic.php?id=11858">HowTo</a> but that didn&#039;t say much more than that it was possible and how to install it.</p><p>My questions are the following:</p><p>1. How well does irssi + screen run on this router? Does it slow down routing performance noticably? The heaviest load will be on the wired LAN interface with 100/100 connection (which from what I understand is normally well below it&#039;s thoughput capabilities).</p><p>2. Are there any problems configuring dropbear to allow SSH connections from the internet into the router logging in as the user running the screen? (Naturally I would like to avoid running it as root but I don&#039;t know how OpenWrt differs from a normal Linux box in this regard.)</p><p>3. How stable is the above config (assuming the internet connection doesn&#039;t drop)? How stable is OpenWrt in general on this router? I would guess some devices have more polished code when it comes to drivers etc.</p><p>4. Anyone with experiance from the above? If so, how did it work? I would think it&#039;s not that uncommon to want to do that but my search-fu failed me this time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133088">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						15 Apr 2011, 11:02					</div>
				</div>
				<div class="post-content content">
					<p>1. You are seriously underestimating this router. It has 680MHz MIPS and 64MB RAM. It will run irssi and screen with 0% CPU utilization <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />2. Yes you can run it as a user, OpenWrt is a normal Linux distribution.<br />3. I&#039;m using my WNDR3700 as a NAS. 100% stable using OpenWrt trunk.<br />4. Pretty much any router will do what you need it to do.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133114">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						15 Apr 2011, 16:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>1. You are seriously underestimating this router. It has 680MHz MIPS and 64MB RAM. It will run irssi and screen with 0% CPU utilization <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>You are probably right. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> I&#039;ve just never had a device with a MIPS processor that allowed installation of custom software packages so I have no feel for what kind of performance later versions of the MIPS architecture deliver at a certain clockfrequency.</p><div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>2. Yes you can run it as a user, OpenWrt is a normal Linux distribution.</p></blockquote></div><p>Great.</p><div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>3. I&#039;m using my WNDR3700 as a NAS. 100% stable using OpenWrt trunk.</p></blockquote></div><p>A NAS and a router I assume? Are the trunk builds normally nice and stable or are they kind of a hit and miss?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133116">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						15 Apr 2011, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>I used to run bitchx in a screen on my 486 25MHz, it&#039;s very lightweight <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> It&#039;s as stable as any other Linux distribution. Probably more, as it&#039;s using uClibc and only a handful of services. Check out my build if you want a quickstart: <a href="https://forum.openwrt.org/viewtopic.php?id=27722">https://forum.openwrt.org/viewtopic.php?id=27722</a></p>											<p class="post-edited">(Last edited by <strong>arokh</strong> on 15 Apr 2011, 16:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133120">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						15 Apr 2011, 16:51					</div>
				</div>
				<div class="post-content content">
					<p>I found that thread via another forum before. My understanding was that it was only for the v1 version, not the v2 which I&#039;m pretty is the version that will be delivered. Is that no longer the case? I have admittedly not read through that entire thread as of yet.</p><p>If it works for the v2, then it looks great. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Also, I noticed that they were squashfs builds. Is the rest of the space used for jffs2 in that case? If so, is ~ mounted as jffs2 to allow for things like screen and irssi configs?</p>											<p class="post-edited">(Last edited by <strong>blunden</strong> on 15 Apr 2011, 17:24)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133140">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						15 Apr 2011, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>There are builds for both <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> / is an overlay of both the squashfs and jffs2 partitions, that way you can seemingly write to a read-only filesystem. There&#039;s under a megabyte of space left though, so you won&#039;t have place for much. Actually, if you want to run irssi, you&#039;ll need the dependencies of libncurses, glib2, libpthread and libopenssl. Together that&#039;s a lot more than you can squeeze in there, so you&#039;ll have to add USB storage. Check out the wiki for more information:</p><p><a href="http://wiki.openwrt.org/doc/techref/filesystems">http://wiki.openwrt.org/doc/techref/filesystems</a><br /><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133153">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						16 Apr 2011, 03:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>There are builds for both <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> / is an overlay of both the squashfs and jffs2 partitions, that way you can seemingly write to a read-only filesystem. There&#039;s under a megabyte of space left though, so you won&#039;t have place for much. Actually, if you want to run irssi, you&#039;ll need the dependencies of libncurses, glib2, libpthread and libopenssl. Together that&#039;s a lot more than you can squeeze in there, so you&#039;ll have to add USB storage. Check out the wiki for more information:</p><p><a href="http://wiki.openwrt.org/doc/techref/filesystems">http://wiki.openwrt.org/doc/techref/filesystems</a><br /><a href="http://wiki.openwrt.org/doc/howto/extroot">http://wiki.openwrt.org/doc/howto/extroot</a></p></blockquote></div><p>Just because your builds include so many features or even with a stock build? I had hoped to avoid having a thumbdrive connected all the time. I figured since your builds were originally for the v1 it would only be 8 MB and the v2 has 16 MB from what i understand. Roughly how big are the needed libs?</p><p>How much storage would you suggest? I have a couple of spare usb thumbdrives lying around I guess but I want to avoid having them sticking out. A 4GB stick like the one below can be found relatively cheap. Even 4GB is overkill though, right? Are there any really large packages? Thanks for your insight so far btw. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p><span class="postimg"><img src="http://s3.pji.nu/product/standard/800/495742.jpg" alt="http://s3.pji.nu/product/standard/800/495742.jpg" /></span></p>											<p class="post-edited">(Last edited by <strong>blunden</strong> on 16 Apr 2011, 03:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133196">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Andrew916</div>
					<div class="post-datetime">
						16 Apr 2011, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>I just bought the WNDR3700(v2) and configured it for ssh tunneling.&nbsp; I&#039;ve noticed that when there are no more connections on the LAN the WAN goes to sleep.&nbsp; From the inside, the router is 100% stable but when used as strictly a server open to the outside, the connections are less than stable.&nbsp; I&#039;m still hoping there is some networking script I can edit to fix this but I haven&#039;t found a solution yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133239">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						17 Apr 2011, 12:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Andrew916 wrote:</cite><blockquote><p>I just bought the WNDR3700(v2) and configured it for ssh tunneling.&nbsp; I&#039;ve noticed that when there are no more connections on the LAN the WAN goes to sleep.&nbsp; From the inside, the router is 100% stable but when used as strictly a server open to the outside, the connections are less than stable.&nbsp; I&#039;m still hoping there is some networking script I can edit to fix this but I haven&#039;t found a solution yet.</p></blockquote></div><p>That doesn&#039;t sound good. Be sure to let me know if you find anything to fix it. I am still waiting for delivery of the router (stupid weekend getting in the way <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />) but I&#039;ll check when I get it.</p>											<p class="post-edited">(Last edited by <strong>blunden</strong> on 17 Apr 2011, 13:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133256">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						17 Apr 2011, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>Slipped my mind that you have the V2, it has 16MB ROM so you should have enough space.</p><p>@Andrew916</p><p>The WAN should not &quot;go to sleep&quot; obviously. There&#039;s no power saving functions that turns off the internet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> You should look at the logs and troubleshoot before you conclude that the router is unstable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133265">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Andrew916</div>
					<div class="post-datetime">
						17 Apr 2011, 19:51					</div>
				</div>
				<div class="post-content content">
					<p>@arokh</p><p>Here&#039;s what I&#039;m seeing when all of the computers on the LAN are turned off...</p><p>br-lan: port 3(wlan1) entering disabled state<br />device wlan0 left promiscuous mode<br />br-lan: port 2(wlan0) entering disabled state<br />device eth0.1 left promiscuous mode<br />br-lan: port 1(eth0.1) entering disabled state<br />eth1: link down</p><p>Of course, once eth1 is brought down, my router is unreachable from the internet.&nbsp; Any activity on the LAN (or the router itself) will bring eth1 back up.&nbsp; And you&#039;re right, &#039;less than stable&#039; was probably the wrong term to use for this problem.&nbsp; Unreliable from the outside would have been more accurate.</p><p>Are you not seeing something similar in your logs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133293">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						18 Apr 2011, 01:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>arokh wrote:</cite><blockquote><p>Slipped my mind that you have the V2, it has 16MB ROM so you should have enough space.</p><p>@Andrew916</p><p>The WAN should not &quot;go to sleep&quot; obviously. There&#039;s no power saving functions that turns off the internet <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> You should look at the logs and troubleshoot before you conclude that the router is unstable.</p></blockquote></div><p>Ah well, I already purchased the thumbdrive now anyway. I can probably cancel the order if I want but might come in handy later if 16 MB is turns out to be a bit too small.</p><p><strong>Andrew916:</strong> Hmm, looks bad. Roughly how long period of inactivity does it take to trigger that for you?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133297">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Andrew916</div>
					<div class="post-datetime">
						18 Apr 2011, 04:15					</div>
				</div>
				<div class="post-content content">
					<p>Somewhere around a minute.&nbsp; I can access it though if I wait for the router to go out to the internet.&nbsp; So when I&#039;m not at home I have a script that pings the router and if there is a response I establish the tunnel.&nbsp; If there is no response it repeats.&nbsp; I think the longest I&#039;ve ever seen it dead to the world was about fifteen minutes.&nbsp; It sucks and I can&#039;t wait until I find what&#039;s causing it.&nbsp; I know it&#039;s fixable somehow.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133354">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						18 Apr 2011, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>@Andrew916</p><p>No, I&#039;m not seeing that behaviour. The problem is most likely specific for you, so no, the router is not unstable/unreliable in a general sense. Like I said, start with checking the logs (i.e. syslog). My advice is start a thread, describe your problem and provide all the info you can. Don&#039;t jump other threads claiming the router is unstable lol <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133402">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ccdoggy</div>
					<div class="post-datetime">
						18 Apr 2011, 23:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Andrew916 wrote:</cite><blockquote><p>Somewhere around a minute.&nbsp; I can access it though if I wait for the router to go out to the internet.&nbsp; So when I&#039;m not at home I have a script that pings the router and if there is a response I establish the tunnel.&nbsp; If there is no response it repeats.&nbsp; I think the longest I&#039;ve ever seen it dead to the world was about fifteen minutes.&nbsp; It sucks and I can&#039;t wait until I find what&#039;s causing it.&nbsp; I know it&#039;s fixable somehow.</p></blockquote></div><p>Could it be the modem? just thinking that I have seen some with a power saving feature which might partially disable the internet link when there is no traffic to save bandwith and power on the ISP&#039;s side.&nbsp; chances are thats not the problem, but could be worth a shot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133407">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						19 Apr 2011, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>I noticed that the irssi binary built for doesn&#039;t support perl. Checking around in #openwrt it seems several people had problem running the binaries they cross-compiled. To compile ipk-packages, what do I need? Is it the same build environment as described in the wiki for building the firmware images?</p><p>Also, which charset is used by the built in terminal by default? ISO-8859-1?</p>											<p class="post-edited">(Last edited by <strong>blunden</strong> on 19 Apr 2011, 16:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133529">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">Andrew916</div>
					<div class="post-datetime">
						20 Apr 2011, 04:29					</div>
				</div>
				<div class="post-content content">
					<p>Thank you ccdoggy for helping me with my problem.&nbsp; It was in fact the modem.&nbsp; Blunden, enjoy your new router! As of r26627, everything is working as expected.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p133534">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">blunden</div>
					<div class="post-datetime">
						20 Apr 2011, 05:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Andrew916 wrote:</cite><blockquote><p>Thank you ccdoggy for helping me with my problem.&nbsp; It was in fact the modem.&nbsp; Blunden, enjoy your new router! As of r26627, everything is working as expected.</p></blockquote></div><p>Great to hear you solved your problem. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Thanks, I&#039;m already enjoying messing around with it. If I could only get the irssi perl support and character encoding fixed it would be awesome.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>