<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> D-Link DWR 921 support</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Apr 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=51451&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=51451&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=51451&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p363007">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						1 Aug 2017, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>@tmo26<br />In my opinion make sense to have only a common dwr921 page covering all the possible hw rev.<br />therefo imho:<br />1) should be deleted<br />2) rename (if possible) <a href="https://wiki.openwrt.org/inbox/d-link/d-link_dwr-921_c1">https://wiki.openwrt.org/inbox/d-link/d-link_dwr-921_c1</a> in <a href="https://wiki.openwrt.org/inbox/d-link/d-link_dwr-921">https://wiki.openwrt.org/inbox/d-link/d-link_dwr-921</a><br />3) delete <a href="https://wiki.openwrt.org/inbox/d-link/d-link_dwr-921_b1.">https://wiki.openwrt.org/inbox/d-link/d … wr-921_b1.</a></p><p>@comdek<br />to reduce the flash time you can conviniently use the layout feature in flashrom to reflash the bootloader partition only. you should use a cmdline like this:<br />flashrom -p ft2232_spi:type=232H,divisor=10 -r rbimage.bin -l prom_layout -i uboot</p><p>Bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363021">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						1 Aug 2017, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>1) done<br />2) +3) b1 and c1 have different SoCs. Which similarities would justify showing all versions on one page, instead of different pages for different versions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363026">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						1 Aug 2017, 23:53					</div>
				</div>
				<div class="post-content content">
					<p>You are right the SoC are different, but this is transparent for the user (they only need to select the proper image).<br />The HW (serial jtag led buttons modem ...), Pictures, flash layout, bootloader (replacement) are the same or very similar.</p><p>But as I tell you, this is only my HO.</p><p>Bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363041">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						2 Aug 2017, 06:38					</div>
				</div>
				<div class="post-content content">
					<p>Well, no luck to restore the router. After several tries with PICKIT2, i tried using the OrangePi with SPI pins connected with the flash. I have desoldered the VCC pin from board and connect to the programmer.<br />The flashrom was worked very well in this time, all data was been programmed and verified with success.</p><p>But when turn on the router, no data is coming in rs232 interface. The strengh led flashes and only power led stays on.</p><div class="codebox"><pre><code>root@orangepizero:~# ./flashrom-0.9.9/flashrom -p linux_spi:dev=/dev/spidev1.0 -w full.bin
flashrom v0.9.9-r1955 on Linux 3.4.113-sun8i (armv7l)
flashrom is free software, get the source code at https://flashrom.org

Calibrating delay loop... OK.
Found Winbond flash chip &quot;W25Q128.V&quot; (16384 kB, SPI) on linux_spi.
Reading old flash chip contents... done.
Erasing and writing flash chip...
Erase/write done.
Verifying flash... VERIFIED.


root@orangepizero:~# ./flashrom-0.9.9/flashrom -p linux_spi:dev=/dev/spidev1.0 -r down.bin
flashrom v0.9.9-r1955 on Linux 3.4.113-sun8i (armv7l)
flashrom is free software, get the source code at https://flashrom.org

Calibrating delay loop... OK.
Found Winbond flash chip &quot;W25Q128.V&quot; (16384 kB, SPI) on linux_spi.
Reading flash... done.

root@orangepizero:~# md5sum down.bin
d03f9bdfecdb9908960614e550407016  down.bin
root@orangepizero:~# md5sum full.bin
d03f9bdfecdb9908960614e550407016  full.bin

root@orangepizero:~# hexdump -C down.bin |more
00000000  ff 00 00 10 00 00 00 00  fd 00 00 10 00 00 00 00  |................|
00000010  95 02 00 10 00 00 00 00  93 02 00 10 00 00 00 00  |................|
00000020  91 02 00 10 00 00 00 00  8f 02 00 10 00 00 00 00  |................|
00000030  8d 02 00 10 00 00 00 00  8b 02 00 10 00 00 00 00  |................|
00000040  89 02 00 10 00 00 00 00  87 02 00 10 00 00 00 00  |................|
00000050  85 02 00 10 00 00 00 00  83 02 00 10 00 00 00 00  |................|
00000060  81 02 00 10 00 00 00 00  7f 02 00 10 00 00 00 00  |................|
00000070  7d 02 00 10 00 00 00 00  7b 02 00 10 00 00 00 00  |}.......{.......|
00000080  79 02 00 10 00 00 00 00  77 02 00 10 00 00 00 00  |y.......w.......|
00000090  75 02 00 10 00 00 00 00  73 02 00 10 00 00 00 00  |u.......s.......|
000000a0  71 02 00 10 00 00 00 00  6f 02 00 10 00 00 00 00  |q.......o.......|
000000b0  6d 02 00 10 00 00 00 00  6b 02 00 10 00 00 00 00  |m.......k.......|
000000c0  69 02 00 10 00 00 00 00  67 02 00 10 00 00 00 00  |i.......g.......|
000000d0  65 02 00 10 00 00 00 00  63 02 00 10 00 00 00 00  |e.......c.......|
000000e0  61 02 00 10 00 00 00 00  5f 02 00 10 00 00 00 00  |a......._.......|
000000f0  5d 02 00 10 00 00 00 00  5b 02 00 10 00 00 00 00  |].......[.......|
00000100  59 02 00 10 00 00 00 00  57 02 00 10 00 00 00 00  |Y.......W.......|
00000110  55 02 00 10 00 00 00 00  53 02 00 10 00 00 00 00  |U.......S.......|
00000120  51 02 00 10 00 00 00 00  4f 02 00 10 00 00 00 00  |Q.......O.......|</code></pre></div><p>I think maybe the problem is in the bootloader code that I have dumped using the mtd_debug.</p><p>About the uboot image, I had tested it before but it did not work with my compiling. There any uboot of the DWR921 C1 compiled to I test by burning directly to the flash?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363079">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						2 Aug 2017, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi comdek,<br />I compiled the uboot found here: github.com:tessel/uboot-mt7620.git.<br />But I cannot test currently because I do not have access to the flash (I do not have time to remove the shild). I will probably test it after my sommer break.</p><p>So If you want to test it now, you can download it from here:<br /><a href="https://filebin.net/qckqfkh9t4d2mhyg">https://filebin.net/qckqfkh9t4d2mhyg</a></p><p>Do not expect that it works properly, it is not specific for the dwr921 hw C1.</p><br /><p>@tmo26, <br />an additional argument to have a single device page is that the, user became aware of the different hw revision and which one is really supported.</p><p>Bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363081">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						2 Aug 2017, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi fidofido,</p><p>I think that I found the problem. I´ve copied the firmwares from Windows to Linux using TFTP Server, but I don´t now why the files lost some bytes in copy ~200B, corrupting the dump.</p><p>Now I copyed using FTP and write with success. In night I´ll test if works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363091">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						3 Aug 2017, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>IT´S ALIVE!!!!</p><div class="codebox"><pre><code>CTG560DL_0T3 Jboot B893
JRecovery Version R1.2 2014/07/28 12:43
spi device id: ef 40 18 0 0 (40180000)
SPI FLASH: W25Q128FV 16M
.
..................
Starting kernel @80000000...

LINUX started...

 THIS IS ASIC
Linux version 2.6.36 (jay@RD1) (gcc version 4.3.5 (Buildroot 2011.05) ) #6 Fri Mar 6 19:59:24 CST 2015
CMD_LINE:console=ttyS1,57600n8 root=/dev/mtdblock3</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363092">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						3 Aug 2017, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>Now the tests with uboot that you send to me<br /></p><div class="codebox"><pre><code># ./mtd_debug erase /dev/mtd0 0 0x50000
Erased 327680 bytes from address 0x00000000 in flash
# ./mtd_debug write /dev/mtd0 0 0x1775C uboot.bin
Copied 96092 bytes from uboot.bin to address 0x00000000 in flash
#</code></pre></div><p>Boot</p><div class="codebox"><pre><code>U-Boot 1.1.3 (Aug  2 2017 - 18:52:36)

Board: Ralink APSoC DRAM:  64 MB
rt2880 uboot v0.00e04 05/25/2006
SERIAL_CLOCK_DIVISOR =16
kaiker,,CONFIG_BAUDRATE =115200
SDRAM SIZE:04000000
Top of RAM usable for U-Boot at: 84000000
Reserving 286k for U-Boot at: 83fb8000
Reserving 260k for malloc() at: 83f77000
Reserving 44 Bytes for Board Info at: 83f76fd4
Reserving 36 Bytes for Global Data at: 83f76fb0
Reserving 128k for boot params() at: 83f56fb0
Stack Pointer at: 83f56f98
relocate_code Pointer at: 83fb8000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.
Now running in RAM - U-Boot at: 83fb8000

 monitor_flash_len =96092
Command &quot;rf&quot;: 0xbc002148 =&gt; 0x83fba148
Command &quot;mdio&quot;: 0xbc0061a8 =&gt; 0x83fbe1a8
Command &quot;erase&quot;: 0xbc007d84 =&gt; 0x83fbfd84
Command &quot;cp&quot;: 0xbc007c58 =&gt; 0x83fbfc58
Command &quot;reset&quot;: 0xbc012d70 =&gt; 0x83fcad70
Command &quot;go&quot;: 0xbc008080 =&gt; 0x83fc0080
Command &quot;bootm&quot;: 0xbc008734 =&gt; 0x83fc0734
Command &quot;loadb&quot;: 0xbc009454 =&gt; 0x83fc1454
Command &quot;tftpboot&quot;: 0xbc009aa0 =&gt; 0x83fc1aa0
Command &quot;nm&quot;: 0xbc00a658 =&gt; 0x83fc2658
Command &quot;mm&quot;: 0xbc00a6a0 =&gt; 0x83fc26a0
Command &quot;md&quot;: 0xbc009f88 =&gt; 0x83fc1f88
Command &quot;saveenv&quot;: 0xbc00b294 =&gt; 0x83fc3294
Command &quot;setenv&quot;: 0xbc00b148 =&gt; 0x83fc3148
Command &quot;printenv&quot;: 0xbc00a794 =&gt; 0x83fc2794
Command &quot;?&quot;: 0xbc00b450 =&gt; 0x83fc3450
Command &quot;help&quot;: 0xbc00b450 =&gt; 0x83fc3450
Command &quot;version&quot;: 0xbc00b2f0 =&gt; 0x83fc32f0
spi_wait_nsec: 29
spi device id: ef 40 18 0 0 (40180000)
Warning: un-recognized chip ID, please update bootloader!
raspi_read: from:30000 len:1000
*** Warning - bad CRC, using default environment

============================================
Ralink UBoot Version: 4.1.1.0
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Aug  2 2017  Time:18:52:36
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes

3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40
Bad Magic Number,9640727A</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363097">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						3 Aug 2017, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>Uboot with compiled <a href="https://github.com/David-Jin/mt7620-uboot">https://github.com/David-Jin/mt7620-uboot</a></p><div class="codebox"><pre><code>U-Boot 1.1.3 (Aug  2 2017 - 18:02:21)

Board: Ralink APSoC DRAM:  64 MB
GPIO#44 updated GPIOMODE register: 001a311c -&gt; 001ab11c
MT7620 gpio init : WPS / RESET pin
GPIO#2 updated GPIOMODE register: 001ab11c -&gt; 001ab11d
relocate_code Pointer at: 83fac000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.
spi_wait_nsec: 29
spi device id: ef 40 18 0 0 (40180000)
find flash: W25Q128FV
raspi_read: from:30000 len:1000
*** Warning - bad CRC, using default environment

============================================
U-Boot_mt7620 Version: 0.0.0.1
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Aug  2 2017  Time:18:02:21
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes

Press press WPS button for more than 2 seconds to run web failsafe mode

WPS button is pressed for:  0 second(s)

Catution: WPS button wasn&#039;t pressed or not long enough!
Continuing normal boot...

raspi_read: from:40028 len:6
raspi_read: from:40000 len:80
The device has not been encrypt!
Using default MAC address [00:03:14:15:92:65].


================================================================
Please choose the operation:
   0: System Load Linux then write to Flash via Serial.
   1: Load system code to SDRAM via TFTP.
   2: Load system code then write to Flash via TFTP.
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load Boot Loader code then write to Flash via Serial.
   8: System Load UBoot to SDRAM via TFTP.
   9: Load Boot Loader code then write to Flash via TFTP.
================================================================              0

3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40
Bad Magic Number,9640727A</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363098">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						3 Aug 2017, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>This uboot wokrs very well with DWR-922, the HTTP works after press WPS button.</p><p><span class="postimg"><img src="https://cdn.pbrd.co/images/GDQCqie.png" alt="https://cdn.pbrd.co/images/GDQCqie.png" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363128">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						3 Aug 2017, 23:40					</div>
				</div>
				<div class="post-content content">
					<p>comdek,<br />good job.<br />Soon I will have a preliminary image for the uboot.<br />I need your help to test it (currently I cannot flash).</p><p>It will be for the dwr 921 hwrev c1, but probably will work also in your dwr 922.<br />by the way why not prepare a wiki page for the dwr922 ?</p><p>Stay tuned.<br />Bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363131">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						4 Aug 2017, 00:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fidodido wrote:</cite><blockquote><p>comdek,<br />good job.<br />Soon I will have a preliminary image for the uboot.<br />I need your help to test it (currently I cannot flash).</p><p>It will be for the dwr 921 hwrev c1, but probably will work also in your dwr 922.<br />by the way why not prepare a wiki page for the dwr922 ?</p><p>Stay tuned.<br />Bye.</p></blockquote></div><p>Fidodido,</p><p>I will be seeing to prepare a page for DWR922 soon.</p><p>Today I compiled your led-project image and uploaded the sysupgrade pro router.<br />Introduced kernel panic at the end, but failsafe works.</p><p>Now I&#039;m going to analyze what&#039;s going on.</p><div class="codebox"><pre><code>U-Boot 1.1.3 (Aug  2 2017 - 18:02:21)

Board: Ralink APSoC DRAM:  64 MB
GPIO#44 updated GPIOMODE register: 001a311c -&gt; 001ab11c
MT7620 gpio init : WPS / RESET pin
GPIO#2 updated GPIOMODE register: 001ab11c -&gt; 001ab11d
relocate_code Pointer at: 83fac000
enable ephy clock...done. rf reg 29 = 5
SSC disabled.
spi_wait_nsec: 29
spi device id: ef 40 18 0 0 (40180000)
find flash: W25Q128FV
raspi_read: from:30000 len:1000
*** Warning - bad CRC, using default environment

============================================
U-Boot_mt7620 Version: 0.0.0.1
--------------------------------------------
ASIC 7620_MP (Port5&lt;-&gt;None)
DRAM component: 512 Mbits DDR, width 16
DRAM bus: 16 bit
Total memory: 64 MBytes
Flash component: SPI Flash
Date:Aug  2 2017  Time:18:02:21
============================================
icache: sets:512, ways:4, linesz:32 ,total:65536
dcache: sets:256, ways:4, linesz:32 ,total:32768

 ##### The CPU freq = 580 MHZ ####
 estimate memory size =64 Mbytes

Press press WPS button for more than 2 seconds to run web failsafe mode

WPS button is pressed for:  0 second(s)

Catution: WPS button wasn&#039;t pressed or not long enough!
Continuing normal boot...

raspi_read: from:40028 len:6
raspi_read: from:40000 len:80
The device has not been encrypt!
Using default MAC address [00:03:14:15:92:65].


================================================================
Please choose the operation:
   0: System Load Linux then write to Flash via Serial.
   1: Load system code to SDRAM via TFTP.
   2: Load system code then write to Flash via TFTP.
   3: Boot system code via Flash (default).
   4: Entr boot command line interface.
   7: Load Boot Loader code then write to Flash via Serial.
   8: System Load UBoot to SDRAM via TFTP.
   9: Load Boot Loader code then write to Flash via TFTP.
================================================================              0

3: System Boot system code via Flash.
## Booting image at bc050000 ...
raspi_read: from:50000 len:40
   Image Name:   MIPS LEDE Linux-4.4.50
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1259340 Bytes =  1.2 MB
   Load Address: 80000000
   Entry Point:  80000000
raspi_read: from:50040 len:13374c
   Verifying Checksum ... OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80000000) ...
## Giving linux memsize in MB, 64

Starting kernel ...

[    0.000000] Linux version 4.4.50 (root@localhost.localdomain) (gcc version 5.4.0 (LEDE GCC 5.4.0 r3584-19eba67) ) #0 Mon Mar 13 19:23:08 2017
[    0.000000] Board has DDR1
[    0.000000] Analog PMU set to hw control
[    0.000000] Digital PMU set to hw control
[    0.000000] SoC Type: MediaTek MT7620N ver:2 eco:6
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 00019650 (MIPS 24KEc)
[    0.000000] MIPS: machine is D-Link DWR-921
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Initmem setup node 0 [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00067af0
[    0.000000] Readback ErrCtl register=00067af0
[    0.000000] Memory: 60776K/65536K available (2894K kernel code, 138K rwdata, 696K rodata, 168K init, 203K bss, 4760K reserved, 0K cma-reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:256
[    0.000000] CPU Clock: 580MHz
[    0.000000] clocksource: systick: mask: 0xffff max_cycles: 0xffff, max_idle_ns: 583261500 ns
[    0.000000] systick: enable autosleep mode
[    0.000000] systick: running - mult: 214748, shift: 32
[    0.000000] clocksource: MIPS: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6590553264 ns
[    0.000011] sched_clock: 32 bits at 290MHz, resolution 3ns, wraps every 7405115902ns
[    0.007564] Calibrating delay loop... 385.84 BogoMIPS (lpj=1929216)
[    0.070073] pid_max: default: 32768 minimum: 301
[    0.074695] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.081066] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.093261] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.102964] pinctrl core: initialized pinctrl subsystem
[    0.108679] NET: Registered protocol family 16
[    0.130752] rt2880_gpio 10000600.gpio: registering 24 gpios
[    0.136191] rt2880_gpio 10000600.gpio: registering 24 irq handlers
[    0.142317] rt2880_gpio 10000660.gpio: registering 32 gpios
[    0.147712] rt2880_gpio 10000660.gpio: registering 32 irq handlers
[    0.153845] rt2880_gpio 10000688.gpio: registering 1 gpios
[    0.159158] rt2880_gpio 10000688.gpio: registering 1 irq handlers
[    0.166585] clocksource: Switched to clocksource systick
[    0.173146] NET: Registered protocol family 2
[    0.178252] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.184979] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.191196] TCP: Hash tables configured (established 1024 bind 1024)
[    0.197418] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.203044] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.209425] NET: Registered protocol family 1
[    0.217662] rt-timer 10000100.timer: maximum frequency is 1220Hz
[    0.224344] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.230388] Crashlog allocated RAM at address 0x3f00000
[    0.250565] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.256180] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.268541] io scheduler noop registered
[    0.272298] io scheduler deadline registered (default)
[    0.277577] ralink-usb-phy usbphy: invalid resource
[    0.282882] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    0.290227] console [ttyS0] disabled
[    0.293673] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20, base_baud = 2500000) is a Palmchip BK-3103

[    0.303662] console [ttyS0] enabled
[    0.317372] bootconsole [early0] disabled
[    0.317372] bootconsole [early0] disabled
[    0.337974] spi spi0.0: force spi mode3
[    0.346134] m25p80 spi0.0: w25q128 (16384 Kbytes)
[    0.355591] 4 ofpart partitions found on MTD device spi0.0
[    0.366524] Creating 4 MTD partitions on &quot;spi0.0&quot;:
[    0.376080] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.387743] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.400150] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.412063] 0x000000050000-0x000001000000 : &quot;firmware&quot;
[    1.745446] 2 uimage-fw partitions found on MTD device firmware
[    1.757284] 0x000000050000-0x00000018378c : &quot;kernel&quot;
[    1.768776] 0x00000018378c-0x000001000000 : &quot;rootfs&quot;
[    1.780498] mtd: device 5 (rootfs) set to be root filesystem
[    1.791972] 1 squashfs-split partitions found on MTD device rootfs
[    1.804318] 0x00000035e000-0x000001000000 : &quot;rootfs_data&quot;
[    1.820073] mtk_soc_eth 10100000.ethernet: generated random MAC address 3e:68:70:75:3a:09
[    1.836492] mtk_soc_eth 10100000.ethernet: loaded mt7620 driver
[    1.849121] mtk_soc_eth 10100000.ethernet eth0: mediatek frame engine at 0xb0100000, irq 5
[    1.866170] rt2880_wdt 10000120.watchdog: Initialized
[    1.877831] NET: Registered protocol family 10
[    1.891057] NET: Registered protocol family 17
[    1.900072] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.925232] 8021q: 802.1Q VLAN Support v1.8
[    1.949040] VFS: Mounted root (squashfs filesystem) readonly on device 31:5.
[    1.964033] Freeing unused kernel memory: 168K (803a6000 - 803d0000)
[    3.990915] init: Console is alive
[    3.998024] init: - watchdog -
[    5.374153] kmodloader: loading kernel modules from /etc/modules-boot.d/*
[    5.471388] kmodloader: done loading kernel modules from /etc/modules-boot.d/*
[    5.487572] init: - preinit -
[    6.410364] 8021q: adding VLAN 0 to HW filter on device eth0
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    6.893463] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[    6.921712] urandom-seed: Seed file not found (/etc/urandom.seed)
[    7.050968] procd: - early -
[    7.057488] procd: - watchdog -
[    7.241160] procd: - ubus -
[    7.259333] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.277823] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.295776] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.314074] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.332075] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.350167] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.368278] random: ubusd: uninitialized urandom read (4 bytes read, 15 bits of entropy available)
[    7.386544] procd: - init -
Please press Enter to activate this console.
[    7.693883] kmodloader: loading kernel modules from /etc/modules.d/*
[    7.712538] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    7.733726] Loading modules backported from Linux version wt-2017-01-31-0-ge882dff19e7f
[    7.749747] Backport generated by backports.git backports-20160324-13-g24da7d3c
[    7.821109] ip_tables: (C) 2000-2006 Netfilter Core Team
[    7.840766] nf_conntrack version 0.5.0 (952 buckets, 3808 max)
[    7.907070] xt_time: kernel timezone is -0000
[    7.926366] PPP generic driver version 2.4.2
[    7.937644] NET: Registered protocol family 24
[    7.963609] rt2800_wmac 10180000.wmac: loaded eeprom from mtd device &quot;factory&quot;
[    7.978091] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5390, rev 0500 detected
[    7.993559] ieee80211 phy0: rt2800_init_eeprom: Error - Invalid RF chipset 0xffff detected
[    8.010037] ieee80211 phy0: rt2x00lib_probe_dev: Error - Failed to allocate device
[    8.025138] ------------[ cut here ]------------
[    8.034363] WARNING: CPU: 0 PID: 380 at mm/vmalloc.c:1460 release_firmware+0x64/0x144()
[    8.050315] Trying to vfree() bad address (83097200)
[    8.060206] Modules linked in: rt2800soc(+) rt2800pci rt2800mmio rt2800lib pppox ppp_generic nf_conntrack_ipv6 iptable_nat ipt_REJECT ipt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG slhc rt2x00soc rt2x00pci rt2x00mmio rt2x00lib nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_conntrack_ipv4 nf_nat_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack iptable_mangle iptable_filter ip_tables crc_itu_t crc_ccitt mt76x2e mt7603e mt76 mac80211 cfg80211 compat ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables eeprom_93cx6 leds_gpio gpio_button_hotplug
[    8.189512] CPU: 0 PID: 380 Comm: kmodloader Not tainted 4.4.50 #0
[    8.201828] Stack : 80347274 00000000 00000001 80390000 839b2fcc 8038ad23 80328bcc 0000017c
          803d3438 00000003 00000016 024000c0 80066144 8004ad64 8032e0d4 80380000
          00000003 00000003 8032c4d8 83bc9ae4 80066144 80048cd0 00000002 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          ...
[    8.272733] Call Trace:
[    8.277634] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[    8.287192] [&lt;8004ad64&gt;] vprintk_default+0x24/0x30
[    8.296754] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[    8.306306] [&lt;80048cd0&gt;] printk+0x2c/0x38
[    8.314315] [&lt;80025354&gt;] warn_slowpath_common+0xa0/0xd0
[    8.324740] [&lt;8014951c&gt;] dump_stack+0x14/0x28
[    8.333432] [&lt;80014840&gt;] show_stack+0x50/0x84
[    8.342123] [&lt;80025354&gt;] warn_slowpath_common+0xa0/0xd0
[    8.352554] [&lt;801ae75c&gt;] release_firmware+0x64/0x144
[    8.362467] [&lt;800253b0&gt;] warn_slowpath_fmt+0x2c/0x38
[    8.372388] [&lt;80036454&gt;] queue_work_on+0x44/0x74
[    8.381609] [&lt;801ae75c&gt;] release_firmware+0x64/0x144
[    8.391562] [&lt;830a65fc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[    8.405126] [&lt;830a1940&gt;] rt2x00lib_probe_dev+0x7a8/0x848 [rt2x00lib]
[    8.417935] [&lt;83142464&gt;] ieee80211_alloc_led_names+0xac/0xc0 [mac80211]
[    8.431181] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[    8.440739] [&lt;830b91e4&gt;] rt2x00soc_probe+0x160/0x1bc [rt2x00soc]
[    8.452730] [&lt;8003cc0c&gt;] blocking_notifier_call_chain+0x14/0x20
[    8.464550] [&lt;801abdc0&gt;] devm_kfree+0x20/0x44
[    8.473247] [&lt;801aa2bc&gt;] platform_drv_probe+0x28/0x70
[    8.483336] [&lt;801a88f0&gt;] driver_probe_device+0x120/0x288
[    8.493944] [&lt;8008a080&gt;] kstrdup+0x44/0x8c
[    8.502120] [&lt;801aa490&gt;] platform_match+0x60/0x110
[    8.511687] [&lt;801a8ad4&gt;] __driver_attach+0x7c/0xb4
[    8.521242] [&lt;801a6cf8&gt;] next_device+0x10/0x30
[    8.530109] [&lt;801a8a58&gt;] __driver_attach+0x0/0xb4
[    8.539488] [&lt;801a6db4&gt;] bus_for_each_dev+0x9c/0xac
[    8.549235] [&lt;802d0c6c&gt;] klist_add_tail+0x24/0x50
[    8.558620] [&lt;801a6b88&gt;] bus_get+0x2c/0x50
[    8.566788] [&lt;801a7fe8&gt;] bus_add_driver+0xec/0x20c
[    8.576350] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[    8.585908] [&lt;801550a8&gt;] kvasprintf+0x70/0x94
[    8.594598] [&lt;801eb858&gt;] __alloc_skb+0x88/0x184
[    8.603644] [&lt;800a5720&gt;] __slab_alloc.isra.13.constprop.17+0x20/0x44
[    8.616325] [&lt;8309a000&gt;] init_module+0x0/0x2c [rt2800soc]
[    8.627102] [&lt;801a91ec&gt;] driver_register+0xa8/0xf8
[    8.636669] [&lt;800456bc&gt;] __wake_up+0x24/0x48
[    8.645194] [&lt;8309a000&gt;] init_module+0x0/0x2c [rt2800soc]
[    8.655973] [&lt;8000d890&gt;] do_one_initcall+0x1e8/0x214
[    8.665880] [&lt;800456bc&gt;] __wake_up+0x24/0x48
[    8.674398] [&lt;8309a000&gt;] init_module+0x0/0x2c [rt2800soc]
[    8.685176] [&lt;80034374&gt;] call_usermodehelper_exec+0x144/0x160
[    8.696644] [&lt;80033e64&gt;] call_usermodehelper_setup+0x38/0xa8
[    8.707942] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[    8.717497] [&lt;80067364&gt;] do_init_module+0x74/0x1cc
[    8.727058] [&lt;8009dbb0&gt;] __vunmap+0xf0/0x114
[    8.735599] [&lt;80068bf8&gt;] load_module+0x16c0/0x1b68
[    8.745158] [&lt;80066730&gt;] unknown_module_param_cb+0x0/0xac
[    8.755930] [&lt;8009e0a4&gt;] __vmalloc_node+0x34/0x40
[    8.765326] [&lt;80069134&gt;] SyS_init_module+0x94/0x180
[    8.775056] [&lt;800691d0&gt;] SyS_init_module+0x130/0x180
[    8.784977] [&lt;8000682c&gt;] syscall_common+0x30/0x54
[    8.794382] [&lt;800a8580&gt;] SyS_open+0x0/0x14
[    8.802545]
[    8.805504] ---[ end trace b92178621e4f27fb ]---
[    8.814710] Kernel bug detected[#1]:
[    8.821830] CPU: 0 PID: 380 Comm: kmodloader Tainted: G        W       4.4.50 #0
[    8.836560] task: 839b2d48 ti: 83bc8000 task.ti: 83bc8000
[    8.847302] $ 0   : 00000000 00000000 810614e0 00000001
[    8.857718] $ 4   : 830a78e0 ffffffff 000000c3 830a78e0
[    8.868133] $ 8   : 0000002d 65313236 37326634 5d206266
[    8.878545] $12   : 00000000 00000013 00000000 6d6f635f
[    8.888956] $16   : 83b89460 ffffffed 83b88b40 8387dc10
[    8.899372] $20   : 83b89734 00000003 00000016 024000c0
[    8.909787] $24   : 00000003 8019e344
[    8.920200] $28   : 83bc8000 83bc9bb0 80066144 830a65fc
[    8.930619] Hi    : 00000000
[    8.936343] Lo    : ec4e4000
[    8.942076] epc   : 800a4c30 kfree+0x70/0x150
[    8.950775] ra    : 830a65fc rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[    8.964980] Status: 1100a403 KERNEL EXL IE
[    8.973314] Cause : 10800034 (ExcCode 0d)
[    8.981290] PrId  : 00019650 (MIPS 24KEc)
[    8.989262] Modules linked in: rt2800soc(+) rt2800pci rt2800mmio rt2800lib pppox ppp_generic nf_conntrack_ipv6 iptable_nat ipt_REJECT ipt_MASQUERADE xt_time xt_tcpudp xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_LOG slhc rt2x00soc rt2x00pci rt2x00mmio rt2x00lib nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_conntrack_ipv4 nf_nat_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack iptable_mangle iptable_filter ip_tables crc_itu_t crc_ccitt mt76x2e mt7603e mt76 mac80211 cfg80211 compat ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables eeprom_93cx6 leds_gpio gpio_button_hotplug
[    9.118381] Process kmodloader (pid: 380, threadinfo=83bc8000, task=839b2d48, tls=77181d48)
[    9.135008] Stack : 83b89460 83bc9bd0 830a6b3c 83b89460 83b89460 830a1940 83897640 83142464
          830a67b4 00000000 00000000 83098500 83b88160 024080c0 83b89460 02400000
          83b88b40 8387dc10 8309e524 00000003 00000016 024000c0 80066144 830b91e4
          80400000 8003cc0c 8309e7d4 801abdc0 8387dc10 8309e7d4 8309e7d4 80400000
          80400000 801aa2bc 83098300 00000001 8309e7d4 8309e7d4 8387dc10 8387dc10
          ...
[    9.205822] Call Trace:
[    9.210688] [&lt;800a4c30&gt;] kfree+0x70/0x150
[    9.218686] [&lt;830a65fc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[    9.232225] [&lt;830a1940&gt;] rt2x00lib_probe_dev+0x7a8/0x848 [rt2x00lib]
[    9.244892] [&lt;830b91e4&gt;] rt2x00soc_probe+0x160/0x1bc [rt2x00soc]
[    9.256869] [&lt;801aa2bc&gt;] platform_drv_probe+0x28/0x70
[    9.266930] [&lt;801a88f0&gt;] driver_probe_device+0x120/0x288
[    9.277508] [&lt;801a8ad4&gt;] __driver_attach+0x7c/0xb4
[    9.287047] [&lt;801a6db4&gt;] bus_for_each_dev+0x9c/0xac
[    9.296760] [&lt;801a7fe8&gt;] bus_add_driver+0xec/0x20c
[    9.306301] [&lt;801a91ec&gt;] driver_register+0xa8/0xf8
[    9.315849] [&lt;8000d890&gt;] do_one_initcall+0x1e8/0x214
[    9.325746] [&lt;80067364&gt;] do_init_module+0x74/0x1cc
[    9.335288] [&lt;80068bf8&gt;] load_module+0x16c0/0x1b68
[    9.344829] [&lt;800691d0&gt;] SyS_init_module+0x130/0x180
[    9.354723] [&lt;8000682c&gt;] syscall_common+0x30/0x54
[    9.364081]
[    9.367033]
Code: 30630001  24030001  38630001 &lt;00030336&gt; 8c430000  7c630380  10600003  00000000  10000002
[    9.386857] ---[ end trace b92178621e4f27fc ]---
[    9.398728] Fatal exception: panic in 5 seconds:&gt;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363132">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						4 Aug 2017, 01:32					</div>
				</div>
				<div class="post-content content">
					<p>Fixed after write the factory mtd in uboot</p><div class="codebox"><pre><code>[    7.964401] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5390, rev 0500 d                                                                                       etected
[    7.979852] ieee80211 phy0: rt2x00_set_rf: Info - RF chipset 7620 detected
[    8.113687] kmodloader: done loading kernel modules from /etc/modules.d/*
[    9.037588] random: jshn: uninitialized urandom read (4 bytes read, 18 bits o                                                                                       f entropy available)
[    9.122735] random: jshn: uninitialized urandom read (4 bytes read, 19 bits o                                                                                       f entropy available)
[    9.209345] random: jshn: uninitialized urandom read (4 bytes read, 19 bits o                                                                                       f entropy available)
[   13.214927] jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
[   13.246973] jffs2_build_filesystem(): unlocking the mtd device... done.
[   13.260195] jffs2_build_filesystem(): erasing all blocks after the end marker                                                                                       ...
[   17.658322] 8021q: adding VLAN 0 to HW filter on device eth0
[   17.715026] device eth0.1 entered promiscuous mode
[   17.724649] device eth0 entered promiscuous mode
[   17.830354] br-lan: port 1(eth0.1) entered forwarding state
[   17.841555] br-lan: port 1(eth0.1) entered forwarding state
[   19.835858] br-lan: port 1(eth0.1) entered forwarding state



BusyBox v1.26.2 () built-in shell (ash)


     _________
    /        /\      _    ___ ___  ___
   /  LE    /  \    | |  | __|   \| __|
  /    DE  /    \   | |__| _|| |) | _|
 /________/  LE  \  |____|___|___/|___|                      lede-project.org
 \        \   DE /
  \    LE  \    /  -----------------------------------------------------------
   \  DE    \  /    Reboot (SNAPSHOT, r3584-19eba67)
    \________\/    -----------------------------------------------------------

=== WARNING! =====================================
There is no root password defined on this device!
Use the &quot;passwd&quot; command to set up a new password
in order to prevent unauthorized SSH logins.
--------------------------------------------------</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363137">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						4 Aug 2017, 03:19					</div>
				</div>
				<div class="post-content content">
					<p>I´m trying to install luci, by uhttpd give me this error:</p><div class="codebox"><pre><code>root@LEDE:/# uhttpd
Error relocating /usr/sbin/uhttpd: uloop_run_timeout: symbol not found</code></pre></div><p>I´ve tried to install libubox (opkg install libubox), but it not resolve. After this, wget don´t work anymore and if reset gives kernel panic.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363166">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						4 Aug 2017, 20:28					</div>
				</div>
				<div class="post-content content">
					<p>Working,</p><p>Recompiled the sysupgrade using feeds scripts.</p><p><span class="postimg"><img src="http://i64.tinypic.com/o0ftf.png" alt="http://i64.tinypic.com/o0ftf.png" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363178">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						5 Aug 2017, 00:07					</div>
				</div>
				<div class="post-content content">
					<p>Luci is working well. Now I am looking to enable the 4G modem. What driver do we use for this modem? Is qmi_wwan?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363197">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						5 Aug 2017, 06:10					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>comdek wrote:</cite><blockquote><p>Luci is working well. Now I am looking to enable the 4G modem. What driver do we use for this modem? Is qmi_wwan?</p></blockquote></div><p>Most likely qmi_wwan but tell me the usb id (vid:pid), you may have to add it to the qmi_wwan driver.</p><p>A lsusb -vd&nbsp; vid:pid or a&nbsp; cat /sys/kernel/debug/usb/devices would be helpful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363202">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						5 Aug 2017, 09:50					</div>
				</div>
				<div class="post-content content">
					<p>Hi comdek,<br />I prepared a new version intented to be used with uboot.<br />Can you please test it.<br />Pull my dwr921_uboot branch.<br />Please clone again the repository, I rewrite the history.</p><p>If it is confirmed to work I will prepare the PR in lede.<br />bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363203">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">fidodido</div>
					<div class="post-datetime">
						5 Aug 2017, 09:52					</div>
				</div>
				<div class="post-content content">
					<p>Please, when testing it post the bootlog and please check if the wan port is working (I think there is bug on that port now).</p><p>Bye.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363211">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						5 Aug 2017, 16:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><div class="quotebox"><cite>comdek wrote:</cite><blockquote><p>Luci is working well. Now I am looking to enable the 4G modem. What driver do we use for this modem? Is qmi_wwan?</p></blockquote></div><p>Most likely qmi_wwan but tell me the usb id (vid:pid), you may have to add it to the qmi_wwan driver.</p><p>A lsusb -vd&nbsp; vid:pid or a&nbsp; cat /sys/kernel/debug/usb/devices would be helpful.</p></blockquote></div><p>Don´t found the modem. I think maybe need turn on a GPIO port to enable the modem.</p><div class="codebox"><pre><code>root@LEDE:/# cat /sys/kernel/debug/usb/devices
root@LEDE:/# lsusb
root@LEDE:/#</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363212">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						5 Aug 2017, 16:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fidodido wrote:</cite><blockquote><p>Please, when testing it post the bootlog and please check if the wan port is working (I think there is bug on that port now).</p><p>Bye.</p></blockquote></div><p>I´ll compile the uboot now.<br /> About the WAN port, the DWR-922 only have the WAN port only and was working very well in first tests.<br />Im thinking in soldering a LAN port and make a hole in plastic cover. For WAN port and first LAN port, the coil is the same.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363220">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						5 Aug 2017, 20:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>comdek wrote:</cite><blockquote><p>Don´t found the modem. I think maybe need turn on a GPIO port to enable the modem.</p><div class="codebox"><pre><code>root@LEDE:/# cat /sys/kernel/debug/usb/devices
root@LEDE:/# lsusb
root@LEDE:/#</code></pre></div></blockquote></div><p>I think you have to include usb support in your build.<br />lsusb should at minimum have shown the linux root hub,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363249">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						6 Aug 2017, 16:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fidodido wrote:</cite><blockquote><p>Please, when testing it post the bootlog and please check if the wan port is working (I think there is bug on that port now).</p><p>Bye.</p></blockquote></div><p>Hi fidodido,</p><p>After compiled the code, giving this error in rt2800 init.</p><div class="codebox"><pre><code>[    0.338237] spi spi0.0: force spi mode3
[    0.346401] m25p80 spi0.0: w25q128 (16384 Kbytes)
[    0.355859] 4 ofpart partitions found on MTD device spi0.0
[    0.366792] Creating 4 MTD partitions on &quot;spi0.0&quot;:
[    0.376349] 0x000000000000-0x000000040000 : &quot;uboot&quot;
[    0.387888] 0x000000040000-0x000000050000 : &quot;uboot-env&quot;
[    0.400143] 0x000000050000-0x000000ff0000 : &quot;firmware&quot;
[    1.728287] 2 uimage-fw partitions found on MTD device firmware
[    1.740120] 0x000000050000-0x000000185729 : &quot;kernel&quot;
[    1.751593] 0x000000185729-0x000000ff0000 : &quot;rootfs&quot;
[    1.763339] mtd: device 4 (rootfs) set to be root filesystem
[    1.774813] 1 squashfs-split partitions found on MTD device rootfs
[    1.787145] 0x0000007c9000-0x000000ff0000 : &quot;rootfs_data&quot;
[    1.799729] 0x000000ff0000-0x000001000000 : &quot;config&quot;
[    1.814594] mtk_soc_eth 10100000.ethernet: loaded mt7620 driver
[    1.827306] mtk_soc_eth 10100000.ethernet eth0: mediatek frame engine at 0xb0100000, irq 5
[    1.844317] rt2880_wdt 10000120.watchdog: Initialized
[    1.855932] NET: Registered protocol family 10
[    1.869253] NET: Registered protocol family 17
[    1.878262] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.903426] 8021q: 802.1Q VLAN Support v1.8
[    1.926029] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    1.940915] Freeing unused kernel memory: 144K (803ac000 - 803d0000)
[    4.102415] init: Console is alive
[    4.109521] init: - watchdog -
[    6.201642] kmodloader: loading kernel modules from /etc/modules-boot.d/*
[    6.332341] usbcore: registered new interface driver usbfs
[    6.343438] usbcore: registered new interface driver hub
[    6.354159] usbcore: registered new device driver usb
[    6.369795] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    6.383803] ohci-platform: OHCI generic platform driver
[    6.404527] phy phy-usbphy.0: remote usb device wakeup disabled
[    6.416334] phy phy-usbphy.0: UTMI 16bit 30MHz
[    6.425220] ohci-platform 101c1000.ohci: Generic Platform OHCI controller
[    6.438787] ohci-platform 101c1000.ohci: new USB bus registered, assigned bus number 1
[    6.454679] ohci-platform 101c1000.ohci: irq 26, io mem 0x101c1000
[    6.489158] hub 1-0:1.0: USB hub found
[    6.497057] hub 1-0:1.0: 1 port detected
[    6.507507] uhci_hcd: USB Universal Host Controller Interface driver
[    6.521961] ohci-pci: OHCI PCI platform driver
[    6.534964] kmodloader: done loading kernel modules from /etc/modules-boot.d/*
[    6.553494] init: - preinit -
[    7.577832] usb 1-1: new full-speed USB device number 2 using ohci-platform
[    8.314128] random: procd: uninitialized urandom read (4 bytes read, 14 bits of entropy available)
[    8.335607] 8021q: adding VLAN 0 to HW filter on device eth0
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    9.650542] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[    9.691183] urandom-seed: Seed file not found (/etc/urandom.seed)
[    9.813133] procd: - early -
[    9.819631] procd: - watchdog -
[   10.480007] procd: - ubus -
[   10.582659] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.804787] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.823192] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.841228] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.859522] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.877524] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.895629] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.913758] random: ubusd: uninitialized urandom read (4 bytes read, 21 bits of entropy available)
[   10.932086] procd: - init -
Please press Enter to activate this console.
[   11.277028] kmodloader: loading kernel modules from /etc/modules.d/*
[   11.392438] tun: Universal TUN/TAP device driver, 1.6
[   11.402572] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;
[   11.421094] ipip: IPv4 over IPv4 tunneling driver
[   11.452341] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   11.557039] Loading modules backported from Linux version wt-2017-01-31-0-ge882dff19e7f
[   11.573067] Backport generated by backports.git backports-20160324-13-g24da7d3c
[   11.768813] u32 classifier
[   11.774268]     input device check on
[   11.781565]     Actions configured
[   11.791162] Mirror/redirect action on
[   11.831235] usbcore: registered new interface driver cdc_wdm
[   11.851200] ip_tables: (C) 2000-2006 Netfilter Core Team
[   11.902642] nf_conntrack version 0.5.0 (951 buckets, 3804 max)
[   12.012973] usbcore: registered new interface driver usbserial
[   12.024761] usbcore: registered new interface driver usbserial_generic
[   12.037895] usbserial: USB Serial support registered for generic
[   12.084557] xt_time: kernel timezone is -0000
[   12.100908] usbcore: registered new interface driver keyspan
[   12.112359] usbserial: USB Serial support registered for Keyspan - (without firmware)
[   12.128094] usbserial: USB Serial support registered for Keyspan 1 port adapter
[   12.142795] usbserial: USB Serial support registered for Keyspan 2 port adapter
[   12.157512] usbserial: USB Serial support registered for Keyspan 4 port adapter
[   12.180337] PPP generic driver version 2.4.2
[   12.191894] NET: Registered protocol family 24
[   12.203710] usbcore: registered new interface driver qmi_wwan
[   12.236132] rt2800_wmac 10180000.wmac: loaded eeprom from mtd device &quot;config&quot;
[   12.250439] ieee80211 phy0: rt2x00_set_rt: Info - RT chipset 5390, rev 0500 detected
[   12.265890] ieee80211 phy0: rt2800_init_eeprom: Error - Invalid RF chipset 0x0000 detected
[   12.282370] ieee80211 phy0: rt2x00lib_probe_dev: Error - Failed to allocate device
[   12.297481] ------------[ cut here ]------------
[   12.306706] WARNING: CPU: 0 PID: 433 at mm/vmalloc.c:1466 release_firmware+0x64/0x144()
[   12.322660] Trying to vfree() nonexistent vm area (83259000)
[   12.333936] Modules linked in: rt2800soc(+) rt2800pci rt2800mmio rt2800lib qmi_wwan pppox ppp_generic nf_conntrack_ipv6 keyspan iptable_nat ipt_REJECT ipt_MASQUERADE xt_time xt_tcpudp xt_tcpmss xt_statistic xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_length xt_hl xt_ecn xt_dscp xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_NETMAP xt_LOG xt_HL xt_DSCP xt_CLASSIFY usbserial usbnet slhc rt2x00soc rt2x00pci rt2x00mmio rt2x00lib nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_conntrack_ipv4 nf_nat_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack iptable_mangle iptable_filter ipt_ECN ip_tables ezusb crc_itu_t crc_ccitt cdc_wdm sch_fq sch_teql em_nbyte sch_codel sch_pie act_ipt sch_red sch_gred em_meta cls_basic sch_prio em_text sch_sfq act_police sch_dsmark em_cmp act_skbedit act_mirred em_u32 cls_u32 cls_tcindex cls_flow cls_route cls_fw sch_tbf sch_htb sch_hfsc sch_ingress mt76x2e mt7603e mt76 mac80211 cfg80211 compat ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables ipip tunnel4 ip_tunnel tun eeprom_93cx6 leds_gpio ohci_pci uhci_hcd ohci_platform ohci_hcd gpio_button_hotplug usbcore nls_base usb_common mii
[   12.550037] CPU: 0 PID: 433 Comm: kmodloader Not tainted 4.4.50 #0
[   12.562352] Stack : 8034c974 00000000 00000001 80390000 838c25bc 80390d43 8032e2bc 000001b1
          803d3438 00000007 00000016 024000c0 80066144 8004ad64 803337c4 80390000
          00000003 00000007 80331bc8 83bffae4 80066144 80048cd0 00000006 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
          ...
[   12.633266] Call Trace:
[   12.638180] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[   12.647738] [&lt;8004ad64&gt;] vprintk_default+0x24/0x30
[   12.657298] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[   12.666851] [&lt;80048cd0&gt;] printk+0x2c/0x38
[   12.674845] [&lt;80025354&gt;] warn_slowpath_common+0xa0/0xd0
[   12.685274] [&lt;8014951c&gt;] dump_stack+0x14/0x28
[   12.693964] [&lt;80014840&gt;] show_stack+0x50/0x84
[   12.702651] [&lt;80025354&gt;] warn_slowpath_common+0xa0/0xd0
[   12.713091] [&lt;801ae75c&gt;] release_firmware+0x64/0x144
[   12.723022] [&lt;800253b0&gt;] warn_slowpath_fmt+0x2c/0x38
[   12.732932] [&lt;8009db0c&gt;] __vunmap+0x4c/0x114
[   12.741466] [&lt;80036454&gt;] queue_work_on+0x44/0x74
[   12.750684] [&lt;801ae75c&gt;] release_firmware+0x64/0x144
[   12.760667] [&lt;831565fc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[   12.774247] [&lt;83151940&gt;] rt2x00lib_probe_dev+0x7a8/0x848 [rt2x00lib]
[   12.786994] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[   12.796553] [&lt;8301f1e4&gt;] rt2x00soc_probe+0x160/0x1bc [rt2x00soc]
[   12.808544] [&lt;8003cc0c&gt;] blocking_notifier_call_chain+0x14/0x20
[   12.820364] [&lt;801abdc0&gt;] devm_kfree+0x20/0x44
[   12.829061] [&lt;801aa2bc&gt;] platform_drv_probe+0x28/0x70
[   12.839163] [&lt;801a88f0&gt;] driver_probe_device+0x120/0x288
[   12.849771] [&lt;8008a080&gt;] kstrdup+0x44/0x8c
[   12.857944] [&lt;801aa490&gt;] platform_match+0x60/0x110
[   12.867529] [&lt;801a8ad4&gt;] __driver_attach+0x7c/0xb4
[   12.877083] [&lt;801a6cf8&gt;] next_device+0x10/0x30
[   12.885951] [&lt;801a8a58&gt;] __driver_attach+0x0/0xb4
[   12.895331] [&lt;801a6db4&gt;] bus_for_each_dev+0x9c/0xac
[   12.905070] [&lt;802d5c84&gt;] klist_add_tail+0x24/0x50
[   12.914462] [&lt;801a6b88&gt;] bus_get+0x2c/0x50
[   12.922659] [&lt;801a7fe8&gt;] bus_add_driver+0xec/0x20c
[   12.932219] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[   12.941776] [&lt;801550a8&gt;] kvasprintf+0x70/0x94
[   12.950473] [&lt;801ec93c&gt;] __alloc_skb+0x88/0x184
[   12.959505] [&lt;800a5720&gt;] __slab_alloc.isra.13.constprop.17+0x20/0x44
[   12.972182] [&lt;83252000&gt;] init_module+0x0/0x2c [rt2800soc]
[   12.982971] [&lt;801a91ec&gt;] driver_register+0xa8/0xf8
[   12.992537] [&lt;800456bc&gt;] __wake_up+0x24/0x48
[   13.001070] [&lt;83252000&gt;] init_module+0x0/0x2c [rt2800soc]
[   13.011855] [&lt;8000d890&gt;] do_one_initcall+0x1e8/0x214
[   13.021769] [&lt;800456bc&gt;] __wake_up+0x24/0x48
[   13.030288] [&lt;83252000&gt;] init_module+0x0/0x2c [rt2800soc]
[   13.041073] [&lt;80034374&gt;] call_usermodehelper_exec+0x144/0x160
[   13.052550] [&lt;80033e64&gt;] call_usermodehelper_setup+0x38/0xa8
[   13.063856] [&lt;80066144&gt;] module_sect_show+0x0/0x18
[   13.073431] [&lt;80067364&gt;] do_init_module+0x74/0x1cc
[   13.082996] [&lt;8009dbb0&gt;] __vunmap+0xf0/0x114
[   13.091552] [&lt;80068bf8&gt;] load_module+0x16c0/0x1b68
[   13.101112] [&lt;80066730&gt;] unknown_module_param_cb+0x0/0xac
[   13.111880] [&lt;8009e0a4&gt;] __vmalloc_node+0x34/0x40
[   13.121288] [&lt;80069134&gt;] SyS_init_module+0x94/0x180
[   13.131020] [&lt;800691d0&gt;] SyS_init_module+0x130/0x180
[   13.140950] [&lt;8000682c&gt;] syscall_common+0x30/0x54
[   13.150354] [&lt;800a8580&gt;] SyS_open+0x0/0x14
[   13.158506]
[   13.161475] ---[ end trace fef9f08007875aeb ]---
[   13.170683] Kernel bug detected[#1]:
[   13.177804] CPU: 0 PID: 433 Comm: kmodloader Tainted: G        W       4.4.50 #0
[   13.192534] task: 838c2338 ti: 83bfe000 task.ti: 83bfe000
[   13.203277] $ 0   : 00000000 00000000 81062ae0 00000001
[   13.213693] $ 4   : 831578e0 81062af3 000000e5 831578e0
[   13.224107] $ 8   : 0000002d 37303038 61353738 5d206265
[   13.234519] $12   : 00000000 00000008 00000000 6d6f635f
[   13.244930] $16   : 83bc9460 ffffffed 83bc8b40 8387dd10
[   13.255341] $20   : 83bc9734 00000007 00000016 024000c0
[   13.265753] $24   : 00000003 8019e344
[   13.276165] $28   : 83bfe000 83bffbb0 80066144 831565fc
[   13.286580] Hi    : 00000000
[   13.292304] Lo    : ec4e4000
[   13.298038] epc   : 800a4c30 kfree+0x70/0x150
[   13.306737] ra    : 831565fc rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[   13.320942] Status: 1100a403 KERNEL EXL IE
[   13.329280] Cause : 10800034 (ExcCode 0d)
[   13.337256] PrId  : 00019650 (MIPS 24KEc)
[   13.345228] Modules linked in: rt2800soc(+) rt2800pci rt2800mmio rt2800lib qmi_wwan pppox ppp_generic nf_conntrack_ipv6 keyspan iptable_nat ipt_REJECT ipt_MASQUERADE xt_time xt_tcpudp xt_tcpmss xt_statistic xt_state xt_nat xt_multiport xt_mark xt_mac xt_limit xt_length xt_hl xt_ecn xt_dscp xt_conntrack xt_comment xt_TCPMSS xt_REDIRECT xt_NETMAP xt_LOG xt_HL xt_DSCP xt_CLASSIFY usbserial usbnet slhc rt2x00soc rt2x00pci rt2x00mmio rt2x00lib nf_reject_ipv4 nf_nat_redirect nf_nat_masquerade_ipv4 nf_conntrack_ipv4 nf_nat_ipv4 nf_nat nf_log_ipv4 nf_defrag_ipv6 nf_defrag_ipv4 nf_conntrack_rtcache nf_conntrack iptable_mangle iptable_filter ipt_ECN ip_tables ezusb crc_itu_t crc_ccitt cdc_wdm sch_fq sch_teql em_nbyte sch_codel sch_pie act_ipt sch_red sch_gred em_meta cls_basic sch_prio em_text sch_sfq act_police sch_dsmark em_cmp act_skbedit act_mirred em_u32 cls_u32 cls_tcindex cls_flow cls_route cls_fw sch_tbf sch_htb sch_hfsc sch_ingress mt76x2e mt7603e mt76 mac80211 cfg80211 compat ip6t_REJECT nf_reject_ipv6 nf_log_ipv6 nf_log_common ip6table_mangle ip6table_filter ip6_tables x_tables ipip tunnel4 ip_tunnel tun eeprom_93cx6 leds_gpio ohci_pci uhci_hcd ohci_platform ohci_hcd gpio_button_hotplug usbcore nls_base usb_common mii
[   13.561012] Process kmodloader (pid: 433, threadinfo=83bfe000, task=838c2338, tls=777cbd48)
[   13.577640] Stack : 83bc9460 83bffbd0 83156b3c 83bc9460 83bc9460 83151940 83bc8b40 8387dd10
          831567b4 00000000 00000000 83251880 83bc8160 024080c0 83bc9460 02400000
          83bc8b40 8387dd10 83253524 00000007 00000016 024000c0 80066144 8301f1e4
          80400000 8003cc0c 832537d4 801abdc0 8387dd10 832537d4 832537d4 80400000
          80400000 801aa2bc 83251680 00000001 832537d4 832537d4 8387dd10 8387dd10
          ...
[   13.648453] Call Trace:
[   13.653321] [&lt;800a4c30&gt;] kfree+0x70/0x150
[   13.661325] [&lt;831565fc&gt;] rt2x00lib_free_eeprom_file+0x18/0x2c [rt2x00lib]
[   13.674865] [&lt;83151940&gt;] rt2x00lib_probe_dev+0x7a8/0x848 [rt2x00lib]
[   13.687533] [&lt;8301f1e4&gt;] rt2x00soc_probe+0x160/0x1bc [rt2x00soc]
[   13.699511] [&lt;801aa2bc&gt;] platform_drv_probe+0x28/0x70
[   13.709572] [&lt;801a88f0&gt;] driver_probe_device+0x120/0x288
[   13.720150] [&lt;801a8ad4&gt;] __driver_attach+0x7c/0xb4
[   13.729690] [&lt;801a6db4&gt;] bus_for_each_dev+0x9c/0xac
[   13.739402] [&lt;801a7fe8&gt;] bus_add_driver+0xec/0x20c
[   13.748942] [&lt;801a91ec&gt;] driver_register+0xa8/0xf8
[   13.758489] [&lt;8000d890&gt;] do_one_initcall+0x1e8/0x214
[   13.768392] [&lt;80067364&gt;] do_init_module+0x74/0x1cc
[   13.777934] [&lt;80068bf8&gt;] load_module+0x16c0/0x1b68
[   13.787475] [&lt;800691d0&gt;] SyS_init_module+0x130/0x180
[   13.797371] [&lt;8000682c&gt;] syscall_common+0x30/0x54
[   13.806729]
[   13.809681]
Code: 30630001  24030001  38630001 &lt;00030336&gt; 8c430000  7c630380  10600003  00000000  10000002
[   13.829511] ---[ end trace fef9f08007875aec ]---
[   13.841776] Fatal exception: panic in 5 seconds</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363252">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						6 Aug 2017, 17:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><div class="quotebox"><cite>comdek wrote:</cite><blockquote><p>Don´t found the modem. I think maybe need turn on a GPIO port to enable the modem.</p><div class="codebox"><pre><code>root@LEDE:/# cat /sys/kernel/debug/usb/devices
root@LEDE:/# lsusb
root@LEDE:/#</code></pre></div></blockquote></div><p>I think you have to include usb support in your build.<br />lsusb should at minimum have shown the linux root hub,</p></blockquote></div><p>recompiled the codfe with usb modules</p><div class="codebox"><pre><code>root@LEDE:/proc# lsusb
Bus 001 Device 002: ID 1435:0918
Bus 001 Device 001: ID 1d6b:0001</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p363255">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">comdek</div>
					<div class="post-datetime">
						6 Aug 2017, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>recompiled again with kmod-usb-serial-option</p><p>Workss</p><br /><div class="codebox"><pre><code>root@LEDE:/sys/bus/usb-serial/drivers/option1# echo &quot;1435 0918&quot; &gt; new_id
[   46.267142] option 1-1:1.0: GSM modem (1-port) converter detected
[   46.279749] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0
[   46.293857] option 1-1:1.1: GSM modem (1-port) converter detected
[   46.306378] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1
[   46.320481] option 1-1:1.2: GSM modem (1-port) converter detected
[   46.333015] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2
[   46.347102] option 1-1:1.3: GSM modem (1-port) converter detected
[   46.359626] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB3
[   46.373715] option 1-1:1.4: GSM modem (1-port) converter detected
[   46.386235] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB4
[   46.400318] option 1-1:1.5: GSM modem (1-port) converter detected
[   46.412842] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB5


root@LEDE:/sys/bus/usb-serial/drivers/option1# gcom
Trying list of devices
SIM ready
Waiting for Registration..(120 sec max)
Registered on Home network: &quot;Claro BR&quot;,7
[   48.868080] random: nonblocking pool is initialized
Signal Quality: 24,99
root@LEDE:/sys/bus/usb-serial/drivers/option1#</code></pre></div>											<p class="post-edited">(Last edited by <strong>comdek</strong> on 6 Aug 2017, 17:52)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=51451&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=51451&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=51451&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>