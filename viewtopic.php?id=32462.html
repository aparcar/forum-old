<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Timezone settings in openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p146074">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">baroo</div>
					<div class="post-datetime">
						18 Oct 2011, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi<br />This is the configuration of timezone on my OpenWRT:<br /></p><div class="codebox"><pre><code>config &#039;system&#039;
        option &#039;hostname&#039; &#039;OpenWrt&#039;
        option &#039;timezone&#039; &#039;CET-1CEST,M3.5.0,M10.5.0/3&#039;</code></pre></div><p>The problem is that every time &#039;date&#039; command give me the time in UTC notation.</p><div class="codebox"><pre><code>root@OpenWrt:/etc/config# date
Tue Oct 18 06:38:54 UTC 2011</code></pre></div><p>How to force date to show local time? Moreover I have problem with my own software, where local time is the same as UTC.</p><p>Thanks for any advice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146082">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Oct 2011, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>Make sure the timezone did end up in /etc/TZ.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146090">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						18 Oct 2011, 13:45					</div>
				</div>
				<div class="post-content content">
					<p>@jow:<br />while there is now a discussion regarding timezones, I hijack the thread:</p><p>What is the relation between &quot;zoneinfo&quot; packages Openwrt base system and LuCI?<br />Are the zoneinfo packages needed at all in the firmware builds? I have been including the zoneinfo/core, europe and northamerica packages in my builds, but I wonder if there is a need to do that? Is the embedded data in LuCI enough?</p><p>It seems to me that LuCI has an embedded version of them, which it uses (and which embedded data is a bit outdated 2010i version).</p><p>Btw, the zoneinfo packages are 2011i versions, and also that is outdated, as the current version is already 2011l (Released 10 October 2011).</p><p><a href="http://luci.subsignal.org/trac/browser/luci/trunk/libs/sys/luasrc/sys/zoneinfo/tzoffset.lua">http://luci.subsignal.org/trac/browser/ … offset.lua</a><br /><a href="http://luci.subsignal.org/trac/browser/luci/trunk/libs/sys/luasrc/sys/zoneinfo/tzdata.lua">http://luci.subsignal.org/trac/browser/ … tzdata.lua</a><br /><a href="https://dev.openwrt.org/browser/packages/utils/zoneinfo/Makefile">https://dev.openwrt.org/browser/package … o/Makefile</a></p><p>----</p><p>Additionally, ICANN / IANA is taking over the maintenance of the timezone info to some extent (due to the lawsuits against the original maintainers), so it might be worthwhile to change the download link to them. </p><p>More info at <a href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a> , downloads from: <a href="ftp://ftp.iana.org/tz/releases/">ftp://ftp.iana.org/tz/releases/</a>&nbsp; and <a href="http://www.iana.org/time-zones/repository/releases/">http://www.iana.org/time-zones/repository/releases/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146093">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						18 Oct 2011, 14:19					</div>
				</div>
				<div class="post-content content">
					<p>Completely unrelated. No. No. Yes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162096">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">zoo</div>
					<div class="post-datetime">
						25 Mar 2012, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>Backfire (10.03.1, r29592) </p><p>Even with /etc/TZ containing <br /></p><div class="codebox"><pre><code>CET-1CEST,M3.5.0,M10.5.0/3</code></pre></div><p>and with /etc/config/system containing <br /></p><div class="codebox"><pre><code>option &#039;zonename&#039; &#039;Europe/Berlin&#039;
option &#039;timezone&#039; &#039;CET-1CEST,M3.5.0,M10.5.0/3&#039;</code></pre></div><p>the daylight saving time was not set this night,<br /></p><div class="codebox"><pre><code># date
Sun Mar 25 18:20:55 CET 2012</code></pre></div><p>It should be 19:20:55, CEST. (central european summer time)</p><p>The installed packages are: 6in4 6to4 base-files block-hotplug block-mount busybox crda dnsmasq dropbear e2fsprogs firewall hotplug2 ip ip6tables iptables iptables-mod-conntrack iptables-mod-ipopt iptables-mod-nat iw kernel kmod-ath kmod-ath9k kmod-ath9k-common kmod-button-hotplug kmod-cfg80211 kmod-crc-ccitt kmod-crypto-aes kmod-crypto-arc4 kmod-crypto-core kmod-fs-ext3 kmod-fs-mbcache kmod-input-core kmod-input-gpio-buttons kmod-input-polldev kmod-ip6tables kmod-ipt-conntrack kmod-ipt-core kmod-ipt-ipopt kmod-ipt-nat kmod-ipt-nathelper kmod-iptunnel4 kmod-ipv6 kmod-leds-gpio kmod-mac80211 kmod-nls-base kmod-ppp kmod-pppoe kmod-scsi-core kmod-sit kmod-usb-core kmod-usb-ohci kmod-usb-printer kmod-usb-serial kmod-usb-serial-ftdi kmod-usb-storage kmod-usb2 libblkid libc libext2fs libgcc libip4tc libip6tc libiwinfo libiwinfo-lua liblua libncurses libnl-tiny libpthread librt libuci libuci-lua libuuid libxtables lua luci luci-app-firewall luci-app-p910nd luci-app-radvd luci-i18n-english luci-lib-core luci-lib-ipkg luci-lib-lmo luci-lib-nixio luci-lib-sys luci-lib-web luci-mod-admin-core luci-mod-admin-full luci-proto-6x4 luci-proto-core luci-proto-ppp luci-sgi-cgi luci-theme-base luci-theme-openwrt minicom mtd opkg p910nd ppp ppp-mod-pppoe radvd swconfig uci udevtrigger uhttpd wireless-tools wpad-mini</p><p>What could cause this?<br />Could something be missing?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162101">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">hanz.1</div>
					<div class="post-datetime">
						25 Mar 2012, 20:47					</div>
				</div>
				<div class="post-content content">
					<p>Hi, have same problem. Time not changed today to summer +1h.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162150">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">polarie</div>
					<div class="post-datetime">
						26 Mar 2012, 15:02					</div>
				</div>
				<div class="post-content content">
					<p>I Also have/had this problem ...</p><p>when i changed the &quot;zone&quot; from Europe/Berlin to Europe/Istanbul <br />it shows the correct (summer-)time</p><p>so i changed the TZ ( /etc/TZ) :</p><p>&#039;CET-1CEST,M3.5.0,M10.5.0/3&#039;</p><p>into -</p><p>&#039;CET-<span style="color: red">2</span>CEST,M3.5.0,M10.5.0/3&#039;</p><p>hmm seems to be a dirty hack but THAT helped me - that my cron-jobs now fit again in time ...<br />that is a temp-solution - but does not fix the reason (which i don&#039;t know)</p><p>i don&#039;t know if that is boot-stable ... (reboot everday @ 5 a.m.)<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> will see tomorrow ...</p><p>regards</p>											<p class="post-edited">(Last edited by <strong>polarie</strong> on 26 Mar 2012, 16:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162155">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Mar 2012, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>The reason for the error is that the last day of March is this time a Saturday...<br />The actual bug is in uClibc code and has been patched there in late 2011. Backfire uses an ancient uClibc version, so the patch is not yet there. (Trunk uses more recent uClibc, so it works ok.)</p><p>A patch has been introduced to Backfire code today and Backfire builds after r31074 should work ok. More discussion here:<br /><a href="https://dev.openwrt.org/ticket/11181#comment:2">https://dev.openwrt.org/ticket/11181#comment:2</a></p><br /><p>Temporary fix for older builds is to change the timezone rule to act on 4th Sunday in March:<br /></p><div class="codebox"><pre><code>/etc/config/system

 config &#039;system&#039;
     option &#039;hostname&#039; &#039;bob&#039;
     option &#039;zonename&#039; &#039;Europe/Copenhagen&#039;
-    option &#039;timezone&#039; &#039;CET-1CEST,M3.5.0,M10.5.0/3&#039;
+    option &#039;timezone&#039; &#039;CET-1CEST,M3.4.0,M10.5.0/3&#039;</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 26 Mar 2012, 16:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162156">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">polarie</div>
					<div class="post-datetime">
						26 Mar 2012, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>ah thx hnyman</p><p>so changing the TZ line<br />(for noob-user like i am)<br />also brigns the result ...<br />&#039;CET-1CEST,M3.<span style="color: red">4</span>.0,M10.5.0/3&#039;<br />set to 4 (and not to 5)<br />couse this year the March only has 4 sundays</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162158">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Mar 2012, 16:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>polarie wrote:</cite><blockquote><p>&#039;CET-1CEST,M3.4.0,M10.5.0/3&#039;<br />set to 4 (and not to 5)<br />couse this year the March only has 4 sundays</p></blockquote></div><p>Yep.<br />The reason was actually more complicated: a wrong leap year correction algorithm.&nbsp; It erroneously added one extra day to the month, and got into the decision that the DST will change on Sunday March 32nd ;-) ;-)</p><p>So, the error required the combination of <br />- usage of Mx.5.0 (last Sunday) as algorithm,<br />- a leap year <br />- Saturday (Sunday-1) as the last day of the month.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162161">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">polarie</div>
					<div class="post-datetime">
						26 Mar 2012, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>hmm so when i look @ my calendar&nbsp; <br />same should be done for october - couse ther wil be also a &quot;missing&quot; 5th sunday ...</p><p>&#039;CET-1CEST,M3.4.0,M10.4.0/3&#039;</p><p>correct - or unneccesary?</p><p>EDIT: </p><p>hmm october has not the sunday as last day of the month </p><p>so it will be un-important ...<br />thx for explanaition</p>											<p class="post-edited">(Last edited by <strong>polarie</strong> on 26 Mar 2012, 16:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267196">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Beri</div>
					<div class="post-datetime">
						28 Feb 2015, 23:27					</div>
				</div>
				<div class="post-content content">
					<p>Greetings,</p><p>I hope you can help me because I have the same problem.<br />I tried but it didn&#039;t work. So right now I don&#039;t know what to change to have the correct time and date.</p><p>The konfigurations in: /etc/TZ<br /></p><div class="codebox"><pre><code>UTC</code></pre></div><p>The konfigurations in: /etc/config/system&nbsp; <br />config system<br /></p><div class="codebox"><pre><code>         option hostname OpenWrt
         option timezone UTC</code></pre></div><p>config timeserver ntp<br /></p><div class="codebox"><pre><code>        list server     0.openwrt.pool.ntp.org
        list server     1.openwrt.pool.ntp.org
        list server     2.openwrt.pool.ntp.org
        list server     3.openwrt.pool.ntp.org</code></pre></div><p>I come from Ljubljana&nbsp; (Slovenia - EU)</p><p>And some informations. On this <a href="http://wiki.openwrt.org/doc/uci/system">LINK</a> i found Europe/Ljubljana&nbsp; &nbsp; CET-1CEST,M3.5.0,M10.5.0/3</p><p>And when I write&nbsp; </p><div class="codebox"><pre><code>TZ=c date</code></pre></div><p> in terminal is 1 hour time differenc </p><p>So pleas hellp me to have the correct time!</p><br /><p>Thank You!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267257">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Beri</div>
					<div class="post-datetime">
						1 Mar 2015, 13:08					</div>
				</div>
				<div class="post-content content">
					<p>Well i found the solution inside the LUCI</p><p>Go to from the tab &quot;Status&quot; to tab &quot;System&quot; and udnher tab &quot;System&quot;!</p><p>If your Tab &quot;System&quot; dosen&#039;t work than change back the configurations in /etc/TZ and /etc/config/system&nbsp; to the defaulst!</p><p>And then you can magane the time and locastion...</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>