<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NSLU2 with Openwrt 8.09_rc1 doesn&#039;t recognize USB hard disk</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p78350">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ikemuc</div>
					<div class="post-datetime">
						18 Dec 2008, 17:26					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have the following problem:</p><p>I&#039;ve set up a Linksys NSLU2 with openwrt 8.09_rc1. I installed all necessary packages for USB 1 &amp; 2 and for the ext2, ext3, fat and ntfs filesystems. The dmesg output shows, that USB devices (hubs) are found. In /dev you can see devices like usb1, usb2 and usb3, but if I connect a USB hard disk, it is not displayed (no devices in /dev) and therefore I can&#039;t mount the hard disk.</p><p>But if I insert a 256M USB stick, it is displayed and I was able to mount it to /home e.g.</p><p>Does anybody know how I can get a USB hard disk to be recognized by openwrt on my NSLU2?</p><p>Any help is welcome! :-)</p><p>Thanx in advance,<br />Eike</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78406">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ikemuc</div>
					<div class="post-datetime">
						20 Dec 2008, 07:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi folx,</p><p>here additionally the dmesg output. I&#039;m still searching for an answer...<br />Is it possible/necessary to create the device entries manually?</p><p>root@OpenWrt:/# dmesg<br />Linux version 2.6.26.5 (nbd@baustelle) (gcc version 4.1.2) #13 Tue Nov 4 02:09:32 UTC 2008<br />CPU: XScale-IXP42x Family [690541f1] revision 1 (ARMv5TE), cr=000039ff<br />Machine: Linksys NSLU2<br />Memory policy: ECC disabled, Data cache writeback<br />On node 0 totalpages: 8192<br />&nbsp; DMA zone: 64 pages used for memmap<br />&nbsp; DMA zone: 0 pages reserved<br />&nbsp; DMA zone: 8128 pages, LIFO batch:0<br />&nbsp; Normal zone: 0 pages used for memmap<br />&nbsp; Movable zone: 0 pages used for memmap<br />CPU0: D VIVT undefined 5 cache<br />CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />Built 1 zonelists in Zone order, mobility grouping on.&nbsp; Total pages: 8128<br />Kernel command line: root=/dev/mtdblock4 rootfstype=squashfs,jffs2 console=ttyS0,115200 init=/etc/preinit noinitrd<br />PID hash table entries: 128 (order: 7, 512 bytes)<br />Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)<br />Memory: 32MB = 32MB total<br />Memory: 30320KB available (1856K code, 172K data, 92K init)<br />SLUB: Genslabs=12, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />Calibrating delay loop... 132.71 BogoMIPS (lpj=663552)<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />net_namespace: 640 bytes<br />NET: Registered protocol family 16<br />IXP4xx: Using 16MiB expansion bus window size<br />NSLU2: Using MAC address 00:0f:66:7c:07:24 for port 0<br />PCI: IXP4xx is host<br />PCI: IXP4xx Using direct access for memory space<br />PCI: bus0: Fast back to back transfers disabled<br />dmabounce: registered device 0000:00:01.0 on pci bus<br />dmabounce: registered device 0000:00:01.1 on pci bus<br />dmabounce: registered device 0000:00:01.2 on pci bus<br />NET: Registered protocol family 2<br />Switched to high resolution mode on CPU 0<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 1024 (order: 1, 8192 bytes)<br />TCP bind hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP: Hash tables configured (established 1024 bind 1024)<br />TCP reno registered<br />NET: Registered protocol family 1<br />IXP4xx Queue Manager initialized.<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (SUMMARY)&nbsp; Ã‚Â© 2001-2006 Red Hat, Inc.<br />msgmni has been set to 59<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver $Revision: 1.90 $ 4 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale<br />console [ttyS0] enabled<br />serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale<br />eth0: MII PHY 1 on NPE-B<br />IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br />IXP4XX-Flash.0: Found an alias at 0x800000 for the chip at 0x0<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />erase region 0: offset=0x0,size=0x20000,blocks=64<br />Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0x7e0000<br />6 RedBoot partitions found on MTD device IXP4XX-Flash.0<br />Creating 6 MTD partitions on &quot;IXP4XX-Flash.0&quot;:<br />0x00000000-0x00040000 : &quot;RedBoot&quot;<br />0x00040000-0x00060000 : &quot;SysConf&quot;<br />0x00060000-0x00080000 : &quot;Loader&quot;<br />0x00080000-0x00180000 : &quot;Kernel&quot;<br />0x00180000-0x007e0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=2E0000, len=500000 <br />0x002e0000-0x007e0000 : &quot;rootfs_data&quot;<br />0x007e0000-0x00800000 : &quot;FIS directory&quot;<br />i2c /dev entries driver<br />rtc-x1205 0-006f: chip found, driver version 1.0.8<br />rtc-x1205 0-006f: rtc core: registered rtc-x1205 as rtc0<br />i2c-gpio i2c-gpio.0: using pins 7 (SDA) and 6 (SCL)<br />IXP4xx Watchdog Timer: heartbeat 60 sec<br />Registered led device: nslu2:green:ready<br />Registered led device: nslu2:red:status<br />Registered led device: nslu2:green:disk-1<br />Registered led device: nslu2:green:disk-2<br />TCP westwood registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />XScale DSP coprocessor detected.<br />rtc-x1205 0-006f: setting system clock to 2008-12-20 05:27:43 UTC (1229750863)<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing init memory: 92K<br />Please be patient, while OpenWrt loads ...<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />firmware: requesting NPE-B<br />NPE-B: firmware&#039;s license can be found in /usr/share/doc/LICENSE.IPL<br />NPE-B: firmware functionality 0x2, revision 0x2:1<br />eth0: link down<br />br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.<br />device eth0 entered promiscuous mode<br />Uniform Multi-Platform E-IDE driver<br />ide: Assuming 33MHz system bus speed for PIO modes; override with idebus=xx<br />SCSI subsystem initialized<br />usbcore: registered new interface driver usbfs<br />usbcore: registered new interface driver hub<br />usbcore: registered new device driver usb<br />eth0: link up, 100Mbps, full-duplex, lpa 0xC5E1<br />br-lan: port 1(eth0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0) entering forwarding state<br />NTFS driver 2.1.29 [Flags: R/O MODULE].<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />Driver &#039;sd&#039; needs updating - please use bus_type methods<br />nf_conntrack version 0.5.0 (1024 buckets, 4096 max)<br />wlan: trunk<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 2008-10-02 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, DFS, XR)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: trunk<br />ohci_hcd: 2006 August 04 USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />PCI: enabling device 0000:00:01.0 (0140 -&gt; 0142)<br />ohci_hcd 0000:00:01.0: OHCI Host Controller<br />ohci_hcd 0000:00:01.0: new USB bus registered, assigned bus number 1<br />ohci_hcd 0000:00:01.0: irq 28, io mem 0x48000000<br />usb usb1: configuration #1 chosen from 1 choice<br />hub 1-0:1.0: USB hub found<br />hub 1-0:1.0: 3 ports detected<br />PCI: enabling device 0000:00:01.1 (0140 -&gt; 0142)<br />ohci_hcd 0000:00:01.1: OHCI Host Controller<br />ohci_hcd 0000:00:01.1: new USB bus registered, assigned bus number 2<br />ohci_hcd 0000:00:01.1: irq 27, io mem 0x48001000<br />usb usb2: configuration #1 chosen from 1 choice<br />hub 2-0:1.0: USB hub found<br />hub 2-0:1.0: 2 ports detected<br />USB Universal Host Controller Interface driver v3.0<br />PCI: enabling device 0000:00:01.2 (0140 -&gt; 0142)<br />ehci_hcd 0000:00:01.2: EHCI Host Controller<br />ehci_hcd 0000:00:01.2: new USB bus registered, assigned bus number 3<br />ehci_hcd 0000:00:01.2: irq 26, io mem 0x48002000<br />ehci_hcd 0000:00:01.2: USB 2.0 started, EHCI 1.00, driver 10 Dec 2004<br />usb usb3: configuration #1 chosen from 1 choice<br />hub 3-0:1.0: USB hub found<br />hub 3-0:1.0: 5 ports detected<br />Initializing USB Mass Storage driver...<br />usbcore: registered new interface driver usb-storage<br />USB Mass Storage support registered.<br />root@OpenWrt:/#</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78638">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vertex_vr4</div>
					<div class="post-datetime">
						26 Dec 2008, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I had a simmilar problem on my NSLU2.<br />In your logs I noticed you have ohci installed as well. I&#039;m not sure if it will help but could you try removing it and rebooting.</p><p>Cheers,<br />John</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p78642">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ikemuc</div>
					<div class="post-datetime">
						26 Dec 2008, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi John,</p><p>thanks for your idea / hint. Right now I&#039;m away from home, but I&#039;ll try as soon as I&#039;m at home again <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Greetings from Germany,<br />Eike</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>