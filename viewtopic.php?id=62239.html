<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to enable USB on RB951Ui-2HnD?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p308121">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vnt-83</div>
					<div class="post-datetime">
						18 Jan 2016, 21:06					</div>
				</div>
				<div class="post-content content">
					<p>Hello. I installed Chaos Calmer (15.05) by these manuals: <a href="https://wiki.openwrt.org/toh/mikrotik/rb951ui">one</a> and <a href="https://wiki.openwrt.org/toh/mikrotik/common">two</a>. But on ls /dev i don&#039;t see any usb. How i can use USB flash or camera?</p><p>I&#039;m not found &quot;Release Notes&quot; for 15.05/ar71xx/mikrotik. USB are supported?</p>											<p class="post-edited">(Last edited by <strong>vnt-83</strong> on 18 Jan 2016, 21:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308124">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						18 Jan 2016, 21:56					</div>
				</div>
				<div class="post-content content">
					<p>what about installing kmod-usb-core and kmod-usb2? and other drivers for you usb hardware you trying to connect?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308127">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vnt-83</div>
					<div class="post-datetime">
						18 Jan 2016, 22:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stas2z wrote:</cite><blockquote><p>what about installing kmod-usb-core and kmod-usb2? and other drivers for you usb hardware you trying to connect?</p></blockquote></div><p>I installed its:<br /></p><div class="codebox"><pre><code># opkg update
...
# opkg install kmod-usb-core
...
Configuring kmod-nls-base.
Configuring kmod-usb-core.
# opkg install kmod-usb2
...
Configuring kmod-usb2.</code></pre></div><p>then get errors:<br /></p><div class="codebox"><pre><code># insmod usb-core
Failed to find usb-core. Maybe it is a built in module ?
# insmod usb2
Failed to find usb2. Maybe it is a built in module ?</code></pre></div><p>I found modules in new files /etc/modules-boot.d/20-usb-core and /etc/modules-boot.d/40-usb2. But get errors too:<br /></p><div class="codebox"><pre><code># insmod usb-common
module is already loaded - usb-common
# insmod usbcore
failed to insert /lib/modules/3.18.20/usbcore.ko
# insmod ehci-hcd
failed to insert /lib/modules/3.18.20/ehci-hcd.ko
# insmod ehci-platform
failed to insert /lib/modules/3.18.20/ehci-platform.ko
# insmod ehci-orion
Failed to find ehci-orion. Maybe it is a built in module ?
# insmod ehci-atmel
Failed to find ehci-atmel. Maybe it is a built in module ?</code></pre></div><p>And dmesg:<br /></p><div class="codebox"><pre><code>[ 7735.000000] usbcore: Unknown symbol utf16s_to_utf8s (err 0)
[ 7819.040000] ehci_hcd: Unknown symbol usb_hcd_unlink_urb_from_ep (err 0)
[ 7819.120000] ehci_hcd: Unknown symbol usb_hcd_start_port_resume (err 0)
[ 7819.200000] ehci_hcd: Unknown symbol usb_hc_died (err 0)
[ 7819.260000] ehci_hcd: Unknown symbol usb_disabled (err 0)
[ 7819.320000] ehci_hcd: Unknown symbol usb_hcd_check_unlink_urb (err 0)
[ 7819.400000] ehci_hcd: Unknown symbol usb_hcds_loaded (err 0)
[ 7819.470000] ehci_hcd: Unknown symbol usb_hcd_end_port_resume (err 0)
[ 7819.550000] ehci_hcd: Unknown symbol usb_calc_bus_time (err 0)
[ 7819.620000] ehci_hcd: Unknown symbol ehci_cf_port_reset_rwsem (err 0)
[ 7819.690000] ehci_hcd: Unknown symbol usb_hcd_link_urb_to_ep (err 0)
[ 7819.770000] ehci_hcd: Unknown symbol usb_hub_clear_tt_buffer (err 0)
[ 7819.850000] ehci_hcd: Unknown symbol usb_hcd_giveback_urb (err 0)
[ 7819.920000] ehci_hcd: Unknown symbol usb_hcd_poll_rh_status (err 0)
[ 7820.000000] ehci_platform: Unknown symbol usb_hcd_platform_shutdown (err 0)
[ 7820.090000] ehci_platform: Unknown symbol usb_disabled (err 0)
[ 7820.160000] ehci_platform: Unknown symbol ehci_init_driver (err 0)
[ 7820.230000] ehci_platform: Unknown symbol usb_put_hcd (err 0)
[ 7820.300000] ehci_platform: Unknown symbol ehci_setup (err 0)
[ 7820.370000] ehci_platform: Unknown symbol usb_create_hcd (err 0)
[ 7820.440000] ehci_platform: Unknown symbol usb_remove_hcd (err 0)
[ 7820.510000] ehci_platform: Unknown symbol usb_add_hcd (err 0)
[ 7831.670000] ehci_hcd: Unknown symbol usb_hcd_unlink_urb_from_ep (err 0)
[ 7831.750000] ehci_hcd: Unknown symbol usb_hcd_start_port_resume (err 0)
[ 7831.830000] ehci_hcd: Unknown symbol usb_hc_died (err 0)
[ 7831.900000] ehci_hcd: Unknown symbol usb_disabled (err 0)
[ 7831.960000] ehci_hcd: Unknown symbol usb_hcd_check_unlink_urb (err 0)
[ 7832.040000] ehci_hcd: Unknown symbol usb_hcds_loaded (err 0)
[ 7832.110000] ehci_hcd: Unknown symbol usb_hcd_end_port_resume (err 0)
[ 7832.180000] ehci_hcd: Unknown symbol usb_calc_bus_time (err 0)
[ 7832.250000] ehci_hcd: Unknown symbol ehci_cf_port_reset_rwsem (err 0)
[ 7832.330000] ehci_hcd: Unknown symbol usb_hcd_link_urb_to_ep (err 0)
[ 7832.410000] ehci_hcd: Unknown symbol usb_hub_clear_tt_buffer (err 0)
[ 7832.480000] ehci_hcd: Unknown symbol usb_hcd_giveback_urb (err 0)
[ 7832.560000] ehci_hcd: Unknown symbol usb_hcd_poll_rh_status (err 0)
[ 8201.780000] ehci_hcd: Unknown symbol usb_hcd_unlink_urb_from_ep (err 0)
[ 8201.860000] ehci_hcd: Unknown symbol usb_hcd_start_port_resume (err 0)
[ 8201.940000] ehci_hcd: Unknown symbol usb_hc_died (err 0)
[ 8202.010000] ehci_hcd: Unknown symbol usb_disabled (err 0)
[ 8202.070000] ehci_hcd: Unknown symbol usb_hcd_check_unlink_urb (err 0)
[ 8202.150000] ehci_hcd: Unknown symbol usb_hcds_loaded (err 0)
[ 8202.220000] ehci_hcd: Unknown symbol usb_hcd_end_port_resume (err 0)
[ 8202.290000] ehci_hcd: Unknown symbol usb_calc_bus_time (err 0)
[ 8202.360000] ehci_hcd: Unknown symbol ehci_cf_port_reset_rwsem (err 0)
[ 8202.440000] ehci_hcd: Unknown symbol usb_hcd_link_urb_to_ep (err 0)
[ 8202.520000] ehci_hcd: Unknown symbol usb_hub_clear_tt_buffer (err 0)
[ 8202.590000] ehci_hcd: Unknown symbol usb_hcd_giveback_urb (err 0)
[ 8202.670000] ehci_hcd: Unknown symbol usb_hcd_poll_rh_status (err 0)
[ 8215.320000] usbcore: Unknown symbol utf16s_to_utf8s (err 0)
[ 8235.420000] usbcore: Unknown symbol utf16s_to_utf8s (err 0)
[ 8242.620000] ehci_hcd: Unknown symbol usb_hcd_unlink_urb_from_ep (err 0)
[ 8242.700000] ehci_hcd: Unknown symbol usb_hcd_start_port_resume (err 0)
[ 8242.770000] ehci_hcd: Unknown symbol usb_hc_died (err 0)
[ 8242.840000] ehci_hcd: Unknown symbol usb_disabled (err 0)
[ 8242.900000] ehci_hcd: Unknown symbol usb_hcd_check_unlink_urb (err 0)
[ 8242.980000] ehci_hcd: Unknown symbol usb_hcds_loaded (err 0)
[ 8243.050000] ehci_hcd: Unknown symbol usb_hcd_end_port_resume (err 0)
[ 8243.120000] ehci_hcd: Unknown symbol usb_calc_bus_time (err 0)
[ 8243.190000] ehci_hcd: Unknown symbol ehci_cf_port_reset_rwsem (err 0)
[ 8243.270000] ehci_hcd: Unknown symbol usb_hcd_link_urb_to_ep (err 0)
[ 8243.350000] ehci_hcd: Unknown symbol usb_hub_clear_tt_buffer (err 0)
[ 8243.420000] ehci_hcd: Unknown symbol usb_hcd_giveback_urb (err 0)
[ 8243.500000] ehci_hcd: Unknown symbol usb_hcd_poll_rh_status (err 0)
[ 8330.520000] usbcore: Unknown symbol utf16s_to_utf8s (err 0)
[ 8341.300000] ehci_hcd: Unknown symbol usb_hcd_unlink_urb_from_ep (err 0)
[ 8341.380000] ehci_hcd: Unknown symbol usb_hcd_start_port_resume (err 0)
[ 8341.450000] ehci_hcd: Unknown symbol usb_hc_died (err 0)
[ 8341.520000] ehci_hcd: Unknown symbol usb_disabled (err 0)
[ 8341.580000] ehci_hcd: Unknown symbol usb_hcd_check_unlink_urb (err 0)
[ 8341.660000] ehci_hcd: Unknown symbol usb_hcds_loaded (err 0)
[ 8341.730000] ehci_hcd: Unknown symbol usb_hcd_end_port_resume (err 0)
[ 8341.800000] ehci_hcd: Unknown symbol usb_calc_bus_time (err 0)
[ 8341.870000] ehci_hcd: Unknown symbol ehci_cf_port_reset_rwsem (err 0)
[ 8341.950000] ehci_hcd: Unknown symbol usb_hcd_link_urb_to_ep (err 0)
[ 8342.030000] ehci_hcd: Unknown symbol usb_hub_clear_tt_buffer (err 0)
[ 8342.100000] ehci_hcd: Unknown symbol usb_hcd_giveback_urb (err 0)
[ 8342.180000] ehci_hcd: Unknown symbol usb_hcd_poll_rh_status (err 0)
[ 8351.890000] ehci_platform: Unknown symbol usb_hcd_platform_shutdown (err 0)
[ 8351.980000] ehci_platform: Unknown symbol usb_disabled (err 0)
[ 8352.050000] ehci_platform: Unknown symbol ehci_init_driver (err 0)
[ 8352.120000] ehci_platform: Unknown symbol usb_put_hcd (err 0)
[ 8352.190000] ehci_platform: Unknown symbol ehci_setup (err 0)
[ 8352.260000] ehci_platform: Unknown symbol usb_create_hcd (err 0)
[ 8352.330000] ehci_platform: Unknown symbol usb_remove_hcd (err 0)
[ 8352.400000] ehci_platform: Unknown symbol usb_add_hcd (err 0)</code></pre></div>											<p class="post-edited">(Last edited by <strong>vnt-83</strong> on 18 Jan 2016, 22:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308128">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stas2z</div>
					<div class="post-datetime">
						18 Jan 2016, 22:32					</div>
				</div>
				<div class="post-content content">
					<p>you don&#039;t need insmod it manually, reboot after installation and those modules have to be loaded automatically<br />and those error you get cuz you forgot to insmod nls_base and nls_utf8 first <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>stas2z</strong> on 18 Jan 2016, 22:36)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308129">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">vnt-83</div>
					<div class="post-datetime">
						18 Jan 2016, 22:43					</div>
				</div>
				<div class="post-content content">
					<p>Thank you! USB work?</p><p>In ls /dev found new device: bus.</p><p>And in dmesg appeared a new lines:<br /></p><div class="codebox"><pre><code>[    5.410000] usbcore: registered new interface driver usbfs
[    5.480000] usbcore: registered new interface driver hub
[    5.540000] usbcore: registered new device driver usb
[    5.620000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    5.700000] ehci-platform: EHCI generic platform driver
[    5.760000] ehci-platform ehci-platform: EHCI Host Controller
[    5.830000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    5.920000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[    6.020000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[    6.090000] hub 1-0:1.0: USB hub found
[    6.140000] hub 1-0:1.0: 1 port detected</code></pre></div><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p308130">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">vnt-83</div>
					<div class="post-datetime">
						18 Jan 2016, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Stas, thank you very much! I install kmod-video-core and kmod-video-uvc, then plug my camera and reboot. After reboot i found /dev/video0 and see it in lsusb:</p><div class="codebox"><pre><code># lsusb
Bus 001 Device 002: ID 046d:0825 Logitech, Inc. Webcam C270
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div>											<p class="post-edited">(Last edited by <strong>vnt-83</strong> on 18 Jan 2016, 22:57)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>