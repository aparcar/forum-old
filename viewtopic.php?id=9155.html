<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Asus WL-500gP: unable to use usb 2.0 mermory stick</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 14 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p41417">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">impesa</div>
					<div class="post-datetime">
						24 Jan 2007, 11:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks</p><p>I try to mount my usb 2.0 memory stick at my openwrt router ASUS WL-500gP. In the hardware section, I could read, that there are soome issues for this hardware according usb 2.0.</p><p>I have searched the forum - but I was not able to find some solutions. For me it seems, that this should work?</p><p>My router:</p><p>System Information<br />Firmware&nbsp; &nbsp; &nbsp; OpenWrt White Russian - With X-Wrt Extensions 0.9<br />Kernel&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Linux 2.4.30 #1 Fri Nov 24 23:16:54 EST 2006<br />MAC&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; 00:17:31:DC:06:B9<br />Device&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; ASUS WL-500g Premium<br />Board&nbsp; &nbsp;&nbsp; &nbsp; &nbsp; Broadcom BCM947XX<br />Username&nbsp; &nbsp; &nbsp;root</p><p>Web mgt. console&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Webif2<br />Version&nbsp; &nbsp; &nbsp; &nbsp; r1870</p><br /><p>My dmesg shows the following:</p><p>&lt;6&gt;hub.c: new USB device 01:03.2-1, assigned address 4<br />&lt;6&gt;scsi0 : SCSI emulation for USB Mass Storage devices<br />&lt;4&gt;&nbsp; Vendor: CBM2080&nbsp; &nbsp;Model: Flash Disk&nbsp; &nbsp; &nbsp; &nbsp; Rev: 2.00<br />&lt;4&gt;&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />&lt;4&gt;Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0<br />&lt;4&gt;SCSI device sda: 516352 512-byte hdwr sectors (264 MB)<br />&lt;4&gt;sda: Write Protect is off<br />&lt;6&gt;Partition check:<br />&lt;6&gt; /dev/scsi/host0/bus0/target0/lun0: p1<br />&lt;7&gt;WARNING: USB Mass Storage data integrity not assured<br />&lt;7&gt;USB Mass Storage device found at 4<br />&lt;6&gt;usb.c: USB disconnect on device 01:03.2-1 address 4<br />&lt;6&gt;Device not ready.&nbsp; Make sure there is a disc in the drive.<br />&lt;6&gt;hub.c: new USB device 01:03.2-2, assigned address 5<br />&lt;3&gt;usb.c: USB device not accepting new address=5 (error=-71)<br />&lt;6&gt;hub.c: new USB device 01:03.2-2, assigned address 6<br />&lt;3&gt;usb.c: USB device not accepting new address=6 (error=-71)<br />&lt;6&gt;hub.c: new USB device 01:03.2-1, assigned address 7<br />&lt;7&gt;WARNING: USB Mass Storage data integrity not assured<br />&lt;7&gt;USB Mass Storage device found at 7<br />&lt;6&gt;usb.c: USB disconnect on device 01:03.2-1 address 7<br />&lt;6&gt;Device not ready.&nbsp; Make sure there is a disc in the drive.<br />&lt;6&gt;hub.c: new USB device 01:03.2-2, assigned address 8<br />&lt;7&gt;WARNING: USB Mass Storage data integrity not assured<br />&lt;7&gt;USB Mass Storage device found at 8<br />&lt;6&gt;usb.c: USB disconnect on device 01:03.2-2 address 8<br />&lt;6&gt;Device not ready.&nbsp; Make sure there is a disc in the drive.</p><br /><p>I have loaded the following modules:</p><p>Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by&nbsp; &nbsp; Tainted: P<br />ppp_async&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;8108&nbsp; &nbsp;0 (unused)<br />ppp_generic&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 22868&nbsp; &nbsp;0 [ppp_async]<br />slhc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 6352&nbsp; &nbsp;0 [ppp_generic]<br />ipt_length&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;336&nbsp; &nbsp;5<br />ipt_layer7&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;10512&nbsp; &nbsp;2<br />ipt_ipp2p&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;7320&nbsp; &nbsp;1<br />ipt_CONNMARK&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;816&nbsp; &nbsp;2<br />sch_red&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3216&nbsp; &nbsp;0 (unused)<br />sch_sfq&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;3912&nbsp; &nbsp;4<br />sch_hfsc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15960&nbsp; &nbsp;1<br />cls_fw&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2888&nbsp; &nbsp;4<br />ehci-hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;20556&nbsp; &nbsp;0 (unused)<br />usb-storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 68624&nbsp; &nbsp;0<br />sd_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;12500&nbsp; &nbsp;0<br />scsi_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;70632&nbsp; &nbsp;2 [usb-storage sd_mod]<br />usbcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 74776&nbsp; &nbsp;1 [ehci-hcd usb-storage]<br />vfat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;11692&nbsp; &nbsp;0<br />fat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 36856&nbsp; &nbsp;0 [vfat]<br />wlcompat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;15744&nbsp; &nbsp;0 (unused)<br />tun&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4504&nbsp; &nbsp;0 (unused)<br />wl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 423640&nbsp; &nbsp;0 (unused)<br />switch-robo&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4460&nbsp; &nbsp;0 (unused)<br />switch-core&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;4896&nbsp; &nbsp;0 [switch-robo]<br />diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;19216&nbsp; &nbsp;0 (unused)</p><br /><p>I have installed the following packages:</p><p>base-files - 9 - OpenWrt filesystem structure and scripts<br />base-files-brcm - 2 - Board/architecture specific files<br />bridge - 1.0.6-1 - Ethernet bridging tools<br />busybox - 1.2.1-6 -<br />chillispot - 1.1.0-1 - Wireless LAN HotSpot controller<br />dnsmasq - 2.35-1 - A lightweight DNS and DHCP server<br />dropbear - 0.48.1-1 - a small SSH 2 server/client designed for small memory environments.<br />haserl - 0.8.0-1 - a CGI wrapper to embed shell scripts in HTML documents<br />hswebif - 0.1-1 - Hotspot webif packages.<br />ip - 2.6.11-050330-1 - iproute2 routing control utility<br />ipkg - 0.99.149-2 - lightweight package management system<br />ipkg-upgrade-fix - 0.2-1 - Shows warning about &#039;ipkg upgrade&#039; when user tries to use it.<br />iptables - 1.3.3-2 - The netfilter firewalling software for IPv4<br />iptables-mod-conntrack - 1.3.3-2 - Iptables (IPv4) extensions for connection tracking<br />iptables-mod-extra - 1.3.3-2 - Other extra Iptables (IPv4) extensions<br />iptables-mod-filter - 1.3.3-2 - Iptables (IPv4) extension for packet content inspection<br />iptables-mod-imq - 1.3.3-2 - Iptables (IPv4) extensions for Intermediate Queuing Device QoS-support<br />iptables-mod-ipopt - 1.3.3-2 - Iptables (IPv4) extensions for matching/changing IP packet options<br />iwlib - 29.pre10-1 - Library for setting up WiFi cards using the Wireless Extension<br />kernel - 2.4.30-brcm-5 -<br />kmod-brcm-wl - 2.4.30-brcm-5 - Proprietary driver for Broadcom Wireless chipsets<br />kmod-diag - 2.4.30-brcm-5 - Kernel modules for LEDs and buttons<br />kmod-imq - 2.4.30-brcm-5 - Kernel support for the Intermediate Queueing device<br />kmod-ipt-conntrack - 2.4.30-brcm-5 - Extra Netfilter (IPv4) kernel modules for connection tracking<br />kmod-ipt-extra - 2.4.30-brcm-5 - Other extra Netfilter (IPv4) kernel modules<br />kmod-ipt-filter - 2.4.30-brcm-5 - Netfilter (IPv4) kernel modules for packet content inspection<br />kmod-ipt-ipopt - 2.4.30-brcm-5 - Netfilter (IPv4) kernel modules for matching/changing IP packet options<br />kmod-ipt-nat-default - 2.4.30-brcm-5 - Default Netfilter (IPv4) NAT kernel modules for special protocols<br />kmod-ppp - 2.4.30-brcm-5 - PPP support<br />kmod-pppoe - 2.4.30-brcm-5 - PPP over Ethernet support<br />kmod-sched - 2.4.30-brcm-5 - Kernel schedulers for IP traffic<br />kmod-switch - 2.4.30-brcm-1 - switch driver for robo/admtek switch<br />kmod-tun - 2.4.30-brcm-5 - Kernel TUN/TAP extension<br />kmod-usb-core - 2.4.30-brcm-5 - Kernel Support for USB<br />kmod-usb-storage - 2.4.30-brcm-5 - Kernel modules for USB storage support<br />kmod-usb2 - 2.4.30-brcm-5 - Kernel driver for USB2 controllers<br />kmod-vfat - 2.4.30-brcm-5 - Kernel modules for VFAT filesystem support<br />kmod-wlcompat - 2.4.30-brcm-4 - Compatibility module for using the Wireless Extension with broadcom&#039;s wl<br />libgcc - 3.4.4-8 - GCC support library<br />miniupnpd - 1.0-RC1-1 -<br />mtd - 4 - Tool for modifying the flash chip<br />nas - 3.90.37-17 - Proprietary Broadcom WPA Authenticator/Supplicant<br />ntpclient - 2003_194-2 - NTP (Network Time Protocol) client<br />nvram - 1 - NVRAM utility and libraries for Broadcom hardware<br />ppp - 2.4.3-7 - a PPP (Point-to-Point Protocol) daemon (with MPPE/MPPC support)<br />ppp-mod-pppoe - 2.4.3-7 - a PPPoE (PPP over Ethernet) plugin for PPP<br />qos-scripts - 0.9.3-1 -<br />samba-server - 2.0.10-2 - NetBIOS/SMB file and print server<br />tc - 2.6.11-050330-1 - iproute2 traffic control utility<br />uclibc - 0.9.27-9 - Standard C library for embedded Linux systems<br />webif - 0.3-2 -<br />wificonf - 6 - Replacement utility for wlconf<br />wireless-tools - 29.pre10-1 - Tools for setting up WiFi cards using the Wireless Extension<br />Successfully terminated.</p><br /><p>Can anyboy give me some hints what to do to get my usb memory stick running? Or any hints how to diag the problem?</p><p>Thanks in advance,<br />Joerg</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41419">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ewobbuh</div>
					<div class="post-datetime">
						24 Jan 2007, 12:35					</div>
				</div>
				<div class="post-content content">
					<p>try to install the package kmod-usb-uhci..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41488">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">impesa</div>
					<div class="post-datetime">
						25 Jan 2007, 10:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ewobbuh wrote:</cite><blockquote><p>try to install the package kmod-usb-uhci..</p></blockquote></div><p>Unfortunatly, with the installed kmod-usb-uhci module, the memory stick is no longer found:</p><p>&lt;6&gt;usb.c: registered new driver usbdevfs<br />&lt;6&gt;usb.c: registered new driver hub<br />&lt;6&gt;SCSI subsystem driver Revision: 1.00<br />&lt;6&gt;Initializing USB Mass Storage driver...<br />&lt;6&gt;usb.c: registered new driver usb-storage<br />&lt;6&gt;USB Mass Storage support registered.<br />&lt;6&gt;uhci.c: USB Universal Host Controller Interface driver v1.1<br />&lt;4&gt;PCI: Enabling device 01:03.0 (0000 -&gt; 0001)<br />&lt;6&gt;uhci.c: USB UHCI at I/O 0x100, IRQ 2<br />&lt;6&gt;usb.c: new USB bus registered, assigned bus number 1<br />&lt;6&gt;hub.c: USB hub found<br />&lt;6&gt;hub.c: 2 ports detected<br />&lt;4&gt;PCI: Enabling device 01:03.1 (0000 -&gt; 0001)<br />&lt;6&gt;uhci.c: USB UHCI at I/O 0x120, IRQ 2<br />&lt;6&gt;usb.c: new USB bus registered, assigned bus number 2<br />&lt;6&gt;hub.c: USB hub found<br />&lt;6&gt;hub.c: 2 ports detected<br />&lt;4&gt;PCI: Enabling device 01:03.2 (0000 -&gt; 0002)<br />&lt;6&gt;ehci_hcd 01:03.2: PCI device 1106:3104<br />&lt;6&gt;ehci_hcd 01:03.2: irq 2, pci mem c01a2000<br />&lt;6&gt;usb.c: new USB bus registered, assigned bus number 3<br />&lt;6&gt;EHCI: Enabling VIA 6212 workarounds<br />&lt;6&gt;ehci_hcd 01:03.2: USB 2.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4<br />&lt;6&gt;hub.c: USB hub found<br />&lt;6&gt;hub.c: 4 ports detected</p><br /><p>Shouldn&#039;t there be the following lines:</p><p>&lt;4&gt;&nbsp; Vendor: CBM2080&nbsp; &nbsp;Model: Flash Disk&nbsp; &nbsp; &nbsp; &nbsp; Rev: 2.00<br />&lt;4&gt;&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />&lt;4&gt;Attached scsi removable disk sda at scsi0, channel 0, id 0, lun 0<br />&lt;4&gt;SCSI device sda: 516352 512-byte hdwr sectors (264 MB)<br />&lt;4&gt;sda: Write Protect is off<br />&lt;6&gt;Partition check:<br />&lt;6&gt; /dev/scsi/host0/bus0/target0/lun0: p1</p><br /><p>Is it my fault? Should I configure something? What should I try next?</p><p>Thanks in advance for any help!<br />Joerg</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p41492">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ewobbuh</div>
					<div class="post-datetime">
						25 Jan 2007, 11:11					</div>
				</div>
				<div class="post-content content">
					<p>Hmmz.. it sees your usb stick as a hub.. not seen that before with mine.. i also have a wl500gP with an usb 2.0 stick. It mounts perfectly with the same modules as you use. Try the ohci driver, maybe that works for you, but it will have the speed of an 1.1 stick..</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>