<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> /etc/inittab for delaying process start up</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346540">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">supergeen</div>
					<div class="post-datetime">
						13 Dec 2016, 03:14					</div>
				</div>
				<div class="post-content content">
					<p>Hey all,</p><p>I am trying to use /etc/inittab as a watchdog for one of my processes, we&#039;ll call the process &quot;machine&quot;. So currently, I have this line in /etc/initttab:</p><p>&nbsp; &nbsp; &nbsp;::respaw:machine</p><p>This works perfectly for both starting the process on reboot, and also restarting the process in case it crashes. </p><p>Now my problem is, on reboot, I would like the process to wait around 40 seconds before &quot;machine&quot; gets started; however, if &quot;machine&quot; simply crashes, I would like it to respawn immediately. </p><p>My attempts so far have been to create a sleep script that is also called by /etc/inittab:</p><p>&nbsp; &nbsp; ::wait:sh /etc/sleepy.sh<br />&nbsp; &nbsp; ::respawn:machine</p><p>This does not work, machine is still getting ran instantly upon reboot. Does anyone have suggestions on how to do this, I feel like this is a commonly problem with a simple solution. </p><p>Thanks a lot</p>											<p class="post-edited">(Last edited by <strong>supergeen</strong> on 13 Dec 2016, 03:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346544">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						13 Dec 2016, 04:59					</div>
				</div>
				<div class="post-content content">
					<p>Have you considered the PROCD-based init script/instance instead? AFAIK you can customize its boot process and you can set instance to respawn.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346637">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">supergeen</div>
					<div class="post-datetime">
						13 Dec 2016, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>I actually did not know about procd init scripts. Do it place it in /etc/init.d/ but just with a different shebang line, or does it already exist somewhere?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346643">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						14 Dec 2016, 02:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>supergeen wrote:</cite><blockquote><p>Do it place it in /etc/init.d/ but just with a different shebang line?</p></blockquote></div><p>You nailed it. Whatever little I&#039;ve learnt about PROCD was all from wiki.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>