<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Howto upload openwrt on a WP54GWRT6B</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p53675">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">pobvjansz</div>
					<div class="post-datetime">
						10 Aug 2007, 12:28					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I have a self created OpenWRT trx file. I would like to upload the file through tftp.</p><p>I followed the Docs from compex, but when I try to put the WP54 in firmware upgrade modus, I can&#039;t ping 192.168.168.1 as described.<br />Pressing and Holding the reset button while plugging in power should bring it in the right modus.</p><p>Did I do something wrong or do I need to do something else.</p><p>Kind regards,</p><p>Pascal</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54057">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DD7</div>
					<div class="post-datetime">
						17 Aug 2007, 04:49					</div>
				</div>
				<div class="post-content content">
					<p>What type of loader you are using ?&nbsp; Myloder or CFE ? </p><p>With myloader should be able to Go to firmware modus unless ur reset button is spoilt. </p><p>Another thing u can do is using serial console to active the firmware module. But u might need to have serial converter to do so. </p><br /><p>If you are using CFE or other loader you might need to ask the forum what kind method to be used inorder to upload the firmware to the board. </p><p>I only tried using Myloader it is more easier. just &quot;tftp -i 192.168.168.1 put firmware.BIN&quot; and they&nbsp; give me good support with myloader. </p><p>So happy trying</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54633">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">pobvjansz</div>
					<div class="post-datetime">
						27 Aug 2007, 10:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DD7 wrote:</cite><blockquote><p>What type of loader you are using ?&nbsp; Myloder or CFE ? </p><p>With myloader should be able to Go to firmware modus unless ur reset button is spoilt. </p><p>Another thing u can do is using serial console to active the firmware module. But u might need to have serial converter to do so. </p><br /><p>If you are using CFE or other loader you might need to ask the forum what kind method to be used inorder to upload the firmware to the board. </p><p>I only tried using Myloader it is more easier. just &quot;tftp -i 192.168.168.1 put firmware.BIN&quot; and they&nbsp; give me good support with myloader. </p><p>So happy trying</p></blockquote></div><p>I don&#039;t have a loader? What do you mean by this?<br />I am used to upload images through tftp with an ethernet cable. </p><p>NOTE: I dont have a developer kit.</p><p>Kind regards,<br />Pascal</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p54635">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ggp81</div>
					<div class="post-datetime">
						27 Aug 2007, 10:48					</div>
				</div>
				<div class="post-content content">
					<p>Your board comes with a boot loader installed, which has to load the firmware (OpenWrt or Compex one).<br />If you haven&#039;t the development kit, I think you are using CFE and I&#039;m afraid you aren&#039;t able to load OpenWrt. In order to change the boot loader you need JTAG cable included only in the development kit version.<br />My advice is to contact Compex technical support at support@compex.com.sg. If you provide them your board serial number, they will be ready to help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64635">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hendrawan.ashari</div>
					<div class="post-datetime">
						5 Mar 2008, 17:51					</div>
				</div>
				<div class="post-content content">
					<p>ggp81. can you describe how to write firmware with JTAG on compex. Because i have read <a href="http://wiki.ozo.com/doku.php#compex_wp54-wrt_jtag">http://wiki.ozo.com/doku.php#compex_wp54-wrt_jtag</a>, but i don&#039;t know will start with which materi.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p64678">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ggp81</div>
					<div class="post-datetime">
						6 Mar 2008, 10:39					</div>
				</div>
				<div class="post-content content">
					<p>JTAG is not used to write a firmware but ONLY to write a bootloader.<br />In order to install OpenWrt you have to use Compex myloader. So if your bootloader is CFE, you have to replace it with the other one. To do that you have to use OCD Commander (2.5.4 or previous, not newer ones!).<br />Since the bootloader is provided by Compex, you have to ask them the updated version of Myloader. If you are their customer they will be happy to help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71249">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">DD7</div>
					<div class="post-datetime">
						22 Jul 2008, 06:26					</div>
				</div>
				<div class="post-content content">
					<p>to load OpenWRT you are not required to use JTAG as Compex Myloader V2.40 or above already support OpenWRT </p><p>So what you need to do is Check whether your loader version is Compex Loader V 2.40 (Now should be V2.43 that already able to Support kamiakze 7.09 ) at 22 July 2007 <br />So if Already V2.4x then you may load you firmware by using TFTP . </p><p>If not please provide you serial plus all information needed to the Support or you will need to waste your time for this info again. </p><br /><p>HOW IF YOU DON HV SERIAL CONSOLE&nbsp; ? (Take it easy) </p><p>1. Go to the loader/firmware mode <br />[Press and hold the reset button then power on, the diag led will blinking]</p><p>2. then go to the same directory then do the tftp <br />[TFTP -i 192.168.168.1 firmware.bin] <br />[192.168.168.1 is default frimware mode IP] </p><p>3. Wait <br />[The dig led will steady on now. Wait for 1 Min the diag led will blinking again] <br />[If your diag led never steadly on mean the firmware is not loaded to the device then you may try it again]</p><p>4. After blinking, you may restart your device.</p><p>Now check ur IP and set to 192.168.1.2-254 [192.168.1.1 = default ip]</p><p>Telnet to 192.168.1.1</p><p>Done if you see OpenWRT logo. </p><p>If not but a serial console to see what is going on. </p><br /><p>END </p><br /><br /><br /><p>IF YOU HAVE SERIAL CONSOLE ? (More easy now) </p><p>1. Put in the serial cable n everything </p><p>2. you may follow above method by go to the loader/firmware mode by pressing n power up the device <br />&nbsp; &nbsp; OR <br />&nbsp; &nbsp; Keep Pressing &quot;ESC&quot; button when the device is boot up until you see the &quot;boot menu&quot;</p><p>&nbsp; &nbsp; You will see this <br />&nbsp; &nbsp; ================================================================<br />&nbsp; &nbsp; MyLoader version 2.43.0706<br />&nbsp; &nbsp; System memory: 16MB</p><p>&nbsp; &nbsp; Probe Flash Device: 00400000 at bfc00000<br />&nbsp; &nbsp; Flash Device: Found 1 x16 devices at 0x0 in 16-bit mode<br /> &nbsp; &nbsp; Amd/Fujitsu Extended Query Table v1.1 at 0x0040<br />&nbsp; &nbsp; number of CFI chips: 1</p><p>&nbsp; &nbsp; Flash memory: 4MB<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Update Firmware (Image Mode)<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Mini TFTP Server 1.0 (IP : 192.168.168.1)<br />&nbsp; &nbsp; Usage (Windows 2000/XP) :<br /> &nbsp; &nbsp;&nbsp; tftp -i 192.168.168.1 put &lt;filename&gt;</p><p>&nbsp; &nbsp; ================================================================<br />&nbsp; &nbsp; or This <br />&nbsp; &nbsp; <br />&nbsp; &nbsp; ================================================================</p><p>&nbsp; &nbsp; Main Menu</p><p>&nbsp; &nbsp; 1 - Load Firmware<br />&nbsp; &nbsp; 2 - Load Program<br />&nbsp; &nbsp; 3 - BIOS Setup<br />&nbsp; &nbsp; 4 - Fdisk Utility<br />&nbsp; &nbsp; 5 - Update Flash (Binary Mode)<br />&nbsp; &nbsp; 6 - Update Firmware (Image Mode)<br />&nbsp; &nbsp; 7 - Reboot System<br />&nbsp; &nbsp; 8 - Memory Test<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Please select :&nbsp; <br />&nbsp; &nbsp; ==================================================================</p><p>&nbsp; &nbsp; IF YOU GO SEE THE &quot;MAIN MENU:&quot;&nbsp; dont worry u just need to choose option &quot;6 - Update Firmware (Image Mode)&quot; <br />&nbsp; &nbsp; Then it will go to the &quot;Update Firmware (Image Mode)&quot;&nbsp; (like above:)</p><br /><p>3. then go to the same directory then do the tftp <br />[TFTP -i 192.168.168.1 firmware.bin] <br />[192.168.168.1 is default frimware mode IP] </p><p>4. Wait n see the serial console<br />[After everything is trasfer and uploaded successfuly you will asked to reboot the device] <br />[Now check ur IP and set to 192.168.1.2-254 [192.168.1.1 = default ip]</p><p>5. Telnet to 192.168.1.1</p><p>Done if you see OpenWRT logo. </p><p>If not = Impossible </p><p>Done </p><br /><p>SO JTAG IS NOT NEEDED AT ALL. <br />JTAG is only needed when your loader is corrupted, as long as loader able to boot up serial console is sufficient enough. </p><br /><p>[Info from Compex&#039;s Support Team]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p71250">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">DD7</div>
					<div class="post-datetime">
						22 Jul 2008, 06:37					</div>
				</div>
				<div class="post-content content">
					<p>NOW I GOING TO SHARE WITH ALL OF YOU HOW TO JTAG THE DEVICE [Copy from their tech support]</p><p>VERY IMPORTANT NOTE:&quot;<br />1. Do this only if you not able go to the loader mode or your loader is corrupted. <br />2. After do this your mac address will be erased.<br />3. FIRMWARE corrupted&nbsp; does not required to do this. you need to reupload the firmware to solve this problem .<br />4. Failed on doing this method may caused the board to be malfuntion. So don break you working board. <br />You going to fix the problem not make another one..</p><br /><p>This method is work with WP18 WP188 WP54 and also most of the Compex product <br />as i tried on WP18, WP188 and WP54 soon will test on WP543 </p><p>IAM USING mylOADER v 2.43</p><br /><p>Please follow the guide step by step and follow the information given in every step.</p><p>1. Put the JTAG cable on the WP54 board and run OCD Commander<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; - Please use the OCD Commander Ver 2.5.4 (the new version is not compatible with our product).</p><p>2. &quot;Connection Dialog... &quot; will then pop up.<br />&nbsp; &nbsp; &nbsp;OCD Commander settings:<br />&nbsp; &nbsp; &nbsp;Target Processor: MIPS, EJTAG 2.5, 32 bit&nbsp; &nbsp;[Choose intel 4222/5 if you use WP18/188]<br />&nbsp; &nbsp; &nbsp;Connection&nbsp; &nbsp; &nbsp; &nbsp; : LPT1<br />&nbsp; &nbsp; &nbsp;OCD Device&nbsp; &nbsp; &nbsp; : Wiggler<br />&nbsp; &nbsp; &nbsp;OCD Speed&nbsp; &nbsp; &nbsp; &nbsp;: 380 KHz</p><br /><p>&nbsp; &nbsp; - Press and hold the &quot;Reset&quot; button then Press OK,<br />&nbsp; &nbsp; - If there is an error appear like below, then make sure the cable is connected properly via LPT1</p><p>&nbsp; &nbsp;[ &quot;Error Response from INITIALIZE: 0x03 initialize_target : cable disconnected&nbsp; (10 : 03)&quot; ]</p><p>&nbsp; &nbsp; - If no error then Proceed to Step No 3.&nbsp; &nbsp; </p><br /><p>3. Click on the &quot;Macro&quot; button then Choose the &quot;init-wp54g-16m.mac&quot; (Choose anothe file if WP18/188)<br />&nbsp; &nbsp; - the process might take a little longer. So please wait untill you able to see &quot;GO&quot;.<br />&nbsp; &nbsp; - After that the light Will blink at 1 blink/sec</p><br /><p>4. Upload the Compex loader<br />&nbsp; &nbsp; - First you must able to Ping 192.168.168.1<br />&nbsp; &nbsp; - Then Upload the Compex loader by running the &quot;UpbiosNMylo.bat&quot;<br />&nbsp; &nbsp; - After 2 files (Upbios.tst and Zmylo.bin) has been transfered then Go to step No.5<br />&nbsp; &nbsp; (If Time out Occurred then turn off the device and redo the step No.1)</p><p>&nbsp; &nbsp; REMEMBER DO NOT RUN THIS &quot;MORE THAN ONCE&quot; BEFORE YOU REBOOT IT. YOU BOARD MAY SPOILT IF YOU DO SO. </p><p>5. Turn Off the device and UNPLUG the JTAG device</p><br /><p>6. Then turn on, Now the Diag Light will blink more faster st 2 blink/Sec</p><br /><p>7. Upload the FirmWare (Compex/Open WRT firmware)</p><p>&nbsp; &nbsp; 7.1 FOR Compex Firmware<br />&nbsp; &nbsp; - Go to CMD/DOS then type<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; Tftp -i 192.168.168.1 put &lt;FIRMWARE NAME&gt;<br />&nbsp; &nbsp; <br />&nbsp; &nbsp; - Firmware is available via <a href="http://www.compex.com.sg">http://www.compex.com.sg</a>/<br />&nbsp; &nbsp; - the light will keep turn on(No blink) when uploading the Firmware, Wait until it blinks again the restart.<br />&nbsp; &nbsp; - DO NOT Turn Off even the CMD prompt that the file transfer is transfered successful, <br />&nbsp; &nbsp; - You Must wait until the Diag light is blinking.<br />&nbsp; &nbsp; - IF the Diag Led is blinking (after 60 Seconds) then restart the device<br />&nbsp; &nbsp; - The device is loaded with COMPEX&#039;s loader V2.4 and Compex Firmware.</p><p>&nbsp; &nbsp; 7.2 FOR Open-WRT<br />&nbsp; - ASK the patches from the support if you want to built or compile your own.<br />&nbsp; - IF not you may ask from them compiled image </p> <br /><br /><p>If you still unsuccessful you can try to contact at support@compex.com.sg</p>											<p class="post-edited">(Last edited by <strong>DD7</strong> on 22 Jul 2008, 06:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p79087">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">kiug</div>
					<div class="post-datetime">
						6 Jan 2009, 11:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>Can you send me old version OCD Commander Ver 2.5.4? I can&#039;t find them....</p><p>karoldro@gmail.com</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>