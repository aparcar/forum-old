<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Usb problem: Tp-link 1043ND</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p165659">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">markuznw</div>
					<div class="post-datetime">
						24 Apr 2012, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>Hello, I&#039;ve got a problem with my tp link 1043nd. I recently switched to openwrt (coming from another unofficial firmware) trunk and I&#039;m trying to setup a usb pen for swap and eventually install transmission/dlna server (like i had on the previous firmware).<br />I installed the following modules through opkg: kmod-usb-core, kmod-scsi-core, kmod-usb-storage, kmod-usb2, kmod-fs-ext4, kmod-fs-vfat but as soon as i plug ANY usb device (tried with 2x usb pen and 2x usb hard drives) i loose network on router (wireless shut down and ethernet too) and router stays in what seems a kernel panic state so I can&#039;t access it to have a dmesg or whatever and see what happens.</p><p>Anyone experienced the same? Any idea on how to fix it?</p><p>P.S. If i&#039;m missing something please tell me, i&#039;m not experienced with openwrt as said</p><p>Thanks in advance <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165662">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						24 Apr 2012, 17:52					</div>
				</div>
				<div class="post-content content">
					<p>This usually happens if you install kmods which do not fit to the running kernel. Any attempt to use them will result in a bad memory access which crashes the kernel.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165666">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">markuznw</div>
					<div class="post-datetime">
						24 Apr 2012, 18:03					</div>
				</div>
				<div class="post-content content">
					<p>So, how can I make sure they are the right versions for the running kernel? I just gave the opkg installing all of them at the very same moment from official repository <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165678">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						24 Apr 2012, 19:27					</div>
				</div>
				<div class="post-content content">
					<p>Currently repo is not working correctly.<br />I did compile a firmware with all the features you wanted because I wanted those features as well.<br />You can get it here <br /><a href="http://www.mediafire.com/?ag5j2jzazcy54">http://www.mediafire.com/?ag5j2jzazcy54</a></p>											<p class="post-edited">(Last edited by <strong>alphasparc</strong> on 24 Apr 2012, 19:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165829">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">markuznw</div>
					<div class="post-datetime">
						26 Apr 2012, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>Thanks it seems to work fine with it. The only problem I&#039;ve seen so far is sometimes it doesn&#039;t write config files (like router out of memory) in luci config, for example right now happens that i can&#039;t change mount points cause it&#039;s not saving them</p>											<p class="post-edited">(Last edited by <strong>markuznw</strong> on 26 Apr 2012, 08:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165831">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">freddyarenas</div>
					<div class="post-datetime">
						26 Apr 2012, 08:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>markuznw wrote:</cite><blockquote><p>Thanks it seems to work fine with it. The only problem I&#039;ve seen so far is sometimes it doesn&#039;t write config files (like router out of memory) in luci config, for example right now happens that i can&#039;t change mount points cause it&#039;s not saving them</p></blockquote></div><p>maybe is because the router have not more flash space and the filesystem got corrupted for that, that mean the flash space is locked, to fix that you must set openwrt to default configuration.<br />Try to you do a backup and after that set openwrt to default configuration</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165859">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">markuznw</div>
					<div class="post-datetime">
						26 Apr 2012, 14:32					</div>
				</div>
				<div class="post-content content">
					<p>It does not work. I reseted to default settings and for a while it works, but as soon as I end to configure transmission and various stuff the same error happens, not updating stuff anymore <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p165884">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">freddyarenas</div>
					<div class="post-datetime">
						27 Apr 2012, 06:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>markuznw wrote:</cite><blockquote><p>It does not work. I reseted to default settings and for a while it works, but as soon as I end to configure transmission and various stuff the same error happens, not updating stuff anymore <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>That is it! you installed so much software into the ROM, i remember one time i compile a image with so much packages inside, that flashed but nothing got saved because i do not haved enough ROM to saved settings!</p><p>you must compile a new image and remove unused packages to get enough space to set settings. i hope this help you</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p187843">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">iyas120</div>
					<div class="post-datetime">
						4 Jan 2013, 07:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>markuznw wrote:</cite><blockquote><p>Hello, I&#039;ve got a problem with my tp link 1043nd. I recently switched to openwrt (coming from another unofficial firmware) trunk and I&#039;m trying to setup a usb pen for swap and eventually install transmission/dlna server (like i had on the previous firmware).<br />I installed the following modules through opkg: kmod-usb-core, kmod-scsi-core, kmod-usb-storage, kmod-usb2, kmod-fs-ext4, kmod-fs-vfat but as soon as i plug ANY usb device (tried with 2x usb pen and 2x usb hard drives) i loose network on router (wireless shut down and ethernet too) and router stays in what seems a kernel panic state so I can&#039;t access it to have a dmesg or whatever and see what happens.</p><p>Anyone experienced the same? Any idea on how to fix it?</p><p>P.S. If i&#039;m missing something please tell me, i&#039;m not experienced with openwrt as said</p><p>Thanks in advance <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>Hi.. i am trying to shared my experiemce using tp ling 1043nd.. This is a nice hardware.. almost a years i cannot install transmission because the same problem with you but not kernel panic issue... well finaly find the problem.... which is package&nbsp; kmod-fs-ext4 that cannot handle ext3 partition and making a lot crash.. and said that my device (32 GB USB Flashdisk)...&quot;not ready&quot;<br />this is my configuration :<br />1. Remove&nbsp; kmod-fs-ext4<br />2. Install&nbsp; kmod-fs-ext3 using luci<br />3. Making 2 partition on my 32GB USB flashdisk with 31,5GB on /dev/sda1 with Ext3 partition<br />4. the other is swap partition on /dev/sda2<br />.. Now My router running stable for a week without crash/device not ready......</p><p>I wonder.. what if still using&nbsp; kmod-fs-ext4 but making partition with ext4 on /dev/sda1... on next holiday..will try</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>