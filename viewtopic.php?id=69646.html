<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> No openssh-sftp-server on CC 15.01 TG582n</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p350726">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						31 Jan 2017, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve got CC 15.05 running fine on my TG582n&nbsp; as a dumb AP (I did try 15.05.1 but that would not save settings after a reboot, so reverted to 15.05).</p><p>Anyway, I want to update the SCP server to SFTP so ran</p><p>opkg update</p><p>(nothing seems to happen)</p><p>then<br />opkg install openssh-sftp-server</p><p>with the result<br /></p><div class="codebox"><pre><code>Unknown package &#039;openssh-sftp-server&#039;.
Collected errors:
 * opkg_install_cmd: Cannot install package openssh-sftp-server.</code></pre></div><p>When I run<br />opkg list</p><p>It does not seem to be available.&nbsp; Furthermore, that list is identical to that returned with</p><p>opkg list_installed</p><p>Am I not connecting to the server?</p><p>How do I proceed to get SFTP server installed or am I stuck with SCP?</p><p>Advice please.<br />TIA</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350728">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">carlosalberto4ti</div>
					<div class="post-datetime">
						31 Jan 2017, 14:19					</div>
				</div>
				<div class="post-content content">
					<p>need run &quot;opkg update&quot; frist , check is your repositóry have https , change to http and try &quot;opkg update &amp;&amp; opkg install openssh-sftp-server&quot;</p>											<p class="post-edited">(Last edited by <strong>carlosalberto4ti</strong> on 31 Jan 2017, 14:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350729">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						31 Jan 2017, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the fast reply.<br />I did run<br />opkg update<br />first. <br />But nothing happens. I would expect to see a lot of traffic?</p><p>I am using the standard stock generic release. Does that not support h t t p?<br />How do I check/change it?<br />Is there a site I can download the required update from manually?</p><p>EDIT<br />In / etc / config /&nbsp; uh t t p d I have<br /></p><div class="codebox"><pre><code>config u h t t p d &#039;main&#039;
    list listen_h t t p &#039;0.0.0.0:80&#039;
    list listen_h t t p &#039;[::]:80&#039;
    list listen_h t t p s &#039;0.0.0.0:443&#039;
    list listen_h t t p s &#039;[::]:443&#039;
    option redirect_ h t t p s &#039;1&#039;
..........</code></pre></div><p>[The spaces between the h and the t t p are to get around the forum posting restrictions.]</p><p>Firewall is disabled on the openwrt dumb AP.</p>											<p class="post-edited">(Last edited by <strong>picoman</strong> on 31 Jan 2017, 14:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350730">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						31 Jan 2017, 15:02					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>please post the output from &quot;route -n&quot;</p><br /><p>Gruß<br />Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350732">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						31 Jan 2017, 15:17					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve found the required package here<br />_hxxps://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/packages/openssh-sftp-server_7.1p2-1_brcm63xx.ipk</p><p>and installed it manually.</p><p>However, I still would like to know why I do not seem to be able to connect directly from the router itself?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350733">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						31 Jan 2017, 15:18					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
0.0.0.0         192.168.0.211   0.0.0.0         UG    0      0        0 br-lan
192.168.0.0     0.0.0.0         255.255.255.0   U     0      0        0 br-lan</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350752">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						31 Jan 2017, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>hello,</p><p>is 192.168.0.211 the ip address of your internetrouter?<br />can you post the output from<br />1) ping google.com -c 4<br />2) opkg update</p><p>Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350754">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						31 Jan 2017, 19:55					</div>
				</div>
				<div class="post-content content">
					<p>Yes, 192.168.0.211 is the address of the internet router/gateway.</p><p>Pinging from openwrt router works - so there must be an external connection.</p><div class="codebox"><pre><code>root@OpenWrt:~# ping google.com -c 4
PING google.com (216.58.213.110): 56 data bytes
64 bytes from 216.58.213.110: seq=0 ttl=54 time=12.165 ms
64 bytes from 216.58.213.110: seq=1 ttl=54 time=10.322 ms
64 bytes from 216.58.213.110: seq=2 ttl=54 time=10.629 ms
64 bytes from 216.58.213.110: seq=3 ttl=54 time=10.639 ms

--- google.com ping statistics ---
4 packets transmitted, 4 packets received, 0% packet loss
round-trip min/avg/max = 10.322/10.938/12.165 ms</code></pre></div><p>But nothing happens after the update cmd. I just get the prompt again instantly.</p><div class="codebox"><pre><code>root@OpenWrt:~# opkg update
root@OpenWrt:~#</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350786">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rj-45</div>
					<div class="post-datetime">
						1 Feb 2017, 07:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello again,</p><p>please post the output from <br />1) opkg update -V 4<br />2) cat /etc/opkg/distfeeds.conf<br />3) cat /etc/opkg.conf</p><br /><p>Christoph</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350810">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						1 Feb 2017, 11:57					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>root@OpenWrt:~# opkg update -V 4
opkg_conf_parse_file: Loading conf file /etc/opkg.conf.
opkg_conf_parse_file: Loading conf file /etc/opkg/customfeeds.conf.
pkg_hash_load_feeds:
pkg_hash_load_status_files:</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/opkg/distfeeds.conf
cat: can&#039;t open &#039;/etc/opkg/distfeeds.conf&#039;: No such file or directory</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:~# cat /etc/opkg.conf
dest root /
dest ram /tmp
lists_dir ext /var/opkg-lists
option overlay_root /overlay
option check_signature 1</code></pre></div><p>When I check /etc/opkg I have an empty &quot;customfeeds.conf&quot; but indeed NO &quot;distfeeds.conf&quot;.</p><p>This is obviously the cause of the problem. What are the contents of this file so I can add it back?<br />More importantly, why is it missing in the first place?&nbsp; I am very sure I&#039;ve not deleted it, as I&#039;ve not been in this folder before (only in etc/config).<br />Many thanks for your continued help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p350814">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">picoman</div>
					<div class="post-datetime">
						1 Feb 2017, 12:32					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve found the contents of distfeeds.conf for my router<br /></p><div class="codebox"><pre><code>src/gz chaos_calmer_base http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/base
src/gz chaos_calmer_telephony http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/telephony
src/gz chaos_calmer_packages http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/packages
src/gz chaos_calmer_routing http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/routing
src/gz chaos_calmer_luci http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/luci
src/gz chaos_calmer_management http://downloads.openwrt.org/chaos_calmer/15.05/brcm63xx/generic/packages/management</code></pre></div><p>I can confirm<br />opkg update<br />is now working. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I&#039;d still like to know why the file was missing though!<br />The only thing that I think could have caused it was my upgrade to 15.05.1 and then reversion to 15.05.</p><p>Many thanks to rj-45 for his help.<br />Cheers<br />Pico</p>											<p class="post-edited">(Last edited by <strong>picoman</strong> on 1 Feb 2017, 12:34)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>