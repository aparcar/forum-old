<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> bad interaction of perl and httpd: SIGCHLD disabled?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p74360">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">semenzato</div>
					<div class="post-datetime">
						7 Oct 2008, 20:17					</div>
				</div>
				<div class="post-content content">
					<p>After some minor changes, my previously perfectly working Perl cgi-bin script appears<br />to no longer produce output.&nbsp; More precisely, httpd produces a blank page after running<br />the script.&nbsp; If I run the Perl script manually, the correct output is produced.</p><p>If I enable warnings by starting the script with the line</p><p>#! /usr/bin/perl -w</p><p>the httpd log (obtained by running httpd -h/www -f -vvvv) shows this message:</p><p>Can&#039;t ignore signal CHLD, forcing to default.</p><p>which seems to indicate that httpd is mucking with signals.<br />The script appears to be running normally (I can log from the<br />script to a temp file) but the output is lost---either it&#039;s not flushed<br />out by the script when it exits, or it is discarded by httpd.</p><p>Either way, it&#039;s a pretty sorry state of affairs.&nbsp; Should I switch to a different<br />http server?</p><p>Thanks!<br />Luigi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74371">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">semenzato</div>
					<div class="post-datetime">
						8 Oct 2008, 01:08					</div>
				</div>
				<div class="post-content content">
					<p>I need to correct myself.&nbsp; The bug is not related to the signal handling.<br />There is something else going on that makes the perl script work when run from the shell,<br />and fail when invoked by httpd.&nbsp; I haven&#039;t narrowed it down yet, but simple scripts<br />that don&#039;t read from standard input always work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74373">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">semenzato</div>
					<div class="post-datetime">
						8 Oct 2008, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>Sigh... I don&#039;t exactly enjoy letting the whole world know how much time I waste<br />because of one small glitch, but maybe this will be useful for someone.</p><p>There is nothing wrong with perl or httpd, except the willingness of the latter to<br />silently swallow incorrect output.&nbsp; My perl script was outputting this:</p><p>Content-Type: text/html<br />&lt;html&gt;<br />&lt;head&gt; </p><p>without a blank line between the Content-Type line and the &lt;html&gt; line.<br />This makes the busybox httpd reject the output---quietly, as I said, even<br />with maximum verbosity.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p74389">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">d1mag</div>
					<div class="post-datetime">
						8 Oct 2008, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>I and several other developers have noticed that libpthread in uClibc-0.9.29 is seriously broken...<br />Can you try to recompile your firmware and all packages with uClibc-0.9.28.3 which contains an older (working) libpthread.</p><p>It would be nice to hear if this works for you as well. It has solved all problems for me so far, and I can&#039;t understand why uClibc-0.9.29 is used as default when it&#039;s not working correctly.</p><p>/Christian</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>