<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ZyXEL P-2812HNU-F1 Unbranding Process</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Apr 2018 and 19 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=47957&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=5.html">5</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p220532">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						21 Dec 2013, 12:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi ALL.</p><p>I finally got it: I unbranded or changed the firmware from my ZyXEL P-2812HNU-F1 router. Now working with this router and firmware version 3.11(TUJ.0)C0 I previously downloaded from ZyXEL FTP server.</p><p>All you need is:</p><ol class="alpha"><li><p>Philips screwdriver</p><br /></li><li><p>USB to TTL <span style="color: red"><strong>FTDI</strong></span> cable (<a href="http://www.ebay.es/itm/310782542945"><span style="color: blue"><strong><span class="bbu">eBay</span></strong></span></a>) &amp; <a href="http://www.ftdichip.com/Drivers/VCP.htm"><span style="color: blue"><strong><span class="bbu">Drivers</span></strong></span></a></p><br /></li><li><p>RJ45 LAN cable</p><br /></li><li><p><a href="http://ttssh2.sourceforge.jp/"><span style="color: blue"><strong><span class="bbu">Tera Term Pro</span></strong></span></a> for Windows®</p><br /></li><li><p><a href="http://www.jounin.net/tftpd32.html"><span style="color: blue"><strong><span class="bbu">TFTPD32</span></strong></span></a> , a TFTP Server</p><br /></li><li><p>Files:</p><br /><ul><li><p>Bootbase @ <a href="https://www.dropbox.com/sh/4blq25dpdjs74qs/YIVklnI95C/bootbase/304TUJ.bm"><strong><span style="color: blue"><span class="bbu">304TUJ.bm</span></span></strong></a></p><br /></li><li><p>Firmware @ <a href="https://www.dropbox.com/sh/4blq25dpdjs74qs/apvvDwYTVE/311TUJ0C0/311TUJ0C0.bin"><strong><span style="color: blue"><span class="bbu">311TUJ0C0.bin</span></span></strong></a></p><br /></li><li><p>Password generator @ <a href="https://www.dropbox.com/sh/4blq25dpdjs74qs/a73tdr7ZFi/ZynPass/ZynPass.exe"><strong><span style="color: blue"><span class="bbu">ZynPass</span></span></strong></a></p><br /></li></ul></li></ol><p>The procedure is as follows:</p><br /><ol class="decimal"><li><p>Unmount front panel of ZyXEL P-2812HNU-F1 using screwdriver</p><br /></li><li><p>Connect FTDI TTL cable (just GND, TX and RX cables are needed) to the router board as indicated in the following image</p><br /><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="postimg"><img src="http://imageshack.us/a/img823/4554/0cpw.jpg" alt="http://imageshack.us/a/img823/4554/0cpw.jpg" /></span></p><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="postimg"><img src="http://imageshack.us/a/img11/4401/3n2x.jpg" alt="http://imageshack.us/a/img11/4401/3n2x.jpg" /></span></p><br /><p>&nbsp; &nbsp; &nbsp;<br />Observe <strong>GND</strong> pin as reference pin (isolated pin).</p><br /></li><li><p>Connect FTDI USB cable to PC and install drivers.</p><br /></li><li><p>Connect <strong>LAN1</strong> port of router to your PC LAN port usign RJ45 cable.</p><br /></li><li><p>Configure PC LAN adapter:</p><br /><ul><li><p>IP Address: <strong>192.168.1.<span style="color: red">X</span></strong> (where <strong><span style="color: red">X</span></strong> is in the range of 2 to 255)</p><br /></li><li><p>Subnet mask: <strong>255.255.255.0</strong></p><br /></li></ul></li><li><p>Start Tera Term Pro and configure serial port:</p><br /><ul><li><p>Port: (see serial ports in Computer Management/Device Management)</p><br /></li><li><p>Baud rate: 115200</p><br /></li><li><p>Data: 8 bit</p><br /></li><li><p>Parity: none</p><br /></li><li><p>Stop: 1 bit</p><br /></li><li><p>Flow control: none</p><br /></li></ul></li><li><p>Power up the router andstop start up sequence by pressing any key.</p><br /><p>You should see ZyU console like </p><br /><p>&nbsp; &nbsp; &nbsp;<strong>ZHAL&gt;_</strong></p><br /><p><span style="color: red"><strong>Note</strong></span>: All <strong>AT commands</strong> (ATSH, ATSE, ATEN, ...) will be executed in Tera Term Pro, that is in ZyU console.</p><br /></li><li><p>Execute <strong>TFTPD32</strong></p><br /><p>Configure to bind TFTP server to PC LAN port (192.168.1.<strong><span style="color: red">X</span></strong>)</p><br /><p>Copy bootbase file <strong>304TUJ.bm</strong> and frimware file <strong>311TUJ0C0.bin</strong> to TFTP <em>Base Directory</em> folder (where send/receive files are stored)</p><br /></li><li><p>Execute <strong>ATSH</strong> command </p><br /><p>Take note of <strong><span style="color: green">Serial number</span></strong> and <strong><span style="color: green">First MAC address</span></strong> values</p><br /></li><li><p>Execute <strong>ATSE P-2812HNUL-F1</strong> command </p><br /><p>Where P-2812HNUL-F1 is the x argument of ATSE command.</p><br /><p>You will obtain a 12 digit <span style="color: orange">seed number</span></p><br /></li><li><p>Execute <strong>ZynPass.exe</strong> windows application</p><br /><p>Introduce previous <span style="color: orange">seed number</span> provided by ATSE command in <em>seedNumber</em> field, then push <em>Generar</em> button and obtain the <span style="color: red">password</span> for ATEN command in <em>Password</em> field</p><br /><br /><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="postimg"><img src="http://imageshack.us/a/img577/1306/artl.png" alt="http://imageshack.us/a/img577/1306/artl.png" /></span></p><br /><br /></li><li><p>Execute <strong>ATEN 1,password</strong> command </p><br /><p>Where password is the <span style="color: red">password</span> we previously obtained in step 11.</p><br /><p>This command activates Enable Debug Falg.</p><br /></li><li><p>Execute <strong>ATBT 1</strong> command.</p><br /><p>This command unlocks block0 in flash memory where bootloader resides.</p><br /></li><li><p>Execute <strong>ATUB 304TUJ.bm</strong> command. </p><br /><p>This command uploads bootbase file from TFTPD Base directory folder to the router, erases the block0 flash and writes new bootbase</p><br /></li><li><p>Execute <strong>ATUR 311TUJ0C0.bin</strong> command</p><br /><p>This command uploads firmware file from TFTP Base directory folder to the router, erases the flash and writes new firmware</p><br /></li><li><p>Restart the router (switch off and then switch on)</p><br /></li></ol><br /><p>Now it&#039;s necessary to <em>customize</em> the serial number and the MAC address to match label in the router.</p><br /><ol class="decimal"><li><p>Repeat steps 7 and 13 to get access to ZyU console</p><br /><p>Observe Debug Falg is enable in the new boobase, by default.</p><br /></li><li><p>Execute <strong>ATCB</strong> command</p><br /><p>This command copies manfacturer data from flash rom to working buffer (RAM)</p><br /></li><li><p>Execute <strong>ATSN SerialNumber</strong> command</p><br /><p>Where SerialNumber is the <span style="color: green"><strong>Serial number</strong></span> obtained in step 9</p><br /><p>This command changes serial number in working buffer to the right one in the router label/stick</p><br /></li><li><p>Execute <strong>ATWM MACAddress</strong> command</p><br /><p>Where MACAddress is the <span style="color: green"><strong>First MAC address</strong></span> obtained in step 9</p><br /><p>This command changes MAC address in working buffer to the right one in the router label/stick</p><br /></li><li><p>Execute <strong>ATSB</strong> command</p><br /><p>This command saves customized data in working buffer to flash rom.</p><br /></li></ol><br /><p>Available <strong>AT commands</strong> in ZyU console should be:</p><div class="codebox"><pre><code>ZHAL&gt; ATHE
ATBT    x         block0 write enable (1=enable, 0=disable)
ATWM    x         set MAC address in working buffer
ATEN    x,(y)     set BootExtension Debug Flag (y=password)
ATSE    x          show the seed of password generator
ATWZ    a(,b,c)   write ZyXEL MAC addr, Country code, EngDbgFlag
ATCB              copy from FLASH ROM to working buffer
ATCL              clear working buffer
ATSB              save working buffer to FLASH ROM
ATBU              dump manufacturer related data in working buffer
ATSH              dump manufacturer related data in ROM
ATCO    x         set country code in working buffer
ATFL    x         set EngDebugFlag in working buffer
ATVD    x         set vendor name in working buffer
ATPN    x         set product name in working buffer
ATFE    x,y,...   set feature bits in working buffer
ATSN    x         set serial number in FLASH ROM
ATTL              MRD_CERT &amp; ROM-D partition utility
ATGO              boot up whole system
ATGU              go back to U-Boot command line mode
ATRT    (x,y,z,u) ATRT RAM read/write test (x=level, y=start addr, z=end addr, u=iterations
ATMI    x         Enable/Disable model ID checking (1=enable, 0=disable)
ATUR    x         upgrade RAS image (filename)
ATUB    x         upgrade ZyU-Boot image (filename)
ZHAL&gt;</code></pre></div>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 22 Dec 2013, 20:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220560">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">cornelus2009</div>
					<div class="post-datetime">
						21 Dec 2013, 21:43					</div>
				</div>
				<div class="post-content content">
					<p>oau, bravo! </p><p>nice tutorial.</p>											<p class="post-edited">(Last edited by <strong>cornelus2009</strong> on 21 Dec 2013, 21:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220562">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						21 Dec 2013, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>Thanks cornelus2009.</p><p>Now I&#039;m investigating and looking for information about <strong>TUJ.3</strong> firmware to see if it comes from any ISP or is the most advanced firmware from ZyXEL for this router.</p><p>I will purcahse a new router (maybe in amazon) and study it firmware.</p><p>Advice: use <a href="http://winscp.net/eng/docs/introduction"><span style="color: blue"><strong><span class="bbu">WinSCP</span></strong></span></a> to access router&#039;s file system after SFTP service is activate.</p><p>I can see 3.11(TUJ.0)C0 comes with a Telenor user folder (in /home folder) so maybe this router was a custom design for Telenor in first approach, later for public customers.</p><p>I will try to improve with customized images.</p><p>Just another way to help users to customized their routers.</p><p>Any suggestion will be welcome.</p><p><em><strong>I enjoy helping</strong></em></p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 22 Dec 2013, 10:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220596">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						22 Dec 2013, 04:19					</div>
				</div>
				<div class="post-content content">
					<p>asmartin,</p><p>Very well explained doc! For sure i gonna test this one. <br />(still waiting for my TTL serial cable : )</p><br /><p>Questions:</p><p>Point 10:<br />Are you sure about: <em>Execute ATSE P-2812HNUL-F1 command?</em><br />Because the &#039;L&#039; version is another version of the P-2812-router range?</p><p>Point 16: <br />Isn&#039;t the router rebooting by itself after downloading new firmware?</p><br /><p>Remarks:</p><p>Point 11:<br />Found also online calculator for (other) ZyXEL machines: <a href="http://www.tonycool.es/zyxel/zynpass_en.htm">http://www.tonycool.es/zyxel/zynpass_en.htm</a></p><p>Just for u to change in original doc:<br />- screwdriver instead of <em>screewdriver</em> (multiple)</p><br /><p>Regards, DG.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220600">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						22 Dec 2013, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi DGDodo.</p><p>Thank you.</p><p>I will try to answer point by point.</p><p><strong>Point 10</strong>: </p><p>Yes, it works in most routers, it&#039;s just a &quot;word&quot; I had when I look to GPL sources and found this &quot;jocking&quot; parameter just needed to avoid us to use ATSE command, so it has no meaning more than being &quot;secret&quot;. It could be &quot;smile&quot; or &quot;wierd&quot; or any strange word, not&nbsp; related to model. Have a look to this <a href="https://forum.openwrt.org/viewtopic.php?id=46616&amp;p=6"><span style="color: blue"><strong><span class="bbu">link</span></strong></span></a>. Cornelus2009 found DSL-2492HNU-L3v2&nbsp; as x parameter for his P-2812HNU-F3 (from Telenor).</p><p><strong>Point 16</strong>:</p><p>Yes router reboots but I prefer to force manually rebooting after flashing process to ensure all memories and parameters are actually restarted in the router. Maybe this step could be avoided, but also defines an &quot;end point&quot; for this procedure, because it&#039;s not necessary to load customized MAC and serial numbers too.</p><p><strong>Point 11</strong>:</p><p>I used the ZynPass.exe, but you can use any password generator like that from Antonio (Tony). Doesn&#039;t matter. Indeed, if you don&#039;t work under Windows, you need another access like that of Tony to calculate the password, best suitable for web broser.</p><p>Maybe you could compile the code for new calculator in linux and include it in the procedure ... just have a look to this <a href="http://www.hot.ee/xiios/zyxel/keygen/zyxel.cc">code from xiios@hot.ee</a> and the <a href="http://www.inventec.ch/chdh/notes/5.htm">procedure</a>.</p><p>There is also a linux password generator at <a href="https://www.dropbox.com/s/nvzskobftyzbmkz/zyxel">linux password generator</a>. Thanks to cornelus2009. You only need to execute this program using <strong>./zyxel</strong> in same folder it resides.</p><br /><p>Thanks for your advice regarding &quot;double ee&quot;, I&#039;m from Spain, and I need to correct a lot of my english <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" />. </p><p>All suggestions will be welcome. We need to improve the procedure as much as possible.</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 22 Dec 2013, 12:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220656">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">DGDodo</div>
					<div class="post-datetime">
						22 Dec 2013, 21:33					</div>
				</div>
				<div class="post-content content">
					<p>asmartin,</p><p>Clear answers for me, THX!</p><p>I bought myself the <a href="http://www.ebay.ca/itm/gib-USB-To-RS232-TTL-Auto-Converter-Module-Converter-Adapter-For-Arduino-S9-/171109811185">TTL serial converter</a> on ebay, below 1 euro!<br />Although not yet received it, already have made some plans for the ZyXEL that I wanna fix.</p><p>1st: <br />Run <a href="https://forum.openwrt.org/viewtopic.php?pid=220532">your fix</a> process to make the box running &#039;normal&#039; again.<br /><a href="https://forum.openwrt.org/viewtopic.php?id=47793">It now only boots but does not give an ipadres, so i don&#039;t have a clue if it can even be fixed (need the TTL serial converter).</a> </p><p>2nd:<br />Reverse analyse working environment, so I (we) can rebuild OpenWRT to run on these boxes.<br />Don&#039;t need the ADSL functionality, only WAN, Wifi and LAN, 4x1Gbps would be perfect!<br />Hopefully WAN can run 1Gbps as well, otherwise I only need the 1Gbps hub and Wifi.</p><p>Hopefully waiting on my TTL serial cable<br />Also to fix another (branded) router, <a href="https://forum.openwrt.org/viewtopic.php?id=47954">TG787v</a>.</p><p>Regards, DG.<br />&#039;Every day, everybody should learn 1 thing&#039;, quote of myself.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p220672">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						23 Dec 2013, 01:16					</div>
				</div>
				<div class="post-content content">
					<p>Here is web calculator for ATEN password:</p><p>&nbsp; &nbsp; &nbsp; <a href="http://zyxel.tradesp.eu/zynpass/passgen.html"><span style="color: blue"><strong><span class="bbu">ATEN Password Calculator</span></strong></span></a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221038">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">johved</div>
					<div class="post-datetime">
						28 Dec 2013, 01:28					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m actually sort of a newbie when it comes to this, so I was just wondering; <br />1. does this process enable the development for third party firmware on the p2812 ? - if so, will this happen?</p><p>2. does the unbranding of this device give me any features that i dont already have with the firmware that is on it? (is the&nbsp; 3.11(TUJ.0)C0 firmware &quot;better&quot; than the &#039;telenor&#039;-one i have now?)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221099">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						28 Dec 2013, 21:58					</div>
				</div>
				<div class="post-content content">
					<p>Problems. First, the ATSE &#039;password&#039; for my box is P2812HNU-F1</p><p>Flashing of 304TUJ.bm went well, but flashing of the bin file failed</p><div class="codebox"><pre><code>ZHAL&gt; ATBT 1
ZHAL&gt; ATUB 304TUJ.bm
Using vr9 Switch device
TFTP from server 192.168.1.33; our IP address is 192.168.1.1
Filename &#039;304TUJ.bm&#039;.
Load address: 0x80000000
Loading: T T T T T checksum bad
checksum bad
T ###########################
done
Bytes transferred = 135168 (21000 hex)
nand erase offset 0 length 20000
Erasing at 0x0 -- 100% complete.
OK
ZHAL&gt; ATUR 311TUJ0C0.bin
atur from 0x80000000 load 311TUJ0C0.bin
Using vr9 Switch device
TFTP from server 192.168.1.33; our IP address is 192.168.1.1
Filename &#039;311TUJ0C0.bin&#039;.
Load address: 0x80000000
Loading: #################################################################
         #################################################################
&lt;snip&gt;
         #################################################################
         ###
done
Bytes transferred = 18984768 (121af40 hex)
verify zboot ok
FW package is not correct</code></pre></div><p>Don&#039;t know what&#039;s wrong here. Can you provide an MD5 sum?</p><p>Further there is something funny with writing the serial number. On executing ATSN the box rebooted:</p><div class="codebox"><pre><code>ZHAL&gt; ATCB
ZHAL&gt; ATSN S110Y28067074
Can&#039;t write to protected Flash
ZHAL&gt; ATBT 1
ZHAL&gt; ATSN S110Y28067074
nand erase offset 0 length 20000
Erasing at 0x0 -- 100% complete.
OK

ROM VER: 1.0.5
CFG 06
NAND
NAND Read OK
DDR Access auto data-eye tuning Rev 0.3a
DDR size from 0xa0000000 - 0xa7ffffff
DDR check ok... start booting...</code></pre></div><p>Meanwhile the exchange of the bootbase succeeded, and so did the change of the serial number. But changing MAC address failed. Old ATSH:</p><div class="codebox"><pre><code>ZLD   Version          : V3.10(TUE.1)
Bootbase Version       : V3.06|03/31|2011(TUE)
Vender Name            : ZyXEL Communications Corp.
Product Model          : P-2812HNU-F1
Serial Number          : S110Y28067074
First MAC Address      : CC5D4E0A8B78
Last MAC Address       : CC5D4E0A8B7F
MAC Address Quantity   : 08
Default Country Code   : FD
Boot Module Debug Flag : 00
RootFS      Checksum   : 0000f711
Kernel      Checksum   : 00005e3a
RomFile     Checksum   : 0000ab94
Main Feature Bits      : 00
Other Feature Bits     :
          06 00 00 02 19 01 00 ff-f8 00 00 00 01 00 00 00
          00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00</code></pre></div><p>And current:</p><div class="codebox"><pre><code>ZLD   Version          : V3.10(TUE.1)
Bootbase Version       : V3.04|04/01|2011(TUJ)
Vender Name            : ZyXEL Communications Corp.
Product Model          : P-2812HNUL-F1
Serial Number          : S110Y28067074
First MAC Address      : B0B2DC0A8B78
Last MAC Address       : B0B2DC0A8B7F
MAC Address Quantity   : 08
Default Country Code   : FD
Boot Module Debug Flag : 01
RootFS      Checksum   : 0000f711
Kernel      Checksum   : 00005e3a
RomFile     Checksum   : 0000ab94
Main Feature Bits      : 00
Other Feature Bits     :
          06 00 00 04 19 01 00 ff-f8 00 01 00 01 00 00 00
          00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00</code></pre></div><p>The box is not bricked. As far as I can see nothing changed in the actual runmode.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221101">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						28 Dec 2013, 22:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mijzelf</p><p>Yes, the box reboots after writting serial number, also happened to me <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I changed the serial number and MAC in bootbase to avoid using the ones of <strong>OXO</strong>. I will restore original bm file in a few minutes. Please could you try ATUB again? and show us new log/output?</p><p>Maybe firmware is not right in dropbox, but it should be. You can download from zyxel ftp site and use that frim from zyxel site.</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="ftp://ftp.zyxel.com/P-2812HNU-F1/firmware/P-2812HNU-F1_3.11(TUJ.0)C0.zip"><strong><span style="color: blue"><span class="bbu"> P-2812HNU-F1_3.11(TUJ.0)C0.zip </span></span></strong></a></p><p>Please report results.</p><p>Thanks in advance.</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 28 Dec 2013, 22:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221102">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						28 Dec 2013, 22:28					</div>
				</div>
				<div class="post-content content">
					<p>The bin file in the ZyXEL zip file has the same md5sum as the one from dropbox. So I guess there is something else wrong.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221104">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						28 Dec 2013, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>Did you try new bootbase before firm upgrade?</p><p>Maybe disabling ID checking with <strong>ATMI 0</strong> will help you.</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 29 Dec 2013, 13:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221172">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						29 Dec 2013, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>Today, flashing succeeded directly. Yesterday after a power cycle I had to use the P2812HNU-F1 password, today it had to be P-2812HNUL-F1. Maybe my power cycle was too short, causing an incomplete reboot.</p><p>Now I have another problem, of course. There is no webinterface. Fortunately I can login as root, and get a real shell. The bootlog shows:</p><div class="codebox"><pre><code>Can not find httpd /usr/apache2/bin/apachectl</code></pre></div><p>And indeed that file lacks. There is no /usr/apache2 directory.</p><div class="codebox"><pre><code>find / | grep apache</code></pre></div><p>doesn&#039;t show anything. <br />I can start mini_httpd, but that doesn&#039;t help. The webinterface is redirected to <a href="http://192.168.1.1/login.cgi,">http://192.168.1.1/login.cgi,</a> which shows an empty page.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221173">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						29 Dec 2013, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>Hi Mijzelf</p><p>ATSE parameter is in a file inside bootbase, and your bootbase changed to 3.04TUJ which has P-2812HNUL-F1. That&#039;s why it changed.</p><p>Did you upload 3.11TUJ0 bin file successfully with ATUR command?</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 29 Dec 2013, 16:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221178">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						29 Dec 2013, 16:59					</div>
				</div>
				<div class="post-content content">
					<p>Yes, sorry if that wasn&#039;t clear.</p><div class="codebox"><pre><code>ZHAL&gt; ATSH
ZLD   Version          : V3.11(TUJ.0)
Bootbase Version       : V3.04|04/01|2011(TUJ)
Vender Name            : ZyXEL Communications Corp.
Product Model          : P-2812HNUL-F1
Serial Number          : S110Y28067074
First MAC Address      : B0B2DC0A8B78
Last MAC Address       : B0B2DC0A8B7F
MAC Address Quantity   : 08
Default Country Code   : FD
Boot Module Debug Flag : 01
RootFS      Checksum   : 0000c2ac
Kernel      Checksum   : 000072d4
RomFile     Checksum   : 0000ab94
Main Feature Bits      : 00
Other Feature Bits     :
          06 00 00 04 19 01 00 ff-f8 00 01 00 01 00 00 00
          00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221181">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						29 Dec 2013, 18:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>Yes, sorry if that wasn&#039;t clear.</p><div class="codebox"><pre><code>ZHAL&gt; ATSH
ZLD   Version          : V3.11(TUJ.0)
Bootbase Version       : V3.04|04/01|2011(TUJ)
Vender Name            : ZyXEL Communications Corp.
Product Model          : P-2812HNUL-F1
Serial Number          : S110Y28067074
First MAC Address      : B0B2DC0A8B78
Last MAC Address       : B0B2DC0A8B7F
MAC Address Quantity   : 08
Default Country Code   : FD
Boot Module Debug Flag : 01
RootFS      Checksum   : 0000c2ac
Kernel      Checksum   : 000072d4
RomFile     Checksum   : 0000ab94
Main Feature Bits      : 00
Other Feature Bits     :
          06 00 00 04 19 01 00 ff-f8 00 01 00 01 00 00 00
          00 00 00 00 00 00 00 00-00 00 00 00 00 00 00 00</code></pre></div></blockquote></div><br /><p>Well, html files are inside firmware file, so you shouldn&#039;t have an empty folder.</p><p>I used those files and works fine, no problem.</p><p>Maybe an issue with your browser?, try to cleanup your history folder in your web browser.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221206">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">zerg</div>
					<div class="post-datetime">
						30 Dec 2013, 01:19					</div>
				</div>
				<div class="post-content content">
					<p><strong>Mijzelf</strong><br />you&nbsp; have trouble with network connection to subj<br />it may be<br />eth cable with bad contact<br />bad contact on your eth card&nbsp; lan port<br />bad connection between you lan card and sabj<br />hardware fail at 1 of your devices</p><br /><p>try to use network hub-swich to avoid connection troubles and make stable all time connection between your devices while important operations via eth interface.</p>											<p class="post-edited">(Last edited by <strong>zerg</strong> on 30 Dec 2013, 01:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221228">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						30 Dec 2013, 11:49					</div>
				</div>
				<div class="post-content content">
					<p>@zerg: I can login over telnet, and see (ps) that httpd is not running. Then I can start it manually</p><div class="codebox"><pre><code>mini_httpd -C /etc/mini_httpd.conf</code></pre></div><p>My browser then gives a blank screen, and something seems terribly wrong:</p><div class="codebox"><pre><code>[user@localhost P2812HNU]$ telnet 192.168.1.1 80
Trying 192.168.1.1...
Connected to 192.168.1.1 (192.168.1.1).
Escape character is &#039;^]&#039;.
GET / HTTP/1.0

Connection closed by foreign host.
[user@localhost P2812HNU]$ </code></pre></div><p>So I guess I don&#039;t have a network problem.</p><p>Meanwhile I have found that a &#039;shared memory problem&#039; seems to exist, whatever that may be. /var/log/syslog.log:</p><div class="codebox"><pre><code>Jan  1 01:00:13 local1.info ccc_be: cccRdmInitNodeMemory(): Reading /var/rdm/config.rdm ...
Jan  1 01:00:13 local1.info ccc_be: cccRdmInitNodeMemory(): RDM file_size fda880
Jan  1 01:00:14 daemon.crit mini_httpd: socket :: - Address family not supported by protocol
Jan  1 01:00:14 daemon.info mini_httpd: cccRdmInitNodeMemory(): Reading /var/rdm/config.rdm ...
Jan  1 01:00:14 daemon.debug mini_httpd: GetUnpackSize(): GetUnpackSize b:80
Jan  1 01:00:14 daemon.debug mini_httpd: GetUnpackSize(): GetUnpackSize b:a8
Jan  1 01:00:14 daemon.debug mini_httpd: GetUnpackSize(): GetUnpackSize b:fd
Jan  1 01:00:14 daemon.debug mini_httpd: GetUnpackSize(): GetUnpackSize b:0 [last message repeated 4 times in 0 seconds]
Jan  1 01:00:14 daemon.info mini_httpd: cccRdmInitNodeMemory(): RDM file_size fda880
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmAllocShareMemory(): rdmSize:fda880
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmAllocShareMemory(): rdmkey:/var/rdm/config.rdm_0
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmAllocShareMemory(): keys:1628177458
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmAllocShareMemory(): ret:0
Jan  1 01:00:14 daemon.debug mini_httpd: rdmInit(): finish rdmCB:42c008
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:InternetGatewayDevice.Layer3Forwarding
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:Layer3Forwarding
Jan  1 01:00:14 daemon.err mini_httpd: cccRdmSearchObjNodeByName(): cannot find
Jan  1 01:00:14 daemon.err mini_httpd: rdmGetObjectByName(): cccRdmSearchObjNodeByName == NULL
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:InternetGatewayDevice.WANDevice.1.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDevice.1.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:1.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:InternetGatewayDevice.WANDevice.2.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDevice.2.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:2.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:InternetGatewayDevice.WANDevice.3.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDevice.3.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:3.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.err mini_httpd: cccRdmSearchObjNodeByName(): cannot find
Jan  1 01:00:14 daemon.err mini_httpd: rdmGetObjectByName(): cccRdmSearchObjNodeByName == NULL
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:InternetGatewayDevice.WANDevice.4.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDevice.4.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:4.WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.debug mini_httpd: cccRdmSearchChildNode(): enter name:WANDSLInterfaceConfig
Jan  1 01:00:14 daemon.err mini_httpd: cccRdmSearchObjNodeByName(): cannot find
Jan  1 01:00:14 daemon.err mini_httpd: rdmGetObjectByName(): cccRdmSearchObjNodeByName == NULL
Jan  1 01:00:15 local1.warning ccc_be: cccRdmInitNodeMemory(): Loading /var/pdm/config.xml ...
Jan  1 01:00:26 kern.warning kernel: topology change detected, propagating
Jan  1 01:00:26 kern.info kernel: port 1(eth0) entering forwarding state
Jan  1 00:00:44 local1.info RemoteManagement: TELNET Login Successfully from IP:192.168.1.33
Jan  1 00:00:44 user.info syslog: root login on &#039;pts/0&#039;
Jan  1 01:02:17 kern.err kernel: Reboot on training timeout (120)!!!</code></pre></div><p>The last line causes a reboot. Fortunately that can be prevented by killing some services.</p><p>Any idea where and how the config.xml is stored? And can you tell me how &#039;No DSL, use WAN port&#039; is encoded? I wonder if somehow the lack of DSL interferes with httpd.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221231">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						30 Dec 2013, 12:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>can you tell me how &#039;No DSL, use WAN port&#039; is encoded?</p></blockquote></div><p>Never mind. Found it in /etc/init.d/S1_12xdsl:</p><div class="codebox"><pre><code>echo ETHER &gt;/var/wanmode 
mcputil modify A0 /var/wanmode</code></pre></div><div class="quotebox"><blockquote><p>I wonder if somehow the lack of DSL interferes with httpd.</p></blockquote></div><p>Nope.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221232">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						30 Dec 2013, 12:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>Any idea where and how the config.xml is stored?</p></blockquote></div><p>It&#039;s stored a TAG 60 with mcputil:</p><div class="codebox"><pre><code>lzma -c config.xml -n config.lzma
mcputil modify 60 config.lzma</code></pre></div><p>/Edit: And that solved my problem:</p><div class="codebox"><pre><code>lzma -c /var/default-pdm/config.default.xml -n /tmp/config.lzma
mcputil modify 60 /tmp/config.lzma</code></pre></div><p>Apparently my config was still the old one, and not compatible with the new firmware. Now I have to find how to re-enable root access.</p><p>Thanks, asmartin! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>Mijzelf</strong> on 30 Dec 2013, 13:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221245">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						30 Dec 2013, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>Welcome Mijzelf. <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>But I think you&#039;re wrong.</p><p><strong>config.xml</strong> is included in 311TUJ0C0.bin file at starting address <span style="color: red"><strong>0x1084200h</strong></span> so it&#039;s not a problem of config file. It&#039;s default config file you can see as 311TUJ0C0.rom.</p><p>This is the extrated config file from .bin : <a href="https://www.dropbox.com/s/770noskv53cpu2w/extracted.rom"><span style="color: blue"><strong><span class="bbu">extracted_config.rom</span></strong></span></a></p><p>You can see same md5sum.</p><p>Did you try a factory reset?, just to see if it loads default config from flash, the one included in the .bin file.</p><p>Maybe you made any mistake when uploading files.</p><p>I recommend to repeat the process step by step, as indicated in the process.</p><p>Regards.</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 30 Dec 2013, 17:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221296">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						30 Dec 2013, 23:56					</div>
				</div>
				<div class="post-content content">
					<p>Yes, of course there is a version of config.xml in the firmware. I used this to save it as &#039;working copy&#039;. <br />And I *tried* a factory reset, as I would have expected it to do the same thing. But maybe I tried the wrong actions. I kept the reset button pressed on power-on, until the box was booted, and I kept the reset button pressed for 10 seconds on a booted box. Both had not the desired result.<br /></p><div class="quotebox"><blockquote><p>Maybe you made any mistake when uploading files.</p></blockquote></div><p>Uhm. Really? In that case ATSH would have shown something different, wouldn&#039;t it?</p><div class="codebox"><pre><code>ZHAL&gt; ATSH
ZLD   Version          : V3.11(TUJ.0)
Bootbase Version       : V3.04|04/01|2011(TUJ)</code></pre></div><p>BTW, with the wrong config I could just login as root over telnet with password 1234. With the right config I could not login as root.<br />BTW2, meanwhile the &#039;Product Model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : P-2812HNUL-F1&#039; automagically changed to &#039;Product Model&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; : P-2812HNU-F1&#039;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221299">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">asmartin</div>
					<div class="post-datetime">
						31 Dec 2013, 00:16					</div>
				</div>
				<div class="post-content content">
					<p>Factory reset is performed pushing the reset button until all lights flash at the same time (red/orange), which occurrs from 10 to 30 seconds after you push and keep reset. If not all lights flashes in orange/red color, then you only performed an ordinary reset., not factory one.</p><p>Not on power on, but once the system is powered on.</p><p>Right sequence: Power on the router, and wait until it finishes starting up. Then press and keep pressed reset button until all lights flash in orange/red color. Release reset button and power cycle again.</p>											<p class="post-edited">(Last edited by <strong>asmartin</strong> on 31 Dec 2013, 10:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221331">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Mijzelf</div>
					<div class="post-datetime">
						31 Dec 2013, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>I wonder if my factory reset didn&#039;t work due to the fact that is didn&#039;t boot completely? Also, in <a href="https://forum.openwrt.org/viewtopic.php?pid=221311#p221311">this thread</a> I found that writing the 310TUJ0C0.bin file can be followed by</p><div class="codebox"><pre><code>try erase partition: offset:20000, size: 20000, write size: 21000
nand erase offset 20000 length 20000
Erasing at 0x20000 -- 100% complete.
OK
Rebuild sysconfig... nand erase offset 7420000 length aa0000</code></pre></div><p>I looked in my logs, and found:</p><div class="codebox"><pre><code>try erase partition: offset:20000, size: 20000, write size: 21000
nand erase offset 20000 length 20000
Erasing at 0x20000 -- 100% complete.
OK
default (ignore)
default (ignore)</code></pre></div><p>So apparently on my box the script didn&#039;t bother to erase the old config.</p><div class="quotebox"><cite>Mijzelf wrote:</cite><blockquote><p>BTW, with the wrong config I could just login as root over telnet with password 1234. With the right config I could not login as root.</p></blockquote></div><p>Meanwhile I have found why. The file /etc/shadow (and /etc/passwd) is stored in config.xml. Aparently the boot-up default password for root is 1234, which is overwritten by the config. But in my original situation the config didn&#039;t contain that files, as so root kept it&#039;s password.<br />When you change the root password using the passwd command, and then change the admin password in the webinterface, the new root password is stored in the config. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221818">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">laztopak</div>
					<div class="post-datetime">
						6 Jan 2014, 17:43					</div>
				</div>
				<div class="post-content content">
					<p>hi all</p><p>i have P-2812HNUL-F1 from Turkish ISP Provider TTNET.</p><p>i can not execute step 10. &quot;Execute ATSE P-2812HNUL-F1 command&quot;</p><p>when i want to execute this command system gives me &quot;invalid argument&quot;</p><p>i try this commands but no luck <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />ATSE P-2812-HNU-F1<br />ATSE P-2812-HNUL-F1<br />ATSE P-2812-HNU-F3<br />ATSE P-2812-HNUL-F3<br />ATSE DSL-2492HNU-L3v2</p><p>how can find my correct command?</p><p>sorry for my bad english.</p><p>Greets from Turkey</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 5</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=47957&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=47957&amp;p=5.html">5</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>