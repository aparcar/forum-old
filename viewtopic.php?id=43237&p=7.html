<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 7 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p209980">
				<div class="post-metadata">
					<div class="post-num">Post #151</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						17 Aug 2013, 01:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Boompje123 wrote:</cite><blockquote><p>Installed using those commands! Thank you, worked perfectly <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>You&#039;re welcome! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>By the way, I want to inform that currently I&#039;m working on major changes related to overclocking AP121 (AR9331) platform. They will allow you to make safe and trouble-free tests of available clocks settings, without need to access flash programmer in case of too high clocks.</p><p>I&#039;m going to add some kind of recovery mode which allows to set default PLL dividers and CPU/RAM/AHB clocks during early board initialization. All you will need to do, to activate this mode, is to press and hold the reset (or any other dedicated) button during powering up the router. First results are very promising! <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Stay tuned!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210311">
				<div class="post-metadata">
					<div class="post-num">Post #152</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						21 Aug 2013, 13:55					</div>
				</div>
				<div class="post-content content">
					<p>Hello pepe2k,</p><p>I looked at the first page and the git tree, but the could not find bins for WDR3600, are they available anywhere? </p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>pupie wrote:</cite><blockquote><p>pepe2k,</p><p>Do you have any variables of FLASH SIZE defined in your code, so that I can compile you uboot for my hardware mod.</p><p>I want to replace factory 4M flash chip to 16M so that I have to re-compile your uboot code.</p><p>thanks.</p></blockquote></div><p>The flash size is recognized based on JEDEC ID of the chip. If you use type which is supported, you don&#039;t need to change anything in code. The code which is responsible for flash identify is located in ar7240_flash.c file (board/ar7240/common/).</p><p>What type of device you are using?</p><p>BTW. Version for WDR3600/43x0 is almost done. I am making also version for AR9341 (MR3420v2, WR841v8 etc.).</p><div class="codebox"><pre><code>*****************************************
*      U-Boot 1.1.4  (Jul  5 2013)      *
*****************************************

DB120 (AR9344) U-Boot for TL-WDR3600/43x0

DRAM:  128 MB
FLASH: Winbond W25Q128 (16 MB)

Eth initialization...

Press reset button for at least:
- 3 sec. to run web failsafe mode
- 5 sec. to run U-Boot console
- 7 sec. to run U-Boot netconsole

Reset button is pressed for:  6 

Button was pressed for 6 sec...
Starting U-Boot console...

uboot&gt; </code></pre></div></blockquote></div><p>I do have WDR3320 - AR9344-DC3A + AR9287 with 64M/4M FLASH but want to change it with 8M and put this U-BOOT instead. <br />No problem if something goes wrong it&#039;s okay ( I do have programmer and love to play with soldering gun), already dumped the original flash. </p><p>Please advice? </p><p>All best!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210316">
				<div class="post-metadata">
					<div class="post-num">Post #153</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						21 Aug 2013, 14:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mveplus wrote:</cite><blockquote><p>I looked at the first page and the git tree, but the could not find bins for WDR3600, are they available anywhere?</p></blockquote></div><p>Yes, I uploaded first release on last Monday: <a href="https://github.com/pepe2k/u-boot_mod/releases/tag/2013-08-19">https://github.com/pepe2k/u-boot_mod/re … 2013-08-19</a></p><div class="quotebox"><cite>mveplus wrote:</cite><blockquote><p>I do have WDR3320 - AR9344-DC3A + AR9287 with 64M/4M FLASH but want to change it with 8M and put this U-BOOT instead. <br />No problem if something goes wrong it&#039;s okay ( I do have programmer and love to play with soldering gun), already dumped the original flash.</p></blockquote></div><p>It definitely won&#039;t work... it should boot up, but your router uses different network chip (AR9344 has built-in 100 Mbps 5-ports ethernet switch), so it could hang on network initialization.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210322">
				<div class="post-metadata">
					<div class="post-num">Post #154</div>
					<div class="post-author">mveplus</div>
					<div class="post-datetime">
						21 Aug 2013, 15:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>mveplus wrote:</cite><blockquote><p>I looked at the first page and the git tree, but the could not find bins for WDR3600, are they available anywhere?</p></blockquote></div><p>Yes, I uploaded first release on last Monday: <a href="https://github.com/pepe2k/u-boot_mod/releases/tag/2013-08-19">https://github.com/pepe2k/u-boot_mod/re … 2013-08-19</a></p><div class="quotebox"><cite>mveplus wrote:</cite><blockquote><p>I do have WDR3320 - AR9344-DC3A + AR9287 with 64M/4M FLASH but want to change it with 8M and put this U-BOOT instead. <br />No problem if something goes wrong it&#039;s okay ( I do have programmer and love to play with soldering gun), already dumped the original flash.</p></blockquote></div><p>It definitely won&#039;t work... it should boot up, but your router uses different network chip (AR9344 has built-in 100 Mbps 5-ports ethernet switch), so it could hang on network initialization.</p></blockquote></div><br /><p>Thanks for the link, and yes you were right <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="codebox"><pre><code>*****************************************
*      U-Boot 1.1.4  (Aug 19 2013)      *
*****************************************

DB120 (AR9344) U-Boot for TL-WDR3600/43x0

DRAM:  64 MB
FLASH: Macronix MX25L64 (8 MB)

LED on during eth initialization...

## Error: negotiation timed out on ethernet port: 0
## Error: negotiation timed out on ethernet port: 1
## Error: negotiation timed out on ethernet port: 2
## Error: negotiation timed out on ethernet port: 3
## Error: negotiation timed out on ethernet port: 4
Hit any key to stop autobooting:  1 ..0 

Booting image at: 0x9F020000

   Image name:   TP-LINK Technologies ver. 1.0
   Image type:   MIPS Linux Kernel Image (lzma compressed)
   Data size:    773115 Bytes = 755 kB
   Load address: 0x80002000
   Entry point:  0x80194920

Uncompressing kernel image... OK!
Starting kernel...

Booting Atheros AR934x
.
.
HANG UP HERE....

...

RESTART.... 

*****************************************
*      U-Boot 1.1.4  (Aug 19 2013)      *
*****************************************

DB120 (AR9344) U-Boot for TL-WDR3600/43x0

DRAM:  64 MB
FLASH: Macronix MX25L64 (8 MB)

LED on during eth initialization...

## Error: negotiation timed out on ethernet port: 0
## Error: negotiation timed out on ethernet port: 1
## Error: negotiation timed out on ethernet port: 2
## Error: negotiation timed out on ethernet port: 3
## Error: negotiation timed out on ethernet port: 4
Press reset button for at least:
- 3 sec. to run web failsafe mode
- 5 sec. to run U-Boot console
- 7 sec. to run U-Boot netconsole

Reset button is pressed for:  0 ... 1 ... 2 ... 3 ... 4 

Button was pressed for 4 sec...
HTTP server is starting for firmware update...

Ethernet mode (duplex/speed): 1/1000 Mbps
HTTP server is starting at IP: 192.168.1.1
HTTP server is ready! </code></pre></div><p>Regards,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210379">
				<div class="post-metadata">
					<div class="post-num">Post #155</div>
					<div class="post-author">shaman1010</div>
					<div class="post-datetime">
						22 Aug 2013, 03:27					</div>
				</div>
				<div class="post-content content">
					<p>Good day. Need you help. <br />I may developer board as <a href="http://item.taobao.com/item.htm?spm=0.0.0.0.BdVXYv&amp;id=16612265015">http://item.taobao.com/item.htm?spm=0.0 … 6612265015</a><br />and source codes for him. <br />Where to write of the parameters that are needed to create a u-boot? <br />Or may I send for you file.c and file.patch and you add u-boot for this devices?</p>											<p class="post-edited">(Last edited by <strong>shaman1010</strong> on 22 Aug 2013, 04:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210405">
				<div class="post-metadata">
					<div class="post-num">Post #156</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						22 Aug 2013, 11:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>Good day. Need you help. <br />I may developer board as <a href="http://item.taobao.com/item.htm?spm=0.0.0.0.BdVXYv&amp;id=16612265015">http://item.taobao.com/item.htm?spm=0.0 … 6612265015</a><br />and source codes for him. <br />Where to write of the parameters that are needed to create a u-boot? <br />Or may I send for you file.c and file.patch and you add u-boot for this devices?</p></blockquote></div><p>Please, take a look at these files:<br /><a href="https://github.com/pepe2k/u-boot_mod/blob/master/Makefile">https://github.com/pepe2k/u-boot_mod/bl … r/Makefile</a><br /><a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/Makefile">https://github.com/pepe2k/u-boot_mod/bl … t/Makefile</a><br /><a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/include/configs/ap121.h">https://github.com/pepe2k/u-boot_mod/bl … gs/ap121.h</a></p><p>This board (Elink EL-M150) is very similar to D-Link DIR-505 (AR9331 + 64 MB RAM DDR2).</p><p>Do you want to prepare version for module or for module on development board (like this one: <a href="http://item.taobao.com/item.htm?spm=2013.1.0.0.hk7qqH&amp;id=25332812868">http://item.taobao.com/item.htm?spm=201 … 5332812868</a>)? Do you have original sources and flash dump? Does it use compressed version of U-Boot, environment in separate flash sector?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210427">
				<div class="post-metadata">
					<div class="post-num">Post #157</div>
					<div class="post-author">shaman1010</div>
					<div class="post-datetime">
						22 Aug 2013, 15:03					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Do you want to prepare version for module or for module on development board (like this one: <a href="http://item.taobao.com/item.htm?spm=2013.1.0.0.hk7qqH&amp;id=25332812868">http://item.taobao.com/item.htm?spm=201 … 5332812868</a>)?</p></blockquote></div><p>Yes.<br /></p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Do you have original sources and flash dump?</p></blockquote></div><p>Yes. Sources trunk + 3 files for this board (file.c, file.patch, file.mk)<br /></p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Does it use compressed version of U-Boot, environment in separate flash sector?</p></blockquote></div><p>How to watch?<br />Original u-boot in modules - it&#039;s modified u-boot from tplink 703.<br />Size uboot - 64k + size with MAC and other - 64k<br />Start firmware - 0x9F020000</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210429">
				<div class="post-metadata">
					<div class="post-num">Post #158</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						22 Aug 2013, 15:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Do you want to prepare version for module or for module on development board (like this one: <a href="http://item.taobao.com/item.htm?spm=2013.1.0.0.hk7qqH&amp;id=25332812868">http://item.taobao.com/item.htm?spm=201 … 5332812868</a>)?</p></blockquote></div><p>Yes.</p></blockquote></div><p>OK, but it&#039;s not answer for my question <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Do you have only module <strong>OR</strong> module soldered on one of the additional development board <strong>OR</strong> module on your custom-made board?</p><p>My U-Boot modification isn&#039;t universal, it needs some configuration for LEDs, GPIOs etc. So, if you want version for your custom-made/dedicated board (which won&#039;t be generally available), I won&#039;t add support for it.</p><div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>Yes. Sources trunk + 3 files for this board (file.c, file.patch, file.mk)</p></blockquote></div><p>U-Boot sources trunk, OpenWrt trunk or what? Could you send me these files?</p><div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>Original u-boot in modules - it&#039;s modified u-boot from tplink 703.<br />Size uboot - 64k + size with MAC and other - 64k<br />Start firmware - 0x9F020000</p></blockquote></div><p>So it&#039;s mostly WR703N clone, except memory type (WR703N has DDR, your module DDR2 - in U-Boot sources there are some differences for initializing DDR and DDR2 memory types).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210454">
				<div class="post-metadata">
					<div class="post-num">Post #159</div>
					<div class="post-author">shaman1010</div>
					<div class="post-datetime">
						22 Aug 2013, 18:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Do you have only module <strong>OR</strong> module soldered on one of the additional development board <strong>OR</strong> module on your custom-made board?</p></blockquote></div><p>I have is Full DevModule, as<br /><a href="http://item.taobao.com/item.htm?spm=2013.1.w4023-2498531243.11.kFYg53&amp;id=16635049261">http://item.taobao.com/item.htm?spm=201 … 6635049261</a></p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>U-Boot sources trunk, OpenWrt trunk or what? Could you send me these files?</p></blockquote></div><p>openwrt-trunk-r35902 and 3 custom files for module.</p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>Original u-boot in modules - it&#039;s modified u-boot from tplink 703.<br />Size uboot - 64k + size with MAC and other - 64k<br />Start firmware - 0x9F020000</p></blockquote></div><p>So it&#039;s mostly WR703N clone, except memory type (WR703N has DDR, your module DDR2 - in U-Boot sources there are some differences for initializing DDR and DDR2 memory types).</p></blockquote></div><p>Perhaps, but in modules 512mbit RAM and 128mbit SPI (29Q128)</p><p>p.s. Sorry, but I can not see your e-mail...</p>											<p class="post-edited">(Last edited by <strong>shaman1010</strong> on 22 Aug 2013, 18:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210455">
				<div class="post-metadata">
					<div class="post-num">Post #160</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						22 Aug 2013, 18:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>Perhaps, but in modules 512mbit RAM and 128mbit SPI (29Q128)</p></blockquote></div><p>It doesn&#039;t matter. 512 Mbit = 64 MB and 128 Mbit = 16 MB. And for sure, there is a Winbond W<strong>25</strong>Q128, not W<strong>29</strong>Q128.</p><div class="quotebox"><cite>shaman1010 wrote:</cite><blockquote><p>openwrt-trunk-r35902 and 3 custom files for module.</p></blockquote></div><p>So, you have only OpenWrt sources and probably patch(es) for them, not U-Boot sources. It&#039;s not the same.</p><p>Since I do not have access to this device (version with full development module costs ~95 USD on Aliexpress!), I can&#039;t help you. This device isn&#039;t (or won&#039;t be) very popular, I suppose.</p>											<p class="post-edited">(Last edited by <strong>pepe2k</strong> on 22 Aug 2013, 18:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210458">
				<div class="post-metadata">
					<div class="post-num">Post #161</div>
					<div class="post-author">shaman1010</div>
					<div class="post-datetime">
						22 Aug 2013, 19:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>It doesn&#039;t matter. 512 Mbit = 64 MB and 128 Mbit = 16 MB. And for sure, there is a Winbond W<strong>25</strong>Q128, not W<strong>29</strong>Q128.</p></blockquote></div><p>SPI - W25Q128 I was wrong</p><p>512mbits - it is RAM</p><br /><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>So, you have only OpenWrt sources and probably patch(es) for them, not U-Boot sources. It&#039;s not the same.</p></blockquote></div><p>Revised again - there is uboot-gpl.tar.gz - it&#039;s source for my uboot. But more than 90 MB.</p><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>This device isn&#039;t (or won&#039;t be) very popular, I suppose.</p></blockquote></div><p>But only module - around $20. Interesting price, taking into number of available GPIO.</p>											<p class="post-edited">(Last edited by <strong>shaman1010</strong> on 22 Aug 2013, 20:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210884">
				<div class="post-metadata">
					<div class="post-num">Post #162</div>
					<div class="post-author">rambler</div>
					<div class="post-datetime">
						26 Aug 2013, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>This uboot (from Jun 19 2013) doesn&#039;t seem to be able to load stock firmware kernel on mr3020 (f/w mr3020nv1_en_3_14_2_up(120817).bin or mr3020nv1_en_3_15_2_up_boot(130326).bin).</p><p>Is this expected?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210906">
				<div class="post-metadata">
					<div class="post-num">Post #163</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						26 Aug 2013, 22:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>This uboot (from Jun 19 2013) doesn&#039;t seem to be able to load stock firmware kernel on mr3020 (f/w mr3020nv1_en_3_14_2_up(120817).bin or mr3020nv1_en_3_15_2_up_boot(130326).bin).</p><p>Is this expected?</p></blockquote></div><p>No, but I got some information about similar problems with OFW for WR720Nv3. Please, download new version from GitHub: <a href="https://github.com/pepe2k/u-boot_mod/releases">https://github.com/pepe2k/u-boot_mod/releases</a>. It was tested with OpenWrt and OFW.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210923">
				<div class="post-metadata">
					<div class="post-num">Post #164</div>
					<div class="post-author">rambler</div>
					<div class="post-datetime">
						27 Aug 2013, 09:20					</div>
				</div>
				<div class="post-content content">
					<p>Excellent – new version from github (Aug 19) now boots everything fine on mr3020.</p><p>Nice work!</p><p>Out of curiosity, what was the problem with it not booting stock FW previously?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211028">
				<div class="post-metadata">
					<div class="post-num">Post #165</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						28 Aug 2013, 11:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>Out of curiosity, what was the problem with it not booting stock FW previously?</p></blockquote></div><p>I&#039;m not exactly sure <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I thought, that it was a problem related with linker script or toolchain, but now I&#039;m not sure.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211070">
				<div class="post-metadata">
					<div class="post-num">Post #166</div>
					<div class="post-author">rambler</div>
					<div class="post-datetime">
						28 Aug 2013, 20:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Excellent – new version from github (Aug 19) now boots everything fine on mr3020.</p></blockquote></div><p>I was a bit overoptimistic: it boots correctly the stock FW mr3020nv1_en_3_14_2_up(120817).bin, but NOT the latest mr3020nv1_en_3_15_2_up_boot(130326).bin. Of course, this last firmware comes with a new version of uboot, so one may argue that the new FW requires a new bootloader. However, the new tp-link bootloader *boots correctly OpenWRT*. Weird, isn’t it?</p><p>I wouldn’t bother much about the latest tpl f/w upgrade, except that this behavior suggests there’s some weird (and probably hard to find) bug in your code.</p><p>Edit: just for the record, I have 64M RAM on these boards, instead of the default 32M. Cannot imagine that this is the reason, but then again, who knows...</p>											<p class="post-edited">(Last edited by <strong>rambler</strong> on 28 Aug 2013, 20:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211073">
				<div class="post-metadata">
					<div class="post-num">Post #167</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						28 Aug 2013, 20:52					</div>
				</div>
				<div class="post-content content">
					<p>have you tried also booting the lastest fw with the &quot;old&quot; tplink uboot?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211075">
				<div class="post-metadata">
					<div class="post-num">Post #168</div>
					<div class="post-author">rambler</div>
					<div class="post-datetime">
						28 Aug 2013, 21:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>have you tried also booting the lastest fw with the &quot;old&quot; tplink uboot?</p></blockquote></div><p>Just tried. Boots fine.</p><p>Edit: just to be clear, I tried with U-Boot 1.1.4 (Mar 20 2012 - 11:37:59), NOT with the GPL one from 2011. I don&#039;t have the damn thing and don&#039;t know where to find it, except to build one, which I don&#039;t have the guts to do.</p>											<p class="post-edited">(Last edited by <strong>rambler</strong> on 28 Aug 2013, 22:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211077">
				<div class="post-metadata">
					<div class="post-num">Post #169</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						28 Aug 2013, 21:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>I was a bit overoptimistic: it boots correctly the stock FW mr3020nv1_en_3_14_2_up(120817).bin, but NOT the latest mr3020nv1_en_3_15_2_up_boot(130326).bin.</p></blockquote></div><p>I&#039;ve just checked and I can confirm this. It seems that new version from GitHub doesn&#039;t boot kernel from OFW: mr3020nv1_en_3_14_2_up(120817).bin.</p><div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>Of course, this last firmware comes with a new version of uboot, so one may argue that the new FW requires a new bootloader. However, the new tp-link bootloader *boots correctly OpenWRT*. Weird, isn’t it?</p></blockquote></div><p>What is definitely weird, I can see that the kernel from OFW hangs at the very beginning, not the U-Boot.</p><p>All my versions also boot OpenWrt correctly - I&#039;m still using WR703N with first release of my modification and I have changed OpenWrt versions on it dozen of times, without any problems. I haven&#039;t got also any reports about problems with OpenWrt booting on any of my modification versions.</p><div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>I wouldn’t bother much about the latest tpl f/w upgrade, except that this behavior suggests there’s some weird (and probably hard to find) bug in your code.</p></blockquote></div><p>In my code, in U-Boot 1.1.4 code or in TP-Link OFW code, who knows? I will try to find a solution after my holidays.</p><div class="quotebox"><cite>rambler wrote:</cite><blockquote><p>Edit: just for the record, I have 64M RAM on these boards, instead of the default 32M. Cannot imagine that this is the reason, but then again, who knows...</p></blockquote></div><p>RAM size isn&#039;t the reason.</p><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>have you tried also booting the lastest fw with the &quot;old&quot; tplink uboot?</p></blockquote></div><p>I have just checked, it boots without any problems.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212302">
				<div class="post-metadata">
					<div class="post-num">Post #170</div>
					<div class="post-author">walt</div>
					<div class="post-datetime">
						13 Sep 2013, 22:31					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>You should make a lot of stability test if you want to use this platform on these frequencies... especially, you should run RAM (for example memtester)</p></blockquote></div><p>memtester checks RAM, which is free after booting the OS. OpenWRT takes almost 20MB<br /> It would be great to be able to run a test from the U-Boot, checking almost the entire volume. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212305">
				<div class="post-metadata">
					<div class="post-num">Post #171</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						13 Sep 2013, 23:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>walt wrote:</cite><blockquote><p>memtester checks RAM, which is free after booting the OS. OpenWRT takes almost 20MB<br /> It would be great to be able to run a test from the U-Boot, checking almost the entire volume. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p></blockquote></div><p>You don&#039;t need to test the entire memory. There is an option to test RAM in U-Boot - take a look at &quot;mtest&quot; command, but it also doesn&#039;t test entire RAM.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212310">
				<div class="post-metadata">
					<div class="post-num">Post #172</div>
					<div class="post-author">Dioptimizer</div>
					<div class="post-datetime">
						14 Sep 2013, 01:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>... <br />- CFG_MEMTEST_START, CFG_MEMTEST_END:<br />&nbsp; &nbsp; &nbsp; &nbsp; Begin and End addresses of the area used by the<br />&nbsp; &nbsp; &nbsp; &nbsp; simple memory test.</p><p>- CFG_ALT_MEMTEST:<br />&nbsp; &nbsp; &nbsp; &nbsp; Enable an alternate, more extensive memory test.</p><p>- CFG_MEMTEST_SCRATCH:<br />&nbsp; &nbsp; &nbsp; &nbsp; Scratch address used by the alternate memory test<br />&nbsp; &nbsp; &nbsp; &nbsp; You only need to set this if address zero isn&#039;t writeable<br />...</p></blockquote></div><div class="quotebox"><blockquote><p>...<br />/*<br /> * Perform a memory test. A more complete alternative test can be<br /> * configured using CFG_ALT_MEMTEST. The complete test loops until<br /> * interrupted by ctrl-c or by a failure of one of the sub-tests.<br /> */<br />...</p></blockquote></div><p><a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/common/cmd_mem.c">https://github.com/pepe2k/u-boot_mod/bl … /cmd_mem.c</a></p><p>Command must be set in config file for your platform, for example:<br /></p><div class="quotebox"><blockquote><p>/*<br /> * Select the more full-featured memory test<br /> */<br /> #define CFG_ALT_MEMTEST</p></blockquote></div><p><a href="https://github.com/pepe2k/u-boot_mod/blob/master/u-boot/include/configs/db12x.h">https://github.com/pepe2k/u-boot_mod/bl … gs/db12x.h</a></p>											<p class="post-edited">(Last edited by <strong>Dioptimizer</strong> on 14 Sep 2013, 01:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p212530">
				<div class="post-metadata">
					<div class="post-num">Post #173</div>
					<div class="post-author">walt</div>
					<div class="post-datetime">
						16 Sep 2013, 20:33					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p> There is an option to test RAM in U-Boot - take a look at &quot;mtest&quot; command, but it also doesn&#039;t test entire RAM.</p></blockquote></div><p>TNX,<br /> I clear problem with buggy RAM of my MR3420 v2.1<br />Looking forward the y-Boot for SOC9341<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p213761">
				<div class="post-metadata">
					<div class="post-num">Post #174</div>
					<div class="post-author">Tolyan</div>
					<div class="post-datetime">
						2 Oct 2013, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>pepe2k<br />add support TL-WR743ND V2<br />foto - <a href="http://www.ex.ua/get/75673383">http://www.ex.ua/get/75673383</a><br />uboot = TL-WR741ND V4 <a href="http://www.ex.ua/get/75673104">http://www.ex.ua/get/75673104</a><br />flash with u-boot for updates via the web interface of the router- <a href="http://www.ex.ua/get/75673104">http://www.ex.ua/get/75673104</a></p><p>question.<br />You can change the way you connect through a U-Boot NetConsole?<br />Eg through telnet(TCP/IP). So much more practical.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p214039">
				<div class="post-metadata">
					<div class="post-num">Post #175</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						6 Oct 2013, 00:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Tolyan wrote:</cite><blockquote><p>pepe2k<br />add support TL-WR743ND V2<br />foto - <a href="http://www.ex.ua/get/75673383">http://www.ex.ua/get/75673383</a><br />uboot = TL-WR741ND V4 <a href="http://www.ex.ua/get/75673104">http://www.ex.ua/get/75673104</a><br />flash with u-boot for updates via the web interface of the router- <a href="http://www.ex.ua/get/75673104">http://www.ex.ua/get/75673104</a></p></blockquote></div><p>It&#039;s the same hardware like in WR740Nv4, so... there is already a support for it.</p><div class="quotebox"><cite>Tolyan wrote:</cite><blockquote><p>question.<br />You can change the way you connect through a U-Boot NetConsole?<br />Eg through telnet(TCP/IP). So much more practical.</p></blockquote></div><p>Telnet is an application layer protocol. The NetConsole in U-Boot is not a protocol. It is simple encapsulation of the console in/out streams in UDP packets, not more. IMHO, adding a telnet server for U-Boot (using uIP stack) isn&#039;t a good idea - it won&#039;t worth the effort.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 7 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=5.html">5</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=6.html">6</a></li><li class="pagination-current"><span>7</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=9.html">9</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>