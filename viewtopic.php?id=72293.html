<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wds connect failed</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p366563">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">gawkesheep</div>
					<div class="post-datetime">
						11 Oct 2017, 15:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello, everyone<br />Recently, I find some unsuitable stituation about the WDS mode. I using openwrt(wireless driver is ath9k) to construct a WDS network, and everything work ok. But there have some stituation which can broken the connet:<br />&nbsp; &nbsp; When I changed the IP address of the bridge which using to helped establish the WDS. After that, if I using command :<br />&nbsp; &nbsp; ---&nbsp; /etc/init.d/network reload&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; The WDS network will broken(due to client_WDS inactivity timeout) and after that wpa_supplicant try to reestablished the WDS network, but it&#039;s failed, due to EAPOL_timeout. <br />&nbsp; &nbsp; ---&nbsp; /etc/init.d/network restart&nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; The WDS network will be close, and established again. everything works ok.</p><p>The different between &#039;reload&#039; and &#039;restart&#039; can be find in netifd document. I guess the bridge change make the EAPOL_timeout. I find this in iw document. To enable 4-address mode when creating an interface you should add 4addr on, for example:<br />&nbsp; &nbsp; iw phy phy0 interface add sta0 type managed 4addr on<br />In this mode, the new interface can be in a bridge. if it is then you need to use the -b flag to wpa_supplicant to make it listen for EAPOL on the bridge instead of the interface itself.<br />I&#039;m a new developer to wireless,&nbsp; if you&nbsp; need more info, Please let me know!</p>											<p class="post-edited">(Last edited by <strong>gawkesheep</strong> on 11 Oct 2017, 15:50)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>