<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Belkin F5D8230-4 v1002 with BCM43222 pci swap</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p196352">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						27 Mar 2013, 06:07					</div>
				</div>
				<div class="post-content content">
					<p>system type: Broadcom BCM4704 chip rev 8<br />Broadcom BCM43222 PCI device 14e4:4350 (rev 0)<br />dmesg from a dd-wrt build(wifi doesnt work): <a href="http://pastebin.com/i0J63stD">http://pastebin.com/i0J63stD</a></p><p>I tried PROFILE=Broadcom-{wl,b43}. openwrt-brcm47xx-squashfs.trx will tftp transfer ok, leds work, pings for ~2 seconds after boot, but nothing else after that. Any tips?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196363">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						27 Mar 2013, 08:35					</div>
				</div>
				<div class="post-content content">
					<p>Serial console and kernel log maybe?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196370">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						27 Mar 2013, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>I don&#039;t have a serial cable, should buy one. I just have telnet/ssh on ddwrt build. Will try anything. I just tried brcm-2.4 backfire, same results.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p196427">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						27 Mar 2013, 17:07					</div>
				</div>
				<div class="post-content content">
					<p>Well, something must be going wrong, as the network doesn&#039;t start. It may be either booting process failing (anything: CPU, IRQ, memory, MTD, partitions...) or just an ethernet driver failing.</p><p>Without logs there is nothing I can help about <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> If you attach console you&#039;ll see all booting messages and we will know where does it fail.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210129">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						19 Aug 2013, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>sorry for necro bump, but i got a serial connector usb thing. <a href="http://pastebin.com/raw.php?i=qWMLtkd0">http://pastebin.com/raw.php?i=qWMLtkd0</a> is serial output when using brcm47xx-squashfs.trx -openwrt trunk. <a href="http://pastebin.com/Hyi93nb3">http://pastebin.com/Hyi93nb3</a> - is serialoutput when using brcm-2.4. i can get ip with brcm-2.4 and telnet, but b43 mod doesnt load. brcm47xx-squashfs.trx does not ping. rx serial isnt working...trying to fix</p>											<p class="post-edited">(Last edited by <strong>eca</strong> on 19 Aug 2013, 08:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210132">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						19 Aug 2013, 09:02					</div>
				</div>
				<div class="post-content content">
					<p>brcm47xx-squashfs.trx was built by imagebuilder with make image PROFILE=Broadcom-b44-b43 . I&#039;m confused if it really worked properly, many bins were created- using different broadcom profiles create trx/bins with the same name for me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210135">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						19 Aug 2013, 09:27					</div>
				</div>
				<div class="post-content content">
					<p>rx serial working now...sweet</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210142">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						19 Aug 2013, 11:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><div class="codebox"><pre><code>[    4.892000] Found board: &quot;Unknown Board&quot;
[    4.896000] diag: unknown board found, try legacy detect
[    4.900000] diag: please open a ticket at https://dev.openwrt.org and attach the complete nvram
[    4.908000] diag: Detected &#039;Buffalo (unknown)&#039;</code></pre></div></blockquote></div><p>You may be suffering from the same bug I hit and tracked few days ago: <a href="https://dev.openwrt.org/ticket/14043">https://dev.openwrt.org/ticket/14043</a></p><p>Please update your OpenWrt sources (to r37804 or newer) and try Broadcom-b44-b43 again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210827">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						26 Aug 2013, 08:00					</div>
				</div>
				<div class="post-content content">
					<p>I had some more time to play with this router and found out that I&#039;m running into a kmod switch-core/robo bug similar to <a href="https://dev.openwrt.org/ticket/13811.">https://dev.openwrt.org/ticket/13811.</a> Ifconfig -a does not show eth1. And eth0 shows the wan mac address(what eth1 should be) On attitude adjustment I found this error &quot;:[&nbsp; &nbsp; 6.944000] roboswitch: Probing device eth1: error while accessing MII phy registers with ioctls&quot;. Wireless is working though with b43 and wl- i was confused because I thought ifconfig -a would show a wireless device without me having to delete the line in /etc/config/wireless. I was able to set up an AP and connect to it but without a working switch/wan/lan its useless. I noticed there is no kmod-switch package in <a href="http://downloads.openwrt.org/snapshots/trunk/brcm47xx/packages/">http://downloads.openwrt.org/snapshots/ â€¦ /packages/</a> - maybe its being worked on, and hopefully not dropped.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210845">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Zajec</div>
					<div class="post-datetime">
						26 Aug 2013, 13:20					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;re pretty chaotic...</p><p>1) You should *not* see eth1, as Broadcom bcm47xx devices use the same ethernet device for all ports. We just assign different VLAN id for the WAN port.<br />2) I believe &quot;ifconfig&quot; should display all (not virtual) wireless interfaces, without having to remove &quot;option disabled 1&quot;<br />3) kmod-switch was one of the ugliest thing in bcm47xx, recently it was finally dropped</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p210987">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						27 Aug 2013, 23:43					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the bad punctuation, etc...Thanks for your help.<br />1.&nbsp; Admittedly, I know little about bcm5325, or low level hardware. Lines(9,10) of the serial output show et0,et1 devices. My nvram shows et0macaddr, et1macaddr, et(0,1)phyaddr. <a href="http://www.dd-wrt.com/wiki/index.php/Enabling_VLAN_Support_for_BCM4704">This page</a> says it has &quot;seperate internal interfaces&quot;.<br />2. It didn&#039;t, but &quot;iw phy0 info&quot; did show information.(This was only on b43 profile)<br />3. Darn. </p><p> I read <a href="http://wl500g.info/archive/index.php/t-859.html">this page</a>, which said his et1phyaddr was 0. Mine was 5, so I changed it to 0 and got a wan dhcp ip that works. This is on attitude adjustment broadcom-wl profile. Setting et1phyaddr=0 caused eth0 and eth1 to start up with 100mb/s full duplex- instead of 10mb/s. I do not know how to find the correct nvram variable values.</p><p>Unfortunately lan stopped working-neither dhcp or static ip work. Before setting et1phyaddr it did but was 10mb/s (dhcp on wifi works).</p><p>The wireless with broadcom-wl crashes under heavy load(I went to speedtest and it went down) - I did not set hwmode to 11ng though. When I have more time I&#039;ll fiddle with wireless settings. I&#039;ll add this router to wiki section &quot;Possible but not being worked on&quot;-since its old. Unfortunately broadcom-b43 doesnt support 5Ghz N on bcm43222. <br /><a href="http://pastebin.com/tvpbFZDn">My /etc/config/network</a><br /><a href="http://pastebin.com/ibXczhwu">My nvram</a>.</p>											<p class="post-edited">(Last edited by <strong>eca</strong> on 15 Sep 2013, 06:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p211312">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						31 Aug 2013, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>Hard resetting(30/30/30) the router sets et0phyaddr=30. Setting it to 0 solves all my wan/lan issues(and committing it). et1phyaddr can be left alone at 5. This brings up eth0 and eth1. System stability has improved, but I haven&#039;t tested it much. Openwrt rocks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222220">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						9 Jan 2014, 22:23					</div>
				</div>
				<div class="post-content content">
					<p>Did you ever figure this router out?? I am reading this and it seems you need a serial cable. I don&#039;t have the serial cable yet (It is on order) but is there away to get it working now?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p222225">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">eca</div>
					<div class="post-datetime">
						9 Jan 2014, 23:02					</div>
				</div>
				<div class="post-content content">
					<p>I set the nvram settings through serial. You might be able to make your own image with image builder and include a script that will autorun(or add a line in /etc/rc.local or equivalent) with &quot;nvram set et0phyaddr=30&quot;. I&#039;ve never done it though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224128">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						30 Jan 2014, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>Okay I got a USB.ttyl serial but I has an issues transmitting ever here of that before?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224129">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						30 Jan 2014, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>What are the serial pin connections?</p><p>From the lights to the other side on the board, I read .3 v, 3.0v, 0v, 3.0v to common....</p><p>So if the Pin .3v is pin 1, etc.</p><p>I have believe it to be<br />Pin 1 ???(power)<br />Pin 2 RX<br />Pin 3 GND<br />Pin 4 TX</p><p>Is that correct?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224136">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						30 Jan 2014, 20:54					</div>
				</div>
				<div class="post-content content">
					<p>That is in correct... not sure what Pin 4 is but pin 1 is the TX</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224138">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						30 Jan 2014, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>rc local with 0 not 30 right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224142">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						30 Jan 2014, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>I figured it out... I don&#039;t have the broadcom-wl profile... <br />I got the SNAP Shot working but it gets buggy and slow...<br />Any ideas</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224608">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						5 Feb 2014, 14:26					</div>
				</div>
				<div class="post-content content">
					<p>okay I have stability now but I think the network config file is off... Do you have a good example?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225708">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">graanco</div>
					<div class="post-datetime">
						18 Feb 2014, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>After rereading the information it should read nvram set et0phyaddr=0 not 30.... That got me... It is up not stable though... I am going to try the A A next...</p><p>BB is using 53+++++% of cpu on wifi</p>											<p class="post-edited">(Last edited by <strong>graanco</strong> on 18 Feb 2014, 23:54)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>