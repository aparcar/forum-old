<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build for WNDR3700/WNDR3800</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 9 Jul 2013 and 6 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 63</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p126869">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						30 Jan 2011, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>I have built a rather minimalistic build for WNDR3700v1, WNDR3700v2 and WNDR3800 focusing just on the features I need. This is pretty much the basic IPv6 enabled router setup matching the WNDR3700 hardware without too much additional fancy stuff. </p><p>Note that <strong>this build is not compatible with v3, v4 and v5 that have totally different hardware</strong>.</p><p>I build the current master and 17.01 branches.</p><p>Current version: <br />- master:&nbsp; master-r6755-d089a5d773-20180424<br />- LEDE 17.01:&nbsp; lede1701-r3877-23a638ebd1-20180423</p><br /><p>WNDR3700 firmware downloads are available in Dropbox:<br />Download site: <a href="https://www.dropbox.com/sh/t52c02rm20y8x9p/khFGAJu3gc">https://www.dropbox.com/sh/t52c02rm20y8x9p/khFGAJu3gc</a><br />Short link: <a href="http://db.tt/4FM5if8e">http://db.tt/4FM5if8e</a></p><p>I only upload the versions after successfully flashing my own router, so the build has at least that much quality assurance process.</p><p><strong>Full configuration and source code diffs included, in case somebody wants to utilize info in own builds.</strong><br />See the patch files included in each build&#039;s download directory.</p><p>Good ipv6 support is now standard in Openwrt, so I am dropping the IPv6 from the title. Documentation for the ipv6 configuration can be found at <a href="http://wiki.openwrt.org/doc/uci/network6">http://wiki.openwrt.org/doc/uci/network6</a></p><p>Features included:<br />- LuCI with HTTPS SSL support<br />- <strong>USB storage automounting</strong> <br />- Support for various file systems to enable most drives: ext2/3/4, FAT, HFS+, CIFS/SMB, (NTFS read-only)<br />- <strong>WiFi button works</strong> to toggle Wifi on or off<br />- <strong>WPS button works</strong> to enable automatic Wifi-authentication with WPS-enabled devices<br />- <strong>Reset button works</strong><br />- <strong>IPv6: tunnel support for 6in4, 6to4, 6rd and aiccu</strong> included in the build.<br />- <strong>QoS for traffic control</strong> The &#039;sqm-scripts&#039; package is included, but initially disabled, as max speed needs to be adjusted to WAN connection speed<br />- <strong>DynDNS support</strong>, also in LuCI<br />- <strong>VSFTPD FTP server</strong> package with TLS/SSL support (access initially disabled by &quot;local_enable=NO&quot; in vsftpd.conf)<br />- <strong>Adblock</strong> package (initially disabled)<br />- <strong>Wake-on-LAN</strong> (WOL) LuCI module<br />- <strong>Nano</strong> text editor<br />- <strong>EFI/GUID partitions</strong> supported<br />- <strong>ccrypt</strong> package included for file encryption<br />- kmod-tun, enables opkg install of OpenVPN (openvpn-openssl variant)</p><p>- r31244: added support to Dnsmasq for host-specific lease times for static dhcp leases<br />- r33212: usb-modeswitch added for 3G modems<br />- r35964: added script helping to reinstall add-on packages after sysupgrade. <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; See /etc/reinstall-packages.sh<br />- r36377: kmod-ipt-nathelper-rtsp included<br />- r36467: iptables-mod-ipsec (and kmod-ipt-ipsec)&nbsp; included<br />- r39183: WPS pin code set to the original value given by Netgear in the label at the router&#039;s bottom<br />- r39350: GNU wget and hfsplus file system support added<br />- r41800: luci-app-diag-devinfo has been removed (also its dependencies)<br />- r42420: wps hotplug script modified to match currently needed hostapd_cli options<br />- r42673: miniupnpd settings: leave upnp off by default in /etc/config/upnp<br />- r42769: SQM (Smart Queue Management) QoS system<br />- r43205: IETF BCP38 functionality added (tab in Firewall config in Luci)<br />- r44594: trunk: patches for uhttpd log spam<br />- r46710: Luci statistics tweaks &amp; fixes<br />- r46763: Luci opkg package listing fixes<br />- r46815 trunk: devs have disabled telnet. If root password is not yet set, then just ssh without password.<br />- r47006 trunk: a new Luci theme &quot;material&quot; included. Default is still &quot;bootstrap&quot;<br />- r47073: build environment: scripts modified, support both git and svn as the main repo<br />- r47102: Old qos-scripts has been removed and SQM is the only QoS in firmware <br />- r47486: enable sha256 certs in Luci by switching to default SSL implementation (polarssl)<br />- r47641 trunk: added &quot;cake&quot; modules for SQM QoS&nbsp; (might be temporary)<br />- r48730: Add support for &#039;adblock&#039; with LuCI interface (adblock is initially disabled)<br />- r49379 DD trunk: Change Luci to use Openssl instead of Polarssl in DD trunk<br />- lede-r1297: adjust to sha256sums instead of md5sums in build scripts<br />- lede-r1298: show also sha256 checksum for sysupgrade in Luci<br />- April 2017: aiccu is removed as SixXS will stop operations in June</p><p>Note: As I build with standard kernel options, the Chaos Calmer 15.05 and trunk snapshot modules should be compatible with my builds, in case somebody wishes to add modules to my build.</p><p>Note: A special version of my firmware that has the mtd write-protection removed from u-boot, u-bootenv and art partitions is available in subdirectory art_partition_binary_contents / firmware_with_no_write_protection. That enables you to edit/overwrite u-boot and art. That is highly dangerous and can permanently brick the router. But it might still be needed at some recovery operation...</p><p>---- Instructions for re-creating my build environment are in the next message ----</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 26 Apr 2018, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127011">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						31 Jan 2011, 22:51					</div>
				</div>
				<div class="post-content content">
					<p><strong>Instructions how to re-create my build environment in Ubuntu x64.</strong><br />* Updated at r48035 to support only git as the main Openwrt repository and feeds.</p><p>Since r34827 my firmware release contains also a script to re-create my full build environment in a few minutes.</p><p>The creation script handles trunk and branches (like C15.05) separately and only builds the environment for one of them. The creation script runs pretty automatically. The needed few steps are:<br />- Create the base directory (I use /Openwrt) and make it writable by your normal user account&nbsp; (non-root)<br />- Download from my newest firmware the newBuildroot.sh file and the four *.patch files to /Openwrt<br />- Run newBuildroot.sh. It creates the complete build environment<br />- Build firmware with hnscripts/updateNmake.sh</p><p>More detailed explanation of the steps in the build environment creation process :<br /></p><ol class="decimal"><li><p>Create the base directory (like e.g. /Openwrt) to your buildhost. chown/chmod that directory to be writable by your normal user account (chmod 755). Buildroot will be created in in that directory, e.g. /Openwrt/trunk or /Openwrt/chaos</p></li><li><p>Download the &quot;newBuildroot.sh&quot; file from my newest firmware build package to /Openwrt<br />2b) chmod &quot;newBuildroot.sh&quot; to be executable</p></li><li><p>Download the firmware&#039;s four patch files: -main.patch, -packages.patch, -luci.patch and -routing.patch to /Openwrt. Note that the trunk build environment needs the trunk patches, and correspondingly the Chaos Calmer environment needs the Chaos Calmer patches.</p></li><li><p>Verify that &quot;newBuildroot.sh&quot; references the correct patches<br /></p><ul><li><p>Check that the FILESTAMP variable definition matches the timestamp in actual patch names. <br /></p></li></ul></li><li><p>Run &quot;newBuildroot.sh&quot;. It installs the needed prerequisite packages to Ubuntu, creates trunk or chaos git repository and downloads the feeds&#039; sources, patches them and also adds the new files to version control as well as chmods the known script files to be executable.<br /></p><ul><li><p>If patch names are correctly set in&quot;newBuildroot.sh&quot;, all sources will get patched by the script. Main source needs to be patched first, as that patch possibly contains changes to feeds.conf.defaults. Then it updates the feeds (packages, luci, routing), patches the feed files and finally installs the packages from feeds with &quot;scripts/feeds install -a&quot;.<br /></p></li><li><p>Check the attributes of the possible script files added by the patches and chmod them executable, if needed. e.g. /etc/reinstall-packages.sh and other scripts in /etc<br />Note: Since the new button hotplug procd functionality also the button scripts in /etc/rc.button need to be executable. (E.g. files/etc/rc.button/BTN_2)<br /></p></li><li><p>Verify that the build script files located in &lt;buildroot&gt;/hnscripts are executable and have been added to version control.<br /></p></li><li><p>Verify that the new files have been added to git tracking. The script has commands for the &quot;files&quot; directory &amp; &quot;.config.init&quot;, but you should check if there are other unknown files added by the patches. The script tries to automatically include the noticed new files created by the patches.<br /></p></li></ul></li><li><p>Copy possibly needed additional files and prepare the build system:<br /></p><ul><li><p>Copy extra custom files to &lt;buildroot&gt;/files . E.g. your personal settings to be the included in the firmware. <br /></p></li><li><p>Copy build keys to &lt;buildroot&gt; if you want to maintain the same build key in the new environment<br /></p></li><li><p>Possibly also create a file share for transferring files. For example, I need /media/windows-share to easily move files from Virtualbox to PC. <br /></p></li><li><p>Additionally, I need to set git options (username etc.) and to set minor OS options like gedit not producing backup files etc.<br /></p></li></ul></li></ol><p>Steps 1-5 should be done automatically by the script, but verify the results ;-)</p><p>After this you should have an identical build environment as I have. I have actually recreated my current build environment several times with this process ;-)</p><p>Note: The -openwrt.patch also contains the device profile recipe &quot;.config.init&quot; with all the needed package selections and all build scripts used in my build environment.</p><p>Steps in the actual firmware build process in /Openwrt/trunk:<br />1) Copy .config.init as the new .config to initialize the build profile:&nbsp; cp .config.init .config<br />&nbsp; &nbsp; (&quot;make defconfig&quot; will expand the recipe to a full .config . You can run that command also manually.)<br />2) Do the actual make: hnscripts/updateNmake.sh<br />3) transfer files from bin/ar71xx to wherever you need them. I use a script: hnscripts/mountNcopy.sh</p><p>Explanation of the scripts in &lt;buildroot&gt;/hnscripts: <br /></p><ul><li><p>updateNmake.sh is the main build script that updates sources and builds the firmware<br /></p></li><li><p>mountNcopy.sh is the script that I use to copy firmware files to my PC<br /></p></li><li><p>newBuildroot.sh is the build environment creation script<br /></p></li><li><p>createbuildinfo.sh creates the firmware release package with docs &amp; patches and is automatically called at the end of updateNmake. (Usually there is no need to call that manually.)<br /></p></li><li><p>Other scripts (timestampVersion, parallelcompile, singlecompile, kernelcompile, copypackages2tmp) are just helpers<br /></p></li></ul><br /><p><strong>Note: Main changes at r47072:</strong><br />* All build scripts are now in &lt;buildroot&gt;/hnscripts and will be included in the -openwrt.patch<br />* Explicit requirement for /Openwrt as the base was removed. The build environment can now be created anywhere (as long as the path stays reasonably short).<br />* New buildroot creation script packaged separately and has been clarified.<br />* The log file &quot;build.log&quot; has been moved to &lt;buildroot&gt;/logs.<br />Longer explanation at <a href="https://forum.openwrt.org/viewtopic.php?pid=294225#p294225">https://forum.openwrt.org/viewtopic.php … 25#p294225</a></p><p><strong>Note: Main changes at r48035:</strong><br />* Git only. Support for svn as the main repo or feed has been removed</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 4 Oct 2016, 13:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127255">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						3 Feb 2011, 22:17					</div>
				</div>
				<div class="post-content content">
					<p>I have updated the build to r25348 with an added feature:</p><p>WiFi button:<br />It toggles WiFi off, it at least one radio was on. And if both radios were off, it toggles WiFi on according to the specs set in normal Wifi config.</p><p>WPS button:<br />If you have a WPS-enabled network device (like a modern USB dongle) supporting Wi-Fi Protected Setup (WPS), you can initiate WPS authentication by pushing the similar WPS button on the device (or launching if by software). After the device has initiated the authetication process, you can accept the call with the WPS button on WNDR3700. The connection should then get negotiated. Using the button requires small editing of /etc/config/wireless. See explanation here: <a href="https://forum.openwrt.org/viewtopic.php?pid=127010#p127010">https://forum.openwrt.org/viewtopic.php … 10#p127010</a><br />(For builders: using WPS authentication requires changing the &#039;wpad-mini&#039; package to &#039;wpad&#039; and &#039;hostapd-utils&#039;.)</p><p>This matches pretty much the original button logic in Netgear firmware.</p><p><strong>Control for the WPS button is now included in Luci interface</strong> in my build.</p><p>If anybody else wants to add the patch to their Luci source (if they have Luci source):<br />I have created a ticket with patch out it, so it might get into the official Luci build at some point.<br /><a href="http://luci.subsignal.org/trac/ticket/194">http://luci.subsignal.org/trac/ticket/194</a></p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 21 Dec 2012, 18:08)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127288">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">phongn</div>
					<div class="post-datetime">
						4 Feb 2011, 07:52					</div>
				</div>
				<div class="post-content content">
					<p>Thank you very much for all your work! I&#039;ve been playing around with it this evening and it seems pretty solid.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127320">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						4 Feb 2011, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Here is the itemized list of source code changes, that was requested in Arokh&#039;s thread.</p><p>There is no list of the modules selected in menuconfig. I might do that list at some point, but right now you have to compare my .config against yours (with diff), and read the Wiki.</p><p>Like I said earlier in Arokh&#039;s thread, IPv6 is not about source code changes. Practically the only changes have been in ip6tables firewall rules, aiccu tunnel hotplug script modification and enabling IPv6 forwarding in sysctl.conf (which is already default in Kamikaze/Trunk).</p><p>The needed changes to config files not included here (e.g. for WPS button to work) have been explained in the threads referenced earlier.</p><p>Base system:<br />-------------</p><p>USB automounting:<br />Index: /Openwrt/backfire/package/block-mount/files/fstab.config</p><p>USB LED (for Backfire only):<br />Index: /Openwrt/backfire/target/linux/ar71xx/base-files/etc/uci-defaults/wndr3700<br />Index: /Openwrt/backfire/package/base-files/files/etc/hotplug.d/usb/10-usb</p><p>WPS button:<br />Index: /Openwrt/backfire/package/hostapd/files/wps-hotplug.sh</p><p>WiFi Button:<br />Index: /Openwrt/backfire/files/etc/hotplug.d/button/01-radio-toggle</p><p>Network:<br />---------<br />QoS:<br />Index: /Openwrt/backfire/package/qos-scripts/files/etc/config/qos</p><p>IPv6:<br />Index: /Openwrt/backfire/feeds/packages/ipv6/aiccu/files/aiccu.hotplug<br />Index: /Openwrt/backfire/package/base-files/files/etc/sysctl.conf<br />Index: /Openwrt/backfire/package/firewall/files/firewall.user</p><p>WPS button Luci user interface (separate Luci source code):<br />--------------------------------------------------------------<br />Index: /Openwrt/backfire/feeds.conf.default<br />Index: /Openwrt/luci/branches/luci-0.10/contrib/package/luci/Makefile<br />Index: /Openwrt/luci/branches/luci-0.10/modules/admin-full/luasrc/model/cbi/admin_network/wifi.lua</p><p>Personal preferences (not needed for general build):<br />------------------------------------------------------<br />Index: /Openwrt/backfire/feeds/packages/net/ntpclient/files/ntpclient.config<br />Index: /Openwrt/backfire/scripts/getver.sh<br />Index: /Openwrt/backfire/package/base-files/files/etc/openwrt_release<br />Index: /Openwrt/backfire/package/base-files/files/etc/config/system<br />Index: /Openwrt/backfire/package/base-files/Makefile<br />Index: /Openwrt/backfire/files/etc/compiled_by.txt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127323">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Unksi</div>
					<div class="post-datetime">
						4 Feb 2011, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>This works pretty well, except I can&#039;t get native IPv6 working. Is there anything that might preventing this? I noticed some tunnel-specific firewall rules in place, however adding one for eth1 did not make a change.</p><p>Setting the gateway route manually via ssh did allow IPv6 working both to lan and internet from the router (it was set in Luci, wonder if it propagated as it should have?). However, it does not route any IPv6 traffic from lan - the router can be pinged, but thats all.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127325">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						4 Feb 2011, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>@Unksi:<br />make sure that you have the default route set up correctly.</p><p>At least the 6in4 tunnel script explicitly sets the default route. I am not sure how well it gets set with native Ipv6 connectivity. </p><p>How do you get your subnet? DHCPv6 in use? Stateless autoconfig from ISP&#039;s router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127334">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Unksi</div>
					<div class="post-datetime">
						4 Feb 2011, 20:35					</div>
				</div>
				<div class="post-content content">
					<p>The default route is set like this manually:<br />::/0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2001:1bc8:102:xxx::1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;UG&nbsp; &nbsp; 1024&nbsp; &nbsp;472&nbsp; &nbsp; &nbsp; &nbsp;0 eth1</p><p>After this was set up, ping6 ipv6.google.com started working from the router. No effect on the workstations though.</p><p>The subnet is configured by hand, though I have noticed that my ISP does have autoconfig as well. I am using radvd on the router for my lan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127336">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						4 Feb 2011, 20:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Unksi wrote:</cite><blockquote><p>After this was set up, ping6 ipv6.google.com started working from the router. No effect on the workstations though.</p><p>The subnet is configured by hand, though I have noticed that my ISP does have autoconfig as well. I am using radvd on the router for my lan.</p></blockquote></div><p>I would guess that you need to edit your WAN interface settings by hand (if you are using Backfire build).</p><p>There is a bug in Luci that I have reported (and which was fixed in Luci trunk a week ago), but has not yet been fixed in Luci 0.10 used in Backfire. Hopefully devs backport that change to 0.10 also. <a href="http://luci.subsignal.org/trac/ticket/192">http://luci.subsignal.org/trac/ticket/192</a></p><p>Luci sets &#039;defaultroute&#039; &#039;0&#039; statement to all interfaces it sees (you visit that interface&#039;s settings), and you need that as &#039;defaultroute&#039; &#039;1&#039; for IPv6 radvd to work (unless you provide route in radvd settings by hand).</p><p>You might check your /etc/config/network and change WAN interface to offer defaultroute 1. Check it.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 4 Feb 2011, 20:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127416">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">phongn</div>
					<div class="post-datetime">
						5 Feb 2011, 17:48					</div>
				</div>
				<div class="post-content content">
					<p>Not sure if you have the time - but might you try and integrate Comcast&#039;s <a href="http://sourceforge.net/p/dslite-6rd/home/">DSLite/6RD</a> software?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127423">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 Feb 2011, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>@phongn:<br />I will look into it, although I have no way in testing Comcast&#039;s solutions.<br />And the Sourceforge link seems to lead into a full OpenWrt buildroot. No point for me.<br />If it looks like there is just info about enabling it in normal Openwrt, then there might be something to include.</p><p>But Comast had a nice link to an IPv6 test: <a href="http://test-ipv6.com">http://test-ipv6.com</a>/<br />(I am getting 9/10 for IPv6... losing one point as my ISP has no DNS server in IPv6 address space.)</p><p>EDIT:<br />At first glance it looks like 6rd is based on 6to4. You might be able to config it by installing the 6to4 package in OpenWrt.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 5 Feb 2011, 18:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127428">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						5 Feb 2011, 18:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>At first glance it looks like 6rd is based on 6to4. You might be able to config it by installing the 6to4 package in OpenWrt.</p></blockquote></div><p>Not yet unfortuantely. 6RD is basically 6to4 with the relay server manually specified instead of using the fixed anycast address 192.88.99.1.<br />Also the prefix can be freely choosen (by the ISP) compared to the fixed 2002::/16 prefix defined for 6to4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127447">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						5 Feb 2011, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>I have updated a new r25370 version of my &#039;trunk&#039; build to the FTP server. <br />I am currently running that trunk version myself for finding out the possible differences in configurations between Backfire and trunk.</p><p>I have noticed one noteworthy difference: <br />- button names are different. WPS button in Backfire is &#039;BTN_1&#039;, while in trunk it is &#039;wps&#039;. That was discussed earlier today in another thread, and I had to find out by myself ;-) I added the correct info also to the WNDR3700 Wiki article.</p><p>USB LED definition is already there in trunk, so not need to patch /etc/config/system for trunk<br />Hopefully it gets patched in Backfire at some point...&nbsp; <a href="https://dev.openwrt.org/ticket/8785">https://dev.openwrt.org/ticket/8785</a></p><p>One strange effect, caused by the firewall:<br />System log shows firewall-related error during boot, which errors look like firewall has tried to apply some additional iptables rules to the IPv6 ip6tables. I determine that from the chain names, which are shown in the error messages</p><p>Feb&nbsp; 5 22:36:57 OpenWrt user.info sysinit: ip6tables: No chain/target/match by that name.<br />Feb&nbsp; 5 22:36:57 OpenWrt user.info sysinit: ip6tables v1.4.10: Couldn&#039;t load target `zone_lan&#039;:File not found<br />Feb&nbsp; 5 22:36:57 OpenWrt user.info sysinit: Try `ip6tables -h&#039; or &#039;ip6tables --help&#039; for more information.<br />Feb&nbsp; 5 22:36:57 OpenWrt user.info sysinit: ip6tables v1.4.10: Couldn&#039;t load target `zone_lan_forward&#039;:File not found<br />Feb&nbsp; 5 22:36:57 OpenWrt user.info sysinit: Try `ip6tables -h&#039; or &#039;ip6tables --help&#039; for more information.</p><p>That might be caused by my own rules in /etc/firewall.user, that empty the existing built-in chains first. <br />Probably I will need to delete my own rules for a while and see how they need to be adapted to the current default rules in Trunk.</p><p>Backfire was changed two days ago to use that same firewall (with r25353), right after I had made my previous Backfire build... Possibly I need to generate a new IPv6 ruleset also for Backfire, or possibly/hopefully the default rules might play out well.</p><p>EDIT:</p><p>Yep, Trunk&#039;s current IPv6 firewall seem to have decent default ip6tables rules. I mostly commented out my own rules as unnecessary. Trunk version bumped to 25378 and includes only minimal ip6tables rules additions from me.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 6 Feb 2011, 01:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127492">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Unksi</div>
					<div class="post-datetime">
						6 Feb 2011, 15:07					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>Unksi wrote:</cite><blockquote><p>After this was set up, ping6 ipv6.google.com started working from the router. No effect on the workstations though.</p><p>The subnet is configured by hand, though I have noticed that my ISP does have autoconfig as well. I am using radvd on the router for my lan.</p></blockquote></div><p>I would guess that you need to edit your WAN interface settings by hand (if you are using Backfire build).</p><p>There is a bug in Luci that I have reported (and which was fixed in Luci trunk a week ago), but has not yet been fixed in Luci 0.10 used in Backfire. Hopefully devs backport that change to 0.10 also. <a href="http://luci.subsignal.org/trac/ticket/192">http://luci.subsignal.org/trac/ticket/192</a></p><p>Luci sets &#039;defaultroute&#039; &#039;0&#039; statement to all interfaces it sees (you visit that interface&#039;s settings), and you need that as &#039;defaultroute&#039; &#039;1&#039; for IPv6 radvd to work (unless you provide route in radvd settings by hand).</p><p>You might check your /etc/config/network and change WAN interface to offer defaultroute 1. Check it.</p></blockquote></div><p>I am using the latest trunk version (just updated, still no change). The defaultroute setting does not help on it, and neither does setting the route from radvd either. I have set the settings manually for WAN interface.</p><p>With the newest version the IPv6 does not work to the public internet even with the manually forced route set - does work after turning off the firewall though, still without routing. Will fiddle around with it when I have more time to pin down the rule which may cause it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127503">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						6 Feb 2011, 18:27					</div>
				</div>
				<div class="post-content content">
					<p>Although this thread was name as Backfire-related, I have been running trunk for the last day, polishing my build for trunk.</p><p><strong>Trunk version at has been bumped to r25382.</strong> <a href="http://koti.welho.com/hnyman1/Openwrt/">http://koti.welho.com/hnyman1/Openwrt/</a><br />(I have not uploaded a new Backfire build, as the firewall v2 has been impelemented after I last time flashed Backfire. I need to check that everything works ok.)</p><p>Full config &amp; source file diffs included, including Luci changes.</p><p>There are several enhancements in Kamikaze/trunk:<br /><strong>-Polished IPv6 firewall settings<br />-Better version display in Luci<br />-Smart Reset button to return the router to default settings</strong></p><br /><p>Explanations:</p><p><strong>IPv6: </strong></p><p>The trunk firewall v2 seems to have pretty similar default rules as IPv4 firewall. They are ok without modifications. Although there is no special need to include a /etc/firewall.user any more with trunk, I have still have one. <br />My build includes additional rules doing the following: <br />- commented-out iptables command to always enable tunnel-provider&#039;s IPv4 contacts. Needed for SixXS static tunnels.<br />- rule for dropping rh0 routing header packets<br />- commented-out model rule for allowing incoming traffic tto port X. There is no NAT in basic ipv6, so no port-forward, but you have to open the firewall for the desired incoming port X, if you want.<br />- additionally, commented-out, a full rule set for starting ip6tables without any default rules.</p><br /><p><strong>Better version display in Luci:</strong></p><p>Kamikaze/trunk and Luci trunk seem to have a mechanism for better version display than the default, but that mechanism is left unused. The default seems to be that SVN version number is only bumped up when Luci is rebuilt. If there are no changes to Luci or the user does not update feeds before compiling, he may end up with old SVN r_number being displayed.</p><p>Both Backfire and Kamikaze/trunk enable the functionality, where Luci reads the correct version string from /etc/openwrt_release. But for some reason, that file is not included in default Kamikaze/trunk. I have added that missing file also to my Kamikaze/trunk build, which now always shows the correct SVN revision based on SVN head. &#039;Base-files&#039; package&#039;s Makefile has been modified to add the revision to /etc/openwrt_release.&nbsp; (Additionally, it might be the &#039;packages&#039; feed files instead of Backfire or Kamikaze/trunk files that have changed latest, so it is best to use the global SVN head revision. My modified getver.sh takes care of that.)</p><p>Version displayed for me: &quot;OpenWrt Kamikaze/trunk SVN (r25382)&quot;</p><p>References:<br /><a href="https://dev.openwrt.org/changeset/20659">https://dev.openwrt.org/changeset/20659</a><br /><a href="http://luci.subsignal.org/trac/changeset/6016">http://luci.subsignal.org/trac/changeset/6016</a></p><br /><p><strong>Buttons:</strong></p><p>I have restructured my button files and added support for a <strong>smart reset button</strong>.</p><p>I hated the approach that you have to press the reset button for at least X seconds. The reset button is so well hidden in a hole in the bottom of the router, that I have no wish to try to press it for 10 seconds etc. So I figured out something else:</p><p>WNDR3700 has many buttons and many LEDs. I designed a smart reset button script, that requires you to first press &#039;reset&#039; in the bottom of the router, and then during the next 20 seconds to press the WPS button. The time period is indicated by a flashing the WPS LED.</p><p>Additionally, Luci has been modified to explain this functionality to the user on the Backup/restore/reset page in the System section of Luci. The following explnation is shown:<br /></p><div class="quotebox"><blockquote><p>This router&#039;s firmware has been modified to support the &#039;reset&#039; button located in the bottom of the WNDR3700. If you press the &#039;reset&#039; button, the WPS LED starts to blink for the next 20 seconds. If you press &#039;WPS&#039; button during that time, the router resets itself to the initial settings (by removing the jffs partition completely and thus reverting to the original configuration files included in the firmware). If you want to disable this reset feature, delete files &#039;/etc/hotplug.d/button/05-reset&#039; and &#039;/sbin/blink_wps_20&#039; .</p></blockquote></div><p>The reset script works by first monitoring the reset button itself. If the button is pressed, then the script launches the WPS LED blinking process that has two functions:<br />- it runs for 20 seconds blinking the WPS LED every second<br />- it acts as a &quot;reset enabled&quot; flag for the reset script that also monitors WPS button. The existence of the flag process is evaluated when the WPS button pressed event is noticed.</p><p>If the script then notices that the WPS button is pressed during the period when that flag process is running (and LED is blinking), it restores the device to default firmware settings by deleting the jffs partition containing the modified config files, by running &#039;firstboot&#039; and then &#039;reboot&#039;. I am not 100% sure, if &#039;firstboot&#039; is the 100% correct process for this, but it seems to work. I tested, it works. User returns to the situation after flashing firmware without saving config files.</p><p>This is not useful if the system is completely screwed and has crashed, but it might help if you forget password or otherwise lock yourself out of the router e.g. with disabling network interfaces.</p><p>The reset script is &#039;/etc/hotplug.d/button/05-reset&#039; and the blinking/flag script is &#039;/sbin/blink_wps_20&#039;. I made the script compatible with both Backfire and Trunk by using both button names for the buttons.</p><p>Note: The same approach could be used also for other routers with several buttons &amp; LEDs.</p><p>The new &#039;01-log-button-action&#039; hotplug just records all button actions to system log, that can be seen both from Luci and from the console with the&nbsp; &#039;logread&#039; command.</p><p>Additionally, I modified other button scripts too. Currently there are 4 button scripts and the flag helper script:<br />/etc/hotplug.d/button/01-log-button-actions&nbsp; : log all button activities, good for finding out what happens<br />/etc/hotplug.d/button/05-reset&nbsp; : Functionality for Reset button<br />/sbin/blink_wps_20&nbsp; : Helper script for Reset (blink &amp; flag), needs to be executable, chmod +x<br />/etc/hotplug.d/button/10-radio-toggle&nbsp; : WiFi button functionality<br />/etc/hotplug.d/button/50-wps&nbsp; : WPS button&#039;s normal functionality.</p><p>(I have added the other files to the build using /files sub-directory in buildroot, but 50-wps alrady exists in feeds/packages &#039;hostapd&#039;, so I have modified source there.)</p><p>/etc/hotplug.d/button/01-log-button-actions<br /></p><div class="codebox"><pre><code>#!/bin/sh
logger &quot;Button &#039;$BUTTON&#039; was &#039;$ACTION&#039;&quot;</code></pre></div><p>/etc/hotplug.d/button/05-reset<br /></p><div class="codebox"><pre><code>#!/bin/sh

# RESET button is &#039;reset&#039; in trunk, &#039;BTN_0&#039; in Backfire
# WPS button is &#039;wps&#039; in trunk, &#039;BTN_1&#039; in Backfire

if [ &quot;$ACTION&quot; = &quot;pressed&quot; ] &amp;&amp; [ &quot;$BUTTON&quot; = &quot;reset&quot; -o &quot;$BUTTON&quot; = &quot;BTN_0&quot; ]; then
  logger &quot;RESET button: status active for 20 seconds&quot;
  #launch reset flag process and blink WPS LED for 20 seconds
  /sbin/blink_wps_20 &amp;
fi

if [ &quot;$ACTION&quot; = &quot;pressed&quot; ] &amp;&amp; [ &quot;$BUTTON&quot; = &quot;wps&quot; -o &quot;$BUTTON&quot; = &quot;BTN_1&quot; ]; then
  ps | grep -v grep | grep blink_wps
  if [ $? == 0 ] ; then
    # blinking reset flag process still alive, reset is possible
    logger &quot;WPS button when reset flag is active: go for RESET&quot;
    # RESET action here
    firstboot &amp;&amp; reboot &amp;
  else
    logger &quot;WPS button when no reset flag, no reset action&quot;
  fi
fi</code></pre></div><p>/sbin/blink_wps_20&nbsp; &nbsp;(Note: needs to be executable, chmod +x )<br /></p><div class="codebox"><pre><code>#!/bin/sh
# remember to chmod this file runnable
a=0
while [ &quot;$a&quot; -lt 10 ]
do
        echo &quot;255&quot; &gt; /sys/devices/platform/leds-gpio/leds/wndr3700:green:wps/brightness
        sleep 1
        echo &quot;0&quot; &gt; /sys/devices/platform/leds-gpio/leds/wndr3700:green:wps/brightness
        sleep 1
        let &quot;a += 1&quot;
done</code></pre></div><p>/etc/hotplug.d/button/10-radio-toggle<br /></p><div class="codebox"><pre><code>#!/bin/sh 
if [ &quot;$BUTTON&quot; = &quot;BTN_2&quot; ] &amp;&amp; [ &quot;$ACTION&quot; = &quot;pressed&quot; ]; then
    if [ -d /var/run/hostapd-phy0 -o -d /var/run/hostapd-phy1 ]; then
        logger &quot;WiFi button used: WiFi down&quot;
        /sbin/wifi down
    else    
        logger &quot;WiFi button used: WiFi up&quot;
        /sbin/wifi up
    fi
fi</code></pre></div><p>/etc/hotplug.d/button/50-wps<br /></p><div class="codebox"><pre><code>if [ &quot;$ACTION&quot; = &quot;pressed&quot; -a &quot;$BUTTON&quot; = &quot;wps&quot; ]; then
        logger &quot;WPS button pressed, looking for active radios&quot;
        echo &quot;255&quot; &gt; /sys/devices/platform/leds-gpio/leds/wndr3700:green:wps/brightness
        for dir in /var/run/hostapd-*; do
                [ -d &quot;$dir&quot; ] || continue
                logger &quot;WPS activated for: $dir&quot;
                hostapd_cli -p &quot;$dir&quot; wps_pbc
        done
        sleep 10
        echo &quot;0&quot; &gt; /sys/devices/platform/leds-gpio/leds/wndr3700:green:wps/brightness
fi</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127608">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">phongn</div>
					<div class="post-datetime">
						7 Feb 2011, 22:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>@phongn:<br />I will look into it, although I have no way in testing Comcast&#039;s solutions.<br />And the Sourceforge link seems to lead into a full OpenWrt buildroot. No point for me.<br />If it looks like there is just info about enabling it in normal Openwrt, then there might be something to include/</p></blockquote></div><p>The guys out in <a href="https://forum.openwrt.org/viewtopic.php?pid=123061">this thread</a> seem to indicate that some of the changes might not be too hard (package ISC DHCP, ipv6tunnel, sipcalc and ensure 6RD and dslite are enabled in the kernel). Do you have a repository for your own branches that might be testable?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127621">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						8 Feb 2011, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>Back on the Backfire track: version bumped to r25407. <a href="http://koti.welho.com/hnyman1/Openwrt/">http://koti.welho.com/hnyman1/Openwrt/</a></p><p>The firewall in Backfire has really been upgraded in r25353 to use the same firewall_v2 as Kamikaze/trunk.</p><p>In practice this means that neither in Backfire nor in Kamikaze/trunk any special ip6tables rules are currently needed for basic IPv6 connectivity, if you have a &quot;normal&quot; tunnel config. </p><p>You only need rules for <br />- making sure that tunnel stays up (possibly an IPv4 iptables rule)<br />- possibly allowing incoming packets to port X to get forwarded for those ports you want to open. The correct &#039;chain&#039; in ip6tables to add the rule seems to be &#039;forwarding_rule&#039;.</p><p>I have thus removed most the rules from /etc/firewall.user and left only the rules explained in my message last Sunday.</p><p>However, I have left the old rules for information purposes to a new file /etc/old.firewall.user , which has no actual config meaning. These rules provide a complete basic ruleset, should anybody like to start from scratch with ip6tables.</p><p>Both Backfire and Kamikaze/trunk builds have been updated regarding this.</p><br /><p>(And the reset button routine works nicely also in Backfire, as expected.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127668">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Basker</div>
					<div class="post-datetime">
						8 Feb 2011, 15:14					</div>
				</div>
				<div class="post-content content">
					<p>@phongn - I have OpenWRT trunk up and running using a Comcast 6to4 tunnel.</p><p>To do this I,</p><p>Installed the radvd, ip6tables, and 6to4 packages with opkg.</p><p>Created a wan6 interface, set it to be 6to4, and assigned it to the wan firewall zone.<br />Had it advertise on the lan.<br />-- This can be done through Luci.</p><p>I enabled RADVD on the LAN interface. All defaults.<br />I enabled a RADVD prefix on the LAN interface. All defaults.<br />I enabled RDNSS on the LAN interface. All defaults.<br />-- This can also be done in Luci, and the defaults will pick up your wan6 settings.</p><p>I made sure to edit the /etc/config/network file and change the config option &#039;defaultroute&#039; to &#039;1&#039; under the wan6 interface after I was done in Luci.</p><p>That was it. After I did all this, I had a public ipv6 address wan6, and global ipv6 addresses for everything on the lan in addition to their link local addresses.</p><p>I didn&#039;t have to enter any custom ipv4 or ipv6 firewall rules. The defaults seem to be fairly locked down, and I have no problems keeping the tunnel up 24/7.&nbsp; I did an ipv6tables --list before and after the suggested rules here and in other places, and the defaults seem to do the right thing. I also noticed that Luci shows things for like &quot;enabled for IPV4 and IPV6 families&quot; on the echo/icmp rule, for instance.</p><p>Another note: I&#039;ve seen a number of places saying to change the MTU to 1280 for tunnels. If I did that on either the wan6 interface or in RADVD, I could not use the Comcast tunnel. The default 1500 MTU seems to be the only thing that works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p127695">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">phongn</div>
					<div class="post-datetime">
						8 Feb 2011, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Basker wrote:</cite><blockquote><p>@phongn - I have OpenWRT trunk up and running using a Comcast 6to4 tunnel.</p></blockquote></div><p>I also have the OpenWRT 6to4 tunnel up! I was looking to experiment with 6RD and possibly DSLite (I am part of Comcast&#039;s IPv6 trials).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128148">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Feb 2011, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>I have updated both Backfire and trunk versions to r25489.</p><p>No major changes during this week, but I noticed that you can disable the debug output functionality in wpad = hostapd, which act can decrease the size of the hostapd application by over 200 kB (from 800 kB to 580 kB) and even the size of the compressed squashfs image by 100 kB.</p><p>This applies both to Trunk and Backfire, and both to wpad-mini and wpad-full:<br />Check the config files hostapd-full.config and wpa_supplicant-full.config in&nbsp; /package/hostapd/files/:<br />The option line about disabling debug output is commented for some reason:<br />#CONFIG_NO_STDOUT_DEBUG=y</p><p>Uncommenting that line makes the hostapd to get built without part of the debug functionality, which is rather unnecessary for us basic users. I have so far disabled the debug from my Backfire image and didn&#039;t notice any side effects.</p><p>I just wonder, why this debug has been left as the default to hostapd/wpad packages.</p><p>(EDIT: additionally, I have built Backfire using Luci trunk, so that it includes the new status screen.)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 13 Feb 2011, 01:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128170">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						13 Feb 2011, 04:35					</div>
				</div>
				<div class="post-content content">
					<p>Good tip, thx <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128213">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Feb 2011, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>Hallo, I have a couple of questions:<br />&nbsp; What do you need for basic IPv6 support? Only &quot;kmod-ipv6&quot; | 156 851 Bytes | Kernel modules for IPv6 support |?<br />&nbsp; How can you disable IPv4 support?&nbsp; (I guess only possible when you compile yourself)</p><p>&nbsp; Where can I read about Dual-Stack-Operation?<br />&nbsp; When I obtained an IPv6 /64-Block from my ISP, how can I test everything?<br />&nbsp; What about privacy?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128215">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Feb 2011, 18:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>What do you need for basic IPv6 support? Only &quot;kmod-ipv6&quot; | 156 851 Bytes | Kernel modules for IPv6 support |?<br />&nbsp; How can you disable IPv4 support?&nbsp; (I guess only possible when you compile yourself)</p><p>&nbsp; Where can I read about Dual-Stack-Operation?<br />&nbsp; When I obtained an IPv6 /64-Block from my ISP, how can I test everything?</p></blockquote></div><p>A few more packages are needed than just kmod-ipv6:<br />opkg install kmod-ipv6 radvd ip kmod-ip6tables ip6tables 6in4</p><p>And as most ISPs do not offer IPv6 services yet, you need a tunnel from a provider. Hurricane Electric (HE) and SixXS offer free tunnels. <br /><a href="http://tunnelbroker.net">http://tunnelbroker.net</a>/<br /><a href="http://www.sixxs.net/main/">http://www.sixxs.net/main/</a></p><p>I just followed the guidelines in Wiki... <br />...both here and SixXS, from where I have the IPv6 6in4 tunnel. I had used the same tunell with my D-Link DIR-615C1, which offered tunnel support, so I had the basics already.</p><p>As the steps were not that clear and so well documented, I wrote guidelines how to do it. The story has links to the relevant Wiki articles, and I have improved some of the Wiki articles myself: <br /><a href="https://forum.openwrt.org/viewtopic.php?id=27541">https://forum.openwrt.org/viewtopic.php?id=27541</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128222">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Feb 2011, 19:27					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>What do you need for basic IPv6 support? Only &quot;kmod-ipv6&quot; | 156 851 Bytes | Kernel modules for IPv6 support |?<br />&nbsp; How can you disable IPv4 support?&nbsp; (I guess only possible when you compile yourself)<br />&nbsp; Where can I read about Dual-Stack-Operation?<br />&nbsp; When I obtained an IPv6 /64-Block from my ISP, how can I test everything?</p></blockquote></div><p>A few more packages are needed than just kmod-ipv6:<br />opkg install kmod-ipv6 radvd ip kmod-ip6tables ip6tables 6in4</p><p>And as most ISPs do not offer IPv6 services yet, you need a tunnel from a provider. Hurricane Electric (HE) and SixXS offer free tunnels.</p></blockquote></div><p>But let&#039;s say, I do not need any tunnel or whatsoever. I want to use dual-stack or even IPv6-single stack ;-) kmod-ipv6 should suffice? Also, as long as I do not want to configure routes, I shouldn&#039;t need &quot;ip&quot;.</p><br /><br /><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>As the steps were not that clear and so well documented, I wrote guidelines how to do it. The story has links to the relevant Wiki articles, and I have improved some of the Wiki articles myself: <br /><a href="https://forum.openwrt.org/viewtopic.php?id=27541">https://forum.openwrt.org/viewtopic.php?id=27541</a></p></blockquote></div><p><strong>Yes, Thank You!</strong></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p128249">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						14 Feb 2011, 00:02					</div>
				</div>
				<div class="post-content content">
					<p>I recommend getting a sixxs tunnel. If you are running trunk, all that&#039;s needed is configuring the aiccu client and optionally radvd.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 63</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=28392&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=28392&amp;p=63.html">63</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>