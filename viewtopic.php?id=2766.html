<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WRT54G Network setup problem</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p13029">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						29 Sep 2005, 20:53					</div>
				</div>
				<div class="post-content content">
					<p>Situation: Linux PC handles my internet connection and shares it to LAN, 5-port switch is connected to that router PC:s eth1. LAN PC:s are connected to 5-port switch.</p><p>What I want: Replace the switch with WRT54G, and get it working like original wired switch + wireless AP to connect laptops to same subnet with wired pc:s.</p><p>I already installed WhiteRussian RC3 to my WRT54G. What&#039;s next??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13031">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>I already noticed those docs, but I didnt get straight answer for my situation. Networking terms etc. are bit strange for my. And English is not my native language so its more difficult...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13032">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Internet --- RouterPC --- WRT54G --- LanPCs</p><p>RouterPC is plugged to the WAN port of the WRT54G<br />LanPCs are plugged to the 4 LAN ports of the WRT54G</p><p>Is this what you want ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13033">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">dl</div>
					<div class="post-datetime">
						29 Sep 2005, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>If your linux pc is handling internet firewall, openwrt in default config should do what you want as it bridges the wireless and lan ports. Just replace your switch with the wrt and don&#039;t use the wan port.</p><p>- DL</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13034">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nico wrote:</cite><blockquote><p>Internet --- RouterPC --- WRT54G --- LanPCs</p><p>RouterPC is plugged to the WAN port of the WRT54G<br />LanPCs are plugged to the 4 LAN ports of the WRT54G</p><p>Is this what you want ?</p></blockquote></div><p>Yes, thats configuration I mean.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13035">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dl wrote:</cite><blockquote><p>If your linux pc is handling internet firewall, openwrt in default config should do what you want as it bridges the wireless and lan ports. Just replace your switch with the wrt and don&#039;t use the wan port.</p><p>- DL</p></blockquote></div><p>Problem is I have four wired LanPC:s, so I need to use WAN port if it is possible. And I dont want to use old switch to get extra ports. (I already sold it... <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /> )</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13037">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Nico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:52					</div>
				</div>
				<div class="post-content content">
					<p>No problems, the WRT54G has 4 LAN ports for you LanPCs and the WAN port will be used to connect the WRT54G to your RouterPC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13038">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						29 Sep 2005, 21:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nico wrote:</cite><blockquote><p>No problems, the WRT54G has 4 LAN ports for you LanPCs and the WAN port will be used to connect the WRT54G to your RouterPC.</p></blockquote></div><p>hmm... I should be more spesific... I want wired and wireless clients to their ip:s from dhcp server (dnsmasq) running on Linux router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13042">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">dl</div>
					<div class="post-datetime">
						29 Sep 2005, 22:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mico wrote:</cite><blockquote><p>... I want wired and wireless clients to their ip:s from dhcp server (dnsmasq) running on Linux router.</p></blockquote></div><p>Turn off dnsmasq startup script on wrt. Get rid of vlan1/wan, add &quot;0&quot; (wan port) to vlan0ports.</p><p>ps: you probably want to set lan_ipaddr to a static on your network block for admin purposes.</p><p>- DL</p>											<p class="post-edited">(Last edited by <strong>dl</strong> on 29 Sep 2005, 23:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p13064">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">mico</div>
					<div class="post-datetime">
						30 Sep 2005, 14:21					</div>
				</div>
				<div class="post-content content">
					<p>Got it working like I want. Above are my nvram settigs where I made changes. Hope those are all of them, I was a bit tired when makin them. If anyone sees something to change, please tell it...</p><p>lan_dns=192.168.0.1<br />lan_gateway=192.168.0.1<br />lan_ifname=br0<br />lan_ifnames=vlan0 eth1<br />lan_ipaddr=192.168.0.100<br />lan_netmask=255.255.255.0<br />lan_proto=static</p><p>wan_ifname=vlan1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #cant get rid of this<br />wan_proto=none</p><p>vlan0hwname=et0<br />vlan0ports=0 1 2 3 4 5*</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>