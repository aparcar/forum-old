<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWrt for ZyXEL NWA1123-AC</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p270937">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						2 Apr 2015, 01:17					</div>
				</div>
				<div class="post-content content">
					<p>I have just started a new page for the ZyXEL NWA1123-AC access point. I already have a boot log of the OEM firmware via serial console. You can have a look here:</p><p><a href="http://wiki.openwrt.org/toh/zyxel/nwa1123-ac">http://wiki.openwrt.org/toh/zyxel/nwa1123-ac</a></p><p>With my current little knowledge the OEM boot log seems very promising to me that OpenWrt can support this AP.</p><p>I would like to kindly ask for some hints for doing the next steps, e.g. trying to flash OpenWrt and so on.</p><p>Thanks in advance!<br />Christian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271515">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						6 Apr 2015, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>Trying to boot OpenWRT from RAM with U-Boot. Fetching an uImage generated with the image builder, but the flash chip does not seem to initialize, the kernel can&#039;t find the root fs.</p><p>I would be grateful for some advice ... perhaps it got something to do with the GPIO on AR934x?</p><p>As the DIR 835 Rev A1 (<a href="https://wikidevi.com/wiki/D-Link_DIR-835_rev_A1">https://wikidevi.com/wiki/D-Link_DIR-835_rev_A1</a>) seems to have the same flash chip, I can&#039;t imagine what is wrong. I also tried an generated uImage which was built for DIR 835 A1, but it was the same: the mtd partitions could not be found, so I guess the flash chip was not detected.</p><p>Any hints would be gratefully welcome!</p><p>Below you can see the serial output when booting a kernel from chaos calmer (current trunk):</p><br /><br /><div class="codebox"><pre><code>Starting kernel ...

[    0.000000] Linux version 3.18.10 (openwrt@gb-14) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r45277) ) #1 Mon Apr 6 10:22:17 UTC 2015
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9342 rev 3
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  console=ttyS0,115200 root=31:02 rootfstype=jffs2 init=/sbin/init mtdparts=ath-nor0:256k(u-boot),64k(u-boot-env),8192k(rootfs),960kd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 60748K/65536K available (2633K kernel code, 129K rwdata, 548K rodata, 264K init, 193K bss, 4788K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:560.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:40.000MHz
[    0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is Generic AR71XX/AR724X/AR913X based board
[    0.100000] Switched to clocksource MIPS
[    0.110000] NET: Registered protocol family 2
[    0.110000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.110000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.120000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.120000] TCP: reno registered
[    0.130000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.130000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.140000] NET: Registered protocol family 1
[    0.140000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.180000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.180000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.190000] msgmni has been set to 118
[    0.200000] io scheduler noop registered
[    0.200000] io scheduler deadline registered (default)
[    0.210000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.240000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11, base_baud = 2500000) is a 16550A
[    0.250000] console [ttyS0] enabled
[    0.250000] console [ttyS0] enabled
[    0.260000] bootconsole [early0] disabled
[    0.260000] bootconsole [early0] disabled
[    0.270000] TCP: cubic registered
[    0.270000] NET: Registered protocol family 17
[    0.280000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    0.290000] Bridge firewalling registered
[    0.290000] 8021q: 802.1Q VLAN Support v1.8
[    0.310000] VFS: Cannot open root device &quot;31:02&quot; or unknown-block(31,2): error -6
[    0.320000] Please append a correct &quot;root=&quot; boot option; here are the available partitions:
[    0.330000] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)
[    0.330000] ---[ end Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(31,2)
[   82.540000] random: nonblocking pool is initialized</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p271643">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						8 Apr 2015, 01:20					</div>
				</div>
				<div class="post-content content">
					<p>Setting the BOARD parameter in the linux cmdline args (bootargs) improves the situation. The flash chip is detected. The question is: what does this board parameter ... I will have to look up, read much and understand ...</p><p>The rootfs could not be read properly, but I think this got something to do with the fact that it is the OEM rootfs and I didn&#039;t flash the OpenWRT rootfs so far ... I will give it a try later on.</p><p>Here the boot log with improvements:</p><div class="codebox"><pre><code>Starting kernel ...

[    0.000000] Linux version 3.18.10 (openwrt@gb-14) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r45277) ) #1 Mon Apr 6 10:22:17 UTC 2015
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9342 rev 3
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=WLR8100 console=ttyS0,115200 root=31:02 rootfstype=jffs2 init=/sbin/init mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),8192k(rootfs),960k(uImage),6528k(reserve),256k(config),64k(mib0),64k(ARd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 60748K/65536K available (2633K kernel code, 129K rwdata, 548K rodata, 264K init, 193K bss, 4788K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:560.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:40.000MHz
[    0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is Sitecom WLR-8100
[    0.320000] ar71xx: invalid PHY interface mode for GE1
[    0.320000] registering PCI controller with io_map_base unset
[    0.330000] PCI host bridge to bus 0000:00
[    0.340000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]
[    0.340000] pci_bus 0000:00: root bus resource [io  0x0000]
[    0.350000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.350000] pci 0000:00:00.0: invalid calibration data
[    0.360000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x101fffff 64bit]
[    0.360000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10200000-0x1020ffff pref]
[    0.370000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.370000] Switched to clocksource MIPS
[    0.380000] NET: Registered protocol family 2
[    0.380000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.390000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.390000] TCP: reno registered
[    0.400000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.410000] NET: Registered protocol family 1
[    0.420000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.430000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.450000] msgmni has been set to 118
[    0.450000] io scheduler noop registered
[    0.450000] io scheduler deadline registered (default)
[    0.460000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.490000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11, base_baud = 2500000) is a 16550A
[    0.500000] console [ttyS0] enabled
[    0.500000] console [ttyS0] enabled
[    0.510000] bootconsole [early0] disabled
[    0.510000] bootconsole [early0] disabled
[    0.520000] m25p80 spi0.0: found mx25l12805d, expected m25p80
[    0.520000] m25p80 spi0.0: mx25l12805d (16384 Kbytes)
[    0.530000] 8 cmdlinepart partitions found on MTD device spi0.0
[    0.530000] Creating 8 MTD partitions on &quot;spi0.0&quot;:
[    0.540000] 0x000000000000-0x000000040000 : &quot;u-boot&quot;
[    0.540000] 0x000000040000-0x000000050000 : &quot;u-boot-env&quot;
[    0.550000] 0x000000050000-0x000000850000 : &quot;rootfs&quot;
[    0.560000] mtd: device 2 (rootfs) set to be root filesystem
[    0.560000] mtdsplit: no squashfs found in &quot;rootfs&quot;
[    0.570000] mtdsplit: no squashfs found in &quot;spi0.0&quot;
[    0.570000] 0x000000850000-0x000000940000 : &quot;uImage&quot;
[    0.580000] 0x000000940000-0x000000fa0000 : &quot;reserve&quot;
[    0.580000] 0x000000fa0000-0x000000fe0000 : &quot;config&quot;
[    0.590000] 0x000000fe0000-0x000000ff0000 : &quot;mib0&quot;
[    0.600000] 0x000000ff0000-0x000001000000 : &quot;ART&quot;
[    0.630000] libphy: ag71xx_mdio: probed
[    1.230000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd072, driver=Generic PHY]
[    1.240000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:RGMII
[    1.240000] TCP: cubic registered
[    1.250000] NET: Registered protocol family 17
[    1.250000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.270000] Bridge firewalling registered
[    1.270000] 8021q: 802.1Q VLAN Support v1.8
[    3.660000] jffs2: notice: (1) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.
[    3.680000] VFS: Mounted root (jffs2 filesystem) readonly on device 31:2.
[    3.690000] Freeing unused kernel memory: 264K (8039e000 - 803e0000)
[    3.900000] jffs2: compression type 0x06 not available
[    3.910000] jffs2: Error: jffs2_decompress returned -5
[    3.910000] jffs2: compression type 0x06 not available
[    3.920000] jffs2: Error: jffs2_decompress returned -5
[    3.920000] jffs2: compression type 0x06 not available
[    3.930000] jffs2: Error: jffs2_decompress returned -5
[    3.940000] jffs2: compression type 0x06 not available
[    3.940000] jffs2: Error: jffs2_decompress returned -5
[    3.950000] jffs2: compression type 0x06 not available
[    3.950000] jffs2: Error: jffs2_decompress returned -5
[    3.960000] Failed to execute /sbin/init (error -5).  Attempting defaults...
[    3.970000] jffs2: compression type 0x06 not available
[    3.970000] jffs2: Error: jffs2_decompress returned -5
[    3.980000] Starting init: /sbin/init exists but couldn&#039;t execute it (error -5)
[    3.990000] jffs2: compression type 0x06 not available
[    3.990000] jffs2: Error: jffs2_decompress returned -5
[    4.000000] Starting init: /bin/sh exists but couldn&#039;t execute it (error -5)
[    4.010000] Kernel panic - not syncing: No working init found.  Try passing init= option to kernel. See Linux Documentation/init.txt for guidance.
[    4.010000] ---[ end Kernel panic - not syncing: No working init found.  Try passing init= option to kernel. See Linux Documentation/init.txt for guidance.</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272095">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						11 Apr 2015, 23:35					</div>
				</div>
				<div class="post-content content">
					<p>The lastest results after flashing a rootfs to the flash rom. Looks pretty well:</p><div class="codebox"><pre><code>Starting kernel ...

[    0.000000] Linux version 3.18.10 (openwrt@gb-14) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r45277) ) #1 Mon Apr 6 10:22:17 UTC 2015
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9342 rev 3
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] User-defined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] Initmem setup node 0 [mem 0x00000000-0x03ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=WLR8100 console=ttyS0,115200 root=31:02 rootfstype=jffs2 init=/sbin/init mtdparts=spi0.0:256k(u-boot),64k(u-boot-env),8192k(rootfs),960k(uImage),6528k(reserve),256k(config),64k(mib0),64k(ARd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 60748K/65536K available (2633K kernel code, 129K rwdata, 548K rodata, 264K init, 193K bss, 4788K reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:560.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:40.000MHz
[    0.000000] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)
[    0.070000] pid_max: default: 32768 minimum: 301
[    0.070000] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.080000] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.090000] NET: Registered protocol family 16
[    0.090000] MIPS: machine is Sitecom WLR-8100
[    0.320000] ar71xx: invalid PHY interface mode for GE1
[    0.320000] registering PCI controller with io_map_base unset
[    0.330000] PCI host bridge to bus 0000:00
[    0.340000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]
[    0.340000] pci_bus 0000:00: root bus resource [io  0x0000]
[    0.350000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.350000] pci 0000:00:00.0: invalid calibration data
[    0.360000] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x101fffff 64bit]
[    0.360000] pci 0000:00:00.0: BAR 6: assigned [mem 0x10200000-0x1020ffff pref]
[    0.370000] pci 0000:00:00.0: using irq 40 for pin 1
[    0.370000] Switched to clocksource MIPS
[    0.380000] NET: Registered protocol family 2
[    0.380000] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.390000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.390000] TCP: reno registered
[    0.400000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.410000] NET: Registered protocol family 1
[    0.420000] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.430000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.450000] msgmni has been set to 118
[    0.450000] io scheduler noop registered
[    0.450000] io scheduler deadline registered (default)
[    0.460000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
�[    0.490000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11, base_baud = 2500000) is a 16550A
[    0.500000] console [ttyS0] enabled
[    0.500000] console [ttyS0] enabled
[    0.510000] bootconsole [early0] disabled
[    0.510000] bootconsole [early0] disabled
[    0.520000] m25p80 spi0.0: found mx25l12805d, expected m25p80
[    0.520000] m25p80 spi0.0: mx25l12805d (16384 Kbytes)
[    0.530000] 8 cmdlinepart partitions found on MTD device spi0.0
[    0.530000] Creating 8 MTD partitions on &quot;spi0.0&quot;:
[    0.540000] 0x000000000000-0x000000040000 : &quot;u-boot&quot;
[    0.540000] 0x000000040000-0x000000050000 : &quot;u-boot-env&quot;
[    0.550000] 0x000000050000-0x000000850000 : &quot;rootfs&quot;
[    0.560000] mtd: device 2 (rootfs) set to be root filesystem
[    0.560000] 1 squashfs-split partitions found on MTD device rootfs
[    0.570000] 0x000000230000-0x000000850000 : &quot;rootfs_data&quot;
[    0.580000] 0x000000850000-0x000000940000 : &quot;uImage&quot;
[    0.580000] 0x000000940000-0x000000fa0000 : &quot;reserve&quot;
[    0.590000] 0x000000fa0000-0x000000fe0000 : &quot;config&quot;
[    0.590000] 0x000000fe0000-0x000000ff0000 : &quot;mib0&quot;
[    0.600000] 0x000000ff0000-0x000001000000 : &quot;ART&quot;
[    0.640000] libphy: ag71xx_mdio: probed
[    1.230000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd072, driver=Generic PHY]
[    1.240000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:RGMII
[    1.240000] TCP: cubic registered
[    1.250000] NET: Registered protocol family 17
[    1.250000] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    1.270000] Bridge firewalling registered
[    1.270000] 8021q: 802.1Q VLAN Support v1.8
[    1.280000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.290000] Freeing unused kernel memory: 264K (8039e000 - 803e0000)
[    1.850000] init: failed to symlink /tmp -&gt; /var
[    1.850000] init: Console is alive
[    1.850000] init: - watchdog -
[    3.110000] usbcore: registered new interface driver usbfs
[    3.120000] usbcore: registered new interface driver hub
[    3.130000] usbcore: registered new device driver usb
[    3.140000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    3.140000] ehci-platform: EHCI generic platform driver
[    3.150000] ehci-platform ehci-platform: EHCI Host Controller
[    3.150000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[    3.160000] ehci-platform ehci-platform: TX-TX IDP fix enabled
[    3.170000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[    3.200000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[    3.200000] hub 1-0:1.0: USB hub found
[    3.210000] hub 1-0:1.0: 1 port detected
[    3.530000] usb 1-1: new full-speed USB device number 2 using ehci-platform
[    3.750000] usb 1-1: device descriptor read/64, error -71
[    3.930000] init: - preinit -
[    4.140000] usb 1-1: device descriptor read/64, error -71
[    4.430000] usb 1-1: new full-speed USB device number 3 using ehci-platform
[    4.740000] usb 1-1: device descriptor read/64, error -71
[    4.750000] random: mktemp urandom read with 12 bits of entropy available
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[    5.060000] usb 1-1: device descriptor read/64, error -71
[    5.290000] usb 1-1: new full-speed USB device number 4 using ehci-platform
[    5.770000] usb 1-1: device not accepting address 4, error -71
[    5.890000] usb 1-1: new full-speed USB device number 5 using ehci-platform
[    6.370000] usb 1-1: device not accepting address 5, error -71
[    6.370000] usb usb1-port1: unable to enumerate USB device
[    8.000000] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[    8.050000] procd: - early -
[    8.050000] procd: - watchdog -
[    8.830000] procd: - ubus -
[    9.840000] procd: - init -
Please press Enter to activate this console.
[   10.580000] NET: Registered protocol family 10
[   10.600000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   10.620000] Loading modules backported from Linux version master-2015-03-09-0-g141f155
[   10.620000] Backport generated by backports.git backports-20150129-0-gdd4a670
[   10.630000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   10.650000] nf_conntrack version 0.5.0 (953 buckets, 3812 max)
[   10.700000] xt_time: kernel timezone is -0000
[   10.730000] cfg80211: Calling CRDA to update world regulatory domain
[   10.760000] cfg80211: World regulatory domain updated:
[   10.770000] cfg80211:  DFS Master region: unset
[   10.770000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   10.780000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.790000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.800000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   10.810000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.810000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2000 mBm), (0 s)
[   10.820000] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   10.830000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.840000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   10.910000] PPP generic driver version 2.4.2
[   10.920000] NET: Registered protocol family 24
[   10.990000] ieee80211 phy0: Atheros AR9340 Rev:3 mem=0xb8100000, irq=47
[   11.010000] cfg80211: Calling CRDA for country: US
[   11.010000] cfg80211: Regulatory domain changed to country: US
[   11.020000] cfg80211:  DFS Master region: FCC
[   11.020000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   11.030000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)
[   11.040000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 1700 mBm), (N/A)
[   11.050000] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz, 160000 KHz AUTO), (N/A, 2300 mBm), (0 s)
[   11.060000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)
[   11.070000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   17.290000] jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
[   17.290000] jffs2_build_filesystem(): unlocking the mtd device... done.
[   17.300000] jffs2_build_filesystem(): erasing all blocks after the end marker... 
[   20.450000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   20.490000] device eth0.1 entered promiscuous mode
[   20.490000] device eth0 entered promiscuous mode
[   20.510000] eth0: link up (1000Mbps/Full duplex)
[   20.510000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   20.550000] br-lan: port 1(eth0.1) entered forwarding state
[   20.550000] br-lan: port 1(eth0.1) entered forwarding state
[   22.550000] br-lan: port 1(eth0.1) entered forwarding state
[   62.360000] done.
[   62.370000] jffs2: notice: (927) jffs2_build_xattr_subsystem: complete building xattr subsystem, 0 of xdatum (0 unchecked, 0 orphan) and 0 of xref (0 dead, 0 orphan) found.
[   74.840000] random: nonblocking pool is initialized</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p272935">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						18 Apr 2015, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>Booting with BOARD=TL-WR841N-v8 finds two eths and a built-in switch, but hangs on the root fs again because it does not find TPL signature.</p><div class="codebox"><pre><code>[    0.710000] m25p80 spi0.0: found mx25l12805d, expected m25p80
[    0.710000] m25p80 spi0.0: mx25l12805d (16384 Kbytes)
[    0.720000] spi0.0: no TP-Link header found
[    0.740000] libphy: ag71xx_mdio: probed
[    1.330000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.1:00 [uid=004dd042, driver=Generic PHY]
[    1.340000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:MII
[    1.930000] ag71xx-mdio.1: Found an AR934X built-in switch
[    1.970000] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII</code></pre></div><p>So I need to combine the BOARD profile for WLR8100 and for TL-WR841N-v8. I really would like to create a new BOARD profile/template but I really can&#039;t find documentation on how adding another BOARD profile on openwrt.org.</p><p>Any advice would be gratefully appreciated! Thanks in advance!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276788">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">leondantas</div>
					<div class="post-datetime">
						19 May 2015, 22:36					</div>
				</div>
				<div class="post-content content">
					<p>I bought this device. If you need some testing let me know.<br />I&#039;ll look for my old serial nokia cable, I think it is needed to flash, right?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276799">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						20 May 2015, 00:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>leondantas wrote:</cite><blockquote><p>I bought this device. If you need some testing let me know.<br />I&#039;ll look for my old serial nokia cable, I think it is needed to flash, right?</p></blockquote></div><p>Thank you for your offer of testing! Currently I am very busy at work so I can&#039;t do much for this project, but I hope to be back again in about three weeks.</p><p>I don&#039;t know what the serial nokia cable does and therefore I can&#039;t tell you if you can use it. I am using a MAX3232 for level shifting and an USB to serial converter for connecting it to the computer. You can use the +3,3 V from the AP as the VCC for the MAX3232.</p><p>For testing I did a full backup of the flash rom first, this was a little bit tricky because u-boot only prints a memory dump, but this can easily be converted to a binary file with linux text/bin utils. I then flashed the rootfs via u-boot. For my experiments I load different kernels via tftp to the AP&#039;s RAM and boot them.</p><p>Do you have experience with writing kernel drivers? I will need to write to the OpenWRT developer mailing list and possibly to ZyXEL too, but it will take some time as I wrote above.</p><p>If you have any other questions please let me know, perhaps I can help you.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p276807">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">jewest</div>
					<div class="post-datetime">
						20 May 2015, 03:27					</div>
				</div>
				<div class="post-content content">
					<p>I had a similar issue recently with an older Zyxel (P870HNU-51c).. Thanks to help from <strong>danitool</strong> I was able to resolve by adding a pad in the image generation parameters.</p><p>See notes below. <br /><a href="https://forum.openwrt.org/viewtopic.php?id=56921">https://forum.openwrt.org/viewtopic.php?id=56921</a></p><div class="quotebox"><cite>danitool wrote:</cite><blockquote><p>About mtd partitions, for some reason the kernel is not recognizing the rootfs as a valid squashfs. I suspect the CFE has double image&nbsp; protection. This means sometimes it will flash/boot images to/from the middle of the flash. To force the use of whole flash, and flashing always after the end of CFE, you should pad the image to at least 1/2 the flash size.</p><p>Add the parameter&nbsp; <strong>--pad 16</strong> to the image ImageDTB generator line.</p></blockquote></div><p>In your case this would be <strong>--pad 8</strong></p><p>With that said your exact error has some variation and you are not using CFE so it is possible this is something else but worth a shot.. Hope this helps!</p>											<p class="post-edited">(Last edited by <strong>jewest</strong> on 20 May 2015, 03:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p294946">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">olba</div>
					<div class="post-datetime">
						6 Oct 2015, 15:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys!<br />I just recently bought 2 units of Zyxel NWA1123-AC for my new house. Yep, that big... <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /> I&#039;m also into getting OpenWrt running, but I thought of another route (unless this is already tried) to get the complete software &amp; build instructions from Zyxel since the unit is delivered with a GPLv2 license. This will give me better insight how the product works with regards to the various settings etc.</p>											<p class="post-edited">(Last edited by <strong>olba</strong> on 6 Oct 2015, 15:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298495">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">olba</div>
					<div class="post-datetime">
						3 Nov 2015, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>Hello again!<br />And now I am the holder/owner of the OpenSource part of the binary for NWA1123-AC v2.00. There is also some binary blobs for the wifi chip that the US FCC limits us from access. Currently trying to study these source code parts. In the mean time also asking for the newly updated v2.10 firmware release.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331366">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">bulanula</div>
					<div class="post-datetime">
						13 Jul 2016, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>Hello olba,</p><p>Sorry for reviving an old thread but the lack of PM on the forum forces me to do this. </p><p>Can you please upload the GPL code archive you received from Zyxel to somewhere like mega.nz or Google drive or another file storage site ? I am having difficulty sourcing this from Zyxel themselves. </p><p>I think Zyxel themselves are using a version of OpenWRT on the original firmware so it shouldn&#039;t be too much trouble to add support for the device. </p><p>We need to write the appropriate rootfs on the NAND using TFTP and Uboot then we have to specify the correct partition layout to the kernel (and also specify where it can find the rootfs to make sure the rootfs is detected). </p><p>It looks like scoe did this and got it working but no news from him. Maybe he will get a notification after my post here and come back to us ...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p336592">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">leondantas</div>
					<div class="post-datetime">
						30 Aug 2016, 21:57					</div>
				</div>
				<div class="post-content content">
					<p>did you get a reply from zyxel?</p><p>I&#039;d like to try an openwrt distro on it, it seems it crashes after a few weeks with stock firmware.</p><br /><div class="quotebox"><cite>bulanula wrote:</cite><blockquote><p>Hello olba,</p><p>Sorry for reviving an old thread but the lack of PM on the forum forces me to do this. </p><p>Can you please upload the GPL code archive you received from Zyxel to somewhere like mega.nz or Google drive or another file storage site ? I am having difficulty sourcing this from Zyxel themselves. </p><p>I think Zyxel themselves are using a version of OpenWRT on the original firmware so it shouldn&#039;t be too much trouble to add support for the device. </p><p>We need to write the appropriate rootfs on the NAND using TFTP and Uboot then we have to specify the correct partition layout to the kernel (and also specify where it can find the rootfs to make sure the rootfs is detected). </p><p>It looks like scoe did this and got it working but no news from him. Maybe he will get a notification after my post here and come back to us ...</p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p351730">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">borbelyb</div>
					<div class="post-datetime">
						12 Feb 2017, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>You can find the stock firmware source here: github.com/kodolok/nwa1123-ac<br />It&#039;s indeed based on OpenWRT Attitude Adjustment.</p><p>Btw you can use the &quot;DB120 reference board&quot; as a target when building OpenWRT from trunk, just don&#039;t forget to add ath10k for the ac radio.<br />It will boot and recognize the flash chip with the stock bootargs and will even detect the two radios.</p><p>The problem is somewhere near the built-in switch (or switches?). It will recognize an AR934X switch as switch0, but swconfig show that only port0 is connected on that.<br />On the PC connected to the device wireshark shows dhcp discovers from the device (the wan interface is configured to dhcp client by default). If I set the wan to static, the dhcp discovers disappear, but when I try to ping the PC, I only see arp requests repeatedly. <br />The arp command lists 00:00:00:00:00:00 as the MAC of the PC&#039;s IP.</p><p>I hope someone who knows openwrt better than me can figure this out. If you have something please share!</p><div class="codebox"><pre><code>## Booting image at 81000000 ...
   Image Name:   MIPS OpenWrt Linux-4.4.14
   Created:      2017-02-05  12:06:41 UTC
   Image Type:   MIPS Linux Kernel Image (lzma compressed)
   Data Size:    1339173 Bytes =  1.3 MB
   Load Address: 80060000
   Entry Point:  80060000
   Verifying Checksum at 0x81000040 ...OK
   Uncompressing Kernel Image ... OK
No initrd
## Transferring control to Linux (at address 80060000) ...
## Giving linux memsize in bytes, 67108864

Starting kernel ...

[    0.000000] Linux version 4.4.14 (kfeosp@fksos) (gcc version 5.3.0 (OpenWrt GCC 5.3.0 50104) ) #1 Sun Feb 12 11:48:03 UTC 2017
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU0 revision is: 0001974c (MIPS 74Kc)
[    0.000000] SoC: Atheros AR9342 rev 3
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] No valid device tree found, continuing without
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Initmem setup node 0 [mem 0x0000000000000000-0x0000000003ffffff]
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  board=DB120 console=ttyS0,115200 mtdparts=spi0.0:256k(u-boot)ro,64k(u-boot-env)ro,6336k(rootfs),1408k(kernel),64k(nvram),64k(art)ro,7744k@0x50000(firmware) rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 60100K/65536K available (2974K kernel code, 174K rwdata, 756K rodata, 312K init, 200K bss, 5436K reserved, 0K cma-reserved)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Clocks: CPU:560.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:40.000MHz
[    0.000000] clocksource: MIPS: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 6825930166 ns
[    0.000009] sched_clock: 32 bits at 280MHz, resolution 3ns, wraps every 7669584382ns
[    0.008307] Calibrating delay loop... 278.93 BogoMIPS (lpj=1394688)
[    0.081145] pid_max: default: 32768 minimum: 301
[    0.086203] Mount-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.093256] Mountpoint-cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.103694] clocksource: jiffies: mask: 0xffffffff max_cycles: 0xffffffff, max_idle_ns: 19112604462750000 ns
[    0.114954] NET: Registered protocol family 16
[    0.121338] MIPS: machine is Atheros DB120 reference board
[    0.135067] registering PCI controller with io_map_base unset
[    0.591408] PCI host bridge to bus 0000:00
[    0.595838] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]
[    0.603155] pci_bus 0000:00: root bus resource [io  0x0000]
[    0.609098] pci_bus 0000:00: root bus resource [??? 0x00000000 flags 0x0]
[    0.616318] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]
[    0.624841] pci 0000:00:00.0: invalid calibration data
[    0.630781] pci 0000:00:00.0: BAR 0: assigned [mem 0x10000000-0x101fffff 64bit]
[    0.638621] pci 0000:00:00.0: BAR 6: assigned [mem 0x10200000-0x1020ffff pref]
[    0.646317] pci 0000:00:00.0: using irq 40 for pin 1
[    0.652494] clocksource: Switched to clocksource MIPS
[    0.659299] NET: Registered protocol family 2
[    0.664870] TCP established hash table entries: 1024 (order: 0, 4096 bytes)
[    0.672309] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.679144] TCP: Hash tables configured (established 1024 bind 1024)
[    0.686025] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.692260] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.699300] NET: Registered protocol family 1
[    0.705198] futex hash table entries: 256 (order: -1, 3072 bytes)
[    0.729892] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.736176] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.749497] io scheduler noop registered
[    0.753748] io scheduler deadline registered (default)
[    0.759480] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.766786] console [ttyS0] disabled
[    0.790682] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11, base_baud = 2500000) is a 16550A
[    0.799881] console [ttyS0] enabled
[    0.799881] console [ttyS0] enabled
[    0.807306] bootconsole [early0] disabled
[    0.807306] bootconsole [early0] disabled
[    0.819297] m25p80 spi0.0: found mx25l12805d, expected m25p80
[    0.825239] m25p80 spi0.0: mx25l12805d (16384 Kbytes)
[    0.830393] 7 cmdlinepart partitions found on MTD device spi0.0
[    0.836419] Creating 7 MTD partitions on &quot;spi0.0&quot;:
[    0.841299] 0x000000000000-0x000000040000 : &quot;u-boot&quot;
[    0.848808] 0x000000040000-0x000000050000 : &quot;u-boot-env&quot;
[    0.856098] 0x000000050000-0x000000680000 : &quot;rootfs&quot;
[    0.862960] mtd: device 2 (rootfs) set to be root filesystem
[    0.868784] 1 squashfs-split partitions found on MTD device rootfs
[    0.875113] 0x0000002a0000-0x000000680000 : &quot;rootfs_data&quot;
[    0.882408] 0x000000680000-0x0000007e0000 : &quot;kernel&quot;
[    0.889354] 0x0000007e0000-0x0000007f0000 : &quot;nvram&quot;
[    0.896219] 0x0000007f0000-0x000000800000 : &quot;art&quot;
[    0.902869] 0x000000050000-0x0000007e0000 : &quot;firmware&quot;
[    2.192505] ar934x-nfc ar934x-nfc: read operation failed on page -1
[    3.452492] ar934x-nfc ar934x-nfc: read operation failed on page -1
[    4.712491] ar934x-nfc ar934x-nfc: read operation failed on page -1
[    5.972491] ar934x-nfc ar934x-nfc: read operation failed on page -1
[    5.978850] nand: No NAND device found
[    5.982670] ar934x-nfc ar934x-nfc: nand_scan_ident failed, err:-19
[    6.005206] libphy: ag71xx_mdio: probed
[    6.013874] libphy: ag71xx_mdio: probed
[    6.683059] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd072, driver=Atheros 8035 ethernet]
[    6.694008] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:RGMII
[    7.284273] ag71xx-mdio.1: Found an AR934X built-in switch
[    7.326735] eth1: Atheros AG71xx at 0xba000000, irq 5, mode:GMII
[    7.335485] NET: Registered protocol family 10
[    7.344716] NET: Registered protocol family 17
[    7.349337] bridge: automatic filtering via arp/ip/ip6tables has been deprecated. Update your scripts to load br_netfilter if you need this.
[    7.362351] 8021q: 802.1Q VLAN Support v1.8
[    7.374505] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    7.383824] Freeing unused kernel memory: 312K (80432000 - 80480000)
[    8.304770] init: Console is alive
[    8.308486] init: - watchdog -
[    9.432884] init: - preinit -
[   10.401657] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   10.429662] random: procd urandom read with 16 bits of entropy available
Press the [f] key and hit [enter] to enter failsafe mode
Press the [1], [2], [3] or [4] key and hit [enter] to select the debug level
[   13.724954] mount_root: jffs2 not ready yet, using temporary tmpfs overlay
[   13.771768] procd: - early -
[   13.775595] procd: - watchdog -
[   14.494543] procd: - ubus -
[   14.687255] procd: - init -
Please press Enter to activate this console.
[   15.498850] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   15.517353] Loading modules backported from Linux version wt-2016-05-12-0-g7a54796
[   15.525100] Backport generated by backports.git backports-20160216-0-ge3c56e4
[   15.611574] PCI: Enabling device 0000:00:00.0 (0000 -&gt; 0002)
[   15.619657] ath10k_pci 0000:00:00.0: pci irq legacy oper_irq_mode 1 irq_mode 0 reset_mode 0
[   15.837463] ath10k_pci 0000:00:00.0: Direct firmware load for ath10k/pre-cal-pci-0000:00:00.0.bin failed with error -2
[   15.848364] ath10k_pci 0000:00:00.0: Falling back to user helper
[   15.953834] firmware ath10k!pre-cal-pci-0000:00:00.0.bin: firmware_loading_store: map pages failed
[   15.963305] ath10k_pci 0000:00:00.0: Direct firmware load for ath10k/cal-pci-0000:00:00.0.bin failed with error -2
[   15.973869] ath10k_pci 0000:00:00.0: Falling back to user helper
[   16.174635] firmware ath10k!cal-pci-0000:00:00.0.bin: firmware_loading_store: map pages failed
[   16.445872] ath10k_pci 0000:00:00.0: qca988x hw2.0 target 0x4100016c chip_id 0x043222ff sub 0000:0000
[   16.455301] ath10k_pci 0000:00:00.0: kconfig debug 0 debugfs 1 tracing 0 dfs 1 testmode 1
[   16.470020] ath10k_pci 0000:00:00.0: firmware ver 10.2.4.97 api 5 features no-p2p crc32 f91e34f2
[   16.519224] ath10k_pci 0000:00:00.0: Direct firmware load for ath10k/QCA988X/hw2.0/board-2.bin failed with error -2
[   16.529854] ath10k_pci 0000:00:00.0: Falling back to user helper
[   16.633893] firmware ath10k!QCA988X!hw2.0!board-2.bin: firmware_loading_store: map pages failed
[   16.649177] ath10k_pci 0000:00:00.0: board_file api 1 bmi_id N/A crc32 bebc7c08
[   17.851250] ath10k_pci 0000:00:00.0: htt-ver 2.1 wmi-op 5 htt-op 2 cal otp max-sta 128 raw 0 hwcrypto 1
[   18.068627] ip_tables: (C) 2000-2006 Netfilter Core Team
[   18.096924] nf_conntrack version 0.5.0 (943 buckets, 3772 max)
[   18.164780] xt_time: kernel timezone is -0000
[   18.218371] ieee80211 phy1: Atheros AR9340 Rev:3 mem=0xb8100000, irq=47
[   25.403372] jffs2_scan_eraseblock(): End of filesystem marker found at 0x0
[   25.410412] jffs2_build_filesystem(): unlocking the mtd device... done.
[   25.417188] jffs2_build_filesystem(): erasing all blocks after the end marker...
[   29.248748] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready
[   29.297433] device eth0.1 entered promiscuous mode
[   29.302311] device eth0 entered promiscuous mode
[   29.344179] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready
[   29.482029] device eth1 entered promiscuous mode
[   29.486908] br-lan: port 2(eth1) entered forwarding state
[   29.492421] br-lan: port 2(eth1) entered forwarding state
[   29.498202] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready
[   29.676190] IPv6: ADDRCONF(NETDEV_UP): eth0.2: link is not ready
[   30.203986] eth0: link up (1000Mbps/Full duplex)
[   30.208826] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready
[   30.264602] br-lan: port 2(eth1) entered disabled state
[   30.270080] br-lan: port 1(eth0.1) entered forwarding state
[   30.275821] br-lan: port 1(eth0.1) entered forwarding state
[   30.281656] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.2: link becomes ready
[   32.272597] br-lan: port 1(eth0.1) entered forwarding state



BusyBox v1.24.2 () built-in shell (ash)

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 DESIGNATED DRIVER (Bleeding Edge, 50104)
 -----------------------------------------------------
  * 2 oz. Orange Juice         Combine all juices in a
  * 2 oz. Pineapple Juice      tall glass filled with
  * 2 oz. Grapefruit Juice     ice, stir well.
  * 2 oz. Cranberry Juice
 -----------------------------------------------------</code></pre></div>											<p class="post-edited">(Last edited by <strong>borbelyb</strong> on 12 Feb 2017, 16:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p376656">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">scoe</div>
					<div class="post-datetime">
						3 May 2018, 14:02					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I am back again, but I don&#039;t know for how long. Thank you all for your contributions! I have just compiled OpenWrt r6796-56ae9f9, including ath10k firmware. I have tried a plain, LAN network config without VLAN, switch config or whatever. Here it is:</p><p>File: /etc/config/network<br /></p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
        option ifname &#039;lo&#039;
        option proto &#039;static&#039;
        option ipaddr &#039;127.0.0.1&#039;
        option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
        option ifname &#039;eth0&#039;
        option proto &#039;dhcp&#039;</code></pre></div><p>Directly after booting with the above config the switch shows that the eth0 interface is only 10mbit, half-duplex. The switch is detected as eth1, I have checked the status with this command:</p><div class="codebox"><pre><code>swconfig dev eth1 show</code></pre></div><p>Resetting the switch with</p><div class="codebox"><pre><code>swconfig dev eth1 set reset
swconfig dev eth1 set apply</code></pre></div><p>changed the port state to gigabit LAN as it should be. The show command produces the following for port 0 after resetting:</p><div class="codebox"><pre><code>...
Port 0:                                                                                                                      
        enable_mirror_rx: 0                                                                                                  
        enable_mirror_tx: 0                                                                                                  
        pvid: 0                                                                                                              
        link: port:0 link:up speed:1000baseT full-duplex txflow rxflow
...</code></pre></div><p>Then, even DHCP works, but there are problems with massive packet loss. I realized this when I tried pinging from both sides:</p><p>OpenWrt -&gt; PC: 22% packet loss<br />PC -&gt; OpenWrt: 85% packet loss</p><p>I guess we need to examine the switch in more detail. On the other hand it could be a driver issue as well.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>