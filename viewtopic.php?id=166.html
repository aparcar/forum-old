<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Web Interface</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p744">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						20 Jun 2004, 19:02					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve started working on an interface.&nbsp; It shouldn&#039;t take me much longer to have a beta version ready.&nbsp; Especially since I&#039;m going to be stuck in a hotel room in the middle of nowhere all day tomorrow.</p><p>Right now the thing I&#039;m pretty jazzed about is I&#039;ve made it really easy for packages to add their own pages to the admin page.&nbsp; All they have to do is install a directory in the ./packages dir of the server root that contains a name.php and index.php file, and it will automagically be added as a menu option in the admin page.</p><p>And yes, this interface is written in php (v. 3), and i know there are some who feel that this is overkill, too big, totally unsuited for embedded use, not as good as X scripting language, violation of federal law, etc . . .</p><p>Putting that aside (or at least, leaving it for a different Forum Topic), I think at the very least, my interface should -- if one was so inclined -- be reasonably easy to port to the super-small interpreted language that your brother-in-law is about to write. . .&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p839">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 04:12					</div>
				</div>
				<div class="post-content content">
					<p>OK, a beta is up.&nbsp; Use it at your own risk.&nbsp; It requires either php or my slimmed down version of php (now known as lwhp so as not to run afoul of the php license)</p><p>All are available at my repository:</p><p>src sam <a href="http://davidoffdotnet.net/openwrt/ipkg">http://davidoffdotnet.net/openwrt/ipkg</a></p><p>A few things to note --</p><p>1. This is very basic, only the Network and Wireless sections do anything.&nbsp; The truth is you should probably mostly use it just to see the direction I&#039;m going int. Functionality is minimal</p><p>2. It&#039;s in PHP. I know people have some objections to that, and I may be coming around to that point of view.&nbsp; But for now . . . it is what it is</p><p>3. Its only set up for the V2 or GS configuration so probably don&#039;t bother to try it on an earlier, or at least be prepared to change some code.</p><p>4. On a more general note -- the interface assumes that all users will configure in the following routing arrangement:</p><p>Internet &lt;---&gt; WRT &lt;---&gt; LAN</p><p>It allows you to change which interfaces make which connection, but it doesn&#039;t, for example, allow you to have two (or more lans).&nbsp; My thinking is that you have to settle on some level of abstraction for a user interface and this makes sense, if for no other reasons than that that&#039;s what the nvram variables are set up for.</p><p>I&#039;m eager for any comments.&nbsp; In the meantime, I&#039;ll keep working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p842">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 10:19					</div>
				</div>
				<div class="post-content content">
					<p>Is it enough to use the lwphp package and your pages to get it working (to use it with the default httpd)? Or do I still need thttpd?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p844">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 14:34					</div>
				</div>
				<div class="post-content content">
					<p>no need to use thttpd</p><p>lwhp and interface-wrt packages are all you need.</p><p>the thttpd packages was made to get php4 running, but its not necessary to run the interface.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p847">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 15:23					</div>
				</div>
				<div class="post-content content">
					<p>hm, i just wondering why my browser is trying to download the files while i want to view them.<br />That&#039;s why I asked for.</p><p>Any solutions? Is there a config i need to add for the httpd, to load the php module or so?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p851">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>hmmm.&nbsp; i&#039;m not exactly sure what you mean.&nbsp; since php is built as a cgi app for busybox any script needs to prefaced with </p><p>#!/usr/bin/php</p><p>the only script that has that magic in my interface is index.php because that is the only page ever directly called.&nbsp; it calls the other pages as necessary.</p><p>if that&#039;s not working for some reason please let me know.</p><p>if you simply want to view my scripts, i&#039;d suggest just using vi or moving them to a different computer and using the editor of your choice.</p><p>if you still can&#039;t get it to work, let me know.&nbsp; i&#039;m very interested in bugs&nbsp; <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p852">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 16:13					</div>
				</div>
				<div class="post-content content">
					<p>hm, still can&#039;t get it working.<br />It still wants me to download the index.php, eventhough there is a #!/usr/bin/php in the first line of index.php</p><p>Could you query me on IRC (phil_ at #wrt54g)? Then I could give you the link to my box. Then you can see it on your own, it&#039;s hard to describe.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p856">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 16:46					</div>
				</div>
				<div class="post-content content">
					<p>A few more clarifications, after talking with phil (thanks, phil).</p><p>1. you need to access the inteface by going to yourrouter/cgi-bin/index.php not yourrouter/openwrt/index.php.&nbsp; the one is just a symlink to the other, but if you don&#039;t get cgi-bin in the url busybox doesn&#039;t know its a script.&nbsp; if you just type in your router&#039;s address it should give you the appropriate link.</p><p>2.&nbsp; my statement about only supporting the<br />Internet &lt;---&gt; WRT &lt;---LAN--&gt;<br />configuration was only meant to mean that currently the router<br />1. only routes between two networks and<br />2. it masquerades traffice between them<br />the networks need not be the actual internet or a lan. a better diagrman might have been<br />WAN &lt;---&gt; WRT &lt;---&gt; LAN</p><p>3. the package magic is there in the sense that if you add a folder to the packages direcotry in /www/openwrt and include in that folder the following<br />a. a names.php file that containes<br />[code]&lt;? $package_name=&quot;Your Package Name&quot; ?&gt;[/code]<br />b. an index.php file<br />the interface will automatically add the name to the Packages sidebar and display your index.php page.</p><p>You can also easily hook into my status and control templates to mimic the look of the interface (and maybe save yourself some work).&nbsp; this will all get documented once i finish the basic interface work.</p><p>[/code]</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p858">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>I think I detected another error:<br />While I was coding on the package management stuff of the interface, i found out that lwhp is missing lots of functions which I need for package management. So I installed your php3 package. Worked fine - till one point:<br />When I now click on a link in the interface (no matter what link .. let&#039;s say the &quot;managment&quot;-link above, the default page is loaded, but not the &quot;managment&quot; page. This happens for every other page, i call.</p><p>Any solutions?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p859">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 19:28					</div>
				</div>
				<div class="post-content content">
					<p>try moving the php3.ini file from /etc to /usr/lib. (or symlink)&nbsp; i think my php3 package looks for it there and you need a variable to be set in php3.ini otherwise it won&#039;t accept the HTTP_*_VARS which would lead to the behavior you describe.</p><p>out of curiosity, what functions are you using that aren&#039;t available in lwhp?&nbsp; i could backport them or possible suggest a workaround.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p860">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>uhm .. <br />actually, there is *no* php3.ini in /etc, /usr/lib or any other directory. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />Do you have a example one, or can you post yours?</p><p>At the moment I&#039;m working on package managment, especially the removing function for installed packages. Will tell you more about this later (when it&#039;s at least working a bit).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p861">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jun 2004, 19:37					</div>
				</div>
				<div class="post-content content">
					<p>i meant the one from the lwhp package. the easiest thing is just to create a php3.ini file in /usr/lib containing the following text:</p><div class="codebox"><pre><code>track_vars = On</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p862">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						25 Jun 2004, 19:43					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>i did a <br /></p><div class="codebox"><pre><code>root@ap:/usr/lib# echo &quot;track_vars = On&quot; &gt; php3.ini</code></pre></div><p>restarted the webserver, and still the same. <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Cheers, <br />phil</p><p><span style="color: red">edit: got it working .. I had to put it into /etc and not into /usr/lib.</span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p885">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						27 Jun 2004, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>new version up on my repository.&nbsp; for some reason ipkg upgrade throws a bad number error (anyone know why?)</p><p>you can still get it via<br /></p><div class="codebox"><pre><code>ipkg remove interface-wrt
ipkg install interface-wrt</code></pre></div><p>this adds some services to the management page, most importantly, to allow dhcp configuration.</p><p>still very beta.&nbsp; use at your own risk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p887">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						28 Jun 2004, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>A few, small errors:</p><p><span class="bbu">Management Page -&gt; Status</span>:<br />It says &#039;grep: /etc/init.d/S50services: No such file or directory&#039;. The file has to be /etc/init.d/S50service, not /etc/init.d/S50services.</p><p>It says &#039;grep: /etc/inittab: No such file or directory&#039;. I think it should be /etc/initd instead of /etc/inittab.</p><p><span class="bbu">Management Page -&gt; telnet</span><br />It says &#039;grep: /etc/init.d/S50services: No such file or directory&#039;, should be /etc/init.d/S50service.</p><p><span class="bbu">Management Page -&gt; DHCP</span><br />The same as it&#039;s on the telnet page.</p><p><span class="bbu">Management Page -&gt; DNS</span><br />/etc/initd instead of /etc/inittab.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p888">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						28 Jun 2004, 13:36					</div>
				</div>
				<div class="post-content content">
					<p>at least on my version of the firmware (b4, not cvs) the file is S50services.&nbsp; also, dnsmasq is respawned from inittab which is why that file is parsed.</p><p>is it possible you modified the files when you copied over from rom?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p896">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						28 Jun 2004, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>Hum, yes. They are modified. But they still have the same name.<br />Do you think that&#039;s the problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p901">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						28 Jun 2004, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>the files need to be named<br />/etc/inittab<br />and<br />/etc/init.d/S50services</p><p>these are their names in rom (i think), and that&#039;s what i used.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p903">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">phil</div>
					<div class="post-datetime">
						28 Jun 2004, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>okay. (shame on me, sorry :oops:)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p905">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						28 Jun 2004, 22:15					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1159">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						17 Jul 2004, 05:48					</div>
				</div>
				<div class="post-content content">
					<p>my $0.02 on how the web page should look:</p><p><a href="http://openwrt.ksilebo.net/foo.html">http://openwrt.ksilebo.net/foo.html</a></p><p>I&#039;m aware that IE&#039;s CSS support is terrible, use a real browser.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1175">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">saldaNa</div>
					<div class="post-datetime">
						18 Jul 2004, 14:43					</div>
				</div>
				<div class="post-content content">
					<p>i don&#039;t like the layout (well that&#039;s my personal taste)<br />but the code isn&#039;t that flexible because of the &quot; &quot; and there are only those div tags you need for your layout.<br />i suggest adding more even if you don&#039;t use them to have more flexibility with the stylesheets.. and of coure remove the bgcolor from the body tag</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1180">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						18 Jul 2004, 17:08					</div>
				</div>
				<div class="post-content content">
					<p>The reason I did my layout is becase I hated yours .. personal preferences.</p><p>nbsp: Most of the problem comes from rewriting the page to be compatible with Internet Explorer; dropping support for that would greatly simplify things, but IE is a popular browser and I&#039;m sure that dropping support for it would juste lead to some post about how it didn&#039;t look good in IE.</p><p>bgcolor: yes, I did set it in the body tag, the reason for this is that not all browsers support CSS *gasp*, so for those browsers that don&#039;t, change the page background to a simple white .. you can still override it in CSS.</p><p>div tags: yes, I could add more divs tags, but if you&#039;d take the time to study css and it&#039;s selectors you&#039;d realize that you really don&#039;t need them.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1183">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">saldaNa</div>
					<div class="post-datetime">
						18 Jul 2004, 23:15					</div>
				</div>
				<div class="post-content content">
					<p>so this is your final code?<br />i&#039;ll try to tweak the sheme to my needs and test it with the most common browsers</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1217">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">muyi</div>
					<div class="post-datetime">
						22 Jul 2004, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>IMHO, simple is best.</p><p>Also, a flexible interface allowing addon skins would be even better than a nice looking one.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>