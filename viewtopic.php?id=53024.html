<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> BB RC3 - Bridge SSID to VLAN Failure</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p248641">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						1 Oct 2014, 11:48					</div>
				</div>
				<div class="post-content content">
					<p>After successfully configuring bridging in AA 12.09, the following error appears to be preventing the bridging of traffic between &#039;OpenWRT&#039; and VLAN3 in BB RC3.</p><br /><p><strong>br-wifi: received packet on eth0.3 with own address as source address</strong></p><br /><p><strong>First Router - WDR4900 BB RC3</strong></p><p>VLAN 1 - LAN - 192.168.1.1 - Management network with DHCP server,<br />VLAN 2 - WAN - Dynamic - Internet connection,<br />VLAN 3 - WiFi - 192.168.3.1 - Untrust WiFi traffic with DHCP server,<br />SSID -&nbsp; OpenWrt - Bridged to VLAN3</p><br /><p><strong>Second Router - WDR4900 BB RC3</strong></p><p>VLAN 1 - LAN - 192.168.1.2 - Management &amp; Main network<br />VLAN 3 - WiFi - unmanaged - Untrust WiFi traffic<br />SSID -&nbsp; OpenWrt - Bridged to VLAN3</p><br /><div class="codebox"><pre><code>[    0.000000] Using Freescale P1014 machine description
[    0.000000] Memory CAM mapping: 64/64 Mb, residual: 0Mb
[    0.000000] Linux version 3.10.49 (bb@builder1) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r41989) ) #1 Fri Aug 8 03:25:22 CEST 2014
[    0.000000] Found legacy serial port 0 for /soc@ffe00000/serial@4500
[    0.000000]   mem=ffe04500, taddr=ffe04500, irq=0, clk=399999996, speed=0
[    0.000000] TL-WDR4900 v1 board from TP-Link
[    0.000000] Top of RAM: 0x8000000, Total RAM: 0x8000000
[    0.000000] Memory hole size: 0MB
[    0.000000] Zone ranges:
[    0.000000]   DMA      [mem 0x00000000-0x07ffffff]
[    0.000000]   Normal   empty
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x07ffffff]
[    0.000000] On node 0 totalpages: 32768
[    0.000000] free_area_init_node: node 0, pgdat c03234a0, node_mem_map c035c000
[    0.000000]   DMA zone: 256 pages used for memmap
[    0.000000]   DMA zone: 0 pages reserved
[    0.000000]   DMA zone: 32768 pages, LIFO batch:7
[    0.000000] MMU: Allocated 1088 bytes of context maps for 255 contexts
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyS0,115200
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Sorting __ex_table...
[    0.000000] Memory: 60572k/131072k available (3132k kernel code, 70500k reserved, 116k data, 184k bss, 132k init)
[    0.000000] Kernel virtual memory layout:
[    0.000000]   * 0xfffdf000..0xfffff000  : fixmap
[    0.000000]   * 0xfe000000..0xfe000000  : early ioremap
[    0.000000]   * 0xc9000000..0xfe000000  : vmalloc &amp; ioremap
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:512 nr_irqs:512 16
[    0.000000] mpic: Resetting
[    0.000000] mpic: Setting up MPIC &quot; OpenPIC  &quot; version 1.2 at ffe40000, max 1 CPUs
[    0.000000] mpic: ISU size: 256, shift: 8, mask: ff
[    0.000000] mpic: Initializing for 256 sources
[    0.000000] time_init: decrementer frequency = 49.999999 MHz
[    0.000000] time_init: processor frequency   = 799.999992 MHz
[    0.000000] clocksource: timebase mult[14000007] shift[24] registered
[    0.000000] clockevent: decrementer mult[cccccc9] shift[32] cpu[0]
[    0.000047] pid_max: default: 32768 minimum: 301
[    0.000140] Mount-cache hash table entries: 512
[    0.002639] NET: Registered protocol family 16
[    0.008184] Found FSL PCI host bridge at 0x00000000ffe09000. Firmware bus number: 0-&gt;255
[    0.008196] PCI host bridge /pcie@ffe09000 (primary) ranges:
[    0.008206]  MEM 0x00000000a0000000..0x00000000bfffffff -&gt; 0x00000000a0000000 
[    0.008214]   IO 0x00000000ffc10000..0x00000000ffc1ffff -&gt; 0x0000000000000000
[    0.008229] /pcie@ffe09000: PCICSRBAR @ 0xfff00000
[    0.008576] Found FSL PCI host bridge at 0x00000000ffe0a000. Firmware bus number: 0-&gt;255
[    0.008585] PCI host bridge /pcie@ffe0a000  ranges:
[    0.008593]  MEM 0x0000000080000000..0x000000009fffffff -&gt; 0x0000000080000000 
[    0.008601]   IO 0x00000000ffc00000..0x00000000ffc0ffff -&gt; 0x0000000000000000
[    0.008615] /pcie@ffe0a000: PCICSRBAR @ 0xfff00000
[    0.020239] PCI: Probing PCI hardware
[    0.020517] fsl-pci ffe09000.pcie: PCI host bridge to bus 0000:00
[    0.020532] pci_bus 0000:00: root bus resource [io  0x0000-0xffff]
[    0.020541] pci_bus 0000:00: root bus resource [mem 0xa0000000-0xbfffffff]
[    0.020562] pci_bus 0000:00: root bus resource [bus 00-ff]
[    0.020575] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to ff
[    0.020608] pci 0000:00:00.0: [1957:012b] type 01 class 0x0b2000
[    0.020622] pci 0000:00:00.0: ignoring class 0x0b2000 (doesn&#039;t match header type 01)
[    0.020654] pci 0000:00:00.0: supports D1 D2
[    0.020664] pci 0000:00:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[    0.021040] pci 0000:01:00.0: [168c:0033] type 00 class 0x028000
[    0.021069] pci 0000:01:00.0: reg 10: [mem 0xa0000000-0xa001ffff 64bit]
[    0.021109] pci 0000:01:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]
[    0.021148] pci 0000:01:00.0: supports D1
[    0.021157] pci 0000:01:00.0: PME# supported from D0 D1 D3hot
[    0.028132] pci 0000:00:00.0: PCI bridge to [bus 01-ff]
[    0.028148] pci 0000:00:00.0:   bridge window [mem 0xa0000000-0xa00fffff]
[    0.028207] pci_bus 0000:01: busn_res: [bus 01-ff] end is updated to 01
[    0.028221] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 01
[    0.028390] fsl-pci ffe0a000.pcie: PCI host bridge to bus 0001:02
[    0.028406] pci_bus 0001:02: root bus resource [io  0x20000-0x2ffff] (bus address [0x0000-0xffff])
[    0.028415] pci_bus 0001:02: root bus resource [mem 0x80000000-0x9fffffff]
[    0.028425] pci_bus 0001:02: root bus resource [bus 02-ff]
[    0.028436] pci_bus 0001:02: busn_res: [bus 02-ff] end is updated to ff
[    0.028468] pci 0001:02:00.0: [1957:012b] type 01 class 0x0b2000
[    0.028480] pci 0001:02:00.0: ignoring class 0x0b2000 (doesn&#039;t match header type 01)
[    0.028508] pci 0001:02:00.0: supports D1 D2
[    0.028518] pci 0001:02:00.0: PME# supported from D0 D1 D2 D3hot D3cold
[    0.028707] pci 0001:02:00.0: Primary bus is hard wired to 0
[    0.028720] pci 0001:02:00.0: bridge configuration invalid ([bus 01-01]), reconfiguring
[    0.028888] pci 0001:03:00.0: [168c:abcd] type 00 class 0x020000
[    0.028898] pci 0001:03:00.0: AR9381 fixup applied
[    0.028921] pci 0001:03:00.0: reg 10: [mem 0x80000000-0x8001ffff 64bit]
[    0.028962] pci 0001:03:00.0: reg 30: [mem 0x00000000-0x0000ffff pref]
[    0.029000] pci 0001:03:00.0: supports D1
[    0.029009] pci 0001:03:00.0: PME# supported from D0 D1 D3hot
[    0.036144] pci 0001:02:00.0: PCI bridge to [bus 03-ff]
[    0.036160] pci 0001:02:00.0:   bridge window [mem 0x80000000-0x800fffff]
[    0.036212] pci_bus 0001:03: busn_res: [bus 03-ff] end is updated to 03
[    0.036225] pci_bus 0001:02: busn_res: [bus 02-ff] end is updated to 03
[    0.036267] PCI 0000:00 Cannot reserve Legacy IO [io  0x0000-0x0fff]
[    0.036275] PCI 0001:02 Cannot reserve Legacy IO [io  0x20000-0x20fff]
[    0.036304] pci 0000:00:00.0: BAR 9: can&#039;t assign mem pref (size 0x100000)
[    0.036317] pci 0000:01:00.0: BAR 6: assigned [mem 0xa0020000-0xa002ffff pref]
[    0.036327] pci 0000:00:00.0: PCI bridge to [bus 01]
[    0.036337] pci 0000:00:00.0:   bridge window [io  0x0000-0xffff]
[    0.036347] pci 0000:00:00.0:   bridge window [mem 0xa0000000-0xbfffffff]
[    0.036359] pci 0001:02:00.0: BAR 9: can&#039;t assign mem pref (size 0x100000)
[    0.036370] pci 0001:03:00.0: BAR 6: assigned [mem 0x80020000-0x8002ffff pref]
[    0.036379] pci 0001:02:00.0: PCI bridge to [bus 03]
[    0.036388] pci 0001:02:00.0:   bridge window [io  0x20000-0x2ffff]
[    0.036398] pci 0001:02:00.0:   bridge window [mem 0x80000000-0x9fffffff]
[    0.036404] Some PCI device resources are unassigned, try booting with pci=realloc
[    0.036423] pci_bus 0000:00: resource 4 [io  0x0000-0xffff]
[    0.036433] pci_bus 0000:00: resource 5 [mem 0xa0000000-0xbfffffff]
[    0.036442] pci_bus 0000:01: resource 0 [io  0x0000-0xffff]
[    0.036451] pci_bus 0000:01: resource 1 [mem 0xa0000000-0xbfffffff]
[    0.036461] pci_bus 0001:02: resource 4 [io  0x20000-0x2ffff]
[    0.036470] pci_bus 0001:02: resource 5 [mem 0x80000000-0x9fffffff]
[    0.036479] pci_bus 0001:03: resource 0 [io  0x20000-0x2ffff]
[    0.036489] pci_bus 0001:03: resource 1 [mem 0x80000000-0x9fffffff]
[    0.036496] Registering qe_ic with sysfs...
[    0.039283] bio: create slab &lt;bio-0&gt; at 0
[    0.040515] Switching to clocksource timebase
[    0.041871] NET: Registered protocol family 2
[    0.042192] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.042220] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.042236] TCP: Hash tables configured (established 1024 bind 1024)
[    0.042286] TCP: reno registered
[    0.042297] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.042314] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.042455] NET: Registered protocol family 1
[    0.042502] PCI: CLS 32 bytes, default 32
[    0.050972] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.050985] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.051550] msgmni has been set to 246
[    0.051658] io scheduler noop registered
[    0.051666] io scheduler deadline registered (default)
[    0.101324] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.103832] serial8250.0: ttyS0 at MMIO 0xffe04500 (irq = 42) is a 16550A
[    0.603016] console [ttyS0] enabled
[    0.607198] ffe04500.serial: ttyS0 at MMIO 0xffe04500 (irq = 42) is a 16550
[    0.614556] Generic RTC Driver v1.07
[    0.619394] fsl_espi ffe07000.spi: master is unqueued, this is deprecated
[    0.626495] m25p80 spi0.0: s25fl129p1 (16384 Kbytes)
[    0.631586] 7 ofpart partitions found on MTD device spi0.0
[    0.637079] Creating 7 MTD partitions on &quot;spi0.0&quot;:
[    0.641871] 0x000000000000-0x000000050000 : &quot;u-boot&quot;
[    0.647496] 0x000000050000-0x000000060000 : &quot;dtb&quot;
[    0.652825] 0x000000060000-0x000000300000 : &quot;kernel&quot;
[    0.658399] 0x000000300000-0x000000fe0000 : &quot;rootfs&quot;
[    0.663946] mtd: device 3 (rootfs) set to be root filesystem
[    0.669695] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x530000, len=0xab0000
[    0.677965] 0x000000530000-0x000000fe0000 : &quot;rootfs_data&quot;
[    0.683966] 0x000000fe0000-0x000000ff0000 : &quot;config&quot;
[    0.689525] 0x000000ff0000-0x000001000000 : &quot;caldata&quot;
[    0.695167] 0x000000060000-0x000000fe0000 : &quot;firmware&quot;
[    0.700913] fsl_espi ffe07000.spi: at 0xc901e000 (irq = 59)
[    0.707371] libphy: Freescale PowerQUICC MII Bus: probed
[    0.736705] switch0: Atheros AR8327 rev. 2 switch registered on mdio@ffe24000
[    1.928720] fsl-gianfar ethernet.1 eth0: mac: 00:04:9f:ef:01:01
[    1.934654] fsl-gianfar ethernet.1 eth0: Running with NAPI enabled
[    1.940836] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[0]: 256
[    1.947363] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[1]: 256
[    1.953890] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[2]: 256
[    1.960417] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[3]: 256
[    1.966944] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[4]: 256
[    1.973471] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[5]: 256
[    1.979998] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[6]: 256
[    1.986526] fsl-gianfar ethernet.1 eth0: RX BD ring size for Q[7]: 256
[    1.993053] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[0]: 256
[    1.999579] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[1]: 256
[    2.006109] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[2]: 256
[    2.012636] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[3]: 256
[    2.019163] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[4]: 256
[    2.025691] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[5]: 256
[    2.032217] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[6]: 256
[    2.038745] fsl-gianfar ethernet.1 eth0: TX BD ring size for Q[7]: 256
[    2.045440] ucc_geth_driver: QE UCC Gigabit Ethernet Controller
[    2.051745] TCP: cubic registered
[    2.055077] NET: Registered protocol family 17
[    2.059584] Bridge firewalling registered
[    2.063604] 8021q: 802.1Q VLAN Support v1.8
[    2.073802] VFS: Mounted root (squashfs filesystem) readonly on device 31:3.
[    2.081248] Freeing unused kernel memory: 132K (c02ee000 - c030f000)
[    3.532835] usbcore: registered new interface driver usbfs
[    3.538435] usbcore: registered new interface driver hub
[    3.543886] usbcore: registered new device driver usb
[    3.551116] Button Hotplug driver version 0.4.1
[    3.557963] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    3.564595] fsl-ehci fsl-ehci.0: Freescale On-Chip EHCI Host Controller
[    3.571235] fsl-ehci fsl-ehci.0: new USB bus registered, assigned bus number 1
[    3.588316] fsl-ehci fsl-ehci.0: irq 28, io mem 0xffe22000
[    3.604543] fsl-ehci fsl-ehci.0: USB 2.0 started, EHCI 1.00
[    3.610553] hub 1-0:1.0: USB hub found
[    3.614330] hub 1-0:1.0: 1 port detected
[    3.618979] ehci-platform: EHCI generic platform driver
[    3.940561] usb 1-1: new high-speed USB device number 2 using fsl-ehci
[    4.078860] hub 1-1:1.0: USB hub found
[    4.082896] hub 1-1:1.0: 4 ports detected
[    5.846938] libphy: mdio@ffe24000:00 - Link is Up - 1000/Full
[    7.047412] jffs2: notice: (872) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 15 of xref (0 dead, 8 orphan) found.
[   10.067884] NET: Registered protocol family 10
[   10.087820] nf_conntrack version 0.5.0 (1977 buckets, 7908 max)
[   10.107647] ip6_tables: (C) 2000-2006 Netfilter Core Team
[   10.131861] booke_wdt: powerpc book-e watchdog driver loaded
[   10.154855] Loading modules backported from Linux version master-2014-05-22-0-gf2032ea
[   10.162799] Backport generated by backports.git backports-20140320-37-g5c33da0
[   10.187106] input: buttons.8 as /devices/buttons.8/input/input0
[   10.199590] ip_tables: (C) 2000-2006 Netfilter Core Team
[   10.291462] xt_time: kernel timezone is -0000
[   10.318040] cfg80211: Calling CRDA to update world regulatory domain
[   10.330460] cfg80211: World regulatory domain updated:
[   10.335629] cfg80211:  DFS Master region: unset
[   10.339982] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   10.349734] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.357738] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   10.365741] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
[   10.373744] cfg80211:   (5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)
[   10.381834] cfg80211:   (5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   10.389925] cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
[   10.398014] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   10.406017] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
[   10.462584] PPP generic driver version 2.4.2
[   10.473439] NET: Registered protocol family 24
[   10.557330] ath: EEPROM regdomain: 0x0
[   10.557341] ath: EEPROM indicates default country code should be used
[   10.557346] ath: doing EEPROM country-&gt;regdmn map search
[   10.557357] ath: country maps to regdmn code: 0x3a
[   10.557363] ath: Country alpha2 being used: US
[   10.557368] ath: Regpair used: 0x3a
[   10.574894] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   10.592864] cfg80211: Calling CRDA for country: US
[   10.603478] cfg80211: Regulatory domain changed to country: US
[   10.609342] cfg80211:  DFS Master region: FCC
[   10.613523] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   10.623264] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)
[   10.631268] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 1700 mBm), (N/A)
[   10.639271] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2300 mBm), (0 s)
[   10.647274] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)
[   10.655286] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   10.672702] ieee80211 phy0: Atheros AR9300 Rev:4 mem=0xc9640000, irq=17
[   10.730481] ath: EEPROM regdomain: 0x0
[   10.730493] ath: EEPROM indicates default country code should be used
[   10.730498] ath: doing EEPROM country-&gt;regdmn map search
[   10.730508] ath: country maps to regdmn code: 0x3a
[   10.730514] ath: Country alpha2 being used: US
[   10.730519] ath: Regpair used: 0x3a
[   10.749219] ieee80211 phy1: Selected rate control algorithm &#039;minstrel_ht&#039;
[   10.772797] ieee80211 phy1: Atheros AR9300 Rev:3 mem=0xc96c0000, irq=18
[   14.761976] device eth0.1 entered promiscuous mode
[   14.766886] device eth0 entered promiscuous mode
[   14.774076] br-lan: port 1(eth0.1) entered forwarding state
[   14.779691] br-lan: port 1(eth0.1) entered forwarding state
[   14.811407] device eth0.3 entered promiscuous mode
[   14.819220] br-wifi: port 1(eth0.3) entered forwarding state
[   14.824928] br-wifi: port 1(eth0.3) entered forwarding state
[   14.952714] br-wifi: received packet on eth0.3 with own address as source address
[   15.304597] cfg80211: Calling CRDA for country: GB
[   15.313033] cfg80211: Regulatory domain changed to country: GB
[   15.318894] cfg80211:  DFS Master region: ETSI
[   15.323160] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)
[   15.332905] cfg80211:   (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
[   15.340909] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
[   15.348914] cfg80211:   (5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2000 mBm), (0 s)
[   15.356918] cfg80211:   (5490000 KHz - 5710000 KHz @ 80000 KHz), (N/A, 2700 mBm), (0 s)
[   15.365035] cfg80211:   (57240000 KHz - 65880000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)
[   15.645458] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready
[   15.658695] device wlan0 entered promiscuous mode
[   15.663610] br-wifi: port 2(wlan0) entered forwarding state
[   15.669211] br-wifi: port 2(wlan0) entered forwarding state
[   15.687175] IPv6: ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
[   15.952699] br-wifi: received packet on eth0.3 with own address as source address
[   16.414561] IPv6: ADDRCONF(NETDEV_UP): wlan1: link is not ready
[   16.421147] device wlan1 entered promiscuous mode
[   16.425966] br-wifi: port 3(wlan1) entered forwarding state
[   16.431592] br-wifi: port 3(wlan1) entered forwarding state
[   16.442616] IPv6: ADDRCONF(NETDEV_CHANGE): wlan1: link becomes ready
[   16.758936] libphy: mdio@ffe24000:00 - Link is Up - 1000/Full
[   16.780540] br-lan: port 1(eth0.1) entered forwarding state
[   16.828539] br-wifi: port 1(eth0.3) entered forwarding state
[   17.079182] br-wifi: received packet on eth0.3 with own address as source address
[   17.672542] br-wifi: port 2(wlan0) entered forwarding state
[   18.076654] br-wifi: received packet on eth0.3 with own address as source address
[   18.432560] br-wifi: port 3(wlan1) entered forwarding state
[   19.076653] br-wifi: received packet on eth0.3 with own address as source address
[   20.203375] br-wifi: received packet on eth0.3 with own address as source address
[   21.200613] br-wifi: received packet on eth0.3 with own address as source address
[   22.200602] br-wifi: received packet on eth0.3 with own address as source address
[   23.327293] br-wifi: received packet on eth0.3 with own address as source address
[   24.324570] br-wifi: received packet on eth0.3 with own address as source address
[   25.324573] br-wifi: received packet on eth0.3 with own address as source address
[   26.450861] br-wifi: received packet on eth0.3 with own address as source address
[   27.448532] br-wifi: received packet on eth0.3 with own address as source address
[   28.448543] br-wifi: received packet on eth0.3 with own address as source address
[   29.574766] br-wifi: received packet on eth0.3 with own address as source address
[   30.572516] br-wifi: received packet on eth0.3 with own address as source address
[   31.572484] br-wifi: received packet on eth0.3 with own address as source address
[   32.699028] br-wifi: received packet on eth0.3 with own address as source address
[   33.696426] br-wifi: received packet on eth0.3 with own address as source address
[   34.696448] br-wifi: received packet on eth0.3 with own address as source address
[   35.822971] br-wifi: received packet on eth0.3 with own address as source address
[   36.820418] br-wifi: received packet on eth0.3 with own address as source address
[   37.820365] br-wifi: received packet on eth0.3 with own address as source address
[   38.946703] br-wifi: received packet on eth0.3 with own address as source address
[   39.944339] br-wifi: received packet on eth0.3 with own address as source address
[   40.944343] br-wifi: received packet on eth0.3 with own address as source address
[   42.070666] br-wifi: received packet on eth0.3 with own address as source address
[   43.068299] br-wifi: received packet on eth0.3 with own address as source address
[   44.068277] br-wifi: received packet on eth0.3 with own address as source address
[   45.194407] br-wifi: received packet on eth0.3 with own address as source address
[   46.192286] br-wifi: received packet on eth0.3 with own address as source address
[   47.192234] br-wifi: received packet on eth0.3 with own address as source address
[   48.318852] br-wifi: received packet on eth0.3 with own address as source address
[   49.316196] br-wifi: received packet on eth0.3 with own address as source address
[   50.316190] br-wifi: received packet on eth0.3 with own address as source address
[   50.508156] br-wifi: received packet on eth0.3 with own address as source address
[   51.442748] br-wifi: received packet on eth0.3 with own address as source address
[   52.440163] br-wifi: received packet on eth0.3 with own address as source address
[   53.440172] br-wifi: received packet on eth0.3 with own address as source address
[   54.567041] br-wifi: received packet on eth0.3 with own address as source address
[   55.564107] br-wifi: received packet on eth0.3 with own address as source address
[   56.564127] br-wifi: received packet on eth0.3 with own address as source address
[   57.690786] br-wifi: received packet on eth0.3 with own address as source address
[   58.688094] br-wifi: received packet on eth0.3 with own address as source address
[   59.688061] br-wifi: received packet on eth0.3 with own address as source address
[   60.814412] br-wifi: received packet on eth0.3 with own address as source address
[   61.812017] br-wifi: received packet on eth0.3 with own address as source address
[   62.812022] br-wifi: received packet on eth0.3 with own address as source address
[   63.938435] br-wifi: received packet on eth0.3 with own address as source address
[   64.936002] br-wifi: received packet on eth0.3 with own address as source address
[   65.935962] br-wifi: received packet on eth0.3 with own address as source address
[   67.062429] br-wifi: received packet on eth0.3 with own address as source address
[   68.059932] br-wifi: received packet on eth0.3 with own address as source address
[   69.059951] br-wifi: received packet on eth0.3 with own address as source address
[   70.186387] br-wifi: received packet on eth0.3 with own address as source address
[   71.183881] br-wifi: received packet on eth0.3 with own address as source address
[   72.183867] br-wifi: received packet on eth0.3 with own address as source address
[   73.310562] br-wifi: received packet on eth0.3 with own address as source address
[   74.307831] br-wifi: received packet on eth0.3 with own address as source address
[   75.307824] br-wifi: received packet on eth0.3 with own address as source address
[  175.946232] br-wifi: received packet on eth0.3 with own address as source address
[  301.384176] br-wifi: received packet on eth0.3 with own address as source address
[  426.822012] br-wifi: received packet on eth0.3 with own address as source address
[  552.259801] br-wifi: received packet on eth0.3 with own address as source address
[  677.697437] br-wifi: received packet on eth0.3 with own address as source address
[  803.135090] br-wifi: received packet on eth0.3 with own address as source address
[  928.572535] br-wifi: received packet on eth0.3 with own address as source address</code></pre></div><br /><p>Network configuration on Second Router.</p><br /><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config globals &#039;globals&#039;
    option ula_prefix &#039;####:####:####::/48&#039;

config interface &#039;lan&#039;
    option force_link &#039;1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ip6assign &#039;60&#039;
    option macaddr &#039;##:##:##:##:##:##&#039;
    option ipaddr &#039;192.168.1.2&#039;
    option gateway &#039;192.168.1.1&#039;
    option dns &#039;192.168.1.1&#039;
    option delegate &#039;0&#039;
    option _orig_ifname &#039;eth0.1 radio0.network1 wlan1&#039;
    option _orig_bridge &#039;true&#039;
    option ifname &#039;eth0.1&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option vid &#039;1&#039;
    option ports &#039;0t 1t 2 3 4 5&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;2&#039;
    option vid &#039;2&#039;
    option ports &#039;0t 1t&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;3&#039;
    option vid &#039;3&#039;
    option ports &#039;0t 1t&#039;

config interface &#039;wifi&#039;
    option _orig_ifname &#039;radio1.network2&#039;
    option _orig_bridge &#039;true&#039;
    option type &#039;bridge&#039;
    option ifname &#039;eth0.3&#039;
    option proto &#039;none&#039;
    option delegate &#039;0&#039;</code></pre></div><br /><p>Wireless Configuration on Second Router.</p><br /><div class="codebox"><pre><code>config wifi-device &#039;radio0&#039;
    option type &#039;mac80211&#039;
    option channel &#039;36&#039;
    option hwmode &#039;11a&#039;
    option path &#039;ffe09000.pcie/pci0000:00/0000:00:00.0/0000:01:00.0&#039;
    option htmode &#039;HT20&#039;

config wifi-iface
    option device &#039;radio0&#039;
    option mode &#039;ap&#039;
    option ssid &#039;OpenWrt&#039;
    option encryption &#039;none&#039;
    option network &#039;wifi&#039;

config wifi-device &#039;radio1&#039;
    option type &#039;mac80211&#039;
    option channel &#039;11&#039;
    option hwmode &#039;11g&#039;
    option path &#039;ffe0a000.pcie/pci0001:02/0001:02:00.0/0001:03:00.0&#039;
    option htmode &#039;HT20&#039;
    option txpower &#039;30&#039;
    option country &#039;GB&#039;

config wifi-iface
    option device &#039;radio1&#039;
    option mode &#039;ap&#039;
    option encryption &#039;none&#039;
    option network &#039;wifi&#039;
    option ssid &#039;OpenWrt&#039;</code></pre></div><br /><p>Wireless clients are able to connect to both wireless interfaces and receive an IP address, however, only the &#039;Main Router&#039; will reliably bridge traffic to VLAN3.</p><p>When wireless clients are connected to the second router, approximately 10 &#039;ping&#039; responses are received from 192.168.3.1, before all remaining communication continues to fails until the wireless connection is re-established.</p><p>Any of the remaining Ethernet interfaces can be assigned to VLAN3, allowing reliable &#039;ping&#039; responses to 192.168.3.1 and internet traffic.</p><p>While I believe this maybe a bug rather than a miss configuration, since initial ping responses are received, I welcome any suggestions to further identify the cause.</p><p>Thank you in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248665">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						1 Oct 2014, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>Are the two VLAN3 bridged? If yes, try to change the IP of one of them. If not, please try to check if there is IP conflict.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248675">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						1 Oct 2014, 17:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><p>Are the two VLAN3 bridged? If yes, try to change the IP of one of them. If not, please try to check if there is IP conflict.</p></blockquote></div><p>Thank you &#039;kh_tsang&#039; for your reply.</p><p>I&#039;m not sure what you&#039;re asking? Both routers and client interfaces have unique IP address.</p><br /><p><strong>Wired network</strong></p><p>- On the main router, the 192.168.3.1 managed interface called &#039;WiFi&#039; has been bridged to &#039;Eth0.3&#039; / VLAN 3.<br />- On the second router, the unmanaged interface called &#039;WiFi&#039; has been bridged to &#039;Eth0.3&#039; / VLAN 3.<br />- Both ends of the up-link, between the two routers are trunked / tagged, are passing frames for both VLAN 1 &amp; 3 only.<br />- From both switches / routers, wired clients on Ethernet ports mapped / untagged for VLAN 3, can reliably ping the &#039;WiFi &#039; interface / VLAN 3 (192.168.3.1) on the main router.</p><br /><p><strong>Wireless Network</strong></p><p>- The SSID / &#039;OpenWRT&#039; on both routers are bridged to their local &#039;Wifi&#039; interface on VLAN 3,<br />- Wireless users on the main router can reliably ping the VLAN 3 interface on the same router (192.168.3.1),<br />- Wireless users on the second router begin to ping the &#039;WiFi&#039; interface / VLAN 3 on the main router (192.168.3.1) with <strong>approximately 10 response until all communication ceases.</strong></p><br /><p>On the second router, what would cause the SSID / OpenWRT communication to cease after a short number of responses while the Ethernet remains unaffected?</p><br /><p>Thank you again.</p>											<p class="post-edited">(Last edited by <strong>rceccleston</strong> on 1 Oct 2014, 17:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248680">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						1 Oct 2014, 17:50					</div>
				</div>
				<div class="post-content content">
					<p>Two wifi station with the same SSID requires WDS. If disabled, there may be SSID conflict.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248733">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">golialive</div>
					<div class="post-datetime">
						2 Oct 2014, 01:23					</div>
				</div>
				<div class="post-content content">
					<p>Hey kh_tsang.</p><p>Actually, that depends on what you&#039;re calling &quot;SSID conflict&quot;. It&#039;s just up to the client which station it connects to, and the client most likely picks the station providing the more promising signal quality.<br />That just makes the SSID an ESSID. Easy as that.</p><p>Hey rceccleston.</p><p>You missed the network and wireless configuration of your first router. So there might be a chance there is something wrong in there. But as long as you didn&#039;t accidentally plug a loop on your first routers vlan trunk, there shold be no setup causing the behaviour you described.</p><p>So my guess would be there is something wrong with the stations identifying themselfs clearly and distinguishable which causes both stations to react on your single wifi clients data. Maybe both stations broadcast with the same wifi MAC addresse and/or BSSID? Please check that and make sure to have different MAC and BSSID values for both stations (but keep the SSID the same, of course).</p><p>Another idea is to just enable encryption on both sides. Your client can only handle one active encrypted session at a time, so the second stations just treats the other data as invalid and drops it.</p><p>If both stations respond to the same data sent by your client: Did you use the very same channel? You should use different ones. That&#039;s not the only thing to do. But although it might solve your problem as a single action, I would suggest you to do that anyway and as second step, ontop of activating encryption.</p><p>You see, everything I&#039;m talking about deals with &quot;allow your clients to distinguish&quot;.</p><p>I don&#039;t run RC3 currently, but some earlier trunk versions. I run three TP-Link 4900 and two TP-Link 1043. All 5 devices share a single SSID on the 2.4GHz band (diffent channels, of course) and the 4900s also use the very same SSID on the 5GHz band. So one could say I run 5 routers to span 8 different channels with the same SSID. Ah, and the same 5 devices span the same 8 channels for a guest wifi SSID. Basically it&#039;s what you do, but a little scaled out in terms of devices. Absolutely no problem. The oldest trunk version I run is nealry one year old, the youngest only three months. All of them play well.</p><p>Regards,<br />Stephan.</p><p>[edit]</p><p>Well, after thinking for one more second, my harware setup is slightly different. I run three 4900s, one 4300 and one 1043. So that&#039;s 4*5GHz instead of 3. Which makes 9 channels with the same two SSIDs each.</p>											<p class="post-edited">(Last edited by <strong>golialive</strong> on 2 Oct 2014, 01:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248749">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						2 Oct 2014, 03:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>golialive wrote:</cite><blockquote><p>Hey kh_tsang.</p><p>Actually, that depends on what you&#039;re calling &quot;SSID conflict&quot;. It&#039;s just up to the client which station it connects to, and the client most likely picks the station providing the more promising signal quality.<br />That just makes the SSID an ESSID. Easy as that.</p><p>Hey rceccleston.</p><p>You missed the network and wireless configuration of your first router. So there might be a chance there is something wrong in there. But as long as you didn&#039;t accidentally plug a loop on your first routers vlan trunk, there shold be no setup causing the behaviour you described.</p><p>So my guess would be there is something wrong with the stations identifying themselfs clearly and distinguishable which causes both stations to react on your single wifi clients data. Maybe both stations broadcast with the same wifi MAC addresse and/or BSSID? Please check that and make sure to have different MAC and BSSID values for both stations (but keep the SSID the same, of course).</p><p>Another idea is to just enable encryption on both sides. Your client can only handle one active encrypted session at a time, so the second stations just treats the other data as invalid and drops it.</p><p>If both stations respond to the same data sent by your client: Did you use the very same channel? You should use different ones. That&#039;s not the only thing to do. But although it might solve your problem as a single action, I would suggest you to do that anyway and as second step, ontop of activating encryption.</p><p>You see, everything I&#039;m talking about deals with &quot;allow your clients to distinguish&quot;.</p><p>I don&#039;t run RC3 currently, but some earlier trunk versions. I run three TP-Link 4900 and two TP-Link 1043. All 5 devices share a single SSID on the 2.4GHz band (diffent channels, of course) and the 4900s also use the very same SSID on the 5GHz band. So one could say I run 5 routers to span 8 different channels with the same SSID. Ah, and the same 5 devices span the same 8 channels for a guest wifi SSID. Basically it&#039;s what you do, but a little scaled out in terms of devices. Absolutely no problem. The oldest trunk version I run is nealry one year old, the youngest only three months. All of them play well.</p><p>Regards,<br />Stephan.</p><p>[edit]</p><p>Well, after thinking for one more second, my harware setup is slightly different. I run three 4900s, one 4300 and one 1043. So that&#039;s 4*5GHz instead of 3. Which makes 9 channels with the same two SSIDs each.</p></blockquote></div><p>Do you mean different routers uses the same MAC address? It should be hardware coded and the openwrt should be able to recognise the default MAC address which is used in the stock firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248752">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">golialive</div>
					<div class="post-datetime">
						2 Oct 2014, 04:24					</div>
				</div>
				<div class="post-content content">
					<p>Hey kh_tsang.</p><p>I agree partially. The MAC addresses aren&#039;t &quot;that hard&quot; but stored in the nvram of the device. And this very nvram can be written using a certain specific command. That&#039;s nothing OpenWRT does by its own, but there are ways do to that. That&#039;s imho the most hard place to store data that doesn&#039;t require individual soldering during production. One could use EPROM or EEPROM instead. But despite some nerds flashing OpenWRT on cheap SoHo routers there is second to no benefit in that but more expensive to build.</p><p>DD-wrt is known for messing with nvram, sometimes. So whenever using DD-wrt on a device, chances are that the content of the nvram isn&#039;t exactly how stock content should be.</p><p>I have one device where exactly that&#039;s the case. It&#039;s a netgear WNR-3500L. Every now and then (didn&#039;t spend much time on that, might go along with I factory reset) its MAC address is set to 00:00:00:00:00:00. Then I need to ssh to this box an set a proper MAC address. Gladly the correct one is pinned to the back side of the box, so it&#039;s not much of a problem.</p><p>I don&#039;t know if this really is realted to the fact that I used DD-wrt on this box. Or maybe to the fact that the WNR-3500L is broadcom where all my TP-Links are Atheros. Or to the fact that the Netgear can be set to &quot;TFTP&quot; mode by &quot;30-30-30&quot;, which I used quite a number of times. Or any combination. But it&#039;s a fact that like once a year when I use that box for some testing the required factory reset of it leaves it with 00:00:00:00:00:00.</p><p>And ontop of that: When starting up an inteface, I can decide which MAC address to use, no matter which address the hardware really has. As said in my last post: There is no network and wifi setup of the first router. Maybe there is something in place which flattens the MAC address.</p><p>Have a look at the network configuration of the first router. It clearly states that he overrules the default MAC address of the eth0.1 interface. Without knowing the corresponding of the other device, I think there is nothing wrong with assuming to find something similar in there.</p><p>As a bottom line: I&#039;m just guessing. And as I know about at leat one single device showing that kind of probem I&#039;m telling you about it.</p><p>Regards,<br />Stephan.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248754">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						2 Oct 2014, 04:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>golialive wrote:</cite><blockquote><p>Hey kh_tsang.</p><p>I agree partially. The MAC addresses aren&#039;t &quot;that hard&quot; but stored in the nvram of the device. And this very nvram can be written using a certain specific command. That&#039;s nothing OpenWRT does by its own, but there are ways do to that. That&#039;s imho the most hard place to store data that doesn&#039;t require individual soldering during production. One could use EPROM or EEPROM instead. But despite some nerds flashing OpenWRT on cheap SoHo routers there is second to no benefit in that but more expensive to build.</p><p>DD-wrt is known for messing with nvram, sometimes. So whenever using DD-wrt on a device, chances are that the content of the nvram isn&#039;t exactly how stock content should be.</p><p>I have one device where exactly that&#039;s the case. It&#039;s a netgear WNR-3500L. Every now and then (didn&#039;t spend much time on that, might go along with I factory reset) its MAC address is set to 00:00:00:00:00:00. Then I need to ssh to this box an set a proper MAC address. Gladly the correct one is pinned to the back side of the box, so it&#039;s not much of a problem.</p><p>I don&#039;t know if this really is realted to the fact that I used DD-wrt on this box. Or maybe to the fact that the WNR-3500L is broadcom where all my TP-Links are Atheros. Or to the fact that the Netgear can be set to &quot;TFTP&quot; mode by &quot;30-30-30&quot;, which I used quite a number of times. Or any combination. But it&#039;s a fact that like once a year when I use that box for some testing the required factory reset of it leaves it with 00:00:00:00:00:00.</p><p>And ontop of that: When starting up an inteface, I can decide which MAC address to use, no matter which address the hardware really has. As said in my last post: There is no network and wifi setup of the first router. Maybe there is something in place which flattens the MAC address.</p><p>Have a look at the network configuration of the first router. It clearly states that he overrules the default MAC address of the eth0.1 interface. Without knowing the corresponding of the other device, I think there is nothing wrong with assuming to find something similar in there.</p><p>As a bottom line: I&#039;m just guessing. And as I know about at leat one single device showing that kind of probem I&#039;m telling you about it.</p><p>Regards,<br />Stephan.</p></blockquote></div><p>So the MAC address need to be configured.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248821">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						2 Oct 2014, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Thank you all for your replies.</p><p>To confirm the configuration of the main router, with the second router was powered off, wireless clients can communicate with any wired or wireless hosts on VLAN 3.</p><p>With a unique channel / frequency (1,6 or 11) assigned to each access point, wireless clients can obtain an IP address from the DHCP server hosted by the main router, when associated to either access point.</p><p>For setup purposes, all encryption was removed and WiFi disabled on the main router, to ensure the wireless client was connecting with the second access point.</p><p>&#039;Hnyman&#039; has posted a script used to configure additional access point which I hope to compare.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=248219#p248219">https://forum.openwrt.org/viewtopic.php … 19#p248219</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248941">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						3 Oct 2014, 07:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rceccleston wrote:</cite><blockquote><p>Thank you all for your replies.</p><p>To confirm the configuration of the main router, with the second router was powered off, wireless clients can communicate with any wired or wireless hosts on VLAN 3.</p><p>With a unique channel / frequency (1,6 or 11) assigned to each access point, wireless clients can obtain an IP address from the DHCP server hosted by the main router, when associated to either access point.</p><p>For setup purposes, all encryption was removed and WiFi disabled on the main router, to ensure the wireless client was connecting with the second access point.</p><p>&#039;Hnyman&#039; has posted a script used to configure additional access point which I hope to compare.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=248219#p248219">https://forum.openwrt.org/viewtopic.php … 19#p248219</a></p></blockquote></div><p>That is making two stations connecting to the same network/VLAN. Then clients of the two stations can communicate with each other.</p>											<p class="post-edited">(Last edited by <strong>kh_tsang</strong> on 3 Oct 2014, 07:52)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p248958">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						3 Oct 2014, 10:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>kh_tsang wrote:</cite><blockquote><div class="quotebox"><cite>rceccleston wrote:</cite><blockquote><p>Thank you all for your replies.</p><p>To confirm the configuration of the main router, with the second router was powered off, wireless clients can communicate with any wired or wireless hosts on VLAN 3.</p><p>With a unique channel / frequency (1,6 or 11) assigned to each access point, wireless clients can obtain an IP address from the DHCP server hosted by the main router, when associated to either access point.</p><p>For setup purposes, all encryption was removed and WiFi disabled on the main router, to ensure the wireless client was connecting with the second access point.</p><p>&#039;Hnyman&#039; has posted a script used to configure additional access point which I hope to compare.</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=248219#p248219">https://forum.openwrt.org/viewtopic.php … 19#p248219</a></p></blockquote></div><p>That is making two stations connecting to the same network/VLAN. Then clients of the two stations can communicate with each other.</p></blockquote></div><p>Yes, that is correct, with the exception that wireless clients are bridged to VLAN 3 rather than VLAN 1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249109">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						4 Oct 2014, 12:51					</div>
				</div>
				<div class="post-content content">
					<p>When comparing the config between the two routers, I discovered a know bug, where both routers have assigned the same MAC address to their unique virtual interface&#039;s.</p><p>This would explain the error found in the event logs.</p><p><strong>br-wifi: received packet on eth0.3 with own address as source address</strong></p><br /><p>Main router</p><p><em>root@Router:/etc/config# ifconfig<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:BD:EC<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.1&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:bdec/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fd1e:6d5a:e75b::1/60 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:85705609 errors:0 dropped:209 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:96965872 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:7880079915 (7.3 GiB)&nbsp; TX bytes:130640761574 (121.6 GiB)</em></p><p><em>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.3.1&nbsp; Bcast:192.168.3.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:101/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:16970398 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:32034469 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1180233344 (1.0 GiB)&nbsp; TX bytes:43166259995 (40.2 GiB)</em></p><p><em>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:04:9F:EF:01:01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:101/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:216358553 errors:0 dropped:0 overruns:0 frame:31<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:200288122 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:2650448088 (2.4 GiB)&nbsp; TX bytes:799852657 (762.7 MiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Base address:0x4000</em></p><p><em>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:04:9F:EF:01:01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:86408877 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:96914369 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:7976447002 (7.4 GiB)&nbsp; TX bytes:130635806836 (121.6 GiB)</em></p><p><em>eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:BD:EF<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:bdef/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:129810464 errors:0 dropped:28 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:103262929 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:172861132423 (160.9 GiB)&nbsp; TX bytes:11089566503 (10.3 GiB)</em></p><p><em>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2030 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:110820 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:207727 (202.8 KiB)&nbsp; TX bytes:7247166 (6.9 MiB)</em></p><p><em>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:10754 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:10754 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:827736 (808.3 KiB)&nbsp; TX bytes:827736 (808.3 KiB)</em></p><p><em>pppoe-wan Link encap:Point-to-Point Protocol<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:###.###.###.###&nbsp; P-t-P:###.###.###.###&nbsp; Mask:255.255.255.255<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP POINTOPOINT RUNNING NOARP MULTICAST&nbsp; MTU:1492&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:63220389 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:50712670 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:3<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:83982529285 (78.2 GiB)&nbsp; TX bytes:4840941640 (4.5 GiB)</em></p><p><em>wlan0&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:BD:EE<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:bdee/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:795298 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:1776105 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:76142654 (72.6 MiB)&nbsp; TX bytes:2222425101 (2.0 GiB)</em></p><p><em>wlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:BD:ED<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:bded/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:16220992 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:30485567 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1348885054 (1.2 GiB)&nbsp; TX bytes:2947412285 (2.7 GiB)</em></p><br /><p>Second Router</p><p><em>root@OpenWrt:~# ifconfig<br />br-lan&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:C4:67<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.1.2&nbsp; Bcast:192.168.1.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fde3:8d43:a06d::1/60 Scope:Global<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:c467/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:1903 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2108 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:201768 (197.0 KiB)&nbsp; TX bytes:909650 (888.3 KiB)</em></p><p><em>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:101/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:7 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:7 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:622 (622.0 B)&nbsp; TX bytes:666 (666.0 B)</em></p><p><em>eth0&nbsp; &nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:04:9F:EF:01:01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:101/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2448 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2424 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:332419 (324.6 KiB)&nbsp; TX bytes:1011394 (987.6 KiB)<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Base address:0x4000</em></p><p><em>eth0.1&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr 00:04:9F:EF:01:01<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2396 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2117 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:254123 (248.1 KiB)&nbsp; TX bytes:910144 (888.8 KiB)</em></p><p><em>eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:C4:6A<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:c46a/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:258 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:87276 (85.2 KiB)</em></p><p><em>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:14 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:17 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:1104 (1.0 KiB)&nbsp; TX bytes:1430 (1.3 KiB)</em></p><p><em>lo&nbsp; &nbsp; &nbsp; &nbsp; Link encap:Local Loopback<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: ::1/128 Scope:Host<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP LOOPBACK RUNNING&nbsp; MTU:65536&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:2 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:2 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:96 (96.0 B)&nbsp; TX bytes:96 (96.0 B)</em></p><p><em>wlan1&nbsp; &nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr F8:1A:67:5A:C4:68<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::fa1a:67ff:fe5a:c468/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:25 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:2869 (2.8 KiB)</em></p><p><em>wlan1-1&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr FA:1A:67:5A:C4:68<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::f81a:67ff:fe5a:c468/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:12 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:1000<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:1478 (1.4 KiB)</em></p><br /><p>I&#039;m still looking for the solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249114">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						4 Oct 2014, 13:15					</div>
				</div>
				<div class="post-content content">
					<p>When overriding the MAC address via the network config file, only the bridge interface inherits the new address.</p><br /><p>Wireless Config</p><p><em>config interface &#039;wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;wlan1-1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;none&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br /><strong>&nbsp; &nbsp; &nbsp; &nbsp; option macaddr &#039;00:04:9F:EF:01:02&#039;</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.3&#039;</em></p><p><em>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:102/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:492 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:10 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:38585 (37.6 KiB)&nbsp; TX bytes:924 (924.0 B)</em></p><p><em>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:64 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:68 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4345 (4.2 KiB)&nbsp; TX bytes:6813 (6.6 KiB)</em></p><br /><p>Still work in progress.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249430">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">rceccleston</div>
					<div class="post-datetime">
						6 Oct 2014, 21:26					</div>
				</div>
				<div class="post-content content">
					<p>Until the the &#039;override MAC address&#039; bug is fixed, while not ideal, the following temporary fix allows multiple WDR4900 to act as wireless &#039;access points&#039; and co-exist on the same network.</p><br /><p><strong>**ERROR** - System logs</strong> - Multiple entries indicate packets received with the same source and destination MAC address from bridge virtual interface.</p><div class="codebox"><pre><code>br-wifi: received packet on eth0.3 with own address as source address</code></pre></div><br /><p><strong>**CAUSE** - Duplicate MAC Address</strong> - OpenWRT assigns <strong>00:04:9F:EF:01:01</strong> to the first virtual interface, conflicting the same MAC address across multiple devices.</p><p>00:04:9F = <a href="http://hwaddress.com/mac/00049F-000000.html">Freescale Semiconductor SOC</a></p><p>EF:01:01 = Unique &#039;virtual interface&#039; identifier</p><br /><p><strong>**RESOLUTION** - Override MAC Addresses</strong> - Specify unique MAC address in &#039;Interfaces\<em>interface</em>\Advanced Settings\<strong>Override MAC Address</strong>&#039; For example, &#039;<strong>&#039;00:04:9F:EF:01:02</strong>&#039;.</p><br /><p>Network configuration file</p><p>config interface &#039;wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;wlan1-1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;###.###.###.###&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>option macaddr &#039;00:04:9F:EF:01:02&#039;</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.#&#039;</p><br /><p><strong>**BUG** - Broken Bridge</strong> - The bridged Ethernet interface will not inherited the new MAC address from the &#039;br-wifi&#039; interface.</p><p>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.3.2&nbsp; Bcast:192.168.3.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:102/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:26 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:16 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3532 (3.4 KiB)&nbsp; TX bytes:1420 (1.3 KiB)</p><p>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:42 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:21 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4734 (4.6 KiB)&nbsp; TX bytes:1650 (1.6 KiB)</p><br /><p><strong>**FIX** - Repair Bridge</strong> - Re-Align / correct the MAC address of the &#039;virtual interface with the following command.</p><br /><p>ifconfig <strong>eth0.3</strong> hw ether <strong>00:04:9F:EF:01:02</strong></p><br /><p>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.3.2&nbsp; Bcast:192.168.3.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:102/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:26 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:16 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3532 (3.4 KiB)&nbsp; TX bytes:1420 (1.3 KiB)</p><p>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:42 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:21 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4734 (4.6 KiB)&nbsp; TX bytes:1650 (1.6 KiB)</p><p>Unfortunately, the command should be issued after rebooting the router, since this fix is lost upon reboot.</p><br /><p>Once the above has been completed, the virtual interface will forward / bridge traffic between the chosen SSID and VLAN, allowing multiple WDR4900&#039;s to co-exist on the same LAN as wireless &#039;access points&#039;.</p>											<p class="post-edited">(Last edited by <strong>rceccleston</strong> on 6 Oct 2014, 21:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p249472">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">kh_tsang</div>
					<div class="post-datetime">
						7 Oct 2014, 02:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rceccleston wrote:</cite><blockquote><p>Until the the &#039;override MAC address&#039; bug is fixed, while not ideal, the following temporary fix allows multiple WDR4900 to act as wireless &#039;access points&#039; and co-exist on the same network.</p><br /><p><strong>**ERROR** - System logs</strong> - Multiple entries indicate packets received with the same source and destination MAC address from bridge virtual interface.</p><div class="codebox"><pre><code>br-wifi: received packet on eth0.3 with own address as source address</code></pre></div><br /><p><strong>**CAUSE** - Duplicate MAC Address</strong> - OpenWRT assigns <strong>00:04:9F:EF:01:01</strong> to the first virtual interface, conflicting the same MAC address across multiple devices.</p><p>00:04:9F = <a href="http://hwaddress.com/mac/00049F-000000.html">Freescale Semiconductor SOC</a></p><p>EF:01:01 = Unique &#039;virtual interface&#039; identifier</p><br /><p><strong>**RESOLUTION** - Override MAC Addresses</strong> - Specify unique MAC address in &#039;Interfaces\<em>interface</em>\Advanced Settings\<strong>Override MAC Address</strong>&#039; For example, &#039;<strong>&#039;00:04:9F:EF:01:02</strong>&#039;.</p><br /><p>Network configuration file</p><p>config interface &#039;wifi&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_ifname &#039;wlan1-1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option _orig_bridge &#039;true&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ipaddr &#039;###.###.###.###&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; <strong>option macaddr &#039;00:04:9F:EF:01:02&#039;</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; option ifname &#039;eth0.#&#039;</p><br /><p><strong>**BUG** - Broken Bridge</strong> - The bridged Ethernet interface will not inherited the new MAC address from the &#039;br-wifi&#039; interface.</p><p>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.3.2&nbsp; Bcast:192.168.3.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:102/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:26 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:16 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3532 (3.4 KiB)&nbsp; TX bytes:1420 (1.3 KiB)</p><p>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:01</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:42 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:21 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4734 (4.6 KiB)&nbsp; TX bytes:1650 (1.6 KiB)</p><br /><p><strong>**FIX** - Repair Bridge</strong> - Re-Align / correct the MAC address of the &#039;virtual interface with the following command.</p><br /><p>ifconfig <strong>eth0.3</strong> hw ether <strong>00:04:9F:EF:01:02</strong></p><br /><p>br-wifi&nbsp; &nbsp;Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.3.2&nbsp; Bcast:192.168.3.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet6 addr: fe80::204:9fff:feef:102/64 Scope:Link<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:26 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:16 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:3532 (3.4 KiB)&nbsp; TX bytes:1420 (1.3 KiB)</p><p>eth0.3&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr <strong>00:04:9F:EF:01:02</strong><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:42 errors:0 dropped:0 overruns:0 frame:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TX packets:21 errors:0 dropped:0 overruns:0 carrier:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; collisions:0 txqueuelen:0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX bytes:4734 (4.6 KiB)&nbsp; TX bytes:1650 (1.6 KiB)</p><p>Unfortunately, the command should be issued after rebooting the router, since this fix is lost upon reboot.</p><br /><p>Once the above has been completed, the virtual interface will forward / bridge traffic between the chosen SSID and VLAN, allowing multiple WDR4900&#039;s to co-exist on the same LAN as wireless &#039;access points&#039;.</p></blockquote></div><p>You can use the startup command to fix the problem.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>