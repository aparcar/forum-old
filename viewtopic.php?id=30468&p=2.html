<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wzr-hp-ag300h progress</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 25 Aug 2016 and 5 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=30468&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=30468&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=30468&amp;p=4.html">4</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p138438">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">padams</div>
					<div class="post-datetime">
						4 Jul 2011, 21:53					</div>
				</div>
				<div class="post-content content">
					<p>For xabisoh struggling to upgrade...</p><p>If you have multiple network interfaces in your windows server, try</p><p>arp -a</p><p>at a command prompt.</p><p>It shows what arp entrys are assigned to which network interface.</p><p>My laptop has a wired, wireless and VPN interface.&nbsp; When I was using the arp - S command, it was assigning this rule to the first interface, which in my case was wrong.&nbsp; I disabled the wireless and VPN connections, ran the arp -S command again and then checked it using arp -a</p><p>NOTE - I had to use a switch in-between the Buffalo and my laptop to make it work.</p><p>regards</p><p>Paul Adams</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138440">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						4 Jul 2011, 22:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>padams wrote:</cite><blockquote><p>If you have multiple network interfaces in your windows server</p></blockquote></div><p>I only have one interface, and arp shows the assignment to the correct area.</p><div class="quotebox"><cite>ichilton wrote:</cite><blockquote><p>I had the same problem - tried everything and couldn&#039;t get it to flash until I tried putting a switch inline and it worked first time.</p></blockquote></div><p>I was able to borrow a switch today; unfortunately it did not resolve the timeout problem.</p><p>I have exhausted all the suggestions and info I have found. I am still within the return window, but I would like to take this action only as a last resort.</p><p>I am unsure how to proceed from here.</p>											<p class="post-edited">(Last edited by <strong>xabisoh</strong> on 4 Jul 2011, 22:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138452">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">padams</div>
					<div class="post-datetime">
						5 Jul 2011, 02:34					</div>
				</div>
				<div class="post-content content">
					<p>Sorry - don&#039;t know what else to suggest - other then is any kind of firewall turned off?&nbsp; Mine did not want to upgrade directly connected or via a switch.&nbsp; I was starting to think it was never going to work.&nbsp; I tried a different switch - worked on the first try.</p><br /><br /><p>I have a question for the gurus - how do I enable the 5Ghz radio?&nbsp; I&#039;ve got LuCi running, I cannot see the 5Ghz radio anywhere.&nbsp; Cannot see a reference to it in the /etc/config files either.</p><p>I&#039;m running version 27340 - so I believe it should be working.</p><p>Do I need to find the second radio&#039;s MAC address and enable it in the network or wireless config files?&nbsp; Can someone tell me how to trace the MAC asddress?</p><p>Thank you</p><p>Paul Adams</p><br /><p>Update - there is a sticker on the back of the router with the last 6 digits of the MAC address.&nbsp; The 5Ghz radio is a one number increment from the 2.4Ghz radio.</p><p>However - I fixed my problem by installing the lastest build of OpenWRT.&nbsp; The 5Ghz radio was detected right away and a config placed in the /etc/config/wireless file.</p>											<p class="post-edited">(Last edited by <strong>padams</strong> on 6 Jul 2011, 01:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138458">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">ichilton</div>
					<div class="post-datetime">
						5 Jul 2011, 10:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Mine is the WZR-HP-G300NH so I don&#039;t think I have that, but i&#039;d be interested to know in case I can get hold of a cheap AG300H at some point.</p><p>Thanks,</p><p>Ian</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138533">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">dimitris</div>
					<div class="post-datetime">
						6 Jul 2011, 06:46					</div>
				</div>
				<div class="post-content content">
					<p>@xabisoh:&nbsp; &quot;thinking aloud&quot; about other variables you could eliminate:</p><p>- Use another machine/OS (some Linux LiveCD/USB perhaps), in case something about the particular Ethernet driver in windows is delaying TFTP.<br />- Use another ethernet cable?&nbsp; (bad cable &quot;tolerated&quot; under normal operation with higher protocol retransmits, but not over UDP-based TFTP).</p><p>Both pretty long shots, I know, but I&#039;m pretty much out of ideas too.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138566">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						6 Jul 2011, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>Tried again last night with a different machine (a laptop running win 7) and a different switch I borrowed from work; still no luck. </p><p>I am starting to wonder if I am just doing something wrong in the process that is not immediately apparent.</p><p>What I believe are the correct steps, using a fresh host machine:<br /></p><div class="quotebox"><blockquote><p>*) Plug host machine into switch; switch into ag300h (neither using the uplink port)<br />*) let dchp renew<br />*) arp -d 192.168.11.1<br />*) arp -s 192.168.11.1 02-aa-bb-cc-dd-20&nbsp; (sometimes this fails with access denied). An alternative to force it is to use netsh interface ipv4 add neighbors &quot;Local Area Connection&quot; &quot;192.168.11.1&quot; &quot;02-aa-bb-cc-dd-20&quot;<br />*) Control Panel -&gt; Networking -&gt; Adapters; change ip to 192.168.11.2/255.255.255.0<br />*) unplug router from wall, then replug (I do not need to do a soft reboot do I?)<br />*) tftp -i 192.168.11.1 put &lt;file&gt;</p></blockquote></div><p>Am I missing anything?</p><p>Will try a live cd tonight.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138572">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">KingJL</div>
					<div class="post-datetime">
						6 Jul 2011, 18:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xabisoh wrote:</cite><blockquote><p>Tried again last night with a different machine (a laptop running win 7) and a different switch I borrowed from work; still no luck. </p><p>I am starting to wonder if I am just doing something wrong in the process that is not immediately apparent.</p><p>What I believe are the correct steps, using a fresh host machine:<br /></p><div class="quotebox"><blockquote><p>*) Plug host machine into switch; switch into ag300h (neither using the uplink port)<br />*) let dchp renew</p></blockquote></div></blockquote></div><p>WHAT??????? dhcp renew????????<br />The host machine needs to have the host ip set manually to 192.168.11.2.&nbsp; DO NOT USE DHCP!!&nbsp; Also make sure that on the router, you are plugged into the port right next to the wan port.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138573">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						6 Jul 2011, 18:24					</div>
				</div>
				<div class="post-content content">
					<p>Please see step 5; the first steps was to coerce arp to work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138575">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">KingJL</div>
					<div class="post-datetime">
						6 Jul 2011, 18:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xabisoh wrote:</cite><blockquote><p>Please see step 5; the first steps was to coerce arp to work.</p></blockquote></div><p>Make it step 1, before the arp commands.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138576">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						6 Jul 2011, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>well, regardless, I cannot fathom the order is my problem. at the end, the machine has a static ip and is routing to the correct mac address.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138580">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">dimitris</div>
					<div class="post-datetime">
						6 Jul 2011, 20:09					</div>
				</div>
				<div class="post-content content">
					<p>Not sure what the Windows ethernet driver/stack does, but on Linux if I change an interface from dhcp to static, probably because that involves bringing it down then back up, that flushes the ARP cache, <strong>including</strong> the static entries, for addresses on the network the interface was on.&nbsp; If Windows behaves the same way, you&#039;re probably losing the static ARP entry too.</p><p>So I&#039;d make two changes:</p><p>- Make setting the host to a static IP to be the first step.<br />- Start TFTP, <strong>then</strong> power on the ag300h.</p><p>Another thing:&nbsp; You implied that the borrowed switch has an uplink port.&nbsp; Is it in fact a router and, if so, what network is its LAN using?&nbsp; Even if it&#039;s 192.168.11.0/24 (the same as the ag300h&#039;s bootloader/TFTP state) and even serving DHCP that &quot;should&quot; be OK, but to be safe I&#039;d prefer it to be something else.</p><p>Finally:&nbsp; does the -i option make the Windows TFTP client work in binary mode?&nbsp; What is its default timeout?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138582">
				<div class="post-metadata">
					<div class="post-num">Post #37</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						6 Jul 2011, 20:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dimitris wrote:</cite><blockquote><p>that flushes the ARP cache</p></blockquote></div><p>Windows seems to keep the arp entries (they are listed with -a). With my paranoia, I have overwritten the arp entry to point to the ag300h&#039;s lan mac and ping the router as a quick test to make sure it is still reachable, then flip it back to the uboot mac. This all sounds ass-backwards, i know, but windows just loves tossing access denied errors out when attempting to overwrite a gateway address.</p><div class="quotebox"><blockquote><p>Start TFTP, <strong>then</strong> power on the ag300h</p></blockquote></div><p>Thanks for confirming when the transfer should begin.</p><div class="quotebox"><blockquote><p>You implied that the borrowed switch has an uplink port.</p></blockquote></div><p>This really is a basic switch; consider the implication as an error on my part.</p><div class="quotebox"><blockquote><p>does the -i option make the Windows TFTP client work in binary mode?&nbsp; What is its default timeout?</p></blockquote></div><p>Yeah, -i forces binary. The timeout seems to be about 1 minute or so. I do not believe there are timeout options with the built-in win client.</p><br /><br /><p>Will try using a linux cd tonight when i get off work.</p>											<p class="post-edited">(Last edited by <strong>xabisoh</strong> on 6 Jul 2011, 20:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138583">
				<div class="post-metadata">
					<div class="post-num">Post #38</div>
					<div class="post-author">KingJL</div>
					<div class="post-datetime">
						6 Jul 2011, 20:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xabisoh wrote:</cite><blockquote><p>With my paranoia, I have overwritten the arp entry to point to the ag300h&#039;s lan mac and ping the router as a quick test to make sure it is still reachable, then flip it back to the uboot mac.</p></blockquote></div><p>xabisoh:<br />I believe we are all trying to help.&nbsp; These Buffalo routers are the quirkiest that I have ever come across to tftp, especially from windows.&nbsp; For that reason, I use Fedora.&nbsp; &nbsp;That said, if you are trying to ping the router then switch back to the uboot mac, the you are probably way too late.&nbsp; The tftp window is 4 sec (tftp_wait in the uboot_env).&nbsp; The wzr-hp-ag300h router does not respond to pings until AFTER the tftp window (that is why some scripts that ping the router with 0 wait time until the command does not return an error does not work with the newer Buffalo routers).&nbsp; You have to be willing to try the different sequence even if it doesn&#039;t make any sense.&nbsp; Hell, Windows networking doesn&#039;t make any sense.&nbsp; Good luck!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138586">
				<div class="post-metadata">
					<div class="post-num">Post #39</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						6 Jul 2011, 21:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>KingJL wrote:</cite><blockquote><p>if you are trying to ping the router then switch back to the uboot mac, the you are probably way too late.</p></blockquote></div><p>When i mentioned about doing the ping, that is done before trying to reboot &amp; push, just to verify I did not mess something up somewhere.</p><p>I think I may be a little too verbose in my explanations <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><blockquote><p>I believe we are all trying to help.</p></blockquote></div><p>I really do appreciate the suggestions being made, thanks for the effort!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138596">
				<div class="post-metadata">
					<div class="post-num">Post #40</div>
					<div class="post-author">padams</div>
					<div class="post-datetime">
						6 Jul 2011, 23:17					</div>
				</div>
				<div class="post-content content">
					<p>I created idiot notes for myself - step by step</p><br /><p>The following steps are used to load an OpenWrt firmware using TFTP on a Buffalo WZR-HP-AG300H from a Windows PC:</p><p>1) Connect computer to the router via switch, not directly.&nbsp; The network port times out on Windows otherwise.<br />2) Set computer network card to an IP address in the 192.168.11.x range (e.g. 192.168.11.2).&nbsp; The router will be 192.168.11.1.&nbsp; Set gateway and DNS to 192.168.11.1<br />3) Add static arp entry for router from a command prompt using = arp -s 192.168.11.1 02-aa-bb-cc-dd-20<br />NOTE: check using arp -a what rules are bound to what network interfaces.&nbsp; You may need to disable the other network interfaces for now.<br />4) Start TFTP transfer attempt from a command prompt using = tftp -i 192.168.11.1 PUT openwrt-ar71xx-generic-wzr-hp-g300nh-squashfs-tftp.bin<br />5) Quickly power on router<br />6) TFTP transfer completes - it&#039;s fast, like 20 seconds.</p><p>If it fails, unplug power from router, run the command again on the windows machine, plug the router in again.&nbsp; I do this 3 or so times and eventually it works.</p><p>7) Delete static arp entry for router from command prompt using = arp -d 192.168.11.1<br />10) After the TFTP upload completes, the router will reboot and you should be able to telnet in, change the password, and continue with configuration. Since the router will be running OpenWrt, the IP address for the router will be 192.168.1.1, so don&#039;t forget to set the computer&#039;s IP address to 192.168.1.xx or re-enable DHCP.</p><p>Note: If TFTP timeouts are received, ensure that all firewalls are disabled AND make sure you are connected to the router via a switch.&nbsp; If it still times out, try another switch.</p><p>Paul</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138605">
				<div class="post-metadata">
					<div class="post-num">Post #41</div>
					<div class="post-author">salvo2002</div>
					<div class="post-datetime">
						7 Jul 2011, 03:06					</div>
				</div>
				<div class="post-content content">
					<p>@xabisoh: hopefully this might help. </p><p>I am running win7 and I had the same problems getting a firmware flashed with tftp. I found that &#039;arp&#039; wasn&#039;t the command to use on win7 (even tho it still exists). Instead I used &#039;netsh&#039; to clear the arp cache and setup the static route. From what I can tell win 2008 server should use netsh.</p><p>I posted this over at the dd-wrt forum, but I guess it would be more appropriate over here. </p><p>setup was [win7 box]---cat5e---[netgear WGR614 10/100]---cat5e---[wzr-hp-ag300h]<br />The netgear WGR614 was used to keep an active network connection to the win7 box and to force 100Mbps connection. The cat5e was plugged into the LAN port 4 (port closest to the WAN port) on the wzr-hp-ag300h. <br />Note: I tried this using a gigabit switch instead of the WGR614 connection and it failed to work. Anyone have success using 1Gbps connection?</p><p>I disabled all other network interfaces, turned off windows firewall, and set my nic to a static IP of 192.168.11.2</p><p>Opened cmd as an administrator (right click, select &quot;run as administrator&quot;) and flushed the arp cache using<br /></p><div class="codebox"><pre><code>netsh interface ipv4 delete arpcache</code></pre></div><p>You will need to replace &quot;Local Area Connection&quot; in the next step with whatever you named your network connection. You can obtain this by running </p><div class="codebox"><pre><code>netsh interface show interface</code></pre></div><p>made the win7 box static ip of 192.168.11.2 and added a static route using </p><div class="codebox"><pre><code>netsh interface ipv4 add neighbors &quot;Local Area Connection&quot; &quot;192.168.11.1&quot; &quot;02-aa-bb-cc-dd-20&quot;</code></pre></div><p>You have to use 02-aa-bb-cc-dd-20 for the MAC address since this is what the tftpd listens on when it boots up. This MAC address only applies to the wzr-hp-ag300h as KingJL had mentioned in an earlier post. </p><p>setup the tftp command<br /></p><div class="codebox"><pre><code>tftp -i 192.168.11.1 PUT openwrt-ar71xx-wzr-hp-ag300h-squashfs-tftp.bin</code></pre></div><p>unplugged the router, waited 30sec, plugged it back in and executed the tftp command. once the link came active on the netgear switch tftp started its transfer, and resulted in<br /></p><div class="codebox"><pre><code>Transfer successful: 2752544 bytes in 3 second(s), 917514 bytes/s</code></pre></div><p>red diag light started blinking faster then went out. flushed the arp cache, changed the win7 box to 192.168.1.2 static ip, and opened a Telnet session to 192.168.1.1. Success! busybox popped up.</p>											<p class="post-edited">(Last edited by <strong>salvo2002</strong> on 8 Jul 2011, 23:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138610">
				<div class="post-metadata">
					<div class="post-num">Post #42</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						7 Jul 2011, 04:17					</div>
				</div>
				<div class="post-content content">
					<p>Just wanted to chime in and say that using a linux live cd worked for me. Thank you everyone for the suggestions!</p><p>My steps:<br />* Download the latest desktop distro of ubuntu<br />* Download pendrivelinux usb installer<br />* install the distro on the thumb drive making sure to use the persistence feature<br />* boot into ubuntu<br />* open the software library thing and search on tftp and install it<br />* open a new terminal window<br />* sudo passwd root -&gt; set new pwd<br />* su -&gt; pwd<br />* ifconfig eth0:1 192.168.11.2<br />* ping 192.168.11.1 &lt;- see if reachable<br />* arp -s 192.168.11.1 02:aa:bb:cc:dd:20<br />* unplug router<br />* tftp -m binary 192.168.11.1 -c put &lt;file&gt;<br />* plug in router<br />* if you see the diag light rapidly flashing after a few seconds you are in business</p><p>thanks all</p>											<p class="post-edited">(Last edited by <strong>xabisoh</strong> on 7 Jul 2011, 04:18)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138611">
				<div class="post-metadata">
					<div class="post-num">Post #43</div>
					<div class="post-author">salvo2002</div>
					<div class="post-datetime">
						7 Jul 2011, 04:30					</div>
				</div>
				<div class="post-content content">
					<p>nice! what was your physical connection setup? did you use 1Gbps?</p><p>I have ubuntu installed on my server and would be much easier to use to flash the router if you were able to use 1Gbps connection. Location wise, my win7 box is not near my router and I am running gigabit everywhere. I wouldn&#039;t have to disconnect anything, as I had to above. Although I guess it would be possible to throw my nic in 100Mbps mode.</p>											<p class="post-edited">(Last edited by <strong>salvo2002</strong> on 7 Jul 2011, 04:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p138615">
				<div class="post-metadata">
					<div class="post-num">Post #44</div>
					<div class="post-author">xabisoh</div>
					<div class="post-datetime">
						7 Jul 2011, 05:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>salvo2002 wrote:</cite><blockquote><p>did you use 1Gbps?</p></blockquote></div><p>The switch is rather old and only goes up to 100 <img src="https://forum.openwrt.org/img/smilies/hmm.png" width="15" height="15" alt="hmm" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139255">
				<div class="post-metadata">
					<div class="post-num">Post #45</div>
					<div class="post-author">catcatz</div>
					<div class="post-datetime">
						16 Jul 2011, 17:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xabisoh wrote:</cite><blockquote><p>Just wanted to chime in and say that using a linux live cd worked for me. Thank you everyone for the suggestions!</p><p>My steps:<br />* Download the latest desktop distro of ubuntu<br />* Download pendrivelinux usb installer<br />* install the distro on the thumb drive making sure to use the persistence feature<br />* boot into ubuntu<br />* open the software library thing and search on tftp and install it<br />* open a new terminal window<br />* sudo passwd root -&gt; set new pwd<br />* su -&gt; pwd<br />* ifconfig eth0:1 192.168.11.2<br />* ping 192.168.11.1 &lt;- see if reachable<br />* arp -s 192.168.11.1 02:aa:bb:cc:dd:20<br />* unplug router<br />* tftp -m binary 192.168.11.1 -c put &lt;file&gt;<br />* plug in router<br />* if you see the diag light rapidly flashing after a few seconds you are in business</p><p>thanks all</p></blockquote></div><p>I&#039;m using an Ubuntu 11.04 to install open-wrt firmware to wzr-hp-ag300h when I ran this command</p><p>- tftp -m binary 192.168.11.1 -c put openwrt-ar71xx-generic-wzr-hp-ag300h-squashfs-tftp.bin</p><p>it shown &quot;usage: tftp host-name [port]&quot;</p><p>The command can&#039;t be ran sucessfully. Does my ubuntu has issue? What ubuntu did you use?</p><p>Thank you very much!</p>											<p class="post-edited">(Last edited by <strong>catcatz</strong> on 16 Jul 2011, 18:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139314">
				<div class="post-metadata">
					<div class="post-num">Post #46</div>
					<div class="post-author">vadim</div>
					<div class="post-datetime">
						17 Jul 2011, 21:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>catcatz wrote:</cite><blockquote><p>it shown &quot;usage: tftp host-name [port]&quot;</p><p>The command can&#039;t be ran sucessfully. Does my ubuntu has issue? What ubuntu did you use?</p><p>Thank you very much!</p></blockquote></div><p>Uninstall package tftp and install tftp-hpa, tftp from package tftp is too basic and doesn&#039;t support extra command line arguments.</p><p>sudo apt-get remove tftp<br />sudo apt-get install tftp-hpa</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139315">
				<div class="post-metadata">
					<div class="post-num">Post #47</div>
					<div class="post-author">vadim</div>
					<div class="post-datetime">
						17 Jul 2011, 21:22					</div>
				</div>
				<div class="post-content content">
					<p>If you&#039;re having problems recognizing your usb device please see <a href="https://dev.openwrt.org/ticket/9684">https://dev.openwrt.org/ticket/9684</a><br />I am experiencing exactly this behavior unfortunately, looks like usb hardware on this router is not supported by openwrt.</p>											<p class="post-edited">(Last edited by <strong>vadim</strong> on 17 Jul 2011, 21:22)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139471">
				<div class="post-metadata">
					<div class="post-num">Post #48</div>
					<div class="post-author">catcatz</div>
					<div class="post-datetime">
						20 Jul 2011, 11:45					</div>
				</div>
				<div class="post-content content">
					<p>@Vadim</p><p>Thank you for your advise.</p><p>Finally, I successfully flash the openwrt to the router.<br />I found that it runs much faster and stable than dd-wrt.</p><p>Now, I interest to make a custom build openwrt firmware<br />I checked the wiki page, downloaded the trunk version source code and followed the steps to compile the firmware.<br />Finally, I compiled many packages and firmwares in the bin directory. I believe that I should use <br />openwrt-ar71xx-generic-wzr-hp-ag300h-squashfs-sysupgrade.bin to upgrade the router. <br />However, I don&#039;t have enough to confidence to do it.</p><p>I want to know that if this custom build firmware has problem, can I use the arp + tftp method to debrick the router? <br />The first thing is when I select the compile option in the menuconfig, I found many options. What options are important that will not make the router brick?</p><p>Thank you very much!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139518">
				<div class="post-metadata">
					<div class="post-num">Post #49</div>
					<div class="post-author">chmcwill</div>
					<div class="post-datetime">
						20 Jul 2011, 23:22					</div>
				</div>
				<div class="post-content content">
					<p>I have found that the newer Buffalo routers are very sensitive to the TFTP process and ended up using Ubuntu 10.10 within VirtualBox to do any of the TFTP flashing. There are instructions online for this and I have recently flashed OpenWRT onto 4 WZR-HP-G300NH&#039;s (Backfire 10.03.1-RC5) and 2 WZR-HP-AG300H&#039;s (Trunk) without any issues. </p><p>Backfire: <a href="http://downloads.openwrt.org/backfire/10.03.1-rc5/ar71xx/openwrt-ar71xx-wzr-hp-g300nh-squashfs-tftp.bin">http://downloads.openwrt.org/backfire/1 … s-tftp.bin</a><br />Trunk: <a href="http://downloads.openwrt.org/snapshots/trunk/ar71xx/openwrt-ar71xx-generic-wzr-hp-ag300h-squashfs-tftp.bin">http://downloads.openwrt.org/snapshots/ … s-tftp.bin</a></p><p>Here are the steps which I have used:</p><p>1. boot with ubunto live cd,<br />2. sudo apt-get update<br />3. sudo apt-get install tftp-hpa</p><p>4. sudo /etc/init.d/networking stop<br />5. sudo ifconfig eth0 192.168.11.2<br />6. sudo ifconfig eth0 netmask 255.255.255.0 </p><p>7. sudo arp -s 192.168.11.1 [MAC Address without :&#039;s, use 02AABBCCDD20 for the WZR-HP-AG300H]</p><p>8. tftp 192.168.11.1<br />9. tftp&gt;binary<br />10. tftp&gt;rexmt 1<br />11. tftp&gt;timeout 60<br />12. tftp&gt;connect 192.168.11.1<br />13. tftp&gt;put openwrt-10.03.1-rc5-ar71xx-wzr-hp-g300nh-squashfs-tftp.bin</p><p>14. connect your router and power on (as quickly as possible)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139519">
				<div class="post-metadata">
					<div class="post-num">Post #50</div>
					<div class="post-author">chmcwill</div>
					<div class="post-datetime">
						20 Jul 2011, 23:23					</div>
				</div>
				<div class="post-content content">
					<p>Using the Backfire 10.03.1-RC5 I had no issues using LuCI out of the box, but with the Trunk editions, LuCI and SSH are NOT enabled out of the box. You will need to connect the router&#039;s WAN port to the internet and then do the following using a telnet session (or if you have already set the password using PASSWD on a telnet session, you will have to use SSH as telnet will be disabled).</p><p>LuCI installation Do:</p><p>1) opkg update</p><p> then for LuCI without HTTPS support </p><p>2) opkg install luci </p><p>and for LuCI with HTTPS support </p><p>3) opkg install luci-ssl</p><p>then continue with </p><p>4) /etc/init.d/uhttpd enable<br />5) /etc/init.d/uhttpd start<br />6) netstat -a<br />7) iptables -I INPUT -j ACCEPT -i eth0.1 -p tcp --dport 80<br />8) iptables -I INPUT -j ACCEPT -i eth0.1 -p tcp --dport 443 </p><p>You should now be able to connect with a webbrowser.</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 51 to 50 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 2 of 4</div><nav><ul><li><a href="viewtopic.php%3Fid=30468&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li><li><a href="viewtopic.php%3Fid=30468&amp;p=3.html">3</a></li><li><a href="viewtopic.php%3Fid=30468&amp;p=4.html">4</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>