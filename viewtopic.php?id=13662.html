<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> GW2348-4 freezing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p60070">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">dandragonrage</div>
					<div class="post-datetime">
						6 Dec 2007, 20:34					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys, I&#039;m new here. I recently got a Gateworks GW2348-4 running Kamikaze 7.09 ixp4xx squashfs. I&#039;ve got an AR5005 card in it and everything generally works pretty well. But once every 1 to 3 days it just seems to freeze. Drops all connections and won&#039;t allow any new ones, not HTTP, not SSH, not anything. Needs to be power cycled. This happens seemingly randomly - not when the CPU is loaded down or when I have a lot of open connections, just any time.&nbsp; The network lights on it still flash.</p><p>I was reading some other threads and one of them gave me the idea of seeing if I can ping it from the WAN interface when this happens, but I&#039;ll have to wait for it to happen. The thing&#039;s got a serial port but I have to unplug it and move it near my computer to use that so it&#039;s working then.</p><br /><p>dmesg:</p><p>Linux version 2.6.21.6 (nbd@ds10) (gcc version 4.1.2) #2 Sun Sep 30 20:44:34 CES&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; T 2007<br />CPU: XScale-IXP42x Family [690541c1] revision 1 (ARMv5TE), cr=000039ff<br />Machine: Gateworks Avila Network Platform<br />Memory policy: ECC disabled, Data cache writeback<br />On node 0 totalpages: 16384<br />&nbsp; DMA zone: 128 pages used for memmap<br />&nbsp; DMA zone: 0 pages reserved<br />&nbsp; DMA zone: 16256 pages, LIFO batch:3<br />&nbsp; Normal zone: 0 pages used for memmap<br />CPU0: D VIVT undefined 5 cache<br />CPU0: I cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />CPU0: D cache: 32768 bytes, associativity 32, 32 byte lines, 32 sets<br />Built 1 zonelists.&nbsp; Total pages: 16256<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd cons&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ole=ttyS0,115200 init=/etc/preinit<br />PID hash table entries: 256 (order: 8, 1024 bytes)<br />Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)<br />Memory: 64MB = 64MB total<br />Memory: 62848KB available (1788K code, 167K data, 76K init)<br />Calibrating delay loop... 532.48 BogoMIPS (lpj=2662400)<br />Mount-cache hash table entries: 512<br />CPU: Testing write buffer coherency: ok<br />NET: Registered protocol family 16<br />IXP4xx: Using 16MiB expansion bus window size<br />PCI: IXP4xx is host<br />PCI: IXP4xx Using direct access for memory space<br />PCI: bus0: Fast back to back transfers enabled<br />dmabounce: registered device 0000:00:02.0 on pci bus<br />NET: Registered protocol family 2<br />Time: OSTS clocksource has been installed.<br />IP route cache hash table entries: 1024 (order: 0, 4096 bytes)<br />TCP established hash table entries: 2048 (order: 2, 16384 bytes)<br />TCP bind hash table entries: 2048 (order: 1, 8192 bytes)<br />TCP: Hash tables configured (established 2048 bind 2048)<br />TCP reno registered<br />NetWinder Floating Point Emulator V0.97 (double precision)<br />squashfs: version 3.0 (2006/03/15) Phillip Lougher<br />Registering mini_fo version $Id$<br />JFFS2 version 2.2. (NAND) (C) 2001-2006 Red Hat, Inc.<br />io scheduler noop registered<br />io scheduler deadline registered (default)<br />IXP4xx Watchdog Timer: heartbeat 60 sec<br />Serial: 8250/16550 driver $Revision: 1.90 $ 2 ports, IRQ sharing disabled<br />serial8250.0: ttyS0 at MMIO 0xc8000000 (irq = 15) is a XScale<br />serial8250.0: ttyS1 at MMIO 0xc8001000 (irq = 13) is a XScale<br />IXP4XX Q Manager 0.2.1 initialized.<br />IXP4XX NPE driver Version 0.3.0 initialized<br />ixp4xx_crypto 0.0.1 registered successfully<br />IXP4XX-Flash.0: Found 1 x16 devices at 0x0 in 16-bit bank<br /> Intel/Sharp Extended Query Table at 0x0031<br />Using buffer write method<br />cfi_cmdset_0001: Erase suspend on write enabled<br />erase region 0: offset=0x0,size=0x20000,blocks=128<br />Searching for RedBoot partition table in IXP4XX-Flash.0 at offset 0xfe0000<br />5 RedBoot partitions found on MTD device IXP4XX-Flash.0<br />Creating 5 MTD partitions on &quot;IXP4XX-Flash.0&quot;:<br />0x00000000-0x00080000 : &quot;RedBoot&quot;<br />npe: searching for firmware...<br />npe: found at 0x12104, unknown/NPE-A func: 03, rev: 5.8, size: 1074729484, id: 5&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 003c508<br />npe: found at 0x3fd1c, IXP465/NPE-A func: 81, rev: 2.0, size: 12848, id: 1081020&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />npe: found at 0x42f4c, IXP425/NPE-B func: 01, rev: 2.0, size: 12848, id: 0101020&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Image loaded to NPE-B Func:1, Rel: 2:0, Status: 82400000<br />npe: found at 0x4617c, IXP425/NPE-C func: 01, rev: 2.0, size: 12848, id: 0201020&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0<br />Image loaded to NPE-C Func:1, Rel: 2:0, Status: 80800000<br />0x00080000-0x00180000 : &quot;kernel&quot;<br />0x00180000-0x00fe0000 : &quot;rootfs&quot;<br />0x00280000-0x00fe0000 : &quot;rootfs_data&quot;<br />0x00fe0000-0x00fff000 : &quot;FIS directory&quot;<br />0x00fff000-0x01000000 : &quot;RedBoot config&quot;<br />i2c /dev entries driver<br />nf_conntrack version 0.5.0 (512 buckets, 4096 max)<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />TCP westwood registered<br />NET: Registered protocol family 1<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />XScale DSP coprocessor detected.<br />ixp4xx_mac driver 0.3.1: eth0 on NPE-B with PHY[0] initialized<br />ixp4xx_mac driver 0.3.1: eth1 on NPE-C with PHY[1] initialized<br />drivers/rtc/hctosys.c: unable to open rtc device (rtc0)<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing init memory: 76K<br />Warning: unable to open an initial console.<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />device eth0 entered promiscuous mode<br />eth0: link up, 100Mbps, full-duplex, lpa 0xCDE1<br />Link of eth0 is full-duplex<br />br-lan: port 1(eth0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0) entering forwarding state<br />eth1: link up, 100Mbps, full-duplex, lpa 0x41E1<br />Link of eth1 is full-duplex<br />PPP generic driver version 2.4.2<br />IPP2P v0.8.1_rc1 loading<br />IMQ starting with 2 devices...<br />IMQ driver loaded successfully.<br />&nbsp; &nbsp; &nbsp; &nbsp; Hooking IMQ before NAT on PREROUTING.<br />&nbsp; &nbsp; &nbsp; &nbsp; Hooking IMQ after NAT on POSTROUTING.<br />wlan: 0.8.4.2 (svn r2568)<br />ath_hal: module license &#039;Proprietary&#039; taints kernel.<br />ath_hal: 0.9.30.13 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF54&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 13, RF2133, REGOPS_FUNC)<br />ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (svn r2568)<br />ath_rate_minstrel: look around rate set to 10%<br />ath_rate_minstrel: EWMA rolloff level set to 75%<br />ath_rate_minstrel: max segment size in the mrr set to 6000 us<br />wlan: mac acl policy registered<br />ath_pci: 0.9.4.5 (svn r2568)<br />PCI: enabling device 0000:00:02.0 (0340 -&gt; 0342)<br />ath_pci: switching rfkill capability off<br />ath_pci: switching per-packet transmit power control off<br />wifi0: 11b rates: 1Mbps 2Mbps 5.5Mbps 11Mbps<br />wifi0: 11g rates: 1Mbps 2Mbps 5.5Mbps 11Mbps 6Mbps 9Mbps 12Mbps 18Mbps 24Mbps 36&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Mbps 48Mbps 54Mbps<br />wifi0: turboG rates: 6Mbps 12Mbps 18Mbps 24Mbps 36Mbps 48Mbps 54Mbps<br />wifi0: H/W encryption support: WEP AES AES_CCM TKIP<br />wifi0: mac 7.9 phy 4.5 radio 5.6<br />wifi0: Use hw queue 1 for WME_AC_BE traffic<br />wifi0: Use hw queue 0 for WME_AC_BK traffic<br />wifi0: Use hw queue 2 for WME_AC_VI traffic<br />wifi0: Use hw queue 3 for WME_AC_VO traffic<br />wifi0: Use hw queue 8 for CAB traffic<br />wifi0: Use hw queue 9 for beacons<br />wifi0: Atheros 5212: mem=0x48000000, irq=27<br />device ath0 entered promiscuous mode<br />br-lan: port 2(ath0) entering learning state<br />br-lan: topology change detected, propagating<br />br-lan: port 2(ath0) entering forwarding state</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60111">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">dandragonrage</div>
					<div class="post-datetime">
						7 Dec 2007, 14:37					</div>
				</div>
				<div class="post-content content">
					<p>Hmm, looks like it could be a memory leak? I can sit here and watch the RAM usage just keep going up. Not sure what happens when it reaches 100% but I can only assume that&#039;s when it freezes....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60154">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">dandragonrage</div>
					<div class="post-datetime">
						8 Dec 2007, 19:34					</div>
				</div>
				<div class="post-content content">
					<p>Seems to be related to QoS. Not happening with that off....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60155">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">strasak</div>
					<div class="post-datetime">
						8 Dec 2007, 19:39					</div>
				</div>
				<div class="post-content content">
					<p>In my opinion, this - ath_pci: 0.9.4.5 (svn r2568) - is the troublemaker, use more recent version of madwifi and i bet it will be ok. There were pretty nasty bugs in madwifi for this platform, they are hopefully gone in trunk tho. I have put kamikaze 7.07 on my Compex WP188 - which is about the same as this board - and in usually died - panicked - after minutes, not hours or days with 4 minipci cards on. You could somehow prove this theory by using echo &quot;5&quot; &gt; /proc/sys/kernel/panic_on_oops . Then board should, if my theory is correct, reboot itself instead of awaiting powercycle</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60175">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">dandragonrage</div>
					<div class="post-datetime">
						9 Dec 2007, 08:28					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s most definitely QoS that was eating my memory. I&#039;ll try updating to trunk though.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p60213">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">dandragonrage</div>
					<div class="post-datetime">
						10 Dec 2007, 01:36					</div>
				</div>
				<div class="post-content content">
					<p>I tried to compile OpenWRT. I mostly succeeded except for the ethernet ports. I downloaded IPL_ixp400NpeLibrary-2_4.zip and put it in the dl folder and that kinda worked. But it wouldn&#039;t bring up the interfaces, just said NPE-B and such were off.</p><p>I&#039;ll try just compiling madwifi separately and installing that on top of 7.9 for now.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>