<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> OpenWRT Perl Environments</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p124221">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mazilo</div>
					<div class="post-datetime">
						30 Dec 2010, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>I have my local OpenWRT SVN development trunk resides in <strong>/opt/tmp/openwrt-svn-trunk</strong> directory. I configured my local OpenWRT using scripts/env to build several different platform OpenWRT firmware without a problem. For my Seagate <a href="http://www.seagate.com/www/en-us/products/network_storage/freeagent_dockstar">DockStar</a> device, I included perl package. After my Seagate <a href="http://www.seagate.com/www/en-us/products/network_storage/freeagent_dockstar">DockStar</a> device boots on OpenWRT firmware, I did a <em>perl -V</em> and it returns the following:<br /></p><div class="codebox"><pre><code>root@DockStar:/# perl -V
Summary of my perl5 (revision 5 version 10 subversion 0) configuration:
  Platform:
    osname=linux, osvers=2.6.22, archname=arm-linux-uclibc
    uname=&#039;linux maia 2.6.22 #1 wed jul 11 12:24:09 cest 2007 armv5tel unknown unknown gnulinux &#039;
    config_args=&#039;-der&#039;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=undef, usemultiplicity=undef
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#039;arm-openwrt-linux-uclibcgnueabi-gcc&#039;, ccflags =&#039;-Os -pipe -march=armv5te -mtune=marvell-f -funit-at-a-time -fhonour-copts -msoft-float -DUSE_CROSS_COMPILE -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/include&#039;,
    optimize=&#039;-O2&#039;,
    cppflags=&#039;-Os -pipe -march=armv5te -mtune=marvell-f -funit-at-a-time -fhonour-copts -msoft-float -DUSE_CROSS_COMPILE -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/usr/include -I/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/include&#039;
    ccversion=&#039;&#039;, gccversion=&#039;3.4.3&#039;, gccosandvers=&#039;&#039;
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=8
    ivtype=&#039;long&#039;, ivsize=4, nvtype=&#039;double&#039;, nvsize=8, Off_t=&#039;off_t&#039;, lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld=&#039;arm-openwrt-linux-uclibcgnueabi-gcc&#039;, ldflags =&#039;&#039;
    libpth=/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/lib /opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/lib
    libs=-lgdbm -ldb -lnsl -ldl -lm -lcrypt -lutil -lc
    perllibs=-lnsl -ldl -lm -lcrypt -lutil -lc
    libc=, so=so, useshrplib=false, libperl=libperl.a
    gnulibc_version=&#039;&#039;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#039;-Wl,-E&#039;
    cccdlflags=&#039;-fPIC&#039;, lddlflags=&#039;-shared -rdynamic -L/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/lib -L/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/lib -L/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/usr/lib -L/opt/tmp/openwrt-svn-trunk/staging_dir/toolchain-arm_v5te_gcc-4.3.3+cs_uClibc-0.9.31_eabi/lib&#039;


Characteristics of this binary (from libperl): 
  Compile-time options: PERL_DONT_CREATE_GVSV PERL_MALLOC_WRAP
                        USE_LARGE_FILES USE_PERLIO
  Built under linux
  Compiled at Nov 29 2010 13:50:23
  @INC:
    /usr/lib/perl5/5.10</code></pre></div><p>It appears to look good at a glance. However, a closer look at the above output from a <em>perl -V</em> indicates all the paths point to <em>/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi</em> and not the <em>/usr/lib/perl5/5.10</em> directory where the actual perl5 codes reside. If I execute the same perl compiled for my Seagate <a href="http://www.seagate.com/www/en-us/products/network_storage/freeagent_dockstar">DockStar</a> device (<em>/opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/bin/perl -V</em>) on my OpenSuSE Linux desktop computer, it returns errors as shown below:<br /></p><div class="codebox"><pre><code>[mazilo@Mi:/opt/tmp/openwrt-svn-trunk 152%] ~ /opt/tmp/openwrt-svn-trunk/staging_dir/target-arm_v5te_uClibc-0.9.31_eabi/usr/bin/perl -V
Can&#039;t locate Config.pm in @INC (@INC contains: /usr/local/lib/perl5/5.10.0/x86_64-linux /usr/local/lib/perl5/5.10.0 /usr/local/lib/perl5/site_perl/5.10.0/x86_64-linux /usr/local/lib/perl5/site_perl/5.10.0 .).
BEGIN failed--compilation aborted.</code></pre></div><p>Something doesn&#039;t sound right to me, but I just don&#039;t know how to fix this and hope OpenWRT developers will be able to fix this easily. Without this, I can&#039;t compile the mod_perl of FreeSWITCH package.</p><p>FYI, if I execute <em>perl -V</em> on my OpenSuSE Linux desktop computer, it returns the following with the correct path.<br /></p><div class="codebox"><pre><code>[mazilo@Mi:/opt/tmp/openwrt-svn-trunk 149%] ~ perl -V
Summary of my perl5 (revision 5 version 12 subversion 1) configuration:
   
  Platform:
    osname=linux, osvers=2.6.32, archname=x86_64-linux-thread-multi
    uname=&#039;linux build30 2.6.32 #1 smp 2010-01-06 16:07:25 +0100 x86_64 x86_64 x86_64 gnulinux &#039;
    config_args=&#039;-ds -e -Dprefix=/usr -Dvendorprefix=/usr -Dinstallusrbinperl -Dusethreads -Di_db -Di_dbm -Di_ndbm -Di_gdbm -Duseshrplib=true -Doptimize=-fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -Wall -pipe -Accflags=-DPERL_USE_SAFE_PUTENV&#039;
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=define, use64bitall=define, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc=&#039;cc&#039;, ccflags =&#039;-D_REENTRANT -D_GNU_SOURCE -DPERL_USE_SAFE_PUTENV -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64&#039;,
    optimize=&#039;-fmessage-length=0 -O2 -Wall -D_FORTIFY_SOURCE=2 -fstack-protector -funwind-tables -fasynchronous-unwind-tables -g -Wall -pipe&#039;,
    cppflags=&#039;-D_REENTRANT -D_GNU_SOURCE -DPERL_USE_SAFE_PUTENV -DDEBUGGING -fno-strict-aliasing -pipe -fstack-protector&#039;
    ccversion=&#039;&#039;, gccversion=&#039;4.5.0 20100604 [gcc-4_5-branch revision 160292]&#039;, gccosandvers=&#039;&#039;
    intsize=4, longsize=8, ptrsize=8, doublesize=8, byteorder=12345678
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=16
    ivtype=&#039;long&#039;, ivsize=8, nvtype=&#039;double&#039;, nvsize=8, Off_t=&#039;off_t&#039;, lseeksize=8
    alignbytes=8, prototype=define
  Linker and Libraries:
    ld=&#039;cc&#039;, ldflags =&#039; -L/usr/local/lib64 -fstack-protector&#039;
    libpth=/lib64 /usr/lib64 /usr/local/lib64
    libs=-lm -ldl -lcrypt -lpthread
    perllibs=-lm -ldl -lcrypt -lpthread
    libc=/lib64/libc-2.11.2.so, so=so, useshrplib=true, libperl=libperl.so
    gnulibc_version=&#039;2.11.2&#039;
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags=&#039;-Wl,-E -Wl,-rpath,/usr/lib/perl5/5.12.1/x86_64-linux-thread-multi/CORE&#039;
    cccdlflags=&#039;-fPIC&#039;, lddlflags=&#039;-shared -L/usr/local/lib64 -fstack-protector&#039;


Characteristics of this binary (from libperl): 
  Compile-time options: DEBUGGING MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP
                        PERL_TRACK_MEMPOOL PERL_USE_SAFE_PUTENV
                        USE_64_BIT_ALL USE_64_BIT_INT USE_ITHREADS
                        USE_LARGE_FILES USE_PERLIO USE_PERL_ATOF
                        USE_REENTRANT_API
  Built under linux
  Compiled at Jul 30 2010 00:15:19
  @INC:
    /usr/lib/perl5/site_perl/5.12.1/x86_64-linux-thread-multi
    /usr/lib/perl5/site_perl/5.12.1
    /usr/lib/perl5/vendor_perl/5.12.1/x86_64-linux-thread-multi
    /usr/lib/perl5/vendor_perl/5.12.1
    /usr/lib/perl5/5.12.1/x86_64-linux-thread-multi
    /usr/lib/perl5/5.12.1</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p126768">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">r858r858</div>
					<div class="post-datetime">
						29 Jan 2011, 09:33					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys, </p><p>I have a problem setting the correct perl env in my Backfire 10.03.1-rc4 box. I installed all perl and modules from package but I get this:</p><p>root@Keszi:/mnt/router/curl# perl -V<br />Can&#039;t locate Config.pm in @INC (@INC contains: /usr/lib/perl5/5.10 .).<br />BEGIN failed--compilation aborted.</p><p>Could you please give me somebody any advice what is missing?</p><p>Thanks</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>