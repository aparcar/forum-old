<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TL-WDR3600 debricking - no Ethernet link (Arduino)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 7 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p208710">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">parstin</div>
					<div class="post-datetime">
						1 Aug 2013, 03:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi,<br />the first day I have my new WDR3600 I managed to brick it. Great job!</p><p>Now I didn&#039;t want to buy another cable I&#039;d only use once. Instead, I found this interesting information <a href="http://rami.cc/blog/debrick-your-router-using-arduino/">http://rami.cc/blog/debrick-your-router-using-arduino/</a> . And by chance, I have that Arduino board.<br />After some long time, I managed to access the serial console of the router and was able to enter the tftp commands. Unfortunately the outcome is a timeout.</p><p>When looking to the LAN port, I see that there is no light and Windows says &quot;network cable unplugged&quot;. So most probably this is the reason it does not get any new firmware by TFTP. But why is there no Ethernet link, is it because of the Arduino board?</p><p>Has somebody experience with this model or can give me any advice what to do here?</p><p>(Sorry for not posting any log files as I did all the work on an offline notebook)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208723">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						1 Aug 2013, 07:15					</div>
				</div>
				<div class="post-content content">
					<p>try every port!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208735">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">parstin</div>
					<div class="post-datetime">
						1 Aug 2013, 10:49					</div>
				</div>
				<div class="post-content content">
					<p>Tried every port of the system available, from WAN to the 4 LAN ports..</p><p>There are a lot of LEDs blinking and shining, so power is available, of course. <br />I do not need to feed the router itself with power, right? Only the one coming from the Arduino board?</p>											<p class="post-edited">(Last edited by <strong>parstin</strong> on 1 Aug 2013, 10:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208738">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						1 Aug 2013, 11:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>parstin wrote:</cite><blockquote><p>I found this interesting information <a href="http://rami.cc/blog/debrick-your-router-using-arduino/">http://rami.cc/blog/debrick-your-router-using-arduino/</a> . And by chance, I have that Arduino board.</p></blockquote></div><p>OMG! Again, DO NOT CONNECT EXTERNAL POWER SUPPLY TO VCC PIN IN ROUTER! It could brick your router... You shouldn&#039;t never power the router using only the 3,3 V line with pin from UART port! This pin is an output and can be used to power external hardware like UART adapters etc. You can&#039;t do TFTP probably because one of the network elements aren&#039;t powered... 3,3 V supply line isn&#039;t the only one in this model!</p><p>Buy a USB-UART (working with 3,3 V voltage levels) adapter, connect only TX, RX, GND, plug in to USB port on your PC, power on the router (with his original socket adapter) and try again.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208743">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">parstin</div>
					<div class="post-datetime">
						1 Aug 2013, 12:48					</div>
				</div>
				<div class="post-content content">
					<p>I am a total beginner (not to say dummy) what this concerns so sorry for dumb questions - <br />If this VCC pin is an output then why were the LEDs blinking and boot menu was visible etc?</p><p>Can it be an usual USB to RS232 adapter? (as written in <a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4300)">http://wiki.openwrt.org/toh/tp-link/tl-wdr4300)</a>&nbsp; <br />I tried that to connect RX, TX and GND only to the Router with USB-RS232 cable, and original power source of router, but am getting only chinese letters out of my putty. (tried all speeds 115200, 9600, 19200..) Or am I using the wrong cable here?</p><p>Or do I need something like that one <a href="http://www.conrad.de/ce/de/product/197326/Conrad-Mini-USB-zu-UART-Konverter">http://www.conrad.de/ce/de/product/1973 … -Konverter</a></p>											<p class="post-edited">(Last edited by <strong>parstin</strong> on 1 Aug 2013, 12:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208744">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						1 Aug 2013, 12:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>parstin wrote:</cite><blockquote><p>I am a total beginner (not to say dummy) what this concerns so sorry for dumb questions - <br />If this VCC pin is an output then why were the LEDs blinking and boot menu was visible etc?</p></blockquote></div><p>Because they are also connected to this supply line. 3,3 V inside router is generated from its internal power supply section, so you are connecting your external power supply signal to the output of the internal voltage regulator or any other kind of supply. In most case it will work, but... use search on this forum and you&#039;ll find that it is not safe.</p><div class="quotebox"><cite>parstin wrote:</cite><blockquote><p>Can it be an usual USB to RS232 adapter? I tried that to connect RX, TX and GND only to the Router with USB-RS232 cable, and original power source of router, but am getting only chinese letters out of my putty. (tried all speeds 115200, 9600, 19200..) Or am I using the wrong cable here?</p></blockquote></div><p>Eh... NO! Why don&#039;t you first ask and then try? Inside router you have UART console with 3,3 V levels, not RS232 with +/-15 V levels!</p><p>Buy one of these:<br /><a href="http://www.ebay.com/sch/i.html?_odkw=usb+uart&amp;_osacat=0&amp;_from=R40&amp;_trksid=p2045573.m570.l1313.TR11.TRC1.A0.Xcp2102&amp;_nkw=cp2102&amp;_sacat=0">http://www.ebay.com/sch/i.html?_odkw=us … p;_sacat=0</a></p>											<p class="post-edited">(Last edited by <strong>pepe2k</strong> on 1 Aug 2013, 13:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208745">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						1 Aug 2013, 13:21					</div>
				</div>
				<div class="post-content content">
					<p>your arduino is fine as serial ttl adapter.. just do not use vcc pin!</p><br /><p>note: i wish you to not have already blown power supply section..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208750">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">parstin</div>
					<div class="post-datetime">
						1 Aug 2013, 13:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>your arduino is fine as serial ttl adapter.. just do not use vcc pin!</p><br /><p>note: i wish you to not have already blown power supply section..</p></blockquote></div><p>Duh.. That&#039;s the solution - using only grounding, RX and TX from Arduino while powering through original source of Router. I used the power from Arduino 3.3V instead... Luckily I did not connect both power sources at once so that&#039;s why the router is still working. The links was up now and OpenWRT firmware is uploaded succesfully.</p><p>Thanks a lot peppe/nebbia for your support!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208758">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						1 Aug 2013, 15:08					</div>
				</div>
				<div class="post-content content">
					<p><img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208891">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						3 Aug 2013, 22:11					</div>
				</div>
				<div class="post-content content">
					<p>Guys, I have the very same problem with my old TL-WR841ND. It was quite dumb but I flashed some VxWorks bootloader in order to get back to stock firmware and then I realized this VxWorks thing is not even for my router. As a result, all LEDs are now blinking and as pastin described when I plug in a cable - it says &quot;Cable unplugged&quot;. I was told that I need a JTAG cable and when I searched for it on eBay - the price of the cable was higher than the price of a new TL-WR841ND. So I basically gave up. But now I see that it is possible to repair it using this USB-to-UART cable. Tell me please if it is possible to repair it using such cable and how can I do that? I&#039;m a total hardware noob BTW!</p>											<p class="post-edited">(Last edited by <strong>Nyte</strong> on 3 Aug 2013, 23:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208894">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						3 Aug 2013, 22:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nyte wrote:</cite><blockquote><p>Tell me please if it is possible to repair it using such cable and how can I do that? I&#039;m a total hardware noob BTW!</p></blockquote></div><p>In your case? No. You need to program the FLASH chip using external programmer.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208896">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						3 Aug 2013, 22:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>Nyte wrote:</cite><blockquote><p>Tell me please if it is possible to repair it using such cable and how can I do that? I&#039;m a total hardware noob BTW!</p></blockquote></div><p>In your case? No. You need to program the FLASH chip using external programmer.</p></blockquote></div><p>Is it because I&#039;ve wiped the bootloader? <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /> It behaves in the same way as parstin&#039;s - all LEDs are blinking and &quot;Cable unplugged&quot;. I was wondering whether I can flash a new bootloader using this USB-UART cable.</p>											<p class="post-edited">(Last edited by <strong>Nyte</strong> on 3 Aug 2013, 22:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208902">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						3 Aug 2013, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>wn781nd?? are you sure??</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208906">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						3 Aug 2013, 23:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>wn781nd?? are you sure??</p></blockquote></div><p>Sorry, I have made a mistake. I was talking about TL-WR841ND actually</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208908">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						4 Aug 2013, 00:13					</div>
				</div>
				<div class="post-content content">
					<p>question, how did you flashed bootloader without serial console? mtd?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208935">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						4 Aug 2013, 12:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>question, how did you flashed bootloader without serial console? mtd?</p></blockquote></div><p>Yes, I used the mtd console. I am not sure whether it is a bootloader - that&#039;s what I&#039;ve been told. I flash this &#039;VxWorks&#039; thing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208937">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						4 Aug 2013, 12:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nyte wrote:</cite><blockquote><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>question, how did you flashed bootloader without serial console? mtd?</p></blockquote></div><p>Yes, I used the mtd console. I am not sure whether it is a bootloader - that&#039;s what I&#039;ve been told. I flash this &#039;VxWorks&#039; thing.</p></blockquote></div><p>So, you didn&#039;t overwrite bootloader, because in official OpenWrt images the bootloader partition is RO (read only). Could you provide a link to the &quot;VxWorks&quot; image and entire command you used?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208991">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						5 Aug 2013, 00:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>Nyte wrote:</cite><blockquote><div class="quotebox"><cite>nebbia88 wrote:</cite><blockquote><p>question, how did you flashed bootloader without serial console? mtd?</p></blockquote></div><p>Yes, I used the mtd console. I am not sure whether it is a bootloader - that&#039;s what I&#039;ve been told. I flash this &#039;VxWorks&#039; thing.</p></blockquote></div><p>So, you didn&#039;t overwrite bootloader, because in official OpenWrt images the bootloader partition is RO (read only). Could you provide a link to the &quot;VxWorks&quot; image and entire command you used?</p></blockquote></div><p>I was digging through my history but for some reason I couldn&#039;t find either the image or the URL of the tutorial that &quot;helped&quot; me to brick my router. I remember reading a tutorial about reverting back to stock firmware and they mentioned that it was best to first flash this VxWorks image and so I did blindly without realizing this image might not even be suitable for my router. I used the following command:</p><p>mtd -r write /tmp/VxWroks???.bin firmware</p><p>I&#039;ve tried some tutorials after the bricking to get into failsafe mode by pressing the QSS button with no luck.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p208992">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						5 Aug 2013, 00:26					</div>
				</div>
				<div class="post-content content">
					<p>You must try to do this adapter <a href="http://isl3893.wikidot.com/serial-port">http://isl3893.wikidot.com/serial-port</a>&nbsp; I did this one and it works perfectly every time of course if you have COM port on your PC or buy USB-TTL adapter if you have only USB ports on your PC.</p>											<p class="post-edited">(Last edited by <strong>Experimentator</strong> on 5 Aug 2013, 00:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209026">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">Nyte</div>
					<div class="post-datetime">
						5 Aug 2013, 16:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Experimentator wrote:</cite><blockquote><p>You must try to do this adapter <a href="http://isl3893.wikidot.com/serial-port">http://isl3893.wikidot.com/serial-port</a>&nbsp; I did this one and it works perfectly every time of course if you have COM port on your PC or buy USB-TTL adapter if you have only USB ports on your PC.</p></blockquote></div><p>Can I buy it from Ebay or something? As I said I&#039;m a total hardware noob and I really doubt that I will manage to build such thing. Related to this, can you recommend any good book on getting into electronics and hardware hacking as this is something that I would be interested into.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p209027">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">Experimentator</div>
					<div class="post-datetime">
						5 Aug 2013, 16:28					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Nyte wrote:</cite><blockquote><div class="quotebox"><cite>Experimentator wrote:</cite><blockquote><p>You must try to do this adapter <a href="http://isl3893.wikidot.com/serial-port">http://isl3893.wikidot.com/serial-port</a>&nbsp; I did this one and it works perfectly every time of course if you have COM port on your PC or buy USB-TTL adapter if you have only USB ports on your PC.</p></blockquote></div><p>Can I buy it from Ebay or something? As I said I&#039;m a total hardware noob and I really doubt that I will manage to build such thing. Related to this, can you recommend any good book on getting into electronics and hardware hacking as this is something that I would be interested into.</p></blockquote></div><p>Yes you can. Can you solder ? If you can not now it is time to start. Also look for electronics indication. When you understand this two things you are ready to build the adapter. </p><p>If you have questions just ask I will help you !</p><p>Best wishes !</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>