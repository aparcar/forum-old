<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> XFS crashes</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 1 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p16966">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mre2007</div>
					<div class="post-datetime">
						10 Dec 2005, 16:56					</div>
				</div>
				<div class="post-content content">
					<p>It looks like I&#039;m having problems mounting a XFS filesystem via USB. I get the following at boot. Notice, the XFS kernel module is loaded, but when I try to mount the filesystem, the command hangs and never returns. I have tried to mount the disk on another linux box with success.</p><p>Thanks,<br />-Marc</p><p>root@OpenWrt:~# dmesg<br />CPU revision is: 00029007<br />Primary instruction cache 8kB, physically tagged, 2-way, linesize 16 bytes.<br />Primary data cache 4kB, 2-way, linesize 16 bytes.<br />Linux version 2.4.30 (wbx@ux-2y02) (gcc version 3.4.4) #1 Wed Nov 23 22:35:53 CET 2005<br />Setting the PFC value as 0x15<br />Determined physical RAM map:<br /> memory: 02000000 @ 00000000 (usable)<br />On node 0 totalpages: 8192<br />zone(0): 8192 pages.<br />zone(1): 0 pages.<br />zone(2): 0 pages.<br />Kernel command line: root=/dev/mtdblock2 rootfstype=squashfs,jffs2 init=/etc/preinit noinitrd console=ttyS0,115200<br />CPU: BCM5365 rev 1 at 200 MHz<br />Using 100.000 MHz high precision timer.<br />Calibrating delay loop... 199.47 BogoMIPS<br />Memory: 30504k/32768k available (1395k kernel code, 2264k reserved, 100k data, 80k init, 0k highmem)<br />Dentry cache hash table entries: 4096 (order: 3, 32768 bytes)<br />Inode cache hash table entries: 2048 (order: 2, 16384 bytes)<br />Mount cache hash table entries: 512 (order: 0, 4096 bytes)<br />Buffer cache hash table entries: 1024 (order: 0, 4096 bytes)<br />Page-cache hash table entries: 8192 (order: 3, 32768 bytes)<br />Checking for &#039;wait&#039; instruction...&nbsp; unavailable.<br />POSIX conformance testing by UNIFIX<br />PCI: Fixing up bus 0<br />PCI: Fixing up bridge<br />PCI: Setting latency timer of device 01:00.0 to 64<br />PCI: Fixing up bus 1<br />Linux NET4.0 for Linux 2.4<br />Based upon Swansea University Computer Society NET3.039<br />Initializing RT netlink socket<br />Starting kswapd<br />devfs: v1.12c (20020818) Richard Gooch (rgooch@atnf.csiro.au)<br />devfs: boot_options: 0x1<br />JFFS2 version 2.1. (C) 2001 Red Hat, Inc., designed by Axis Communications AB.<br />Squashfs 2.1-r2 (released 2004/12/15) (C) 2002-2004 Phillip Lougher<br />pty: 256 Unix98 ptys configured<br />Serial driver version 5.05c (2001-07-08) with MANY_PORTS SHARE_IRQ SERIAL_PCI enabled<br />ttyS00 at 0xb8000300 (irq = 3) is a 16550A<br />ttyS01 at 0xb8000400 (irq = 0) is a 16550A<br />Software Watchdog Timer: 0.05, timer margin: 60 sec<br />Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0<br /> Amd/Fujitsu Extended Query Table v1.1 at 0x0040<br />number of CFI chips: 1<br />cfi_cmdset_0002: Disabling fast programming due to code brokenness.<br />Flash device: 0x400000 at 0x1c000000<br />Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;pmon&quot;<br />0x00040000-0x003f0000 : &quot;linux&quot;<br />0x000c0000-0x003f0000 : &quot;rootfs&quot;<br />0x003f0000-0x00400000 : &quot;nvram&quot;<br />Initializing Cryptographic API<br />NET4: Linux TCP/IP 1.0 for NET4.0<br />IP Protocols: ICMP, UDP, TCP, IGMP<br />IP: routing cache hash table of 512 buckets, 4Kbytes<br />TCP: Hash tables configured (established 2048 bind 4096)<br />ip_conntrack version 2.1 (5953 buckets, 5953 max) - 320 bytes per conntrack<br />ip_tables: (C) 2000-2002 Netfilter core team<br />NET4: Unix domain sockets 1.0/SMP for Linux NET4.0.<br />NET4: Ethernet Bridge 008 for NET4.0<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (jffs2 filesystem) readonly.<br />Mounted devfs on /dev<br />Freeing unused kernel memory: 80k freed<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag boardtype: 00000000<br />jffs2.bbc: SIZE compression mode activated.<br />PCI: Setting latency timer of device 00:01.0 to 64<br />eth0: Broadcom BCM47xx 10/100 Mbps Ethernet Controller 3.90.23.0<br />PCI: Setting latency timer of device 01:03.0 to 64<br />PCI: Enabling device 01:03.0 (0004 -&gt; 0006)<br />eth1: Broadcom BCM4320 802.11 Wireless Controller 3.90.37.0<br />SGI XFS with no debug enabled<br />usb.c: registered new driver usbdevfs<br />usb.c: registered new driver hub<br />usb.c: registered new driver usblp<br />printer.c: v0.13: USB Printer Device Class driver<br />SCSI subsystem driver Revision: 1.00<br />Initializing USB Mass Storage driver...<br />usb.c: registered new driver usb-storage<br />USB Mass Storage support registered.<br />uhci.c: USB Universal Host Controller Interface driver v1.1<br />PCI: Enabling device 01:02.0 (0000 -&gt; 0001)<br />uhci.c: USB UHCI at I/O 0x100, IRQ 2<br />usb.c: new USB bus registered, assigned bus number 1<br />hub.c: USB hub found<br />hub.c: 2 ports detected<br />PCI: Enabling device 01:02.1 (0000 -&gt; 0001)<br />uhci.c: USB UHCI at I/O 0x120, IRQ 2<br />usb.c: new USB bus registered, assigned bus number 2<br />hub.c: USB hub found<br />hub.c: 2 ports detected<br />PCI: Enabling device 01:02.2 (0000 -&gt; 0002)<br />ehci_hcd 01:02.2: PCI device 1106:3104<br />ehci_hcd 01:02.2: irq 2, pci mem c020b000<br />usb.c: new USB bus registered, assigned bus number 3<br />ehci_hcd 01:02.2: USB 2.0 enabled, EHCI 1.00, driver 2003-Dec-29/2.4<br />hub.c: USB hub found<br />hub.c: 4 ports detected<br />device eth0 entered promiscuous mode<br />hub.c: connect-debounce failed, port 2 disabled<br />hub.c: new USB device 01:02.2-2, assigned address 2<br />scsi0 : SCSI emulation for USB Mass Storage devices<br />&nbsp; Vendor: Maxtor 6&nbsp; Model: Y120P0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Rev: 0811<br />&nbsp; Type:&nbsp; &nbsp;Direct-Access&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ANSI SCSI revision: 02<br />vlan0: add 01:00:5e:00:00:01 mcast address to master interface<br />device eth1 entered promiscuous mode<br />eth1: attempt to add interface with same source address.<br />Attached scsi disk sda at scsi0, channel 0, id 0, lun 0<br />SCSI device sda: 240121728 512-byte hdwr sectors (122942 MB)<br />Partition check:<br /> /dev/scsi/host0/bus0/target0/lun0: p1<br />WARNING: USB Mass Storage data integrity not assured<br />USB Mass Storage device found at 2<br />br0: port 2(eth1) entering learning state<br />br0: port 1(vlan0) entering learning state<br />br0: port 2(eth1) entering forwarding state<br />br0: topology change detected, propagating<br />br0: port 1(vlan0) entering forwarding state<br />br0: topology change detected, propagating<br />jffs2: attempt to mount non-MTD device 08:01<br />SQUASHFS error: Can&#039;t find a SQUASHFS superblock on sd(8,1)<br />XFS mounting filesystem sd(8,1)<br />Starting XFS recovery on filesystem: sd(8,1) (dev: sd(8,1))<br />Break instruction in kernel code in traps.c::do_bp, line 593:<br />$0 : 00000000 1000fc00 00000000 00000000 81191b00 81aa8500 00000000 00000010<br />$8 : 00000480 00000000 00000000 00002000 00000000 81191b00 00004001 00000000<br />$16: 81191b00 81aa8500 00000000 81aa8500 811997e0 00004001 00000000 00000000<br />$24: 00000000 c0187338&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;81aba000 81abba20 81195fa0 c01ad640<br />Hi : 00000000<br />Lo : 00000480<br />epc&nbsp; &nbsp;: c01ab4bc&nbsp; &nbsp; Tainted: P<br />Status: 1000fc03<br />Cause : 00000024<br />PrId&nbsp; : 00029007<br />Process mount (pid: 379, stackpage=81aba000)<br />Stack:&nbsp; &nbsp; 81a7af80 c01abdf4 072853a5 00000000 81191b00 00004001 81191b00<br /> 81aa8500 00000000 c01c0000 c01ad640 c01ad60c 00000001 00000000 00000000<br /> 00000000 00000000 00004001 81aa8500 00000000 81195fa0 00000000 81195fa0<br /> 00004001 811997e0 81dc9800 811997e0 00000000 00000000 00000000 81195fa0<br /> c01adb30 81aba000 81abbac8 00000000 00000010 00000000 00004001 81195fa0<br /> 00000000 ...<br />Call Trace:&nbsp; &nbsp;[&lt;c01abdf4&gt;] [&lt;c01c0000&gt;] [&lt;c01ad640&gt;] [&lt;c01ad60c&gt;] [&lt;c01adb30&gt;]<br /> [&lt;c01889c4&gt;] [&lt;c018897c&gt;] [&lt;c0185094&gt;] [&lt;80017df0&gt;] [&lt;c018a87c&gt;] [&lt;c01ab1f4&gt;]<br /> [&lt;c0185164&gt;] [&lt;c0185094&gt;] [&lt;c018a87c&gt;] [&lt;c018a494&gt;] [&lt;c01b0000&gt;] [&lt;c018b0a8&gt;]<br /> [&lt;c01ae9ec&gt;] [&lt;c0183060&gt;] [&lt;c0182f94&gt;] [&lt;c01a0000&gt;] [&lt;c018dca8&gt;] [&lt;c01adb74&gt;]<br /> [&lt;c01adb30&gt;] [&lt;c0195b34&gt;] [&lt;c01b0000&gt;] [&lt;c0195d64&gt;] [&lt;c01b0000&gt;] [&lt;c0195d64&gt;]<br /> [&lt;c01b4bf0&gt;] [&lt;c01b4bf0&gt;] [&lt;c01a9774&gt;] [&lt;c01e9038&gt;] [&lt;8003db18&gt;] [&lt;8003e820&gt;]<br /> [&lt;80043600&gt;] [&lt;800539cc&gt;] [&lt;801454a0&gt;] [&lt;c01cc46c&gt;] [&lt;8005dc08&gt;] ...</p><p>Code: 8fae0044&nbsp; 14400002&nbsp; 8fb30048 &lt;0200000d&gt; 8da2001c&nbsp; 00001821&nbsp; 01631824&nbsp; 01421024&nbsp; 00431025<br />vlan1: add 01:00:5e:00:00:01 mcast address to master interface<br />usb.c: USB disconnect on device 01:02.2-2 address 2</p><br /><p>root@OpenWrt:~# lsmod<br />Module&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Size&nbsp; Used by&nbsp; &nbsp; Tainted: P<br />ehci-hcd&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;20140&nbsp; &nbsp;0 (unused)<br />uhci&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;30164&nbsp; &nbsp;0 (unused)<br />usb-storage&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 65328&nbsp; &nbsp;1<br />sd_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;12452&nbsp; &nbsp;2<br />scsi_mod&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;70488&nbsp; &nbsp;2 [usb-storage sd_mod]<br />printer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;9788&nbsp; &nbsp;0 (unused)<br />usbcore&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 74792&nbsp; &nbsp;1 [ehci-hcd uhci usb-storage printer]<br />xfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;561120&nbsp; &nbsp;2<br />wlcompat&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;14896&nbsp; &nbsp;0 (unused)<br />wl&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 423640&nbsp; &nbsp;0 (unused)<br />et&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;32064&nbsp; &nbsp;0 (unused)<br />diag&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2560&nbsp; &nbsp;0 (unused)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>