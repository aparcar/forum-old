<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> mounting on loop my-image.bin</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p22588">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						11 Mar 2006, 19:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>How can I mount an image.bin under Linux?</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22761">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						13 Mar 2006, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>And how can I extract files from .trx?<br />I can&#039;t reload my .trx into my own image.bin.<br />When I tried reload backed up .trx my router<br />almost bricked. It took 2,5 hours making alive.</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22762">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						13 Mar 2006, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>You&#039;ll need a kernel with squashfs support compiled in.</p><p>Read my exploration of the SL, I went through those steps:</p><p><a href="http://www.linksysinfo.org/modules.php?name=Forums&amp;file=viewtopic&amp;t=12538&amp;postdays=0&amp;postorder=asc&amp;start=0">http://www.linksysinfo.org/modules.php? … mp;start=0</a></p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 13 Mar 2006, 23:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p22903">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						15 Mar 2006, 20:44					</div>
				</div>
				<div class="post-content content">
					<p>Hi Vincent,</p><p>It seems your description is working. I could make an fs.img and file command can see SquashFS v2.1.<br />My problem is now: making squashfs module fom my SuSE 9.3. I don&#039;t like compiling kernel modules<br />because I have to recompile vmware an Cisco vpnclient, too.</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23004">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						16 Mar 2006, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Something is not good:<br />wsnote:/home/rattila # mount -t squashfs k16wrt-firmware-RC4-fs.img ./x -o loop<br />mount: wrong fs type, bad option, bad superblock on /dev/loop0,<br />&nbsp; &nbsp; &nbsp; &nbsp;missing codepage or other error<br />&nbsp; &nbsp; &nbsp; &nbsp;In some cases useful info is found in syslog - try<br />&nbsp; &nbsp; &nbsp; &nbsp;dmesg | tail&nbsp; or so</p><p>SQUASHFS error: zlib_fs returned unexpected result 0xfffffffd<br />SQUASHFS error: Unable to read cache block [fcff7:1aa9]<br />SQUASHFS error: Unable to read inode [fcff7:1aa9]<br />SQUASHFS error: Root inode create failed</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23009">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						16 Mar 2006, 23:59					</div>
				</div>
				<div class="post-content content">
					<p>Are you sure you have a kernel with squashfs?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23010">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						17 Mar 2006, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I hope.<br />Kernel module is loaded by me. (without any error messages)<br />Before I loaded it I compiled the kernel but I didn&#039;t restarted!<br />I don&#039;t want this kernel, only the new squashfs.ko module.</p><p>Is that a problem?</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23013">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						17 Mar 2006, 00:36					</div>
				</div>
				<div class="post-content content">
					<p>I would suggest downloading a standard linksys bin file like I did, and try to mount it.</p><p>If it works, then your file is probably not right.<br />If it does not work, then more likely you have problems with accessing squashfs generally.</p><p>I believe there is also potential issue of squashfs version and whether LZMA is supported or not. Squashfs is somewhat new.</p>											<p class="post-edited">(Last edited by <strong>vincentfox</strong> on 17 Mar 2006, 00:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23015">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">Kevin</div>
					<div class="post-datetime">
						17 Mar 2006, 00:48					</div>
				</div>
				<div class="post-content content">
					<p>the .bin file is not a straight sqashfs image, think about it.. it also has the .bin header and a kernel</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23016">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">vincentfox</div>
					<div class="post-datetime">
						17 Mar 2006, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>Kevin, I think you didn&#039;t read the rest of the thread. We already covered how to extract the squashfs filesystem from a .bin or .trx.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23040">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						17 Mar 2006, 10:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Do you have an absolutelly sure squashfs image what I could download for testing?<br />In my opinion, I can do the same mistake with original Linksys .bin like<br />with my .trx file ... and we know nothing more.<br />Are you agree with me?</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23044">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						17 Mar 2006, 10:54					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I think we&#039;re more clever!</p><p>wsnote:/home/rattila # hexdump -C WRT54GL_4.30.2_US_code.bin |grep hsqs<br />000a7b10&nbsp; 68 73 71 73 30 01 00 00&nbsp; 47 9a 21 00 43 9a 21 00&nbsp; |hsqs0...G.!.C.!.|<br />wsnote:/home/rattila # dd bs=8 skip=85858 if=WRT54GL_4.30.2_US_code.bin of=test.img<br />275742+0 beolvasott rekord<br />275742+0 kiírt rekord<br />2205936 bytes (2,2 MB) copied, 1,44469 seconds, 1,5 MB/s<br />wsnote:/home/rattila # file test.img<br />test.img: Squashfs filesystem, little endian, version 2.0, 2202183 bytes, 304 inodes, blocksize: 65536 bytes, created: Mon Nov 14 11:06:22 2005<br />wsnote:/home/rattila # mount -t squashfs test.img ./x -o loop<br />wsnote:/home/rattila # df<br />Fájlrendszer&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;1K-blokk&nbsp; Foglalt&nbsp; &nbsp; Szabad&nbsp; &nbsp; % Csatl. pont<br />...<br />/home/rattila/test.img<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2176&nbsp; &nbsp; &nbsp; 2176&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 100% /home/rattila/x</p><p>And I can look inside the FS.</p><p>So go back! I&#039;ll do it again with my .trx...</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23045">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						17 Mar 2006, 11:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>And here again with my image.trx:</p><p>wsnote:/home/rattila # hexdump -C k16wrt-firmware-RC4.trx |grep hsqs<br />0007aa00&nbsp; d5 ff 67 c6 fc 00 00 00&nbsp; 68 73 71 73 40 01 00 00&nbsp; |ÕÿgÆü...hsqs@...|<br />&nbsp; &nbsp; &nbsp;(7aa08-&gt;502 280 -&gt; 502 280 / 8 = 62 785)<br />wsnote:/home/rattila # dd bs=8 skip=62785 if=k16wrt-firmware-RC4.trx of=test.img<br />420543+0 beolvasott rekord<br />420543+0 kiírt rekord<br />3364344 bytes (3,4 MB) copied, 2,18029 seconds, 1,5 MB/s<br />wsnote:/home/rattila # file test.img<br />test.img: Squashfs filesystem, little endian, version 2.1, 1040313 bytes, 320 inodes, blocksize: 65536 bytes, created: Thu Nov 24 03:43:45 2005<br />wsnote:/home/rattila # mount -t squashfs test.img ./x -o loop<br />mount: wrong fs type, bad option, bad superblock on /dev/loop0,<br />&nbsp; &nbsp; &nbsp; &nbsp;missing codepage or other error<br />&nbsp; &nbsp; &nbsp; &nbsp;In some cases useful info is found in syslog - try<br />&nbsp; &nbsp; &nbsp; &nbsp;dmesg | tail&nbsp; or so</p><p>So the problem isn&#039;t in my squashfs module ... or my image is newer - version 2.1. Original Linksys image is v2.0!</p><p>TIA:<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23172">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						19 Mar 2006, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>Noone can give me a little bit more help mounting my backup .trx image?<br />Now where is the problem? Wirh my trx file or squashfs module?</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23178">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						19 Mar 2006, 20:48					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>The question is:<br />Can I get back my /etc files from a trx which was made as decribed in README?</p><p>Of course I can&#039;t mount on loop in my router:<br />root@k16wrt:~# mount k16wrt-firmware-RC4-fs.img x -o loop<br />mount: Could not find a spare loop device</p><p>TIA:<br />Ruzsi</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p23180">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">aruzsi</div>
					<div class="post-datetime">
						19 Mar 2006, 21:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I could mount.<br />It was my mistake:<br />- the kmod-loop package wasn&#039;t installed<br />- loop module wasn&#039;t loaded.</p><p>Inspite of mounting trx I can&#039;t access my /etc which was on jffs2 ...<br />README said, jffs2 is after squashfs ...<br />How can I access my old jffs2 then?</p><p>TIA,<br />Ruzsi</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>