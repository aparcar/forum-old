<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Troubles using tftp  server.</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p193679">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">udbytossen</div>
					<div class="post-datetime">
						3 Mar 2013, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Hello Forum. <br />I have some troubles setting my Netgear WNDR3800 up as optimal for my house. <br />I&#039;va attached a 2GB USB key mounted in tftp - with a debian boot image. I would like to be able to install from this USB connedted to my WNDR3800. <br />My sofware: <br /></p><div class="codebox"><pre><code>Router Name    netgear
Router Model    NETGEAR WNDR3800
Firmware Version     OpenWrt Attitude Adjustment r33212 / LuCI Trunk (trunk+svn9093)
Kernel Version    3.3.8</code></pre></div><p>Under System/Mountpoints, I can see the USB mounted and are readable:<br /></p><div class="codebox"><pre><code>/dev/sda1    /tftp     1.81 GB / 1.98 GB     4% (75.78 MB)
Mount Points
Mount Points define at which point a memory device will be attached to the filesystem
Enabled    Device                        Mount Point    Filesystem    Options    Root    Check    Â 
    X          /dev/sda1 (2029 MB)        /tftp            ext4              defaults    no     no</code></pre></div><p>In my setting under Network/DHCP and DNS/TFTP setting:<br /></p><div class="codebox"><pre><code>Enabled TFTP server         Checked
TFTP server root                 /tftp/
Network Boot image         pxelinux.0</code></pre></div><br /><p>This is the normal image I&#039;m booting from earlier setups, so I now its working. <br /> But when I pressed save after adding the the drive - it seems like Luci interface are crashing - carse its only keeps showing its &quot;applying changes to /etc/config/fstab&quot; and keeps applying this - it do not goes any further... </p><p>I&#039;ve added/Deleted the /dev/sda1 afterwards, but it&#039;ll just keep saying &quot;Applying changes to /etc/config/fstab&quot; but I can allso see it&#039;ll change the things (using the interface to add/delete) but - it sems to be stock when applying the changes. </p><p>I cannot see anything under syslog - and using dmesg gives me: <br /></p><div class="codebox"><pre><code>[   48.760000] cfg80211: Regulatory domain changed to country: DK
[   48.760000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   48.770000] cfg80211:   (2402000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   48.780000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   48.790000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (N/A, 2000 mBm)
[   48.790000] cfg80211:   (5490000 KHz - 5710000 KHz @ 40000 KHz), (N/A, 2700 mBm)
[   48.980000] eth0: no IPv6 routers present
[   49.210000] br-myth: no IPv6 routers present
[   49.500000] br-test: no IPv6 routers present
[   49.660000] ADDRCONF(NETDEV_UP): wlan1: link is not ready
[   49.680000] device wlan1 entered promiscuous mode
[   49.740000] ADDRCONF(NETDEV_UP): wlan1: link is not ready
[   49.790000] br-lan: no IPv6 routers present
[   49.970000] br-myth: port 3(wlan1) entered forwarding state
[   49.980000] br-myth: port 3(wlan1) entered forwarding state
[   49.980000] ADDRCONF(NETDEV_CHANGE): wlan1: link becomes ready
[   51.980000] br-myth: port 3(wlan1) entered forwarding state
[165820.900000] EXT4-fs (sda1): couldn&#039;t mount as ext3 due to feature incompatibilities
[165897.180000] EXT4-fs (sda1): couldn&#039;t mount as ext3 due to feature incompatibilities
[165909.650000] EXT4-fs (sda1): couldn&#039;t mount as ext3 due to feature incompatibilities
[165909.660000] EXT4-fs (sda1): couldn&#039;t mount as ext2 due to feature incompatibilities
[165909.690000] EXT4-fs (sda1): mounted filesystem with ordered data mode. Opts: (null)</code></pre></div><p>And using mount command I can see the mounted device! and mount/unmount it manually!. What to do here ? Where can I see some more logfiles to see whats going wrong. </p><p>Allso when trying to boot my Soekris Net5501, I can it&#039;ll try searching the network for a pxeboot image, butthe soekris wont even get an IP address: <br /> </p><div class="codebox"><pre><code>comBIOS ver. 1.33c 20080626  Copyright (C) 2000-2008 Soekris Engineering.                                                                         

net5501       

0256 Mbyte Memory                        CPU Geode LX 434 Mhz                                                             

Pri Mas  TS16GCF133                      LBA Xlt 963-255-63  15663 Mbyte                                                                        

Slot   Vend Dev  ClassRev Cmd  Stat CL LT HT  Base1    Base2   Int                                                                  
-------------------------------------------------------------------                                                                   
0:01:2 1022 2082 10100000 0006 0220 08 00 00 A0000000 00000000 10                                                                 
0:06:0 1106 3053 02000096 0117 0210 08 40 00 0000E101 A0004000 11                                                                 
0:07:0 1106 3053 02000096 0117 0210 08 40 00 0000E201 A0004100 05                                                                 
0:08:0 1106 3053 02000096 0117 0210 08 40 00 0000E301 A0004200 09                                                                 
0:09:0 1106 3053 02000096 0117 0210 08 40 00 0000E401 A0004300 12                                                                 
0:20:0 1022 2090 06010003 0009 02A0 08 40 80 00006001 00006101                                                              
0:20:2 1022 209A 01018001 0005 02A0 08 00 00 00000000 00000000                                                              
0:21:0 1022 2094 0C031002 0006 0230 08 00 80 A0005000 00000000 15                                                                 
0:21:1 1022 2095 0C032002 0006 0230 08 00 00 A0006000 000000                                                          

 5 Seconds to automatic boot.   Press Ctrl-P for entering Monitor.                                                                  

comBIOS Monitor.   Press ? for help.                                    

&gt; show bootorder                
Syntax Error.             

&gt; show BootOrder                
Syntax Error.             

&gt; ?   
comBIOS Monitor Commands                        

boot [drive][:partition] INT19 Boot                                   
reboot                   cold boot                                  
download                 download a file using XMODEM/CRC                                                         
flashupdate              update flash BIOS with downloaded file                                                               
time [HH:MM:SS]          show or set time                                         
date [YYYY/MM/DD]        show or set date                                         
d[b|w|d] [adr]           dump memory bytes/w                                           
e[b|w|d] adr value [...] enter bytes/words/dwords                                                 
i[b|w|d] port            input from 8/16/32-bit port                                                    
o[b|w|d] port value      output to 8/16/32-bit port                                                   
run adr                  execute code at adr                                            
cmosread [adr]           read CMOS RAM data                                           
cmoswrite adr byte [...] write CMOS RAM data                                            
cmoschecksum             update CMOS RAM Checksum                                                 
set parameter=value      set system parameter to value                                                      
show [parameter]         show one or all system parameters                                                          
?/help                   show this help                                       

&gt; show      

ConSpeed = 19200                
ConLock = Enabled                 
ConMute = Disabled                  
BIOSentry = Enabled                   
PCIROMS = Enabled                 
PXEBoot = Enabled                 
FLASH = Primary               
BootDelay = 5             
FastBoot = Disabled                   
BootPartition = Disabled                        
BootDrive = 80 81 F0 FF                       
ShowPCI = Enabled                 
Reset = Hard            
CpuSpeed = Default                  

&gt; boot F0         

Intel UNDI, PXE-2.0 (build 082)                               
Copyright (C) 1997,1998,1999  Intel Corporation                                               
VIA Rhine III Management Adapter v2.43 (2005/12/15)                                                   

CLIENT MAC ADDR: 00 00 24 CD 9A 54                                  
PXE-E53: No boot filename received                                  


PXE-M0F: Exiting Intel PXE ROM.                               

No Boot device available, enter m                                


comBIOS Monitor.   Press ? for help.                                    

&gt; boot F0         

&gt; boot F0         

Intel UNDI, PXE-2.0 (build 082)                               
Copyright (C) 1997,1998,1999  Intel Corporation                                               
VIA Rhine III Management Adapter v2.43 (2005/12/15)                                                   

CLIENT MAC ADDR: 00 00 24 CD 9A 54                                  
PXE-E53: No boot filename received                                  


PXE-M0F: Exiting Intel PXE ROM.                               

No Boot device available, enter monitor.                                        


comBIOS Monitor.   Press ? for help.                                    

&gt; boot F0         

Intel UNDI, PXE-2.0 (build 082)                               
Copyright (C) 1997,1998,1999  Intel Corporation                                               
VIA Rhine III Management Adapter v2.43 (2005/12/15)                                                   

CLIENT MAC ADDR: 00 00 24 CD 9A 54                                  
PXE-E53: No boot filename received                                  


PXE-M0F: Exiting Intel PXE ROM.                               

No Boot device available, enter monitor.                                        


comBIOS Monitor.   Press ? for help.                                    

&gt; 

POST: 012345689bcefghips1234ajklnopqr,,,tvwxy                                             








comBIOS ver. 1.33c 20080626  Copyright (C) 2000-2008 Soekris Engineering.                                                                         

net5501       

0256 Mbyte Memory                        CPU Geode LX 434 Mhz                                                             

Pri Mas  TS16GCF133                      LBA Xlt 963-255-63  15663 Mbyte                                                                        

Slot   Vend Dev  ClassRev Cmd  Stat CL LT HT  Base1    Base2                                                                 
-------------------------------------------------------------------                                                                   
0:01:2 1022 2082 10100000 0006 0220 08 00 00 A0000000 00000000 10                                                                 
0:06:0 1106 3053 02000096 0117 0210 08 40 00 0000E101 A0004000 11                                                                 
0:07:0 1106 3053 02000096 0117 0210 08 40 00 0000E201 A0004100 05                                                                 
0:08:0 1106 3053 02000096 0117 0210 08 40 00 0000E301 A0004200 09                                                                 
0:09:0 1106 3053 02000096 0117 0210 08 40 00 0000E401 A0004300 12                                                                 
0:20:0 1022 2090 06010003 0009 02A0 08 40 80 00006001 00006101                                                              
0:20:2 1022 209A 01018001 0005 02A0 08 00 00 00000000 0                                                     
0:20:2 1022 209A 01018001 0005 02A0 08 00 00 00000000 0                                                     
0:21:1 1022 2095 0C032002 0006 0230 08 00 00 A0006000 00000000 15

 3 Seconds to automatic boot.   Press Ctrl-P for entering Monitor.

comBIOS Monitor.   Press ? for help.

&gt; boot F0

Intel UNDI, PXE-2.0 (build 082)
Copyright (C) 1997,1998,1999  Intel Corporation
VIA Rhine III Management Adapter v2.43 (2005/12/15)

CLIENT MAC ADDR: 00 00 24 CD 9A 54
PXE-E53: No boot filename received


PXE-M0F: Exiting Intel PXE ROM.

No Boot device available, enter monitor.


comBIOS Monitor.   Press ? for help.

And i system logs It&#039;ll ask but wont get the IP:
Mar  3 13:28:58 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:28:58 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54 
Mar  3 13:29:06 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:29:06 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54 
Mar  3 13:29:22 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:29:22 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54 
Mar  3 13:29:24 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:29:24 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54 
Mar  3 13:29:31 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:29:31 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54 
Mar  3 13:29:36 netgear daemon.info dnsmasq-dhcp[3229]: DHCPDISCOVER(br-lan) 00:00:24:cd:9a:54 
Mar  3 13:29:36 netgear daemon.info dnsmasq-dhcp[3229]: DHCPOFFER(br-lan) 172.16.0.189 00:00:24:cd:9a:54</code></pre></div><p>So I don&#039;t know how to get this to work!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>