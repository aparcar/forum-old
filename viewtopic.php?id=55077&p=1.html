<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kingston Mobilelite G2 (MLWG2)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 18 Apr 2018 and 6 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 8</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=55077&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=55077&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=55077&amp;p=8.html">8</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p261062">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						12 Jan 2015, 10:32					</div>
				</div>
				<div class="post-content content">
					<p>The Kingston Mobilelite G2 &quot;Wireless Drive&quot;</p><p><a href="http://www.kingston.com/us/wireless/wireless_readers#mlwg2">http://www.kingston.com/us/wireless/wir â€¦ ders#mlwg2</a></p><p>Unlike the smaller MLW221 (G1) the MLWG2 has built in Ethernet.</p><p>It has a MediaTek MT7620N SoC with 16M Flash and 64M DDR2 RAM</p><p>OpenWrt Wiki :</p><p><a href="http://wiki.openwrt.org/toh/kingston/mlwg2">http://wiki.openwrt.org/toh/kingston/mlwg2</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p261064">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						12 Jan 2015, 10:40					</div>
				</div>
				<div class="post-content content">
					<p><span style="color: green"> Supported in trunk @r43990 </span></p>											<p class="post-edited">(Last edited by <strong>ldpinney</strong> on 17 Jan 2015, 09:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262483">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">d.wonderful</div>
					<div class="post-datetime">
						22 Jan 2015, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>Anyone found a way to read battery data? I assume this would need kernel support but figured I would ask anyway. Also on CC I keep having to run /etc/init.d/dnsmasq restart or it will not hand out ip4 addresses, anyone else have this problem?</p><p>Also, the 4 pads near the serial port are those usb pads?</p>											<p class="post-edited">(Last edited by <strong>d.wonderful</strong> on 22 Jan 2015, 18:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p262500">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						22 Jan 2015, 22:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>d.wonderful wrote:</cite><blockquote><p>Anyone found a way to read battery data?</p></blockquote></div><p>I have not found a way to monitor the battery for the G1 or G2</p><div class="quotebox"><cite>d.wonderful wrote:</cite><blockquote><p>Also, the 4 pads near the serial port are those usb pads?</p></blockquote></div><p>From the markings I would guess ethernet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p263290">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						28 Jan 2015, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>Device Supported in Barrier Breaker @r44160</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p264437">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">marconfus</div>
					<div class="post-datetime">
						7 Feb 2015, 01:38					</div>
				</div>
				<div class="post-content content">
					<p>Works great. Thanks for your effort!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266743">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">srosam</div>
					<div class="post-datetime">
						24 Feb 2015, 14:31					</div>
				</div>
				<div class="post-content content">
					<p>First off thanks for adding in support for this, its basically useless at the moment / stock.<br />I have DDWRT on my router but still a noob to this flashing business.</p><p>I havent been able to find anything that mentions flashing from a file on the SD card? Assume thats not possible.<br />Is there a / whats the simplest guide / steps to follow to flash the MLWG2?</p><p>Any help greatly appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266825">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						25 Feb 2015, 09:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>srosam wrote:</cite><blockquote><p>I havent been able to find anything that mentions flashing from a file on the SD card? Assume thats not possible.<br />Is there a / whats the simplest guide / steps to follow to flash the MLWG2.</p></blockquote></div><p>Have a look at the mlw221 (G1) user laird.bedore describes a way to flash with USB.<br /><a href="https://forum.openwrt.org/viewtopic.php?id=48401">https://forum.openwrt.org/viewtopic.php?id=48401</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267631">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">BlInK311</div>
					<div class="post-datetime">
						4 Mar 2015, 18:14					</div>
				</div>
				<div class="post-content content">
					<p>anyone have a working prebuilt bin file for the MLWG2?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267632">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						4 Mar 2015, 18:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>BlInK311 wrote:</cite><blockquote><p>anyone have a working prebuilt bin file for the MLWG2?</p></blockquote></div><p>ldpinney AT gmail</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p274651">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">markit</div>
					<div class="post-datetime">
						1 May 2015, 00:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>d.wonderful wrote:</cite><blockquote><p>Anyone found a way to read battery data? I assume this would need kernel support but figured I would ask anyway</p></blockquote></div><p>gpio44 on the mlwg2 lets you read the state of the red battery LED.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277821">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">CannGramps</div>
					<div class="post-datetime">
						28 May 2015, 08:21					</div>
				</div>
				<div class="post-content content">
					<p>Not sure if this is where I should post this but I didn&#039;t see any place else that looked right.&nbsp; This is the first device I&#039;ve put OpenWRT on, so I don&#039;t have much experience with it.&nbsp; I installed the pre-built .bin using a telnet connection and it seemed to work fine until I shut it off and then it started up with the battery and bridged lights both coming on, even though the ethernet was disconnected, and the wireless stayed off, and I couldn&#039;t connect.&nbsp; So, I opened it and connected through terminal to the onboard serial connections and reinstalled OpenWRT through a TFTP server.&nbsp; Once again it worked fine until I shut it off and then it did the same thing.&nbsp; Anyone else have this?&nbsp; I&#039;m not really sure how to go about fixing it.&nbsp; I guess I don&#039;t HAVE to shut it off, but it would be nice to not have to worry about it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277822">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						28 May 2015, 08:29					</div>
				</div>
				<div class="post-content content">
					<p>CannGramps : Did you do both the mtd writes ?</p><p>mtd_write write /media/USB1/openwrt-ramips-mt7620n-mlwg2-squashfs-sysupgrade.bin KernelA</p><p>mtd_write -r write /media/USB1/openwrt-ramips-mt7620n-mlwg2-squashfs-sysupgrade.bin KernelB</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277823">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">CannGramps</div>
					<div class="post-datetime">
						28 May 2015, 08:34					</div>
				</div>
				<div class="post-content content">
					<p>Yeah, I followed the instructions carefully, I can try again though just to make sure.&nbsp; When I installed it over serial I just pointed it to the file however.&nbsp; Also, I feel incredibly stupid, but I accidentally clicked on report post instead of reply, and sent my response to you to the admins as my reason for reporting.&nbsp; That&#039;s the first time that&#039;s happened to me.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277824">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						28 May 2015, 08:51					</div>
				</div>
				<div class="post-content content">
					<p>Both the mtd writes need to be done....Yes even if you used the serial / tftp method.<br />Reason...The Factory firmware has a &quot;backup&quot; that must be overwritten.</p><p>You could also try the sysupgrade or luci upgrade from Openwrt....might work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277826">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">CannGramps</div>
					<div class="post-datetime">
						28 May 2015, 09:01					</div>
				</div>
				<div class="post-content content">
					<p>Is it possible to do both writes using the serial/tftp method?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277827">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						28 May 2015, 09:01					</div>
				</div>
				<div class="post-content content">
					<p>Yes <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p277830">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">CannGramps</div>
					<div class="post-datetime">
						28 May 2015, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>It seems like no matter what I try I can&#039;t get it to take.&nbsp; I tried flashing the original firmware on it as well and it does the same thing.&nbsp; When I start it on the serial connection without pressing anything it tells me Bad Magic Number,85190320.&nbsp; Seems like I won&#039;t be shutting it down.</p><p>Edit: I think I got it.&nbsp; I got it to take the original firmware and redid the telnet install.&nbsp; It seems to have worked this time.&nbsp; I must have missed something the first time.&nbsp; Thanks for the help ldpinney!</p>											<p class="post-edited">(Last edited by <strong>CannGramps</strong> on 28 May 2015, 09:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278221">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">d.wonderful</div>
					<div class="post-datetime">
						31 May 2015, 00:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>markit wrote:</cite><blockquote><p>gpio44 on the mlwg2 lets you read the state of the red battery LED.</p></blockquote></div><p>I can&#039;t get that to work, mind telling me how you did it?</p><br /><p>Also, I use my G2 as an access point/media share in hotels and it was totally not working well so I made some changes, if anyone is intrested in how let me know.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278223">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						31 May 2015, 00:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>d.wonderful wrote:</cite><blockquote><p>Also, I use my G2 as an access point/media share in hotels and it was totally not working well so I made some changes, if anyone is intrested in how let me know.</p></blockquote></div><br /><p>OK ... please post your configuration.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278230">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">d.wonderful</div>
					<div class="post-datetime">
						31 May 2015, 01:13					</div>
				</div>
				<div class="post-content content">
					<p>Ok, First I have what may not be a standard case so be careful reading the notes on the diffrent parts. Also, I hate vi and use nano so you may have to make so changes or install nano.</p><p>I use my router to take with me when I travel and like to use it as an extra layer of protection and also serv as a file server and dlna server (eventually an auto vpn). The problem is that the default install doesn&#039;t expect this. When you connect the wifi to a network then move to another network the router tries to reconnect to the old wifi and when it cant it borks out and won&#039;t let you connect to the router wifi. Not a big deal but still a pain.</p><p>First, connect to router with ethernet and connect to a wifi, then create your private wifi. <br />next create a file called wifireset, my router has an always is sd card so i put it there:</p><div class="codebox"><pre><code> root@OpenWrt:~#nano /mnt/sda2/wifireset

#!/bin/sh
mode=$(uci -q get wireless.@wifi-iface[1].mode)
if [ &quot;$mode&quot; = &quot;sta&quot; ]; then
        uci delete wireless.@wifi-iface[1]
        uci commit wireless
        uci commit network
        wifi
fi
ctrl+x to exit y to save then enter
root@OpenWrt:~#chmod +x /mnt/sda2/wifireset</code></pre></div><p>In the router go to System -&gt; Startup and scroll to bottom and in local setup add so it looks like this<br /></p><div class="codebox"><pre><code># Put your custom commands here that should be executed once
# the system init finished. By default this file does nothing.

/mnt/sda2//wifireset
exit 0</code></pre></div><p>What this will do is every time you power on the router it will delete any old wifi ap you have connected to in the past so you can connect to router without error. <br />The next thing that was tripping me up is every time I went to connect to a new wifi I forgot to uncheck the box to prevent overwiting the old settings so this might help:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~#nano /usr/lib/lua/luci/model/cbi/admin_network/wifi_add.lua

Find:
if iw and iw.mbssid_support then
        replace = m:field(Flag, &quot;replace&quot;, translate(&quot;Replace wireless configuration&quot;),
                translate(&quot;An additional network will be created if you leave this unchecked.&quot;))

        function replace.cfgvalue() return &quot;1&quot; end

change to:
if iw and iw.mbssid_support then
        replace = m:field(Flag, &quot;replace&quot;, translate(&quot;Replace wireless configuration&quot;),
                translate(&quot;An additional network will be created if you leave this unchecked.&quot;))

        function replace.cfgvalue() return &quot;0&quot; end
ctrl+x to exit y to save then enter</code></pre></div><p>This will just uncheck the box by default.</p><p>If you have questions (I am sure since I am a bad explaner) just ask. I am still working on the smb/dlna/vpn but will post that once I have those done.</p><p>--cheers!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p278961">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">HLK</div>
					<div class="post-datetime">
						5 Jun 2015, 12:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>d.wonderful wrote:</cite><blockquote><div class="quotebox"><cite>markit wrote:</cite><blockquote><p>gpio44 on the mlwg2 lets you read the state of the red battery LED.</p></blockquote></div><p>I can&#039;t get that to work, mind telling me how you did it?</p><br /><p>Also, I use my G2 as an access point/media share in hotels and it was totally not working well so I made some changes, if anyone is intrested in how let me know.</p></blockquote></div><p>cd /sys/class/gpio<br />echo 44 &gt; export<br />cat gpio44/value</p><p>########<br />Red -&gt; 1<br />Green -&gt; 0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279011">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">d.wonderful</div>
					<div class="post-datetime">
						5 Jun 2015, 19:46					</div>
				</div>
				<div class="post-content content">
					<p>Oh, ok I get it. I was thinking 0=off 1=green or something, I thought I had the wrong one. Still I wonder where the chip gets that value from to know what color to trigger</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282485">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						6 Jul 2015, 00:00					</div>
				</div>
				<div class="post-content content">
					<p>I am looking to buy one of these units for road warrior duty.&nbsp; It appears to have the most robust CPU and memory of the group as of now. </p><p>I want a box that I can connect either via cable or wireless to a WAN, and be wireless providor to my phone and laptop.&nbsp; Ultimately would like to layer on OpenVPN.&nbsp; I run OpenVPN server at home on a PC-Engines ALIX.</p><p>I&#039;m a Linux noob, if that.&nbsp; I can copy and paste, but not following all the tech talk.</p><p>The wiki looks like it was updated in early May.&nbsp; Can some one please summarize the state of things for this device.&nbsp; I think the questions include:<br />What is the version of the image (CC 15.05 RC2 or other?).&nbsp; The issue is the package repository.<br />If older image, do I hose things upgrading to CC 15.05 RC2?<br />Is USB working in the package?<br />I assume the USB drive should be formatted FAT32 for install.<br />Instrucion 4. - telent to ... is this using a cat5 cable? (not even sure one can do this wirelessly)<br />The file mlwG2_header.bin does not appear to be used in the instructions.&nbsp; Do I need to do something with this.<br />What is the CAT5 connector configured as (WAN or LAN)?<br />Is there the ability to have both a WAN and LAN side wireless?<br />The factory docs indicates that the micro to USB can transfer files between a PC and the device.&nbsp; Will this feature still work with OpenWRT, or will the port only act as a charger?<br />If all goes right, for what reason do I need to open the box?&nbsp; <br />Can i put the wifireset script into the etc\config\scripts\ folder and run it from there? What would that path be for the startup (noob)?</p><p>Does anyone have a low\high on the battery time?</p><p>Finally, the Kingston website indicates 2 versions (MLWG2 &amp; MLWG2\64SD).&nbsp; The wiki indicates the unit is 16flash/64ram.&nbsp; I expect that that is the internal config for both, and the \64SD is just an additional external storage card, not a different RAM size.&nbsp; Is that correct?</p><p>Any OpenVPN bench marks?&nbsp; </p><p>RangerZ</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p282574">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">d.wonderful</div>
					<div class="post-datetime">
						6 Jul 2015, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>When I did my install I soldered a header and used a serial to usb to transfer the image so that is the only method I could probably help with.<br />OpenVPN should work fine, I have tested pptp and am playing with tinc and they both work acceptably. I din&#039;y know that the microusb is supposed to be able to transfer files but will try it and let you know. My have to wait till I get home, not sure I can find a cable where I am.<br />On the image I used to install the cat5 was set up for WAN (I think) but you can configure it for anything. The wireless can be configured as both LAN/WAN at the same time but there are some limitations due to single thansmitter: both have to be on same wifi channel, only supports 2.4GHz. Also DHCP is wonky and I couldn&#039;t find a way to make it work if not connected to wan wifi if one is configured. There are several ways to create a startup script but what are you wanting to startup?<br />I have not run my battery dead and havent figured a way to read the bat % but I was able to stream audio and video to three devices for about 2 hours off battery and it was still alive (think led was still green) if that helps<br />The /64sd version just has a 64GB SD card plugged in the slot but I think the sd card they use is cheap so I would reccomend the non /64sd version.</p><p>I am by far not the most expert on this forum so hopefully someone can answer the rest of your questions (or clarify anything I got wrong).</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 8</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=55077&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=55077&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=55077&amp;p=8.html">8</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>