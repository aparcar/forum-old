<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Fetchmail, SetUID Issue</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p58227">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mtgstuber</div>
					<div class="post-datetime">
						30 Oct 2007, 04:09					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to setup Fetchmail / Procmail / Dovecot on my WRTSL54GS w/ a small RAID array attached.&nbsp; For the most part things are going well, but I need some help.</p><p>Note:&nbsp; I do want to do this.&nbsp; I know this is a tiny machine.&nbsp; I have my reasons.&nbsp; I live off-grid and a five watt server with an 8 watt raid array is very important to me.&nbsp; Every watt counts in my world.</p><p>So here is my issue:<br />I have several email accounts on an external hosting provider.&nbsp; I have created local accounts on my OpenWRT box.&nbsp; I can attach to them via Dovecot.&nbsp; Things work very nicely.<br />I can use Procmail to deliver messages to the Maildir filestructure.<br />I can use Fetchmail to get mail from my external providers.</p><p>What I can&#039;t do is get the fetchmail to run procmail as the appropriate local user on the OpenWRT and as a result, all mail collected via fetchmail gets delivered to root.&nbsp; I&#039;ve tried wrapping things in a setuid script, but that doesn&#039;t work.&nbsp; So much for easy.</p><p>It seems my options are either:<br />(a) recompile busy box with proper user support such that I can &#039;su&#039;.<br />(b) recompile fetchmail?</p><p>I think I want to pursue (b) as this seems much less more invasive than (a).&nbsp; </p><p>Is there something I&#039;m missing?&nbsp; Any pointers or alternate suggestions would be very much appreciated.<br />Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58228">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mtgstuber</div>
					<div class="post-datetime">
						30 Oct 2007, 04:59					</div>
				</div>
				<div class="post-content content">
					<p>I also tried using the -d option on procmail.&nbsp; &nbsp;No dice.</p><p>As best I can tell everything is compiled with all the multi-user options turned off.&nbsp; Again, any suggestions would be appreciated.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58288">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mtgstuber</div>
					<div class="post-datetime">
						31 Oct 2007, 07:00					</div>
				</div>
				<div class="post-content content">
					<p>I figured out a way to do it.&nbsp; I built my own package for Dovecot 1.0.2.&nbsp; Dovecot 1.0.2 provides it&#039;s own local delivery agent that will do the setuid switches properly.&nbsp; I configured fetchmail to call it, and presto, everything appears to be working.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>