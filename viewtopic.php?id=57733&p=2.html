<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> opkg signature verification</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Apr 2018 and 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=57733&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p298998">
				<div class="post-metadata">
					<div class="post-num">Post #26</div>
					<div class="post-author">beth</div>
					<div class="post-datetime">
						8 Nov 2015, 16:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>abakan4222 wrote:</cite><blockquote><p>Hmm. Do you use external flash drive as root of openwrt system?</p></blockquote></div><p>I don&#039;t, no. It&#039;s with an Onion Omega board: <a href="https://onion.io/">https://onion.io/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299667">
				<div class="post-metadata">
					<div class="post-num">Post #27</div>
					<div class="post-author">si458</div>
					<div class="post-datetime">
						13 Nov 2015, 16:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>beth wrote:</cite><blockquote><div class="quotebox"><cite>abakan4222 wrote:</cite><blockquote><p>Hmm. Do you use external flash drive as root of openwrt system?</p></blockquote></div><p>I don&#039;t, no. It&#039;s with an Onion Omega board: <a href="https://onion.io/">https://onion.io/</a></p></blockquote></div><p>im also having the same issue with my new Onion Omega board?</p><p>the opkg update did work but suddenly stopped ?</p><p>root@Omega-1998:/etc/opkg# opkg update<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/Packages.gz">http://downloads.openwrt.org/chaos_calm … ackages.gz</a><br />Updated list of available packages in /var/opkg-lists/chaos_calmer_base.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/Packages.sig">http://downloads.openwrt.org/chaos_calm … ckages.sig</a><br />Signature check passed.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.gz">http://downloads.openwrt.org/chaos_calm … ackages.gz</a><br />Updated list of available packages in /var/opkg-lists/chaos_calmer_packages.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.sig">http://downloads.openwrt.org/chaos_calm … ckages.sig</a><br />Signature check failed.<br />Remove wrong Signature file.</p>											<p class="post-edited">(Last edited by <strong>si458</strong> on 13 Nov 2015, 16:28)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299669">
				<div class="post-metadata">
					<div class="post-num">Post #28</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Nov 2015, 16:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>si458 wrote:</cite><blockquote><p>the opkg update did work but suddenly stopped ?</p><p>root@Omega-1998:/etc/opkg# opkg update<br />...<br />Signature check passed.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.gz">http://downloads.openwrt.org/chaos_calm … ackages.gz</a><br />Updated list of available packages in /var/opkg-lists/chaos_calmer_packages.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.sig">http://downloads.openwrt.org/chaos_calm … ckages.sig</a><br />Signature check failed.<br />Remove wrong Signature file.</p></blockquote></div><p>That looks like a new issue.<br />Some of the packages in the CC15.05 &quot;packages&quot; feeds have been re-compiled (at least unzip: <a href="https://lists.openwrt.org/pipermail/openwrt-devel/2015-November/037163.html">https://lists.openwrt.org/pipermail/ope … 37163.html</a> ) and the package list has then been signed with the wrong key for that one repo. </p><p>See the difference between:<br /><a href="https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/Packages.sig">https://downloads.openwrt.org/chaos_cal … ckages.sig</a><br /><a href="https://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.sig">https://downloads.openwrt.org/chaos_cal … ckages.sig</a></p><p>Hopefully developers will correct that and re-sign the list with the correct key. While waiting for that, you might try using the &quot;--force-signature&quot; override from the command line.<br /></p><div class="codebox"><pre><code>opkg update --force-signature</code></pre></div><p>That should enable you to update the packages lists.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 13 Nov 2015, 16:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299670">
				<div class="post-metadata">
					<div class="post-num">Post #29</div>
					<div class="post-author">si458</div>
					<div class="post-datetime">
						13 Nov 2015, 16:48					</div>
				</div>
				<div class="post-content content">
					<p>wonderful the --force-signature worked however i cant install any packages still</p><p>root@Omega-1998:/# opkg install php5<br />Installing php5 (5.6.8-1) to root...<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/php5_5.6.8-1_ar71xx.ipk.">http://downloads.openwrt.org/chaos_calm … r71xx.ipk.</a><br />Collected errors:<br /> * opkg_install_pkg: Failed to verify the signature of /var/opkg-lists/chaos_calmer_packages.<br /> * opkg_install_cmd: Cannot install package php5.</p>											<p class="post-edited">(Last edited by <strong>si458</strong> on 13 Nov 2015, 17:00)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299671">
				<div class="post-metadata">
					<div class="post-num">Post #30</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Nov 2015, 17:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>si458 wrote:</cite><blockquote><p>wonderful the --force-signature worked however i cant install any packages still</p></blockquote></div><p>Use --force-signature again. Opkg complains, but installs the package. See below:<br /></p><div class="codebox"><pre><code>root@OpenWrt2:~# opkg install joe
Installing joe (3.7-3) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/joe_3.7-3_ar71xx.ipk.
Failed to decode public key
Collected errors:
 * opkg_install_pkg: Failed to verify the signature of /var/opkg-lists/chaos_calmer_packages.
 * opkg_install_cmd: Cannot install package joe.

root@OpenWrt2:~# opkg install --force-signature joe
Installing joe (3.7-3) to root...
Downloading http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/joe_3.7-3_ar71xx.ipk.
Failed to decode public key
Configuring joe.
Collected errors:
 * opkg_install_pkg: Failed to verify the signature of /var/opkg-lists/chaos_calmer_packages.

root@OpenWrt2:~# joe
Processing &#039;/etc/joe/joerc&#039;...done
...</code></pre></div><p>So, this works:<br /></p><div class="codebox"><pre><code> opkg install --force-signature &lt;PACKAGE&gt;</code></pre></div>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 13 Nov 2015, 17:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p299673">
				<div class="post-metadata">
					<div class="post-num">Post #31</div>
					<div class="post-author">si458</div>
					<div class="post-datetime">
						13 Nov 2015, 17:08					</div>
				</div>
				<div class="post-content content">
					<p>the force-signature works with the joe package and works with php5 too</p>											<p class="post-edited">(Last edited by <strong>si458</strong> on 13 Nov 2015, 17:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300071">
				<div class="post-metadata">
					<div class="post-num">Post #32</div>
					<div class="post-author">beth</div>
					<div class="post-datetime">
						16 Nov 2015, 22:33					</div>
				</div>
				<div class="post-content content">
					<p>This issue has been fixed by Omega now. None of the suggestions worked for me but I&#039;m very grateful for all the help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p300072">
				<div class="post-metadata">
					<div class="post-num">Post #33</div>
					<div class="post-author">si458</div>
					<div class="post-datetime">
						16 Nov 2015, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>still showing fail <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" />&nbsp; </p><p>root@Omega-1998:/etc/opkg/keys# date<br />Mon Nov 16 20:42:10 GMT 2015<br />root@Omega-1998:/etc/opkg/keys# opkg update<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/Packages.gz.">http://downloads.openwrt.org/chaos_calm … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/chaos_calmer_base.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/base/Packages.sig.">http://downloads.openwrt.org/chaos_calm … kages.sig.</a><br />Signature check passed.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.gz.">http://downloads.openwrt.org/chaos_calm … ckages.gz.</a><br />Updated list of available packages in /var/opkg-lists/chaos_calmer_packages.<br />Downloading <a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/packages/packages/Packages.sig.">http://downloads.openwrt.org/chaos_calm … kages.sig.</a><br />Signature check failed.<br />Remove wrong Signature file.<br />root@Omega-1998:/etc/opkg/keys# date<br />Mon Nov 16 20:42:39 GMT 2015</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p301010">
				<div class="post-metadata">
					<div class="post-num">Post #34</div>
					<div class="post-author">shutin</div>
					<div class="post-datetime">
						24 Nov 2015, 09:44					</div>
				</div>
				<div class="post-content content">
					<p>I was getting this error. Turns out I didn&#039;t have DNS set up. Make sure you can resolve downloads.openwrt.org!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326198">
				<div class="post-metadata">
					<div class="post-num">Post #35</div>
					<div class="post-author">cypkob</div>
					<div class="post-datetime">
						28 May 2016, 04:32					</div>
				</div>
				<div class="post-content content">
					<p>got similar error triing install ipsec-tools to cifs-mounted opkg destination<br /></p><div class="codebox"><pre><code>root@k16:~# mount
/dev/root on /rom type squashfs (ro,relatime)
proc on /proc type proc (rw,nosuid,nodev,noexec,noatime)
sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,noatime)
tmpfs on /tmp type tmpfs (rw,nosuid,nodev,noatime)
/dev/mtdblock3 on /overlay type jffs2 (rw,noatime)
overlayfs:/overlay on / type overlay (rw,noatime,lowerdir=/,upperdir=/overlay/upper,workdir=/overlay/work)
tmpfs on /dev type tmpfs (rw,nosuid,relatime,size=512k,mode=755)
devpts on /dev/pts type devpts (rw,nosuid,noexec,relatime,mode=600)
debugfs on /sys/kernel/debug type debugfs (rw,noatime)
//domik/opkg_root on /opkg_root type cifs (rw,relatime,vers=1.0,cache=strict,domain=DOMIK,uid=0,noforceuid,gid=0,noforcegid,addr=10.58.16.102,unix,posixpaths,serverino,mapposix,acl,rsize=1048576,wsize=65536,actimeo=1)
root@k16:~# opkg install ipsec-tools --dest cifs
Installing ipsec-tools (0.8.2-4) to cifs...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/packages/ipsec-tools_0.8.2-4_ar71xx.ipk.
Installing libopenssl (1.0.2h-1) to cifs...
Downloading http://downloads.openwrt.org/snapshots/trunk/ar71xx/generic/packages/base/libopenssl_1.0.2h-1_ar71xx.ipk.
Collected errors:
 * opkg_install_pkg: Failed to verify the signature of /var/opkg-lists/designated_driver_base.
 * opkg_install_cmd: Cannot install package ipsec-tools.
root@k16:~# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p326200">
				<div class="post-metadata">
					<div class="post-num">Post #36</div>
					<div class="post-author">cypkob</div>
					<div class="post-datetime">
						28 May 2016, 04:36					</div>
				</div>
				<div class="post-content content">
					<p>--force-signature helped me</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 2 of 2</div><nav><ul><li><a href="viewtopic.php%3Fid=57733&amp;p=1.html">1</a></li><li class="pagination-current"><span>2</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>