<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Remote access luci ports 443, 80</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p352227">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">elias13jr</div>
					<div class="post-datetime">
						17 Feb 2017, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>Hello guys!<br />I&#039;ve been following the tutorials here, but I still can not get remote access either through port 80 or 443. If you can help me, some instruction on something I did not see? Below my settings.</p><p>Model: TP-Link TL-WR1043N/ND v1<br />Firmware: OpenWrt Chaos Calmer 15.05.1</p><p>/etc/config/firewal<br />config zone <br />&nbsp; &nbsp; &nbsp; &nbsp; option input &#039;ACCEPT&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option output &#039;ACCEPT&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;wan_pppoe&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option network &#039;WAN&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option forward &#039;ACCEPT&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option masq &#039;1&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option mtu_fix &#039;1&#039;<br />config forwarding <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest &#039;lan&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan_pppoe&#039;<br />config forwarding <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest &#039;wan_pppoe&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;lan&#039;<br />config rule <br />&nbsp; &nbsp; &nbsp; &nbsp; option target &#039;ACCEPT&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;tcp udp&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan_pppoe&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option enabled &#039;0&#039;<br />config rule <br />&nbsp; &nbsp; &nbsp; &nbsp; option name &#039;luci-wan&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option target &#039;ACCEPT&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;tcp&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_port &#039;443 80&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan_pppoe&#039;<br />config redirect <br />&nbsp; &nbsp; &nbsp; &nbsp; option _name &#039;luci-wan-redirect&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan_pppoe&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;tcp&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest &#039;lan&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src_dport &#039;4443&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_port &#039;443&#039;</p><p>config redirect <br />&nbsp; &nbsp; &nbsp; &nbsp; option _name &#039;luci-wan-redirect&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src &#039;wan_pppoe&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option proto &#039;tcp&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest &#039;lan&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option src_dport &#039;8088&#039; <br />&nbsp; &nbsp; &nbsp; &nbsp; option dest_port &#039;80&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352241">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						18 Feb 2017, 00:03					</div>
				</div>
				<div class="post-content content">
					<p>Can you post here your /etc/config/uhttpd and /etc/config/dropbear files, please?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352267">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						18 Feb 2017, 11:51					</div>
				</div>
				<div class="post-content content">
					<p>What do you want to get? Just open ports or redirect them? How are you trying to login?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352618">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">elias13jr</div>
					<div class="post-datetime">
						22 Feb 2017, 01:01					</div>
				</div>
				<div class="post-content content">
					<p>I have already tried to open the default ports only, and also redirect them as in the previous post file but it did not work. I can not log in, because the luci panel does not appear, it&#039;s as if it does not respond: my_address:8088</p><br /><p>config uht.tpd &#039;main&#039;<br />list listen_ht.tp &#039;0.0.0.0:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_ht.tp &#039;[::]:80&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_ht.tps &#039;0.0.0.0:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; list listen_ht.tps &#039;[::]:443&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option redirect_ht.tps &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option home &#039;/w.ww&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option rfc1918_filter &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_requests &#039;3&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option max_connections &#039;100&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cert &#039;/etc/uht.tpd.crt&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option key &#039;/etc/uht.tpd.key&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option cgi_prefix &#039;/cgi-bin&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option script_timeout &#039;60&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option network_timeout &#039;30&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ht.tp_keepalive &#039;20&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option tcp_keepalive &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option ubus_prefix &#039;/ubus&#039;<br />config cert &#039;px5g&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option days &#039;730&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option bits &#039;1024&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option country &#039;ZZ&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option state &#039;Somewhere&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option location &#039;Uknown&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option commonname &#039;OpenWrt&#039;</p>											<p class="post-edited">(Last edited by <strong>elias13jr</strong> on 22 Feb 2017, 01:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352652">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">tunk</div>
					<div class="post-datetime">
						22 Feb 2017, 12:36					</div>
				</div>
				<div class="post-content content">
					<p>Is this a typo:<br />option home &#039;/w.ww&#039;</p><p>Edit: looks like there&#039;s a few other extra dots as well.</p>											<p class="post-edited">(Last edited by <strong>tunk</strong> on 22 Feb 2017, 12:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352655">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						22 Feb 2017, 13:57					</div>
				</div>
				<div class="post-content content">
					<p><strong>tunk</strong>, I think, he is not able to post links at the moment.</p><p><strong>elias13jr</strong>, try step by step:<br /></p><div class="codebox"><pre><code>config rule
        option name &#039;luci-wan&#039;
        option target &#039;ACCEPT&#039;
        option proto &#039;tcp&#039;
        option dest_port &#039;80&#039;
        option src &#039;wan_pppoe&#039;</code></pre></div><p>remove <br /></p><div class="codebox"><pre><code>config redirect
        option _name &#039;luci-wan-redirect&#039;
        option src &#039;wan_pppoe&#039;
        option proto &#039;tcp&#039;
        option dest &#039;lan&#039;
        option src_dport &#039;4443&#039;
        option dest_port &#039;443&#039;

config redirect
        option _name &#039;luci-wan-redirect&#039;
        option src &#039;wan_pppoe&#039;
        option proto &#039;tcp&#039;
        option dest &#039;lan&#039;
        option src_dport &#039;8088&#039;
        option dest_port &#039;80&#039;</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352695">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">elias13jr</div>
					<div class="post-datetime">
						22 Feb 2017, 22:21					</div>
				</div>
				<div class="post-content content">
					<p>I removed the redirect config and made the config rule.<br />When trying to access via browser I get the message:<br />Forbidden<br />Rejected request from RFC1918 IP to public server address.<br />Searching the forum, they recommended unchecking the Rebind protection option located in Network&gt; General Settings. Did not work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352698">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">ulmwind</div>
					<div class="post-datetime">
						22 Feb 2017, 23:03					</div>
				</div>
				<div class="post-content content">
					<p>Have you tried login via WAN IP or LAN IP from WAN side or LAN side?</p>											<p class="post-edited">(Last edited by <strong>ulmwind</strong> on 22 Feb 2017, 23:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352704">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						22 Feb 2017, 23:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>elias13jr wrote:</cite><blockquote><p>I removed the redirect config and made the config rule.<br />When trying to access via browser I get the message:<br />Forbidden<br />Rejected request from RFC1918 IP to public server address.<br />Searching the forum, they recommended unchecking the Rebind protection option located in Network&gt; General Settings. Did not work.</p></blockquote></div><p>That means your router is detecting a connection coming from a private IP address on and interface that should be public (and thus only public IP addresses would be expected). The &quot;option rfc1918_filter &#039;1&#039;&quot; controls this filter, you might want to set it to &#039;0&#039;; but I would investigate how is that happening.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p352901">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">elias13jr</div>
					<div class="post-datetime">
						24 Feb 2017, 22:58					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the explanations. The ulmwind question answers my question. My tests were running the IP WAN of my own IP LAN. I understood the problem and it worked.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>