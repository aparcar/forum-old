<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Seagate BlackArmor</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 5 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p164248">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						12 Apr 2012, 12:22					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I have a device Seagate BlackArmor:</p><p>Marvell Kirkwood@800MHz <br />128 MiB <br />32 MiB nand flash<br />1 gigE <br />1 sata<br />2x 2.0 <br />serial</p><p>I want to run OpenWRt on it.</p><p>I can post some information:</p><p>flash partitions</p><div class="codebox"><pre><code>0x00000000-0x000a0000 : &quot;uboot&quot;
0x000a0000-0x000b0000 : &quot;param&quot;
0x000c0000-0x002c0000 : &quot;preroot&quot;
0x002c0000-0x00540000 : &quot;uimage&quot;
0x00540000-0x01f40000 : &quot;rootfs&quot;
0x01f40000-0x02000000 : &quot;misc&quot;
0x00000000-0x02000000 : &quot;flash&quot;</code></pre></div><p>env</p><div class="codebox"><pre><code>baudrate=115200
loads_echo=0
ipaddr=10.4.50.165
serverip=10.4.50.5
rootpath=/mnt/ARM_FS/
netmask=255.255.255.0
CASset=min
MALLOC_len=1
ethprime=egiga0
bootargs_root=root=/dev/ram0 rootfstype=cramfs init=/etc/rc.preroot initrd=0x800000,0x1000000
bootargs_end=:::DB88FXX81:eth0:none
image_name=uImage
standalone=fsload 0x2000000 $(image_name);setenv bootargs $(console) root=/dev/mtdblock0 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x2000000;
mvNetConfig=mv_net_config=(00:11:88:0f:62:81,0:1:2:3),mtu=1500
usb0Mode=host
netretry=no
rcvrip=169.254.100.100
loadaddr=0x02000000
autoload=no
mfgmodel=mono
ethmtu=1500
uboot_ver=v0.0.2
preroot_ver=0.1.7
serial_number=5562X01001G938007FDJ0A1
ethaddr=00:10:75:22:29:7B
serialNo=2GG30AE2
modelname=9VF5A4-000
runintime=12000
ftpserver=192.168.43.4
testfile=100M
mfgtest_state=finaltested_ok
raclient_leaseExpires=2010-03-17T13:49:34Z
fw_ver=1000.1081
extendDiskMode=extend
raidlevel=5
mkraid5=ok
raclient_securityKey=cVeYs8a0tzwjGcTj0Z9QlA==
stdin=serial
stdout=serial
stderr=serial
mainlineLinux=no
enaMonExt=no
enaCpuStream=no
enaWrAllo=no
pexMode=RC
disL2Cache=no
setL2CacheWT=yes
disL2Prefetch=yes
enaICPref=yes
enaDCPref=yes
sata_dma_mode=yes
netbsd_en=no
vxworks_en=no
console=console=ttyS0,115200 mtdparts=nand_mtd:0xa0000@0x0(uboot),0x00010000@0x000a0000(param),0x00200000@0x000c0000(preroot),0x00280000@0x002c0000(uimage),0x01a00000@0x00540000(rootfs),0x000c0000@0x01f40000(misc),32m@0x0(flash)
bootcmd_f=nand reset; nand read.e 0x800000 0x000c4000 0x00195200; check_crc32 PrEr;
bootcmd=nand reset; nand read.e 0x800000 0x000c4000 0x00195200; check_crc32 PrEr; nand reset; nand read.e 0x40000 0x002c4000 0x0021c000; check_crc32 KrNl; setenv bootargs $(console) $(bootargs_root);  bootm 0x40000;
disaMvPnp=no
enaAutoRecovery=yes
ethact=egiga0

Environment size: 1803/16379 bytes</code></pre></div><p>U-boot</p><div class="codebox"><pre><code>         __  __                      _ _
        |  \/  | __ _ _ ____   _____| | |
        | |\/| |/ _` | &#039;__\ \ / / _ \ | |
        | |  | | (_| | |   \ V /  __/ | |
        |_|  |_|\__,_|_|    \_/ \___|_|_|
 _   _     ____              _
| | | |   | __ )  ___   ___ | |_
| | | |___|  _ \ / _ \ / _ \| __|
| |_| |___| |_) | (_) | (_) | |_
 \___/    |____/ \___/ \___/ \__|  ** uboot_ver:v0.0.2 **

 ** MARVELL BOARD: MONO LE

U-Boot 1.1.4 (Jun 29 2009 - 17:20:47) Marvell version: 3.4.14

U-Boot code: 00600000 -&gt; 0067FFF0  BSS: -&gt; 006CDE60

Soc: 88F6192 A0 (DDR2)
CPU running @ 800Mhz L2 running @ 400Mhz
SysClock = 200Mhz , TClock = 166Mhz

DRAM CAS Latency = 3 tRP = 3 tRAS = 8 tRCD=3
DRAM CS[0] base 0x00000000   size 128MB
DRAM Total size 128MB  16bit width
Addresses 8M - 0M are saved for the U-Boot usage.
Mem malloc Initialization (8M - 7M): Done
NAND:32 MB

Marvell Serial ATA Adapter
Integrated Sata device found


CPU : Marvell Feroceon (Rev 1)
Scanning partition header:
Found sign PrEr at c0000
Found sign KrNl at 2c0000
Warning: singn RoOt not found, use default offset 00540000

Streaming disabled
Write allocate disabled


USB 0: host mode
PEX 0: interface detected no Link.
Net:   egiga0 [PRIME]
Hit any key to stop autoboot:  0</code></pre></div><p>Thank you</p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 9 May 2012, 16:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p164671">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						16 Apr 2012, 17:53					</div>
				</div>
				<div class="post-content content">
					<p>Can someone help me...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194240">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						8 Mar 2013, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>I have done some work...</p><p>I have compiled the trunk enabling all the marvel patform.<br />I have done a lot of test changing the arcNumber.</p><p>The most hardware compliant is the &quot;Marvell eSATA SheevaPlug Reference Board&quot;<br />It loads correctly usb, sata, ram and flash<br />It boots correctly but when it try to erase the empty root block it fails...</p><div class="codebox"><pre><code>Marvell&gt;&gt; setenv arcNumber 2678
Marvell&gt;&gt; setenv console ttyS0,115200;
Marvell&gt;&gt; setenv bootargs console=ttyS0,115200 root=/dev/mtdblock2 rw rootfstype=jffs2
Marvell&gt;&gt; setenv bootcmd nand read 0x40000 0x00100000 0x400000\; bootm 0x40000\;
Marvell&gt;&gt; saveenv
Saving Environment to NAND...
Erasing redundant Nand...Writing to redundant Nand... Erasing Nand...Writing to Nand... done
Marvell&gt;&gt; boot

NAND read: device 0 offset 0x100000, size 0x400000
 4194304 bytes read: OK
## Booting image at 00040000 ...
   Image Name:   Linux-3.3.8
   Created:      2013-03-08  10:21:43 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1068360 Bytes =  1 MB
   Load Address: 00008000
   Entry Point:  00008000
   Verifying Checksum ... OK
OK

Starting kernel ...

Uncompressing Linux... done, booting the kernel.
[    0.000000] Booting Linux on physical CPU 0
[    0.000000] Linux version 3.3.8 (ramponis@ramponis-desktop) (gcc version 4.6.4 20121210 (prerelease) (Linaro GCC 4.6-2012.12) ) #5 Fri Mar 8 11:21:38 CET 2013
[    0.000000] CPU: Feroceon 88FR131 [56251311] revision 1 (ARMv5TE), cr=00053977
[    0.000000] CPU: VIVT data cache, VIVT instruction cache
[    0.000000] Machine: Marvell eSATA SheevaPlug Reference Board
[    0.000000] Memory policy: ECC disabled, Data cache writeback
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
[    0.000000] Kernel command line: console=ttyS0,115200 root=/dev/mtdblock2 rw rootfstype=jffs2
[    0.000000] PID hash table entries: 512 (order: -1, 2048 bytes)
[    0.000000] Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
[    0.000000] Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Memory: 128MB = 128MB total
[    0.000000] Memory: 126784k/126784k available, 4288k reserved, 0K highmem
[    0.000000] Virtual kernel memory layout:
[    0.000000]     vector  : 0xffff0000 - 0xffff1000   (   4 kB)
[    0.000000]     fixmap  : 0xfff00000 - 0xfffe0000   ( 896 kB)
[    0.000000]     vmalloc : 0xc8800000 - 0xff000000   ( 872 MB)
[    0.000000]     lowmem  : 0xc0000000 - 0xc8000000   ( 128 MB)
[    0.000000]     modules : 0xbf000000 - 0xc0000000   (  16 MB)
[    0.000000]       .text : 0xc0008000 - 0xc02a2000   (2664 kB)
[    0.000000]       .init : 0xc02a2000 - 0xc02c3000   ( 132 kB)
[    0.000000]       .data : 0xc02c4000 - 0xc02e2d20   ( 124 kB)
[    0.000000]        .bss : 0xc02e2d44 - 0xc030c940   ( 167 kB)
[    0.000000] NR_IRQS:114
[    0.000000] gpiochip_add: registered GPIOs 0 to 31 on device: orion_gpio0
[    0.000000] gpiochip_add: registered GPIOs 32 to 49 on device: orion_gpio1
[    0.000000] sched_clock: 32 bits at 166MHz, resolution 5ns, wraps every 25769ms
[    3.438855] Calibrating delay loop... 789.70 BogoMIPS (lpj=3948544)
[    3.478799] pid_max: default: 32768 minimum: 301
[    3.479013] Mount-cache hash table entries: 512
[    3.479498] CPU: Testing write buffer coherency: ok
[    3.479863] Setting up static identity map for 0x245cc0 - 0x245cfc
[    3.482451] NET: Registered protocol family 16
[    3.485129] Kirkwood: MV88F6192-A0, TCLK=166666667.
[    3.485152] Feroceon L2: Enabling L2
[    3.485200] Feroceon L2: Cache support initialised.
[    3.497728] bio: create slab &lt;bio-0&gt; at 0
[    3.499026] SCSI subsystem initialized
[    3.500248] usbcore: registered new interface driver usbfs
[    3.500448] usbcore: registered new interface driver hub
[    3.500668] usbcore: registered new device driver usb
[    3.502174] Switching to clocksource orion_clocksource
[    3.504330] NET: Registered protocol family 2
[    3.504531] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    3.504884] TCP established hash table entries: 4096 (order: 3, 32768 bytes)
[    3.505033] TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
[    3.505113] TCP: Hash tables configured (established 4096 bind 4096)
[    3.505126] TCP reno registered
[    3.505142] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    3.505175] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    3.505430] NET: Registered protocol family 1
[    3.507205] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    3.507229] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    3.507694] msgmni has been set to 247
[    3.507738] io scheduler noop registered
[    3.507751] io scheduler deadline registered (default)
[    3.600034] Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
[    3.621070] serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 33) is a 16550A
[    3.952312] console [ttyS0] enabled
[    3.957130] sata_mv sata_mv.0: slots 32 ports 2
[    3.964146] scsi0 : sata_mv
[    3.967507] scsi1 : sata_mv
[    3.970750] ata1: SATA max UDMA/133 irq 21
[    3.974857] ata2: SATA max UDMA/133 irq 21
[    3.980321] NAND device: Manufacturer ID: 0xec, Chip ID: 0x75 (Samsung NAND 32MiB 3,3V 8-bit)
[    3.988858] Scanning device for bad blocks
[    4.216361] Creating 3 MTD partitions on &quot;orion_nand&quot;:
[    4.221491] 0x000000000000-0x000000100000 : &quot;u-boot&quot;
[    4.227746] 0x000000100000-0x000000500000 : &quot;uImage&quot;
[    4.233956] 0x000000500000-0x000002000000 : &quot;rootfs&quot;
[    4.240467] mv643xx_eth: MV-643xx 10/100/1000 ethernet driver version 1.4
[    4.247440] mv643xx_eth smi: probed
[    4.252106] mv643xx_eth_port mv643xx_eth_port.0: eth0: port 0 with MAC address 00:50:43:8a:24:19
[    4.261050] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[    4.268089] Initializing USB Mass Storage driver...
[    4.273157] usbcore: registered new interface driver usb-storage
[    4.279137] USB Mass Storage support registered.
[    4.284092] rtc-mv rtc-mv: rtc core: registered rtc-mv as rtc0
[    4.290146] cpuidle: using governor ladder
[    4.295687] mmc0: mvsdio driver initialized, using GPIO 47 for card detection
[    4.303119] leds-gpio: probe of leds-gpio failed with error -22
[    4.309706] TCP cubic registered
[    4.312948] NET: Registered protocol family 17
[    4.317685] 8021q: 802.1Q VLAN Support v1.8
[    4.322082] rtc-mv rtc-mv: setting system clock to 2025-05-25 21:35:06 UTC (1748208906)
[    4.542233] ata1: SATA link down (SStatus 0 SControl F300)
[    4.892223] ata2: SATA link down (SStatus 0 SControl F300)
[    4.898583] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000000: 0x0527 instead
[    4.907451] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000004: 0xfc0c instead
[    4.916301] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000008: 0x3951 instead
[    4.925148] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000000c: 0x1000 instead
[    4.933995] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000018: 0x051c instead
[    4.942841] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000001c: 0x0205 instead
[    4.951677] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000020: 0x694c instead
[    4.960528] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000024: 0x2d78 instead
[    4.969375] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000028: 0x2e33 instead
[    4.978226] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00000060: 0x0002 instead
[    4.987075] Further such events for this erase block will not be printed
[    5.000568] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004000: 0xd7d4 instead
[    5.009429] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004004: 0x7dd3 instead
[    5.018279] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004008: 0x1cf3 instead
[    5.027126] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000400c: 0xd504 instead
[    5.035973] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004010: 0x4f3a instead
[    5.044818] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004014: 0x567f instead
[    5.053666] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004018: 0xdad2 instead
[    5.062515] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000401c: 0x413d instead
[    5.071351] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004020: 0xc8b3 instead
[    5.080200] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00004024: 0x4c45 instead
[    5.089044] Further such events for this erase block will not be printed
[    5.102498] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008000: 0x13af instead
[    5.111336] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008004: 0x1253 instead
[    5.120189] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008008: 0xc8de instead
[    5.129043] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000800c: 0x946f instead
[    5.137890] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008010: 0xea47 instead
[    5.146740] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008014: 0x39b0 instead
[    5.155594] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008018: 0x117b instead
[    5.164440] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000801c: 0xfdec instead
[    5.173287] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008020: 0xf1df instead
[    5.182123] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00008024: 0xfa47 instead
[    5.190970] Further such events for this erase block will not be printed
[    5.204419] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c000: 0x431b instead
[    5.213270] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c004: 0xf9b3 instead
[    5.222110] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c008: 0x07c7 instead
[    5.230961] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c00c: 0x3113 instead
[    5.239807] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c010: 0xb50e instead
[    5.248655] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c014: 0xb4ba instead
[    5.257502] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c018: 0xa491 instead
[    5.266349] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c01c: 0xd2a5 instead
[    5.275196] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c020: 0x3237 instead
[    5.284043] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0000c024: 0xc936 instead
[    5.292887] Further such events for this erase block will not be printed
[    5.306325] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010000: 0x6826 instead
[    5.315180] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010004: 0x8f01 instead
[    5.324030] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010008: 0x80ef instead
[    5.332878] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001000c: 0xbd18 instead
[    5.341712] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010010: 0x896e instead
[    5.350563] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010014: 0x4495 instead
[    5.359411] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010018: 0x016c instead
[    5.368257] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001001c: 0x010e instead
[    5.377105] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010020: 0x5abe instead
[    5.385952] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00010024: 0xd802 instead
[    5.394796] Further such events for this erase block will not be printed
[    5.408239] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014000: 0x21ba instead
[    5.417097] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014004: 0x2a62 instead
[    5.425949] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014008: 0x4969 instead
[    5.434795] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001400c: 0x73f6 instead
[    5.443642] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014010: 0x39be instead
[    5.452490] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014014: 0xb754 instead
[    5.461325] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014018: 0xe1ce instead
[    5.470175] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001401c: 0x99ec instead
[    5.479022] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014020: 0x2f33 instead
[    5.487869] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00014024: 0x4d39 instead
[    5.496713] Further such events for this erase block will not be printed
[    5.510142] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018000: 0x7ae7 instead
[    5.518997] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018004: 0x273c instead
[    5.527849] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018008: 0x5b39 instead
[    5.536696] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001800c: 0xddac instead
[    5.545542] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018010: 0x08a8 instead
[    5.554389] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018014: 0x8508 instead
[    5.563237] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018018: 0xd357 instead
[    5.572072] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001801c: 0x6c99 instead
[    5.580923] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018020: 0x9c9d instead
[    5.589770] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x00018024: 0xf17b instead
[    5.598614] Further such events for this erase block will not be printed
[    5.612041] jffs2_scan_eraseblock(): Magic bitmask 0x1985 not found at 0x0001c000: 0</code></pre></div><p>I need help, but i think that i&#039;m not far from a correct boot</p>											<p class="post-edited">(Last edited by <strong>ramponis</strong> on 8 Mar 2013, 16:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194627">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						12 Mar 2013, 11:36					</div>
				</div>
				<div class="post-content content">
					<p>Boot correctly!!!</p><p>I have compiled the 10.03 source.<br />Modified the kernel_config to include sata and usb support in kernel</p><div class="codebox"><pre><code>         __  __                      _ _
        |  \/  | __ _ _ ____   _____| | |
        | |\/| |/ _` | &#039;__\ \ / / _ \ | |
        | |  | | (_| | |   \ V /  __/ | |
        |_|  |_|\__,_|_|    \_/ \___|_|_|
 _   _     ____              _
| | | |   | __ )  ___   ___ | |_
| | | |___|  _ \ / _ \ / _ \| __|
| |_| |___| |_) | (_) | (_) | |_
 \___/    |____/ \___/ \___/ \__|  ** uboot_ver:v0.0.2 **

 ** MARVELL BOARD: MONO LE

U-Boot 1.1.4 (Jun 29 2009 - 17:20:47) Marvell version: 3.4.14

U-Boot code: 00600000 -&gt; 0067FFF0  BSS: -&gt; 006CDE60

Soc: 88F6192 A0 (DDR2)
CPU running @ 800Mhz L2 running @ 400Mhz
SysClock = 200Mhz , TClock = 166Mhz

DRAM CAS Latency = 3 tRP = 3 tRAS = 8 tRCD=3
DRAM CS[0] base 0x00000000   size 128MB
DRAM Total size 128MB  16bit width
Addresses 8M - 0M are saved for the U-Boot usage.
Mem malloc Initialization (8M - 7M): Done
NAND:32 MB

Marvell Serial ATA Adapter
Integrated Sata device found
[0 0 0]: Enable DMA mode
  Device 0 @ 0 0:
Model: MAXTOR STM3250820AS                      Firm: 3.AAE    Ser#:             6QE09B50
            Type: Hard Disk
            Supports 48-bit addressing
            Capacity: 238475.1 MB = 232.8 GB (488397168 x 512)


CPU : Marvell Feroceon (Rev 1)
Scanning partition header:
Warning: singn PrEr not found, use default offset 000c0000
Warning: singn KrNl not found, use default offset 002c0000
Warning: singn RoOt not found, use default offset 00540000

Streaming disabled
Write allocate disabled


USB 0: host mode
PEX 0: interface detected no Link.
Net:   egiga0 [PRIME]
Hit any key to stop autoboot:  0
Marvell&gt;&gt;
Marvell&gt;&gt;
Marvell&gt;&gt; printenv
bootdelay=1
baudrate=115200
loads_echo=0
CASset=min
MALLOC_len=1
ethprime=egiga0
bootargs_end=:::DB88FXX81:eth0:none
image_name=uImage
ethaddr=00:50:43:8a:24:19
ethmtu=1500
mvNetConfig=mv_net_config=(00:11:88:0f:62:81,0:1:2:3),mtu=1500
usb0Mode=host
netretry=no
rcvrip=169.254.100.100
loadaddr=0x02000000
autoload=no
uboot_ver=v0.0.2
ethact=egiga0
filesize=5a0000
fileaddr=40000
netmask=255.255.255.0
ipaddr=192.168.0.24
serverip=192.168.0.23
arcNumber=1681
bootargs=console=ttyS0,115200 root=/dev/sda1 rw rootfstype=ext2 init=/etc/preinit
stdin=serial
stdout=serial
stderr=serial
mainlineLinux=yes
enaMonExt=no
enaCpuStream=no
enaWrAllo=no
pexMode=RC
disL2Cache=no
setL2CacheWT=yes
disL2Prefetch=yes
enaICPref=yes
enaDCPref=yes
sata_dma_mode=yes
netbsd_en=no
vxworks_en=no
bootargs_root=root=/dev/ram0 rootfstype=cramfs init=/etc/rc.preroot initrd=0x800000,0x1000000
console=console=ttyS0,115200 mtdparts=nand_mtd:0xa0000@0x0(uboot),0x00010000@0x000a0000(param),0x00200000@0x000c0000(preroot),0x00280000@0x002c0000(uimage),0x01a00000@0x00540000(rootfs),0x000c0000@0x01f40000(misc),32m@0x0(flash)
bootcmd_f=nand reset; nand read.e 0x800000 0x000c4000 0x00200200; check_crc32 PrEr;
bootcmd=nand reset; nand read.e 0x800000 0x000c4000 0x00200200; check_crc32 PrEr; nand reset; nand read.e 0x40000 0x002c4000 0x00200200; check_crc32 KrNl; setenv bootargs $(console) $(bootargs_root);  bootm 0x40000;
standalone=fsload 0x2000000 $(image_name);setenv bootargs $(console) root=/dev/mtdblock0 rw ip=$(ipaddr):$(serverip)$(bootargs_end); bootm 0x2000000;
disaMvPnp=no
enaAutoRecovery=no

Environment size: 1583/16379 bytes
Marvell&gt;&gt; setenv bootcmd nand read 0x40000 0x00100000 0x400000\; bootm 0x40000\;
Marvell&gt;&gt; setenv
Usage:
setenv  - set environment variables

Marvell&gt;&gt; saveenv
Saving Environment to NAND...
Erasing redundant Nand...Writing to redundant Nand... Erasing Nand...Writing to Nand... done
Marvell&gt;&gt; boot

NAND read: device 0 offset 0x100000, size 0x400000
 4194304 bytes read: OK
## Booting image at 00040000 ...
   Image Name:   Linux-2.6.30.10
   Created:      2013-03-11  10:51:31 UTC
   Image Type:   ARM Linux Kernel Image (uncompressed)
   Data Size:    1012476 Bytes = 988.7 kB
   Load Address: 00008000
   Entry Point:  00008000
   Verifying Checksum ... OK
OK

Starting kernel ...

Uncompressing Linux... done, booting the kernel.
Linux version 2.6.30.10 (ramponis@ramponis-desktop) (gcc version 4.3.3 (GCC) ) #13 Mon Mar 11 11:51:25 CET 2013
CPU: Feroceon 88FR131 [56251311] revision 1 (ARMv5TE), cr=00053977
CPU: VIVT data cache, VIVT instruction cache
Machine: Marvell RD-88F6192-NAS Development Board
Memory policy: ECC disabled, Data cache writeback
Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 32512
Kernel command line: console=ttyS0,115200 root=/dev/sda1 rw rootfstype=ext2 init=/etc/preinit
NR_IRQS:114
PID hash table entries: 512 (order: 9, 2048 bytes)
Dentry cache hash table entries: 16384 (order: 4, 65536 bytes)
Inode-cache hash table entries: 8192 (order: 3, 32768 bytes)
Memory: 128MB = 128MB total
Memory: 126944KB available (2504K code, 187K data, 104K init, 0K highmem)
Calibrating delay loop... 794.62 BogoMIPS (lpj=3973120)
Mount-cache hash table entries: 512
CPU: Testing write buffer coherency: ok
net_namespace: 528 bytes
NET: Registered protocol family 16
Kirkwood: MV88F6192-A0, TCLK=166666667.
Feroceon L2: Enabling L2
Feroceon L2: Cache support initialised.
PCI: bus0: Fast back to back transfers disabled
bio: create slab &lt;bio-0&gt; at 0
SCSI subsystem initialized
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 4096 (order: 3, 32768 bytes)
TCP bind hash table entries: 4096 (order: 2, 16384 bytes)
TCP: Hash tables configured (established 4096 bind 4096)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 4.0 (2009/01/31) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
msgmni has been set to 248
alg: No test for stdrng (krng)
io scheduler noop registered
io scheduler deadline registered (default)
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250.0: ttyS0 at MMIO 0xf1012000 (irq = 33) is a 16550A
console [ttyS0] enabled
Driver &#039;sd&#039; needs updating - please use bus_type methods
sata_mv sata_mv.0: version 1.28
sata_mv sata_mv.0: slots 32 ports 2
scsi0 : sata_mv
scsi1 : sata_mv
ata1: SATA max UDMA/133 irq 21
ata2: SATA max UDMA/133 irq 21
MV-643xx 10/100/1000 ethernet driver version 1.4
mv643xx_eth smi: probed
net eth0: port 0 with MAC address 00:50:43:8a:24:19
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
orion-ehci orion-ehci.0: Marvell Orion EHCI
orion-ehci orion-ehci.0: new USB bus registered, assigned bus number 1
orion-ehci orion-ehci.0: irq 19, io mem 0xf1050000
orion-ehci orion-ehci.0: USB 2.0 started, EHCI 1.00
usb usb1: configuration #1 chosen from 1 choice
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
rtc-mv rtc-mv: rtc core: registered rtc-mv as rtc0
i2c /dev entries driver
cpuidle: using governor ladder
TCP westwood registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
rtc-mv rtc-mv: setting system clock to 2025-05-29 16:34:07 UTC (1748536447)
usb 1-1: new high speed USB device using orion-ehci and address 2
ata1: SATA link up 3.0 Gbps (SStatus 123 SControl F300)
usb 1-1: configuration #1 chosen from 1 choice
hub 1-1:1.0: USB hub found
hub 1-1:1.0: 4 ports detected
ata1.00: ATA-7: MAXTOR STM3250820AS, 3.AAE, max UDMA/133
ata1.00: 488397168 sectors, multi 0: LBA48 NCQ (depth 31/32)
ata1.00: configured for UDMA/133
scsi 0:0:0:0: Direct-Access     ATA      MAXTOR STM325082 3.AA PQ: 0 ANSI: 5
sd 0:0:0:0: [sda] 488397168 512-byte hardware sectors: (250 GB/232 GiB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn&#039;t support DPO or FUA
 sda: sda1 sda2 sda3
sd 0:0:0:0: [sda] Attached SCSI disk
ata2: SATA link down (SStatus 0 SControl F300)
VFS: Mounted root (ext2 filesystem) on device 8:1.
Freeing init memory: 104K
Please be patient, while OpenWrt loads ...
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
- init -

Please press Enter to activate this console. device eth0 entered promiscuous mode
PPP generic driver version 2.4.2
ip_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 24
register_blkdev: cannot get major 8 for sd
register_blkdev: cannot get major 65 for sd
register_blkdev: cannot get major 66 for sd
register_blkdev: cannot get major 67 for sd
register_blkdev: cannot get major 68 for sd
register_blkdev: cannot get major 69 for sd
register_blkdev: cannot get major 70 for sd
register_blkdev: cannot get major 71 for sd
register_blkdev: cannot get major 128 for sd
register_blkdev: cannot get major 129 for sd
register_blkdev: cannot get major 130 for sd
register_blkdev: cannot get major 131 for sd
register_blkdev: cannot get major 132 for sd
register_blkdev: cannot get major 133 for sd
register_blkdev: cannot get major 134 for sd
register_blkdev: cannot get major 135 for sd
nf_conntrack version 0.5.0 (2048 buckets, 8192 max)
CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use
nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or
sysctl net.netfilter.nf_conntrack_acct=1 to enable it.
xt_time: kernel timezone is -0000
IMQ driver loaded successfully.
        Hooking IMQ before NAT on PREROUTING.
        Hooking IMQ after NAT on POSTROUTING.
eth0: link up, 100 Mb/s, full duplex, flow control disabled
br-lan: port 1(eth0) entering forwarding state



BusyBox v1.15.3 (2012-03-06 13:55:59 CET) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 Backfire (10.03, r24524) --------------------------
  * 1/3 shot Kahlua    In a shot glass, layer Kahlua
  * 1/3 shot Bailey&#039;s  on the bottom, then Bailey&#039;s,
  * 1/3 shot Vodka     then Vodka.
 ---------------------------------------------------
root@BlackArmor:~#</code></pre></div><p>I have modified the env</p><p>added these</p><p>setenv mainlineLinux yes<br />setenv arcNumber 1681</p><p>modified these</p><p>setenv console ttyS0,115200;<br />setenv bootcmd nand read 0x40000 0x00100000 0x400000\; bootm 0x40000\;<br />setenv bootargs console=ttyS0,115200 root=/dev/sda1 rw rootfstype=ext2 init=/etc/preinit</p><p>and saved.</p><p>It boot using a sata ext2 partition as root<br />Ethernet, usb and sata work correcty.</p><p>I have only a problem...<br />After every reset the uboot reset the bootcmd to:</p><p>bootcmd=nand reset; nand read.e 0x800000 0x000c4000 0x00200200; check_crc32 PrEr; nand reset; nand read.e 0x40000 0x002c4000 0x00200200; check_crc32 KrNl; setenv bootargs $(console) $(bootargs_root);&nbsp; bootm 0x40000;</p><p>So the device doen&#039;t load openwrt automatically and i need to set the env again and then run: boot<br />There is a solution?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317657">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">za4em</div>
					<div class="post-datetime">
						1 Apr 2016, 11:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>ramponis wrote:</cite><blockquote><p>Boot correctly!!!</p></blockquote></div><p>Sorry for necroposting, but what was the end of the story? Were you able to make it load openwrt automatically? Is it usable?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p317682">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ramponis</div>
					<div class="post-datetime">
						1 Apr 2016, 13:30					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>za4em wrote:</cite><blockquote><p>what was the end of the story?</p></blockquote></div><p>No, but now i have not time for it...</p><div class="quotebox"><cite>za4em wrote:</cite><blockquote><p>Were you able to make it load openwrt automatically?</p></blockquote></div><p>Not for now</p><div class="quotebox"><cite>za4em wrote:</cite><blockquote><p>Is it usable?</p></blockquote></div><p>Yes it it very stable and fast</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>