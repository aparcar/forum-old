<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Speedport W500V runs Kamikaze r8025</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p52629">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						22 Jul 2007, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><p>There i&#039;ve prepared a OpenWrt image for the famous Speedport W500V (and perhaps the W500, 500V, please report) . It is just a proof of concept but it works.<br />The image can be downloaded from <a href="http://vvv.borkum.net/files/w500v/">here</a>.</p><p>What I ve done and why:<br />1. Prepared a Kernel (2.6.8.1) with the original firmware build suite from the telekom.<br />1.a) patsched out some bugs found in 2.6.8.1 release. (ip_dst_cache cleanup)<br />2. Prepared a Kamikaze tar.gz-filesystem image with my needed options.<br />3. Merged the t-kom binary only utils and build kamikaze filesystem.<br />4. Build an own /etc/preinit to have a failsafe mode.<br />5. Build with the kernel and the filesystem the new firmware image using the broadcom binary-only tools, because the kamikaze tools don&#039;t produce the right format.</p><p>In 1. I adopted the /drivers/mtd/maps/bcrm963xx.c driver to the old kernel, with some small patching e.g. added mini_fo.<br />Also I must not enable QoS, VLAN and some other interesting options because this breaks the binary only modules for wireless lan, wan, dsl. <br />QoS and some other features extends struct sk_buff, which is used by the binary onley stuff and breaks it. (kernel panic random segfaults)</p><p>My image has no support for VoIP, because of space.</p><p>This was done by hand.</p><p>cya<br />--- Edits:<br />- changed URL so every collected material vor the Speedport W500V is downloadable<br />- v2 works okay<br />- v3 has support for leds, but some times makes trouble, when loading atm modules<br />- v4 fixed some bugs. made led handling more complete, a small portal webinterface has been added</p>											<p class="post-edited">(Last edited by <strong>abra</strong> on 16 Jul 2008, 23:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61272">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">tekknokrat</div>
					<div class="post-datetime">
						5 Jan 2008, 16:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>nice to see some work on w500v.<br />I think the breakage with qos and other parts are because of heavy changes in kernel since 2.6.8.<br />Can you explain why did the voip didn&#039;t work?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61317">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">tekknokrat</div>
					<div class="post-datetime">
						6 Jan 2008, 14:52					</div>
				</div>
				<div class="post-content content">
					<p>Yesterday I tried your image which looks promising to me.</p><p>Some Questions which burns in my mind: </p><p>Do you think the wl0 device could be controlled with the generic wireless-tools?<br />Do you think someone could change the adsl port in an eth0 port for using the box as an router?<br />What kind of hardware is the pot/voip part?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61343">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						7 Jan 2008, 04:35					</div>
				</div>
				<div class="post-content content">
					<p>Holla, nice to see that some tries my work.</p><div class="quotebox"><cite>tekknokrat wrote:</cite><blockquote><p>nice to see some work on w500v.</p></blockquote></div><p>It&#039;s no official openwrt work, it was just a try to get this route _useable_.</p><div class="quotebox"><cite>tekknokrat wrote:</cite><blockquote><p>I think the breakage with qos and other parts are because of heavy changes in kernel since 2.6.8.<br />Can you explain why did the voip didn&#039;t work?</p></blockquote></div><p>The QoS does not work, because the telekom binary only kernel modules for the dsl, atm, ethernet and wlan controller begin to segfault when i enable QoS.</p><p>Voip did not work for two reasons, firstly i thought it is just problem of space in the flash. but i solved that.<br />Now it just segfaults, when started. strace says it doesn&#039;t like the openwrt uclibcxx.</p><div class="quotebox"><cite>tekknokrat wrote:</cite><blockquote><p>Yesterday I tried your image which looks promising to me.</p><p>Some Questions which burns in my mind: </p><p>Do you think the wl0 device could be controlled with the generic wireless-tools?<br />Do you think someone could change the adsl port in an eth0 port for using the box as an router?<br />What kind of hardware is the pot/voip part?</p></blockquote></div><p>No the wl0 device is configured only via the supplies wl and nas tools.</p><p>The adsl port is an atm port you can configure it via adslctl and atmctl.<br />with br2864ctl you can create your ethernet if aftwerwards.</p><p>Just have look in /etc/init.d/nas0 and /etc/config/system</p><p>the voip part is undocumented broadcom crap.</p><p>btw i have put some scripts in /etc/init.d and /etc/rcS.d that are not openwrt standard, but make some things regarding dsl/ethernet/pppoe easier. just have a look and ask.</p><p>cya</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61364">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nbd</div>
					<div class="post-datetime">
						7 Jan 2008, 16:08					</div>
				</div>
				<div class="post-content content">
					<p>Hi guys,</p><p>sorry to say this, but I think that at the moment, working on the Broadcom 63xx platform is a complete waste of time.<br />Here&#039;s why:<br />- No driver sources<br />- Crappy driver binaries, locked into an old kernel<br />- *No* help, support or anything from Broadcom<br />- Frequent GPL violations on the platform, many of which seem to be caused by Broadcom themselves<br />Do you really want to reward Broadcom for such crappy behavior by giving them a usable development platform?</p><p>Let&#039;s look at the alternatives to BCM963xx: <br />- For TI AR7 we have open drivers and the port is making progress<br />- For Infineon Danube/Amazon we have open drivers and Infineon is even participating in OpenWrt development.</p><p>With open alternatives being available, why waste time helping Broadcom with their ugly mess they call software?<br />Maybe you won&#039;t agree with my choice, but I choose to spend my time on things that generate incentive for hardware<br />manufacturers to open up and release their drivers under a free license, instead of making it easier for them to<br />keep things the way they are.</p><p>comments/flames welcome.</p><p>- Felix</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61377">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						7 Jan 2008, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>nbd wrote:</cite><blockquote><p>sorry to say this, but I think that at the moment, working on the Broadcom 63xx platform is a complete waste of time.</p></blockquote></div><p>You are right of course. It was just a triy to make this router useful.<br />Not only Broadcom makes crappy undocumented hardware, Telekom cripples it a bit mor.</p><p>Work has stopped already. I reached my goals: More control over the router + openvpn server and client + wireless access point.<br />I answer just to help a bit and fix bugs of my firmware as the time investment is not to large.</p><div class="quotebox"><cite>nbd wrote:</cite><blockquote><p>Here&#039;s why:<br />- No driver sources<br />- Crappy driver binaries, locked into an old kernel<br />- *No* help, support or anything from Broadcom<br />- Frequent GPL violations on the platform, many of which seem to be caused by Broadcom themselves<br />Do you really want to reward Broadcom for such crappy behavior by giving them a usable development platform?</p><p>Let&#039;s look at the alternatives to BCM963xx: <br />- For TI AR7 we have open drivers and the port is making progress<br />- For Infineon Danube/Amazon we have open drivers and Infineon is even participating in OpenWrt development.</p><p>With open alternatives being available, why waste time helping Broadcom with their ugly mess they call software?<br />Maybe you won&#039;t agree with my choice, but I choose to spend my time on things that generate incentive for hardware<br />manufacturers to open up and release their drivers under a free license, instead of making it easier for them to<br />keep things the way they are.</p></blockquote></div><p><span style="color: #FF0000"><strong>!</strong></span> you&#039;re quite right <span style="color: #FF0000"><strong>!</strong></span></p><p>cya keep up your good work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61652">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">tekknokrat</div>
					<div class="post-datetime">
						13 Jan 2008, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>@abra: thanks for your answer.<br />My provider doesnt use pppoe so I can&#039;t test your firmware in this way. <br />I now use it as an router and try to forget about voip ;-)</p><div class="quotebox"><blockquote><p>The adsl port is an atm port you can configure it via adslctl and atmctl.<br />with br2864ctl you can create your ethernet if aftwerwards.</p></blockquote></div><p>Do you mean the port is usable for ethernet, too? Someone mentioned its only wired via the 2&nbsp; solder joints for dsl</p><p>@nbd wrote:</p><div class="quotebox"><blockquote><p>sorry to say this, but I think that at the moment, working on the Broadcom 63xx platform is a complete waste of time.</p></blockquote></div><p>I also agree with your oppinion.&nbsp; <br />Its really a waste of time trying to reach some goal with closed / nonconform utils!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61673">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						14 Jan 2008, 09:28					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>tekknokrat wrote:</cite><blockquote><p>@abra: thanks for your answer.<br />My provider doesnt use pppoe so I can&#039;t test your firmware in this way. <br />I now use it as an router and try to forget about voip ;-)</p><div class="quotebox"><blockquote><p>The adsl port is an atm port you can configure it via adslctl and atmctl.<br />with br2864ctl you can create your ethernet if aftwerwards.</p></blockquote></div><p>Do you mean the port is usable for ethernet, too? Someone mentioned its only wired via the 2&nbsp; solder joints for dsl.</p></blockquote></div><p>The connector is only for DSL/ATM. What I meant ist, that you can extract an ethernet tunnel (Ethernet over ATM) from that port.</p><p>BTW What connection type do you have? And how do you use it as router? Wireless router?</p><p>cya</p>											<p class="post-edited">(Last edited by <strong>abra</strong> on 14 Jan 2008, 16:30)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62066">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">knurps</div>
					<div class="post-datetime">
						22 Jan 2008, 12:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi i am new to kamikaze and just want to make some tryouts with my speedport w500v.</p><p>I have some problems that i get not solved right now and hope to get some help :-)</p><p>I can&#039;t change the ip of the br0 device from 192.168.1.1 in anything else except other ips in range 192.168.1.1-254. Adapt the iptable rules doesn&#039;t work for me.</p><p>General configuration with /etc/config/network doesn&#039;t work either the same for /etc/config/system. I had to create both files from sample config files but they seem to be ignored.</p><p>Maybe someone can provide a few general information about configuration.</p><p>Thx </p><p>Knurps</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p62143">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						23 Jan 2008, 20:10					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>knurps wrote:</cite><blockquote><p>Hi i am new to kamikaze and just want to make some tryouts with my speedport w500v.</p><p>I have some problems that i get not solved right now and hope to get some help :-)</p></blockquote></div><p>Of course :)</p><div class="quotebox"><cite>knurps wrote:</cite><blockquote><p>I can&#039;t change the ip of the br0 device from 192.168.1.1 in anything else except other ips in range 192.168.1.1-254. Adapt the iptable rules doesn&#039;t work for me.</p><p>General configuration with /etc/config/network doesn&#039;t work either the same for /etc/config/system. I had to create both files from sample config files but they seem to be ignored.</p></blockquote></div><p>What you have you done in detail? Changing <em>/etc/config/system</em> and after this try <em>/etc/init.d/br0 restart</em> or a reboot of the router should do.<br />And yes changing <em>/etc/config/network</em> is ignored. Why? Have a look at the end of this answer.</p><p>Concerning the firewall rules: Because I did it for my own testing, the FW has not the default OpenWrt-Firewall. It&#039;s using a self made script set called <em>iptpf</em>, written by me, but this is disabled by default. If you understand <em>iptables</em> have a look in <em>/rom/etc/pf/rules/filter</em> and <em>/rom/etc/pf/rules/nat</em>.</p><div class="quotebox"><cite>knurps wrote:</cite><blockquote><p>Maybe someone can provide a few general information about configuration.</p></blockquote></div><p>The time I made this FW-image, I was new to kamikaze, too, because of that, I made some very specialised scripts and settings in <em>/etc/init.d</em> and <em>/etc/config</em>.<br />All you can configure with <em>uci</em> is in <em>/etc/config/system</em>.<br />Everything else lies in <em>/etc/init.d</em></p><p>Scripts that should be started on boot-up are in <em>/etc/rcS.d/S[0-9][0-9]*</em>.</p><p>But ask more precise if you want a good answer.</p><p>cya</p>											<p class="post-edited">(Last edited by <strong>abra</strong> on 23 Jan 2008, 20:12)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68383">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						18 May 2008, 21:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>First of all a big Thanks on abra for this perfect Firmware.</p><br /><p>I have flashed the Firmware (v3) on a W500V and it works perfect. <br />But i have 2 Problems.<br />Is it possible to compile the follow packages for this Plattform:<br />kmod-fs-cifs<br />kmod-loop</p><p>and in the ipkg.conf from this firmware is a old repro not available<br />(src snapshots <a href="http://downloads.openwrt.org/snapshots/brcm63xx-2.6/packages)">http://downloads.openwrt.org/snapshots/ … /packages)</a></p><br /><br /><p>Sorry for my bad English, but i work on it to make it better. </p><p>Thanks a lot,<br />Robert.</p>											<p class="post-edited">(Last edited by <strong>RobertD</strong> on 22 May 2008, 20:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68462">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						20 May 2008, 21:25					</div>
				</div>
				<div class="post-content content">
					<p>@ Update</p><p>i get compiled successful the cifs and loop modules.<br />But i have problems with mounting the swapfile: </p><div class="codebox"><pre><code>root@openwrt:/lib/modules/2.6.8.1# lsmod | grep loop
loop                    9936  0</code></pre></div><div class="codebox"><pre><code> losetup /dev/loop/0 /tmp/swap</code></pre></div><div class="codebox"><pre><code>root@openwrt:/dev/loop# losetup /dev/loop/0 /tmp/swap
root@openwrt:/dev/loop# swapon /dev/loop/0
swapon: /dev/loop/0: Function not implemented</code></pre></div><p>Can anybody help me with this problem ?</p><p>I dont know what i can make to fix this Problem.</p><p>Must be rebuild the swap-uitls package ?<br />Must be rebuild the kernel-image ?</p><p>Robert</p>											<p class="post-edited">(Last edited by <strong>RobertD</strong> on 20 May 2008, 21:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68466">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">abraXxl</div>
					<div class="post-datetime">
						21 May 2008, 00:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>@ Update<br />i get compiled successful the cifs and loop modules.<br />But i have problems with mounting the swapfile:</p></blockquote></div><p>Fine,</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><div class="codebox"><pre><code>root@openwrt:/lib/modules/2.6.8.1# lsmod | grep loop
loop                    9936  0</code></pre></div><div class="codebox"><pre><code> losetup /dev/loop/0 /tmp/swap</code></pre></div><div class="codebox"><pre><code>root@openwrt:/dev/loop# losetup /dev/loop/0 /tmp/swap
root@openwrt:/dev/loop# swapon /dev/loop/0
swapon: /dev/loop/0: Function not implemented</code></pre></div></blockquote></div><p>The loop device is ok, but the swap support is not in kernel, sorry i had no reason to enable it. </p><p>I think you have to recompile the kernel. with swap support. An the compile a new image (kernel + roorfs).<br />For that use the fsworks-archive in the download directory (link in first post now).<br />You need the kernel image and a tar of all non system directories from your current speedport rootfs.<br />Look at the Makefile to know whats happening.</p><p>If you have questions don&#039;t bother to ask.</p><p>g&#039;f8 g&#039;n8</p><p>abra</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68545">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						22 May 2008, 14:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi abra,</p><p>Thanks for Reply</p><p>I use the t-com sources 1.37 to build the vmlinux, if itÂ´s created then i copied it to your folder (v3/kernel/linux/)<br />When i build the t-com kernel (i edit the kernel-config at /home/compil/firmware/t-com/bcm963xx_SpeedportW500V.01.37.v1L.300L01.V27_consumer/hostTools/scripts/defconfig-bcm.template). </p><br /><p>The image will be created (make.log)<br /> </p><div class="codebox"><pre><code>root@linux:/home/compil/firmware/bcm963xx_fs_kernel.v3.fsworks/v3# make PROFILE=96348GWV_DT
cp -a fs.src tmp/fs
hosttools/mkdev.sh tmp/fs
mknod: `tmp/fs/dev/initctl&#039;: File exists
mknod: `tmp/fs/dev/mem&#039;: File exists
mknod: `tmp/fs/dev/kmem&#039;: File exists
mknod: `tmp/fs/dev/null&#039;: File exists
mknod: `tmp/fs/dev/port&#039;: File exists
mknod: `tmp/fs/dev/zero&#039;: File exists
mknod: `tmp/fs/dev/random&#039;: File exists
mknod: `tmp/fs/dev/urandom&#039;: File exists
mknod: `tmp/fs/dev/ptyp0&#039;: File exists
mknod: `tmp/fs/dev/ptyp1&#039;: File exists
mknod: `tmp/fs/dev/ttyp0&#039;: File exists
mknod: `tmp/fs/dev/ttyp1&#039;: File exists
mknod: `tmp/fs/dev/tty0&#039;: File exists
mknod: `tmp/fs/dev/tty1&#039;: File exists
mknod: `tmp/fs/dev/ttyS0&#039;: File exists
mknod: `tmp/fs/dev/tty&#039;: File exists
mknod: `tmp/fs/dev/console&#039;: File exists
mknod: `tmp/fs/dev/ptmx&#039;: File exists
mknod: `tmp/fs/dev/ppp&#039;: File exists
mknod: `tmp/fs/dev/bcmatm0&#039;: File exists
mknod: `tmp/fs/dev/brcmboard&#039;: File exists
mknod: `tmp/fs/dev/bcmvdsl0&#039;: File exists
mknod: `tmp/fs/dev/bcmadsl0&#039;: File exists
mknod: `tmp/fs/dev/bcmaal20&#039;: File exists
mknod: `tmp/fs/dev/bcmles0&#039;: File exists
mknod: `tmp/fs/dev/bcm&#039;: File exists
mknod: `tmp/fs/dev/mtdblock0&#039;: File exists
mknod: `tmp/fs/dev/mtdblock1&#039;: File exists
mknod: `tmp/fs/dev/mtdblock2&#039;: File exists
mknod: `tmp/fs/dev/mtdblock3&#039;: File exists
mknod: `tmp/fs/dev/mtdblock4&#039;: File exists
mknod: `tmp/fs/dev/mtdblock5&#039;: File exists
mknod: `tmp/fs/dev/mtdblock6&#039;: File exists
mknod: `tmp/fs/dev/mtdblock7&#039;: File exists
mknod: `tmp/fs/dev/mtd0&#039;: File exists
mknod: `tmp/fs/dev/mtd1&#039;: File exists
mknod: `tmp/fs/dev/mtd2&#039;: File exists
mknod: `tmp/fs/dev/mtd3&#039;: File exists
mknod: `tmp/fs/dev/mtd4&#039;: File exists
mknod: `tmp/fs/dev/mtd5&#039;: File exists
mknod: `tmp/fs/dev/mtd6&#039;: File exists
mknod: `tmp/fs/dev/mtd7&#039;: File exists
mknod: `tmp/fs/dev/mtd0ro&#039;: File exists
mknod: `tmp/fs/dev/mtd1ro&#039;: File exists
mknod: `tmp/fs/dev/mtd2ro&#039;: File exists
mknod: `tmp/fs/dev/mtd3ro&#039;: File exists
mknod: `tmp/fs/dev/mtd4ro&#039;: File exists
mknod: `tmp/fs/dev/mtd5ro&#039;: File exists
mknod: `tmp/fs/dev/mtd6ro&#039;: File exists
mknod: `tmp/fs/dev/mtd7ro&#039;: File exists
ln: creating symbolic link `tmp/fs/dev/fd/fd&#039;: No such file or directory
rm -rf tmp/fs/lib/modules tmp/fs/linuxrc
moddir=&quot;`find -L kernel -name &quot;2.*[0-9]&quot; | tail -n 1`&quot;; \
        kver=&quot;`basename $moddir`&quot;; \
        mkdir -p &quot;tmp/fs/lib/modules/$kver&quot;; \
        find $moddir -name &quot;*.ko&quot; -exec cp {} &quot;tmp/fs/lib/modules/$kver&quot; \; \

hosttools/mksquashfs tmp/fs tmp/sqfs.img -noappend -be -lzma -no-fragments -noI
Creating big endian filesystem on tmp/sqfs.img, block size 65536.

Big endian filesystem, data block size 65536, uncompressed data, compressed metadata, no fragments
Filesystem size 3495.72 Kbytes (3.41 Mbytes)
        17.18% of uncompressed filesystem size (20344.66 Kbytes)
Inode table size 32639 bytes (31.87 Kbytes)
        100.00% of uncompressed inode table size (32639 bytes)
Directory table size 16608 bytes (16.22 Kbytes)
        100.00% of uncompressed directory table size (16608 bytes)
Number of duplicate files found 334
Number of inodes 1387
Number of files 698
Number of symbolic links  505
Number of device nodes 49
Number of fifo nodes 1
Number of socket nodes 0
Number of directories 134
Number of uids 2
        dx-operator (1000)
        root (0)
Number of gids 0
/opt/toolchains/uclibc-crosstools_gcc-3.4.2_uclibc-20050502/bin/mips-linux-uclibc-objcopy -O binary tmp/vmlinux tmp/vmlinux.bin
hosttools/cmplzma -k -2 tmp/vmlinux tmp/vmlinux.bin tmp/vmlinux.lz
Code text starts: textAddr=0x80010000  Program entry point: 0x801B0018,
Before compression: 1773701  After compression (level=2): 548305
Percent Compression = 69.09
hosttools/bcmImageBuilder \
                --output tmp/fs_kernel \
                --chip 6348 \
                --board &quot;96348GW&quot; \
                --blocksize 64 \
                --cfefile cfe.bin \
                --rootfsfile tmp/sqfs.img --kernelfile tmp/vmlinux.lz
bcmImageBuilder
        File tag size                 : 256
        Root filesystem image size    : 3579904
        Kernel image size             : 548317
        Combined image file size      : 4128477

hosttools/addvtoken tmp/fs_kernel bcm963xx_fs_kernel
addvtoken: Output file size = 4128497 with image crc = 0xe3ba3a7a
chmod 644 bcm963xx_fs_kernel</code></pre></div><p>My new Problem is, the Device wont boot with this selfmade Image.<br />On the Device only lights the Leds power (green) and lan, not the adsl.<br />When i flased your image, the device boots (lights on ,power,lan,adsl) after few seconds you hear a &quot;klick&quot; and the device is over network available (ping).<br />But with my Image a dont hear the &quot;Klick&quot;. I have no serial-cable attached on the device but i mean it cant find the rootfs ?</p><p>This is my first time with compiling a Firmware.<br />What i want to activate on the Kernel is (loop,cifs,tun,swap Support).</p><p>My Question are:<br />Is it possible that you can post your working kernel &quot;.config&quot;<br />Or better if you have time can you write me a Howto, what i must do to build a working firmware. </p><br /><p>Thanks Robert.</p>											<p class="post-edited">(Last edited by <strong>RobertD</strong> on 25 May 2008, 18:26)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68565">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						22 May 2008, 19:59					</div>
				</div>
				<div class="post-content content">
					<p>Another Question</p><p>I want to access this device over serial with your firmware.<br />i use Cutecom with the follow parameters: </p><div class="codebox"><pre><code>Device: /dev/ttyUSB0
Parity: None
Boud rate: 115200
Data bits: 8
Stop bits: 1
Open for: [x] Reading [x] Writing</code></pre></div><p>I use a USB-Serial Adapt.<br />The Serial-Cable is with &quot;GND&quot;, &quot;RX&quot; and &quot;TX&quot; attached on the Device.</p><p>When i press on Cutecom &quot;Open device&quot;<br />i can see the follow text on the cutecom-window: </p><div class="codebox"><pre><code>\0x00</code></pre></div><p>i can write for example </p><div class="codebox"><pre><code>uname -r</code></pre></div><p>in cutecom and press enter, the only what i get is: More from this binary text.<br />What must i set to get a reply over Serial like this: </p><div class="codebox"><pre><code>2.6.8.1</code></pre></div><p>Thanks, Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p68689">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						25 May 2008, 18:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi abra</p><p>What did you mean with: </p><div class="quotebox"><cite>abraXxl wrote:</cite><blockquote><p>You need the kernel image and a tar of all non system directories from your current speedport rootfs.</p></blockquote></div><p>Are non system directoriers: /dev /proc/ ?.</p><p>The only way to do that is: <br />mount a external share over cifs.<br />and run follow command on the device:<br /></p><div class="codebox"><pre><code>root@openwrt:/tmp/smbshare# tar -v -cf dev.tar.gz /dev/</code></pre></div><p>@Serial Connection:<br />I was not able to create a readable connecting over Serial to this Device. <br />The only was i get ist unreadable Text: \0xx\0x00nY1</p><br /><br /><p>I hope anybody can help me.</p><p>Sincerely Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69364">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						9 Jun 2008, 19:58					</div>
				</div>
				<div class="post-content content">
					<p>Hello abra</p><p>Version 4 (bcm963xx_fs_kernel.v4) is really great. <br />But i have one wish is it possible to compile a image with swap-support for me please ?</p><p>I have compiled 4 Images but they dont work, i can ping the router with my compiled images but when i want to connect to the device over telnet he close the connection, and i dont know why.</p><p>Thanks, <br />Robert</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69380">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">abraXxl</div>
					<div class="post-datetime">
						10 Jun 2008, 01:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>Hello abra</p><p>Version 4 (bcm963xx_fs_kernel.v4) is really great. <br />But i have one wish is it possible to compile a image with swap-support for me please ?</p><p>I have compiled 4 Images but they dont work, i can ping the router with my compiled images but when i want to connect to the device over telnet he close the connection, and i dont know why.</p><p>Thanks, <br />Robert</p></blockquote></div><p>I can&#039;t at the moment recompile with swap support, lack of time, sorry, and no build environment.<br />All I have done to make a new image, i took the fsworks tar.gz. and incorporated some fixes sent to me by others into the fs source. The vmlinuz is still the same as in v3.</p><p>Regarding your four images: What have precisly done to get new images? I can just guess.</p><p>If you recompile the kernal dont enable QoS it will break ADSL, ENET and WLAN. If you just take the vmlinux or vmlinux.lz image build from original Tcom-Sources you will be able to complete the fsworks build process.</p><p>About serial problem: If you have set 115200,8N1 then it should show typical kernal boot messages on the terminal. If this don&#039;t happen try a bit around: exchange TX,RX and power cycle the device.</p><p>If you further questions, just. If my time permits i will answer.</p><p>cya</p>											<p class="post-edited">(Last edited by <strong>abraXxl</strong> on 10 Jun 2008, 01:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69465">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						11 Jun 2008, 22:46					</div>
				</div>
				<div class="post-content content">
					<p>Hi abra<br />thanks for answers</p><br /><p>OH my GOD my new Image works ;-)<br />i use as kernel .config the 6348.config.v08 from your t-com patch<br />My Problem was i use the wrong kernel-configs </p><p>My current Flash-Image has a Size of 3,7MB (3 873 145 B)<br />I think the max Size of a flash-image is 4,0 MB, right ? <br />(openwrt wiki says: 4 MB Flash (different chips have been seen, most are JEDIC AMD command set)</p><br /><p>ok one problem left:<br />i canÂ´t edit for example /etc/config/system<br />it tells me only read-only. <br />What must i do to fix this ?<br />At the kernel-config i found an entry: <br />CONFIG_ROOTFS_JFFS2 is not set<br />must i enable it with &quot;y&quot; ?</p><p>The complete <a href="http://nopaste.debianforum.de/8826">6348.config.v08</a></p><br /><br /><br /><p> </p><div class="codebox"><pre><code>/ # mount
rootfs on / type rootfs (rw)
/dev/root on / type squashfs (ro)
/proc on /proc type proc (rw,nodiratime)
tmpfs on /tmp type tmpfs (rw)
tmpfs on /dev type tmpfs (rw)
devpts on /dev/pts type devpts (rw)</code></pre></div><div class="codebox"><pre><code>/ # df -h
Filesystem                Size      Used Available Use% Mounted on
/dev/mtdblock2            3.2M      3.2M         0 100% /
tmpfs                   256.0k      4.0k    252.0k   2% /tmp
tmpfs</code></pre></div><div class="codebox"><pre><code>/ # logread
Jan  1 01:00:16 speedport syslog.info syslogd started: BusyBox v1.8.2
Jan  1 01:00:16 speedport user.notice kernel: klogd started: BusyBox v1.8.2 (2007-12-10 23:21:58 CET)
Jan  1 01:00:16 speedport user.warn kernel: Linux version 2.6.8.1 (root@unixstation) (gcc version 3.4.2) #1 Wed Jun 11 20:14:29 CEST 2008
Jan  1 01:00:16 speedport user.warn kernel: Total Flash size: 4096K with 71 sectors
Jan  1 01:00:16 speedport user.warn kernel: 96348GW prom init
Jan  1 01:00:16 speedport user.warn kernel: CPU revision is: 00029107
Jan  1 01:00:16 speedport user.warn kernel: mpi: No Card is in the PCMCIA slot
Jan  1 01:00:16 speedport user.warn kernel: Determined physical RAM map:
Jan  1 01:00:16 speedport user.warn kernel:  memory: 00fa0000 @ 00000000 (usable)
Jan  1 01:00:16 speedport user.debug kernel: On node 0 totalpages: 4000
Jan  1 01:00:16 speedport user.debug kernel:   DMA zone: 4000 pages, LIFO batch:1
Jan  1 01:00:16 speedport user.debug kernel:   Normal zone: 0 pages, LIFO batch:1
Jan  1 01:00:16 speedport user.debug kernel:   HighMem zone: 0 pages, LIFO batch:1
Jan  1 01:00:16 speedport user.warn kernel: Built 1 zonelists
Jan  1 01:00:16 speedport user.warn kernel: Kernel command line: root=31:2 ro init=/etc/preinit
Jan  1 01:00:16 speedport user.warn kernel: brcm mips: enabling icache and dcache...
Jan  1 01:00:16 speedport user.warn kernel: Primary instruction cache 16kB, physically tagged, 2-way, linesize 16 bytes.
Jan  1 01:00:16 speedport user.warn kernel: Primary data cache 8kB 2-way, linesize 16 bytes.
Jan  1 01:00:16 speedport user.warn kernel: PID hash table entries: 64 (order 6: 512 bytes)
Jan  1 01:00:16 speedport user.warn kernel: Using 128.000 MHz high precision timer.
Jan  1 01:00:16 speedport user.warn kernel: Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
Jan  1 01:00:16 speedport user.warn kernel: Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
Jan  1 01:00:16 speedport user.info kernel: Memory: 13880k/16000k available (1486k kernel code, 2100k reserved, 237k data, 76k init, 0k highmem)
Jan  1 01:00:16 speedport user.warn kernel: Calibrating delay loop... 253.95 BogoMIPS
Jan  1 01:00:16 speedport user.warn kernel: Mount-cache hash table entries: 512 (order: 0, 4096 bytes)
Jan  1 01:00:16 speedport user.warn kernel: Checking for &#039;wait&#039; instruction...  unavailable.
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 16
Jan  1 01:00:16 speedport user.warn kernel: Can&#039;t analyze prologue code at 801823a4
Jan  1 01:00:16 speedport user.warn kernel: Registering mini_fo version $Id$
Jan  1 01:00:16 speedport user.info kernel: JFFS2 version 2.2. (C) 2001-2003 Red Hat, Inc.
Jan  1 01:00:16 speedport user.info kernel: PPP generic driver version 2.4.2
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 24
Jan  1 01:00:16 speedport user.warn kernel: Using noop io scheduler
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: 0x00400000 at 0x1fc00000
Jan  1 01:00:16 speedport user.info kernel: bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank
Jan  1 01:00:16 speedport user.warn kernel:  Amd/Fujitsu Extended Query Table at 0x0040
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Swapping erase regions for broken CFI table.
Jan  1 01:00:16 speedport user.notice kernel: number of CFI chips: 1
Jan  1 01:00:16 speedport user.notice kernel: cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Read Signature value of CFE1CFE1
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: CFE bootloader detected
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: CFE boot tag found with version 6 and board type 96348GW.
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Partition 0 is CFE offset 0 and length 10000
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Partition 1 is kernel offset 337100 and length 8a865
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Partition 2 is rootfs offset 10100 and length 327000
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Partition 3 is rootfs_data offset 3d0000 and length 30000
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx: Partition 4 is linux offset 10000 and length 3f0000
Jan  1 01:00:16 speedport user.notice kernel: Creating 5 MTD partitions on &quot;bcm963xx&quot;:
Jan  1 01:00:16 speedport user.notice kernel: 0x00000000-0x00010000 : &quot;CFE&quot;
Jan  1 01:00:16 speedport user.notice kernel: 0x00337100-0x003c1965 : &quot;kernel&quot;
Jan  1 01:00:16 speedport user.warn kernel: mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-only
Jan  1 01:00:16 speedport user.notice kernel: 0x00010100-0x00337100 : &quot;rootfs&quot;
Jan  1 01:00:16 speedport user.warn kernel: mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
Jan  1 01:00:16 speedport user.notice kernel: 0x003d0000-0x00400000 : &quot;rootfs_data&quot;
Jan  1 01:00:16 speedport user.notice kernel: 0x00010000-0x00400000 : &quot;linux&quot;
Jan  1 01:00:16 speedport user.warn kernel: brcmboard: brcm_board_init entry
Jan  1 01:00:16 speedport user.warn kernel: bcm963xx_serial driver v2.0
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 2
Jan  1 01:00:16 speedport user.info kernel: IP: routing cache hash table of 512 buckets, 4Kbytes
Jan  1 01:00:16 speedport user.info kernel: TCP: Hash tables configured (established 512 bind 1024)
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 1
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 17
Jan  1 01:00:16 speedport user.notice kernel: Ebtables v2.0 registered
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 8
Jan  1 01:00:16 speedport user.info kernel: NET: Registered protocol family 20
Jan  1 01:00:16 speedport user.info kernel: 802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
Jan  1 01:00:16 speedport user.info kernel: All bugs added by David S. Miller &lt;davem@redhat.com&gt;
Jan  1 01:00:16 speedport user.warn kernel: VFS: Mounted root (squashfs filesystem) readonly.
Jan  1 01:00:16 speedport user.info kernel: Freeing unused kernel memory: 76k freed
Jan  1 01:00:16 speedport user.warn kernel: Algorithmics/MIPS FPU Emulator v1.5
Jan  1 01:00:16 speedport user.err kernel: jffs2: Too few erase blocks (3)
Jan  1 01:00:16 speedport user.err kernel: jffs2: Too few erase blocks (3)
Jan  1 01:00:16 speedport user.warn kernel: atmapi: module license &#039;Proprietary&#039; taints kernel.
Jan  1 01:00:17 speedport user.warn kernel: blaadd: blaa_detect entry
Jan  1 01:00:17 speedport user.warn kernel: adsl: adsl_init entry
Jan  1 01:00:19 speedport user.warn kernel: Broadcom BCM6348B0 Ethernet Network Device v0.3 Apr 19 2007 16:50:39
Jan  1 01:00:19 speedport user.warn kernel: Config Internal PHY Through MDIO
Jan  1 01:00:19 speedport user.info kernel: BCM63xx_ENET: 100 MB Full-Duplex (auto-neg)
Jan  1 01:00:19 speedport user.warn kernel: eth0: MAC Address: 00:16:38:74:5F:88
Jan  1 01:00:20 speedport user.debug kernel: PCI: Setting latency timer of device 0000:00:01.0 to 64
Jan  1 01:00:20 speedport user.warn kernel: PCI: Enabling device 0000:00:01.0 (0004 -&gt; 0006)
Jan  1 01:00:20 speedport user.warn kernel: wl: srom not detected, using main memory mapped srom info (wombo board)
Jan  1 01:00:20 speedport user.warn kernel: wl0: wlc_attach: using main board MAC address base in NVRAM (wombo board)
Jan  1 01:00:20 speedport user.warn kernel: wl0 MAC Address: 00:16:38:74:5F:89
Jan  1 01:00:20 speedport user.warn kernel: wl0: Broadcom BCM4318 802.11 Wireless Controller 3.131.35.0.cpe0.1dt
Jan  1 01:00:20 speedport user.info kernel: Broadcom BCMPROCFS v1.0 initialized
Jan  1 01:00:20 speedport user.warn kernel: ip_tables: (C) 2000-2002 Netfilter core team
Jan  1 01:00:20 speedport user.warn kernel: ip_conntrack version 2.1 (125 buckets, 0 max) - 384 bytes per conntrack
Jan  1 01:00:22 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:23 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:23 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:24 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:24 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:24 speedport user.info rcS: insmod: Loading module failed: No such file or directory
Jan  1 01:00:24 speedport user.info kernel: Universal TUN/TAP device driver 1.5 (C)1999-2002 Maxim Krasnyansky
Jan  1 01:00:24 speedport user.info rcS: kernel.panic = 3
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.conf.default.arp_ignore = 1
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.conf.all.arp_ignore = 1
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.ip_forward = 1
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.icmp_echo_ignore_broadcasts = 1
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.icmp_ignore_bogus_error_responses = 1
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.tcp_fin_timeout = 30
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.tcp_keepalive_time = 120
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.tcp_timestamps = 0
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.netfilter.ip_conntrack_tcp_timeout_established = 3600
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.netfilter.ip_conntrack_udp_timeout = 60
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.netfilter.ip_conntrack_udp_timeout_stream = 180
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.netfilter.ip_conntrack_tcp_timeout_close_wait = 300
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.ip_conntrack_max = 2048
Jan  1 01:00:24 speedport user.info rcS: net.ipv4.ip_dynaddr = 1
Jan  1 01:00:26 speedport user.info kernel: device eth0 entered promiscuous mode
Jan  1 01:00:27 speedport user.crit kernel: eth0 Link UP.
Jan  1 01:00:28 speedport user.info rcS: Setting country code using abbreviation: &quot;DE&quot;
Jan  1 01:00:29 speedport user.info kernel: device wl0 entered promiscuous mode
Jan  1 01:00:29 speedport user.info kernel: br0: port 2(wl0) entering learning state
Jan  1 01:00:29 speedport user.info kernel: br0: port 1(eth0) entering learning state
Jan  1 01:00:29 speedport user.info kernel: br0: topology change detected, propagating
Jan  1 01:00:29 speedport user.info kernel: br0: port 2(wl0) entering forwarding state
Jan  1 01:00:29 speedport user.info kernel: br0: topology change detected, propagating
Jan  1 01:00:29 speedport user.info kernel: br0: port 1(eth0) entering forwarding state
Jan  1 01:00:30 speedport user.info rcS: br0: wait for bridge to enter forwarding state ..done</code></pre></div><p>Thanks Robert</p>											<p class="post-edited">(Last edited by <strong>RobertD</strong> on 11 Jun 2008, 22:51)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p69497">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">abra</div>
					<div class="post-datetime">
						12 Jun 2008, 13:23					</div>
				</div>
				<div class="post-content content">
					<p>Ola !</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>OH my GOD my new Image works ;-)<br />i use as kernel .config the 6348.config.v08 from your t-com patch<br />My Problem was i use the wrong kernel-configs </p><p>My current Flash-Image has a Size of 3,7MB (3 873 145 B)<br />I think the max Size of a flash-image is 4,0 MB, right ? <br />(openwrt wiki says: 4 MB Flash (different chips have been seen, most are JEDIC AMD command set)</p></blockquote></div><p>Fine that your kernel works.</p><p>If you need the current kernel config of the V3/V4 images have look in /proc/config.gz&nbsp; running v3 or v4.<br />I just enabled this feature if i remember correctly.</p><p>Keep in mind when using the mini_fo/jffs2 overlay for a writable rootfs, that jffs2 needs at least 3 erase blocks in the rootfs_data partition. That means you need a bit more that 192kb in the corresponding mtd-partition.</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>ok one problem left:<br />i canÂ´t edit for example /etc/config/system<br />it tells me only read-only. <br />What must i do to fix this ?<br />At the kernel-config i found an entry: <br />CONFIG_ROOTFS_JFFS2 is not set<br />must i enable it with &quot;y&quot; ?</p></blockquote></div><p>yes of course you must enable this for a writeable rootfs.</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><div class="codebox"><pre><code>/ # mount
rootfs on / type rootfs (rw)
/dev/root on / type squashfs (ro)
/proc on /proc type proc (rw,nodiratime)
tmpfs on /tmp type tmpfs (rw)
tmpfs on /dev type tmpfs (rw)
devpts on /dev/pts type devpts (rw)</code></pre></div></blockquote></div><p>There is no jffs2 mounted. Include jffs2 in the kernel. So creating the mini_fo overlay fails and the init is started from the read only squashfs.</p><p>cya</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70231">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">RobertD</div>
					<div class="post-datetime">
						29 Jun 2008, 12:34					</div>
				</div>
				<div class="post-content content">
					<p>Hi abra</p><p>Thanks for the answer it helps me a lot.<br />After removing the openvpn binary i got more free space and jffs2 works. </p><p>I have 2 W500V Routers the first with &quot;Wrt500v&quot; firmware and the second with &quot;bitswitcher&quot; firmware. </p><p>The next Step is the first Router has problems with the l2tp Protocol. <br />The Router reboots when i want to open a connection from the laptop to the external l2tp server. </p><p>I think the problem is with creating a ppp Session on the first Router.<br />What can i do to fix this Problem. </p><p>The first router runs with the v3 Firmware:<br /></p><div class="codebox"><pre><code>root@wrt500v:/proc/var/fyi/wan #ls -la
dr-xr-xr-x   18 root     root            0 Jun 29 11:07 .
dr-xr-xr-x    4 root     root            0 Jun 29 11:07 ..
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp0
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp1
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp10
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp11
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp12
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp13
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp14
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp15
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp2
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp3
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp4
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp5
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp6
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp7
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp8
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp9</code></pre></div><p>the second router:<br /></p><div class="codebox"><pre><code>root@bitswitcher:/proc/var/fyi/wan #ls -la
dr-xr-xr-x   18 root     root            0 Jun 29 11:07 .
dr-xr-xr-x    4 root     root            0 Jun 29 11:07 ..
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp0
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp1
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp10
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp11
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp12
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp13
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp14
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp15
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp2
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp3
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp4
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp5
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp6
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp7
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp8
dr-xr-xr-x    2 root     root            0 Jun 29 11:07 .ppp9
lrwxrwxrwx    1 root     root            5 Jun 29 11:07 ppp_1_32_1 -&gt; .ppp0</code></pre></div><p>If you have time, is it possible that you can release your v4 patched files (bcm963xx_fs_kernel.v4.fsworks.tar.bz2), <br />or what must i do to extract your v4 image.</p><br /><p>Thanks for the help.<br />Robert</p>											<p class="post-edited">(Last edited by <strong>RobertD</strong> on 29 Jun 2008, 12:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70234">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">abraXxl</div>
					<div class="post-datetime">
						29 Jun 2008, 14:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>Hi abra<br />[...]<br />Thanks for the answer it helps me a lot.<br />After removing the openvpn binary i got more free space and jffs2 works.</p></blockquote></div><p>fine</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>The next Step is the first Router has problems with the l2tp Protocol. <br />The Router reboots when i want to open a connection from the laptop to the external l2tp server.</p></blockquote></div><p>I don&#039;t know what happens there. I think some problems in netfilter. Broadcom has done some black magic in the T-Com kernel, I tried to remove this code, but perhaps i messed it somewhere up.</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>I think the problem is with creating a ppp Session on the first Router.<br />What can i do to fix this Problem. <br />[...]<br /></p><div class="codebox"><pre><code>/proc/var/fyi/wan</code></pre></div></blockquote></div><p>For l2tp from internal laptop to external l2tp concetrator no ppp session is created on the router. The kernel just schould forward it transparently.<br />Regrading the /proc/var/fyi/wan-Thing. This ist one of the black magic broadcom has done. Don&#039;t use it. The pppd 2.4 from the Wrt500v images don&#039;t rely on it anymore.<br />And of course bitswitcher uses it, as a t-com/hitachi/targa fork. The ppp settings on the wrt500v are done in /etc/config/system.</p><div class="quotebox"><cite>RobertD wrote:</cite><blockquote><p>If you have time, is it possible that you can release your v4 patched files (bcm963xx_fs_kernel.v4.fsworks.tar.bz2), <br />or what must i do to extract your v4 image.</p></blockquote></div><p>Do this on the WRT500V<br /></p><div class="codebox"><pre><code>wrt500 # mkdir /tmp/foo
wrt500 # mount -t squashfs /dev/mtdblock2 /tmp/foo</code></pre></div><p>Do this an an workstation connected to the Wrt500v.<br /></p><div class="codebox"><pre><code>workstation # ssh root@wrt500v tar cf - -C /tmp/foo . &gt; rootfs_for_fsworks.tar</code></pre></div><p>have fun ...</p><p>PS: by the way 3:2 for germany ;)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70983">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">noadsl</div>
					<div class="post-datetime">
						16 Jul 2008, 20:49					</div>
				</div>
				<div class="post-content content">
					<p>I am looking for an ADSL router solution as described <a href="http://forum.openwrt.org/viewtopic.php?id=16335">here</a>.</p><p>I am not interested in the VOIP bit but DSL modem + WLAN must work reliably.</p><p>As described in above post, I am trying to set this up for German friend. I have no means of testing the set-up as I have no ADSL access where I live.</p><p>RobertD - if you could give me any idea how reliable your 2 Speedports are, I would be grateful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70988">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">abraXxl</div>
					<div class="post-datetime">
						16 Jul 2008, 23:31					</div>
				</div>
				<div class="post-content content">
					<p>Hi !</p><div class="quotebox"><cite>noadsl wrote:</cite><blockquote><p>I am looking for an ADSL router solution as described <a href="http://forum.openwrt.org/viewtopic.php?id=16335">here</a>.</p><p>I am not interested in the VOIP bit but DSL modem + WLAN must work reliably.</p><p>As described in above post, I am trying to set this up for German friend. I have no means of testing the set-up as I have no ADSL access where I live.</p></blockquote></div><p>Ive done a similiar setup for my parents. They have _very_ basic knowledge of IT. They are happy to know what a window is ... on the screen <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" />. I live and work about 700 km away from them I organized a basic dsl setup with a speedport w500v used as a DSL modem with router.<br />The router is switched on 24/7, has an openvpn connection and publishes its IP via ez-ipupdate,<br />so I can ssh and rdesktop over the vpn line. The DSL part is quite stable. In 5 months is has lost two times the dsl sync. This is signaled by the LEDs of the w500v. I told them to power cycle if dsl LED is orange or online led is off for more than 5 minutes.</p><p>This features are in the v4 image you can download from this topic.</p><p>cya</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p70992">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">noadsl</div>
					<div class="post-datetime">
						17 Jul 2008, 01:56					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for your reply. </p><div class="quotebox"><cite>abraXxl wrote:</cite><blockquote><p>speedport w500v used as a DSL modem with router.</p></blockquote></div><p>Do you mean you use the Speedport&#039;s router capabilities or do you use a separate router?</p><p>Do your parents use WLAN?</p><div class="quotebox"><cite>abraXxl wrote:</cite><blockquote><p>This features are in the v4 image you can download from this topic.</p></blockquote></div><p>Which features did you mean?&nbsp; The LEDs?</p><p>Are you using the <a href="http://vvv.borkum.net/files/w500v/">http://vvv.borkum.net/files/w500v/</a> firmware?</p>											<p class="post-edited">(Last edited by <strong>noadsl</strong> on 17 Jul 2008, 01:59)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>