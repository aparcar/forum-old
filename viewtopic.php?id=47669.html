<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Adding support for RT-N14U (need some hints)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p219124">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">loblik</div>
					<div class="post-datetime">
						3 Dec 2013, 18:21					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>I&nbsp; would like to add support for mt7620n based Asus RT-N14U router. Device is curently running latest asus firmware which<br />is based on some older openwrt. I have telnet access to the shell and I was even able to build original firmware from <a href="http://support.asus.com/download.aspx?SLanguage=en&amp;m=RT-N14U">source code</a>.</p><p>For more information about hardware please see <a href="http://wikidevi.com/wiki/ASUS_RT-N14U">http://wikidevi.com/wiki/ASUS_RT-N14U</a>.</p><p>There already seems to be support for ramips/mt7620n platform in trunk. So should I just add support for the board by providing<br />/target/linux/ramips/dts/RT-N14U.dts file? And if it so is there some more information about how to write those files?</p><p>Any help is welcome</p><p>full boot log(dmesg):<br /></p><div class="codebox"><pre><code>Linux version 2.6.36 (root@asus) (gcc version 4.2.4) #1 Wed Jul 17 08:14:35 CST 2013

 The CPU feqenuce set to 580 MHz
ramsize = 64 MBytes
rambase not set, set to default (0x00000000)
 PCIE: bypass PCIe DLL.
 PCIE: Elastic buffer control: Addr:0x68 -&gt; 0xB4
 disable all power about PCIe
 PCIE: PLL power down for MT7620N
CPU revision is: 00019650 (MIPS 24Kc)
Determined physical RAM map:
 memory: 04000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal   0x00000000 -&gt; 0x00004000
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0: 0x00000000 -&gt; 0x00004000
On node 0 totalpages: 16384
free_area_init_node: node 0, pgdat 8031c710, node_mem_map 81000000
  Normal zone: 128 pages used for memmap
  Normal zone: 0 pages reserved
  Normal zone: 16256 pages, LIFO batch:3
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 16256
Kernel command line: console=ttyS1,57600n8 root=/dev/mtdblock4 rootfstype=squashfs noinitrd
PID hash table entries: 256 (order: -2, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
Writing ErrCtl register=0007f410
Readback ErrCtl register=0007f410
Memory: 61508k/65536k available (2643k kernel code, 4028k reserved, 544k data, 172k init, 0k highmem)
SLUB: Genslabs=7, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
NR_IRQS:128
console [ttyS1] enabled
Calibrating delay loop... 386.04 BogoMIPS (lpj=772096)
pid_max: default: 32768 minimum: 301
Mount-cache hash table entries: 512
NET: Registered protocol family 16
bio: create slab &lt;bio-0&gt; at 0
Switching to clocksource MIPS
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
UDP hash table entries: 256 (order: 0, 4096 bytes)
UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
NET: Registered protocol family 1
Load Ralink Timer0 Module
Load Ralink Timer1 Module
RT3xxx EHCI/OHCI init.
squashfs: version 4.0 (2009/01/31) Phillip Lougher
JFFS2 version 2.2 (NAND) (ZLIB) (RTIME) (c) 2001-2006 Red Hat, Inc.
msgmni has been set to 120
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 254)
io scheduler noop registered (default)
HDLC line discipline maxframe=4096
N_HDLC line discipline registered.
Ralink gpio driver initialized
Serial: 8250/16550 driver, 2 ports, IRQ sharing disabled
serial8250: ttyS0 at MMIO 0x10000500 (irq = 37) is a 16550A
serial8250: ttyS1 at MMIO 0x10000c00 (irq = 12) is a 16550A
brd: module loaded
deice id : ef 40 18 0 0 (40180000)
W25Q128BV(ef 40180000) (16384 Kbytes)
mtd .name = raspi, .size = 0x01000000 (16M) .erasesize = 0x00010000 (64K) .numeraseregions = 0
partion 3: ffffffff f30000
partion 4: 16a340 e15cc0
#add mtd partition#
Creating 7 MTD partitions on &quot;raspi&quot;:
0x000000000000-0x000000030000 : &quot;Bootloader&quot;
0x000000030000-0x000000040000 : &quot;nvram&quot;
0x000000040000-0x000000050000 : &quot;Factory&quot;
0x000000050000-0x000000f80000 : &quot;linux&quot;
0x00000016a340-0x000000f80000 : &quot;rootfs&quot;
0x000000f80000-0x000001000000 : &quot;jffs2&quot;
0x000000000000-0x000001000000 : &quot;ALL&quot;
rdm_major = 253
Allocate 4096 entries coherent memory for hw_nat. (327680 bytes)
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x43762077
Ralink APSoC Ethernet Driver Initilization. v3.0  256 rx/tx descriptors allocated, mtu = 1500!
SMACCR1 -- : 0x0000000c
SMACCR0 -- : 0x43762077
PROC INIT OK!
PPP generic driver version 2.4.2
PPP Deflate Compression module registered
PPP BSD Compression module registered
PPP MPPE Compression module registered
NET: Registered protocol family 24
PPTP driver version 0.8.5
IMQ driver loaded successfully. (numdevs = 2, numqueues = 1)
        Hooking IMQ after NAT on PREROUTING.
        Hooking IMQ before NAT on POSTROUTING.
u32 classifier
nf_conntrack version 0.5.0 (961 buckets, 3844 max)
matchsize=264
xt_time: kernel timezone is -0000
GRE over IPv4 demultiplexor driver
gre: can&#039;t add protocol
ip_tables: (C) 2000-2006 Netfilter Core Team, Type=Linux
arp_tables: (C) 2002 David S. Miller
TCP cubic registered
NET: Registered protocol family 10
ip6_tables: (C) 2000-2006 Netfilter Core Team
NET: Registered protocol family 17
L2TP core driver, V2.0
PPPoL2TP kernel driver, V2.0
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
Freeing unused kernel memory: 172k freed
offset 0xb000 elapse 0ms
found private data block and skip it
Algorithmics/MIPS FPU Emulator v1.5
rt2860v2_ap: module license &#039;Proprietary&#039; taints kernel.
Disabling lock debugging due to kernel taint


=== pAd = c051c000, size = 728632 ===

&lt;-- RTMPAllocTxRxRingMemory, Status=0
&lt;-- RTMPAllocAdapterBlock, Status=0
AP Driver version-2.7.1.6
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
SCSI subsystem initialized
Initializing USB Mass Storage driver...
usbcore: registered new interface driver usb-storage
USB Mass Storage support registered.
ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
rt3xxx-ehci rt3xxx-ehci: Ralink EHCI Host Controller
rt3xxx-ehci rt3xxx-ehci: new USB bus registered, assigned bus number 1
rt3xxx-ehci rt3xxx-ehci: irq 18, io mem 0x101c0000
rt3xxx-ehci rt3xxx-ehci: USB 0.0 started, EHCI 1.00
hub 1-0:1.0: USB hub found
hub 1-0:1.0: 1 port detected
ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
rt3xxx-ohci rt3xxx-ohci: RT3xxx OHCI Controller
rt3xxx-ohci rt3xxx-ohci: new USB bus registered, assigned bus number 2
rt3xxx-ohci rt3xxx-ohci: irq 18, io mem 0x101c1000
hub 2-0:1.0: USB hub found
hub 2-0:1.0: 1 port detected
usbcore: registered new interface driver usblp
usbcore: registered new interface driver asix
usbcore: registered new interface driver cdc_ether
usbcore: registered new interface driver net1080
usbcore: registered new interface driver zaurus
Raeth v3.0 (Tasklet,SkbRecycle)

phy_tx_ring = 0x02719000, tx_ring = 0xa2719000

phy_rx_ring0 = 0x02714000, rx_ring0 = 0xa2714000
SMACCR1 -- : 0x000074d0
SMACCR0 -- : 0x2b3e7520
ESW: Link Status Changed - Port1 Link Down
CDMA_CSG_CFG = 81000000
GDMA1_FWD_CFG = 20710000
device vlan1 entered promiscuous mode
device eth2 entered promiscuous mode
RX DESC a2e93000  size = 2048
APSDCapable[0]=1
APSDCapable[1]=1
APSDCapable[2]=1
APSDCapable[3]=1
APSDCapable[4]=1
APSDCapable[5]=1
APSDCapable[6]=1
APSDCapable[7]=1
APSDCapable[8]=1
APSDCapable[9]=1
APSDCapable[10]=1
APSDCapable[11]=1
APSDCapable[12]=1
APSDCapable[13]=1
APSDCapable[14]=1
APSDCapable[15]=1
Key1Str is Invalid key length(0) or Type(0)
Key2Str is Invalid key length(0) or Type(0)
Key3Str is Invalid key length(0) or Type(0)
Key4Str is Invalid key length(0) or Type(0)
1. Phy Mode = 9
2. Phy Mode = 9
  =&gt;offset:[37] from [20] to [20]
  =&gt;offset:[50] from [82] to [82]
  =&gt;offset:[d0] from [22] to [22]
  =&gt;offset:[de] from [0c] to [01]
  =&gt;offset:[df] from [0c] to [01]
  =&gt;offset:[e0] from [08] to [00]
  =&gt;offset:[e1] from [04] to [00]
  =&gt;offset:[e2] from [02] to [00]
  =&gt;offset:[e3] from [00] to [00]
  =&gt;offset:[e4] from [08] to [00]
  =&gt;offset:[e5] from [04] to [00]
  =&gt;offset:[e6] from [02] to [00]
  =&gt;offset:[e7] from [00] to [00]
  =&gt;offset:[e8] from [08] to [fa]
  =&gt;offset:[e9] from [04] to [fa]
  =&gt;offset:[ea] from [02] to [fa]
  =&gt;offset:[eb] from [00] to [fa]
E2PROM: D0 target power=0xff22 
E2PROM: 40 MW Power Delta= -2 
3. Phy Mode = 9
AntCfgInit: primary/secondary ant 0/1
Initialize RF Central Registers for E2 !!!
Initialize RF Central Registers for E3 !!!
Initialize RF Channel Registers for E2 !!!
Initialize RF Channel Registers for E3 !!!
Initialize RF DCCal Registers for E2 !!!
Initialize RF DCCal Registers for E3 !!!
D1 = 0, D2 = 3, CalCode = 7 !!!
RT6352_Temperature_Init : BBPR49 = 0x0
RT6352_Temperature_Init : TemperatureRef25C = 0xfffffff6
Current Temperature from BBP_R49=0xffffffef
RT6352_TssiTableAdjust: upper_bound = 0x7F decimal: 127
RT6352_TssiTableAdjust: lower_bound = 0xFFFFFF80 decimal: -128
*** RT6352_TssiTableAdjust: G Tssi[-7 .. +7] = 125 11 8 8 126 10 14
 - 11 - -1 -1 -1 -1 -1 -1 -1, offset=-10, tuning=0
RT6352_TssiTableAdjust: G Tssi[-7 .. +7] = 115 1 -2 -2 116 0 4 - 1 - -11 -11 -11 -11 -11 -11 -11, offset=-10, tuning=0
mp_temperature=0x00, step = -1
E2PROM: G Tssi[-7 .. +7] = 115 1 -2 -2 116 0 4 - 1 - -11 -11 -11 -11 -11 -11 -11, offset=-10, tuning=0
 TX BW Filter Calibration !!!
 RX BW Filter Calibration !!!
LOFT Calibration Done!
IQCalibration Start!
IQCalibration Done! CH = 0, (gain= 0, phase=3d)
IQCalibration Start!
IQCalibration Done! CH = 1, (gain= f, phase= 2)
TX IQ Calibration Done!
bAutoTxAgcG = 0
MCS Set = ff ff 00 00 01
rt635x_tssi0_dc is 0xffffffff
rt635x_tssi1_dc is 0xfffffff6
rt635x_tssi0_dc is 0xffffffff
rt635x_tssi1_dc is 0xfffffff6
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
SYNC - BBP R4 to 20MHz.l
rt635x_tssi0_dc is 0xffffffff
rt635x_tssi1_dc is 0xfffffff6
Main bssid = 74:d0:2b:3e:75:20
&lt;==== rt28xx_init, Status=0
0x1300 = 00064380
device ra0 entered promiscuous mode
br0: topology change detected, propagating
br0: port 2(ra0) entering forwarding state
br0: port 2(ra0) entering forwarding state
br0: topology change detected, propagating
br0: port 1(vlan1) entering forwarding state
br0: port 1(vlan1) entering forwarding state
set watchdog pid as: 233
Ralink HW NAT Module Enabled
ESW: Link Status Changed - Port1 Link UP
nf_conntrack_rtsp v0.6.21 loading
nf_nat_rtsp v0.6.21 loading</code></pre></div><p>flash layout:<br /></p><div class="codebox"><pre><code>mtd0: 00030000 00010000 &quot;Bootloader&quot;
mtd1: 00010000 00010000 &quot;nvram&quot;
mtd2: 00010000 00010000 &quot;Factory&quot;
mtd3: 00f30000 00010000 &quot;linux&quot;
mtd4: 00e15cc0 00010000 &quot;rootfs&quot;
mtd5: 00080000 00010000 &quot;jffs2&quot;
mtd6: 01000000 00010000 &quot;ALL&quot;</code></pre></div><p>lsmod:<br /></p><div class="codebox"><pre><code>nf_nat_sip              6292  0 
nf_conntrack_sip       18340  1 nf_nat_sip
nf_nat_h323             5935  0 
nf_conntrack_h323      37088  1 nf_nat_h323
nf_nat_rtsp             3822  0 
nf_conntrack_rtsp       4622  1 nf_nat_rtsp
nf_nat_ftp              1348  0 
nf_conntrack_ftp        5365  1 nf_nat_ftp
ip6table_filter          851  0 
ip6table_mangle         1155  0 
hw_nat                 27828  0 
zaurus                  2264  0 
net1080                 3216  0 
cdc_ether               3378  1 zaurus
asix                   14847  0 
usbnet                 16682  4 zaurus,net1080,cdc_ether,asix
mii                     3842  2 asix,usbnet
usblp                  10698  0 
ohci_hcd               15885  0 
ehci_hcd               36936  0 
vfat                    9966  0 
fat                    53780  1 vfat
ext2                   63977  0 
ext3                  128533  0 
jbd                    47882  1 ext3
mbcache                 4890  2 ext2,ext3
usb_storage            38061  0 
sg                     23463  0 
sd_mod                 31124  0 
crc_t10dif              1025  1 sd_mod
scsi_wait_scan           479  0 
scsi_mod               90406  3 usb_storage,sg,sd_mod
usbcore               124742 10 zaurus,net1080,cdc_ether,asix,usbnet,usblp,ohci_hcd,ehci_hcd,usb_storage
nf_nat_pptp             1706  0 
nf_conntrack_pptp       4073  1 nf_nat_pptp
nf_nat_proto_gre        1173  1 nf_nat_pptp
nf_conntrack_proto_gre     3333  1 nf_conntrack_pptp
rt2860v2_ap          1712432  1 
nvram_linux            20380 27 rt2860v2_ap</code></pre></div><p>/proc/cpuinfo:<br /></p><div class="codebox"><pre><code>system type             : Ralink SoC
processor               : 0
cpu model               : MIPS 24Kc V5.0
BogoMIPS                : 386.04
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 32
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0ffc, 0x0ffc, 0x0ffb, 0x0ffb]
ASEs implemented        : mips16 dsp
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available</code></pre></div><p>/proc/nvram<br /></p><div class="codebox"><pre><code>nvram driver : v0.05
nvram space  : 0xf000
major number : 228
MTD            
  name       : nvram
  index      : 1
  type       : NORFLASH
  flags      : 0xc00
  size       : 0x10000
  erasesize  : 0x10000
  writesize  : 0x1
private      : 0xf, 0xb000 -&gt; 0x10000 +0x800, 0x4cfb 1
rsv_blk_size : 0x1000</code></pre></div><p>EDIT: I guess I found it (but still some response would be great).<br /><a href="http://www.devicetree.org/Device_Tree_Usage">http://www.devicetree.org/Device_Tree_Usage</a></p><p>flash layout:<br /></p><div class="codebox"><pre><code>0x0  0x30000  0x40000    0x50000            0xf800000      0x1000000
 +--------------------------------------------------------------+
 | boot  | nvram  | factory | linux             |               |   
 +--------------------------------------------------------------+
 |       |        |         |          | rootfs | jfffs2        |   
 +--------------------------------------------------------------+

0x000000000000-0x000000030000 : &quot;Bootloader&quot;
0x000000030000-0x000000040000 : &quot;nvram&quot;
0x000000040000-0x000000050000 : &quot;Factory&quot;
0x000000050000-0x000000f80000 : &quot;linux&quot;
0x00000016a340-0x000000f80000 : &quot;rootfs&quot;
0x000000f80000-0x000001000000 : &quot;jffs2&quot;
0x000000000000-0x000001000000 : &quot;ALL&quot;</code></pre></div>											<p class="post-edited">(Last edited by <strong>loblik</strong> on 3 Dec 2013, 20:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219207">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">loblik</div>
					<div class="post-datetime">
						4 Dec 2013, 18:58					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve made some progress. I added dts file as copy of WMR-300.dts which seems to be similar and made a build from trunk.</p><p>It boots just fine but wifi doesn&#039;t work. In original firmware they use rt2860v2_ap. So I loaded several rt2* modules and still nothing.</p><p>Does anyone know if this SoC integrated radio is supported?</p><p>lsmod:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# lsmod 
arc4                    1312  0 
asix                   15991  0 
cdc_ether               3404  0 
cfg80211              181359  2 rt2x00lib
compat                   761  3 rt2800usb
crc_ccitt               1019  2 rt2800lib
crc_itu_t               1019  0 
crypto_blkcipher       10343  1 arc4
crypto_hash             9546  0 
dwc2                   46956  1 dwc2_platform
dwc2_platform           1264  0 
gpio_button_hotplug     4752  0 
ip6_tables              8961  3 ip6table_raw
ip6t_REJECT             2336  2 
ip6t_ah                  816  0 
ip6t_eui64               704  0 
ip6t_frag                896  0 
ip6t_hbh                1296  0 
ip6t_ipv6header         1072  0 
ip6t_mh                  704  0 
ip6t_rt                 1520  0 
ip6table_filter          608  1 
ip6table_mangle         1040  1 
ip6table_raw             576  1 
ip_tables               9149  4 iptable_nat
ipt_MASQUERADE          1088  1 
ipt_REJECT              1776  2 
iptable_filter           672  1 
iptable_mangle           912  1 
iptable_nat             1680  1 
iptable_raw              640  1 
ipv6                  254246 24 ip6t_REJECT
leds_gpio               2976  0 
ledtrig_usbdev          1920  0 
mac80211              334777  3 rt2800lib
nf_conntrack           46443 13 iptable_nat
nf_conntrack_ftp        5120  1 nf_nat_ftp
nf_conntrack_ipv4       4740  8 
nf_conntrack_ipv6       5696  3 
nf_conntrack_irc        2816  1 nf_nat_irc
nf_defrag_ipv4           742  1 nf_conntrack_ipv4
nf_defrag_ipv6          9057  1 nf_conntrack_ipv6
nf_nat                  9775  7 iptable_nat
nf_nat_ftp              1232  0 
nf_nat_ipv4             2558  1 iptable_nat
nf_nat_irc               944  0 
nls_base                5022  1 usbcore
ohci_hcd               13680  0 
ppp_async               6768  0 
ppp_generic            20434  3 pppoe
pppoe                   8272  0 
pppox                   1322  1 pppoe
rt2800lib              72673  1 rt2800usb
rt2800usb              13856  0 
rt2x00lib              43911  3 rt2800usb
rt2x00usb               7929  1 rt2800usb
slhc                    4347  1 ppp_generic
usb_common              1160  1 usbcore
usbcore               111039  8 rt2800usb
usbnet                 17663  2 cdc_ether
x_tables               10981 32 ipt_MASQUERADE
xt_CT                   2576  0 
xt_LOG                  9696  0 
xt_REDIRECT             1040  0 
xt_TCPMSS               2720  2 
xt_comment               480 53 
xt_conntrack            2160 10 
xt_limit                1056 20 
xt_mac                   608  0 
xt_mark                  672  0 
xt_multiport            1200  0 
xt_nat                  1088  0 
xt_state                 688  0 
xt_tcpudp               1712  8 
xt_time                 1664  0</code></pre></div><p>dmesg:<br /></p><div class="codebox"><pre><code>root@OpenWrt:~# dmesg 
[    0.000000] Linux version 3.10.21 (pavel@lenka) (gcc version 4.6.4 (OpenWrt/Linaro GCC 4.6-2013.05 r38991) ) #5 Wed Dec 4 15:16:03 CET 2013
[    0.000000] Board has DDR1
[    0.000000] Analog PMU set to hw control
[    0.000000] Digital PMU set to hw control
[    0.000000] SoC Type: Ralink MT7620N ver:2 eco:3
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019650 (MIPS 24KEc)
[    0.000000] MIPS: machine is Asus RT-N14U
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone ranges:
[    0.000000]   Normal   [mem 0x00000000-0x03ffffff]
[    0.000000] Movable zone start for each node
[    0.000000] Early memory node ranges
[    0.000000]   node   0: [mem 0x00000000-0x03ffffff]
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 802a8990, node_mem_map 81003ac0
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16384 pages, LIFO batch:3
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, PIPT, no aliases, linesize 32 bytes
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line: console=ttyS0,57600 rootfstype=squashfs,jffs2
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Writing ErrCtl register=0006f000
[    0.000000] Readback ErrCtl register=0006f000
[    0.000000] Memory: 61712k/65536k available (2256k kernel code, 3824k reserved, 534k data, 216k init, 0k highmem)
[    0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:128
[    0.000000] CPU Clock: 580MHz
[    0.050000] Calibrating delay loop... 385.84 BogoMIPS (lpj=1929216)
[    0.060000] pid_max: default: 32768 minimum: 301
[    0.060000] Mount-cache hash table entries: 512
[    0.070000] pinctrl core: initialized pinctrl subsystem
[    0.080000] NET: Registered protocol family 16
[    0.090000] rt2880-pinmux pinctrl.1: try to register 73 pins ...
[    0.090000] pinctrl core: registered pin 0 (io0) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 1 (io1) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 2 (io2) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 3 (io3) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 4 (io4) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 5 (io5) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 6 (io6) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 7 (io7) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 8 (io8) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 9 (io9) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 10 (io10) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 11 (io11) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 12 (io12) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 13 (io13) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 14 (io14) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 15 (io15) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 16 (io16) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 17 (io17) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 18 (io18) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 19 (io19) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 20 (io20) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 21 (io21) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 22 (io22) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 23 (io23) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 24 (io24) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 25 (io25) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 26 (io26) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 27 (io27) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 28 (io28) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 29 (io29) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 30 (io30) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 31 (io31) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 32 (io32) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 33 (io33) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 34 (io34) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 35 (io35) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 36 (io36) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 37 (io37) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 38 (io38) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 39 (io39) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 40 (io40) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 41 (io41) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 42 (io42) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 43 (io43) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 44 (io44) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 45 (io45) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 46 (io46) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 47 (io47) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 48 (io48) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 49 (io49) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 50 (io50) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 51 (io51) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 52 (io52) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 53 (io53) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 54 (io54) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 55 (io55) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 56 (io56) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 57 (io57) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 58 (io58) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 59 (io59) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 60 (io60) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 61 (io61) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 62 (io62) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 63 (io63) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 64 (io64) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 65 (io65) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 66 (io66) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 67 (io67) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 68 (io68) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 69 (io69) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 70 (io70) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 71 (io71) on rt2880-pinmux
[    0.090000] pinctrl core: registered pin 72 (io72) on rt2880-pinmux
[    0.090000] pinctrl core: add 2 pinmux maps
[    0.090000] rt2880-pinmux pinctrl.1: found group selector 0 for i2c
[    0.090000] rt2880-pinmux pinctrl.1: found group selector 12 for ephy
[    0.090000] rt2880-pinmux pinctrl.1: request pin 1 (io1) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 2 (io2) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 40 (io40) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 41 (io41) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 42 (io42) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 43 (io43) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: request pin 44 (io44) for pinctrl.1
[    0.090000] rt2880-pinmux pinctrl.1: failed to lookup the sleep state
[    0.100000] bio: create slab &lt;bio-0&gt; at 0
[    0.110000] rt2880_gpio 10000600.gpio: registering 24 gpios
[    0.120000] rt2880_gpio 10000600.gpio: registering 24 irq handlers
[    0.130000] rt2880_gpio 10000660.gpio: registering 32 gpios
[    0.140000] rt2880_gpio 10000660.gpio: registering 32 irq handlers
[    0.150000] Switching to clocksource MIPS
[    0.160000] NET: Registered protocol family 2
[    0.170000] TCP established hash table entries: 512 (order: 0, 4096 bytes)
[    0.180000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)
[    0.190000] TCP: Hash tables configured (established 512 bind 512)
[    0.210000] TCP: reno registered
[    0.210000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.220000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.240000] NET: Registered protocol family 1
[    0.250000] rt-timer 10000100.timer: maximum frequncy is 2441Hz
[    0.260000] alarmtimer alarmtimer: no of_node; not parsing pinctrl DT
[    0.270000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.280000] jffs2: version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.300000] msgmni has been set to 120
[    0.310000] io scheduler noop registered
[    0.320000] io scheduler deadline registered (default)
[    0.330000] Serial: 8250/16550 driver, 16 ports, IRQ sharing enabled
[    0.350000] serial8250 serial8250: no of_node; not parsing pinctrl DT
[    0.350000] pinctrl core: add 1 pinmux maps
[    0.350000] rt2880-pinmux pinctrl.1: found group selector 3 for uartlite
[    0.350000] rt2880-pinmux pinctrl.1: request pin 15 (io15) for 10000c00.uartlite
[    0.350000] rt2880-pinmux pinctrl.1: request pin 16 (io16) for 10000c00.uartlite
[    0.350000] 10000c00.uartlite: ttyS0 at MMIO 0x10000c00 (irq = 20) is a 16550A
[    0.360000] console [ttyS0] enabled, bootconsole disabled
[    0.390000] pinctrl core: add 1 pinmux maps
[    0.390000] rt2880-pinmux pinctrl.1: found group selector 2 for spi
[    0.390000] rt2880-pinmux pinctrl.1: request pin 3 (io3) for 10000b00.spi
[    0.390000] rt2880-pinmux pinctrl.1: request pin 4 (io4) for 10000b00.spi
[    0.390000] rt2880-pinmux pinctrl.1: request pin 5 (io5) for 10000b00.spi
[    0.390000] rt2880-pinmux pinctrl.1: request pin 6 (io6) for 10000b00.spi
[    0.390000] m25p80 spi32766.0: found w25q128, expected mx25l6405d
[    0.400000] m25p80 spi32766.0: w25q128 (16384 Kbytes)
[    0.410000] 4 ofpart partitions found on MTD device spi32766.0
[    0.420000] Creating 4 MTD partitions on &quot;spi32766.0&quot;:
[    0.430000] 0x000000000000-0x000000030000 : &quot;u-boot&quot;
[    0.450000] 0x000000030000-0x000000040000 : &quot;u-boot-env&quot;
[    0.460000] 0x000000040000-0x000000050000 : &quot;factory&quot;
[    0.470000] 0x000000050000-0x000001000000 : &quot;firmware&quot;
[    0.480000] 0x0000001436d1-0x000001000000 : &quot;rootfs&quot;
[    0.490000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.520000] mtd: device 4 (rootfs) set to be root filesystem
[    0.530000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=0x300000, len=0xd00000
[    0.550000] 0x000000300000-0x000001000000 : &quot;rootfs_data&quot;
[    0.560000] (unregistered net_device): port 1 link up (100Mbps/Full duplex)
[    0.570000] ralink_soc_eth 10100000.ethernet: loaded mt7530 driver
[    0.590000] eth0: done loading
[    0.590000] rt3xxx-usbphy ubsphy.3: loaded
[    0.600000] rt2880_wdt 10000120.watchdog: Initialized
[    0.610000] TCP: cubic registered
[    0.620000] NET: Registered protocol family 17
[    0.630000] 8021q: 802.1Q VLAN Support v1.8
[    0.650000] VFS: Mounted root (squashfs filesystem) readonly on device 31:4.
[    0.660000] Freeing unused kernel memory: 216K (802ba000 - 802f0000)
[    0.790000] eth0: port 1 link down
[    3.220000] eth0: port 1 link up (100Mbps/Full duplex)
[    4.000000] usbcore: registered new interface driver usbfs
[    4.010000] usbcore: registered new interface driver hub
[    4.020000] usbcore: registered new device driver usb
[    4.030000] rt2880-pinmux pinctrl.1: request pin 1 (io1) for pio:1
[    4.030000] rt2880-pinmux pinctrl.1: request pin 2 (io2) for pio:2
[    4.030000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[    4.050000] leds-gpio gpio-leds.4: pins are not configured from the driver
[    4.060000] rt2880-pinmux pinctrl.1: request pin 41 (io41) for pio:41
[    4.070000] rt2880-pinmux pinctrl.1: request pin 42 (io42) for pio:42
[    4.070000] rt2880-pinmux pinctrl.1: request pin 44 (io44) for pio:44
[    5.900000] jffs2: notice: (279) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (1 unchecked, 0 orphan) and 23 of xref (0 dead, 17 orphan) found.
[    8.410000] NET: Registered protocol family 10
[    8.430000] nf_conntrack version 0.5.0 (967 buckets, 3868 max)
[    8.450000] ip6_tables: (C) 2000-2006 Netfilter Core Team
[    8.480000] Loading modules backported from Linux version master-2013-11-05-0-gafa3093
[    8.490000] Backport generated by backports.git backports-20130802-0-gdb67a3f
[    8.510000] ip_tables: (C) 2000-2006 Netfilter Core Team
[    8.570000] xt_time: kernel timezone is -0000
[    8.580000] usbcore: registered new interface driver asix
[    8.590000] usbcore: registered new interface driver cdc_ether
[    8.640000] cfg80211: Calling CRDA to update world regulatory domain
[    8.690000] cfg80211: World regulatory domain updated:
[    8.700000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    8.720000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.730000] cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.750000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    8.760000] cfg80211:   (5170000 KHz - 5250000 KHz @ 80000 KHz), (300 mBi, 2000 mBm)
[    8.780000] cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (300 mBi, 2000 mBm)
[    8.790000] cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm)
[    9.010000] PPP generic driver version 2.4.2
[    9.030000] NET: Registered protocol family 24
[    9.090000] usbcore: registered new interface driver rt2800usb
[   14.160000] device eth0.1 entered promiscuous mode
[   14.170000] device eth0 entered promiscuous mode
[   14.180000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0.1: link becomes ready
[   14.190000] br-lan: port 1(eth0.1) entered forwarding state
[   14.200000] br-lan: port 1(eth0.1) entered forwarding state
[   16.200000] br-lan: port 1(eth0.1) entered forwarding state</code></pre></div><br /><p>EDIT:<br />ethernet switch (all ports working):<br /></p><div class="codebox"><pre><code>swconfig dev switch0 show
Global attributes:
    enable_vlan: 1
Port 0:
    pvid: 2
    link: port:0 link:up speed:100baseT full-duplex 
Port 1:
    pvid: 1
    link: port:1 link:up speed:100baseT full-duplex 
Port 2:
    pvid: 1
    link: port:2 link:down
Port 3:
    pvid: 1
    link: port:3 link:down
Port 4:
    pvid: 1
    link: port:4 link:down
Port 5:
    pvid: 1
    link: port:5 link:down
Port 6:
    pvid: 0
    link: port:6 link:up speed:1000baseT full-duplex 
VLAN 1:
    ports: 1 2 3 4 5 6 
VLAN 2:
    ports: 0 6</code></pre></div><p>usb (ehci) working:<br /></p><div class="codebox"><pre><code>hdparm -t /dev/sda

/dev/sda:
 Timing buffered disk reads:  44 MB in  3.03 seconds =  14.54 MB/sec
root@OpenWrt:/# hdparm -t /dev/sda</code></pre></div><p>leds:<br /></p><div class="codebox"><pre><code>pin  led 
40   led 2 (wan)
41   led 4 (lan)
42   led 5 (usb)
43   led 1 (power)
??   led 3 (air) unreachable?</code></pre></div><p>buttons:<br /></p><div class="codebox"><pre><code>pin   button
1     reset
2     wps</code></pre></div>											<p class="post-edited">(Last edited by <strong>loblik</strong> on 10 Dec 2013, 08:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p219731">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kwongwo</div>
					<div class="post-datetime">
						11 Dec 2013, 18:15					</div>
				</div>
				<div class="post-content content">
					<p>Dear loblik, i have a rounter like WMR-300(7620n,64m ram) running on openwrt,the wirless just works fine.</p><p>and i have the openwrt source ,but i do not know the detail,and how it works.</p><br /><p>how can i give you a hand?</p>											<p class="post-edited">(Last edited by <strong>kwongwo</strong> on 11 Dec 2013, 18:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p221145">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jack.zhu</div>
					<div class="post-datetime">
						29 Dec 2013, 06:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi , After I have booted the router. I can find the WIFI SSID, but the wifi power show 0% .&nbsp; Could send your source code to me? </p><div class="quotebox"><cite>kwongwo wrote:</cite><blockquote><p>Dear loblik, i have a rounter like WMR-300(7620n,64m ram) running on openwrt,the wirless just works fine.</p><p>and i have the openwrt source ,but i do not know the detail,and how it works.</p><br /><p>how can i give you a hand?</p></blockquote></div>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>