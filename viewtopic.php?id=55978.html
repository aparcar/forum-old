<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> BT OpenReach ECI VDSL VG3503J</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p266952">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jf1976</div>
					<div class="post-datetime">
						26 Feb 2015, 13:17					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, Hope posting here is ok,</p><p>I have built and flashed an image from trunk to my device without anything major going wrong.<br />I understand the base image is minimal and am happy working at the command line via ttl or ssh.<br />However there are a few issues with the device tree ?</p><p>I have been looking at the DSTI file(s) and have spotted a few differences and im now at a point were i could do with someone who actually knows what the f*** there doing to check my attempted fix.</p><p>-----[BEGIN]-----<br />/include/ &quot;vr9.dtsi&quot;</p><p>/ {<br />&nbsp; &nbsp; model = &quot;VG3503J - BT OpenReach VDSL Modem&quot;;</p><p>&nbsp; &nbsp; chosen {<br />&nbsp; &nbsp; &nbsp; &nbsp; bootargs = &quot;console=ttyLTQ0,115200 init=/etc/preinit&quot;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; memory@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x0 0x2000000&gt;;<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; fpi@10000000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; localbus@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ranges = &lt;0 0 0x0 0x3ffffff&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; nor-boot@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,nor&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bank-width = &lt;2&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0 0x0 0x2000000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;1&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;uboot&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x00000 0x20000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@20000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;kernel&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x20000 0x180000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@1a0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;rootfs&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x1a0000 0x5a0000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@740000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;btagent&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x740000 0x80000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7c0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;pri_bfocus_cfg&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7c0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7d0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;sec_bfocus_cfg&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7d0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7e0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;sysconfig&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7e0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; partition@7f0000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;misc_cfg&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x7f0000 0x10000&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; gpio: pinmux@E100B10 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pinctrl-names = &quot;default&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pinctrl-0 = &lt;&amp;state_default&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; state_default: pinmux {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mdio {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,groups = &quot;mdio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,function = &quot;mdio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gphy-leds {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,groups = &quot;gphy0 led0&quot;, &quot;gphy0 led1&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;gphy1 led0&quot;, &quot;gphy1 led1&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;gphy2 led0&quot;, &quot;gphy2 led1&quot;,&quot;gphy2 led2&quot;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;gphy3 led0&quot;, &quot;gphy3 led1&quot;,&quot;gphy3 led2&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,function = &quot;gphy&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,pull = &lt;2&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,open-drain = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,output = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; eth@E108000 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-net&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;&nbsp; &nbsp; 0xE108000 0x3000 /* switch */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xE10B100 0x70 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /* mdio */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xE10B1D8 0x30 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /* mii */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xE10B308 0x30 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; /* pmac */<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; interrupt-parent = &lt;&amp;icu0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; interrupts = &lt;73 72&gt;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lan1:interface@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-pdi&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mac-address = [ 00 11 22 33 44 55 ];<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lantiq,switch;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ethernet@2 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-pdi-port&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;2&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-mode = &quot;mii&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-handle = &lt;&amp;phy11&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ethernet@4 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-pdi-port&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;4&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-mode = &quot;mii&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-handle = &lt;&amp;phy13&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; lan2:interface@1 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-pdi&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mac-address = [ 00 11 22 33 44 56 ];</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ethernet@2 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-pdi-port&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;2&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-mode = &quot;mii&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy-handle = &lt;&amp;phy11&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mdio@0 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,xrx200-mdio&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy11: ethernet-phy@11 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x11&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,phy11g&quot;, &quot;ethernet-phy-ieee802.3-c22&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phy13: ethernet-phy@13 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; reg = &lt;0x13&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;lantiq,phy11g&quot;, &quot;ethernet-phy-ieee802.3-c22&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; gpio-keys-polled {<br />&nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-keys-polled&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; #address-cells = &lt;1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; #size-cells = &lt;0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; poll-interval = &lt;100&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; reset {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;reset&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 6 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; linux,code = &lt;0x198&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };</p><p>&nbsp; &nbsp; gpio-leds {<br />&nbsp; &nbsp; &nbsp; &nbsp; compatible = &quot;gpio-leds&quot;;</p><p>&nbsp; &nbsp; &nbsp; &nbsp; power {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;power:green:ready&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 28 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; power2 {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;power:red:busy&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 14 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; dsl {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;dsl:green:connected&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 19 1&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan1cabledetect {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan1:green:connected&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 45 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan1activity {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan1:orange:activity&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 47 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan1panel {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan1:green:eth0&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 44 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan2connected {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan2:green:connected&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 7 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan2activity {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan2:orange:activity&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 2 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; &nbsp; &nbsp; lan2panel {<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; label = &quot;lan2:green:eth1&quot;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; gpios = &lt;&amp;gpio 5 0&gt;;<br />&nbsp; &nbsp; &nbsp; &nbsp; };<br />&nbsp; &nbsp; };<br />};<br />-----[ END&nbsp; ]-----</p><p>i have been documenting my research here :- <a href="http://wiki.openwrt.org/toh/bt/vg3503j">http://wiki.openwrt.org/toh/bt/vg3503j</a> in the hope it might help other but im now stuck without some &quot;expert&quot; assistance.&nbsp; Fixing the Lights is not major but would be nice, i also have a question about baby jumbo frame, again i have some good personal docs that would make me think i should enable it as the backend system the modem connects to uses it. ie BT devices support it.</p><p>the final config is still yet undecided but i would like to use the modem as the gateway in at least.&nbsp; i have been looking at an old project called hogwash if anyone has used or have a view please feel free to join in.</p>											<p class="post-edited">(Last edited by <strong>jf1976</strong> on 26 Feb 2015, 13:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p266959">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jf1976</div>
					<div class="post-datetime">
						26 Feb 2015, 14:13					</div>
				</div>
				<div class="post-content content">
					<p>i have use the following commands to find the leds / gpio.</p><br /><p>##POWER<br />echo 214 &gt;/sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio214/direction<br />echo 228 &gt;/sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio228/direction</p><p>## DSL<br />echo 219 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio219/direction</p><p>## LAN1 Front Panel<br />echo 244 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio244/direction<br /># echo 1 &gt;/sys/class/gpio/gpio244/value <br /># echo 0 &gt;/sys/class/gpio/gpio244/value <br />## Link LAN1 REAR<br />echo 245 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio245/direction<br /># echo 1 &gt;/sys/class/gpio/gpio245/value <br /># echo 0 &gt;/sys/class/gpio/gpio245/value <br />## LINK ACT LAN1 REAR<br />echo 247 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio247/direction<br /># echo 1 &gt;/sys/class/gpio/gpio247/value <br /># echo 0 &gt;/sys/class/gpio/gpio247/value <br />## LAN2 Front Panel Green<br />echo 205 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio205/direction<br /># echo 1 &gt;/sys/class/gpio/gpio205/value <br /># echo 0 &gt;/sys/class/gpio/gpio205/value <br />## LAN2 LINK ACT REAR<br />echo 202 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio202/direction<br /># echo 1 &gt;/sys/class/gpio/gpio202/value <br /># echo 0 &gt;/sys/class/gpio/gpio202/value <br />## Link LAN2 REAR<br />echo 207 &gt; /sys/class/gpio/export<br />echo &quot;out&quot; &gt; /sys/class/gpio/gpio207/direction<br /># echo 1 &gt;/sys/class/gpio/gpio207/value <br /># echo 0 &gt;/sys/class/gpio/gpio207/value</p><p>echo 1 for ON and 0 for OFF.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p267477">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jf1976</div>
					<div class="post-datetime">
						3 Mar 2015, 12:46					</div>
				</div>
				<div class="post-content content">
					<p>Ok so after a bit more research and a broken flash layout on latest trunk i decided i want revert back to the stable branch Barrier Breaker at revision r44550, the same errors apply ethernet leds.<br />i have rebuilt the image using the amended dtsi and although i now have a full set of leds for front panel and device interfaces i am unable to find the corrections needed to inform the system what to do with them, ie all are off now and you need to manual turn them on.</p><p>root@OpenWrt:/sys/class/leds# </p><p>dsl:green:connected/&nbsp; &nbsp; &nbsp;lan1:orange:activity/&nbsp; &nbsp; &nbsp; lan2:orange:activity/<br />lan1:green:connected/&nbsp; &nbsp;lan2:green:connected/&nbsp; power:green:ready/<br />lan1:green:eth0/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;lan2:green:eth1/&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;power:red:busy/</p><p>what i would say is the layout is not correct as each led have the following </p><p>ls dsl\:green\:connected/ -lh<br />brightness<br />device -&gt; ../../../gpio-leds.6<br />max_brightness<br />subsystem -&gt; ../../../../class/leds<br />trigger<br />uevent</p><p>as an example brightness is not correct the usable range is 0 OFF 1 ON not 0-255.</p><p># cat&nbsp; dsl\:green\:connected/brightness <br />0<br />root@OpenWrt:/sys/class/leds# echo 1 &gt;&nbsp; dsl\:green\:connected/brightness <br />the led is now on </p><p>root@OpenWrt:/sys/class/leds# echo 0 &gt;&nbsp; dsl\:green\:connected/brightness <br />the led is now off</p><p>looking at trigger leads me to the conclusion i need to find out more about this ? so if anyone could add to this thread it would help a great deal.</p><p># cat&nbsp; dsl\:green\:connected/trigger <br />[none] nand-disk timer heartbeat default-on netdev</p><p>both lan1 and lan2 are available along with what i understand to be the dsl interface?</p><p># ifconfig -a | grep &#039;Link encap:Ethernet&#039; | awk &#039;{print $1}&#039;<br />eth0<br />eth1<br />ptm0</p><p>the message dump clearly show i have a few things to workout, but i think for now i will stick with Barrier Breaker and continue to work on fixing up my local device, it would be handy if someone with a bit more experience could lend some advise or corrections. </p><p># dmesg | grep led<br />[&nbsp; &nbsp; 0.000000] bootconsole [early0] enabled<br />[&nbsp; &nbsp; 0.068000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy2 led0&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.072000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy2 led1&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.076000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy2 led2&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.080000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy3 led0&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.084000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy3 led1&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.088000] pinctrl-xway 1e100b10.pinmux: invalid group &quot;gphy3 led2&quot; for function &quot;gphy&quot;<br />[&nbsp; &nbsp; 0.092000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy2 led0<br />[&nbsp; &nbsp; 0.096000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy2 led0&quot;<br />[&nbsp; &nbsp; 0.100000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy2 led1<br />[&nbsp; &nbsp; 0.104000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy2 led1&quot;<br />[&nbsp; &nbsp; 0.108000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy2 led2<br />[&nbsp; &nbsp; 0.112000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy2 led2&quot;<br />[&nbsp; &nbsp; 0.116000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy3 led0<br />[&nbsp; &nbsp; 0.120000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy3 led0&quot;<br />[&nbsp; &nbsp; 0.124000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy3 led1<br />[&nbsp; &nbsp; 0.128000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy3 led1&quot;<br />[&nbsp; &nbsp; 0.132000] pinctrl-xway 1e100b10.pinmux: does not have pin group gphy3 led2<br />[&nbsp; &nbsp; 0.136000] pinctrl-xway 1e100b10.pinmux: could not map group config for &quot;gphy3 led2&quot;<br />[&nbsp; &nbsp; 1.236000] pcie_rc_initialize link up failed!!!!!<br />[&nbsp; &nbsp; 1.560000] console [ttyLTQ0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 1.840000] xrx200-mdio: probing phy of port 2 failed<br />[&nbsp; &nbsp; 1.852000] leds-gpio gpio-leds.6: pins are not configured from the driver</p><p>root@OpenWrt:/sys/class/leds# dmesg | grep -iE &#039;(error|warn|fail|firmware)&#039;<br />[&nbsp; &nbsp; 1.236000] pcie_rc_initialize link up failed!!!!!<br />[&nbsp; &nbsp; 1.380000] phy-xrx200 gphy-xrx200.7: booting GPHY0 firmware at 18C0000<br />[&nbsp; &nbsp; 1.384000] phy-xrx200 gphy-xrx200.7: booting GPHY1 firmware at 18C0000<br />[&nbsp; &nbsp; 1.840000] xrx200-mdio: probing phy of port 2 failed<br />[&nbsp; &nbsp; 1.884000] UBIFS error (pid 1): ubifs_mount: cannot open &quot;ubi0:rootfs&quot;, error -19<br />[&nbsp; &nbsp;17.572000] PTM 1.0.27&nbsp; &nbsp; PTM (E1) firmware version 0.30</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>