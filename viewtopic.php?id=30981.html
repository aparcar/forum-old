<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Is Asus WL-500W stable in kernel 2.6 (BCM47xx)?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 3 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p139670">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jkiddo</div>
					<div class="post-datetime">
						22 Jul 2011, 12:07					</div>
				</div>
				<div class="post-content content">
					<p>As can be seen from the <a href="http://wiki.openwrt.org/toh/start#asus">http://wiki.openwrt.org/toh/start#asus</a>, the <a href="http://wiki.openwrt.org/toh/asus/wl500gp">http://wiki.openwrt.org/toh/asus/wl500gp</a> regarding v1, is among those devices listed as proper targets for the brcm47xx package (having the BCM4704 processor). As the Asus WL-500W has the same chipset, also the BCM4704, shouldn´t this also make the 500W kernel 2.6 compatible with stable wifi, and thereby be a proper candidate to be posted under the ToH page and finally be removed from the ´ye ol´legay page at <a href="http://wiki.openwrt.org/oldwiki/openwrtdocs/hardware/asus/wl500w">http://wiki.openwrt.org/oldwiki/openwrt … sus/wl500w</a>?</p>											<p class="post-edited">(Last edited by <strong>jkiddo</strong> on 22 Jul 2011, 12:07)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p139678">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">maurer</div>
					<div class="post-datetime">
						22 Jul 2011, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>status of the b43 support for 14e4:4321 is partially in 2.6.39+.<br />which means that wireless is in the best case not stable - if you manage to get in link with trunk builds.</p><p>change the the mini-pci to a atheros, use ath9k drivers and it will run happily the k2.6+ <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>maurer</strong> on 22 Jul 2011, 17:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140188">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						28 Jul 2011, 21:55					</div>
				</div>
				<div class="post-content content">
					<p>There’s still the binary 2.6 wl.ko module from Broadcom for bcm47xx and this has been in use for a long time.<br />I’m running that one on a 500W and it is stable.</p><p>OpenWrt doesn’t enable the b43 driver for 4329 at all yet. N_PHY ap mode is not finished yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140194">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">monotube</div>
					<div class="post-datetime">
						28 Jul 2011, 23:51					</div>
				</div>
				<div class="post-content content">
					<p>towolf: Would you like to explain how to compile openwrt so that wl.ko will be used? I guess I need to compile from trunk, but which modules should I select?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140198">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">gulikoza</div>
					<div class="post-datetime">
						29 Jul 2011, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>You can select it in the Target Profile:</p><p>Broadcom BCM43xx WiFi (wl, proprietary)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p140200">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						29 Jul 2011, 00:31					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code> ??????????????????????????? Target Profile ???????????????????????????
 ?  Use the arrow keys to navigate this window or press the hotkey of ?  
 ?  the item you wish to select followed by the &lt;SPACE BAR&gt;. Press    ?  
 ?  &lt;?&gt; for additional information about this option.                 ?  
 ? ?????????????????????????????????????????????????????????????????? ?  
 ? ?    ( ) Broadcom BCM43xx WiFi (b43, default)                    ? ?  
 ? ?    (X) Broadcom BCM43xx WiFi (wl, proprietary)                 ? ?  
 ? ?    ( ) Atheros WiFi (madwifi)                                  ? ?  
 ? ?    ( ) Atheros WiFi (ath5k)                                    ? ?  
 ? ?    ( ) No WiFi                                                 ? ?  
 ? ?    ( ) Edimax PS-1208MFG                                       ? ?  
 ? ?????????v(+)????????????????????????????????????????????????????? ?  
 ??????????????????????????????????????????????????????????????????????  
 ?                       &lt;Select&gt;      &lt; Help &gt;                       ?  
 ??????????????????????????????????????????????????????????????????????</code></pre></div><p>I just found this screen for b43, but I have no idea if it works now. The W500 is only a peripheral wifi station for us nowadays. Note the bottom option:</p><div class="codebox"><pre><code>OpenWrt Attitude Adjustment (r27711) Configuration
???????????????????????????????????????????????????????????????????????????????????????
 ?????????????????????????????????? Configuration ???????????????????????????????????
 ?  Arrow keys navigate the menu.  &lt;Enter&gt; selects submenus ---&gt;.  Highlighted      ?  
 ?  letters are hotkeys.  Pressing &lt;Y&gt; includes, &lt;N&gt; excludes, &lt;M&gt; builds as        ?  
 ?  package.  Press &lt;Esc&gt;&lt;Esc&gt; to exit, &lt;?&gt; for Help, &lt;/&gt; for Search.  Legend: [*]  ?  
 ?  built-in  [ ] excluded  &lt;M&gt; package  &lt; &gt; package capable                        ?  
 ? ???????????????????????????????????????????????????????????????????????????????? ?  
 ? ?     b43 firmware version (Firmware 478.104 from driver 4.178.10.4)  ---&gt;     ? ?  
 ? ? [*] Remove unnecessary firmware files (NEW)                                  ? ?  
 ? ? (5,6,7,8,9,10,11,13,14,15,16) Core revisions to include (NEW)                ? ?  
 ? ? (G,LP,N) PHY types to include (NEW)                                          ? ?  
 ? ? [ ] Enable debug output and debugfs for b43 (NEW)                            ? ?  
 ? ? [ ] Enable support for PIO transfer mode (NEW)                               ? ?  
 ? ? [*] Enable support for N-PHYs                                                ? ?  
 ? ???????????????????????????????????????????????????????????????????????????????? ?  
 ????????????????????????????????????????????????????????????????????????????????????  
 ?                         &lt;Select&gt;    &lt; Exit &gt;    &lt; Help &gt;                         ?  
 ????????????????????????????????????????????????????????????????????????????????????</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144242">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jkiddo</div>
					<div class="post-datetime">
						22 Sep 2011, 22:12					</div>
				</div>
				<div class="post-content content">
					<p>So what happened here: <a href="http://code.google.com/p/wl500g/">http://code.google.com/p/wl500g/</a> - apparently they made the 2.6 kernel fit the WL500W</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145451">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						9 Oct 2011, 17:37					</div>
				</div>
				<div class="post-content content">
					<p>I switched my 500W to trunk b43 driver and it kind of works. But for some reason it spams dmesg with this message 70 times per second:</p><br /><div class="codebox"><pre><code>Oct  9 16:26:22 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:27:23  kernel: last message repeated 4579 times
Oct  9 16:28:24  kernel: last message repeated 4756 times
Oct  9 16:28:57  kernel: last message repeated 2687 times
Oct  9 16:28:57 karibu.lan kernel: b43-phy0 debug: PIO RX error: len &gt; 0x700
Oct  9 16:28:57 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:29:58  kernel: last message repeated 4905 times
Oct  9 16:30:59  kernel: last message repeated 4255 times
Oct  9 16:32:00  kernel: last message repeated 3998 times
Oct  9 16:33:00  kernel: last message repeated 4404 times
Oct  9 16:34:00  kernel: last message repeated 4567 times
Oct  9 16:35:00  kernel: last message repeated 3293 times
Oct  9 16:35:36  kernel: last message repeated 1021 times
Oct  9 16:35:35 karibu.lan kernel: b43-phy0 debug: PIO RX error: len &gt; 0x700
Oct  9 16:35:35 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:36:30  kernel: last message repeated 2734 times
Oct  9 16:36:30 karibu.lan kernel: b43-phy0 debug: PIO RX error: len &gt; 0x700
Oct  9 16:36:30 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped</code></pre></div><p>This is the dmesg from bootup:<br /></p><div class="codebox"><pre><code>Jan  1 01:00:43 karibu.lan kernel: b43-phy0: Broadcom 4321 WLAN found (core revision 11)
Jan  1 01:00:43 karibu.lan kernel: b43-phy0 debug: Found PHY: Analog 5, Type 4, Revision 1
Jan  1 01:00:43 karibu.lan kernel: b43-phy0 debug: Found Radio: Manuf 0x17F, Version 0x2055, Revision 4
Jan  1 01:00:43 karibu.lan kernel: ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
Jan  1 01:00:43 karibu.lan kernel: Registered led device: b43-phy0::tx
Jan  1 01:00:43 karibu.lan kernel: Registered led device: b43-phy0::rx
Jan  1 01:00:43 karibu.lan kernel: Registered led device: b43-phy0::assoc
Jan  1 01:00:43 karibu.lan kernel: Registered led device: b43-phy0::radio
Jan  1 01:00:43 karibu.lan kernel: Broadcom 43xx driver loaded [ Features: PNL ]
Jan  1 01:00:43 karibu.lan kernel: cfg80211: World regulatory domain updated:
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Jan  1 01:00:43 karibu.lan kernel: cfg80211:     (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
Jan  1 01:00:44 karibu.lan kernel: ip_tables: (C) 2000-2006 Netfilter Core Team
Oct  9 16:26:11 karibu.lan kernel: nf_conntrack version 0.5.0 (464 buckets, 1856 max)
Oct  9 16:26:12 karibu.lan kernel: xt_time: kernel timezone is -0000
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-alauda
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-cypress
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-datafab
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-freecom
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-isd200
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-jumpshot
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-karma
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-sddr09
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-sddr55
Oct  9 16:26:13 karibu.lan kernel: usbcore: registered new interface driver ums-usbat
Oct  9 16:26:16 karibu.lan kernel: cfg80211: Calling CRDA for country: DE
Oct  9 16:26:16 karibu.lan kernel: cfg80211: Regulatory domain changed to country: DE
Oct  9 16:26:16 karibu.lan kernel: cfg80211:     (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
Oct  9 16:26:16 karibu.lan kernel: cfg80211:     (2400000 KHz - 2483500 KHz @ 40000 KHz), (N/A, 2000 mBm)
Oct  9 16:26:16 karibu.lan kernel: cfg80211:     (5150000 KHz - 5250000 KHz @ 40000 KHz), (N/A, 2000 mBm)
Oct  9 16:26:16 karibu.lan kernel: cfg80211:     (5250000 KHz - 5350000 KHz @ 40000 KHz), (N/A, 2000 mBm)
Oct  9 16:26:16 karibu.lan kernel: cfg80211:     (5470000 KHz - 5725000 KHz @ 40000 KHz), (N/A, 2698 mBm)
Oct  9 16:26:18 karibu.lan kernel: b43-phy0: Loading firmware version 508.1084 (2009-01-14 01:32:01)
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: Chip initialized
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: 64-bit DMA initialized
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: QoS enabled
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: Wireless interface started
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: Adding Interface type 2
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 ERROR: Fatal DMA error: 0x00000400, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 ERROR: This device does not support DMA on your system. It will now be switched to PIO.
Oct  9 16:26:18 karibu.lan kernel: b43-phy0: Controller RESET (DMA error) ...
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: Wireless interface stopped
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: DMA-64 rx_ring: Used slots 0/64, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: DMA-64 tx_ring_AC_BK: Used slots 0/256, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:18 karibu.lan kernel: b43-phy0 debug: DMA-64 tx_ring_AC_BE: Used slots 0/256, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: DMA-64 tx_ring_AC_VI: Used slots 0/256, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: DMA-64 tx_ring_AC_VO: Used slots 0/256, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: DMA-64 tx_ring_mcast: Used slots 0/256, Failed frames 0/0 = 0.0%, Average tries 0.00
Oct  9 16:26:19 karibu.lan kernel: b43-phy0: Loading firmware version 508.1084 (2009-01-14 01:32:01)
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Chip initialized
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 warning: Forced PIO by use_pio module parameter. This should not be needed and will result in lower performance.
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: PIO initialized
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: QoS enabled
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Wireless interface started
Oct  9 16:26:19 karibu.lan kernel: b43-phy0: Controller restarted
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Removing Interface type 2
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Wireless interface stopped
Oct  9 16:26:19 karibu.lan kernel: b43-phy0: Loading firmware version 508.1084 (2009-01-14 01:32:01)
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Chip initialized
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 warning: Forced PIO by use_pio module parameter. This should not be needed and will result in lower performance.
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: PIO initialized
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: QoS enabled
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Wireless interface started
Oct  9 16:26:19 karibu.lan kernel: device wlan0 entered promiscuous mode
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Adding Interface type 3
Oct  9 16:26:19 karibu.lan kernel: br-lan: port 2(wlan0) entering forwarding state
Oct  9 16:26:19 karibu.lan kernel: br-lan: port 2(wlan0) entering forwarding state
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Set beacon interval to 100
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Updated beacon template at 0x68
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: Updated beacon template at 0x468
Oct  9 16:26:19 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:26:22  kernel: last message repeated 181 times
Oct  9 16:26:22 karibu.lan kernel: device wlan0 left promiscuous mode
Oct  9 16:26:22 karibu.lan kernel: br-lan: port 2(wlan0) entering forwarding state
Oct  9 16:26:22 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:26:22 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:26:22 karibu.lan kernel: device wlan0 entered promiscuous mode
Oct  9 16:26:22 karibu.lan kernel: br-lan: port 2(wlan0) entering forwarding state
Oct  9 16:26:22 karibu.lan kernel: br-lan: port 2(wlan0) entering forwarding state
Oct  9 16:26:22 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:27:23  kernel: last message repeated 4579 times
Oct  9 16:28:24  kernel: last message repeated 4756 times
Oct  9 16:28:57  kernel: last message repeated 2687 times
Oct  9 16:28:57 karibu.lan kernel: b43-phy0 debug: PIO RX error: len &gt; 0x700
Oct  9 16:28:57 karibu.lan kernel: b43-phy0 debug: RX: Packet dropped
Oct  9 16:29:58  kernel: last message repeated 4905 times</code></pre></div>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 9 Oct 2011, 17:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145969">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">jkiddo</div>
					<div class="post-datetime">
						16 Oct 2011, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>Thats kinda wierd... So it does not sound quite stable to me. Does the wifi part work even though you get the dmesg spammed?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146060">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						18 Oct 2011, 03:33					</div>
				</div>
				<div class="post-content content">
					<p>I think it’s still too early to switch. It’s talking about using PIO mode but it should use DMA. So, that’s my hint. </p><p>Otherwise I think the new broadcom driver should support 4329 sooner or later because it apparently will be supported by the brcm fmac driver. But they don’t have ap mode yet and they won’t implement further features before they move from staging to mainline and if that will happen is still unclear. The b43 dude and the broadcom developers are heaping blame on each other that there are two drivers for the same hardware now.</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 18 Oct 2011, 03:35)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>