<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Booting OpenWRT from USB pendrive</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p257980">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						17 Dec 2014, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>I am trying to boot the openWRT from usb on my x86 pc.</p><p>i compiled the openWRT for X86 target and generated the below binaries.</p><p>md5sums<br />openwrt-x86-generic-combined-ext4.img.gz<br />openwrt-x86-generic-combined-squashfs.img<br />openwrt-x86-generic-Generic-rootfs.tar.gz<br />openwrt-x86-generic-rootfs-ext4.img.gz<br />openwrt-x86-generic-rootfs-squashfs.img<br />openwrt-x86-generic-vmlinuz<br />packages</p><p>i copied the above binaries into my USB pen drive and i set my BIOS settings boot priority as ramovable disk.</p><p>Please can you help me to boot it from USB.<br />i am using Ubuntu linux PC.</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257984">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						17 Dec 2014, 19:16					</div>
				</div>
				<div class="post-content content">
					<p>What is the procedure to flash the kernel and filesystem images onto the usb stick and boot the same on x86 PC.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p257989">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						17 Dec 2014, 20:22					</div>
				</div>
				<div class="post-content content">
					<p>Use the ext4 image.&nbsp; After unzipping, use dd to copy it raw to the pen drive...<br />Plug into Ubuntu PC.<br />sudo umount /dev/sdb1<br />sudo dd if=&lt;image&gt; of=/dev/sdb</p><p>Be absolutely sure that sdb is the proper drive. This process will erase all data previously existing on the drive.<br />Then you can boot from the drive.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 17 Dec 2014, 20:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258018">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						18 Dec 2014, 05:25					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your info.<br />I tried this procedure by changing BIOS setting to boot from removable drive.<br />Formated the drive sdb with ext4 and used dd command to write the image.</p><p>but it is not booting.</p><p>Can you provide me the tips to cross check and boot the image succcessfully.</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258019">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Dec 2014, 05:35					</div>
				</div>
				<div class="post-content content">
					<p>When you plug in the drive under Ubuntu, does it now have a filesystem on it?&nbsp; There should be a typical root file system and about 40 MB of free space in a 50 MB partition.&nbsp; (Most of the space on a GB drive is unusable at this point, but you can fix that later).</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258063">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						18 Dec 2014, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>When i plug the usb drive under ubuntu which is showing as 40 Mb free space and the drive having the root filesystem.<br />command used:</p><p>dd if=openwrt-x86-generic-combined-ext4.img of=/dev/sdb</p><p>This image was built by me.</p><p>I tried by downloading the image from <a href="http://macbruins.com/2011/09/01/easy-live-usb-for-x86-openwrt/">http://macbruins.com/2011/09/01/easy-li … 6-openwrt/</a><br />openwrt-x86-ext2.image.gz</p><p>with this also i am unable to boot.<br />Can you please share me the steps and prebuilt images link to download towork on x86.</p><p>Thanks in advance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258072">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Dec 2014, 17:30					</div>
				</div>
				<div class="post-content content">
					<p>Official prebuilt images are here:<br /><a href="http://downloads.openwrt.org/barrier_breaker/14.07/x86/generic/">http://downloads.openwrt.org/barrier_br … 6/generic/</a></p><p>When you say &quot;unable to boot&quot; does it do anything?&nbsp; What should happen is a grub screen comes up with 2 choices and then 2 seconds later it boots the OpenWrt kernel.&nbsp; If the light on the drive never comes on or blinks at all there is probably a problem with your BIOS not reading the drive.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258078">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						18 Dec 2014, 18:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi Thanks for your valuable&nbsp; inputs.<br />I am able to make progress&nbsp; with prebuilt images.<br />I tried with combined ext4 file system and able to boot but not complete.</p><p>Do we get command prompt with this binary?</p><p>i am not observed this with the pre built binaries. <br />can you suggest me how to get the command prompt to browse with filesystem or if want to configure something.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258079">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						18 Dec 2014, 18:55					</div>
				</div>
				<div class="post-content content">
					<p>Yes after the boot completes you should be able to hit enter on the keyboard and have a command prompt on the screen.&nbsp; Note that some older BIOS&#039;s do not support USB keyboards fully and I don&#039;t think that is built into the prebuilt images either.&nbsp; On those machines you may need to use a PS2 keyboard plugged into the PS2 keyboard socket on the motherboard.</p><p>When it only boots partway and stalls, the last few messages on the screen will be related to the problem.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 18 Dec 2014, 18:57)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258159">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						19 Dec 2014, 20:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am able to build and boot openWRT but not complete.<br />Please find the attached image as my openWRT log messages. <br />This image was built by me only.</p><p>I am using usb keyboard and mouse as my input devices.</p><p>How can i come to know that what kernel version am i using?<br />If i am using older kernel versions, how can i get latest stable kernel?</p><p>i enabled the kernel modules for USB HID devices as inbuilt to kernel by selecting it as * and in busybox also i make it as inbuilt&nbsp; for lsusb.</p><p>Can you please help me to what needs to be enabled in configurations to get input devices to work?<br />By seeing the console messages can you clarify me openWRT booted fully or partially? If it booted partially can you suggest me how to boot openWRT fully.</p><p>I am trying to inser an image but which is not allowing me to do that last lines..</p><p>ext4 mounted filesystem without journal<br />Please press enter to activate this console<br />Net registerd protocol family 10<br />.....<br />...</p><p>Net registered protocol family 24<br />PPP generic driver version 2.4.2<br />Random non blocking pool is initialized<br />_</p><br /><p>Thanks for your info.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258200">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						20 Dec 2014, 01:21					</div>
				</div>
				<div class="post-content content">
					<p>Make sure you have kmod-usb-core, kmod-usb-ohci, and kmod-usb-hid built into your kernel.&nbsp; I think these are sufficient for a USB keyboard to work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258216">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						20 Dec 2014, 09:29					</div>
				</div>
				<div class="post-content content">
					<p>Yes, These are part of kernel but not able to seen any command prompt and which is not taking any input from keyboard.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258408">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">knraju123</div>
					<div class="post-datetime">
						22 Dec 2014, 11:42					</div>
				</div>
				<div class="post-content content">
					<p>Can you please comment on this.<br />Why init scripts are not running.What do i need to enable to invoke input drivers and filesystem to up and running.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>