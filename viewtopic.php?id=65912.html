<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Error on DDNS update due to error on &quot;wget http://checkip.dyndns.com&quot;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p330120">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						29 Jun 2016, 13:13					</div>
				</div>
				<div class="post-content content">
					<p>&quot;wget <a href="http://checkip.dyndns.com">http://checkip.dyndns.com</a>&quot; shows sometimes errors which causes problems on OpenWRT update client.<br />It is used by the OpenWRT DDNS update client to determine the current IP address.</p><p>A query of &quot;checkip.dyndns.com&quot; via the command &quot;wget&quot; ends sometimes with the following error messages:<br />&quot;Connection refused&quot; or &quot;Connection reset by peer&quot;</p><p>It happens mostly when the following two IP addresses get queried, so I guess its a server side problem.<br />216.146.38.70 / 91.198.22.142</p><p>My colleague told me that he is having the same problem on another proprietary router firmware right now.<br />Did anyone make the same experience on OpenWRT or other alternative update clients?</p><p>I did run a couple queries with a test script, please find the output via the following link:<br /><a href="https://dl.dropboxusercontent.com/u/16833149/DynDNS%20Test_San_Martin.txt">https://dl.dropboxusercontent.com/u/168 … Martin.txt</a></p><p>I am also having this problem on different locations (Nicaragau, Croatia, Austria...)</p>											<p class="post-edited">(Last edited by <strong>michaeluray</strong> on 29 Jun 2016, 13:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330123">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">remlei</div>
					<div class="post-datetime">
						29 Jun 2016, 13:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>216.146.38.70 / 91.198.22.142</p></blockquote></div><p>tried these IPs and they work fine for me, throwing me a simple text file with my ip address on it.</p><p>although cant really tell if the actual thing works since I use minidns.net using custom url (since openwrt doesnt have this on ddns selection) and it works for me since 2004 I used it when my first DSL connection reached my house.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330125">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						29 Jun 2016, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>Yea, sometimes it works with these IPs, sometimes not.<br />Sometimes it takes below 1s to receive an answer, sometimes it takes more than 20-30s, sometimes it aborts with the mentioned errors.</p><p>You can see that in the file which I provided via the link.<br /></p><div class="quotebox"><cite>michaeluray wrote:</cite><blockquote><p>&quot;wget <a href="http://checkip.dyndns.com">http://checkip.dyndns.com</a>&quot; <br />I did run a couple queries with a test script, please find the output via the following link:<br /><a href="https://dl.dropboxusercontent.com/u/16833149/DynDNS%20Test_San_Martin.txt">https://dl.dropboxusercontent.com/u/168 … Martin.txt</a></p></blockquote></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330131">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						29 Jun 2016, 14:56					</div>
				</div>
				<div class="post-content content">
					<p>The issue seems to be that the OPENWRT client is not as robust as one would like it to be, since the DDNS package is openwrt specific going to the Dyn community is not going to fix the lack of robustness. Now you might argue that Dyn should &quot;up their game&quot; but that is orthogonal to the OPs reported issue.</p><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp;M.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330135">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						29 Jun 2016, 15:13					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>moeller0 wrote:</cite><blockquote><p>The issue seems to be that the OPENWRT client is not as robust as one would like it to be, since the DDNS package is openwrt specific going to the Dyn community is not going to fix the lack of robustness.</p></blockquote></div><p>That is exactly the point. I guess the official DynDNS update client uses the same mechanism to determine the IP, but I also guess it handles the error on a different way.</p><p>Regarding that &quot;<a href="http://checkip.dyndns.com">http://checkip.dyndns.com</a>&quot; is the OpenWRT DDNS default check IP URL I would say it also is related to OpenWRT somehow.</p>											<p class="post-edited">(Last edited by <strong>michaeluray</strong> on 29 Jun 2016, 15:14)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330183">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Max Hopper</div>
					<div class="post-datetime">
						30 Jun 2016, 10:34					</div>
				</div>
				<div class="post-content content">
					<p>BTW, you can change the option <em>ip_url</em> in <em>/etc/config/ddns</em> (the default is <strong>checkip.dyndns.com</strong>)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330356">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						2 Jul 2016, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>Sorry, I was offline for some days.<br />Does your DDNS provider offer it&#039;s own url to detect you IP? Many of them do. If yes, you should use this one.<br />I also recognised that the use of checkip.dyndns.com inside my browser sometimes takes up to 3-5 seconds before an answer.<br />I don&#039;t know Austrian urls.<br />I&#039;m using <a href="http://myip.spdns.de">http://myip.spdns.de</a> for IPv4 and <a href="http://checkip6.spdns.de">http://checkip6.spdns.de</a> for IPv6<br />Try these instead of dyndns.com</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p330531">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						5 Jul 2016, 12:47					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>chris5560 wrote:</cite><blockquote><p>Does your DDNS provider offer it&#039;s own url to detect you IP? Many of them do. If yes, you should use this one.<br />I also recognised that the use of checkip.dyndns.com inside my browser sometimes takes up to 3-5 seconds before an answer.</p></blockquote></div><p>My DDNS provider is actually DynDNS.<br />Yes, it is the same thing in the browser. Sometimes it takes a few seconds and sometimes it does not work anyway.<br />I have almost hundred DDNS clients in the field and so it is not so easy to change the checkip URL, especially when you cannot reach them due to the update problem.</p>											<p class="post-edited">(Last edited by <strong>michaeluray</strong> on 5 Jul 2016, 13:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332036">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">michaeluray</div>
					<div class="post-datetime">
						18 Jul 2016, 13:44					</div>
				</div>
				<div class="post-content content">
					<p>Are I am the only one who has problems accessing &quot;<a href="http://checkip.dyndns.org">http://checkip.dyndns.org</a>&quot; via &quot;wget checkip.dyndns.org -O-&quot;?<br />Is there actually no one else who is effected by this problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p332203">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">chris5560</div>
					<div class="post-datetime">
						19 Jul 2016, 22:42					</div>
				</div>
				<div class="post-content content">
					<p>It looks like that DNS request to checkip.dyndns.com sometimes answer with US servers first in stead of the ones located in UK. Do you try to get an answer from dyndns.com support about their response time?<br />Here are some additional servers (not yet tested with ddns-scripts):<br /><a href="http://checkip.amazonaws.com/">http://checkip.amazonaws.com/</a>&nbsp; &nbsp;(IPv4)<br /><a href="https://wtfismyip.com/text">https://wtfismyip.com/text</a> (IPv4/IPv6 possibly need to &quot;force_ipversion&quot;)<br /><a href="https://6.ifcfg.me/ip">https://6.ifcfg.me/ip</a> (IPv6)<br /><a href="https://4.ifcfg.me/ip">https://4.ifcfg.me/ip</a> (IPv4)</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>