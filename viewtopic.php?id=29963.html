<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> USB 3G modem resetting constantly: port 1 disabled by hub (EMI?)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 16 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p135062">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">LinkZ</div>
					<div class="post-datetime">
						11 May 2011, 00:49					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m running OpenWrt trunk (kernel 2.6.37) on a ramips router (Ralink RT3052 SoC).&nbsp; I&#039;m using the DWC OTG USB driver from the Ralink SDK v3.3.0.0.&nbsp; I have numerous USB 3G modems (and USB flash drives) that all work perfectly with this router.&nbsp; However, I have one new modem, the Novatel Ovation MC547 (dual-carrier, 42 Mbps), that is unusable because it keeps disconnecting/resetting as soon as inserted:</p><div class="codebox"><pre><code>usb 1-1: new high speed USB device using dwc_otg and address 2
scsi0 : usb-storage 1-1:1.0
hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
usb 1-1: USB disconnect, address 2
usb 1-1: new high speed USB device using dwc_otg and address 3
scsi1 : usb-storage 1-1:1.0
hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
usb 1-1: USB disconnect, address 3
usb 1-1: new high speed USB device using dwc_otg and address 4
scsi2 : usb-storage 1-1:1.0
hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
usb 1-1: USB disconnect, address 4
usb 1-1: new high speed USB device using dwc_otg and address 5
scsi3 : usb-storage 1-1:1.0
hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
usb 1-1: USB disconnect, address 5
usb 1-1: new high speed USB device using dwc_otg and address 6
scsi4 : usb-storage 1-1:1.0
hub 1-0:1.0: port 1 disabled by hub (EMI?), re-enabling...
usb 1-1: USB disconnect, address 6</code></pre></div><p>This modem is supported by the Option serial driver in recent kernels.&nbsp; It works fine in my Linux PC (Fedora 13) and my Windows 7 laptop.&nbsp; It also works in my Fonera 2.0n router (another Ralink RT3052 board).</p><p>I have tried everything I can think of to solve this problem, including updating the drivers and experimenting with drivers/usb/core/quirks.c.</p><p>Interestingly enough, it doesn&#039;t reset when connected to the problem router via an external, non-powered USB hub.&nbsp; The modem switches (via usb_modeswitch) and the serial ports are exposed... but they don&#039;t work <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>I&#039;m all out of ideas here.&nbsp; I&#039;m concerned it may be a hardware problem with the router&#039;s USB host (possibly an inrush current issue)... but it works fine with all other devices I can throw at it.&nbsp; I&#039;m hoping it can be resolved by driver fixes or configuration, etc.</p><p>Any help and/or suggestions are greatly appreciated.</p><p>Regards,<br />Layne</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>