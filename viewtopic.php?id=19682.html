<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Kamikaze 8.09 OSBRiDGE 5GXi/5GLi (ADM5120)</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 17 Apr 2018 and 30 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=19682&amp;p=2.html">2</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p85196">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						6 Apr 2009, 00:25					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to install OpenWRT on this hardware using &quot;Edimax BR-6104K&quot; target profile, since &quot;openwrt-adm5120-br-6104k-squashfs-xmodem.bin&quot; is the only image i can get to boot.</p><p>I&#039;ve got some problem with the flash partitions, and with the IRQ assignment to the atheros miniPCI.<br />This is the console output:</p><div class="codebox"><pre><code>root@OpenWrt:/# reboot
root@OpenWrt:/# adm5120_wdt: disabling watchdog timer
Restarting system.

ADM5120 Boot:
jump to linux code!!



LZMA loader for BR-6104K, Copyright (C) 2007-2008 OpenWrt.org


Looking for TRX header... found at 00012000, kernel:0000001C len:000B93E4

decompressing kernel... done!

launching kernel...


Linux version 2.6.26.5 (mattia@mattia-laptop) (gcc version 4.1.2) #5 Sun Apr 5 17:35:11 CEST 2009
console [early0] enabled
CPU revision is: 0001800b (MIPS 4Kc)
SoC      : ADM5120 revision 8, running at 175MHz
Bootdev  : NOR flash
Prom     : Generic
Determined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal          0 -&gt;     4096
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0:        0 -&gt;     4096
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064
Kernel command line: console=ttyS0,115200 rootfstype=squashfs,yaffs2,jffs2 init=/etc/preinit
Primary instruction cache 8kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
PID hash table entries: 64 (order: 6, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 13856k/16384k available (1818k kernel code, 2528k reserved, 316k data, 132k init, 0k highmem)
SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Mount-cache hash table entries: 512
net_namespace: 484 bytes
NET: Registered protocol family 16
ADM5120: board is &#039;Edimax BR-6104K&#039;
registering PCI controller with io_map_base unset
PCI: pci_irq_map is not initialized
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  Â© 2001-2006 Red Hat, Inc.
yaffs Apr  4 2009 15:41:40 Installing. 
msgmni has been set to 27
io scheduler noop registered
io scheduler deadline registered (default)
Serial: AMBA driver $Revision: 1.41 $
APB:UART0: ttyS0 at MMIO 0x12600000 (irq = 9) is a AMBA
console handover: boot [early0] -&gt; real [ttyS0]
APB:UART1: ttyS1 at MMIO 0x12800000 (irq = 10) is a AMBA
ADM5120 built-in ethernet switch driver version 0.1.1
adm5120-flash.0: probing at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
adm5120-flash.0: CFI does not contain boot bank location. Assuming top.
adm5120-flash.0: Macronix chip detected, id:0x2249, boot location forced to bottom
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
adm5120-flash.0: found at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: adding static partitions
Creating 3 MTD partitions on &quot;adm5120-flash.0&quot;:
0x00000000-0x00008000 : &quot;admboot&quot;
0x00008000-0x00010000 : &quot;config&quot;
0x00010000-0x00200000 : &quot;firmware&quot;
adm5120_wdt: Watchdog Timer version 0.1
TCP vegas registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
trxsplit: searching TRX header in &#039;admboot&#039;
trxsplit: searching TRX header in &#039;config&#039;
trxsplit: searching TRX header in &#039;firmware&#039;
trxsplit: TRX header found at 0x2000
trxsplit: creating TRX partitions in &#039;firmware&#039; (31,2)
Creating 2 MTD partitions on &quot;firmware&quot;:
0x0000201c-0x000bb400 : &quot;kernel&quot;
mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-only
0x000bb400-0x001f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=1E0000, len=10000 
0x001e0000-0x001f0000 : &quot;rootfs_data&quot;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 132k freed
Please be patient, while OpenWrt loads ...
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
Press CTRL-C for failsafe
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
jffs2 not ready yet; using ramdisk
mini_fo: using base directory: /
mini_fo: using storage directory: /tmp/root
- init -

Please press Enter to activate this console.
br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering disabled state
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
ip_tables: (C) 2000-2006 Netfilter Core Team
nf_conntrack version 0.5.0 (1024 buckets, 4096 max)
wlan: trunk
ath_hal: module license &#039;Proprietary&#039; taints kernel.
ath_hal: 2008-10-02 (AR5210, AR5211, AR5212, AR5416, RF5111, RF5112, RF2413, RF5413, RF2133, RF2425, REGOPS_FUNC, DFS, XR)
ath_rate_minstrel: Minstrel automatic rate control algorithm 1.2 (trunk)
ath_rate_minstrel: look around rate set to 10%
ath_rate_minstrel: EWMA rolloff level set to 75%
ath_rate_minstrel: max segment size in the mrr set to 6000 us
wlan: mac acl policy registered
ath_pci: trunk
PCI: Enabling device 0000:00:02.0 (0000 -&gt; 0002)
wifi%d: request_irq failed
jffs2: Too few erase blocks (1)
adm5120_wdt: enabling watchdog timer


BusyBox v1.11.2 (2009-04-05 16:36:28 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09, r15100) ----------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/#</code></pre></div><div class="codebox"><pre><code>root@OpenWrt:/# cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00008000 00004000 &quot;admboot&quot;
mtd1: 00008000 00008000 &quot;config&quot;
mtd2: 001f0000 00010000 &quot;firmware&quot;
mtd3: 000b93e4 00010000 &quot;kernel&quot;
mtd4: 00134c00 00010000 &quot;rootfs&quot;
mtd5: 00030000 00010000 &quot;rootfs_data&quot;
root@OpenWrt:/#</code></pre></div><p>This is the first time i try to install OpenWrt on unsupported hardware, but i have hundreads of these units and the original firmware sucks, so i have to make it work.<br />Honestly, i don&#039;t know where to begin... but i think i can do it with a little help... hint and references are welcome! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p><p>If this thing will work, i promise to write a detailed wiki page!!!</p><p>Mattia</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86144">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						19 Apr 2009, 17:28					</div>
				</div>
				<div class="post-content content">
					<p>I succesfully built a firmware image that runs and is small enough to leave space for a jffs2 partition.<br />I used the easy5120RT profile, and flashed openwrt-adm5120-easy-5120-rt-squashfs.img via xmodem.</p><p>I had to upload the bootloader provided here:<br /><a href="http://forum.funkfeuer.at/viewtopic.php?pid=1006#p1006">http://forum.funkfeuer.at/viewtopic.php?pid=1006#p1006</a><br />And then i used it to boot unsigned firmwares, in my case i uploaded this image to ram:<br /><a href="http://midge.vlad.org.ua/wiki/bootloader-with-tftp">http://midge.vlad.org.ua/wiki/bootloader-with-tftp</a><br />And I used it to flash the bootloader with tftp support provided in that midge image.</p><p>This solved the problem with flash partitions and PCI IRQ assignment.</p><br /><p>Now, the only problem left is that when the system boots up and initialize the miniPCI wifi (Atheros 5414) those 3 processes make the system unresponsive:</p><p>root@OpenWrt:/# ps aux<br />PID USER&nbsp; &nbsp; &nbsp; &nbsp;VSZ STAT COMMAND<br />&nbsp; &nbsp; 1 root&nbsp; &nbsp; &nbsp; 1968 S&nbsp; &nbsp; init<br />&nbsp; &nbsp; 2 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kthreadd]<br />&nbsp; &nbsp; 3 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [ksoftirqd/0]<br />&nbsp; &nbsp; 4 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [events/0]<br />&nbsp; &nbsp; 5 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [khelper]<br />&nbsp; &nbsp;32 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kblockd/0]<br />&nbsp; &nbsp;35 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kseriod]<br />&nbsp; &nbsp;55 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[pdflush]<br />&nbsp; &nbsp;56 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&nbsp; &nbsp;[pdflush]<br />&nbsp; &nbsp;57 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [kswapd0]<br />&nbsp; &nbsp;58 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [aio/0]<br />&nbsp; 585 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SW&lt;&nbsp; [mtdblockd]<br /> 1811 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0 SWN&nbsp; [jffs2_gcd_mtd5]<br /> 1821 root&nbsp; &nbsp; &nbsp; 1968 S&nbsp; &nbsp; /bin/sh /etc/init.d/rcS S boot<br /> 1823 root&nbsp; &nbsp; &nbsp; 1968 S&nbsp; &nbsp; logger -s -p 6 -t<br /> 1824 root&nbsp; &nbsp; &nbsp; 1972 S&nbsp; &nbsp; /bin/ash --login<br /> 1832 root&nbsp; &nbsp; &nbsp; 1980 S&nbsp; &nbsp; syslogd -C16<br /> 1834 root&nbsp; &nbsp; &nbsp; 1960 S&nbsp; &nbsp; klogd<br /> 1846 root&nbsp; &nbsp; &nbsp; 1136 S&nbsp; &nbsp; /sbin/hotplug2 --override --persistent --max-children<br /> 2011 root&nbsp; &nbsp; &nbsp; 2028 S&nbsp; &nbsp; /bin/sh /etc/rc.common /etc/rc.d/S40network boot<br /><strong> 2014 root&nbsp; &nbsp; &nbsp; 2024 S&nbsp; &nbsp; /bin/sh /sbin/wifi up<br /> 2018 root&nbsp; &nbsp; &nbsp; 2024 S&nbsp; &nbsp; /bin/sh /sbin/wifi up<br /> 2019 root&nbsp; &nbsp; &nbsp; 2048 R&nbsp; &nbsp; /bin/sh /sbin/wifi up</strong><br /> 2027 root&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0&nbsp; &nbsp;[]<br /> 2028 root&nbsp; &nbsp; &nbsp; 1968 R&nbsp; &nbsp; ps aux</p><br /><p>I have to kill them to free the cpu.<br />While the console hangs, the ethernet port keep replying to ping requests.</p><p>This is the bootup log:<br /></p><div class="codebox"><pre><code>ADM5120 Boot:


Evolution version.Only for testing
CPU: ADM5120-175MHz
SDRAM: 2x16MB
Flash: NOR-2MB
Boot System: ADM5120-Linux
Loader Version: 1.00.05
Creation Date: 2004.12.20

Press &lt;space&gt; key tree times to enter boot menu..
0
Booting Linux...
Kernel decompress ... PASS

LZMA loader for EASY 5120-RT, Copyright (C) 2007-2008 OpenWrt.org

Looking for TRX header... found at 00020000, kernel:0000001C len:000B93E4
decompressing kernel... done!
launching kernel...

Linux version 2.6.26.5 (mattia@mattia-laptop) (gcc version 4.1.2) #20 Sat Apr 18
 19:02:06 CEST 2009
console [early0] enabled
CPU revision is: 0001800b (MIPS 4Kc)
SoC      : ADM5120 revision 8, running at 175MHz
Bootdev  : NOR flash
Prom     : Generic
Determined physical RAM map:
 memory: 00800000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal          0 -&gt;     2048
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0:        0 -&gt;     2048
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 2032
Kernel command line: console=ttyS0,115200 rootfstype=squashfs,yaffs2,jffs2 init=
/etc/preinit
Primary instruction cache 8kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
PID hash table entries: 32 (order: 5, 128 bytes)
Dentry cache hash table entries: 1024 (order: 0, 4096 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 5732k/8192k available (1816k kernel code, 2460k reserved, 317k data, 132
k init, 0k highmem)
SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Mount-cache hash table entries: 512
net_namespace: 484 bytes
NET: Registered protocol family 16
ADM5120: board is &#039;Infineon EASY 5120-RT Reference Board&#039;
registering PCI controller with io_map_base unset
PCI: mapping irq for 0000:00:02.0 pin:1, irq:14
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ÃÂ© 2001-2006 Red Hat, Inc.
yaffs Apr  4 2009 15:41:40 Installing.
msgmni has been set to 16
io scheduler noop registered
io scheduler deadline registered (default)
Serial: AMBA driver $Revision: 1.41 $
APB:UART0: ttyS0 at MMIO 0x12600000 (irq = 9) is a AMBA
console handover: boot [early0] -&gt; real [ttyS0]
APB:UART1: ttyS1 at MMIO 0x12800000 (irq = 10) is a AMBA
ADM5120 built-in ethernet switch driver version 0.1.1
adm5120-flash.0: probing at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
adm5120-flash.0: CFI does not contain boot bank location. Assuming top.
adm5120-flash.0: Macronix chip detected, id:0x2249, boot location forced to bott
om
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
adm5120-flash.0: found at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: adding static partitions
Creating 3 MTD partitions on &quot;adm5120-flash.0&quot;:
0x00000000-0x00010000 : &quot;admboot&quot;
0x00010000-0x00020000 : &quot;boardcfg&quot;
0x00020000-0x00200000 : &quot;firmware&quot;
adm5120_wdt: Watchdog Timer version 0.1
TCP vegas registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
trxsplit: searching TRX header in &#039;admboot&#039;
trxsplit: searching TRX header in &#039;boardcfg&#039;
trxsplit: searching TRX header in &#039;firmware&#039;
trxsplit: TRX header found at 0x0
trxsplit: creating TRX partitions in &#039;firmware&#039; (31,2)
Creating 2 MTD partitions on &quot;firmware&quot;:
0x0000001c-0x000b9400 : &quot;kernel&quot;
mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-o
nly
0x000b9400-0x001e0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-o
nly
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=160000, len=80000
0x00160000-0x001e0000 : &quot;rootfs_data&quot;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 132k freed
Please be patient, while OpenWrt loads ...
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
Press CTRL-C for failsafe
gpio-buttons driver version 0.1.1
Button Hotplug driver version 0.3.1
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

Please press Enter to activate this console.


BusyBox v1.11.2 (2009-04-18 15:04:59 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09, r15100) ----------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/# br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering disabled state
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
PCI: Enabling device 0000:00:02.0 (0000 -&gt; 0002)
ath5k_pci 0000:00:02.0: registered as &#039;phy0&#039;
ath5k phy0: Atheros AR5414 chip found (MAC: 0xa5, PHY: 0x61)</code></pre></div><p>Here the system get SLOW until &quot;/sbin/wifi up&quot; ends or get killed...</p><br /><p>Network interfaces and configuration:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 22:DA:E2:A8:86:2A
          inet addr:192.168.1.200  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:434 errors:0 dropped:0 overruns:0 frame:0
          TX packets:333 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:52866 (51.6 KiB)  TX bytes:24386 (23.8 KiB)

eth0      Link encap:Ethernet  HWaddr 22:DA:E2:A8:86:2A
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:899 errors:0 dropped:0 overruns:0 frame:0
          TX packets:334 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:94038 (91.8 KiB)  TX bytes:25429 (24.8 KiB)
          Interrupt:17

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/# iwconfig
lo        no wireless extensions.

eth0      no wireless extensions.

eth1      no wireless extensions.

eth2      no wireless extensions.

eth3      no wireless extensions.

eth4      no wireless extensions.

eth5      no wireless extensions.

br-lan    no wireless extensions.

wmaster0  no wireless extensions.

wlan0     IEEE 802.11abg  ESSID:&quot;&quot;
          Mode:Managed  Frequency:2.412 GHz  Access Point: Not-Associated
          Tx-Power=0 dBm
          Retry min limit:7   RTS thr:off   Fragment thr=2352 B
          Encryption key:off
          Power Management:off
          Link Quality:0  Signal level:0  Noise level:0
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

root@OpenWrt:/#</code></pre></div><p>Uci configuration:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# uci show
fstab.@mount[0]=mount
fstab.@mount[0].target=/home
fstab.@mount[0].device=/dev/sda1
fstab.@mount[0].fstype=ext3
fstab.@mount[0].options=rw,sync
fstab.@mount[0].enabled=0
fstab.@swap[0]=swap
fstab.@swap[0].device=/dev/sda2
fstab.@swap[0].enabled=0
httpd.@httpd[0]=httpd
httpd.@httpd[0].port=80
httpd.@httpd[0].home=/www
network.loopback=interface
network.loopback.ifname=lo
network.loopback.proto=static
network.loopback.ipaddr=127.0.0.1
network.loopback.netmask=255.0.0.0
network.lan=interface
network.lan.ifname=eth0
network.lan.type=bridge
network.lan.proto=static
network.lan.netmask=255.255.255.0
network.lan.dns=
network.lan.gateway=
network.lan.ipaddr=192.168.1.200
system.@system[0]=system
system.@system[0].hostname=OpenWrt
system.@system[0].timezone=UTC
wireless.wlan0=wifi-device
wireless.wlan0.type=mac80211
wireless.wlan0.channel=5
wireless.wlan0.disabled=1
wireless.@wifi-iface[0]=wifi-iface
wireless.@wifi-iface[0].device=wlan0
wireless.@wifi-iface[0].network=lan
wireless.@wifi-iface[0].mode=ap
wireless.@wifi-iface[0].ssid=OpenWrt
wireless.@wifi-iface[0].encryption=none
root@OpenWrt:/#</code></pre></div><p>Also tried with:<br />root@OpenWrt:/# uci set wireless.wlan0.disabled=0<br />root@OpenWrt:/# uci commit<br />root@OpenWrt:/# reboot</p><p>Result: 100% hang, have to kill &quot;/sbin/wifi up&quot; manually...</p><br /><p>Any idea? I keep trying...<br />Mattia</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86492">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						23 Apr 2009, 23:04					</div>
				</div>
				<div class="post-content content">
					<p>GPL Code can be found here:<br /><a href="http://www.osbridge.com/?q=en/node/91">http://www.osbridge.com/?q=en/node/91</a></p><p>It is based on linux-2.6.22.4 kernel... diff shows some changes in arch/mips/<br />There&#039;s someone else interested in a port on this hardware?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87134">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						2 May 2009, 11:43					</div>
				</div>
				<div class="post-content content">
					<p>I made a custom profile based on edimax BR6104K, adding the adm5120 PCI init code and modified vlans for the only ethernet port of this router/CPE.</p><p>Atheros AR5414 get initialized and works great, ethernet works, jffs2 partition works.</p><p>Now i&#039;ve got some problem with <strong>brctl</strong> command. At startup br-lan isn&#039;t created, however bridge package is installed.<br />This is the error:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# brctl show
brctl: SIOCGIFBR: Package not installed</code></pre></div><p>What i&#039;m missing???<br />Thanks for any help! <img src="https://forum.openwrt.org/img/smilies/big_smile.png" width="15" height="15" alt="big_smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p87142">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						2 May 2009, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Problem solved, compiling Kamikaze 8.09 rev15555 fixed the bridge problem.<br />Using trunk rev15554 breaks brctl. A regression, maybe???</p><p>The profile is based on BR6104K with a couple of rows added.<br />The resulting image is 1600KB, and can grow up to 1780KB if extra packages are needed.</p><p>boot log:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# reboot
root@OpenWrt:/# adm5120_wdt: disabling watchdog timer

ADM5120 Boot:
jump to linux code!!


LZMA loader for BR-6104K, Copyright (C) 2007-2008 OpenWrt.org

Looking for TRX header... found at 00012000, kernel:0000001C len:000B93E4
decompressing kernel... done!
launching kernel...

Linux version 2.6.26.5 (mattia@jiraiya) (gcc version 4.1.2) #1 Sat May 2 14:11:1
9 CEST 2009
console [early0] enabled
CPU revision is: 0001800b (MIPS 4Kc)
SoC      : ADM5120 revision 8, running at 175MHz
Bootdev  : NOR flash
Prom     : Generic
Determined physical RAM map:
 memory: 01000000 @ 00000000 (usable)
Initrd not found or empty - disabling initrd
Zone PFN ranges:
  Normal          0 -&gt;     4096
Movable zone start PFN for each node
early_node_map[1] active PFN ranges
    0:        0 -&gt;     4096
Built 1 zonelists in Zone order, mobility grouping off.  Total pages: 4064
Kernel command line: console=ttyS0,115200 rootfstype=squashfs,yaffs2,jffs2 init=
/etc/preinit
Primary instruction cache 8kB, VIPT, 2-way, linesize 16 bytes.
Primary data cache 8kB, 2-way, VIPT, no aliases, linesize 16 bytes
PID hash table entries: 64 (order: 6, 256 bytes)
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Memory: 13856k/16384k available (1817k kernel code, 2528k reserved, 317k data, 1
32k init, 0k highmem)
SLUB: Genslabs=6, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
Mount-cache hash table entries: 512
net_namespace: 484 bytes
NET: Registered protocol family 16
ADM5120: board is &#039;OSBRiDGE 5GXi/5GLi&#039;
registering PCI controller with io_map_base unset
PCI: mapping irq for 0000:00:02.0 pin:1, irq:14
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 512 (order: 0, 4096 bytes)
TCP bind hash table entries: 512 (order: -1, 2048 bytes)
TCP: Hash tables configured (established 512 bind 512)
TCP reno registered
NET: Registered protocol family 1
squashfs: version 3.0 (2006/03/15) Phillip Lougher
Registering mini_fo version $Id$
JFFS2 version 2.2. (NAND) (SUMMARY)  ÃÂ© 2001-2006 Red Hat, Inc.
yaffs May  2 2009 14:08:03 Installing.
msgmni has been set to 27
io scheduler noop registered
io scheduler deadline registered (default)
Serial: AMBA driver $Revision: 1.41 $
APB:UART0: ttyS0 at MMIO 0x12600000 (irq = 9) is a AMBA
console handover: boot [early0] -&gt; real [ttyS0]
APB:UART1: ttyS1 at MMIO 0x12800000 (irq = 10) is a AMBA
ADM5120 built-in ethernet switch driver version 0.1.1
adm5120-flash.0: probing at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: Found 1 x16 devices at 0x0 in 16-bit bank
 Amd/Fujitsu Extended Query Table at 0x0040
adm5120-flash.0: CFI does not contain boot bank location. Assuming top.
adm5120-flash.0: Macronix chip detected, id:0x2249, boot location forced to bott
om
number of CFI chips: 1
cfi_cmdset_0002: Disabling erase-suspend-program due to code brokenness.
adm5120-flash.0: found at 0x1FC00000, size:2048KiB, width:16 bits
adm5120-flash.0: adding static partitions
Creating 3 MTD partitions on &quot;adm5120-flash.0&quot;:
0x00000000-0x00008000 : &quot;admboot&quot;
0x00008000-0x00010000 : &quot;config&quot;
0x00010000-0x00200000 : &quot;firmware&quot;
adm5120_wdt: Watchdog Timer version 0.1
TCP vegas registered
NET: Registered protocol family 17
802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;
All bugs added by David S. Miller &lt;davem@redhat.com&gt;
trxsplit: searching TRX header in &#039;admboot&#039;
trxsplit: searching TRX header in &#039;config&#039;
trxsplit: searching TRX header in &#039;firmware&#039;
trxsplit: TRX header found at 0x2000
trxsplit: creating TRX partitions in &#039;firmware&#039; (31,2)
Creating 2 MTD partitions on &quot;firmware&quot;:
0x0000201c-0x000bb400 : &quot;kernel&quot;
mtd: partition &quot;kernel&quot; doesn&#039;t start on an erase block boundary -- force read-o
nly
0x000bb400-0x001f0000 : &quot;rootfs&quot;
mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-o
nly
mtd: partition &quot;rootfs&quot; set to be root filesystem
mtd: partition &quot;rootfs_data&quot; created automatically, ofs=180000, len=70000
0x00180000-0x001f0000 : &quot;rootfs_data&quot;
VFS: Mounted root (squashfs filesystem) readonly.
Freeing unused kernel memory: 132k freed
Please be patient, while OpenWrt loads ...
Algorithmics/MIPS FPU Emulator v1.5
- preinit -
Press CTRL-C for failsafe
gpio-buttons driver version 0.1.1
input: gpio-buttons as /devices/platform/gpio-buttons/input/input0
Button Hotplug driver version 0.3.1
switching to jffs2
mini_fo: using base directory: /
mini_fo: using storage directory: /jffs
- init -

Please press Enter to activate this console. 
br-lan: Dropping NETIF_F_UFO since no NETIF_F_HW_CSUM feature.
device eth0 entered promiscuous mode
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
br-lan: port 1(eth0) entering disabled state
br-lan: port 1(eth0) entering learning state
br-lan: topology change detected, propagating
br-lan: port 1(eth0) entering forwarding state
PCI: Enabling device 0000:00:02.0 (0000 -&gt; 0002)
ath5k_pci 0000:00:02.0: registered as &#039;phy0&#039;
ath5k phy0: Atheros AR5414 chip found (MAC: 0xa5, PHY: 0x61)
device wlan0 entered promiscuous mode
adm5120_wdt: enabling watchdog timer



BusyBox v1.11.2 (2009-05-02 13:59:19 CEST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 KAMIKAZE (8.09, r15555) ----------------------------
  * 10 oz Vodka       Shake well with ice and strain
  * 10 oz Triple sec  mixture into 10 shot glasses.
  * 10 oz lime juice  Salute!
 ---------------------------------------------------
root@OpenWrt:/#</code></pre></div><p>ifconfig output:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# ifconfig
br-lan    Link encap:Ethernet  HWaddr 00:80:48:4A:DB:0D
          inet addr:192.168.1.200  Bcast:192.168.1.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:69 errors:0 dropped:0 overruns:0 frame:0
          TX packets:49 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:8920 (8.7 KiB)  TX bytes:3562 (3.4 KiB)

eth0      Link encap:Ethernet  HWaddr 22:DA:E2:A8:86:2A
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:69 errors:0 dropped:0 overruns:0 frame:0
          TX packets:50 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:9886 (9.6 KiB)  TX bytes:4605 (4.4 KiB)
          Interrupt:17

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wlan0     Link encap:Ethernet  HWaddr 00:80:48:4A:DB:0D
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

wmaster0  Link encap:UNSPEC  HWaddr 00-80-48-4A-DB-0D-01-00-00-00-00-00-00-00-00
-00
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

root@OpenWrt:/#</code></pre></div><p>cat /proc/cpuinfo output:<br /></p><div class="codebox"><pre><code>root@OpenWrt:/# cat proc/cpuinfo
system type             : OSBRiDGE 5GXi/5XLi
processor               : 0
cpu model               : MIPS 4Kc V0.11
BogoMIPS                : 173.56
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes
ASEs implemented        :
shadow register sets    : 1
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available

root@OpenWrt:/#</code></pre></div><p>If anyone is interested, contact me!</p>											<p class="post-edited">(Last edited by <strong>AraKs</strong> on 9 May 2009, 13:04)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89111">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						2 Jun 2009, 12:47					</div>
				</div>
				<div class="post-content content">
					<p>Step-by-step howto can be found here:<br /><a href="http://linnotes.wordpress.com/2009/05/07/osbridge-5gxi5xli-openwrt-howto/">http://linnotes.wordpress.com/2009/05/0 â¦ wrt-howto/</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89820">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						13 Jun 2009, 14:50					</div>
				</div>
				<div class="post-content content">
					<p>hey AraKs<br />your work is Great im very impressed.. I just need some advise about how to enable the wireless .. can u tell me a little step by step on how to Modify the Scripts or wat commands will enable the wifi again</p><p>thanks in advance </p><p>Lanmasterd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89822">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						13 Jun 2009, 16:20					</div>
				</div>
				<div class="post-content content">
					<p>You need to patch the Edimax BR-6104K profile, I&#039;ll prepare the file tomorrow because I&#039;ve been very busy lately (university exams session...).<br />In the meantime you could try one of the pre-built images I posted on the blog linked above.</p><p>Bye!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89824">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						13 Jun 2009, 16:30					</div>
				</div>
				<div class="post-content content">
					<p>cool nice one on the quick reply.&nbsp; yeah i have been the same lately in regards exams .. ill try patch the edimax profile and mess about with it.&nbsp; at the moment i have your&nbsp; Image #3 KAMIKAZE (8.09.1, r16385)&nbsp; loaded..&nbsp; .. as u can tell im very new to modding openwrt stuff. so im learning as i go.&nbsp; but i deffinatly wanna help you with this project as i can see a real use for these 5xli dishes.&nbsp; ill post up some details of how im doing trough the day ..<br />looking forward to working with ya to work on this.</p>											<p class="post-edited">(Last edited by <strong>LanMasterD</strong> on 13 Jun 2009, 16:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89825">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						13 Jun 2009, 16:42					</div>
				</div>
				<div class="post-content content">
					<p>Tomorrow I&#039;ll post the patch I made for the BR-6104K profile, so you&#039;ll be able to build your own openwrt images.</p><p>The only problem now, is that ath5k is not very stable yet: rate selection algorithm is not working well and AP mode doesn&#039;t work. The old madwifi driver is too big and the resulting image doesn&#039;t fit in the flash.<br />We have to wait madwifi developers for a newer and more functional release of ath5k. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>AraKs</strong> on 13 Jun 2009, 16:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89827">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						13 Jun 2009, 17:10					</div>
				</div>
				<div class="post-content content">
					<p>just one quick question befor i go out shopping.. the images you have on the how to page. as they are at the moment can the device act as a Accesspoint Client. like if i wanna use the dish to connect to an access point a few hundred meters away..&nbsp; </p><p>also in the future do u think we can squeese in a www web interface to do all the device configs?? </p><p>so we only have the 2 mb to work with yeah..&nbsp; wat about the 16mb sdram is that not usable??</p><p>ill be back later ill check up on any replies</p><p>catch ya soon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89836">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						13 Jun 2009, 21:04					</div>
				</div>
				<div class="post-content content">
					<p>Yes, it can work only as client, but if you get low data rates on the wireless link try to manually set 11Mbps: this is the workaround suggested by ath5k developers.</p><p>For the web interface, i&#039;ve already tried, i&#039;ve already removed all the unnecessary packages... but i couldn&#039;t add a webif, neither the smallest and simplest one!</p><p>We could make a script that on every boot loads the web interface in the RAM... but when you reboot, you loose the web interface, so the next boot you need to reload the webif. The problem is that you need to have some kind of network storage or fileserver were the osbridge can download the webif packages on boot. That&#039;s not very convenient!</p><p>C ya!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89838">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						13 Jun 2009, 21:54					</div>
				</div>
				<div class="post-content content">
					<p>ah i see..&nbsp; hummm guess that does pose a problem.. i did read on the boards chips home page that the main chip can support usb.. maybe i might look into that too.. but for the moment learning how to hook it up as a client will do me great.. looking forward to learning a bit from ya</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89839">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						13 Jun 2009, 22:31					</div>
				</div>
				<div class="post-content content">
					<p>SoC ADM5120 support 2 USB 1.1 ports. I gave a quick look once but i didn&#039;t notice the circuits and components needed by USB on OSBRiDGE antennas!<br />In some boards you just have to solder some components (quartz oscillator, usb connector, 5v converter etc...) because the circuit and pinholes are already present. But in our case there&#039;s no hope!!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89850">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						14 Jun 2009, 02:12					</div>
				</div>
				<div class="post-content content">
					<p>yeah thought as much. its a pitty companys dont build there boards to the full potential of the chips they use.. or at least leave pins for them .lol.. considering this one is supported as Openwrt as well as there propper firmware..&nbsp; &nbsp;ok so i tried using the commands uci show and uci set to change some settings in the wireless config and in the wifi-iface[0] to try connect to my test router using wpa.. but its not connecting.. again im using the 3rd image u have.. but still i dont know how to config the way u do using VI editor..&nbsp; i have the image but i dont know how to decompile it to change the settings and then recompile again..</p><p>talk soon..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89851">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						14 Jun 2009, 03:38					</div>
				</div>
				<div class="post-content content">
					<p>hey i just did a quick UCI Show for ya ..<br />and i changed the ssid and key to stars just cos im posting..&nbsp; </p><p>tell me wat u think .. i figured out the internal VI editor .. finally lol..</p><p>code below -----------------------------------------------------------------<br />BusyBox v1.11.2 (2009-06-05 12:56:36 CEST) built-in shell (ash)<br />Enter &#039;help&#039; for a list of built-in commands.</p><p>&nbsp; _______&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________&nbsp; &nbsp; &nbsp; &nbsp; __<br /> |&nbsp; &nbsp; &nbsp; &nbsp;|.-----.-----.-----.|&nbsp; |&nbsp; |&nbsp; |.----.|&nbsp; |_<br /> |&nbsp; &nbsp;-&nbsp; &nbsp;||&nbsp; _&nbsp; |&nbsp; -__|&nbsp; &nbsp; &nbsp;||&nbsp; |&nbsp; |&nbsp; ||&nbsp; &nbsp;_||&nbsp; &nbsp;_|<br /> |_______||&nbsp; &nbsp;__|_____|__|__||________||__|&nbsp; |____|<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |__| W I R E L E S S&nbsp; &nbsp;F R E E D O M<br /> KAMIKAZE (8.09.1, r16385) ----------------------------<br />&nbsp; * 10 oz Vodka&nbsp; &nbsp; &nbsp; &nbsp;Shake well with ice and strain<br />&nbsp; * 10 oz Triple sec&nbsp; mixture into 10 shot glasses.<br />&nbsp; * 10 oz lime juice&nbsp; Salute!<br /> ---------------------------------------------------<br />root@OpenWrt:/# uci show<br />firewall.@defaults[0]=defaults<br />firewall.@defaults[0].syn_flood=1<br />firewall.@defaults[0].input=ACCEPT<br />firewall.@defaults[0].output=ACCEPT<br />firewall.@defaults[0].forward=REJECT<br />firewall.@zone[0]=zone<br />firewall.@zone[0].name=lan<br />firewall.@zone[0].input=ACCEPT<br />firewall.@zone[0].output=ACCEPT<br />firewall.@zone[0].forward=REJECT<br />firewall.@zone[1]=zone<br />firewall.@zone[1].name=wan<br />firewall.@zone[1].input=REJECT<br />firewall.@zone[1].output=ACCEPT<br />firewall.@zone[1].forward=REJECT<br />firewall.@zone[1].masq=1<br />firewall.@forwarding[0]=forwarding<br />firewall.@forwarding[0].src=lan<br />firewall.@forwarding[0].dest=wan<br />firewall.@forwarding[0].mtu_fix=1<br />firewall.@include[0]=include<br />firewall.@include[0].path=/etc/firewall.user<br />fstab.@mount[0]=mount<br />fstab.@mount[0].target=/home<br />fstab.@mount[0].device=/dev/sda1<br />fstab.@mount[0].fstype=ext3<br />fstab.@mount[0].options=rw,sync<br />fstab.@mount[0].enabled=0<br />fstab.@swap[0]=swap<br />fstab.@swap[0].device=/dev/sda2<br />fstab.@swap[0].enabled=0<br />httpd.@httpd[0]=httpd<br />httpd.@httpd[0].port=80<br />httpd.@httpd[0].home=/www<br />network.loopback=interface<br />network.loopback.ifname=lo<br />network.loopback.proto=static<br />network.loopback.ipaddr=127.0.0.1<br />network.loopback.netmask=255.0.0.0<br />network.lan=interface<br />network.lan.ifname=eth0<br />network.lan.ipaddr=192.168.2.200<br />network.lan.proto=static<br />network.lan.netmask=255.255.255.0<br />network.lan.dns=<br />network.lan.gateway=<br />network.wan=interface<br />network.wan.ifname=wlan0<br />network.wan.proto=static<br />network.wan.netmask=255.255.255.0<br />network.wan.dns=192.168.1.254<br />network.wan.gateway=192.168.1.254<br />network.wan.ipaddr=192.168.1.200<br />system.@system[0]=system<br />system.@system[0].hostname=OpenWrt<br />system.@system[0].timezone=UTC<br />wireless.wlan0=wifi-device<br />wireless.wlan0.type=mac80211<br />wireless.wlan0.channel=11<br />wireless.wlan0.disabled=0<br />wireless.wlan0.txpower=23dBm<br />wireless.@wifi-iface[0]=wifi-iface<br />wireless.@wifi-iface[0].device=wlan0<br />wireless.@wifi-iface[0].ssid=*********************<br />wireless.@wifi-iface[0].encryption=psk(WPA-PSK)<br />wireless.@wifi-iface[0].key=*********************<br />wireless.@wifi-iface[0].network=wan<br />root@OpenWrt:/#</p><p>code end----------------------------------------------------------</p><p>lanmasterd</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89870">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						14 Jun 2009, 20:07					</div>
				</div>
				<div class="post-content content">
					<p>Your configuration looks good, you should be able to access internet from eth0, behind the natted wlan0. Remeber: there&#039;s no dhcp, you&#039;ll need to manually set the ips of the devices connected to the eth0!</p><p>Let me know if you are able to connect the wlan0 to the ap, and if the traffic is routed trought the nat!</p><p>Mattia</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89872">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						14 Jun 2009, 20:18					</div>
				</div>
				<div class="post-content content">
					<p>hey bud . Nah no joy on the connection.. i even tried a setup with only wep.. no joy there either.&nbsp; if i type iwconfig wlan0 it says not associated.</p><p>was thinking why bother using a fire wall in the osbridge&nbsp; if its a client to a access point router&nbsp; which has a firewall anyway.. maybe we can save space and get other things installed and working.. wat u&nbsp; think.. </p><p>how do i decompile the image you made so we can try strip more off it..?</p><p>also is there any way we can use a compression that would unpack the firmware to expand into the sdram maybe??</p><p>let me know wat u think</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89873">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						14 Jun 2009, 21:04					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>LanMasterD wrote:</cite><blockquote><p>hey bud . Nah no joy on the connection.. i even tried a setup with only wep.. no joy there either.&nbsp; if i type iwconfig wlan0 it says not associated.</p></blockquote></div><p>I reviewed your configuration, and there&#039;s an error. You have to set your wlan0 in station mode, to work as a client.<br />Type in console:<br />uci set wireless.wlan0.mode=sta<br />uci commit wireless<br />/etc/init.d/network restart</p><p>Now you should be able to connect to the AP.</p><div class="quotebox"><blockquote><p>was thinking why bother using a fire wall in the osbridge&nbsp; if its a client to a access point router&nbsp; which has a firewall anyway.. maybe we can save space and get other things installed and working.. wat u&nbsp; think..</p></blockquote></div><p>Since kamikaze doesn&#039;t support ethernet-wifi bridging, the only way to let packets flow trough the device is natting the two interfaces, that&#039;s why we need iptables and firewall packages.</p><div class="quotebox"><blockquote><p>how do i decompile the image you made so we can try strip more off it..?</p></blockquote></div><p>You can&#039;t decompile the image, you need to set up a build root on your linux pc and use subversion to get the source of openwrt, than patch with my files (that i haven&#039;t released yet), configure the build environment and make the firmware image.<br />See <a href="https://dev.openwrt.org/wiki/GetSource">https://dev.openwrt.org/wiki/GetSource</a><br />Here you have a list of packages you need to install on Ubuntu to compile:<br /><a href="http://people.csail.mit.edu/nikolaus/drg/index.php/blog/54-installing-openwrt-build-root-on-ubuntu">http://people.csail.mit.edu/nikolaus/dr â¦ -on-ubuntu</a></p><div class="quotebox"><blockquote><p>also is there any way we can use a compression that would unpack the firmware to expand into the sdram maybe??</p></blockquote></div><p>The file system is already compressed (squashfs): it let us save around 30% on the original firmware size and it&#039;s read only. That&#039;s why we need to save other 250Kb~ (5 write blocks) to build a writeable partition (using jffs2) to store the edited files.</p><div class="quotebox"><blockquote><p>let me know wat u think</p></blockquote></div><p>Today I received an email from Gabor, the mantainer of ADM5120 target. He&#039;s interested in supporting this device officially, so our next goal will be dumping the original bootloader. He will try to find a way to make images that can boot from the original bootloader.<br />I&#039;ll post here any update.</p><p>C ya<br /><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>AraKs</strong> on 14 Jun 2009, 21:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89891">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						15 Jun 2009, 13:04					</div>
				</div>
				<div class="post-content content">
					<p>hey Araks</p><p>I took your advise and set wireless to STA mode..&nbsp; silly me i had put it in then didnt save the file the first time .. now its corrected its seems to be working..&nbsp; nice spot on my config .. nice one.. </p><p>ah so kamikaze does support bridging ah i see.. well that puts a downer on&nbsp; it.. but ill strugle through..&nbsp; </p><p>the tips on decompiling are very helpful.. ill be setting up a ubuntu drive there in a virtual machine tonight and im gonna start working on the&nbsp; firmware the way your doing it.. i was working in windows.. lol lame i know.. i used to use only ubuntu but went back to windows in college..</p><p>ah so the system is already compressed.. ok..&nbsp; hummm im trying to think of ways we can&nbsp; get more space ..&nbsp; <br />I was also looking at DD-wrt i use it on my Netgear wg602.. it has a package that 2 mb that works on my device.. and it has a web interface and client bridge support.. maybe we can find a way to port it over.. </p><p>thats great news about the device support from garbor so if were on the origional boot loader wat will that mean for us exactly?</p><p>dave</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89893">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						15 Jun 2009, 13:19					</div>
				</div>
				<div class="post-content content">
					<p>Hi LM<br /></p><div class="quotebox"><cite>LanMasterD wrote:</cite><blockquote><p>the tips on decompiling are very helpful.. ill be setting up a ubuntu drive there in a virtual machine tonight and im gonna start working on the&nbsp; firmware the way your doing it.. i was working in windows.. lol lame i know.. i used to use only ubuntu but went back to windows in college..</p></blockquote></div><p>If you can, i suggest you to repartition your drive and make a 10GB partition to install Ubuntu directly on real hardware. OpenWrt compilation is a very CPU-intensive task. Running it over a virtual machine may slow down the process too much. (it takes almost an hour on real hardware)</p><div class="quotebox"><cite>LanMasterD wrote:</cite><blockquote><p>ah so the system is already compressed.. ok..&nbsp; hummm im trying to think of ways we can&nbsp; get more space ..&nbsp; <br />I was also looking at DD-wrt i use it on my Netgear wg602.. it has a package that 2 mb that works on my device.. and it has a web interface and client bridge support.. maybe we can find a way to port it over..</p></blockquote></div><p>I&#039;ve seen it too, but it need a license.<br /></p><div class="quotebox"><cite>www.dd-wrt.com wrote:</cite><blockquote><p>This router requires a Professional Activation. You can purchase activations and superchannel licenses in the DD-WRT Shop.</p></blockquote></div><div class="quotebox"><cite>LanMasterD wrote:</cite><blockquote><p>thats great news about the device support from garbor so if were on the origional boot loader wat will that mean for us exactly?</p></blockquote></div><p>Having a firmware image compatible with the original bootloader, allow us to load OpenWrt directly from original web interface or via original bootloader xmodem transfer.</p><p>C ya!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89898">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						15 Jun 2009, 14:36					</div>
				</div>
				<div class="post-content content">
					<p>hi again Araks</p><p>im in work today so replying quick is a little easyer..<br />yeah i have a spare drive ill use for ubuntu.. forgot how cpu intencive the compiling can get.. cool..</p><p>ok now as for the DD-wrt.. yeah it does require a license. but the activation and multi channel is only 25 euro.. that wouldnt bother me to much .. i have a second bridge device which i might try it on.. im guessing i still need the boot loder that we used on your one.. </p><p>i think by comparing the 2 setups we can make the open wrt work a little better maybe .. it would be a good working platform to work off..</p><p>ill try it and let ya know</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p89903">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						15 Jun 2009, 15:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>LanMasterD wrote:</cite><blockquote><p>ok now as for the DD-wrt.. yeah it does require a license. but the activation and multi channel is only 25 euro.. that wouldnt bother me to much .. i have a second bridge device which i might try it on.. im guessing i still need the boot loder that we used on your one..</p></blockquote></div><p>It isn&#039;t much money, but I have hundreds of OSBRiDGE antennas, that would need too much money...! And anyway, I&#039;d like to improve OperWrt, since I prefer its philosophy instead DD-WRT&#039;s.<br />For the bootloader, I don&#039;t know wich one they use. Maybe they use the original one. You should ask them...</p><p>Bye!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90046">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">AraKs</div>
					<div class="post-datetime">
						17 Jun 2009, 20:39					</div>
				</div>
				<div class="post-content content">
					<p>Today I sent a 5GXi board to Gabor, as soon he receives it, he&#039;ll start looking for a way to dump the original bootloader.<br />Once he did that, the next step will be understanding the way the bootloader (de)crypts the original firmwares.<br />Then we&#039;ll be able to make crypted images that will boot with the original bootloader, and write them trough the original web interface upgrade tool.</p><p>Now we&#039;ve only to wait for Poste Italiane to deliver the package to Gabor... <img src="https://forum.openwrt.org/img/smilies/roll.png" width="15" height="15" alt="roll" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p90117">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">LanMasterD</div>
					<div class="post-datetime">
						19 Jun 2009, 17:25					</div>
				</div>
				<div class="post-content content">
					<p>cool sounds great .. ive fallen ill last few days so havent had any time to look into things.. can bearly move.. ill be in touch soon</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 2</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=19682&amp;p=2.html">2</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>