<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> problems building images from trunk for TP-Link TL-MR3220</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 6 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p144995">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">aXon</div>
					<div class="post-datetime">
						2 Oct 2011, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Hi there,</p><p>I have a working build environment in debian and am running into the problem of not knowing, which files actually are the ones that would be equivalent to the sys upgrade.bin/factory.bin from openwrt&#039;s own download trunk folder. The files I get after a successful make run are as follows<br /></p><div class="codebox"><pre><code>-rw-r--r-- 1 debian debian  4670678 2011-10-02 16:12 openwrt-ar71xx-generic-rootfs.tar.gz
-rw-r--r-- 1 debian debian  5242880 2011-10-02 16:13 openwrt-ar71xx-generic-root.jffs2-128k
-rw-r--r-- 1 debian debian  5242880 2011-10-02 16:12 openwrt-ar71xx-generic-root.jffs2-64k
-rw-r--r-- 1 debian debian  3801088 2011-10-02 16:13 openwrt-ar71xx-generic-root.squashfs
-rw-r--r-- 1 debian debian  3518468 2011-10-02 16:13 openwrt-ar71xx-generic-root.squashfs-4k
-rw-r--r-- 1 debian debian  3538948 2011-10-02 16:13 openwrt-ar71xx-generic-root.squashfs-64k
-rw-r--r-- 1 debian debian  1196118 2011-10-02 16:12 openwrt-ar71xx-generic-uImage-gzip.bin
-rw-r--r-- 1 debian debian   864864 2011-10-02 16:12 openwrt-ar71xx-generic-uImage-lzma.bin
-rwxr-xr-x 1 debian debian  2624848 2011-10-02 16:12 openwrt-ar71xx-generic-vmlinux.bin
-rwxr-xr-x 1 debian debian  2691348 2011-10-02 16:12 openwrt-ar71xx-generic-vmlinux.elf
-rw-r--r-- 1 debian debian  1245184 2011-10-02 16:12 openwrt-ar71xx-generic-vmlinux.gz
-rw-r--r-- 1 debian debian   917504 2011-10-02 16:12 openwrt-ar71xx-generic-vmlinux.lzma</code></pre></div><p>Unfortunately all the documentation says that images will be built in trunk/bin and have the same naming conventions. Is this an option to be ticked in the menuconfig? Because of this I have bricked one unit already, as I took the &quot;openwrt-ar71xx-generic-root.squashfs-64k&quot; image. <br />Can someone please enlighten me?</p><p>Thanks,</p><p>aXon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144997">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						2 Oct 2011, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>There is hardware, that requires two images, like the <a href="http://wiki.openwrt.org/toh/d-link/dir-300">http://wiki.openwrt.org/toh/d-link/dir-300</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p144998">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">aXon</div>
					<div class="post-datetime">
						3 Oct 2011, 00:06					</div>
				</div>
				<div class="post-content content">
					<p>Thank you for the hint. That might be one of the possible problems, but I have no idea how to build such an image...<br />In other words - without having proper knowledge about the internals of the device, I won&#039;t be able to bake my own firmware for it? </p><p>Thanks,<br />aXon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145018">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						3 Oct 2011, 12:40					</div>
				</div>
				<div class="post-content content">
					<p>Hi, you selected too many packages, the bin-image doesn&#039;t get build because it would be too big. The mr3220 has just 4mb flash but the squashfs and the kernel would need almost 5mb. So deselected some packages or use extroot.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145038">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">aXon</div>
					<div class="post-datetime">
						3 Oct 2011, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>Hi eleon</p><p>Thank you for the info. I could not find it anywhere in the documentation. Maybe it is worth putting this into the build instructions, as many routers still have 4 MiB of flash.<br />I will try to deselect some more packages then <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>cheers,<br />aXon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145073">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						4 Oct 2011, 11:43					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aXon wrote:</cite><blockquote><p>Hi eleon</p><p>Thank you for the info. I could not find it anywhere in the documentation. Maybe it is worth putting this into the build instructions, as many routers still have 4 MiB of flash.</p></blockquote></div><p>Is you hand aching, or what prevents <em>you</em> from grooming the wiki?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145080">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">aXon</div>
					<div class="post-datetime">
						4 Oct 2011, 12:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi Orca,</p><p>If it would be an exhaustive explanation on how to build openwrt for beginners, it should include such instructions IMHO and/or an error output at the end of a &quot;normal&quot; aka non-verbose make process. Don&#039;t get me wrong, but I was just puzzled there is no mention of this on <a href="http://wiki.openwrt.org/doc/howto/build">http://wiki.openwrt.org/doc/howto/build</a>. I have found out that it appears somewhere near the end when executed with V=99<br /></p><div class="codebox"><pre><code>[mktplinkfw] *** error: rootfs image is too big</code></pre></div><p>And there is no output from here to a non-verbose make, as it seems to get ignored. I would count that as abort of the build process, as it is effectively not a successful make in terms of flash image creation IMO.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145086">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						4 Oct 2011, 12:23					</div>
				</div>
				<div class="post-content content">
					<p>Do you think the developers will write code AND then write documentation?</p><p>Most of the docu is written by people like you, to help people like you. If you think any wiki-page is missing something, or could be expressed better in a different way, or should be translated, DO IT.</p><br /><p>Ok, actually they did: <a href="http://downloads.openwrt.org/kamikaze/docs/openwrt.html">http://downloads.openwrt.org/kamikaze/docs/openwrt.html</a> but this is no longer maintained. That is what the wiki is for. ;-)</p>											<p class="post-edited">(Last edited by <strong>Orca</strong> on 4 Oct 2011, 12:25)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>