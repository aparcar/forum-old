<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Enable Telnet in Chaos Calmer</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 26 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p291626">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						13 Sep 2015, 15:48					</div>
				</div>
				<div class="post-content content">
					<p>Hello,<br />is it possible to enable telnet on chaos calmer? I only need the telnet access for logging. So it would be finde if i can use both telnet &amp; ssh? <br />But as far as i know if i set a root password telnet would be disabled. But there must be a way ti reenable it or?</p><p>Thanks for help!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291634">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">DBAA</div>
					<div class="post-datetime">
						13 Sep 2015, 16:39					</div>
				</div>
				<div class="post-content content">
					<p>The service start script <strong>/etc/init.d/telnet</strong> does the checks and already runs by default. Edit that script to remove the checks - it is a simple if block around the lines that start the telnetd program.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291648">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						13 Sep 2015, 18:25					</div>
				</div>
				<div class="post-content content">
					<p>Seems not to be so easy, i already tried to remove this block for checking the secrets.<br />The telnet deamon will start, but i was not able to connect using telnet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291650">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						13 Sep 2015, 18:38					</div>
				</div>
				<div class="post-content content">
					<p>check /etc/init.d/telnet and comment irrelevant from start section and see that telnet needs&nbsp; /bin/login.sh script as argument<br />edit /bin/login.sh and cut irrelevant parts</p><p>tested and works<br />ps: check this <a href="http://wiki.openwrt.org/inbox/howto/telnet_enable">http://wiki.openwrt.org/inbox/howto/telnet_enable</a></p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 13 Sep 2015, 18:40)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291661">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						13 Sep 2015, 19:11					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, got it now working, but not such as i need it <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /><br />The login works, but there is the &quot;username&quot; check missing, where you enter root. <br />And now my scripts won&#039;t work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291662">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						13 Sep 2015, 19:14					</div>
				</div>
				<div class="post-content content">
					<p>OpenWrt is single user by default, maybe that&#039;s your problem?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291665">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						13 Sep 2015, 19:17					</div>
				</div>
				<div class="post-content content">
					<p>yeah, that i already know.</p><p>but what i mean is when i connect via telnet that i get the prompt to enter the username &quot;root&quot; before login into the busybox.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291668">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						13 Sep 2015, 19:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>n4p wrote:</cite><blockquote><p>yeah, that i already know.</p><p>but what i mean is when i connect via telnet that i get the prompt to enter the username &quot;root&quot; before login into the busybox.</p></blockquote></div><p>so why dont you use ssh? if you want usr:pass prompt??<br />with telnet you are logged in as root you can do whatever</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 13 Sep 2015, 19:25)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291670">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">n4p</div>
					<div class="post-datetime">
						13 Sep 2015, 19:26					</div>
				</div>
				<div class="post-content content">
					<p>yeah you got right, that would be the smartest way and also the safest. but the problem what i have is that on this engine where are my scripts running ssh don&#039;t work and only telnet is implementet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291672">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						13 Sep 2015, 19:38					</div>
				</div>
				<div class="post-content content">
					<p>read that link i gave you higher.. and see the script from login.sh.. seems you can add password for user but read unsafe...</p><p>edit: well from that link i gave you.. seems needs busybox login but throws applet not found .. maybe you need to compile fw as per link or reinstall busybox..</p>											<p class="post-edited">(Last edited by <strong>makarel</strong> on 13 Sep 2015, 19:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291707">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">kasar</div>
					<div class="post-datetime">
						14 Sep 2015, 00:12					</div>
				</div>
				<div class="post-content content">
					<p>I has been using this simple trick/fix for a while to enable telnet on my routers by just replace a file content</p><p>just replace the /bin/login.sh content with this one.</p><div class="quotebox"><blockquote><p>#!/bin/sh<br /># Copyright (C) 2006-2011 OpenWrt.org</p><p>if ( ! grep -qs &#039;^root:[!x]\?:&#039; /etc/shadow || \<br />&nbsp; &nbsp; &nbsp;! grep -qs &#039;^root:[!x]\?:&#039; /etc/passwd ) &amp;&amp; \<br />&nbsp; &nbsp;[ -z &quot;$FAILSAFE&quot; ]<br />then<br />echo &quot;###################&quot;<br />echo &quot;### Ksr Box 1.0 ###&quot;<br />echo &quot;###################&quot;<br />echo &quot; &quot;<br />cat /proc/sys/kernel/hostname<br />echo &quot; &quot;<br />echo &quot; &quot;<br />&nbsp; &nbsp; ssh 127.0.0.1<br />else<br />cat &lt;&lt; EOF<br /> === IMPORTANT ===============================<br />&nbsp; Use &#039;passwd&#039; to set your login password<br />&nbsp; this will enable telnet login with password<br /> ---------------------------------------------<br />EOF<br />exec /bin/ash --login<br />fi</p></blockquote></div><p>edit the header in the ### to match your desired Hi message.</p><p>this basic fix basically self ssh the router itself asking for a password via telnet, if the password is correct, you can enter comands, else, you have to reconnect.</p><p>the bad thing is that it only ask for a password, instead for username and password.<br />but well, most attackers would focus on the root account anyway, so is not an issue for me</p>											<p class="post-edited">(Last edited by <strong>kasar</strong> on 14 Sep 2015, 00:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291710">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						14 Sep 2015, 00:19					</div>
				</div>
				<div class="post-content content">
					<p>nice trick</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>