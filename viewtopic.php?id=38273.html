<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> current status of openwrt for TP_Link TL-WR741ND Ver 2.4</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p173235">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						25 Jul 2012, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>I see from the hardware tables that this router has many version variations. Mine is ver 2.4 but this is not listed in the tables. Which firmware should I use? Backfire-10.03.1 or Trunk? I prefer not to brick this as I would then need to start soldering.</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173240">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						25 Jul 2012, 16:10					</div>
				</div>
				<div class="post-content content">
					<p>Straight from the Wiki :</p><p>TL-WR741ND v2.4</p><p>Device works with Backfire 10.03.01 and latest trunk image and also with**Gargoyle** build, no flaws discovered.</p><p>RTFW <a href="http://wiki.openwrt.org/toh/tp-link/tl-wr741nd">http://wiki.openwrt.org/toh/tp-link/tl-wr741nd</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173241">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Jul 2012, 16:15					</div>
				</div>
				<div class="post-content content">
					<p>EDIT: the faster wins..</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 25 Jul 2012, 16:16)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173243">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						25 Jul 2012, 16:17					</div>
				</div>
				<div class="post-content content">
					<p>Just saw this there as well.</p><p>Tried this about a year ago and bricked one.</p><br /><p>Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173245">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Jul 2012, 16:32					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Tried this about a year ago and bricked one.</p></blockquote></div><p>there were no backfire 10.03.1 final a year ago!</p><p>what have you tried?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173249">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						25 Jul 2012, 16:59					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Just saw this there as well.</p><p>Tried this about a year ago and bricked one.</p><p>Thanks.</p></blockquote></div><p>Really...you should try debricking your old one...might learn something...<br /><a href="http://wiki.openwrt.org/doc/hardware/port.serial">http://wiki.openwrt.org/doc/hardware/port.serial</a><br /><a href="http://wiki.openwrt.org/doc/howto/generic.debrick">http://wiki.openwrt.org/doc/howto/generic.debrick</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173257">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						25 Jul 2012, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>The old one I damaged by pulling a trace from the pcb.</p><p>Don&#039;t worry, it wasn&#039;t much money.</p><p>Now, I just got the 10.03.1 firmware from the website to install OK and it works.</p><p>Next I needed openvpn and by installing from packages, ran out of memory. </p><p>So, I refreshed my svn branch sources and built it with the openvpn + deps included in the image.</p><p>I have two files named openwrt-ar71xx-root.squashfs and ...squashfs-4k amounst others.</p><p>Neither of these upload and apply to the router correctly using the luci web interface.</p><p>I did check the menuconfig for other image options but saw none.</p><p>Any help is appreciated.</p><p>Perazim</p>											<p class="post-edited">(Last edited by <strong>perazim</strong> on 25 Jul 2012, 19:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173268">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						25 Jul 2012, 20:50					</div>
				</div>
				<div class="post-content content">
					<p>in menuconfig you should find the option to select target model wr741ndv1!!</p><p>are you compiling trunk or backfire?</p><p>i don&#039;t know what you mean by &quot;refreshed my svn branch&quot; but with my UN-knowledge I&#039;ll redownload complete sources anyway...</p><p>edit:</p><p>&nbsp; &nbsp; &nbsp;Target System (Atheros AR71xx/AR7240/AR913x)&nbsp; ---&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp;Target Profile (TP-LINK TL-WR741ND v1)&nbsp; ---&gt;&nbsp; &nbsp; &nbsp; &nbsp;</p><p><img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 25 Jul 2012, 20:58)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173276">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						25 Jul 2012, 22:40					</div>
				</div>
				<div class="post-content content">
					<p>First attempt was with backfire. Second attempt was with backfire-10.03.1. Both were from pristine sources checked out from svn. I used file: openwrt-ar71xx-root.squashfs. This was a different flash file name than I first used which I downloaded from openwrt.org: openwrt-ar71xx-tl-wrt741nd-v1-squashfs-factory.bin.</p><p>These options were set before build:</p><p>&nbsp; &nbsp; &nbsp;Target System (Atheros AR71xx/AR7240/AR913x)&nbsp; ---&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />&nbsp; &nbsp; &nbsp;Target Profile (TP-LINK TL-WR741ND v1)&nbsp; ---&gt;&nbsp; &nbsp; &nbsp; &nbsp;</p><p>FYI: I have previously built a few (6+) different routers. I am not a developer but have figured out the basics of the build cycle.</p><p>Question: What happens if the flash image is bigger than the size allowed for it on the flash? Do I expect an error or does the upload just hang? I can see link activity on the pc uploading the flash but the router just seems to ignore it.</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173277">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						25 Jul 2012, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>I tried renaming the flash file from:</p><p>openwrt-ar71xx-root.squashfs</p><p>to</p><p>openwrt-ar71xx-root.squashfs-sysupgrade.bin</p><p>and received the error:</p><p>The uploaded image file does not contain a supported format. Make sure that you choose the generic image format for your platform.</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173347">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						26 Jul 2012, 18:45					</div>
				</div>
				<div class="post-content content">
					<p>I can flash the firmware: openwrt-ar71xx-tl-wr741nd-v1-squashfs-sysupgrade.bin downloaded from the openwrt site for 10.03.1</p><p>using luci: backup/flash firmware/browse to above file/flash image. Then Flash Firmware - Verify asks to confirm. Here I see that this firmware is 3.20MB in size and there is 3.81MB available. This completes as advertised.</p><p>When I use the firmware file I built from svn Backfire-10.03.1, I never get the Flash Firmware - Verify page. Nothing. I can tell that this is not a size problem as the new firmware is 3.30MB.</p><p>Anybody know what is wrong here?</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173348">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						26 Jul 2012, 19:09					</div>
				</div>
				<div class="post-content content">
					<p>IMHO you should get a firmware with the same filename as the one you downloaded, else there&#039;s something wrong with the compilation process (really don&#039;t know what, never compiled myself....)...</p><p>did you try a make with ALL standard options, selecting only system and profile?</p>											<p class="post-edited">(Last edited by <strong>nebbia88</strong> on 26 Jul 2012, 19:10)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173354">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						26 Jul 2012, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>I agree regarding the filenames but after building backfire-10.03.1 for this router, these are the filenames and they do not work. Perhaps there is an issue regarding the version of the hardware for there are many. The wiki for these does not seem to be up to date. I only have this one sample and thus unable to check other versions to isolate what is wrong.</p><p>I have built firmware for several ubiquiti models, d-link and another tp-link routers and had the normal learning curve but this is the first time I have run into this problem. Perhaps flashing via the ssh interface would reveal more about what is going wrong?</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173370">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						27 Jul 2012, 02:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Question: What happens if the flash image is bigger than the size allowed for it on the flash? <br />Perazim</p></blockquote></div><p>The firmware will not be built. You will not have a file that ends with &quot;bin&quot;<br />The &quot;other&quot; files you see in /bin/ar71xx are kernel and filesystem files used to build the firmware but are NOT firmware.</p><p>When you run &quot;make menuconfig&quot; remove things you don&#039;t need example : USB&nbsp; 741 doesn&#039;t have one.<br />You only have a 4MB flash chip... you should check your options carefully and remove any BS that you don&#039;t need.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173444">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						27 Jul 2012, 17:39					</div>
				</div>
				<div class="post-content content">
					<p>Fixed: The correct bin files were not being built because they were too large for the router. I built the default configuration and this worked fine. In order to fit in openvpn and its deps, I removed luci and its deps. Barely fit but it works.</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173449">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						27 Jul 2012, 18:00					</div>
				</div>
				<div class="post-content content">
					<p>OK now you have openvpn built into your squash filesystem.....you should be able to install luci if you want.<br /><a href="http://wiki.openwrt.org/doc/howto/luci.essentials">http://wiki.openwrt.org/doc/howto/luci.essentials</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173469">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						27 Jul 2012, 22:47					</div>
				</div>
				<div class="post-content content">
					<p>There doesn&#039;t appear to be enough space left. I tried adding the basic luci package, rebuilding and it pushed the size over the top.</p><p>Perazim</p>											<p class="post-edited">(Last edited by <strong>perazim</strong> on 27 Jul 2012, 22:49)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173593">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						29 Jul 2012, 23:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>Fixed: The correct bin files were not being built because they were too large for the router. I built the default configuration and this worked fine. In order to fit in openvpn and its deps, I removed luci and its deps. Barely fit but it works.</p></blockquote></div><p>Sorry but I am not out of the woods just yet.</p><p>I was trying various optional packages in the build and the build system quit generating the .bin files so I removed the added packages to bring it back under the maximum size limitation. Didn&#039;t build. So I started with a fresh svn checkout and built the default basic config again. Still didn&#039;t work.</p><p>What is going on here???</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173599">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">ldpinney</div>
					<div class="post-datetime">
						30 Jul 2012, 00:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>perazim wrote:</cite><blockquote><p>So I started with a fresh svn checkout and built the default basic config again. Still didn&#039;t work.<br />Perazim</p></blockquote></div><div class="quotebox"><cite>ldpinney wrote:</cite><blockquote><p>&quot;You only have a 4MB flash chip... you should check your options carefully and remove any BS that you don&#039;t need.&quot;</p></blockquote></div><p>The default .config will not build the firmware for this router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173696">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						30 Jul 2012, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>It has in the past. I even tried building the default config without wireless support but this still would not build.</p><p>I used imagebuilder to build the bin file and this worked as advertised. Then I built again but without the wireless packages and added openvpn package and this worked. Next I added luci packages and this also worked but it was near full. Maybe there is 100-200KB available in the squashfs but I have the packages needed.</p><p>Now as I understand, imagebuilder is also used in the full build system so there seems to be inconsistent behaviour being observed. My development system is Fedora 14 and this has caused some minor problems in the past. Perhaps there is some previously unknown subtle problems?</p><p>This router configuration is to be a vpn access device and I will start another thread to clarify some issues regarding firewalls for vpn.</p><p>Thanks,</p><p>Perazim</p>											<p class="post-edited">(Last edited by <strong>perazim</strong> on 30 Jul 2012, 17:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173912">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">perazim</div>
					<div class="post-datetime">
						2 Aug 2012, 23:25					</div>
				</div>
				<div class="post-content content">
					<p>The tl-wr741nd ver 2.4 is working well now.</p><p>I learning today that my supplier has no more stock of v2.4 and now only has v4.3. Looking in the hardware table, I see that this version uses a different soc, specifically the ar9331. The hardware table states that this was working on trunk r31249 or newer. It also states that TP-Link changes versions faster that the update period for this documentation.</p><p>So, my question is: Will backfire-10.03.1 support this or do I really need to use trunk? It would be great if I could use only one flash image for all these variations of this router.</p><p>Anybody have experience with this?</p><p>Thanks,</p><p>Perazim</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p173920">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">eleon216</div>
					<div class="post-datetime">
						3 Aug 2012, 02:00					</div>
				</div>
				<div class="post-content content">
					<p>soc ar9331 is used since 4.0 so 4.3 should work just fine, or should need just minimal changes. </p><p>but it&#039;s only supported in trunk... stable support will be in the next stable release (atttitude adjustment)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174453">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						9 Aug 2012, 15:40					</div>
				</div>
				<div class="post-content content">
					<p>Speaking of minimal changes... in a TL-WR741ND&nbsp; rev. 4.20 there is only one antenna selectable in OpenWRT. (Chainmask 0x00000001), but there is another antenna on board. So how can I be sure to use just the PCB-antenna or the external antenna connector?<br />There are great differences in reception using or not using diversity.</p><p>Could it be, that there is some antenna switch in this revision - or on the opposite - an antenna switch was there in previous revisions, which does not exist any longer?</p><p>Is this by design or just a bug?<br />Does this apply to all revisions?</p>											<p class="post-edited">(Last edited by <strong>epek</strong> on 10 Aug 2012, 10:44)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174621">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						11 Aug 2012, 16:55					</div>
				</div>
				<div class="post-content content">
					<p>I was told recently, that the two antenna lines/lanes on the PCB end directly in the Wlan-Chip.<br />So probably the diversity handling and 0x1 antenna configuration does not really apply to rev 4.20 as opposed to 2.4 and earlier.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p174946">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">epek</div>
					<div class="post-datetime">
						15 Aug 2012, 14:14					</div>
				</div>
				<div class="post-content content">
					<p>just pushing the question above. Does anyone know?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>