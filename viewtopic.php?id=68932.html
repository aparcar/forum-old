<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Captive Portal WifiDog allow hotspot mobility</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 11 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p346593">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">para_cenas1</div>
					<div class="post-datetime">
						13 Dec 2016, 15:18					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have setup some APs with openWrt that connect to a central router that has WifiDog running. (The APs are connected wirelessly between eachother, like a mesh)</p><p>All the APs have a relay (with the relayd package) between the wifi interfaces acting as client and ap, so that there is only one DHCP running at the central router.<br />I wanted to have wifidog running in this central router, to display a simple click-to-login page to the users. I have it running, but the problem is that the first time a user connects to one of the APs, it prompts to login the user, but in the wifidog server, it authenticates the mac address of the AP, and not the user, thus allowing traffic for any user on that AP after that.</p><p>I know the mac address of the user doesn&#039;t get to the central router, so I have 3 questions:<br />- Is there a way so that the client&#039;s mac address reaches the wifidog portal?<br />- Is there a way to set up a wifidog at each AP, and redirect the requests to the central router? (to allow mobility between APs)</p><p>- Is there a better/different way to do this?</p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346605">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						13 Dec 2016, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>Even with relayd, standard AP mode does not communicate the final destination&#039;s MAC to the other side.&nbsp; So, as to the first question, you&#039;d need to use a different way to link the routers, such as AP(WDS) mode or a true mesh.</p><p>The second question may be possible using NFS so that all instances of wifidog share the same status file saved in one place.&nbsp; There may be a problem where a user initially registers on one AP, then moves to another one, eventually the wifidog on the first one will consider him timed-out and de-register him from the file.</p>											<p class="post-edited">(Last edited by <strong>mk24</strong> on 13 Dec 2016, 16:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p346618">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">para_cenas1</div>
					<div class="post-datetime">
						13 Dec 2016, 19:19					</div>
				</div>
				<div class="post-content content">
					<p>I am also using authpuppy for authentication on a remote server. I was surprised that it does not check if a mac address has an active session on the server, and always prompts the user when I restart the wifidog process.</p><p>Is this a normal behavior? Shouldn&#039;t it syncronize?<br />The way I&#039;m seeing it, the simplest way would be to set up wifidog on every AP, if it did syncronize with the server.</p><p>I tried the WDS solution, but I did&#039;t manage to get it working across devices.</p><p>Thanks.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>