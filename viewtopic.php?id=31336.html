<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> How to shut off the router ?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p141141">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Goemon</div>
					<div class="post-datetime">
						12 Aug 2011, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I plan to remodel my home network and replace an old router and a NSLU by one new device (TP-Link TL-WR1043ND or Linksys by Cisco WRT160NL). With the current setup I have a router running DD-WRT and I can it simply switch it of before I go to bed. The NSLU must be shut down when it was running. How does Open-WRT devices with attached USB storrage (probably running CUPS etc from it) behave if the power to the router is switched off? Any Idea to make the new setup &quot;wife safe&quot;, she prefers to have one switch to &quot;switch the internet on&quot; and &quot;off&quot;?</p><p>thanks for any advice<br />Jürgen</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141152">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						12 Aug 2011, 18:16					</div>
				</div>
				<div class="post-content content">
					<p>You or your wife can simply pull the plug. Nothing should brake.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141157">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">arokh</div>
					<div class="post-datetime">
						12 Aug 2011, 19:24					</div>
				</div>
				<div class="post-content content">
					<p>Depending on the filesystem, pulling the plug might cause corruption.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141164">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						12 Aug 2011, 20:25					</div>
				</div>
				<div class="post-content content">
					<p>Using the &quot;sync&quot; mount option might prevent that, at the expense of degraded write performance.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141168">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">written_direcon</div>
					<div class="post-datetime">
						12 Aug 2011, 21:39					</div>
				</div>
				<div class="post-content content">
					<p>You don&#039;t have to shutdown a router.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141182">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">F1aw</div>
					<div class="post-datetime">
						13 Aug 2011, 04:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>written_direcon wrote:</cite><blockquote><p>You don&#039;t have to shutdown a router.</p></blockquote></div><p>That is how I think about it. Once you start to run some services, or web servers on it, you start worrying about the opposite -- How to keep it powered on indefinitely.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p141219">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						13 Aug 2011, 16:53					</div>
				</div>
				<div class="post-content content">
					<p>Tip: Since little routers consume little power, I rather have one running 24/7 and use cronjobs: <a href="http://wiki.openwrt.org/doc/howto/notuci.config#etccrontabsroot">http://wiki.openwrt.org/doc/howto/notuc … ontabsroot</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p145998">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">Goemon</div>
					<div class="post-datetime">
						17 Oct 2011, 01:42					</div>
				</div>
				<div class="post-content content">
					<p>I have three reasons to switch of the router: (i) unfortunately it is located in the sleeping room, I prefer not to cook us during sleep with radio waves (ii) even a little power saving contibutes to less CO2 emission, think of millions of tiny home routers that could be off for 8h a day (iii) no WLAN running, no possibility that someone can hack into my network. Thanks for your considerations anyway.</p><p>I now have a stable setup, that can be switched on/off with the switch on the power strip. A custom startup script is used to do a fsck on the device before mounting it with above mentioned &quot;sync&quot; options.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146000">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">cptdondo</div>
					<div class="post-datetime">
						17 Oct 2011, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>I have a router in a vehicle with an attached 250GB hard drive.&nbsp; It gets shut off regularly with no notice.&nbsp; On mount, it is fsck&#039;d and then mounted.&nbsp; No problems so far.&nbsp; The drive is formatted ext3, so the journal helps a lot, as does the sync option.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146025">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						17 Oct 2011, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>You could write a shell script to be executed on button press, this script would halt any writes to the filesystem, and then you can pull the plug.</p><p><a href="http://wiki.openwrt.org/doc/howto/hardware.button">http://wiki.openwrt.org/doc/howto/hardware.button</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146058">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						18 Oct 2011, 03:17					</div>
				</div>
				<div class="post-content content">
					<p>Just call shutdown or poweroff in the button script. Perhaps signal the completed umount with a change of LED.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146096">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						18 Oct 2011, 15:21					</div>
				</div>
				<div class="post-content content">
					<p>shutdown or poweroff will not work in most cases, because the circuitry misses this functionality.</p><p>The best thing you can do, is gracefully end all programs possible and then pull the plug.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146110">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						18 Oct 2011, 17:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Orca wrote:</cite><blockquote><p>shutdown or poweroff will not work in most cases, because the circuitry misses this functionality.</p><p>The best thing you can do, is gracefully end all programs possible and then pull the plug.</p></blockquote></div><p>That’s what shutdown and poweroff do. They call the K* scripts in /etc/rc.d. And by the order they get called you can see that umount is performed last, so that things like NFS, etc let go of the device.</p><p>It’s not about powering the hardware off.</p><p>edit: just put a script after K99umount that toggles an LED on your router, so you know you can unplug safely. Should be a matter of 1-2 seconds. (call it K99zzzz-led or something)</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 18 Oct 2011, 17:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p146161">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">Orca</div>
					<div class="post-datetime">
						19 Oct 2011, 12:03					</div>
				</div>
				<div class="post-content content">
					<p>Ah, so just the actual &quot;intrerupt current&quot; is missing, but all the rest is happening. What is the actual command to accomplish that? Is it a clib-function?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p309960">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">Rex Seattle</div>
					<div class="post-datetime">
						2 Feb 2016, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Hey guys, am I the only one who has ever moved my router?&nbsp; </p><p>I mean, I don&#039;t do it often, but when I do, I prefer to do it when the power is off :-)</p><p>Ditto with electrical issues, swapping out power strips, moving other equipment around, etc.</p><p>Dare I say there are a great many reasons to power off a router.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>