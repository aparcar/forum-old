<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Fonera FON-2200 Redboot Access through Ethernet (kolofnium not needed?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 17 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p57743">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">shadsec</div>
					<div class="post-datetime">
						19 Oct 2007, 05:59					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>Doing some tests with a stock Fonera 2200 (the one similar to the 2100 but without the heat sink nor metal shield over RF components) I have discovered that 3-5 seconds after power on, it has redboot accesible on 192.168.1.1 9000 for just two seconds. It is a bit hard to do the timing to interrupt it, but with several attempts it can be done.</p><p>I am not sure if this is already known, but i havent been able to find any info about reflashing this units without serial console access or some hack like kolofonium method. So I am just documenting it just in case.</p><p>After interrupting Redbot, it looks like it keeps trying to execute its bootup, but the good thing is that it also accepts any command:</p><p>Here starts a long capture, as you can see, even if I keep ctrl-C it insist on go on with execution:</p><br /><p>== Executing boot script in 1.990 seconds - enter ^C to abort<br />â™¥^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000001<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000001<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000001<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000001<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />^C<br />RedBoot&gt; â™¥^C<br />RedBoot&gt; â™¥^C<br />RedBoot&gt; â™¥^C<br />RedBoot&gt; â™¥^C<br />RedBoot&gt; â™¥^C<br />RedBoot&gt; f/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/dev<br />s/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEB<br />UG_ERROR = 00000043<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />config -/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/<br />eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG<br />_ERROR = 0000c34f<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />ll/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mi<br />ps/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR<br /> = 0000c34f<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR =<br /> 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145</p><p>/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR =<br /> 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145</p><br /><br /><p>-&gt; Here is the output of the command &#039;fconfig -l&#039; I typed very fast between ctrl-c&#039;s:</p><br /><p>Run script at boot: true<br />Boot script:<br />.. fis load -l vmlinux.bin.l7<br />.. exec</p><p>Boot script timeout (1000ms resolution): 2<br />Use BOOTP for network configuration: false<br />Gateway IP address: 0.0.0.0<br />Local IP address: 192.168.1.1<br />Local IP address mask: 0.0.0.0<br />Default server IP address: 192.168.1.254<br />Console baud rate: 9600<br />GDB connection port: 9000<br />Force console for special debug messages: false<br />Network debug at boot time: false<br />RedBoot&gt; /home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs<br />/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBU<br />G_ERROR = 0000c34f<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR =<br /> 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145</p><p>Here is the output of a fis list:</p><p>Name&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FLASH addr&nbsp; Mem addr&nbsp; &nbsp; Length&nbsp; &nbsp; &nbsp; Entry point<br />RedBoot&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0xA8000000&nbsp; 0x80040C00&nbsp; 0x00030000&nbsp; 0xA8000000<br />rootfs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0xA8030000&nbsp; 0xA8030000&nbsp; 0x00700000&nbsp; 0x00000000<br />vmlinux.bin.l7&nbsp; &nbsp; 0xA8730000&nbsp; 0x80041000&nbsp; 0x000B0000&nbsp; 0x80190040<br />FIS directory&nbsp; &nbsp; &nbsp;0xA87E0000&nbsp; 0xA87E0000&nbsp; 0x0000F000&nbsp; 0x00000000<br />RedBoot config&nbsp; &nbsp; 0xA87EF000&nbsp; 0xA87EF000&nbsp; 0x00001000&nbsp; 0x00000000<br />RedBoot&gt; /home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs<br />/eth/mips/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBU<br />G_ERROR = 0000c34f<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR =<br /> 00000145<br />/home/alfa/Atheros_Beta5.0/linuxsrc/src/redboot_fon1/ecos/packages/devs/eth/mips<br />/ar531x/current/src/ae531xecos.c#393:ae531x_send AHB ERROR status_4 = 00000145</p><p>... and goes on... the good thing is that it seems to accept any command... I didnt tried a fis init just in case I could end up with a bricked fonera, but I bet it would be possible to reflash it easily and without any &quot;trick&quot; like kolofonium.</p><p>Its not that using kolofonium and doing the kernel and redboot mod is a big hassle, but I guess it would be very interesting for many users to just run some gui flasher like freifunk&#039;s one configured to 192.168.1.1 and avoid most of the process.</p><p>I have checked to see if the same behavior is on FON2100 and FON2201A with no luck. It seems it only happens on FON2200.</p><p>Anyone has more experience with this behaviour? If it is already known and there is no way to reflash using it I would also like to hear it (though i would really be surprised if it would not be possible).</p><p>- ShadSEC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p57745">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">shadsec</div>
					<div class="post-datetime">
						19 Oct 2007, 06:37					</div>
				</div>
				<div class="post-content content">
					<p>Ok, I had to try.....</p><p>Freifunk EasyFlash finds it on boot and, after some stderr:tftp repeat block XXXX (from 27 to 2560) while loading rootfs errors, it have it reflashed without any hassle as expected....</p><p>So, I must conclude that FON2200 doesnt need any hack and are just reflashable as they come... This is so easy that probably it was already known, but since I didnt know about it before, i guess a bit more information about it wouldnt hurt.</p><p>- ShadSEC</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58142">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Lama Bleu</div>
					<div class="post-datetime">
						28 Oct 2007, 08:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>shadsec wrote:</cite><blockquote><p>I have checked to see if the same behavior is on FON2100 and FON2201A with no luck. It seems it only happens on FON2200.</p><p>Anyone has more experience with this behaviour? If it is already known and there is no way to reflash using it I would also like to hear it (though i would really be surprised if it would not be possible).</p><p>- ShadSEC</p></blockquote></div><p>Hi ShadSEC</p><p>For the La Fonera+ (FON2201), ethernet access for RedBoot is avalaible too --&gt; listening two seconds at boot on 192.168.1.1 on port 9000<br />And serial port too.</p><br /><div class="codebox"><pre><code>== Executing boot script in 1.300 seconds - enter ^C to abort
^C

RedBoot(tm) bootstrap and debug environment [ROMRAM]
OpenWrt certified release, version 1.1 - built 22:32:28, May  7 2007

Copyright (C) 2000, 2001, 2002, 2003, 2004 Red Hat, Inc.

Board: FON 2201
RAM: 0x80000000-0x81000000, [0x80040290-0x80fe1000] available
FLASH: 0xa8000000 - 0xa87f0000, 128 blocks of 0x00010000 bytes each.
RedBoot&gt; 
RedBoot&gt; fis list
Name              FLASH addr  Mem addr    Length      Entry point
RedBoot           0xA8000000  0x80040400  0x00030000  0xA8000000
loader            0xA8030000  0x80100000  0x00010000  0x80100000
image             0xA8040000  0x80040400  0x00230004  0x80040400
image2            0xA8660000  0xA8660000  0x00140000  0x80040400
FIS directory     0xA87E0000  0xA87E0000  0x0000F000  0x00000000
RedBoot config    0xA87EF000  0xA87EF000  0x00001000  0x00000000
RedBoot&gt;
RedBoot&gt; IP
IP: 192.168.1.1/255.255.255.0, Gateway: 0.0.0.0
Default server: 192.168.1.254
RedBoot&gt;

RedBoot&gt; fconfig -l
Run script at boot: true
Boot script:
.. fis load -b 0x80100000 loader
..  go 0x80100000

Boot script timeout (1000ms resolution): 2
Use BOOTP for network configuration: false
Gateway IP address: 0.0.0.0
Local IP address: 192.168.1.1
Local IP address mask: 255.255.255.0
Default server IP address: 192.168.1.254
Console baud rate: 9600
GDB connection port: 9000
Force console for special debug messages: false
Network debug at boot time: false
RedBoot&gt;</code></pre></div><p>Some tips on my &quot;only 3 pages&quot; website here: <a href="http://www.moliets-bastide.info">http://www.moliets-bastide.info</a><br />Ram boot for OpenWRT-kamikaze ( Wifi and serial ) without reflashing.<br />Just for fun and playing.</p><p>Regards<br />Lama Bleu</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58388">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">intrax</div>
					<div class="post-datetime">
						2 Nov 2007, 03:16					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t stop laughing at this discovery... Martin Varsavsky probably crying !</p><p>great work guys !</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p58401">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Lama Bleu</div>
					<div class="post-datetime">
						2 Nov 2007, 10:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>intrax wrote:</cite><blockquote><p>I can&#039;t stop laughing at this discovery... Martin Varsavsky probably crying !</p><p>great work guys !</p></blockquote></div><p>Thanks intrax.</p><p>Now, here is the link to SSH a Fonera+ (FON2201): <a href="http://www.fonboard.nl/wiki/Main_Page">http://www.fonboard.nl/wiki/Main_Page</a> or <a href="http://wifi.wikia.com">http://wifi.wikia.com</a> (mirror).<br />Multilingual Wiki for all OS. Martin sends us a congratulation mail ( &quot;OK I will check&quot;), but probably crying while in private.</p><p>LamaBleu.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61590">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">byzuser</div>
					<div class="post-datetime">
						11 Jan 2008, 15:53					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to be a thread necromancer with this, but it seems fitting, and about the only place I&#039;ve seen reference this problem:</p><p>I received a Fon 2200 flashed to... I think it was 0.7.1-2 actually.&nbsp; I went through the normal process of reflashing one as described at <a href="http://www.dd-wrt.com/wiki/index.php/LaFonera_Software_Flashing">http://www.dd-wrt.com/wiki/index.php/La … e_Flashing</a> -- used Kolofonium and used the CAMICIA.lzma and out.hex...</p><p>That of course got me to a RedBoot prompt, which it seems from this thread I could have gotten to in the first place (boo, I didn&#039;t know).</p><p>Trying to go further with it and do the actual flashing from RedBoot causes me to get similar errors as listed in the original post, like &quot;/ar531x/current/src/ae531xecos.c#390:ae531x_send AHB ERROR: AR531X_DEBUG_ERROR&quot; &lt;-- those.&nbsp; And I similarly have to Ctrl+C, and sometimes that stabilizes it back to a Redboot prompt.</p><p>But either way, I can&#039;t get it to flash any further, due to those errors it seems.&nbsp; Any ideas on how to get it flashed?</p><p>Thanks in advance to anyone who can give some insight <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>											<p class="post-edited">(Last edited by <strong>byzuser</strong> on 11 Jan 2008, 15:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p61591">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">michu</div>
					<div class="post-datetime">
						11 Jan 2008, 15:59					</div>
				</div>
				<div class="post-content content">
					<p>hey byzuser</p><p>I wrote down, how I flashed my Atheros: <a href="http://www.neophob.com/serendipity/index.php?/archives/132-Using-Openwrt-on-La-Fonera-for-Dummies.html">http://www.neophob.com/serendipity/inde … mmies.html</a></p><p>cheers</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>