<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> SOLVED- Wireless Won&#039;t Start - netifd Variable &#039;config&#039; does not exist</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 19 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p255350">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						24 Nov 2014, 03:53					</div>
				</div>
				<div class="post-content content">
					<p>I compiled and installed the latest trunk and I can&#039;t get either of my radios to come up. This is the only error showing in the System Log:</p><p>&nbsp; &nbsp; &nbsp;daemon.notice netifd: radio1 (4445): WARNING: Variable &#039;config&#039; does not exist or is not an array/object</p><p>I erased wireless config and rebooted but I get the same error.</p><p>Anyone know what would cause this? Both radios can &#039;scan&#039; properly using luci&#039;s &#039;scan&#039; button.</p><p>Here&#039;s my wireless config:</p><br /><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; option path &#039;pci0000:00/0000:00:11.0&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; option txpower &#039;18&#039;<br />&nbsp; &nbsp; option country &#039;US&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option encryption &#039;none&#039;<br />&nbsp; &nbsp; option ssid &#039;RSPro&#039;</p><p>config wifi-device &#039;radio1&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; option path &#039;pci0000:00/0000:00:12.0&#039;<br />&nbsp; &nbsp; option txpower &#039;16&#039;<br />&nbsp; &nbsp; option country &#039;00&#039;<br />&nbsp; &nbsp; option channel &#039;9&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio1&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option ssid &#039;OpenWrt&#039;<br />&nbsp; &nbsp; option encryption &#039;none&#039;</p><br /><br /><br /><p>Thanks in advance for the help,</p><p>Rob</p>											<p class="post-edited">(Last edited by <strong>robrob</strong> on 25 Nov 2014, 22:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255513">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						25 Nov 2014, 17:05					</div>
				</div>
				<div class="post-content content">
					<p>No help on this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255517">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">brightbell</div>
					<div class="post-datetime">
						25 Nov 2014, 17:35					</div>
				</div>
				<div class="post-content content">
					<p>Check the country code, should it be the same in both?<br />Does your router really have two radios?<br />Try removing the device for radio 1 and setting up both connections for radio0 <br />Check also the network file entries.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255522">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						25 Nov 2014, 18:13					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the response brightbell.</p><p>My current wireless config has both country codes set to &#039;00&#039; with no change. The router is an RS Pro with two mini-pci radio cards and it was fully functional with the previous (two week old) trunk build. All other router functions LAN, WAN, etc. are functioning perfectly just the wireless is a problem. If we can&#039;t find a software issue I&#039;ll open up the router and play with the pci cards.</p><p>Here&#039;s my current wireless config:</p><p>config wifi-device &#039;radio0&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option channel &#039;11&#039;<br />&nbsp; &nbsp; option hwmode &#039;11g&#039;<br />&nbsp; &nbsp; option path &#039;pci0000:00/0000:00:11.0&#039;<br />&nbsp; &nbsp; option htmode &#039;HT40&#039;<br />&nbsp; &nbsp; option txpower &#039;18&#039;<br />&nbsp; &nbsp; option country &#039;00&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio0&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option ssid &#039;RSPro&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;xxxxxxxx&#039;</p><p>config wifi-device &#039;radio1&#039;<br />&nbsp; &nbsp; option type &#039;mac80211&#039;<br />&nbsp; &nbsp; option path &#039;pci0000:00/0000:00:12.0&#039;<br />&nbsp; &nbsp; option htmode &#039;HT20&#039;<br />&nbsp; &nbsp; option hwmode &#039;11a&#039;<br />&nbsp; &nbsp; option channel &#039;36&#039;<br />&nbsp; &nbsp; option txpower &#039;20&#039;<br />&nbsp; &nbsp; option country &#039;00&#039;</p><p>config wifi-iface<br />&nbsp; &nbsp; option device &#039;radio1&#039;<br />&nbsp; &nbsp; option network &#039;lan&#039;<br />&nbsp; &nbsp; option mode &#039;ap&#039;<br />&nbsp; &nbsp; option ssid &#039;RSProAn&#039;<br />&nbsp; &nbsp; option encryption &#039;psk2&#039;<br />&nbsp; &nbsp; option key &#039;xxxxxxxxx&#039;</p><p>Here&#039;s my current network config:</p><br /><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config globals &#039;globals&#039;<br />&nbsp; &nbsp; option ula_prefix &#039;fd78:e1d8:47e5::/48&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth1&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option ip6assign &#039;60&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.2.1&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.2.2&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;<br />&nbsp; &nbsp; option gateway &#039;192.168.2.1&#039;<br />&nbsp; &nbsp; option dns &#039;208.67.222.222 208.67.220.220&#039;</p><p>config interface &#039;wan6&#039;<br />&nbsp; &nbsp; option ifname &#039;@wan&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;@wan&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option proto &#039;dhcp&#039;<br />&nbsp; &nbsp; option broadcast &#039;1&#039;</p><p>config switch<br />&nbsp; &nbsp; option name &#039;switch0&#039;<br />&nbsp; &nbsp; option reset &#039;1&#039;<br />&nbsp; &nbsp; option enable_vlan &#039;1&#039;</p><p>config switch_vlan<br />&nbsp; &nbsp; option device &#039;switch0&#039;<br />&nbsp; &nbsp; option vlan &#039;1&#039;<br />&nbsp; &nbsp; option ports &#039;0 1 2 3 4&#039;</p><p>config route</p>											<p class="post-edited">(Last edited by <strong>robrob</strong> on 25 Nov 2014, 18:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255523">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						25 Nov 2014, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>My first guess is dirty build environment. There have been a few changes in iwinfo, netifd etc. in the last weeks, which changes may require you to do more than &quot;make clean&quot; before build. That can still leave some old library in the staging dir, which library may then be erroneously linked into your build. You may have mixed versions in the firmware</p><p>Do a &quot;make dirclean&quot; or manually delete both build_dir and staging_dir before build.</p><p>EDIT:<br />Which exact version is &quot;latest trunk&quot;? r433xx?</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 25 Nov 2014, 18:31)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255525">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						25 Nov 2014, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>Thanks hnyman, I&#039;ll do a dirclean and rebuild.</p><p>My current build is: OpenWrt Chaos Calmer r43350</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255526">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						25 Nov 2014, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>Actually, probably fixed by r43351... <br />See <a href="https://dev.openwrt.org/ticket/18397">https://dev.openwrt.org/ticket/18397</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255539">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						25 Nov 2014, 20:31					</div>
				</div>
				<div class="post-content content">
					<p>That&#039;s great news. I&#039;m recompiling right now and I&#039;ll post here if it&#039;s fixed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255554">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">robrob</div>
					<div class="post-datetime">
						25 Nov 2014, 22:38					</div>
				</div>
				<div class="post-content content">
					<p>Yep, the new trunk fixed the issue. Thanks everyone for the help.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255617">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">macau</div>
					<div class="post-datetime">
						26 Nov 2014, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Any one can publish file that broke radios? have same problem as op, but dont have build env for my device (huawei hg556)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255620">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Nov 2014, 15:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>macau wrote:</cite><blockquote><p>Any one can publish file that broke radios? have same problem as op, but dont have build env for my device (huawei hg556)</p></blockquote></div><p>Wait until the next daily snapshot buildbot run, and then download the updated binary.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255647">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">macau</div>
					<div class="post-datetime">
						26 Nov 2014, 20:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><div class="quotebox"><cite>macau wrote:</cite><blockquote><p>Any one can publish file that broke radios? have same problem as op, but dont have build env for my device (huawei hg556)</p></blockquote></div><p>Wait until the next daily snapshot buildbot run, and then download the updated binary.</p></blockquote></div><p>thank u. how time usualli its going? current r43350 is 2 days ago built.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255650">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						26 Nov 2014, 20:51					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>macau wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>Wait until the next daily snapshot buildbot run, and then download the updated binary.</p></blockquote></div><p>thank u. how time usualli its going? current r43350 is 2 days ago built.</p></blockquote></div><p>Usually once per day. But exact timing depends on your platform and the build queue.</p><p>for most platforms there is already a 43375-43381 build.<br />See these:<br /><a href="http://buildbot.openwrt.org:8010/one_line_per_build">http://buildbot.openwrt.org:8010/one_line_per_build</a><br /><a href="http://buildbot.openwrt.org:8010/grid">http://buildbot.openwrt.org:8010/grid</a><br /><a href="http://buildbot.openwrt.org:8010/builders">http://buildbot.openwrt.org:8010/builders</a><br />There are still 5 platforms with 43350 as the last completed build, and for all of those a new build is already running.</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 26 Nov 2014, 21:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p255836">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">macau</div>
					<div class="post-datetime">
						28 Nov 2014, 15:34					</div>
				</div>
				<div class="post-content content">
					<p>Thank u. Flashed *51 and now all fine</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>