<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [SOLVED] Issue with new distributed firmware on Archer C7 v2 AC1750</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p302819">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sean56</div>
					<div class="post-datetime">
						8 Dec 2015, 01:37					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone,</p><p>I had an issue last night with my Archer C7 that I wanted to post about. I bought my Archer C7 off Amazon 27 November 2015, and it shipped with a different version of the firmware than was up on TP-Link&#039;s website:</p><p>Firmware Version: 3.14.3 Build 151014 Rel.49676n <br />Hardware Version: Archer C7 v2 00000000 </p><p>I downloaded the correct factory.bin for the hardware version I had, checked the MD5 hash, and attempted to install OpenWRT. I got the following error again and again:</p><p>Error Code: 18005 <br />Upgrade unsuccessfully because the version of the upgraded file was incorrect. Please check file name. </p><p>I also tried to &quot;update&quot; the firmware to the previous &quot;Archer C7_V2_150427&quot; firmware, and I got the same message. After some digging around, I found this thread (<a href="http://www.dd-wrt.com/phpBB2/viewtopic.php?t=287073&amp;sid=bf734eac76c5e4b36a2088a995bc5d10">http://www.dd-wrt.com/phpBB2/viewtopic. … a995bc5d10</a>), where OP had a similar issue. The folks at DD-WRT put up a new version of the old 150427 firmware that could be flashed on top of 3.14.3 Build 151014 Rel.49676n (you do need to be logged in in order to see the attached file. I also mirrored it here if that&#039;s okay: <a href="http://www81.zippyshare.com/v/r3oZQK2R/file.html).">http://www81.zippyshare.com/v/r3oZQK2R/file.html).</a> I successfully flashed to this version of the TP-Link firmware.</p><p>I was then able to flash to the current 15.05 CC version of OpenWRT. Very happy with the performance! I hope this helps someone else.</p><p>-Sean</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p304594">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">trialnerror</div>
					<div class="post-datetime">
						22 Dec 2015, 06:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, Sean, for this information.&nbsp; </p><p>I had this exact problem tonight with the same firmware and hardware versions.&nbsp; I was trying to flash my Archer C7 V2.0 to Gargoyle with no luck due to the 18005 error code.&nbsp; I used the file you posted (because I hate to create yet another login) and it flashed just fine.&nbsp; I then flashed the Gargoyle 1.9.0 factory bin and it flashed without any problems.&nbsp; I&#039;m now up and running.</p><p>Thanks again for posting your experience for others to learn from!</p><p>-A.S.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315401">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">senseless</div>
					<div class="post-datetime">
						17 Mar 2016, 21:34					</div>
				</div>
				<div class="post-content content">
					<p>Purchased a TP-LINK AC1750 last night (overnight prio delivery) since I needed one IMMEDIATELY. I ran into that stupid problem with the headers where tp-link is trying to force you to use their firmware (preventing people from installing unauthorized firmwares). I used the firmware sean56 provided above at <a href="http://www81.zippyshare.com/v/r3oZQK2R/file.html">http://www81.zippyshare.com/v/r3oZQK2R/file.html</a> which flashed to 3.14.3 Build 151014 Rel.49676n. Once complete, I tried to flash to <a href="https://downloads.openwrt.org/latest/ar71xx/generic/openwrt-15.05.1-ar71xx-generic-archer-c7-v2-squashfs-factory.bin">15.05</a>, the firmware upgrade proceeded. Then, that was the last I ever saw of the router. Instantly bricked.</p><p>Model: Archer C7(US) Ver:2.0</p><p>I would not recommend following the advice listed above (or buying this, or any other tp-link device). I&#039;ve gone through 12+ openwrt/ddwrt routers over the last 10 years and this is the first one I&#039;ve ever bricked. Quite pissed about it and the wasted $100. And... I still have no fucking internet!&lt;/rant&gt;</p>											<p class="post-edited">(Last edited by <strong>senseless</strong> on 17 Mar 2016, 21:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315409">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						17 Mar 2016, 22:25					</div>
				</div>
				<div class="post-content content">
					<p>@senseless</p><p>Don&#039;t give up, please!&nbsp; Look here:</p><p><a href="https://wiki.openwrt.org/toh/tp-link/archer-c5-c7-wdr7500#tftp_recovery_de-bricking">https://wiki.openwrt.org/toh/tp-link/ar … e-bricking</a></p><p>No promises, obviously, but it may be recoverable.&nbsp; HTH.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315430">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">xenith</div>
					<div class="post-datetime">
						18 Mar 2016, 00:41					</div>
				</div>
				<div class="post-content content">
					<p>@senseless It&#039;s likely not bricked, but just not booting OpenWRT</p><p>I was able to get mine to run DD-WRT, but NOT OpenWRT...</p><p>I detailed some of that here: <a href="https://www.reddit.com/r/openwrt/comments/4aukq9/help_archer_c7_v2_not_reachable_on_19216811_after/">https://www.reddit.com/r/openwrt/commen … 811_after/</a></p><p>and here: <a href="https://forum.openwrt.org/viewtopic.php?pid=315429#p315429">https://forum.openwrt.org/viewtopic.php … 29#p315429</a></p><p>The short of it is that you need to find the previous TP-Link version, setup a TFTP server, then after that is flashed, you can install DD-WRT. </p><p>OpenWRT 15.05* results in just the power LED being on + Network LED and no interface activity (nothing on 192.168.1.1)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315440">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						18 Mar 2016, 01:48					</div>
				</div>
				<div class="post-content content">
					<p>Weird, there&#039;re lots of people on this forum (including me) running OpenWrt 15.05* on their routers without an issue.</p><p>I have a theory that @senseless soft-bricked his router by trying to flash OpenWrt from DD-WRT.</p><p>I *believe* you shouldn&#039;t be flashing OpenWrt directly from DD-WRT. If your router is locked, the path should be: Locked TP-Link firmware --&gt; DD-WRT unlock --&gt; Unlocked TP-Link firmware (older version) --&gt; OpenWrt.</p><p>The OP hinted that&#039;s the way he&#039;s done it, but it wasn&#039;t explicitly specified by him.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315452">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">xenith</div>
					<div class="post-datetime">
						18 Mar 2016, 03:03					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve tried all possible paths (Usually recovering via TFTP flash if something goes wrong) </p><p>This machine will not boot OpenWRT&#039;s image. Works will all versions of TP-Link firmware that I&#039;ve tried, and the latest version of DD-WRT.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315481">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						18 Mar 2016, 08:37					</div>
				</div>
				<div class="post-content content">
					<p>And you&#039;re certain you&#039;ve got a v2, not maybe a newer version with the different hardware? And a proper version of OpenWrt (either v1 or v2) to match your router? And checked an md5sum of the file you ended up with vs what&#039;s posted in downloads?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315502">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">xenith</div>
					<div class="post-datetime">
						18 Mar 2016, 13:26					</div>
				</div>
				<div class="post-content content">
					<p>Yes absolutely certain, unless they&#039;re putting &quot;Ver: 2.0&quot; stickers on non version two hardware <img src="https://forum.openwrt.org/img/smilies/tongue.png" width="15" height="15" alt="tongue" /></p><p>I reverted back to the stock TP-Link firmware because I actually need something that works in the time being while I decide whether or not to return this hardware. Currently using: </p><p>Firmware Version: 3.14.3 Build 151014 Rel.49676n<br />Hardware Version: Archer C7 v2 00000000</p><p>I see you saw the other thread so I&#039;ll try to crack her open without voiding the warranty and fulfill your request of getting a PCB photograph if I have time today. (and reply back there, but I&#039;m going to be rather busy today)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315549">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">brando56894</div>
					<div class="post-datetime">
						18 Mar 2016, 17:12					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;d recommend getting a serial cable so that you can see what&#039;s wrong during the flashing and boot-up, embedded devices are damn near impossible to debug without one. I just bought the pin headers, cables, and board so that I can make a permanent, simple solution whenever I have issues. If everything works as expected I&#039;ll post what I bought, it should be here tomorrow.</p><p>I soldered pin headers in my V2 in attempt to use a TTL to RS232 USB adapter tha came with my RaspberryPi but it doesn&#039;t support Windows 10. After installing the pin headers the router boots and all the lights come on except for &quot;internet&quot; (currently using it as a WAP) and the unused LAN jacks, but it doesn&#039;t have an IP nor does the WiFi broadcast. TFTP booting doesn&#039;t work either so without a serial cable it&#039;s damn near impossible to figure out what&#039;s going on.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315551">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">anomeome</div>
					<div class="post-datetime">
						18 Mar 2016, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>Re: win10 driver issue. <a href="http://www.ifamilysoftware.com/news37.html">This</a> may help, depending on TTL chip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315594">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">oldmanpapa</div>
					<div class="post-datetime">
						18 Mar 2016, 22:55					</div>
				</div>
				<div class="post-content content">
					<p>@senseless: What are your symptoms? I did the same thing with a brand new router I got off of Amazon yesterday (Archer C7 v2.0 (US)). Flashing sean56&#039;s file worked fine, so I tried flashing it with 15.05, which did not work. Now my router is stuck in a boot loop. I tried the TFTP recovery method with numerous images; the router downloads the image, but then reboots immediately, and is stuck in the loop again.<br />My plan is to solder on a serial connection this weekend the see what&#039;s happening.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315600">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						18 Mar 2016, 23:46					</div>
				</div>
				<div class="post-content content">
					<p>@oldmanpapa</p><p>I have no personal, hands-on experience, but have read a few threads on the boards in the past week or more where a seemingly normal flash of a TP-Link router -- a brand new unit recently purchased -- ended up going wrong, even though it seems the instructions were followed properly.</p><p>Please look over this General Discussion board plus Developers Only, for example.&nbsp; Look for threads where flashes have failed, and <span class="bbu">especially</span> where tftp recovery has failed (even when following instructions carefully).</p><p>I&#039;m <span class="bbu">not</span> really an expert, as I&#039;m fairly new here.</p><p>But I wonder if TP-Link hardware manufactured over the last two, three, four months has introduced changes that are now causing widespread problems with OpenWRT....&nbsp; And what those changes (u-boot, flash partitioning, what else could it be???&nbsp; Experts?) are....&nbsp; NB that this is sheer speculation on my part! <img src="https://forum.openwrt.org/img/smilies/yikes.png" width="15" height="15" alt="yikes" /></p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p315601">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						18 Mar 2016, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>For anyone playing along, please see this post/thread:</p><p><a href="https://forum.openwrt.org/viewtopic.php?pid=315588#p315588">https://forum.openwrt.org/viewtopic.php … 88#p315588</a></p><p>If you&#039;re willing to consider <em>some</em> reddit posters reliable sources, please read:</p><p><a href="https://www.reddit.com/r/openwrt/comments/4aukq9/help_archer_c7_v2_not_reachable_on_19216811_after/d14ihwo">https://www.reddit.com/r/openwrt/commen … er/d14ihwo</a></p><p>If there has been a flash partition change, it&#039;s my understanding that a serial boot log will tell a developer the memory start addresses and sizes.&nbsp; These could be compared with what&#039;s now listed for the model/version in question on its OpenWRT hardware page.&nbsp; HTH.</p><p>Clemmitt</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316017">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">xenith</div>
					<div class="post-datetime">
						21 Mar 2016, 23:55					</div>
				</div>
				<div class="post-content content">
					<p>More info here: <a href="https://forum.openwrt.org/viewtopic.php?pid=316009#p316009">https://forum.openwrt.org/viewtopic.php … 09#p316009</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316035">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">cmsigler</div>
					<div class="post-datetime">
						22 Mar 2016, 02:13					</div>
				</div>
				<div class="post-content content">
					<p>tl;dr -- Newest C7 units have a new flash chip not supported in CC/15.05.x.&nbsp; A trunk build should be installed and is reported working.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316441">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">washer</div>
					<div class="post-datetime">
						24 Mar 2016, 06:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>cmsigler wrote:</cite><blockquote><p>tl;dr -- Newest C7 units have a new flash chip not supported in CC/15.05.x.&nbsp; A trunk build should be installed and is reported working.</p></blockquote></div><p>cmsigler, do you still need to TFTP an older TP-Link firmware over or load DD-WRT first? I&#039;ve tried flashing the trunk build (openwrt-ar71xx-generic-archer-c7-v2-squashfs-factory.bin)from my factory firmware and am still getting an 18005 error, wrong version. </p><p>Is that the right version? Do I need to do anything else first? </p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p316442">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">oneru</div>
					<div class="post-datetime">
						24 Mar 2016, 07:08					</div>
				</div>
				<div class="post-content content">
					<p>Washer, that&#039;s a different issue, try the approach here:&nbsp; <a href="https://forum.openwrt.org/viewtopic.php?pid=316411#p316411">https://forum.openwrt.org/viewtopic.php … 11#p316411</a></p><p>If that doesn&#039;t work, a tftp should work.&nbsp; But yes, use trunk so the newer flash chip will work.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p323916">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">zachary_fields</div>
					<div class="post-datetime">
						15 May 2016, 02:46					</div>
				</div>
				<div class="post-content content">
					<p>I did a little detective work and was able to have luck.</p><p>@sean56 (OP) posted in December 2015 and @senseless ran into trouble on 2016-03-17, the day after they released 15.05.1.</p><p>My steps:<br /></p><ul><li><p>I flashed from the factory version 3.14.3 Build 151014 Rel.49676n to the version mirrored by @sean56</p></li><li><p>I was able to install15.05 from the &quot;<strong><em>Historic Releases</em></strong>&quot; section (<em><a href="http://downloads.openwrt.org/chaos_calmer/15.05/ar71xx/generic/openwrt-15.05-ar71xx-generic-archer-c7-v2-squashfs-factory.bin">http://downloads.openwrt.org/chaos_calm … actory.bin</a></em>).</p></li></ul><p>It worked without any hang-ups.</p>											<p class="post-edited">(Last edited by <strong>zachary_fields</strong> on 15 May 2016, 02:48)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329228">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">jmsnyc</div>
					<div class="post-datetime">
						21 Jun 2016, 01:47					</div>
				</div>
				<div class="post-content content">
					<p>Tried last post .&nbsp; Now can&#039;t connect to router</p>											<p class="post-edited">(Last edited by <strong>jmsnyc</strong> on 21 Jun 2016, 02:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329239">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">hostle19</div>
					<div class="post-datetime">
						21 Jun 2016, 02:58					</div>
				</div>
				<div class="post-content content">
					<p>the issue is the same with all us region tp-link routers with the V3 header... there is a quick dirty solution that seems to work fine with out all the flash this then flash that ... it was posted around the forum someplace ??&nbsp; <br /></p><div class="quotebox"><blockquote><p><strong>SSID SOLUTION</strong> <br />essentially we can type code into the ssid slot to write a little script to the /tmp directory to restart httpd with the -f (basically flash any ??) flag. You will need to type the following cmds into the ssid slot and press the save button after each cmd, the final cmd will run the script. NOTE the ticks surrounding the code are not &#039; (an apostrophe) they are `(a grave or grave accent .. the button proceeding the number 1 on the keyboard)</p><p>Code:</p><p>`echo &quot;httpd -k&quot;&gt; /tmp/s`<br />`echo &quot;sleep 10&quot;&gt;&gt; /tmp/s`<br />`echo &quot;httpd -r&amp;&quot;&gt;&gt; /tmp/s`<br />`echo &quot;sleep 10&quot;&gt;&gt; /tmp/s`<br />`echo &quot;httpd -k&quot;&gt;&gt; /tmp/s`<br />`echo &quot;sleep 10&quot;&gt;&gt; /tmp/s`<br />`echo &quot;httpd -f&quot;&gt;&gt; /tmp/s`<br />`sh /tmp/s`</p><p>be sure to press the save button after each line of code, do not hit enter ... use only the save button. After you have entered and saved the last cmd you may or may not need to refresh the page. After that just load the firmware as usual using the firmware upgrade page and with any luck you should be able to flash the factory bin </p><p>Good luck</p></blockquote></div>											<p class="post-edited">(Last edited by <strong>hostle19</strong> on 21 Jun 2016, 02:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p329246">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">jmsnyc</div>
					<div class="post-datetime">
						21 Jun 2016, 06:11					</div>
				</div>
				<div class="post-content content">
					<p>this wont help as I no longer can access interface... trying to figure out how to tftp</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p331990">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">dzcoup</div>
					<div class="post-datetime">
						17 Jul 2016, 22:45					</div>
				</div>
				<div class="post-content content">
					<p>@jmsnyc I was also having a problem accessing the UI at some point (twice actually) and factory reset didn&#039;t help but a 30-30-30 hard reset fixed it for me...hope it helps.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p339780">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">nawazshahid</div>
					<div class="post-datetime">
						30 Sep 2016, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>Please share config file &quot;dhcp-boot&quot; barrier breaker openwrt for mr-tplink 3420 </p><p>I have got bricked my router tplink 3420 v-2 while installing Barrier breaker to it, It has only power on and system LED blinking, I checked for eth0 packets it says<br />&quot;ARP, Request who-has 192.168.0.66 tell 192.168.0.86, length 46&quot;</p><p>when sniffed udp packets it says<br />&quot;IP 0.0.0.0.bootpc &amp;gt; 255.255.255.255.bootps: BOOTP/DHCP, Request from&amp;nbsp;(oui Unknown), length 300&quot;<br />I tried tftp server with recovery file, ftp client method to put firmware, but no success, Kindly help me to solve it , I need it urgently back to work?<br />It doesnot ask for any recovery file specified name. Can anyone tell me what is the boot file name for barrier breaker 14.07 for mr3420 ?so that i may rename and flash it</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>