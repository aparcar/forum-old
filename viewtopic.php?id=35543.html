<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Adjusting antenna</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 31 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p161112">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						16 Mar 2012, 21:13					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks,</p><p>I want to connect my old WRT54GS (running on Attitude Adjustment) with another wireless network about 70m away. One of the used antennas is a <span class="postimg"><img src="http://www.enigmatic-consulting.com/Communications_articles/Radio_links_part2/cantenna.gif" alt="http://www.enigmatic-consulting.com/Communications_articles/Radio_links_part2/cantenna.gif" /></span> waveguide like this (from <a href="http://www.enigmatic-consulting.com/Communications_articles/Radio_links_part2/Radios2_antennas.html">here</a>).</p><p>My question:<br />I have to adjust the antenna very accurate, so I need some kind of lifeview of signal quality. Is there a package with that I can do this job from within LuCi?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161117">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						16 Mar 2012, 23:05					</div>
				</div>
				<div class="post-content content">
					<p>I don’t know how often the Luci XHR updates. If you need it faster you can loop this on the shell:</p><p>while true; do iwinfo wl0 assoclist; sleep 1; done</p><p>or info instead of assoclist.</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 16 Mar 2012, 23:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161201">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						17 Mar 2012, 21:11					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, but my problem is that I have no clue about the general procedure how to do so. CLI is no problem, but how can I get a fast updated display about the signal-quality from the want-to-use net?<br />I can receive over 25 different networks here, so I have to lock the unit to the ssid I want to use and then adjust the antenna while measuring and getting the signal-quality near realtime.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161202">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						17 Mar 2012, 21:17					</div>
				</div>
				<div class="post-content content">
					<p>Probably <strong>wavemon</strong>.&nbsp; I never used in a router but in a PC it works quite fine for adjusting the wifi position.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161204">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						17 Mar 2012, 21:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>Thank you, but my problem is that I have no clue about the general procedure how to do so. CLI is no problem, but how can I get a fast updated display about the signal-quality from the want-to-use net?</p></blockquote></div><p>So, your cantenna device is the client? I don’t want to tear done my network, so this is from my laptop, but a oneliner along those lines works on your box. Something like this is what you need, no? The thing is it depends on the driver. So iwinfo is probably what you want to use instead of iw. Please try. </p><p>Just check iwinfo wl0 &lt;subcommand&gt;.</p><p><span class="postimg"><img src="http://i.imgur.com/bNJVf.gif" alt="http://i.imgur.com/bNJVf.gif" /></span></p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 17 Mar 2012, 21:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161302">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						19 Mar 2012, 00:43					</div>
				</div>
				<div class="post-content content">
					<p>Ok. wavemon works, your command line also, but the problem is that I cannot see the signal quality unless I am associated to the AP. That&#039;s a problem as I need this information to adjust the antenna.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161327">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">3zl</div>
					<div class="post-datetime">
						19 Mar 2012, 10:13					</div>
				</div>
				<div class="post-content content">
					<p>try this nice package </p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Horst wireless monitor</p><p> <a href="http://br1.einfach.org/tech/horst/">http://br1.einfach.org/tech/horst/</a></p><p>regards<br />3zl</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161379">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						19 Mar 2012, 16:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>Ok. wavemon works, your command line also, but the problem is that I cannot see the signal quality unless I am associated to the AP. That&#039;s a problem as I need this information to adjust the antenna.</p></blockquote></div><p>Okay. Then the only way to get the signal strength is scanning. And a scan is slow because it has to hop over all channels. In ‹iw› you can restrict the scan to the interesting channels and networks</p><div class="codebox"><pre><code>    iw dev &lt;devname&gt; scan [-u] [freq &lt;freq&gt;*] [ies &lt;hex as 00:11:..&gt;] [ssid &lt;ssid&gt;*|passive]
        Scan on the given frequencies and probe for the given SSIDs
        (or wildcard if not given) unless passive scanning is requested.
        If -u is specified print unknown data in the scan results.
        Specified (vendor) IEs must be well-formed.</code></pre></div><p>Something like this<br /></p><div class="codebox"><pre><code>while true; do clear; iw wlan0 scan dump | grep &quot;^BSS\|SSID\|signal\|freq&quot;; iw wlan0 scan trigger freq 2427; sleep 1; done</code></pre></div><p>But that only works for mac80211 based drivers. What is the driver you use?</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 19 Mar 2012, 17:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161396">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						19 Mar 2012, 18:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>3zl wrote:</cite><blockquote><p>try this nice package </p><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Horst wireless monitor</p><p> <a href="http://br1.einfach.org/tech/horst/">http://br1.einfach.org/tech/horst/</a></p></blockquote></div><p>That’s interesting and would look more intuitive. Nice tool. But it’s semi-broken because it uses the deprecated WEXT stuff.</p><p>With a few filters you can get 100ms updates for your target channel (52 below) and AP (c4:3d:c7:xx:xx:xx):</p><div class="codebox"><pre><code>?????????? Channel Settings ???????????
?                                     ?
? a: [ ] Automatically change channel ?
? d: Channel dwell time: 250 ms       ?
? u: Upper channel limit: 0           ?
?                                     ?
? m: Manually change channel: 52      ?
?                                     ?
?                                     ?
????????[ Press key or ENTER ]?????????


?????????????????? Edit Packet Filter ???????????????????
?                                                       ?
? Show these Packet Types                               ?
?                                                       ?
? m: [ ] MANAGEMENT FRAMES    BSSID                     ?
? b: [*] Beacons              s: [*] c4:3d:c7:xx:xx:xx  ?
? p: [ ] Probe Req/Resp                                 ?
? a: [ ] Association          Show only these           ?
? u: [ ] Authentication       Source MAC ADDRESSES      ?
?                             1: [ ] 00:00:00:00:00:00  ?
? c: [ ] CONTROL FRAMES       2: [ ] 00:00:00:00:00:00  ?
? r: [ ] CTS/RTS              3: [ ] 00:00:00:00:00:00  ?
? k: [ ] ACK                  4: [ ] 00:00:00:00:00:00  ?
?                             5: [ ] 00:00:00:00:00:00  ?
? d: [ ] DATA FRAMES          6: [ ] 00:00:00:00:00:00  ?
? n: [ ] Null Data            7: [ ] 00:00:00:00:00:00  ?
? R: [ ] ARP                  8: [ ] 00:00:00:00:00:00  ?
? P: [ ] ICMP/PING            9: [ ] 00:00:00:00:00:00  ?
? I: [ ] IP                                             ?
? U: [ ] UDP                  o: [ ] All Filters Off    ?
? T: [ ] TCP                                            ?
? O: [ ] OLSR                                           ?
? B: [ ] BATMAN                                         ?
? M: [ ] MeshCruzer                                     ?
?                                                       ?
?????????????????[ Press key or ENTER ]??????????????????


??????????????????????????? Signal/Noise/Rate History ??????????????????????????
?-30?                                                                   Signal ?
?dBm?                                                                    Noise ?
?-40?                                                              Packet Type ?
?   ?                                                                     Rate ?
?   ?########### ## ##### ##                                         #  ###  ##?
?-50?#######################  #                               # # #  ##########?
?   ?############################                            ##################?
?   ?############################                     ###  ####################?
?-60?#########################################   ##############################?
?   ?##########################################################################?
?   ?##########################################################################?
?-70?##########################################################################?
?   ?##########################################################################?
?   ?##########################################################################?
?-80?##########################################################################?
?   ?##########################################################################?
?   ?##########################################################################?
?-90?##########################################################################?
?   ?##########################################################################?
?-99?##########################################################################?
????????????????????????????????????????????????????????????????????????????????
?TYP?BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB?
????????????????????????????????????????????????????????????????????????????????
?54M?                                                                          ?
?48M?                                                                          ?
?36M?                                                                          ?
?24M?                                                                          ?
?18M?                                                                          ?
?12M?                                                                          ?
?11M?                                                                          ?
? 9M?                                                                          ?
? 6M?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?
?5.M?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?
? 2M?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?
? 1M?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx?
????????????????????????????????????????????????????????????????????????????????
Quit Pause Reset Hist ESSID Stats Spec Filt Chan ?      |=|F|Ch52|wlan0|18:00:23</code></pre></div><p>The dip in the above History plot comes from me holding a sheet of tin foil over my laptop’s lid where the antennas are.</p>											<p class="post-edited">(Last edited by <strong>towolf</strong> on 20 Mar 2012, 16:39)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161400">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						19 Mar 2012, 19:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>In ‹iw› you can restrict the scan to the interesting channels and networks</p></blockquote></div><p>Seems very interesting!</p><div class="quotebox"><blockquote><p>But that only works for mac80211 based drivers. What is the driver you use?</p></blockquote></div><p>How can I figure out this? It&#039;s a Linksys WRT54GS.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161405">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						19 Mar 2012, 20:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><div class="quotebox"><cite>towolf wrote:</cite><blockquote><p>In ‹iw› you can restrict the scan to the interesting channels and networks</p></blockquote></div><p>Seems very interesting!</p><div class="quotebox"><blockquote><p>But that only works for mac80211 based drivers. What is the driver you use?</p></blockquote></div><p>How can I figure out this? It&#039;s a Linksys WRT54GS.</p></blockquote></div><p>What’s the name of you wireless device? wl0, wlan0? You can also install the package ‹iwinfo›, then ‹iwinfo [wl0|wlan0] info›.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161541">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">naturelle</div>
					<div class="post-datetime">
						20 Mar 2012, 19:06					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s wlan0</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161559">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">towolf</div>
					<div class="post-datetime">
						20 Mar 2012, 22:20					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>naturelle wrote:</cite><blockquote><p>It&#039;s wlan0</p></blockquote></div><p>Ja, so you can use the one-liner loop I gave or just install horst. Horst looks very nice, because it’s updates are quite fast.</p><p>Just lock it onto your target channel and filter by the targets MAC address and only show beacons. Then switch to history view. You should get a channel and AP specific graph that updates 10 times per second (100ms beaconing interval).</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>