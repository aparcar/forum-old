<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> ifconfig dropped packets</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p372032">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						12 Feb 2018, 06:23					</div>
				</div>
				<div class="post-content content">
					<p>On my router (MT7620A) I see quite a lot of dropped packets on the WAN-interface:<br />eth0.2&nbsp; &nbsp; Link encap:Ethernet&nbsp; HWaddr ....<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; inet addr:192.168.15.2&nbsp; Bcast:192.168.15.255&nbsp; Mask:255.255.255.0<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; RX packets:3250663 errors:0 dropped:183244 overruns:0 frame:0</p><p>I suspect, it might be correlated to these erros, I also see quite often:<br />[854522.540000] ralink_soc_eth 10100000.ethernet eth0: port 2 link down<br />[854524.500000] ralink_soc_eth 10100000.ethernet eth0: port 2 link up (100Mbps/Full duplex)</p><p>In logread, I also have quite a few other &quot;strange&quot; errors which might point to some<br />packet corruption.</p><p>To start digging into details: <br />How to figure out, which/why packets are dropped on the interface ?</p><p>And how to figure out, what might be reason of &quot;link down&quot; ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372038">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">ninjaef</div>
					<div class="post-datetime">
						12 Feb 2018, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>Goto thinkbroadband.com<br />Setup a user account<br />Then create a Broadband Quality Monitor (BQM) on your WAN IP. You will need to create/update the monitor if your ISP assigns you dynamic IP<br />Then, it will graph packet loss and latency by hour by day. This will give you an indication whether you are a victim of congestion or something else. </p><p>Other fault areas could be:<br />* Modem/Router&nbsp; CPU is maxing out.<br />* Bufferbloat in your ISP (traffic shaping/buffer too large) - check latency isnt over 200ms when maxing out downstream<br />*&nbsp; VDSL upstream speed&nbsp; maxed out.</p><p>Your ISP should be responsible for fixing certain types of probs but of course in terms of congestion I doubt they will because that would require them to increase their bandwidth (=investment). Another ISP might have less congestion around certain times but quite how you would know this prior to contracting with them ,I dont know.</p>											<p class="post-edited">(Last edited by <strong>ninjaef</strong> on 12 Feb 2018, 11:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372051">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						12 Feb 2018, 14:53					</div>
				</div>
				<div class="post-content content">
					<p>Your WAN interface has a private IP address, so it looks like it is connected to an upstream router, is it?<br />Could it be a problem with the ethernet wire, or the upstream router?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372058">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">augustus_meyer</div>
					<div class="post-datetime">
						12 Feb 2018, 17:06					</div>
				</div>
				<div class="post-content content">
					<p>Upstream router: yes. <br />Wiring problem: Very unlikely, as I have several of these routers, all with similar symptoms. <br />My first idea from old experience: Auto-negotiation might be faulty. But ethtool does not like the device type,<br />as a (supplier-provided, customized) CC-version running.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p372062">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						12 Feb 2018, 17:55					</div>
				</div>
				<div class="post-content content">
					<p>In this case, I would consider filing a bug about the driver for the ethernet chipset.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>