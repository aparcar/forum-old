<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Developing Support for TPLINK WDR4900</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 5 Oct 2014 and 4 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 19 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=17.html">17</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=18.html">18</a></li><li class="pagination-current"><span>19</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=21.html">21</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p224578">
				<div class="post-metadata">
					<div class="post-num">Post #451</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						5 Feb 2014, 01:07					</div>
				</div>
				<div class="post-content content">
					<p>39340 is still stable after 2 days, 18:56,&nbsp; load average: 0.26, 0.44, 0.35 (most of that time was at heavy load doing first-time syncs for two time machines)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224586">
				<div class="post-metadata">
					<div class="post-num">Post #452</div>
					<div class="post-author">voodoo6000</div>
					<div class="post-datetime">
						5 Feb 2014, 08:20					</div>
				</div>
				<div class="post-content content">
					<p>wdr 4900 v2 ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224589">
				<div class="post-metadata">
					<div class="post-num">Post #453</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						5 Feb 2014, 08:55					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>voodoo6000 wrote:</cite><blockquote><p>wdr 4900 v2 ?</p></blockquote></div><p>v1.x, using the MPC85xx trunk.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224592">
				<div class="post-metadata">
					<div class="post-num">Post #454</div>
					<div class="post-author">rapzak</div>
					<div class="post-datetime">
						5 Feb 2014, 10:17					</div>
				</div>
				<div class="post-content content">
					<p>flippant,</p><p>What about Wifi connection?</p><p>I updated mine to the newest yesterday, and still got an issue with the wifi accesspoint drops out, and don&#039;t come alive again <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p><p>Do you have a link to the version you are using?</p><p>Kasper</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224593">
				<div class="post-metadata">
					<div class="post-num">Post #455</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						5 Feb 2014, 10:20					</div>
				</div>
				<div class="post-content content">
					<p>I got the newest trunk version a while ago. I&#039;ll check and see if I can find it.</p><p>My wi-fi is completely stable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224594">
				<div class="post-metadata">
					<div class="post-num">Post #456</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						5 Feb 2014, 10:22					</div>
				</div>
				<div class="post-content content">
					<p>I think I got it straight off the web. Sorry.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224600">
				<div class="post-metadata">
					<div class="post-num">Post #457</div>
					<div class="post-author">johanrd</div>
					<div class="post-datetime">
						5 Feb 2014, 12:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just upgraded to OpenWrt Barrier Breaker r39457 and my Wifi wont start.</p><p>In Luci I see</p><p>Signal: 0 dBm / Noise: 0 dBm<br />0%&nbsp; &nbsp; SSID: TP_5 | Mode: Client<br />Wireless is disabled or not associated</p><p>The config says its &quot;Mode AP&quot;...</p><p>Any ideas?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224601">
				<div class="post-metadata">
					<div class="post-num">Post #458</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						5 Feb 2014, 12:06					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve had some trouble getting both radios to work. I had to disassociate them from the interface, then set them up, and then put them back on the interface.</p><p>It&#039;s more a bug than anything else, especially if you&#039;re using Luci.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224604">
				<div class="post-metadata">
					<div class="post-num">Post #459</div>
					<div class="post-author">johanrd</div>
					<div class="post-datetime">
						5 Feb 2014, 12:21					</div>
				</div>
				<div class="post-content content">
					<p>Thanks Flippant, I&#039;m playing around with the settings now and have managed to get one of the radios back... I&#039;ll check to see if its the settings in the restore from the old settings.</p><p>The new install had Radio2 &amp; 3 (SSID: OpenWrt) which seems to work if I manually issue:</p><p>/sbin/wifi up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224719">
				<div class="post-metadata">
					<div class="post-num">Post #460</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						7 Feb 2014, 03:57					</div>
				</div>
				<div class="post-content content">
					<p>Still going strong, with ~120gb of torrents downloaded, as well as two entire time machine backups done:</p><div class="codebox"><pre><code>BusyBox v1.19.4 (2014-01-31 03:11:35 PST) built-in shell (ash)
Enter &#039;help&#039; for a list of built-in commands.

  _______                     ________        __
 |       |.-----.-----.-----.|  |  |  |.----.|  |_
 |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
 |_______||   __|_____|__|__||________||__|  |____|
          |__| W I R E L E S S   F R E E D O M
 -----------------------------------------------------
 BARRIER BREAKER (Bleeding Edge, r39430)
 -----------------------------------------------------
  * 1/2 oz Galliano         Pour all ingredients into
  * 4 oz cold Coffee        an irish coffee mug filled
  * 1 1/2 oz Dark Rum       with crushed ice. Stir.
  * 2 tsp. Creme de Cacao
 -----------------------------------------------------
root@TheRouter:~# uptime
 12:58:58 up 4 days, 21:46,  load average: 0.05, 0.20, 0.26
root@TheRouter:~# </code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224728">
				<div class="post-metadata">
					<div class="post-num">Post #461</div>
					<div class="post-author">jamu</div>
					<div class="post-datetime">
						7 Feb 2014, 07:57					</div>
				</div>
				<div class="post-content content">
					<p>Flippant, thanks, that&#039;s great to hear. Any ideas which commit(s) might have contributed to the resolution? Are you testing over wifi, or lan?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224729">
				<div class="post-metadata">
					<div class="post-num">Post #462</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						7 Feb 2014, 08:05					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m using the wi-fi. There&#039;s nothing connected through Ethernet at the moment.</p><p>I have no idea what caused the sudden resolution of all my woes, but I&#039;m happy that it&#039;s here.</p><p>Now, on the other hand, I am petrified to update.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224734">
				<div class="post-metadata">
					<div class="post-num">Post #463</div>
					<div class="post-author">nimo</div>
					<div class="post-datetime">
						7 Feb 2014, 10:31					</div>
				</div>
				<div class="post-content content">
					<p>All of you who report success with WDR4900 is that with v1 or is there anyone who have managed to get v2 working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224736">
				<div class="post-metadata">
					<div class="post-num">Post #464</div>
					<div class="post-author">owagner</div>
					<div class="post-datetime">
						7 Feb 2014, 10:36					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m currently (r39518) having two issues:</p><p>-- hostapd for second radio (2.4Ghz) dies on boot</p><p>[&nbsp; &nbsp;36.273520] hostapd[2464]: unhandled signal 11 at 00000000 nip 1003cb04 lr 1003cf70 code 30001</p><p>A &quot;wifi up&quot; brings it up again fine afterwards, though</p><p>-- the 2.4Ghz radio stopped supporting channels 12 and 13, even when setting the regdomain to &quot;DE&quot; or with the world &quot;00&quot; regdb entry changed to support them. It&#039;s simply missing from the capabilities.</p><p>This has started some revisions ago, not sure yet exactly when.</p><p>Best Regards,<br />Olli</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224738">
				<div class="post-metadata">
					<div class="post-num">Post #465</div>
					<div class="post-author">owagner</div>
					<div class="post-datetime">
						7 Feb 2014, 10:52					</div>
				</div>
				<div class="post-content content">
					<p>As a test, I&#039;ve now patched the US regdb entry as well, and now both 12+13 are back and hostapd isn&#039;t crashing anymore.</p><p>Seems like CONFIG_ATH_USER_REGD is somehow being ignored/causing issues?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224775">
				<div class="post-metadata">
					<div class="post-num">Post #466</div>
					<div class="post-author">maxpayne911</div>
					<div class="post-datetime">
						7 Feb 2014, 18:28					</div>
				</div>
				<div class="post-content content">
					<p>hi All</p><p>I bought a WDR 4900 ,( V1.3 EU )and setup it for my use like specific IP, virtual servers,.. but the features are bad...</p><p>to go from tp-link firmware&nbsp; to openwrt, did you reset the router with the 30/30/30 method ?<br />I read <a href="http://wiki.openwrt.org/toh/tp-link/tl-wdr4900">http://wiki.openwrt.org/toh/tp-link/tl-wdr4900</a> it&#039;s not mentioned but ... feedbacks from experienced users is welcome :-)</p><p>best regards,<br />Brice</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224822">
				<div class="post-metadata">
					<div class="post-num">Post #467</div>
					<div class="post-author">marcos1988</div>
					<div class="post-datetime">
						8 Feb 2014, 13:14					</div>
				</div>
				<div class="post-content content">
					<p>Running r39385 for some day now, with 2TB Harddisk at USB. uShare media server and Samba. I&#039;m having no problems at all. My internet connection is 150 Mbit/s / 15 Mbit/s, running full speed with no freezes. It seems that OpenWRT has the major issues finally sorted out! :-)</p><p>@maxpayne911 to go from TP-Link firmware to OpenWRT, you can download the openwrt-mpc85xx-generic-tl-wdr4900-v1-squashfs-factory.bin file, and flash it via the normal way in the Web Interface of the TP-Link firmware. Be advised that you have no web interface installed by default in trunk releases. Hope it helps!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224836">
				<div class="post-metadata">
					<div class="post-num">Post #468</div>
					<div class="post-author">Dylantje</div>
					<div class="post-datetime">
						8 Feb 2014, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Is there a list of working packages???</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224860">
				<div class="post-metadata">
					<div class="post-num">Post #469</div>
					<div class="post-author">marcos1988</div>
					<div class="post-datetime">
						8 Feb 2014, 22:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Dylantje wrote:</cite><blockquote><p>Is there a list of working packages???</p></blockquote></div><p><a href="http://downloads.openwrt.org/snapshots/trunk/mpc85xx/packages">http://downloads.openwrt.org/snapshots/ … x/packages</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224876">
				<div class="post-metadata">
					<div class="post-num">Post #470</div>
					<div class="post-author">jamu</div>
					<div class="post-datetime">
						9 Feb 2014, 08:15					</div>
				</div>
				<div class="post-content content">
					<p>@marcos1988, thanks, that&#039;s encouraging to hear. Although browsing throw the changesets between r39365 (which was unstable for me, and froze/paused frequently) and r39385, I can&#039;t really see anything that should have fixed this for us.</p><p>Have you been testing over wifi or lan?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224938">
				<div class="post-metadata">
					<div class="post-num">Post #471</div>
					<div class="post-author">Bourdieu</div>
					<div class="post-datetime">
						9 Feb 2014, 20:36					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I am on r39487, and I found that this revision suffers from performance problems.</p><p>When I run an iperf -c testdebit.info -i 2 -t 20 -r on my desktop behind the WDR4900, I get 200 Mbits upload and the router barely reaches 2% CPU load which is what&#039;s expected.</p><p>When iperf reaches the download part of the test, I &quot;only&quot; get 350Mbits and the router load rises to 80% or more. The culprits is for the most part ksoftirdq/0 (80% of cpu load) and 3-4 kworkers processes (3-9 % of cpu load each).</p><p>If I perform the same test without the router between my desktop and internet I get 900Mbits of download.</p><p>So it seems something is loading the cpu more than it should at high download rates.</p><p>I had the same results with an older revision dating back to september.</p><p>Does somebody know where this behavior could come from ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p224949">
				<div class="post-metadata">
					<div class="post-num">Post #472</div>
					<div class="post-author">Dylantje</div>
					<div class="post-datetime">
						9 Feb 2014, 21:42					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>marcos1988 wrote:</cite><blockquote><div class="quotebox"><cite>Dylantje wrote:</cite><blockquote><p>Is there a list of working packages???</p></blockquote></div><p><a href="http://downloads.openwrt.org/snapshots/trunk/mpc85xx/packages">http://downloads.openwrt.org/snapshots/ … x/packages</a></p></blockquote></div><p>Thanks Marcos...<br />I see this list earlyer...</p><p>Only all this package are not working.</p><p>An example tc is not working..</p><p>Or is there a other way to get a tc working?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225054">
				<div class="post-metadata">
					<div class="post-num">Post #473</div>
					<div class="post-author">eximido</div>
					<div class="post-datetime">
						11 Feb 2014, 09:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Bourdieu wrote:</cite><blockquote><p>So it seems something is loading the cpu more than it should at high download rates.</p><p>I had the same results with an older revision dating back to september.</p><p>Does somebody know where this behavior could come from ?</p></blockquote></div><p>No, it&#039;s not an issue. <br />All the routing in OpenWrt is made in software, so high cpu load by ksoftirqd is expected at high download rates. Many hi-end devices have an additional hardware to offload such traffic and allow higher throughput, and there&#039;s one in WDR4900 as well. However OpenWrt is lacking support for any hardware NAT offloading features. It&#039;s simply not supported at all. For all the capable devices. And no one is working on it. See <a href="https://dev.openwrt.org/ticket/11779">ticket #11779</a>.</p><div class="quotebox"><cite>Dylantje wrote:</cite><blockquote><p>Only all this package are not working.</p><p>An example tc is not working..</p><p>Or is there a other way to get a tc working?</p></blockquote></div><p>They ARE working.</p><p>However those packages are automatically rebuilt by regular basis. If a package contains a kernel module, it will be marked as compatible ONLY with openwrt image it was built with. It means that if you flash your device with firmware built yesterday and then attempt to install a package with a kernel module which was built today then opkg will complain about package incompatibility.</p><p>Your options are as follows:<br />a.) You may flash new openwrt image and download ALL the packages from that build to your computer. Then install them from your computer, not from openwrt repository.<br />b.) You may flash new openwrt image and install all the packages you need from openwrt repository on the same day. If (when) you need to install a new package later, make a whole firmware upgrade along with it.<br />c.) Use an option for opkg to make it not check for compatibility of the packages you install. It will work most of the time (if kernel version doesn&#039;t change). However be prepared that you may break your openwrt installation so that failsafe mode might be required to restore your device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225137">
				<div class="post-metadata">
					<div class="post-num">Post #474</div>
					<div class="post-author">flippant</div>
					<div class="post-datetime">
						12 Feb 2014, 12:49					</div>
				</div>
				<div class="post-content content">
					<div class="codebox"><pre><code>21:52:19 up 10 days,  6:39,  load average: 1.36, 1.27, 0.84</code></pre></div><p>Still going strong!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p225310">
				<div class="post-metadata">
					<div class="post-num">Post #475</div>
					<div class="post-author">maxpayne911</div>
					<div class="post-datetime">
						14 Feb 2014, 15:12					</div>
				</div>
				<div class="post-content content">
					<p>I migrated from tplink firmware to OpenWrt Barrier Breaker r39574 / LuCI Trunk (svn-r9953) , <br />uptime&nbsp; : 1d 16h 23m 6s</p><p>following Eximido post, I Grabbed all packages at the time as I updated to install package with same kernel version</p><p>I have an internet connection at arround 10 Mbit, no issue so far&nbsp; with 1 laptop on wifi 5Ghz ( arround 17MB/sec), 2 on 2,4G (around 3/4 MB/Sec) for my wife &amp; her sister <br />my gaming pc &amp; my nas on&nbsp; Cisco GB switch connected to the WDR 4900.</p><p>really, I like openwrt features ( firewall/settings applied without reboot/vlan support/multil ssid/etc..)<br />hope stability will stay as it is </p><p>Brice</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 19 of 35</div><nav><ul><li><a href="viewtopic.php%3Fid=42062&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=17.html">17</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=18.html">18</a></li><li class="pagination-current"><span>19</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=20.html">20</a></li><li><a href="viewtopic.php%3Fid=42062&amp;p=21.html">21</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=42062&amp;p=35.html">35</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>