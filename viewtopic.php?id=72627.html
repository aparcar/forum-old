<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Novatel USB730L</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p368664">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						22 Nov 2017, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>Hey all,</p><p>I am working with a Novatel USB730L LTE modem on Barrier Breaker running on custom hardware, and long story short, I can&#039;t get it working. It shows up as a USB device just fine but seems to crash when enumerating the ethernet device. The previous model of the modem (USB620L) worked after I changed the bConfigurationValue to 4. However, when I try that with the new modem I get an &quot;Invalid argument&quot; message. Here is the dmesg for the old modem</p><div class="codebox"><pre><code>[  228.480000] usb 1-1: new high-speed USB device number 2 using ehci-platform
[  255.030000] usb 1-1: USB disconnect, device number 2
[  277.870000] usb 1-1: new high-speed USB device number 3 using ehci-platform
[  278.060000] cdc_ether 1-1:1.0 eth2: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 00:15:ff:16:28:90</code></pre></div><p>228 is where I plugged the device in, 255 is when my script noticed it and changed the configurationValue, 277/278 is when it came back in the new mode and starts working.</p><p>And here is the dmesg for the new one:<br /></p><div class="codebox"><pre><code>[  553.920000] usb 1-1: USB disconnect, device number 3
[  581.600000] usb 1-1: new high-speed USB device number 4 using ehci-platform
[  591.590000] usb 1-1: USB disconnect, device number 4
[  592.220000] usb 1-1: new high-speed USB device number 5 using ehci-platform
[  592.400000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 62:19:5f:2d:66:65
[  602.180000] usb 1-1: USB disconnect, device number 5
[  602.180000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  602.840000] usb 1-1: new high-speed USB device number 6 using ehci-platform
[  612.800000] usb 1-1: USB disconnect, device number 6
[  613.440000] usb 1-1: new high-speed USB device number 7 using ehci-platform
[  613.630000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 2e:fc:a9:5c:2f:fe
[  623.400000] usb 1-1: USB disconnect, device number 7
[  623.400000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  624.060000] usb 1-1: new high-speed USB device number 8 using ehci-platform
[  634.010000] usb 1-1: USB disconnect, device number 8
[  634.650000] usb 1-1: new high-speed USB device number 9 using ehci-platform
[  634.860000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, c6:4c:39:91:8e:c2
[  644.600000] usb 1-1: USB disconnect, device number 9
[  644.610000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  645.270000] usb 1-1: new high-speed USB device number 10 using ehci-platform
[  655.220000] usb 1-1: USB disconnect, device number 10
[  655.860000] usb 1-1: new high-speed USB device number 11 using ehci-platform
[  656.050000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, ae:56:ee:5a:2e:85
[  665.820000] usb 1-1: USB disconnect, device number 11
[  665.820000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  666.480000] usb 1-1: new high-speed USB device number 12 using ehci-platform
[  676.430000] usb 1-1: USB disconnect, device number 12
[  677.070000] usb 1-1: new high-speed USB device number 13 using ehci-platform
[  677.260000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 16:f0:9f:ea:f6:8c
[  687.030000] usb 1-1: USB disconnect, device number 13
[  687.030000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  688.140000] usb 1-1: new high-speed USB device number 14 using ehci-platform</code></pre></div><p>It iterates 5 times like this every time I plug it in and then just waits...</p><p>All drivers seem to be loaded, and I modded the option.ko drive to add some debug code and that doesn&#039;t seem to be crashing. Is there somewhere else I should look for a bug or some manual configuration I can do on the configuration/interface descriptors?</p><p>Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368667">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						23 Nov 2017, 01:58					</div>
				</div>
				<div class="post-content content">
					<p>The configuration for enterprise mode in 730L is 3 and not 4 as in 620L.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368668">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						23 Nov 2017, 02:30					</div>
				</div>
				<div class="post-content content">
					<p>It could be overloading the USB port&#039;s power supply when it turns on its radio transmitter to sign on the network.&nbsp; Try connecting through a powered hub.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368691">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						23 Nov 2017, 06:31					</div>
				</div>
				<div class="post-content content">
					<p>Jonny<br /></p><div class="codebox"><pre><code>root@OpenWrt:/sys/bus/usb/devices# echo 3 &gt; 1-1/bConfigurationValue
ash: write error: Invalid argument
root@OpenWrt:/sys/bus/usb/devices#</code></pre></div><p>Could it be writing it as an ascii value? I don&#039;t have to do anything special to send the 4 for the 620...</p><p>mk<br />good though! I&#039;ll track down a hub tomarow and let you know, thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368752">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						24 Nov 2017, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>No luck on the powered hub. As I remember the routers usb power is actually connected directly the main power rain (bad design, I know). And the router is powered off a 2amp cellphone charger, so the modem should have plenty of power.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368756">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						24 Nov 2017, 17:12					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JPetersonVNL wrote:</cite><blockquote><p>the modem should have plenty of power.</p></blockquote></div><p>Have you measured the current draw? Just to know, instead of believing.<br />The small &quot;USB doctor&quot; or &quot;USB ammeter&quot; devices are relatively cheap and useful.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368776">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						25 Nov 2017, 05:13					</div>
				</div>
				<div class="post-content content">
					<p>&quot;new high-speed USB device number x using ehci-platform&quot;<br />&quot;new high-speed USB device number x+1 using ehci-platform&quot;<br />&quot;new high-speed USB device number x+2 using ehci-platform&quot;</p><p>and so on is a typical sign of not enough power for the device.<br />Voltage drop causes the device to reset itself thereby falling off the usb bus and then reappear a moment later.</p><p>I&#039;d guess that USB730L draws 1 ampere or more just when connecting to the tower.</p><p>What make/model of router is it connected to?</p>											<p class="post-edited">(Last edited by <strong>JonnyM</strong> on 25 Nov 2017, 05:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368908">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						27 Nov 2017, 19:00					</div>
				</div>
				<div class="post-content content">
					<p>Sorry guys, holidays have kept me out of the office. I hooked my fluke up to it and its only drawing 70ma, I saw it spike to 100 briefly. These measurements were taken on an Ubuntu box (which the modem does work on) during and after usb negotiation.</p><div class="quotebox"><blockquote><p>What make/model of router is it connected to?</p></blockquote></div><p>Its custom hardware from China, I don&#039;t think it even has a name yet.</p><p>On the Ubuntu box, I noticed it was showing up as an HID device so I added HID support to the router and here is what dmesg looks like now:<br /></p><div class="codebox"><pre><code>[  322.740000] usb 1-1: new high-speed USB device number 23 using ehci-platform
[  322.910000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 4e:ec:be:50:35:14
[  322.950000] hid-generic 0003:1410:9030.0016: hiddev0,hidraw0: USB HID v1.01 Device [Novatel Wireless MiFi USB730L] on usb-ehci-platform-1/input2
[  332.690000] usb 1-1: USB disconnect, device number 23
[  332.700000] cdc_ether 1-1:1.0 usb0: unregister &#039;cdc_ether&#039; usb-ehci-platform-1, CDC Ethernet Device
[  333.810000] usb 1-1: new high-speed USB device number 24 using ehci-platform
[  334.010000] hid-generic 0003:1410:9030.0017: hiddev0,hidraw0: USB HID v1.01 Device [Novatel Wireless MiFi USB730L] on usb-ehci-platform-1/input2
[  450.200000] usb 1-1: USB disconnect, device number 24</code></pre></div><p>I also noticed that the 620L&nbsp; says &quot;eth2&quot; in the dmesg <br /></p><div class="codebox"><pre><code>cdc_ether 1-1:1.0 eth2: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 00:15:ff:16:28:90</code></pre></div><p>Where the 730L says &quot;usb0&quot;<br /></p><div class="codebox"><pre><code> cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 4e:ec:be:50:35:14</code></pre></div><p>And on the ubuntu box, the ifconfig name looks weird:<br /></p><div class="codebox"><pre><code>enp0s20f0u2 Link encap:Ethernet  HWaddr 06:24:23:1e:f9:6d</code></pre></div><p>if eno and eth are ethernet devices is enp something else? Maybe this modem isn&#039;t actually emulation an ethernet port but something else?</p><p>Anyways, Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368933">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						28 Nov 2017, 00:47					</div>
				</div>
				<div class="post-content content">
					<p>enp is the new desktop Linux convention for naming interfaces.&nbsp; &nbsp;So it is an Ethernet-like interface.&nbsp; The name is supposed to stay consistent as you add and remove hardware from the system.</p><p>The repeated &quot;USB disconnect&quot; almost certainly means that some sort of hardware crash is occurring.&nbsp; You would see the same &quot;USB disconnect&quot; then &quot;unregister CDC&quot; messages upon physically unplugging the device.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368971">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						28 Nov 2017, 17:31					</div>
				</div>
				<div class="post-content content">
					<p>But I see the same disconnect reconnect with the 620 and also with the 730 on the ubuntu box. It only does it once, and it happens after I perform the modeswitch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368977">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						28 Nov 2017, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>Most CDC devices do not even require modeswitch.&nbsp; The ROMdisk and ethernet interfaces can stay active simultaneously.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368979">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						28 Nov 2017, 23:14					</div>
				</div>
				<div class="post-content content">
					<p>Well to confirm it isn&#039;t a power issue, I powered the modem independent of the router, with a 10 amp PS... still the same <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p368983">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						29 Nov 2017, 03:23					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>mk24 wrote:</cite><blockquote><p>Most CDC devices do not even require modeswitch.&nbsp; The ROMdisk and ethernet interfaces can stay active simultaneously.</p></blockquote></div><p>The majority of 3G dongles needs some kind of modeswitch, only a few does the switching automatically by themselves.</p><div class="quotebox"><cite>JPetersonVNL wrote:</cite><blockquote><p>But I see the same disconnect reconnect with the 620 and also with the 730 on the ubuntu box. It only does it once, and it happens after I perform the modeswitch.</p></blockquote></div><p>One disconnect-reconnect is expected when a dongle is morphing into another usb id.<br />You will se the same if you remove the dongle and then reinsert it.<br />Many disconnect-reconnect should not happen.</p><br /><div class="quotebox"><cite>JPetersonVNL wrote:</cite><blockquote><p>Well to confirm it isn&#039;t a power issue, I powered the modem independent of the router, with a 10 amp PS... still the same <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Is the USB730 stable on the bus if you don&#039;t do the configuration select?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369002">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						29 Nov 2017, 17:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Is the USB730 stable on the bus if you don&#039;t do the configuration select?</p></blockquote></div><p>No it starts the connect/disconnect as soon as I plug it in. I&#039;ve tried setting the configurationValue while it is in that cycle, as well as waiting for it finish after 5 iterations. Neither have any effect.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369554">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						13 Dec 2017, 18:39					</div>
				</div>
				<div class="post-content content">
					<p>Ok guys, got a big update and I think I&#039;m close.<br />In a last ditch effort I powered the the USB730 externally, plugged it into the regular ubuntu box and gave it a minute to start working. Then, without removing power, I unplugged the USB from the ubuntu box and plugged it into the OpenWRT router. And wouldn&#039;t you know, it worked! </p><p>So it seems it just need the correct modeswitch maybe? Or something else. Any help would be great!!</p><div class="codebox"><pre><code>usb0      Link encap:Ethernet  HWaddr 92:A5:8F:7F:8D:2E
          inet addr:100.66.121.3  Bcast:100.66.121.7  Mask:255.255.255.248
          inet6 addr: fe80::90a5:8fff:fe7f:8d2e/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:72 errors:0 dropped:0 overruns:0 frame:0
          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:6253 (6.1 KiB)  TX bytes:5432 (5.3 KiB)</code></pre></div><p>DMESG: (excuse all the &#039;test&#039;s)<br /></p><div class="codebox"><pre><code>[  475.840000] usb 1-1: new high-speed USB device number 2 using ehci-platform
[  476.020000] test8testtest4testtest1testtest2testtest3testUSB_CDC_HEADER_TYPEUSB_CDC_UNION_TYPEUSB_CDC_ETHERNET_TYPEtest8atesttest8btest(null)test8ctest
[  476.040000] cdc_ether 1-1:1.0 usb0: register &#039;cdc_ether&#039; at usb-ehci-platform-1, CDC Ethernet Device, 92:a5:8f:7f:8d:2e</code></pre></div><p>lsusb -v<br /></p><div class="codebox"><pre><code>Bus 001 Device 002: ID 1410:9030 Novatel Wireless
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  idVendor           0x1410 Novatel Wireless
  idProduct          0x9030
  bcdDevice            3.10
  iManufacturer           1 Novatel Wireless
  iProduct                2 MiFi USB730L
  iSerial                 3 0123456789ABCDEF
  bNumConfigurations      3
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength          105
    bNumInterfaces          3
    bConfigurationValue     1
    iConfiguration          0
    bmAttributes         0x80
      (Bus Powered)
    MaxPower              500mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         2 Communications
      bInterfaceSubClass      6 Ethernet Networking
      bInterfaceProtocol      0
      iInterface             13 CDC Ethernet Control Model (ECM)
      CDC Header:
        bcdCDC               1.10
      CDC Union:
        bMasterInterface        0
        bSlaveInterface         1
      CDC Ethernet:
        iMacAddress                     15 92A58F7F8D2E
        bmEthernetStatistics    0x00000000
        wMaxSegmentSize               1514
        wNumberMCFilters            0x0000
        bNumberPowerFilters              0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x84  EP 4 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0010  1x 16 bytes
        bInterval               9
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       0
      bNumEndpoints           0
      bInterfaceClass        10 CDC Data
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0
      iInterface              0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        1
      bAlternateSetting       1
      bNumEndpoints           2
      bInterfaceClass        10 CDC Data
      bInterfaceSubClass      0 Unused
      bInterfaceProtocol      0
      iInterface             14 CDC Ethernet Data
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x01  EP 1 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0200  1x 512 bytes
        bInterval               0
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        2
      bAlternateSetting       0
      bNumEndpoints           1
      bInterfaceClass         3 Human Interface Device
      bInterfaceSubClass      0 No Subclass
      bInterfaceProtocol      0 None
      iInterface              7 HID Interface
        HID Device Descriptor:
          bLength                 9
          bDescriptorType        33
          bcdHID               1.01
          bCountryCode            0 Not supported
          bNumDescriptors         1
          bDescriptorType        34 Report
          wDescriptorLength      34
          Report Descriptor: (length is 34)
            Item(Global): Usage Page, data= [ 0xa0 0xff ] 65440
                            (null)
            Item(Local ): Usage, data= [ 0xa5 ] 165
                            (null)
            Item(Main  ): Collection, data= [ 0x01 ] 1
                            Application
            Item(Local ): Usage, data= [ 0xa6 ] 166
                            (null)
            Item(Local ): Usage, data= [ 0xa7 ] 167
                            (null)
            Item(Global): Logical Minimum, data= [ 0x80 ] 128
            Item(Global): Logical Maximum, data= [ 0x7f ] 127
            Item(Global): Report Size, data= [ 0x08 ] 8
            Item(Global): Report Count, data= [ 0x04 ] 4
            Item(Main  ): Input, data= [ 0x04 ] 4
                            Data Array Relative No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Local ): Usage, data= [ 0xa9 ] 169
                            (null)
            Item(Global): Logical Minimum, data= [ 0x80 ] 128
            Item(Global): Logical Maximum, data= [ 0x7f ] 127
            Item(Global): Report Size, data= [ 0x08 ] 8
            Item(Global): Report Count, data= [ 0x04 ] 4
            Item(Main  ): Output, data= [ 0x04 ] 4
                            Data Array Relative No_Wrap Linear
                            Preferred_State No_Null_Position Non_Volatile Bitfield
            Item(Main  ): End Collection, data=none
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x82  EP 2 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0008  1x 8 bytes
        bInterval               4
Couldn&#039;t get configuration descriptor 1, some information will be missing
Couldn&#039;t get configuration descriptor 2, some information will be missing
Device Qualifier (for other device speed):
  bLength                10
  bDescriptorType         6
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0
  bDeviceProtocol         0
  bMaxPacketSize0        64
  bNumConfigurations      3
Device Status:     0x0000
  (Bus Powered)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369570">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						14 Dec 2017, 04:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JPetersonVNL wrote:</cite><blockquote><p>Ok guys, got a big update and I think I&#039;m close.<br />In a last ditch effort I powered the the USB730 externally, plugged it into the regular ubuntu box and gave it a minute to start working. Then, without removing power, I unplugged the USB from the ubuntu box and plugged it into the OpenWRT router. And wouldn&#039;t you know, it worked! </p><p>So it seems it just need the correct modeswitch maybe? Or something else. Any help would be great!!</p><div class="codebox"><pre><code>usb0      Link encap:Ethernet  HWaddr 92:A5:8F:7F:8D:2E
          inet addr:100.66.121.3  Bcast:100.66.121.7  Mask:255.255.255.248
          inet6 addr: fe80::90a5:8fff:fe7f:8d2e/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:72 errors:0 dropped:0 overruns:0 frame:0
          TX packets:60 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:6253 (6.1 KiB)  TX bytes:5432 (5.3 KiB)</code></pre></div></blockquote></div><p>Closer but still problems.<br />Your lsusb does only display config #1 , the other two errors out for some reason but config #3 is the virtual cdrom with windows drivers and windows connection manager.<br />Selecting config #3 will auto-switch USB730 into enterprise mode and the usb id will change to 1410:9032<br />Enterprise mode is cdc_ether but with a public IP,&nbsp; you got it working in config #1 which is cdc_ether with private IP (CGNAT) which your ifconfig also show.</p><p>What chipset is used in this Chinese noname router?<br /> Was the neutered lsusb listing taken from this router?</p>											<p class="post-edited">(Last edited by <strong>JonnyM</strong> on 14 Dec 2017, 05:05)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369593">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						14 Dec 2017, 16:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><p>What chipset is used in this Chinese noname router?</p></blockquote></div><p>Its core is an AR9331-AL3A<br /></p><div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><p>Was the neutered lsusb listing taken from this router?</p></blockquote></div><p>Yes that lsusb was taken from the router in question</p><p>Another interesting discovery: After getting it working initially using the weird external power setup, I can unplug everything and plug the modem directly into the router and it works now. This makes me think there was some road block on the modem that I took down when I got it working the first time. Problem is, this is supposed to be a deployable solution so its not good enough that I got this one working <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369639">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">JonnyM</div>
					<div class="post-datetime">
						15 Dec 2017, 14:36					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>JPetersonVNL wrote:</cite><blockquote><div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><p>What chipset is used in this Chinese noname router?</p></blockquote></div><p>Its core is an AR9331-AL3A<br /></p><div class="quotebox"><cite>JonnyM wrote:</cite><blockquote><p>Was the neutered lsusb listing taken from this router?</p></blockquote></div><p>Yes that lsusb was taken from the router in question</p><p>Another interesting discovery: After getting it working initially using the weird external power setup, I can unplug everything and plug the modem directly into the router and it works now. This makes me think there was some road block on the modem that I took down when I got it working the first time. Problem is, this is supposed to be a deployable solution so its not good enough that I got this one working <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p></blockquote></div><p>Plugging it into your Ubuntu rig can&#039;t have solved anything, it is just a coincidence that it works after that.<br />I guess that your USB host/roothub driver is flaky there was problem with AR9331 USB for a long time in the past.<br />Why do you use such old release as Barrier Breaker? <br />If it is the router mfgr providing it then it is he who should solve your problem, he has obviously made his own private build based on OpenWRT but not sent in patches to the developers so that the router can be included in OpenWRT for public builds. <br />If he had sent in patches then there would had been a modern OpenWRT build for download here, Chaos Calmer, Designated Driver, or trunk build.</p>											<p class="post-edited">(Last edited by <strong>JonnyM</strong> on 15 Dec 2017, 14:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p369657">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">JPetersonVNL</div>
					<div class="post-datetime">
						15 Dec 2017, 22:31					</div>
				</div>
				<div class="post-content content">
					<p>Barrier Breaker is what this was developed on and we&#039;ve just built off it. I have tried the latest firmware but it has the same results. As for coincidence I have three more of these modems coming next week so I can confirm/deny that for sure. But I&#039;ve tested this with multiple routers and the only router that the modem works on is the one I switched to from Ubuntu. Maybe the roadblock was on the router side of things? Something very very strange is going on.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>