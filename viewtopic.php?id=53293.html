<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WR720N (not the chinese one) with openwrt</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 4 May 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p250210">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">vsidou</div>
					<div class="post-datetime">
						12 Oct 2014, 13:35					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone</p><p>i just got myself a TPLINK WR720N</p><p>This one : <br /><a href="http://www.tp-link.com/en/products/details/?model=TL-WR720N">http://www.tp-link.com/en/products/deta â€¦ =TL-WR720N</a></p><p>Looking up on openwrt wiki i found out that WR720N that is supported is completely different from that one :<br /><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr720n">http://wiki.openwrt.org/toh/tp-link/tl-wr720n</a>&nbsp; </p><p>I opened the case and plug in TTL RX/TX to check a bit what is on the inside : <br />Here is a photo : <br /><span class="postimg"><img src="http://pyxise.com/images/wr720n.jpg" alt="WR720N Opened" /></span></p><p>Also check the boot log i got with on TTL : </p><div class="codebox"><pre><code>picocom -b 115200 /dev/ttyUSB0 
picocom v1.7

port is        : /dev/ttyUSB0
flowcontrol    : none
baudrate is    : 115200
parity is      : none
databits are   : 8
escape is      : C-a
local echo is  : no
noinit is      : no
noreset is     : no
nolock is      : no
send_cmd is    : sz -vv
receive_cmd is : rz -vv
imap is        : 
omap is        : 
emap is        : crcrlf,delbs,

Terminal ready



     ________  ________             __      __  ____   _  __   ___
    |________||   ___  |           |  |    |  ||    \ | ||  | /  /
       |  |   |  |___| |   __ __   |  |    |  ||     \| ||  |/  /
       |  |   |   _____|  |__ __|  |  |___ |  || |\     ||      \
       |__|   |__|                 |______||__||_| \____||__|\___\


                            Software Platform for MIPS
Creation date: Jun 18 2013, 12:19:09 (chenyunchuan@tp-link.net)
Copyright(C) 2001-2010 by TP-LINK TECHNOLOGIES CO., LTD.
CPU: AR9330: AP121 Board
CPU freq: 400 MHZ
SDRAM size: 8 MB
ipaddr:192.168.1.1
serverip:192.168.1.100
file:vxWorks.img


Attaching interface lo0... avlUintSearch entry...
avlUintInsert entry...
done
Rx clbufs 768 each of size 1756 
eth_rx_netpool_init: allocated, pDmaBuf=0x80637910, buffend = 80782514
ATHRS26: resetting s26
ATHRS26: s26 reset done
eth_rx_netpool_init: done already!
Attached IPv4 interface to mirror unit 0
avlUintSearch entry...
avlUintInsert entry...
Press Ctrl+C to stop auto-boot...
 0
auto-booting...
Uncompressing...done
Starting at 0x80001000...

Attaching interface lo0... done
Rx clbufs 768 each of size 1756 
eth_rx_netpool_init: allocated, pDmaBuf=0x80e1c7e0, buffend = 80f673e4
ATHRS26: resetting s26
ATHRS26: s26 reset done
Arm the watchdog timer for the GMAC hang detect
eth_rx_netpool_init: done already!
Attached IPv4 interface to mirror unit 0
usrAppInitEx: 136: GPIO_OE = c00081d
usrAppInitEx: 137: CP0 CONFIG = 80208483
usrAppInitEx: 138: CP0 CONFIG1 = 9ee3519e

--&gt;starting wireless...
APCFG task id 80c41160
sysWlanInit ...
Create WLAN event task tWLANEventTask
Create mem partion 0x80c22920 for size 73728
Boostrap clock 25MHz
ar9300RadioAttach: Need analog access recipe!!
Restoring Cal data from Flash
ant_div_control1 = 0x9
ath_get_caps[4303] rx chainmask mismatch actual 1 sc_chainmak 0
ath_get_caps[4278] tx chainmask mismatch actual 1 sc_chainmak 0
Create OS_MESGQ Successfully at 0x80c11400
osifp-&gt;queue_head = 0x80c11700
ag7240MemInit: allocated, dmabuf=0x80a38a00, buffend = 80bf1f44
Entering Task Loop
Entering WLAN event Task Loop
--&gt;wps is shutdown!
--&gt;wps is shutdown!
--&gt;wps is shutdown!
ERROR:wireless OR ACL disable
ERROR:wireless OR ACL disable
ERROR:wireless OR ACL disable
ERROR:wireless OR ACL disable
sending message 80a05940,24
TDDP: Now listening client request. 
tddp is running.
wmosSemMCreate() pMud-&gt;mudDataSem:-2137180352



                            Software Platform for MIPS
  Copyright(C) 2001-2010 by TP-LINK TECHNOLOGIES CO., LTD.
  Creation date: Jul 19 2013, 14:07:58
# Starting WLAN !!!! 
AP_STARTMODE=standard
AP_ENABLE=1
ATH_COUNTRYCODE=840
wlan_vap_create : enter. devhandle=0x803dd270, opmode=IEEE80211_M_HOSTAP, flags=0x1
wlan_vap_create : exit. devhandle=0x803dd270, opmode=IEEE80211_M_HOSTAP, flags=0x1.
osif_ioctl_create_vap: vap 0x80ffe970 vap-&gt;iv_unit 0
ieee80211_end_load: load done
ath0 end flag = 0x00028802
default 
default 
default 
IEE80211-FREQ IOCTL vap 0x80ffe970 0,0,0
AP_CHMODE=11NGHT40PLUS

WLAN IOCTL AP_CHMODE=11NGHT40PLUS=11NGHT20=11NGHT40PLUS=1003
IEE80211-MODE IOCTL 1,11NGHT40PLUS,13
set mode 11,-2130709132,6
set mode retv 0

WLAN IOCTL AP_PRIMARY_CH=auto=1=auto=1002
IEE80211-FREQ IOCTL vap 0x80ffe970 0,0,11

WLAN IOCTL PUREG=0=0=0=1004
IEEE80211-SETPURGE IOCTL 0

WLAN IOCTL AP_HIDE_SSID=0=0=0=1005
IEEE80211-SETHIDESSIDIOCTL 0

WLAN IOCTL AP_ISOLATION=0=0=0=1034
IEE80211-setparam-nobridge 0

WLAN IOCTL AP_TX11NRATE==0=0=1041
set auto rate

WLAN IOCTL AP_11G_PROTECTION==0=0=1042

WLAN IOCTL AP_BEACON_INTERVAL=100=100=100=1043

WLAN IOCTL AP_FRAGMENT_THRESHOLD=2346=2346=2346=1044

WLAN IOCTL AP_RTS_THRESHOLD=2346=2347=2346=1046

WLAN IOCTL AP_DTIM_PERIOD=1=1=1=1045

WLAN IOCTL AP_WMM_ENABLE=1=1=1=1051

WLAN IOCTL AP_WMM_NOACK==0=0=1052
IOCTL set wmm noack 0

WLAN IOCTL AP_CYPHER_2==CCMP=CCMP=1000
Get EIOCGADDR

WLAN IOCTL AP_NO_EDGE_CH==0=0=1056

WLAN IOCTL AP_MCASTRATE==0=0=1018

WLAN IOCTL AP_MACFILTER_MODE==0=0=1038

WLAN IOCTL AP_MACFILTER_LIST====1000
Get EIOCGADDR

WLAN IOCTL AP_SHORT_GI=1=1=1=1055

WLAN IOCTL AP_DISABLECOEXT=1=0=1=1075

WLAN IOCTL AP_SSID=TP-LINK_798E88=Hornet_test_xxxxxxx=TP-LINK_798E88=1001
IEE80211-ESSID IOCTL 1,TP-LINK_798E88,15
AP_CHMODE=11NGHT40PLUS
AP_CWMMODE=1
IEE80211-CWMMODE IOCTL 1
AP_AMPDU=0
AP_PURE_N=0
AP_TX_CHAINMASK=1
AP_RX_CHAINMASK=1
AP_SECMODE=WPA2
WPS_ENABLE=1
AP_MACFILTER_MODE=0
ieee80211_open

wantypeDetectionDaemon() in Wantype.c
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
FIXME: ar9300GetMinCCAPwr
ar9300LoadNF: *** TIMEOUT while waiting for nf to load: AR_PHY_AGC_CONTROL=0x1d0d5a ***

WLAN IOCTL AP_BASICRATES==0=0=1039

WLAN IOCTL AP_DEBUG=0=0=0=1062

WLAN IOCTL AP_TX_POWER==0=0=1073
--&gt;apcfg_wlan_start:start ath0.

--&gt;apcfg_wlan_start:skip ath1.

--&gt;apcfg_wlan_start:skip ath2.

--&gt;apcfg_wlan_start:skip ath3.

--&gt;apcfg_wlan_start:skip ath4.

--&gt;apcfg_wlan_start:skip ath5.

--&gt;apcfg_wlan_start:skip ath6.

--&gt;apcfg_wlan_start:skip ath7.

Starting Hostapd
AP_SSID=TP-LINK_798E88
AP_SSID=TP-LINK_798E88
AP_HOSTAPD_DEBUG=0
AP_IPADDR=192.168.1.2
AP_SECMODE=WPA2
WPS BSS init
WPS_ENABLE=1
WPS_PIN=87568035
WPS_STATE=1
AP_SECMODE=WPA2
WPA2 BSS init
WPA BSS init
PSK_KEY=87568035
AP_CYPHER=CCMP
AP_WPA_GROUP_REKEY=86400
starting hostapd ... 
Hostapd task Created 809982f0
Task details [809982f0,,64,80c40f00]
Adding ath0 in bridge ...
default 
Set EIOCGMIB2
default 
Entering Hostapd Main 
default 
Set EIOCGMIB2
Attached backend socket for ath0
Attached backend socket for eth0
Attached backend socket for eth1
Attached backend socket for mirror 0
@@@@ kris-hostapd vapid=0 @@@@@ wiface=ath0 bridge=mirror0 @@@@
**** [2,1,0,0192.168.1.2,]****
Just before eloop_run()
 *** setup interface1 started ****
 Eapol sockfd=7 
Get EIOCGADDR
MAC address 10,fffffffe,ffffffed,79,ffffff8e,ffffff88
link _ubind0,0,0,0,0,0
IEE80211-IWMODE IOCTL  3
IEE80211-setparam-privacy 0
1136073609.550000: Defaulted uuid based on mac addr 10:fe:ed:79:8e:88
ieee80211_ioctl_setappiebuf
ieee80211_ioctl_setappiebuf
ieee80211_ioctl_setappiebuf
Madwifi init completed
 *** setup interface1 completed ****
 *** setup interface2 started ****
IEE80211-setparam-privacy 0
ieee80211_ioctl_delkey : idk_keyix=0
ieee80211_ioctl_delkey : idk_keyix=1
ieee80211_ioctl_delkey : idk_keyix=2
ieee80211_ioctl_delkey : idk_keyix=3
Using interface ath0 with hwaddr 10:fe:ed:79:8e:88 and ssid &#039;TP-LINK_798E88&#039;
IEE80211-ESSID IOCTL 1,TP-LINK_798E88,15
osif_vap_init :vap up 
IEE80211-setparam-mcastcipher 3
Warning: wlan_set_mcast_cipher failed. cache the mcast cipher
IEE80211-setparam-unicipher 8
Warning: wlan_set_ucast_cipher failed. cache the ucast cipher
IEE80211-setparam-keymgmtalgs 2
ieee80211_rsncaps
IEE80211-setparam-wpa 2
set IEEE80211_IOC_WPA to RSN
[ieee80211_ioctl_setparam_wpa:1732]
IEE80211-setparam-authmode 5
osif_vap_init :vap up 
osif_vap_init 0
ieee80211_ioctl_setkey
 

ieee80211_ioctl_setkey: ******** SETKEY : error: 0 , key_type=3, macaddr=ff:ff:ff:ff:ff:ff, key_len=16

IEE80211-setparam-privacy 1
hostapd_ctrl_iface_init
1136073610.133333: upnp_wps_device_init called
1136073610.150000: upnp_wps_device ssdp_listener_start failure!
1136073610.150000: upnp_wps_device_stop ENTER
1136073610.150000: upnp_wps_device_deinit called
1136073610.150000: upnp_wps_device_stop ENTER
1136073610.166667: Failed to initialize UPnP state machine
1136073610.166667: Continuing with WPS UPnP disabled.
 ****setup interface2 completed****
 ****setup interface finalized ****

# </code></pre></div><p>I&#039;ve documented myself a bit and i found out that this router seems to look a lot like the WR740N V4.23 :<br />Check at the bottom of this page for pictures : <br /><a href="http://%20http://wiki.openwrt.org/toh/tp-link/tl-wr740n"> http://wiki.openwrt.org/toh/tp-link/tl-wr740n</a></p><p>Only it has 2 lan instead of 4 lan (and maybe some other stuff i&#039;m sure).</p><p>This router is quite cheap and seems interesting to work on.</p><p>Any of you know if any firmware in the lot already work for it ? i wanted to try the WR720 provided in trunk but as i have only one unit i wanted to make sure. Any help will be much appreciated. </p><p>Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250215">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						12 Oct 2014, 14:12					</div>
				</div>
				<div class="post-content content">
					<p><a href="http://www.right.com.cn/forum/thread-52436-1-1.html">www.right.com.cn/forum/thread-52436-1-1.html</a></p><p>Seems flash/ram is 2/16, minimum for openwrt 4/32...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250258">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">_DS_</div>
					<div class="post-datetime">
						12 Oct 2014, 21:01					</div>
				</div>
				<div class="post-content content">
					<p>According datasheet A3S28D40FTP - 128 Mbit RAM, 16 Mbytes. Unable to read label from spi flash <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>And yes, you CAN run OpenWrt on 16 Mbytes, with custom images,</p>											<p class="post-edited">(Last edited by <strong>_DS_</strong> on 12 Oct 2014, 21:02)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250318">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">vsidou</div>
					<div class="post-datetime">
						13 Oct 2014, 07:01					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the feedback <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I&#039;ll try a custom build but i&#039;m quite sure for wifi captive portal (with coova-chilli) i&#039;ll get past the 2 mb flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250325">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">nebbia88</div>
					<div class="post-datetime">
						13 Oct 2014, 08:34					</div>
				</div>
				<div class="post-content content">
					<p>Even with minimal custom build 2mb is too low..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p250326">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">_DS_</div>
					<div class="post-datetime">
						13 Oct 2014, 08:41					</div>
				</div>
				<div class="post-content content">
					<p>Check spi flash part number, 2 mb too low for vxworks too.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>