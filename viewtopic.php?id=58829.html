<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> NAT Loopback for the gateway</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 29 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p286192">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">david.lynch</div>
					<div class="post-datetime">
						4 Aug 2015, 09:09					</div>
				</div>
				<div class="post-content content">
					<p>Hello everyone,</p><p>Here we have 4 TP-Link TL-WR841ND. One as router/gateway using a PPPoE connection and the others as access points.</p><p>We can access the access points administration interfaces while on LAN using the external DDNS url, but not the router/gateway which is only available by its DDNS url externally.</p><p>We have enabled the external access to the router/gateway using a port forward to itself.</p><p>How get access to the gateway/router using its external DDNS url?</p><p>Any help would be greatly appreaciated!</p><p><span class="postimg"><img src="http://i.imgur.com/jg2t4.gif" alt="http://i.imgur.com/jg2t4.gif" /></span></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286195">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						4 Aug 2015, 09:47					</div>
				</div>
				<div class="post-content content">
					<p>When a device has an external connection, you do not need to forward ports to itself, just open the ports. But you also need to ensure that the HTTP daemon is listening on the external interface. In &quot;/etc/config/uhttpd&quot;, check the &quot;listen&quot; directives.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286227">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">david.lynch</div>
					<div class="post-datetime">
						4 Aug 2015, 15:45					</div>
				</div>
				<div class="post-content content">
					<p>Sorry to ask something that seems obvious, but I&#039;m coming from dd-wrt and I&#039;m not so sure how to do this. Should I use SSH on putty? I&#039;m on windows.</p><p>We can access over WAN, but not inside LAN using the DDNS url. The other access points we can access this way, only the gateway that doesn&#039;t work. That seems to be purely a NAT Loopback issue. How overcome that in an OpenWrt gateway?</p><p>Also, what is the correct method of enabling http external administration?</p><p><span class="postimg"><img src="http://i.imgur.com/jg2t4.gif" alt="http://i.imgur.com/jg2t4.gif" /></span></p>											<p class="post-edited">(Last edited by <strong>david.lynch</strong> on 4 Aug 2015, 15:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286230">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						4 Aug 2015, 15:57					</div>
				</div>
				<div class="post-content content">
					<p>Sorry if I misunderstood your message, I thought you could not access from the WAN. From inside, you should use the local name or IP address; you can also modify the DNS server to hijack the DDNS name, and serve the local IP address.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286236">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">david.lynch</div>
					<div class="post-datetime">
						4 Aug 2015, 17:23					</div>
				</div>
				<div class="post-content content">
					<p>...so, nat loopback doesn&#039;t work on the gateway?</p><p>that&#039;s what I&#039;m facing on the latest stable build.</p><p>...and what about the correct method of enabling http external administration?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286289">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						5 Aug 2015, 00:04					</div>
				</div>
				<div class="post-content content">
					<p>I have never tried NAT loopback, cannot confirm whether it works or not.<br />I thought you already could access from outside.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286444">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">david.lynch</div>
					<div class="post-datetime">
						5 Aug 2015, 20:13					</div>
				</div>
				<div class="post-content content">
					<p>I can access all of them from the outside: 3 access points and the gateway. Only at LAN side we can&#039;t access openwrt gateway using DDNS url, a feature that we need to have. This was working on dd-wrt.</p>											<p class="post-edited">(Last edited by <strong>david.lynch</strong> on 5 Aug 2015, 21:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286508">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">eduperez</div>
					<div class="post-datetime">
						6 Aug 2015, 09:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>david.lynch wrote:</cite><blockquote><p>I can access all of them from the outside: 3 access points and the gateway. Only at LAN side we can&#039;t access openwrt gateway using DDNS url, a feature that we need to have. This was working on dd-wrt.</p></blockquote></div><p>Configure dnsmasq on the gateway to resolve the DDNS name to a local IP address; it takes five minutes.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286559">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">david.lynch</div>
					<div class="post-datetime">
						6 Aug 2015, 19:04					</div>
				</div>
				<div class="post-content content">
					<p>I would prefer another approach, as NAT loopback is working for the other access points.</p><p>This is how it is. This rule works for another acccess points like 192.168.2.3, but not for the gateway on the lan side using ddns url.</p><p><span class="postimg"><img src="http://i.imgur.com/gktwkma.png" alt="http://i.imgur.com/gktwkma.png" /></span></p><p>What am I doing wrong?</p>											<p class="post-edited">(Last edited by <strong>david.lynch</strong> on 6 Aug 2015, 19:04)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>