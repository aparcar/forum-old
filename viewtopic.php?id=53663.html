<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Routerboard 912G 5HPnD miniPCIe</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 27 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p252317">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">a.cardote</div>
					<div class="post-datetime">
						28 Oct 2014, 15:42					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>I&#039;m having trouble getting the miniPCIe slot of my routerboard 912G 5HPnD to work. I have compiled openwrt as suggested in the wiki for this specific board, but although everything in the system seems to be working fine, nothing shows up in the log when I connect any device to the miniPCIe slot.</p><p>Here is a log of the system bootup:</p><p>[&nbsp; &nbsp; 0.000000] SLUB: HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1<br />[&nbsp; &nbsp; 0.000000] NR_IRQS:51<br />[&nbsp; &nbsp; 0.070000] Calibrating delay loop... 299.82 BogoMIPS (lpj=1499136)<br />[&nbsp; &nbsp; 0.070000] pid_max: default: 32768 minimum: 301<br />[&nbsp; &nbsp; 0.070000] Mount-cache hash table entries: 512<br />[&nbsp; &nbsp; 0.080000] NET: Registered protocol family 16<br />[&nbsp; &nbsp; 0.090000] MIPS: machine is Mikrotik RouterBOARD 912UAG-5HPnD<br />[&nbsp; &nbsp; 0.300000] ar724x-pci ar724x-pci: PCIe link is down<br />[&nbsp; &nbsp; 0.310000] registering PCI controller with io_map_base unset<br />[&nbsp; &nbsp; 0.320000] bio: create slab &lt;bio-0&gt; at 0<br />[&nbsp; &nbsp; 0.330000] PCI host bridge to bus 0000:00<br />[&nbsp; &nbsp; 0.330000] pci_bus 0000:00: root bus resource [mem 0x10000000-0x13ffffff]<br />[&nbsp; &nbsp; 0.340000] pci_bus 0000:00: root bus resource [io&nbsp; 0x0000]<br />[&nbsp; &nbsp; 0.340000] pci_bus 0000:00: No busn resource found for root bus, will use [bus 00-ff]<br />[&nbsp; &nbsp; 0.350000] pci_bus 0000:00: scanning bus<br />[&nbsp; &nbsp; 0.350000] pci_bus 0000:00: fixups for bus<br />[&nbsp; &nbsp; 0.350000] pci_bus 0000:00: bus scan returning with max=00<br />[&nbsp; &nbsp; 0.350000] pci_bus 0000:00: busn_res: [bus 00-ff] end is updated to 00<br />[&nbsp; &nbsp; 0.350000] Switching to clocksource MIPS<br />[&nbsp; &nbsp; 0.350000] NET: Registered protocol family 2<br />[&nbsp; &nbsp; 0.360000] TCP established hash table entries: 512 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.360000] TCP bind hash table entries: 512 (order: -1, 2048 bytes)<br />[&nbsp; &nbsp; 0.370000] TCP: Hash tables configured (established 512 bind 512)<br />[&nbsp; &nbsp; 0.370000] TCP: reno registered<br />[&nbsp; &nbsp; 0.380000] UDP hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.380000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)<br />[&nbsp; &nbsp; 0.390000] NET: Registered protocol family 1<br />[&nbsp; &nbsp; 0.390000] PCI: CLS 0 bytes, default 32<br />[&nbsp; &nbsp; 0.410000] yaffs: yaffs built Oct 27 2014 15:39:40 Installing.<br />[&nbsp; &nbsp; 0.410000] msgmni has been set to 119<br />[&nbsp; &nbsp; 0.410000] io scheduler noop registered<br />[&nbsp; &nbsp; 0.420000] io scheduler deadline registered (default)<br />[&nbsp; &nbsp; 0.420000] pci_hotplug: PCI Hot Plug PCI Core version: 0.5<br />[&nbsp; &nbsp; 0.430000] pciehp: PCI Express Hot Plug Controller Driver version: 0.4<br />[&nbsp; &nbsp; 0.440000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled<br />[&nbsp; &nbsp; 0.460000] serial8250.0: ttyS0 at MMIO 0x18020000 (irq = 11) is a 16550A<br />[&nbsp; &nbsp; 0.470000] console [ttyS0] enabled, bootconsole disabled<br />[&nbsp; &nbsp; 0.480000] ath79-spi ath79-spi: master is unqueued, this is deprecated<br />[&nbsp; &nbsp; 0.490000] m25p80 spi0.0: unrecognized JEDEC id c22010<br />[&nbsp; &nbsp; 0.500000] NAND flash driver for the RouterBOARD 91x series<br />[&nbsp; &nbsp; 0.510000] NAND device: Manufacturer ID: 0x98, Chip ID: 0xf1 (Toshiba NAND 128MiB 3,3V 8-bit), 128MiB, page size: 2048, OOB size: 64<br />[&nbsp; &nbsp; 0.520000] Scanning device for bad blocks<br />[&nbsp; &nbsp; 0.630000] Creating 3 MTD partitions on &quot;NAND 128MiB 3,3V 8-bit&quot;:<br />[&nbsp; &nbsp; 0.630000] 0x000000000000-0x000000040000 : &quot;booter&quot;<br />[&nbsp; &nbsp; 0.640000] 0x000000040000-0x000000400000 : &quot;kernel&quot;<br />[&nbsp; &nbsp; 0.650000] 0x000000400000-0x000008000000 : &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.650000] mtd: device 2 (rootfs) set to be root filesystem<br />[&nbsp; &nbsp; 0.660000] mtdsplit: no squashfs found in &quot;rootfs&quot;<br />[&nbsp; &nbsp; 0.670000] mtdsplit: no squashfs found in &quot;NAND 128MiB 3,3V 8-bit&quot;<br />[&nbsp; &nbsp; 0.680000] libphy: ag71xx_mdio: probed<br />[&nbsp; &nbsp; 1.240000] ag71xx ag71xx.0: connected to PHY at ag71xx-mdio.0:00 [uid=004dd072, driver=Atheros 8035 ethernet]<br />[&nbsp; &nbsp; 1.250000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:RGMII<br />[&nbsp; &nbsp; 1.260000] TCP: cubic registered<br />[&nbsp; &nbsp; 1.260000] NET: Registered protocol family 17<br />[&nbsp; &nbsp; 1.270000] 8021q: 802.1Q VLAN Support v1.8<br />[&nbsp; &nbsp; 1.280000] yaffs: dev is 32505858 name is &quot;mtdblock2&quot; ro<br />[&nbsp; &nbsp; 1.280000] yaffs: passed flags &quot;&quot;<br />[&nbsp; &nbsp; 1.290000] yaffs: yaffs: Attempting MTD mount of 31.2,&quot;mtdblock2&quot;<br />[&nbsp; &nbsp; 1.290000] yaffs: auto selecting yaffs2<br />[&nbsp; &nbsp; 2.060000] yaffs: yaffs_read_super: is_checkpointed 0<br />[&nbsp; &nbsp; 2.060000] VFS: Mounted root (yaffs filesystem) readonly on device 31:2.<br />[&nbsp; &nbsp; 2.070000] Freeing unused kernel memory: 200K (8032e000 - 80360000)<br />[&nbsp; &nbsp; 3.990000] pps_core: LinuxPPS API ver. 1 registered<br />[&nbsp; &nbsp; 3.990000] pps_core: Software ver. 5.3.6 - Copyright 2005-2007 Rodolfo Giometti &lt;giometti@linux.it&gt;<br />[&nbsp; &nbsp; 4.020000] usbcore: registered new interface driver usbfs<br />[&nbsp; &nbsp; 4.020000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp; 4.030000] usbcore: registered new device driver usb<br />[&nbsp; &nbsp; 4.130000] SCSI subsystem initialized<br />[&nbsp; &nbsp; 4.140000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver<br />[&nbsp; &nbsp; 4.150000] ehci-platform: EHCI generic platform driver<br />[&nbsp; &nbsp; 4.150000] ehci-platform ehci-platform: EHCI Host Controller<br />[&nbsp; &nbsp; 4.160000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1<br />[&nbsp; &nbsp; 4.170000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000<br />[&nbsp; &nbsp; 4.190000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00<br />[&nbsp; &nbsp; 4.190000] hub 1-0:1.0: USB hub found<br />[&nbsp; &nbsp; 4.200000] hub 1-0:1.0: 1 port detected<br />[&nbsp; &nbsp; 4.200000] ehci-pci: EHCI PCI platform driver<br />[&nbsp; &nbsp; 4.210000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver<br />[&nbsp; &nbsp; 4.220000] uhci_hcd: USB Universal Host Controller Interface driver<br />[&nbsp; &nbsp; 4.230000] usbcore: registered new interface driver usb-storage<br />[&nbsp; &nbsp;10.450000] NET: Registered protocol family 10<br />[&nbsp; &nbsp;10.480000] NTFS driver 2.1.30 [Flags: R/O MODULE].<br />[&nbsp; &nbsp;10.500000] tun: Universal TUN/TAP device driver, 1.6<br />[&nbsp; &nbsp;10.500000] tun: (C) 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt;<br />[&nbsp; &nbsp;10.530000] ipip: IPv4 over IPv4 tunneling driver<br />[&nbsp; &nbsp;10.540000] sit: IPv6 over IPv4 tunneling driver<br />[&nbsp; &nbsp;10.550000] gre: GRE over IPv4 demultiplexor driver<br />[&nbsp; &nbsp;10.550000] ip_gre: GRE over IPv4 tunneling driver<br />[&nbsp; &nbsp;10.570000] ip6_gre: GRE over IPv6 tunneling driver<br />[&nbsp; &nbsp;10.590000] ip6_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;10.650000] u32 classifier<br />[&nbsp; &nbsp;10.650000]&nbsp; &nbsp; &nbsp;input device check on<br />[&nbsp; &nbsp;10.660000]&nbsp; &nbsp; &nbsp;Actions configured<br />[&nbsp; &nbsp;10.680000] Mirror/redirect action on<br />[&nbsp; &nbsp;10.690000] Failed to load ipt action<br />[&nbsp; &nbsp;10.800000] Loading modules backported from Linux version master-2014-10-08-0-g0275925<br />[&nbsp; &nbsp;10.810000] Backport generated by backports.git backports-20140905-1-gde42785<br />[&nbsp; &nbsp;10.830000] ip_tables: (C) 2000-2006 Netfilter Core Team<br />[&nbsp; &nbsp;10.870000] nf_conntrack version 0.5.0 (960 buckets, 3840 max)<br />[&nbsp; &nbsp;10.950000] usbcore: registered new interface driver usbserial<br />[&nbsp; &nbsp;10.950000] usbcore: registered new interface driver usbserial_generic<br />[&nbsp; &nbsp;10.970000] usbserial: USB Serial support registered for generic<br />[&nbsp; &nbsp;11.030000] xt_time: kernel timezone is -0000<br />[&nbsp; &nbsp;11.050000] usbcore: registered new interface driver cdc_ether<br />[&nbsp; &nbsp;11.150000] cfg80211: Calling CRDA to update world regulatory domain<br />[&nbsp; &nbsp;11.150000] cfg80211: World regulatory domain updated:<br />[&nbsp; &nbsp;11.160000] cfg80211:&nbsp; DFS Master region: unset<br />[&nbsp; &nbsp;11.160000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;11.170000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;11.180000] cfg80211:&nbsp; &nbsp;(2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;11.190000] cfg80211:&nbsp; &nbsp;(2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;11.200000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;11.210000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;11.210000] cfg80211:&nbsp; &nbsp;(5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)<br />[&nbsp; &nbsp;11.220000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)<br />[&nbsp; &nbsp;11.230000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)<br />[&nbsp; &nbsp;11.410000] PPP generic driver version 2.4.2<br />[&nbsp; &nbsp;11.430000] NET: Registered protocol family 24<br />[&nbsp; &nbsp;11.590000] usbcore: registered new interface driver option<br />[&nbsp; &nbsp;11.600000] usbserial: USB Serial support registered for GSM modem (1-port)<br />[&nbsp; &nbsp;11.630000] ath: EEPROM regdomain: 0x0<br />[&nbsp; &nbsp;11.630000] ath: EEPROM indicates default country code should be used<br />[&nbsp; &nbsp;11.630000] ath: doing EEPROM country-&gt;regdmn map search<br />[&nbsp; &nbsp;11.630000] ath: country maps to regdmn code: 0x3a<br />[&nbsp; &nbsp;11.630000] ath: Country alpha2 being used: US<br />[&nbsp; &nbsp;11.630000] ath: Regpair used: 0x3a<br />[&nbsp; &nbsp;11.650000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;<br />[&nbsp; &nbsp;11.650000] cfg80211: Calling CRDA for country: US<br />[&nbsp; &nbsp;11.660000] ieee80211 phy0: Atheros AR9340 Rev:2 mem=0xb8100000, irq=47<br />[&nbsp; &nbsp;11.680000] cfg80211: Regulatory domain changed to country: US<br />[&nbsp; &nbsp;11.690000] cfg80211:&nbsp; DFS Master region: FCC<br />[&nbsp; &nbsp;11.690000] cfg80211:&nbsp; &nbsp;(start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (dfs_cac_time)<br />[&nbsp; &nbsp;11.700000] cfg80211:&nbsp; &nbsp;(2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;11.710000] cfg80211:&nbsp; &nbsp;(5170000 KHz - 5250000 KHz @ 80000 KHz), (N/A, 1700 mBm), (N/A)<br />[&nbsp; &nbsp;11.720000] cfg80211:&nbsp; &nbsp;(5250000 KHz - 5330000 KHz @ 80000 KHz), (N/A, 2300 mBm), (0 s)<br />[&nbsp; &nbsp;11.730000] cfg80211:&nbsp; &nbsp;(5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 3000 mBm), (N/A)<br />[&nbsp; &nbsp;11.740000] cfg80211:&nbsp; &nbsp;(57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 4000 mBm), (N/A)<br />[&nbsp; &nbsp;17.970000] IPv6: ADDRCONF(NETDEV_UP): wlan0: link is not ready<br />[&nbsp; &nbsp;20.060000] IPv6: ADDRCONF(NETDEV_UP): eth0: link is not ready<br />[&nbsp; &nbsp;20.060000] device eth0 entered promiscuous mode<br />[&nbsp; &nbsp;20.080000] IPv6: ADDRCONF(NETDEV_UP): br-lan: link is not ready<br />[&nbsp; &nbsp;25.420000] eth0: link up (100Mbps/Full duplex)<br />[&nbsp; &nbsp;25.420000] br-lan: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;25.430000] br-lan: port 1(eth0) entered forwarding state<br />[&nbsp; &nbsp;25.430000] IPv6: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready<br />[&nbsp; &nbsp;25.450000] IPv6: ADDRCONF(NETDEV_CHANGE): br-lan: link becomes ready<br />[&nbsp; &nbsp;27.430000] br-lan: port 1(eth0) entered forwarding state</p><p>Output of lsusb:<br />Bus 001 Device 001: ID 1d6b:0002</p><p>Output of lspci:<br />nothing</p><p>proc/iomem:<br />00000000-03ffffff : System RAM<br />&nbsp; 00060000-00290a27 : Kernel code<br />&nbsp; 00290a28-0032d3c3 : Kernel data<br />10000000-13ffffff : mem_base<br />&nbsp; 10000000-13ffffff : PCI memory space<br />14000000-14000fff : cfg_base<br />&nbsp; 14000000-14000fff : cfg_base<br />18020000-180200ff : serial8250.0<br />&nbsp; 18020000-1802001f : serial<br />18060008-1806000f : ath79-wdt<br />&nbsp; 18060008-1806000f : ath79-wdt<br />180c0000-180c0fff : crp_base<br />&nbsp; 180c0000-180c0fff : crp_base<br />180f0000-180f00ff : ctrl_base<br />&nbsp; 180f0000-180f00ff : ctrl_base<br />18100000-1811ffff : ar934x_wmac<br />19000000-190001ff : mac_base<br />&nbsp; 19000000-190001ff : mdio_base<br />1b000000-1b0001ff : ehci-platform<br />&nbsp; 1b000000-1b0001ff : ehci-platform<br />1f000000-1fffffff : ath79-spi</p><br /><p>Has anybody had any similar problem?</p><p>Thanks in advance,</p><p>André</p>											<p class="post-edited">(Last edited by <strong>a.cardote</strong> on 28 Oct 2014, 15:45)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p258610">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">kem</div>
					<div class="post-datetime">
						24 Dec 2014, 21:20					</div>
				</div>
				<div class="post-content content">
					<p>Just curious if you got anywhere with this issue?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p259665">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">suncatalyst</div>
					<div class="post-datetime">
						3 Jan 2015, 12:24					</div>
				</div>
				<div class="post-content content">
					<p>im also curious about this as i was about to buy this board and match it up with the corresponding 2.4ghz card<br />in the mini-pcie slot.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>