<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Copying complete setup between two openwrt routers</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Jan 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p65146">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">DavidBrown</div>
					<div class="post-datetime">
						14 Mar 2008, 10:06					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve just been having a lot of fun configuring a LinkSys WRT54GL with Kamikaze 7.09, xwrt, and a particular setup for the VLANs (each port is on a different VLAN for different purposes).&nbsp; I haven&#039;t yet tested it live, but it is all working as hoped in my test network.&nbsp; It&#039;s nice to work with such a flexible firewall/router rather than the default LinkSys firmware.</p><p>Anyway, once I&#039;ve got this setup complete, I&#039;ve got to do the same thing on two other WRT54GL&#039;s - they should be configured the same way, except for some minor details like the passwords.&nbsp; Is there any convenient way to do this?&nbsp; Perhaps using &quot;mtd&quot; to get a complete dump of the flash, and using that directly on the other two boxes?&nbsp; I&#039;ve kept a list of the packages I&#039;ve installed, and the changes I&#039;ve made to the files, but I&#039;m hoping there&#039;s a faster and less error-prone way to do the copying.</p><p>mvh.,</p><p>David</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65178">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Del</div>
					<div class="post-datetime">
						14 Mar 2008, 22:39					</div>
				</div>
				<div class="post-content content">
					<p>There may be built-in functionality for this, if so then somebody else should answer you. I imagine that a simple way to do what you want is to make a copy of flash content on your PC using, e.g. rsync and ssh. Install the same .bin file on the new router, and get ssh working telneting in, and then sync it with your copy using rsync and ssh from your PC to the router. Shouldn&#039;t be too cumbersome, and it makes sense to me to use standard tools like rsync and ssh since it comes handy in general.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65179">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">DavidBrown</div>
					<div class="post-datetime">
						14 Mar 2008, 22:56					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I&#039;ve thought of doing something like that.&nbsp; In particular, I planned to scp the files that had bigger changes.&nbsp; rsync might make it a little easier, however - thanks for the idea.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65246">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">ratbug</div>
					<div class="post-datetime">
						16 Mar 2008, 21:05					</div>
				</div>
				<div class="post-content content">
					<p>Done, multiple times here </p><p><a href="http://forum.openwrt.org/viewtopic.php?id=9122">http://forum.openwrt.org/viewtopic.php?id=9122</a>.</p><p>search is your best friend here in the Openwrt world</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65248">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">DavidBrown</div>
					<div class="post-datetime">
						16 Mar 2008, 21:30					</div>
				</div>
				<div class="post-content content">
					<p>Many thanks - sorry for not searching well enough before posting.</p><p>Will the same set work for Kamikaze - the thread you linked is for White Russian?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65249">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">ratbug</div>
					<div class="post-datetime">
						16 Mar 2008, 21:45					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>DavidBrown wrote:</cite><blockquote><p>Will the same set work for Kamikaze - the thread you linked is for White Russian?</p></blockquote></div><p>yes, that should work</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p65277">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">DavidBrown</div>
					<div class="post-datetime">
						17 Mar 2008, 15:11					</div>
				</div>
				<div class="post-content content">
					<p>I followed the instructions given in <a href="http://forum.openwrt.org/viewtopic.php?id=9122">http://forum.openwrt.org/viewtopic.php?id=9122</a> (reproduced below for convenience) to do the backup - I&#039;ll try the restore tomorrow when I get another router.&nbsp; I&#039;m a little confused as to why only blocks 1 and 3 are needed in the backup - does the jffs block (and block 2) not also need backup?&nbsp; Or does block 1 contain these two (in the same way that an extended partition contains logical partitions on a hard disk)?&nbsp; &quot;cat /proc/mtd&quot; shows the blocks, but not any hierarchical information.</p><p>mvh.,</p><p>David</p><br /><br /><br /><p>BACKUP</p><p>mount -o remount,ro /dev/mtdblock/4 /jffs<br />dd if=/dev/mtdblock/1 &gt; /tmp/wrt-linux.trx<br />mount -o remount,rw /dev/mtdblock/4 /jffs<br />dd if=/dev/mtdblock/3 &gt; /tmp/wrt-nvram.bin</p><p>----------------------------------<br />RESTORE</p><p>dd if=/tmp/wrt-nvram.bin of=/dev/mtdblock/3<br />mount -o remount,ro /dev/mtdblock/4 /<br />mtd -r write /tmp/wrt-linux.trx linux</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>