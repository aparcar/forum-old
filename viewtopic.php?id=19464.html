<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> wrt54GL 2.6 broadcom wifi AP mode</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 30 Mar 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p84258">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">grisa2005</div>
					<div class="post-datetime">
						20 Mar 2009, 15:49					</div>
				</div>
				<div class="post-content content">
					<p>Hi ALL!</p><p>Are you tired of having reports with problems related to kernel 2.6 &amp; broadcom wifi? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>This time I would rather like to share some success story!</p><p>- WRT54GL ver 1.1<br />- Linux galuska 2.6.28.7 #1 Sun Mar 15 20:28:01 CET 2009 mips unknown<br />- kamikaze trunk r14871<br />- using broadcom firmware 478.104</p><p>root@galuska:~# uptime<br /> 14:29:55 up 4 days, 16:28, load average: 0.00, 0.00, 0.00</p><p>root@galuska:~# uname -a<br />Linux galuska 2.6.28.7 #1 Sun Mar 15 20:28:01 CET 2009 mips unknown</p><p>wifi runs stable in AP mode for several clients using wpa2/psk<br />the throughput is around 2.2MB/sec between local hosts, which seems ok for me.</p><p>Everything is running fine except I&#039;m getting some<br />b43-phy0 ERROR: PHY transmission error<br />in the log.<br />But I don&#039;t bother with this <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>I have heard about some problems of ssh hangs <br />through wifi connection, or something like that.<br />But for me it seems very stable at the moment.<br />I was able to watch 1080p movie through wifi<br />from my other lan connected computer.</p><p>Earlier a I tried 8.09 RC1, 8.09RC2, 8.09 with kernel 2.6.25<br />all of them were failed to deliver a stable enough wifi for daily use.<br />If you need more info I can post my config, but nothing really serious.<br />Maybe I enabled some crypto stuff along with something related to ssb. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />I can check the exact config parameters later..</p><p>Cheers,<br />Andras</p><p>here is my dmesg output:</p><p>oop registered<br />io scheduler deadline registered (default)<br />Serial: 8250/16550 driver2 ports, IRQ sharing enabled<br />serial8250: ttyS0 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250: ttyS1 at MMIO 0x0 (irq = 3) is a 16550A<br />serial8250 serial8250.0: unable to register port at index 0 (IO0 MEMb8000300 IRQ3): -28<br />serial8250 serial8250.0: unable to register port at index 1 (IO0 MEMb8000400 IRQ3): -28<br />b44.c:v2.0<br />eth0: Broadcom 44xx/47xx 10/100BaseT Ethernet 00:16:b6:d9:a2:a9<br />flash init: 0x1c000000 0x02000000<br />Physically mapped flash: Found 1 x16 devices at 0x0 in 16-bit bank<br />Physically mapped flash: Found an alias at 0x400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0xc00000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1000000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1400000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1800000 for the chip at 0x0<br />Physically mapped flash: Found an alias at 0x1c00000 for the chip at 0x0<br /> Intel/Sharp Extended Query Table at 0x0035<br />Using auto-unlock on power-up/resume<br />cfi_cmdset_0001: Erase suspend on write enabled<br />erase region 0: offset=0x0,size=0x2000,blocks=8<br />erase region 1: offset=0x10000,size=0x10000,blocks=63<br />Flash device: 0x400000 at 0x1fc00000<br />bootloader size: 262144<br />Creating 4 MTD partitions on &quot;Physically mapped flash&quot;:<br />0x00000000-0x00040000 : &quot;cfe&quot;<br />0x00040000-0x003f0000 : &quot;linux&quot;<br />0x000ff000-0x003f0000 : &quot;rootfs&quot;<br />mtd: partition &quot;rootfs&quot; doesn&#039;t start on an erase block boundary -- force read-only<br />mtd: partition &quot;rootfs&quot; set to be root filesystem<br />mtd: partition &quot;rootfs_data&quot; created automatically, ofs=320000, len=D0000 <br />0x00320000-0x003f0000 : &quot;rootfs_data&quot;<br />0x003f0000-0x00400000 : &quot;nvram&quot;<br />TCP vegas registered<br />NET: Registered protocol family 17<br />802.1Q VLAN Support v1.8 Ben Greear &lt;greearb@candelatech.com&gt;<br />All bugs added by David S. Miller &lt;davem@redhat.com&gt;<br />VFS: Mounted root (squashfs filesystem) readonly.<br />Freeing unused kernel memory: 128k freed<br />Please be patient, while OpenWrt loads ...<br />Algorithmics/MIPS FPU Emulator v1.5<br />diag: Detected &#039;Linksys WRT54G/GS/GL&#039;<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />roboswitch: Probing device eth0: found!<br />b44: eth0: powering down PHY<br />mini_fo: using base directory: /<br />mini_fo: using storage directory: /jffs<br />b44: eth0: Link is up at 100 Mbps, full duplex.<br />b44: eth0: Flow control is off for TX and off for RX.<br />device eth0.0 entered promiscuous mode<br />device eth0 entered promiscuous mode<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0.0) entering forwarding state<br />ocf: module license &#039;BSD&#039; taints kernel.<br />br-lan: port 1(eth0.0) entering disabled state<br />br-lan: topology change detected, propagating<br />br-lan: port 1(eth0.0) entering forwarding state<br />cfg80211: Using static regulatory domain info<br />cfg80211: Regulatory domain: US<br />&nbsp; &nbsp; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)<br />&nbsp; &nbsp; (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)<br />&nbsp; &nbsp; (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)<br />&nbsp; &nbsp; (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)<br />&nbsp; &nbsp; (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)<br />&nbsp; &nbsp; (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)<br />&nbsp; &nbsp; (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)<br />cfg80211: Calling CRDA for country: US<br />b43-phy0: Broadcom 5352 WLAN found (core revision 9)<br />phy0: Selected rate control algorithm &#039;minstrel&#039;<br />Broadcom 43xx driver loaded [ Features: PLR, Firmware-ID: FW13 ]<br />Broadcom 43xx-legacy driver loaded [ Features: PLRID, Firmware-ID: FW10 ]<br />PPP generic driver version 2.4.2<br />ip_tables: (C) 2000-2006 Netfilter Core Team<br />nf_conntrack version 0.5.0 (256 buckets, 1024 max)<br />CONFIG_NF_CT_ACCT is deprecated and will be removed soon. Please use<br />nf_conntrack.acct=1 kernel paramater, acct=1 nf_conntrack module option or<br />sysctl net.netfilter.nf_conntrack_acct=1 to enable it.<br />IMQ driver loaded successfully.<br />&nbsp; &nbsp; Hooking IMQ before NAT on PREROUTING.<br />&nbsp; &nbsp; Hooking IMQ after NAT on POSTROUTING.<br />input: b43-phy0 as /devices/virtual/input/input0<br />b43 ssb0:3: firmware: requesting b43/ucode5.fw<br />b43 ssb0:3: firmware: requesting b43/pcm5.fw<br />b43 ssb0:3: firmware: requesting b43/b0g0initvals5.fw<br />b43 ssb0:3: firmware: requesting b43/b0g0bsinitvals5.fw<br />b43-phy0: Loading firmware version 478.104 (2008-07-01 00:50:23)<br />Registered led device: b43-phy0::tx<br />Registered led device: b43-phy0::rx<br />Registered led device: b43-phy0::radio<br />b43-phy0: Radio turned on by software<br />device wlan0 entered promiscuous mode<br />wlan0: deauthenticating by local choice (reason=3)<br />br-lan: port 2(wlan0) entering disabled state<br />input: b43-phy0 as /devices/virtual/input/input1<br />b43-phy0: Loading firmware version 478.104 (2008-07-01 00:50:23)<br />Registered led device: b43-phy0::tx<br />Registered led device: b43-phy0::rx<br />Registered led device: b43-phy0::radio<br />br-lan: topology change detected, propagating<br />br-lan: port 2(wlan0) entering forwarding state<br />can&#039;t load conntrack support for proto=10173<br />can&#039;t load conntrack support for proto=10173</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84272">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">buildster</div>
					<div class="post-datetime">
						20 Mar 2009, 20:37					</div>
				</div>
				<div class="post-content content">
					<p>Appreciate your report... good news! The work/fixes hauke and mb put in recently made a lot of progress.</p><p>Could you also try wifi client mode when you get a chance? I don&#039;t have much luck on a WHR-HP-G54, yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84276">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">grisa2005</div>
					<div class="post-datetime">
						20 Mar 2009, 21:08					</div>
				</div>
				<div class="post-content content">
					<p>I went through my post again and I forgot the most important, the reason I posted.</p><p>I wanted to say a BIG, BIG(...) THANK YOU for all the members who put a lot of effort<br />making openwrt better. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>buildster: Sure, I&#039;ll give it shot in the following days and report back. <br />Anyway client mode is already supposed to work, isn&#039;t it? Please,<br />forgive me, if it&#039;s not the case..</p><p>BR,<br />Andras</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84296">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">zwirek75</div>
					<div class="post-datetime">
						21 Mar 2009, 10:41					</div>
				</div>
				<div class="post-content content">
					<p>Do you know if there are any chances to make it work on WL700ge ?<br />I tried to install some pre-8.09 2.6. builds, but it always failed, so I had to stick to 8.09 2.4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p84302">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">neutron</div>
					<div class="post-datetime">
						21 Mar 2009, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>I would like to confirm what grisa2005 has just said: the newest trunk seems to work completely fine with the 2.6 kernel-broadcom WiFi combo. I have an Asus WL500gP v1, and I am running Kamikaze r14954. I have tested WPA2-PSK and WPA2-enterprise so far, downloading from the Internet at 400 KB/sec for half a day. (Actually I never use the WLAN to connect two PCs, so I haven&#039;t done &#039;real&#039; performance measurements and stress tests.) I haven&#039;t seen a single hiccup like with some trunk build from ~1.5 weeks ago, nor b43-phy0 ERROR: PHY transmission error in the log. My previous trunk build caused reauthentication after some megabytes of traffic, so it was completely useless for WPAx-enterprise, and barely tolerable for WPAx-PSK. It really seems that much has been improved since then!</p><p>I would also like to thank the developers for their hard work on fixing this nasty issue. I know you put very much effort into this, and I think that many people should be grateful. I am so happy that the struggle turned out to be fruitful in the end...</p><p>BR,<br />Adam</p><p><em>EDIT: Beware all of you who have accents in your names...</em></p>											<p class="post-edited">(Last edited by <strong>neutron</strong> on 21 Mar 2009, 13:15)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85692">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">aboaboit</div>
					<div class="post-datetime">
						12 Apr 2009, 21:29					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>neutron wrote:</cite><blockquote><p>I would like to confirm what grisa2005 has just said: the newest trunk seems to work completely fine with the 2.6 kernel-broadcom WiFi combo. I have an Asus WL500gP v1, and I am running Kamikaze r14954.</p></blockquote></div><p>Second that: recent trunks have gotten better and better, first in the single client scenario and now, to the best of my limited testing, also in multiclient.</p><p>My main pc was running ktorrent saturating the uplink, the company laptop was transferring some large files from my main pc at about 350KB/s and an older laptop was running geexbox and playing a tv show from the main pc. Except for a noticeable load of 5 on the router, no errors in the log and good performance in casual browsing. Now, if I could enable the cryptochip for wpa... that would be a good move :-)</p><p>For the record, I am running a self-compiled r15208 also on a v1.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85737">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">grisa2005</div>
					<div class="post-datetime">
						13 Apr 2009, 20:59					</div>
				</div>
				<div class="post-content content">
					<p>aboaboit:</p><p>I had 2000kb/sec transfer rate when copying file from my other lan computer.</p><p>However, yesterdat I played a movie trough wireless for 2 hours(for testing), and in the end, the wireless<br />has been dropped, and nothing I could do about wireless only reboot the router.<br />It was an asus wl500gp this time with openwrt trunk r15213<br />So all in all, still has some work to do, but anyway very good progress.<br />I think it is ok for surfing..</p><p>grisa2005</p>											<p class="post-edited">(Last edited by <strong>grisa2005</strong> on 13 Apr 2009, 20:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85738">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">aboaboit</div>
					<div class="post-datetime">
						13 Apr 2009, 21:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>grisa2005 wrote:</cite><blockquote><p>aboaboit:<br />I had 2000kb/sec transfer rate when copying file from my other lan computer.<br />grisa2005</p></blockquote></div><p>Let me guess: no WPA?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85784">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">grisa2005</div>
					<div class="post-datetime">
						14 Apr 2009, 00:53					</div>
				</div>
				<div class="post-content content">
					<p>abo:</p><p>Look my first post:</p><p>&gt; wifi runs stable in AP mode for several clients using wpa2/psk<br />&gt; the throughput is around 2.2MB/sec between local hosts, which seems ok for me.</p><p><img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>i think I enabled some ssb thing in openwrt menuconfig.</p><p>grisa2005</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85788">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">aboaboit</div>
					<div class="post-datetime">
						14 Apr 2009, 00:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>grisa2005 wrote:</cite><blockquote><p>i think I enabled some ssb thing in openwrt menuconfig.</p></blockquote></div><p>Right, sorry for missing the first post; I did the same for SSB but even loading the OCF module gives no speed boost. Could you attach your config here? (or via email / pm) Thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85928">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						15 Apr 2009, 19:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>aboaboit wrote:</cite><blockquote><p>Let me guess: no WPA?</p></blockquote></div><p>It works for me, even with WPA2-PSK, as fast as wl.o from 2.4...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85950">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						15 Apr 2009, 22:48					</div>
				</div>
				<div class="post-content content">
					<p>Just my couple of cents, </p><p>The wireless driver in trunk works much better now, but there&#039;re still some problems persists. I just had to restart wireless on a unit, because client could not authenticate to access point for some unknown reason. And the speed is not the same, in my particular setup a client connected to 2.6 version of openwrt can get as much as 11Mbits/sec and the same client connected to 2.4 version of openwrt gets around 23 Mbits/sec. (Measured by iperf).</p><p>But again, I would to thank developers for such good work, of making this driver usable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85981">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						16 Apr 2009, 10:44					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nas wrote:</cite><blockquote><p>The wireless driver in trunk works much better now, but there&#039;re still some problems persists. I just had to restart wireless on a unit, because client could not authenticate to access point for some unknown reason. And the speed is not the same, in my particular setup a client connected to 2.6 version of openwrt can get as much as 11Mbits/sec and the same client connected to 2.4 version of openwrt gets around 23 Mbits/sec. (Measured by iperf).</p></blockquote></div><p>Is by chance a BCM4318 card? They have known transmission problems with b43, which makes them unstable in master mode...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p85994">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">nas</div>
					<div class="post-datetime">
						16 Apr 2009, 17:04					</div>
				</div>
				<div class="post-content content">
					<p>Well, I can&#039;t tell you for sure, because the b43 driver says it&#039;s 5352 (b43-phy0: Broadcom 5352 WLAN found (core revision 9)) and at the same time, the wiki page <a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)Hardware(2f)Linksys(2f)WRT54GL.html">http://oldwiki.openwrt.org/OpenWrtDocs( … T54GL.html</a> states 43xx radio chip.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86020">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						16 Apr 2009, 23:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>nas wrote:</cite><blockquote><p>Well, I can&#039;t tell you for sure, because the b43 driver says it&#039;s 5352 (b43-phy0: Broadcom 5352 WLAN found (core revision 9)) and at the same time, the wiki page <a href="http://oldwiki.openwrt.org/OpenWrtDocs(2f)Hardware(2f)Linksys(2f)WRT54GL.html">http://oldwiki.openwrt.org/OpenWrtDocs( … T54GL.html</a> states 43xx radio chip.</p></blockquote></div><p>Yes, it&#039;s basically a 43xx MAC controller embedded into the CPU... it might suffer from the same problems as the 4318, I&#039;ll take a look at one of them one of these days.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86736">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">macjonesnz</div>
					<div class="post-datetime">
						27 Apr 2009, 17:16					</div>
				</div>
				<div class="post-content content">
					<p>Can anyone tell me if these b43 stability problems go away when using the open source broadcom firmware <a href="http://www.ing.unibs.it/openfwwf/">http://www.ing.unibs.it/openfwwf/</a> in place of the broadcom binary firmware 478.104.</p><p>Mac<br />New Zealand</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p86748">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">ath</div>
					<div class="post-datetime">
						27 Apr 2009, 19:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>macjonesnz wrote:</cite><blockquote><p>Can anyone tell me if these b43 stability problems go away when using the open source broadcom firmware <a href="http://www.ing.unibs.it/openfwwf/">http://www.ing.unibs.it/openfwwf/</a> in place of the broadcom binary firmware 478.104.</p></blockquote></div><p>No, the open source firmware has still some trouble with b43 in kamikaze when running in master mode (but runs perfectly stable on x86), it will apparently hang the wireless card.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>