<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> CMAKE OpenWRT SYSTEM check?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 24 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p279270">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">peteruithoven</div>
					<div class="post-datetime">
						8 Jun 2015, 13:52					</div>
				</div>
				<div class="post-content content">
					<p>Is there a proper way to check whether a build is done for OpenWRT in CMake? </p><p>We want to compile a package on multiple platforms (OpenWRT, OS X, Linux) and for OpenWRT specifically we have a dependency on uci. </p><p>We where hoping that there would be a CMake variable that we could use to determine whether where building for OpenWRT, but we can&#039;t find one. <br />CMake variables: <a href="http://www.cmake.org/Wiki/CMake_Useful_Variables">http://www.cmake.org/Wiki/CMake_Useful_Variables</a></p><p>The place where most general OpenWRT variables seem to be set: <br /><a href="http://git.openwrt.org/?p=14.07/openwrt.git;a=blob;f=include/cmake.mk;hb=179bab8b1700d74b28cc6cd25322f9a1ad670107#l39">http://git.openwrt.org/?p=14.07/openwrt … 670107#l39</a></p><p>Out best hack at the moment is using:<br />if(CMAKE_SYSTEMNAME STREQUAL Linux AND CMAKE_CROSSCOMPILING) <br />endif</p><p>A way to check wheter uci was enables would also work, but a general openwrt check would still be nice.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279610">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mkschreder</div>
					<div class="post-datetime">
						10 Jun 2015, 19:12					</div>
				</div>
				<div class="post-content content">
					<p>You can override Package/compile step and set your variables from there.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279615">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">peteruithoven</div>
					<div class="post-datetime">
						10 Jun 2015, 19:31					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, that&#039;s a great tip! </p><p>For others, it&#039;s the following section in the OpenWRT specific Makefile of the package. <br /><a href="http://wiki.openwrt.org/doc/devel/packages#buildcompile_optional">http://wiki.openwrt.org/doc/devel/packa … e_optional</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p279619">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">peteruithoven</div>
					<div class="post-datetime">
						10 Jun 2015, 19:33					</div>
				</div>
				<div class="post-content content">
					<p>But, isn&#039;t it weird that there isn&#039;t such a variable already set by the OpenWRT buildroot?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>