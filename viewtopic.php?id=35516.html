<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [bcm63xx] Usb2 not working on Huawei HG553</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 13 Apr 2018 and 18 Apr 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=35516&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=35516&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=35516&amp;p=7.html">7</a></li></ul></nav></div>
			
		
		
			<article class="post" id="p160983">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						15 Mar 2012, 20:01					</div>
				</div>
				<div class="post-content content">
					<p>Hi, i&#039;m having problems with the usb ports of my HG553 (bcm63xx), looks like a common problem with this and similar models, 1 port is working at usb 1.1 and the other one is unresponsive, i have tried a lot of revisions (even an early backtrack beta) and always have the same results, i found a partial source of the original firmware and all &quot;seems&quot; correct (interrupts, usb host registers, etc),&nbsp; here is the output of a trunk revision compiled with USB_CONFIG_DEBUG, looks like there is a problem with ehci drivers:</p><p>root@OpenWrt:/# dmesg | grep usb<br /></p><div class="codebox"><pre><code>[   11.476000] usbcore: registered new interface driver usbfs
[   11.480000] usbcore: registered new interface driver hub
[   11.492000] usbcore: registered new device driver usb
[   13.616000] drivers/usb/core/inode.c: creating file &#039;devices&#039;
[   13.620000] drivers/usb/core/inode.c: creating file &#039;001&#039;
[   13.676000] usb usb1: default language 0x0409
[   13.676000] usb usb1: udev 1, busnum 1, minor = 0
[   13.676000] usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
[   13.680000] usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1
[   13.688000] usb usb1: Product: BCM63XX integrated EHCI controller
[   13.696000] usb usb1: Manufacturer: Linux 3.0.18 ehci_hcd
[   13.700000] usb usb1: SerialNumber: bcm63xx
[   13.708000] usb usb1: usb_probe_device
[   13.708000] usb usb1: configuration #1 chosen from 1 choice
[   13.708000] usb usb1: adding 1-0:1.0 (config #1, interface 0)
[   13.708000] hub 1-0:1.0: usb_probe_interface
[   13.708000] hub 1-0:1.0: usb_probe_interface - got id
[   13.716000] drivers/usb/core/inode.c: creating file &#039;001&#039;
[   14.152000] drivers/usb/core/inode.c: creating file &#039;002&#039;
[   14.228000] usb usb2: default language 0x0409
[   14.228000] usb usb2: udev 1, busnum 2, minor = 128
[   14.228000] usb usb2: New USB device found, idVendor=1d6b, idProduct=0001
[   14.232000] usb usb2: New USB device strings: Mfr=3, Product=2, SerialNumber=1
[   14.240000] usb usb2: Product: BCM63XX integrated OHCI controller
[   14.248000] usb usb2: Manufacturer: Linux 3.0.18 ohci_hcd
[   14.252000] usb usb2: SerialNumber: bcm63xx
[   14.260000] usb usb2: usb_probe_device
[   14.260000] usb usb2: configuration #1 chosen from 1 choice
[   14.260000] usb usb2: adding 2-0:1.0 (config #1, interface 0)
[   14.260000] hub 2-0:1.0: usb_probe_interface
[   14.260000] hub 2-0:1.0: usb_probe_interface - got id
[   14.268000] drivers/usb/core/inode.c: creating file &#039;001&#039;</code></pre></div><p>root@OpenWrt:/# dmesg | grep hub<br /></p><div class="codebox"><pre><code>[   11.480000] usbcore: registered new interface driver hub
[   13.708000] hub 1-0:1.0: usb_probe_interface
[   13.708000] hub 1-0:1.0: usb_probe_interface - got id
[   13.708000] hub 1-0:1.0: USB hub found
[   13.712000] hub 1-0:1.0: 2 ports detected
[   13.716000] hub 1-0:1.0: standalone hub
[   13.716000] hub 1-0:1.0: individual port power switching
[   13.716000] hub 1-0:1.0: individual port over-current protection
[   13.716000] hub 1-0:1.0: power on to power good time: 20ms
[   13.716000] hub 1-0:1.0: local power source is good
[   13.716000] hub 1-0:1.0: enabling power on all ports
[   13.816000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0000
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.a 02000202 POTPGT=2 NPS NDP=2(1)
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.b 00000000 PPCM=0000 DR=0000
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.status 00008000 DRWE
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.portstatus [0] 0x00000100 PPS
[   14.260000] hub 2-0:1.0: usb_probe_interface
[   14.260000] hub 2-0:1.0: usb_probe_interface - got id
[   14.260000] hub 2-0:1.0: USB hub found
[   14.264000] hub 2-0:1.0: 1 port detected
[   14.268000] hub 2-0:1.0: standalone hub
[   14.268000] hub 2-0:1.0: ganged power switching
[   14.268000] hub 2-0:1.0: global over-current protection
[   14.268000] hub 2-0:1.0: power on to power good time: 4ms
[   14.268000] hub 2-0:1.0: local power source is good
[   14.268000] hub 2-0:1.0: no over-current condition exists
[   14.268000] hub 2-0:1.0: enabling power on all ports
[   14.408000] hub 2-0:1.0: state 7 ports 1 chg 0000 evt 0000</code></pre></div><p>root@OpenWrt:/# dmesg | grep ohci<br /></p><div class="codebox"><pre><code>[   14.140000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   14.144000] ohci_hcd: block sizes: ed 64 td 64
[   14.144000] bcm63xx_ohci bcm63xx_ohci.0: BCM63XX integrated OHCI controller
[   14.152000] bcm63xx_ohci bcm63xx_ohci.0: new USB bus registered, assigned bus number 2
[   14.160000] bcm63xx_ohci bcm63xx_ohci.0: irq 13, io mem 0xfffe1400
[   14.168000] bcm63xx_ohci bcm63xx_ohci.0: created debug files
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: OHCI controller state
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: OHCI 1.0, NO legacy support registers
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: control 0x083 HCFS=operational CBSR=3
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: cmdstatus 0x00000 SOC=0
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: intrstatus 0x00000004 SF
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: intrenable 0x8000005a MIE RHSC UE RD WDH
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: hcca frame #0005
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.a 02000202 POTPGT=2 NPS NDP=2(1)
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.b 00000000 PPCM=0000 DR=0000
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.status 00008000 DRWE
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.portstatus [0] 0x00000100 PPS
[   14.248000] usb usb2: Manufacturer: Linux 3.0.18 ohci_hcd</code></pre></div><p>root@OpenWrt:/# dmesg | grep ehci<br /></p><div class="codebox"><pre><code>[   13.604000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   13.612000] ehci_hcd: block sizes: qh 64 qtd 96 itd 160 sitd 96
[   13.612000] bcm63xx_ehci bcm63xx_ehci.0: BCM63XX integrated EHCI controller
[   13.620000] bcm63xx_ehci bcm63xx_ehci.0: new USB bus registered, assigned bus number 1
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: park 0
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: reset command 0080b02  park=3 ithresh=8 period=1024 Reset HALT
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: ...powerdown ports...
[   13.652000] bcm63xx_ehci bcm63xx_ehci.0: irq 18, io mem 0xfffe1300
[   13.656000] bcm63xx_ehci bcm63xx_ehci.0: reset command 0080b02  park=3 ithresh=8 period=1024 Reset HALT
[   13.656000] bcm63xx_ehci bcm63xx_ehci.0: init command 0010001 (park)=0 ithresh=1 period=1024 RUN
[   13.668000] bcm63xx_ehci bcm63xx_ehci.0: USB 2.0 started, EHCI 1.00, overcurrent ignored
[   13.696000] usb usb1: Manufacturer: Linux 3.0.18 ehci_hcd</code></pre></div><p>root@OpenWrt:/# dmesg<br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.0.18 (max@max-desktop) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Thu Mar 15 16:44:18 CET 2012
[    0.000000] Detected Broadcom 0x6358 CPU revision a1
[    0.000000] CPU frequency is 300 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 40 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xbe000000
[    0.000000] board_bcm963xx: CFE version: 100.48.56-48.46
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a010 (Broadcom BMIPS4350)
[    0.000000] board_bcm963xx: board name: HW553
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00004000
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 8027b5d0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16256 pages, LIFO batch:3
[    0.000000] Reserving 0MB of memory at 0MB for crashkernel
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
[    0.000000] Primary data cache 16kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.000000] Memory: 62048k/65536k available (2115k kernel code, 3488k reserved, 363k data, 172k init, 0k highmem)
[    0.000000] NR_IRQS:128
[    0.000000] Calibrating delay loop... 299.26 BogoMIPS (lpj=598528)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.052000] NET: Registered protocol family 16
[    0.068000] registering PCI controller with io_map_base unset
[    0.080000] bio: create slab &lt;bio-0&gt; at 0
[    0.088000] pci 0000:00:01.0: [14e4:4318] type 0 class 0x000280
[    0.092000] pci 0000:00:01.0: reg 10: [mem 0x00000000-0x00001fff]
[    0.104000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x30001fff]
[    0.108000] pci 0000:00:01.0: BAR 0: set to [mem 0x30000000-0x30001fff] (PCI address [0x30000000-0x30001fff])
[    0.112000] Switching to clocksource MIPS
[    0.124000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[    0.132000] PCI: Setting latency timer of device 0000:00:01.0 to 64
[    0.152000] ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x0D, vendor 0x4243)
[    0.152000] ssb: Core 1 found: IEEE 802.11 (cc 0x812, rev 0x09, vendor 0x4243)
[    0.152000] ssb: Core 2 found: PCI (cc 0x804, rev 0x0C, vendor 0x4243)
[    0.152000] ssb: Core 3 found: PCMCIA (cc 0x80D, rev 0x07, vendor 0x4243)
[    0.196000] ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0
[    0.204000] NET: Registered protocol family 2
[    0.208000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.216000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.224000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.232000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.240000] TCP reno registered
[    0.240000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.248000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.256000] NET: Registered protocol family 1
[    0.260000] PCI: CLS 0 bytes, default 32
[    0.264000] audit: initializing netlink socket (disabled)
[    0.268000] type=2000 audit(0.268:1): initialized
[    0.276000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.284000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.296000] msgmni has been set to 121
[    0.300000] io scheduler noop registered
[    0.304000] io scheduler deadline registered (default)
[    0.308000] bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0100 (irq = 10) is a bcm63xx_uart
[    0.316000] console [ttyS0] enabled, bootconsole disabled
[    0.332000] bcm963xx-flash bcm963xx-flash.0: 0x02000000 at 0x1e000000
[    0.340000] bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x002101
[    0.352000] bcm963xx: Found an alias at 0x1000000 for the chip at 0x0
[    0.352000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.356000]   Amd/Fujitsu Extended Query version 1.3.
[    0.360000] number of CFI chips: 1
[    0.364000] bcm963xx_flash: Read Signature value of CFE1CFE1
[    0.372000] bcm963xx-flash bcm963xx-flash.0: CFE bootloader detected
[    0.376000] bcm963xx_flash: CFE boot tag found with version 7 and board type HW553
[    0.384000] bcm963xx_flash: Partition 0 is CFE offset 0 and length 20000
[    0.392000] bcm963xx_flash: Partition 1 is kernel offset 20100 and length dff00
[    0.400000] bcm963xx_flash: Partition 2 is rootfs offset 100000 and length ee0000
[    0.408000] bcm963xx_flash: Partition 3 is nvram offset fe0000 and length 20000
[    0.416000] bcm963xx_flash: Partition 4 is linux offset 20000 and length fc0000
[    0.424000] bcm963xx_flash: Spare partition is 2a0000 offset and length d40000
[    0.432000] Creating 5 MTD partitions on &quot;bcm963xx&quot;:
[    0.436000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
[    0.444000] 0x000000020100-0x000000100000 : &quot;kernel&quot;
[    0.448000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.464000] 0x000000100000-0x000000fe0000 : &quot;rootfs&quot;
[    0.476000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.480000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=280000, len=D60000
[    0.488000] 0x000000280000-0x000000fe0000 : &quot;rootfs_data&quot;
[    0.500000] 0x000000fe0000-0x000001000000 : &quot;nvram&quot;
[    0.508000] 0x000000020000-0x000000fe0000 : &quot;linux&quot;
[    0.524000] bcm63xx_enet MII bus: probed
[    0.532000] bcm63xx-wdt bcm63xx-wdt.0:  started, timer margin: 30 sec
[    0.540000] Registered led device: lan:red
[    0.540000] Registered led device: lan:blue
[    0.540000] Registered led device: adsl:red
[    0.540000] Registered led device: adsl:blue
[    0.544000] Registered led device: power:red
[    0.544000] Registered led device: power:blue
[    0.544000] Registered led device: wifi:red
[    0.544000] Registered led device: internetkey:red
[    0.544000] Registered led device: internetkey:blue
[    0.548000] TCP westwood registered
[    0.552000] NET: Registered protocol family 17
[    0.556000] 802.1Q VLAN Support v1.8
[    0.568000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.580000] Freeing unused kernel memory: 172k freed
[    3.280000] eth1: link forced UP - 100/full - flow control off/off
[    3.516000] roboswitch: Probing device eth0:
[    3.520000] roboswitch: [/home/max/Desktop/openwrt/trunk/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    3.532000] roboswitch: [/home/max/Desktop/openwrt/trunk/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    3.544000] No Robo switch in managed mode found, phy_id = 0xffffffff
[    3.552000] roboswitch: Probing device eth1: found a 5325! It&#039;s a 5350.
[    9.640000] JFFS2 notice: (333) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 4 of xref (0 dead, 2 orphan) found.
[   11.476000] usbcore: registered new interface driver usbfs
[   11.480000] usbcore: registered new interface driver hub
[   11.492000] usbcore: registered new device driver usb
[   12.844000] wl: module license &#039;unspecified&#039; taints kernel.
[   12.848000] Disabling lock debugging due to kernel taint
[   12.952000] SSB/BCMA glue driver successfully attached
[   12.972000] Got version 2 SPROM from SSB
[   12.980000] wl0: Broadcom BCM4318 802.11 Wireless Controller 5.10.56.27
[   13.148000] Button Hotplug driver version 0.4.1
[   13.200000] PPP generic driver version 2.4.2
[   13.308000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   13.540000] NET: Registered protocol family 24
[   13.604000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   13.612000] ehci_hcd: block sizes: qh 64 qtd 96 itd 160 sitd 96
[   13.612000] bcm63xx_ehci bcm63xx_ehci.0: BCM63XX integrated EHCI controller
[   13.616000] drivers/usb/core/inode.c: creating file &#039;devices&#039;
[   13.620000] drivers/usb/core/inode.c: creating file &#039;001&#039;
[   13.620000] bcm63xx_ehci bcm63xx_ehci.0: new USB bus registered, assigned bus number 1
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: park 0
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: reset command 0080b02  park=3 ithresh=8 period=1024 Reset HALT
[   13.628000] bcm63xx_ehci bcm63xx_ehci.0: ...powerdown ports...
[   13.652000] bcm63xx_ehci bcm63xx_ehci.0: irq 18, io mem 0xfffe1300
[   13.656000] bcm63xx_ehci bcm63xx_ehci.0: reset command 0080b02  park=3 ithresh=8 period=1024 Reset HALT
[   13.656000] bcm63xx_ehci bcm63xx_ehci.0: init command 0010001 (park)=0 ithresh=1 period=1024 RUN
[   13.668000] bcm63xx_ehci bcm63xx_ehci.0: USB 2.0 started, EHCI 1.00, overcurrent ignored
[   13.676000] usb usb1: default language 0x0409
[   13.676000] usb usb1: udev 1, busnum 1, minor = 0
[   13.676000] usb usb1: New USB device found, idVendor=1d6b, idProduct=0002
[   13.680000] usb usb1: New USB device strings: Mfr=3, Product=2, SerialNumber=1
[   13.688000] usb usb1: Product: BCM63XX integrated EHCI controller
[   13.696000] usb usb1: Manufacturer: Linux 3.0.18 ehci_hcd
[   13.700000] usb usb1: SerialNumber: bcm63xx
[   13.708000] usb usb1: usb_probe_device
[   13.708000] usb usb1: configuration #1 chosen from 1 choice
[   13.708000] usb usb1: adding 1-0:1.0 (config #1, interface 0)
[   13.708000] hub 1-0:1.0: usb_probe_interface
[   13.708000] hub 1-0:1.0: usb_probe_interface - got id
[   13.708000] hub 1-0:1.0: USB hub found
[   13.712000] hub 1-0:1.0: 2 ports detected
[   13.716000] hub 1-0:1.0: standalone hub
[   13.716000] hub 1-0:1.0: individual port power switching
[   13.716000] hub 1-0:1.0: individual port over-current protection
[   13.716000] hub 1-0:1.0: power on to power good time: 20ms
[   13.716000] hub 1-0:1.0: local power source is good
[   13.716000] hub 1-0:1.0: enabling power on all ports
[   13.716000] drivers/usb/core/inode.c: creating file &#039;001&#039;
[   13.752000] nf_conntrack version 0.5.0 (972 buckets, 3888 max)
[   13.816000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0000
[   14.140000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   14.144000] ohci_hcd: block sizes: ed 64 td 64
[   14.144000] bcm63xx_ohci bcm63xx_ohci.0: BCM63XX integrated OHCI controller
[   14.152000] drivers/usb/core/inode.c: creating file &#039;002&#039;
[   14.152000] bcm63xx_ohci bcm63xx_ohci.0: new USB bus registered, assigned bus number 2
[   14.160000] bcm63xx_ohci bcm63xx_ohci.0: irq 13, io mem 0xfffe1400
[   14.168000] bcm63xx_ohci bcm63xx_ohci.0: created debug files
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: OHCI controller state
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: OHCI 1.0, NO legacy support registers
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: control 0x083 HCFS=operational CBSR=3
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: cmdstatus 0x00000 SOC=0
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: intrstatus 0x00000004 SF
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: intrenable 0x8000005a MIE RHSC UE RD WDH
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: hcca frame #0005
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.a 02000202 POTPGT=2 NPS NDP=2(1)
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.b 00000000 PPCM=0000 DR=0000
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.status 00008000 DRWE
[   14.228000] bcm63xx_ohci bcm63xx_ohci.0: roothub.portstatus [0] 0x00000100 PPS
[   14.228000] usb usb2: default language 0x0409
[   14.228000] usb usb2: udev 1, busnum 2, minor = 128
[   14.228000] usb usb2: New USB device found, idVendor=1d6b, idProduct=0001
[   14.232000] usb usb2: New USB device strings: Mfr=3, Product=2, SerialNumber=1
[   14.240000] usb usb2: Product: BCM63XX integrated OHCI controller
[   14.248000] usb usb2: Manufacturer: Linux 3.0.18 ohci_hcd
[   14.252000] usb usb2: SerialNumber: bcm63xx
[   14.260000] usb usb2: usb_probe_device
[   14.260000] usb usb2: configuration #1 chosen from 1 choice
[   14.260000] usb usb2: adding 2-0:1.0 (config #1, interface 0)
[   14.260000] hub 2-0:1.0: usb_probe_interface
[   14.260000] hub 2-0:1.0: usb_probe_interface - got id
[   14.260000] hub 2-0:1.0: USB hub found
[   14.264000] hub 2-0:1.0: 1 port detected
[   14.268000] hub 2-0:1.0: standalone hub
[   14.268000] hub 2-0:1.0: ganged power switching
[   14.268000] hub 2-0:1.0: global over-current protection
[   14.268000] hub 2-0:1.0: power on to power good time: 4ms
[   14.268000] hub 2-0:1.0: local power source is good
[   14.268000] hub 2-0:1.0: no over-current condition exists
[   14.268000] hub 2-0:1.0: enabling power on all ports
[   14.268000] drivers/usb/core/inode.c: creating file &#039;001&#039;
[   14.408000] hub 2-0:1.0: state 7 ports 1 chg 0000 evt 0000
[   20.692000] bcm63xx_enet bcm63xx_enet.0: attached PHY at address 1 [Generic PHY]
[   22.292000] eth1: link forced UP - 100/full - flow control off/off
[   22.832000] device eth1 entered promiscuous mode
[   22.984000] br-lan: port 1(eth1) entering forwarding state
[   22.988000] br-lan: port 1(eth1) entering forwarding state
root@OpenWrt:/#</code></pre></div><p>root@OpenWrt:/# cat /proc/bus/usb/devices<br /></p><div class="codebox"><pre><code>T:  Bus=02 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12   MxCh= 1
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 1.10 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0001 Rev= 3.00
S:  Manufacturer=Linux 3.0.18 ohci_hcd
S:  Product=BCM63XX integrated OHCI controller
S:  SerialNumber=bcm63xx
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   2 Ivl=255ms

T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480  MxCh= 2
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0002 Rev= 3.00
S:  Manufacturer=Linux 3.0.18 ehci_hcd
S:  Product=BCM63XX integrated EHCI controller
S:  SerialNumber=bcm63xx
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms</code></pre></div><p>hope that someone can point me towards a possible solution</p>											<p class="post-edited">(Last edited by <strong>protomax</strong> on 15 Mar 2012, 23:37)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161009">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						15 Mar 2012, 23:42					</div>
				</div>
				<div class="post-content content">
					<p>Update:</p><p>dmesg plugging and unplugging an usb device on the port that is working at USB1.1</p><div class="codebox"><pre><code>[ 1445.180000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0002
[ 1445.180000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:1 status 001803 0  ACK POWER sig=j CSC CONNECT
[ 1445.180000] hub 1-0:1.0: port 1, status 0501, change 0001, 480 Mb/s
[ 1445.308000] hub 1-0:1.0: debounce: port 1: total 100ms stable 100ms status 0x501
[ 1445.364000] bcm63xx_ehci bcm63xx_ehci.0: port 1 full speed --&gt; companion
[ 1445.364000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:1 status 003801 0  ACK POWER OWNER sig=j CONNECT
[ 1445.364000] hub 1-0:1.0: port 1 not reset yet, waiting 50ms
[ 1445.420000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:1 status 003002 0  ACK POWER OWNER sig=se0 CSC
[ 1445.420000] hub 2-0:1.0: state 7 ports 1 chg 0000 evt 0002
[ 1445.420000] bcm63xx_ohci bcm63xx_ohci.0: GetStatus roothub.portstatus [0] = 0x00010101 CSC PPS CCS
[ 1445.420000] hub 2-0:1.0: port 1, status 0101, change 0001, 12 Mb/s
[ 1445.548000] hub 2-0:1.0: debounce: port 1: total 100ms stable 100ms status 0x101
[ 1445.620000] bcm63xx_ohci bcm63xx_ohci.0: GetStatus roothub.portstatus [0] = 0x00100103 PRSC PPS PES CCS
[ 1445.676000] usb 2-1: new full speed USB device number 5 using bcm63xx_ohci
[ 1445.756000] bcm63xx_ohci bcm63xx_ohci.0: GetStatus roothub.portstatus [0] = 0x00100103 PRSC PPS PES CCS
[ 1445.836000] usb 2-1: not running at top speed; connect to a high speed hub
[ 1445.848000] usb 2-1: default language 0x0409
[ 1445.860000] usb 2-1: udev 5, busnum 2, minor = 132
[ 1445.860000] usb 2-1: New USB device found, idVendor=0781, idProduct=b7b2
[ 1445.868000] usb 2-1: New USB device strings: Mfr=3, Product=4, SerialNumber=5
[ 1445.872000] usb 2-1: Product: MobileMate Micro
[ 1445.880000] usb 2-1: Manufacturer: SanDisk
[ 1445.884000] usb 2-1: SerialNumber: 000000xxxxx
[ 1445.888000] usb 2-1: usb_probe_device
[ 1445.888000] usb 2-1: configuration #1 chosen from 1 choice
[ 1445.892000] usb 2-1: adding 2-1:1.0 (config #1, interface 0)
[ 1445.892000] usb-storage 2-1:1.0: usb_probe_interface
[ 1445.892000] usb-storage 2-1:1.0: usb_probe_interface - got id
[ 1445.896000] scsi3 : usb-storage 2-1:1.0
[ 1445.908000] drivers/usb/core/inode.c: creating file &#039;005&#039;
[ 1445.908000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0002
[ 1445.908000] hub 2-0:1.0: state 7 ports 1 chg 0000 evt 0002
[ 1446.912000] scsi 3:0:0:0: Direct-Access     Generic  STORAGE DEVICE   9412 PQ: 0 ANSI: 0
[ 1446.924000] sd 3:0:0:0: Attached scsi generic sg0 type 0
[ 1447.312000] sd 3:0:0:0: [sda] 3854336 512-byte logical blocks: (1.97 GB/1.83 GiB)
[ 1447.320000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 93120000 cc 9 --&gt; status -140
[ 1447.324000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.328000] sd 3:0:0:0: [sda] Write Protect is off
[ 1447.332000] sd 3:0:0:0: [sda] Mode Sense: 03 00 00 00
[ 1447.336000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 92120000 cc 9 --&gt; status -140
[ 1447.340000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.344000] sd 3:0:0:0: [sda] No Caching mode page present
[ 1447.348000] sd 3:0:0:0: [sda] Assuming drive cache: write through
[ 1447.380000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 92120000 cc 9 --&gt; status -140
[ 1447.384000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.392000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 92120000 cc 9 --&gt; status -140
[ 1447.392000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.396000] sd 3:0:0:0: [sda] No Caching mode page present
[ 1447.404000] sd 3:0:0:0: [sda] Assuming drive cache: write through
[ 1447.420000]  sda: sda1
[ 1447.440000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 93120000 cc 9 --&gt; status -140
[ 1447.444000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.452000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7200 path 1 ep1in 92120000 cc 9 --&gt; status -140
[ 1447.452000] bcm63xx_ohci bcm63xx_ohci.0: urb 831f7300 path 1 ep1in 40160000 cc 4 --&gt; status -32
[ 1447.456000] sd 3:0:0:0: [sda] No Caching mode page present
[ 1447.464000] sd 3:0:0:0: [sda] Assuming drive cache: write through
[ 1447.468000] sd 3:0:0:0: [sda] Attached SCSI removable disk


[ 1798.484000] hub 2-0:1.0: state 7 ports 1 chg 0000 evt 0002
[ 1798.484000] bcm63xx_ohci bcm63xx_ohci.0: GetStatus roothub.portstatus [0] = 0x00030100 PESC CSC PPS
[ 1798.484000] hub 2-0:1.0: port 1, status 0100, change 0003, 12 Mb/s
[ 1798.484000] usb 2-1: USB disconnect, device number 5
[ 1798.488000] usb 2-1: unregistering device
[ 1798.492000] usb 2-1: unregistering interface 2-1:1.0
[ 1798.500000] usb 2-1: usb_disable_device nuking all URBs
[ 1798.628000] hub 2-0:1.0: debounce: port 1: total 100ms stable 100ms status 0x100</code></pre></div><p>on the non working port (no activity on dmesg on unplug)</p><div class="codebox"><pre><code>[ 1341.924000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004
[ 1341.924000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:2 status 001803 0  ACK POWER sig=j CSC CONNECT
[ 1341.924000] hub 1-0:1.0: port 2, status 0501, change 0001, 480 Mb/s
[ 1342.052000] hub 1-0:1.0: debounce: port 2: total 100ms stable 100ms status 0x501
[ 1342.108000] bcm63xx_ehci bcm63xx_ehci.0: port 2 full speed --&gt; companion
[ 1342.108000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:2 status 003801 0  ACK POWER OWNER sig=j CONNECT
[ 1342.108000] hub 1-0:1.0: port 2 not reset yet, waiting 50ms
[ 1342.164000] bcm63xx_ehci bcm63xx_ehci.0: GetStatus port:2 status 003002 0  ACK POWER OWNER sig=se0 CSC
[ 1342.164000] hub 1-0:1.0: state 7 ports 2 chg 0000 evt 0004</code></pre></div>											<p class="post-edited">(Last edited by <strong>protomax</strong> on 15 Mar 2012, 23:42)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161083">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						16 Mar 2012, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>can you post your .config?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161096">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						16 Mar 2012, 18:48					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ve tryed kamikaze r19530 and usb2 work:<br /></p><div class="codebox"><pre><code>usb 2-2: new full speed USB device using bcm63xx_ohci and address 5
usb 2-2: not running at top speed; connect to a high speed hub
usb 2-2: configuration #1 chosen from 1 choice
scsi1 : SCSI emulation for USB Mass Storage devices
usb-storage: device found at 5
usb-storage: waiting for device to settle before scanning
scsi 1:0:0:0: Direct-Access     USB 2.0  USB Flash Drive  0.00 PQ: 0 ANSI: 2
usb-storage: device scan complete
sd 1:0:0:0: [sdb] 3948543 512-byte hardware sectors: (2.02 GB/1.88 GiB)
sd 1:0:0:0: [sdb] Write Protect is off
sd 1:0:0:0: [sdb] Mode Sense: 00 00 00 00
sd 1:0:0:0: [sdb] Assuming drive cache: write through
sd 1:0:0:0: [sdb] Assuming drive cache: write through
 sdb: sdb1
sd 1:0:0:0: [sdb] Attached SCSI removable disk
Unable to find swap-space signature</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161099">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						16 Mar 2012, 18:57					</div>
				</div>
				<div class="post-content content">
					<p>sure</p><p><a href="http://pastebin.com/sj8KGD0d">http://pastebin.com/sj8KGD0d</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161101">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						16 Mar 2012, 19:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>falegname wrote:</cite><blockquote><p>i&#039;ve tryed kamikaze r19530 and usb2 work:<br /></p><div class="codebox"><pre><code>usb 2-2: new full speed USB device using bcm63xx_ohci and address 5
usb 2-2: not running at top speed; connect to a high speed hub</code></pre></div></blockquote></div><p>you are having the same problem, to confirm please do:</p><p>cat /proc/bus/usb/devices</p><p>with the usb device plugged and post</p>											<p class="post-edited">(Last edited by <strong>protomax</strong> on 16 Mar 2012, 19:20)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p161106">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						16 Mar 2012, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>I have a HG553:<br />in every image i build (backfire 10.03.2 - backfire 10.03.1 - attitude adjustment) the usb near ethernet port (usb 2.0) don&#039;t work.<br />I explain: when i plug a usb key, it doesn&#039;t recognize and i don&#039;t have kernel messages (connect or disconnect).<br />The second usb (usb 1.1) works...<br />kmod-usb2, kmod-usb-ohci, kmod-usb-uhci, kmod-usb-core, kmod-usb-storage are installed</p>											<p class="post-edited">(Last edited by <strong>falegname</strong> on 16 Mar 2012, 20:19)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162555">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">stevie7303215</div>
					<div class="post-datetime">
						30 Mar 2012, 10:39					</div>
				</div>
				<div class="post-content content">
					<p>Hi all,<br />Similar issue here too, I have noticed when you dmesg | grep hub I get the same results as you</p><p>with the usb 2.0 its detecting 2 ports.</p><p>root@OpenWrt:~# dmesg | grep hub<br />[&nbsp; &nbsp;10.812000] usbcore: registered new interface driver hub<br />[&nbsp; &nbsp;11.424000] hub 1-0:1.0: USB hub found&nbsp; &nbsp;&lt;----------- ehci usb, near lan ports<br />[&nbsp; &nbsp;11.428000] hub 1-0:1.0: 2 ports detected &lt;----------- its detecting 2 ports same as your router </p><p>[&nbsp; 735.400000] hub 2-0:1.0: USB hub found &lt;-----------ohci usb, on top of router<br />[&nbsp; 735.404000] hub 2-0:1.0: 1 port detected &lt;-----------identifies the correct single port</p><br /><p>[&nbsp; 736.192000] hub 2-1:1.0: USB hub found &lt;---------I plugged a 4 port usb hub into the ohci port, top usb<br />[&nbsp; 736.204000] hub 2-1:1.0: 4 ports detected &lt;------It correctly identified 4ports<br />[ 1891.520000] usb 2-1: not running at top speed; connect to a high speed hub<br />[ 2314.004000] hub 2-1:1.0: USB hub found<br />[ 2314.008000] hub 2-1:1.0: 4 ports detected</p><p>I have also plugged a scandisk usbdrive with a led light into the top ohci usb port. It correctly identifies the drive no problems and the led light stays on. I noticed when i plug it into the usb 2.0 usb near the lan it goes off after 1 second. If I uninstall the kmod-ohci the led light stays on, but still doesnt get identified with lsusb.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162581">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 14:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>falegname wrote:</cite><blockquote><p>I have a HG553:<br />in every image i build (backfire 10.03.2 - backfire 10.03.1 - attitude adjustment) the usb near ethernet port (usb 2.0) don&#039;t work.<br />I explain: when i plug a usb key, it doesn&#039;t recognize and i don&#039;t have kernel messages (connect or disconnect).<br />The second usb (usb 1.1) works...<br />kmod-usb2, kmod-usb-ohci, kmod-usb-uhci, kmod-usb-core, kmod-usb-storage are installed</p></blockquote></div><p>I have not your problem. This is dmesg after putting an internet key in the top port of Vodafone station:</p><div class="codebox"><pre><code>[12985.812000] usb 1-1: new high speed USB device number 2 using bcm63xx_ehci
[12985.960000] scsi0 : usb-storage 1-1:1.0
[12986.432000] usb 1-1: USB disconnect, device number 2
[12990.724000] usb 1-1: new high speed USB device number 3 using bcm63xx_ehci
[12990.868000] option 1-1:1.0: GSM modem (1-port) converter detected
[12990.876000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0
[12990.888000] option 1-1:1.3: GSM modem (1-port) converter detected
[12990.892000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1
[12990.900000] option 1-1:1.4: GSM modem (1-port) converter detected
[12990.908000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2
[12990.924000] scsi1 : usb-storage 1-1:1.5
[12990.932000] scsi2 : usb-storage 1-1:1.6
[12991.928000] scsi 1:0:0:0: CD-ROM            Vodafone CD ROM (Huawei)  2.31 PQ: 0 ANSI: 2
[12991.940000] scsi 2:0:0:0: Direct-Access     Vodafone Storage (Huawei) 2.31 PQ: 0 ANSI: 2
[12991.956000] sd 2:0:0:0: [sda] Attached SCSI removable disk</code></pre></div><p>and this is dmesg when plugging the same internet key in the rear usb port:</p><div class="codebox"><pre><code>[13074.560000] usb 1-2: new high speed USB device number 4 using bcm63xx_ehci
[13074.708000] scsi3 : usb-storage 1-2:1.0
[13075.056000] usb 1-2: USB disconnect, device number 4
[13079.472000] usb 1-2: new high speed USB device number 5 using bcm63xx_ehci
[13079.616000] option 1-2:1.0: GSM modem (1-port) converter detected
[13079.624000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB0
[13079.636000] option 1-2:1.3: GSM modem (1-port) converter detected
[13079.640000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB1
[13079.648000] option 1-2:1.4: GSM modem (1-port) converter detected
[13079.656000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB2
[13079.664000] scsi4 : usb-storage 1-2:1.5
[13079.672000] scsi5 : usb-storage 1-2:1.6
[13080.672000] scsi 4:0:0:0: CD-ROM            Vodafone CD ROM (Huawei)  2.31 PQ: 0 ANSI: 2
[13080.692000] scsi 5:0:0:0: Direct-Access     Vodafone Storage (Huawei) 2.31 PQ: 0 ANSI: 2
[13080.708000] sd 5:0:0:0: [sda] Attached SCSI removable disk</code></pre></div><p>As you can see, in all cases the internet key is recognized and all 2 ports are usb 2.0 capable.<br />I&#039;m using openwrt trunk r30919</p><p>Regards</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162583">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						30 Mar 2012, 14:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crisman wrote:</cite><blockquote><p>As you can see, in all cases the internet key is recognized and all 2 ports are usb 2.0 capable.<br />I&#039;m using openwrt trunk r30919</p><p>Regards</p></blockquote></div><p>That&#039;s weird, maybe there are 2 or more board revisions.</p><p>can you please post a full &quot;dmesg&quot; and &quot;cat /proc/bus/usb/devices&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162586">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 14:45					</div>
				</div>
				<div class="post-content content">
					<p>this is the full dmesg after a fresh boot:<br /></p><div class="codebox"><pre><code>[    0.000000] Linux version 3.0.18 (user@linux) (gcc version 4.6.3 20120201 (prerelease) (Linaro GCC 4.6-2012.02) ) #1 Tue Mar 13 15:36:12 CET 2012
[    0.000000] Detected Broadcom 0x6358 CPU revision a1
[    0.000000] CPU frequency is 300 MHz
[    0.000000] 64MB of RAM installed
[    0.000000] registering 40 GPIOs
[    0.000000] board_bcm963xx: Boot address 0xbe000000
[    0.000000] board_bcm963xx: CFE version: 100.48.56-48.46
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 0002a010 (Broadcom BMIPS4350)
[    0.000000] board_bcm963xx: board name: HW553
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 04000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00004000
[    0.000000] Movable zone start PFN for each node
[    0.000000] early_node_map[1] active PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00004000
[    0.000000] On node 0 totalpages: 16384
[    0.000000] free_area_init_node: node 0, pgdat 8027b6d0, node_mem_map 81000000
[    0.000000]   Normal zone: 128 pages used for memmap
[    0.000000]   Normal zone: 0 pages reserved
[    0.000000]   Normal zone: 16256 pages, LIFO batch:3
[    0.000000] Reserving 0MB of memory at 0MB for crashkernel
[    0.000000] pcpu-alloc: s0 r0 d32768 u32768 alloc=1*32768
[    0.000000] pcpu-alloc: [0] 0 
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 16256
[    0.000000] Kernel command line:  root=/dev/mtdblock2 rootfstype=squashfs,jffs2 noinitrd console=ttyS0,115200
[    0.000000] PID hash table entries: 256 (order: -2, 1024 bytes)
[    0.000000] Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
[    0.000000] Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Primary instruction cache 16kB, VIPT, 2-way, linesize 16 bytes.
[    0.000000] Primary data cache 16kB, 2-way, VIPT, cache aliases, linesize 16 bytes
[    0.000000] Memory: 62048k/65536k available (2116k kernel code, 3488k reserved, 363k data, 172k init, 0k highmem)
[    0.000000] NR_IRQS:128
[    0.000000] Calibrating delay loop... 299.26 BogoMIPS (lpj=598528)
[    0.036000] pid_max: default: 32768 minimum: 301
[    0.040000] Mount-cache hash table entries: 512
[    0.052000] NET: Registered protocol family 16
[    0.068000] registering PCI controller with io_map_base unset
[    0.080000] bio: create slab &lt;bio-0&gt; at 0
[    0.088000] pci 0000:00:01.0: [14e4:4318] type 0 class 0x000280
[    0.092000] pci 0000:00:01.0: reg 10: [mem 0x00000000-0x00001fff]
[    0.104000] pci 0000:00:01.0: BAR 0: assigned [mem 0x30000000-0x30001fff]
[    0.108000] pci 0000:00:01.0: BAR 0: set to [mem 0x30000000-0x30001fff] (PCI address [0x30000000-0x30001fff])
[    0.112000] Switching to clocksource MIPS
[    0.124000] PCI: Enabling device 0000:00:01.0 (0000 -&gt; 0002)
[    0.132000] PCI: Setting latency timer of device 0000:00:01.0 to 64
[    0.152000] ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x0D, vendor 0x4243)
[    0.152000] ssb: Core 1 found: IEEE 802.11 (cc 0x812, rev 0x09, vendor 0x4243)
[    0.152000] ssb: Core 2 found: PCI (cc 0x804, rev 0x0C, vendor 0x4243)
[    0.152000] ssb: Core 3 found: PCMCIA (cc 0x80D, rev 0x07, vendor 0x4243)
[    0.196000] ssb: Sonics Silicon Backplane found on PCI device 0000:00:01.0
[    0.204000] NET: Registered protocol family 2
[    0.208000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.216000] TCP established hash table entries: 2048 (order: 2, 16384 bytes)
[    0.224000] TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
[    0.232000] TCP: Hash tables configured (established 2048 bind 2048)
[    0.240000] TCP reno registered
[    0.240000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.248000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.256000] NET: Registered protocol family 1
[    0.260000] PCI: CLS 0 bytes, default 32
[    0.264000] audit: initializing netlink socket (disabled)
[    0.268000] type=2000 audit(0.268:1): initialized
[    0.276000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.284000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.296000] msgmni has been set to 121
[    0.300000] io scheduler noop registered
[    0.304000] io scheduler deadline registered (default)
[    0.308000] bcm63xx_uart.0: ttyS0 at MMIO 0xfffe0100 (irq = 10) is a bcm63xx_uart
[    0.316000] console [ttyS0] enabled, bootconsole disabled
[    0.332000] bcm963xx-flash bcm963xx-flash.0: 0x02000000 at 0x1e000000
[    0.340000] bcm963xx: Found 1 x16 devices at 0x0 in 16-bit bank. Manufacturer ID 0x000001 Chip ID 0x002101
[    0.352000] bcm963xx: Found an alias at 0x1000000 for the chip at 0x0
[    0.352000] Amd/Fujitsu Extended Query Table at 0x0040
[    0.356000]   Amd/Fujitsu Extended Query version 1.3.
[    0.360000] number of CFI chips: 1
[    0.364000] bcm963xx_flash: Read Signature value of CFE1CFE1
[    0.372000] bcm963xx-flash bcm963xx-flash.0: CFE bootloader detected
[    0.376000] bcm963xx_flash: CFE boot tag found with version 7 and board type HW553
[    0.384000] bcm963xx_flash: Partition 0 is CFE offset 0 and length 20000
[    0.392000] bcm963xx_flash: Partition 1 is kernel offset 20100 and length dff00
[    0.400000] bcm963xx_flash: Partition 2 is rootfs offset 100000 and length ee0000
[    0.408000] bcm963xx_flash: Partition 3 is nvram offset fe0000 and length 20000
[    0.416000] bcm963xx_flash: Partition 4 is linux offset 20000 and length fc0000
[    0.424000] bcm963xx_flash: Spare partition is 6e0000 offset and length 900000
[    0.428000] Creating 5 MTD partitions on &quot;bcm963xx&quot;:
[    0.436000] 0x000000000000-0x000000020000 : &quot;CFE&quot;
[    0.444000] 0x000000020100-0x000000100000 : &quot;kernel&quot;
[    0.448000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.464000] 0x000000100000-0x000000fe0000 : &quot;rootfs&quot;
[    0.476000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.480000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=6C0000, len=920000 
[    0.488000] 0x0000006c0000-0x000000fe0000 : &quot;rootfs_data&quot;
[    0.500000] 0x000000fe0000-0x000001000000 : &quot;nvram&quot;
[    0.508000] 0x000000020000-0x000000fe0000 : &quot;linux&quot;
[    0.520000] bcm63xx_enet MII bus: probed
[    0.532000] bcm63xx-wdt bcm63xx-wdt.0:  started, timer margin: 30 sec
[    0.540000] Registered led device: lan:red
[    0.540000] Registered led device: lan:blue
[    0.540000] Registered led device: adsl:red
[    0.540000] Registered led device: adsl:blue
[    0.544000] Registered led device: power:red
[    0.544000] Registered led device: power:blue
[    0.544000] Registered led device: wifi:red
[    0.544000] Registered led device: internetkey:red
[    0.544000] Registered led device: internetkey:blue
[    0.548000] TCP westwood registered
[    0.552000] NET: Registered protocol family 17
[    0.556000] 802.1Q VLAN Support v1.8
[    0.572000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    0.580000] Freeing unused kernel memory: 172k freed
[    3.432000] eth1: link forced UP - 100/full - flow control off/off
[    3.676000] roboswitch: Probing device eth0: 
[    3.680000] roboswitch: [/home/user/openwrt/trunk/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    3.692000] roboswitch: [/home/user/openwrt/trunk/build_dir/linux-brcm63xx/kmod-switch/switch-robo.c:121] SIOCGETCPHYRD failed!
[    3.704000] No Robo switch in managed mode found, phy_id = 0xffffffff
[    3.708000] roboswitch: Probing device eth1: found a 5325! It&#039;s a 5350.
[    9.796000] JFFS2 notice: (355) jffs2_build_xattr_subsystem: complete building xattr subsystem, 3 of xdatum (2 unchecked, 1 orphan) and 69 of xref (0 dead, 59 orphan) found.
[   10.836000] SCSI subsystem initialized
[   11.064000] usbcore: registered new interface driver usbfs
[   11.068000] usbcore: registered new interface driver hub
[   11.080000] usbcore: registered new device driver usb
[   11.796000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   11.800000] bcm63xx_ehci bcm63xx_ehci.0: BCM63XX integrated EHCI controller
[   11.808000] bcm63xx_ehci bcm63xx_ehci.0: new USB bus registered, assigned bus number 1
[   11.840000] bcm63xx_ehci bcm63xx_ehci.0: irq 18, io mem 0xfffe1300
[   11.856000] bcm63xx_ehci bcm63xx_ehci.0: USB 2.0 started, EHCI 1.00, overcurrent ignored
[   11.864000] hub 1-0:1.0: USB hub found
[   11.868000] hub 1-0:1.0: 2 ports detected
[   12.028000] ohci_hcd: USB 1.1 &#039;Open&#039; Host Controller (OHCI) Driver
[   12.032000] bcm63xx_ohci bcm63xx_ohci.0: BCM63XX integrated OHCI controller
[   12.040000] bcm63xx_ohci bcm63xx_ohci.0: new USB bus registered, assigned bus number 2
[   12.048000] bcm63xx_ohci bcm63xx_ohci.0: irq 13, io mem 0xfffe1400
[   12.116000] hub 2-0:1.0: USB hub found
[   12.120000] hub 2-0:1.0: 1 port detected
[   12.300000] Initializing USB Mass Storage driver...
[   12.308000] usbcore: registered new interface driver usb-storage
[   12.312000] USB Mass Storage support registered.
[   35.392000] Compat-wireless backport release: compat-wireless-2012-02-27-1-r30919
[   35.400000] Backport based on wireless-testing.git master-2012-02-27
[   35.464000] cfg80211: Calling CRDA to update world regulatory domain
[   36.492000] cfg80211: World regulatory domain updated:
[   36.500000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[   36.508000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.516000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   36.524000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[   36.532000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   36.540000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[   37.016000] b43-phy0: Broadcom 4318 WLAN found (core revision 9)
[   37.092000] ieee80211 phy0: Selected rate control algorithm &#039;minstrel_ht&#039;
[   37.096000] Registered led device: b43-phy0::tx
[   37.096000] Registered led device: b43-phy0::rx
[   37.096000] Registered led device: b43-phy0::radio
[   37.096000] Broadcom 43xx driver loaded [ Features: PNL ]
[   37.136000] Button Hotplug driver version 0.4.1
[   37.932000] PPP generic driver version 2.4.2
[   38.176000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   38.596000] NET: Registered protocol family 24
[   38.728000] nf_conntrack version 0.5.0 (972 buckets, 3888 max)
[   39.220000] usbcore: registered new interface driver usbserial
[   39.224000] USB Serial support registered for generic
[   39.232000] usbcore: registered new interface driver usbserial_generic
[   39.236000] usbserial: USB Serial Driver core
[   39.372000] USB Serial support registered for GSM modem (1-port)
[   39.380000] usbcore: registered new interface driver option
[   39.388000] option: v0.7.2:USB Driver for GSM modems
[   61.120000] eth1: link forced UP - 100/full - flow control off/off
[   64.220000] device eth1.0 entered promiscuous mode
[   64.224000] device eth1 entered promiscuous mode
[   64.324000] br-lan: port 1(eth1.0) entering forwarding state
[   64.332000] br-lan: port 1(eth1.0) entering forwarding state</code></pre></div><p>and this this /proc/usb/devices:<br /></p><div class="codebox"><pre><code>T:  Bus=02 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=12   MxCh= 1
B:  Alloc=  0/900 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 1.10 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0001 Rev= 3.00
S:  Manufacturer=Linux 3.0.18 ohci_hcd
S:  Product=BCM63XX integrated OHCI controller
S:  SerialNumber=bcm63xx
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   2 Ivl=255ms

T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480  MxCh= 2
B:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0
D:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=00 MxPS=64 #Cfgs=  1
P:  Vendor=1d6b ProdID=0002 Rev= 3.00
S:  Manufacturer=Linux 3.0.18 ehci_hcd
S:  Product=BCM63XX integrated EHCI controller
S:  SerialNumber=bcm63xx
C:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA
I:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub
E:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162588">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">stevie7303215</div>
					<div class="post-datetime">
						30 Mar 2012, 15:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crisman wrote:</cite><blockquote><div class="quotebox"><cite>falegname wrote:</cite><blockquote><p>I have a HG553:<br />in every image i build (backfire 10.03.2 - backfire 10.03.1 - attitude adjustment) the usb near ethernet port (usb 2.0) don&#039;t work.<br />I explain: when i plug a usb key, it doesn&#039;t recognize and i don&#039;t have kernel messages (connect or disconnect).<br />The second usb (usb 1.1) works...<br />kmod-usb2, kmod-usb-ohci, kmod-usb-uhci, kmod-usb-core, kmod-usb-storage are installed</p></blockquote></div><p>I have not your problem. This is dmesg after putting an internet key in the top port of Vodafone station:</p><div class="codebox"><pre><code>[12985.812000] usb 1-1: new high speed USB device number 2 using bcm63xx_ehci
[12985.960000] scsi0 : usb-storage 1-1:1.0
[12986.432000] usb 1-1: USB disconnect, device number 2
[12990.724000] usb 1-1: new high speed USB device number 3 using bcm63xx_ehci
[12990.868000] option 1-1:1.0: GSM modem (1-port) converter detected
[12990.876000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB0
[12990.888000] option 1-1:1.3: GSM modem (1-port) converter detected
[12990.892000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB1
[12990.900000] option 1-1:1.4: GSM modem (1-port) converter detected
[12990.908000] usb 1-1: GSM modem (1-port) converter now attached to ttyUSB2
[12990.924000] scsi1 : usb-storage 1-1:1.5
[12990.932000] scsi2 : usb-storage 1-1:1.6
[12991.928000] scsi 1:0:0:0: CD-ROM            Vodafone CD ROM (Huawei)  2.31 PQ: 0 ANSI: 2
[12991.940000] scsi 2:0:0:0: Direct-Access     Vodafone Storage (Huawei) 2.31 PQ: 0 ANSI: 2
[12991.956000] sd 2:0:0:0: [sda] Attached SCSI removable disk</code></pre></div><p>and this is dmesg when plugging the same internet key in the rear usb port:</p><div class="codebox"><pre><code>[13074.560000] usb 1-2: new high speed USB device number 4 using bcm63xx_ehci
[13074.708000] scsi3 : usb-storage 1-2:1.0
[13075.056000] usb 1-2: USB disconnect, device number 4
[13079.472000] usb 1-2: new high speed USB device number 5 using bcm63xx_ehci
[13079.616000] option 1-2:1.0: GSM modem (1-port) converter detected
[13079.624000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB0
[13079.636000] option 1-2:1.3: GSM modem (1-port) converter detected
[13079.640000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB1
[13079.648000] option 1-2:1.4: GSM modem (1-port) converter detected
[13079.656000] usb 1-2: GSM modem (1-port) converter now attached to ttyUSB2
[13079.664000] scsi4 : usb-storage 1-2:1.5
[13079.672000] scsi5 : usb-storage 1-2:1.6
[13080.672000] scsi 4:0:0:0: CD-ROM            Vodafone CD ROM (Huawei)  2.31 PQ: 0 ANSI: 2
[13080.692000] scsi 5:0:0:0: Direct-Access     Vodafone Storage (Huawei) 2.31 PQ: 0 ANSI: 2
[13080.708000] sd 5:0:0:0: [sda] Attached SCSI removable disk</code></pre></div><p>As you can see, in all cases the internet key is recognized and all 2 ports are usb 2.0 capable.<br />I&#039;m using openwrt trunk r30919</p><p>Regards</p></blockquote></div><p>hi there<br />did u download the firmware file or did you compile? what usb packages did you install?<br />Im still stumped <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162591">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">stevie7303215</div>
					<div class="post-datetime">
						30 Mar 2012, 15:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>protomax wrote:</cite><blockquote><div class="quotebox"><cite>crisman wrote:</cite><blockquote><p>As you can see, in all cases the internet key is recognized and all 2 ports are usb 2.0 capable.<br />I&#039;m using openwrt trunk r30919</p><p>Regards</p></blockquote></div><p>That&#039;s weird, maybe there are 2 or more board revisions.</p><p>can you please post a full &quot;dmesg&quot; and &quot;cat /proc/bus/usb/devices&quot;</p></blockquote></div><p>I wonder if its the difference with the Italian and the spanish hg553?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162592">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 15:26					</div>
				</div>
				<div class="post-content content">
					<p>I compiled the firmware myself. kmod-usb2 and kmod-ochi-hcd are installed. My station is the italian one</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162596">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">stevie7303215</div>
					<div class="post-datetime">
						30 Mar 2012, 15:39					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crisman wrote:</cite><blockquote><p>I compiled the firmware myself. kmod-usb2 and kmod-ochi-hcd are installed. My station is the italian one</p></blockquote></div><p>I have the spanish version that may be why?<br />Do you have a copy of your firmware? <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; I wonder if its by compiling it yourself makes the difference?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162599">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						30 Mar 2012, 15:56					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crisman wrote:</cite><blockquote><p>I compiled the firmware myself. kmod-usb2 and kmod-ochi-hcd are installed. My station is the italian one</p></blockquote></div><p>My station is italian too, but usb doesn&#039;t work with the image i&#039;ve compiled... Can you post your .config?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162600">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 15:58					</div>
				</div>
				<div class="post-content content">
					<p>I have a copy of my firmware, but I cannot publish it because there is some private data already inside. Try compiling yourself. I use my desktop pc with Ubuntu 10.04 LTS, but I don&#039;t think this makes difference...</p><p>One thing: initially there was b66 on my&nbsp; station, then I downgraded to the spanish b21 using the smb exploit, and then I installed openwrt from web interface of b21 using the squashfs hw553 image. So I have not changed the cfe with the AGPF one.</p>											<p class="post-edited">(Last edited by <strong>crisman</strong> on 30 Mar 2012, 16:01)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162602">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						30 Mar 2012, 16:09					</div>
				</div>
				<div class="post-content content">
					<p>today i&#039;ve put the original cfe and i&#039;ve compiled an image of trunk, latest revision, with usb support (usb-core, ohci, usb2, usb-storage), installed with web interface but doesn&#039;t work...<br />I have two HG553 and doesn&#039;t work in any station... I don&#039;t know where is the problem...</p>											<p class="post-edited">(Last edited by <strong>falegname</strong> on 30 Mar 2012, 16:13)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162605">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>try my same revision r30919</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162606">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						30 Mar 2012, 16:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>stevie7303215 wrote:</cite><blockquote><p>I wonder if its the difference with the Italian and the spanish hg553?</p></blockquote></div><p>The problem is that there is no evidence of another hw versions that differ from &quot;HG55MAGV VER.A&quot;, this is confirmed by firmware versions, italian and spanish firmwares are exchangeable, well at least usb device output are identical.</p><p>Well now is important to know if crisman is using a custom build, because i have no clue at the moment.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162608">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">protomax</div>
					<div class="post-datetime">
						30 Mar 2012, 16:22					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>crisman wrote:</cite><blockquote><p>I compiled the firmware myself. kmod-usb2 and kmod-ochi-hcd are installed. My station is the italian one</p></blockquote></div><p>Good to know, please crisman post your &quot;.config&quot;, (use pastebin)</p><p>Are you able to test trunk revision downloading the snapshot from the openwrt ftp?</p>											<p class="post-edited">(Last edited by <strong>protomax</strong> on 30 Mar 2012, 16:23)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162609">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						30 Mar 2012, 16:22					</div>
				</div>
				<div class="post-content content">
					<p>ok, now i try to compile rev 30919 and post my .config, hope it works</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162610">
				<div class="post-metadata">
					<div class="post-num">Post #23</div>
					<div class="post-author">crisman</div>
					<div class="post-datetime">
						30 Mar 2012, 16:28					</div>
				</div>
				<div class="post-content content">
					<p>I will post my .config when I&#039;ll come back at home. Sorry, but now my station is in &quot;production&quot; and I haven&#039;t another one to make tests <img src="https://forum.openwrt.org/img/smilies/sad.png" width="15" height="15" alt="sad" /></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162613">
				<div class="post-metadata">
					<div class="post-num">Post #24</div>
					<div class="post-author">danitool</div>
					<div class="post-datetime">
						30 Mar 2012, 16:33					</div>
				</div>
				<div class="post-content content">
					<p>I think there is something wrong with the usb drivers/modules.</p><p>I&#039;m using a Huawei hg556a. It has 3 ports, 2 ehci usb (HUB) and 1 ohci at the top like the hg553. The ohci never works as ohci, and only works with the 3g usb pendrive provided by vodafone. Whereas with the stock firmware all ports work quite fine, and detected correctly.</p><p>Related usb drivers stuff in the OpenWrt kernel tree:<br /></p><div class="quotebox"><blockquote><p>trunk/build_dir/linux-brcm63xx/linux-3.0.18/drivers/usb/host/ehci-bcm63xx.c<br />trunk/build_dir/linux-brcm63xx/linux-3.0.18/drivers/usb/host/ohci-bcm63xx.c<br />trunk/build_dir/linux-brcm63xx/linux-3.0.18/arch/mips/bcm63xx/dev-usb-ehci.c<br />trunk/build_dir/linux-brcm63xx/linux-3.0.18/arch/mips/bcm63xx/dev-usb-ohci.c</p><p>trunk/build_dir/linux-brcm63xx/linux-3.0.18/arch/mips/include/asm/mach-bcm63xx/bcm63xx_regs.h<br />trunk/build_dir/linux-brcm63xx/linux-3.0.18/arch/mips/include/asm/mach-bcm63xx/bcm63xx_cpu.h</p></blockquote></div><p>Maybe time to dig into these files, and make some research...</p>											<p class="post-edited">(Last edited by <strong>danitool</strong> on 30 Mar 2012, 18:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p162641">
				<div class="post-metadata">
					<div class="post-num">Post #25</div>
					<div class="post-author">falegname</div>
					<div class="post-datetime">
						30 Mar 2012, 18:43					</div>
				</div>
				<div class="post-content content">
					<p>compiled 30919 with this .config: http:// pastebin.com/HPF2nKxB</p><p>Nothing</p>									</div>
			</article>

			
		
						<div class="notice">
				<p>Sorry, posts 26 to 25 are missing from our archive.</p>
			</div>
		
		
	
	<div class="pagination"><div class="pagination-number">Page 1 of 7</div><nav><ul><li class="pagination-current"><span>1</span></li><li><a href="viewtopic.php%3Fid=35516&amp;p=2.html">2</a></li><li><a href="viewtopic.php%3Fid=35516&amp;p=3.html">3</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=35516&amp;p=7.html">7</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>