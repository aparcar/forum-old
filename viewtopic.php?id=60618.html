<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> [ar71xx] platform_check_image fails from 15.05 r46751 build to newer</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 21 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p297913">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						29 Oct 2015, 23:09					</div>
				</div>
				<div class="post-content content">
					<p>I tried upgrading a few routers (TL-WR1043ND v2, TL-WR841N v7) to a newer 15.05 build (first r47188, then r47277). Both gave no problem on my Netgear WNDR3700 v1</p><p>On both TP-Links however, I get:<br /></p><div class="codebox"><pre><code>Invalid image type.
Image check &#039;platform_check_image&#039; failed</code></pre></div><p>I&#039;ll be able to double check this with another Netgear WNDR3700 v1 and a TP-Link TL-WR1043ND v1 this weekend.</p><p>I&#039;ve seen a <a href="http://git.openwrt.org/?p=15.05/openwrt.git;a=commit;h=4f619e9bba153a53151e5ea3e7c4275c3f48afdc">commit</a> in 15.05 post release, don&#039;t know if that has anything to do with it. Either way, these newer builds have been run with the same .config.</p><p>Can I use -F to upgrade? If it fails, I&#039;d be in a lot of trouble since most devices are remote and their users aren&#039;t tech savvy <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.</p><p>Thanks!</p>											<p class="post-edited">(Last edited by <strong>Borromini</strong> on 29 Oct 2015, 23:09)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297916">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						29 Oct 2015, 23:26					</div>
				</div>
				<div class="post-content content">
					<p>The example in that linked commit message shows that the problem was &quot;strange&quot; characters in the filename needing escaping/quoting. Just renaming the file to something simple should help if that is the reason for your problem. (e.g. to &quot;firmware.bin&quot;).</p><p>I have been updating my WNDR3700/3800 routers frequently without problems, so I think that there is no general ar71xx update problem. It is likely something router model specific.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297930">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						29 Oct 2015, 23:54					</div>
				</div>
				<div class="post-content content">
					<p>I know. Was just wondering.</p><p>The file names are OpenWrt defaults, like openwrt-ar71xx-generic-tl-wr1043nd-v2-squashfs-sysupgrade.bin. I&#039;m pretty puzzled as to why this would break on a stable branch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p297983">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">lems</div>
					<div class="post-datetime">
						30 Oct 2015, 11:53					</div>
				</div>
				<div class="post-content content">
					<p>I saw that on my TP-Link WDR4300, too. It had an uptime of about 40-50 days; it was running a CC snapshot (rc2 or rc3 or so, I always compile images myself), and I wanted to update to rc3 or final (don&#039;t remember). Got that same error message. I was using extroot, and for some reason after getting that message from sysupgrade, I was no longer able to access any files, they were all gone (except for /tmp, which is in RAM). So I used the button on the device to turn it off and then on again (reboot command did not work), and after that I was able to flash the new image. Quite strange. (Files disappearing happened to me after that two times, still don&#039;t know what&#039;s causing this. Faulty stick or filesystem? Has been running fine now for several weeks.)</p>											<p class="post-edited">(Last edited by <strong>lems</strong> on 30 Oct 2015, 11:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298041">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						30 Oct 2015, 20:14					</div>
				</div>
				<div class="post-content content">
					<p>Thanks. Mine have an uptime of 35 days, so they&#039;re stable... I rebooted a TL-WR841N and a TL-WR1043ND v2. The error persists.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298141">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						31 Oct 2015, 19:10					</div>
				</div>
				<div class="post-content content">
					<p>OK.. So on my brother&#039;s WNDR3700, I&#039;m getting this:<br /></p><div class="codebox"><pre><code>Invalid image, hardware ID mismatch, hw:33373030 image:3c21444f.
Image check &#039;platform_check_image&#039; failed.</code></pre></div><p>On this TL-WR1043ND v1, I get the same error message as on the other TP-Links I tested...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p298154">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">Borromini</div>
					<div class="post-datetime">
						31 Oct 2015, 20:58					</div>
				</div>
				<div class="post-content content">
					<p>Well, nevermind. Turned out to be PEBKAC.</p><p>I checked my blog, went to the downloads section, and that gave a 404. LIghttpd hadn&#039;t been told about some stuff that moved around, so something went wrong with the firmware downloads.</p><p>Works all just fine now. I&#039;m going to hide in shame.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>