<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WWAN bug</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 25 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p290719">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						6 Sep 2015, 23:47					</div>
				</div>
				<div class="post-content content">
					<p>A Wireless WAN Wifi annoyance (Mediatek 7620 + CCrc3)</p><p>Before i file it as a bug, i would like to ask others to see if they can replicate it <br />- on the same devices. NEXX 3020, and D-Link DIR-505<br />- on other devices with Mediatek 7620, and Atheros AR1311<br />- on completely different devices.&nbsp; To see if they behave any different.</p><p>The situation:<br />Radio transmits on channel 6 in my case</p><p>Router connected to the net is the AccessPoint<br />WLAN SSID:TheNet</p><p>EDIT<br />Above is the existing router<br />and<br />Below is the OpenWRT router<br />/EDIT</p><p>Radio on channel:6 <br />WWAN SSID:TheNet <br />WLAN SSID:OpenWRT&nbsp; </p><p>All works fine until SSID:TheNet is not available</p><p>When you take the &#039;travel router&#039;to another place and try to boot, OpenWRT does not find SSID:TheNet and as a result SSID:OpenWRT also does not seem to come up.</p><p>The &#039;travel router&#039; is no longer reachable via WiFi.&nbsp; So if you don&#039;t have a Cat cable in your pocket there is no way you can reach the router to reconfigure to connect to another WLAN. And that kinda sucks...</p><p>BUT:<br />When I add another SSID<br />SSID:WTF</p><p>Then it becomes a bit weird...&nbsp; &nbsp;<br />Now all of a sudden de SSID:OpenWRT comes up. but the new SSID:WTF is not. And after a few minutes also SSID:OpenWRT disappears again. If I then try again, and add SSID:WFT2 nothing happens...&nbsp; </p><br /><p>With BarrierBreaker on a D-Link DIR-505 The issue seems to be almost the same, although on BarrierBreaker the WWAN Client SSID is automatically disabled when it can&#039;t reach the AccessPoint. Still the other SSID is also disabled. So the router cannot be reached over WiFi.&nbsp; The DIR-505 only has 1 RJ45 So i wonder when i would have configured that as WAN instead of LAN if i then still could have access at all.&nbsp; Or if it would stay in a semi-bricked kind of state until I&#039;m near the last uses AccessPoint. Semi-bricked since you need a Cat cable to get access to the router, and when travelling you might not have a Cat cable in the suitcase.</p><p>Will also try this with the GL.iNet 6416 I expect the same, since it has the same SoC as the DIR-505.</p><p>What happens on other devices?</p>											<p class="post-edited">(Last edited by <strong>frietpan</strong> on 8 Sep 2015, 00:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290822">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						7 Sep 2015, 23:16					</div>
				</div>
				<div class="post-content content">
					<p>@frietpan, I think you need to re-edit this so it&#039;s clearer.&nbsp; Maybe a better title - WWAN Radio hangs all wireless access when no AP available.&nbsp; Not sure it will fit</p><p>I also think that there is a mistake here:<br /></p><div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>Router connected to the net is the AccessPoint<br />WLAN SSID:TheNet</p><p>WWAN Connected SSID:TheNet ch:6<br />WLAN SSID:OpenWRT</p></blockquote></div><p>You have 2 WLAN values, or just not following.&nbsp; Just fix the above and add a note it was edited.</p><p>I had some weirdness with adding SSIDs to the single radio here: <a href="https://forum.openwrt.org/viewtopic.php?pid=264725#p264725">https://forum.openwrt.org/viewtopic.php … 25#p264725</a></p><p>mk24 has written about killing the wan side with a script here, so this is not entirely new.&nbsp; You may want to research his posts.&nbsp; <a href="https://forum.openwrt.org/viewtopic.php?pid=272018#p272018">https://forum.openwrt.org/viewtopic.php … 18#p272018</a></p><p>I will agree it&#039;s a poor software solution to a worse hardware problem, the single radio.&nbsp; I have not interest in running a single radio.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290834">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						8 Sep 2015, 00:30					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, </p><p>I made a note hope that&#039;s clear enough.<br />Also thanks for pointing to those treads.</p><p>I&#039;ve seen many more, but everyone seems to take it for granted.... I&#039;m sure this is not how it supposed to work. <br />But it happens to all 3 my devices NEXX 3020, DIR-505 and the 6416.&nbsp; &nbsp;</p><p>The 6416 with Barrier Breaker at least disables the WLAN But still you need a Catcable to be able to do anything when there is no WWAN.&nbsp; It is what it is, and i can get around it. But i&#039;m sure this is not what should be happening.&nbsp; </p><p>Do higher end routers like for instance the Archer or Buffalo behave any different or does it affect every OpenWRT router?</p><p>tmo26 pointed me to the Bug list:<br /><a href="https://dev.openwrt.org/search">https://dev.openwrt.org/search</a><br />I&#039;m searching if I can find ones that cover the same issue.<br />I already found a few that could be related. So I’m trying to figure out where it belongs.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290839">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						8 Sep 2015, 01:11					</div>
				</div>
				<div class="post-content content">
					<p>I am afraid that the &quot;business processes&quot; have gotten a head of the hardware.&nbsp; Until now, a router has always had a hard wired WAN connection.&nbsp; It only needed one radio for WLAN.&nbsp; Bridging has been problematic for a while now.&nbsp; The hardware has not evolved to fit the new scenarios.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290840">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						8 Sep 2015, 01:14					</div>
				</div>
				<div class="post-content content">
					<p>It&#039;s very hard to figure out most bug descriptions. </p><p>Issues that seem related:<br /><a href="https://dev.openwrt.org/ticket/20031">https://dev.openwrt.org/ticket/20031</a> &#039; If any mistake occurs it will disable ap/sta iface altogether.&#039;<br /><a href="https://dev.openwrt.org/ticket/13681">https://dev.openwrt.org/ticket/13681</a>&nbsp; &#039;no active connections in iw wlan..&#039;<br /><a href="https://dev.openwrt.org/ticket/16543">https://dev.openwrt.org/ticket/16543</a>&nbsp; &#039;wifi configuration broken with 2 or more radios&#039;</p><p>these two seem most related: </p><p><a href="https://dev.openwrt.org/ticket/12000">https://dev.openwrt.org/ticket/12000</a>&nbsp; wontfix????&nbsp; &nbsp;&lt;== wouldsuck!<br /><a href="https://dev.openwrt.org/ticket/12300">https://dev.openwrt.org/ticket/12300</a>&nbsp; duplicate of 12000<br /><a href="https://dev.openwrt.org/ticket/12018">https://dev.openwrt.org/ticket/12018</a> invalid/fixed ?&nbsp; I don&#039;t understand&nbsp; </p><p>Please note that these last three are 3 years old.&nbsp; So is this a very old bug or a repeating bug?</p>											<p class="post-edited">(Last edited by <strong>frietpan</strong> on 8 Sep 2015, 01:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290847">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						8 Sep 2015, 02:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>I am afraid that the &quot;business processes&quot; have gotten a head of the hardware.&nbsp; Until now, a router has always had a hard wired WAN connection.&nbsp; It only needed one radio for WLAN.&nbsp; Bridging has been problematic for a while now.&nbsp; The hardware has not evolved to fit the new scenarios.</p></blockquote></div><p>I see,<br />Does this mean it is best to not combine WWAN and WLAN for now?</p><p>Not all SoC&#039;s evolved in the same way. I wonder how hard it is to write code for this stuff.&nbsp; I wish I could..</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290849">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						8 Sep 2015, 02:37					</div>
				</div>
				<div class="post-content content">
					<p>I consider it a limitation of the hardware design.</p><p>Software could be enhanced, but I do not consider this a bug.</p><p>This describes the issues with a radio&#039;s capabilities to run on both the client and AP sides.<br /><a href="http://wiki.openwrt.org/doc/howto/clientmode#bridgedclientmodeissues">http://wiki.openwrt.org/doc/howto/clien … modeissues</a></p><p>Variation of the same issue</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290942">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						8 Sep 2015, 22:53					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ll try to flash the D-link firmware. and see how that behaves with LAN and WAN on the same radio.</p><p>But what hardware design is lacking?<br />All hardware designs? </p><p>If the software can see that WLAN is on channel 1<br />then when you connect to WWAN the software connects to channel6 (in my case)&nbsp; then how is it a hardware limitation?&nbsp; I can see in the software that WWAN is on ch6.&nbsp; <br />But ok, in the case where WWAN can&#039;t find any WLAN to connect to then there is no channel. And well<br />No channel is also a state&nbsp; &nbsp;I don&#039;t see how software should not be able to figure that out. Now,&nbsp; i must admit i don&#039;t know how hard it is to make that work. I just can&#039;t figure out how this can be caused by hardware.</p><p>Many Atheros based routers (Such as the D-Link DIR-505) have a repeater mode selectable by a GPIO switch. So D-Link must have build something that can do this using the Atheros 3133 SoC. </p><p>The Mediatek (RaLink) seems to be a bit different when it comes to&nbsp; simultanious Transmitting and Receiving. And i haven&#039;t seen hardware designs based on the 7620 that have an option to work as a repeater, so for the Mediatek SoC it seems to be a different story.&nbsp; </p><p>I&#039;m also not saying that you are wrong.&nbsp; </p><p>I just find it very odd that this is happening.&nbsp; </p><p>So if this is not a bug, then what is it?&nbsp; It&#039;s also not a feature...&nbsp; <br />What can be done to clear up what is actually happening?<br />And what can we say in the wiki about it? Just to have clarity.&nbsp; </p><p>Everyone (or at least several) who are trying to use nodogsplash with WWAN and WLAN seem to run into the same kind of issue. I&#039;m not sure if it actually can made to work. I&#039;m al new at OpenWRT and still have to learn everything, and I&#039;m trying my best to figure out if this is the cause. Or, if I am the weaker link. </p><br /><br /> <br /><br /><br /><br /><p>Isn&#039;t it possible to reconfigure radio0 to channel6 and then restart the affected processes?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p290973">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						9 Sep 2015, 03:05					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>If the software can see that WLAN is on channel 1<br />then when you connect to WWAN the software connects to channel6 (in my case)&nbsp; then how is it a hardware limitation?&nbsp; I can see in the software that WWAN is on ch6.</p></blockquote></div><p>I believe that your scenario is not a valid one, or I am wrong.&nbsp; I do not believe that you can run a device with 1 radio on 2 different channels or with different channel widths or capabilities (b,g,n).&nbsp; </p><div class="quotebox"><cite>frietpan wrote:</cite><blockquote><p>No channel is also a state&nbsp; &nbsp;I don&#039;t see how software should not be able to figure that out.</p></blockquote></div><p>Here I agree.&nbsp; The software should be able to figure it out.&nbsp; While I said it is not a bug, and I stand by that, I do not consider it a good design.&nbsp; Just like my code for testing for a LAN connection may work, it&#039;s just not good design.&nbsp; It will fail under some circumstances but works as designed.&nbsp; It could be redesigned and written better (mk24 code).</p><p>Different chip sets have different capabilities, which may or may not be fully utilized in OpenWRT and may work under different limitations in stock form.&nbsp; &nbsp;This is discussed somewhat in the bridged client mode issues pages here and other places.</p><p>I have no problem being wrong, but I do not think so.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291083">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						9 Sep 2015, 23:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>RangerZ wrote:</cite><blockquote><p>I believe that your scenario is not a valid one, or I am wrong.&nbsp; I do not believe that you can run a device with 1 radio on 2 different channels or with different channel widths or capabilities (b,g,n).</p></blockquote></div><p>As long as you on the same channel and use the same protocol all seems to work fine</p><p>radio0 on channel 6&nbsp; using n protocol<br />WWAN and WLAN can coexist&nbsp; Even Multiple WLAN&#039;s</p><p>On the NEXX I now have:<br />WWAN SSID of the router that i&#039;m connected to<br />and 3 seperate WLAN SSID&#039;s <br />SSID1:OpenWLAN&nbsp; unencrypted<br />SSID2:WEP WLAN WEP<br />SSID3:WPA WLAN WPA</p><p>So that works fine.</p><p>But if I switch off the Home router, so that the WWAN has nothing to connect to.<br />And then reboot the NEXX.<br />Then on boot the NEXX cannot connect<br />And as a result NON of the WLAN&#039;s are coming up.</p><p>THAT is the bug.</p><p>When you have a travel router this is a real issue when you don&#039;t have a Cat cable, or even worse, only a Android phone that only has wifi...</p><p>Then you are marooned.&nbsp; &nbsp;No way to reconfigure your router.&nbsp; </p><p>And it is also a bug because the router IS configured with in my instance 3 WLAN SSID&#039;s<br />When it boots and those WLAN&#039;s don&#039;t come up as configured i can&#039;t think of another way to describe it as a bug.</p><p>And as described in my first post there is some other weird stuff happening (when you add a SSID when WWAN is down sometimes another SSID comes available, but not the SSID that was last added.)</p><p>Unexpected behaviour / bug if you ask me.</p><p>The point you make that it works as expected well then I hope it will soon be upgraded.</p><p>I don&#039;t understand why you try to explain buggy behavior as expected behaviour.<br />Also since in another post you want to have an option that makes it more easy to configure. And I agree with that. Thing is this.&nbsp; This &#039;expected&#039; behaviour seems to be the one thing/feature that stands in the way to make that happen.</p><p>It&#039;s a pity that I don&#039;t have coding skills, but I do have some experience with betatesting.<br />So you may well be correct. </p><p>Maybe someone could point me to the code thin question? I doub&#039;t that I will understand any of it but having a look is the least that I can do.</p><p>I&#039;m still convinced that this is a bug and should have some level of priority.&nbsp; The bug that comes closest in the bugtracker seems to be very old and unfixable, although it doesn&#039;t describe the real buggy behaviour. And it doesn&#039;t address the issue that users can get locked out.&nbsp; </p><p>So I&#039;m not saying you are wrong, it&#039;s more like : I don&#039;t understand, but i try to make clear what goes wrong where it goes wrong, and what the consequences are for users.</p><p>Also because the &#039;travel routers&#039; are very populair and becoming ever more populair. So more and more people will run into this. And from my point of view it is better to make that point clear to as many people as possible, also because my coding skills are not good enough to dive in on my own.</p><p>Yea i&#039;m going to great lengths to make a point even when I don&#039;t understand the actual cause of it.<br />So I hope I did not offend you, if i did, my apologies, and feel free to pull my ear.&nbsp; English is not my main language so maybe my wording isn&#039;t always the best.&nbsp; &nbsp; </p><p>And thank you for your explanations I see there is much more to this then just buggy behaviour.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291105">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						10 Sep 2015, 03:35					</div>
				</div>
				<div class="post-content content">
					<p>@frietpan - Not offended at all, healthy debate.&nbsp; We just disagree on the definition of bug, but that&#039;s OK.</p><p>Create a new bug report and see what response you get.&nbsp; Probably worth stating the the use case has changed.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291182">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						10 Sep 2015, 23:30					</div>
				</div>
				<div class="post-content content">
					<p>Ok, cool</p><p>I hope my bug report can be replicated, I see small differences between the Mediatek 7620 and the Athereos 3133. It would be great is others could try and see if other chips have the same behavior or perhaps behave different.&nbsp; </p><p>OpenWRT seems to be capable of doing this. And as long as it can connect to a WWAN then it actually works.</p><p>At this point I wish i had some coding skills, So that i could understand what is happening on the inside.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p291185">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						10 Sep 2015, 23:58					</div>
				</div>
				<div class="post-content content">
					<p>Bug is now listed here:</p><p><a href="https://dev.openwrt.org/ticket/20475#ticket">https://dev.openwrt.org/ticket/20475#ticket</a></p><p>I hope I didn&#039;t forget to mention anything.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p292299">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						17 Sep 2015, 23:18					</div>
				</div>
				<div class="post-content content">
					<p>Related topic:<br /><a href="https://forum.openwrt.org/viewtopic.php?pid=292264#p292264">https://forum.openwrt.org/viewtopic.php … 64#p292264</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318218">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">gfunkdave</div>
					<div class="post-datetime">
						5 Apr 2016, 07:43					</div>
				</div>
				<div class="post-content content">
					<p>Bump. I have put OpenWRT on a HooToo TripMate Nano, and ran into this issue as well when I showed up to my hotel. I had to borrow an Ethernet cable and plug my laptop into the TripMate to get it to turn on wifi for the WLAN. </p><p>I understand that the use case generally was thought to involve a wired connection, but it just seems like a poor design choice to turn off all wifi if the wwan can&#039;t be found. Has there been any movement on this?</p><p>Thanks</p>											<p class="post-edited">(Last edited by <strong>gfunkdave</strong> on 5 Apr 2016, 07:43)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p318232">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">frietpan</div>
					<div class="post-datetime">
						5 Apr 2016, 09:16					</div>
				</div>
				<div class="post-content content">
					<p>There are a few people trying to device a wifiMgr. But that seems to be stagnating a bit.</p><p>One thing to keep in mind is the wifi Channel WWAN and WLAN both need to be set to the same channel for this to work. If&nbsp; the WWAN is not available then you can get locked out, so make sure you have a USB tty dongle for serial access</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>