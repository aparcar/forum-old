<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Where I can specify push &quot;route X.X.X.X Y.Y.Y.Y&quot; in OpenVPN luci app</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p319279">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">kt368</div>
					<div class="post-datetime">
						12 Apr 2016, 12:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi everyone!</p><p>Can anybody told me, can I add<br /></p><div class="codebox"><pre><code>push &quot;route 192.168.100.0 255.255.255.0&quot;</code></pre></div><p>thru web access, given by luci-app-openvpn?</p><p>In other words, is it possible to give access for clients to see computers in OpenVPN server&#039;s LAN using LuCI openvpn application?</p>											<p class="post-edited">(Last edited by <strong>kt368</strong> on 12 Apr 2016, 12:53)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319286">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						12 Apr 2016, 12:56					</div>
				</div>
				<div class="post-content content">
					<p>Luci -&gt; Services -&gt; OpenVPN -&gt; Switch to Advanced Configuration -&gt; Networking -&gt; route (add it as an additional field if it&#039;s not displayed).</p><p>Two caveats:<br />1. The format is IP MASK GATEWAY<br />2. I believe setting routes is broken in luci-app-openvpn, it saves those as an option and they should be saved as a list.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319290">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">kt368</div>
					<div class="post-datetime">
						12 Apr 2016, 13:24					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, it has helped me.</p><p>Another similar question: how I can set the &quot;client-config-dir&quot; location?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319299">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						12 Apr 2016, 14:40					</div>
				</div>
				<div class="post-content content">
					<p>Wait, are you configuring an openvpn server?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319302">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">kt368</div>
					<div class="post-datetime">
						12 Apr 2016, 14:51					</div>
				</div>
				<div class="post-content content">
					<p>Yes, I am. Server. Is it means, that<br /></p><div class="codebox"><pre><code>Luci -&gt; Services -&gt; OpenVPN -&gt; Switch to Advanced Configuration -&gt; Networking -&gt; route </code></pre></div><p>isn&#039;t push &quot;route ...&quot;?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319304">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						12 Apr 2016, 15:38					</div>
				</div>
				<div class="post-content content">
					<p>Ah, nevermind then, misread your post, thought you were talking about the client.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319305">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">kt368</div>
					<div class="post-datetime">
						12 Apr 2016, 15:44					</div>
				</div>
				<div class="post-content content">
					<p>So, is it possible to configure openvpn server thru luci for allowing connection from PCs in client network to computers in server network and backward?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319342">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">riodoro</div>
					<div class="post-datetime">
						12 Apr 2016, 19:20					</div>
				</div>
				<div class="post-content content">
					<p>Hi,</p><p>the route does&#039;t mean &quot;allow&quot;.<br />Usually you create a firewall zone for your VPN clients.<br />In network/firewall ... you have to allow the forwarding from VPN to LAN or whatever.</p><p>And push a route to your servers lan.<br />As I don&#039;t use the OpenVPN Luci-App I can&#039;t tell you where you have to do this.<br />But in a standard openvpn.conf it looks like this:<br /><strong>push route 192.168.100.0 255.255.255.0</strong></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319403">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">RangerZ</div>
					<div class="post-datetime">
						13 Apr 2016, 00:46					</div>
				</div>
				<div class="post-content content">
					<p>I do not see &#039;client-config-dir&#039; in the Luci-app-openvpn for cc 15.05 configurable options.</p><p>I have read, but can not find the reference, that the OpenVPN package is not the complete OpenVPN solution.&nbsp; This means not all the parameters are available.&nbsp; I also can not say if Luci-app-openvpn supports all the commands in openvpn-ssl (and other variations) or just a subset (of the subset).</p><p>While I understand your desire to use Luci to configure, I find using WinSCP (Windows) or another similar for Linux so much easier and faster to config with.&nbsp; If you save the delivered openvpn file as openvpn_original before you edit,&nbsp; you will have a very handy reference document available you can open at the same time.&nbsp; You will need to restart OpenVpn after you make manual changes&nbsp; in the file.</p><p>You did not ask, but I think this is probably one of the better OpenWrt OpenVPN pages ATM.&nbsp; <a href="https://wiki.openwrt.org/doc/howto/openvpn-streamlined-server-setup">https://wiki.openwrt.org/doc/howto/open â€¦ rver-setup</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319420">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">stangri</div>
					<div class="post-datetime">
						13 Apr 2016, 04:32					</div>
				</div>
				<div class="post-content content">
					<p>Uhm, I&#039;m sorry to butt in with my openvpn client experience again, but I can tell you for sure that not everything in *client* is configurable thru uci/luci, so it&#039;s not even luci-app-openvpn fault, not all the settings in /etc/config/openvpn translate to the working parameters for openvpn (in particular I&#039;ve struggled with max-routes).</p><p>So overall I&#039;d second the idea of using an openvpn file for your configs if it&#039;s something complex.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p319440">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">kt368</div>
					<div class="post-datetime">
						13 Apr 2016, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>Hooray!<br />I&#039;ve successfully tuned openvpn server without Luci. I&#039;ve removed luci-app-openvpn and made configuring thru editing config file /etc/config/openvpn. This is it:<br /></p><div class="codebox"><pre><code>config openvpn &#039;home_vpn&#039;
    option dev &#039;tun&#039;
    option comp_lzo &#039;yes&#039;
    option keepalive &#039;10 60&#039;
    option verb &#039;3&#039;
    option server &#039;10.1.0.0 255.255.255.0&#039;
    option ca &#039;/etc/openvpn/keys/ca.crt&#039;
    option dh &#039;/etc/openvpn/keys/dh2048.pem&#039;
    option cert &#039;/etc/openvpn/keys/server.crt&#039;
    option key &#039;/etc/openvpn/keys/server.key&#039;
    option enabled &#039;1&#039;
    list push &#039;route 192.168.1.0 255.255.255.0&#039;
    list push &#039;dhcp-option DNS 192.168.1.1&#039;</code></pre></div><p>Thanks everyone for your help!</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>