<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Self built firmware - kmod kernel version missmatch</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p192295">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">c1266002</div>
					<div class="post-datetime">
						17 Feb 2013, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>Hey everyone,</p><p>I have compiled my own version of OpenWrt for a device (AR71XX board) without issues. Building standard packages for it is also no issue.<br />The issue I am having is that when I try to install kmods from either the OpenWrt repository or if I build the packages and try to install them manually, I get an unsatisfied dependency issue.</p><p>Now, say my firmware&#039;s kernel version is 3.7.8 and I want to install a kmod, all of them seem to be built for 3.7.8-1 (revision 1?). The weird thing is, if I include a kmod into the build it works without an issue. If I want to install a kmod after flashing the firmware it becomes impossible (without forcing dependencies).</p><p>I am wondering if I am doing anything wrong or if there is anything I can do?</p><p>C126</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192296">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">rAndy</div>
					<div class="post-datetime">
						17 Feb 2013, 16:19					</div>
				</div>
				<div class="post-content content">
					<p>Nothing wrong, but keep in mind that rebuilding modules with another compiler version produces a mismatch and that openwrt package building is even tighter when it&#039;s up to compiler/toochain/libc/... versions.</p><p>The only way i know to produce no errors/warnings is to rebuild everything again from source and reflash your device</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192297">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">robthebrew</div>
					<div class="post-datetime">
						17 Feb 2013, 17:44					</div>
				</div>
				<div class="post-content content">
					<p>You could try opkg install â€“force-depends xxxxx</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p192423">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">c1266002</div>
					<div class="post-datetime">
						18 Feb 2013, 19:32					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for the replies!</p><p>@rAndy: Thanks for that, sadly this happens when I check out the latest trunk (tried a couple of times). It seems to be hit and miss, sometimes I get the right versions built of the kmods sometimes I get them built with -1 behind the kernel version. This seems very odd to me as I am using the same toolchain and environment to build them at the same time.</p><p>@robthebrew, I am aware of this but I want to get this fixed rather than just using a workaround. Thanks though!</p><p>Does anyone have any tips? I have just re-checked out the buildroot and now my firmware&#039;s kernel is 3.7.9 and the kmods that have been built are on version 3.7.9-1. They are built in and work fine if I select them to be (instead of m) in the menuconfig but the packages created won&#039;t install without errors in opkg. (They do with --force-depends but yeah).</p><p>C126</p>											<p class="post-edited">(Last edited by <strong>c1266002</strong> on 18 Feb 2013, 19:36)</p>
									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>