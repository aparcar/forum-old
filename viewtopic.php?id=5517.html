<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DHCP/DNS on multiple vlans?</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p26305">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">SuperSpy</div>
					<div class="post-datetime">
						29 Apr 2006, 18:37					</div>
				</div>
				<div class="post-content content">
					<p>With the help of OpenWrt and a little under a dozen WRT54G (v4), We have completely rebuilt the network at a small company I work for.&nbsp; This army of little blue boxes provide a swiss army knife of functions for our small network, and I couldn&#039;t be happier with the results. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>That said, I&#039;m having a bit of trouble rolling out another extention to our network by way of another little blue box...</p><p>First, let me try to explain the network setup I&#039;m trying to achieve:</p><p>(mspaint ftw)</p><p><span class="postimg"><img src="http://student.lssu.edu/~acounter/openwrtnetworkdia.PNG" alt="http://student.lssu.edu/~acounter/openwrtnetworkdia.PNG" /></span></p><p>As shown above, I want to have 2 subnets in the new office: one internal one for the employees&#039; work machines, and another locked-down version for visitor use.&nbsp; The visitor subnet will be locked down with iptables to only allow traffic going to/coming from the internet.</p><p>The problem is that both subnets need to have dhcp enabled (and dns service), and I can&#039;t get dnsmasq to run two instances or service both subnets from one instance.</p><p>Anyone know how to get one instance of dnsmasq to service 2 subnets?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p26326">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mpot</div>
					<div class="post-datetime">
						30 Apr 2006, 08:53					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>SuperSpy wrote:</cite><blockquote><p>Anyone know how to get one instance of dnsmasq to service 2 subnets?</p></blockquote></div><p>Have a look in the <a href="http://wiki.openwrt.org/OpenWrtDocs/dnsmasq">wiki</a> - it provides info on using different dhcp subnets on different interfaces (and I&#039;ve never had any issues <a href="http://martybugs.net/wireless/openwrt/dnsmasq.cgi">implementing it</a>).</p><p>Cheers,<br />Martin.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>