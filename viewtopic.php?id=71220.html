<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Build error for target tl-wr703n under Ubuntu 17.04</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p360284">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">jean_bruder</div>
					<div class="post-datetime">
						13 Jun 2017, 15:54					</div>
				</div>
				<div class="post-content content">
					<p>Dear all,</p><p>I&#039;m trying to build my own image of OpenWRT for the tl-wr703n target because of a lack of space to install the required package. I selected all the right options in the &quot;make menuconfig&quot;, then when trying to make the image, i got the following error :<br /></p><div class="quotebox"><blockquote><p>administrator@SC0031VL:~/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/gcc$ x86_64-linux-gnu-gcc -v&nbsp; -g -O2 -DIN_GCC&nbsp; -DCROSS_DIRECTORY_STRUCTURE&nbsp; -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings&nbsp; &nbsp;-DHAVE_CONFIG_H&nbsp; -o lto1 lto/lto-lang.o lto/lto.o lto/lto-object.o attribs.o lto/lto-partition.o lto/lto-symtab.o libbackend.a main.o&nbsp; libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a&nbsp; -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -lmpc -lmpfr -lgmp -rdynamic -ldl -lstdc++ -L../zlib -lz libcommon.a ../libcpp/libcpp.a&nbsp; &nbsp;../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a -lstdc++<br />Using built-in specs.<br />COLLECT_GCC=x86_64-linux-gnu-gcc<br />COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/6/lto-wrapper<br />Target: x86_64-linux-gnu<br />Configured with: ../src/configure -v --with-pkgversion=&#039;Ubuntu 6.3.0-12ubuntu2&#039; --with-bugurl=file:///usr/share/doc/gcc-6/README.Bugs --enable-languages=c,ada,c++,java,go,d,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-6 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-libmpx --enable-plugin --enable-default-pie --with-system-zlib --disable-browser-plugin --enable-java-awt=gtk --enable-gtk-cairo --with-java-home=/usr/lib/jvm/java-1.5.0-gcj-6-amd64/jre --enable-java-home --with-jvm-root-dir=/usr/lib/jvm/java-1.5.0-gcj-6-amd64 --with-jvm-jar-dir=/usr/lib/jvm-exports/java-1.5.0-gcj-6-amd64 --with-arch-directory=amd64 --with-ecj-jar=/usr/share/java/eclipse-ecj.jar --with-target-system-zlib --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu<br />Thread model: posix<br />gcc version 6.3.0 20170406 (Ubuntu 6.3.0-12ubuntu2)<br />COMPILER_PATH=/usr/lib/gcc/x86_64-linux-gnu/6/:/usr/lib/gcc/x86_64-linux-gnu/6/:/usr/lib/gcc/x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/6/:/usr/lib/gcc/x86_64-linux-gnu/<br />LIBRARY_PATH=/usr/lib/gcc/x86_64-linux-gnu/6/:/usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu/:/usr/lib/gcc/x86_64-linux-gnu/6/../../../../lib/:/lib/x86_64-linux-gnu/:/lib/../lib/:/usr/lib/x86_64-linux-gnu/:/usr/lib/../lib/:/usr/lib/gcc/x86_64-linux-gnu/6/../../../:/lib/:/usr/lib/<br />COLLECT_GCC_OPTIONS=&#039;-v&#039; &#039;-g&#039; &#039;-O2&#039; &#039;-D&#039; &#039;IN_GCC&#039; &#039;-D&#039; &#039;CROSS_DIRECTORY_STRUCTURE&#039; &#039;-fno-exceptions&#039; &#039;-fno-rtti&#039; &#039;-fasynchronous-unwind-tables&#039; &#039;-Wextra&#039; &#039;-Wall&#039; &#039;-Wno-narrowing&#039; &#039;-Wwrite-strings&#039; &#039;-Wcast-qual&#039; &#039;-Wsuggest-attribute=format&#039; &#039;-Woverloaded-virtual&#039; &#039;-Wpedantic&#039; &#039;-Wno-long-long&#039; &#039;-Wno-variadic-macros&#039; &#039;-Wno-overlength-strings&#039; &#039;-D&#039; &#039;HAVE_CONFIG_H&#039; &#039;-o&#039; &#039;lto1&#039; &#039;-L/home/administrator/openwrt/staging_dir/host/lib&#039; &#039;-L/home/administrator/openwrt/staging_dir/host/lib&#039; &#039;-L/home/administrator/openwrt/staging_dir/host/lib&#039; &#039;-rdynamic&#039; &#039;-L../zlib&#039; &#039;-mtune=generic&#039; &#039;-march=x86-64&#039;<br /> /usr/lib/gcc/x86_64-linux-gnu/6/collect2 -plugin /usr/lib/gcc/x86_64-linux-gnu/6/liblto_plugin.so -plugin-opt=/usr/lib/gcc/x86_64-linux-gnu/6/lto-wrapper -plugin-opt=-fresolution=/tmp/ccsh43eH.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --sysroot=/ --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -export-dynamic -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -z now -z relro -o lto1 /usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/6/crtbeginS.o -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -L../zlib -L/usr/lib/gcc/x86_64-linux-gnu/6 -L/usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/6/../../.. lto/lto-lang.o lto/lto.o lto/lto-object.o attribs.o lto/lto-partition.o lto/lto-symtab.o libbackend.a main.o libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a -lmpc -lmpfr -lgmp -ldl -lstdc++ -lz libcommon.a ../libcpp/libcpp.a ../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a -lstdc++ -lgcc --as-needed -lgcc_s --no-as-needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/x86_64-linux-gnu/6/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/6/../../../x86_64-linux-gnu/crtn.o<br />collect2: error: ld returned 1 exit status<br />administrator@SC0031VL:~/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/gcc$</p></blockquote></div><p>It would be realy nice to help me in order to build that specific image.</p><p>Many thanks in advance,<br />Best regards,<br />Jean</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360286">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">mk24</div>
					<div class="post-datetime">
						13 Jun 2017, 16:01					</div>
				</div>
				<div class="post-content content">
					<p>Run the buildroot by running <strong>make</strong> from the top level directory.&nbsp; Also do it as a regular user.&nbsp; You never need to be, and should never be, the root user on your PC to run any of the OpenWrt build system.</p><p>If you are only trying to put together a custom 4 MB image with some packages left out and others added, download and run the Image Builder tool from the release directory for your architecture.&nbsp; It is much simpler than running a build from scratch.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360287">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">jean_bruder</div>
					<div class="post-datetime">
						13 Jun 2017, 16:07					</div>
				</div>
				<div class="post-content content">
					<p>Dear mk24,</p><p>Thx for your answer.</p><p>I tried to compile from that directory to ensure the error was related to that especially, which it sounds to be really ... so I got the error from the top level of the building environment. I&#039;m not root, nor sudo user when compiling any kind of stuff (the &quot;administrator&quot; account is just to be compliant with some user name&#039;s rules).</p><p>I try to build the image just to fit the low space available on the tl-703n and followed the build rules from the OpenWRT web pages, but if there&#039;s another way easier to follow, I would like to know that way ? Can you maybe explain me how to do that (the only packages that I require are the one related to use an USB sound card and the shairport-sync package ...).</p><p>Many thanks in advance for your reply,<br />Sincerely,<br />Jean</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360304">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">tmo26</div>
					<div class="post-datetime">
						13 Jun 2017, 20:08					</div>
				</div>
				<div class="post-content content">
					<p>See <a href="https://wiki.openwrt.org/doc/howto/obtain.firmware.generate">https://wiki.openwrt.org/doc/howto/obta … e.generate</a> on how to use the image generator.</p><p>Do you need an image with or without LuCI?</p>											<p class="post-edited">(Last edited by <strong>tmo26</strong> on 13 Jun 2017, 20:11)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p360426">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jean_bruder</div>
					<div class="post-datetime">
						15 Jun 2017, 15:03					</div>
				</div>
				<div class="post-content content">
					<p>Dear tmo26,</p><p>Thx for your repli, i&#039;ll go for a read on the given link ...</p><p>Here&#039;s the exact error :<br /></p><div class="quotebox"><blockquote><p>make[5]: Entering directory &#039;/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/gcc&#039;<br />x86_64-linux-gnu-gcc&nbsp; &nbsp;-g -O2 -DIN_GCC&nbsp; -DCROSS_DIRECTORY_STRUCTURE&nbsp; -fno-exceptions -fno-rtti -fasynchronous-unwind-tables -W -Wall -Wno-narrowing -Wwrite-strings -Wcast-qual -Wmissing-format-attribute -Woverloaded-virtual -pedantic -Wno-long-long -Wno-variadic-macros -Wno-overlength-strings&nbsp; &nbsp;-DHAVE_CONFIG_H&nbsp; -o lto1 \<br />&nbsp; &nbsp; &nbsp; &nbsp; lto/lto-lang.o lto/lto.o lto/lto-object.o attribs.o lto/lto-partition.o lto/lto-symtab.o libbackend.a main.o&nbsp; libcommon-target.a libcommon.a ../libcpp/libcpp.a ../libdecnumber/libdecnumber.a&nbsp; -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -L/home/administrator/openwrt/staging_dir/host/lib -lmpc -lmpfr -lgmp -rdynamic -ldl -lstdc++ -L../zlib -lz libcommon.a ../libcpp/libcpp.a&nbsp; &nbsp;../libbacktrace/.libs/libbacktrace.a ../libiberty/libiberty.a ../libdecnumber/libdecnumber.a -lstdc++<br />collect2: error: ld returned 1 exit status<br />/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0/gcc/lto/Make-lang.in:71: recipe for target &#039;lto1&#039; failed<br />make[5]: *** [lto1] Error 1<br />make[5]: Leaving directory &#039;/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/gcc&#039;<br />Makefile:4101: recipe for target &#039;all-gcc&#039; failed<br />make[4]: *** [all-gcc] Error 2<br />make[4]: Leaving directory &#039;/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial&#039;<br />Makefile:36: recipe for target &#039;/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/.built&#039; failed<br />make[3]: *** [/home/administrator/openwrt/build_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/gcc-5.3.0-initial/.built] Error 2<br />make[3]: Leaving directory &#039;/home/administrator/openwrt/toolchain/gcc/initial&#039;<br />toolchain/Makefile:81: recipe for target &#039;toolchain/gcc/initial/compile&#039; failed<br />make[2]: *** [toolchain/gcc/initial/compile] Error 2<br />make[2]: Leaving directory &#039;/home/administrator/openwrt&#039;<br />toolchain/Makefile:80: recipe for target &#039;/home/administrator/openwrt/staging_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/stamp/.toolchain_install&#039; failed<br />make[1]: *** [/home/administrator/openwrt/staging_dir/toolchain-mips_34kc_gcc-5.3.0_musl-1.1.16/stamp/.toolchain_install] Error 2<br />make[1]: Leaving directory &#039;/home/administrator/openwrt&#039;<br />/home/administrator/openwrt/include/toplevel.mk:192 : la recette pour la cible « world » a échouée<br />make: *** [world] Erreur 2</p></blockquote></div><p>I just need an image that can be installed onto the router, without any other USB external memory (as the USB connector has to be used by an USB sound card). The only packages that should be installed are the one that will provide access to that USB external audio adapter, and the &quot;shairport-sync&quot; package, and the needed packages ...</p><p>Many thanks in advance,<br />Best regards,<br />Jean</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>