<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> text2atm.c in svn don&#039;t compil...</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 15 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p14905">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						5 Nov 2005, 22:50					</div>
				</div>
				<div class="post-content content">
					<p>Hello,</p><p>I am trying to compil the svn version for my ar7 router (D-Link DSL-G664T) but it fails:</p><p>/usr/src/CVS/trunk/openwrt/staging_dir_mipsel/bin/mipsel-linux-uclibc-gcc -DHAVE_CONFIG_H -I. -I. -I../.. -I/usr/src/CVS/trunk/openwrt/staging_dir_mipsel/usr/include -I../../src/include -Os -pipe -mips32 -mtune=mips32 -funit-at-a-time -Wall -Wshadow -Wpointer-arith -Wwrite-strings -Wstrict-prototypes -Wp,-MD,.deps/text2atm.pp -c text2atm.c&nbsp; -fPIC -DPIC -o .libs/text2atm.lo<br />In file included from ../../src/include/atm.h:11,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;from text2atm.c:15:<br />/usr/src/CVS/trunk/openwrt/staging_dir_mipsel/lib/gcc/mipsel-linux-uclibc/3.4.4/../../../../mipsel-linux-uclibc/sys-include/linux/atm.h:211: error: parse error before &quot;uint32_t&quot;<br />/usr/src/CVS/trunk/openwrt/staging_dir_mipsel/lib/gcc/mipsel-linux-uclibc/3.4.4/../../../../mipsel-linux-uclibc/sys-include/linux/atm.h:213: error: parse error before &#039;}&#039; token<br />/usr/src/CVS/trunk/openwrt/staging_dir_mipsel/lib/gcc/mipsel-linux-uclibc/3.4.4/../../../../mipsel-linux-uclibc/sys-include/linux/atm.h:217: error: parameter `addr&#039; has incomplete type<br />In file included from text2atm.c:16:<br />../../src/include/atmsap.h:43: error: parse error before &quot;uint8_t&quot;<br />../../src/include/atmsap.h:43: warning: function declaration isn&#039;t a prototype<br />text2atm.c: In function `do_try_nsap&#039;:<br />text2atm.c:97: error: dereferencing pointer to incomplete type<br />text2atm.c:98: error: dereferencing pointer to incomplete type<br />text2atm.c:99: error: dereferencing pointer to incomplete type<br />text2atm.c:104: error: dereferencing pointer to incomplete type<br />text2atm.c:105: error: dereferencing pointer to incomplete type<br />text2atm.c:109: error: dereferencing pointer to incomplete type<br />text2atm.c:119: error: dereferencing pointer to incomplete type<br />text2atm.c:120: error: dereferencing pointer to incomplete type<br />text2atm.c:132: error: dereferencing pointer to incomplete type<br />text2atm.c:143: error: dereferencing pointer to incomplete type<br />text2atm.c: In function `try_nsap&#039;:<br />text2atm.c:155: error: dereferencing pointer to incomplete type<br />text2atm.c:156: error: dereferencing pointer to incomplete type<br />text2atm.c: In function `try_e164&#039;:<br />text2atm.c:169: error: dereferencing pointer to incomplete type<br />text2atm.c:178: error: dereferencing pointer to incomplete type<br />text2atm.c:179: error: dereferencing pointer to incomplete type<br />text2atm.c:188: error: dereferencing pointer to incomplete type<br />text2atm.c: In function `text2atm&#039;:<br />text2atm.c:237: error: invalid application of `sizeof&#039; to incomplete type `sockaddr_atmsvc&#039; <br />make[8]: *** [text2atm.lo] Error 1<br />make[8]: Leaving directory `/usr/src/CVS/trunk/openwrt/build_mipsel/linux-atm-2.4.1/src/lib&#039;<br />make[7]: *** [all-recursive] Error 1<br />make[7]: Leaving directory `/usr/src/CVS/trunk/openwrt/build_mipsel/linux-atm-2.4.1/src&#039;<br />make[6]: *** [all-recursive] Error 1<br />make[6]: Leaving directory `/usr/src/CVS/trunk/openwrt/build_mipsel/linux-atm-2.4.1&#039;<br />make[5]: *** [all-recursive-am] Error 2<br />make[5]: Leaving directory `/usr/src/CVS/trunk/openwrt/build_mipsel/linux-atm-2.4.1&#039;<br />make[4]: *** [/usr/src/CVS/trunk/openwrt/build_mipsel/linux-atm-2.4.1/.built] Error 2<br />make[4]: Leaving directory `/usr/src/CVS/trunk/openwrt/package/linux-atm&#039;<br />make[3]: *** [compile] Error 2<br />make[3]: Leaving directory `/usr/src/CVS/trunk/openwrt/package/linux-atm&#039;<br />make[2]: *** [linux-atm-compile] Error 2<br />make[2]: Leaving directory `/usr/src/CVS/trunk/openwrt/package&#039;<br />make[1]: *** [package/compile] Error 2<br />make[1]: Leaving directory `/usr/src/CVS/trunk/openwrt&#039;<br />make: *** [world] Error 2</p><p>Any idea on how to fix it ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p15148">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Gregoire</div>
					<div class="post-datetime">
						9 Nov 2005, 19:18					</div>
				</div>
				<div class="post-content content">
					<p>Problems seems to be because I have /usr/include/stdint.h from my glibc and the automake creates wrong Makefiles :<br />build_mipsel/linux-atm-2.4.1/src/lib/Makefile<br />in which I have commented the first occurence of $(top_builddir)/src/include/stdint.h.</p><p>build_mipsel/linux-atm-2.4.1/src/include/Makefile<br />in which I have commented &quot;noinst_HEADERS = stdint.h&quot;.</p><p>The file build_mipsel/linux-atm-2.4.1/src/include/stdint.h contains :</p><p>#include &quot;/usr/include/stdint.h&quot;<br />I have removed this build_mipsel/linux-atm-2.4.1/src/include/stdint.h and then all compils just fine.</p><p>Now it would be great if someone which really know the openwrt sources could give a look at this problem <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p><p>And I have to find out how to &quot;flash&quot; my DSL-G664T with my brand new compiled firmware...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p28028">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mh</div>
					<div class="post-datetime">
						28 May 2006, 22:10					</div>
				</div>
				<div class="post-content content">
					<p>Hello, </p><p>maybe some more info an this: build_mipsel/linux-atm-2.4.1/src/include/stdint.h has these contents:</p><div class="codebox"><pre><code>/* stdint.h - provides uintXX_t until glibc does */

#ifndef _STDINT_H

#include &lt;features.h&gt;

#if __GLIBC__ &gt;= 2 &amp;&amp; __GLIBC_MINOR__ &gt;= 1

#include &quot;/usr/include/stdint.h&quot;

#elif __GLIBC__ &gt;= 2

/* Works for i386 and Alpha */

typedef unsigned char uint8_t;
typedef unsigned short uint16_t;
typedef unsigned int uint32_t;

#else

#ifndef _LINUX_TYPES_H
#include &lt;linux/types.h&gt;
#endif

#endif

#ifndef _STDINT_H
#define _STDINT_H
#endif

#endif</code></pre></div><p>On a gentoo-multilib system, /usr/include/stdint.h has these contents:</p><div class="codebox"><pre><code>/* Autogenerated by create_ml_includes() in multilib.eclass */

#ifdef __i386__
# include &lt;gentoo-multilib/x86/stdint.h&gt;
#endif /* __i386__ */

#ifdef __x86_64__
# include &lt;gentoo-multilib/amd64/stdint.h&gt;
#endif /* __x86_64__ */</code></pre></div><p>I&#039;d claim that using /usr/include/stdint.h by doing &#039;#include &quot;/usr/include/stdint.h&quot;&#039; is a bad hack which should be removed. Is this part of linux-atm, or has it been added by OpenWRT? <br />by the way, I got linux-atm to compile by changing &quot;#if __GLIBC__ &gt;= 2 &amp;&amp; __GLIBC_MINOR__ &gt;= 1&quot; to &quot;#if 0 &amp;&amp;&nbsp; __GLIBC__ &gt;= 2 &amp;&amp; __GLIBC_MINOR__ &gt;= 1&quot;, which prevents /usr/include/stdint.h from being used. (yes, I hacked the hack, lol)</p><p>Regards,<br />Milan</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>