<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> DHCP packet received on eth1 which has no address</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 18 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p120607">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">antonimus</div>
					<div class="post-datetime">
						8 Nov 2010, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Hi all, i have a strange problem with OpenWrt:<br />Installed on wrt160nl, wan(eth1) over pppoe, lan with dhcp. Everything working fine except this annoying message in syslog:</p><p>daemon.warn dnsmasq-dhcp[5945]: DHCP packet received on eth1 which has no address:</p><p>etc/config/dhcp:<br />config &#039;dnsmasq&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;domainneeded&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;boguspriv&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;filterwin2k&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;localise_queries&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;local&#039; &#039;/lan/&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;domain&#039; &#039;lan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;expandhosts&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;nonegcache&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;authoritative&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;readethers&#039; &#039;1&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;leasefile&#039; &#039;/tmp/dhcp.leases&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;resolvfile&#039; &#039;/tmp/resolv.conf.auto&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;notinterface&#039; &#039;eth1&#039;</p><p>config &#039;dhcp&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;interface&#039; &#039;wan&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;dynamicdhcp&#039; &#039;0&#039;<br />&nbsp; &nbsp; &nbsp; &nbsp; option &#039;ignore&#039; &#039;1&#039;<br />Thank you for help</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120698">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">fyi</div>
					<div class="post-datetime">
						10 Nov 2010, 00:11					</div>
				</div>
				<div class="post-content content">
					<p>Problem might be the wan setup in /etc/config/network.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p120822">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">antonimus</div>
					<div class="post-datetime">
						11 Nov 2010, 15:51					</div>
				</div>
				<div class="post-content content">
					<p>Thank you, the problem was in option &#039;notinterface&#039; &#039;eth1&#039;, it&#039;s list &#039;notinterface&#039; &#039;eth1&#039;, corrected and suppress messages.<br />Thanks</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p184986">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">stonecarver</div>
					<div class="post-datetime">
						2 Dec 2012, 16:31					</div>
				</div>
				<div class="post-content content">
					<p>Running RC1 on TL WR-941 ND v3 still getting this message in system log:</p><p>Dec 1 18:25:43 OpenWrt daemon.warn dnsmasq-dhcp[1596]: DHCP packet received on wan which has no address</p><p>DHCP<br />config dnsmasq<br />&nbsp; &nbsp; option domainneeded &#039;1&#039;<br />&nbsp; &nbsp; option boguspriv &#039;1&#039;<br />&nbsp; &nbsp; option filterwin2k &#039;0&#039;<br />&nbsp; &nbsp; option localise_queries &#039;1&#039;<br />&nbsp; &nbsp; option rebind_protection &#039;1&#039;<br />&nbsp; &nbsp; option rebind_localhost &#039;1&#039;<br />&nbsp; &nbsp; option local &#039;/lan/&#039;<br />&nbsp; &nbsp; option domain &#039;lan&#039;<br />&nbsp; &nbsp; option expandhosts &#039;1&#039;<br />&nbsp; &nbsp; option nonegcache &#039;0&#039;<br />&nbsp; &nbsp; option authoritative &#039;1&#039;<br />&nbsp; &nbsp; option readethers &#039;1&#039;<br />&nbsp; &nbsp; option leasefile &#039;/tmp/dhcp.leases&#039;<br />&nbsp; &nbsp; option resolvfile &#039;/tmp/resolv.conf.auto&#039;<br />&nbsp; &nbsp; list notinterface &#039;wan&#039;</p><p>config dhcp &#039;lan&#039;<br />&nbsp; &nbsp; option interface &#039;lan&#039;<br />&nbsp; &nbsp; option start &#039;100&#039;<br />&nbsp; &nbsp; option limit &#039;150&#039;<br />&nbsp; &nbsp; option leasetime &#039;12h&#039;</p><p>config dhcp &#039;wan&#039;<br />&nbsp; &nbsp; option interface &#039;wan&#039;<br />&nbsp; &nbsp; option ignore &#039;1&#039;</p><p>config domain</p><p>NETWORK</p><p>config interface &#039;loopback&#039;<br />&nbsp; &nbsp; option ifname &#039;lo&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;127.0.0.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.0.0.0&#039;</p><p>config interface &#039;eth&#039;<br />&nbsp; &nbsp; option ifname &#039;eth0&#039;<br />&nbsp; &nbsp; option proto &#039;none&#039;</p><p>config interface &#039;lan&#039;<br />&nbsp; &nbsp; option ifname &#039;lan1 lan2 lan3 lan4&#039;<br />&nbsp; &nbsp; option type &#039;bridge&#039;<br />&nbsp; &nbsp; option proto &#039;static&#039;<br />&nbsp; &nbsp; option ipaddr &#039;192.168.1.1&#039;<br />&nbsp; &nbsp; option netmask &#039;255.255.255.0&#039;</p><p>config interface &#039;wan&#039;<br />&nbsp; &nbsp; option ifname &#039;wan&#039;<br />&nbsp; &nbsp; option _orig_ifname &#039;wan&#039;<br />&nbsp; &nbsp; option _orig_bridge &#039;false&#039;<br />&nbsp; &nbsp; option proto &#039;pppoe&#039;<br />&nbsp; &nbsp; option username &#039;xxx&#039;<br />&nbsp; &nbsp; option password &#039;xxx&#039;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p186237">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">stonecarver</div>
					<div class="post-datetime">
						17 Dec 2012, 01:39					</div>
				</div>
				<div class="post-content content">
					<p>I can confirm adding &#039;&#039;&#039;except-interface=wan&#039;&#039;&#039; to &#039;&#039;&#039;/etc/dnsmasq.conf&#039;&#039;&#039; solved my problem.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p200788">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">kp0t</div>
					<div class="post-datetime">
						5 May 2013, 14:41					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>antonimus wrote:</cite><blockquote><p>Thank you, the problem was in option &#039;notinterface&#039; &#039;eth1&#039;, it&#039;s list &#039;notinterface&#039; &#039;eth1&#039;, corrected and suppress messages.<br />Thanks</p></blockquote></div><p>Thanks, I added the line &quot;list notinterface&nbsp; &nbsp; eth1&quot; in etc/config/dhcp&gt;&gt;config dnsmasq&nbsp; and this error - &quot;OpenWrt daemon.warn dnsmasq-dhcp[8292]: DHCP packet received on eth1 which has no address&quot; stopped.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p226520">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">peterwillcn</div>
					<div class="post-datetime">
						28 Feb 2014, 17:17					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, I added the line &quot;list notinterface eth0&quot; no warn daemon.warn dnsmasq-dhcp[1629]: DHCP packet received on eth0 which has no address</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p305259">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">dinjo</div>
					<div class="post-datetime">
						28 Dec 2015, 09:58					</div>
				</div>
				<div class="post-content content">
					<p>Adding <br />except-interface=wan</p><p>to /etc/dnsmasq.conf and restart dnsmasq helped here.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>