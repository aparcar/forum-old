<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> interface-wrt 0.5 for testing</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 28 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p1243">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						24 Jul 2004, 14:59					</div>
				</div>
				<div class="post-content content">
					<p>been busy so this week&#039;s update adds very little.</p><p>as always, use at your own risk. i&#039;d love to hear bugs, feature requests, etc. here&#039;s what&#039;s new: </p><p>+syslog configuration</p><p>still TODO: </p><p>+add something to the &quot;commands&quot; page<br />+package managment <br />+cleanup web code <br />+move away from php (or lwhp) </p><p>as far as prioritys go; i&#039;ll probably start working on a conversion (probably to ash).&nbsp; i&#039;m going to let the package managment functionality alone for now, mostly because the conversion project sounds more fun.</p><p>repository is at <a href="http://davidoffdotnet.net/openwrt/ipkg">http://davidoffdotnet.net/openwrt/ipkg</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1251">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jeffml</div>
					<div class="post-datetime">
						25 Jul 2004, 02:44					</div>
				</div>
				<div class="post-content content">
					<p>Nice.</p><p>- maybe a choice to reboot or not for simple changes?<br />- web interface version displayed on initial/all pages?<br />- modules for addon packages?<br />- syslogd: local and remote logging?</p><p>I was thinking about sending some patches to you but I don&#039;t want to spend too much time on it if you will be switching over to ash soon.&nbsp; Do you have a ballpark idea of when that would happen?</p><p>I noticed that mbm would like a different interface, would you be against moving to something a bit more CSS oriented if you were provided patches?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1254">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						25 Jul 2004, 06:01					</div>
				</div>
				<div class="post-content content">
					<p>is syslogd not working?&nbsp; it should be -- it&#039;s under management-&gt;services.&nbsp; the other suggestions are good.</p><p>i plan to start on the ash conversion next.&nbsp; at the same time i will make the conversion to css as well, and possibly a little javascript.&nbsp; i hope to release the ash conversion in the next couple weeks, but i&#039;ve been kept busy with other things.&nbsp; i hope some time will free up.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1258">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jeffml</div>
					<div class="post-datetime">
						25 Jul 2004, 09:02					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>is syslogd not working?&nbsp; it should be -- it&#039;s under management-&gt;services.&nbsp; the other suggestions are good.</p></blockquote></div><p>Sorry.&nbsp; Meant to explain that having the ability to remote log and locally log (with optional log rotate time) would be cool.<br /></p><div class="quotebox"><blockquote><p>i plan to start on the ash conversion next.&nbsp; at the same time i will make the conversion to css as well, and possibly a little javascript.&nbsp; i hope to release the ash conversion in the next couple weeks, but i&#039;ve been kept busy with other things.&nbsp; i hope some time will free up.</p></blockquote></div><p>Okay, I have a couple of module ideas already but will wait until you have some prelim stuff before finalizing.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1262">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						26 Jul 2004, 01:49					</div>
				</div>
				<div class="post-content content">
					<p>ok, here&#039;s a snag.&nbsp; does ash support arrays?&nbsp; i can&#039;t get it to work, if it does.&nbsp; any clever workarounds?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1347">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						3 Aug 2004, 14:09					</div>
				</div>
				<div class="post-content content">
					<p>just a quick update for those interested. . .</p><p> i&#039;m still working on this, but i haven&#039;t been able to make a weekly update.&nbsp; the reason is that the next update will be more significant, yet i&#039;ve had less time to work on this project recently.&nbsp; the result is delay.</p><p>the two things i&#039;m working on are:</p><p>1. css formatting -- the current version&#039;s html looks like its from the 1990&#039;s.&nbsp; someone never updated their html skills, but i&#039;m rectifying that.</p><p>2. conversion to ash -- i&#039;m using ash as the scripting language.&nbsp; the debate on the subject has been interesting, i&#039;ve chosen ash because (a) it works, and (b) it&#039;s already installed.&nbsp; it&#039;s true you lose some flexibility, but on the whole i think its worth it for as simple a project as a web interface.</p><p>realistically, i probably won&#039;t make another release until next week at the earliest.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1374">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">fozzmeister</div>
					<div class="post-datetime">
						5 Aug 2004, 19:54					</div>
				</div>
				<div class="post-content content">
					<p>is an IPTables Interface planned, I&#039;d like to start tackling this.</p><p>Fozz</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1380">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						6 Aug 2004, 02:18					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>is an IPTables Interface planned, I&#039;d like to start tackling this.</p><p>Fozz</p></blockquote></div><p>there&#039;s a rudimentary interface, it only allows forwarding and opening ports.</p><p>if you want to add to it, it might be worth waiting till i finish the ash conversion.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1395">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">fozzmeister</div>
					<div class="post-datetime">
						7 Aug 2004, 13:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m not too keen on the PHP thing either.</p><p>Foz</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1415">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">lsd</div>
					<div class="post-datetime">
						9 Aug 2004, 09:08					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m new around here, and I don&#039;t have any hardware to test with yet (though I&#039;m getting a WRT54GS soon), but I&#039;ve been looking at the idea of using Lua as a lightweight web scripting language. It&#039;s quite small (my untested MIPS binaries of it are about 250k), but still quite powerful.</p><p>I don&#039;t have anything to show off yet, but I&#039;ve been working on support code (CGI query/form parsing etc.) and a simple templating system. Once I get some hardware and get OpenWRT on it, I&#039;ll put something useful together and throw the packages up somewhere.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1416">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">thither</div>
					<div class="post-datetime">
						9 Aug 2004, 20:00					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;ve also been working on porting Python over to OpenWRT (which doesn&#039;t seem to be any too easy, since python includes a lot of thing that the WRT probably doesn&#039;t need, like Tk and infinite-precision integers).&nbsp; I&#039;d be very interested to see where you get with Lua, which I also looked at briefy.&nbsp; I&#039;ve also been considering pike and various small schemes (schemata?) for their utility in the OpenWRT.&nbsp; This is not so much because I think they&#039;d be super-useful as because scripting languages are fun.</p><p>I have this vague plan to do a reimplementation of python specifically for embedded systems, which would be tons of fun but which I probably don&#039;t realistically have time for.</p><p>I must say, though, that using sh as a web development language seems like it&#039;s just asking for trouble from a security angle.&nbsp; I suppose if the program is very rigorous about escaping input and so forth it should be doable, but the idea of running a root shell where the user can enter in `rm -rf /` as their username (or what have you) gives me the heebie-jeebies.&nbsp; (I haven&#039;t really looked at BusyBox ash in particular, either, maybe it&#039;s more robust than I think.)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1420">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">lsd</div>
					<div class="post-datetime">
						10 Aug 2004, 04:06					</div>
				</div>
				<div class="post-content content">
					<p>Lua was dead simple to get going, since it only depends on the standard C library (and optionally libdl for loading modules at runtime). If anyone&#039;s interested, I&#039;ve uploaded my untested build here:</p><p><a href="http://gir.eclinic.com.au/~lsd/openwrt/">http://gir.eclinic.com.au/~lsd/openwrt/</a></p><p>The tarball puts the lua interpreter and luac compiiler in to /usr/bin, and the liblua and liblualib libraries in to /usr/lib. The sort.lua script is just an example I pulled from the Lua tarball to test with. One again, this is an untested build (I don&#039;t have any hardware to test it on yet), but I&#039;d love to hear from anyone willing to give it a go and report success or failure.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1422">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						10 Aug 2004, 04:29					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;ve hit a problem with ash, and I&#039;m not sure there&#039;s much to do about it. the problem is . . . it&#039;s slow. it seems to take between 3-5 secs to parse each page.&nbsp; slow enough to be pretty annoying.</p><p>maybe i&#039;m doing something wrong.</p><p>other than that, though, the conversion from php to ash is pretty easy.&nbsp; but the &quot;that&quot; might be a deal breaker.</p><p>here&#039;s hoping i find some optimizations. . .</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1423">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">mbm</div>
					<div class="post-datetime">
						10 Aug 2004, 05:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>i&#039;ve hit a problem with ash, and I&#039;m not sure there&#039;s much to do about it. the problem is . . . it&#039;s slow. it seems to take between 3-5 secs to parse each page.&nbsp; slow enough to be pretty annoying.</p><p>maybe i&#039;m doing something wrong.</p><p>other than that, though, the conversion from php to ash is pretty easy.&nbsp; but the &quot;that&quot; might be a deal breaker.</p><p>here&#039;s hoping i find some optimizations. . .</p></blockquote></div><p>Post it or send it my way; I&#039;ll take a crack at optimizing it.</p><p>Anyways, not as if the page needs to be extremely fast; you really don&#039;t need to reconfigure that often.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1424">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						10 Aug 2004, 13:11					</div>
				</div>
				<div class="post-content content">
					<p>i&#039;m a moron.&nbsp; someone remind me to run top before complaining about performance issues.&nbsp; &nbsp;i had some half-assed shell script stuck in a loop in the background.&nbsp; someone buy me a clue . . .</p><p>that being said, i&#039;m still going to post some of the code.&nbsp; any suggestions on optimizations, or other things are most welcome.</p><p>this is very beta.&nbsp; it&#039;s not a package.&nbsp; it&#039;s not even close to workable or complete.&nbsp; it is, in fact, nothing more than two web pages (the network-&gt;status and network-&gt;local pages).&nbsp; only download it if you want to look at my ash code or css.</p><p>if you do download, dump it all in /www/cgi-bin and it should run.</p><p>as for the css, i know the &quot;content&quot; div widths are a little off in some browsers.&nbsp; i&#039;ll fix it.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1886">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						31 Aug 2004, 09:41					</div>
				</div>
				<div class="post-content content">
					<p>Hi Sam,</p><p>How is the conversion to Ash going for the interface?&nbsp; I&#039;d like to have a crack at designing an interface that can do network bridge and vlan control.&nbsp; I&#039;m very new to this, but if I&#039;m hoping if I can get the web side of it designed it might inspire some people to help me with the back-end stuff.</p><p>I&#039;m fiddling with the Javascript that comes with the default WRT54G and have noticed that the code has got &quot;UNPUBLISHED PROPRIETARY SOURCE CODE of CyberTAN Inc.&quot; written all over it.&nbsp; I take it we can&#039;t use this code as a base?&nbsp; How do we get around this?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p1888">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						31 Aug 2004, 14:25					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><blockquote><p>Hi Sam,</p><p>How is the conversion to Ash going for the interface?</p></blockquote></div><p>The conversion is going nicely.&nbsp; The only problem has been time.&nbsp; I just got back from vacation after an incredibly busy month.&nbsp; I hope to get some time this weekend to possibly get the conversion in a state to release.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2065">
				<div class="post-metadata">
					<div class="post-num">Post #18</div>
					<div class="post-author">sam</div>
					<div class="post-datetime">
						12 Sep 2004, 16:23					</div>
				</div>
				<div class="post-content content">
					<p>fwiw, the ash conversion is basically done.&nbsp; a few more little things to fix.</p><p>i&#039;ll release it for testing, suggestions, etc. once cvs and snapshots are updated to a version of busybox that has the patch for the http post limitation.</p><p><a href="http://www.busybox.net/lists/busybox/2004-August/012410.html">http://www.busybox.net/lists/busybox/20 … 12410.html</a></p><p>of course, people can update the buildroot themselves, but i&#039;m going to delay my release to avoid unecessary bug reports.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2091">
				<div class="post-metadata">
					<div class="post-num">Post #19</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						14 Sep 2004, 09:38					</div>
				</div>
				<div class="post-content content">
					<p>Great!&nbsp; I look forward to it.</p><p>I&#039;m going to have a crack at doing a web interface for Shorewall which I&#039;ve recently gotten to work under OpenWRT.&nbsp; It&#039;s slow but seems to be the only way of handling a firewall for 3 or more interfaces without melting your brain. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Having Shorewall in place will make it easier to add and delete VLANs and bridges dynamically from the web interface whilst maintaining a method of controlling the firewall.</p><p>The problem I see with existing web interfaces is that by using naked iptables commands to control the firewall they are locked into a certain number of interfaces in the box.&nbsp; It would seem that having a web interface that lets you add and remove VLAN, bridge, WDS and VPN network interfaces would cause a nightmare when it came to writing an accompanying iptables firewall web interface.</p><p>I believe Shorewall solves this nightmare for us.&nbsp; It&#039;d be pretty easy for a web interface to add and remove entries from the Shorewall config files and to execute Shorewall.</p><p>Because Shorewall takes a long time to execute on the WRT54G (over a minute at the moment), I&#039;m thinking that using &#039;iptables-save&#039; and &#039;iptables-restore&#039; would speed things up.&nbsp; Run &#039;iptables-save&#039; after Shorewall executes and then run &#039;iptables-restore&#039; on boot instead of Shorewall or a hand-written firewall script.</p><p>You would only need to execute Shorewall if you wanted to change the firewall behaviour.&nbsp; I believe this would be acceptable to all users except those who need to constanlty tweak their firewall.</p><p>EDIT: I just found out that recent versions of Shorewall have iptables-save/restore funtionality built-in.&nbsp; So I&#039;ll experiment with that...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2093">
				<div class="post-metadata">
					<div class="post-num">Post #20</div>
					<div class="post-author">chimpanzee</div>
					<div class="post-datetime">
						14 Sep 2004, 10:57					</div>
				</div>
				<div class="post-content content">
					<p>how many flash space is needed for shorewall ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2101">
				<div class="post-metadata">
					<div class="post-num">Post #21</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						15 Sep 2004, 03:05					</div>
				</div>
				<div class="post-content content">
					<p>After stripping almost all of the comments out of the config files and scripts I&#039;ve gotten Shorewall v2.0.8 down to about 208k.&nbsp; Still a fairly hefty package, sure.&nbsp; It&#039;s written entirely in shell script so that probably contributes to it&#039;s size, but it does make it easy to &#039;port&#039;. <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; I believe the functionality it provides makes it worth the room it occupies on the flash.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p2102">
				<div class="post-metadata">
					<div class="post-num">Post #22</div>
					<div class="post-author">danversj</div>
					<div class="post-datetime">
						15 Sep 2004, 05:11					</div>
				</div>
				<div class="post-content content">
					<p>UPDATE: on my debian box iptables-save is 51752 bytes and iptables-restore is 51788 bytes.&nbsp; So I guess shorewall does open a can of worms with the other apps it needs to fully function.&nbsp; I still think it&#039;s worth it. <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink" /></p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>