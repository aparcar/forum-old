<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Compiling various packages part of  LuCI fail</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 22 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p115404">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						17 Aug 2010, 16:24					</div>
				</div>
				<div class="post-content content">
					<p>any insight in this ? or it only me ?</p><p>selecting DLNA or samba fails to compile (Luci modules.).</p><p>similarly selecting luci-fastindex fails too</p><div class="codebox"><pre><code>rm -rf /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-kmod-mmc-over-gpio
touch /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/stamp/.kmod-mmc-over-gpio_installed
make[3]: Leaving directory `/home/mohnkhan/backfire/backfire/package/mmc_over_gpio&#039;
make[3]: Entering directory `/home/mohnkhan/backfire/backfire/package/lua&#039;
make[3]: Leaving directory `/home/mohnkhan/backfire/backfire/package/lua&#039;
make[3]: Entering directory `/home/mohnkhan/backfire/backfire/feeds/luci/luci&#039;
rm -rf /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core
mkdir -p /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/stamp /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core
cp -fpR -a /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/core/dist/* /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core/ -R
cp -fpR -a /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/core/ipkg/* /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core/CONTROL/ 2&gt;/dev/null || true
/home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/build/mkversion.sh /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core/usr/lib/lua/luci/version.lua &quot;OpenWrt Firmware&quot; &quot;Backfire (r22684)&quot; &quot;tags/0.9.0&quot; &quot;0.9.0&quot;
/home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/build/mkversion.sh: line 3: local: can only be used in a function
cp -fpR /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core/. /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/
rm -rf /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-core
touch /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/stamp/.luci-core_installed
rm -rf /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi
mkdir -p /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/stamp /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi
cp -fpR -a /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/cbi/dist/* /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi/ -R
cp -fpR -a /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/cbi/ipkg/* /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi/CONTROL/ 2&gt;/dev/null || true
cp -fpR /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi/. /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/
rm -rf /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/tmp-luci-cbi
touch /home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/root-ar71xx/stamp/.luci-cbi_installed
rm -rf /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex
mkdir -p /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL
echo &quot;Package: luci-fastindex&quot; &gt; /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL/control
echo &quot;Version: 0.9.0-1&quot; &gt;&gt; /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL/control
( DEPENDS=&#039;&#039;; for depend in luci-core; do DEPENDS=${DEPENDS:+$DEPENDS, }${depend##+}; done; echo &quot;Depends: $DEPENDS&quot;; echo &quot;Provides: &quot;; echo &quot;Source: feeds/luci/luci&quot;; echo &quot;Section: luci&quot;; echo &quot;Priority: optional&quot;; echo &quot;Maintainer: Steven Barth &lt;steven-at-midlink-dot-org&gt;&quot;; echo &quot;Architecture: ar71xx&quot;; echo &quot;Installed-Size: 1&quot;; echo -n &quot;Description: &quot;; getvar V_Package_luci_fastindex_description | sed -e &#039;s,^[[:space:]]*, ,g&#039;; ) &gt;&gt; /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL/control
chmod 644 /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL/control
(cd /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/CONTROL; var2file &quot;V_Package_luci_fastindex_conffiles&quot; conffiles; var2file &quot;V_Package_luci_fastindex_preinst&quot; preinst; var2file &quot;V_Package_luci_fastindex_postinst&quot; postinst; var2file &quot;V_Package_luci_fastindex_prerm&quot; prerm; var2file &quot;V_Package_luci_fastindex_postrm&quot; postrm; )
cp -fpR -a /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/fastindex/dist/* /home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/ipkg-ar71xx/luci-fastindex/ -R
cp: cannot stat `/home/mohnkhan/backfire/backfire/build_dir/target-mips_r2_uClibc-0.9.30.1/luci-0.9.0/libs/fastindex/dist/*&#039;: No such file or directory
make[3]: *** [/home/mohnkhan/backfire/backfire/bin/ar71xx/packages/luci-fastindex_0.9.0-1_ar71xx.ipk] Error 1
make[3]: Leaving directory `/home/mohnkhan/backfire/backfire/feeds/luci/luci&#039;
make[2]: *** [package/feeds/luci/luci/compile] Error 2
make[2]: Leaving directory `/home/mohnkhan/backfire/backfire&#039;
make[1]: *** [/home/mohnkhan/backfire/backfire/staging_dir/target-mips_r2_uClibc-0.9.30.1/stamp/.package_compile] Error 2
make[1]: Leaving directory `/home/mohnkhan/backfire/backfire&#039;
make: *** [world] Error 2</code></pre></div><p>svn&nbsp; OpenWrt Backfire (r22684)</p>											<p class="post-edited">(Last edited by <strong>mohnkhan</strong> on 17 Aug 2010, 16:35)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115410">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						17 Aug 2010, 17:46					</div>
				</div>
				<div class="post-content content">
					<p>make package/luci/clean world</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p115462">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">mohnkhan</div>
					<div class="post-datetime">
						18 Aug 2010, 13:03					</div>
				</div>
				<div class="post-content content">
					<p>thanks Jow,<br /> It compiled and will test the code today evening when after office hours.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118156">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">HRogge</div>
					<div class="post-datetime">
						30 Sep 2010, 13:37					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>make package/luci/clean world</p></blockquote></div><p>I had the same problem. I got a fresh checkout of the current backfire, added the packages and luci feeds and got the same error.</p><p>Can you explain why this make command is necessary ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118158">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Sep 2010, 13:54					</div>
				</div>
				<div class="post-content content">
					<p>Its an issue with the luci makefile. The .built stampfile must be invalidated if the package selection changes to trigger a re&quot;build&quot; of the sources. I haven&#039;t gotten around to implement the required stuff in the Makefile yet.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118159">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">HRogge</div>
					<div class="post-datetime">
						30 Sep 2010, 13:57					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>jow wrote:</cite><blockquote><p>Its an issue with the luci makefile. The .built stampfile must be invalidated if the package selection changes to trigger a re&quot;build&quot; of the sources. I haven&#039;t gotten around to implement the required stuff in the Makefile yet.</p></blockquote></div><p>Does &quot;make clean&quot; contain a full clean for all packages ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p118161">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						30 Sep 2010, 13:59					</div>
				</div>
				<div class="post-content content">
					<p>As far as I know, yes.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>