<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Problem using SDK: &quot;C compiler cannot create executables&quot;</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p194793">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						13 Mar 2013, 17:15					</div>
				</div>
				<div class="post-content content">
					<p>Hi!</p><p>I want to cross-compile some packages (eibd/linknx) for OpenWRT backfire 10.03.1 x86_generic (running on ALIX board).</p><p>I downloaded it from:</p><p><a href="http://downloads.openwrt.org/backfire/10.03.1/x86_generic/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1.tar.bz2">http://downloads.openwrt.org/backfire/1 â€¦ .1.tar.bz2</a></p><p>Then, whatever make I try on my packages, I always get this error:</p><div class="codebox"><pre><code>checking for C compiler default output file name... configure: error: C compiler cannot create executables
See `config.log&#039; for more details.</code></pre></div><p>In the config.log file, I can see:</p><div class="codebox"><pre><code>/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/usr/bin/../lib/gcc/i486-openwrt-linux-uclibc/4.1.2/../../../../i486-openwrt-linux-uclibc/bin/ld: warning: ld-uClibc.so.0, needed by /data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/usr/lib/libc.so, not found (try using -rpath or -rpath-link)
/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_app_init_array&#039;
/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_loaded_modules&#039;
/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/usr/lib/libc.so: undefined reference to `_dl_app_fini_array&#039;
collect2: ld returned 1 exit status</code></pre></div><p>Did I forget to do something after downloadinf the SDK, to configure it?</p><p>Thanks for your help,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194799">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						13 Mar 2013, 18:01					</div>
				</div>
				<div class="post-content content">
					<p>You didn&#039;t set the STAGING_DIR environment variable. In your case it should point to &quot;/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/&quot;</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194805">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						13 Mar 2013, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for your answer. But it does not change anything...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194808">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">jow</div>
					<div class="post-datetime">
						13 Mar 2013, 18:35					</div>
				</div>
				<div class="post-content content">
					<p>The you did it wrong. The error quoted above happens exactly because of that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194845">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						14 Mar 2013, 09:18					</div>
				</div>
				<div class="post-content content">
					<p>Where do I need to define this var? I used the shell command &#039;export&#039;...</p><div class="codebox"><pre><code>$ echo $STAGING_DIR 
/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/

$ ls $STAGING_DIR 
bin  info.mk  lib  sbin  usr</code></pre></div><p>BTW, I also have this error:</p><div class="codebox"><pre><code>$ make menuconfig V=99
make[1]: Entering directory `/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/scripts/config&#039;
/usr/bin/ld: i386 architecture of input file `zconf.tab.o&#039; is incompatible with i386:x86-64 output
collect2: error: ld returned 1 exit status
make[1]: *** [mconf] Error 1
make[1]: Leaving directory `/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/scripts/config&#039;
make: *** [scripts/config/mconf] Erreur 2</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194846">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						14 Mar 2013, 09:24					</div>
				</div>
				<div class="post-content content">
					<p>Again, is there something to do right after unpacking the SDK, in order to configure it? Or should it work out-of-the-box?</p><p>I didn&#039;t see anything about this STAGING_DIR var, in the wiki, except it is used in some Makefiles...</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194867">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">rubiktubik</div>
					<div class="post-datetime">
						14 Mar 2013, 15:55					</div>
				</div>
				<div class="post-content content">
					<p>Hi, </p><p>i had the same problems with the SDK!</p><p>What i have done is to build the Buildroot with the SDK option in &quot;make menuconfig&quot;:<br />(Don&#039;t forget to choose the right target platform)</p><p><a href="http://wiki.openwrt.org/doc/howto/buildroot.exigence">http://wiki.openwrt.org/doc/howto/buildroot.exigence</a></p><p>and then simple use your own SDK. </p><p>I takes a little longer because you build a firmware to but the SDK works out-of-the-box!</p><p>Its important that you checkout the stable branch because the SDK created by the trunk branch don&#039;t work as well!<br /></p><div class="codebox"><pre><code>svn checkout svn://svn.openwrt.org/openwrt/branches/backfire</code></pre></div><p>I hope it helps</p><p>rubiktubik</p>											<p class="post-edited">(Last edited by <strong>rubiktubik</strong> on 14 Mar 2013, 15:56)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194884">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						14 Mar 2013, 17:36					</div>
				</div>
				<div class="post-content content">
					<p>Thanks for this tip. But I would like to build the SDK which matches my distro, the backfire 10.03.1... Is it possible ?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194900">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">rubiktubik</div>
					<div class="post-datetime">
						14 Mar 2013, 18:46					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fma wrote:</cite><blockquote><p>Thanks for this tip. But I would like to build the SDK which matches my distro, the backfire 10.03.1... Is it possible ?</p></blockquote></div><p>The SDK is only a cross-compiler a have resently build software with the 10.03 SDK for Barrier Breaker(the trunk distro) with no problems. </p><p>I think its no problem to use the 10.03 Buildroot for the 10.03.1 distro.</p><p>Regards</p><p>rubiktubik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194935">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 09:23					</div>
				</div>
				<div class="post-content content">
					<p>In order to try to find the problem, could you send me some file from your freshly compiled SDK? I would like to compare them with the ones that come with the binary SDK...</p><p>I think we could start with the following files/dirs:</p><p>./Makefile<br />./rules.mk<br />./package/<br />./include/<br />./scripts/</p><p>Thanks,</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194936">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 09:37					</div>
				</div>
				<div class="post-content content">
					<p>The strange thing is that the path to the ld-uClibc.so.0 is set in the compilation test:</p><p>-L/data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib</p><p>So why the loader can&#039;t find the lib?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194941">
				<div class="post-metadata">
					<div class="post-num">Post #12</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 10:08					</div>
				</div>
				<div class="post-content content">
					<p>Mmm, no more luck with SDK compilation:</p><p>make[7]: Entering directory `/data/tmp/backfire_10.03/build_dir/host/mklibs/src/mklibs-readelf&#039;<br />x86_64-linux-gnu-g++ -DHAVE_CONFIG_H -I. -I../..&nbsp; &nbsp;-O2 -I/data/tmp/backfire_10.03/staging_dir/host/include -I/data/tmp/backfire_10.03/tools/mklibs/include&nbsp; -g -O2 -MT elf.o -MD -MP -MF .deps/elf.Tpo -c -o elf.o elf.cpp<br />elf.cpp: In static member function &#039;static Elf::file* Elf::file::open(const char*)&#039;:<br />elf.cpp:68:5: error: &#039;::close&#039; has not been declared<br />make[7]: *** [elf.o] Error 1</p><p>Is it a problem with my system? I&#039;m using a debian sid, on amd64 plateform...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194963">
				<div class="post-metadata">
					<div class="post-num">Post #13</div>
					<div class="post-author">rubiktubik</div>
					<div class="post-datetime">
						15 Mar 2013, 14:03					</div>
				</div>
				<div class="post-content content">
					<p>Hi here is my working SDK:<br /><a href="http://rapidshare.com/files/971778165/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3%2Bcs_uClibc-0.9.30.1.tar.bz2">http://rapidshare.com/files/971778165/O â€¦ .1.tar.bz2</a></p><p>But i&#039;am using the ar71xx architecture and virtualbox image with ubuntu 12.04 server 32bit.</p><p><a href="http://sourceforge.net/projects/virtualboximage/files/UbuntuServer/12.04/ubuntu-12.04-server-i386.7z">http://sourceforge.net/projects/virtual â€¦ er-i386.7z</a><br />from <a href="http://virtualboxes.org/images/ubuntu-server/">http://virtualboxes.org/images/ubuntu-server/</a></p><p>Hope it helps.</p><p>Regards<br />rubiktubik</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194965">
				<div class="post-metadata">
					<div class="post-num">Post #14</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 14:06					</div>
				</div>
				<div class="post-content content">
					<p>I can&#039;t download the archive:</p><p>Download permission denied by uploader. (0b67c2f5)</p><p>Do I need an account?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194975">
				<div class="post-metadata">
					<div class="post-num">Post #15</div>
					<div class="post-author">rubiktubik</div>
					<div class="post-datetime">
						15 Mar 2013, 14:27					</div>
				</div>
				<div class="post-content content">
					<p>Sorry i don&#039;t know what the problem is.</p><p>Here is another link:<br /><a href="https://www.dropbox.com/s/l08ct9hlc1wmobd/OpenWrt-SDK-ar71xx-for-Linux-i686-gcc-4.3.3%2Bcs_uClibc-0.9.30.1.tar.bz2">https://www.dropbox.com/s/l08ct9hlc1wmo â€¦ .1.tar.bz2</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194989">
				<div class="post-metadata">
					<div class="post-num">Post #16</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 16:16					</div>
				</div>
				<div class="post-content content">
					<p>I worked. Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p194994">
				<div class="post-metadata">
					<div class="post-num">Post #17</div>
					<div class="post-author">fma</div>
					<div class="post-datetime">
						15 Mar 2013, 16:40					</div>
				</div>
				<div class="post-content content">
					<p>I finally found another thread with similar problem:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=42355">https://forum.openwrt.org/viewtopic.php?id=42355</a></p><p>In fact, I have to add:</p><p>TARGET_LDFLAGS += -rpath-link /data/tmp/OpenWrt-SDK-x86-for-Linux-i686-gcc-4.1.2_uClibc-0.9.30.1/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib/ld-uClibc.so.0</p><p>(and not --rpath-link) in my own package Makfile, in the define Package/xxx section.</p><p>It seems to work <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>Is there a way to set this option more globally?</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>