<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> WNDRv4 fit for openwrt - english</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 8 Feb 2018 and 2 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 10 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=41094&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=17.html">17</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p229885">
				<div class="post-metadata">
					<div class="post-num">Post #226</div>
					<div class="post-author">thejackofclubs</div>
					<div class="post-datetime">
						11 Apr 2014, 07:38					</div>
				</div>
				<div class="post-content content">
					<p>yeah this has a heartbleed version of openssl. you can apparently patch it by reconfiguring with -DOPENSSL_NO_HEARTBEATS but im not sure of the steps that needs.</p><p>otherwise, still no complaints. 4 days of uptime with working ipv6, which is longer than ive ever gotten with the stock firmware.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230005">
				<div class="post-metadata">
					<div class="post-num">Post #227</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						12 Apr 2014, 18:07					</div>
				</div>
				<div class="post-content content">
					<p>OpenWRT devs have fixed the dual stack native IPv6 issue with help from people here on the forum.<br />Will be building new images as soon as I get some time.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230033">
				<div class="post-metadata">
					<div class="post-num">Post #228</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						13 Apr 2014, 00:56					</div>
				</div>
				<div class="post-content content">
					<p>Support for WNDR3700v4 has been enabled in trunk. It is visible in make menuconfig, if you first enable &quot;broken platforms&quot;.<br /><a href="https://dev.openwrt.org/changeset/40481">https://dev.openwrt.org/changeset/40481</a></p><p>Or actually all 40473-40481 were for tuning wndr3700v4/wndr4300:<br /><a href="https://dev.openwrt.org/changeset?new=40481%40trunk%2Ftarget%2Flinux%2Far71xx&amp;old=40472%40trunk%2Ftarget%2Flinux%2Far71xx">https://dev.openwrt.org/changeset?new=4 … x%2Far71xx</a></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230043">
				<div class="post-metadata">
					<div class="post-num">Post #229</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						13 Apr 2014, 02:24					</div>
				</div>
				<div class="post-content content">
					<p>Very nice <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />&nbsp; Less code to hack whenever we do an image for these routers now!</p><p>I&#039;ve noticed they&#039;ve done quite a bit with regards to the LED configuration.&nbsp; Perhaps the peeps in this thread will not need to do a great deal more work.</p>											<p class="post-edited">(Last edited by <strong>AdamK</strong> on 13 Apr 2014, 02:32)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230126">
				<div class="post-metadata">
					<div class="post-num">Post #230</div>
					<div class="post-author">cold</div>
					<div class="post-datetime">
						14 Apr 2014, 01:53					</div>
				</div>
				<div class="post-content content">
					<p>Thanks, folks, especially AdamK!</p><p>I bought the WNDRv4 specifically because it was listed as compatible with DD-WRT, and I wanted a router that allowed running a dnsmasq server for DHCP with local DNS, and a VPN server. After pfaffing about all weekend trying to get dnsmasq on dd-wrt to do its job, I finally&nbsp; remembered having heard about openWrt. Using AdamK&#039;s build I had dnsmasq working in no time, without hiccups. OpenWrt is really sweet, far more refined than the competition, with a great selection of packages and excellent package management.</p><p>I hope OpenVPN will be as easy to get going.</p><p>Jon</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230127">
				<div class="post-metadata">
					<div class="post-num">Post #231</div>
					<div class="post-author">wolfgang.rupprecht</div>
					<div class="post-datetime">
						14 Apr 2014, 02:57					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m happily running OpenWrt Barrier Breaker r40498, NETGEAR WNDR3700v4/WNDR4300.&nbsp; &nbsp;It looks great!&nbsp; Thanks for updating trunk to incorporate the 3700v4 patches.&nbsp; (Actually, I&#039;m happy to see that the duplicated 4300/3700v4 files have been eliminated.&nbsp; That will be one less source of fixes only being applied to one router or the other.)</p><p>One thing I noticed is that the openwrt-ar71xx-nand-wndr3700v4-ubi-factory.img can&#039;t be updated via tftp on my router.&nbsp; I have to reflash the factory firmware via tftp and then use the web form on the factory firmware to flash the openwrt firmware img.&nbsp; &nbsp;I do notice that the factory firmware img file and openwrt img have different capitalization in the header.&nbsp; Might this be the problem?&nbsp; &nbsp;I don&#039;t have a serial header attached, so I can&#039;t see any gripe the unit might be spitting out.</p><p>==&gt; factory/WNDR3700v4-V1.0.1.52.img &lt;==<br />device:WNDR3700v4<br />version:V1.0.1.52<br />region:<br />hd_id:29763948+128+128</p><p>==&gt; openwrt/bin/ar71xx/openwrt-ar71xx-nand-wndr3700v4-ubi-factory.img &lt;==<br />device:WNDR3700V4<br />version:VOpenWrt.r40498<br />region:<br />hd_id:29763948+128+128</p><p>Does anyone familiar with the Makefile build macros know which one of the &quot;WNDR3700V4&quot; strings need to be changed to &quot;WNDR3700v4&quot; to test this theory?&nbsp; I&#039;ve tried just to edit the file with emacs and that didn&#039;t flash either, but then I might have broken some checksum by editing it like that.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230128">
				<div class="post-metadata">
					<div class="post-num">Post #232</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						14 Apr 2014, 03:09					</div>
				</div>
				<div class="post-content content">
					<p>Alright I have built new images for the WNDR4300 &amp; WNDR3700v4 based on trunk revision 40509.&nbsp; I&#039;ve pretty much done this stock via the trunk without applying any patches from this thread so it will be most interesting to see how well these images work.</p><p>WNDR4300:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr4300-ubi-r40509-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>WNDR3700v4:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr3700v4-ubi-r40509-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>NOTE:&nbsp; These images DO patch the OpenSSL Heartbleed bug.</p>											<p class="post-edited">(Last edited by <strong>AdamK</strong> on 14 Apr 2014, 04:27)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230182">
				<div class="post-metadata">
					<div class="post-num">Post #233</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						14 Apr 2014, 16:01					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wolfgang.rupprecht wrote:</cite><blockquote><p>Does anyone familiar with the Makefile build macros know which one of the &quot;WNDR3700V4&quot; strings need to be changed to &quot;WNDR3700v4&quot; to test this theory?</p></blockquote></div><p>It should be the second occurrence on line 1219:<br /><a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/image/Makefile#L1219">https://dev.openwrt.org/browser/trunk/t … file#L1219</a><br /></p><div class="codebox"><pre><code>$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))</code></pre></div><p>(The first occurrence is the profile name referenced from line 1224).</p><p>You should also be able to edit firmware by hand with a proper hex editor. I do not think that there is any further checksum. Emacs is probably too &quot;text editor&quot;.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230225">
				<div class="post-metadata">
					<div class="post-num">Post #234</div>
					<div class="post-author">wolfgang.rupprecht</div>
					<div class="post-datetime">
						15 Apr 2014, 00:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>It should be the second occurrence on line 1219:<br /><a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/image/Makefile#L1219">https://dev.openwrt.org/browser/trunk/t … file#L1219</a><br /></p><div class="codebox"><pre><code>$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))</code></pre></div></blockquote></div><p>OK!&nbsp; That was it.&nbsp; I just successfully flashed a fresh OpenWRT image via tftp.&nbsp; Thanks for the tip!&nbsp; This will make it *much* easier to upgrade the image.&nbsp; I was getting pretty frustrated doing the two step update.</p><div class="codebox"><pre><code>diff --git a/target/linux/ar71xx/image/Makefile b/target/linux/ar71xx/image/Makefile
index 8234f88..2d5dc6b 100644
--- a/target/linux/ar71xx/image/Makefile
+++ b/target/linux/ar71xx/image/Makefile
@@ -1216,7 +1216,7 @@ $(eval $(call MultiProfile,Madwifi,EAP7660D UBNTRS UBNTRSPRO UBNTLSSR71 WP543))
 endif # ifeq ($(SUBTARGET),generic)
 
 ifeq ($(SUBTARGET),nand)
-$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))
+$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700v4,&quot;&quot;,-H 29763948+128+128,wndr4300))
 $(eval $(call SingleProfile,NetgearNAND,64k,WNDR4300V1,wndr4300,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR4300,&quot;&quot;,-H 29763948+0+128+128+2x2+3x3,wndr4300))
 
 $(eval $(call SingleProfile,ZyXELNAND,128k,NBG6716,nbg6716,NBG6716,ttyS0,115200,NBG6716,$$(zyx_nbg6716_mtdlayout),ubi.mtd=ubiroot mem=256M))</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230282">
				<div class="post-metadata">
					<div class="post-num">Post #235</div>
					<div class="post-author">dmarkey</div>
					<div class="post-datetime">
						15 Apr 2014, 13:24					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wolfgang.rupprecht wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>It should be the second occurrence on line 1219:<br /><a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/image/Makefile#L1219">https://dev.openwrt.org/browser/trunk/t … file#L1219</a><br /></p><div class="codebox"><pre><code>$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))</code></pre></div></blockquote></div><p>OK!&nbsp; That was it.&nbsp; I just successfully flashed a fresh OpenWRT image via tftp.&nbsp; Thanks for the tip!&nbsp; This will make it *much* easier to upgrade the image.&nbsp; I was getting pretty frustrated doing the two step update.</p><div class="codebox"><pre><code>diff --git a/target/linux/ar71xx/image/Makefile b/target/linux/ar71xx/image/Makefile
index 8234f88..2d5dc6b 100644
--- a/target/linux/ar71xx/image/Makefile
+++ b/target/linux/ar71xx/image/Makefile
@@ -1216,7 +1216,7 @@ $(eval $(call MultiProfile,Madwifi,EAP7660D UBNTRS UBNTRSPRO UBNTLSSR71 WP543))
 endif # ifeq ($(SUBTARGET),generic)
 
 ifeq ($(SUBTARGET),nand)
-$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))
+$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700v4,&quot;&quot;,-H 29763948+128+128,wndr4300))
 $(eval $(call SingleProfile,NetgearNAND,64k,WNDR4300V1,wndr4300,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR4300,&quot;&quot;,-H 29763948+0+128+128+2x2+3x3,wndr4300))
 
 $(eval $(call SingleProfile,ZyXELNAND,128k,NBG6716,nbg6716,NBG6716,ttyS0,115200,NBG6716,$$(zyx_nbg6716_mtdlayout),ubi.mtd=ubiroot mem=256M))</code></pre></div></blockquote></div><br /><p>Are you able to share your build? Thanks!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230287">
				<div class="post-metadata">
					<div class="post-num">Post #236</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						15 Apr 2014, 14:16					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wolfgang.rupprecht wrote:</cite><blockquote><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>It should be the second occurrence on line 1219:<br /><a href="https://dev.openwrt.org/browser/trunk/target/linux/ar71xx/image/Makefile#L1219">https://dev.openwrt.org/browser/trunk/t … file#L1219</a><br /></p><div class="codebox"><pre><code>$(eval $(call SingleProfile,NetgearNAND,64k,WNDR3700V4,wndr3700v4,WNDR4300,ttyS0,115200,$$(wndr4300_mtdlayout),0x33373033,WNDR3700V4,&quot;&quot;,-H 29763948+128+128,wndr4300))</code></pre></div></blockquote></div><p>OK!&nbsp; That was it.&nbsp; I just successfully flashed a fresh OpenWRT image via tftp.&nbsp; Thanks for the tip!&nbsp; This will make it *much* easier to upgrade the image.&nbsp; I was getting pretty frustrated doing the two step update.</p></blockquote></div><p>You should send the patch to the openwrt-devel mailing list to get it patched in the main source.</p><p>(If I got you right, the OEM TFTP recovery/flash mode expects a lowercase v4 there.)</p>											<p class="post-edited">(Last edited by <strong>hnyman</strong> on 15 Apr 2014, 14:17)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230308">
				<div class="post-metadata">
					<div class="post-num">Post #237</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						15 Apr 2014, 17:48					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Alright I have built new images for the WNDR4300 &amp; WNDR3700v4 based on trunk revision 40509.&nbsp; I&#039;ve pretty much done this stock via the trunk without applying any patches from this thread so it will be most interesting to see how well these images work.</p><p>WNDR3700v4:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr3700v4-ubi-r40509-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>NOTE:&nbsp; These images DO patch the OpenSSL Heartbleed bug.</p></blockquote></div><p>Worked for me and settings persist after reboot. Both wifi&#039;s were down though right after the install, don&#039;t know if that&#039;s intentional. Do work fine when enabled.<br />However I can&#039;t get port forwarding to actually work even though the forward is showing up fine in the web interface. I double checked how to do it using /etc/config/firewall on sites like <a href="http://www.smallbusinesstech.net/more-complicated-instructions/openwrt/setting-up-port-forwarding-and-dealing-with-loopbacks-on-openwrt-kamikaze-8.09.1">here</a> and <a href="http://developwithguru.com/how-to-setup-port-fowarding-in-openwrt/">there</a> and even tried copying over their setup but then customised to the IP/Port I need, no luck still. </p><p>Am I missing something super obvious here? Shouldn&#039;t it be as easy as visiting the web interface and going to Network &gt; Firewall &gt; Port Forwarding, adding the new forward, save &amp; apply and it works? Because it doesn&#039;t for me.<br /><a href="http://p.lui.li/img-40415_pwebi_p-r-full.png"><span class="postimg"><img src="http://p.lui.li/img-40415_pwebi_p-r-thumb.png" alt="http://p.lui.li/img-40415_pwebi_p-r-thumb.png" /></span></a></p>											<p class="post-edited">(Last edited by <strong>Axeia</strong> on 15 Apr 2014, 17:50)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230347">
				<div class="post-metadata">
					<div class="post-num">Post #238</div>
					<div class="post-author">rocee</div>
					<div class="post-datetime">
						15 Apr 2014, 21:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi folks,</p><p>I&#039;m new here!&nbsp; Got the WNDR4300 because wanted one wich&#039;s capable running WRT.<br />Downloaded AdamK&#039;s Image for WNDR4300. Loaded the Image with original Netgear-Firmware WebGui.<br />Thanks for your development !!!</p><div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Okay the images are done.</p><p>crooked_e especially will likely be keen to give this a try.&nbsp; The big tests will be WiFi and that settings are retained after rebooting or power cycling, given the above where I&#039;ve found they fixed up fstools.</p><p>For the WNDR3700v4:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr3700v4-ubi-r40387-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>For the WNDR4300:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr4300-ubi-r40387-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p></blockquote></div><p>So far seems nice, but: I DO NOT GET THE PPPoE running!!!!&nbsp; Tried different things - no idea why it&#039;s not connecting!<br />My old router is still working - connecting with no probs. So it&#039;s not an ISP-problem. </p><p>Modem is connected to yellow connector.&nbsp; Interface WAN was connected to physical @wan, eth0, eth1, teql0 - but none of them worked.<br />Is it a bug or am I thinking wrong?&nbsp; I NEED some HELP please !!</p><p>ANY Hints appreciated?<br />Greets to all<br />Rochus</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230377">
				<div class="post-metadata">
					<div class="post-num">Post #239</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						16 Apr 2014, 01:09					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Axeia wrote:</cite><blockquote><p>Worked for me and settings persist after reboot. Both wifi&#039;s were down though right after the install, don&#039;t know if that&#039;s intentional. Do work fine when enabled.</p></blockquote></div><p>Yes that is intentional and default settings with OpenWRT.&nbsp; It gives you an opportunity to lock down your wifi first to prevent someone hopping on and scoring free access to your network before you have a chance to secure it.</p><br /><div class="quotebox"><cite>Axeia wrote:</cite><blockquote><p>However I can&#039;t get port forwarding to actually work even though the forward is showing up fine in the web interface.</p></blockquote></div><p>The setting looks fine; and port forwarding works with no problems on my WNDR4300...<br />Are you sure the server is accepting connections on that port other than just to itself?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230380">
				<div class="post-metadata">
					<div class="post-num">Post #240</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						16 Apr 2014, 01:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>rocee wrote:</cite><blockquote><p>So far seems nice, but: I DO NOT GET THE PPPoE running!!!!&nbsp; Tried different things - no idea why it&#039;s not connecting!<br />My old router is still working - connecting with no probs. So it&#039;s not an ISP-problem. </p><p>Modem is connected to yellow connector.&nbsp; Interface WAN was connected to physical @wan, eth0, eth1, teql0 - but none of them worked.</p></blockquote></div><p>Try power cycling both the router AND your modem.&nbsp; Don&#039;t reboot, fully power cycle both devices.&nbsp; Failing that, factory default your WNDR4300.&nbsp; Once factory defaulted remember to power cycle the WNDR4300 to get devices working properly (there is still a bug where you need to do this to get everything working OK)</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230381">
				<div class="post-metadata">
					<div class="post-num">Post #241</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						16 Apr 2014, 01:38					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Yes that is intentional and default settings with OpenWRT.&nbsp; It gives you an opportunity to lock down your wifi first to prevent someone hopping on and scoring free access to your network before you have a chance to secure it.</p></blockquote></div><p>Smart <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Are you sure the server is accepting connections on that port other than just to itself?</p></blockquote></div><p>Positive, works fine with both dd-wrt and the stock firmware. On my old wndr3700v2 it worked fine as well but I gave that one away for christmas.</p><p>Can access it over the LAN through its local IP on that port as well (from another PC). I&#039;ve had the problem with all builds you have posted btw. Is anyone else having the same problem?<br /><strong>/etc/config/firewall</strong> reads</p><div class="codebox"><pre><code>config redirect
        option target &#039;DNAT&#039;
        option src &#039;wan&#039;
        option dest &#039;lan&#039;
        option proto &#039;tcp udp&#039;
        option src_dport &#039;8092&#039;
        option dest_ip &#039;192.168.1.100&#039;
        option dest_port &#039;8092&#039;
        option name &#039;Steph Server&#039;</code></pre></div><p>which seems perfectly valid to me.</p><p>If I do a /etc/init.d/firewall restart I do get a </p><div class="codebox"><pre><code>Warning: Unable to locate ipset utility, disabling ipset support</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230383">
				<div class="post-metadata">
					<div class="post-num">Post #242</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						16 Apr 2014, 02:37					</div>
				</div>
				<div class="post-content content">
					<p>BAM!!&nbsp; I&#039;ll add ipset support into a fresh image to see if that helps.</p><p>Edit:&nbsp; Also I just noticed, try removing the space in your rule name.&nbsp; For example instead of Steph Server, put Steph-Server.<br />Reload your firewall then test.&nbsp; It could be nothing but try it and see if that solves it.&nbsp; As I said I have no issues with my WNDR4300 so I&#039;m assuming it will still work even without ipset...tho I am building a fresh image with that included anyway.</p><p>The next image will be based on trunk revision 40518 which also includes an updated strongswan to further patch against Heartbleed.</p><p>UPDATE:&nbsp; Have tested the new image on my TP Link WDR4300 (not the Netgear just yet) and confirmed all is working, though the ipset added a good 150KB to the image size, it&#039;s getting tight so may look at where I can remove any junk.&nbsp; Am now building for the WNDR4300/WNDR3700v4, will post the links in the next hour.</p>											<p class="post-edited">(Last edited by <strong>AdamK</strong> on 16 Apr 2014, 03:59)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230385">
				<div class="post-metadata">
					<div class="post-num">Post #243</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						16 Apr 2014, 04:37					</div>
				</div>
				<div class="post-content content">
					<p>Images are now up and live.</p><p>WNDR3700v4:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr3700v4-ubi-r40512-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>WNDR4300:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr4300-ubi-r40512-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>This contains the ipset utility package, and an update to Strongswan.&nbsp; Note I have named the files with trunk revision 40512 instead of 40518; for some reason LuCI thinks it is still on r40512...</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230400">
				<div class="post-metadata">
					<div class="post-num">Post #244</div>
					<div class="post-author">hnyman</div>
					<div class="post-datetime">
						16 Apr 2014, 09:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>I have named the files with trunk revision 40512 instead of 40518; for some reason LuCI thinks it is still on r40512...</p></blockquote></div><p>That is a stupidity in the Openwrt build system logic for displaying the revision. The displayed revision is the revision of the last check-in to the &quot;main openwrt source&quot;, excluding packages, branches etc. The default logic is to use the &quot;svn info&quot; output, but take &quot;Last changed revision&quot; instead of &quot;Revision&quot; line. Very often there is no difference on trunk, as most check-ins go to main source. But if the last check-in is in packages (like now), the default logic does not take that into account.</p><p>I have changed it in my own build to show the real svn revision taking into account the whole repository. (I don&#039;t use git, so I have only modified the svn check):<br /></p><div class="codebox"><pre><code>--- scripts/getver.sh
+++ scripts/getver.sh
@@ -11,7 +11,7 @@
  
 try_svn() {
    [ -d .svn ] || return 1
-   REV=&quot;$(svn info | awk &#039;/^Last Changed Rev:/ { print $4 }&#039;)&quot;
+   REV=&quot;$(svn info | awk &#039;/^Revision:/ { print $2 }&#039;)&quot;
    REV=&quot;${REV:+r$REV}&quot;
    [ -n &quot;$REV&quot; ]
 }</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230408">
				<div class="post-metadata">
					<div class="post-num">Post #245</div>
					<div class="post-author">rocee</div>
					<div class="post-datetime">
						16 Apr 2014, 10:51					</div>
				</div>
				<div class="post-content content">
					<p>Thanks AdamK,<br /> factory default and power cycle the WNDR4300 helped !</p><div class="quotebox"><cite>AdamK wrote:</cite><blockquote><div class="quotebox"><cite>rocee wrote:</cite><blockquote><p>So far seems nice, but: I DO NOT GET THE PPPoE running!!!!&nbsp; Tried different things - no idea why it&#039;s not connecting!<br />My old router is still working - connecting with no probs. So it&#039;s not an ISP-problem. </p><p>Modem is connected to yellow connector.&nbsp; Interface WAN was connected to physical @wan, eth0, eth1, teql0 - but none of them worked.</p></blockquote></div><p>Try power cycling both the router AND your modem.&nbsp; Don&#039;t reboot, fully power cycle both devices.&nbsp; Failing that, factory default your WNDR4300.&nbsp; Once factory defaulted remember to power cycle the WNDR4300 to get devices working properly (there is still a bug where you need to do this to get everything working OK)</p></blockquote></div><p>Now I can go on configuring.<br />Good work!<br />Greets R</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230433">
				<div class="post-metadata">
					<div class="post-num">Post #246</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						16 Apr 2014, 16:34					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Images are now up and live.</p><p>WNDR3700v4:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr3700v4-ubi-r40512-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>WNDR4300:<br /><a href="http://www.mcservices.com.au/downloads/OpenWRT/openwrt-ar71xx-nand-wndr4300-ubi-r40512-factory.img">http://www.mcservices.com.au/downloads/ … actory.img</a></p><p>This contains the ipset utility package, and an update to Strongswan.&nbsp; Note I have named the files with trunk revision 40512 instead of 40518; for some reason LuCI thinks it is still on r40512...</p></blockquote></div><p>A little bit of progress, don&#039;t get the ipset missing error anymore (as expected). And if I leave the &quot;Enable LAN loopback&quot; checkbox ticked it works locally. If I untick it however the forward does not work over the internet (WAN).</p><p>I tried forwarding it to another IP (my desktop running a WAMP stack) instead of my server and it doesn&#039;t work either. Is there any way I can supply useful feedback by running some commands? Router running openWRT, server running linux, desktop running windows so should be able to run pretty much any tools/application to help trace the problem, just don&#039;t know how <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /></p><p>[edit]<br />Installed Wireshark on my server. Whenever I contact the server on the port I get a red line, that&#039;s not a good sign. I can&#039;t make sense of this information other than the Dst Port not being what I expected. Where is this port 51090 coming from all of a sudden?<br /><a href="http://p.lui.li/img-40416_psnapshot5_p-r-full.png"><span class="postimg"><img src="http://p.lui.li/img-40416_psnapshot5_p-r-med.png" alt="http://p.lui.li/img-40416_psnapshot5_p-r-med.png" /></span></a></p><p>[edit2]<br />Changed my server from the KDE network manager to ifup and added a DHCP lease so the server gets a static IP. No longer getting&nbsp; the red line in wireshark, getting nothing from wireshark. Have confirmed the servers ip is in fact where the port forward is supposed to be going to with ifconfig. Seems to be a step in the wrong direction although it is how I&#039;d want it configured in the long run.</p>											<p class="post-edited">(Last edited by <strong>Axeia</strong> on 16 Apr 2014, 20:03)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230483">
				<div class="post-metadata">
					<div class="post-num">Post #247</div>
					<div class="post-author">wolfgang.rupprecht</div>
					<div class="post-datetime">
						16 Apr 2014, 23:35					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>dmarkey wrote:</cite><blockquote><p>Are you able to share your build? Thanks!</p></blockquote></div><p>If you are on IPv6 you can grab it from <a href="https://www.wsrcc.com/snapshots/trunk/ar71xx/openwrt-ar71xx-nand-wndr3700v4-ubi-factory.img">https://www.wsrcc.com/snapshots/trunk/a … actory.img</a></p><p>I&#039;m trying to not piss off my ISP by putting up an http server on IPv4. <br />BTW. Comcast automatically gives you an IPv6 connection.&nbsp; Other ISP&#039;s make you go to <a href="http://www.tunnelbroker.net">www.tunnelbroker.net</a> (aka he.net) to get a free tunnel.</p><div class="quotebox"><cite>hnyman wrote:</cite><blockquote><p>(If I got you right, the OEM TFTP recovery/flash mode expects a lowercase v4 there.)</p></blockquote></div><p>Yes.&nbsp; That appears to be the case.&nbsp; The OEM web flash software is a bit more generous and doesn&#039;t care about the case.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230493">
				<div class="post-metadata">
					<div class="post-num">Post #248</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						17 Apr 2014, 00:58					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Axeia wrote:</cite><blockquote><p>[edit2]<br />Changed my server from the KDE network manager to ifup and added a DHCP lease so the server gets a static IP. No longer getting&nbsp; the red line in wireshark, getting nothing from wireshark. Have confirmed the servers ip is in fact where the port forward is supposed to be going to with ifconfig. Seems to be a step in the wrong direction although it is how I&#039;d want it configured in the long run.</p></blockquote></div><p>Try renaming your forward from Steph Server to Steph-Server as I suggested earlier.</p><p>I cannot replicate the issue so there isn&#039;t a whole lot more I can try....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230495">
				<div class="post-metadata">
					<div class="post-num">Post #249</div>
					<div class="post-author">Axeia</div>
					<div class="post-datetime">
						17 Apr 2014, 01:19					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>AdamK wrote:</cite><blockquote><p>Try renaming your forward from Steph Server to Steph-Server as I suggested earlier.</p><p>I cannot replicate the issue so there isn&#039;t a whole lot more I can try....</p></blockquote></div><p>Ah should have mentioned that, I did take your advice and change the name as well as adding some more forwards to different ports with different names (no spaces/dashes). None of which work.<br />Enabling LAN loopback does get me things workings so I can only assume the firewall entries are being read and something other than the firewall is preventing traffic. </p><p>Thank you for your help and builds AdamK, do appreciate the effort you put into it <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" />.<br />I&#039;ll see if I get some help in one of the more general subforums as I&#039;m afraid that I ran out of ideas. Worst case I&#039;ll go back to the stock firmware, dd-wrt didn&#039;t really catch my interest.</p><p>[edit]Just noticed the crazy amount of views this thread has, popular router.<br />[edit2] Well, got a workaround for my problem using <a href="http://upnp-portmapper.sourceforge.net/"> upnp portmapper</a> things work for others but not for me. Which is good enough as I can use the local IP anyway.</p>											<p class="post-edited">(Last edited by <strong>Axeia</strong> on 19 Apr 2014, 04:06)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p230872">
				<div class="post-metadata">
					<div class="post-num">Post #250</div>
					<div class="post-author">AdamK</div>
					<div class="post-datetime">
						21 Apr 2014, 06:00					</div>
				</div>
				<div class="post-content content">
					<p>dd-wrt still (unless they have recently) don&#039;t support native dual stack IPv6 OOB nor do they offer any packages or scripts to upgrade their images to support it, which for me is a show stopper.&nbsp; Infact, they say to use some packages from OpenWRT devs to try and get it up and running <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile" /><br />Their web UI is slick but I also noticed some flaws, more so when you need to do custom commands and deal with more than one public IP address.<br />OpenWRT on the other hand manages all of these without any real issues, and I really like how it is modular and customisable not to mention easier to build the source.&nbsp; </p><p>On another note I have noticed in recent trunk commits that they are working on the UBI stuff which is related to the WNDR3700v4 and WNDR4300.&nbsp; Hopefully it will not be too much longer before sysupgrade features become a reality!</p>											<p class="post-edited">(Last edited by <strong>AdamK</strong> on 21 Apr 2014, 06:01)</p>
									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 10 of 17</div><nav><ul><li><a href="viewtopic.php%3Fid=41094&amp;p=1.html">1</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=8.html">8</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=9.html">9</a></li><li class="pagination-current"><span>10</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=11.html">11</a></li><li><a href="viewtopic.php%3Fid=41094&amp;p=12.html">12</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=41094&amp;p=17.html">17</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0.001 -->

</body>
</html>