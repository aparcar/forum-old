<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> Change WAN port - TP-Link TL-WR841ND v8.0</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 12 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p202019">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">Jwaynw</div>
					<div class="post-datetime">
						17 May 2013, 11:05					</div>
				</div>
				<div class="post-content content">
					<p>Hi, I have the router mentioned in the title and I wanted to switch my WAN port to a LAN port. I&#039;ve read that others users were able to do it, but with a different router. Here are the links:</p><p><a href="https://forum.openwrt.org/viewtopic.php?id=13441">https://forum.openwrt.org/viewtopic.php?id=13441</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=16148">https://forum.openwrt.org/viewtopic.php?id=16148</a><br /><a href="https://forum.openwrt.org/viewtopic.php?id=42622">https://forum.openwrt.org/viewtopic.php?id=42622</a></p><p>I tried to execute this command</p><p># uci set network.eth0.vlan0=&quot;0 1 2 5*&quot;</p><p>But I get &quot;Invalid argument&quot;</p><p>I also tried to use the GUI, as per the instructions in <a href="https://forum.openwrt.org/viewtopic.php?pid=193792#p193792">this</a> post</p><p>But after I reboot, I cannot access the GUI anymore, I have to connect through wireless.</p><p>Is it posible to change the WAN port with my router? If so, could you please tell me how would this be achieved, desirably through GUI?</p><p>I would really appreciate your help.</p><p>Thanks in advance!</p><p>Here is my initial /etc/config/network</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ipaddr &#039;192.168.2.1&#039;

config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option ports &#039;0 1 2 3 4&#039;
    option vid &#039;1&#039;</code></pre></div><p>After I follow the instructions of <a href="https://forum.openwrt.org/viewtopic.php?pid=193792#p193792">this</a>, here are the LuCi screenshot:</p><p><a href="http://postimg.org/image/4disuwfzb/"><span class="postimg"><img src="http://s23.postimg.org/4disuwfzb/openwrt.jpg" alt="http://s23.postimg.org/4disuwfzb/openwrt.jpg" /></span></a></p><p>My new /etc/config/network:</p><div class="codebox"><pre><code>config interface &#039;loopback&#039;
    option ifname &#039;lo&#039;
    option proto &#039;static&#039;
    option ipaddr &#039;127.0.0.1&#039;
    option netmask &#039;255.0.0.0&#039;

config interface &#039;lan&#039;
    option ifname &#039;eth1&#039;
    option type &#039;bridge&#039;
    option proto &#039;static&#039;
    option netmask &#039;255.255.255.0&#039;
    option ipaddr &#039;192.168.2.1&#039;

config interface &#039;wan&#039;
    option ifname &#039;eth0&#039;
    option proto &#039;dhcp&#039;

config switch
    option name &#039;switch0&#039;
    option reset &#039;1&#039;
    option enable_vlan &#039;1&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;1&#039;
    option vid &#039;1&#039;
    option ports &#039;0t 1 2 3&#039;

config switch_vlan
    option device &#039;switch0&#039;
    option vlan &#039;2&#039;
    option vid &#039;2&#039;
    option ports &#039;0t 4&#039;</code></pre></div><p>One weird thing I noticed is that the router and LuCi port mapping is wrong:</p><p><strong>Router -&gt; LuCI</strong></p><p>Port 1 -&gt; Port 2<br />Port 2 -&gt; Port 3<br />Port 3 -&gt; Port 4<br />Port 4 -&gt; Port 1</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202092">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">Jwaynw</div>
					<div class="post-datetime">
						18 May 2013, 00:23					</div>
				</div>
				<div class="post-content content">
					<p>Could anyone please point me in the right direction? Just a hint of what I&#039;m doing wrong</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202233">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">Jwaynw</div>
					<div class="post-datetime">
						19 May 2013, 11:10					</div>
				</div>
				<div class="post-content content">
					<p>Anyone?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202241">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">Jwaynw</div>
					<div class="post-datetime">
						19 May 2013, 13:10					</div>
				</div>
				<div class="post-content content">
					<p>I was able to get this to work. The step depicted <a href="https://forum.openwrt.org/viewtopic.php?pid=193792#p193792">here</a>, were missing 2 steps: In the LAN interface, assign VLAN 1 in Physhical Settings tab, and in WAN interface assign VLAN 2 in the same tab.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>