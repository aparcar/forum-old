<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> TPLink WDR3600 + ADSL modem - cannot connect to internet =&gt; SOLVED</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							on 20 Apr 2018.
										There are no obvious gaps in this topic, but there may still be some posts missing at the end.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
			
		
		
			<article class="post" id="p285809">
				<div class="post-metadata">
					<div class="post-num">Post #1</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						31 Jul 2015, 18:09					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m trying to configure OpenWRT on my TPLink 3600, where has been installed OK after en earlier bricking!<br />However I cannot connect to the internet. I&#039;m pretty sure that this is an error on my part rather than a system failure....here are the details</p><p>modem (DLink DSL 300T)<br />-&nbsp; IP set to 192.168.1.254 (to avoid clash with router IP)<br />-&nbsp; ISP user/pass data entered, This is correct, tested by connecting Laptop - modem - internet successfully<br />-&nbsp; set to Bridged Mode<br />--DHCP set to disabled </p><p>Router<br />--stil using default IP 192.168.1.1<br />-- attempting to connect as follows; laptop via Wifi to router (which works OK), router via ethernet cable to modem, modem to internet </p><p>key router settings are as follows <br />- network&gt; DHCP &amp; DNS - authoritative - this is the only DHCP server on the network<br />- network &gt; interfaces &gt; WAN &gt; edit &gt; general setup &gt; protocol = DHCP client. (Should I change this, and if so to what? I think an ill-advised switch here was what soft bricked the router, requiring a rescue through failsafe mode)</p><p>- in network &gt; interface &gt; WAN &gt; physical settings, I tried ticking the Bridge Interface box to create a bridge to VLAN interface eth0.1 (wan) but this did not work&nbsp; so I unchecked it.</p><p>All other settings are the Openwrt default</p><p>- status &gt; overview shows IPv4 and 6 WAN status as Not Connected. Hitting Connect in interfaces &gt; overview has no effect.</p><p>There is clearly something silly I have done/not done - can any one point to what it is? Many thanks if you can!!</p>											<p class="post-edited">(Last edited by <strong>wayne1958</strong> on 7 Aug 2015, 14:55)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285811">
				<div class="post-metadata">
					<div class="post-num">Post #2</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						31 Jul 2015, 18:34					</div>
				</div>
				<div class="post-content content">
					<p>a) Set the modem IP to something <em>not even in the range</em> of the router. I.e. 192.168.2.x instead of using the same range as the router<br />b) Set the modem to bridge mode, then connect it to WAN on the router, but have the router do the dialing. I.e., PPPoE protocol on the WAN. That&#039;s what the bridge mode in a modem is intended for.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285813">
				<div class="post-metadata">
					<div class="post-num">Post #3</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						31 Jul 2015, 19:14					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>metai wrote:</cite><blockquote><p>a) Set the modem IP to something <em>not even in the range</em> of the router. I.e. 192.168.2.x instead of using the same range as the router<br />b) Set the modem to bridge mode, then connect it to WAN on the router, but have the router do the dialing. I.e., PPPoE protocol on the WAN. That&#039;s what the bridge mode in a modem is intended for.</p></blockquote></div><p>Thanks for quick reply.<br />I&#039;ve set the ads modem to 192.168.2.254 and left dhcp enabled.<br />On the router&nbsp; five changed protocol to PPPOE.&nbsp; It asks me for pap/chap user/pass combo which I guess if my ads user/pass. <br />Tried to teconnect but this doesn&#039;t work either. .....</p><p>PS ive reflashed with the sysupgrade file but that made no difference. f I to try to change to PPPOA which my ISP use, I&#039;m prompted to install package ppp-mod-pppia</p>											<p class="post-edited">(Last edited by <strong>wayne1958</strong> on 31 Jul 2015, 20:38)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285911">
				<div class="post-metadata">
					<div class="post-num">Post #4</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						1 Aug 2015, 22:49					</div>
				</div>
				<div class="post-content content">
					<p>Update - I&#039;ve tried disabling DHCP in the modem so it is <br />completely dumb but still no difference.&nbsp; The router regards the pppoe WAN interface as down</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285967">
				<div class="post-metadata">
					<div class="post-num">Post #5</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						2 Aug 2015, 14:30					</div>
				</div>
				<div class="post-content content">
					<p>Sorry for the late reply. I wrongly (and arrogantly) assumed you would connect via PPPoE. Of course, if your provider requires PPPoA, this will not help yet.</p><p>You have two options:<br />a) Try to get internet to the new router temporarily (i.e., connecting it to another router or whatever you are using right now to get internet access, just to download the necessary packages). Effectively turning it into a &quot;regularly connected machine&quot; to install the required packages for PPPoA.<br />b) Download the necessary packages yourself, transfer the file to the router and install them manually. Which <em>is</em> a bit of a hassle because the PPPoA packages have a few dependencies (i.e., require other packages in turn), but is doable.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p285985">
				<div class="post-metadata">
					<div class="post-num">Post #6</div>
					<div class="post-author">makarel</div>
					<div class="post-datetime">
						2 Aug 2015, 16:25					</div>
				</div>
				<div class="post-content content">
					<p>hi<br />use DSL standalone(make the usal DSL connection) and output a lan(192.168.1.1...) with DHCP enabled<br />put DSLs lan to WDR3600 wan(wan configured DHCP), output WDR3600 lan(192.168.2.1) with DHCP<br />connect WDR3600 lan to PC(it will get IPs in the range ....2.2 - ....2.254)</p><p>in this configuration you can access DSL by 192.168.1.1 and WDR by 192.168.2.1</p><p>you can also connect straight to DSLs lan</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286116">
				<div class="post-metadata">
					<div class="post-num">Post #7</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						3 Aug 2015, 20:08					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>metai wrote:</cite><blockquote><p>Sorry for the late reply. I wrongly (and arrogantly) assumed you would connect via PPPoE. Of course, if your provider requires PPPoA, this will not help yet.</p><p>You have two options:<br />a) Try to get internet to the new router temporarily (i.e., connecting it to another router or whatever you are using right now to get internet access, just to download the necessary packages). Effectively turning it into a &quot;regularly connected machine&quot; to install the required packages for PPPoA.<br />b) Download the necessary packages yourself, transfer the file to the router and install them manually. Which <em>is</em> a bit of a hassle because the PPPoA packages have a few dependencies (i.e., require other packages in turn), but is doable.</p></blockquote></div><p>Hi there - thanks for the reply!! I tried option a but filed as I could see a way to change the IP on the TPlink router to avoid it clashing with my ISP-supplied router. Somehow soft bricked it again, and had to restore via failsafe.<br />That was it for me and so returned to stock firmware.<br />Thanks a lot for your support anyway</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286163">
				<div class="post-metadata">
					<div class="post-num">Post #8</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						4 Aug 2015, 02:45					</div>
				</div>
				<div class="post-content content">
					<p>The interesting thing is that your stock firmware probably doesn&#039;t do anything different than OpenWrt in its stock configuration, aside from the fact that it comes without PPPoA support out of the box. It shouldn&#039;t be the stumbling stone to run OpenWrt, but I can see that it is probably a bit much for a beginner.</p><p>For posterity, there are two ways to get PPPoA support:<br />a) Hook up the OpenWrt device to an existing router and make it download the packages<br />b) Download the packages manually, transfer them to the OpenWrt device (e.g. via SCP), and install them from an SSH command line</p>											<p class="post-edited">(Last edited by <strong>metai</strong> on 4 Aug 2015, 02:47)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286658">
				<div class="post-metadata">
					<div class="post-num">Post #9</div>
					<div class="post-author">wayne1958</div>
					<div class="post-datetime">
						7 Aug 2015, 14:54					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>metai wrote:</cite><blockquote><p>The interesting thing is that your stock firmware probably doesn&#039;t do anything different than OpenWrt in its stock configuration, aside from the fact that it comes without PPPoA support out of the box. It shouldn&#039;t be the stumbling stone to run OpenWrt, but I can see that it is probably a bit much for a beginner.</p><p>For posterity, there are two ways to get PPPoA support:<br />a) Hook up the OpenWrt device to an existing router and make it download the packages<br />b) Download the packages manually, transfer them to the OpenWrt device (e.g. via SCP), and install them from an SSH command line</p></blockquote></div><p>Hi there again!!! You are quite correct. I ended up<br />1) reverting to stock<br />2) configuring the ADSL modem as DHCP and handling the authentication from there<br />3) configuring the router as DHCP<br />4) and I could then connect.&nbsp; Not really what I wanted but the setup now works<br />5) I then reflashed back to openWRT duplicated this set up and again, back in business.</p><p>So I have achieved the main objective - to get onto open source software on my router. Ive now dowloaded the PPPoA packages for openWRT and will experiment again in due course.....</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286663">
				<div class="post-metadata">
					<div class="post-num">Post #10</div>
					<div class="post-author">metai</div>
					<div class="post-datetime">
						7 Aug 2015, 15:10					</div>
				</div>
				<div class="post-content content">
					<p>You should. At the moment, you are doing &quot;Double NAT&quot;, which means that everything from outside and inside will get &quot;translated&quot; between networks twice -- once in the &quot;modem&quot;, and once in the OpenWrt router. It&#039;s by no means the end of the world, but it&#039;s not really ideal and a step that can be eliminated. In your case, by using the modem as just a modem through PPPoA, of course.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p286694">
				<div class="post-metadata">
					<div class="post-num">Post #11</div>
					<div class="post-author">moeller0</div>
					<div class="post-datetime">
						7 Aug 2015, 21:21					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>wayne1958 wrote:</cite><blockquote><div class="quotebox"><cite>metai wrote:</cite><blockquote><p>The interesting thing is that your stock firmware probably doesn&#039;t do anything different than OpenWrt in its stock configuration, aside from the fact that it comes without PPPoA support out of the box. It shouldn&#039;t be the stumbling stone to run OpenWrt, but I can see that it is probably a bit much for a beginner.</p><p>For posterity, there are two ways to get PPPoA support:<br />a) Hook up the OpenWrt device to an existing router and make it download the packages<br />b) Download the packages manually, transfer them to the OpenWrt device (e.g. via SCP), and install them from an SSH command line</p></blockquote></div><p>Hi there again!!! You are quite correct. I ended up<br />1) reverting to stock<br />2) configuring the ADSL modem as DHCP and handling the authentication from there<br />3) configuring the router as DHCP<br />4) and I could then connect.&nbsp; Not really what I wanted but the setup now works<br />5) I then reflashed back to openWRT duplicated this set up and again, back in business.</p><p>So I have achieved the main objective - to get onto open source software on my router. Ive now dowloaded the PPPoA packages for openWRT and will experiment again in due course.....</p></blockquote></div><br /><p>Just a quick note; PPPoA means PPP over ATM, this requires that the device running the PPPoA client software id directly connected to an ATM net. So PPPoA on your modem will work, but PPPoA on the router connected via ethernet to the modem will NOT. Some UK ISPs will allow you to use either PPPoA or PPPoE and auto detect which on their end, and some ADSL modems will allow you to use PPPtP to connect to the modem and will translate this into PPPoA but I doubt your modem offers this.</p><br /><p>Best Regards<br />&nbsp; &nbsp; &nbsp; &nbsp; M.</p>									</div>
			</article>

			
		
	
			<div class="notice minor">
			<p>The discussion might have continued from here.</p>
		</div>
	
	<div class="pagination"><div class="pagination-number">Page 1 of 1</div><nav><ul><li class="pagination-current"><span>1</span></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>