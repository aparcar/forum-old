<!DOCTYPE html>
<html lang="en-US">
<head>

	<title>OpenWrt Forum Archive</title>

	<meta charset="UTF-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/css/common.css">

</head>
<body>

<div class="container">

<header class="main-header">
	<h1 class="logo"><a href="index.html"><img src="assets/img/logo.png" width="376" height="88" alt="OpenWrt Forum Archive"></a></h1>
</header>

<aside>
	<p>This is a read-only archive of the old OpenWrt forum. The current OpenWrt forum resides at <a href="https://forum.openwrt.org/">https://forum.openwrt.org/</a>.</p>
	<p class="minor">In May 2018, the OpenWrt forum suffered a total data loss. This archive is an effort to restore and make available as much content as possible. Content may be missing or not representing the latest edited version.</p>
</aside>

<main>
	<header>
		<h1><span class="minor">Topic:</span> U-Boot mod for routers with AR9331/AR9344</h1>
	</header>
	<div class="notice minor">
		<p>
			The content of this topic has been archived
							between 3 Apr 2015 and 7 May 2018.
										Unfortunately there are posts – most likely complete pages – missing.
					</p>
	</div>

	<div class="pagination"><div class="pagination-number">Page 3 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			
		
		
			<article class="post" id="p202049">
				<div class="post-metadata">
					<div class="post-num">Post #51</div>
					<div class="post-author">johnyin.news</div>
					<div class="post-datetime">
						17 May 2013, 16:04					</div>
				</div>
				<div class="post-content content">
					<p>wr703n v1.6 works!!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202050">
				<div class="post-metadata">
					<div class="post-num">Post #52</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						17 May 2013, 16:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>johnyin.news wrote:</cite><blockquote><p>wr703n v1.6 works!!</p></blockquote></div><p>Yes, I know... I have already tested it on: TL-WR703N ver. 1.5, 1.6 and 1.7 <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202098">
				<div class="post-metadata">
					<div class="post-num">Post #53</div>
					<div class="post-author">Davidwei</div>
					<div class="post-datetime">
						18 May 2013, 03:14					</div>
				</div>
				<div class="post-content content">
					<p>Hi,pepe2k<br/>i download your sources code frome <a href="http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz">http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz</a><br/>but i dont know how to build.the follwing is my adm<br/>1.make the new uboot supprt 16 MBit falsh such as MX25L12835FM2I(SOP8),MX25L12845EMI(SOP16)<br/>2.how to set overclocking as 500<br/>after those change, how to get the uboot?<br/>Many thanks.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202115">
				<div class="post-metadata">
					<div class="post-num">Post #54</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						18 May 2013, 11:12					</div>
				</div>
				<div class="post-content content">
					<p>Hi!<br/></p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Hi,pepe2k<br/>i download your sources code frome <a href="http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz">http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz</a><br/>but i dont know how to build.</p></blockquote></div><p>Please, read README file in &quot;toolchain&quot; folder.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>the follwing is my adm<br/>1.make the new uboot supprt 16 MBit falsh such as MX25L12835FM2I(SOP8),MX25L12845EMI(SOP16)</p></blockquote></div><p>Do you know the JEDEC ID for these chips?</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>2.how to set overclocking as 500</p></blockquote></div><p>All you need to do is just change CFG_PLL_FREQ define value in ap121.h (u-boot/include/configs). I made a setting for this frequency: CFG_PLL_500_250_250.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>after those change, how to get the uboot?</p></blockquote></div><p>In the top dir just run &quot;make model&quot;, where &quot;model&quot; is mr3020, mr3040 etc.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Many thanks.</p></blockquote></div><p>You&#039;re welcome!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202124">
				<div class="post-metadata">
					<div class="post-num">Post #55</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						18 May 2013, 12:39					</div>
				</div>
				<div class="post-content content">
					<p>Thanks pepe2k!<br/>Succeeded now my MR3020 is running at 500MHZ!<br/>Now I am waiting for your WDR3600/WDR4300 bootloader!</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202191">
				<div class="post-metadata">
					<div class="post-num">Post #56</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						18 May 2013, 18:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>alphasparc wrote:</cite><blockquote><p>Succeeded now my MR3020 is running at 500MHZ!</p></blockquote></div><p>Have you made some stability test on these frequencies?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202248">
				<div class="post-metadata">
					<div class="post-num">Post #57</div>
					<div class="post-author">alphasparc</div>
					<div class="post-datetime">
						19 May 2013, 14:25					</div>
				</div>
				<div class="post-content content">
					<p>I tested everything works at 500MHZ.<br/>Regarding the code</p><p>&nbsp; &nbsp; #define CFG_HZ&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (500000000/2)</p><p>&nbsp; &nbsp; // CPU_DIV = 1, RAM_DIV = 2, AHB_DIV = 2<br/>&nbsp; &nbsp; #define CPU_CLK_CONTROL_VAL1&nbsp; &nbsp; 0x00008404<br/>&nbsp; &nbsp; #define CPU_CLK_CONTROL_VAL2&nbsp; &nbsp; 0x00008400</p><p>&nbsp; &nbsp; // DIV_INT&nbsp; &nbsp; = 40&nbsp; &nbsp; (25 MHz * 40/2 = 500 MHz)<br/>&nbsp; &nbsp; // REFDIV&nbsp; &nbsp; = 1<br/>&nbsp; &nbsp; // RANGE&nbsp; &nbsp; = 0<br/>&nbsp; &nbsp; // OUTDIV&nbsp; &nbsp; = 1<br/>&nbsp; &nbsp; #define CPU_PLL_CONFIG_VAL1&nbsp; &nbsp; &nbsp; &nbsp; 0x4081A000<br/>&nbsp; &nbsp; #define CPU_PLL_CONFIG_VAL2&nbsp; &nbsp; &nbsp; &nbsp; 0x0081A000</p><p>&nbsp; &nbsp; // CLOCK_DIVIDER = 3 (SPI clock = 250 / 8 ~ 31,3 MHz)<br/>&nbsp; &nbsp; #define AR7240_SPI_CONTROL&nbsp; &nbsp; &nbsp; &nbsp; 0x43</p><p>Is all the fields required?<br/>I notice that a lot of the defines are not included in the default uboot source.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202341">
				<div class="post-metadata">
					<div class="post-num">Post #58</div>
					<div class="post-author">xopal</div>
					<div class="post-datetime">
						20 May 2013, 19:48					</div>
				</div>
				<div class="post-content content">
					<p>Tested on my 3220v2 at 562.5 mHz , so far so good , USB works too but data transfer not tested yet.</p><div class="codebox"><pre><code>root@OpenWrt:/# dmesg | grep Clocks:
[    0.000000] Clocks: CPU:562.500MHz, DDR:281.250MHz, AHB:140.625MHz, Ref:25.000MHz
root@OpenWrt:/# cat /proc/cpuinfo
system type             : Atheros AR9330 rev 1
machine                 : TP-LINK TL-MR3220 v2
processor               : 0
cpu model               : MIPS 24Kc V7.4
BogoMIPS                : 373.55
wait instruction        : yes
microsecond timers      : yes
tlb_entries             : 16
extra interrupt vector  : yes
hardware watchpoint     : yes, count: 4, address/irw mask: [0x0000, 0x0610, 0x0310, 0x0210]
ASEs implemented        : mips16
shadow register sets    : 1
kscratch registers      : 0
core                    : 0
VCED exceptions         : not available
VCEI exceptions         : not available

root@OpenWrt:/# dmesg | grep Clocks:
[    0.000000] Clocks: CPU:562.500MHz, DDR:281.250MHz, AHB:140.625MHz, Ref:25.000MHz
root@OpenWrt:/# lsusb
Bus 001 Device 002: ID 08ec:204b M-Systems Flash Disk Pioneers TravelDrive
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202343">
				<div class="post-metadata">
					<div class="post-num">Post #59</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						20 May 2013, 20:00					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>xopal wrote:</cite><blockquote><p>Tested on my 3220v2 at 562.5 mHz , so far so good , USB works too but data transfer not tested yet.</p></blockquote></div><p>Download &quot;memtester&quot; and &quot;stress&quot; and make some stability tests. After that you should test USB - transfer some huge data using FTP and you will know if these frequencies are stable and... how much did you loose on USB transfer speed <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><p>In my opinion, setting DDR and AHB frequencies on this platform lower than default settings (400/200) doesn&#039;t make any sens... Higher CPU frequency gives only higher benchmark results. The AHB frequency has bigger impact on USB transfer speed than CPU frequency. So, 562,5 MHz on CPU is just for fun <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202394">
				<div class="post-metadata">
					<div class="post-num">Post #60</div>
					<div class="post-author">Davidwei</div>
					<div class="post-datetime">
						21 May 2013, 14:26					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Hi!<br/></p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Hi,pepe2k<br/>i download your sources code frome <a href="http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz">http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz</a><br/>but i dont know how to build.</p></blockquote></div><p>Please, read README file in &quot;toolchain&quot; folder.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>the follwing is my adm<br/>1.make the new uboot supprt 16 MBit falsh such as MX25L12835FM2I(SOP8),MX25L12845EMI(SOP16)</p></blockquote></div><p>Do you know the JEDEC ID for these chips?</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>2.how to set overclocking as 500</p></blockquote></div><p>All you need to do is just change CFG_PLL_FREQ define value in ap121.h (u-boot/include/configs). I made a setting for this frequency: CFG_PLL_500_250_250.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>after those change, how to get the uboot?</p></blockquote></div><p>In the top dir just run &quot;make model&quot;, where &quot;model&quot; is mr3020, mr3040 etc.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Many thanks.</p></blockquote></div><p>You&#039;re welcome!</p></blockquote></div><p>Thank you so much! Hoho!<br/>My 740 V5 is running at 500MHZ!<br/>About the JEDEC ID, i don&#039;t know how to find. i serch the informaton by google,and just get the manufacturer id&amp;device id.<br/>Does this information is usefull for you? JEDEC ID:1-byte Manufacturer ID&amp;2-byte Device ID</p><p>MX25L125845E&amp;MX25L12805D have the same ID<br/>manufacturer id:c2<br/>device id:17</p><p>MX25L12855E<br/>manufacturer id:c2<br/>device id:88</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202551">
				<div class="post-metadata">
					<div class="post-num">Post #61</div>
					<div class="post-author">Davidwei</div>
					<div class="post-datetime">
						23 May 2013, 12:50					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Hi!<br/></p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Hi,pepe2k<br/>i download your sources code frome <a href="http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz">http://www.tech-blog.pl/pliki/u-boot_sources_for_tp-link_AR9331_by_pepe2k.tar.gz</a><br/>but i dont know how to build.</p></blockquote></div><p>Please, read README file in &quot;toolchain&quot; folder.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>the follwing is my adm<br/>1.make the new uboot supprt 16 MBit falsh such as MX25L12835FM2I(SOP8),MX25L12845EMI(SOP16)</p></blockquote></div><p>Do you know the JEDEC ID for these chips?</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>2.how to set overclocking as 500</p></blockquote></div><p>All you need to do is just change CFG_PLL_FREQ define value in ap121.h (u-boot/include/configs). I made a setting for this frequency: CFG_PLL_500_250_250.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>after those change, how to get the uboot?</p></blockquote></div><p>In the top dir just run &quot;make model&quot;, where &quot;model&quot; is mr3020, mr3040 etc.</p><div class="quotebox"><cite>Davidwei wrote:</cite><blockquote><p>Many thanks.</p></blockquote></div><p>You&#039;re welcome!</p></blockquote></div><p>Thank you so much! Hoho!<br/>My 740 V5 is running at 500MHZ!<br/>About the JEDEC ID, i don&#039;t know how to find. i serch the informaton by google,and just get the manufacturer id&amp;device id.<br/>Does this information is usefull for you? JEDEC ID:1-byte Manufacturer ID&amp;2-byte Device ID</p><p>MX25L125845E&amp;MX25L12805D have the same ID<br/>manufacturer id:c2<br/>device id:17</p><p>MX25L12855E<br/>manufacturer id:c2<br/>device id:88</p></blockquote></div><p>up</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p202552">
				<div class="post-metadata">
					<div class="post-num">Post #62</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						23 May 2013, 12:53					</div>
				</div>
				<div class="post-content content">
					<p>I&#039;m very busy now, so this project is currently on hold.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204096">
				<div class="post-metadata">
					<div class="post-num">Post #63</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						9 Jun 2013, 03:09					</div>
				</div>
				<div class="post-content content">
					<p>Hi pepe2K,</p><p>I&#039;m sorry to bother you (you said you are quite busy). So I&#039;m not asking for an update status on the project.</p><p>Instead I&#039;m going to ask if you can please send us the (beta versions) of UBoot for 3600/4300/4900, allowing people with flash programmers to try them out?</p><p>BTW: what type of flash size will be possible on the 3600/4300? 16MB only? Or something like 32MB or even 64MB?</p><p>Thanks in advance,</p><p>Best regards,</p><p>fjorger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204147">
				<div class="post-metadata">
					<div class="post-num">Post #64</div>
					<div class="post-author">fr4nk</div>
					<div class="post-datetime">
						9 Jun 2013, 21:51					</div>
				</div>
				<div class="post-content content">
					<p>@pepe2k</p><p>I have a wr741nd v4 can I use wr740n bootloader?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204148">
				<div class="post-metadata">
					<div class="post-num">Post #65</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						9 Jun 2013, 22:06					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>Instead I&#039;m going to ask if you can please send us the (beta versions) of UBoot for 3600/4300/4900, allowing people with flash programmers to try them out?</p></blockquote></div><p>I don&#039;t have any beta version, I will publish only the final version.<br/>It won&#039;t work on WDR4900, because it has different SoC.</p><div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>BTW: what type of flash size will be possible on the 3600/4300? 16MB only? Or something like 32MB or even 64MB?</p></blockquote></div><p>I don&#039;t know and I didn&#039;t try 32 MB but probably 16 MB in single chip is the maximum for this SoC.<br/>If you have access to 32 MB chips check if you can use all space on it.</p><div class="quotebox"><cite>fr4nk wrote:</cite><blockquote><p>I have a wr741nd v4 can I use wr740n bootloader?</p></blockquote></div><p>Yes, at least if your model has AR9331 SoC. Let me know if it works.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204163">
				<div class="post-metadata">
					<div class="post-num">Post #66</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						10 Jun 2013, 02:15					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>Instead I&#039;m going to ask if you can please send us the (beta versions) of UBoot for 3600/4300/4900, allowing people with flash programmers to try them out?</p></blockquote></div><p>I don&#039;t have any beta version, I will publish only the final version.<br/>It won&#039;t work on WDR4900, because it has different SoC.</p><div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>BTW: what type of flash size will be possible on the 3600/4300? 16MB only? Or something like 32MB or even 64MB?</p></blockquote></div><p>I don&#039;t know and I didn&#039;t try 32 MB but probably 16 MB in single chip is the maximum for this SoC.<br/>If you have access to 32 MB chips check if you can use all space on it.</p></blockquote></div><p>Thanks for your quick reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><p>Please keep us posted about new uboots for the 3600/4300.<br/>About 32MB chips, I&#039;m still looking/investigating, and I will use my friends flash programmer to try it out.<br/>I will post the results here.</p><p>Best regards,<br/>fjorger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204238">
				<div class="post-metadata">
					<div class="post-num">Post #67</div>
					<div class="post-author">fuchenkai</div>
					<div class="post-datetime">
						11 Jun 2013, 06:15					</div>
				</div>
				<div class="post-content content">
					<p>great job! i translate the html to chinese and overclock to 500_500_250. it can run at most devices（some RAM can&#039;t run at 500MHz）</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204239">
				<div class="post-metadata">
					<div class="post-num">Post #68</div>
					<div class="post-author">fuchenkai</div>
					<div class="post-datetime">
						11 Jun 2013, 06:17					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fr4nk wrote:</cite><blockquote><p>@pepe2k</p><p>I have a wr741nd v4 can I use wr740n bootloader?</p></blockquote></div><p>of course! same as wr740v4.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204295">
				<div class="post-metadata">
					<div class="post-num">Post #69</div>
					<div class="post-author">fr4nk</div>
					<div class="post-datetime">
						11 Jun 2013, 18:31					</div>
				</div>
				<div class="post-content content">
					<p>Thanks pepe2k, I can confirm this is working on Wr741ND Version 4.20, tested 425/425/212.</p><p>@fuchenkai</p><p>What are the options for 500/500/250?</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204442">
				<div class="post-metadata">
					<div class="post-num">Post #70</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						12 Jun 2013, 22:51					</div>
				</div>
				<div class="post-content content">
					<p>Just a small but very important notice: I found a bug in my project. So, if you want to use it, please wait for the next release which I&#039;m going to publish in next days.</p><p>In very rare cases (2 from 20 different routers) this bug may result in silent crash the U-Boot at PLL register setting stage (so it won&#039;t boot and a hardware reset is needed). This bug is not critical - it doesn&#039;t occur every time.</p><p>It took me couple of days to discover the reason and then test the solution.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204448">
				<div class="post-metadata">
					<div class="post-num">Post #71</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						13 Jun 2013, 01:40					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>pepe2k wrote:</cite><blockquote><p>Just a small but very important notice: I found a bug in my project. So, if you want to use it, please wait for the next release which I&#039;m going to publish in next days.</p></blockquote></div><p>Sorry for asking again.</p><p>I know my question is kind of obvious, but you are not talking about 3600/4300 release?<br/>That is still very far away, right?</p><p>Thanks.</p><p>Regards, </p><p>fjorger.</p>											<p class="post-edited">(Last edited by <strong>fjorger</strong> on 13 Jun 2013, 01:41)</p>
									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204450">
				<div class="post-metadata">
					<div class="post-num">Post #72</div>
					<div class="post-author">pepe2k</div>
					<div class="post-datetime">
						13 Jun 2013, 01:49					</div>
				</div>
				<div class="post-content content">
					<div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>I know my question is kind of obvious, but you are not talking about 3600/4300 release?</p></blockquote></div><p>No, I&#039;m talking about release updated version of this project - U-Boot modification for TP-Link with AR9331 SoC.</p><div class="quotebox"><cite>fjorger wrote:</cite><blockquote><p>That is still very far away, right?</p></blockquote></div><p>No, I have working version but it still needs some work.<br/>My U-Boot modification for WDR3600/4300 won&#039;t be included in this project.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204452">
				<div class="post-metadata">
					<div class="post-num">Post #73</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						13 Jun 2013, 02:15					</div>
				</div>
				<div class="post-content content">
					<p>Hello pepe2k.</p><p>Thanks for the lighting speed reply <img src="https://forum.openwrt.org/img/smilies/smile.png" width="15" height="15" alt="smile"/></p><p>And sorry for being so pushy <img src="https://forum.openwrt.org/img/smilies/wink.png" width="15" height="15" alt="wink"/></p><p>Regards,</p><p>fjorger.</p>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204520">
				<div class="post-metadata">
					<div class="post-num">Post #74</div>
					<div class="post-author">sevikcla</div>
					<div class="post-datetime">
						13 Jun 2013, 16:38					</div>
				</div>
				<div class="post-content content">
					<p>Hi pepe2k!<br/>I just installed your modified U-boot version on a&nbsp; <a href="http://v-solution.en.alibaba.com/product/747017376-218088660/WLM112_LAN_WAN_WLAN_WiFi_module.html">WLM113 module</a>, which should be almost identically to wr703n, according to the manufacturers. It works great except for the WIFI, when I run wifi from the cmd prompt I get <br/></p><div class="codebox"><pre><code>root@OpenWrt:~# wifi
Configuration file: /var/run/hostapd-phy0.conf
Could not set interface wlan0 flags (UP): Cannot assign requested address
nl80211: Could not set interface &#039;wlan0&#039; UP
nl80211 driver initialization failed.
Failed to start hostapd for phy0</code></pre></div><p>I have also tested the MR3020 version of the uboot and openwrt. Same issue.</p><p>Since I&#039;m a novice on openwrt it would be great if you could point me in the right direction on how to solve this.</p><p>Console dump<br/></p><div class="codebox"><pre><code>*****************************************
*      U-Boot 1.1.4  (Apr 22 2013)      *
*****************************************

AP121 (AR9331) U-Boot for TL-MR3020

DRAM:  32 MB
FLASH: Macronix MX25L320 (4 MB)

LED on during eth initialization...

## Error: MAC address stored in flash is invalid!
Using fixed address!
## Error: MAC address stored in flash is invalid!
Using fixed address!
Hit any key to stop autobooting:  0

Booting image at: 0x9F020000...
Uncompressing kernel image...
OK
Starting kernel...

[    0.000000] Linux version 3.3.8 (x@Ubuntu) (gcc version 4.6.4 20121001 (prerelease) (Linaro GCC 4.6-2012.10) ) #25 Thu Jun 13 12:32:06 CEST 2013
[    0.000000] bootconsole [early0] enabled
[    0.000000] CPU revision is: 00019374 (MIPS 24Kc)
[    0.000000] SoC: Atheros AR9330 rev 1
[    0.000000] Clocks: CPU:400.000MHz, DDR:400.000MHz, AHB:200.000MHz, Ref:25.000MHz
[    0.000000] Determined physical RAM map:
[    0.000000]  memory: 02000000 @ 00000000 (usable)
[    0.000000] Initrd not found or empty - disabling initrd
[    0.000000] Zone PFN ranges:
[    0.000000]   Normal   0x00000000 -&gt; 0x00002000
[    0.000000] Movable zone start PFN for each node
[    0.000000] Early memory PFN ranges
[    0.000000]     0: 0x00000000 -&gt; 0x00002000
[    0.000000] Built 1 zonelists in Zone order, mobility grouping on.  Total pages: 8128
[    0.000000] Kernel command line:  board=TL-WR703N console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd
[    0.000000] PID hash table entries: 128 (order: -3, 512 bytes)
[    0.000000] Dentry cache hash table entries: 4096 (order: 2, 16384 bytes)
[    0.000000] Inode-cache hash table entries: 2048 (order: 1, 8192 bytes)
[    0.000000] Primary instruction cache 64kB, VIPT, 4-way, linesize 32 bytes.
[    0.000000] Primary data cache 32kB, 4-way, VIPT, cache aliases, linesize 32 bytes
[    0.000000] Writing ErrCtl register=00000000
[    0.000000] Readback ErrCtl register=00000000
[    0.000000] Memory: 29156k/32768k available (2084k kernel code, 3612k reserved, 397k data, 208k init, 0k highmem)
[    0.000000] SLUB: Genslabs=9, HWalign=32, Order=0-3, MinObjects=0, CPUs=1, Nodes=1
[    0.000000] NR_IRQS:51
[    0.000000] Calibrating delay loop... 265.42 BogoMIPS (lpj=1327104)
[    0.080000] pid_max: default: 32768 minimum: 301
[    0.080000] Mount-cache hash table entries: 512
[    0.090000] NET: Registered protocol family 16
[    0.090000] gpiochip_add: registered GPIOs 0 to 29 on device: ath79
[    0.100000] MIPS: machine is TP-LINK TL-WR703N v1
[    0.350000] bio: create slab &lt;bio-0&gt; at 0
[    0.360000] Switching to clocksource MIPS
[    0.360000] NET: Registered protocol family 2
[    0.370000] IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
[    0.370000] TCP established hash table entries: 1024 (order: 1, 8192 bytes)
[    0.370000] TCP bind hash table entries: 1024 (order: 0, 4096 bytes)
[    0.380000] TCP: Hash tables configured (established 1024 bind 1024)
[    0.390000] TCP reno registered
[    0.390000] UDP hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] UDP-Lite hash table entries: 256 (order: 0, 4096 bytes)
[    0.400000] NET: Registered protocol family 1
[    0.430000] squashfs: version 4.0 (2009/01/31) Phillip Lougher
[    0.430000] JFFS2 version 2.2 (NAND) (SUMMARY) (LZMA) (RTIME) (CMODE_PRIORITY) (c) 2001-2006 Red Hat, Inc.
[    0.440000] msgmni has been set to 56
[    0.440000] io scheduler noop registered
[    0.450000] io scheduler deadline registered (default)
[    0.450000] Serial: 8250/16550 driver, 1 ports, IRQ sharing disabled
[    0.460000] ar933x-uart: ttyATH0 at MMIO 0x18020000 (irq = 11) is a AR933X UART
[    0.460000] console [ttyATH0] enabled, bootconsole disabled
[    0.460000] console [ttyATH0] enabled, bootconsole disabled
[    0.480000] m25p80 spi0.0: found mx25l3205d, expected m25p80
[    0.480000] m25p80 spi0.0: mx25l3205d (4096 Kbytes)
[    0.490000] 5 tp-link partitions found on MTD device spi0.0
[    0.490000] Creating 5 MTD partitions on &quot;spi0.0&quot;:
[    0.500000] 0x000000000000-0x000000020000 : &quot;u-boot&quot;
[    0.510000] 0x000000020000-0x0000000fe404 : &quot;kernel&quot;
[    0.510000] mtd: partition &quot;kernel&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.520000] 0x0000000fe404-0x0000003f0000 : &quot;rootfs&quot;
[    0.530000] mtd: partition &quot;rootfs&quot; must either start or end on erase block boundary or be smaller than an erase block -- forcing read-only
[    0.540000] mtd: partition &quot;rootfs&quot; set to be root filesystem
[    0.550000] mtd: partition &quot;rootfs_data&quot; created automatically, ofs=370000, len=80000
[    0.550000] 0x000000370000-0x0000003f0000 : &quot;rootfs_data&quot;
[    0.560000] 0x0000003f0000-0x000000400000 : &quot;art&quot;
[    0.570000] 0x000000020000-0x0000003f0000 : &quot;firmware&quot;
[    0.590000] ag71xx_mdio: probed
[    0.590000] eth0: Atheros AG71xx at 0xb9000000, irq 4
[    1.150000] ag71xx ag71xx.0: eth0: connected to PHY at ag71xx-mdio.1:04 [uid=004dd041, driver=Generic PHY]
[    1.160000] TCP cubic registered
[    1.160000] NET: Registered protocol family 17
[    1.160000] 8021q: 802.1Q VLAN Support v1.8
[    1.170000] VFS: Mounted root (squashfs filesystem) readonly on device 31:2.
[    1.180000] Freeing unused kernel memory: 208k freed
- preinit -
Press the [f] key and hit [enter] to enter failsafe mode
- regular preinit -
[    6.560000] JFFS2 notice: (404) jffs2_build_xattr_subsystem: complete building xattr subsystem, 1 of xdatum (0 unchecked, 0 orphan) and 12 of xref (0 dead, 2 orphan) found.
switching to jffs2
- init -

Please press Enter to activate this console. [    8.390000] Compat-drivers backport release: compat-drivers-2012-09-04-2-gddac993
[    8.390000] Backport based on wireless-testing.git master-2012-09-07
[    8.400000] compat.git: wireless-testing.git
[    8.430000] cfg80211: Calling CRDA to update world regulatory domain
[    8.440000] cfg80211: World regulatory domain updated:
[    8.440000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    8.450000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.460000] cfg80211:   (2457000 KHz - 2482000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    8.460000] cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (300 mBi, 2000 mBm)
[    8.470000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.480000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    8.720000] SCSI subsystem initialized
[    8.860000] usbcore: registered new interface driver usbfs
[    8.860000] usbcore: registered new interface driver hub
[    8.870000] usbcore: registered new device driver usb
[    9.350000] ieee80211 phy0: Atheros AR9330 Rev:1 mem=0xb8100000, irq=2
[    9.350000] cfg80211: Calling CRDA for country: US
[    9.360000] cfg80211: Regulatory domain changed to country: US
[    9.360000] cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
[    9.370000] cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (300 mBi, 2700 mBm)
[    9.380000] cfg80211:   (5170000 KHz - 5250000 KHz @ 40000 KHz), (300 mBi, 1700 mBm)
[    9.390000] cfg80211:   (5250000 KHz - 5330000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.390000] cfg80211:   (5490000 KHz - 5600000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.400000] cfg80211:   (5650000 KHz - 5710000 KHz @ 40000 KHz), (300 mBi, 2000 mBm)
[    9.410000] cfg80211:   (5735000 KHz - 5835000 KHz @ 40000 KHz), (300 mBi, 3000 mBm)
[    9.840000] PPP generic driver version 2.4.2
[    9.890000] ip_tables: (C) 2000-2006 Netfilter Core Team
[   10.010000] NET: Registered protocol family 24
[   10.040000] ehci_hcd: USB 2.0 &#039;Enhanced&#039; Host Controller (EHCI) Driver
[   10.050000] ehci-platform ehci-platform: Generic Platform EHCI Controller
[   10.050000] ehci-platform ehci-platform: new USB bus registered, assigned bus number 1
[   10.090000] ehci-platform ehci-platform: irq 3, io mem 0x1b000000
[   10.110000] ehci-platform ehci-platform: USB 2.0 started, EHCI 1.00
[   10.110000] hub 1-0:1.0: USB hub found
[   10.110000] hub 1-0:1.0: 1 port detected
[   10.140000] nf_conntrack version 0.5.0 (458 buckets, 1832 max)</code></pre></div>									</div>
			</article>

			
		
			
		
		
			<article class="post" id="p204540">
				<div class="post-metadata">
					<div class="post-num">Post #75</div>
					<div class="post-author">fjorger</div>
					<div class="post-datetime">
						13 Jun 2013, 20:04					</div>
				</div>
				<div class="post-content content">
					<p>Hi sevikcla,</p><p>Did you perform a backup of your art partition?</p><p>I guess not.<br/>You need to get an art partition and restore it&#039;s wifi calibration data.</p><p>Taken from this post&nbsp; <a href="https://forum.openwrt.org/viewtopic.php?id=28343">https://forum.openwrt.org/viewtopic.php?id=28343</a> from Dioptimizer</p><br/><br/><div class="codebox"><pre><code>backup u-boot:

    cat /dev/mtd0 &gt; /tmp/backup_u-boot.bin

backup art:

    cat /dev/mtd4 &gt; /tmp/backup_art.bin

buckup firmware with your settings:

    cat /dev/mtd5 &gt; /tmp/backup_firmware.bin

    Note:
    This firmware you can flash through the Web interface or the MTD method!

buckup fullflash:

    cat /dev/mtd0 &gt; /tmp/backup_fullflash.bin
    cat /dev/mtd5 &gt;&gt; /tmp/backup_fullflash.bin
    cat /dev/mtd4 &gt;&gt; /tmp/backup_fullflash.bin

then copy bin file from tmp dir on router in your computer via WinSCP.</code></pre></div><br/><p>Regards,</p><p>fjorger.</p>									</div>
			</article>

			
		
			
		
	
	<div class="pagination"><div class="pagination-number">Page 3 of 25</div><nav><ul><li><a href="viewtopic.php%3Fid=43237&amp;p=1.html">1</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=2.html">2</a></li><li class="pagination-current"><span>3</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=4.html">4</a></li><li><a href="viewtopic.php%3Fid=43237&amp;p=5.html">5</a></li><li class="pagination-ellipsis"><span>...</span></li><li><a href="viewtopic.php%3Fid=43237&amp;p=25.html">25</a></li></ul></nav></div>
</main>

</div>


<!-- Created in a hurry and not indicative of usual code quality. Here's a number: 0 -->

</body>
</html>